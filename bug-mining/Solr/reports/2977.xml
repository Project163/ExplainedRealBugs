<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:13:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9165] Problems with the spellcheck component  running search with cursor</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9165</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I&apos;m having some problems with the spellcheck component, specifically, running a search with cursors.  &lt;/p&gt;

&lt;p&gt;When I run the following query:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://192.1.1.13:8983/solr/docs/search?q=insendio&amp;amp;shards.qt=/search&amp;amp;shards=192.1.1.14:8983/solr/docs,192.1.1.15:8983/solr/docs&amp;amp;fl=id&amp;amp;spellcheck=true&amp;amp;sort=score&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://192.1.1.13:8983/solr/docs/search?q=insendio&amp;amp;shards.qt=/search&amp;amp;shards=192.1.1.14:8983/solr/docs,192.1.1.15:8983/solr/docs&amp;amp;fl=id&amp;amp;spellcheck=true&amp;amp;sort=score&lt;/a&gt; desc,id asc&lt;/p&gt;

&lt;p&gt;the following collations are returned&lt;br/&gt;
&amp;lt;lst name=&quot;collations&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;lst name=&quot;collation&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;str name=&quot;collationQuery&quot;&amp;gt;incendio&amp;lt;/str&amp;gt;&lt;br/&gt;
        &amp;lt;int name=&quot;hits&quot;&amp;gt;485&amp;lt;/int&amp;gt;&lt;br/&gt;
        &amp;lt;lst name=&quot;misspellingsAndCorrections&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;str name=&quot;insendio&quot;&amp;gt;incendio&amp;lt;/str&amp;gt;&lt;br/&gt;
        &amp;lt;/lst&amp;gt;&lt;br/&gt;
    &amp;lt;/lst&amp;gt;&lt;br/&gt;
&amp;lt;/lst&amp;gt;&lt;/p&gt;


&lt;p&gt;Instead, when I try to run the same query but this time using cursors&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://192.1.1.13:8983/solr/docs/search?q=insendio&amp;amp;shards.qt=/search&amp;amp;shards=192.1.1.14:8983/solr/docs,192.1.1.15:8983/solr/docs&amp;amp;fl=id&amp;amp;spellcheck=true&amp;amp;sort=score&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://192.1.1.13:8983/solr/docs/search?q=insendio&amp;amp;shards.qt=/search&amp;amp;shards=192.1.1.14:8983/solr/docs,192.1.1.15:8983/solr/docs&amp;amp;fl=id&amp;amp;spellcheck=true&amp;amp;sort=score&lt;/a&gt; desc,id asc&amp;amp;cursorMark=*&lt;/p&gt;

&lt;p&gt;no collations are returned&lt;/p&gt;

&lt;p&gt;&amp;lt;bool name=&quot;correctlySpelled&quot;&amp;gt;false&amp;lt;/bool&amp;gt;&amp;lt;lst name=&quot;collations&quot;/&amp;gt;&lt;/p&gt;


&lt;p&gt;and the server trace the following exception message.&lt;/p&gt;


&lt;p&gt;WARN  - 2016-05-26 14:14:58.472; &lt;span class=&quot;error&quot;&gt;&amp;#91;docs shard2 core_node4 docs_shard2_replica1&amp;#93;&lt;/span&gt; org.apache.solr.spelling.SpellCheckCollator; Exception trying to re-query to check if a spell check possibility would return any hits.&lt;br/&gt;
org.apache.solr.common.SolrException: Cursor functionality requires a sort containing a uniqueKey field tie breaker&lt;br/&gt;
	at org.apache.solr.search.CursorMark.&amp;lt;init&amp;gt;(CursorMark.java:93)&lt;br/&gt;
	at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:189)&lt;br/&gt;
	at org.apache.solr.spelling.SpellCheckCollator.collate(SpellCheckCollator.java:141)&lt;br/&gt;
	at org.apache.solr.handler.component.SpellCheckComponent.addCollationsToResponse(SpellCheckComponent.java:237)&lt;br/&gt;
	at org.apache.solr.handler.component.SpellCheckComponent.process(SpellCheckComponent.java:202)&lt;br/&gt;
	at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:255)&lt;br/&gt;
	at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:143)&lt;br/&gt;
	at org.apache.solr.core.SolrCore.execute(SolrCore.java:2064)&lt;br/&gt;
	at org.apache.solr.servlet.HttpSolrCall.execute(HttpSolrCall.java:654)&lt;br/&gt;
	at org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:450)&lt;br/&gt;
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:227)&lt;br/&gt;
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:196)&lt;br/&gt;
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)&lt;br/&gt;
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)&lt;br/&gt;
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:577)&lt;br/&gt;
	at org.eclipseInstead.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:223)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)&lt;br/&gt;
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)&lt;br/&gt;
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:215)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:110)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)&lt;br/&gt;
	at org.eclipse.jetty.server.Server.handle(Server.java:497)&lt;br/&gt;
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:310)&lt;br/&gt;
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257)&lt;br/&gt;
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)&lt;br/&gt;
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)&lt;br/&gt;
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12973162">SOLR-9165</key>
            <summary>Problems with the spellcheck component  running search with cursor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdyer">James Dyer</assignee>
                                    <reporter username="yami.veranes">Yamileydis Veranes</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 May 2016 18:54:47 +0000</created>
                <updated>Sat, 25 Jun 2016 20:33:52 +0000</updated>
                            <resolved>Fri, 17 Jun 2016 23:07:51 +0000</resolved>
                                    <version>5.2</version>
                                    <fixVersion>5.5.2</fixVersion>
                    <fixVersion>5.6</fixVersion>
                    <fixVersion>6.0.2</fixVersion>
                    <fixVersion>6.1</fixVersion>
                                    <component>spellchecker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15302774" author="jdyer" created="Thu, 26 May 2016 19:36:29 +0000"  >&lt;p&gt;Here&apos;s a failing unit test for this one: &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12806459/12806459_SOLR-9165.patch&quot; title=&quot;SOLR-9165.patch attached to SOLR-9165&quot;&gt;SOLR-9165.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;.&lt;/p&gt;</comment>
                            <comment id="15302793" author="jdyer" created="Thu, 26 May 2016 19:44:37 +0000"  >&lt;p&gt;Here&apos;s a straightforward fix:  don&apos;t request the cursorMark when testing the index for valid collations. &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12806459/12806459_SOLR-9165.patch&quot; title=&quot;SOLR-9165.patch attached to SOLR-9165&quot;&gt;SOLR-9165.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit to master and branch_6x shortly.&lt;/p&gt;</comment>
                            <comment id="15302807" author="jira-bot" created="Thu, 26 May 2016 19:48:01 +0000"  >&lt;p&gt;Commit 164128f977720acc408e88b595f8621bf9760b45 in lucene-solr&apos;s branch refs/heads/master from jdyer1&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=164128f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=164128f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9165&quot; title=&quot;Problems with the spellcheck component  running search with cursor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9165&quot;&gt;&lt;del&gt;SOLR-9165&lt;/del&gt;&lt;/a&gt;: disable &quot;cursorMark&quot; when testing for valid SpellCheck Collations&lt;/p&gt;</comment>
                            <comment id="15302811" author="jira-bot" created="Thu, 26 May 2016 19:48:36 +0000"  >&lt;p&gt;Commit f1f85e560f54371800a368aff801b7c24413ece6 in lucene-solr&apos;s branch refs/heads/branch_6x from jdyer1&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=f1f85e5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=f1f85e5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9165&quot; title=&quot;Problems with the spellcheck component  running search with cursor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9165&quot;&gt;&lt;del&gt;SOLR-9165&lt;/del&gt;&lt;/a&gt;: disable &quot;cursorMark&quot; when testing for valid SpellCheck Collations&lt;/p&gt;</comment>
                            <comment id="15302814" author="jdyer" created="Thu, 26 May 2016 19:50:23 +0000"  >&lt;p&gt;Yamileydis, thank you for reporting this.&lt;/p&gt;</comment>
                            <comment id="15337181" author="steve_rowe" created="Fri, 17 Jun 2016 23:06:22 +0000"  >&lt;p&gt;Reopening to backport to 6.0.2, 5.6 and 5.5.2.&lt;/p&gt;</comment>
                            <comment id="15337183" author="jira-bot" created="Fri, 17 Jun 2016 23:07:39 +0000"  >&lt;p&gt;Commit 845f57d16ad1b9f6b499d8597f2fb1edbd571474 in lucene-solr&apos;s branch refs/heads/branch_5_5 from jdyer1&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=845f57d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=845f57d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9165&quot; title=&quot;Problems with the spellcheck component  running search with cursor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9165&quot;&gt;&lt;del&gt;SOLR-9165&lt;/del&gt;&lt;/a&gt;: disable &quot;cursorMark&quot; when testing for valid SpellCheck Collations&lt;/p&gt;</comment>
                            <comment id="15337184" author="jira-bot" created="Fri, 17 Jun 2016 23:07:40 +0000"  >&lt;p&gt;Commit b4d81f784136b6c3fd19940055b812862baa99ca in lucene-solr&apos;s branch refs/heads/branch_5x from jdyer1&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b4d81f7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b4d81f7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9165&quot; title=&quot;Problems with the spellcheck component  running search with cursor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9165&quot;&gt;&lt;del&gt;SOLR-9165&lt;/del&gt;&lt;/a&gt;: disable &quot;cursorMark&quot; when testing for valid SpellCheck Collations&lt;/p&gt;</comment>
                            <comment id="15337185" author="jira-bot" created="Fri, 17 Jun 2016 23:07:42 +0000"  >&lt;p&gt;Commit 7b79571d948365658e00f0bb431c082dedca1aaf in lucene-solr&apos;s branch refs/heads/branch_6_0 from jdyer1&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7b79571&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7b79571&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9165&quot; title=&quot;Problems with the spellcheck component  running search with cursor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9165&quot;&gt;&lt;del&gt;SOLR-9165&lt;/del&gt;&lt;/a&gt;: disable &quot;cursorMark&quot; when testing for valid SpellCheck Collations&lt;/p&gt;</comment>
                            <comment id="15349802" author="steve_rowe" created="Sat, 25 Jun 2016 20:33:52 +0000"  >&lt;p&gt;Bulk close issues released with 5.5.2.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12806459" name="SOLR-9165.patch" size="3558" author="jdyer" created="Thu, 26 May 2016 19:44:37 +0000"/>
                            <attachment id="12806455" name="SOLR-9165.patch" size="2379" author="jdyer" created="Thu, 26 May 2016 19:36:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 21 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yk27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>