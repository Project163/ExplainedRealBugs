<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:15:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9309] SolrCloud RTG with multiple &quot;id&quot; params has inconsistent behavior if only 0 or 1 ids are returned</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9309</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;ul&gt;
	&lt;li&gt;RTG uses a diff reqponse format depending on whether a single id is requested or multiple ids are requested.&lt;/li&gt;
	&lt;li&gt;there are 2 ways to request multiple ids:
	&lt;ol&gt;
		&lt;li&gt;multiple &lt;tt&gt;id&lt;/tt&gt; params&lt;/li&gt;
		&lt;li&gt;comma seperated ids in one (or more) &lt;tt&gt;ids&lt;/tt&gt; param(s)&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;But in cloud mode, asking for multiple ids using the first method can incorrectly return the &quot;single&quot; doc response structure if 0 or 1 docs are returned (ie: because the other doc(s) don&apos;t exist in the index or were deleted).&lt;/p&gt;

&lt;p&gt;This inconsistency does not seem to exist in single node solr RTG&lt;/p&gt;

&lt;p&gt;(Example to follow in comment)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12989642">SOLR-9309</key>
            <summary>SolrCloud RTG with multiple &quot;id&quot; params has inconsistent behavior if only 0 or 1 ids are returned</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jul 2016 01:28:33 +0000</created>
                <updated>Sat, 8 Jun 2019 15:37:26 +0000</updated>
                            <resolved>Tue, 19 Jul 2016 18:12:50 +0000</resolved>
                                                    <fixVersion>6.2</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15378723" author="hossman" created="Fri, 15 Jul 2016 01:33:47 +0000"  >&lt;p&gt;Example of problem...&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;bin/solr -e cloud -noprompt&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;If you have 2 docs that exist in a cloud setup, you get a &quot;doclist&quot; structure in the response, regardless of which param syntax you use to request both of them (this is consistent with single node solr) ...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ curl &apos;http://localhost:8983/solr/gettingstarted/get?ids=xxx,yyy&apos;
{
  &quot;response&quot;:{&quot;numFound&quot;:2,&quot;start&quot;:0,&quot;docs&quot;:[
      {
        &quot;id&quot;:&quot;yyy&quot;,
        &quot;aaa_i&quot;:-459637688,
        &quot;_version_&quot;:1539876677329354752},
      {
        &quot;id&quot;:&quot;xxx&quot;,
        &quot;aaa_i&quot;:1532757419,
        &quot;_version_&quot;:1539876677341937664}]
  }}
$ curl &apos;http://localhost:8983/solr/gettingstarted/get?id=xxx&amp;amp;id=yyy&apos;
{
  &quot;response&quot;:{&quot;numFound&quot;:2,&quot;start&quot;:0,&quot;docs&quot;:[
      {
        &quot;id&quot;:&quot;yyy&quot;,
        &quot;aaa_i&quot;:-459637688,
        &quot;_version_&quot;:1539876677329354752},
      {
        &quot;id&quot;:&quot;xxx&quot;,
        &quot;aaa_i&quot;:1532757419,
        &quot;_version_&quot;:1539876677341937664}]
  }}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;if 1 of the ids requested do not exist in the collection, SolrCloud&apos;s RTG response structure becomes inconsistent depending on which param syntax you used &amp;#8211; using multiple &lt;tt&gt;id&lt;/tt&gt; params behaves as if only one doc was requested...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ curl &apos;http://localhost:8983/solr/gettingstarted/get?ids=xxx,bogus1&apos;
{
  &quot;response&quot;:{&quot;numFound&quot;:1,&quot;start&quot;:0,&quot;docs&quot;:[
      {
        &quot;id&quot;:&quot;xxx&quot;,
        &quot;aaa_i&quot;:1532757419,
        &quot;_version_&quot;:1539876677341937664}]
  }}
$ curl &apos;http://localhost:8983/solr/gettingstarted/get?ids=bogus2,bogus1&apos;
{
  &quot;response&quot;:{&quot;numFound&quot;:0,&quot;start&quot;:0,&quot;docs&quot;:[]
  }}
$ curl &apos;http://localhost:8983/solr/gettingstarted/get?id=xxx&amp;amp;id=bogus1&apos;
{
  &quot;doc&quot;:
  {
    &quot;id&quot;:&quot;xxx&quot;,
    &quot;aaa_i&quot;:1532757419,
    &quot;_version_&quot;:1539876677341937664}}
$ curl &apos;http://localhost:8983/solr/gettingstarted/get?id=bogus2&amp;amp;id=bogus1&apos;
{
  &quot;doc&quot;:null}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15383313" author="hossman" created="Mon, 18 Jul 2016 23:51:07 +0000"  >&lt;p&gt;Suggested fix:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;refactors duplicated &quot;param parsing&quot; &amp;amp; &quot;add doc/list to response&quot; logic into helper methods
	&lt;ul&gt;
		&lt;li&gt;this refactoring keeps the &quot;single node&quot; logic on the doc vs list choice, resolving the current inconsistencies&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;enables some (previously commented out) logic in TestRandomFlRTGCloud to assert that we get a list when we expect a list &amp;#8211; even if some/all of the ids requested don&apos;t exist.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15383334" author="hossman" created="Tue, 19 Jul 2016 00:04:52 +0000"  >&lt;p&gt;small tweak: remove some redundant calls to &lt;tt&gt;SolrParam.getParams&lt;/tt&gt; that i overlooked in previous patch.&lt;/p&gt;</comment>
                            <comment id="15384618" author="jira-bot" created="Tue, 19 Jul 2016 18:12:21 +0000"  >&lt;p&gt;Commit acbe59c70cf862c4f3c452c37e05061e1c939c04 in lucene-solr&apos;s branch refs/heads/branch_6x from Chris Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=acbe59c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=acbe59c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9309&quot; title=&quot;SolrCloud RTG with multiple &amp;quot;id&amp;quot; params has inconsistent behavior if only 0 or 1 ids are returned&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9309&quot;&gt;&lt;del&gt;SOLR-9309&lt;/del&gt;&lt;/a&gt;: Fix SolrCloud RTG response structure when multi ids requested but only 1 found&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 9aa639d45e31059bb2910dade6d7728ea075cd57)&lt;/p&gt;</comment>
                            <comment id="15384619" author="jira-bot" created="Tue, 19 Jul 2016 18:12:23 +0000"  >&lt;p&gt;Commit 9aa639d45e31059bb2910dade6d7728ea075cd57 in lucene-solr&apos;s branch refs/heads/master from Chris Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9aa639d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9aa639d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9309&quot; title=&quot;SolrCloud RTG with multiple &amp;quot;id&amp;quot; params has inconsistent behavior if only 0 or 1 ids are returned&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9309&quot;&gt;&lt;del&gt;SOLR-9309&lt;/del&gt;&lt;/a&gt;: Fix SolrCloud RTG response structure when multi ids requested but only 1 found&lt;/p&gt;</comment>
                            <comment id="15387691" author="jira-bot" created="Thu, 21 Jul 2016 13:37:30 +0000"  >&lt;p&gt;Commit 9aa639d45e31059bb2910dade6d7728ea075cd57 in lucene-solr&apos;s branch refs/heads/apiv2 from Chris Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9aa639d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9aa639d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9309&quot; title=&quot;SolrCloud RTG with multiple &amp;quot;id&amp;quot; params has inconsistent behavior if only 0 or 1 ids are returned&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9309&quot;&gt;&lt;del&gt;SOLR-9309&lt;/del&gt;&lt;/a&gt;: Fix SolrCloud RTG response structure when multi ids requested but only 1 found&lt;/p&gt;</comment>
                            <comment id="15439027" author="mikemccand" created="Fri, 26 Aug 2016 14:00:13 +0000"  >&lt;p&gt;Bulk close resolved issues after 6.2.0 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12974890">SOLR-9180</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12818708" name="SOLR-9309.patch" size="9244" author="hossman" created="Tue, 19 Jul 2016 00:04:52 +0000"/>
                            <attachment id="12818701" name="SOLR-9309.patch" size="8895" author="hossman" created="Mon, 18 Jul 2016 23:51:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i310an:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>