<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:16:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9455] Deleting a sub-shard in recovery state can mark parent shard as inactive</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9455</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When deleting a sub-shard after a failed split operation, the delete shard API unloads the replica cores and then deletes the shard state. But, say there were 2 replicas, if the following sequence occurs:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;1st replica got deleted&lt;/li&gt;
	&lt;li&gt;for any reason, the other replica published &quot;state=active&quot;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Then the overseer can switch slice states and put parent shard as inactive and the sub-shards as active. &lt;/p&gt;

&lt;p&gt;We should defensively update sub-shard state back to &quot;construction&quot; and only then invoke the unload action on replica cores.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13001032">SOLR-9455</key>
            <summary>Deleting a sub-shard in recovery state can mark parent shard as inactive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalin">Shalin Shekhar Mangar</assignee>
                                    <reporter username="shalin">Shalin Shekhar Mangar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Aug 2016 16:21:22 +0000</created>
                <updated>Wed, 2 Oct 2019 17:24:39 +0000</updated>
                            <resolved>Mon, 12 Sep 2016 11:56:47 +0000</resolved>
                                    <version>4.10.4</version>
                    <version>5.5.2</version>
                    <version>6.2</version>
                                    <fixVersion>6.2.1</fixVersion>
                    <fixVersion>6.3</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15446651" author="shalinmangar" created="Mon, 29 Aug 2016 18:23:49 +0000"  >&lt;p&gt;DeleteShardCmd now updates shard state to &quot;construction&quot; if it was in &quot;recovery&quot;.&lt;/p&gt;</comment>
                            <comment id="15446679" author="jira-bot" created="Mon, 29 Aug 2016 18:31:32 +0000"  >&lt;p&gt;Commit 2700b952119feb2d53a163d3374f56c85a0de339 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2700b95&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2700b95&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9455&quot; title=&quot;Deleting a sub-shard in recovery state can mark parent shard as inactive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9455&quot;&gt;&lt;del&gt;SOLR-9455&lt;/del&gt;&lt;/a&gt;: Deleting a sub-shard in recovery state can mark parent shard as inactive&lt;/p&gt;</comment>
                            <comment id="15446683" author="jira-bot" created="Mon, 29 Aug 2016 18:32:33 +0000"  >&lt;p&gt;Commit 937439a7a92beb0a0591f179dc4127b57c69eaa3 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=937439a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=937439a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9455&quot; title=&quot;Deleting a sub-shard in recovery state can mark parent shard as inactive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9455&quot;&gt;&lt;del&gt;SOLR-9455&lt;/del&gt;&lt;/a&gt;: Deleting a sub-shard in recovery state can mark parent shard as inactive&lt;br/&gt;
(cherry picked from commit 2700b95)&lt;/p&gt;</comment>
                            <comment id="15482810" author="shalinmangar" created="Mon, 12 Sep 2016 02:15:02 +0000"  >&lt;p&gt;Re-opened to back-port to 6.2.1&lt;/p&gt;</comment>
                            <comment id="15483627" author="jira-bot" created="Mon, 12 Sep 2016 09:33:48 +0000"  >&lt;p&gt;Commit 2e2ef4738cdfbb96a9502920c4ae2ea388be509b in lucene-solr&apos;s branch refs/heads/branch_6_2 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2e2ef47&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2e2ef47&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9455&quot; title=&quot;Deleting a sub-shard in recovery state can mark parent shard as inactive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9455&quot;&gt;&lt;del&gt;SOLR-9455&lt;/del&gt;&lt;/a&gt;: Deleting a sub-shard in recovery state can mark parent shard as inactive&lt;br/&gt;
(cherry picked from commit 2700b95)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 937439a)&lt;/p&gt;</comment>
                            <comment id="15508537" author="shalinmangar" created="Wed, 21 Sep 2016 03:03:19 +0000"  >&lt;p&gt;Closing after 6.2.1 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12999801">SOLR-9438</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12826052" name="SOLR-9455.patch" size="1725" author="shalin" created="Mon, 29 Aug 2016 18:23:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32yjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>