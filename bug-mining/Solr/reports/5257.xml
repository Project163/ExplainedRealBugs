<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:11:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-17649] Multivalue facets on enum field type returns empty result when using JsonFacet API</title>
                <link>https://issues.apache.org/jira/browse/SOLR-17649</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When using JsonFacet API on a multivalued EnumFieldType with facet method &apos;enum&apos; the &lt;font color=&quot;#232629&quot;&gt;FacetFieldProcessorByArrayDV&lt;/font&gt; will be used.&lt;/p&gt;

&lt;p&gt;At line 96 (&lt;font color=&quot;#232629&quot;&gt;FacetFieldProcessorByArrayDV.java)&lt;/font&gt; there is a check about allBuckets or missing buckets, which simply skip collect process.&lt;/p&gt;

&lt;p&gt;So at the moment there is no support for Multivalue faceting on facets which are using FacetFieldProcessorByArrayDV facet processor for collecting facets.&lt;/p&gt;

&lt;p&gt;Tested this behavior from 9.4 onwards, this feature was working on the 8.x releases.&lt;/p&gt;

&lt;p&gt;Multivalue faceting on EnumFieldType should be supported again.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13607116">SOLR-17649</key>
            <summary>Multivalue facets on enum field type returns empty result when using JsonFacet API</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsmiley">David Smiley</assignee>
                                    <reporter username="thomas.woeckinger">Thomas W&#246;ckinger</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 3 Feb 2025 13:49:11 +0000</created>
                <updated>Tue, 11 Mar 2025 23:42:57 +0000</updated>
                            <resolved>Wed, 12 Feb 2025 23:53:46 +0000</resolved>
                                    <version>9.4</version>
                    <version>9.5</version>
                    <version>9.4.1</version>
                    <version>9.6</version>
                    <version>9.7</version>
                    <version>9.6.1</version>
                    <version>9.8</version>
                                    <fixVersion>9.9</fixVersion>
                    <fixVersion>9.8.1</fixVersion>
                                    <component>Facet Module</component>
                    <component>FacetComponent</component>
                    <component>faceting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="8400">2h 20m</timespent>
                                <comments>
                            <comment id="17923324" author="thomas.woeckinger" created="Mon, 3 Feb 2025 15:06:04 +0000"  >&lt;p&gt;Further investigations shows that &lt;font color=&quot;#232629&quot;&gt;FacetFieldProcessorByArrayDV&lt;/font&gt; does not handle DocValuesType.&lt;font color=&quot;#232629&quot;&gt;SORTED_NUMERIC&lt;/font&gt; because in method &lt;font color=&quot;#232629&quot;&gt;findStartAndEndOrds&lt;/font&gt; FieldUtil.&lt;font color=&quot;#000000&quot;&gt;getSortedSetDocValues is used,&lt;/font&gt; which can not handle this kind of DocValuesType.&lt;/p&gt;</comment>
                            <comment id="17923346" author="thomas.woeckinger" created="Mon, 3 Feb 2025 15:57:01 +0000"  >&lt;p&gt;Digging digger shows up when using &lt;font color=&quot;#232629&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;/font&gt;FacetFieldProcessorByHashDV&lt;/font&gt;&lt;font color=&quot;&quot;&gt; instead of &lt;font color=&quot;#232629&quot;&gt;&lt;/font&gt;FacetFieldProcessorByArrayDV&lt;/font&gt; all works as expected, it seems that &lt;font color=&quot;#232629&quot;&gt;FacetFieldProcessorByArrayDV&lt;/font&gt; is not designed for DocValuesType.SORTED_NUMERIC.&lt;/p&gt;

&lt;p&gt;There currently exists a special handling for DocValues and PointField in FacetField line number 155, so i will extend that one and create a pull request afterwards.&lt;/p&gt;</comment>
                            <comment id="17923794" author="thomas.woeckinger" created="Tue, 4 Feb 2025 18:20:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krisden&quot; class=&quot;user-hover&quot; rel=&quot;krisden&quot;&gt;krisden&lt;/a&gt; as you are one of the last commiters, you may have a look at pull request&lt;/p&gt;</comment>
                            <comment id="17923979" author="thomas.woeckinger" created="Wed, 5 Feb 2025 09:37:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt; &lt;a href=&quot;https://github.com/dsmiley&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&#160;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gerlowskija&quot; class=&quot;user-hover&quot; rel=&quot;gerlowskija&quot;&gt;gerlowskija&lt;/a&gt; [ |https://github.com/gerlowskija] May you know who is responsible for this part of faceting code, to get a reviewer for it.&lt;/p&gt;</comment>
                            <comment id="17924310" author="dsmiley" created="Wed, 5 Feb 2025 23:33:04 +0000"  >&lt;p&gt;Might you surmise how this regression came to be?&lt;/p&gt;</comment>
                            <comment id="17924430" author="thomas.woeckinger" created="Thu, 6 Feb 2025 08:50:32 +0000"  >&lt;p&gt;&amp;gt; Might you surmise how this regression came to be?&lt;/p&gt;

&lt;p&gt;As the FacetFieldProcessor* exists for a very long time, i think the issue can only be introduced by refactoring of FacetField.&lt;font color=&quot;#232629&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;/font&gt;createFacetProcessor or its hierarchy. It seems that the issue is in there from beginning of the 9x branch.&lt;/font&gt;&lt;font color=&quot;&quot;&gt;&lt;/font&gt;&lt;/p&gt;</comment>
                            <comment id="17926592" author="jira-bot" created="Wed, 12 Feb 2025 22:09:34 +0000"  >&lt;p&gt;Commit f66aa9ed07fa76b5db45186073a9b2ac20c01fd4 in solr&apos;s branch refs/heads/main from Thomas W&#246;ckinger&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=f66aa9ed07f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=f66aa9ed07f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17649&quot; title=&quot;Multivalue facets on enum field type returns empty result when using JsonFacet API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17649&quot;&gt;&lt;del&gt;SOLR-17649&lt;/del&gt;&lt;/a&gt;: Fix JSON faceting on multiValued number types (#3158)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Add DV type checks to alert to a problem instead of silently returning nothing&lt;/li&gt;
	&lt;li&gt;Clarify isNumeric&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;---------&lt;/p&gt;

&lt;p&gt;Co-authored-by: Thomas W&#246;ckinger &amp;lt;two@silbergrau.com&amp;gt;&lt;br/&gt;
Co-authored-by: David Smiley &amp;lt;dsmiley@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17926610" author="jira-bot" created="Wed, 12 Feb 2025 23:17:38 +0000"  >&lt;p&gt;Commit 17f935fdfbbfcb9f8e47299c4c323b9a558a44a3 in solr&apos;s branch refs/heads/branch_9x from Thomas W&#246;ckinger&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=17f935fdfbb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=17f935fdfbb&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17649&quot; title=&quot;Multivalue facets on enum field type returns empty result when using JsonFacet API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17649&quot;&gt;&lt;del&gt;SOLR-17649&lt;/del&gt;&lt;/a&gt;: Fix JSON faceting on multiValued number types (#3158)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Add DV type checks to alert to a problem instead of silently returning nothing&lt;/li&gt;
	&lt;li&gt;Clarify isNumeric&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;---------&lt;/p&gt;

&lt;p&gt;Co-authored-by: Thomas W&#246;ckinger &amp;lt;two@silbergrau.com&amp;gt;&lt;br/&gt;
Co-authored-by: David Smiley &amp;lt;dsmiley@apache.org&amp;gt;&lt;br/&gt;
(cherry picked from commit f66aa9ed07fa76b5db45186073a9b2ac20c01fd4)&lt;/p&gt;</comment>
                            <comment id="17926618" author="dsmiley" created="Wed, 12 Feb 2025 23:53:46 +0000"  >&lt;p&gt;Thanks for contributing Thomas!&lt;/p&gt;</comment>
                            <comment id="17928005" author="thomas.woeckinger" created="Tue, 18 Feb 2025 10:02:41 +0000"  >&lt;p&gt;Thx for your work!&lt;/p&gt;

&lt;p&gt;As i read on the dev list it is planned to release a 9.8.1, is it possible to backport this issue?&lt;/p&gt;</comment>
                            <comment id="17928256" author="jira-bot" created="Wed, 19 Feb 2025 03:58:40 +0000"  >&lt;p&gt;Commit 6382b70c52aa47a0c4877061b34073b20497e1d1 in solr&apos;s branch refs/heads/branch_9_8 from Thomas W&#246;ckinger&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=6382b70c52a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=6382b70c52a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17649&quot; title=&quot;Multivalue facets on enum field type returns empty result when using JsonFacet API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17649&quot;&gt;&lt;del&gt;SOLR-17649&lt;/del&gt;&lt;/a&gt;: Fix JSON faceting on multiValued number types (#3158)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Add DV type checks to alert to a problem instead of silently returning nothing&lt;/li&gt;
	&lt;li&gt;Clarify isNumeric&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;---------&lt;/p&gt;

&lt;p&gt;Co-authored-by: Thomas W&#246;ckinger &amp;lt;two@silbergrau.com&amp;gt;&lt;br/&gt;
Co-authored-by: David Smiley &amp;lt;dsmiley@apache.org&amp;gt;&lt;br/&gt;
(cherry picked from commit f66aa9ed07fa76b5db45186073a9b2ac20c01fd4)&lt;/p&gt;</comment>
                            <comment id="17934382" author="houston" created="Tue, 11 Mar 2025 23:42:57 +0000"  >&lt;p&gt;Closing after the 9.8.1 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1tzao:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>