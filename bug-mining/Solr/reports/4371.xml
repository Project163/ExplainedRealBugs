<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:41:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13087] bin/solr&apos;s use of whoami can produce warnings</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13087</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The &lt;tt&gt;bin/solr&lt;/tt&gt; script uses &lt;tt&gt;whoami&lt;/tt&gt; to determine if it is running as root.&lt;br/&gt;
 That code is &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/bin/solr#L1089&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here &lt;/a&gt;and was introduced with &lt;a href=&quot;https://github.com/apache/lucene-solr/commit/7561461f738a447856bb93b0a847b0200fff4c9c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this commit &lt;/a&gt;for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7826&quot; title=&quot;Permission issues when creating cores with bin/solr as root user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7826&quot;&gt;&lt;del&gt;SOLR-7826&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This can produce a warning if the effective uid is not present in &lt;tt&gt;/etc/passwd&lt;/tt&gt;.&lt;br/&gt;
 For example:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ docker run -it -u 88888 bash bash -c &apos;whoami&apos;
whoami: unknown uid 88888
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is an unusual situation, but one I encountered and &lt;a href=&quot;https://github.com/docker-solr/docker-solr/commit/8a4e236e93d6fcda3e33937b332d1911c1e7b8f8#diff-1578307c887a49e90a57418e653ad7f6R49&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;worked around&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The use of &lt;tt&gt;whoami&lt;/tt&gt; can be avoided by using &lt;tt&gt;id -u&lt;/tt&gt;, or better yet &lt;tt&gt;$UID&lt;/tt&gt; /&#160;&lt;tt&gt;$EUID&lt;/tt&gt; which is built into bash and thus also avoids a subshell invocation. I&apos;m not aware of any downside to this approach.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13205838">SOLR-13087</key>
            <summary>bin/solr&apos;s use of whoami can produce warnings</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gerlowskija">Jason Gerlowski</assignee>
                                    <reporter username="makuk66">Martijn Koster</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Dec 2018 23:49:15 +0000</created>
                <updated>Sun, 29 Dec 2019 20:50:43 +0000</updated>
                            <resolved>Fri, 6 Dec 2019 20:47:02 +0000</resolved>
                                                    <fixVersion>8.4</fixVersion>
                    <fixVersion>9.0</fixVersion>
                                    <component>SolrCLI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16990147" author="jira-bot" created="Fri, 6 Dec 2019 20:31:53 +0000"  >&lt;p&gt;Commit 62e0222aeffeb8ca246c0d58e8168efda3a6920f in lucene-solr&apos;s branch refs/heads/master from Jason Gerlowski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=62e0222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=62e0222&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13087&quot; title=&quot;bin/solr&amp;#39;s use of whoami can produce warnings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13087&quot;&gt;&lt;del&gt;SOLR-13087&lt;/del&gt;&lt;/a&gt;: Remove &apos;whoami&apos; usage in bin/solr&lt;/p&gt;

&lt;p&gt;whoami displays a warning if the effective-uid is not in /etc/password.&lt;br/&gt;
This can happen in certain situations when running in a docker&lt;br/&gt;
container.  This replaces the &apos;whoami&apos; usage with a safer check.&lt;/p&gt;</comment>
                            <comment id="16990156" author="jira-bot" created="Fri, 6 Dec 2019 20:45:08 +0000"  >&lt;p&gt;Commit e44bcc05c44598eff3f60843018d72f8317fa3fe in lucene-solr&apos;s branch refs/heads/branch_8x from Jason Gerlowski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=e44bcc0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=e44bcc0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13087&quot; title=&quot;bin/solr&amp;#39;s use of whoami can produce warnings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13087&quot;&gt;&lt;del&gt;SOLR-13087&lt;/del&gt;&lt;/a&gt;: Remove &apos;whoami&apos; usage in bin/solr&lt;/p&gt;

&lt;p&gt;whoami displays a warning if the effective-uid is not in /etc/password.&lt;br/&gt;
This can happen in certain situations when running in a docker&lt;br/&gt;
container.  This replaces the &apos;whoami&apos; usage with a safer check.&lt;/p&gt;</comment>
                            <comment id="16990158" author="gerlowskija" created="Fri, 6 Dec 2019 20:46:44 +0000"  >&lt;p&gt;Hi Martijn, thanks for contributing this fix.  I did some manual testing and merged it into master and branch_8x, so it&apos;ll be in the 8.4 release.&lt;/p&gt;</comment>
                            <comment id="16990416" author="jira-bot" created="Sat, 7 Dec 2019 09:57:29 +0000"  >&lt;p&gt;Commit 62e0222aeffeb8ca246c0d58e8168efda3a6920f in lucene-solr&apos;s branch refs/heads/gradle-master from Jason Gerlowski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=62e0222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=62e0222&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13087&quot; title=&quot;bin/solr&amp;#39;s use of whoami can produce warnings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13087&quot;&gt;&lt;del&gt;SOLR-13087&lt;/del&gt;&lt;/a&gt;: Remove &apos;whoami&apos; usage in bin/solr&lt;/p&gt;

&lt;p&gt;whoami displays a warning if the effective-uid is not in /etc/password.&lt;br/&gt;
This can happen in certain situations when running in a docker&lt;br/&gt;
container.  This replaces the &apos;whoami&apos; usage with a safer check.&lt;/p&gt;</comment>
                            <comment id="16991245" author="makuk66" created="Mon, 9 Dec 2019 08:45:16 +0000"  >&lt;p&gt;Thanks Jason!&lt;/p&gt;</comment>
                            <comment id="17004975" author="jpountz" created="Sun, 29 Dec 2019 20:50:43 +0000"  >&lt;p&gt;Closing after the 8.4.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12952682" name="0001-SOLR-13087-Use-EUID-to-check-for-root-in-bin-solr.patch" size="1532" author="makuk66" created="Fri, 21 Dec 2018 13:29:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 46 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|u007lc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>