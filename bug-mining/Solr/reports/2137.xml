<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:58:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6573] Query elevation fails when localParams are used</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6573</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Elevation does not work when localParams are specified.&lt;br/&gt;
In example collection1 shipped with Solr query like this one &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/collection1/elevate?q=ipod&amp;amp;fl=id,title,[elevated]&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; properly returns elevated documents on top.&lt;/p&gt;

&lt;p&gt;If localParams are specified e.g. &lt;/p&gt;
{!q.op=AND}
&lt;p&gt; in query like &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/collection1/elevate?q=\{!q.op=AND\}ipod&amp;amp;fl=id,title,[elevated]&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;documents are not elevated anymore.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12744907">SOLR-6573</key>
            <summary>Query elevation fails when localParams are used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="janhoy">Jan H&#248;ydahl</assignee>
                                    <reporter username="rurbas">Radek Urbas</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Sep 2014 10:06:59 +0000</created>
                <updated>Mon, 9 May 2016 18:51:36 +0000</updated>
                            <resolved>Tue, 21 Oct 2014 20:17:03 +0000</resolved>
                                    <version>4.10.1</version>
                                    <fixVersion>4.10.2</fixVersion>
                    <fixVersion>5.0</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="14163418" author="janhoy" created="Wed, 8 Oct 2014 12:25:53 +0000"  >&lt;p&gt;Attaching patch with test case and quick fix, stripping localParam from query before evaluating against Elevation dictionary&lt;/p&gt;</comment>
                            <comment id="14170841" author="liwiusz" created="Tue, 14 Oct 2014 12:07:51 +0000"  >&lt;p&gt;Please include this fix in 4.10.2. &lt;/p&gt;</comment>
                            <comment id="14171022" author="janhoy" created="Tue, 14 Oct 2014 14:58:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liwiusz&quot; class=&quot;user-hover&quot; rel=&quot;liwiusz&quot;&gt;liwiusz&lt;/a&gt;, have you tested the patch? If you have the chance, please do and give feedback.&lt;/p&gt;

&lt;p&gt;Also appreciate quick review from another committer. Looked for some existing utility class for parsing LocalParams, but could only find one to parse the details from a localParam, not anything to throw it away if found...&lt;/p&gt;</comment>
                            <comment id="14174974" author="liwiusz" created="Fri, 17 Oct 2014 12:00:09 +0000"  >&lt;p&gt;Yes - I&apos;ve tested patch on example collection1 and results for query provided by Radek are ok with that fix (after removing backslashes added by Jira). &lt;/p&gt;

&lt;p&gt;edit: I patched 4.10.1&lt;/p&gt;</comment>
                            <comment id="14177447" author="jira-bot" created="Mon, 20 Oct 2014 20:47:52 +0000"  >&lt;p&gt;Commit 1633223 from janhoy@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1633223&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1633223&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6573&quot; title=&quot;Query elevation fails when localParams are used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6573&quot;&gt;&lt;del&gt;SOLR-6573&lt;/del&gt;&lt;/a&gt;: QueryElevationComponent now works with localParams in the query&lt;/p&gt;</comment>
                            <comment id="14177547" author="jira-bot" created="Mon, 20 Oct 2014 22:02:42 +0000"  >&lt;p&gt;Commit 1633239 from janhoy@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1633239&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1633239&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6573&quot; title=&quot;Query elevation fails when localParams are used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6573&quot;&gt;&lt;del&gt;SOLR-6573&lt;/del&gt;&lt;/a&gt;: QueryElevationComponent now works with localParams in the query - backport from trunk&lt;/p&gt;</comment>
                            <comment id="14177980" author="janhoy" created="Tue, 21 Oct 2014 05:40:47 +0000"  >&lt;p&gt;Good comment from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman_lucene%40fucit.org&quot; class=&quot;user-hover&quot; rel=&quot;hossman_lucene@fucit.org&quot;&gt;hossman_lucene@fucit.org&lt;/a&gt; about the case where people explicitly use localParam &quot;v&quot; in the query, e.g.:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;q={!lucene q.op=AND v=$qq}&amp;amp;qq=foo&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Then this patch will not help. Will leave this issue open and explore hoss&apos; suggestion from the mailing list about getting the query from the ResponseBuilder.&lt;/p&gt;</comment>
                            <comment id="14178502" author="jira-bot" created="Tue, 21 Oct 2014 15:13:09 +0000"  >&lt;p&gt;Commit 1633395 from janhoy@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1633395&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1633395&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6573&quot; title=&quot;Query elevation fails when localParams are used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6573&quot;&gt;&lt;del&gt;SOLR-6573&lt;/del&gt;&lt;/a&gt;: Updated after comments from Hoss, now also supports value parsed from localParam &quot;v=&quot;, using rb.getQparser().getLocalParams()&lt;/p&gt;</comment>
                            <comment id="14178543" author="jira-bot" created="Tue, 21 Oct 2014 15:47:00 +0000"  >&lt;p&gt;Commit 1633402 from janhoy@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1633402&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1633402&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6573&quot; title=&quot;Query elevation fails when localParams are used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6573&quot;&gt;&lt;del&gt;SOLR-6573&lt;/del&gt;&lt;/a&gt;: Updated after comments from Hoss, now also supports value parsed from localParam &quot;v=&quot;, using rb.getQparser().getLocalParams()&lt;/p&gt;</comment>
                            <comment id="14178987" author="jira-bot" created="Tue, 21 Oct 2014 20:14:09 +0000"  >&lt;p&gt;Commit 1633446 from janhoy@apache.org in branch &apos;dev/branches/lucene_solr_4_10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1633446&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1633446&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6573&quot; title=&quot;Query elevation fails when localParams are used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6573&quot;&gt;&lt;del&gt;SOLR-6573&lt;/del&gt;&lt;/a&gt;: QueryElevationComponent now works with localParams in the query - backport from trunk&lt;/p&gt;</comment>
                            <comment id="14179039" author="sheri.watkins@sabre.com" created="Tue, 21 Oct 2014 20:33:56 +0000"  >&lt;p&gt;Will this fix be included in the 4.10.2 version?&lt;/p&gt;</comment>
                            <comment id="14179049" author="janhoy" created="Tue, 21 Oct 2014 20:37:23 +0000"  >&lt;p&gt;Yes, this is now included in the (possible) 4.10.2 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12673588" name="SOLR-6573.patch" size="3488" author="janhoy" created="Wed, 8 Oct 2014 12:45:26 +0000"/>
                            <attachment id="12673586" name="SOLR-6573.patch" size="3450" author="janhoy" created="Wed, 8 Oct 2014 12:25:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20mlb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>