<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:24:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10933] LetStream variables are not evaluated in proper order</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10933</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The LetStream is currently using a HashMap to hold its variable mappings. This is problematic because the ordering of the variables will be lost as they are evaluated. The test cases pass currently because single letter variables in ascending order are used which by luck caused the variables to be evaluated in order.&lt;/p&gt;

&lt;p&gt;There is a very simple fix for this which is to use a LinkedHashMap to hold the variables to ensure they are evaluated in the order that they are received.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13081430">SOLR-10933</key>
            <summary>LetStream variables are not evaluated in proper order</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10003">Resolved</resolution>
                                        <assignee username="jbernste">Joel Bernstein</assignee>
                                    <reporter username="jbernste">Joel Bernstein</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Jun 2017 13:42:29 +0000</created>
                <updated>Tue, 8 Oct 2019 14:50:29 +0000</updated>
                            <resolved>Mon, 5 Mar 2018 17:35:43 +0000</resolved>
                                                    <fixVersion>6.7</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                    <component>streaming expressions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16057552" author="joel.bernstein" created="Wed, 21 Jun 2017 13:51:41 +0000"  >&lt;p&gt;Simple fix and change to a test case to verify the variables are being evaluated in order.&lt;/p&gt;</comment>
                            <comment id="16057579" author="jira-bot" created="Wed, 21 Jun 2017 14:12:01 +0000"  >&lt;p&gt;Commit eff583ee889e4098ff0f5debb3a05ec09b2e7b19 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbernste&quot; class=&quot;user-hover&quot; rel=&quot;jbernste&quot;&gt;jbernste&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=eff583e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=eff583e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10933&quot; title=&quot;LetStream variables are not evaluated in proper order&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10933&quot;&gt;&lt;del&gt;SOLR-10933&lt;/del&gt;&lt;/a&gt;: LetStream variables are not evaluated in proper order&lt;/p&gt;</comment>
                            <comment id="16057584" author="jira-bot" created="Wed, 21 Jun 2017 14:17:56 +0000"  >&lt;p&gt;Commit adfaf340e027ac73a672f6916f0e9be72cd9e3d1 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbernste&quot; class=&quot;user-hover&quot; rel=&quot;jbernste&quot;&gt;jbernste&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=adfaf34&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=adfaf34&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10933&quot; title=&quot;LetStream variables are not evaluated in proper order&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10933&quot;&gt;&lt;del&gt;SOLR-10933&lt;/del&gt;&lt;/a&gt;: LetStream variables are not evaluated in proper order&lt;/p&gt;</comment>
                            <comment id="16057631" author="susheel2777@gmail.com" created="Wed, 21 Jun 2017 14:48:41 +0000"  >&lt;p&gt;You saved my day, Joel. I was struggling on this bit and after noticing this issue, i changed my variables to single alphabet the problem disappeared.&lt;/p&gt;

&lt;p&gt;let(a=fetch(collection1,having(rollup(over=email,&lt;br/&gt;
                 count(email),&lt;br/&gt;
                select(search(collection1,&lt;br/&gt;
                        q=&lt;b&gt;:&lt;/b&gt;,&lt;br/&gt;
                        fl=&quot;id,business_email&quot;,&lt;br/&gt;
                        sort=&quot;business_email asc&quot;),&lt;br/&gt;
   id,&lt;br/&gt;
   business_email as email)),&lt;br/&gt;
    eq(count(email),1)),&lt;br/&gt;
fl=&quot;id,business_email as email&quot;,&lt;br/&gt;
on=&quot;email=business_email&quot;),&lt;br/&gt;
b=fetch(collection1,having(rollup(over=email,&lt;br/&gt;
                 count(email),&lt;br/&gt;
                select(search(collection1,&lt;br/&gt;
                        q=&lt;b&gt;:&lt;/b&gt;,&lt;br/&gt;
                        fl=&quot;id,personal_email&quot;,&lt;br/&gt;
                        sort=&quot;personal_email asc&quot;),&lt;br/&gt;
   id,&lt;br/&gt;
   personal_email as email)),&lt;br/&gt;
    eq(count(email),1)),&lt;br/&gt;
fl=&quot;id,personal_email as email&quot;,&lt;br/&gt;
on=&quot;email=personal_email&quot;),&lt;br/&gt;
c=hashJoin(get(a),hashed=get(b),on=&quot;email&quot;),&lt;br/&gt;
d=hashJoin(get(b),hashed=get(a),on=&quot;email&quot;),&lt;br/&gt;
e=select(get(a),id,email),&lt;br/&gt;
get(e)&lt;br/&gt;
)&lt;/p&gt;</comment>
                            <comment id="16058221" author="joel.bernstein" created="Wed, 21 Jun 2017 21:01:12 +0000"  >&lt;p&gt;Wow, that is a complicated expression. Are you just experimenting with the syntax?&lt;/p&gt;</comment>
                            <comment id="16386393" author="ctargett" created="Mon, 5 Mar 2018 17:18:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbernste&quot; class=&quot;user-hover&quot; rel=&quot;jbernste&quot;&gt;jbernste&lt;/a&gt;, looks like you made some commits to this some months ago, can it be resolved?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12873875" name="SOLR-10933.patch" size="2204" author="jbernste" created="Wed, 21 Jun 2017 13:50:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 37 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gjqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>