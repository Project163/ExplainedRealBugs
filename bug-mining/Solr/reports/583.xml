<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:20:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-2085] SolrJ fails with a NullPointerException when the order of result components changes</title>
                <link>https://issues.apache.org/jira/browse/SOLR-2085</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When using a custom search component in Solr I noticed that the order of the &quot;params&quot;, &quot;response&quot; and &quot;facet_counts&quot; fields in the response changed. Normally the &quot;response&quot; field is included before the &quot;facet_counts&quot; field, but in my result it first returned &quot;facet_counts&quot; and then &quot;response&quot;. This is of course a valid and semantically identical result object, but it causes SolrJ to fail with a NullPointerException.&lt;/p&gt;

&lt;p&gt;The reason for this NPE is that SolrJ in org.apache.solr.client.solrj.response.QueryResponse.setResponse(NamedList&amp;lt;Object&amp;gt; res) uses a loop through the response components and right after encountering &quot;facet_counts&quot; calls extractFacetInfo( _facetInfo ). That method uses _results which is null if the &quot;response&quot; component has not been encountered yet. (It is handled and set a few lines above the call to extractFacetInfo).&lt;/p&gt;

&lt;p&gt;The solution is to move the call to extractFacetInfo() on line 99 out of the for-loop. Please see the attached simple patch for the solution.&lt;/p&gt;

&lt;p&gt;I have also checked the three other initialization calls that are made directly after encountering a result (extractDebugInfo, extractHighlightingInfo and extractSpellCheckInfo), the problem does not apply to those because the methods don&apos;t access global fields that need to be initialized.&lt;/p&gt;

&lt;p&gt;Note: It would be great if this could be applied to a maintenance release as it saves people from running a custom build to be able to use complex search components with SolrJ.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12472365">SOLR-2085</key>
            <summary>SolrJ fails with a NullPointerException when the order of result components changes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="t0mas">Tomas Salfischberger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Aug 2010 12:46:28 +0000</created>
                <updated>Wed, 30 Mar 2011 15:45:21 +0000</updated>
                            <resolved>Fri, 28 Jan 2011 00:46:03 +0000</resolved>
                                    <version>1.4</version>
                                    <fixVersion>3.1</fixVersion>
                    <fixVersion>4.0-ALPHA</fixVersion>
                                    <component>clients - java</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12987858" author="hossman" created="Fri, 28 Jan 2011 00:46:03 +0000"  >&lt;p&gt;Thanks for the patch Tomas.&lt;/p&gt;

&lt;p&gt;By the looks of it, someone already fixed the NPE, but the code would still behave differently depending on the output order &amp;#8211; i&apos;ve added your patch along with a note about why delayed execution is important.&lt;/p&gt;

&lt;p&gt;Committed revision 1064386. - trunk&lt;br/&gt;
Committed revision 1064390. - 3x&lt;/p&gt;</comment>
                            <comment id="13013030" author="gsingers" created="Wed, 30 Mar 2011 15:45:21 +0000"  >&lt;p&gt;Bulk close for 3.1.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12452924" name="SOLR-2085-QueryResponse.patch" size="679" author="t0mas" created="Tue, 24 Aug 2010 12:47:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5417</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03mw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19142</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>