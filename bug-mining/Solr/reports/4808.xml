<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:49:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-15983] ClassCastException in UpdateLog$LogReplayer.doReplay</title>
                <link>https://issues.apache.org/jira/browse/SOLR-15983</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;stacktrace:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
... ERROR ... o.a.s.u.UpdateLog java.lang.ClassCastException: java.util.ArrayList cannot be &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt; to java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;
	at org.apache.solr.common.util.NamedList.getName(NamedList.java:175)
	at org.apache.solr.common.util.NamedList.toString(NamedList.java:397)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.valueOf(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.java:2994)
	at java.lang.StringBuilder.append(StringBuilder.java:131)
	at org.apache.solr.update.processor.LogUpdateProcessorFactory$LogUpdateProcessor.getLogStringAndClearRspToLog(LogUpdateProcessorFactory.java:212)
	at org.apache.solr.update.processor.LogUpdateProcessorFactory$LogUpdateProcessor.finish(LogUpdateProcessorFactory.java:187)
	at org.apache.solr.update.UpdateLog$LogReplayer.doReplay(UpdateLog.java:1980)
	at org.apache.solr.update.UpdateLog$LogReplayer.run(UpdateLog.java:1762)
	at org.apache.solr.update.UpdateLog.lambda$applyBufferedUpdates$5(UpdateLog.java:1703)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:209)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13426676">SOLR-15983</key>
            <summary>ClassCastException in UpdateLog$LogReplayer.doReplay</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cpoerschke">Christine Poerschke</assignee>
                                    <reporter username="cpoerschke">Christine Poerschke</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Feb 2022 17:36:24 +0000</created>
                <updated>Fri, 17 Oct 2025 20:05:37 +0000</updated>
                            <resolved>Thu, 24 Feb 2022 11:39:04 +0000</resolved>
                                                    <fixVersion>9.0</fixVersion>
                    <fixVersion>10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="10200">2h 50m</timespent>
                                <comments>
                            <comment id="17487196" author="cpoerschke" created="Fri, 4 Feb 2022 17:37:28 +0000"  >&lt;p&gt;interpretation:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the update processor can be called from multiple threads&lt;/li&gt;
	&lt;li&gt;the &lt;tt&gt;toLog&lt;/tt&gt; is a &lt;tt&gt;NamedList&lt;/tt&gt; and concurrent access leads to corruption which manifests in &lt;tt&gt;NamedList.toString&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;history:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2804&quot; title=&quot;Logging error causes entire DIH process to fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2804&quot;&gt;&lt;del&gt;SOLR-2804&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3314&quot; title=&quot;DIH with multi-threading throws exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3314&quot;&gt;&lt;del&gt;SOLR-3314&lt;/del&gt;&lt;/a&gt; describe something similar in DIH code (but this here is not data import related)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;solution ideas code link:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.11.1/solr/core/src/java/org/apache/solr/update/processor/LogUpdateProcessorFactory.java#L73&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.11.1/solr/core/src/java/org/apache/solr/update/processor/LogUpdateProcessorFactory.java#L73&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;solution ideas:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;keep &lt;tt&gt;toLog&lt;/tt&gt; as a &lt;tt&gt;NamedList&lt;/tt&gt; but make use of it thread-safe&lt;/li&gt;
	&lt;li&gt;replace &lt;tt&gt;NamedList&lt;/tt&gt; with something else e.g. &lt;tt&gt;ConcurrentHashMap&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;something else&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17487212" author="cpoerschke" created="Fri, 4 Feb 2022 18:02:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;... keep &lt;tt&gt;toLog&lt;/tt&gt; as a &lt;tt&gt;NamedList&lt;/tt&gt; but make use of it thread-safe ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/solr/pull/597&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/pull/597&lt;/a&gt; takes that approach.&lt;/p&gt;</comment>
                            <comment id="17487312" author="dsmiley" created="Fri, 4 Feb 2022 21:25:23 +0000"  >&lt;p&gt;Sorry, but UpdateRequestProcessor&apos;s are not designed to be thread-safe.  This was also called out by Hoss on the original issue you point to in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2804&quot; title=&quot;Logging error causes entire DIH process to fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2804&quot;&gt;&lt;del&gt;SOLR-2804&lt;/del&gt;&lt;/a&gt;.  Based on the stack in the description, I see that LogReplayer is doing replays in parallel with an Executor &lt;em&gt;but it&apos;s re-using the same chain&lt;/em&gt;.  That is the root cause.&lt;/p&gt;</comment>
                            <comment id="17488224" author="cpoerschke" created="Mon, 7 Feb 2022 16:18:48 +0000"  >&lt;p&gt;Thanks for that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;! Yes, I was in a bit of a rush on Friday and didn&apos;t read the other issues notes fully, oops.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;... something else ...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/apache/solr/pull/601&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/pull/601&lt;/a&gt; proposes to create separate UpdateRequestProcessor objects, one for each executor job.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;... but it&apos;s re-using the same chain. ...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I did not understand this bit, the re-use of &lt;tt&gt;processorChain&lt;/tt&gt; seems unproblematic since &lt;tt&gt;processorChain.createProcessor&lt;/tt&gt; creates a separate object, no?&lt;/p&gt;</comment>
                            <comment id="17488380" author="dsmiley" created="Mon, 7 Feb 2022 19:19:03 +0000"  >&lt;p&gt;Hmm; you&apos;re right; I&apos;m not sure. &#160;Looks like a fun bug to find.&lt;/p&gt;</comment>
                            <comment id="17491941" author="jira-bot" created="Mon, 14 Feb 2022 11:10:00 +0000"  >&lt;p&gt;Commit fe6606583189ea9196d9345521f3f5f76752be3c in solr&apos;s branch refs/heads/main from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=fe66065&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=fe66065&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15983&quot; title=&quot;ClassCastException in UpdateLog$LogReplayer.doReplay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15983&quot;&gt;&lt;del&gt;SOLR-15983&lt;/del&gt;&lt;/a&gt;: change UpdateLog.RecoveryInfo.errors to AtomicInteger (#609)&lt;/p&gt;
</comment>
                            <comment id="17495501" author="jira-bot" created="Mon, 21 Feb 2022 12:30:08 +0000"  >&lt;p&gt;Commit 7c0767064eeaddda5ecf8e5b0ff0e07524dfafce in solr&apos;s branch refs/heads/main from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=7c07670&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=7c07670&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15983&quot; title=&quot;ClassCastException in UpdateLog$LogReplayer.doReplay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15983&quot;&gt;&lt;del&gt;SOLR-15983&lt;/del&gt;&lt;/a&gt;: parallel log replay now uses separate UpdateRequestProcessor objects (#601)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;parallel log replay now uses separate UpdateRequestProcessor objects&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;executor local variable in UpdateLog.doReplay can be null&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Use a ThreadLocal of the URP to avoid re-creating and avoid excessive finish() calls and to make it clearer that the URPs are used correctly (have correct lifecycle and aren&apos;t shared).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;remove unused procThreadLocal member in favour of local variable with same name&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;just one for-loop on procPool to finish-and-close&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;add solr/CHANGES.txt entry&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Co-authored-by: David Smiley &amp;lt;dsmiley@salesforce.com&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17495530" author="jira-bot" created="Mon, 21 Feb 2022 13:42:00 +0000"  >&lt;p&gt;Commit 7d911d81421ca91e7e7e6d6da1f9043712426c4a in solr&apos;s branch refs/heads/branch_9x from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=7d911d8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=7d911d8&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15983&quot; title=&quot;ClassCastException in UpdateLog$LogReplayer.doReplay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15983&quot;&gt;&lt;del&gt;SOLR-15983&lt;/del&gt;&lt;/a&gt;: change UpdateLog.RecoveryInfo.errors to AtomicInteger (#609)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit fe6606583189ea9196d9345521f3f5f76752be3c)&lt;/p&gt;</comment>
                            <comment id="17495531" author="jira-bot" created="Mon, 21 Feb 2022 13:42:01 +0000"  >&lt;p&gt;Commit 7d61190a0d917b9319c30d76328d62d1435dbe58 in solr&apos;s branch refs/heads/branch_9x from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=7d61190&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=7d61190&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15983&quot; title=&quot;ClassCastException in UpdateLog$LogReplayer.doReplay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15983&quot;&gt;&lt;del&gt;SOLR-15983&lt;/del&gt;&lt;/a&gt;: parallel log replay now uses separate UpdateRequestProcessor objects (#601)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;parallel log replay now uses separate UpdateRequestProcessor objects&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;executor local variable in UpdateLog.doReplay can be null&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Use a ThreadLocal of the URP to avoid re-creating and avoid excessive finish() calls and to make it clearer that the URPs are used correctly (have correct lifecycle and aren&apos;t shared).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;remove unused procThreadLocal member in favour of local variable with same name&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;just one for-loop on procPool to finish-and-close&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;add solr/CHANGES.txt entry&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Co-authored-by: David Smiley &amp;lt;dsmiley@salesforce.com&amp;gt;&lt;br/&gt;
(cherry picked from commit 7c0767064eeaddda5ecf8e5b0ff0e07524dfafce)&lt;/p&gt;</comment>
                            <comment id="17495532" author="cpoerschke" created="Mon, 21 Feb 2022 13:44:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janhoy&quot; class=&quot;user-hover&quot; rel=&quot;janhoy&quot;&gt;janhoy&lt;/a&gt; as 9.0 release manager: I&apos;d like to backport this fix to the &lt;tt&gt;branch_9_0&lt;/tt&gt; branch, is that okay?&lt;/p&gt;</comment>
                            <comment id="17495538" author="dsmiley" created="Mon, 21 Feb 2022 14:00:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;&#160;next time, please clean up the commit message you see in GitHub squash merge dialog. &#160;The default is just a concatenation of the commit messages, which is what this looks like above. &#160;For example, having &quot;add solr/CHANGES.txt entry&quot; is a sign you forgot to edit this. &#160;FWIW I often take the CHANGES.txt wording and then if there&apos;s some more details maybe add bullets.&lt;/p&gt;</comment>
                            <comment id="17495579" author="cpoerschke" created="Mon, 21 Feb 2022 15:19:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;... The default is just a concatenation of the commit messages ... a sign you forgot to edit this. ...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Well, I &lt;em&gt;did&lt;/em&gt; actually change the default i.e. I removed the &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15983&quot; title=&quot;ClassCastException in UpdateLog$LogReplayer.doReplay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15983&quot;&gt;&lt;del&gt;SOLR-15983&lt;/del&gt;&lt;/a&gt;:&quot; prefix from the first bullet point so that &quot;ASF subversion and git services&quot; does not put two comments on the same ticket. But yeah otherwise I preserved the history literally, which usually I don&apos;t, but here the &lt;tt&gt;ThreadLocal&lt;/tt&gt; description was nice to keep. A more edited summary would have been another way to do it, yes.&lt;/p&gt;</comment>
                            <comment id="17497347" author="jira-bot" created="Thu, 24 Feb 2022 11:37:37 +0000"  >&lt;p&gt;Commit d23c5a3193d9183d1b16d63800e3b18d26b56e50 in solr&apos;s branch refs/heads/branch_9_0 from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=d23c5a3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=d23c5a3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15983&quot; title=&quot;ClassCastException in UpdateLog$LogReplayer.doReplay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15983&quot;&gt;&lt;del&gt;SOLR-15983&lt;/del&gt;&lt;/a&gt;: change UpdateLog.RecoveryInfo.errors to AtomicInteger (#609)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit fe6606583189ea9196d9345521f3f5f76752be3c)&lt;br/&gt;
(cherry picked from commit 7d911d81421ca91e7e7e6d6da1f9043712426c4a)&lt;/p&gt;</comment>
                            <comment id="17497348" author="jira-bot" created="Thu, 24 Feb 2022 11:37:38 +0000"  >&lt;p&gt;Commit bc501bab8a599ec313b042844611bc4192899f10 in solr&apos;s branch refs/heads/branch_9_0 from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=bc501ba&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=bc501ba&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15983&quot; title=&quot;ClassCastException in UpdateLog$LogReplayer.doReplay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15983&quot;&gt;&lt;del&gt;SOLR-15983&lt;/del&gt;&lt;/a&gt;: parallel log replay now uses separate UpdateRequestProcessor objects (#601)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;parallel log replay now uses separate UpdateRequestProcessor objects&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;executor local variable in UpdateLog.doReplay can be null&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Use a ThreadLocal of the URP to avoid re-creating and avoid excessive finish() calls and to make it clearer that the URPs are used correctly (have correct lifecycle and aren&apos;t shared).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;remove unused procThreadLocal member in favour of local variable with same name&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;just one for-loop on procPool to finish-and-close&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;add solr/CHANGES.txt entry&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Co-authored-by: David Smiley &amp;lt;dsmiley@salesforce.com&amp;gt;&lt;br/&gt;
(cherry picked from commit 7c0767064eeaddda5ecf8e5b0ff0e07524dfafce)&lt;br/&gt;
(cherry picked from commit 7d61190a0d917b9319c30d76328d62d1435dbe58)&lt;/p&gt;

&lt;p&gt;Resolved Conflicts:&lt;br/&gt;
	solr/CHANGES.txt&lt;br/&gt;
	solr/core/src/java/org/apache/solr/update/UpdateLog.java&lt;/p&gt;</comment>
                            <comment id="17535366" author="janhoy" created="Thu, 12 May 2022 00:26:21 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13589524">SOLR-17413</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13158357">SOLR-12338</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0z9q0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>