<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:50:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-5950] In SolrJ&apos;s Maven Dependency Graph, slf4j-api is optional, which breaks plain solrj users</title>
                <link>https://issues.apache.org/jira/browse/SOLR-5950</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;To run as a Solr Client, you need slf4j actually configured in your classpath, because HttpSolrServer hardly depends on it, also the used libs like Commons Httpclient (and others)&lt;/p&gt;

&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3706&quot; title=&quot;Ship setup to log with log4j.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3706&quot;&gt;&lt;del&gt;SOLR-3706&lt;/del&gt;&lt;/a&gt; &lt;b&gt;all&lt;/b&gt; of the slf4j JARs were made optional, but because we did not exclude the dependencies of httpclient and others explicitely, the dependency was still included by maven automatically for a user that used SolrJ - so effectively the &quot;optional&quot; was never working.&lt;/p&gt;

&lt;p&gt;In 4.7, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; now explicitely excluded all dependencies of all deps included via IVY. By that the implicit dependency by httpclient was killed.&lt;/p&gt;

&lt;p&gt;When I updated a project from SolrJ 4.6 to SolrJ 4.7, it suddenly failed to run, because it failed with a classnotfound ex directly after starting. Not even the default logging to console was enabled (which is provided by slf4j). This is bad for users of SolrJ, because they have to explicitely add a dependency for something that really required to use SolrJ.&lt;/p&gt;

&lt;p&gt;The reason for excluding slf4j-api was that we don&apos;t want to have it in the WAR file, so it was made optional. But that is wrong:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;In trunk we no longer have a WAR file&lt;/li&gt;
	&lt;li&gt;The primary user of SolrJ via Maven is not somebody who wants to install Solr in his appserver, its the user needing the client.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So we should restore the state from Solr 4.6, where the dep was implicitely included, by making it non-optional in Maven.&lt;/p&gt;

&lt;p&gt;When building the WAR file in 4.x we should exclude it somehow via Maven Magic(tm).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12706272">SOLR-5950</key>
            <summary>In SolrJ&apos;s Maven Dependency Graph, slf4j-api is optional, which breaks plain solrj users</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sarowe">Steven Rowe</assignee>
                                    <reporter username="uschindler">Uwe Schindler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Apr 2014 19:52:10 +0000</created>
                <updated>Mon, 9 May 2016 18:44:18 +0000</updated>
                            <resolved>Fri, 4 Apr 2014 00:34:00 +0000</resolved>
                                    <version>4.7</version>
                    <version>4.7.1</version>
                                    <fixVersion>4.7.2</fixVersion>
                    <fixVersion>4.8</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>clients - java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13958571" author="steve_rowe" created="Thu, 3 Apr 2014 06:45:11 +0000"  >&lt;p&gt;Trunk patch that makes the org.slf4j:slf4j-api dependency not optional for solrj.  This dependency remains optional for all other Solr modules.&lt;/p&gt;</comment>
                            <comment id="13958741" author="markrmiller@gmail.com" created="Thu, 3 Apr 2014 11:57:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;In trunk we no longer have a WAR file&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The problem there is that we &lt;b&gt;do&lt;/b&gt; still have a WAR file and we do still want logging jars to be easily swapped in trunk.&lt;/p&gt;
</comment>
                            <comment id="13958758" author="thetaphi" created="Thu, 3 Apr 2014 12:19:48 +0000"  >&lt;p&gt;The WAR file is no longer deployed to Maven.&lt;/p&gt;</comment>
                            <comment id="13958779" author="steve_rowe" created="Thu, 3 Apr 2014 12:53:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;The WAR file is no longer deployed to Maven.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Uwe, the WAR file is still deployed to Maven, and will be for all 4.X releases, e.g. 4.7.1: &lt;a href=&quot;http://central.maven.org/maven2/org/apache/solr/solr/4.7.1/solr-4.7.1.war&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://central.maven.org/maven2/org/apache/solr/solr/4.7.1/solr-4.7.1.war&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13958788" author="markrmiller@gmail.com" created="Thu, 3 Apr 2014 13:03:57 +0000"  >&lt;p&gt;He was just talking about 5x &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Got pulled out of context a bit.&lt;/p&gt;</comment>
                            <comment id="13958812" author="steve_rowe" created="Thu, 3 Apr 2014 13:38:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;He was just talking about 5x  Got pulled out of context a bit.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I thought maybe that&apos;s what he meant, but I wanted to make a definitive statement to make sure there are no misunderstandings.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;When building the WAR file in 4.x we should exclude it somehow via Maven Magic(tm).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The war deployed to Maven Central is built using Ant, and the Ant build already excludes all the SLF4J jars - the patch doesn&apos;t change this.&lt;/p&gt;

&lt;p&gt;For building the war using the Maven build, no Maven Magic required - I applied the patch to branch_4x and built the war, and the SLF4J jars are not included.  The war&apos;s POM lists all SLF4J dependencies as optional. And the Solrj POM does not list org.slf4j:slf4j-api as optional. &lt;/p&gt;

&lt;p&gt;I&apos;ll commit to trunk and backport to branch_4x and the lucene_solr_4_7 branch.&lt;/p&gt;</comment>
                            <comment id="13958869" author="thetaphi" created="Thu, 3 Apr 2014 14:57:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;I thought maybe that&apos;s what he meant, but I wanted to make a definitive statement to make sure there are no misunderstandings.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I was referring to trunk. There we no longer create and store the WAR in Maven.&lt;/p&gt;

&lt;p&gt;But the whole issue here is not really related to the WAR file: This is about making slf4j-log API non-optional for the solrj-Module. For using solrj with your project, you definitely need slf4j-api, otherwise you will get ClassNotFoundExceptions when starting the code or run tests (because solrj hardly depends on the log API).&lt;/p&gt;</comment>
                            <comment id="13958870" author="thetaphi" created="Thu, 3 Apr 2014 14:57:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;For building the war using the Maven build, no Maven Magic required - I applied the patch to branch_4x and built the war, and the SLF4J jars are not included. The war&apos;s POM lists all SLF4J dependencies as optional. And the Solrj POM does not list org.slf4j:slf4j-api as optional.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I will check this in a minute!&lt;/p&gt;</comment>
                            <comment id="13958893" author="thetaphi" created="Thu, 3 Apr 2014 15:39:42 +0000"  >&lt;p&gt;Hi Steve,&lt;br/&gt;
I applied the patch to 4.7 and fixed the diamonds. After that I ran it and checked the POM output. It looks fine to me, solrj has the required dependency.&lt;/p&gt;

&lt;p&gt;But I think the whole magic is not needed at all. Because solrj is required by almost all projects (contrib, solr-core,..) the declaration of &quot;optional&quot; there is not really needed? I think only the WAR file should have it optional, all others get it required, because they depend on solrj (so when you compile or use solr-core, it should also fetch solrj, if I understand it correctly?&lt;/p&gt;

&lt;p&gt;Please correct me if this is not true.&lt;/p&gt;

&lt;p&gt;In my opinion, all of solr should depend on slf4j-api (because its used as a hard dependency, it is not optional!). Only the WAR file should exclude it by making it optional.&lt;/p&gt;</comment>
                            <comment id="13958903" author="steve_rowe" created="Thu, 3 Apr 2014 15:52:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;In my opinion, all of solr should depend on slf4j-api (because its used as a hard dependency, it is not optional!). Only the WAR file should exclude it by making it optional.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree.  I&apos;ll fix.&lt;/p&gt;</comment>
                            <comment id="13958910" author="thetaphi" created="Thu, 3 Apr 2014 16:04:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;In my opinion, all of solr should depend on slf4j-api (because its used as a hard dependency, it is not optional!). Only the WAR file should exclude it by making it optional.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is, by the way, how it looked like in Solr 4.6.&lt;/p&gt;</comment>
                            <comment id="13959427" author="steve_rowe" created="Thu, 3 Apr 2014 23:34:35 +0000"  >&lt;p&gt;Separate trunk and branch_4x patches, since trunk doesn&apos;t have a war POM.&lt;/p&gt;

&lt;p&gt;On trunk, &lt;tt&gt;org.slf4j:slf4j-api&lt;/tt&gt; is a transitive dependency (not optional) in all modules in which it is a dependency.&lt;/p&gt;

&lt;p&gt;On branch_4x, &lt;tt&gt;org.slf4j:slf4j-api&lt;/tt&gt; is a transitive dependency (not optional) in all modules in which it is a dependency, except for the war POM, where it is optional.  When I build the war using Maven after applying the branch_4x patch, it does not contain the &lt;tt&gt;slf4j-api&lt;/tt&gt; jar.&lt;/p&gt;

&lt;p&gt;Committing shortly to trunk and branch_4x, then backporting from branch_4x to the lucene_solr_4_7 branch.&lt;/p&gt;</comment>
                            <comment id="13959438" author="jira-bot" created="Thu, 3 Apr 2014 23:49:10 +0000"  >&lt;p&gt;Commit 1584473 from sarowe@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1584473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1584473&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5950&quot; title=&quot;In SolrJ&amp;#39;s Maven Dependency Graph, slf4j-api is optional, which breaks plain solrj users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5950&quot;&gt;&lt;del&gt;SOLR-5950&lt;/del&gt;&lt;/a&gt;: Maven config: make the org.slf4j:slf4j-api dependency transitive (i.e., not optional) in all modules in which it&apos;s a dependency, including solrj, except for the WAR, where it will remain optional.&lt;/p&gt;</comment>
                            <comment id="13959447" author="jira-bot" created="Thu, 3 Apr 2014 23:56:00 +0000"  >&lt;p&gt;Commit 1584474 from sarowe@apache.org in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1584474&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1584474&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5950&quot; title=&quot;In SolrJ&amp;#39;s Maven Dependency Graph, slf4j-api is optional, which breaks plain solrj users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5950&quot;&gt;&lt;del&gt;SOLR-5950&lt;/del&gt;&lt;/a&gt;: Maven config: make the org.slf4j:slf4j-api dependency transitive (i.e., not optional) in all modules in which it&apos;s a dependency, including solrj, except for the WAR, where it will remain optional. (merged trunk r1584473)&lt;/p&gt;</comment>
                            <comment id="13959477" author="jira-bot" created="Fri, 4 Apr 2014 00:30:42 +0000"  >&lt;p&gt;Commit 1584480 from sarowe@apache.org in branch &apos;dev/branches/lucene_solr_4_7&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1584480&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1584480&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5950&quot; title=&quot;In SolrJ&amp;#39;s Maven Dependency Graph, slf4j-api is optional, which breaks plain solrj users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5950&quot;&gt;&lt;del&gt;SOLR-5950&lt;/del&gt;&lt;/a&gt;: Maven config: make the org.slf4j:slf4j-api dependency transitive (i.e., not optional) in all modules in which it&apos;s a dependency, including solrj, except for the WAR, where it will remain optional. (merged branch_4x r1584474)&lt;/p&gt;</comment>
                            <comment id="13959479" author="steve_rowe" created="Fri, 4 Apr 2014 00:34:00 +0000"  >&lt;p&gt;Committed to trunk, branch_4x and the lucene_solr_4_7 branch.&lt;/p&gt;

&lt;p&gt;Thanks Uwe!&lt;/p&gt;</comment>
                            <comment id="13959693" author="thetaphi" created="Fri, 4 Apr 2014 06:43:25 +0000"  >&lt;p&gt;Thanks Steve!&lt;/p&gt;</comment>
                            <comment id="13982510" author="thetaphi" created="Sun, 27 Apr 2014 23:25:34 +0000"  >&lt;p&gt;Close issue after release of 4.8.0&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12601393">SOLR-3706</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12638592" name="SOLR-5950.branch_4x.patch" size="6867" author="sarowe" created="Thu, 3 Apr 2014 23:34:35 +0000"/>
                            <attachment id="12638434" name="SOLR-5950.patch" size="2444" author="sarowe" created="Thu, 3 Apr 2014 06:45:11 +0000"/>
                            <attachment id="12638593" name="SOLR-5950.trunk.patch" size="6625" author="sarowe" created="Thu, 3 Apr 2014 23:34:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>384595</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 30 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1u99b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>384863</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>