<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:50:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-15964] Transient cores should not be unloaded/evicted while it&apos;s being used</title>
                <link>https://issues.apache.org/jira/browse/SOLR-15964</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When using &quot;transient cores&quot; (transient=true on the core and configure transientCacheSize in solr.xml), Solr will evict/unload a core that appears to be getting little use when there is pressure on this cache.  However, this mechanism doesn&apos;t truly check that the core isn&apos;t being used when making this decision.  It could happen that a core is undergoing a long running operation (huge indexing batch?) but otherwise nothing else, and assuming some cache pressure on many others cores during this time, Solr will then &quot;evict&quot; this core.  Solr will then consider this core unloaded even though it exists in memory and is open for this long-running operation for some time.  If by bad luck a request comes in to use this core, Solr will attempt to load a new SolrCore for it which will fail due to the write lock file.  At this point, the core is unusable until the node is restarted.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13425776">SOLR-15964</key>
            <summary>Transient cores should not be unloaded/evicted while it&apos;s being used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsmiley">David Smiley</assignee>
                                    <reporter username="dsmiley">David Smiley</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Jan 2022 13:43:30 +0000</created>
                <updated>Tue, 10 Jan 2023 20:45:33 +0000</updated>
                            <resolved>Tue, 22 Feb 2022 22:39:07 +0000</resolved>
                                                    <fixVersion>9.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="13800">3h 50m</timespent>
                                <comments>
                            <comment id="17488264" author="jira-bot" created="Mon, 7 Feb 2022 17:03:22 +0000"  >&lt;p&gt;Commit e4302b10ea9990823e3873e2aca23192d7b63bce in solr&apos;s branch refs/heads/main from David Smiley&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=e4302b1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=e4302b1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15964&quot; title=&quot;Transient cores should not be unloaded/evicted while it&amp;#39;s being used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15964&quot;&gt;&lt;del&gt;SOLR-15964&lt;/del&gt;&lt;/a&gt;: Transient cores: don&apos;t evict open ones (#580)&lt;/p&gt;

&lt;p&gt;Transient cores: be careful to not evict a core that is being used, either because of query/indexing, or because the core is undergoing a load/unload/reload operation at that moment.  If that were to happen, it could lead to errors with this core and it being stuck until the node is restarted.&lt;/p&gt;

&lt;p&gt;Also:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Removed CoreContainer methods not needed to be exposed by having the transient cache access the SolrCores from CoreContainer&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17488299" author="jira-bot" created="Mon, 7 Feb 2022 18:03:45 +0000"  >&lt;p&gt;Commit f6d60c375cdabfbd6d5e17b4050db362eb4dbff4 in solr&apos;s branch refs/heads/main from David Smiley&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=f6d60c3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=f6d60c3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15964&quot; title=&quot;Transient cores should not be unloaded/evicted while it&amp;#39;s being used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15964&quot;&gt;&lt;del&gt;SOLR-15964&lt;/del&gt;&lt;/a&gt;: move javadoc to correct method&lt;/p&gt;</comment>
                            <comment id="17488333" author="jira-bot" created="Mon, 7 Feb 2022 18:33:42 +0000"  >&lt;p&gt;Commit c77ebc67b17fe9789ea8cf5761993ee1848eeec1 in solr&apos;s branch refs/heads/branch_9x from David Smiley&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=c77ebc6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=c77ebc6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15964&quot; title=&quot;Transient cores should not be unloaded/evicted while it&amp;#39;s being used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15964&quot;&gt;&lt;del&gt;SOLR-15964&lt;/del&gt;&lt;/a&gt;: Transient cores: don&apos;t evict open ones (#580)&lt;/p&gt;

&lt;p&gt;Transient cores: be careful to not evict a core that is being used, either because of query/indexing, or because the core is undergoing a load/unload/reload operation at that moment.  If that were to happen, it could lead to errors with this core and it being stuck until the node is restarted.&lt;/p&gt;

&lt;p&gt;Also:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Removed CoreContainer methods not needed to be exposed by having the transient cache access the SolrCores from CoreContainer&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17495077" author="mdrob" created="Sun, 20 Feb 2022 02:53:22 +0000"  >&lt;p&gt;Reopening -&#160;I can&apos;t get this failure to reproduce locally, but Jenkins didn&apos;t like something about the test... &lt;a href=&quot;https://jenkins.thetaphi.de/view/Solr/job/Solr-main-MacOSX/666/testReport/org.apache.solr.core/TestLazyCores/testDontEvictUsedCore/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.thetaphi.de/view/Solr/job/Solr-main-MacOSX/666/testReport/org.apache.solr.core/TestLazyCores/testDontEvictUsedCore/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17496363" author="jira-bot" created="Tue, 22 Feb 2022 22:35:55 +0000"  >&lt;p&gt;Commit c1b5ec88552179c4390f9c9214032e6b5bc80015 in solr&apos;s branch refs/heads/main from David Smiley&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=c1b5ec8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=c1b5ec8&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15964&quot; title=&quot;Transient cores should not be unloaded/evicted while it&amp;#39;s being used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15964&quot;&gt;&lt;del&gt;SOLR-15964&lt;/del&gt;&lt;/a&gt;: Fix test; use latch instead of a sleep (#674)&lt;/p&gt;
</comment>
                            <comment id="17496365" author="jira-bot" created="Tue, 22 Feb 2022 22:38:17 +0000"  >&lt;p&gt;Commit f8703bd566dafc9be42d2c3f58f5043af847c730 in solr&apos;s branch refs/heads/branch_9x from David Smiley&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=f8703bd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=f8703bd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15964&quot; title=&quot;Transient cores should not be unloaded/evicted while it&amp;#39;s being used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15964&quot;&gt;&lt;del&gt;SOLR-15964&lt;/del&gt;&lt;/a&gt;: Fix test; use latch instead of a sleep (#674)&lt;/p&gt;
</comment>
                            <comment id="17656899" author="ishan" created="Tue, 10 Jan 2023 20:45:33 +0000"  >&lt;p&gt;Bulk closing 9.1 issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13434213">SOLR-16104</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0z47k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>