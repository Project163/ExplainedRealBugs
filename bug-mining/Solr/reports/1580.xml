<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:40:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-5042] MoreLikeThis doesn&apos;t return a score when mlt.count is set to 10</title>
                <link>https://issues.apache.org/jira/browse/SOLR-5042</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The problem appears to be around the mlt.count with in the solrconfig.xml. When this value is set to 10, the 10 values that have been identified as &apos;most like this&apos; are returned with the original query, however the &apos;score&apos; field is missing.&lt;/p&gt;

&lt;p&gt;Changing the mlt.count to say 11 and issuing the same query then the &apos;score&apos; field is returned with the same query. This appears to be the workaround. 11 was just an arbitrary value, 12 or 15 also work &lt;/p&gt;

&lt;p&gt;The same problem was raised on stackoverflow &lt;a href=&quot;http://stackoverflow.com/questions/16513719/solr-more-like-this-dont-return-score-while-specify-mlt-count&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/16513719/solr-more-like-this-dont-return-score-while-specify-mlt-count&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12657989">SOLR-5042</key>
            <summary>MoreLikeThis doesn&apos;t return a score when mlt.count is set to 10</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="elyograg">Shawn Heisey</assignee>
                                    <reporter username="joshcurran">Josh Curran</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Jul 2013 12:50:04 +0000</created>
                <updated>Tue, 7 Jan 2014 00:41:36 +0000</updated>
                            <resolved>Tue, 7 Jan 2014 00:41:36 +0000</resolved>
                                    <version>4.3</version>
                                    <fixVersion>4.6</fixVersion>
                                    <component>MoreLikeThis</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="13782864" author="anshumg" created="Tue, 1 Oct 2013 12:20:06 +0000"  >&lt;p&gt;The issue here seems to be due to the apparent misuse of count in the MoreLikeThis component.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;MoreLikeThisComponent.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; mltcount = params.getInt(MoreLikeThisParams.DOC_COUNT, 5);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;MoreLikeThisComponent.java L113&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;NamedList&amp;lt;DocList&amp;gt; sim = getMoreLikeThese(rb, rb.req.getSearcher(), rb.getResults().docList,
            mltcount);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The signature for getMoreLikeThese however is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;MoreLikeThisComponent.java L339&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;NamedList&amp;lt;DocList&amp;gt; getMoreLikeThese(ResponseBuilder rb,
      SolrIndexSearcher searcher, DocList docs, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; flags) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ll try and put up a patch.&lt;/p&gt;</comment>
                            <comment id="13783036" author="markus17" created="Tue, 1 Oct 2013 15:07:29 +0000"  >&lt;p&gt;Anshum, can you also check &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5125&quot; title=&quot;Distributed MoreLikeThis fails with NullPointerException, shard query gives EarlyTerminatingCollectorException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5125&quot;&gt;&lt;del&gt;SOLR-5125&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13783063" author="anshumg" created="Tue, 1 Oct 2013 15:45:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markus17&quot; class=&quot;user-hover&quot; rel=&quot;markus17&quot;&gt;markus17&lt;/a&gt; sure but I see a patch that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; put up already.&lt;br/&gt;
Will try and have a look at it anyways.&lt;/p&gt;</comment>
                            <comment id="13785902" author="anshumg" created="Fri, 4 Oct 2013 05:08:32 +0000"  >&lt;p&gt;The mlt.count was being treated as the value for flags, tripping the EarlyTerminatingCollectorException depending on the value of mlt.count.&lt;/p&gt;</comment>
                            <comment id="13785903" author="anshumg" created="Fri, 4 Oct 2013 05:12:20 +0000"  >&lt;p&gt;This fixes both EarlyTerminatingCollectorException and the score issue.&lt;/p&gt;</comment>
                            <comment id="13800245" author="elyograg" created="Sun, 20 Oct 2013 21:34:44 +0000"  >&lt;p&gt;Anshum pinged on this issue via IRC.  Patch passes tests and precommit on trunk, committing.  I am not familiar enough with these internals to write a test for this issue, so I&apos;ll leave the issue open for a little while.&lt;/p&gt;</comment>
                            <comment id="13800249" author="jira-bot" created="Sun, 20 Oct 2013 21:40:56 +0000"  >&lt;p&gt;Commit 1533995 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elyograg&quot; class=&quot;user-hover&quot; rel=&quot;elyograg&quot;&gt;elyograg&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1533995&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1533995&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5042&quot; title=&quot;MoreLikeThis doesn&amp;#39;t return a score when mlt.count is set to 10&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5042&quot;&gt;&lt;del&gt;SOLR-5042&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5125&quot; title=&quot;Distributed MoreLikeThis fails with NullPointerException, shard query gives EarlyTerminatingCollectorException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5125&quot;&gt;&lt;del&gt;SOLR-5125&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5368&quot; title=&quot;Morelikethis throw EarlyTerminatingCollectorException,when the document is greater than 5&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5368&quot;&gt;&lt;del&gt;SOLR-5368&lt;/del&gt;&lt;/a&gt;: mlt.count used incorrectly in MoreLikeThisComponent.&lt;/p&gt;</comment>
                            <comment id="13800274" author="jira-bot" created="Sun, 20 Oct 2013 23:02:42 +0000"  >&lt;p&gt;Commit 1534005 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elyograg&quot; class=&quot;user-hover&quot; rel=&quot;elyograg&quot;&gt;elyograg&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1534005&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1534005&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5042&quot; title=&quot;MoreLikeThis doesn&amp;#39;t return a score when mlt.count is set to 10&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5042&quot;&gt;&lt;del&gt;SOLR-5042&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5125&quot; title=&quot;Distributed MoreLikeThis fails with NullPointerException, shard query gives EarlyTerminatingCollectorException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5125&quot;&gt;&lt;del&gt;SOLR-5125&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5368&quot; title=&quot;Morelikethis throw EarlyTerminatingCollectorException,when the document is greater than 5&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5368&quot;&gt;&lt;del&gt;SOLR-5368&lt;/del&gt;&lt;/a&gt;: mlt.count used incorrectly in MoreLikeThisComponent. (merge trunk r1533995)&lt;/p&gt;</comment>
                            <comment id="13817271" author="markus17" created="Fri, 8 Nov 2013 13:27:24 +0000"  >&lt;p&gt;Guys, i see some commits in trunk and 4x, is this issue resolved?&lt;br/&gt;
Thanks&lt;/p&gt;</comment>
                            <comment id="13817291" author="anshumg" created="Fri, 8 Nov 2013 13:59:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markus17&quot; class=&quot;user-hover&quot; rel=&quot;markus17&quot;&gt;markus17&lt;/a&gt; yes this issue was resolved but I just didn&apos;t get time to add unit tests for it yet.&lt;br/&gt;
I&apos;d however manually tested this.&lt;/p&gt;</comment>
                            <comment id="13817294" author="markus17" created="Fri, 8 Nov 2013 14:05:43 +0000"  >&lt;p&gt;Great work! Thanks!&lt;/p&gt;</comment>
                            <comment id="13838331" author="wtmitchell3" created="Tue, 3 Dec 2013 23:39:43 +0000"  >&lt;p&gt;Although the source fix to this has been included in solr 4.6, I needed it fixed in the earlier 4.2.1, so I&apos;ve relocated the patch back to the earlier version.  A simple verification of the fix has been included in the test case included in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1085&quot; title=&quot;SolrJ client java does not support moreLikeThis querys and results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1085&quot;&gt;&lt;del&gt;SOLR-1085&lt;/del&gt;&lt;/a&gt;.  &lt;/p&gt;</comment>
                            <comment id="13863716" author="hossman" created="Tue, 7 Jan 2014 00:41:36 +0000"  >&lt;p&gt;this was fixed in 4.6 but never resolved&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12674636">SOLR-5368</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12662674">SOLR-5125</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12616880" name="SOLR-5042.4.2.1.patch" size="4805" author="wtmitchell3" created="Tue, 3 Dec 2013 23:39:43 +0000"/>
                            <attachment id="12606731" name="SOLR-5042.patch" size="2406" author="anshum" created="Fri, 4 Oct 2013 05:12:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>338183</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mbx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>338504</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>