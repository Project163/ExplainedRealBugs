<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:51:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6118] expand.sort doesn&apos;t work with function queries</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6118</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The new ExpandComponent doesn&apos;t support function queries in the &lt;tt&gt;expand.sort&lt;/tt&gt; parameter, such as geodist() for example.  Here&apos;s the stack trace if you try:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;527561 [qtp1458849419-16] ERROR org.apache.solr.servlet.SolrDispatchFilter  &#8211; null:java.lang.IllegalStateException: SortField needs to be rewritten through Sort.rewrite(..) and SortField.rewrite(..)
	at org.apache.lucene.search.SortField.getComparator(SortField.java:433)
	at org.apache.lucene.search.FieldValueHitQueue$OneComparatorFieldValueHitQueue.&amp;lt;init&amp;gt;(FieldValueHitQueue.java:66)
	at org.apache.lucene.search.FieldValueHitQueue.create(FieldValueHitQueue.java:171)
	at org.apache.lucene.search.TopFieldCollector.create(TopFieldCollector.java:1133)
	at org.apache.lucene.search.TopFieldCollector.create(TopFieldCollector.java:1079)
	at org.apache.solr.handler.component.ExpandComponent$GroupExpandCollector.&amp;lt;init&amp;gt;(ExpandComponent.java:310)
	at org.apache.solr.handler.component.ExpandComponent.process(ExpandComponent.java:203)
	at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:218)
	at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)
	at org.apache.solr.core.SolrCore.execute(SolrCore.java:1952)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12717099">SOLR-6118</key>
            <summary>expand.sort doesn&apos;t work with function queries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsmiley">David Smiley</assignee>
                                    <reporter username="dsmiley">David Smiley</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 May 2014 18:20:59 +0000</created>
                <updated>Mon, 9 May 2016 18:56:10 +0000</updated>
                            <resolved>Wed, 28 May 2014 21:33:04 +0000</resolved>
                                    <version>4.8</version>
                                    <fixVersion>4.9</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14011541" author="dsmiley" created="Wed, 28 May 2014 20:35:05 +0000"  >&lt;p&gt;Simple fix w/ test. I think I&apos;ve been bitten by this type of bug before &amp;#8211; forgetting to call:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (sort != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
    sort = sort.rewrite(searcher);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;d be nice if somehow Lucene&apos;s Sort.java maintained a &quot;rewritten&quot; boolean flag so that a bug like this would have been caught earlier during development.  Maybe that&apos;s the solution, maybe not.&lt;/p&gt;

&lt;p&gt;I noticed some indentation/spacing problems in ExpandComponent.java. I&apos;ll fix them in a separate commit.&lt;/p&gt;</comment>
                            <comment id="14011560" author="jira-bot" created="Wed, 28 May 2014 20:52:25 +0000"  >&lt;p&gt;Commit 1598138 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1598138&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1598138&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6118&quot; title=&quot;expand.sort doesn&amp;#39;t work with function queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6118&quot;&gt;&lt;del&gt;SOLR-6118&lt;/del&gt;&lt;/a&gt;: expand.sort bug for function queries; needed to sort.rewrite(searcher)&lt;/p&gt;</comment>
                            <comment id="14011615" author="jira-bot" created="Wed, 28 May 2014 21:26:40 +0000"  >&lt;p&gt;Commit 1598147 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1598147&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1598147&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6118&quot; title=&quot;expand.sort doesn&amp;#39;t work with function queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6118&quot;&gt;&lt;del&gt;SOLR-6118&lt;/del&gt;&lt;/a&gt;: expand.sort bug for function queries; needed to sort.rewrite(searcher)&lt;/p&gt;</comment>
                            <comment id="14011670" author="dsmiley" created="Wed, 28 May 2014 21:57:29 +0000"  >&lt;p&gt;FYI I also committed minor improvements pertaining to java 5 generics.&lt;/p&gt;</comment>
                            <comment id="14011969" author="jira-bot" created="Thu, 29 May 2014 02:00:39 +0000"  >&lt;p&gt;Commit 1598193 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1598193&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1598193&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6118&quot; title=&quot;expand.sort doesn&amp;#39;t work with function queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6118&quot;&gt;&lt;del&gt;SOLR-6118&lt;/del&gt;&lt;/a&gt;: CHANGES.txt&lt;/p&gt;</comment>
                            <comment id="14011972" author="jira-bot" created="Thu, 29 May 2014 02:07:12 +0000"  >&lt;p&gt;Commit 1598194 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1598194&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1598194&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merged from trunk&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6118&quot; title=&quot;expand.sort doesn&amp;#39;t work with function queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6118&quot;&gt;&lt;del&gt;SOLR-6118&lt;/del&gt;&lt;/a&gt;: CHANGES.txt &lt;span class=&quot;error&quot;&gt;&amp;#91;from revision 1598193&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12647205" name="SOLR-6118_expand_sort_rewrite.patch" size="2821" author="dsmiley" created="Wed, 28 May 2014 20:35:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>395307</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1w27r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>395438</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>