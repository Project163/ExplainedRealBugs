<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:48:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6156] Exception while using group with timeAllowed on SolrCloud.</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6156</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Following exception is thrown when using grouping with timeAllowed. Solr version used is 4.8.0.&lt;br/&gt;
SEVERE: null:org.apache.solr.client.solrj.impl.HttpSolrServer$RemoteSolrException: java.lang.NullPointerException&lt;br/&gt;
        at org.apache.lucene.search.TimeLimitingCollector.setNextReader(TimeLimitingCollector.java:158)&lt;br/&gt;
        at org.apache.lucene.search.MultiCollector.setNextReader(MultiCollector.java:113)&lt;br/&gt;
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:612)&lt;br/&gt;
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:297)&lt;br/&gt;
        at org.apache.solr.search.grouping.CommandHandler.searchWithTimeLimiter(CommandHandler.java:219)&lt;br/&gt;
        at org.apache.solr.search.grouping.CommandHandler.execute(CommandHandler.java:156)&lt;br/&gt;
        at org.apache.solr.handler.component.QueryComponent.process(QueryComponent.java:338)&lt;br/&gt;
        at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:218)&lt;br/&gt;
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)&lt;br/&gt;
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1952)&lt;br/&gt;
        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:774)&lt;br/&gt;
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:418)&lt;br/&gt;
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:207) &lt;/p&gt;</description>
                <environment></environment>
        <key id="12720309">SOLR-6156</key>
            <summary>Exception while using group with timeAllowed on SolrCloud.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cpoerschke">Christine Poerschke</assignee>
                                    <reporter username="modassar">Modassar Ather</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Jun 2014 09:33:26 +0000</created>
                <updated>Tue, 28 Sep 2021 20:23:11 +0000</updated>
                            <resolved>Thu, 2 Sep 2021 16:16:52 +0000</resolved>
                                                    <fixVersion>9.0</fixVersion>
                    <fixVersion>8.10</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>8</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="6600">1h 50m</timespent>
                                <comments>
                            <comment id="14026280" author="cpoerschke" created="Tue, 10 Jun 2014 09:48:01 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=modassar&quot; class=&quot;user-hover&quot; rel=&quot;modassar&quot;&gt;modassar&lt;/a&gt; - i have come across something similar with a test solr instance, the crucial combination there was &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;group=true&amp;amp;timeAllowed=...&amp;amp;rows=0&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; and non-zero rows values was fine. Does your request use rows=0 as well and/or could you share an example request that reproduces the exception?&lt;/p&gt;</comment>
                            <comment id="14026297" author="modassar" created="Tue, 10 Jun 2014 10:26:10 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;With timeAllowed following query is used without rows parameter which caused exception as in description of this ticket.&lt;br/&gt;
group=true&amp;amp;group.field=&amp;lt;FIELD_NAME&amp;gt;&lt;/p&gt;</comment>
                            <comment id="14063390" author="modassar" created="Wed, 16 Jul 2014 11:18:19 +0000"  >&lt;p&gt;While debugging found that the create() method under SearchGroupsFieldCommand class return an empty list of collectors if topNGroups &amp;lt; 0 and if includeGroupCount is false.&lt;br/&gt;
And if the collectors list is empty CommandHandler class invokes searchWithTimeLimiter(query, filter, null);. null is passed as collectors.&lt;/p&gt;

&lt;p&gt;With the null collector passed an instance of TimeLimitingCollector is created in searchWithTimeLimiter(...) method of CommandHandler class if queryCommand.getTimeAllowed() &amp;gt; 0.&lt;/p&gt;

&lt;p&gt;Code snippet from CommandHandler. Here in the code below the collector passed to TimeLimitingCollector is null.&lt;br/&gt;
if (queryCommand.getTimeAllowed() &amp;gt; 0 ) &lt;/p&gt;
{
      collector = new TimeLimitingCollector(collector, TimeLimitingCollector.getGlobalCounter(), queryCommand.getTimeAllowed());
    }

&lt;p&gt;The NullPointerException occurrs when the TimeLimitingCollector instance created with null collector invokes setNextReader(...)&lt;/p&gt;

&lt;p&gt;Not sure if topNGroups should be greater than 0 or includeGroupCount should be true when using timeAllowed or it is an issue. Kindly provide inputs.&lt;br/&gt;
Also let me know if the collectors list is null and timeAllowed&amp;gt;0 which collector can be used to create the instance of TimeLimitingCollector.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Modassar&lt;/p&gt;</comment>
                            <comment id="14506695" author="forest_soup" created="Wed, 22 Apr 2015 09:19:05 +0000"  >&lt;p&gt;We have the same issue on solr 4.7, when we issue a request like this(I only paste the xml format header here with some replacement):&lt;br/&gt;
&amp;lt;lst name=&quot;responseHeader&quot;&amp;gt;&lt;br/&gt;
&amp;lt;int name=&quot;status&quot;&amp;gt;500&amp;lt;/int&amp;gt;&lt;br/&gt;
&amp;lt;int name=&quot;QTime&quot;&amp;gt;11&amp;lt;/int&amp;gt;&lt;br/&gt;
&amp;lt;lst name=&quot;params&quot;&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;&lt;em&gt;route&lt;/em&gt;&quot;&amp;gt;Q049Y2RsMi1tYWlsMDcvTz1zY24y12345678!&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;facet&quot;&amp;gt;true&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;facet.mincount&quot;&amp;gt;1&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;facet.limit&quot;&amp;gt;13&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;facet.range&quot;&amp;gt;date&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;facet.range.end&quot;&amp;gt;NOW/DAY+1DAY&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;facet.range.gap&quot;&amp;gt;+1DAY&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;wt&quot;&amp;gt;xml&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;rows&quot;&amp;gt;0&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;df&quot;&amp;gt;body&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;start&quot;&amp;gt;0&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;q&quot;&amp;gt;&lt;br/&gt;
((owner:12345678) AND (servername:&quot;mail07&quot;)) AND (((funid:38D46BF5E8F08834852564B50129B2C)) (softdeletion:0))&lt;br/&gt;
&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;facet.range.start&quot;&amp;gt;NOW/DAY-31DAY&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;q.op&quot;&amp;gt;AND&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;timeAllowed&quot;&amp;gt;60000&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;group.field&quot;&amp;gt;tua0&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;group.sort&quot;&amp;gt;date desc&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;group&quot;&amp;gt;true&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;arr name=&quot;facet.field&quot;&amp;gt;&lt;br/&gt;
&amp;lt;str&amp;gt;strinetfrom&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str&amp;gt;funid&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;/arr&amp;gt;&lt;br/&gt;
&amp;lt;/lst&amp;gt;&lt;br/&gt;
&amp;lt;/lst&amp;gt;&lt;/p&gt;

&lt;p&gt;If we remove the timeAllowed=60000, there is no that issue.&lt;/p&gt;

&lt;p&gt;We have all cores active according to /clusterstates.json and /live_nodes  in both Admin UI and in ZooKeeper.&lt;/p&gt;

&lt;p&gt;We have the response:&lt;br/&gt;
{&lt;br/&gt;
  &quot;error&quot;: &lt;/p&gt;
{
    &quot;msg&quot;: &quot;org.apache.solr.client.solrj.SolrServerException: No live SolrServers available to handle this request:[https://hij2-solr1.fen.def2.cn.abc.com:8443/solr/collection1_shard2_replica2, https://hij2-solr2.fen.def2.cn.abc.com:8443/solr/collection1_shard2_replica1]&quot;,
    &quot;trace&quot;: &quot;org.apache.solr.common.SolrException: org.apache.solr.client.solrj.SolrServerException: No live SolrServers available to handle this request:[https://hij2-solr1.fen.def2.cn.abc.com:8443/solr/collection1_shard2_replica2, https://hij2-solr2.fen.def2.cn.abc.com:8443/solr/collection1_shard2_replica1]\n\tat org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:308)\n\tat org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)\n\tat org.apache.solr.core.SolrCore.execute(SolrCore.java:1916)\n\tat org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:780)\n\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:427)\n\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:217)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1040)\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:607)\n\tat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:316)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1156)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:626)\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n\tat java.lang.Thread.run(Thread.java:804)\nCaused by: org.apache.solr.client.solrj.SolrServerException: No live SolrServers available to handle this request:[https://hij2-solr1.fen.def2.cn.abc.com:8443/solr/collection1_shard2_replica2, https://hij2-solr2.fen.def2.cn.abc.com:8443/solr/collection1_shard2_replica1]\n\tat org.apache.solr.client.solrj.impl.LBHttpSolrServer.request(LBHttpSolrServer.java:387)\n\tat org.apache.solr.handler.component.HttpShardHandlerFactory.makeLoadBalancedRequest(HttpShardHandlerFactory.java:205)\n\tat org.apache.solr.handler.component.HttpShardHandler$1.call(HttpShardHandler.java:161)\n\tat org.apache.solr.handler.component.HttpShardHandler$1.call(HttpShardHandler.java:118)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:273)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:482)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:273)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1156)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:626)\n\t... 1 more\nCaused by: org.apache.solr.client.solrj.impl.HttpSolrServer$RemoteSolrException: Internal Server Error\n\nrequest: https://hij2-solr2.fen.def2.cn.abc.com:8443/solr/collection1_shard2_replica1/select\n\tat org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:495)\n\tat org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:199)\n\tat org.apache.solr.client.solrj.impl.LBHttpSolrServer.request(LBHttpSolrServer.java:302)\n\t... 9 more\n&quot;,
    &quot;code&quot;: 500
  }


&lt;p&gt;The error log is :&lt;br/&gt;
2015/4/22 &#19979;&#21320;5:00:16&lt;br/&gt;
ERROR&lt;br/&gt;
SolrCore&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.lucene.search.TimeLimitingCollector.setNextReader(TimeLimitingCollector.java:158)&lt;br/&gt;
	at org.apache.lucene.search.MultiCollector.setNextReader(MultiCollector.java:113)&lt;br/&gt;
	at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:612)&lt;br/&gt;
	at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:297)&lt;br/&gt;
	at org.apache.solr.search.grouping.CommandHandler.searchWithTimeLimiter(CommandHandler.java:219)&lt;br/&gt;
	at org.apache.solr.search.grouping.CommandHandler.execute(CommandHandler.java:156)&lt;br/&gt;
	at org.apache.solr.handler.component.QueryComponent.process(QueryComponent.java:336)&lt;br/&gt;
	at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:214)&lt;br/&gt;
	at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)&lt;br/&gt;
	at org.apache.solr.core.SolrCore.execute(SolrCore.java:1916)&lt;br/&gt;
	at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:780)&lt;br/&gt;
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:427)&lt;br/&gt;
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:217)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)&lt;br/&gt;
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)&lt;br/&gt;
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)&lt;br/&gt;
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)&lt;br/&gt;
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)&lt;br/&gt;
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)&lt;br/&gt;
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)&lt;br/&gt;
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)&lt;br/&gt;
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1040)&lt;br/&gt;
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:607)&lt;br/&gt;
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:314)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1156)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:626)&lt;br/&gt;
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:804)&lt;br/&gt;
2015/4/22 &#19979;&#21320;5:00:16&lt;br/&gt;
ERROR&lt;br/&gt;
SolrDispatchFilter&lt;br/&gt;
null:java.lang.NullPointerException&lt;br/&gt;
null:java.lang.NullPointerException&lt;br/&gt;
	at org.apache.lucene.search.TimeLimitingCollector.setNextReader(TimeLimitingCollector.java:158)&lt;br/&gt;
	at org.apache.lucene.search.MultiCollector.setNextReader(MultiCollector.java:113)&lt;br/&gt;
	at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:612)&lt;br/&gt;
	at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:297)&lt;br/&gt;
	at org.apache.solr.search.grouping.CommandHandler.searchWithTimeLimiter(CommandHandler.java:219)&lt;br/&gt;
	at org.apache.solr.search.grouping.CommandHandler.execute(CommandHandler.java:156)&lt;br/&gt;
	at org.apache.solr.handler.component.QueryComponent.process(QueryComponent.java:336)&lt;br/&gt;
	at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:214)&lt;br/&gt;
	at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)&lt;br/&gt;
	at org.apache.solr.core.SolrCore.execute(SolrCore.java:1916)&lt;br/&gt;
	at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:780)&lt;br/&gt;
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:427)&lt;br/&gt;
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:217)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)&lt;br/&gt;
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)&lt;br/&gt;
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)&lt;br/&gt;
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)&lt;br/&gt;
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)&lt;br/&gt;
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)&lt;br/&gt;
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)&lt;br/&gt;
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)&lt;br/&gt;
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1040)&lt;br/&gt;
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:607)&lt;br/&gt;
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:314)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1156)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:626)&lt;br/&gt;
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:804)&lt;br/&gt;
}&lt;/p&gt;</comment>
                            <comment id="17394961" author="cpoerschke" created="Fri, 6 Aug 2021 19:39:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;While debugging found that the create() method under SearchGroupsFieldCommand class return an empty list of collectors if topNGroups &amp;lt; 0 and if includeGroupCount is false. ...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Returning to this investigation here today &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=modassar&quot; class=&quot;user-hover&quot; rel=&quot;modassar&quot;&gt;modassar&lt;/a&gt;&apos;s analysis above proved very helpful, thank you!&lt;/p&gt;

&lt;p&gt;As a minimal example:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;group=true&amp;amp;group.field=foobar&amp;amp;rows=0&lt;/tt&gt; works&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;group=true&amp;amp;group.field=foobar&amp;amp;rows=0&amp;amp;timeAllowed=12345&lt;/tt&gt; does not work.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;group=true&amp;amp;group.field=foobar&amp;amp;rows=0&lt;/tt&gt; is the same as&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;group=true&amp;amp;group.field=foobar&amp;amp;rows=0&amp;amp;group.ngroups=false&lt;/tt&gt; and one might wonder why one would run a query like that?
	&lt;ul&gt;
		&lt;li&gt;explicitly to get the &lt;tt&gt;numFound&lt;/tt&gt; count i.e. the number of matches is one possibility and in that case &lt;tt&gt;rows=0&lt;/tt&gt; i.e. not using grouping would supply the same number though in a different output format which would not suit all use cases.&lt;/li&gt;
		&lt;li&gt;implicitly i.e. some other query generating sub-queries with &lt;tt&gt;rows=0&lt;/tt&gt; but that&apos;s not something I&apos;ve investigated.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ve opened a pull request &amp;#8211; &lt;a href=&quot;https://github.com/apache/solr/pull/248&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/pull/248&lt;/a&gt; &amp;#8211; with a test and code change, the fixed proposed is to use a &lt;tt&gt;NoOpCollector&lt;/tt&gt; instead of the &lt;tt&gt;null&lt;/tt&gt; collector that is causing the &lt;tt&gt;NullPointerException&lt;/tt&gt; currently.&lt;/p&gt;</comment>
                            <comment id="17408932" author="jira-bot" created="Thu, 2 Sep 2021 15:48:36 +0000"  >&lt;p&gt;Commit 9d33530da1e52236326491cfb27e024be6dbd853 in solr&apos;s branch refs/heads/main from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=9d33530&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=9d33530&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6156&quot; title=&quot;Exception while using group with timeAllowed on SolrCloud.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6156&quot;&gt;&lt;del&gt;SOLR-6156&lt;/del&gt;&lt;/a&gt;: Fix NullPointerException if group.field grouping is used with rows=0 and timeAllowed (#248)&lt;/p&gt;
</comment>
                            <comment id="17408953" author="jira-bot" created="Thu, 2 Sep 2021 16:14:54 +0000"  >&lt;p&gt;Commit 1c009d1af00fae42903462016a1bab579e3737fc in lucene-solr&apos;s branch refs/heads/branch_8x from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=1c009d1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=1c009d1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6156&quot; title=&quot;Exception while using group with timeAllowed on SolrCloud.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6156&quot;&gt;&lt;del&gt;SOLR-6156&lt;/del&gt;&lt;/a&gt;: Fix NullPointerException if group.field grouping is used with rows=0 and timeAllowed (#248)&lt;/p&gt;
</comment>
                            <comment id="17421754" author="thelabdude" created="Tue, 28 Sep 2021 20:23:11 +0000"  >&lt;p&gt;Closing after the 8.10.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>398508</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wlwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>398633</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>