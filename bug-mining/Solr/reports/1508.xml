<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:38:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-5164] In some cases, creating collections via the Collections API due to core being created in the wrong directory</title>
                <link>https://issues.apache.org/jira/browse/SOLR-5164</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When you try to create a collection in SolrCloud, the instanceDir that gets created has an extra &quot;solr&quot; in it which messes up the pathing for all the &amp;lt;lib&amp;gt; directives in solrconfig.xml as they&apos;re all relative.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12663937">SOLR-5164</key>
            <summary>In some cases, creating collections via the Collections API due to core being created in the wrong directory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="erickerickson">Erick Erickson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Aug 2013 22:24:54 +0000</created>
                <updated>Mon, 9 May 2016 18:55:36 +0000</updated>
                            <resolved>Fri, 16 Aug 2013 23:37:07 +0000</resolved>
                                    <version>4.5</version>
                    <version>6.0</version>
                                    <fixVersion>4.5</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="13741601" author="elyograg" created="Thu, 15 Aug 2013 22:37:32 +0000"  >&lt;p&gt;In a cloud (or manually sharded) environment, IMHO it&apos;s better to put jars in $solrhome/lib because they&apos;ll be automatically loaded at startup and available to all cores.&lt;/p&gt;

&lt;p&gt;Because we can&apos;t assume symlink support, it&apos;s really difficult to use this method with the example.&lt;/p&gt;</comment>
                            <comment id="13741756" author="erickerickson" created="Fri, 16 Aug 2013 00:55:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=romseygeek&quot; class=&quot;user-hover&quot; rel=&quot;romseygeek&quot;&gt;romseygeek&lt;/a&gt; Well, this has to be the most time I&apos;ve spent changing about 4 lines.&lt;/p&gt;

&lt;p&gt;If you can please take a glance at it. These seem fairly safe changes, they both just bring back what was in the code a while ago. Besides the solr/solr issue, when creating a properties file in Cloud mode, it appears that the parent directory hasn&apos;t been created first, so that step was failing.&lt;/p&gt;

&lt;p&gt;If you don&apos;t apply it (and backport it to 4.4) I&apos;ll do it in the morning. But you have a 5 hour head start &amp;lt;G&amp;gt;...&lt;/p&gt;
</comment>
                            <comment id="13741783" author="erickerickson" created="Fri, 16 Aug 2013 01:18:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elyograg&quot; class=&quot;user-hover&quot; rel=&quot;elyograg&quot;&gt;elyograg&lt;/a&gt; It&apos;s not a matter of putting the jars in the right place at all. The core was just being created in the wrong place so the relative pathing from the stock solrconfig.xml couldn&apos;t work. The Carrotsearch classes that couldn&apos;t be found are part of the stock solrconfig distribution....&lt;/p&gt;</comment>
                            <comment id="13742014" author="romseygeek" created="Fri, 16 Aug 2013 08:01:41 +0000"  >&lt;p&gt;Related:  &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5099&quot; title=&quot;The core.properties not created during collection creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5099&quot;&gt;&lt;del&gt;SOLR-5099&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I think we need an explicit test for creating collections via the API, though.  It&apos;s a bit scary that this bug can occur without the test suite complaining about it.  I&apos;m busy for the next couple of days, but will have some time next week if nobody else gets there first.&lt;/p&gt;</comment>
                            <comment id="13742098" author="erickerickson" created="Fri, 16 Aug 2013 11:01:24 +0000"  >&lt;p&gt;Blast, I wish I&apos;d paid more attention to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5099&quot; title=&quot;The core.properties not created during collection creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5099&quot;&gt;&lt;del&gt;SOLR-5099&lt;/del&gt;&lt;/a&gt;, it&apos;d have saved me some time. Sigh..&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=romseygeek&quot; class=&quot;user-hover&quot; rel=&quot;romseygeek&quot;&gt;romseygeek&lt;/a&gt; I looked and there are some collection creation tests, but I didn&apos;t dig enough to understand completely why the second solr in the path didn&apos;t trip this condition. What it didn&apos;t seem like we have was a way to restart from scratch. And in the case of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5099&quot; title=&quot;The core.properties not created during collection creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5099&quot;&gt;&lt;del&gt;SOLR-5099&lt;/del&gt;&lt;/a&gt;, core creation does succeed it&apos;s the restart that&apos;s the problem.&lt;/p&gt;

&lt;p&gt;FWIW.&lt;/p&gt;</comment>
                            <comment id="13742134" author="jira-bot" created="Fri, 16 Aug 2013 12:01:07 +0000"  >&lt;p&gt;Commit 1514666 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erickoerickson&quot; class=&quot;user-hover&quot; rel=&quot;erickoerickson&quot;&gt;erickoerickson&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1514666&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1514666&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5164&quot; title=&quot;In some cases, creating collections via the Collections API due to core being created in the wrong directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5164&quot;&gt;&lt;del&gt;SOLR-5164&lt;/del&gt;&lt;/a&gt;, Can not create a collection via collections API (cloud mode). Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5099&quot; title=&quot;The core.properties not created during collection creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5099&quot;&gt;&lt;del&gt;SOLR-5099&lt;/del&gt;&lt;/a&gt; too&lt;/p&gt;</comment>
                            <comment id="13742162" author="jira-bot" created="Fri, 16 Aug 2013 12:43:15 +0000"  >&lt;p&gt;Commit 1514684 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erickoerickson&quot; class=&quot;user-hover&quot; rel=&quot;erickoerickson&quot;&gt;erickoerickson&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1514684&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1514684&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5164&quot; title=&quot;In some cases, creating collections via the Collections API due to core being created in the wrong directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5164&quot;&gt;&lt;del&gt;SOLR-5164&lt;/del&gt;&lt;/a&gt;, Can not create a collection via collections API (cloud mode). Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5099&quot; title=&quot;The core.properties not created during collection creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5099&quot;&gt;&lt;del&gt;SOLR-5099&lt;/del&gt;&lt;/a&gt; too&lt;/p&gt;</comment>
                            <comment id="13742252" author="markrmiller@gmail.com" created="Fri, 16 Aug 2013 14:20:14 +0000"  >&lt;p&gt;We should add a test case to the collections api that catches this.&lt;/p&gt;

&lt;p&gt;Also, did this affect 4.4? The Affects versions seems to indicate not? If thats the case, there should be no separate changes entry.&lt;/p&gt;</comment>
                            <comment id="13742258" author="markrmiller@gmail.com" created="Fri, 16 Aug 2013 14:23:34 +0000"  >&lt;p&gt;I&apos;ve reopened &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5099&quot; title=&quot;The core.properties not created during collection creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5099&quot;&gt;&lt;del&gt;SOLR-5099&lt;/del&gt;&lt;/a&gt; as well - tests for these bugs are as important as the fixes.&lt;/p&gt;</comment>
                            <comment id="13742259" author="erickerickson" created="Fri, 16 Aug 2013 14:23:39 +0000"  >&lt;p&gt;yeah, we should have a test, but this has been a pretty big rathole for me already and I didn&apos;t see a simple way to create a test, see my comment earlier.&lt;/p&gt;

&lt;p&gt;No, it didn&apos;t affect 4.4 so I&apos;ll take the entry out of CHANGES.txt in the next JIRA I fix (should be this morning sometime).&lt;/p&gt;
</comment>
                            <comment id="13742261" author="markrmiller@gmail.com" created="Fri, 16 Aug 2013 14:27:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;but this has been a pretty big rathole for me already and I didn&apos;t see a simple way to create a test&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s fine, but please don&apos;t resolve the issue then. Bug fixes for really ugly issues like these absolutely need tests to make sure they don&apos;t keep coming back. We have seen that type of thing a lot recently - we fix something like this and it just breaks a couple months later in a new refactoring. You don&apos;t have to write the tests, but you might ask for some advice or help from someone else on it before resolving the issue. I&apos;m happy to help make sure these problems have tests.&lt;/p&gt;</comment>
                            <comment id="13742360" author="erickerickson" created="Fri, 16 Aug 2013 16:28:57 +0000"  >&lt;p&gt;Well, the code is fixed, how about raising another JIRA instead?&lt;/p&gt;</comment>
                            <comment id="13742388" author="markrmiller@gmail.com" created="Fri, 16 Aug 2013 16:59:30 +0000"  >&lt;p&gt;I don&apos;t consider this fixed without a test. The two issues are critical and somewhat complicated issues.&lt;/p&gt;

&lt;p&gt;I&apos;m going to write the tests - without them, we only have your word they are fixed today and a random guess they will still be fixed tomorrow or the next day. These two issues are much too critical to not consider a test part of the issue.&lt;/p&gt;

&lt;p&gt;I&apos;ll finish the issues.&lt;/p&gt;</comment>
                            <comment id="13742533" author="jira-bot" created="Fri, 16 Aug 2013 19:12:30 +0000"  >&lt;p&gt;Commit 1514857 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1514857&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1514857&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5164&quot; title=&quot;In some cases, creating collections via the Collections API due to core being created in the wrong directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5164&quot;&gt;&lt;del&gt;SOLR-5164&lt;/del&gt;&lt;/a&gt;: add relative solr.home testing to some tests, explicitly check for expected instanceDir handling with relative solr.home&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5099&quot; title=&quot;The core.properties not created during collection creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5099&quot;&gt;&lt;del&gt;SOLR-5099&lt;/del&gt;&lt;/a&gt;: explicity check for proper solrcore.properties creation&lt;br/&gt;
Speed up some tests by setting leaderVoteWait to 0&lt;/p&gt;</comment>
                            <comment id="13742537" author="jira-bot" created="Fri, 16 Aug 2013 19:15:21 +0000"  >&lt;p&gt;Commit 1514858 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1514858&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1514858&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5164&quot; title=&quot;In some cases, creating collections via the Collections API due to core being created in the wrong directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5164&quot;&gt;&lt;del&gt;SOLR-5164&lt;/del&gt;&lt;/a&gt;: add relative solr.home testing to some tests, explicitly check for expected instanceDir handling with relative solr.home&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5099&quot; title=&quot;The core.properties not created during collection creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5099&quot;&gt;&lt;del&gt;SOLR-5099&lt;/del&gt;&lt;/a&gt;: explicity check for proper solrcore.properties creation&lt;br/&gt;
Speed up some tests by setting leaderVoteWait to 0&lt;/p&gt;</comment>
                            <comment id="13742719" author="markrmiller@gmail.com" created="Fri, 16 Aug 2013 23:36:35 +0000"  >&lt;p&gt;I added some new important testing - we were not testing with a relative solr.home at all really - now it randomly uses one. I also added explicit testing to make sure the instance dir for collections api created cores is correct.&lt;/p&gt;</comment>
                            <comment id="13742817" author="jira-bot" created="Sat, 17 Aug 2013 03:20:57 +0000"  >&lt;p&gt;Commit 1514939 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1514939&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1514939&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5164&quot; title=&quot;In some cases, creating collections via the Collections API due to core being created in the wrong directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5164&quot;&gt;&lt;del&gt;SOLR-5164&lt;/del&gt;&lt;/a&gt;: fix relative solr.home testing on Windows&lt;/p&gt;</comment>
                            <comment id="13742819" author="jira-bot" created="Sat, 17 Aug 2013 03:22:22 +0000"  >&lt;p&gt;Commit 1514940 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1514940&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1514940&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5164&quot; title=&quot;In some cases, creating collections via the Collections API due to core being created in the wrong directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5164&quot;&gt;&lt;del&gt;SOLR-5164&lt;/del&gt;&lt;/a&gt;: fix relative solr.home testing on Windows&lt;/p&gt;</comment>
                            <comment id="13787097" author="jpountz" created="Sat, 5 Oct 2013 10:19:12 +0000"  >&lt;p&gt;4.5 release -&amp;gt; bulk close&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                            <outwardlinks description="contains">
                                        <issuelink>
            <issuekey id="12661040">SOLR-5099</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12598337" name="SOLR-5164.patch" size="2214" author="erickerickson" created="Fri, 16 Aug 2013 00:55:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>343938</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 7 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nb9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>344240</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>