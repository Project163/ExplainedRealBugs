<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:48:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-15595] Partial results from shard queries needlessly discarded for queries without sort fields</title>
                <link>https://issues.apache.org/jira/browse/SOLR-15595</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9882&quot; title=&quot;exceeding timeAllowed causes ClassCastException: BasicResultContext cannot be cast to SolrDocumentList&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9882&quot;&gt;&lt;del&gt;SOLR-9882&lt;/del&gt;&lt;/a&gt; introduced a behavior change in handing partial results from a shard when a timeout occurs. If a shard returns partial results and an empty sortValues, then all the results for a shard are discarded.&#160; For a scoring query the sortValues is empty, so partial results results are never included in the merged results. If all shards timeout, then zero results are returned.&lt;/p&gt;

&lt;p&gt;Co-incidentally, in some timeout scenarios sortValues is null. This was recently addressed in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14758&quot; title=&quot;NPE in QueryComponent.mergeIds when using timeAllowed and sorting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14758&quot;&gt;&lt;del&gt;SOLR-14758&lt;/del&gt;&lt;/a&gt;, but that code is impacted by the proposed change, which is to set sortValues to an empty list if is null and to no longer skip merging the shard results when sortValues is empty and the shard results are partial. There may be necessary changes further down in the merge phase when sortValues are missing, partial results are returned and the sortSpec expects sortValues.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13395967">SOLR-15595</key>
            <summary>Partial results from shard queries needlessly discarded for queries without sort fields</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="epugh">Eric Pugh</assignee>
                                    <reporter username="makosten">Michael Kosten</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Aug 2021 19:45:32 +0000</created>
                <updated>Tue, 28 Sep 2021 20:27:06 +0000</updated>
                            <resolved>Tue, 7 Sep 2021 11:49:19 +0000</resolved>
                                    <version>8.1</version>
                    <version>8.1.1</version>
                    <version>8.2</version>
                    <version>8.3</version>
                    <version>8.3.1</version>
                    <version>8.4</version>
                    <version>8.4.1</version>
                    <version>8.5</version>
                    <version>8.5.1</version>
                    <version>8.5.2</version>
                    <version>8.6</version>
                    <version>8.6.1</version>
                    <version>8.6.2</version>
                    <version>8.6.3</version>
                    <version>8.7</version>
                    <version>8.8</version>
                    <version>8.8.1</version>
                    <version>8.8.2</version>
                    <version>8.9</version>
                                    <fixVersion>9.0</fixVersion>
                    <fixVersion>8.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="12000">3h 20m</timespent>
                                <comments>
                            <comment id="17409725" author="jira-bot" created="Fri, 3 Sep 2021 22:02:06 +0000"  >&lt;p&gt;Commit 812de21e75de018982788b9017261a719e1a7e8f in solr&apos;s branch refs/heads/main from Michael Kosten&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=812de21&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=812de21&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15595&quot; title=&quot;Partial results from shard queries needlessly discarded for queries without sort fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15595&quot;&gt;&lt;del&gt;SOLR-15595&lt;/del&gt;&lt;/a&gt;: Partial results from shard queries needlessly discarded for queries without sort fields (#267)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;No longer skip merging partial shard results for non-sort queries&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Add unit test for QueryComponent. Add javadoc for new SortSpec method. Refactor QueryComponent changes.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Improve javadocs. Fix parameter name in unit test class method.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Add comments to QueryComponent. Extract inner test class for added test and use a singleton for test ShardRequest.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17409731" author="epugh" created="Fri, 3 Sep 2021 22:15:18 +0000"  >&lt;p&gt;I am trying to get this backport done, and struggling on the process...&lt;/p&gt;</comment>
                            <comment id="17411158" author="jira-bot" created="Tue, 7 Sep 2021 11:46:41 +0000"  >&lt;p&gt;Commit 80f8e2a7d0fa56087efb89c72e1539aaf7ce882b in lucene-solr&apos;s branch refs/heads/branch_8x from epugh@opensourceconnections.com&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=80f8e2a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=80f8e2a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15595&quot; title=&quot;Partial results from shard queries needlessly discarded for queries without sort fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15595&quot;&gt;&lt;del&gt;SOLR-15595&lt;/del&gt;&lt;/a&gt;: Partial results from shard queries needlessly discarded for queries without sort fields&lt;/p&gt;</comment>
                            <comment id="17421737" author="thelabdude" created="Tue, 28 Sep 2021 20:22:58 +0000"  >&lt;p&gt;Closing after the 8.10.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0u148:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>