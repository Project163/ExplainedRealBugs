<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:07:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7954] ArrayIndexOutOfBoundsException from distributed HLL serialization logic when using using stats.field={!cardinality=1.0} in a distributed query</title>
                <link>https://issues.apache.org/jira/browse/SOLR-7954</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;User reports indicate that using &lt;tt&gt;stats.field={!cardinality=1.0}foo&lt;/tt&gt; on a field that has extremely high cardinality on a single shard (example: 150K unique values) can lead to &quot;ArrayIndexOutOfBoundsException: 3&quot; on the shard during serialization of the HLL values.&lt;/p&gt;

&lt;p&gt;using &quot;cardinality=0.9&quot; (or lower) doesn&apos;t produce the same symptoms, suggesting the problem is specific to large log2m and regwidth values.&lt;/p&gt;</description>
                <environment>&lt;p&gt;SolrCloud 4 node cluster.&lt;br/&gt;
Ubuntu 12.04&lt;br/&gt;
OS Type 64 bit&lt;/p&gt;</environment>
        <key id="12857759">SOLR-7954</key>
            <summary>ArrayIndexOutOfBoundsException from distributed HLL serialization logic when using using stats.field={!cardinality=1.0} in a distributed query</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="modassar">Modassar Ather</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Aug 2015 06:02:19 +0000</created>
                <updated>Mon, 9 May 2016 18:44:29 +0000</updated>
                            <resolved>Thu, 27 Aug 2015 20:31:03 +0000</resolved>
                                    <version>5.2.1</version>
                                    <fixVersion>5.4</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14706280" author="modassar" created="Fri, 21 Aug 2015 06:09:53 +0000"  >&lt;p&gt;The schema used is as follows.&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&amp;gt;&lt;br/&gt;
&amp;lt;schema name=&quot;collection&quot; version=&quot;1.5&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;     &amp;lt;types&amp;gt;&lt;br/&gt;
        &amp;lt;fieldType name=&quot;string&quot; class=&quot;solr.StrField&quot; sortMissingLast=&quot;true&quot; stored=&quot;false&quot; omitNorms=&quot;true&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;fieldType name=&quot;string_dv&quot; class=&quot;solr.StrField&quot; sortMissingLast=&quot;true&quot; stored=&quot;false&quot; indexed=&quot;false&quot; docValues=&quot;true&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;fieldType name=&quot;long&quot; class=&quot;solr.TrieLongField&quot; precisionStep=&quot;0&quot; omitNorms=&quot;true&quot; positionIncrementGap=&quot;0&quot; stored=&quot;false&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/types&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;fields&amp;gt;&lt;br/&gt;
        &amp;lt;field name=&quot;field1&quot;      type=&quot;string&quot;         stored=&quot;true&quot;      /&amp;gt;&lt;br/&gt;
        &amp;lt;field name=&quot;field&quot;       type=&quot;string_dv&quot;      multiValued=&quot;true&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;field name=&quot;&lt;em&gt;version&lt;/em&gt;&quot;   type=&quot;long&quot;           stored=&quot;true&quot;      /&amp;gt;&lt;br/&gt;
        &amp;lt;field name=&quot;colid&quot;       type=&quot;string&quot;         stored=&quot;true&quot;      /&amp;gt;&lt;br/&gt;
    &amp;lt;/fields&amp;gt;&lt;br/&gt;
    &amp;lt;uniqueKey&amp;gt;colid&amp;lt;/uniqueKey&amp;gt;&lt;br/&gt;
&amp;lt;/schema&amp;gt;&lt;/p&gt;</comment>
                            <comment id="14706525" author="modassar" created="Fri, 21 Aug 2015 10:34:19 +0000"  >&lt;p&gt;Following test method can be used to add data using which the exception can be reproduced. Please do the necessary changes.&lt;br/&gt;
Change &amp;lt;ZKHOST&amp;gt;:&amp;lt;ZKPORT&amp;gt; to point to zkhost available and &amp;lt;COLECTION&amp;gt; to the available collection.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;public void index() throws SolrServerException, IOException {
    CloudSolrClient s = new CloudSolrClient(&quot;&amp;lt;ZKHOST&amp;gt;:&amp;lt;ZKPORT&amp;gt;&quot;);
        int count = 0;
        s.setDefaultCollection(&quot;&amp;lt;COLECTION&amp;gt;&quot;);
        List&amp;lt;SolrInputDocument&amp;gt; documents = new ArrayList&amp;lt;&amp;gt;();
        for (int i = 1; i &amp;lt;= 1000000; i++) {
            SolrInputDocument doc = new SolrInputDocument();
            doc.addField(&quot;field1&quot;, i);
            doc.addField(&quot;colid&quot;, &quot;val!&quot;+i+&quot;!-&quot;+&quot;ref&quot;+i);
            doc.addField(&quot;field&quot;, &quot;DATA&quot;+(12345+i));
            documents.add(doc);
            if((documents.size() % 10000) == 0){
                count = count + 10000;
            	s.add(documents);
            	System.out.println(System.currentTimeMillis() + &quot; - Indexed document # &quot; + NumberFormat.getInstance().format(count));
            	documents = new ArrayList&amp;lt;&amp;gt;();
            }
		}
		
                System.out.println(&quot;Comitting.....................................&quot;);
		s.commit(true, true);
		System.out.println(&quot;Optimizing.....................................&quot;);
                s.optimize(true, true, 1);
		s.close();
		System.out.println(&quot;Done.....................................&quot;);
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14708909" author="modassar" created="Mon, 24 Aug 2015 07:41:08 +0000"  >&lt;p&gt;I tested following schema with the same data in field and field2. Both reproduced the problem. Then I tried to find if it is value in cardinality which is causing the issue. I tried with 100000 to 120000 document and both the field returned cardinality but after increasing it to around 150000 it caused the exception.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&amp;gt;
&amp;lt;schema name=&quot;collection&quot; version=&quot;1.5&quot;&amp;gt;

&amp;lt;types&amp;gt;
&amp;lt;fieldType name=&quot;string&quot; class=&quot;solr.StrField&quot; sortMissingLast=&quot;true&quot; stored=&quot;false&quot; omitNorms=&quot;true&quot;/&amp;gt;
&amp;lt;fieldType name=&quot;string_dv&quot; class=&quot;solr.StrField&quot; sortMissingLast=&quot;true&quot; stored=&quot;false&quot; indexed=&quot;false&quot; docValues=&quot;true&quot;/&amp;gt;
&amp;lt;fieldType name=&quot;long&quot; class=&quot;solr.TrieLongField&quot; precisionStep=&quot;0&quot; omitNorms=&quot;true&quot; positionIncrementGap=&quot;0&quot; stored=&quot;false&quot;/&amp;gt;
&amp;lt;/types&amp;gt;

&amp;lt;fields&amp;gt;
&amp;lt;field name=&quot;field&quot;         type=&quot;string_dv&quot;   multiValued=&quot;true&quot; /&amp;gt;
&amp;lt;field name=&quot;field1&quot;       type=&quot;string&quot;         stored=&quot;true&quot; /&amp;gt;
&amp;lt;field name=&quot;field2&quot;       type=&quot;string&quot;         multiValued=&quot;true&quot; /&amp;gt;
&amp;lt;field name=&quot;version&quot;    type=&quot;long&quot;           stored=&quot;true&quot; /&amp;gt;
&amp;lt;field name=&quot;colid&quot;        type=&quot;string&quot;          stored=&quot;true&quot; /&amp;gt;
&amp;lt;/fields&amp;gt;
&amp;lt;uniqueKey&amp;gt;colid&amp;lt;/uniqueKey&amp;gt;
&amp;lt;/schema&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Following is the method to index data.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;public void index() throws SolrServerException, IOException {
    CloudSolrClient s = new CloudSolrClient(&quot;&amp;lt;ZKHOST&amp;gt;:&amp;lt;ZKPORT&amp;gt;&quot;);
        int count = 0;
        s.setDefaultCollection(&quot;&amp;lt;COLECTION&amp;gt;&quot;);
        List&amp;lt;SolrInputDocument&amp;gt; documents = new ArrayList&amp;lt;&amp;gt;();
        for (int i = 1; i &amp;lt;= 1000000; i++) {
            SolrInputDocument doc = new SolrInputDocument();
            doc.addField(&quot;field1&quot;, i);
            doc.addField(&quot;colid&quot;, &quot;val!&quot;+i+&quot;!-&quot;+&quot;ref&quot;+i);
            doc.addField(&quot;field&quot;, &quot;DATA&quot;+(12345+i));
            doc.addField(&quot;field2&quot;, &quot;DATA&quot;+(12345+i));
            documents.add(doc);
            if((documents.size() % 10000) == 0){
                count = count + 10000;
            	s.add(documents);
            	System.out.println(System.currentTimeMillis() + &quot; - Indexed document # &quot; + NumberFormat.getInstance().format(count));
            	documents = new ArrayList&amp;lt;&amp;gt;();
            }
		}
		
                System.out.println(&quot;Comitting.....................................&quot;);
		s.commit(true, true);
		System.out.println(&quot;Optimizing.....................................&quot;);
                s.optimize(true, true, 1);
		s.close();
		System.out.println(&quot;Done.....................................&quot;);
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14710272" author="hossman" created="Mon, 24 Aug 2015 23:33:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;I tested following schema with the same data in field and field2. Both reproduced the problem. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ok good &amp;#8211; that means the problem is &lt;em&gt;not&lt;/em&gt; actually dependent on docValues or not &amp;#8211; which was the most confusing and suprising part of your initial bug report.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Then I tried to find if it is value in cardinality which is causing the issue. I tried with 100000 to 120000 document and both the field returned cardinality but after increasing it to around 150000 it caused the exception.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;ok, so somewhere arround 150K docs is the sweetspot.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Reviewing the code you posted, i noticed a few things:&lt;/p&gt;

&lt;p&gt;1) every doc gets a unique value in the field you are computing stats on&lt;br/&gt;
2) your query matches all docs&lt;br/&gt;
3) because of how your uniqueKey is defined using composite routing keys (&quot;!&quot;) every doc will wind up in the same shard.&lt;/p&gt;

&lt;p&gt;the combination of all of these means that ulitmately what&apos;s causing problems is:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;building an HLL data struc using the max possible log2m &amp;amp; regwidth opts (that&apos;s what cardinality=1.0 does)&lt;/li&gt;
	&lt;li&gt;adding ~150K unique(ish) hash values to the HLL&lt;/li&gt;
	&lt;li&gt;serializing the HLL to bytes (which is what happens in a distributed query to coordinate)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;based on that, i was able to create a unit test that demonstrates the same underlying ArrayIndexOutOfBoundsException which i&apos;ll attach shortly &amp;#8211; still haven&apos;t dug in enough to udnerstand hte cause.&lt;/p&gt;

&lt;p&gt;(NOTE: since Solr 5.2.1, we&apos;ve forked the HLL and imported it directly into the org.apache.solr.util.hll package, but the basic structure/functionality of the various classes is still the same)&lt;/p&gt;</comment>
                            <comment id="14710273" author="hossman" created="Mon, 24 Aug 2015 23:35:18 +0000"  >&lt;p&gt;patch demonstrating underlying problem &amp;#8211; note that becuase this builds up some pretty large datastructures and byte arrays, you need to give it an increased heap to run...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ ant test -Dtestcase=BigHllSerializationTest -Dtests.heapsize=2g
...
   [junit4] ERROR   0.27s | BigHllSerializationTest.testSerialization &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.ArrayIndexOutOfBoundsException: 3
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([26FE9A72EDF24F3:56B788EF098D196F]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.util.hll.BigEndianAscendingWordSerializer.writeWord(BigEndianAscendingWordSerializer.java:151)
   [junit4]    &amp;gt; 	at org.apache.solr.util.hll.BitVector.getRegisterContents(BitVector.java:244)
   [junit4]    &amp;gt; 	at org.apache.solr.util.hll.HLL.toBytes(HLL.java:908)
   [junit4]    &amp;gt; 	at org.apache.solr.util.hll.HLL.toBytes(HLL.java:859)
   [junit4]    &amp;gt; 	at org.apache.solr.util.hll.BigHllSerializationTest.testSerialization(BigHllSerializationTest.java:41)
   [junit4]    &amp;gt; 	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14710280" author="hossman" created="Mon, 24 Aug 2015 23:39:53 +0000"  >&lt;p&gt;cleaned up summary &amp;amp; description now that we have a better idea what the root symptoms/cause are.&lt;/p&gt;</comment>
                            <comment id="14710599" author="modassar" created="Tue, 25 Aug 2015 05:13:22 +0000"  >&lt;p&gt;To add to the summary and description.&lt;/p&gt;

&lt;p&gt;I changed the &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;doc.addField(&quot;colid&quot;, &quot;val!&quot;+i+&quot;!-&quot;+&quot;ref&quot;+i);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; to &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;doc.addField(&quot;colid&quot;, &quot;val&quot;+i+&quot;!-&quot;+&quot;ref&quot;+i);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The documents got distributed to all the nodes. I indexed 1 million documents and was able to reproduce the issue. All the shards had around 200000 documents each.&lt;br/&gt;
Later I indexed 400000 documents on which I could not reproduce it. All the shards had around 100000 documents each.&lt;br/&gt;
There are 4 shards with no replica on my test environment.&lt;/p&gt;</comment>
                            <comment id="14711770" author="hossman" created="Tue, 25 Aug 2015 18:49:59 +0000"  >&lt;p&gt;Tracked down the root problem to some integer overflow - the HLL code was multiplying 2 large integers (w/o casting them individual to longs first) then assigning the (already overflowed) value to a long.&lt;/p&gt;

&lt;p&gt;attached patch includes fix, but i want to work on randomizing the test some more &amp;#8211; make sure there aren&apos;t similar bugs in other code paths.&lt;/p&gt;</comment>
                            <comment id="14711783" author="hossman" created="Tue, 25 Aug 2015 18:55:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;Later I indexed 400000 documents on which I could not reproduce it. All the shards had around 100000 documents each.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;There are 4 shards with no replica on my test environment.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Modassar: as i tried to explain in my earlier comments, the number of shards / documents doesn&apos;t really affect the issue &amp;#8211; the root problem has to do with the number of unique &lt;em&gt;values&lt;/em&gt; in a single shard which are added to the underlying HyperLogLog data structure and then serialized.  Doing more testing where you tweak the routing or doc counts may find &lt;em&gt;differnet&lt;/em&gt; bugs, but for this specific bug the core problem is reviewing the HLL serialization code related to the various precision options (which are set based on the &quot;cardinality&quot; local param) and the number of unique (hashed) values in each HLL.&lt;/p&gt;</comment>
                            <comment id="14712268" author="hossman" created="Wed, 26 Aug 2015 00:49:45 +0000"  >&lt;p&gt;Reviewing the code &amp;amp; tests more in depth, i realized a few things...&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;actaully having a large # of unique values isn&apos;t needed to trigger this in the low level HLL code &amp;#8211; you just need to be using the FULL representation with large enough values of log2m and regwidth (which is why at the Solr API level you have to use cardinality=1.0 &lt;em&gt;AND&lt;/em&gt; have a lot of unique values &amp;#8211; we defualt to usingthe sparse representation and only promote to the full representation once a lot of values are added.&lt;/li&gt;
	&lt;li&gt;the original HLL code&apos;s HLLSerializationTest actaully had a test that would have caught this bug, but it was hamstrung with this lovely comment...
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;// NOTE: log2m&amp;lt;=16 was chosen as the max log2m parameter so that the test
//       completes in a reasonable amount of time. Not much is gained by
//       testing larger values - there are no more known serialization
//       related edge cases that appear as log2m gets even larger.
// NOTE: This test completed successfully with log2m&amp;lt;=MAXIMUM_LOG2M_PARAM
//       on 2014-01-30.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Awesome.&lt;/p&gt;

&lt;p&gt;I refactored HLLSerializationTest a bit so we still have the same Nightly test coverage as before, but also some new Monster tests for exercising some random permutations of options for large sized HLLs (with only a few values) as well as some random permutations of HLLs (of various sizes) with &lt;b&gt;lots&lt;/b&gt; of values in them.  (so my previous BigHllSerializationTest is no longer needed)&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;I think this is ready to commit &amp;amp; backport, i&apos;ll move forward tomorrow unless there are any concerns.&lt;/p&gt;</comment>
                            <comment id="14714473" author="jira-bot" created="Wed, 26 Aug 2015 16:33:40 +0000"  >&lt;p&gt;Commit 1697969 from hossman@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1697969&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1697969&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7954&quot; title=&quot;ArrayIndexOutOfBoundsException from distributed HLL serialization logic when using using stats.field={!cardinality=1.0} in a distributed query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7954&quot;&gt;&lt;del&gt;SOLR-7954&lt;/del&gt;&lt;/a&gt;: Fixed an integer overflow bug in the HyperLogLog code used by the &apos;cardinality&apos; option of stats.field to prevent ArrayIndexOutOfBoundsException in a distributed search when a large precision is selected and a large number of values exist in each shard&lt;/p&gt;</comment>
                            <comment id="14715188" author="jira-bot" created="Wed, 26 Aug 2015 17:24:08 +0000"  >&lt;p&gt;Commit 1697977 from hossman@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1697977&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1697977&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7954&quot; title=&quot;ArrayIndexOutOfBoundsException from distributed HLL serialization logic when using using stats.field={!cardinality=1.0} in a distributed query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7954&quot;&gt;&lt;del&gt;SOLR-7954&lt;/del&gt;&lt;/a&gt;: Fixed an integer overflow bug in the HyperLogLog code used by the &apos;cardinality&apos; option of stats.field to prevent ArrayIndexOutOfBoundsException in a distributed search when a large precision is selected and a large number of values exist in each shard (merge r1697969)&lt;/p&gt;</comment>
                            <comment id="14717476" author="hossman" created="Thu, 27 Aug 2015 20:31:03 +0000"  >&lt;p&gt;Thanks for reporting this Modassar!&lt;/p&gt;</comment>
                            <comment id="14717486" author="hossman" created="Thu, 27 Aug 2015 20:36:55 +0000"  >&lt;p&gt;Upstream bug report: &lt;a href=&quot;https://github.com/aggregateknowledge/java-hll/issues/17&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/aggregateknowledge/java-hll/issues/17&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15087105" author="modassar" created="Thu, 7 Jan 2016 09:24:00 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;q=fl1:net*&amp;amp;facet.field=fl&amp;amp;facet.limit=50&amp;amp;stats=true&amp;amp;stats.field={!cardinality=1.0}fl&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;  
&lt;p&gt;Above query is returning cardinality around 15 million. It is taking around 4 minutes. Similar response time is seen with different queries which yields high cardinality. Kindly note that the cardinality=1.0 is the desired goal.&lt;br/&gt;
Here in the above example the fl1 is a text field whereas fl is a docValue enabled non-stroed, non-indexed field.&lt;br/&gt;
Kindly let me know if such response time is expected or I am missing something about this feature in my query.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12752370" name="SOLR-7954.patch" size="11984" author="hossman" created="Wed, 26 Aug 2015 00:49:45 +0000"/>
                            <attachment id="12752290" name="SOLR-7954.patch" size="4392" author="hossman" created="Tue, 25 Aug 2015 18:49:59 +0000"/>
                            <attachment id="12752105" name="SOLR-7954.patch" size="2261" author="hossman" created="Mon, 24 Aug 2015 23:35:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j71r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>