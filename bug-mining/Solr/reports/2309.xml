<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:01:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-5918] ant clean does not remove ZooKeeper data</title>
                <link>https://issues.apache.org/jira/browse/SOLR-5918</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;From the solr/ directory when I run &apos;ant clean&apos; it cleans up all the necessary compiled files etc.&lt;/p&gt;

&lt;p&gt;This also removes the indexes rightly so, but fails to delete the ZooKeeper data.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12703804">SOLR-5918</key>
            <summary>ant clean does not remove ZooKeeper data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sarowe">Steven Rowe</assignee>
                                    <reporter username="varun">Varun Thacker</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Mar 2014 19:29:50 +0000</created>
                <updated>Thu, 21 Nov 2019 00:42:20 +0000</updated>
                            <resolved>Mon, 26 Jan 2015 23:46:27 +0000</resolved>
                                                    <fixVersion>5.0</fixVersion>
                    <fixVersion>5.1</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13948368" author="varunthacker" created="Wed, 26 Mar 2014 19:43:11 +0000"  >&lt;p&gt;Simple patch but maybe I am missing something here -&lt;/p&gt;

&lt;p&gt;&apos;ant clean&apos; now removes the zoo_data directory, but when I build again using &apos;ant example&apos; and start up SolrCloud I get the following errors&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java -DzkRun -DnumShards=1 -Dbootstrap_confdir=./solr/collection1/conf -Dcollection.configName=myconf -jar start.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;758 [coreLoadExecutor-4-thread-1] ERROR org.apache.solr.core.CoreContainer  &#8211; Unable to create core: collection1
org.apache.solr.common.SolrException: Error initializing QueryElevationComponent.
	at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:857)
	at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:640)
	at org.apache.solr.core.CoreContainer.create(CoreContainer.java:556)
	at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:261)
	at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:253)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:744)
Caused by: org.apache.solr.common.SolrException: Error initializing QueryElevationComponent.
	at org.apache.solr.handler.component.QueryElevationComponent.inform(QueryElevationComponent.java:242)
	at org.apache.solr.core.SolrResourceLoader.inform(SolrResourceLoader.java:649)
	at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:848)
	... 10 more
Caused by: org.apache.solr.common.SolrException: Error loading config name for collection collection1
	at org.apache.solr.common.cloud.ZkStateReader.readConfigName(ZkStateReader.java:167)
	at org.apache.solr.handler.component.QueryElevationComponent.inform(QueryElevationComponent.java:212)
	... 12 more
Caused by: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode for /collections/collection1
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:111)
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)
	at org.apache.zookeeper.ZooKeeper.getData(ZooKeeper.java:1155)
	at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:276)
	at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:273)
	at org.apache.solr.common.cloud.ZkCmdExecutor.retryOperation(ZkCmdExecutor.java:73)
	at org.apache.solr.common.cloud.SolrZkClient.getData(SolrZkClient.java:273)
	at org.apache.solr.common.cloud.ZkStateReader.readConfigName(ZkStateReader.java:147)
	... 13 more
6760 [coreLoadExecutor-4-thread-1] ERROR org.apache.solr.core.CoreContainer  &#8211; null:org.apache.solr.common.SolrException: Unable to create core: collection1
	at org.apache.solr.core.CoreContainer.recordAndThrow(CoreContainer.java:911)
	at org.apache.solr.core.CoreContainer.create(CoreContainer.java:568)
	at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:261)
	at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:253)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:744)
Caused by: org.apache.solr.common.SolrException: Error initializing QueryElevationComponent.
	at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:857)
	at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:640)
	at org.apache.solr.core.CoreContainer.create(CoreContainer.java:556)
	... 8 more
Caused by: org.apache.solr.common.SolrException: Error initializing QueryElevationComponent.
	at org.apache.solr.handler.component.QueryElevationComponent.inform(QueryElevationComponent.java:242)
	at org.apache.solr.core.SolrResourceLoader.inform(SolrResourceLoader.java:649)
	at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:848)
	... 10 more
Caused by: org.apache.solr.common.SolrException: Error loading config name for collection collection1
	at org.apache.solr.common.cloud.ZkStateReader.readConfigName(ZkStateReader.java:167)
	at org.apache.solr.handler.component.QueryElevationComponent.inform(QueryElevationComponent.java:212)
	... 12 more
Caused by: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode for /collections/collection1
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:111)
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)
	at org.apache.zookeeper.ZooKeeper.getData(ZooKeeper.java:1155)
	at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:276)
	at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:273)
	at org.apache.solr.common.cloud.ZkCmdExecutor.retryOperation(ZkCmdExecutor.java:73)
	at org.apache.solr.common.cloud.SolrZkClient.getData(SolrZkClient.java:273)
	at org.apache.solr.common.cloud.ZkStateReader.readConfigName(ZkStateReader.java:147)
	... 13 more

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13948495" author="erickerickson" created="Wed, 26 Mar 2014 21:28:32 +0000"  >&lt;p&gt;I guess my question is whether this is a good idea or not. Imagine I&apos;m working on some cloud code and I want to make sure that my compiled code is clean. I issue &quot;ant clean&quot;. Now my zookeeper config has mysteriously disappeared.&lt;/p&gt;

&lt;p&gt;So I&apos;m -1 on adding this.&lt;/p&gt;

&lt;p&gt;I haven&apos;t a clue what&apos;s causing the QEV problem...&lt;/p&gt;
</comment>
                            <comment id="13948522" author="markrmiller@gmail.com" created="Wed, 26 Mar 2014 21:43:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;Now my zookeeper config has mysteriously disappeared.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Seems like your data directories going away is just as mysterious though, and that has worked this way a long time.&lt;/p&gt;

&lt;p&gt;cloud-dev scripts have moved to not using example at all, but copying it. That&apos;s probably the way to go in general.&lt;/p&gt;</comment>
                            <comment id="13949198" author="varunthacker" created="Thu, 27 Mar 2014 12:01:25 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erickerickson&quot; class=&quot;user-hover&quot; rel=&quot;erickerickson&quot;&gt;erickerickson&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I created this Jira only after noticing that the data/ directory is nuked when &apos;ant clean&apos; is run. So I thought we show clean up the ZK data as well. &lt;/p&gt;</comment>
                            <comment id="13949216" author="erickerickson" created="Thu, 27 Mar 2014 12:24:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt; Mostly I was making sure the issue was raised. I&apos;ll defer to whatever Mark says, he&apos;s one of the people deep in this stuff...&lt;/p&gt;</comment>
                            <comment id="13949259" author="varunthacker" created="Thu, 27 Mar 2014 12:59:40 +0000"  >&lt;p&gt;Well I checked out a previous commit - 6ebb4351d05e32452406d0c1e9f94107590f12fe. This is just before &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5881&quot; title=&quot;Upgrade Zookeeper to 3.4.6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5881&quot;&gt;&lt;del&gt;SOLR-5881&lt;/del&gt;&lt;/a&gt; got committed. &lt;/p&gt;

&lt;p&gt;Now when I ran the following I don&apos;t get any exceptions.&lt;/p&gt;
{nocommit}&lt;br/&gt;
java -DzkRun -DnumShards=1 -Dbootstrap_confdir=./solr/collection1/conf -Dcollection.configName=myconf -jar start.jar{nocommit}</comment>
                            <comment id="13956449" author="varunthacker" created="Tue, 1 Apr 2014 12:12:18 +0000"  >&lt;p&gt;With the latest checkout of trunk I don&apos;t get any errors related to initializing QueryElevationComponent. Maybe I was doing something wrong that time. Sorry for the noise there.&lt;/p&gt;</comment>
                            <comment id="14292625" author="steve_rowe" created="Mon, 26 Jan 2015 23:36:08 +0000"  >&lt;p&gt;The &lt;tt&gt;clean&lt;/tt&gt; target is set up now to delete &lt;tt&gt;server/solr/zoo_data&lt;/tt&gt;, and the solr homes created by &lt;tt&gt;bin/solr -e &amp;lt;example&amp;gt;&lt;/tt&gt; under &lt;tt&gt;example/&lt;/tt&gt; are removed.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;server/solr/zoo_data/&lt;/tt&gt; isn&apos;t getting deleted though.  At this point the only problem appears to be that there&apos;s a missing trailing slash after the directory in the &lt;tt&gt;&amp;lt;include&amp;gt;&lt;/tt&gt; - when I add the slash the directory is deleted:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;Index: solr/build.xml
===================================================================
--- solr/build.xml	(revision 1654902)
+++ solr/build.xml	(working copy)
@@ -319,7 +319,7 @@
       &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/fileset&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;fileset dir=&lt;span class=&quot;code-quote&quot;&gt;&quot;server&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;include name=&lt;span class=&quot;code-quote&quot;&gt;&quot;**/data/**/*&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
-        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;include name=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr/zoo_data&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
+        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;include name=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr/zoo_data/&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;include name=&lt;span class=&quot;code-quote&quot;&gt;&quot;start.jar&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;include name=&lt;span class=&quot;code-quote&quot;&gt;&quot;logs/*&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;include name=&lt;span class=&quot;code-quote&quot;&gt;&quot;webapps/**/*&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Committing shortly.&lt;/p&gt;</comment>
                            <comment id="14292640" author="jira-bot" created="Mon, 26 Jan 2015 23:41:51 +0000"  >&lt;p&gt;Commit 1654913 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1654913&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1654913&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5918&quot; title=&quot;ant clean does not remove ZooKeeper data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5918&quot;&gt;&lt;del&gt;SOLR-5918&lt;/del&gt;&lt;/a&gt;: ant clean does not remove ZooKeeper data&lt;/p&gt;</comment>
                            <comment id="14292648" author="jira-bot" created="Mon, 26 Jan 2015 23:43:54 +0000"  >&lt;p&gt;Commit 1654914 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1654914&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1654914&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5918&quot; title=&quot;ant clean does not remove ZooKeeper data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5918&quot;&gt;&lt;del&gt;SOLR-5918&lt;/del&gt;&lt;/a&gt;: ant clean does not remove ZooKeeper data (merged trunk r1654913)&lt;/p&gt;</comment>
                            <comment id="14292649" author="jira-bot" created="Mon, 26 Jan 2015 23:45:33 +0000"  >&lt;p&gt;Commit 1654915 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_5_0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1654915&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1654915&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5918&quot; title=&quot;ant clean does not remove ZooKeeper data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5918&quot;&gt;&lt;del&gt;SOLR-5918&lt;/del&gt;&lt;/a&gt;: ant clean does not remove ZooKeeper data (merged trunk r1654913)&lt;/p&gt;</comment>
                            <comment id="14292651" author="steve_rowe" created="Mon, 26 Jan 2015 23:46:27 +0000"  >&lt;p&gt;Committed to trunk, branch_5x, and lucene_solr_5_0.&lt;/p&gt;

&lt;p&gt;Thanks Varun!&lt;/p&gt;</comment>
                            <comment id="14332816" author="anshumg" created="Mon, 23 Feb 2015 05:02:04 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12636985" name="SOLR-5918.patch" size="628" author="varun" created="Wed, 26 Mar 2014 19:43:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382138</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tu5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382411</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>