<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:21:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-1989] Re-Compilation of source needs to be possible in release artifacts</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1989</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Users who download Solr 3.1 or 4.0 should be able to recompile the source - at the present moment, this is not possible with nightly builds because of assumptions about compiling (and compiling against) .../modules and ../lucene &amp;#8211; even though the jars are included in the &quot;lucene-libs&quot; directory.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12468676">SOLR-1989</key>
            <summary>Re-Compilation of source needs to be possible in release artifacts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rcmuir">Robert Muir</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Jul 2010 22:55:15 +0000</created>
                <updated>Wed, 30 Mar 2011 15:45:25 +0000</updated>
                            <resolved>Sun, 13 Feb 2011 10:42:50 +0000</resolved>
                                                    <fixVersion>3.1</fixVersion>
                    <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12885724" author="hossman" created="Tue, 6 Jul 2010 22:56:37 +0000"  >&lt;p&gt;This is easily reproducable  by trying to run &quot;ant example&quot; from a nightly download from hudson.&lt;/p&gt;

&lt;p&gt;&amp;#8211;&lt;/p&gt;

&lt;p&gt;In general, the solr build.xml doesn&apos;t seem to be looking at the &quot;lucene-libs&quot; directory consistently.  This is particularly noticable if you download a nightly build artifact from hudson, which only includes the Solr source, and the lucene+modules dependencies are only available in compiled form.&lt;/p&gt;

&lt;p&gt;Running &quot;ant example&quot; or &quot;ant compile-solrj&quot; causes the build to fail with messages like this...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;compile-lucene:

compile-solrj:
    [javac] Compiling 89 source files to /tmp/apache-solr-4.0-2010-07-06_08-06-42/build/solrj
    [javac] /tmp/apache-solr-4.0-2010-07-06_08-06-42/src/common/org/apache/solr/common/util/ConcurrentLRUCache.java:19: package org.apache.lucene.util does not exist
    [javac] import org.apache.lucene.util.PriorityQueue;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Running &quot;ant compile&quot; fails even faster, with the &quot;compile-lucene&quot; target being unable to find the modules...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hossman@bester:/tmp/apache-solr-4.0-2010-07-06_08-06-42$ ant compile
Buildfile: build.xml

init-forrest-entities:

compile-lucene:

BUILD FAILED
/tmp/apache-solr-4.0-2010-07-06_08-06-42/common-build.xml:212: /tmp/modules/analysis/common not found.

Total time: 0 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(It&apos;s not entirely clear to me what special magic causes &quot;compile-lucene&quot; to succeed silently when using &quot;ant example&quot; ... a property is getting set somewhere i&apos;m not seeing)&lt;/p&gt;</comment>
                            <comment id="12885727" author="hossman" created="Tue, 6 Jul 2010 23:06:21 +0000"  >&lt;p&gt;My suggested way of dealing with this...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;all of the relevant classpaths should be fixed to include lucene-libs when compiling solr source&lt;/li&gt;
	&lt;li&gt;two new (overridable) system properties should be added for locating the &quot;modules.base.dir&quot; and &quot;lucene.base.dir&quot;.  These should default to &quot;../modules&quot; and &quot;../lucene&quot; respectively&lt;/li&gt;
	&lt;li&gt;a new (overridable) system property &quot;build.lucene.dependencies&quot; should be added, which defaults to &quot;true&quot; if &quot;${modules.base.dir}&quot; and &quot;${lucene.base.dir}&quot; both exist and are readble.&lt;/li&gt;
	&lt;li&gt;if &quot;${build.lucene.dependencies}&quot; is false, and the lucene-libs dir is empty (or non-existent) the &quot;compile-lucene&quot; target should fail with a helpful error message saying that the neccessary lucene libraries can&apos;t be found, and point to a wiki with more info on how to build Solr.  (if &quot;${build.lucene.dependencies}&quot; is true, &quot;compile-lucene&quot; should continue to work as it currently does)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If the image i have in my head is correct, that should result in people who check out &quot;dev/trunk&quot; having the same experience they have now &amp;#8211; compilation at the top level, or within solr, will result in everything being re-compiled as needed.  It should also result in people who only download the solr artifacts (and nothing else) being able to recompile solr using the jars in lucene-libs dir.  The added new feature is that people who download solr (or checkout just dev/trunk/solr) will be ableto set system properties as needed to recompile solr against whatever version of dev/&amp;#42;/modules and dev/&amp;#42;/lucene they want.&lt;/p&gt;</comment>
                            <comment id="12885733" author="rcmuir" created="Tue, 6 Jul 2010 23:27:39 +0000"  >&lt;p&gt;Hoss I worry about your suggested way, especially given the current complexity of the solr build system (it really really really really needs a cleanup).&lt;/p&gt;

&lt;p&gt;wouldnt it just be easier to have the source artifacts include lucene and modules source? &lt;/p&gt;

&lt;p&gt;I worry about compiling/testing solr not using the latest version of lucene src, i mean i already worry about this now and often do &apos;clean&apos;&lt;br/&gt;
to ensure i havent screwed something up with solr if i am messing with lucene. I think doing this would add even more complexity.&lt;/p&gt;</comment>
                            <comment id="12885736" author="markrmiller@gmail.com" created="Tue, 6 Jul 2010 23:31:30 +0000"  >&lt;p&gt;I also think that running off source is sweet.&lt;/p&gt;</comment>
                            <comment id="12982337" author="rcmuir" created="Sun, 16 Jan 2011 16:58:31 +0000"  >&lt;p&gt;we have to figure out how we want this to work:&lt;/p&gt;

&lt;p&gt;Personally, my opinion would be that Solr source artifacts include the source it depends on.&lt;br/&gt;
Alternatively we could do heavy ant-hacking.&lt;/p&gt;

&lt;p&gt;But I don&apos;t think we can release until the source code artifacts are correct.&lt;/p&gt;</comment>
                            <comment id="12985165" author="markrmiller@gmail.com" created="Sat, 22 Jan 2011 18:00:53 +0000"  >&lt;p&gt;I think we just include the source too. As devs, we would prefer to run off the source I think - and it seems best to keep the distrib build setup as close to how the solr checkout works as possible, doesn&apos;t it?&lt;/p&gt;</comment>
                            <comment id="12986971" author="rcmuir" created="Wed, 26 Jan 2011 12:09:14 +0000"  >&lt;p&gt;Personally, as I said i really like including the source... but I might be in the minority as&lt;br/&gt;
I am a dev and think its cool to have the source to all the &quot;search-related&quot; stuff being&lt;br/&gt;
used in the search engine.&lt;/p&gt;

&lt;p&gt;Uwe has expressed some interest in a better solution: if he has time to get to this, that&apos;s&lt;br/&gt;
great... otherwise I uploaded this patch at least so we are releasable.&lt;/p&gt;</comment>
                            <comment id="12994068" author="rcmuir" created="Sun, 13 Feb 2011 10:42:50 +0000"  >&lt;p&gt;Committed revision 1070206, 1070208 (branch-3x)&lt;/p&gt;</comment>
                            <comment id="13013054" author="gsingers" created="Wed, 30 Mar 2011 15:45:25 +0000"  >&lt;p&gt;Bulk close for 3.1.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12469412" name="SOLR-1989.patch" size="984" author="rcmuir" created="Wed, 26 Jan 2011 11:53:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5494</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03nhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19238</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>