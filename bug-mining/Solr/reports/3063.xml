<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:15:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9391] LBHttpSolrClient.request can return incorrect Rsp.server string</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9391</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Problem:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/solrj/src/java/org/apache/solr/client/solrj/impl/LBHttpSolrClient.java#L361-L366&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;LBHttpSolrClient.request&lt;/a&gt; assigns to &lt;tt&gt;rsp.server&lt;/tt&gt; at line 361 and then at line 366 makes a &lt;tt&gt;doRequest(client, req, rsp, isUpdate, false, null);&lt;/tt&gt; method call.&lt;/li&gt;
	&lt;li&gt;If the original &lt;tt&gt;doRequest&lt;/tt&gt; call(s) did not succeed then later at &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/solrj/src/java/org/apache/solr/client/solrj/impl/LBHttpSolrClient.java#L382&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;line 382&lt;/a&gt; additional &lt;tt&gt;doRequest&lt;/tt&gt; calls may happen. These calls could use a different server but currently &lt;tt&gt;rsp.server&lt;/tt&gt; remains unchanged and thus &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/solrj/src/java/org/apache/solr/client/solrj/impl/LBHttpSolrClient.java#L331&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;LBHttpSolrClient.request&lt;/a&gt; could return an incorrect &lt;tt&gt;Rsp.server&lt;/tt&gt; string value.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Proposed fix: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Change the &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/solrj/src/java/org/apache/solr/client/solrj/impl/LBHttpSolrClient.java#L409-L413&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;doRequest method&lt;/a&gt; so that it assigns &lt;tt&gt;Rsp.server&lt;/tt&gt; alongside the existing &lt;tt&gt;Rsp.rsp&lt;/tt&gt; assignment.&lt;/li&gt;
	&lt;li&gt;Note that since the &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/solrj/src/java/org/apache/solr/client/solrj/impl/HttpSolrClient.java#L190-L199&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;HttpSolrClient constructor&lt;/a&gt; trims of any trailing &lt;tt&gt;/&lt;/tt&gt; from the &lt;tt&gt;baseUrl&lt;/tt&gt; then the proposed fix potentially minutely changes the &lt;tt&gt;Rsp.getServer()&lt;/tt&gt; return value.
	&lt;ul&gt;
		&lt;li&gt;&lt;tt&gt;Rsp.getServer()&lt;/tt&gt; is called by &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/core/src/java/org/apache/solr/handler/component/HttpShardHandler.java#L200&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;HttpShardHandler.submit&lt;/a&gt; as &lt;tt&gt;srsp.setShardAddress(rsp.getServer());&lt;/tt&gt;&lt;/li&gt;
		&lt;li&gt;I have not fully checked where/how &lt;tt&gt;getShardAddress()&lt;/tt&gt; is then subsequently used but would very much hope that the removal of a trailing &lt;tt&gt;/&lt;/tt&gt; would not cause any issues.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12995232">SOLR-9391</key>
            <summary>LBHttpSolrClient.request can return incorrect Rsp.server string</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cpoerschke">Christine Poerschke</assignee>
                                    <reporter username="cpoerschke">Christine Poerschke</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Aug 2016 14:54:39 +0000</created>
                <updated>Sat, 8 Jun 2019 15:38:11 +0000</updated>
                            <resolved>Fri, 19 Aug 2016 11:39:23 +0000</resolved>
                                                    <fixVersion>6.2</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15427956" author="jira-bot" created="Fri, 19 Aug 2016 10:18:03 +0000"  >&lt;p&gt;Commit 250a867de268b597b840cc38c4d6fe465d54a511 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=250a867&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=250a867&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9391&quot; title=&quot;LBHttpSolrClient.request can return incorrect Rsp.server string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9391&quot;&gt;&lt;del&gt;SOLR-9391&lt;/del&gt;&lt;/a&gt;: LBHttpSolrClient.request now correctly returns Rsp.server when previously skipped servers were successfully tried.&lt;/p&gt;</comment>
                            <comment id="15428031" author="jira-bot" created="Fri, 19 Aug 2016 11:38:12 +0000"  >&lt;p&gt;Commit 9a5dcce5de61be427adce43e4d03642484a78a5a in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9a5dcce&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9a5dcce&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9391&quot; title=&quot;LBHttpSolrClient.request can return incorrect Rsp.server string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9391&quot;&gt;&lt;del&gt;SOLR-9391&lt;/del&gt;&lt;/a&gt;: LBHttpSolrClient.request now correctly returns Rsp.server when previously skipped servers were successfully tried.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12822296" name="SOLR-9391.patch" size="3933" author="cpoerschke" created="Fri, 5 Aug 2016 14:55:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 13 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31ys7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>