<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:11:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-8642] SOLR allows creation of collections with invalid names</title>
                <link>https://issues.apache.org/jira/browse/SOLR-8642</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Some of my colleagues and I recently noticed that the CREATECOLLECTION API will create a collection even when invalid characters are present in the name.&lt;/p&gt;

&lt;p&gt;For example, consider the following reproduction case, which involves creating a collection with a space in its name:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ &amp;lt;clean checkout of SOLR master/trunk&amp;gt;
$ bin/solr start -e cloud -noprompt
    ...
$ curl -i -l -k -X GET &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/admin/collections?action=CREATE&amp;amp;name=getting+started&amp;amp;numShards=2&amp;amp;replicationFactor=2&amp;amp;maxShardsPerNode=2&amp;amp;collection.configName=gettingstarted&quot;&lt;/span&gt;
&lt;/span&gt;HTTP/1.1 200 OK
Content-Type: application/xml; charset=UTF-8
Transfer-Encoding: chunked

&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;response&amp;gt;
&amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;responseHeader&quot;&lt;/span&gt;&amp;gt;&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;status&quot;&lt;/span&gt;&amp;gt;0&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;QTime&quot;&lt;/span&gt;&amp;gt;299&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;lt;/lst&amp;gt;&amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;failure&quot;&lt;/span&gt;&amp;gt;&amp;lt;str&amp;gt;org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException:Error from server at http:&lt;span class=&quot;code-comment&quot;&gt;//127.0.1.1:8983/solr: Error CREATEing SolrCore &lt;span class=&quot;code-quote&quot;&gt;&apos;getting started_shard2_replica2&apos;&lt;/span&gt;: Unable to create core [getting started_shard2_replica2] Caused by: Invalid core name: &lt;span class=&quot;code-quote&quot;&gt;&apos;getting started_shard2_replica2&apos;&lt;/span&gt; Names must consist entirely of periods, underscores and alphanumerics&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException:Error from server at http://127.0.1.1:7574/solr: Error CREATEing SolrCore &lt;span class=&quot;code-quote&quot;&gt;&apos;getting started_shard2_replica1&apos;&lt;/span&gt;: Unable to create core [getting started_shard2_replica1] Caused by: Invalid core name: &lt;span class=&quot;code-quote&quot;&gt;&apos;getting started_shard2_replica1&apos;&lt;/span&gt; Names must consist entirely of periods, underscores and alphanumerics&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException:Error from server at http://127.0.1.1:7574/solr: Error CREATEing SolrCore &lt;span class=&quot;code-quote&quot;&gt;&apos;getting started_shard1_replica1&apos;&lt;/span&gt;: Unable to create core [getting started_shard1_replica1] Caused by: Invalid core name: &lt;span class=&quot;code-quote&quot;&gt;&apos;getting started_shard1_replica1&apos;&lt;/span&gt; Names must consist entirely of periods, underscores and alphanumerics&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException:Error from server at http://127.0.1.1:8983/solr: Error CREATEing SolrCore &lt;span class=&quot;code-quote&quot;&gt;&apos;getting started_shard1_replica2&apos;&lt;/span&gt;: Unable to create core [getting started_shard1_replica2] Caused by: Invalid core name: &lt;span class=&quot;code-quote&quot;&gt;&apos;getting started_shard1_replica2&apos;&lt;/span&gt; Names must consist entirely of periods, underscores and alphanumerics&amp;lt;/str&amp;gt;&amp;lt;/lst&amp;gt;
&lt;/span&gt;&amp;lt;/response&amp;gt;
$ 
$ curl -i -l -k -X GET &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/admin/collections?action=CLUSTERSTATUS&amp;amp;wt=json&amp;amp;indent=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;
&lt;/span&gt;HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8
Transfer-Encoding: chunked

{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;responseHeader&quot;&lt;/span&gt;:{
    &lt;span class=&quot;code-quote&quot;&gt;&quot;status&quot;&lt;/span&gt;:0,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;QTime&quot;&lt;/span&gt;:6},
  &lt;span class=&quot;code-quote&quot;&gt;&quot;cluster&quot;&lt;/span&gt;:{
    &lt;span class=&quot;code-quote&quot;&gt;&quot;collections&quot;&lt;/span&gt;:{
     ...
      &lt;span class=&quot;code-quote&quot;&gt;&quot;getting started&quot;&lt;/span&gt;:{
        &lt;span class=&quot;code-quote&quot;&gt;&quot;replicationFactor&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;2&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;shards&quot;&lt;/span&gt;:{
          &lt;span class=&quot;code-quote&quot;&gt;&quot;shard1&quot;&lt;/span&gt;:{
            &lt;span class=&quot;code-quote&quot;&gt;&quot;range&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;80000000-ffffffff&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;active&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;replicas&quot;&lt;/span&gt;:{}},
          &lt;span class=&quot;code-quote&quot;&gt;&quot;shard2&quot;&lt;/span&gt;:{
            &lt;span class=&quot;code-quote&quot;&gt;&quot;range&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;0-7fffffff&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;active&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;replicas&quot;&lt;/span&gt;:{}}},
        &lt;span class=&quot;code-quote&quot;&gt;&quot;router&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;compositeId&quot;&lt;/span&gt;},
        &lt;span class=&quot;code-quote&quot;&gt;&quot;maxShardsPerNode&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;2&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;autoAddReplicas&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;znodeVersion&quot;&lt;/span&gt;:1,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;configName&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;gettingstarted&quot;&lt;/span&gt;},
    &lt;span class=&quot;code-quote&quot;&gt;&quot;live_nodes&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;127.0.1.1:8983_solr&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;127.0.1.1:7574_solr&quot;&lt;/span&gt;]}}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The commands/responses above suggest that Solr creates the collection without checking the name.  It then goes on to create the cores for the collection, which fails and returns the error seen above.&lt;/p&gt;

&lt;p&gt;I verified this by doing a &lt;tt&gt;curl -i -l -k &quot;http://localhost:8983/solr/admin/cores&lt;/tt&gt;; as expected the cores were not actually created.  (This is probably thanks to Erick&apos;s work on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8308&quot; title=&quot;Core gets inaccessible after RENAME operation with special characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8308&quot;&gt;&lt;del&gt;SOLR-8308&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;This bug is a problem because it will create collections which can never be backed up with actual cores.&lt;/p&gt;

&lt;p&gt;Seems like the same name-verification that 8308 added to cores should also be applied to collections.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12936745">SOLR-8642</key>
            <summary>SOLR allows creation of collections with invalid names</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="erickerickson">Erick Erickson</assignee>
                                    <reporter username="gerlowskija">Jason Gerlowski</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Feb 2016 14:38:07 +0000</created>
                <updated>Mon, 9 May 2016 18:50:32 +0000</updated>
                            <resolved>Wed, 24 Feb 2016 15:02:52 +0000</resolved>
                                    <version>6.0</version>
                                    <fixVersion>5.5</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="15132401" author="gerlowskija" created="Thu, 4 Feb 2016 14:39:56 +0000"  >&lt;p&gt;I plan on adding a patch to fix this issue later on today.&lt;/p&gt;</comment>
                            <comment id="15132456" author="elyograg" created="Thu, 4 Feb 2016 15:41:09 +0000"  >&lt;p&gt;Technically speaking, we do not have &lt;b&gt;any&lt;/b&gt; name enforcement (things like collections, cores, fields).  We have a list of &lt;b&gt;recommendations&lt;/b&gt;, but I do not know how well these are relayed in the documentation.&lt;/p&gt;

&lt;p&gt;I believe that there should be strict enforcement of valid characters in identifiers.  See &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8110&quot; title=&quot;Start enforcing field naming recomendations in next X.0 release?&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8110&quot;&gt;SOLR-8110&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15132556" author="gerlowskija" created="Thu, 4 Feb 2016 16:48:07 +0000"  >&lt;p&gt;Oh hmm.  That&apos;s a little surprising, given the error message that gets spat out by the create-core failure:&lt;/p&gt;

&lt;p&gt;&quot;&lt;b&gt;Invalid core name&lt;/b&gt;: &apos;getting started_shard2_replica2&apos; Names &lt;b&gt;must&lt;/b&gt; consist entirely of periods, underscores and alphanumerics&quot;&lt;/p&gt;

&lt;p&gt;(text taken from description above, bolding added for emphasis)&lt;/p&gt;

&lt;p&gt;The message above seems to imply that this is a hard requirement, and not just a recommendation (for cores at least).  This might be a recent development though. (edit: it appears this check/message &lt;em&gt;is&lt;/em&gt; recent.  Was added 2 days ago in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8308&quot; title=&quot;Core gets inaccessible after RENAME operation with special characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8308&quot;&gt;&lt;del&gt;SOLR-8308&lt;/del&gt;&lt;/a&gt;).  Regardless of the current behavior, I share your opinion that these should be requirements.&lt;/p&gt;</comment>
                            <comment id="15132559" author="elyograg" created="Thu, 4 Feb 2016 16:51:13 +0000"  >&lt;p&gt;Interesting.  I was not aware that any enforcement had been added.  Solr is updated constantly by people all over the world, though, so sometimes things slip in that I do not notice.&lt;/p&gt;</comment>
                            <comment id="15132586" author="erickerickson" created="Thu, 4 Feb 2016 17:01:55 +0000"  >&lt;p&gt;Getting something half-done then failing when it&apos;s preventable is silly. re: the discussion in 8110 I don&apos;t even really see a reason to wait for collection names. We aren&apos;t breaking existing installs, just erroring out early on create statements.&lt;/p&gt;

&lt;p&gt;So in the Collections API, we have&lt;br/&gt;
CREATE&lt;br/&gt;
CREATEALIAS.&lt;/p&gt;

&lt;p&gt;I don&apos;t see any problem with taking the regex defined in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8308&quot; title=&quot;Core gets inaccessible after RENAME operation with special characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8308&quot;&gt;&lt;del&gt;SOLR-8308&lt;/del&gt;&lt;/a&gt; and using it for name validation in the above two methods at least.&lt;/p&gt;

&lt;p&gt;Probably want to move it into some utility class.&lt;/p&gt;
</comment>
                            <comment id="15132618" author="gerlowskija" created="Thu, 4 Feb 2016 17:17:15 +0000"  >&lt;p&gt;Agreed; it seems trappy to let this behavior stay as is.&lt;/p&gt;

&lt;p&gt;I planned on doing exactly what Erick suggested above, on master, and branch_5x.  Was aiming to get to it when I get off work later.&lt;/p&gt;

&lt;p&gt;Do we also want to make sure these are requirements for the v2/ APIs as well?  To be honest I&apos;m not familiar enough with them to say how identifiers are treated there (they might already have strict-enforcement of identifiers).  Or maybe the code path is shared, and there&apos;s really no distinction here.  Shouldn&apos;t be tough to look up, but I can&apos;t get to it right now.  Just thought I&apos;d raise the question in the meantime.&lt;/p&gt;</comment>
                            <comment id="15134954" author="gerlowskija" created="Fri, 5 Feb 2016 20:51:36 +0000"  >&lt;p&gt;First attempt at a fix.&lt;/p&gt;

&lt;p&gt;A few comments:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;pulled the identifier-validation logic into a separate class (had to tweak the message a bit to make it more generic)&lt;/li&gt;
	&lt;li&gt;added tests to TestCollectionAPI.java.  Not sure this is the best place, but it does the job.  Still getting used to figuring out where tests belong.&lt;/li&gt;
	&lt;li&gt;haven&apos;t yet looked into whether this has any interaction with the v2 APIs.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15135056" author="anshumg" created="Fri, 5 Feb 2016 21:38:26 +0000"  >&lt;p&gt;Thanks for the patch Jason.&lt;/p&gt;

&lt;p&gt;Here&apos;s some feedback:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Why don&apos;t we just throw SolrException from validateCoreName instead?&lt;/li&gt;
	&lt;li&gt;In CollectionsHandler, we don&apos;t need another wrapper method if we do what I&apos;ve suggested in the point above.&lt;/li&gt;
	&lt;li&gt;Just a minor suggestion, can you log the core/collection name in square brackets?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The rest looks fine to me.&lt;br/&gt;
I am not really familiar with the v2 APIs at this point and haven&apos;t looked at what needs to change but I can take a look at that as well unless someone who&apos;s familiar with that confirms that it wouldn&apos;t impact v2.&lt;/p&gt;</comment>
                            <comment id="15135128" author="gerlowskija" created="Fri, 5 Feb 2016 22:10:22 +0000"  >&lt;p&gt;Thanks for the quick feedback Anshum.&lt;/p&gt;

&lt;p&gt;A few thoughts/responses:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I initially avoided throwing SolrException in SolrIdentifierValidator because I was wary of tying that method call to the HTTP response a user gets.  Just wanted to avoid it from a separation of concerns perspective.  But looking at the final product, it is kindof distasteful to need to wrap the method call everywhere to catch the IAE and rethrow a SolrException.  I&apos;ve changed this behavior per your suggestion.&lt;/li&gt;
	&lt;li&gt;Done&lt;/li&gt;
	&lt;li&gt;Done&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Also, I forgot to mention in my last comment that this is a trunk/master patch.  That was probably assumed, but just wanted to clarify.&lt;/p&gt;</comment>
                            <comment id="15135375" author="gerlowskija" created="Sat, 6 Feb 2016 00:58:03 +0000"  >&lt;p&gt;Fixed a small mistake caught by the tests.  All tests pass locally for me now.&lt;/p&gt;</comment>
                            <comment id="15136507" author="jira-bot" created="Sun, 7 Feb 2016 23:03:18 +0000"  >&lt;p&gt;Commit f77feb718a4c93516ea65f4418514202206f2703 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erickerickson&quot; class=&quot;user-hover&quot; rel=&quot;erickerickson&quot;&gt;erickerickson&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=f77feb7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=f77feb7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8642&quot; title=&quot;SOLR allows creation of collections with invalid names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8642&quot;&gt;&lt;del&gt;SOLR-8642&lt;/del&gt;&lt;/a&gt;: SOLR allows creation of collections with invalid names&lt;/p&gt;</comment>
                            <comment id="15136512" author="erickerickson" created="Sun, 7 Feb 2016 23:11:58 +0000"  >&lt;p&gt;Final patch with CHANGES.txt&lt;/p&gt;</comment>
                            <comment id="15136553" author="jira-bot" created="Mon, 8 Feb 2016 01:41:15 +0000"  >&lt;p&gt;Commit 43309a4e76a4ff63dc7ac1b31ace2ec7da777734 in lucene-solr&apos;s branch refs/heads/branch_5x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erickerickson&quot; class=&quot;user-hover&quot; rel=&quot;erickerickson&quot;&gt;erickerickson&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=43309a4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=43309a4&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8642&quot; title=&quot;SOLR allows creation of collections with invalid names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8642&quot;&gt;&lt;del&gt;SOLR-8642&lt;/del&gt;&lt;/a&gt;: SOLR allows creation of collections with invalid names&lt;/p&gt;</comment>
                            <comment id="15136554" author="erickerickson" created="Mon, 8 Feb 2016 01:41:50 +0000"  >&lt;p&gt;Thanks Jason!&lt;/p&gt;</comment>
                            <comment id="15141786" author="gerlowskija" created="Wed, 10 Feb 2016 22:06:56 +0000"  >&lt;p&gt;So, two questions now that I&apos;ve gotten a little distance from this:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;This JIRA added verification to CREATECOLLECTION and CREATEALIAS.  Should we also be adding this sort of verification to CREATESHARD?  It takes a &quot;shard&quot; parameter that is probably subject to the same pitfalls that collection names are.  Maybe this is a different issue, and it shouldn&apos;t be lumped in with collection names.  Just wanted to bring it up.  Happy to spin that discussion off into a separate JIRA if needed.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;When I initially looked at the regex, I was surprised that hyphens (&quot;-&quot;) aren&apos;t allowed.  Seems like a common character to disallow.  Does anyone know of a JIRA where I can read more about where the recommendations came from?  Just curious to see how the recommendations arose.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15141821" author="elyograg" created="Wed, 10 Feb 2016 22:23:28 +0000"  >&lt;blockquote&gt;&lt;p&gt;I was surprised that hyphens (&quot;-&quot;) aren&apos;t allowed.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I use hyphens in some of my core names, but only for the shards on one of my three indexes.&lt;/p&gt;

&lt;p&gt;If it makes sense to exclude them, then please don&apos;t let my mistake change that plan.  I can change my names.&lt;/p&gt;</comment>
                            <comment id="15141956" author="gerlowskija" created="Wed, 10 Feb 2016 23:37:53 +0000"  >&lt;p&gt;I guess that&apos;s the question I&apos;m actually asking: does rejecting names with hyphens make sense?  I&apos;m sure there was a reason that the Solr recommendations warned against using hyphens when they were initially written.  Does anyone know what that rationale was, whether it&apos;s still valid, or where I could go to read up on it?&lt;/p&gt;

&lt;p&gt;I don&apos;t have anything for or against them in names personally.  Just wanted to double-check (if I can) that we&apos;re not being unnecessarily restrictive.&lt;/p&gt;

&lt;p&gt;(Sorry for bringing this up after the fact by the way; probably should&apos;ve looked into this before uploading my patch.)&lt;/p&gt;</comment>
                            <comment id="15143087" author="erickerickson" created="Thu, 11 Feb 2016 17:21:13 +0000"  >&lt;p&gt;bq: I guess that&apos;s the question I&apos;m actually asking: does rejecting names with hyphens make sense?&lt;/p&gt;

&lt;p&gt;IMO, yes. It&apos;s just too easy to have the hyphens confused with the MUST_NOT operation. Sure, it may not be a problem with core specifications, but why risk it?&lt;/p&gt;

&lt;p&gt;bq: Should we also be adding this sort of verification to CREATESHARD?&lt;/p&gt;

&lt;p&gt;I should think so, we should do it under a separate JIRA though IMO.&lt;/p&gt;
</comment>
                            <comment id="15143192" author="gerlowskija" created="Thu, 11 Feb 2016 18:20:39 +0000"  >&lt;p&gt;Thanks for the clarification Erick.  I&apos;ll file a separate JIRA and upload a patch when I get off work today.&lt;/p&gt;</comment>
                            <comment id="15163155" author="markrmiller@gmail.com" created="Wed, 24 Feb 2016 15:06:30 +0000"  >&lt;p&gt;This type of change is a little scary in terms of back compat. There are lot of systems that could create collection automatically, for example, via a script and use collection aliases to juggle collections (eg create and remove them). They could easily be using things like hyphens (which I don&apos;t agree should ever have been decided as invalid anyway, but unrelated). A change like this in a point release should probably have just stuck to chars we know are an issue, especially with 6 so close to release.&lt;/p&gt;</comment>
                            <comment id="15214269" author="yriveiro" created="Mon, 28 Mar 2016 14:51:33 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I can&apos;t believe that I can&apos;t use a hyphen to create my collections ... I have thousand of collection with hyphens and basically I have a automatic system that creates the collections on the fly, and codebase that relay in collection names.&lt;/p&gt;

&lt;p&gt;Sorry but this change can&apos;t be done without a API that allow rename a collection.&lt;/p&gt;

&lt;p&gt;I can&apos;t upgrade to 5.5 because I can&apos;t create collections. This kind of changes can&apos;t go in the middle of a major release. This enforcing should be optional.&lt;/p&gt;

&lt;p&gt;In 4.x someone decides that DocValues in disk doesn&apos;t make sense and deprecated it in the middle of a major release, 10T of data to optimize to wipe the Disk format to use de &quot;default&quot; and 3 month to do it without downtime. Now I can create collections because someone &quot;decides&quot; that hyphens are not allowed. (I use Solr since 3.x, no problems with hyphens).&lt;/p&gt;

&lt;p&gt;Sorry but this is annoying level 9999.&lt;/p&gt;</comment>
                            <comment id="15214997" author="gerlowskija" created="Mon, 28 Mar 2016 22:16:15 +0000"  >&lt;p&gt;Sorry to hear that this is causing so much trouble for you Yago.  There&apos;s been a general consensus that this JIRA was a bit overzealous, and that hyphens should be allowed in collection/core/shard names.  There was already a discussion of this on the related &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8725&quot; title=&quot;Cores, collections, and shards should accept hyphens in identifier name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8725&quot;&gt;&lt;del&gt;SOLR-8725&lt;/del&gt;&lt;/a&gt;.  I&apos;d recommend reading the discussion there.&lt;/p&gt;

&lt;p&gt;To summarize, that JIRA culminated in a patch which allows hyphens in names.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anshumg&quot; class=&quot;user-hover&quot; rel=&quot;anshumg&quot;&gt;anshumg&lt;/a&gt; merged this on master, and branch_6x.  There was also a consensus that the change should be back-ported to the next 5x point release.  But there hasn&apos;t been a 5x point release since then, so there&apos;s no immediate relief for your concern.&lt;/p&gt;

&lt;p&gt;I&apos;m keeping tabs on this to make sure it gets in if/when the community decides on doing another 5x release.  Or at least so I can bug a committer about looking at it.&lt;/p&gt;

&lt;p&gt;Hope that addresses some of your concerns, or at least brings this down to annoying level 9998 for you : )  Sorry again for the trouble.&lt;/p&gt;</comment>
                            <comment id="15215025" author="yriveiro" created="Mon, 28 Mar 2016 22:40:22 +0000"  >&lt;p&gt;This can be used to learn something that I did with linux some time ago. When we releases and API, we release legacy, because people will develop a codebase using it (this include the wrong behaviours).&lt;/p&gt;

&lt;p&gt;If the API is broken, people like me will be in troubles. This is the reason to see system calls with the same name and a number in the end and are deprecated like 10 years later.&lt;/p&gt;

&lt;p&gt;Improvements are good, And I believe that this is doing for a good reason, but without tools that allow people to migrate from older behaviours are not useful.&lt;/p&gt;

&lt;p&gt;Solr should have an LTS version, or at least don&apos;t introduce BC in a major release. It&apos;s not the first time that I pass for this situation, and every time that I need to explain to my boss that something is broken in our current version but we can&apos;t upgrade because other thing is broken in next version, I feel his assassin instinct &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;Annoying level to 9997&lt;/p&gt;</comment>
                            <comment id="15218134" author="harcor" created="Wed, 30 Mar 2016 15:23:10 +0000"  >&lt;p&gt;I agree with Yago,  you can not just change the pattern for the collection name at will.   I am sure the &quot;space&quot; in the name is a good idea to enforce but a &quot;word delimiter&quot; like a dash or underscore should be valid.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12941590">SOLR-8725</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12938864">SOLR-8677</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12901721">SOLR-8110</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12786746" name="SOLR-8642.patch" size="11966" author="erickerickson" created="Sun, 7 Feb 2016 23:11:58 +0000"/>
                            <attachment id="12786612" name="SOLR-8642.patch" size="12169" author="gerlowskija" created="Sat, 6 Feb 2016 00:58:03 +0000"/>
                            <attachment id="12786578" name="SOLR-8642.patch" size="12007" author="gerlowskija" created="Fri, 5 Feb 2016 22:10:22 +0000"/>
                            <attachment id="12786558" name="SOLR-8642.patch" size="11999" author="gerlowskija" created="Fri, 5 Feb 2016 20:51:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sfcv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>