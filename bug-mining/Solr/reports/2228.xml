<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:00:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6397] zkcli script put/putfile should allow overwriting an existing znode&apos;s data</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6397</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;zkcli doesn&apos;t allow me to update a znode that already exists, perhaps using a -f (force) flag?&lt;/p&gt;

&lt;p&gt;Currently, if I want to putfile for a znode that already exists, results in:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; org.apache.zookeeper.KeeperException$NodeExistsException: KeeperErrorCode = NodeExists for /clusterstate.json&lt;br/&gt;
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:119)&lt;br/&gt;
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)&lt;br/&gt;
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:783)&lt;br/&gt;
	at org.apache.solr.common.cloud.SolrZkClient$6.execute(SolrZkClient.java:273)&lt;br/&gt;
	at org.apache.solr.common.cloud.SolrZkClient$6.execute(SolrZkClient.java:270)&lt;br/&gt;
	at org.apache.solr.common.cloud.ZkCmdExecutor.retryOperation(ZkCmdExecutor.java:73)&lt;br/&gt;
	at org.apache.solr.common.cloud.SolrZkClient.create(SolrZkClient.java:270)&lt;br/&gt;
	at org.apache.solr.cloud.ZkCLI.main(ZkCLI.java:268)&lt;/p&gt;


&lt;p&gt;The workaround is to use ZooKeeper&apos;s command-line set command with &quot;`cat &amp;lt;file&amp;gt;`&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12735509">SOLR-6397</key>
            <summary>zkcli script put/putfile should allow overwriting an existing znode&apos;s data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thelabdude">Timothy Potter</assignee>
                                    <reporter username="thelabdude">Timothy Potter</reporter>
                        <labels>
                            <label>SolrCloud</label>
                            <label>difficulty-easy</label>
                            <label>impact-low</label>
                    </labels>
                <created>Wed, 20 Aug 2014 19:23:23 +0000</created>
                <updated>Mon, 23 Feb 2015 05:03:03 +0000</updated>
                            <resolved>Wed, 24 Dec 2014 21:01:05 +0000</resolved>
                                                    <fixVersion>5.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>7</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="14104463" author="markrmiller@gmail.com" created="Wed, 20 Aug 2014 20:04:14 +0000"  >&lt;p&gt;Yeah, I think it&apos;s just an oversight. I&apos;d probably go without requiring -f myself.&lt;/p&gt;</comment>
                            <comment id="14163567" author="thelabdude" created="Wed, 8 Oct 2014 14:51:02 +0000"  >&lt;p&gt;Fix is trivial - I&apos;ll get this one done today while waiting on tests to run&lt;/p&gt;</comment>
                            <comment id="14238192" author="themarcelor" created="Mon, 8 Dec 2014 18:20:08 +0000"  >&lt;p&gt;If this client instance has a &quot;setData&quot; method:&lt;br/&gt;
SolrZkClient zkClient = null;&lt;/p&gt;

&lt;p&gt;how about including a &quot;makepath&quot; call in case the znode doesn&apos;t exist and replace the &quot;create&quot; call with &quot;setData&quot;?&lt;br/&gt;
else if (line.getOptionValue(CMD).equals(PUT)) {&lt;br/&gt;
...&lt;br/&gt;
zkClient.create(arglist.get(0).toString(), arglist.get(1).toString().getBytes(&quot;UTF-8&quot;) // replace it here&lt;/p&gt;

&lt;p&gt;Apologies in advance for the intrusive comment, just an idea.&lt;/p&gt;</comment>
                            <comment id="14239474" author="gilinachum" created="Tue, 9 Dec 2014 14:45:20 +0000"  >&lt;p&gt;One workaround is to delete the znode (cmd clear) then put it in place again (cmd putfile).&lt;/p&gt;</comment>
                            <comment id="14258434" author="jira-bot" created="Wed, 24 Dec 2014 18:44:04 +0000"  >&lt;p&gt;Commit 1647828 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1647828&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1647828&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6397&quot; title=&quot;zkcli script put/putfile should allow overwriting an existing znode&amp;#39;s data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6397&quot;&gt;&lt;del&gt;SOLR-6397&lt;/del&gt;&lt;/a&gt;: zkcli script put/putfile should allow overwriting an existing znode&apos;s data&lt;/p&gt;</comment>
                            <comment id="14258516" author="jira-bot" created="Wed, 24 Dec 2014 21:00:57 +0000"  >&lt;p&gt;Commit 1647842 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1647842&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1647842&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6397&quot; title=&quot;zkcli script put/putfile should allow overwriting an existing znode&amp;#39;s data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6397&quot;&gt;&lt;del&gt;SOLR-6397&lt;/del&gt;&lt;/a&gt;: zkcli script put/putfile should allow overwriting an existing znode&apos;s data&lt;/p&gt;</comment>
                            <comment id="14333007" author="anshumg" created="Mon, 23 Feb 2015 05:03:03 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1z5bz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>