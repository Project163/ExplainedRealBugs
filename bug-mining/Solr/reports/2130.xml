<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:57:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6551] ConcurrentModificationException in UpdateLog</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6551</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;:java.util.ConcurrentModificationException
       at java.util.LinkedList$ListItr.checkForComodification(Unknown Source)
       at java.util.LinkedList$ListItr.next(Unknown Source)
       at org.apache.solr.update.UpdateLog.getTotalLogsSize(UpdateLog.java:199)
       at org.apache.solr.update.DirectUpdateHandler2.getStatistics(DirectUpdateHandler2.java:871)
       at org.apache.solr.handler.admin.SolrInfoMBeanHandler.getMBeanInfo(SolrInfoMBeanHandler.java:159)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12743433">SOLR-6551</key>
            <summary>ConcurrentModificationException in UpdateLog</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="noble.paul">Noble Paul</assignee>
                                    <reporter username="noble.paul">Noble Paul</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Sep 2014 04:33:43 +0000</created>
                <updated>Mon, 30 Mar 2015 23:55:22 +0000</updated>
                            <resolved>Tue, 11 Nov 2014 09:12:34 +0000</resolved>
                                    <version>4.7</version>
                    <version>4.8</version>
                    <version>4.9</version>
                    <version>4.10.4</version>
                                    <fixVersion>5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14146625" author="mbennett" created="Wed, 24 Sep 2014 18:03:24 +0000"  >&lt;p&gt;This is a comment Noble made to me about this via email:&lt;br/&gt;
&quot;I looked into the code and it&apos;s not threadsafe.&quot;&lt;/p&gt;</comment>
                            <comment id="14146633" author="yseeley@gmail.com" created="Wed, 24 Sep 2014 18:06:59 +0000"  >&lt;p&gt;I assume this bug was introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5441&quot; title=&quot;Expose transaction log files number and their size via JMX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5441&quot;&gt;&lt;del&gt;SOLR-5441&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14146653" author="yseeley@gmail.com" created="Wed, 24 Sep 2014 18:15:08 +0000"  >&lt;p&gt;BTW, we have some very good transaction log stress tests.&lt;br/&gt;
Step #1 here should probably be adding calls to the new methods introduced (like getTotalLogsSize) and verify that these tests can be made to fail.  In general, see the tests that extend TestRTGBase.&lt;/p&gt;</comment>
                            <comment id="14146727" author="yseeley@gmail.com" created="Wed, 24 Sep 2014 18:56:58 +0000"  >&lt;p&gt;After a really quick look, it looks like &quot;logs&quot; is guarded by synchronized(this) (the UpdateLog monitor), and getTotalLogsSize() uses synchronized(logs).  So it should be an easy fix, but as mentioned above, we should make some tests fail w/o the fix first...&lt;/p&gt;</comment>
                            <comment id="14147667" author="noble.paul" created="Thu, 25 Sep 2014 12:01:16 +0000"  >&lt;p&gt;the following methods must be causing the problem&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; getTotalLogsSize() {
    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; size = 0;
    &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (logs) {
      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (TransactionLog log : logs) {
        size += log.getLogSize();
      }
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; size;
  }

  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; getTotalLogsNumber() {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; logs.size();
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14147673" author="yseeley@gmail.com" created="Thu, 25 Sep 2014 12:06:37 +0000"  >&lt;p&gt;Yeah, I thought that&apos;s what I essentially said &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Replace synchronized(logs) with synchronized(this) &lt;br/&gt;
(and add around logs.size() too of course)&lt;/p&gt;</comment>
                            <comment id="14147699" author="noble.paul" created="Thu, 25 Sep 2014 12:47:20 +0000"  >&lt;p&gt;fix w/o testcass&lt;/p&gt;</comment>
                            <comment id="14175942" author="jira-bot" created="Sat, 18 Oct 2014 11:19:03 +0000"  >&lt;p&gt;Commit 1632756 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1632756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1632756&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6551&quot; title=&quot;ConcurrentModificationException in UpdateLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6551&quot;&gt;&lt;del&gt;SOLR-6551&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14175943" author="jira-bot" created="Sat, 18 Oct 2014 11:20:08 +0000"  >&lt;p&gt;Commit 1632757 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1632757&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1632757&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6551&quot; title=&quot;ConcurrentModificationException in UpdateLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6551&quot;&gt;&lt;del&gt;SOLR-6551&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14205873" author="shalinmangar" created="Tue, 11 Nov 2014 03:17:20 +0000"  >&lt;p&gt;Can we close this?&lt;/p&gt;</comment>
                            <comment id="14387632" author="shalinmangar" created="Mon, 30 Mar 2015 23:50:24 +0000"  >&lt;p&gt;This was fixed in 4.10 but it was not recorded in the change log. Should we add it now, just for our records?&lt;/p&gt;</comment>
                            <comment id="14387639" author="shalinmangar" created="Mon, 30 Mar 2015 23:55:22 +0000"  >&lt;p&gt;Actually this fix is only in 5.0 because it was committed to branch_5x only. Since it wasn&apos;t mentioned in the change log, nobody back-ported it to branch_4x.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12671210" name="SOLR-6551.patch" size="1216" author="noble.paul" created="Thu, 25 Sep 2014 12:47:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20dn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>