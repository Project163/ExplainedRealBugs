<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:46:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-14869] [child] transformer includes deleted documents</title>
                <link>https://issues.apache.org/jira/browse/SOLR-14869</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;If you have nested documents that include &quot;deleted&quot; docs (ie: using &quot;delete by query&quot;) the &lt;tt&gt;[child]&lt;/tt&gt; transformer still include those deleted docs i it&apos;s output&lt;/p&gt;</description>
                <environment></environment>
        <key id="13327737">SOLR-14869</key>
            <summary>[child] transformer includes deleted documents</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsmiley">David Smiley</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Sep 2020 21:28:25 +0000</created>
                <updated>Wed, 4 Nov 2020 15:21:48 +0000</updated>
                            <resolved>Wed, 14 Oct 2020 12:30:04 +0000</resolved>
                                                    <fixVersion>8.7</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4800">1h 20m</timespent>
                                <comments>
                            <comment id="17196564" author="hossman" created="Tue, 15 Sep 2020 21:33:42 +0000"  >&lt;p&gt;Assume we do the following with &lt;tt&gt;bin/solr -e cloud -noprompt&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;curl -X POST -H &apos;Content-type:application/json&apos; --data-binary &apos;{
  &quot;replace-field&quot;:{
     &quot;name&quot;:&quot;_root_&quot;,
     &quot;type&quot;:&quot;string&quot;,
     &quot;docValues&quot;:true }
}&apos; http://localhost:8983/solr/gettingstarted/schema

curl -X POST &apos;http://localhost:8983/solr/gettingstarted/update?commit=true&apos; -H &apos;Content-Type: application/json&apos; --data-binary &apos;[
{ &quot;id&quot;: &quot;P11!prod&quot;,
   &quot;name_s&quot;: &quot;Swingline Stapler&quot;,
   &quot;description_t&quot;: &quot;The Cadillac of office staplers ...&quot;,
   &quot;skus&quot;: [ { &quot;id&quot;: &quot;P11!S21&quot;,
               &quot;color_s&quot;: &quot;RED&quot;,
               &quot;price_i&quot;: 42,
               &quot;manuals&quot;: [ { &quot;id&quot;: &quot;P11!D41&quot;,
                              &quot;name_s&quot;: &quot;Red Swingline Brochure&quot;,
                              &quot;pages_i&quot;:1,
                              &quot;content_t&quot;: &quot;...&quot;
                            } ]
             },
             { &quot;id&quot;: &quot;P11!S31&quot;,
               &quot;color_s&quot;: &quot;BLACK&quot;,
               &quot;price_i&quot;: 3
             } ],
   &quot;manuals&quot;: [ { &quot;id&quot;: &quot;P11!D51&quot;,
                  &quot;name_s&quot;: &quot;Quick Reference Guide&quot;,
                  &quot;pages_i&quot;:1,
                  &quot;content_t&quot;: &quot;How to use your stapler ...&quot;
                },
                { &quot;id&quot;: &quot;P11!D61&quot;,
                  &quot;name_s&quot;: &quot;Warranty Details&quot;,
                  &quot;pages_i&quot;:42,
                  &quot;content_t&quot;: &quot;... lifetime guarantee ...&quot;
                } ]
 },
 { &quot;id&quot;: &quot;P22!prod&quot;,
   &quot;name_s&quot;: &quot;Mont Blanc Fountain Pen&quot;,
   &quot;description_t&quot;: &quot;A Premium Writing Instrument ...&quot;,
   &quot;skus&quot;: [ { &quot;id&quot;: &quot;P22!S22&quot;,
               &quot;color_s&quot;: &quot;RED&quot;,
               &quot;price_i&quot;: 89,
               &quot;manuals&quot;: [ { &quot;id&quot;: &quot;P22!D42&quot;,
                              &quot;name_s&quot;: &quot;Red Mont Blanc Brochure&quot;,
                              &quot;pages_i&quot;:1,
                              &quot;content_t&quot;: &quot;...&quot;
                            } ]
             },
             { &quot;id&quot;: &quot;P22!S32&quot;,
               &quot;color_s&quot;: &quot;BLACK&quot;,
               &quot;price_i&quot;: 67
             } ],
   &quot;manuals&quot;: [ { &quot;id&quot;: &quot;P22!D52&quot;,
                  &quot;name_s&quot;: &quot;How To Use A Pen&quot;,
                  &quot;pages_i&quot;:42,
                  &quot;content_t&quot;: &quot;Start by removing the cap ...&quot;
                } ]
 } ]&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then note the following...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ curl &apos;http://localhost:8983/solr/gettingstarted/select?q=id:P11!prod&amp;amp;fl=id,[child],skus,manuals,[docid]&apos;
{
  &quot;responseHeader&quot;:{
    &quot;zkConnected&quot;:true,
    &quot;status&quot;:0,
    &quot;QTime&quot;:18,
    &quot;params&quot;:{
      &quot;q&quot;:&quot;id:P11!prod&quot;,
      &quot;fl&quot;:&quot;id,[child],skus,manuals,[docid]&quot;}},
  &quot;response&quot;:{&quot;numFound&quot;:1,&quot;start&quot;:0,&quot;maxScore&quot;:0.9452007,&quot;numFoundExact&quot;:true,&quot;docs&quot;:[
      {
        &quot;id&quot;:&quot;P11!prod&quot;,
        &quot;skus&quot;:[
          {
            &quot;id&quot;:&quot;P11!S21&quot;,
            &quot;[docid]&quot;:1,
            &quot;manuals&quot;:[
              {
                &quot;id&quot;:&quot;P11!D41&quot;,
                &quot;[docid]&quot;:0}]},
          
          {
            &quot;id&quot;:&quot;P11!S31&quot;,
            &quot;[docid]&quot;:2}],
        &quot;manuals&quot;:[
          {
            &quot;id&quot;:&quot;P11!D51&quot;,
            &quot;[docid]&quot;:3},
          
          {
            &quot;id&quot;:&quot;P11!D61&quot;,
            &quot;[docid]&quot;:4}],
        &quot;[docid]&quot;:5}]
  }}

$ curl -X POST &apos;http://localhost:8983/solr/gettingstarted/update?commit=true&apos; -H &apos;Content-Type: application/json&apos; --data-binary &apos;{&quot;delete&quot; : { &quot;query&quot;: &quot;id:P11!D51&quot; }}&apos;
{
  &quot;responseHeader&quot;:{
    &quot;rf&quot;:2,
    &quot;status&quot;:0,
    &quot;QTime&quot;:73}}

$ curl &apos;http://localhost:8983/solr/gettingstarted/select?q=id:P11!D51&apos;
{
  &quot;responseHeader&quot;:{
    &quot;zkConnected&quot;:true,
    &quot;status&quot;:0,
    &quot;QTime&quot;:22,
    &quot;params&quot;:{
      &quot;q&quot;:&quot;id:P11!D51&quot;}},
  &quot;response&quot;:{&quot;numFound&quot;:0,&quot;start&quot;:0,&quot;maxScore&quot;:0.0,&quot;numFoundExact&quot;:true,&quot;docs&quot;:[]
  }}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...nested document has been deleted, but requests to the parent using &lt;tt&gt;[child]&lt;/tt&gt; still return it...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ curl &apos;http://localhost:8983/solr/gettingstarted/select?q=id:P11!prod&amp;amp;fl=id,[child],skus,manuals,[docid]&apos;
{
  &quot;responseHeader&quot;:{
    &quot;zkConnected&quot;:true,
    &quot;status&quot;:0,
    &quot;QTime&quot;:18,
    &quot;params&quot;:{
      &quot;q&quot;:&quot;id:P11!prod&quot;,
      &quot;fl&quot;:&quot;id,[child],skus,manuals,[docid]&quot;}},
  &quot;response&quot;:{&quot;numFound&quot;:1,&quot;start&quot;:0,&quot;maxScore&quot;:0.9452007,&quot;numFoundExact&quot;:true,&quot;docs&quot;:[
      {
        &quot;id&quot;:&quot;P11!prod&quot;,
        &quot;skus&quot;:[
          {
            &quot;id&quot;:&quot;P11!S21&quot;,
            &quot;[docid]&quot;:1,
            &quot;manuals&quot;:[
              {
                &quot;id&quot;:&quot;P11!D41&quot;,
                &quot;[docid]&quot;:0}]},
          
          {
            &quot;id&quot;:&quot;P11!S31&quot;,
            &quot;[docid]&quot;:2}],
        &quot;manuals&quot;:[
          {
            &quot;id&quot;:&quot;P11!D51&quot;,
            &quot;[docid]&quot;:3},
          
          {
            &quot;id&quot;:&quot;P11!D61&quot;,
            &quot;[docid]&quot;:4}],
        &quot;[docid]&quot;:5}]
  }}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</comment>
                            <comment id="17201252" author="dsmiley" created="Thu, 24 Sep 2020 03:59:03 +0000"  >&lt;p&gt;Eeek!  I think this bug is my fault.&lt;/p&gt;</comment>
                            <comment id="17211300" author="brot" created="Fri, 9 Oct 2020 18:58:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt; &lt;br/&gt;
Opened a PR, hopefully I took care of all the edge cases.&lt;br/&gt;
It&apos;s been a while since I&apos;ve touched Solr&apos;s codebase.&lt;/p&gt;</comment>
                            <comment id="17213869" author="jira-bot" created="Wed, 14 Oct 2020 12:26:26 +0000"  >&lt;p&gt;Commit fa3e1ad71fd97200b98f9e7d1e461ddfa78e357c in lucene-solr&apos;s branch refs/heads/master from Bar Rotstein&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=fa3e1ad&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=fa3e1ad&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14869&quot; title=&quot;[child] transformer includes deleted documents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14869&quot;&gt;&lt;del&gt;SOLR-14869&lt;/del&gt;&lt;/a&gt;: ChildDocTransformer should have omitted deleted child documents.&lt;br/&gt;
Closes #1970&lt;/p&gt;</comment>
                            <comment id="17213872" author="jira-bot" created="Wed, 14 Oct 2020 12:28:56 +0000"  >&lt;p&gt;Commit 1bbea05ac774cc925a106ec5c3c070412620315b in lucene-solr&apos;s branch refs/heads/branch_8x from Bar Rotstein&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=1bbea05&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=1bbea05&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14869&quot; title=&quot;[child] transformer includes deleted documents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14869&quot;&gt;&lt;del&gt;SOLR-14869&lt;/del&gt;&lt;/a&gt;: ChildDocTransformer should have omitted deleted child documents.&lt;br/&gt;
Closes #1970&lt;/p&gt;

&lt;p&gt;(cherry picked from commit fa3e1ad71fd97200b98f9e7d1e461ddfa78e357c)&lt;/p&gt;</comment>
                            <comment id="17213874" author="dsmiley" created="Wed, 14 Oct 2020 12:30:36 +0000"  >&lt;p&gt;Thanks for contributing again Bar!&lt;/p&gt;</comment>
                            <comment id="17214894" author="jira-bot" created="Thu, 15 Oct 2020 18:16:26 +0000"  >&lt;p&gt;Commit fa3e1ad71fd97200b98f9e7d1e461ddfa78e357c in lucene-solr&apos;s branch refs/heads/pr1985 from Bar Rotstein&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=fa3e1ad&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=fa3e1ad&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14869&quot; title=&quot;[child] transformer includes deleted documents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14869&quot;&gt;&lt;del&gt;SOLR-14869&lt;/del&gt;&lt;/a&gt;: ChildDocTransformer should have omitted deleted child documents.&lt;br/&gt;
Closes #1970&lt;/p&gt;</comment>
                            <comment id="17226133" author="atri" created="Wed, 4 Nov 2020 15:21:48 +0000"  >&lt;p&gt;Closing after the 8.7.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13327735">SOLR-14868</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0imrc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>