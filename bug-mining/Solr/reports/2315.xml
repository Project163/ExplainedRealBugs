<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:02:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6854] Stale cached state in CloudSolrClient</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6854</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;CloudSolrServer&#8217;s cached state is not being updated for a newly created collection if we started polling for the collection state too early and a &quot;down&quot; state is cached. Requests to the newly created collection continues to fail with &quot;No live SolrServers available to handle this request&quot; until the cache is invalidated by time.&lt;/p&gt;

&lt;p&gt;Logging on the client side reveals that while the state in ZkStateReader is updated to &quot;active&quot;, the cached state in CloudSolrServer remains in &quot;down&quot;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;CloudSolrServer cached state:&lt;/p&gt;

&lt;p&gt;DocCollection(collection-1418250319268)={&lt;br/&gt;
  &quot;shards&quot;:{&quot;shard1&quot;:{&lt;br/&gt;
      &quot;range&quot;:&quot;80000000-7fffffff&quot;,&lt;br/&gt;
      &quot;state&quot;:&quot;active&quot;,&lt;br/&gt;
      &quot;replicas&quot;:{&quot;core_node1&quot;:{&lt;br/&gt;
          &quot;state&quot;:&quot;down&quot;,&lt;br/&gt;
          &quot;base_url&quot;:&quot;http://localhost:8983/solr&quot;,&lt;br/&gt;
          &quot;core&quot;:&quot;collection-1418250319268_shard1_replica1&quot;,&lt;br/&gt;
          &quot;node_name&quot;:&quot;localhost:8983_solr&quot;}}}},&lt;br/&gt;
  &quot;maxShardsPerNode&quot;:&quot;1&quot;,&lt;br/&gt;
  &quot;external&quot;:&quot;true&quot;,&lt;br/&gt;
  &quot;router&quot;:&lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: { &amp;quot;name&amp;quot;}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;,&lt;br/&gt;
  &quot;replicationFactor&quot;:&quot;1&#8221;}&lt;/p&gt;

&lt;p&gt;ZkStateReader state:&lt;/p&gt;

&lt;p&gt;DocCollection(collection-1418250319268)={&lt;br/&gt;
  &quot;shards&quot;:{&quot;shard1&quot;:{&lt;br/&gt;
      &quot;range&quot;:&quot;80000000-7fffffff&quot;,&lt;br/&gt;
      &quot;state&quot;:&quot;active&quot;,&lt;br/&gt;
      &quot;replicas&quot;:{&quot;core_node1&quot;:{&lt;br/&gt;
          &quot;state&quot;:&quot;active&quot;,&lt;br/&gt;
          &quot;base_url&quot;:&quot;http://localhost:8983/solr&quot;,&lt;br/&gt;
          &quot;core&quot;:&quot;collection-1418250319268_shard1_replica1&quot;,&lt;br/&gt;
          &quot;node_name&quot;:&quot;localhost:8983_solr&quot;,&lt;br/&gt;
          &quot;leader&quot;:&quot;true&quot;}}}},&lt;br/&gt;
  &quot;maxShardsPerNode&quot;:&quot;1&quot;,&lt;br/&gt;
  &quot;router&quot;:&lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: { &amp;quot;name&amp;quot;}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;,&lt;br/&gt;
  &quot;external&quot;:&quot;true&quot;,&lt;br/&gt;
  &quot;replicationFactor&quot;:&quot;1&#8221;}&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12762078">SOLR-6854</key>
            <summary>Stale cached state in CloudSolrClient</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="noble.paul">Noble Paul</assignee>
                                    <reporter username="mewmewball">Jessica Cheng Mallet</reporter>
                        <labels>
                            <label>cache</label>
                            <label>solrcloud</label>
                            <label>solrj</label>
                    </labels>
                <created>Tue, 16 Dec 2014 19:25:10 +0000</created>
                <updated>Mon, 9 May 2016 18:54:40 +0000</updated>
                            <resolved>Wed, 28 Jan 2015 13:08:45 +0000</resolved>
                                                    <fixVersion>5.0</fixVersion>
                    <fixVersion>5.1</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                    <component>SolrJ</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14295099" author="noble.paul" created="Wed, 28 Jan 2015 12:35:32 +0000"  >&lt;p&gt;avoid caching if all slices are not active&lt;/p&gt;</comment>
                            <comment id="14295107" author="noble.paul" created="Wed, 28 Jan 2015 12:55:03 +0000"  >&lt;p&gt;more efficient approach,&lt;/p&gt;

&lt;p&gt;Invalidate cache for that collection before throwing an error saying  &quot;there was no node to service a request&quot;&lt;/p&gt;</comment>
                            <comment id="14295113" author="jira-bot" created="Wed, 28 Jan 2015 13:03:00 +0000"  >&lt;p&gt;Commit 1655289 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1655289&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1655289&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6854&quot; title=&quot;Stale cached state in CloudSolrClient&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6854&quot;&gt;&lt;del&gt;SOLR-6854&lt;/del&gt;&lt;/a&gt; Stale cached state in CloudSolrServer&lt;/p&gt;</comment>
                            <comment id="14295117" author="jira-bot" created="Wed, 28 Jan 2015 13:07:42 +0000"  >&lt;p&gt;Commit 1655293 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1655293&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1655293&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6854&quot; title=&quot;Stale cached state in CloudSolrClient&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6854&quot;&gt;&lt;del&gt;SOLR-6854&lt;/del&gt;&lt;/a&gt; Stale cached state in CloudSolrServer&lt;/p&gt;</comment>
                            <comment id="14295119" author="noble.paul" created="Wed, 28 Jan 2015 13:08:45 +0000"  >&lt;p&gt;I think this must go into 5.0 as well what say &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anshumg&quot; class=&quot;user-hover&quot; rel=&quot;anshumg&quot;&gt;anshumg&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="14295490" author="anshumg" created="Wed, 28 Jan 2015 17:53:30 +0000"  >&lt;p&gt;It makes sense for this to be in 5.0. It&apos;s a change related to something that&apos;d be released with 5.0, so yes.&lt;br/&gt;
Thanks for fixing this Noble.&lt;/p&gt;</comment>
                            <comment id="14295596" author="jira-bot" created="Wed, 28 Jan 2015 18:44:28 +0000"  >&lt;p&gt;Commit 1655430 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_5_0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1655430&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1655430&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6854&quot; title=&quot;Stale cached state in CloudSolrClient&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6854&quot;&gt;&lt;del&gt;SOLR-6854&lt;/del&gt;&lt;/a&gt;: Stale cached state in CloudSolrClient&lt;/p&gt;</comment>
                            <comment id="14332582" author="anshumg" created="Mon, 23 Feb 2015 05:00:47 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12694980" name="SOLR-6854.patch" size="764" author="noble.paul" created="Wed, 28 Jan 2015 12:55:03 +0000"/>
                            <attachment id="12694977" name="SOLR-6854.patch" size="916" author="noble.paul" created="Wed, 28 Jan 2015 12:35:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23hon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>