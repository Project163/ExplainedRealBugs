<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:11:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-17740] JAX-RS V2 API requests with payloads can skip first byte</title>
                <link>https://issues.apache.org/jira/browse/SOLR-17740</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The new V2 API (JAX-RS, Jersey) has its own stack of code between Solr&apos;s V2HttpCall and the handler, that which doesn&apos;t know about the SolrQueryRequest. &#160;Specifically &lt;tt&gt;org.apache.solr.api.V2HttpCall#handleAdmin&lt;/tt&gt; doesn&apos;t use &lt;tt&gt;solrReq&lt;/tt&gt; as it passes on to &lt;tt&gt;invokeJerseyRequest&lt;/tt&gt;. But the payload of the request has been somewhat parsed already into the ContentStream on SolrQueryRequest, and this can sometimes require reading the first byte &#8211; see &lt;tt&gt;org.apache.solr.servlet.SolrRequestParsers.RawRequestParser#parseParamsAndFillStreams&lt;/tt&gt;. Consequently V2 requests like FileStore uploadFile can be impacted depending on the details of the headers present.&lt;/p&gt;

&lt;p&gt;In practice, Jetty HttpClient intermittently was triggering affected and unaffected requests when executing the following test:&lt;br/&gt;
&lt;tt&gt;./gradlew :solr:core:test --tests &quot;org.apache.solr.cli.PackageToolTest.testPackageTool&quot; -Ptests.seed=B8415E6AAC736FCD&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13615093">SOLR-17740</key>
            <summary>JAX-RS V2 API requests with payloads can skip first byte</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsmiley">David Smiley</assignee>
                                    <reporter username="dsmiley">David Smiley</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sun, 13 Apr 2025 06:01:24 +0000</created>
                <updated>Thu, 24 Jul 2025 22:50:51 +0000</updated>
                            <resolved>Fri, 18 Apr 2025 12:11:42 +0000</resolved>
                                                    <fixVersion>9.9</fixVersion>
                                    <component>v2 API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17945176" author="dsmiley" created="Wed, 16 Apr 2025 22:16:45 +0000"  >&lt;p&gt;After looking deeper at why PushbackInputStream was added back in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15418&quot; title=&quot;V2 API for GET to a collection&amp;#39;s handler fails, complaining about bad contentType&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15418&quot;&gt;&lt;del&gt;SOLR-15418&lt;/del&gt;&lt;/a&gt; (me to fix another bug for v2), I&apos;m happy to report I can remove that, and all tests pass now. &#160;In the last 4 years, perhaps some detail changed about v2 pertaining to why I chose that unfortunate solution then.&lt;/p&gt;</comment>
                            <comment id="17945667" author="jira-bot" created="Fri, 18 Apr 2025 11:52:18 +0000"  >&lt;p&gt;Commit 4aa321635d6fd71e9e0812c97639886ebc229735 in solr&apos;s branch refs/heads/main from David Smiley&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=4aa321635d6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=4aa321635d6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17740&quot; title=&quot;JAX-RS V2 API requests with payloads can skip first byte&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17740&quot;&gt;&lt;del&gt;SOLR-17740&lt;/del&gt;&lt;/a&gt;: V2 API: fix raw file uploads missing 1st byte (#3322)&lt;/p&gt;

&lt;p&gt;SolrRequestParsers can consume one byte of the underlying stream, but V2 was ignoring the SolrQueryRequest content stream.  Fix is to detect HTTP body in a more standards-compliant way; don&apos;t read a byte to see.&lt;/p&gt;</comment>
                            <comment id="17945668" author="jira-bot" created="Fri, 18 Apr 2025 12:11:04 +0000"  >&lt;p&gt;Commit f8ae02cc79ea25b5163249c9f4053b74ee02a286 in solr&apos;s branch refs/heads/branch_9x from David Smiley&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=f8ae02cc79e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=f8ae02cc79e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17740&quot; title=&quot;JAX-RS V2 API requests with payloads can skip first byte&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17740&quot;&gt;&lt;del&gt;SOLR-17740&lt;/del&gt;&lt;/a&gt;: V2 API: fix raw file uploads missing 1st byte (#3322)&lt;/p&gt;

&lt;p&gt;SolrRequestParsers can consume one byte of the underlying stream, but V2 was ignoring the SolrQueryRequest content stream.  Fix is to detect HTTP body in a more standards-compliant way; don&apos;t read a byte to see.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 4aa321635d6fd71e9e0812c97639886ebc229735)&lt;/p&gt;</comment>
                            <comment id="18009714" author="houston" created="Thu, 24 Jul 2025 22:50:51 +0000"  >&lt;p&gt;Closing after the 9.9.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13379347">SOLR-15418</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1vc1c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>