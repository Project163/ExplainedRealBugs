<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:06:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16963] verifyClientHostName is used incorrectly</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16963</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Since &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14163&quot; title=&quot;SOLR_SSL_CLIENT_HOSTNAME_VERIFICATION needs to work with Jetty server/client SSL contexts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14163&quot;&gt;&lt;del&gt;SOLR-14163&lt;/del&gt;&lt;/a&gt;, the &lt;tt&gt;solr.jetty.ssl.verifyClientHostName&lt;/tt&gt; and &lt;tt&gt;solr.ssl.checkPeerName&lt;/tt&gt; options have done the exact same thing in the &lt;tt&gt;Http2SolrClient&lt;/tt&gt;, which is control the &lt;tt&gt;EndpointIdentificationAlgorithm&lt;/tt&gt;.&#160;&lt;/p&gt;

&lt;p&gt;Since &lt;tt&gt;solr.jetty.ssl.verifyClientHostName&lt;/tt&gt; is checked second, that is actually the setting that is used to determine the &lt;tt&gt;EndpointIdentificationAlgorithm&lt;/tt&gt;, so &lt;tt&gt;solr.ssl.checkPeerName&lt;/tt&gt; is actually ignored.&lt;/p&gt;

&lt;p&gt;Going forward I suggest that we stop our use of &lt;tt&gt;solr.jetty.ssl.verifyClientHostname&lt;/tt&gt;, because it was added after &lt;tt&gt;solr.ssl.checkPeerName&lt;/tt&gt; and its name is less correct. The endpointIdentificationAlgorithm doesn&apos;t do any verification of the client&apos;s hostname. That&apos;s a mTLS option, and is server-side.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13549944">SOLR-16963</key>
            <summary>verifyClientHostName is used incorrectly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="houston">Houston Putman</assignee>
                                    <reporter username="houston">Houston Putman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Sep 2023 16:05:37 +0000</created>
                <updated>Fri, 17 Oct 2025 20:05:10 +0000</updated>
                            <resolved>Fri, 12 Jan 2024 19:12:23 +0000</resolved>
                                    <version>8.4.1</version>
                                    <fixVersion>9.4</fixVersion>
                    <fixVersion>10.0</fixVersion>
                                    <component>SolrJ</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17762796" author="houston" created="Thu, 7 Sep 2023 16:09:26 +0000"  >&lt;p&gt;I&apos;m not sure how fixing this would be back-compat, other than removing &lt;tt&gt;solr.ssl.checkPeerName&lt;/tt&gt;, since that hasn&apos;t actually been used since 8.4.&lt;/p&gt;</comment>
                            <comment id="17763782" author="houston" created="Mon, 11 Sep 2023 15:37:36 +0000"  >&lt;p&gt;Not a solution for the back compat issues, but I have determined that this is indeed a bug.&lt;/p&gt;

&lt;p&gt;The new mTLS tests (&lt;a href=&quot;https://github.com/apache/solr/pull/1912&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/pull/1912&lt;/a&gt;) allow me to create a mTLS cluster with the server certs using &quot;localhost&quot; and the client certs using some made up host, such as &quot;test.solr.apache.org&quot;. If I don&apos;t do anything other than remove the bas clientHostNameVerification option in the Http2SolrClient, everything succeeds. However, if I go back to the previous way that CLIENT_HOSTNAME_VERIFICATION was used, previous to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14163&quot; title=&quot;SOLR_SSL_CLIENT_HOSTNAME_VERIFICATION needs to work with Jetty server/client SSL contexts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14163&quot;&gt;&lt;del&gt;SOLR-14163&lt;/del&gt;&lt;/a&gt;, then it fails, as I would expect (since the client hostname does not match the client certificate). We can now add back that option as it was previously used, and use our tests to show that it doesn&apos;t break mTLS.&lt;/p&gt;</comment>
                            <comment id="17763791" author="houston" created="Mon, 11 Sep 2023 15:48:42 +0000"  >&lt;p&gt;We should backport this to 8.11.3&lt;/p&gt;</comment>
                            <comment id="17764765" author="jira-bot" created="Wed, 13 Sep 2023 16:00:43 +0000"  >&lt;p&gt;Commit 901e0debc381f988373a6d9c09ca47341dda05fb in solr&apos;s branch refs/heads/main from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=901e0debc38&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=901e0debc38&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16963&quot; title=&quot;verifyClientHostName is used incorrectly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16963&quot;&gt;&lt;del&gt;SOLR-16963&lt;/del&gt;&lt;/a&gt;: Fix usage of clientHostnameVerification (#1916)&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;It no longer overrides the checkPeerName option&lt;/li&gt;
	&lt;li&gt;It once again acts as a server setting to check the client&lt;br/&gt;
  hostname against the client certificate&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17764767" author="jira-bot" created="Wed, 13 Sep 2023 16:03:35 +0000"  >&lt;p&gt;Commit 3cd7f542a54bf7f76dc1fb6b499f0da04f8e9e2f in solr&apos;s branch refs/heads/branch_9x from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=3cd7f542a54&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=3cd7f542a54&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16963&quot; title=&quot;verifyClientHostName is used incorrectly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16963&quot;&gt;&lt;del&gt;SOLR-16963&lt;/del&gt;&lt;/a&gt;: Fix usage of clientHostnameVerification (#1916)&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;It no longer overrides the checkPeerName option&lt;/li&gt;
	&lt;li&gt;It once again acts as a server setting to check the client&lt;br/&gt;
  hostname against the client certificate&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;(cherry picked from commit 901e0debc381f988373a6d9c09ca47341dda05fb)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13277422">SOLR-14163</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 8 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1k8ew:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>