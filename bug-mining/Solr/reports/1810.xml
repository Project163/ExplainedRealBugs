<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:47:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-5815] Non-reproducible failures of TestNonNRTOpen.testReaderIsNotNRT</title>
                <link>https://issues.apache.org/jira/browse/SOLR-5815</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4909&quot; title=&quot;Solr and IndexReader Re-opening on Replication Slave&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4909&quot;&gt;&lt;del&gt;SOLR-4909&lt;/del&gt;&lt;/a&gt; added TestNonNRTOpen on Sep 10, 2013 - since then the policeman jenkins server has reported &lt;tt&gt;TestNonNRTOpen.testReaderIsNotNRT&lt;/tt&gt; failing 33 times by my count &amp;#8211; but i&apos;ve never been able to reproduce, nor have I seen any similar failures from apache jenkins.&lt;/p&gt;

&lt;p&gt;The failures are all virtually identical, and seem to happen just as likely on 4x/trunk, mac/linux/windows, 1.6/1.7/1.8&lt;/p&gt;

&lt;p&gt;Recent Example...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=TestNonNRTOpen -Dtests.method=testReaderIsNotNRT -Dtests.seed=8BF5F44429C5ABCA -Dtests.multiplier=3 -Dtests.slow=true -Dtests.locale=nl -Dtests.timezone=America/Whitehorse -Dtests.file.encoding=ISO-8859-1
   [junit4] FAILURE 0.23s J0 | TestNonNRTOpen.testReaderIsNotNRT &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: expected:&amp;lt;3&amp;gt; but was:&amp;lt;2&amp;gt;
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([8BF5F44429C5ABCA:3E7395C39604193E]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.core.TestNonNRTOpen.assertNotNRT(TestNonNRTOpen.java:133)
   [junit4]    &amp;gt; 	at org.apache.solr.core.TestNonNRTOpen.testReaderIsNotNRT(TestNonNRTOpen.java:94)
   [junit4]    &amp;gt; 	at java.lang.Thread.run(Thread.java:744)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12698780">SOLR-5815</key>
            <summary>Non-reproducible failures of TestNonNRTOpen.testReaderIsNotNRT</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Mar 2014 00:54:59 +0000</created>
                <updated>Mon, 23 Feb 2015 05:01:49 +0000</updated>
                            <resolved>Mon, 2 Feb 2015 10:08:56 +0000</resolved>
                                                    <fixVersion>5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13920318" author="hossman" created="Wed, 5 Mar 2014 01:00:42 +0000"  >&lt;p&gt;The failing assert comes from checking the &quot;maxDoc&quot; of an index after adding a doc and doing a core reload.&lt;/p&gt;

&lt;p&gt;since the failure only happens on the policeman jenkins instance, my best guess is it&apos;s a timing problem resulting in a race condition between threads &amp;#8211; but based on my understanding of the reload code, and the thread IDs referenced in the existing log messages, i don&apos;t see how that&apos;s possible.&lt;/p&gt;

&lt;p&gt;In any case: i&apos;m going to commit some additional logging to the test to try and track down exactly what core/searcher the assert is failing against just to prove to myself that&apos;s not the problem&lt;/p&gt;</comment>
                            <comment id="13920320" author="jira-bot" created="Wed, 5 Mar 2014 01:01:19 +0000"  >&lt;p&gt;Commit 1574273 from hossman@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1574273&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1574273&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5815&quot; title=&quot;Non-reproducible failures of TestNonNRTOpen.testReaderIsNotNRT&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5815&quot;&gt;&lt;del&gt;SOLR-5815&lt;/del&gt;&lt;/a&gt;: add some test logging to try and figure out WTF&lt;/p&gt;</comment>
                            <comment id="13920326" author="jira-bot" created="Wed, 5 Mar 2014 01:05:36 +0000"  >&lt;p&gt;Commit 1574274 from hossman@apache.org in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1574274&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1574274&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5815&quot; title=&quot;Non-reproducible failures of TestNonNRTOpen.testReaderIsNotNRT&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5815&quot;&gt;&lt;del&gt;SOLR-5815&lt;/del&gt;&lt;/a&gt;: add some test logging to try and figure out WTF (merge r1574273)&lt;/p&gt;</comment>
                            <comment id="13967198" author="hossman" created="Fri, 11 Apr 2014 22:45:42 +0000"  >&lt;p&gt;This failed again on policeman&apos;s jenkins today - i haven&apos;t had a chance to look closely at the logs, but i&apos;m attaching them here so we don&apos;t lose track of them...&lt;/p&gt;

&lt;p&gt;Build: &lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-MacOSX/1486/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-MacOSX/1486/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;At revision 1586763
No emails were triggered.
[Lucene-Solr-trunk-MacOSX] $ /bin/sh -xe /var/folders/qg/h2dfw5s161s51l2bn79mrb7r0000gn/T/hudson6753397295452942113.sh
+ echo Using JDK: 64bit/jdk1.8.0 -XX:+UseCompressedOops -XX:+UseG1GC
Using JDK: 64bit/jdk1.8.0 -XX:+UseCompressedOops -XX:+UseG1GC
+ /Users/jenkins/tools/java/64bit/jdk1.8.0/bin/java -XX:+UseCompressedOops -XX:+UseG1GC -version
java version &quot;1.8.0&quot;
Java(TM) SE Runtime Environment (build 1.8.0-b132)
Java HotSpot(TM) 64-Bit Server VM (build 25.0-b70, mixed mode)
[Lucene-Solr-trunk-MacOSX] $ /Users/jenkins/tools/hudson.tasks.Ant_AntInstallation/ANT_1.8.2/bin/ant &quot;-Dargs=-XX:+UseCompressedOops -XX:+UseG1GC&quot; -Dtests.disableHdfs=true -Dtests.jvms=1 jenkins-hourly
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13976133" author="markrmiller@gmail.com" created="Mon, 21 Apr 2014 22:35:07 +0000"  >&lt;p&gt;With any luck, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6002&quot; title=&quot;Fix a couple of ugly issues around SolrIndexWriter close and rollback as well as how SolrIndexWriter manages it&amp;#39;s ref counted directory instance.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6002&quot;&gt;&lt;del&gt;SOLR-6002&lt;/del&gt;&lt;/a&gt; will help here.&lt;/p&gt;</comment>
                            <comment id="14021125" author="shalinmangar" created="Sun, 8 Jun 2014 06:49:41 +0000"  >&lt;p&gt;This happened again and &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6002&quot; title=&quot;Fix a couple of ugly issues around SolrIndexWriter close and rollback as well as how SolrIndexWriter manages it&amp;#39;s ref counted directory instance.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6002&quot;&gt;&lt;del&gt;SOLR-6002&lt;/del&gt;&lt;/a&gt; has already been committed so that hasn&apos;t helped I guess.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-4.x-Linux/10387/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-4.x-Linux/10387/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Error Message:
SOLR-5815? : wrong maxDoc: core=org.apache.solr.core.SolrCore@73b0120a searcher=Searcher@81139e8[collection1] main{StandardDirectoryReader(segments_8:16 _4(4.9):c1 _5(4.9):c1)} expected:&amp;lt;3&amp;gt; but was:&amp;lt;2&amp;gt;

Stack Trace:
java.lang.AssertionError: SOLR-5815? : wrong maxDoc: core=org.apache.solr.core.SolrCore@73b0120a searcher=Searcher@81139e8[collection1] main{StandardDirectoryReader(segments_8:16 _4(4.9):c1 _5(4.9):c1)} expected:&amp;lt;3&amp;gt; but was:&amp;lt;2&amp;gt;
        at __randomizedtesting.SeedInfo.seed([7CCF7FA87605CEC7:C9491E2FC9C47C33]:0)
        at org.junit.Assert.fail(Assert.java:93)
        at org.junit.Assert.failNotEquals(Assert.java:647)
        at org.junit.Assert.assertEquals(Assert.java:128)
        at org.junit.Assert.assertEquals(Assert.java:472)
        at org.apache.solr.core.TestNonNRTOpen.assertNotNRT(TestNonNRTOpen.java:142)
        at org.apache.solr.core.TestNonNRTOpen.testReaderIsNotNRT(TestNonNRTOpen.java:100)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14184271" author="shalinmangar" created="Sat, 25 Oct 2014 20:58:34 +0000"  >&lt;p&gt;Looking at the logs, I think the reason it fails sometimes is because the searcher is registered &lt;b&gt;after&lt;/b&gt; the assertNotNRT is executed:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   [junit4]   2&amp;gt; 751482 T1528 oasc.TestNonNRTOpen.testReaderIsNotNRT Reloading core: org.apache.solr.core.SolrCore@3d97ac68
   [junit4]   2&amp;gt; 751483 T1528 oasc.SolrResourceLoader.&amp;lt;init&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrResourceLoader &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; directory: &lt;span class=&quot;code-quote&quot;&gt;&apos;/mnt/ssd/jenkins/workspace/Lucene-Solr-trunk-Linux/solr/core/src/test-files/solr/collection1/&apos;&lt;/span&gt;
   [junit4]   2&amp;gt; 751483 T1528 oasc.SolrResourceLoader.replaceClassLoader Adding &lt;span class=&quot;code-quote&quot;&gt;&apos;file:/mnt/ssd/jenkins/workspace/Lucene-Solr-trunk-Linux/solr/core/src/test-files/solr/collection1/lib/.svn/&apos;&lt;/span&gt; to classloader
   [junit4]   2&amp;gt; 751483 T1528 oasc.SolrResourceLoader.replaceClassLoader Adding &lt;span class=&quot;code-quote&quot;&gt;&apos;file:/mnt/ssd/jenkins/workspace/Lucene-Solr-trunk-Linux/solr/core/src/test-files/solr/collection1/lib/classes/&apos;&lt;/span&gt; to classloader
   [junit4]   2&amp;gt; 751484 T1528 oasc.SolrResourceLoader.replaceClassLoader Adding &lt;span class=&quot;code-quote&quot;&gt;&apos;file:/mnt/ssd/jenkins/workspace/Lucene-Solr-trunk-Linux/solr/core/src/test-files/solr/collection1/lib/README&apos;&lt;/span&gt; to classloader
   [junit4]   2&amp;gt; 751509 T1528 oasc.SolrConfig.&amp;lt;init&amp;gt; Using Lucene MatchVersion: 6.0.0
   [junit4]   2&amp;gt; 751515 T1528 oasc.SolrConfig.&amp;lt;init&amp;gt; Loaded SolrConfig: solrconfig-basic.xml
   [junit4]   2&amp;gt; 751516 T1528 oass.IndexSchema.readSchema Reading Solr Schema from schema-minimal.xml
   [junit4]   2&amp;gt; 751518 T1528 oass.IndexSchema.readSchema [collection1] Schema name=minimal
   [junit4]   2&amp;gt; 751521 T1528 oass.IndexSchema.readSchema WARN no uniqueKey specified in schema.
   [junit4]   2&amp;gt; 751521 T1528 oasc.CoreContainer.reload Reloading SolrCore &lt;span class=&quot;code-quote&quot;&gt;&apos;collection1&apos;&lt;/span&gt; using configuration from instancedir /mnt/ssd/jenkins/workspace/Lucene-Solr-trunk-Linux/solr/core/src/test-files/solr/collection1/
   [junit4]   2&amp;gt; 751522 T1528 oasc.SolrCore.&amp;lt;init&amp;gt; [collection1] Opening &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrCore at /mnt/ssd/jenkins/workspace/Lucene-Solr-trunk-Linux/solr/core/src/test-files/solr/collection1/, dataDir=/mnt/ssd/jenkins/workspace/Lucene-Solr-trunk-Linux/solr/build/solr-core/test/J1/temp/solr.core.TestNonNRTOpen-2E838C75B9387E9B-001/init-core-data-001/
   [junit4]   2&amp;gt; 751522 T1528 oasc.SolrCore.&amp;lt;init&amp;gt; JMX monitoring not detected &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; core: collection1
   [junit4]   2&amp;gt; 751522 T1528 oasc.SolrCore.getNewIndexDir New index directory detected: old=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;=/mnt/ssd/jenkins/workspace/Lucene-Solr-trunk-Linux/solr/build/solr-core/test/J1/temp/solr.core.TestNonNRTOpen-2E838C75B9387E9B-001/init-core-data-001/index/
   [junit4]   2&amp;gt; 751523 T1528 oasc.SolrCore.loadUpdateProcessorChains no updateRequestProcessorChain defined as &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;, creating implicit &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
   [junit4]   2&amp;gt; 751524 T1528 oasc.RequestHandlers.initHandlersFromConfig created /update/csv: org.apache.solr.handler.UpdateRequestHandler
   [junit4]   2&amp;gt; 751524 T1528 oasc.RequestHandlers.initHandlersFromConfig created /update/json: org.apache.solr.handler.UpdateRequestHandler
   [junit4]   2&amp;gt; 751524 T1528 oasc.RequestHandlers.initHandlersFromConfig created /update/json/docs: org.apache.solr.handler.UpdateRequestHandler
   [junit4]   2&amp;gt; 751525 T1528 oasc.RequestHandlers.initHandlersFromConfig created standard: solr.StandardRequestHandler
   [junit4]   2&amp;gt; 751525 T1528 oasc.RequestHandlers.initHandlersFromConfig created /update: solr.UpdateRequestHandler
   [junit4]   2&amp;gt; 751527 T1528 oashl.XMLLoader.init xsltCacheLifetimeSeconds=60
   [junit4]   2&amp;gt; 751528 T1528 oashl.XMLLoader.init xsltCacheLifetimeSeconds=60
   [junit4]   2&amp;gt; 751529 T1528 oashl.XMLLoader.init xsltCacheLifetimeSeconds=60
   [junit4]   2&amp;gt; 751530 T1528 oashl.XMLLoader.init xsltCacheLifetimeSeconds=60
   [junit4]   2&amp;gt; 751531 T1528 oasu.CommitTracker.&amp;lt;init&amp;gt; Hard AutoCommit: disabled
   [junit4]   2&amp;gt; 751532 T1528 oasu.CommitTracker.&amp;lt;init&amp;gt; Soft AutoCommit: disabled
   [junit4]   2&amp;gt; 751535 T1528 oass.SolrIndexSearcher.&amp;lt;init&amp;gt; Opening Searcher@727bc9ba[collection1] main
   [junit4]   2&amp;gt; 751535 T1528 oasr.ManagedResourceStorage.newStorageIO WARN Cannot write to config directory /mnt/ssd/jenkins/workspace/Lucene-Solr-trunk-Linux/solr/core/src/test-files/solr/collection1/conf; switching to use InMemory storage instead.
   [junit4]   2&amp;gt; 751536 T1528 oasr.RestManager.init Initializing RestManager with initArgs: {}
   [junit4]   2&amp;gt; 751536 T1528 oasr.ManagedResourceStorage.load Reading _rest_managed.json using InMemoryStorage
   [junit4]   2&amp;gt; 751536 T1528 oasr.ManagedResource.reloadFromStorage WARN No stored data found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;/managed
   [junit4]   2&amp;gt; 751537 T1528 oasr.ManagedResourceStorage$JsonStorage.store Saved JSON object to path _rest_managed.json using InMemoryStorage
   [junit4]   2&amp;gt; 751537 T1528 oasr.RestManager.init Initializing 0 registered ManagedResources
   [junit4]   2&amp;gt; 751537 T1528 oasu.DefaultSolrCoreState.newIndexWriter Creating &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IndexWriter...
   [junit4]   2&amp;gt; 751538 T1528 oasu.DefaultSolrCoreState.newIndexWriter Waiting until IndexWriter is unused... core=collection1
   [junit4]   2&amp;gt; 751538 T1528 oasu.DefaultSolrCoreState.newIndexWriter Closing old IndexWriter... core=collection1
   [junit4]   2&amp;gt; 751537 T1536 oasc.SolrCore.registerSearcher [collection1] Registered &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; searcher Searcher@727bc9ba[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_1(6.0.0):c1) Uninverting(_2(6.0.0):c1)))}
   [junit4]   2&amp;gt; 751550 T1528 oasc.SolrDeletionPolicy.onCommit SolrDeletionPolicy.onCommit: commits: num=2
   [junit4]   2&amp;gt; 		commit{dir=/mnt/ssd/jenkins/workspace/Lucene-Solr-trunk-Linux/solr/build/solr-core/test/J1/temp/solr.core.TestNonNRTOpen-2E838C75B9387E9B-001/init-core-data-001/index,segFN=segments_4,generation=4}
   [junit4]   2&amp;gt; 		commit{dir=/mnt/ssd/jenkins/workspace/Lucene-Solr-trunk-Linux/solr/build/solr-core/test/J1/temp/solr.core.TestNonNRTOpen-2E838C75B9387E9B-001/init-core-data-001/index,segFN=segments_5,generation=5}
   [junit4]   2&amp;gt; 751551 T1528 oasc.SolrDeletionPolicy.updateCommits newest commit generation = 5
   [junit4]   2&amp;gt; 751555 T1528 oasc.SolrDeletionPolicy.onInit SolrDeletionPolicy.onInit: commits: num=1
   [junit4]   2&amp;gt; 		commit{dir=/mnt/ssd/jenkins/workspace/Lucene-Solr-trunk-Linux/solr/build/solr-core/test/J1/temp/solr.core.TestNonNRTOpen-2E838C75B9387E9B-001/init-core-data-001/index,segFN=segments_5,generation=5}
   [junit4]   2&amp;gt; 751556 T1528 oasc.SolrDeletionPolicy.updateCommits newest commit generation = 5
   [junit4]   2&amp;gt; 751556 T1528 oasu.DefaultSolrCoreState.newIndexWriter New IndexWriter is ready to be used.
   [junit4]   2&amp;gt; 751560 T1528 oass.SolrIndexSearcher.&amp;lt;init&amp;gt; Opening Searcher@7ec210a4[collection1] main
   [junit4]   2&amp;gt; 751560 T1528 oasc.CoreContainer.registerCore replacing core: collection1
   [junit4]   2&amp;gt; 751560 T1528 oasc.SolrCore.close [collection1]  CLOSING SolrCore org.apache.solr.core.SolrCore@3d97ac68
   [junit4]   2&amp;gt; 751561 T1528 oasu.DirectUpdateHandler2.close closing DirectUpdateHandler2{commits=1,autocommits=0,soft autocommits=0,optimizes=0,rollbacks=0,expungeDeletes=0,docsPending=1,adds=1,deletesById=0,deletesByQuery=0,errors=0,cumulative_adds=2,cumulative_deletesById=0,cumulative_deletesByQuery=0,cumulative_errors=0}
   [junit4]   2&amp;gt; 751561 T1528 oasc.SolrCore.closeSearcher [collection1] Closing main searcher on request.
   [junit4]   2&amp;gt; 751562 T1528 oasc.TestNonNRTOpen.assertNotNRT Checking notNRT &amp;amp; maxDoc=3 of core=org.apache.solr.core.SolrCore@29c42f7d
   [junit4]   2&amp;gt; 751562 T1528 oas.SolrTestCaseJ4.tearDown ###Ending testReaderIsNotNRT
   [junit4]   2&amp;gt; 751571 T1536 oasc.SolrCore.registerSearcher [collection1] Registered &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; searcher Searcher@7ec210a4[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_1(6.0.0):c1) Uninverting(_2(6.0.0):c1) Uninverting(_3(6.0.0):c1)))}
   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=TestNonNRTOpen -Dtests.method=testReaderIsNotNRT -Dtests.seed=2E838C75B9387E9B -Dtests.multiplier=3 -Dtests.slow=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.locale=ar_QA -Dtests.timezone=America/Tijuana -Dtests.asserts=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.file.encoding=ISO-8859-1
   [junit4] FAILURE 0.20s J1 | TestNonNRTOpen.testReaderIsNotNRT &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: SOLR-5815? : wrong maxDoc: core=org.apache.solr.core.SolrCore@29c42f7d searcher=Searcher@727bc9ba[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_1(6.0.0):c1) Uninverting(_2(6.0.0):c1)))} expected:&amp;lt;3&amp;gt; but was:&amp;lt;2&amp;gt;
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([2E838C75B9387E9B:9B05EDF206F9CC6F]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.core.TestNonNRTOpen.assertNotNRT(TestNonNRTOpen.java:142)
   [junit4]    &amp;gt; 	at org.apache.solr.core.TestNonNRTOpen.testReaderIsNotNRT(TestNonNRTOpen.java:100)
   [junit4]    &amp;gt; 	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice the searcher id 727bc9ba used by the assert which is created during core creation but once the index writer is closed (which commits the data), a new searcher id 7ec210a4 is created which is registered after the assert is executed. This race condition is causing the test to fail. &lt;/p&gt;

&lt;p&gt;&lt;del&gt;I think this is a valid bug? If we don&apos;t wait for the new searcher to be registered during core reload then uncommitted docs will go missing until the next commit happens.&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;This isn&apos;t a bug in reload because a new searcher &lt;b&gt;is&lt;/b&gt; registered. Just a test issue.&lt;/p&gt;</comment>
                            <comment id="14184272" author="shalinmangar" created="Sat, 25 Oct 2014 20:59:25 +0000"  >&lt;p&gt;This test log is from &lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-Linux/11507/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-Linux/11507/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14301103" author="shalinmangar" created="Mon, 2 Feb 2015 10:08:56 +0000"  >&lt;p&gt;This is not a problem because the non-nrt mode and this particular test have been removed from 5.0&lt;/p&gt;</comment>
                            <comment id="14332769" author="anshumg" created="Mon, 23 Feb 2015 05:01:49 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12709604">SOLR-6002</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12677129" name="TestNonNRTOpen.txt" size="590237" author="shalin" created="Sat, 25 Oct 2014 20:59:25 +0000"/>
                            <attachment id="12639880" name="jenkins.thetaphi.de_Lucene-Solr-trunk-MacOSX_1486.log.txt" size="530454" author="hossman" created="Fri, 11 Apr 2014 22:45:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>377128</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1szhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>377423</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>