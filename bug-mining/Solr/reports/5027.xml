<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:58:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16240] org.apache.solr.common.SolrException:  Error loading class &apos;solr.KerberosPlugin&apos;</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16240</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Hello everyone. I upgraded my test environment cluster from 8.11.1 to 9.0.0 and I&apos;m experimenting this issue. Anytime I start the solr service I get this error from logs and I don&apos;t know what I have to do to solve it:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2022-06-07 08:06:47.801 ERROR (main) [ &#160; ] o.a.s.c.SolrCore &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; =&amp;gt; org.apache.solr.common.SolrException: &#160;Error loading class &lt;span class=&quot;code-quote&quot;&gt;&apos;solr.KerberosPlugin&apos;&lt;/span&gt;
&#160; &#160; at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:543)
org.apache.solr.common.SolrException: &#160;Error loading class &lt;span class=&quot;code-quote&quot;&gt;&apos;solr.KerberosPlugin&apos;&lt;/span&gt;
&#160; &#160; at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:543) ~[solr-core-9.0.0.jar:9.0.0 a4eb7aa123dc53f8dac74d80b66a490f2d6b4a26 - janhoy - 2022-05-05 01:00:08]
&#160; &#160; at org.apache.solr.core.SolrResourceLoader.newInstance(SolrResourceLoader.java:604) ~[solr-core-9.0.0.jar:9.0.0 a4eb7aa123dc53f8dac74d80b66a490f2d6b4a26 - janhoy - 2022-05-05 01:00:08]
&#160; &#160; at org.apache.solr.core.CoreContainer.initializeAuthenticationPlugin(CoreContainer.java:521) ~[solr-core-9.0.0.jar:9.0.0 a4eb7aa123dc53f8dac74d80b66a490f2d6b4a26 - janhoy - 2022-05-05 01:00:08]
&#160; &#160; at org.apache.solr.core.CoreContainer.reloadSecurityProperties(CoreContainer.java:1053) ~[solr-core-9.0.0.jar:9.0.0 a4eb7aa123dc53f8dac74d80b66a490f2d6b4a26 - janhoy - 2022-05-05 01:00:08]
&#160; &#160; at org.apache.solr.core.CoreContainer.load(CoreContainer.java:765) ~[solr-core-9.0.0.jar:9.0.0 a4eb7aa123dc53f8dac74d80b66a490f2d6b4a26 - janhoy - 2022-05-05 01:00:08]
&#160; &#160; at org.apache.solr.servlet.CoreContainerProvider.createCoreContainer(CoreContainerProvider.java:376) ~[solr-core-9.0.0.jar:9.0.0 a4eb7aa123dc53f8dac74d80b66a490f2d6b4a26 - janhoy - 2022-05-05 01:00:08]
&#160; &#160; at org.apache.solr.servlet.CoreContainerProvider.init(CoreContainerProvider.java:226) ~[solr-core-9.0.0.jar:9.0.0 a4eb7aa123dc53f8dac74d80b66a490f2d6b4a26 - janhoy - 2022-05-05 01:00:08]
&#160; &#160; at org.apache.solr.servlet.CoreContainerProvider.contextInitialized(CoreContainerProvider.java:110) ~[solr-core-9.0.0.jar:9.0.0 a4eb7aa123dc53f8dac74d80b66a490f2d6b4a26 - janhoy - 2022-05-05 01:00:08]
&#160; &#160; at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:1067) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:572) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.ContextHandler.contextInitialized(ContextHandler.java:996) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:746) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:379) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1449) ~[jetty-webapp-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1414) ~[jetty-webapp-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:910) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:288) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:524) ~[jetty-webapp-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.gzip.GzipHandler.doStart(GzipHandler.java:426) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.Server.start(Server.java:423) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.Server.doStart(Server.java:387) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.xml.XmlConfiguration.lambda$main$3(XmlConfiguration.java:1907) ~[jetty-xml-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at java.security.AccessController.doPrivileged(Native Method) ~[?:?]
&#160; &#160; at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1857) ~[jetty-xml-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
&#160; &#160; at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
&#160; &#160; at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
&#160; &#160; at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
&#160; &#160; at org.eclipse.jetty.start.Main.invokeMain(Main.java:218) ~[start.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.start.Main.start(Main.java:491) ~[start.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.start.Main.main(Main.java:77) ~[start.jar:9.4.44.v20210927]
Caused by: java.lang.ClassNotFoundException: solr.KerberosPlugin
&#160; &#160; at java.net.URLClassLoader.findClass(URLClassLoader.java:476) ~[?:?]
&#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:589) ~[?:?]
&#160; &#160; at java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:904) ~[?:?]
&#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:522) ~[?:?]
&#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName0(Native Method) ~[?:?]
&#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:398) ~[?:?]
&#160; &#160; at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:527) ~[solr-core-9.0.0.jar:9.0.0 a4eb7aa123dc53f8dac74d80b66a490f2d6b4a26 - janhoy - 2022-05-05 01:00:08]
&#160; &#160; ... 55 more&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When I rollback to 8.11.1 with exactly the same configuration I don&apos;t experiment this issue. &lt;/p&gt;

&lt;p&gt;I tried:&lt;/p&gt;

&lt;p&gt;1. Set the &quot;SOLR_JETTY_HOST=&quot;0.0.0.0&quot;&lt;br/&gt;
2. Set the &quot;SOLR_MODULES=hadoop-auth&quot; because it uses kerberos too. &lt;br/&gt;
3. I read the documentation about &lt;a href=&quot;https://solr.apache.org/guide/solr/latest/deployment-guide/kerberos-authentication-plugin.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Kerberos&lt;/a&gt; Authentication&#160; and it&apos;s pretty similar to the 8.11.1 version.&lt;br/&gt;
4. I modified my&#160; security.json like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{&lt;span class=&quot;code-quote&quot;&gt;&quot;authentication&quot;&lt;/span&gt;: {&lt;span class=&quot;code-quote&quot;&gt;&quot;class&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;solr.KerberosPlugin&quot;&lt;/span&gt;}}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I don&apos;t know if there&apos;s something missing on the documentation or if I doing something wrong, which is the most probably.&lt;/p&gt;

&lt;p&gt;I hope the issue is well described, I searched in the web but I haven&apos;t found anything related.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Best regards.&lt;/p&gt;</description>
                <environment>&lt;p&gt;OS: Debian 11&lt;/p&gt;

&lt;p&gt;Solr Version : 9.0&lt;/p&gt;

&lt;p&gt;Java Version: 11&lt;/p&gt;</environment>
        <key id="13448737">SOLR-16240</key>
            <summary>org.apache.solr.common.SolrException:  Error loading class &apos;solr.KerberosPlugin&apos;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="houston">Houston Putman</assignee>
                                    <reporter username="jrballesteros05">Jes&#250;s Ricardo Ballesteros Molina</reporter>
                        <labels>
                            <label>kerberos</label>
                            <label>solrcloud</label>
                    </labels>
                <created>Tue, 7 Jun 2022 08:33:57 +0000</created>
                <updated>Thu, 18 May 2023 21:54:14 +0000</updated>
                            <resolved>Mon, 10 Apr 2023 17:21:11 +0000</resolved>
                                    <version>9.0</version>
                    <version>9.1</version>
                    <version>9.2</version>
                                    <fixVersion>9.3</fixVersion>
                    <fixVersion>9.2.1</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="17550949" author="jrballesteros05" created="Tue, 7 Jun 2022 11:38:47 +0000"  >&lt;p&gt;I started the solr service manually with this command: &lt;/p&gt;



&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
su - solr -c &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/solr/bin/solr start -Dsolr.modules=hadoop-auth&quot;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It seems the service is not getting the SOLR_MODULES configuration I put in the /etc/default/solr.in.sh&lt;/p&gt;

&lt;p&gt;Then, I get a different error:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
22-06-07 11:31:53.651 INFO &#160;(main) [ &#160; ] o.a.s.p.PackageLoader /packages.json updated to version -1
2022-06-07 11:31:53.664 INFO &#160;(main) [ &#160; ] o.a.s.c.CoreContainer Initializing authorization plugin: solr.RuleBasedAuthorizationPlugin
2022-06-07 11:31:53.673 INFO &#160;(main) [ &#160; ] o.a.s.c.CoreContainer Initializing authentication plugin: solr.KerberosPlugin
2022-06-07 11:31:53.690 INFO &#160;(main) [ &#160; ] o.a.s.s.h.KerberosPlugin Params: {token.valid=30, kerberos.principal=HTTP/sa3secglbsolr02.a3sec.local@A3SEC.LOCAL, kerberos.keytab=/home/debian/sa3secglbsolr02.keytab, cookie.domain=sa3secglbsolr02.a3sec.local:8983, cookie.path=/, type=kerberos, kerberos.name.rules=DEFAULT, kerberos.name.rules.mechanism=hadoop, delegation-token.json-mapper.AUTO_CLOSE_TARGET=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;}
2022-06-07 11:31:53.696 ERROR (main) [ &#160; ] o.a.s.s.CoreContainerProvider Could not start Solr. Check solr/home property and the logs
2022-06-07 11:31:53.713 ERROR (main) [ &#160; ] o.a.s.c.SolrCore &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; =&amp;gt; org.apache.solr.common.SolrException: Error initializing kerberos authentication plugin: javax.servlet.ServletException: java.lang.ClassNotFoundException: org.apache.hadoop.security.authentication.server.KerberosAuthenticationHandler
&#160; &#160; at org.apache.solr.security.hadoop.KerberosPlugin.init(KerberosPlugin.java:100)
org.apache.solr.common.SolrException: Error initializing kerberos authentication plugin: javax.servlet.ServletException: java.lang.ClassNotFoundException: org.apache.hadoop.security.authentication.server.KerberosAuthenticationHandler
&#160; &#160; at org.apache.solr.security.hadoop.KerberosPlugin.init(KerberosPlugin.java:100) ~[?:?]
&#160; &#160; at org.apache.solr.core.CoreContainer.initializeAuthenticationPlugin(CoreContainer.java:529) ~[solr-core-9.0.0.jar:9.0.0 a4eb7aa123dc53f8dac74d80b66a490f2d6b4a26 - janhoy - 2022-05-05 01:00:08]
&#160; &#160; at org.apache.solr.core.CoreContainer.reloadSecurityProperties(CoreContainer.java:1053) ~[solr-core-9.0.0.jar:9.0.0 a4eb7aa123dc53f8dac74d80b66a490f2d6b4a26 - janhoy - 2022-05-05 01:00:08]
&#160; &#160; at org.apache.solr.core.CoreContainer.load(CoreContainer.java:765) ~[solr-core-9.0.0.jar:9.0.0 a4eb7aa123dc53f8dac74d80b66a490f2d6b4a26 - janhoy - 2022-05-05 01:00:08]
&#160; &#160; at org.apache.solr.servlet.CoreContainerProvider.createCoreContainer(CoreContainerProvider.java:376) ~[solr-core-9.0.0.jar:9.0.0 a4eb7aa123dc53f8dac74d80b66a490f2d6b4a26 - janhoy - 2022-05-05 01:00:08]
&#160; &#160; at org.apache.solr.servlet.CoreContainerProvider.init(CoreContainerProvider.java:226) ~[solr-core-9.0.0.jar:9.0.0 a4eb7aa123dc53f8dac74d80b66a490f2d6b4a26 - janhoy - 2022-05-05 01:00:08]
&#160; &#160; at org.apache.solr.servlet.CoreContainerProvider.contextInitialized(CoreContainerProvider.java:110) ~[solr-core-9.0.0.jar:9.0.0 a4eb7aa123dc53f8dac74d80b66a490f2d6b4a26 - janhoy - 2022-05-05 01:00:08]
&#160; &#160; at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:1067) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:572) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.ContextHandler.contextInitialized(ContextHandler.java:996) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:746) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:379) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1449) ~[jetty-webapp-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1414) ~[jetty-webapp-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:910) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:288) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:524) ~[jetty-webapp-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.gzip.GzipHandler.doStart(GzipHandler.java:426) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.Server.start(Server.java:423) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.server.Server.doStart(Server.java:387) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.xml.XmlConfiguration.lambda$main$3(XmlConfiguration.java:1907) ~[jetty-xml-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at java.security.AccessController.doPrivileged(Native Method) ~[?:?]
&#160; &#160; at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1857) ~[jetty-xml-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
&#160; &#160; at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
&#160; &#160; at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
&#160; &#160; at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
&#160; &#160; at org.eclipse.jetty.start.Main.invokeMain(Main.java:218) ~[start.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.start.Main.start(Main.java:491) ~[start.jar:9.4.44.v20210927]
&#160; &#160; at org.eclipse.jetty.start.Main.main(Main.java:77) ~[start.jar:9.4.44.v20210927]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17551104" author="risdenk" created="Tue, 7 Jun 2022 13:51:23 +0000"  >&lt;p&gt;So it looks like this is caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13989&quot; title=&quot;Migrate hadoop authentication code to a module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13989&quot;&gt;&lt;del&gt;SOLR-13989&lt;/del&gt;&lt;/a&gt; moving to a module. The part about SOLR_MODULES not working I think is tracked elsewhere.&lt;/p&gt;

&lt;p&gt;I&apos;ll have to look at the stack traces more closely to see why classes are not being picked up correctly.&lt;/p&gt;</comment>
                            <comment id="17551108" author="risdenk" created="Tue, 7 Jun 2022 13:55:42 +0000"  >&lt;p&gt;My theory at this point is because &quot;:org.apache.hadoop.security.authentication.server.KerberosAuthenticationHandler&quot; is a filter - it needs to be loaded as part of the webapp classpath. However I don&apos;t quite understand why the KerberosPlugin would load correctly...  KerberosAuthenticationHandler is located in the hadoop-auth jar. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mdrob&quot; class=&quot;user-hover&quot; rel=&quot;mdrob&quot;&gt;mdrob&lt;/a&gt; does this ring a bell for you by chance?&lt;/p&gt;</comment>
                            <comment id="17703270" author="jrballesteros05" created="Tue, 21 Mar 2023 16:11:52 +0000"  >&lt;p&gt;Hello everybody, thanks for your reply. I know this thread is not moving too much but I want to help as much as I can. I upgraded to 9.1.1 and the SOLR_MODULES is working now as you pointed in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13989&quot; title=&quot;Migrate hadoop authentication code to a module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13989&quot;&gt;&lt;del&gt;SOLR-13989&lt;/del&gt;&lt;/a&gt;, but the Kerberos Authentication isn&apos;t working.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2023-03-21 15:36:41.732 INFO &#160;(main) [ &#160; ] o.a.s.s.h.KerberosPlugin Params: {token.valid=30, kerberos.principal=HTTP/sa3secglbsolr01.a3sec.local@A3SEC.LOCAL, kerberos.keytab=/home/debian/sa3secglbsolr01.keytab, cookie.domain=sa3secglbsolr01.a3sec.local:8983, cookie.path=/, type=kerberos, kerberos.name.rules=DEFAULT, kerberos.name.rules.mechanism=hadoop, delegation-token.json-mapper.AUTO_CLOSE_TARGET=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;}
2023-03-21 15:36:41.740 ERROR (main) [ &#160; ] o.a.s.s.CoreContainerProvider Could not start Solr. Check solr/home property and the logs
2023-03-21 15:36:41.759 ERROR (main) [ &#160; ] o.a.s.c.SolrCore &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; =&amp;gt; org.apache.solr.common.SolrException: Error initializing kerberos authentication plugin: javax.servlet.ServletException: java.lang.ClassNotFoundException: org.apache.hadoop.security.authentication.server.KerberosAuthenticationHandler&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;My knowledge in Java is very limited, close to null &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. The error is telling me the &quot;org.apache.hadoop.security.authentication.server.KerberosAuthenticationHandler&quot; does not exist.&#160; I cloned the git repository and I tried to look for the Java classes and it doesn&apos;t exist.&lt;/p&gt;

&lt;p&gt;For example if I look for &quot;AuditLoggerPlugin.java&quot; I would find the java class: &lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;chucho@a3seclaptop &#57520; ~/Downloads/solr &#57520; &#57504; main &#57520; find . -name &lt;span class=&quot;code-quote&quot;&gt;&quot;AuditLoggerPlugin*&quot;&lt;/span&gt;
./solr/core/src/java/org/apache/solr/security/AuditLoggerPlugin.java
./solr/core/src/test/org/apache/solr/security/AuditLoggerPluginTest.java&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But, If I would execute the same with &quot;KerberosAuthenticationHandler&quot; I wouldn&apos;t find anything in the code.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;chucho@a3seclaptop &#57520; ~/Downloads/solr &#57520; &#57504; main &#57520; find . -name &lt;span class=&quot;code-quote&quot;&gt;&quot;KerberosAuthenticationHandler*&quot;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I also tried to look the class with a grep but I haven&apos;t been successful: &lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;&#10008; chucho@a3seclaptop &#57520; ~/Downloads/solr &#57520; &#57504; main &#57520; grep -ir &lt;span class=&quot;code-quote&quot;&gt;&quot;KerberosAuthenticationHandler&quot;&lt;/span&gt; *&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Maybe the problem is the class that doesn&apos;t exist and it needs to be implemented or I don&apos;t know if I&apos;m missing something.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17704258" author="risdenk" created="Thu, 23 Mar 2023 16:56:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jrballesteros05&quot; class=&quot;user-hover&quot; rel=&quot;jrballesteros05&quot;&gt;jrballesteros05&lt;/a&gt; thanks for following up - KerberosAuthenticationHandler is in the Apache Hadoop source code (org.apache.hadoop.security.authentication.server.KerberosAuthenticationHandler) - &lt;a href=&quot;https://github.com/apache/hadoop/blob/trunk/hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/server/KerberosAuthenticationHandler.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/blob/trunk/hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/server/KerberosAuthenticationHandler.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Try copying modules/hadoop-auth/lib/* to server/solr-webapp/webapp/WEB-INF/lib/&lt;/p&gt;

&lt;p&gt;That should fix the classloading issue potentially. This also means that the -D modules stuff doesn&apos;t really fix the hadoop-auth part :/&lt;/p&gt;</comment>
                            <comment id="17704564" author="jrballesteros05" created="Fri, 24 Mar 2023 10:37:40 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krisden&quot; class=&quot;user-hover&quot; rel=&quot;krisden&quot;&gt;krisden&lt;/a&gt; thanks for your reply. Copying the files from modules/hadoop-auth/lib/* to server/solr-webapp/webapp/WEB-INF/lib/ solves the issue. This workaround solves my problem at the moment. With this I can upgrade my testing environment to last version.&lt;/p&gt;

&lt;p&gt;I changed the type of this Jira issue from &quot;task&quot; to &quot;bug&quot; because I think this is a bug.&lt;/p&gt;</comment>
                            <comment id="17704758" author="risdenk" created="Fri, 24 Mar 2023 18:50:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janhoy&quot; class=&quot;user-hover&quot; rel=&quot;janhoy&quot;&gt;janhoy&lt;/a&gt; since you worked on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15914&quot; title=&quot;Make it super simple to add a contrib module to shared classpath&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15914&quot;&gt;&lt;del&gt;SOLR-15914&lt;/del&gt;&lt;/a&gt;, do you have any ideas on the best way to solve this? &lt;/p&gt;</comment>
                            <comment id="17705131" author="janhoy" created="Sun, 26 Mar 2023 22:05:38 +0000"  >&lt;p&gt;A pity there is no test that could detect this. All modules should have a BATS test spinning up Solr with the module and checking that all is good?&lt;/p&gt;

&lt;p&gt;The only thing I can think of is your guess that the filter class is loaded from another class loader than our shared-lib classloader.&lt;/p&gt;

&lt;p&gt;I can understand that in a normal shared Jetty servlet container, it makes sense to isolate webapp class loaders from each other, but for Solr it only causes issues. Modules are loaded by SolrResourceLoader&apos;s class loader.&lt;/p&gt;

&lt;p&gt;So perhaps we should attempt to unify some class loaders so it makes no difference whether a jar is in WEB-INF/lib or ResourceLoader?&lt;/p&gt;</comment>
                            <comment id="17706331" author="jrballesteros05" created="Wed, 29 Mar 2023 10:32:46 +0000"  >&lt;p&gt;Hello everybody, thank you for your kind reply. I&apos;ve been trying with the last version 9.2.0 and I have the same issue. The workaround works but there is a new issue problem with some permissions: &lt;/p&gt;

&lt;p&gt;2023-03-29 10:23:39.473 ERROR (main) [ &#160; ] o.a.s.c.SolrCore null =&amp;gt; org.apache.solr.common.SolrException: Error initializing kerberos authentication plugin: javax.servlet.ServletException: java.security.AccessControlException: access denied (&quot;java.io.FilePermission&quot; &quot;/home/debian/sglbsolr01.keytab&quot; &quot;read&quot;)&lt;/p&gt;

&lt;p&gt;I solved thanks to this &lt;a href=&quot;https://ao.vern.cc/questions/10454037/java-security-accesscontrolexception-access-denied-java-io-filepermission&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;link&lt;/a&gt; so I had to edit the &amp;lt;jre location&amp;gt;/lib/security/java.policy file and add this line: &lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
grant { permission java.security.AllPermission; };&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It worked at the moment but I don&apos;t think that&apos;s secure. In the Solr kerberos documentation you can put the .keytab file anywhere but it doesn&apos;t warn about the possible error I mentioned before. Maybe the documentation should be update or maybe there is another plan to do the same without editing the java.policy file. I don&apos;t know if I have to open another Jira issue with this or we can deal with it in this post.&lt;/p&gt;</comment>
                            <comment id="17706412" author="risdenk" created="Wed, 29 Mar 2023 14:29:33 +0000"  >&lt;p&gt;Java Security Manager is enabled by default - &lt;a href=&quot;https://solr.apache.org/guide/solr/latest/upgrade-notes/major-changes-in-solr-9.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://solr.apache.org/guide/solr/latest/upgrade-notes/major-changes-in-solr-9.html&lt;/a&gt; - shouldn&apos;t need to modify the JDK policy and especially not add AllPermission. If you want you can disable the security manager or edit sserver/etc/security.policy (ie: permission java.io.FilePermission &quot;PATH_TO_KEYTAB&quot;, &quot;read&quot;) or put the keytab underneath the Solr directory that should allow read permission.&lt;/p&gt;</comment>
                            <comment id="17706494" author="jrballesteros05" created="Wed, 29 Mar 2023 15:59:36 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krisden&quot; class=&quot;user-hover&quot; rel=&quot;krisden&quot;&gt;krisden&lt;/a&gt; , thank you for your reply. I solved the security manager. I have another one but I don&apos;t want to mess up this topic. I don&apos;t know if that issue is related with this one.&lt;/p&gt;</comment>
                            <comment id="17709052" author="houston" created="Wed, 5 Apr 2023 18:19:28 +0000"  >&lt;p&gt;So the issue is here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hadoop/blob/rel/release-3.3.5/hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/server/AuthenticationFilter.java#L192&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/blob/rel/release-3.3.5/hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/server/AuthenticationFilter.java#L192&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Basically we either need to set the Thread&apos;s contextClassLoader before all this plugin stuff happens (&lt;a href=&quot;https://github.com/apache/solr/blob/main/solr/core/src/java/org/apache/solr/servlet/SolrDispatchFilter.java#L193&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;we already do it for each request&lt;/a&gt;), or we get hadoop to add a method that lets us specify a classloader.&lt;/p&gt;

&lt;p&gt;Given how long we&apos;ve waited for a curator update, I think setting the thread&apos;s contextClassLoader first is a decent idea.&lt;/p&gt;</comment>
                            <comment id="17709056" author="houston" created="Wed, 5 Apr 2023 18:31:05 +0000"  >&lt;p&gt;Made a small PR for this, but we definitely need an integration test before moving forward.&lt;/p&gt;</comment>
                            <comment id="17710234" author="jira-bot" created="Mon, 10 Apr 2023 17:06:33 +0000"  >&lt;p&gt;Commit d9eba437064f20eb5a9b0edeaa050c2874578c66 in solr&apos;s branch refs/heads/main from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=d9eba437064&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=d9eba437064&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16240&quot; title=&quot;org.apache.solr.common.SolrException:  Error loading class &amp;#39;solr.KerberosPlugin&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16240&quot;&gt;&lt;del&gt;SOLR-16240&lt;/del&gt;&lt;/a&gt;: Fix kerberosPlugin module classloading (#1546)&lt;/p&gt;

&lt;p&gt;Also added an integration test for the hadoop-auth module.&lt;/p&gt;</comment>
                            <comment id="17710236" author="jira-bot" created="Mon, 10 Apr 2023 17:13:12 +0000"  >&lt;p&gt;Commit 631b42fe25d2da5fd2329ed71f8747b3b5a44a26 in solr&apos;s branch refs/heads/branch_9x from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=631b42fe25d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=631b42fe25d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16240&quot; title=&quot;org.apache.solr.common.SolrException:  Error loading class &amp;#39;solr.KerberosPlugin&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16240&quot;&gt;&lt;del&gt;SOLR-16240&lt;/del&gt;&lt;/a&gt;: Fix kerberosPlugin module classloading (#1546)&lt;/p&gt;

&lt;p&gt;Also added an integration test for the hadoop-auth module.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit d9eba437064f20eb5a9b0edeaa050c2874578c66)&lt;/p&gt;</comment>
                            <comment id="17710237" author="jira-bot" created="Mon, 10 Apr 2023 17:20:40 +0000"  >&lt;p&gt;Commit 57685b91236553fc96590f4cf293db173341587e in solr&apos;s branch refs/heads/branch_9_2 from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=57685b91236&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=57685b91236&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16240&quot; title=&quot;org.apache.solr.common.SolrException:  Error loading class &amp;#39;solr.KerberosPlugin&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16240&quot;&gt;&lt;del&gt;SOLR-16240&lt;/del&gt;&lt;/a&gt;: Fix kerberosPlugin module classloading (#1546)&lt;/p&gt;

&lt;p&gt;Also added an integration test for the hadoop-auth module.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit d9eba437064f20eb5a9b0edeaa050c2874578c66)&lt;/p&gt;</comment>
                            <comment id="17710242" author="risdenk" created="Mon, 10 Apr 2023 17:27:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jrballesteros05&quot; class=&quot;user-hover&quot; rel=&quot;jrballesteros05&quot;&gt;jrballesteros05&lt;/a&gt; thanks for the report and being persistent 9.2.1 should be better. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=houston&quot; class=&quot;user-hover&quot; rel=&quot;houston&quot;&gt;houston&lt;/a&gt; for the fix.&lt;/p&gt;</comment>
                            <comment id="17710978" author="jrballesteros05" created="Tue, 11 Apr 2023 14:11:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krisden&quot; class=&quot;user-hover&quot; rel=&quot;krisden&quot;&gt;krisden&lt;/a&gt;&#160; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=houston&quot; class=&quot;user-hover&quot; rel=&quot;houston&quot;&gt;houston&lt;/a&gt; thank so much for helping and fixing the issue. I will wait until 9.2.1 to test.&lt;/p&gt;</comment>
                            <comment id="17718250" author="jsweeney" created="Mon, 1 May 2023 15:26:04 +0000"  >&lt;p&gt;Closing after the 9.2.1 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13536547">SOLR-16805</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13535991">SOLR-16801</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13271542">SOLR-13989</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13422273">SOLR-15914</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z130bk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>