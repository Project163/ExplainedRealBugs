<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:30:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3465] Replication Causes Two Searcher Warmups </title>
                <link>https://issues.apache.org/jira/browse/SOLR-3465</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I&apos;m doing some testing with the current trunk, and am seeing that when a slave retrieves index updates from the master the warmup &amp;amp; searcher registration is performed twice.  Here is a snippet of the log that demonstrates this:&lt;/p&gt;

&lt;p&gt;May 16, 2012 6:02:02 PM org.apache.solr.handler.SnapPuller fetchLatestIndex&lt;br/&gt;
INFO: Total time taken for download : 92 secs&lt;br/&gt;
May 16, 2012 6:02:02 PM org.apache.solr.core.SolrDeletionPolicy onInit&lt;br/&gt;
INFO: SolrDeletionPolicy.onInit: commits:num=2&lt;br/&gt;
        commit{dir=/Users/mgarski/Code/indexes/solr2/geo/index,segFN=segments_1,generation=1,filenames=&lt;span class=&quot;error&quot;&gt;&amp;#91;segments_1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        commit{dir=/Users/mgarski/Code/indexes/solr2/geo/index,segFN=segments_10,generation=36,filenames=&lt;span class=&quot;error&quot;&gt;&amp;#91;_45_0.tim, _45.fdt, segments_10, _45_0.tip, _45.fdx, _45.fnm, _45_0.frq, _45.per, _45_0.prx&amp;#93;&lt;/span&gt;&lt;br/&gt;
May 16, 2012 6:02:02 PM org.apache.solr.core.SolrDeletionPolicy updateCommits&lt;br/&gt;
INFO: newest commit = 36&lt;br/&gt;
May 16, 2012 6:02:02 PM org.apache.solr.search.SolrIndexSearcher &amp;lt;init&amp;gt;&lt;br/&gt;
INFO: Opening Searcher@559fe5e6 main&lt;br/&gt;
May 16, 2012 6:02:02 PM org.apache.solr.core.QuerySenderListener newSearcher&lt;br/&gt;
INFO: QuerySenderListener sending requests to Searcher@559fe5e6 main&lt;/p&gt;
{StandardDirectoryReader(segments_10:335:nrt _45(4.0):C1096375)}
&lt;p&gt;May 16, 2012 6:02:02 PM org.apache.solr.core.QuerySenderListener newSearcher&lt;br/&gt;
INFO: QuerySenderListener done.&lt;br/&gt;
May 16, 2012 6:02:02 PM org.apache.solr.core.SolrCore registerSearcher&lt;br/&gt;
INFO: &lt;span class=&quot;error&quot;&gt;&amp;#91;geo&amp;#93;&lt;/span&gt; Registered new searcher Searcher@559fe5e6 main&lt;/p&gt;
{StandardDirectoryReader(segments_10:335:nrt _45(4.0):C1096375)}
&lt;p&gt;May 16, 2012 6:02:02 PM org.apache.solr.update.DirectUpdateHandler2 commit&lt;br/&gt;
INFO: start commit&lt;/p&gt;
{flags=0,version=0,optimize=false,openSearcher=true,waitSearcher=true,expungeDeletes=false,softCommit=false}
&lt;p&gt;May 16, 2012 6:02:02 PM org.apache.solr.search.SolrIndexSearcher &amp;lt;init&amp;gt;&lt;br/&gt;
INFO: Opening Searcher@42101da9 main&lt;br/&gt;
May 16, 2012 6:02:02 PM org.apache.solr.update.DirectUpdateHandler2 commit&lt;br/&gt;
INFO: end_commit_flush&lt;br/&gt;
May 16, 2012 6:02:02 PM org.apache.solr.core.QuerySenderListener newSearcher&lt;br/&gt;
INFO: QuerySenderListener sending requests to Searcher@42101da9 main&lt;/p&gt;
{StandardDirectoryReader(segments_10:335:nrt _45(4.0):C1096375)}
&lt;p&gt;May 16, 2012 6:02:02 PM org.apache.solr.core.QuerySenderListener newSearcher&lt;br/&gt;
INFO: QuerySenderListener done.&lt;br/&gt;
May 16, 2012 6:02:02 PM org.apache.solr.core.SolrCore registerSearcher&lt;br/&gt;
INFO: &lt;span class=&quot;error&quot;&gt;&amp;#91;geo&amp;#93;&lt;/span&gt; Registered new searcher Searcher@42101da9 main&lt;/p&gt;
{StandardDirectoryReader(segments_10:335:nrt _45(4.0):C1096375)}

&lt;p&gt;I am trying to determine the cause, does anyone have any idea where to start?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12556162">SOLR-3465</key>
            <summary>Replication Causes Two Searcher Warmups </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="mgarski">Michael Garski</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 May 2012 01:09:42 +0000</created>
                <updated>Mon, 9 May 2016 18:50:53 +0000</updated>
                            <resolved>Sat, 15 Sep 2012 18:17:46 +0000</resolved>
                                    <version>4.0-ALPHA</version>
                                    <fixVersion>4.0</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>replication (java)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13277479" author="mgarski" created="Thu, 17 May 2012 01:36:07 +0000"  >&lt;p&gt;I found the issue but am not sure what the appropriate fix would be.&lt;/p&gt;

&lt;p&gt;The SnapPuller.doCommit method does a solrCore.getSearcher and a solrCore.getUpdateHandler().commit... one of those may be redundant but I do not know which.  I reverted the body of that method to an older version (1237497) and only one searcher is opened, warmed, and registered.&lt;/p&gt;</comment>
                            <comment id="13456458" author="markrmiller@gmail.com" created="Sat, 15 Sep 2012 18:01:05 +0000"  >&lt;p&gt;The commit should not need to open a new searcher - I&apos;ll change this.&lt;/p&gt;</comment>
                            <comment id="13456460" author="markrmiller@gmail.com" created="Sat, 15 Sep 2012 18:17:46 +0000"  >&lt;p&gt;Fix committed.&lt;/p&gt;</comment>
                            <comment id="13494979" author="commit-tag-bot" created="Sun, 11 Nov 2012 20:28:00 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Mark Robert Miller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1385146&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1385146&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3465&quot; title=&quot;Replication Causes Two Searcher Warmups &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3465&quot;&gt;&lt;del&gt;SOLR-3465&lt;/del&gt;&lt;/a&gt;: Replication causes two searcher warmups. &lt;/p&gt;
</comment>
                            <comment id="13610831" author="commit-tag-bot" created="Fri, 22 Mar 2013 16:38:36 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Mark Robert Miller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1385146&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1385146&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3465&quot; title=&quot;Replication Causes Two Searcher Warmups &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3465&quot;&gt;&lt;del&gt;SOLR-3465&lt;/del&gt;&lt;/a&gt;: Replication causes two searcher warmups. &lt;/p&gt;</comment>
                            <comment id="13653996" author="thetaphi" created="Fri, 10 May 2013 10:33:41 +0000"  >&lt;p&gt;Closed after release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>243510</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03ej3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17787</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>