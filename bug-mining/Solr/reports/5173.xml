<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:09:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-17218] indexFetcher thread logging doesn&apos;t include any MDC context</title>
                <link>https://issues.apache.org/jira/browse/SOLR-17218</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When &lt;tt&gt;indexFetcher&lt;/tt&gt; threads log messages, there is no MDC context, making it impossible to know what collection/replica is involved (unless the log message happens to refer to a patch name with a core data dir in it)...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2024-02-29 09:55:55.682 INFO  (indexFetcher-2708-thread-1) [] o.a.s.h.IndexFetcher Follower&apos;s version: 1709189931071
2024-02-29 09:55:55.682 INFO  (indexFetcher-2715-thread-1) [] o.a.s.h.IndexFetcher Follower in sync with leader.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13573588">SOLR-17218</key>
            <summary>indexFetcher thread logging doesn&apos;t include any MDC context</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Mar 2024 22:02:34 +0000</created>
                <updated>Fri, 17 Oct 2025 20:04:59 +0000</updated>
                            <resolved>Thu, 28 Mar 2024 14:59:39 +0000</resolved>
                                                    <fixVersion>9.6</fixVersion>
                    <fixVersion>10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17831569" author="hossman" created="Wed, 27 Mar 2024 22:04:06 +0000"  >&lt;p&gt;Most of the time in Solr we use &lt;tt&gt;MDCAwareThreadPoolExecutor&lt;/tt&gt; and that handles this for us, but &lt;tt&gt;(indexFetcher&lt;/tt&gt; is one of the few places were we use a &lt;tt&gt;ScheduledExecutor&lt;/tt&gt; so that isn&apos;t viable here.&lt;/p&gt;

&lt;p&gt;Since the &lt;tt&gt;ScheduledExecutor&lt;/tt&gt; is private to &lt;tt&gt;ReplicationHandler&lt;/tt&gt; and only has one scheduled &lt;tt&gt;Runnable&lt;/tt&gt; it&apos;s straight forward to just set the MDC context to be consistnet on every poll.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;024-03-27 21:05:19.867 INFO  (indexFetcher-48-thread-1) [c:xxx s:shard1 r:core_node12 x:xxx_shard1_replica_p10 t:localhost-10] o.a.s.h.IndexFetcher Leader&apos;s generation: 2
2024-03-27 21:05:19.867 INFO  (indexFetcher-48-thread-1) [c:xxx s:shard1 r:core_node12 x:xxx_shard1_replica_p10 t:localhost-10] o.a.s.h.IndexFetcher Leader&apos;s version: 1711573505348
2024-03-27 21:05:19.867 INFO  (indexFetcher-48-thread-1) [c:xxx s:shard1 r:core_node12 x:xxx_shard1_replica_p10 t:localhost-10] o.a.s.h.IndexFetcher Follower&apos;s generation: 2
2024-03-27 21:05:19.867 INFO  (indexFetcher-48-thread-1) [c:xxx s:shard1 r:core_node12 x:xxx_shard1_replica_p10 t:localhost-10] o.a.s.h.IndexFetcher Follower&apos;s version: 1711573505348
2024-03-27 21:05:19.867 INFO  (indexFetcher-48-thread-1) [c:xxx s:shard1 r:core_node12 x:xxx_shard1_replica_p10 t:localhost-10] o.a.s.h.IndexFetcher Follower in sync with leader.
2024-03-27 21:05:22.345 INFO  (indexFetcher-68-thread-1) [c:yyy s:shard1 r:core_node3 x:yyy_shard1_replica_p1 t:localhost-14] o.a.s.h.IndexFetcher Leader&apos;s generation: 1
2024-03-27 21:05:22.345 INFO  (indexFetcher-68-thread-1) [c:yyy s:shard1 r:core_node3 x:yyy_shard1_replica_p1 t:localhost-14] o.a.s.h.IndexFetcher Leader&apos;s version: 0
2024-03-27 21:05:22.345 INFO  (indexFetcher-68-thread-1) [c:yyy s:shard1 r:core_node3 x:yyy_shard1_replica_p1 t:localhost-14] o.a.s.h.IndexFetcher Follower&apos;s generation: 1
2024-03-27 21:05:22.345 INFO  (indexFetcher-68-thread-1) [c:yyy s:shard1 r:core_node3 x:yyy_shard1_replica_p1 t:localhost-14] o.a.s.h.IndexFetcher Follower&apos;s version: 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17831836" author="jira-bot" created="Thu, 28 Mar 2024 14:27:32 +0000"  >&lt;p&gt;Commit 418dc06f24ecb8b99138e05ec5c38eeb0f1b0068 in solr&apos;s branch refs/heads/main from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=418dc06f24e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=418dc06f24e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17218&quot; title=&quot;indexFetcher thread logging doesn&amp;#39;t include any MDC context&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17218&quot;&gt;&lt;del&gt;SOLR-17218&lt;/del&gt;&lt;/a&gt;: Fix indexFetcher logging to include MDC details&lt;/p&gt;</comment>
                            <comment id="17831856" author="jira-bot" created="Thu, 28 Mar 2024 14:58:59 +0000"  >&lt;p&gt;Commit b77650936880d24c280ef301121822156f1d4033 in solr&apos;s branch refs/heads/branch_9x from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=b7765093688&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=b7765093688&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17218&quot; title=&quot;indexFetcher thread logging doesn&amp;#39;t include any MDC context&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17218&quot;&gt;&lt;del&gt;SOLR-17218&lt;/del&gt;&lt;/a&gt;: Fix indexFetcher logging to include MDC details&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 418dc06f24ecb8b99138e05ec5c38eeb0f1b0068)&lt;/p&gt;</comment>
                            <comment id="17841733" author="gus_heck" created="Sun, 28 Apr 2024 19:22:41 +0000"  >&lt;p&gt;Closing after the 9.6.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13067715" name="SOLR-17218.patch" size="760" author="hossman" created="Wed, 27 Mar 2024 22:04:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1o9g8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>