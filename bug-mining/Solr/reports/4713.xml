<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:48:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-8889] SolrCloud deleteById is broken when router.field is set</title>
                <link>https://issues.apache.org/jira/browse/SOLR-8889</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;If you set router.field on your collection to shard by something other than the ID, then deleting documents by ID fails some of the time (how much depends on how sharded the collection is).  I suspect that it&apos;d work if the IDs provided when deleting by ID were prefixed using the composite key syntax &amp;#8211; &quot;routekey!id&quot; though I didn&apos;t check.  This is terrible.  Internally Solr should broadcast to all the shards if there is no composite key prefix.&lt;/p&gt;

&lt;p&gt;Some affected code is UpdateRequest.getRoutes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12952954">SOLR-8889</key>
            <summary>SolrCloud deleteById is broken when router.field is set</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="dsmiley">David Smiley</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Mar 2016 19:58:38 +0000</created>
                <updated>Tue, 28 Sep 2021 20:23:06 +0000</updated>
                            <resolved>Mon, 16 Aug 2021 18:10:09 +0000</resolved>
                                                    <fixVersion>9.0</fixVersion>
                    <fixVersion>8.10</fixVersion>
                                    <component>SolrCloud</component>
                    <component>SolrJ</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="15209065" author="dsmiley" created="Wed, 23 Mar 2016 20:07:35 +0000"  >&lt;p&gt;Attached is a patch.  It does &lt;b&gt;not&lt;/b&gt; fix the bug, it&apos;s a modification to ShardSplitTest (one of the &lt;em&gt;very&lt;/em&gt; few places even testing router.field) to experiment with observing the behavior.  The patch as-is passes but you may notice the variable numFoundAfterDelById is not 100 - 3 (100 docs - 3 deleted by id), it&apos;s more than that.&lt;/p&gt;</comment>
                            <comment id="15209170" author="dsmiley" created="Wed, 23 Mar 2016 21:05:27 +0000"  >&lt;p&gt;It seems deleteById given an id prefixed by the route field value (and an exclaimation) doesn&apos;t work &amp;#8211; as I experiment with the test.  It probably doesn&apos;t work because even though the request will likely get to the right shard, the ID is simply not the wright ID to delete since it&apos;s prefixed and not the actual document ID value.&lt;/p&gt;</comment>
                            <comment id="15209549" author="ichattopadhyaya" created="Thu, 24 Mar 2016 01:32:05 +0000"  >&lt;p&gt;This could be same as &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7384&quot; title=&quot;Delete-by-id with _route_ parameter fails on replicas for collections with implicit router&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7384&quot;&gt;&lt;del&gt;SOLR-7384&lt;/del&gt;&lt;/a&gt;. I remember fixing some of this in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5890&quot; title=&quot;Delete silently fails if not sent to shard where document was added&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5890&quot;&gt;&lt;del&gt;SOLR-5890&lt;/del&gt;&lt;/a&gt;, but afair I forgot to version the deleteById commands (when sent from leader to replica), and &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7384&quot; title=&quot;Delete-by-id with _route_ parameter fails on replicas for collections with implicit router&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7384&quot;&gt;&lt;del&gt;SOLR-7384&lt;/del&gt;&lt;/a&gt; was opened due to that.&lt;/p&gt;</comment>
                            <comment id="15209552" author="ichattopadhyaya" created="Thu, 24 Mar 2016 01:34:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;Internally Solr should broadcast to all the shards if there is no composite key prefix.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I remember wanting to do this in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5890&quot; title=&quot;Delete silently fails if not sent to shard where document was added&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5890&quot;&gt;&lt;del&gt;SOLR-5890&lt;/del&gt;&lt;/a&gt;, but we took a conscious decision not to, in that issue. Please see: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5890?focusedCommentId=14264525&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14264525&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SOLR-5890?focusedCommentId=14264525&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14264525&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15209555" author="ichattopadhyaya" created="Thu, 24 Mar 2016 01:39:35 +0000"  >&lt;p&gt;Given that we are near 6.0, we might be at a better position to introduce this change and not worry about backcompat. &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6910&quot; title=&quot;deleteById without _route_ param for implicit router could be broadcast&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6910&quot;&gt;SOLR-6910&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15209810" author="dsmiley" created="Thu, 24 Mar 2016 05:52:31 +0000"  >&lt;p&gt;RE broadcast:  There might not be enough time for the 6.0 release to make it broadcast, but be my guest to go for it if you have the time.  An exception is reasonable if we can&apos;t do the right thing; it&apos;s way better then silently doing the wrong thing!  In the case of the implicit router, I don&apos;t think a delete should be broadcast because it&apos;s a do-it-yourself router requiring you to know where to send things by definition.  That said, the ability to explicitly tell Solr to broadcast would be a nice convenience feature, apart from this issue.&lt;/p&gt;

&lt;p&gt;I looked at some of the related issues you pointed at.  Arguably this issue is the same as &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5890&quot; title=&quot;Delete silently fails if not sent to shard where document was added&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5890&quot;&gt;&lt;del&gt;SOLR-5890&lt;/del&gt;&lt;/a&gt; but IMO &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5890&quot; title=&quot;Delete silently fails if not sent to shard where document was added&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5890&quot;&gt;&lt;del&gt;SOLR-5890&lt;/del&gt;&lt;/a&gt; isn&apos;t &quot;done&quot; because it only helps for those people who know about UpdateRequest.setRoute &amp;#8211; and few would notice that given the SolrClient.deleteById method.  Indeed I did try setRoute and it works (yay) but, wow, what a gotcha for those that don&apos;t know.&lt;/p&gt;

&lt;p&gt;Even with UpdateRequest.setRoute() working (I tweaked my patch to try it and observe it worked), I see a bug, verified via debugging &amp;amp; stepping through.  CloudSolrClient fails to honor the route and thus sends the delete-by-id requests based on hashing the ID (wrong).  Interestingly, ultimately it appears Solr on the server side somehow knows what to do since the test passes.  What happens is, CSC.directUpdate calls UpdateRequest.getRoutes.  At line 288 when it calls router.getTargetSlice, it does not provide &quot;&lt;em&gt;route&lt;/em&gt;&quot; from the map.  Doh!  So instead it hashes on the ID (what CompositeIdRouter falls back on).&lt;/p&gt;

&lt;p&gt;Also, don&apos;t you think the MDC.put &amp;amp; MDC.remove (line 603 &amp;amp; 611) should be moved to be &lt;em&gt;within&lt;/em&gt; the callable, not outside? Right?&lt;/p&gt;

&lt;p&gt;As an aside, I don&apos;t see why the route must end in an exclamation &amp;#8211; that&apos;s weird and easy to forget.  I forgot the first time and didn&apos;t get it to work.  That&apos;s another gotcha, we should perhaps automatically add one?  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; do you know why it&apos;s this way?  If I recall, you added this feature.&lt;/p&gt;</comment>
                            <comment id="15209824" author="noble.paul" created="Thu, 24 Mar 2016 06:03:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;That&apos;s another gotcha, we should perhaps automatically add one?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes. totally&lt;/p&gt;
</comment>
                            <comment id="16488144" author="jsp08" created="Wed, 23 May 2018 22:46:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ichattopadhyaya&quot; class=&quot;user-hover&quot; rel=&quot;ichattopadhyaya&quot;&gt;ichattopadhyaya&lt;/a&gt;: is there a solution for this issue. I have a multisharded, implicity routing in my setup and also do lot of deletes. Is there an alternative to using deleteById.&#160;&lt;/p&gt;

&lt;p&gt;Tested&#160; in both solr5.3 &amp;amp; solr 6.6.3.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16488408" author="elyograg" created="Thu, 24 May 2018 04:39:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsp08&quot; class=&quot;user-hover&quot; rel=&quot;jsp08&quot;&gt;jsp08&lt;/a&gt;, I&apos;ve been following your thread on the mailing list.  Using deleteByQuery runs the risk of big pauses when merges happen, but I think it might avoid the problems described on this issue.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5890&quot; title=&quot;Delete silently fails if not sent to shard where document was added&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5890&quot;&gt;&lt;del&gt;SOLR-5890&lt;/del&gt;&lt;/a&gt; seems to say that if you explicitly send a deleteById request to a core that&apos;s a replica of the correct shard, rather than sending it to the collection, and if all IDs in the delete are on that shard, deleteById might work.  (For SolrJ, that would require using HttpSolrClient rather than CloudSolrClient)&lt;/p&gt;

&lt;p&gt;The actual change for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5890&quot; title=&quot;Delete silently fails if not sent to shard where document was added&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5890&quot;&gt;&lt;del&gt;SOLR-5890&lt;/del&gt;&lt;/a&gt; looks promising (using the &amp;#95;route&amp;#95; parameter), but then &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7384&quot; title=&quot;Delete-by-id with _route_ parameter fails on replicas for collections with implicit router&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7384&quot;&gt;&lt;del&gt;SOLR-7384&lt;/del&gt;&lt;/a&gt; appears to indicate that it doesn&apos;t actually work correctly.&lt;/p&gt;

&lt;p&gt;More than one of the issues touching on this problem has mentioned broadcasting the delete to all shards as a workaround or a solution, but it seems that this hasn&apos;t actually been implemented.  One idea, which I admit is a drastic notion, is to implement a parameter that would force deleteById on SolrCloud to send the delete to all shards.&lt;/p&gt;</comment>
                            <comment id="17398959" author="hossman" created="Fri, 13 Aug 2021 22:30:38 +0000"  >&lt;p&gt;My coworker Dan Fox and I have recently been investigating this issue.&lt;/p&gt;

&lt;p&gt;To address some of the previous comments: I don&apos;t think, in general, that a &quot;broadcast&quot; solution is a good idea for the reasons alluded to in the linked issue. At a fundemental level: if a collection uses a router field, then it&apos;s reasonable to expect that a client sending updates should know that that and take responsibility for it &#8211; not just when adding documents, but when deleting documents as well.&lt;/p&gt;

&lt;p&gt;That leaves us with the question of how to &quot;fix&quot; the current behavior when clients &lt;em&gt;do&lt;/em&gt; send routing info w/deleteById, and if we can prevent bugs like this from cropping up again in the future?&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;It seems like there are 3 key problems:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;1)&lt;/b&gt; If an arbitrary solr node receives a deleteById w/ explicit &quot;routing&quot; information, that information is (at least in some code paths) &#8220;lost&#8221; when trying to decide what shard leader to forward the request to.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;2)&lt;/b&gt; If CloudSolrClient is used to generate an UpdateRequest that includes a deleteById command with &quot;routing&quot; info, that info may be (at least in some code paths) &#8220;ignored&#8221; when deciding what shard leader to send that request &#8211; and (more significantly) can be completely &#8220;lost&#8221; when the request is actually sent to a solr node (meaning that even if #1 is fixed, the info won&apos;t be there for solr to do the right thing).&lt;/p&gt;

&lt;p&gt;&lt;b&gt;3)&lt;/b&gt; There does not appear to be any existing logic to &#8220;fail hard&#8221; in Solr if an update (add or delete) for a collection using &lt;tt&gt;router.field&lt;/tt&gt; is processed w/o the field (or explicit &lt;tt&gt;&lt;em&gt;route&lt;/em&gt;&lt;/tt&gt;&#160; param). Instead the update is silently sent to the wrong shard. (there might be a check/failure situation for this in the add/update case, but I don&#8217;t see it offhand, and certainly not in the deleteById case)&lt;/p&gt;

&lt;p&gt;While Dan tracked down and fixed #1 and #2, I focused on testing, and spent some time looking into what it would take to &quot;fix&quot; #3 in some way &#8211; perhaps along the lines of Yonik&apos;s comment in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5890&quot; title=&quot;Delete silently fails if not sent to shard where document was added&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5890&quot;&gt;&lt;del&gt;SOLR-5890&lt;/del&gt;&lt;/a&gt; suggesting a &quot;strict&quot; mode when using &lt;tt&gt;router.field&lt;/tt&gt;) &#8211; because that seems like it would be the most robust way we can be &quot;future proof&quot; against any bugs (like #1 &amp;amp; #2 above) in solrj/solr-core code silently sending updates to the wrong shard leaders.&lt;/p&gt;

&lt;p&gt;Unfortunately it doesn&#8217;t seem very viable to fix #3 w/o a LOT of serious changes to the DocRouter API. The general categories of problems I&#8217;m seeing are:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Sloppy/Loose API Contract
	&lt;ul&gt;
		&lt;li&gt;some methods are documented to return &#8220;null&#8221; if there is not enough details to determine the correct Slice for an update, but some impls throw exceptions instead (some of the Update Chain processing code actually expects &lt;tt&gt;DocRouter&lt;/tt&gt; to throw exceptions in spite of the API documentation&lt;/li&gt;
		&lt;li&gt;some methods take in a &#8220;route&#8221; argument in addition to an &quot;id&quot; argument ... but not all methods&lt;/li&gt;
		&lt;li&gt;some callers act aware of when a &#8220;route&#8221; has been specified by the user, and pass that the &lt;tt&gt;DocRouter&lt;/tt&gt; methods as the &quot;id&quot; argument in place of the document&apos;s uniqueKey &lt;em&gt;instead&lt;/em&gt; of passing it where the &#8220;route&#8221; arg is suppose to be passed &#8211; so the DocRouter impls never really know whether the &#8220;id&#8221; they have been given is from the uniqueKey field or from the &lt;tt&gt;router.field&lt;/tt&gt;&lt;/li&gt;
		&lt;li&gt;Some code in Solr&apos;s Update Chain assumes a &lt;tt&gt;CompositeIdRouter&lt;/tt&gt; is in use, and directly calls internal (but public) methods from the impl (which are not part of the DocRouter API) that don&#8217;t have access to the &lt;tt&gt;router.field&lt;/tt&gt; let alone know if the input is a uniqueKey value or a &lt;tt&gt;router.field&lt;/tt&gt; value (and worse: some of this code silently does nothing if some other DocRouter is used)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Overly Permissive Functional Design:
	&lt;ul&gt;
		&lt;li&gt;IIUC it actually seems like &lt;tt&gt;router.field&lt;/tt&gt; was designed with the expectation that if an &quot;add&quot; command includes a SolrInputDocument that doesn&#8217;t include a value in the router field, then the uniqueKey should be used as a callback to decide which shard to send it to. (ie: documents aren&apos;t required to have a value in the &lt;tt&gt;router.field&lt;/tt&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Ultimately i think the entire DocRouter API (and it&#8217;s usage in Solr) should be reconsidered, with a (strawman) goal of adding a &lt;tt&gt;strict&lt;/tt&gt; option that (when true for a collection, and in some future version of solr it should default to true) would cause a DocRouter with &lt;tt&gt;router.field&lt;/tt&gt; set to throw an Exception anytime any &lt;tt&gt;DocRouter&lt;/tt&gt; caller calls any routing related method w/o specifying a value for the &lt;tt&gt;router.field&lt;/tt&gt;. Unfortunately this seems like it would take more time/effort then I have to focus on it right now, so I plan to spin it off into it&apos;s own Improvement jira.&lt;/p&gt;

&lt;p&gt;In the meantime, I&apos;m attaching a patch that includes the following:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;More robust testing of collections that have a &lt;tt&gt;router.field&lt;/tt&gt;&#160; and the client has sent deleteById commands with routing information
	&lt;ul&gt;
		&lt;li&gt;via either the &lt;tt&gt;UpdateRequest.deleteById(...)&lt;/tt&gt; or &lt;tt&gt;UpdateRequest.withRoute(...)&lt;/tt&gt; methods&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Fix for for #1 &amp;amp; #2 above to make these tests pass&lt;/li&gt;
	&lt;li&gt;Additional fixes &amp;amp; tests written by Yuki Yano and attached in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12694&quot; title=&quot;JavaBinUpdateRequestCodec fails to restore UpdateRequest.deleteById correctly when &amp;#39;_route_&amp;#39; is specified.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12694&quot;&gt;&lt;del&gt;SOLR-12694&lt;/del&gt;&lt;/a&gt;
	&lt;ul&gt;
		&lt;li&gt;That problem also affects &lt;tt&gt;router.field&lt;/tt&gt; (not just &quot;implicit&quot; router)&lt;/li&gt;
		&lt;li&gt;the &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12694&quot; title=&quot;JavaBinUpdateRequestCodec fails to restore UpdateRequest.deleteById correctly when &amp;#39;_route_&amp;#39; is specified.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12694&quot;&gt;&lt;del&gt;SOLR-12694&lt;/del&gt;&lt;/a&gt;.patch was heavily re-written to work with the &quot;new&quot; cloud based version of &lt;tt&gt;FullSolrCloudDistribCmdsTest&lt;/tt&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think this patch is pretty solid and ready for commit ... but feedback always welcome.&lt;/p&gt;</comment>
                            <comment id="17399476" author="dsmiley" created="Mon, 16 Aug 2021 03:42:42 +0000"  >&lt;p&gt;Excellent investigation Hoss. &#160;Nice tests too.&lt;/p&gt;</comment>
                            <comment id="17399838" author="jira-bot" created="Mon, 16 Aug 2021 16:58:24 +0000"  >&lt;p&gt;Commit 5c3465eb498551c53dc310e44ae82cb89890ffc6 in solr&apos;s branch refs/heads/main from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=5c3465e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=5c3465e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8889&quot; title=&quot;SolrCloud deleteById is broken when router.field is set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8889&quot;&gt;&lt;del&gt;SOLR-8889&lt;/del&gt;&lt;/a&gt;: Fixed various problems in Solr and SolrJ that could cause deleteById commands with &quot;&lt;em&gt;route&lt;/em&gt;&quot; information to processed by the wrong shard, and/or fail when forwarded to replicas from the shard leader.&lt;/p&gt;

&lt;p&gt;Portions of this bug and fixes were tracked in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12694&quot; title=&quot;JavaBinUpdateRequestCodec fails to restore UpdateRequest.deleteById correctly when &amp;#39;_route_&amp;#39; is specified.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12694&quot;&gt;&lt;del&gt;SOLR-12694&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17399909" author="jira-bot" created="Mon, 16 Aug 2021 18:09:33 +0000"  >&lt;p&gt;Commit 1d69e9c59e979e7c47d51a3cb7167df044e5db77 in lucene-solr&apos;s branch refs/heads/branch_8x from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=1d69e9c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=1d69e9c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8889&quot; title=&quot;SolrCloud deleteById is broken when router.field is set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8889&quot;&gt;&lt;del&gt;SOLR-8889&lt;/del&gt;&lt;/a&gt;: Fixed various problems in Solr and SolrJ that could cause deleteById commands with &quot;&lt;em&gt;route&lt;/em&gt;&quot; information to processed by the wrong shard, and/or fail when forwarded to replicas from the shard leader.&lt;/p&gt;

&lt;p&gt;Portions of this bug and fixes were tracked in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12694&quot; title=&quot;JavaBinUpdateRequestCodec fails to restore UpdateRequest.deleteById correctly when &amp;#39;_route_&amp;#39; is specified.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12694&quot;&gt;&lt;del&gt;SOLR-12694&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 5c3465eb498551c53dc310e44ae82cb89890ffc6)&lt;/p&gt;</comment>
                            <comment id="17421746" author="thelabdude" created="Tue, 28 Sep 2021 20:23:06 +0000"  >&lt;p&gt;Closing after the 8.10.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="13180881">SOLR-12694</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310761">
                    <name>Issue split</name>
                                            <outwardlinks description="split to">
                                        <issuelink>
            <issuekey id="13395567">SOLR-15589</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12820530">SOLR-7384</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12702660">SOLR-5890</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13131717">SOLR-11868</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13180881">SOLR-12694</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13031967" name="SOLR-8889.patch" size="26621" author="hossman" created="Fri, 13 Aug 2021 22:30:30 +0000"/>
                            <attachment id="12795051" name="SOLR_8889_investigation.patch" size="4987" author="dsmiley" created="Wed, 23 Mar 2016 20:07:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2v44v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>