<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:38:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-5019] spurious ConcurrentModificationException with spell check component</title>
                <link>https://issues.apache.org/jira/browse/SOLR-5019</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;ConcurrentModificationException with spell check component&lt;br/&gt;
&lt;a href=&quot;http://markmail.org/message/bynajxhgzi2wyhx5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://markmail.org/message/bynajxhgzi2wyhx5&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12656625">SOLR-5019</key>
            <summary>spurious ConcurrentModificationException with spell check component</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yseeley@gmail.com">Yonik Seeley</assignee>
                                    <reporter username="yseeley@gmail.com">Yonik Seeley</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Jul 2013 15:43:16 +0000</created>
                <updated>Mon, 9 May 2016 18:58:36 +0000</updated>
                            <resolved>Mon, 8 Jul 2013 19:59:52 +0000</resolved>
                                                    <fixVersion>4.4</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13702259" author="abakle" created="Mon, 8 Jul 2013 18:39:36 +0000"  >&lt;p&gt;Some Additional Stack from logs. This exception is also observed around the error.&lt;/p&gt;

&lt;p&gt;2013-06-25 10:52:52,471 WARNING &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.solr.spelling.SpellCheckCollator&amp;#93;&lt;/span&gt; (ajp-0.0.0.0-8009-50) Exception trying to re-query to check if a spell check possibility would return any hits.&lt;br/&gt;
java.util.ConcurrentModificationException&lt;br/&gt;
        at java.util.AbstractList$Itr.checkForComodification(AbstractList.java:372)&lt;br/&gt;
        at java.util.AbstractList$Itr.next(AbstractList.java:343)&lt;br/&gt;
        at java.util.AbstractList.equals(AbstractList.java:506)&lt;br/&gt;
        at org.apache.solr.search.QueryResultKey.isEqual(QueryResultKey.java:96)&lt;br/&gt;
        at org.apache.solr.search.QueryResultKey.equals(QueryResultKey.java:81)&lt;br/&gt;
        at java.util.HashMap.put(HashMap.java:376)&lt;br/&gt;
        at org.apache.solr.search.LRUCache.put(LRUCache.java:123)&lt;br/&gt;
        at org.apache.solr.search.SolrIndexSearcher.getDocListC(SolrIndexSearcher.java:1377)&lt;br/&gt;
        at org.apache.solr.search.SolrIndexSearcher.search(SolrIndexSearcher.java:457)&lt;br/&gt;
        at org.apache.solr.handler.component.QueryComponent.process(QueryComponent.java:410)&lt;br/&gt;
        at org.apache.solr.spelling.SpellCheckCollator.collate(SpellCheckCollator.java:112)&lt;br/&gt;
        at org.apache.solr.handler.component.SpellCheckComponent.addCollationsToResponse(SpellCheckComponent.java:203)&lt;br/&gt;
        at org.apache.solr.handler.component.SpellCheckComponent.process(SpellCheckComponent.java:180)&lt;br/&gt;
        at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:208)&lt;br/&gt;
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)&lt;br/&gt;
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1817)&lt;br/&gt;
        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:639)&lt;br/&gt;
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:345)&lt;br/&gt;
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:141)&lt;br/&gt;
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)&lt;br/&gt;
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&lt;br/&gt;
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)&lt;br/&gt;
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)&lt;br/&gt;
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&lt;br/&gt;
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)&lt;br/&gt;
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)&lt;br/&gt;
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)&lt;br/&gt;
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)&lt;br/&gt;
        at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)&lt;br/&gt;
        at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)&lt;br/&gt;
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)&lt;br/&gt;
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)&lt;br/&gt;
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)&lt;br/&gt;
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)&lt;br/&gt;
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)&lt;br/&gt;
        at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:436)&lt;br/&gt;
        at org.apache.coyote.ajp.AjpProtocol$AjpConnectionHandler.process(AjpProtocol.java:384)&lt;br/&gt;
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:662)&lt;/p&gt;</comment>
                            <comment id="13702303" author="yseeley@gmail.com" created="Mon, 8 Jul 2013 19:19:07 +0000"  >&lt;p&gt;The issue was that the spell check component reused the query component to check collations, and the query component wasn&apos;t originally written with that in mind and it modified the list of filters even though that list of filters had already been used.&lt;/p&gt;

&lt;p&gt;This simple patch just makes a copy of any existing filter list before adding new filters from the &quot;fq&quot; list.&lt;/p&gt;</comment>
                            <comment id="13702319" author="jira-bot" created="Mon, 8 Jul 2013 19:39:42 +0000"  >&lt;p&gt;Commit 1500903 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1500903&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1500903&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5019&quot; title=&quot;spurious ConcurrentModificationException with spell check component&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5019&quot;&gt;&lt;del&gt;SOLR-5019&lt;/del&gt;&lt;/a&gt;: don&apos;t modify original filter list&lt;/p&gt;</comment>
                            <comment id="13702332" author="jdyer" created="Mon, 8 Jul 2013 19:48:04 +0000"  >&lt;p&gt;Just curious if there is an easy addition/change to SpellCheckCollatorTest that would make it fail prior to the fix?&lt;/p&gt;</comment>
                            <comment id="13702339" author="jira-bot" created="Mon, 8 Jul 2013 19:51:39 +0000"  >&lt;p&gt;Commit 1500914 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1500914&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1500914&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5019&quot; title=&quot;spurious ConcurrentModificationException with spell check component&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5019&quot;&gt;&lt;del&gt;SOLR-5019&lt;/del&gt;&lt;/a&gt;: don&apos;t modify original filter list&lt;/p&gt;</comment>
                            <comment id="13702350" author="yseeley@gmail.com" created="Mon, 8 Jul 2013 19:59:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;Just curious if there is an easy addition/change to SpellCheckCollatorTest that would make it fail prior to the fix?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;None that I could think of unfortunately.&lt;/p&gt;</comment>
                            <comment id="13716875" author="steve_rowe" created="Tue, 23 Jul 2013 18:38:50 +0000"  >&lt;p&gt;Bulk close resolved 4.4 issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12591258" name="SOLR-5019.patch" size="943" author="yseeley@gmail.com" created="Mon, 8 Jul 2013 19:19:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>336848</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1m3pb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>337171</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>