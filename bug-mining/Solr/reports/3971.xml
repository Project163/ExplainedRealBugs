<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:33:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-11807] maxShardsPerNode=-1 needs special handling while restoring collections</title>
                <link>https://issues.apache.org/jira/browse/SOLR-11807</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When you start Solr 6.6. and run the cloud example here&apos;s the log excerpt :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Connecting to ZooKeeper at localhost:9983 ...

INFO&#160; - 2018-06-20 13:44:47.491; org.apache.solr.client.solrj.impl.ZkClientClusterStateProvider; Cluster at localhost:9983 ready
...

Creating &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; collection &lt;span class=&quot;code-quote&quot;&gt;&apos;gettingstarted&apos;&lt;/span&gt; using command:

http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/admin/collections?action=CREATE&amp;amp;name=gettingstarted&amp;amp;numShards=2&amp;amp;replicationFactor=2&amp;amp;maxShardsPerNode=2&amp;amp;collection.configName=gettingstarted&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;maxShardsPerNode get&apos;s set to 2 .&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Compare this to Solr 7.3&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
INFO&#160; - 2018-06-20 13:55:33.823; org.apache.solr.client.solrj.impl.ZkClientClusterStateProvider; Cluster at localhost:9983 ready

Created collection &lt;span class=&quot;code-quote&quot;&gt;&apos;gettingstarted&apos;&lt;/span&gt; with 2 shard(s), 2 replica(s) with config-set &lt;span class=&quot;code-quote&quot;&gt;&apos;gettingstarted&apos;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So something changed and now we no longer set maxShardsPerNode and it defaults to -1 .&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;-1 has special handing while creating a collection ( it means max int ) . This special handling is not there while&#160;restoring a collection and hence this fails&lt;/p&gt;

&lt;p&gt;We should not set maxShardsPerNode to -1 in the first place&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;/p&gt;

&lt;p&gt;1. ./bin/solr start -e cloud -noprompt : This creates a 2 node cluster and a gettingstarted collection which 2X2&lt;br/&gt;
 2.&#160;Add 4 docs (id=1,2,3,4) with commit=true and openSearcher=true (default)&lt;br/&gt;
 3. Call backup: &lt;a href=&quot;http://localhost:8983/solr/admin/collections?action=BACKUP&amp;amp;name=gettingstarted_backup&amp;amp;collection=gettingstarted&amp;amp;location=/Users/varunthacker/solr-7.1.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/admin/collections?action=BACKUP&amp;amp;name=gettingstarted_backup&amp;amp;collection=gettingstarted&amp;amp;location=/Users/varunthacker/solr-7.1.0&lt;/a&gt;&lt;br/&gt;
 4. Call restore:&lt;br/&gt;
 &lt;a href=&quot;http://localhost:8983/solr/admin/collections?action=restore&amp;amp;name=gettingstarted_backup&amp;amp;collection=restore_gettingstarted&amp;amp;location=/Users/varunthacker/solr-7.1.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/admin/collections?action=restore&amp;amp;name=gettingstarted_backup&amp;amp;collection=restore_gettingstarted&amp;amp;location=/Users/varunthacker/solr-7.1.0&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13127790">SOLR-11807</key>
            <summary>maxShardsPerNode=-1 needs special handling while restoring collections</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="varun">Varun Thacker</assignee>
                                    <reporter username="varun">Varun Thacker</reporter>
                        <labels>
                    </labels>
                <created>Sun, 31 Dec 2017 02:22:03 +0000</created>
                <updated>Thu, 21 Nov 2019 00:41:37 +0000</updated>
                            <resolved>Thu, 21 Jun 2018 09:04:10 +0000</resolved>
                                                    <fixVersion>7.5</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                    <component>Backup/Restore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16327950" author="varunthacker" created="Tue, 16 Jan 2018 22:52:13 +0000"  >&lt;p&gt;I think the better way to solve this problem would be to make sure maxShardsPerNode is not set to -1 in the gettingstarted example. Also there is no documentation that -1 is a special value of &quot;unlimited&quot; so we should not have special handling for that.&lt;/p&gt;</comment>
                            <comment id="16328045" author="varunthacker" created="Wed, 17 Jan 2018 00:23:32 +0000"  >&lt;p&gt;Running tests against the latest patch before committing it&lt;/p&gt;</comment>
                            <comment id="16517931" author="varunthacker" created="Wed, 20 Jun 2018 08:46:48 +0000"  >&lt;p&gt;Okay so now I understand what happened. this was changed in 7.0 (&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11239&quot; title=&quot;Deprecate maxSHardsPerNode when autoscaling policies are used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11239&quot;&gt;&lt;del&gt;SOLR-11239&lt;/del&gt;&lt;/a&gt; )&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt; what do you guys think of the right solution here for dealing with maxShardsPerNode=-1 while restoring a collection ? Add the special handling there as well?&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Also I don&apos;t understand a few things from &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11239&quot; title=&quot;Deprecate maxSHardsPerNode when autoscaling policies are used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11239&quot;&gt;&lt;del&gt;SOLR-11239&lt;/del&gt;&lt;/a&gt; . From that Jira there is a comment saying&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Firstly,&#160;&lt;tt&gt;maxShardsPerNode&lt;/tt&gt;&#160;defaults to 1. So if anyone needs to host more than 1 replica per node then they must specify&#160;&lt;tt&gt;maxShardsPerNode&lt;/tt&gt;&#160;while creating the collection via the collection API.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This didn&apos;t change ? When I try adding a collection like this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
admin/collections?action=create&amp;amp;name=test&amp;amp;numShards=4&amp;amp;replicationFactor=4&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I get an error&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Cannot create collection test. Value of maxShardsPerNode is 1, and the number of nodes currently live or live and part of your createNodeSet is 2. This allows a maximum of 2 to be created. Value of numShards is 4, value of nrtReplicas is 4, value of tlogReplicas is 0 and value of pullReplicas is 0. This requires 16 shards to be created (higher than the allowed number)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Was this intentionally not addressed in that Jira?&lt;/p&gt;</comment>
                            <comment id="16517943" author="noble.paul" created="Wed, 20 Jun 2018 08:56:43 +0000"  >&lt;p&gt;The  &lt;tt&gt;/bin/solr&lt;/tt&gt; script sends the value as &lt;tt&gt;-1&lt;/tt&gt; . But if you use the REST API, it passes nothing and the default value is &lt;tt&gt;1&lt;/tt&gt;. So, when you are restoring collections just pass -1 if you know how many nodes are going to be created .&lt;/p&gt;</comment>
                            <comment id="16518085" author="varunthacker" created="Wed, 20 Jun 2018 12:12:49 +0000"  >&lt;p&gt;So we want to keep -1 as a value to indicate &quot;unlimited&quot; ?&lt;/p&gt;</comment>
                            <comment id="16518089" author="noble.paul" created="Wed, 20 Jun 2018 12:19:14 +0000"  >&lt;p&gt;Well, &lt;tt&gt;-1&lt;/tt&gt; is not persisted to &lt;tt&gt;state.json&lt;/tt&gt; what is persisted to &lt;tt&gt;state.json&lt;/tt&gt; is &lt;tt&gt;Integer.MAX_VALUE&lt;/tt&gt;. &lt;tt&gt;-1&lt;/tt&gt; is  a special value understood by the command&lt;/p&gt;</comment>
                            <comment id="16518090" author="varunthacker" created="Wed, 20 Jun 2018 12:21:32 +0000"  >&lt;p&gt;I don&apos;t think that&apos;s true. If you run &quot;bin/solr start -e cloud -noprompt&quot; you&apos;ll get this in the state.json for the gettingstarted collection&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-quote&quot;&gt;&quot;router&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;compositeId&quot;&lt;/span&gt;},
    &lt;span class=&quot;code-quote&quot;&gt;&quot;maxShardsPerNode&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;-1&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;autoAddReplicas&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;nrtReplicas&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;tlogReplicas&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;}}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16518121" author="varunthacker" created="Wed, 20 Jun 2018 13:15:30 +0000"  >&lt;p&gt;Patch which expects that a user can pass in -1 and state.json can also contain -1&#160;&lt;/p&gt;

&lt;p&gt;The restore treats -1 as &quot;unlimited&quot;&lt;/p&gt;</comment>
                            <comment id="16518186" author="noble.paul" created="Wed, 20 Jun 2018 14:14:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t think that&apos;s true. If you run &quot;bin/solr start -e cloud -noprompt&quot; you&apos;ll get this in the state.json for the gettingstarted collection&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I was mistaken. &lt;br/&gt;
Anyway, it&apos;s safe to use &lt;tt&gt;-1&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16519105" author="varunthacker" created="Thu, 21 Jun 2018 09:04:10 +0000"  >&lt;p&gt;Committed!&lt;/p&gt;

&lt;p&gt;master : 3a2ec9b&lt;/p&gt;

&lt;p&gt;branch_7x :&#160;9c432b7&lt;/p&gt;</comment>
                            <comment id="16522446" author="steve_rowe" created="Mon, 25 Jun 2018 15:41:49 +0000"  >&lt;p&gt;Policeman Jenkins found a reproducing seed for a &lt;tt&gt;TestLocalFSCloudBackupRestore&lt;/tt&gt; failure that &lt;tt&gt;git bisect&lt;/tt&gt; blames&#160;on commit &lt;tt&gt;3a2ec9b&lt;/tt&gt; on this issue &lt;a href=&quot;https://jenkins.thetaphi.de/job/Lucene-Solr-7.x-Linux/2183/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.thetaphi.de/job/Lucene-Solr-7.x-Linux/2183/&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Checking out Revision 82b793df56c8c9fb50c29f46f39465453a87f2b2 (refs/remotes/origin/branch_7x)
[...]
   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=TestLocalFSCloudBackupRestore -Dtests.method=test -Dtests.seed=7CEE52DAF9E4606 -Dtests.multiplier=3 -Dtests.slow=true -Dtests.locale=bs-Cyrl -Dtests.timezone=America/Boise -Dtests.asserts=true -Dtests.file.encoding=UTF-8
   [junit4] FAILURE 15.8s J2 | TestLocalFSCloudBackupRestore.test &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: Node 127.0.0.1:40147_solr has 6 replicas. Expected num replicas : 3 state file 
   [junit4]    &amp;gt; DocCollection(backuprestore_restored//collections/backuprestore_restored/state.json/13)={
   [junit4]    &amp;gt;   &quot;pullReplicas&quot;:0,
   [junit4]    &amp;gt;   &quot;replicationFactor&quot;:2,
   [junit4]    &amp;gt;   &quot;shards&quot;:{
   [junit4]    &amp;gt;     &quot;shard2&quot;:{
   [junit4]    &amp;gt;       &quot;range&quot;:&quot;0-7fffffff&quot;,
   [junit4]    &amp;gt;       &quot;state&quot;:&quot;active&quot;,
   [junit4]    &amp;gt;       &quot;replicas&quot;:{
   [junit4]    &amp;gt;         &quot;core_node122&quot;:{
   [junit4]    &amp;gt;           &quot;core&quot;:&quot;backuprestore_restored_shard2_replica_n121&quot;,
   [junit4]    &amp;gt;           &quot;base_url&quot;:&quot;https://127.0.0.1:40147/solr&quot;,
   [junit4]    &amp;gt;           &quot;node_name&quot;:&quot;127.0.0.1:40147_solr&quot;,
   [junit4]    &amp;gt;           &quot;state&quot;:&quot;active&quot;,
   [junit4]    &amp;gt;           &quot;type&quot;:&quot;NRT&quot;,
   [junit4]    &amp;gt;           &quot;force_set_state&quot;:&quot;false&quot;,
   [junit4]    &amp;gt;           &quot;leader&quot;:&quot;true&quot;},
   [junit4]    &amp;gt;         &quot;core_node128&quot;:{
   [junit4]    &amp;gt;           &quot;core&quot;:&quot;backuprestore_restored_shard2_replica_n127&quot;,
   [junit4]    &amp;gt;           &quot;base_url&quot;:&quot;https://127.0.0.1:40147/solr&quot;,
   [junit4]    &amp;gt;           &quot;node_name&quot;:&quot;127.0.0.1:40147_solr&quot;,
   [junit4]    &amp;gt;           &quot;state&quot;:&quot;active&quot;,
   [junit4]    &amp;gt;           &quot;type&quot;:&quot;NRT&quot;,
   [junit4]    &amp;gt;           &quot;force_set_state&quot;:&quot;false&quot;}},
   [junit4]    &amp;gt;       &quot;stateTimestamp&quot;:&quot;1529839664323341145&quot;},
   [junit4]    &amp;gt;     &quot;shard1_1&quot;:{
   [junit4]    &amp;gt;       &quot;range&quot;:&quot;c0000000-ffffffff&quot;,
   [junit4]    &amp;gt;       &quot;state&quot;:&quot;active&quot;,
   [junit4]    &amp;gt;       &quot;replicas&quot;:{
   [junit4]    &amp;gt;         &quot;core_node124&quot;:{
   [junit4]    &amp;gt;           &quot;core&quot;:&quot;backuprestore_restored_shard1_1_replica_n123&quot;,
   [junit4]    &amp;gt;           &quot;base_url&quot;:&quot;https://127.0.0.1:40147/solr&quot;,
   [junit4]    &amp;gt;           &quot;node_name&quot;:&quot;127.0.0.1:40147_solr&quot;,
   [junit4]    &amp;gt;           &quot;state&quot;:&quot;active&quot;,
   [junit4]    &amp;gt;           &quot;type&quot;:&quot;NRT&quot;,
   [junit4]    &amp;gt;           &quot;force_set_state&quot;:&quot;false&quot;,
   [junit4]    &amp;gt;           &quot;leader&quot;:&quot;true&quot;},
   [junit4]    &amp;gt;         &quot;core_node130&quot;:{
   [junit4]    &amp;gt;           &quot;core&quot;:&quot;backuprestore_restored_shard1_1_replica_n129&quot;,
   [junit4]    &amp;gt;           &quot;base_url&quot;:&quot;https://127.0.0.1:40147/solr&quot;,
   [junit4]    &amp;gt;           &quot;node_name&quot;:&quot;127.0.0.1:40147_solr&quot;,
   [junit4]    &amp;gt;           &quot;state&quot;:&quot;active&quot;,
   [junit4]    &amp;gt;           &quot;type&quot;:&quot;NRT&quot;,
   [junit4]    &amp;gt;           &quot;force_set_state&quot;:&quot;false&quot;}},
   [junit4]    &amp;gt;       &quot;stateTimestamp&quot;:&quot;1529839664323360463&quot;},
   [junit4]    &amp;gt;     &quot;shard1_0&quot;:{
   [junit4]    &amp;gt;       &quot;range&quot;:&quot;80000000-bfffffff&quot;,
   [junit4]    &amp;gt;       &quot;state&quot;:&quot;active&quot;,
   [junit4]    &amp;gt;       &quot;replicas&quot;:{
   [junit4]    &amp;gt;         &quot;core_node126&quot;:{
   [junit4]    &amp;gt;           &quot;core&quot;:&quot;backuprestore_restored_shard1_0_replica_n125&quot;,
   [junit4]    &amp;gt;           &quot;base_url&quot;:&quot;https://127.0.0.1:40147/solr&quot;,
   [junit4]    &amp;gt;           &quot;node_name&quot;:&quot;127.0.0.1:40147_solr&quot;,
   [junit4]    &amp;gt;           &quot;state&quot;:&quot;active&quot;,
   [junit4]    &amp;gt;           &quot;type&quot;:&quot;NRT&quot;,
   [junit4]    &amp;gt;           &quot;force_set_state&quot;:&quot;false&quot;,
   [junit4]    &amp;gt;           &quot;leader&quot;:&quot;true&quot;},
   [junit4]    &amp;gt;         &quot;core_node132&quot;:{
   [junit4]    &amp;gt;           &quot;core&quot;:&quot;backuprestore_restored_shard1_0_replica_n131&quot;,
   [junit4]    &amp;gt;           &quot;base_url&quot;:&quot;https://127.0.0.1:40147/solr&quot;,
   [junit4]    &amp;gt;           &quot;node_name&quot;:&quot;127.0.0.1:40147_solr&quot;,
   [junit4]    &amp;gt;           &quot;state&quot;:&quot;active&quot;,
   [junit4]    &amp;gt;           &quot;type&quot;:&quot;NRT&quot;,
   [junit4]    &amp;gt;           &quot;force_set_state&quot;:&quot;false&quot;}},
   [junit4]    &amp;gt;       &quot;stateTimestamp&quot;:&quot;1529839664323379971&quot;}},
   [junit4]    &amp;gt;   &quot;router&quot;:{&quot;name&quot;:&quot;compositeId&quot;},
   [junit4]    &amp;gt;   &quot;maxShardsPerNode&quot;:&quot;6&quot;,
   [junit4]    &amp;gt;   &quot;autoAddReplicas&quot;:&quot;true&quot;,
   [junit4]    &amp;gt;   &quot;nrtReplicas&quot;:2,
   [junit4]    &amp;gt;   &quot;tlogReplicas&quot;:0}
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([7CEE52DAF9E4606:8F9ADAF701622BFE]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.api.collections.AbstractCloudBackupRestoreTestCase.lambda$testBackupAndRestore$1(AbstractCloudBackupRestoreTestCase.java:346)
   [junit4]    &amp;gt; 	at java.base/java.util.HashMap.forEach(HashMap.java:1341)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.api.collections.AbstractCloudBackupRestoreTestCase.testBackupAndRestore(AbstractCloudBackupRestoreTestCase.java:345)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.api.collections.AbstractCloudBackupRestoreTestCase.test(AbstractCloudBackupRestoreTestCase.java:145)
   [junit4]    &amp;gt; 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   [junit4]    &amp;gt; 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
   [junit4]    &amp;gt; 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
   [junit4]    &amp;gt; 	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
   [junit4]    &amp;gt; 	at java.base/java.lang.Thread.run(Thread.java:844)
[...]
   [junit4]   2&amp;gt; NOTE: test params are: codec=HighCompressionCompressingStoredFields(storedFieldsFormat=CompressingStoredFieldsFormat(compressionMode=HIGH_COMPRESSION, chunkSize=3858, maxDocsPerChunk=6, blockSize=4), termVectorsFormat=CompressingTermVectorsFormat(compressionMode=HIGH_COMPRESSION, chunkSize=3858, blockSize=4)), sim=RandomSimilarity(queryNorm=true): {}, locale=bs-Cyrl, timezone=America/Boise
   [junit4]   2&amp;gt; NOTE: Linux 4.13.0-41-generic amd64/Oracle Corporation 10.0.1 (64-bit)/cpus=8,threads=1,free=134185200,total=518979584
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16522449" author="varunthacker" created="Mon, 25 Jun 2018 15:43:44 +0000"  >&lt;p&gt;Thanks Steve! I&apos;ll look into it tomorrow. I beasted this test quite a bit before committing but looks like Jenkins uncovered something&#160;&lt;/p&gt;</comment>
                            <comment id="16523579" author="jira-bot" created="Tue, 26 Jun 2018 11:09:53 +0000"  >&lt;p&gt;Commit c33bb65cf6e45a131d36c887aac77b7791d43bcf in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=c33bb65&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=c33bb65&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11807&quot; title=&quot;maxShardsPerNode=-1 needs special handling while restoring collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11807&quot;&gt;&lt;del&gt;SOLR-11807&lt;/del&gt;&lt;/a&gt;: Test code didn&apos;t take into account changing maxShardsPerNode for one code path&lt;/p&gt;</comment>
                            <comment id="16524624" author="jira-bot" created="Wed, 27 Jun 2018 06:15:31 +0000"  >&lt;p&gt;Commit 0741a9834ca1c7bef5e350c3f5d5181b445d61b9 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=0741a98&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=0741a98&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11807&quot; title=&quot;maxShardsPerNode=-1 needs special handling while restoring collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11807&quot;&gt;&lt;del&gt;SOLR-11807&lt;/del&gt;&lt;/a&gt;: Test code didn&apos;t take into account changing maxShardsPerNode for one code path&lt;/p&gt;

&lt;p&gt;(cherry picked from commit c33bb65)&lt;/p&gt;</comment>
                            <comment id="16564428" author="jira-bot" created="Tue, 31 Jul 2018 22:19:33 +0000"  >&lt;p&gt;Commit c9e3c456e304522c0c37950d520c19c1565625f7 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=c9e3c45&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=c9e3c45&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11807&quot; title=&quot;maxShardsPerNode=-1 needs special handling while restoring collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11807&quot;&gt;&lt;del&gt;SOLR-11807&lt;/del&gt;&lt;/a&gt;: Simply testing of createNodeSet with restoring collection and fixing the test failure&lt;/p&gt;</comment>
                            <comment id="16564430" author="jira-bot" created="Tue, 31 Jul 2018 22:20:24 +0000"  >&lt;p&gt;Commit a0afe4646f6fe08497a234834b59abc74b4c4208 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a0afe46&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a0afe46&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11807&quot; title=&quot;maxShardsPerNode=-1 needs special handling while restoring collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11807&quot;&gt;&lt;del&gt;SOLR-11807&lt;/del&gt;&lt;/a&gt;: Simply testing of createNodeSet with restoring collection and fixing the test failure&lt;/p&gt;

&lt;p&gt;(cherry picked from commit c9e3c45)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13094710">SOLR-11239</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13128760">SOLR-11823</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12928479" name="SOLR-11807.patch" size="9757" author="varun" created="Wed, 20 Jun 2018 13:14:43 +0000"/>
                            <attachment id="12906306" name="SOLR-11807.patch" size="2723" author="varun" created="Wed, 17 Jan 2018 00:23:15 +0000"/>
                            <attachment id="12906294" name="SOLR-11807.patch" size="2046" author="varun" created="Tue, 16 Jan 2018 23:03:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3oe0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>