<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:29:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3648] The &quot;/browse&quot; Solritas GUI does not work under SolrCloud - 500 error</title>
                <link>https://issues.apache.org/jira/browse/SOLR-3648</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When run in a SolrCloud configuration the Velocity searchHandler responds to a /browse request with an HTTP error 500 and a stack trace indicating org.apache.solr.common.cloud.ZooKeeperException:&lt;br/&gt;
ZkSolrResourceLoader does not support getConfigDir() &lt;/p&gt;</description>
                <environment>&lt;p&gt;RHEL 5.4, SolrCloud&lt;/p&gt;</environment>
        <key id="12599516">SOLR-3648</key>
            <summary>The &quot;/browse&quot; Solritas GUI does not work under SolrCloud - 500 error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ehatcher">Erik Hatcher</assignee>
                                    <reporter username="nickoton">Nick Cotton</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Thu, 19 Jul 2012 19:27:15 +0000</created>
                <updated>Mon, 9 May 2016 18:43:13 +0000</updated>
                            <resolved>Sat, 28 Jul 2012 22:32:36 +0000</resolved>
                                    <version>4.0-ALPHA</version>
                                    <fixVersion>4.0-BETA</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SearchComponents - other</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13419522" author="janhoy" created="Fri, 20 Jul 2012 20:15:51 +0000"  >&lt;p&gt;Looks as if we in general need more interaction tests between SolrCloud and various other Solr features. I set it as Blocker for now, since it is probably a quick fix..&lt;/p&gt;</comment>
                            <comment id="13419557" author="markrmiller@gmail.com" created="Fri, 20 Jul 2012 20:55:43 +0000"  >&lt;p&gt;There are a variety of extras that may not work with SolrCloud - I don&apos;t consider any of them blockers though. Initially, I would only expect core stuff to work well until others start digging into other components. I have never looked at how the UIMA update processor plays with SolrCloud as an example. Unless a lot of people start asking about something like that, it&apos;s just not high on my priority list.&lt;/p&gt;

&lt;p&gt;Of course, a lot of this could be done by anybody.&lt;/p&gt;

&lt;p&gt;I look at this the same as some search components not yet supporting distrib. Some things won&apos;t work with SolrCloud to begin with as well. I&apos;ve focused my attention on the core features.&lt;/p&gt;

&lt;p&gt;Currently, anything anywhere that tries to get the local fs directory will fail when in SolrCloud mode. In the cases that you can accomplish the same thing using zookeeper, another code path can be added. I&apos;ve done this for a couple other things. In some cases it might not be so easy though.&lt;/p&gt;

&lt;p&gt;That exception is telling you, in cloud mode, this feature is not currently support - perhaps we should tweak it to be more explicit about that.&lt;/p&gt;

&lt;p&gt;Since I&apos;m not familiar with browse or what it tries to do internally, it&apos;s not high on my personal list, which is quite long.&lt;/p&gt;</comment>
                            <comment id="13419572" author="markrmiller@gmail.com" created="Fri, 20 Jul 2012 21:08:29 +0000"  >&lt;p&gt;In this case I assume the problem is in the VelocityResponseWriter. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    VelocityEngine engine = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; VelocityEngine();
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; template_root = request.getParams().get(&lt;span class=&quot;code-quote&quot;&gt;&quot;v.base_dir&quot;&lt;/span&gt;);
    File baseDir = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(request.getCore().getResourceLoader().getConfigDir(), &lt;span class=&quot;code-quote&quot;&gt;&quot;velocity&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (template_root != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      baseDir = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(template_root);
    }
    engine.setProperty(RuntimeConstants.FILE_RESOURCE_LOADER_PATH, baseDir.getAbsolutePath());
    engine.setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;params.resource.loader.instance&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrParamResourceLoader(request));
    SolrVelocityResourceLoader resourceLoader =
        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrVelocityResourceLoader(request.getCore().getSolrConfig().getResourceLoader());
    engine.setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.resource.loader.instance&quot;&lt;/span&gt;, resourceLoader);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It looks like its asking for the location of config files - they are in zookeeper - but this &apos;engine&apos; wants a file path. Looks like some difficulties...&lt;/p&gt;</comment>
                            <comment id="13420154" author="janhoy" created="Sun, 22 Jul 2012 12:48:23 +0000"  >&lt;p&gt;Attaching first patch&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Not using Velocity&apos;s file.resource.loader&lt;/li&gt;
	&lt;li&gt;Param &lt;tt&gt;v.base_dir&lt;/tt&gt; now is always relative to &quot;conf&quot; and respected by SolrResourceLoader&lt;/li&gt;
	&lt;li&gt;SolrVelocityResourceLoader first checks the given paths from v.base_dir, default &quot;velocity&quot; before checking default locations&lt;/li&gt;
	&lt;li&gt;ShowFileRequestHandler#showFromZooKeeper patched to remove &quot;/&quot; prefix from requested file so that e.g. &lt;tt&gt;/velocity/main.css&lt;/tt&gt; resolves for ZK.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Still missing are some unit tests. Also perhaps a way to load files/resources outside of current core&apos;s &quot;conf&quot; via ZK. But &quot;..&quot; is disallowed, so how would this work? Perhaps we need a way/syntax to address files from another config or folder than the current, a way that works across all ResourceLoaders...&lt;/p&gt;</comment>
                            <comment id="13420168" author="janhoy" created="Sun, 22 Jul 2012 13:18:50 +0000"  >&lt;p&gt;Would it be a good idea to let resource loaders support a simple URI syntax?&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;myfile.txt                           # relative to conf (whether in FS or ZK)
file:///var/myfile.txt               # absolute file from local file system
http://localhost/myfile.txt          # absolute URL
zk://solr/configs/otherconfig/myfile # absolute ZK ref, to e.g. reference a synonym dict residing in a shared config
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13421424" author="ehatcher" created="Tue, 24 Jul 2012 13:57:48 +0000"  >&lt;p&gt;Jan - thanks for your efforts here.  I&apos;ve carved out a couple of days (local Lucene/Solr Hackathon) later this week to work on Solr 4/trunk issues and will be looking into this one in more detail then.  &lt;/p&gt;

&lt;p&gt;At first glance, I don&apos;t think we should lose the file resource loader completely, as it can be a very useful way to make sets of templates that are overridable.  But for a first pass to get this working with SolrCloud properly I&apos;m ok with it.  Ultimately (and I&apos;ll aim to dig into this more myself soon) I think we should make the template resource loading settings pluggable/editable from configuration.&lt;/p&gt;</comment>
                            <comment id="13421857" author="janhoy" created="Tue, 24 Jul 2012 23:08:37 +0000"  >&lt;p&gt;Erik, feel free to grab the current patch and polish it to your likings.&lt;/p&gt;

&lt;p&gt;A disadvantage is that we have very little test coverage. We could of course use something like Selenium...&lt;/p&gt;</comment>
                            <comment id="13424442" author="ehatcher" created="Sat, 28 Jul 2012 22:17:46 +0000"  >&lt;p&gt;Adapted Jan&apos;s work with some tweaks.  Hard-coded &quot;velocity/&quot; in the custom resource loader (which is what gets used in SolrCloud mode).  Kept file resource loader in the mix when not in SolrCloud mode.&lt;/p&gt;

&lt;p&gt;All is working now, so I&apos;ll commit and iterate on anything else remaining here.&lt;/p&gt;</comment>
                            <comment id="13424446" author="ehatcher" created="Sat, 28 Jul 2012 22:26:06 +0000"  >&lt;p&gt;Committed my patch to r1366775 (4_x) and r1366776 (trunk).&lt;/p&gt;</comment>
                            <comment id="13424448" author="ehatcher" created="Sat, 28 Jul 2012 22:32:09 +0000"  >&lt;p&gt;TODO: update VelocityResponseWriter wiki (it needs a cleanup anyway) with pertinent details.&lt;/p&gt;

&lt;p&gt;What else do you think should be done here, Jan?  The one thing I didn&apos;t incorporate from your patch was the &quot;path&quot; parameter to the SolrVelocityResourceLoader (but rather hardcoded it), mainly for simplicity.  I don&apos;t think that multiple &quot;path&quot;&apos;s capability should be done that way here.  Either your way or my way here is a change in how it was done before by requiring it look in a velocity/ sub&quot;directory&quot;.  I doubt anyone has used it the way I was intending it to be used, so not a big deal to break it I don&apos;t think.  My thinking with that, thankfully quite useful in SolrCloud mode resource loader, was that plugins/contrib modules could ship their own Velocity templates in their JAR files.  Anyone using it that way will now have to put the templates in a velocity/ subdirectory inside the JAR.&lt;/p&gt;</comment>
                            <comment id="13424457" author="janhoy" created="Sat, 28 Jul 2012 23:26:07 +0000"  >&lt;p&gt;I&apos;m cool with that, thanks for finalizing!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12538257" name="SOLR-3648.patch" size="4823" author="ehatcher" created="Sat, 28 Jul 2012 22:17:46 +0000"/>
                            <attachment id="12537495" name="SOLR-3648.patch" size="4670" author="janhoy" created="Sun, 22 Jul 2012 12:48:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>243335</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 17 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03dg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17612</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>