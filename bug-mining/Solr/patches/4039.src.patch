diff --git a/solr/CHANGES.txt b/solr/CHANGES.txt
index 0f97dcf5387..2c4903bbc00 100644
--- a/solr/CHANGES.txt
+++ b/solr/CHANGES.txt
@@ -107,6 +107,7 @@ Bug Fixes
 * SOLR-11836: FacetStream works with bucketSizeLimit of -1 which will fetch all the buckets.
   (Alfonso Mu√±oz-Pomer Fuentes, Amrit Sarkar via Varun Thacker)
 
+* SOLR-12776: Setting of TMP in solr.cmd causes invisibility of Solr to JDK tools (Petr Bodnar via Erick Erickson)
 
 ==================  7.5.0 ==================
 
diff --git a/solr/bin/solr.cmd b/solr/bin/solr.cmd
index 1750c2f43a5..005ea59e04b 100755
--- a/solr/bin/solr.cmd
+++ b/solr/bin/solr.cmd
@@ -981,8 +981,8 @@ IF [%SOLR_LOGS_DIR%] == [] (
 )
 
 set "EXAMPLE_DIR=%SOLR_TIP%\example"
-set TMP=!SOLR_HOME:%EXAMPLE_DIR%=!
-IF NOT "%TMP%"=="%SOLR_HOME%" (
+set TMP_SOLR_HOME=!SOLR_HOME:%EXAMPLE_DIR%=!
+IF NOT "%TMP_SOLR_HOME%"=="%SOLR_HOME%" (
   set "SOLR_LOGS_DIR=%SOLR_HOME%\..\logs"
   set "LOG4J_CONFIG=file:///%SOLR_SERVER_DIR%\resources\log4j2.xml"
 )
