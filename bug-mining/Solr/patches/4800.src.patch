diff --git a/solr/CHANGES.txt b/solr/CHANGES.txt
index b099c1509d9..d2929c72673 100644
--- a/solr/CHANGES.txt
+++ b/solr/CHANGES.txt
@@ -622,6 +622,8 @@ Bug Fixes
 ---------------------
 * SOLR-15871: Update Log4J to 2.17.1 (weidongkl via janhoy)
 
+* SOLR-15587: Don't use the UrlScheme singleton on the client-side to determine cluster's scheme, only get from ClusterState provider impl (Timothy Potter)
+
 ==================  8.11.1 ==================
 
 Bug Fixes
diff --git a/solr/core/src/java/org/apache/solr/cloud/ShardLeaderElectionContextBase.java b/solr/core/src/java/org/apache/solr/cloud/ShardLeaderElectionContextBase.java
index fc8700851de..6490420b982 100644
--- a/solr/core/src/java/org/apache/solr/cloud/ShardLeaderElectionContextBase.java
+++ b/solr/core/src/java/org/apache/solr/cloud/ShardLeaderElectionContextBase.java
@@ -165,10 +165,12 @@ class ShardLeaderElectionContextBase extends ElectionContext {
       }
     }
     if (!isAlreadyLeader) {
+      String nodeName = leaderProps.getStr(ZkStateReader.NODE_NAME_PROP);
       ZkNodeProps m = new ZkNodeProps(Overseer.QUEUE_OPERATION, OverseerAction.LEADER.toLower(),
           ZkStateReader.SHARD_ID_PROP, shardId,
           ZkStateReader.COLLECTION_PROP, collection,
-          ZkStateReader.NODE_NAME_PROP, leaderProps.getStr(ZkStateReader.NODE_NAME_PROP),
+          ZkStateReader.NODE_NAME_PROP, nodeName,
+          ZkStateReader.BASE_URL_PROP, zkStateReader.getBaseUrlForNodeName(nodeName),
           ZkStateReader.CORE_NAME_PROP, leaderProps.getStr(ZkStateReader.CORE_NAME_PROP),
           ZkStateReader.STATE_PROP, Replica.State.ACTIVE.toString());
       assert zkController != null;
diff --git a/solr/core/src/java/org/apache/solr/cloud/ZkController.java b/solr/core/src/java/org/apache/solr/cloud/ZkController.java
index 6d33b53d2ad..26839f1b94c 100644
--- a/solr/core/src/java/org/apache/solr/cloud/ZkController.java
+++ b/solr/core/src/java/org/apache/solr/cloud/ZkController.java
@@ -98,6 +98,7 @@ import org.apache.zookeeper.data.Stat;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 
+import static org.apache.solr.common.cloud.ZkStateReader.BASE_URL_PROP;
 import static org.apache.solr.common.cloud.ZkStateReader.COLLECTION_PROP;
 import static org.apache.solr.common.cloud.ZkStateReader.CORE_NAME_PROP;
 import static org.apache.solr.common.cloud.ZkStateReader.CORE_NODE_NAME_PROP;
@@ -910,8 +911,11 @@ public class ZkController implements Closeable {
       createClusterZkNodes(zkClient);
       zkStateReader.createClusterStateWatchersAndUpdate();
 
+      // note: Can't read cluster properties until createClusterState ^ is called
+      final String urlSchemeFromClusterProp = zkStateReader.getClusterProperty(ZkStateReader.URL_SCHEME, ZkStateReader.HTTP);
+
       // this must happen after zkStateReader has initialized the cluster props
-      this.baseURL = zkStateReader.getBaseUrlForNodeName(this.nodeName);
+      this.baseURL = Utils.getBaseUrlForNodeName(this.nodeName, urlSchemeFromClusterProp);
 
       checkForExistingEphemeralNode();
       registerLiveNodesListener();
@@ -1438,6 +1442,7 @@ public class ZkController implements Closeable {
     // we only put a subset of props into the leader node
     props.put(ZkStateReader.CORE_NAME_PROP, cd.getName());
     props.put(ZkStateReader.NODE_NAME_PROP, getNodeName());
+    props.put(ZkStateReader.BASE_URL_PROP, zkStateReader.getBaseUrlForNodeName(getNodeName()));
     props.put(ZkStateReader.CORE_NODE_NAME_PROP, coreNodeName);
 
 
@@ -1537,6 +1542,7 @@ public class ZkController implements Closeable {
       props.put(ZkStateReader.CORE_NAME_PROP, cd.getName());
       props.put(ZkStateReader.ROLES_PROP, cd.getCloudDescriptor().getRoles());
       props.put(ZkStateReader.NODE_NAME_PROP, getNodeName());
+      props.put(ZkStateReader.BASE_URL_PROP, zkStateReader.getBaseUrlForNodeName(getNodeName()));
       props.put(ZkStateReader.SHARD_ID_PROP, cd.getCloudDescriptor().getShardId());
       props.put(ZkStateReader.COLLECTION_PROP, collection);
       props.put(ZkStateReader.REPLICA_TYPE, cd.getCloudDescriptor().getReplicaType().toString());
@@ -1670,6 +1676,7 @@ public class ZkController implements Closeable {
       ZkNodeProps m = new ZkNodeProps(Overseer.QUEUE_OPERATION, OverseerAction.DELETECORE.toLower(),
           ZkStateReader.CORE_NAME_PROP, coreName,
           ZkStateReader.NODE_NAME_PROP, getNodeName(),
+          ZkStateReader.BASE_URL_PROP, zkStateReader.getBaseUrlForNodeName(getNodeName()),
           ZkStateReader.COLLECTION_PROP, cloudDescriptor.getCollectionName(),
           ZkStateReader.CORE_NODE_NAME_PROP, coreNodeName);
       if (distributedClusterStateUpdater.isDistributedStateUpdate()) {
@@ -2174,8 +2181,9 @@ public class ZkController implements Closeable {
       ElectionContext prevContext = electionContexts.get(contextKey);
       if (prevContext != null) prevContext.cancelElection();
 
-      String ourUrl = ZkCoreNodeProps.getCoreUrl(UrlScheme.INSTANCE.getBaseUrlForNodeName(getNodeName()), coreName);
-      ZkNodeProps zkProps = new ZkNodeProps(CORE_NAME_PROP, coreName, NODE_NAME_PROP, getNodeName(), CORE_NODE_NAME_PROP, coreNodeName);
+      String baseUrl = zkStateReader.getBaseUrlForNodeName(getNodeName());
+      String ourUrl = ZkCoreNodeProps.getCoreUrl(baseUrl, coreName);
+      ZkNodeProps zkProps = new ZkNodeProps(CORE_NAME_PROP, coreName, NODE_NAME_PROP, getNodeName(), CORE_NODE_NAME_PROP, coreNodeName, BASE_URL_PROP, baseUrl);
 
       LeaderElector elect = ((ShardLeaderElectionContextBase) prevContext).getLeaderElector();
       ShardLeaderElectionContext context = new ShardLeaderElectionContext(elect, shardId, collectionName,
diff --git a/solr/core/src/java/org/apache/solr/cloud/api/collections/AddReplicaCmd.java b/solr/core/src/java/org/apache/solr/cloud/api/collections/AddReplicaCmd.java
index 19aa9b9de38..02f6499c778 100644
--- a/solr/core/src/java/org/apache/solr/cloud/api/collections/AddReplicaCmd.java
+++ b/solr/core/src/java/org/apache/solr/cloud/api/collections/AddReplicaCmd.java
@@ -206,6 +206,7 @@ public class AddReplicaCmd implements CollApiCmds.CollectionApiCommand {
           ZkStateReader.CORE_NAME_PROP, createReplica.coreName,
           ZkStateReader.STATE_PROP, Replica.State.DOWN.toString(),
           ZkStateReader.NODE_NAME_PROP, createReplica.node,
+          ZkStateReader.BASE_URL_PROP, zkStateReader.getBaseUrlForNodeName(createReplica.node),
           ZkStateReader.REPLICA_TYPE, createReplica.replicaType.name());
       if (createReplica.coreNodeName != null) {
         props = props.plus(ZkStateReader.CORE_NODE_NAME_PROP, createReplica.coreNodeName);
diff --git a/solr/core/src/java/org/apache/solr/cloud/api/collections/CollApiCmds.java b/solr/core/src/java/org/apache/solr/cloud/api/collections/CollApiCmds.java
index 4c00441a0a0..1c7411d313e 100644
--- a/solr/core/src/java/org/apache/solr/cloud/api/collections/CollApiCmds.java
+++ b/solr/core/src/java/org/apache/solr/cloud/api/collections/CollApiCmds.java
@@ -33,7 +33,6 @@ import org.apache.solr.common.SolrException;
 import org.apache.solr.common.cloud.ClusterState;
 import org.apache.solr.common.cloud.Replica;
 import org.apache.solr.common.cloud.SolrZkClient;
-import org.apache.solr.common.cloud.UrlScheme;
 import org.apache.solr.common.cloud.ZkNodeProps;
 import org.apache.solr.common.cloud.ZkStateReader;
 import org.apache.solr.common.params.CollectionParams;
@@ -199,7 +198,7 @@ public class CollApiCmds {
       params.set(ELECTION_NODE_PROP, message.getStr(ELECTION_NODE_PROP));
       params.set(NODE_NAME_PROP, message.getStr(NODE_NAME_PROP));
 
-      String baseUrl = UrlScheme.INSTANCE.getBaseUrlForNodeName(message.getStr(NODE_NAME_PROP));
+      String baseUrl = ccc.getZkStateReader().getBaseUrlForNodeName(message.getStr(NODE_NAME_PROP));
       ShardRequest sreq = new ShardRequest();
       sreq.nodeName = message.getStr(ZkStateReader.CORE_NAME_PROP);
       // yes, they must use same admin handler path everywhere...
diff --git a/solr/core/src/java/org/apache/solr/cloud/api/collections/CreateCollectionCmd.java b/solr/core/src/java/org/apache/solr/cloud/api/collections/CreateCollectionCmd.java
index 60a5bb8fae9..14644ec4ae3 100644
--- a/solr/core/src/java/org/apache/solr/cloud/api/collections/CreateCollectionCmd.java
+++ b/solr/core/src/java/org/apache/solr/cloud/api/collections/CreateCollectionCmd.java
@@ -248,6 +248,7 @@ public class CreateCollectionCmd implements CollApiCmds.CollectionApiCommand {
             ZkStateReader.CORE_NAME_PROP, coreName,
             ZkStateReader.STATE_PROP, Replica.State.DOWN.toString(),
             ZkStateReader.NODE_NAME_PROP, nodeName,
+            ZkStateReader.BASE_URL_PROP, baseUrl,
             ZkStateReader.REPLICA_TYPE, replicaPosition.type.name(),
             CommonAdminParams.WAIT_FOR_FINAL_STATE, Boolean.toString(waitForFinalState));
         if (isPRS) {
diff --git a/solr/core/src/java/org/apache/solr/cloud/api/collections/SplitShardCmd.java b/solr/core/src/java/org/apache/solr/cloud/api/collections/SplitShardCmd.java
index 043862d9b0c..81f30df4dff 100644
--- a/solr/core/src/java/org/apache/solr/cloud/api/collections/SplitShardCmd.java
+++ b/solr/core/src/java/org/apache/solr/cloud/api/collections/SplitShardCmd.java
@@ -469,6 +469,7 @@ public class SplitShardCmd implements CollApiCmds.CollectionApiCommand {
             ZkStateReader.REPLICA_TYPE, replicaPosition.type.name(),
             ZkStateReader.STATE_PROP, Replica.State.DOWN.toString(),
             ZkStateReader.NODE_NAME_PROP, subShardNodeName,
+            ZkStateReader.BASE_URL_PROP, zkStateReader.getBaseUrlForNodeName(subShardNodeName),
             CommonAdminParams.WAIT_FOR_FINAL_STATE, Boolean.toString(waitForFinalState));
         if (ccc.getDistributedClusterStateUpdater().isDistributedStateUpdate()) {
           hasRecordedDistributedUpdate = true;
diff --git a/solr/core/src/java/org/apache/solr/cloud/overseer/ReplicaMutator.java b/solr/core/src/java/org/apache/solr/cloud/overseer/ReplicaMutator.java
index 96efbb81716..be91ba86a01 100644
--- a/solr/core/src/java/org/apache/solr/cloud/overseer/ReplicaMutator.java
+++ b/solr/core/src/java/org/apache/solr/cloud/overseer/ReplicaMutator.java
@@ -44,6 +44,7 @@ import org.apache.solr.common.cloud.Replica;
 import org.apache.solr.common.cloud.PerReplicaStates;
 import org.apache.solr.common.cloud.Slice;
 import org.apache.solr.common.cloud.SolrZkClient;
+import org.apache.solr.common.util.Utils;
 import org.apache.solr.common.cloud.ZkNodeProps;
 import org.apache.solr.common.cloud.ZkStateReader;
 import org.apache.solr.common.params.CollectionAdminParams;
@@ -351,7 +352,11 @@ public class ReplicaMutator {
     String shardState = (String) replicaProps.remove(ZkStateReader.SHARD_STATE_PROP);
     String shardParent = (String) replicaProps.remove(ZkStateReader.SHARD_PARENT_PROP);
 
-
+    String nodeName = (String)replicaProps.get(ZkStateReader.NODE_NAME_PROP);
+    if (nodeName != null) {
+      String baseUrl = Utils.getBaseUrlForNodeName(nodeName, cloudManager.getClusterStateProvider().getClusterProperty(ZkStateReader.URL_SCHEME, "http"));
+      replicaProps.put(ZkStateReader.BASE_URL_PROP, baseUrl);
+    }
     Replica replica = new Replica(coreNodeName, replicaProps, collectionName, sliceName);
 
     log.debug("Will update state for replica: {}", replica);
diff --git a/solr/core/src/java/org/apache/solr/cloud/overseer/SliceMutator.java b/solr/core/src/java/org/apache/solr/cloud/overseer/SliceMutator.java
index 59d63043bc2..4a034d3f81b 100644
--- a/solr/core/src/java/org/apache/solr/cloud/overseer/SliceMutator.java
+++ b/solr/core/src/java/org/apache/solr/cloud/overseer/SliceMutator.java
@@ -89,10 +89,13 @@ public class SliceMutator {
     } else {
       coreNodeName = Assign.assignCoreNodeName(stateManager, collection);
     }
+    String nodeName = message.getStr(ZkStateReader.NODE_NAME_PROP);
+    String baseUrl = Utils.getBaseUrlForNodeName(nodeName, cloudManager.getClusterStateProvider().getClusterProperty(ZkStateReader.URL_SCHEME, "http"));
     Replica replica = new Replica(coreNodeName, Utils.makeMap(
             ZkStateReader.CORE_NAME_PROP, message.getStr(ZkStateReader.CORE_NAME_PROP),
             ZkStateReader.STATE_PROP, message.getStr(ZkStateReader.STATE_PROP),
-            ZkStateReader.NODE_NAME_PROP, message.getStr(ZkStateReader.NODE_NAME_PROP), 
+            ZkStateReader.NODE_NAME_PROP, nodeName,
+            ZkStateReader.BASE_URL_PROP, baseUrl,
             ZkStateReader.REPLICA_TYPE, message.get(ZkStateReader.REPLICA_TYPE)), coll, slice);
 
     if (collection.isPerReplicaState()) {
@@ -138,7 +141,7 @@ public class SliceMutator {
   }
 
   public ZkWriteCommand setShardLeader(ClusterState clusterState, ZkNodeProps message) {
-    String leaderUrl = ZkCoreNodeProps.getCoreUrl(message);
+    String leaderUrl = message.getStr(ZkStateReader.BASE_URL_PROP) != null ? ZkCoreNodeProps.getCoreUrl(message) : null;
     String collectionName = message.getStr(ZkStateReader.COLLECTION_PROP);
     String sliceName = message.getStr(ZkStateReader.SHARD_ID_PROP);
     DocCollection coll = clusterState.getCollectionOrNull(collectionName);
diff --git a/solr/core/src/java/org/apache/solr/core/ZkContainer.java b/solr/core/src/java/org/apache/solr/core/ZkContainer.java
index 0fb50093540..1b7289559a4 100644
--- a/solr/core/src/java/org/apache/solr/core/ZkContainer.java
+++ b/solr/core/src/java/org/apache/solr/core/ZkContainer.java
@@ -16,10 +16,8 @@
  */
 package org.apache.solr.core;
 
-import static org.apache.solr.common.cloud.UrlScheme.HTTP;
-import static org.apache.solr.common.cloud.UrlScheme.HTTPS;
-import static org.apache.solr.common.cloud.UrlScheme.HTTPS_PORT_PROP;
-import static org.apache.solr.common.cloud.ZkStateReader.URL_SCHEME;
+import static org.apache.solr.common.cloud.ZkStateReader.HTTPS;
+import static org.apache.solr.common.cloud.ZkStateReader.HTTPS_PORT_PROP;
 
 import java.io.File;
 import java.io.IOException;
@@ -39,7 +37,6 @@ import org.apache.solr.common.AlreadyClosedException;
 import org.apache.solr.common.SolrException;
 import org.apache.solr.common.cloud.ClusterProperties;
 import org.apache.solr.common.cloud.Replica;
-import org.apache.solr.common.cloud.UrlScheme;
 import org.apache.solr.common.cloud.ZkStateReader;
 import org.apache.solr.common.cloud.ZooKeeperException;
 import org.apache.solr.common.util.ExecutorUtil;
@@ -136,9 +133,6 @@ public class ZkContainer {
           if (StringUtils.isNotEmpty(System.getProperty(HTTPS_PORT_PROP))) {
             // Embedded ZK and probably running with SSL
             new ClusterProperties(zkController.getZkClient()).setClusterProperty(ZkStateReader.URL_SCHEME, HTTPS);
-            UrlScheme.INSTANCE.setUrlScheme(HTTPS);
-          } else {
-            UrlScheme.INSTANCE.setUrlScheme(System.getProperty(URL_SCHEME, HTTP));
           }
         }
 
diff --git a/solr/core/src/java/org/apache/solr/handler/admin/ClusterStatus.java b/solr/core/src/java/org/apache/solr/handler/admin/ClusterStatus.java
index 423a8ce53a0..52f2c780160 100644
--- a/solr/core/src/java/org/apache/solr/handler/admin/ClusterStatus.java
+++ b/solr/core/src/java/org/apache/solr/handler/admin/ClusterStatus.java
@@ -34,7 +34,6 @@ import org.apache.solr.common.cloud.DocCollection;
 import org.apache.solr.common.cloud.DocRouter;
 import org.apache.solr.common.cloud.Replica;
 import org.apache.solr.common.cloud.Slice;
-import org.apache.solr.common.cloud.UrlScheme;
 import org.apache.solr.common.cloud.ZkNodeProps;
 import org.apache.solr.common.cloud.ZkStateReader;
 import org.apache.solr.common.params.ShardParams;
@@ -302,11 +301,6 @@ public class ClusterStatus {
         if ("true".equals(r.get("leader")) && active) {
           hasLeader = true;
         }
-        String nodeName = (String)r.get(ZkStateReader.NODE_NAME_PROP);
-        if (nodeName != null) {
-          // UI needs the base_url set
-          r.put(ZkStateReader.BASE_URL_PROP, UrlScheme.INSTANCE.getBaseUrlForNodeName(nodeName));
-        }
       }
       float ratioActive;
       if (totalVsActive[0] == 0) {
diff --git a/solr/core/src/java/org/apache/solr/handler/admin/RebalanceLeaders.java b/solr/core/src/java/org/apache/solr/handler/admin/RebalanceLeaders.java
index 94ad0d6fa27..46391b9a434 100644
--- a/solr/core/src/java/org/apache/solr/handler/admin/RebalanceLeaders.java
+++ b/solr/core/src/java/org/apache/solr/handler/admin/RebalanceLeaders.java
@@ -408,6 +408,7 @@ class RebalanceLeaders {
     propMap.put(CORE_NAME_PROP, core);
     propMap.put(CORE_NODE_NAME_PROP, replica.getName());
     propMap.put(ZkStateReader.NODE_NAME_PROP, replica.getNodeName());
+    propMap.put(ZkStateReader.BASE_URL_PROP, coreContainer.getZkController().getZkStateReader().getBaseUrlForNodeName(replica.getNodeName()));
     propMap.put(REJOIN_AT_HEAD_PROP, Boolean.toString(rejoinAtHead)); // Get ourselves to be first in line.
     propMap.put(ELECTION_NODE_PROP, electionNode);
     String asyncId = rebalanceleaders.toLower() + "_" + core + "_" + Math.abs(System.nanoTime());
diff --git a/solr/core/src/java/org/apache/solr/handler/admin/RequestSyncShardOp.java b/solr/core/src/java/org/apache/solr/handler/admin/RequestSyncShardOp.java
index 8aae420e9fb..12b401a6dd9 100644
--- a/solr/core/src/java/org/apache/solr/handler/admin/RequestSyncShardOp.java
+++ b/solr/core/src/java/org/apache/solr/handler/admin/RequestSyncShardOp.java
@@ -61,6 +61,7 @@ class RequestSyncShardOp implements CoreAdminHandler.CoreAdminOp {
         Map<String, Object> props = new HashMap<>();
         props.put(ZkStateReader.CORE_NAME_PROP, cname);
         props.put(ZkStateReader.NODE_NAME_PROP, zkController.getNodeName());
+        props.put(ZkStateReader.BASE_URL_PROP, zkController.getZkStateReader().getBaseUrlForNodeName(zkController.getNodeName()));
 
         boolean success = syncStrategy.sync(zkController, core, new ZkNodeProps(props), true).isSuccess();
         // solrcloud_debug
diff --git a/solr/core/src/java/org/apache/solr/handler/admin/SystemInfoHandler.java b/solr/core/src/java/org/apache/solr/handler/admin/SystemInfoHandler.java
index 7589e8de575..282b41241f4 100644
--- a/solr/core/src/java/org/apache/solr/handler/admin/SystemInfoHandler.java
+++ b/solr/core/src/java/org/apache/solr/handler/admin/SystemInfoHandler.java
@@ -20,7 +20,7 @@ import com.codahale.metrics.Gauge;
 import org.apache.lucene.util.Version;
 import org.apache.solr.api.AnnotatedApi;
 import org.apache.solr.api.Api;
-import org.apache.solr.common.cloud.UrlScheme;
+import org.apache.solr.common.cloud.ZkStateReader;
 import org.apache.solr.common.util.SimpleOrderedMap;
 import org.apache.solr.core.CoreContainer;
 import org.apache.solr.core.SolrCore;
@@ -357,7 +357,10 @@ public class SystemInfoHandler extends RequestHandlerBase
       }
     }
 
-    info.add("tls", UrlScheme.HTTPS.equals(UrlScheme.INSTANCE.getUrlScheme()));
+    if (cc != null && cc.getZkController() != null) {
+      String urlScheme = cc.getZkController().zkStateReader.getClusterProperty(ZkStateReader.BASE_URL_PROP, "http");
+      info.add("tls", ZkStateReader.HTTPS.equals(urlScheme));
+    }
 
     return info;
   }
diff --git a/solr/core/src/java/org/apache/solr/handler/designer/SchemaDesignerConfigSetHelper.java b/solr/core/src/java/org/apache/solr/handler/designer/SchemaDesignerConfigSetHelper.java
index 8fd476d187a..66cc8feb04e 100644
--- a/solr/core/src/java/org/apache/solr/handler/designer/SchemaDesignerConfigSetHelper.java
+++ b/solr/core/src/java/org/apache/solr/handler/designer/SchemaDesignerConfigSetHelper.java
@@ -73,7 +73,6 @@ import org.apache.solr.common.cloud.ClusterState;
 import org.apache.solr.common.cloud.DocCollection;
 import org.apache.solr.common.cloud.Replica;
 import org.apache.solr.common.cloud.SolrZkClient;
-import org.apache.solr.common.cloud.UrlScheme;
 import org.apache.solr.common.cloud.ZkMaintenanceUtils;
 import org.apache.solr.common.cloud.ZkStateReader;
 import org.apache.solr.common.params.CommonParams;
@@ -545,7 +544,7 @@ class SchemaDesignerConfigSetHelper implements SchemaDesignerConstants {
     }
 
     if (baseUrl == null) {
-      baseUrl = UrlScheme.INSTANCE.getBaseUrlForNodeName(cc.getZkController().getNodeName());
+      baseUrl = zkStateReader().getBaseUrlForNodeName(cc.getZkController().getNodeName());
     }
 
     return baseUrl;
diff --git a/solr/core/src/java/org/apache/solr/util/SolrCLI.java b/solr/core/src/java/org/apache/solr/util/SolrCLI.java
index 068f5bd9d20..4ace40152da 100755
--- a/solr/core/src/java/org/apache/solr/util/SolrCLI.java
+++ b/solr/core/src/java/org/apache/solr/util/SolrCLI.java
@@ -63,7 +63,6 @@ import org.apache.solr.common.cloud.DocCollection;
 import org.apache.solr.common.cloud.Replica;
 import org.apache.solr.common.cloud.Slice;
 import org.apache.solr.common.cloud.SolrZkClient;
-import org.apache.solr.common.cloud.UrlScheme;
 import org.apache.solr.common.cloud.ZkCoreNodeProps;
 import org.apache.solr.common.cloud.ZkMaintenanceUtils;
 import org.apache.solr.common.cloud.ZkStateReader;
@@ -2730,7 +2729,6 @@ public class SolrCLI implements CLIO {
 
     protected void runImpl(CommandLine cli) throws Exception {
       this.urlScheme = cli.getOptionValue("urlScheme", "http");
-      UrlScheme.INSTANCE.setUrlScheme(this.urlScheme);
 
       serverDir = new File(cli.getOptionValue("serverDir"));
       if (!serverDir.isDirectory())
diff --git a/solr/core/src/test/org/apache/solr/cloud/ClusterStateMockUtil.java b/solr/core/src/test/org/apache/solr/cloud/ClusterStateMockUtil.java
index 297ec4f1d2f..7b242e22739 100644
--- a/solr/core/src/test/org/apache/solr/cloud/ClusterStateMockUtil.java
+++ b/solr/core/src/test/org/apache/solr/cloud/ClusterStateMockUtil.java
@@ -230,6 +230,7 @@ public class ClusterStateMockUtil {
     int port = 8982 + Integer.parseInt(node);
     String nodeName = String.format(Locale.ROOT, "baseUrl%s:%d_", node, port);
     replicaPropMap.put(ZkStateReader.NODE_NAME_PROP, nodeName);
+    replicaPropMap.put(ZkStateReader.BASE_URL_PROP, Utils.getBaseUrlForNodeName(nodeName, "http"));
     replicaPropMap.put(ZkStateReader.STATE_PROP, state.toString());
     replicaPropMap.put(ZkStateReader.CORE_NAME_PROP, sliceName + "_" + replicaName);
     replicaPropMap.put(ZkStateReader.REPLICA_TYPE, replicaType.name());
diff --git a/solr/core/src/test/org/apache/solr/cloud/ClusterStateTest.java b/solr/core/src/test/org/apache/solr/cloud/ClusterStateTest.java
index a8a13ec19ae..71f0007bdcc 100644
--- a/solr/core/src/test/org/apache/solr/cloud/ClusterStateTest.java
+++ b/solr/core/src/test/org/apache/solr/cloud/ClusterStateTest.java
@@ -32,6 +32,7 @@ import org.apache.solr.common.util.Utils;
 import org.apache.solr.handler.admin.ConfigSetsHandler;
 import org.junit.Test;
 
+@SolrTestCaseJ4.SuppressSSL
 public class ClusterStateTest extends SolrTestCaseJ4 {
 
   @Test
@@ -44,8 +45,10 @@ public class ClusterStateTest extends SolrTestCaseJ4 {
     Map<String,Slice> slices = new HashMap<>();
     Map<String,Replica> sliceToProps = new HashMap<>();
     Map<String,Object> props = new HashMap<>();
-    props.put("node_name", "node1:10000_solr");
-    props.put("core", "core1");
+    String nodeName = "node1:10000_solr";
+    props.put(ZkStateReader.NODE_NAME_PROP, nodeName);
+    props.put(ZkStateReader.BASE_URL_PROP, Utils.getBaseUrlForNodeName(nodeName, "http"));
+    props.put(ZkStateReader.CORE_NAME_PROP, "core1");
 
     props.put("prop1", "value");
     props.put("prop2", "value2");
diff --git a/solr/core/src/test/org/apache/solr/cloud/DeleteReplicaTest.java b/solr/core/src/test/org/apache/solr/cloud/DeleteReplicaTest.java
index 31c1deb9abc..3255a3cde09 100644
--- a/solr/core/src/test/org/apache/solr/cloud/DeleteReplicaTest.java
+++ b/solr/core/src/test/org/apache/solr/cloud/DeleteReplicaTest.java
@@ -242,6 +242,7 @@ public class DeleteReplicaTest extends SolrCloudTestCase {
         Overseer.QUEUE_OPERATION, OverseerAction.DELETECORE.toLower(),
         ZkStateReader.CORE_NAME_PROP, replica.getCoreName(),
         ZkStateReader.NODE_NAME_PROP, replica.getNodeName(),
+        ZkStateReader.BASE_URL_PROP, replicaZkController.getZkStateReader().getBaseUrlForNodeName(replica.getNodeName()),
         ZkStateReader.COLLECTION_PROP, collectionName,
         ZkStateReader.CORE_NODE_NAME_PROP, replica.getName());
 
@@ -315,6 +316,7 @@ public class DeleteReplicaTest extends SolrCloudTestCase {
               Overseer.QUEUE_OPERATION, OverseerAction.DELETECORE.toLower(),
               ZkStateReader.CORE_NAME_PROP, replica1.getCoreName(),
               ZkStateReader.NODE_NAME_PROP, replica1.getNodeName(),
+              ZkStateReader.BASE_URL_PROP, replica1ZkController.getZkStateReader().getBaseUrlForNodeName(replica1.getNodeName()),
               ZkStateReader.COLLECTION_PROP, collectionName,
               ZkStateReader.CORE_NODE_NAME_PROP, replica1.getName());
 
diff --git a/solr/core/src/test/org/apache/solr/cloud/LeaderElectionTest.java b/solr/core/src/test/org/apache/solr/cloud/LeaderElectionTest.java
index 294f7c2a218..d542edf15a7 100644
--- a/solr/core/src/test/org/apache/solr/cloud/LeaderElectionTest.java
+++ b/solr/core/src/test/org/apache/solr/cloud/LeaderElectionTest.java
@@ -32,7 +32,7 @@ import org.apache.lucene.util.LuceneTestCase.Slow;
 import org.apache.solr.SolrTestCaseJ4;
 import org.apache.solr.common.cloud.OnReconnect;
 import org.apache.solr.common.cloud.SolrZkClient;
-import org.apache.solr.common.cloud.UrlScheme;
+import org.apache.solr.common.util.Utils;
 import org.apache.solr.common.cloud.ZkCoreNodeProps;
 import org.apache.solr.common.cloud.ZkNodeProps;
 import org.apache.solr.common.cloud.ZkStateReader;
@@ -46,6 +46,8 @@ import org.junit.Test;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 
+import static org.apache.solr.common.cloud.ZkStateReader.URL_SCHEME;
+
 @Slow
 public class LeaderElectionTest extends SolrTestCaseJ4 {
 
@@ -144,10 +146,10 @@ public class LeaderElectionTest extends SolrTestCaseJ4 {
     public ClientThread(ElectorSetup es, String shard, int nodeNumber, long runLeaderDelay) throws Exception {
       super("Thread-" + shard + nodeNumber);
       this.shard = shard;
-      this.nodeName = shard + nodeNumber;
+      this.nodeName = shard + nodeNumber + ":80_solr";
       this.runLeaderDelay = runLeaderDelay;
 
-      props = new ZkNodeProps(ZkStateReader.BASE_URL_PROP, Integer.toString(nodeNumber), ZkStateReader.CORE_NAME_PROP, "");
+      props = new ZkNodeProps(ZkStateReader.NODE_NAME_PROP, this.nodeName, ZkStateReader.BASE_URL_PROP, Integer.toString(nodeNumber), ZkStateReader.CORE_NAME_PROP, "");
 
       this.es = es;
       if (this.es == null) {
@@ -205,23 +207,26 @@ public class LeaderElectionTest extends SolrTestCaseJ4 {
   @Test
   public void testBasic() throws Exception {
     LeaderElector elector = new LeaderElector(zkClient);
-    ZkNodeProps props = new ZkNodeProps(ZkStateReader.BASE_URL_PROP,
-        UrlScheme.INSTANCE.applyUrlScheme("http://127.0.0.1/solr/"), ZkStateReader.CORE_NAME_PROP, "");
     ZkController zkController = MockSolrSource.makeSimpleMock(null, null, zkClient);
+    String nodeName = "127.0.0.1:80_solr";
+    ZkNodeProps props = new ZkNodeProps(ZkStateReader.NODE_NAME_PROP, nodeName, ZkStateReader.BASE_URL_PROP,
+        zkStateReader.getBaseUrlForNodeName(nodeName), ZkStateReader.CORE_NAME_PROP, "");
+
     ElectionContext context = new ShardLeaderElectionContextBase(elector,
         "shard2", "collection1", "dummynode1", props, zkController);
     elector.setup(context);
     elector.joinElection(context, false);
-    assertEquals(UrlScheme.INSTANCE.getUrlScheme() + "://127.0.0.1/solr/",
-        getLeaderUrl("collection1", "shard2"));
+    String urlScheme = zkStateReader.getClusterProperty(URL_SCHEME, "http");
+    assertEquals(urlScheme + "://127.0.0.1:80/solr/", getLeaderUrl("collection1", "shard2"));
   }
 
   @Test
   public void testCancelElection() throws Exception {
-    UrlScheme u = UrlScheme.INSTANCE;
     LeaderElector first = new LeaderElector(zkClient);
-    ZkNodeProps props = new ZkNodeProps(ZkStateReader.BASE_URL_PROP,
-        u.applyUrlScheme("http://127.0.0.1/solr/"), ZkStateReader.CORE_NAME_PROP, "1");
+    String nodeName = "127.0.0.1:80_solr";
+
+    ZkNodeProps props = new ZkNodeProps(ZkStateReader.NODE_NAME_PROP, nodeName, ZkStateReader.BASE_URL_PROP,
+        zkStateReader.getBaseUrlForNodeName(nodeName), ZkStateReader.CORE_NAME_PROP, "1");
     ZkController zkController = MockSolrSource.makeSimpleMock(null, null, zkClient);
     ElectionContext firstContext = new ShardLeaderElectionContextBase(first,
         "slice1", "collection2", "dummynode1", props, zkController);
@@ -230,14 +235,15 @@ public class LeaderElectionTest extends SolrTestCaseJ4 {
 
     Thread.sleep(1000);
 
-    String url1 = u.applyUrlScheme("http://127.0.0.1/solr/1/");
-    String url2 = u.applyUrlScheme("http://127.0.0.1/solr/2/");
+    String urlScheme = zkStateReader.getClusterProperty(URL_SCHEME, "http");
+    String url1 = Utils.getBaseUrlForNodeName("127.0.0.1:80_solr/1", urlScheme) + "/";
+    String url2 = Utils.getBaseUrlForNodeName("127.0.0.1:80_solr/2", urlScheme) + "/";
 
     assertEquals("original leader was not registered", url1, getLeaderUrl("collection2", "slice1"));
 
     LeaderElector second = new LeaderElector(zkClient);
-    props = new ZkNodeProps(ZkStateReader.BASE_URL_PROP,
-        u.applyUrlScheme("http://127.0.0.1/solr/"), ZkStateReader.CORE_NAME_PROP, "2");
+    props = new ZkNodeProps(ZkStateReader.NODE_NAME_PROP, nodeName, ZkStateReader.BASE_URL_PROP,
+        zkStateReader.getBaseUrlForNodeName(nodeName), ZkStateReader.CORE_NAME_PROP, "2");
     zkController = MockSolrSource.makeSimpleMock(null, null, zkClient);
     ElectionContext context = new ShardLeaderElectionContextBase(second,
         "slice1", "collection2", "dummynode2", props, zkController);
diff --git a/solr/core/src/test/org/apache/solr/cloud/LeaderVoteWaitTimeoutTest.java b/solr/core/src/test/org/apache/solr/cloud/LeaderVoteWaitTimeoutTest.java
index d873235057a..3c3f48faff8 100644
--- a/solr/core/src/test/org/apache/solr/cloud/LeaderVoteWaitTimeoutTest.java
+++ b/solr/core/src/test/org/apache/solr/cloud/LeaderVoteWaitTimeoutTest.java
@@ -37,6 +37,7 @@ import org.apache.solr.client.solrj.request.QueryRequest;
 import org.apache.solr.common.SolrInputDocument;
 import org.apache.solr.common.cloud.Replica;
 import org.apache.solr.common.cloud.ZkCoreNodeProps;
+import org.apache.solr.common.cloud.ZkStateReader;
 import org.apache.solr.common.util.NamedList;
 import org.junit.After;
 import org.junit.AfterClass;
@@ -46,6 +47,9 @@ import org.junit.Test;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 
+import static org.apache.solr.common.cloud.ZkStateReader.HTTP;
+import static org.apache.solr.common.cloud.ZkStateReader.URL_SCHEME;
+
 public class LeaderVoteWaitTimeoutTest extends SolrCloudTestCase {
 
   private static final Logger log = LoggerFactory.getLogger(MethodHandles.lookup().lookupClass());
@@ -63,7 +67,7 @@ public class LeaderVoteWaitTimeoutTest extends SolrCloudTestCase {
     System.setProperty("distribUpdateConnTimeout", "5000");
     System.setProperty("solr.httpclient.retries", "0");
     System.setProperty("solr.retries.on.forward", "0");
-    System.setProperty("solr.retries.to.followers", "0"); 
+    System.setProperty("solr.retries.to.followers", "0");
   }
 
   @AfterClass
@@ -80,6 +84,7 @@ public class LeaderVoteWaitTimeoutTest extends SolrCloudTestCase {
   @Before
   public void setupTest() throws Exception {
     configureCluster(NODE_COUNT)
+        .withProperty(ZkStateReader.URL_SCHEME, System.getProperty(URL_SCHEME, HTTP))
         .addConfig("conf", configset("cloud-minimal"))
         .configure();
 
diff --git a/solr/core/src/test/org/apache/solr/cloud/OverseerTest.java b/solr/core/src/test/org/apache/solr/cloud/OverseerTest.java
index c2d92e06e27..dfaa9c8a671 100644
--- a/solr/core/src/test/org/apache/solr/cloud/OverseerTest.java
+++ b/solr/core/src/test/org/apache/solr/cloud/OverseerTest.java
@@ -213,6 +213,7 @@ public class OverseerTest extends SolrTestCaseJ4 {
         }
         ZkNodeProps m = new ZkNodeProps(Overseer.QUEUE_OPERATION, OverseerAction.DELETECORE.toLower(),
             ZkStateReader.NODE_NAME_PROP, nodeName,
+            ZkStateReader.BASE_URL_PROP, zkStateReader.getBaseUrlForNodeName(nodeName),
             ZkStateReader.CORE_NAME_PROP, coreName,
             ZkStateReader.CORE_NODE_NAME_PROP, coreNodeName,
             ZkStateReader.COLLECTION_PROP, collection);
@@ -224,6 +225,7 @@ public class OverseerTest extends SolrTestCaseJ4 {
         ZkNodeProps m = new ZkNodeProps(Overseer.QUEUE_OPERATION, OverseerAction.STATE.toLower(),
             ZkStateReader.STATE_PROP, stateName.toString(),
             ZkStateReader.NODE_NAME_PROP, nodeName,
+            ZkStateReader.BASE_URL_PROP, zkStateReader.getBaseUrlForNodeName(nodeName),
             ZkStateReader.CORE_NAME_PROP, coreName,
             ZkStateReader.CORE_NODE_NAME_PROP, coreNodeName,
             ZkStateReader.COLLECTION_PROP, collection,
@@ -248,6 +250,7 @@ public class OverseerTest extends SolrTestCaseJ4 {
                 + shardId + "/election", true);
           } catch (NodeExistsException nee) {}
           ZkNodeProps props = new ZkNodeProps(ZkStateReader.NODE_NAME_PROP, nodeName,
+              ZkStateReader.BASE_URL_PROP, zkStateReader.getBaseUrlForNodeName(nodeName),
               ZkStateReader.CORE_NAME_PROP, coreName,
               ZkStateReader.SHARD_ID_PROP, shardId,
               ZkStateReader.COLLECTION_PROP, collection,
diff --git a/solr/core/src/test/org/apache/solr/cloud/SliceStateTest.java b/solr/core/src/test/org/apache/solr/cloud/SliceStateTest.java
index 8c2d5c3cf6b..42b7710318a 100644
--- a/solr/core/src/test/org/apache/solr/cloud/SliceStateTest.java
+++ b/solr/core/src/test/org/apache/solr/cloud/SliceStateTest.java
@@ -32,6 +32,7 @@ import org.apache.solr.common.util.Utils;
 import org.apache.solr.handler.admin.ConfigSetsHandler;
 import org.junit.Test;
 
+@SolrTestCaseJ4.SuppressSSL
 public class SliceStateTest extends SolrTestCaseJ4 {
   
   @Test
@@ -43,8 +44,10 @@ public class SliceStateTest extends SolrTestCaseJ4 {
     Map<String, Slice> slices = new HashMap<>();
     Map<String, Replica> sliceToProps = new HashMap<>();
     Map<String, Object> props = new HashMap<>();
-    props.put("node_name", "127.0.0.1:10000_solr");
-    props.put("core", "core1");
+    String nodeName = "127.0.0.1:10000_solr";
+    props.put(ZkStateReader.NODE_NAME_PROP, nodeName);
+    props.put(ZkStateReader.BASE_URL_PROP, Utils.getBaseUrlForNodeName(nodeName, "http"));
+    props.put(ZkStateReader.CORE_NAME_PROP, "core1");
     props.put(ZkStateReader.CONFIGNAME_PROP, ConfigSetsHandler.DEFAULT_CONFIGSET_NAME);
 
     Replica replica = new Replica("node1", props, "collection1", "shard1");
diff --git a/solr/core/src/test/org/apache/solr/cloud/TestMiniSolrCloudClusterSSL.java b/solr/core/src/test/org/apache/solr/cloud/TestMiniSolrCloudClusterSSL.java
index ffe0f7b40e3..4c455372983 100644
--- a/solr/core/src/test/org/apache/solr/cloud/TestMiniSolrCloudClusterSSL.java
+++ b/solr/core/src/test/org/apache/solr/cloud/TestMiniSolrCloudClusterSSL.java
@@ -45,7 +45,6 @@ import org.apache.solr.client.solrj.impl.HttpClientUtil;
 import org.apache.solr.client.solrj.impl.HttpSolrClient;
 import org.apache.solr.client.solrj.request.CollectionAdminRequest;
 import org.apache.solr.client.solrj.request.CoreAdminRequest;
-import org.apache.solr.common.cloud.UrlScheme;
 import org.apache.solr.common.cloud.ZkStateReader;
 import org.apache.solr.common.params.CoreAdminParams.CoreAdminAction;
 import org.apache.solr.util.SSLTestConfig;
@@ -105,7 +104,6 @@ public class TestMiniSolrCloudClusterSSL extends SolrTestCaseJ4 {
     HttpClientUtil.setSocketFactoryRegistryProvider(sslConfig.buildClientSocketFactoryRegistryProvider());
     Http2SolrClient.setDefaultSSLConfig(sslConfig.buildClientSSLConfig());
     System.setProperty(ZkStateReader.URL_SCHEME, "http");
-    UrlScheme.INSTANCE.setUrlScheme(UrlScheme.HTTP);
     checkClusterWithNodeReplacement(sslConfig);
   }
   
@@ -117,7 +115,6 @@ public class TestMiniSolrCloudClusterSSL extends SolrTestCaseJ4 {
     HttpClientUtil.setSocketFactoryRegistryProvider(sslConfig.buildClientSocketFactoryRegistryProvider());
     Http2SolrClient.setDefaultSSLConfig(sslConfig.buildClientSSLConfig());
     System.setProperty(ZkStateReader.URL_SCHEME, "http");
-    UrlScheme.INSTANCE.setUrlScheme(UrlScheme.HTTP);
     checkClusterWithNodeReplacement(sslConfig);
   }
   
diff --git a/solr/core/src/test/org/apache/solr/cloud/TestRandomRequestDistribution.java b/solr/core/src/test/org/apache/solr/cloud/TestRandomRequestDistribution.java
index 3eac4c612ce..c4e07743b76 100644
--- a/solr/core/src/test/org/apache/solr/cloud/TestRandomRequestDistribution.java
+++ b/solr/core/src/test/org/apache/solr/cloud/TestRandomRequestDistribution.java
@@ -172,6 +172,7 @@ public class TestRandomRequestDistribution extends AbstractFullDistribZkTestBase
     //Simulate a replica being in down state.
     ZkNodeProps m = new ZkNodeProps(Overseer.QUEUE_OPERATION, OverseerAction.STATE.toLower(),
         ZkStateReader.NODE_NAME_PROP, notLeader.getStr(ZkStateReader.NODE_NAME_PROP),
+        ZkStateReader.BASE_URL_PROP, notLeader.getStr(ZkStateReader.BASE_URL_PROP),
         ZkStateReader.COLLECTION_PROP, "football",
         ZkStateReader.SHARD_ID_PROP, "shard1",
         ZkStateReader.CORE_NAME_PROP, notLeader.getStr(ZkStateReader.CORE_NAME_PROP),
diff --git a/solr/core/src/test/org/apache/solr/core/CoreSorterTest.java b/solr/core/src/test/org/apache/solr/core/CoreSorterTest.java
index 70fdecc73eb..536443587b8 100644
--- a/solr/core/src/test/org/apache/solr/core/CoreSorterTest.java
+++ b/solr/core/src/test/org/apache/solr/core/CoreSorterTest.java
@@ -34,6 +34,7 @@ import org.apache.solr.common.cloud.DocCollection;
 import org.apache.solr.common.cloud.DocRouter;
 import org.apache.solr.common.cloud.Replica;
 import org.apache.solr.common.cloud.Slice;
+import org.apache.solr.common.util.Utils;
 import org.apache.solr.common.cloud.ZkStateReader;
 import org.apache.solr.core.CoreSorter.CountsForEachShard;
 import org.apache.solr.handler.admin.ConfigSetsHandler;
@@ -42,6 +43,7 @@ import org.junit.Test;
 import static org.mockito.Mockito.mock;
 import static org.mockito.Mockito.when;
 
+@SolrTestCaseJ4.SuppressSSL
 public class CoreSorterTest extends SolrTestCaseJ4 {
 
   private static final List<CountsForEachShard> inputCounts = Arrays.asList(
@@ -195,7 +197,7 @@ public class CoreSorterTest extends SolrTestCaseJ4 {
   protected Replica addNewReplica(List<Replica> replicaList, String collection, String slice, List<String> possibleNodes) {
     String replica = "r" + replicaList.size();
     String node = possibleNodes.get(random().nextInt(possibleNodes.size())); // place on a random node
-    Replica r = new Replica(replica, Map.of("core", replica, "node_name", node), collection, slice);
+    Replica r = new Replica(replica, Map.of(ZkStateReader.CORE_NAME_PROP, replica, ZkStateReader.NODE_NAME_PROP, node, ZkStateReader.BASE_URL_PROP, Utils.getBaseUrlForNodeName(node, "http")), collection, slice);
     replicaList.add(r);
     return r;
   }
diff --git a/solr/solrj/src/java/org/apache/solr/client/solrj/impl/BaseCloudSolrClient.java b/solr/solrj/src/java/org/apache/solr/client/solrj/impl/BaseCloudSolrClient.java
index 3a5049b3c4b..f1ed4951aa1 100644
--- a/solr/solrj/src/java/org/apache/solr/client/solrj/impl/BaseCloudSolrClient.java
+++ b/solr/solrj/src/java/org/apache/solr/client/solrj/impl/BaseCloudSolrClient.java
@@ -71,7 +71,6 @@ import org.apache.solr.common.cloud.DocRouter;
 import org.apache.solr.common.cloud.ImplicitDocRouter;
 import org.apache.solr.common.cloud.Replica;
 import org.apache.solr.common.cloud.Slice;
-import org.apache.solr.common.cloud.UrlScheme;
 import org.apache.solr.common.cloud.ZkCoreNodeProps;
 import org.apache.solr.common.cloud.ZkStateReader;
 import org.apache.solr.common.params.ModifiableSolrParams;
@@ -84,6 +83,7 @@ import org.apache.solr.common.util.NamedList;
 import org.apache.solr.common.util.SimpleOrderedMap;
 import org.apache.solr.common.util.SolrNamedThreadFactory;
 import org.apache.solr.common.util.StrUtils;
+import org.apache.solr.common.util.Utils;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 import org.slf4j.MDC;
@@ -1049,7 +1049,9 @@ public abstract class BaseCloudSolrClient extends SolrClient {
 
     ReplicaListTransformer replicaListTransformer = requestRLTGenerator.getReplicaListTransformer(reqParams);
 
-    final Set<String> liveNodes = getClusterStateProvider().getLiveNodes();
+    final ClusterStateProvider provider = getClusterStateProvider();
+    final String urlScheme = provider.getClusterProperty(ZkStateReader.URL_SCHEME, "http");
+    final Set<String> liveNodes = provider.getLiveNodes();
 
     final List<String> theUrlList = new ArrayList<>(); // we populate this as follows...
 
@@ -1057,12 +1059,12 @@ public abstract class BaseCloudSolrClient extends SolrClient {
       if (!liveNodes.isEmpty()) {
         List<String> liveNodesList = new ArrayList<>(liveNodes);
         Collections.shuffle(liveNodesList, rand);
-        theUrlList.add(UrlScheme.INSTANCE.getBaseUrlForNodeName(liveNodesList.get(0)));
+        theUrlList.add(Utils.getBaseUrlForNodeName(liveNodesList.get(0), urlScheme));
       }
 
     } else if (ADMIN_PATHS.contains(request.getPath())) {
       for (String liveNode : liveNodes) {
-        theUrlList.add(UrlScheme.INSTANCE.getBaseUrlForNodeName(liveNode));
+        theUrlList.add(Utils.getBaseUrlForNodeName(liveNode, urlScheme));
       }
 
     } else { // Typical...
diff --git a/solr/solrj/src/java/org/apache/solr/common/cloud/Replica.java b/solr/solrj/src/java/org/apache/solr/common/cloud/Replica.java
index 2c1c6dfe8c2..b0992fb107e 100644
--- a/solr/solrj/src/java/org/apache/solr/common/cloud/Replica.java
+++ b/solr/solrj/src/java/org/apache/solr/common/cloud/Replica.java
@@ -153,8 +153,6 @@ public class Replica extends ZkNodeProps implements MapWriter {
     // default to ACTIVE
     this.state = State.getState(String.valueOf(propMap.getOrDefault(ZkStateReader.STATE_PROP, State.ACTIVE.toString())));
     validate();
-
-    propMap.put(BASE_URL_PROP, UrlScheme.INSTANCE.getBaseUrlForNodeName(this.node));
   }
 
   // clone constructor
@@ -173,7 +171,6 @@ public class Replica extends ZkNodeProps implements MapWriter {
     }
     readPrs();
     validate();
-    propMap.put(BASE_URL_PROP, UrlScheme.INSTANCE.getBaseUrlForNodeName(this.node));
   }
 
   /**
@@ -197,7 +194,6 @@ public class Replica extends ZkNodeProps implements MapWriter {
     type = Replica.Type.valueOf(String.valueOf(propMap.getOrDefault(ZkStateReader.REPLICA_TYPE, "NRT")));
     if(state == null) state = State.getState(String.valueOf(propMap.getOrDefault(ZkStateReader.STATE_PROP, "active")));
     validate();
-    propMap.put(BASE_URL_PROP, UrlScheme.INSTANCE.getBaseUrlForNodeName(this.node));
   }
 
   private void readPrs() {
@@ -219,6 +215,10 @@ public class Replica extends ZkNodeProps implements MapWriter {
     Objects.requireNonNull(this.type, "'type' must not be null");
     Objects.requireNonNull(this.state, "'state' must not be null");
     Objects.requireNonNull(this.node, "'node' must not be null");
+
+    String baseUrl = (String)propMap.get(BASE_URL_PROP);
+    Objects.requireNonNull(baseUrl, "'base_url' must not be null");
+
     // make sure all declared props are in the propMap
     propMap.put(ZkStateReader.COLLECTION_PROP, collection);
     propMap.put(ZkStateReader.SHARD_ID_PROP, shard);
@@ -371,11 +371,7 @@ public class Replica extends ZkNodeProps implements MapWriter {
       // propMap takes precedence because it's mutable and we can't control its
       // contents, so a third party may override some declared fields
       for (Map.Entry<String, Object> e : propMap.entrySet()) {
-        final String key = e.getKey();
-        // don't store the base_url as we can compute it from the node_name
-        if (!BASE_URL_PROP.equals(key)) {
-          writer.put(e.getKey(), e.getValue(), p);
-        }
+        writer.put(e.getKey(), e.getValue(), p);
       }
 
       writer.put(ZkStateReader.CORE_NAME_PROP, core, p)
diff --git a/solr/solrj/src/java/org/apache/solr/common/cloud/UrlScheme.java b/solr/solrj/src/java/org/apache/solr/common/cloud/UrlScheme.java
deleted file mode 100644
index b459199a2e2..00000000000
--- a/solr/solrj/src/java/org/apache/solr/common/cloud/UrlScheme.java
+++ /dev/null
@@ -1,73 +0,0 @@
-/*
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.solr.common.cloud;
-
-import java.util.Objects;
-
-import org.apache.solr.common.util.Utils;
-
-/**
- * Singleton access to global urlScheme, which although is stored in ZK as a cluster property
- * really should be treated like a static global that is set at initialization and not altered after.
- *
- * Client applications should not use this class directly; it is only included in SolrJ because Replica
- * and ZkNodeProps depend on it.
- */
-public enum UrlScheme {
-  INSTANCE;
-
-  public static final String HTTP = "http";
-  public static final String HTTPS = "https";
-  public static final String HTTPS_PORT_PROP = "solr.jetty.https.port";
-
-  private volatile String urlScheme = HTTP;
-
-  /**
-   * Set the global urlScheme variable; ideally this should be immutable once set, but some tests rely on changing
-   * the value on-the-fly.
-   * @param urlScheme The new URL scheme, either http or https.
-   */
-  public void setUrlScheme(final String urlScheme) {
-    if (HTTP.equals(urlScheme) || HTTPS.equals(urlScheme)) {
-      this.urlScheme = urlScheme;
-    } else {
-      throw new IllegalArgumentException("Invalid urlScheme: "+urlScheme);
-    }
-  }
-
-  public String getBaseUrlForNodeName(String nodeName) {
-    Objects.requireNonNull(nodeName,"node_name must not be null");
-    return Utils.getBaseUrlForNodeName(nodeName, urlScheme);
-  }
-
-  /**
-   * Given a URL string with or without a scheme, return a new URL with the correct scheme applied.
-   * @param url A URL to change the scheme (http|https)
-   * @return A new URL with the correct scheme
-   */
-  public String applyUrlScheme(final String url) {
-    Objects.requireNonNull(url, "URL must not be null!");
-
-    // heal an incorrect scheme if needed, otherwise return null indicating no change
-    final int at = url.indexOf("://");
-    return (at == -1) ? (urlScheme + "://" + url) : urlScheme + url.substring(at);
-  }
-
-  public String getUrlScheme() {
-    return urlScheme;
-  }
-}
diff --git a/solr/solrj/src/java/org/apache/solr/common/cloud/ZkCoreNodeProps.java b/solr/solrj/src/java/org/apache/solr/common/cloud/ZkCoreNodeProps.java
index 7ac0fbb8a50..988f3bc916a 100644
--- a/solr/solrj/src/java/org/apache/solr/common/cloud/ZkCoreNodeProps.java
+++ b/solr/solrj/src/java/org/apache/solr/common/cloud/ZkCoreNodeProps.java
@@ -46,12 +46,10 @@ public class ZkCoreNodeProps {
   }
 
   private static String getBaseUrl(ZkNodeProps nodeProps) {
-    String baseUrl = null;
-    final String nodeName = nodeProps.getStr(ZkStateReader.NODE_NAME_PROP);
-    if (nodeName != null) {
-      baseUrl = UrlScheme.INSTANCE.getBaseUrlForNodeName(nodeName);
-    } else if (nodeProps.containsKey(ZkStateReader.BASE_URL_PROP)) {
-      baseUrl = UrlScheme.INSTANCE.applyUrlScheme(nodeProps.getStr(ZkStateReader.BASE_URL_PROP));
+    // if storing baseUrl in ZK is enabled and it's stored, just use what's stored, i.e. no self-healing here
+    String baseUrl = nodeProps.getStr(ZkStateReader.BASE_URL_PROP);
+    if (baseUrl == null) {
+      throw new IllegalStateException("base_url not set in: " + nodeProps);
     }
     return baseUrl;
   }
diff --git a/solr/solrj/src/java/org/apache/solr/common/cloud/ZkNodeProps.java b/solr/solrj/src/java/org/apache/solr/common/cloud/ZkNodeProps.java
index 20b7340efd1..ec0c1b47a11 100644
--- a/solr/solrj/src/java/org/apache/solr/common/cloud/ZkNodeProps.java
+++ b/solr/solrj/src/java/org/apache/solr/common/cloud/ZkNodeProps.java
@@ -35,13 +35,6 @@ import static org.apache.solr.common.util.Utils.toJSONString;
  */
 public class ZkNodeProps implements JSONWriter.Writable {
 
-  /**
-   * Feature flag to enable storing the 'base_url' property; base_url will not be stored as of Solr 9.x.
-   * Installations that use an older (pre-8.8) SolrJ against a 8.8.0 or newer server will need to set this system
-   * property to 'true' to avoid NPEs when reading cluster state from Zookeeper, see SOLR-15145.
-   */
-  static final boolean STORE_BASE_URL = Boolean.parseBoolean(System.getProperty("solr.storeBaseUrl", "false"));
-
   protected final Map<String,Object> propMap;
 
   /**
@@ -50,12 +43,6 @@ public class ZkNodeProps implements JSONWriter.Writable {
   public ZkNodeProps(Map<String,Object> propMap) {
     this.propMap = new HashMap<>(propMap); // We need propMap to be mutable
 
-    // don't store base_url if we have a node_name to recompute from when we read back from ZK
-    // sub-classes that know they need a base_url (Replica) can eagerly compute in their ctor
-    if (!STORE_BASE_URL && this.propMap.containsKey(ZkStateReader.NODE_NAME_PROP)) {
-      this.propMap.remove(ZkStateReader.BASE_URL_PROP);
-    }
-
     // TODO: store an unmodifiable map, but in a way that guarantees not to wrap more than once.
     // Always wrapping introduces a memory leak.
   }
@@ -128,19 +115,7 @@ public class ZkNodeProps implements JSONWriter.Writable {
 
   @Override
   public void write(JSONWriter jsonWriter) {
-    // don't write out the base_url if we have a node_name
-    if (!STORE_BASE_URL && propMap.containsKey(ZkStateReader.BASE_URL_PROP) && propMap.get(ZkStateReader.NODE_NAME_PROP) != null) {
-      final Map<String, Object> filtered = new HashMap<>(propMap);
-      filtered.remove(ZkStateReader.BASE_URL_PROP);
-      jsonWriter.write(filtered);
-    } else if (STORE_BASE_URL && propMap.get(ZkStateReader.BASE_URL_PROP) == null && propMap.get(ZkStateReader.NODE_NAME_PROP) != null) {
-      // this is for back-compat with older SolrJ
-      final Map<String, Object> addBaseUrl = new HashMap<>(propMap);
-      addBaseUrl.put(ZkStateReader.BASE_URL_PROP, UrlScheme.INSTANCE.getBaseUrlForNodeName((String)propMap.get(ZkStateReader.NODE_NAME_PROP)));
-      jsonWriter.write(addBaseUrl);
-    } else {
-      jsonWriter.write(propMap);
-    }
+    jsonWriter.write(propMap);
   }
   
   /**
@@ -163,15 +138,6 @@ public class ZkNodeProps implements JSONWriter.Writable {
    */
   public String getStr(String key, String def) {
     Object o = propMap.get(key);
-
-    // TODO: This "hack" should not be needed but keeping it here b/c we removed the base_url from the map in the ctor
-    if (o == null && def == null && ZkStateReader.BASE_URL_PROP.equals(key)) {
-      final String nodeName = (String)propMap.get(ZkStateReader.NODE_NAME_PROP);
-      if (nodeName != null) {
-        o = UrlScheme.INSTANCE.getBaseUrlForNodeName(nodeName);
-      }
-    }
-
     return o == null ? def : o.toString();
   }
 
diff --git a/solr/solrj/src/java/org/apache/solr/common/cloud/ZkStateReader.java b/solr/solrj/src/java/org/apache/solr/common/cloud/ZkStateReader.java
index 848c69e6447..ac5ba677bc2 100644
--- a/solr/solrj/src/java/org/apache/solr/common/cloud/ZkStateReader.java
+++ b/solr/solrj/src/java/org/apache/solr/common/cloud/ZkStateReader.java
@@ -67,7 +67,6 @@ import org.slf4j.LoggerFactory;
 
 import static java.util.Collections.emptyMap;
 import static java.util.Collections.emptySortedSet;
-import static org.apache.solr.common.cloud.UrlScheme.HTTP;
 import static org.apache.solr.common.util.Utils.fromJSON;
 
 public class ZkStateReader implements SolrCloseable {
@@ -145,6 +144,9 @@ public class ZkStateReader implements SolrCloseable {
   public static final String COLLECTION_DEF = "collectionDefaults";
 
   public static final String URL_SCHEME = "urlScheme";
+  public static final String HTTP = "http";
+  public static final String HTTPS = "https";
+  public static final String HTTPS_PORT_PROP = "solr.jetty.https.port";
 
   private static final String SOLR_ENVIRONMENT = "environment";
 
@@ -985,9 +987,6 @@ public class ZkStateReader implements SolrCloseable {
           this.clusterProperties = ClusterProperties.convertCollectionDefaultsToNestedFormat(properties);
           log.debug("Loaded cluster properties: {}", this.clusterProperties);
 
-          // Make the urlScheme globally accessible
-          UrlScheme.INSTANCE.setUrlScheme(getClusterProperty(ZkStateReader.URL_SCHEME, HTTP));
-
           for (ClusterPropertiesListener listener : clusterPropertiesListeners) {
             listener.onChange(getClusterProperties());
           }
diff --git a/solr/solrj/src/java/org/apache/solr/common/util/Utils.java b/solr/solrj/src/java/org/apache/solr/common/util/Utils.java
index f15b67a5797..3193bade275 100644
--- a/solr/solrj/src/java/org/apache/solr/common/util/Utils.java
+++ b/solr/solrj/src/java/org/apache/solr/common/util/Utils.java
@@ -758,10 +758,22 @@ public class Utils {
     return isModified;
   }
 
-  public static String getBaseUrlForNodeName(final String nodeName, String urlScheme) {
+  /**
+   * Given a URL string with or without a scheme, return a new URL with the correct scheme applied.
+   * @param url A URL to change the scheme (http|https)
+   * @return A new URL with the correct scheme
+   */
+  public static String applyUrlScheme(final String url, final String urlScheme) {
+    Objects.requireNonNull(url, "URL must not be null!");
+    // heal an incorrect scheme if needed, otherwise return null indicating no change
+    final int at = url.indexOf("://");
+    return (at == -1) ? (urlScheme + "://" + url) : urlScheme + url.substring(at);
+  }
+
+  public static String getBaseUrlForNodeName(final String nodeName, final String urlScheme) {
     return getBaseUrlForNodeName(nodeName, urlScheme, false);
   }
-  public static String getBaseUrlForNodeName(final String nodeName, String urlScheme,  boolean isV2) {
+  public static String getBaseUrlForNodeName(final String nodeName, final String urlScheme,  boolean isV2) {
     final int colonAt = nodeName.indexOf(':');
     if (colonAt == -1) {
       throw new IllegalArgumentException("nodeName does not contain expected ':' separator: " + nodeName);
diff --git a/solr/solrj/src/test/org/apache/solr/client/solrj/impl/HttpClusterStateSSLTest.java b/solr/solrj/src/test/org/apache/solr/client/solrj/impl/HttpClusterStateSSLTest.java
new file mode 100644
index 00000000000..4cebcdc647d
--- /dev/null
+++ b/solr/solrj/src/test/org/apache/solr/client/solrj/impl/HttpClusterStateSSLTest.java
@@ -0,0 +1,106 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package org.apache.solr.client.solrj.impl;
+
+import java.net.URL;
+import java.util.Collections;
+import java.util.List;
+import java.util.Map;
+
+import org.apache.solr.client.solrj.request.CollectionAdminRequest;
+import org.apache.solr.cloud.SolrCloudTestCase;
+import org.apache.solr.common.cloud.ClusterState;
+import org.apache.solr.common.cloud.DocCollection;
+import org.apache.solr.common.cloud.Replica;
+import org.apache.solr.common.cloud.ZkStateReader;
+import org.apache.solr.common.util.Utils;
+import org.apache.solr.util.RandomizeSSL;
+import org.junit.BeforeClass;
+import org.junit.Test;
+
+@RandomizeSSL(1.0)
+public class HttpClusterStateSSLTest extends SolrCloudTestCase {
+
+  @BeforeClass
+  public static void setupClusterWithSSL() throws Exception {
+    System.setProperty("solr.storeBaseUrl", "true");
+    configureCluster(1)
+        .addConfig("conf", getFile("solrj").toPath().resolve("solr").resolve("configsets").resolve("streaming").resolve("conf"))
+        .configure();
+  }
+
+  @Test
+  @SuppressWarnings("unchecked")
+  public void testHttpClusterStateWithSSL() throws Exception {
+    URL url0 = cluster.getJettySolrRunner(0).getBaseUrl();
+    assertEquals("https", url0.getProtocol());
+
+    final String collectionId = "test-https-cluster-state";
+    final int numShards = 3;
+    final int rf = 2;
+    final int expectedReplicas = numShards * rf;
+    CollectionAdminRequest.createCollection(collectionId, "conf", numShards, rf)
+        .setPerReplicaState(false)
+        .process(cluster.getSolrClient());
+    cluster.waitForActiveCollection(collectionId, numShards, numShards * rf);
+
+    // verify the base_url is actually stored with https in it on the server-side
+    byte[] stateJsonBytes = cluster.getZkClient().getData(ZkStateReader.getCollectionPath(collectionId), null, null, true);
+    assertNotNull(stateJsonBytes);
+    Map<String, Object> replicasMap =
+        (Map<String, Object>) Utils.getObjectByPath(Utils.fromJSON(stateJsonBytes), false, "/" + collectionId + "/shards/shard1/replicas");
+    assertEquals(2, replicasMap.size());
+    for (Object replicaObj : replicasMap.values()) {
+      Map<String, Object> replicaData = (Map<String, Object>) replicaObj;
+      String baseUrl = (String) replicaData.get("base_url");
+      assertTrue(baseUrl != null && baseUrl.startsWith("https://"));
+    }
+
+    // verify the http derived cluster state (on the client side) agrees with what the server stored
+    try (CloudSolrClient httpBasedCloudSolrClient = new CloudSolrClient.Builder(Collections.singletonList(url0.toExternalForm())).build()) {
+      ClusterStateProvider csp = httpBasedCloudSolrClient.getClusterStateProvider();
+      assertTrue(csp instanceof HttpClusterStateProvider);
+      verifyUrlSchemeInClusterState(csp.getClusterState(), collectionId, expectedReplicas);
+    }
+
+    // http2
+    try (CloudHttp2SolrClient http2BasedClient = new CloudHttp2SolrClient.Builder(Collections.singletonList(url0.toExternalForm())).build()) {
+      ClusterStateProvider csp = http2BasedClient.getClusterStateProvider();
+      assertTrue(csp instanceof Http2ClusterStateProvider);
+      verifyUrlSchemeInClusterState(csp.getClusterState(), collectionId, expectedReplicas);
+    }
+
+    // Zk cluster state now
+    ClusterStateProvider csp = cluster.getSolrClient().getClusterStateProvider();
+    assertTrue(csp instanceof ZkClientClusterStateProvider);
+    verifyUrlSchemeInClusterState(csp.getClusterState(), collectionId, expectedReplicas);
+  }
+
+  private void verifyUrlSchemeInClusterState(final ClusterState cs, final String collectionId, final int expectedReplicas) {
+    DocCollection dc = cs.getCollection(collectionId);
+    assertNotNull(dc);
+    List<Replica> replicas = dc.getReplicas();
+    assertNotNull(replicas);
+    assertEquals(expectedReplicas, replicas.size());
+    for (Replica r : replicas) {
+      String baseUrl = r.getBaseUrl();
+      assertNotNull(baseUrl);
+      assertTrue(baseUrl.startsWith("https://"));
+    }
+  }
+}
diff --git a/solr/solrj/src/test/org/apache/solr/client/solrj/routing/NodePreferenceRulesComparatorTest.java b/solr/solrj/src/test/org/apache/solr/client/solrj/routing/NodePreferenceRulesComparatorTest.java
index 1e06d4b9ed1..b647901f8a5 100644
--- a/solr/solrj/src/test/org/apache/solr/client/solrj/routing/NodePreferenceRulesComparatorTest.java
+++ b/solr/solrj/src/test/org/apache/solr/client/solrj/routing/NodePreferenceRulesComparatorTest.java
@@ -23,7 +23,7 @@ import java.util.Map;
 
 import org.apache.solr.SolrTestCaseJ4;
 import org.apache.solr.common.cloud.Replica;
-import org.apache.solr.common.cloud.UrlScheme;
+import org.apache.solr.common.util.Utils;
 import org.apache.solr.common.cloud.ZkStateReader;
 import org.apache.solr.common.params.ShardParams;
 import org.junit.Test;
@@ -74,6 +74,7 @@ public class NodePreferenceRulesComparatorTest extends SolrTestCaseJ4 {
             "node4",
             Map.of(
                 ZkStateReader.NODE_NAME_PROP, "node4:8983_solr",
+                ZkStateReader.BASE_URL_PROP, Utils.getBaseUrlForNodeName("node4:8983_solr", "http"),
                 ZkStateReader.CORE_NAME_PROP, "collection1",
                 ZkStateReader.REPLICA_TYPE, "TLOG"
             ),"collection1","shard1"
@@ -142,6 +143,7 @@ public class NodePreferenceRulesComparatorTest extends SolrTestCaseJ4 {
             "node1",
             Map.of(
                 ZkStateReader.NODE_NAME_PROP, "node1:8983_solr",
+                ZkStateReader.BASE_URL_PROP, Utils.getBaseUrlForNodeName("node1:8983_solr", "http"),
                 ZkStateReader.CORE_NAME_PROP, "collection1",
                 ZkStateReader.REPLICA_TYPE, "NRT",
                 ZkStateReader.LEADER_PROP, "true"
@@ -177,14 +179,13 @@ public class NodePreferenceRulesComparatorTest extends SolrTestCaseJ4 {
   }
 
   private static List<Replica> getBasicReplicaList() {
-    UrlScheme.INSTANCE.setUrlScheme(UrlScheme.HTTP);
-
     List<Replica> replicas = new ArrayList<Replica>();
     replicas.add(
         new Replica(
             "node1",
             Map.of(
                 ZkStateReader.NODE_NAME_PROP, "node1:8983_solr",
+                ZkStateReader.BASE_URL_PROP, Utils.getBaseUrlForNodeName("node1:8983_solr", "http"),
                 ZkStateReader.CORE_NAME_PROP, "collection1",
                 ZkStateReader.REPLICA_TYPE, "NRT",
                 ZkStateReader.LEADER_PROP, "true"
@@ -196,6 +197,7 @@ public class NodePreferenceRulesComparatorTest extends SolrTestCaseJ4 {
             "node2",
             Map.of(
                 ZkStateReader.NODE_NAME_PROP, "node2:8983_solr",
+                ZkStateReader.BASE_URL_PROP, Utils.getBaseUrlForNodeName("node2:8983_solr", "http"),
                 ZkStateReader.CORE_NAME_PROP, "collection1",
                 ZkStateReader.REPLICA_TYPE, "TLOG"
             ),"collection1","shard1"
@@ -206,6 +208,7 @@ public class NodePreferenceRulesComparatorTest extends SolrTestCaseJ4 {
             "node3",
             Map.of(
                 ZkStateReader.NODE_NAME_PROP, "node3:8983_solr",
+                ZkStateReader.BASE_URL_PROP, Utils.getBaseUrlForNodeName("node3:8983_solr", "http"),
                 ZkStateReader.CORE_NAME_PROP, "collection1",
                 ZkStateReader.REPLICA_TYPE, "PULL"
             ),"collection1","shard1"
diff --git a/solr/solrj/src/test/org/apache/solr/client/solrj/routing/RequestReplicaListTransformerGeneratorTest.java b/solr/solrj/src/test/org/apache/solr/client/solrj/routing/RequestReplicaListTransformerGeneratorTest.java
index 5dcc6a1accf..55019f835b3 100644
--- a/solr/solrj/src/test/org/apache/solr/client/solrj/routing/RequestReplicaListTransformerGeneratorTest.java
+++ b/solr/solrj/src/test/org/apache/solr/client/solrj/routing/RequestReplicaListTransformerGeneratorTest.java
@@ -23,11 +23,13 @@ import java.util.Map;
 
 import org.apache.solr.SolrTestCaseJ4;
 import org.apache.solr.common.cloud.Replica;
+import org.apache.solr.common.util.Utils;
 import org.apache.solr.common.cloud.ZkStateReader;
 import org.apache.solr.common.params.ModifiableSolrParams;
 import org.apache.solr.common.params.ShardParams;
 import org.junit.Test;
 
+@SolrTestCaseJ4.SuppressSSL
 public class RequestReplicaListTransformerGeneratorTest extends SolrTestCaseJ4 {
 
   @Test
@@ -86,6 +88,7 @@ public class RequestReplicaListTransformerGeneratorTest extends SolrTestCaseJ4 {
             "node4",
             Map.of(
                 ZkStateReader.NODE_NAME_PROP, "node4:8983_solr",
+                ZkStateReader.BASE_URL_PROP, Utils.getBaseUrlForNodeName("node4:8983_solr", "https"),
                 ZkStateReader.CORE_NAME_PROP, "collection1",
                 ZkStateReader.REPLICA_TYPE, "TLOG"
             ), "c1","s1"
@@ -98,6 +101,7 @@ public class RequestReplicaListTransformerGeneratorTest extends SolrTestCaseJ4 {
             "node5",
             Map.of(
                 ZkStateReader.NODE_NAME_PROP, "node5:8983_solr",
+                ZkStateReader.BASE_URL_PROP, Utils.getBaseUrlForNodeName("node5:8983_solr", "https"),
                 ZkStateReader.CORE_NAME_PROP, "collection1",
                 ZkStateReader.REPLICA_TYPE, "PULL"
             ), "c1","s1"
@@ -137,6 +141,7 @@ public class RequestReplicaListTransformerGeneratorTest extends SolrTestCaseJ4 {
             "node1",
             Map.of(
                 ZkStateReader.NODE_NAME_PROP, "node1:8983_solr",
+                ZkStateReader.BASE_URL_PROP, Utils.getBaseUrlForNodeName("node1:8983_solr", "http"),
                 ZkStateReader.CORE_NAME_PROP, "collection1",
                 ZkStateReader.REPLICA_TYPE, "NRT"
             ),"c1","s1"
@@ -147,6 +152,7 @@ public class RequestReplicaListTransformerGeneratorTest extends SolrTestCaseJ4 {
             "node2",
             Map.of(
                 ZkStateReader.NODE_NAME_PROP, "node2:8983_solr",
+                ZkStateReader.BASE_URL_PROP, Utils.getBaseUrlForNodeName("node2:8983_solr", "http"),
                 ZkStateReader.CORE_NAME_PROP, "collection1",
                 ZkStateReader.REPLICA_TYPE, "TLOG"
             ),"c1","s1"
@@ -157,6 +163,7 @@ public class RequestReplicaListTransformerGeneratorTest extends SolrTestCaseJ4 {
             "node3",
             Map.of(
                 ZkStateReader.NODE_NAME_PROP, "node3:8983_solr",
+                ZkStateReader.BASE_URL_PROP, Utils.getBaseUrlForNodeName("node3:8983_solr", "http"),
                 ZkStateReader.CORE_NAME_PROP, "collection1",
                 ZkStateReader.REPLICA_TYPE, "PULL"
             ),"c1","s1"
diff --git a/solr/solrj/src/test/org/apache/solr/client/solrj/routing/ShufflingReplicaListTransformerTest.java b/solr/solrj/src/test/org/apache/solr/client/solrj/routing/ShufflingReplicaListTransformerTest.java
index b6297370c3c..5e27bb470e8 100644
--- a/solr/solrj/src/test/org/apache/solr/client/solrj/routing/ShufflingReplicaListTransformerTest.java
+++ b/solr/solrj/src/test/org/apache/solr/client/solrj/routing/ShufflingReplicaListTransformerTest.java
@@ -25,9 +25,12 @@ import java.util.Map;
 import java.util.Set;
 
 import org.apache.solr.SolrTestCase;
+import org.apache.solr.SolrTestCaseJ4;
 import org.apache.solr.common.cloud.Replica;
+import org.apache.solr.common.util.Utils;
 import org.junit.Test;
 
+@SolrTestCaseJ4.SuppressSSL // not useful / needed for this test
 public class ShufflingReplicaListTransformerTest extends SolrTestCase {
 
   private final ShufflingReplicaListTransformer transformer = new ShufflingReplicaListTransformer(random());
@@ -37,10 +40,12 @@ public class ShufflingReplicaListTransformerTest extends SolrTestCase {
     final List<Replica> replicas = new ArrayList<>();
     int counter = 0;
     for (final String url : createRandomUrls()) {
+      String nodeName = "node" + counter + ":8983_";
       Map<String, Object> propMap = new HashMap<>();
       propMap.put("core", "core" + counter);
       propMap.put("type", "NRT");
-      propMap.put("node_name", "node" + counter + ":8983_");
+      propMap.put("node_name", nodeName);
+      propMap.put("base_url", Utils.getBaseUrlForNodeName(nodeName, "http"));
       counter++;
       replicas.add(new Replica(url, propMap, "c1", "s1"));
     }
diff --git a/solr/solrj/src/test/org/apache/solr/common/cloud/UrlSchemeTest.java b/solr/solrj/src/test/org/apache/solr/common/cloud/UrlSchemeTest.java
deleted file mode 100644
index 30f6c3faf3c..00000000000
--- a/solr/solrj/src/test/org/apache/solr/common/cloud/UrlSchemeTest.java
+++ /dev/null
@@ -1,59 +0,0 @@
-/*
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package org.apache.solr.common.cloud;
-
-import org.apache.solr.SolrTestCase;
-import org.junit.Test;
-
-import static org.apache.solr.common.cloud.UrlScheme.HTTP;
-import static org.apache.solr.common.cloud.UrlScheme.HTTPS;
-
-public class UrlSchemeTest extends SolrTestCase {
-
-  @Test
-  public void testApplyUrlScheme() {
-
-    final UrlScheme t = UrlScheme.INSTANCE;
-    t.setUrlScheme(HTTPS);
-
-    //  mock a SolrZkClient with some live nodes and cluster props set.
-    String liveNode1 = "192.168.1.1:8983_solr";
-    String liveNode2 = "127.0.0.1:8983_solr";
-    String liveNode3 = "127.0.0.1:80_";
-    String liveNode4 = "127.0.0.1:61631_l_%2Fig";
-    String liveNode5 = "some_weird_hostname-here:8983_solr%2Fx";
-
-    assertEquals("https://192.168.1.1:8983/solr", t.getBaseUrlForNodeName(liveNode1));
-    assertEquals("https://127.0.0.1:8983/solr", t.getBaseUrlForNodeName(liveNode2));
-    assertEquals("https://127.0.0.1:80", t.getBaseUrlForNodeName(liveNode3));
-    assertEquals("https://127.0.0.1:61631/l_/ig", t.getBaseUrlForNodeName(liveNode4));
-    // heal wrong scheme too
-    assertEquals("https://127.0.0.1:8983/solr", t.applyUrlScheme("127.0.0.1:8983/solr"));
-    assertEquals("https://127.0.0.1:8983/solr", t.applyUrlScheme("http://127.0.0.1:8983/solr"));
-
-    t.setUrlScheme(HTTP);
-    assertEquals("http://192.168.1.1:8983/solr", t.getBaseUrlForNodeName(liveNode1));
-    assertEquals("http://127.0.0.1:8983/solr", t.getBaseUrlForNodeName(liveNode2));
-    assertEquals("http://127.0.0.1:80", t.getBaseUrlForNodeName(liveNode3));
-    assertEquals("http://127.0.0.1:61631/l_/ig", t.getBaseUrlForNodeName(liveNode4));
-    assertEquals("http://some_weird_hostname-here:8983/solr/x", t.getBaseUrlForNodeName(liveNode5));
-
-    // heal wrong scheme too
-    assertEquals("http://127.0.0.1:8983/solr", t.applyUrlScheme("https://127.0.0.1:8983/solr"));
-  }
-}
diff --git a/solr/test-framework/src/java/org/apache/solr/SolrTestCaseJ4.java b/solr/test-framework/src/java/org/apache/solr/SolrTestCaseJ4.java
index 3af84c0d889..cd2730df875 100644
--- a/solr/test-framework/src/java/org/apache/solr/SolrTestCaseJ4.java
+++ b/solr/test-framework/src/java/org/apache/solr/SolrTestCaseJ4.java
@@ -105,7 +105,6 @@ import org.apache.solr.common.SolrDocumentList;
 import org.apache.solr.common.SolrException;
 import org.apache.solr.common.SolrInputDocument;
 import org.apache.solr.common.SolrInputField;
-import org.apache.solr.common.cloud.UrlScheme;
 import org.apache.solr.common.params.CommonParams;
 import org.apache.solr.common.params.ModifiableSolrParams;
 import org.apache.solr.common.params.MultiMapSolrParams;
@@ -169,6 +168,7 @@ import org.apache.commons.io.IOUtils;
 
 import static java.util.Objects.requireNonNull;
 import static org.apache.solr.cloud.SolrZkServer.ZK_WHITELIST_PROPERTY;
+import static org.apache.solr.common.cloud.ZkStateReader.HTTPS;
 import static org.apache.solr.common.cloud.ZkStateReader.URL_SCHEME;
 import static org.apache.solr.update.processor.DistributedUpdateProcessor.DistribPhase;
 import static org.apache.solr.update.processor.DistributingUpdateProcessorFactory.DISTRIB_UPDATE_PARAM;
@@ -314,10 +314,7 @@ public abstract class SolrTestCaseJ4 extends SolrTestCase {
     Http2SolrClient.setDefaultSSLConfig(sslConfig.buildClientSSLConfig());
     if(isSSLMode()) {
       // SolrCloud tests should usually clear this
-      System.setProperty(URL_SCHEME, UrlScheme.HTTPS);
-      UrlScheme.INSTANCE.setUrlScheme(UrlScheme.HTTPS);
-    } else {
-      UrlScheme.INSTANCE.setUrlScheme(UrlScheme.HTTP);
+      System.setProperty(URL_SCHEME, HTTPS);
     }
 
     resetGlobalTracer();
@@ -380,7 +377,6 @@ public abstract class SolrTestCaseJ4 extends SolrTestCase {
       System.clearProperty("enable.update.log");
       System.clearProperty("useCompoundFile");
       System.clearProperty(URL_SCHEME);
-      UrlScheme.INSTANCE.setUrlScheme(UrlScheme.HTTP);
       System.clearProperty("solr.cloud.wait-for-updates-with-stale-state-pause");
       System.clearProperty("solr.zkclienttmeout");
       System.clearProperty(ZK_WHITELIST_PROPERTY);
diff --git a/solr/test-framework/src/java/org/apache/solr/cloud/AbstractFullDistribZkTestBase.java b/solr/test-framework/src/java/org/apache/solr/cloud/AbstractFullDistribZkTestBase.java
index 2ed7ae39403..65c948dc074 100644
--- a/solr/test-framework/src/java/org/apache/solr/cloud/AbstractFullDistribZkTestBase.java
+++ b/solr/test-framework/src/java/org/apache/solr/cloud/AbstractFullDistribZkTestBase.java
@@ -16,6 +16,7 @@
  */
 package org.apache.solr.cloud;
 
+import static org.apache.solr.common.cloud.ZkStateReader.HTTPS;
 import static org.apache.solr.common.cloud.ZkStateReader.URL_SCHEME;
 
 import java.io.File;
@@ -72,7 +73,6 @@ import org.apache.solr.common.cloud.ClusterState;
 import org.apache.solr.common.cloud.DocCollection;
 import org.apache.solr.common.cloud.Replica;
 import org.apache.solr.common.cloud.Slice;
-import org.apache.solr.common.cloud.UrlScheme;
 import org.apache.solr.common.cloud.ZkCoreNodeProps;
 import org.apache.solr.common.cloud.ZkNodeProps;
 import org.apache.solr.common.cloud.ZkStateReader;
@@ -261,12 +261,12 @@ public abstract class AbstractFullDistribZkTestBase extends AbstractDistribZkTes
           AbstractZkTestCase.TIMEOUT, AbstractZkTestCase.TIMEOUT)) {
         try {
           zkStateReader.getZkClient().create(ZkStateReader.CLUSTER_PROPS,
-              Utils.toJSON(Collections.singletonMap(URL_SCHEME, "https")),
+              Utils.toJSON(Collections.singletonMap(URL_SCHEME, HTTPS)),
               CreateMode.PERSISTENT, true);
         } catch (KeeperException.NodeExistsException e) {
           ZkNodeProps props = ZkNodeProps.load(zkStateReader.getZkClient().getData(ZkStateReader.CLUSTER_PROPS,
               null, null, true));
-          zkStateReader.getZkClient().setData(ZkStateReader.CLUSTER_PROPS, Utils.toJSON(props.plus(URL_SCHEME, "https")), true);
+          zkStateReader.getZkClient().setData(ZkStateReader.CLUSTER_PROPS, Utils.toJSON(props.plus(URL_SCHEME, HTTPS)), true);
         }
       }
     }
@@ -1994,7 +1994,7 @@ public abstract class AbstractFullDistribZkTestBase extends AbstractDistribZkTes
         final ZkNodeProps node = shardEntry.getValue();
         final String nodeName = node.getStr(ZkStateReader.NODE_NAME_PROP);
         if (clusterState.liveNodesContain(nodeName)) {
-          return ZkCoreNodeProps.getCoreUrl(UrlScheme.INSTANCE.getBaseUrlForNodeName(nodeName), collection);
+          return ZkCoreNodeProps.getCoreUrl(node.getStr(ZkStateReader.BASE_URL_PROP), collection);
         }
       }
     }
