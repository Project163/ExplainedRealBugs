{"url":"https://api.github.com/repos/microsoft/playwright/issues/28501","repository_url":"https://api.github.com/repos/microsoft/playwright","labels_url":"https://api.github.com/repos/microsoft/playwright/issues/28501/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/playwright/issues/28501/comments","events_url":"https://api.github.com/repos/microsoft/playwright/issues/28501/events","html_url":"https://github.com/microsoft/playwright/issues/28501","id":2026989021,"node_id":"I_kwDODTssw8540WXd","number":28501,"title":"[Feature] Trace viewer: allow fetching traces from origins that require credentials","user":{"login":"pmattj","id":7636332,"node_id":"MDQ6VXNlcjc2MzYzMzI=","avatar_url":"https://avatars.githubusercontent.com/u/7636332?v=4","gravatar_id":"","url":"https://api.github.com/users/pmattj","html_url":"https://github.com/pmattj","followers_url":"https://api.github.com/users/pmattj/followers","following_url":"https://api.github.com/users/pmattj/following{/other_user}","gists_url":"https://api.github.com/users/pmattj/gists{/gist_id}","starred_url":"https://api.github.com/users/pmattj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pmattj/subscriptions","organizations_url":"https://api.github.com/users/pmattj/orgs","repos_url":"https://api.github.com/users/pmattj/repos","events_url":"https://api.github.com/users/pmattj/events{/privacy}","received_events_url":"https://api.github.com/users/pmattj/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2167339959,"node_id":"MDU6TGFiZWwyMTY3MzM5OTU5","url":"https://api.github.com/repos/microsoft/playwright/labels/P3-collecting-feedback","name":"P3-collecting-feedback","color":"0e8a16","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-12-05T19:39:38Z","updated_at":"2024-04-22T17:58:35Z","closed_at":"2024-04-22T17:58:34Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"My team is working to allow our developers to load traces directly in the online [trace viewer](https://trace.playwright.dev/). Our ideal scenario is that a developer could open a test result document and jump directly to the trace in the viewer with a simple click of a link.\r\n\r\nOur CI infrastructure uploads traces to a location protected by credentials â€” to fetch a trace, the request needs to contain valid authentication cookies. These cookies are sent if we open the trace URL in the browser directly, but we've found that the online trace viewer does the trace fetch _without_ cookies, even though the origin sends `Access-Control-Allow-Credentials: true`.[1]\r\n\r\nWe suspected this could be due to the trace viewer not applying the `credentials` option on the fetch request. We tested this theory by deploying the trace viewer locally and adding a `credentials: 'include'` option on [this line](https://github.com/microsoft/playwright/blob/8f056fbbcebe4dd1f1dcedebb43870b81cc475d1/packages/trace-viewer/src/traceModelBackends.ts#L35), and this allowed our local trace viewer to load the trace.\r\n\r\nOur request is for this option to be added upstream. This would allow us to use the Playwright-hosted trace viewer rather than hosting it ourselves, and I suspect it would unblock other customers whose traces are credential-protected (assuming their origins also send the proper `Access-Control-Allow-Origin` and `Access-Control-Allow-Credentials` headers).\r\n\r\n[1] https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Credentials","closed_by":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/28501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/playwright/issues/28501/timeline","performed_via_github_app":null,"state_reason":"completed"}