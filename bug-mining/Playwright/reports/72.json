{"url":"https://api.github.com/repos/microsoft/playwright/issues/30718","repository_url":"https://api.github.com/repos/microsoft/playwright","labels_url":"https://api.github.com/repos/microsoft/playwright/issues/30718/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/playwright/issues/30718/comments","events_url":"https://api.github.com/repos/microsoft/playwright/issues/30718/events","html_url":"https://github.com/microsoft/playwright/issues/30718","id":2286635439,"node_id":"I_kwDODTssw86IS0mv","number":30718,"title":"[Bug]: Timeline & preview disappear after timeout in fixture cleanup","user":{"login":"tobz1000","id":1471978,"node_id":"MDQ6VXNlcjE0NzE5Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/1471978?v=4","gravatar_id":"","url":"https://api.github.com/users/tobz1000","html_url":"https://github.com/tobz1000","followers_url":"https://api.github.com/users/tobz1000/followers","following_url":"https://api.github.com/users/tobz1000/following{/other_user}","gists_url":"https://api.github.com/users/tobz1000/gists{/gist_id}","starred_url":"https://api.github.com/users/tobz1000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tobz1000/subscriptions","organizations_url":"https://api.github.com/users/tobz1000/orgs","repos_url":"https://api.github.com/users/tobz1000/repos","events_url":"https://api.github.com/users/tobz1000/events{/privacy}","received_events_url":"https://api.github.com/users/tobz1000/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":7211038747,"node_id":"LA_kwDODTssw88AAAABrc-4Gw","url":"https://api.github.com/repos/microsoft/playwright/labels/v1.47","name":"v1.47","color":"000000","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dgozman","id":9881434,"node_id":"MDQ6VXNlcjk4ODE0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9881434?v=4","gravatar_id":"","url":"https://api.github.com/users/dgozman","html_url":"https://github.com/dgozman","followers_url":"https://api.github.com/users/dgozman/followers","following_url":"https://api.github.com/users/dgozman/following{/other_user}","gists_url":"https://api.github.com/users/dgozman/gists{/gist_id}","starred_url":"https://api.github.com/users/dgozman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dgozman/subscriptions","organizations_url":"https://api.github.com/users/dgozman/orgs","repos_url":"https://api.github.com/users/dgozman/repos","events_url":"https://api.github.com/users/dgozman/events{/privacy}","received_events_url":"https://api.github.com/users/dgozman/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"dgozman","id":9881434,"node_id":"MDQ6VXNlcjk4ODE0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9881434?v=4","gravatar_id":"","url":"https://api.github.com/users/dgozman","html_url":"https://github.com/dgozman","followers_url":"https://api.github.com/users/dgozman/followers","following_url":"https://api.github.com/users/dgozman/following{/other_user}","gists_url":"https://api.github.com/users/dgozman/gists{/gist_id}","starred_url":"https://api.github.com/users/dgozman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dgozman/subscriptions","organizations_url":"https://api.github.com/users/dgozman/orgs","repos_url":"https://api.github.com/users/dgozman/repos","events_url":"https://api.github.com/users/dgozman/events{/privacy}","received_events_url":"https://api.github.com/users/dgozman/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":5,"created_at":"2024-05-08T23:25:25Z","updated_at":"2024-08-16T15:03:03Z","closed_at":"2024-08-16T15:03:03Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Version\r\n\r\n1.44.0\r\n\r\n### Steps to reproduce\r\n\r\nEdit: Minimal reproduction: https://github.com/tobz1000/playwright-30718\r\n\r\n1. Create a test fixture which causes an error during the cleanup phase. Edit: The fixture should have a timeout configured, and the error must cause faillure by timeout.\r\n2. Create a test which uses the fixture.\r\n3. Run the test UI and start the test (I reproduced via UI port): `npx playwright test --ui-port 3031`\r\n4. Once the test has failed during fixture cleanup, the timeline and preview window will disappear:\r\n![image](https://github.com/microsoft/playwright/assets/1471978/901d6dfb-8b7a-44e5-80b8-dfed100b4148)\r\n\r\n~~I can create a minimal reproduction repo if requested.~~\r\n\r\n### Expected behavior\r\n\r\nTimeline and window preview should be visible once the test has finished.\r\n\r\n### Actual behavior\r\n\r\nTimeline and window preview are not visible.\r\n\r\n\r\n### Additional context\r\n\r\nA similar bug was reported and puportedly fixed in a previous version: #29826\r\n\r\n### Environment\r\n\r\n```shell\r\nSystem:\r\n  OS: Linux 5.15 Debian GNU/Linux 11 (bullseye) 11 (bullseye)\r\n  CPU: (12) x64 AMD Ryzen 5 3600 6-Core Processor\r\n  Memory: 6.89 GB / 15.63 GB\r\n  Container: Yes\r\nBinaries:\r\n  Node: 20.12.2 - /usr/local/share/nvm/versions/node/v20.12.2/bin/node\r\n  Yarn: 1.22.19 - /usr/bin/yarn\r\n  npm: 10.5.0 - /usr/local/share/nvm/versions/node/v20.12.2/bin/npm\r\n  pnpm: 9.0.3 - /usr/local/share/nvm/versions/node/v20.12.2/bin/pnpm\r\n  bun: 1.1.4 - ~/.bun/bin/bun\r\nIDEs:\r\n  VSCode: 1.88.1 - /vscode/vscode-server/bin/linux-x64/e170252f762678dec6ca2cc69aba1570769a5d39/bin/remote-cli/code\r\nLanguages:\r\n  Bash: 5.1.4 - /bin/bash\r\n```\r\n","closed_by":{"login":"dgozman","id":9881434,"node_id":"MDQ6VXNlcjk4ODE0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9881434?v=4","gravatar_id":"","url":"https://api.github.com/users/dgozman","html_url":"https://github.com/dgozman","followers_url":"https://api.github.com/users/dgozman/followers","following_url":"https://api.github.com/users/dgozman/following{/other_user}","gists_url":"https://api.github.com/users/dgozman/gists{/gist_id}","starred_url":"https://api.github.com/users/dgozman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dgozman/subscriptions","organizations_url":"https://api.github.com/users/dgozman/orgs","repos_url":"https://api.github.com/users/dgozman/repos","events_url":"https://api.github.com/users/dgozman/events{/privacy}","received_events_url":"https://api.github.com/users/dgozman/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/30718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/playwright/issues/30718/timeline","performed_via_github_app":null,"state_reason":"completed"}