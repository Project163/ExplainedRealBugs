{"url":"https://api.github.com/repos/microsoft/playwright/issues/29839","repository_url":"https://api.github.com/repos/microsoft/playwright","labels_url":"https://api.github.com/repos/microsoft/playwright/issues/29839/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/playwright/issues/29839/comments","events_url":"https://api.github.com/repos/microsoft/playwright/issues/29839/events","html_url":"https://github.com/microsoft/playwright/issues/29839","id":2173203997,"node_id":"I_kwDODTssw86BiHYd","number":29839,"title":"[Bug]: can't access process.stdout.clearLine in playwright test scope","user":{"login":"HawtinZeng","id":73981739,"node_id":"MDQ6VXNlcjczOTgxNzM5","avatar_url":"https://avatars.githubusercontent.com/u/73981739?v=4","gravatar_id":"","url":"https://api.github.com/users/HawtinZeng","html_url":"https://github.com/HawtinZeng","followers_url":"https://api.github.com/users/HawtinZeng/followers","following_url":"https://api.github.com/users/HawtinZeng/following{/other_user}","gists_url":"https://api.github.com/users/HawtinZeng/gists{/gist_id}","starred_url":"https://api.github.com/users/HawtinZeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HawtinZeng/subscriptions","organizations_url":"https://api.github.com/users/HawtinZeng/orgs","repos_url":"https://api.github.com/users/HawtinZeng/repos","events_url":"https://api.github.com/users/HawtinZeng/events{/privacy}","received_events_url":"https://api.github.com/users/HawtinZeng/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":6122462647,"node_id":"LA_kwDODTssw88AAAABbO1dtw","url":"https://api.github.com/repos/microsoft/playwright/labels/v1.43","name":"v1.43","color":"000000","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"yury-s","id":9798949,"node_id":"MDQ6VXNlcjk3OTg5NDk=","avatar_url":"https://avatars.githubusercontent.com/u/9798949?v=4","gravatar_id":"","url":"https://api.github.com/users/yury-s","html_url":"https://github.com/yury-s","followers_url":"https://api.github.com/users/yury-s/followers","following_url":"https://api.github.com/users/yury-s/following{/other_user}","gists_url":"https://api.github.com/users/yury-s/gists{/gist_id}","starred_url":"https://api.github.com/users/yury-s/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yury-s/subscriptions","organizations_url":"https://api.github.com/users/yury-s/orgs","repos_url":"https://api.github.com/users/yury-s/repos","events_url":"https://api.github.com/users/yury-s/events{/privacy}","received_events_url":"https://api.github.com/users/yury-s/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"yury-s","id":9798949,"node_id":"MDQ6VXNlcjk3OTg5NDk=","avatar_url":"https://avatars.githubusercontent.com/u/9798949?v=4","gravatar_id":"","url":"https://api.github.com/users/yury-s","html_url":"https://github.com/yury-s","followers_url":"https://api.github.com/users/yury-s/followers","following_url":"https://api.github.com/users/yury-s/following{/other_user}","gists_url":"https://api.github.com/users/yury-s/gists{/gist_id}","starred_url":"https://api.github.com/users/yury-s/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yury-s/subscriptions","organizations_url":"https://api.github.com/users/yury-s/orgs","repos_url":"https://api.github.com/users/yury-s/repos","events_url":"https://api.github.com/users/yury-s/events{/privacy}","received_events_url":"https://api.github.com/users/yury-s/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":2,"created_at":"2024-03-07T07:51:41Z","updated_at":"2024-03-11T17:11:18Z","closed_at":"2024-03-11T17:11:18Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Version\n\nplayWright/test@1.42.1\n\n### Steps to reproduce\n\nReproduce this bug is very hard.\n\n### Expected behavior\n\nCan call `process.stdout.clearLine` in test scope.\r\n```js\r\ntest('command: build, build: true', async ({ page }) => {\r\n  console.log('process.stdout.clearLine=', process.stdout.clearLine);\r\n  const moduleWithTestMode = parseModule(`\r\n  import { defineConfig } from 'vite';\r\n  import vue from '@vitejs/plugin-vue';\r\n  import stylelint from 'vite-plugin-stylelint';\r\n  import inspect from 'vite-plugin-inspect';\r\n\r\n  export default defineConfig({\r\n    plugins: [vue(), stylelint({build: true}), inspect()],\r\n  });`);\r\n  await writeFile(moduleWithTestMode, './vite.config.ts');\r\n  await startDefaultServe('build');\r\n});\r\n```\r\n\r\nIn terminal:\r\n```powershell\r\nRunning 1 test using 1 worker\r\n[chromium] › main.spec.ts:91:1 › command: build, build: true\r\nprocess.stdout.clearLine= undefined\r\n  1 passed (1.5s)\r\n```\n\n### Actual behavior\n\nIn terminal:\r\n```powershell\r\nRunning 1 test using 1 worker\r\n[chromium] › main.spec.ts:91:1 › command: build, build: true\r\nprocess.stdout.clearLine= [Function]\r\n  1 passed (1.5s)\r\n```\n\n### Additional context\n\n_No response_\n\n### Environment\n\n```shell\nSystem:\r\n    OS: Windows 10 10.0.19044\r\n    CPU: (12) x64 Intel(R) Core(TM) i5-10400 CPU @ 2.90GHz\r\n    Memory: 33.16 GB / 47.85 GB\r\n  Binaries:\r\n    Node: 20.11.1 - D:\\APP\\nodejs\\node.EXE\r\n    Yarn: 1.22.19 - ~\\AppData\\Roaming\\npm\\yarn.CMD        \r\n    npm: 10.2.4 - D:\\APP\\nodejs\\npm.CMD\r\n    pnpm: 8.10.2 - ~\\AppData\\Roaming\\npm\\pnpm.CMD\r\n  IDEs:\r\n    VSCode: 1.87.0 - D:\\APP\\Microsoft VS Code\\bin\\code.CMD\r\n  npmPackages:\r\n    @playwright/test: ^1.42.1 => 1.42.1\n```\n","closed_by":{"login":"yury-s","id":9798949,"node_id":"MDQ6VXNlcjk3OTg5NDk=","avatar_url":"https://avatars.githubusercontent.com/u/9798949?v=4","gravatar_id":"","url":"https://api.github.com/users/yury-s","html_url":"https://github.com/yury-s","followers_url":"https://api.github.com/users/yury-s/followers","following_url":"https://api.github.com/users/yury-s/following{/other_user}","gists_url":"https://api.github.com/users/yury-s/gists{/gist_id}","starred_url":"https://api.github.com/users/yury-s/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yury-s/subscriptions","organizations_url":"https://api.github.com/users/yury-s/orgs","repos_url":"https://api.github.com/users/yury-s/repos","events_url":"https://api.github.com/users/yury-s/events{/privacy}","received_events_url":"https://api.github.com/users/yury-s/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/29839/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/microsoft/playwright/issues/29839/timeline","performed_via_github_app":null,"state_reason":"completed"}