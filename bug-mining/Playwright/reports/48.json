{"url":"https://api.github.com/repos/microsoft/playwright/issues/30616","repository_url":"https://api.github.com/repos/microsoft/playwright","labels_url":"https://api.github.com/repos/microsoft/playwright/issues/30616/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/playwright/issues/30616/comments","events_url":"https://api.github.com/repos/microsoft/playwright/issues/30616/events","html_url":"https://github.com/microsoft/playwright/issues/30616","id":2272844700,"node_id":"I_kwDODTssw86HeNuc","number":30616,"title":"[Bug]: element.tagName.toUpperCase is not a function","user":{"login":"juvarabrera","id":13174418,"node_id":"MDQ6VXNlcjEzMTc0NDE4","avatar_url":"https://avatars.githubusercontent.com/u/13174418?v=4","gravatar_id":"","url":"https://api.github.com/users/juvarabrera","html_url":"https://github.com/juvarabrera","followers_url":"https://api.github.com/users/juvarabrera/followers","following_url":"https://api.github.com/users/juvarabrera/following{/other_user}","gists_url":"https://api.github.com/users/juvarabrera/gists{/gist_id}","starred_url":"https://api.github.com/users/juvarabrera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/juvarabrera/subscriptions","organizations_url":"https://api.github.com/users/juvarabrera/orgs","repos_url":"https://api.github.com/users/juvarabrera/repos","events_url":"https://api.github.com/users/juvarabrera/events{/privacy}","received_events_url":"https://api.github.com/users/juvarabrera/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":6122462953,"node_id":"LA_kwDODTssw88AAAABbO1e6Q","url":"https://api.github.com/repos/microsoft/playwright/labels/v1.44","name":"v1.44","color":"000000","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dgozman","id":9881434,"node_id":"MDQ6VXNlcjk4ODE0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9881434?v=4","gravatar_id":"","url":"https://api.github.com/users/dgozman","html_url":"https://github.com/dgozman","followers_url":"https://api.github.com/users/dgozman/followers","following_url":"https://api.github.com/users/dgozman/following{/other_user}","gists_url":"https://api.github.com/users/dgozman/gists{/gist_id}","starred_url":"https://api.github.com/users/dgozman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dgozman/subscriptions","organizations_url":"https://api.github.com/users/dgozman/orgs","repos_url":"https://api.github.com/users/dgozman/repos","events_url":"https://api.github.com/users/dgozman/events{/privacy}","received_events_url":"https://api.github.com/users/dgozman/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"dgozman","id":9881434,"node_id":"MDQ6VXNlcjk4ODE0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9881434?v=4","gravatar_id":"","url":"https://api.github.com/users/dgozman","html_url":"https://github.com/dgozman","followers_url":"https://api.github.com/users/dgozman/followers","following_url":"https://api.github.com/users/dgozman/following{/other_user}","gists_url":"https://api.github.com/users/dgozman/gists{/gist_id}","starred_url":"https://api.github.com/users/dgozman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dgozman/subscriptions","organizations_url":"https://api.github.com/users/dgozman/orgs","repos_url":"https://api.github.com/users/dgozman/repos","events_url":"https://api.github.com/users/dgozman/events{/privacy}","received_events_url":"https://api.github.com/users/dgozman/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":4,"created_at":"2024-05-01T03:08:18Z","updated_at":"2024-05-02T17:05:09Z","closed_at":"2024-05-02T16:42:20Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Version\n\n1.40.1\n\n### Steps to reproduce\n\nWe have a big web application and we've been using Playwright for almost all pages. But there is one particular page that's showing this error in Playwright.\r\n\r\nI have this snippet that clicks this button\r\n```\r\nawait page.getByRole('button', {\r\n   name: Label.SAVE,\r\n   exact: true\r\n}).click()\r\n```\r\n\r\nThe button is visible in plain sight.\n\n### Expected behavior\n\nI just expect that the button is clicked. I've been using the `.click()` function to click thousands of buttons but any buttons in this particular page is not working. I'm not a dev that's working on this particular page so I'm not sure what's different\n\n### Actual behavior\n\nIt does not wait for the timeout to finish (10 seconds). It just shows the error right away.\r\n```\r\nError: expect.toBeVisible: TypeError: element.tagName.toUpperCase is not a function\r\n\r\n        at getImplicitAriaRole (<anonymous>:360:70)\r\n        at getAriaRole (<anonymous>:484:12)\r\n        at match (<anonymous>:2958:9)\r\n        at query (<anonymous>:2993:7)\r\n        at queryRole (<anonymous>:2999:3)\r\n        at Object.queryAll (<anonymous>:3012:16)\r\n        at InjectedScript._queryEngineAll (<anonymous>:4949:49)\r\n        at InjectedScript.querySelectorAll (<anonymous>:4936:30)\r\n        at eval (eval at evaluate (:226:30), <anonymous>:6:44)\r\n        at UtilityScript.evaluate (<anonymous>:228:17)\r\n    Call log:\r\n      - expect.toBeVisible with timeout 10000ms\r\n      - waiting for getByRole('button', { name: '保存する', exact: true })\r\n\r\n        at getImplicitAriaRole (C:\\Users\\Juvar\\Projects\\meetsmore\\proone\\tests\\e2e\\web\\<anonymous>:360:70)\r\n        at match (C:\\Users\\Juvar\\Projects\\meetsmore\\proone\\tests\\e2e\\web\\<anonymous>:2958:9)\r\n        at query (C:\\Users\\Juvar\\Projects\\meetsmore\\proone\\tests\\e2e\\web\\<anonymous>:2993:7)\r\n        at queryRole (C:\\Users\\Juvar\\Projects\\meetsmore\\proone\\tests\\e2e\\web\\<anonymous>:2999:3)\r\n        at Object.queryAll (C:\\Users\\Juvar\\Projects\\meetsmore\\proone\\tests\\e2e\\web\\<anonymous>:3012:16)\r\n        at InjectedScript._queryEngineAll (C:\\Users\\Juvar\\Projects\\meetsmore\\proone\\tests\\e2e\\web\\<anonymous>:4949:49)\r\n        at InjectedScript.querySelectorAll (C:\\Users\\Juvar\\Projects\\meetsmore\\proone\\tests\\e2e\\web\\<anonymous>:4936:30)\r\n        at eval (C:\\Users\\Juvar\\Projects\\meetsmore\\proone\\tests\\e2e\\web\\eval at evaluate (:226:30), <anonymous>:6:44)\r\n        at UtilityScript.evaluate (C:\\Users\\Juvar\\Projects\\meetsmore\\proone\\tests\\e2e\\web\\<anonymous>:228:17)\r\n        at path\\to\\test.spec.ts:20:70\r\n```\n\n### Additional context\n\nThe Save button. \r\n\r\n![image](https://github.com/microsoft/playwright/assets/13174418/0389b2db-756a-4a35-b51d-a7b8a47e6768)\r\n\r\n```\r\n<button class=\"some-classes ...\" tabindex=\"0\" type=\"submit\">保存する<span class=\"MuiTouchRipple-root css-w0pj6f\"></span></button>\r\n```\r\n\r\nAll buttons are like this in other pages but it works on other pages.\r\n\r\nI unfortunately cannot disclose the web application for you to try but please let me know what information you need to debug this.\n\n### Environment\n\n```shell\nSystem:\r\n    OS: Windows 11 10.0.22631\r\n    CPU: (8) x64 11th Gen Intel(R) Core(TM) i7-1165G7 @ 2.80GHz\r\n    Memory: 2.51 GB / 15.70 GB\r\n  Binaries:\r\n    Node: 20.11.0 - C:\\Program Files\\nodejs\\node.EXE\r\n    Yarn: 4.1.0 - C:\\Program Files\\nodejs\\yarn.CMD\r\n    npm: 10.2.4 - C:\\Program Files\\nodejs\\npm.CMD\r\n    pnpm: 9.0.5 - C:\\Program Files\\nodejs\\pnpm.CMD\r\n  IDEs:\r\n    VSCode: 1.88.1 - C:\\Users\\Juvar\\AppData\\Local\\Programs\\Microsoft VS Code\\bin\\code.CMD\r\n  npmPackages:\r\n    @playwright/test: ^1.40.1 => 1.42.1\n```\n","closed_by":{"login":"yury-s","id":9798949,"node_id":"MDQ6VXNlcjk3OTg5NDk=","avatar_url":"https://avatars.githubusercontent.com/u/9798949?v=4","gravatar_id":"","url":"https://api.github.com/users/yury-s","html_url":"https://github.com/yury-s","followers_url":"https://api.github.com/users/yury-s/followers","following_url":"https://api.github.com/users/yury-s/following{/other_user}","gists_url":"https://api.github.com/users/yury-s/gists{/gist_id}","starred_url":"https://api.github.com/users/yury-s/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yury-s/subscriptions","organizations_url":"https://api.github.com/users/yury-s/orgs","repos_url":"https://api.github.com/users/yury-s/repos","events_url":"https://api.github.com/users/yury-s/events{/privacy}","received_events_url":"https://api.github.com/users/yury-s/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/30616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/playwright/issues/30616/timeline","performed_via_github_app":null,"state_reason":"completed"}