{"url":"https://api.github.com/repos/microsoft/playwright/issues/32255","repository_url":"https://api.github.com/repos/microsoft/playwright","labels_url":"https://api.github.com/repos/microsoft/playwright/issues/32255/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/playwright/issues/32255/comments","events_url":"https://api.github.com/repos/microsoft/playwright/issues/32255/events","html_url":"https://github.com/microsoft/playwright/issues/32255","id":2479423496,"node_id":"I_kwDODTssw86TyQAI","number":32255,"title":"[Feature]: check locator handlers while retrying during `locator.waitFor`","user":{"login":"SUSAltd","id":6039518,"node_id":"MDQ6VXNlcjYwMzk1MTg=","avatar_url":"https://avatars.githubusercontent.com/u/6039518?v=4","gravatar_id":"","url":"https://api.github.com/users/SUSAltd","html_url":"https://github.com/SUSAltd","followers_url":"https://api.github.com/users/SUSAltd/followers","following_url":"https://api.github.com/users/SUSAltd/following{/other_user}","gists_url":"https://api.github.com/users/SUSAltd/gists{/gist_id}","starred_url":"https://api.github.com/users/SUSAltd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SUSAltd/subscriptions","organizations_url":"https://api.github.com/users/SUSAltd/orgs","repos_url":"https://api.github.com/users/SUSAltd/repos","events_url":"https://api.github.com/users/SUSAltd/events{/privacy}","received_events_url":"https://api.github.com/users/SUSAltd/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":7211040179,"node_id":"LA_kwDODTssw88AAAABrc-9sw","url":"https://api.github.com/repos/microsoft/playwright/labels/v1.48","name":"v1.48","color":"000000","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dgozman","id":9881434,"node_id":"MDQ6VXNlcjk4ODE0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9881434?v=4","gravatar_id":"","url":"https://api.github.com/users/dgozman","html_url":"https://github.com/dgozman","followers_url":"https://api.github.com/users/dgozman/followers","following_url":"https://api.github.com/users/dgozman/following{/other_user}","gists_url":"https://api.github.com/users/dgozman/gists{/gist_id}","starred_url":"https://api.github.com/users/dgozman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dgozman/subscriptions","organizations_url":"https://api.github.com/users/dgozman/orgs","repos_url":"https://api.github.com/users/dgozman/repos","events_url":"https://api.github.com/users/dgozman/events{/privacy}","received_events_url":"https://api.github.com/users/dgozman/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"dgozman","id":9881434,"node_id":"MDQ6VXNlcjk4ODE0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9881434?v=4","gravatar_id":"","url":"https://api.github.com/users/dgozman","html_url":"https://github.com/dgozman","followers_url":"https://api.github.com/users/dgozman/followers","following_url":"https://api.github.com/users/dgozman/following{/other_user}","gists_url":"https://api.github.com/users/dgozman/gists{/gist_id}","starred_url":"https://api.github.com/users/dgozman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dgozman/subscriptions","organizations_url":"https://api.github.com/users/dgozman/orgs","repos_url":"https://api.github.com/users/dgozman/repos","events_url":"https://api.github.com/users/dgozman/events{/privacy}","received_events_url":"https://api.github.com/users/dgozman/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":0,"created_at":"2024-08-21T23:35:10Z","updated_at":"2024-09-18T16:34:07Z","closed_at":"2024-09-18T16:34:07Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### ðŸš€ Feature Request\r\n\r\n(more of an enhancement than a feature)\r\n\r\n[According to the doc](https://playwright.dev/docs/api/class-page#page-add-locator-handler), locator handlers are checked when retrying actions with actionability checks, or auto-retrying assertions. I think this should also include `locator.waitFor`, since they are very similar to auto-retrying assertions.\r\n\r\n### Example\r\n\r\nI often use `locator.waitFor` in situations where using an `expect` would not be appropriate, e.g. in page fixtures (separation of \"test logic\" using page object model). However since `waitFor` does not trigger the locator handler check, I am forced to either replace it with an `expect` (which I prefer to avoid using in page fixtures) or something like `locator.click({ trial: true })` (which feels weird and out-of-place).\r\n\r\n### Motivation\r\n\r\nI originally was surprised to find that `waitFor` is not expected to trigger the locator handler check, and in my opinion it feels like a bit of an oversight. Checking locator handlers during `waitFor` would help make the behavior of `addLocatorHandler` more consistent and predictable, especially since `waitFor` is so functionally similar to auto-retrying assertions.","closed_by":{"login":"dgozman","id":9881434,"node_id":"MDQ6VXNlcjk4ODE0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9881434?v=4","gravatar_id":"","url":"https://api.github.com/users/dgozman","html_url":"https://github.com/dgozman","followers_url":"https://api.github.com/users/dgozman/followers","following_url":"https://api.github.com/users/dgozman/following{/other_user}","gists_url":"https://api.github.com/users/dgozman/gists{/gist_id}","starred_url":"https://api.github.com/users/dgozman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dgozman/subscriptions","organizations_url":"https://api.github.com/users/dgozman/orgs","repos_url":"https://api.github.com/users/dgozman/repos","events_url":"https://api.github.com/users/dgozman/events{/privacy}","received_events_url":"https://api.github.com/users/dgozman/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/32255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/playwright/issues/32255/timeline","performed_via_github_app":null,"state_reason":"completed"}