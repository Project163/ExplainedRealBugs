{"url":"https://api.github.com/repos/microsoft/playwright/issues/31335","repository_url":"https://api.github.com/repos/microsoft/playwright","labels_url":"https://api.github.com/repos/microsoft/playwright/issues/31335/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/playwright/issues/31335/comments","events_url":"https://api.github.com/repos/microsoft/playwright/issues/31335/events","html_url":"https://github.com/microsoft/playwright/issues/31335","id":2357630827,"node_id":"I_kwDODTssw86Mhpdr","number":31335,"title":"[Bug]: Click on visible element fails due to timeout in visibility check","user":{"login":"fabianboth","id":7467076,"node_id":"MDQ6VXNlcjc0NjcwNzY=","avatar_url":"https://avatars.githubusercontent.com/u/7467076?v=4","gravatar_id":"","url":"https://api.github.com/users/fabianboth","html_url":"https://github.com/fabianboth","followers_url":"https://api.github.com/users/fabianboth/followers","following_url":"https://api.github.com/users/fabianboth/following{/other_user}","gists_url":"https://api.github.com/users/fabianboth/gists{/gist_id}","starred_url":"https://api.github.com/users/fabianboth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fabianboth/subscriptions","organizations_url":"https://api.github.com/users/fabianboth/orgs","repos_url":"https://api.github.com/users/fabianboth/repos","events_url":"https://api.github.com/users/fabianboth/events{/privacy}","received_events_url":"https://api.github.com/users/fabianboth/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":6980424585,"node_id":"LA_kwDODTssw88AAAABoBDTiQ","url":"https://api.github.com/repos/microsoft/playwright/labels/v1.46","name":"v1.46","color":"000000","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dgozman","id":9881434,"node_id":"MDQ6VXNlcjk4ODE0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9881434?v=4","gravatar_id":"","url":"https://api.github.com/users/dgozman","html_url":"https://github.com/dgozman","followers_url":"https://api.github.com/users/dgozman/followers","following_url":"https://api.github.com/users/dgozman/following{/other_user}","gists_url":"https://api.github.com/users/dgozman/gists{/gist_id}","starred_url":"https://api.github.com/users/dgozman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dgozman/subscriptions","organizations_url":"https://api.github.com/users/dgozman/orgs","repos_url":"https://api.github.com/users/dgozman/repos","events_url":"https://api.github.com/users/dgozman/events{/privacy}","received_events_url":"https://api.github.com/users/dgozman/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"dgozman","id":9881434,"node_id":"MDQ6VXNlcjk4ODE0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9881434?v=4","gravatar_id":"","url":"https://api.github.com/users/dgozman","html_url":"https://github.com/dgozman","followers_url":"https://api.github.com/users/dgozman/followers","following_url":"https://api.github.com/users/dgozman/following{/other_user}","gists_url":"https://api.github.com/users/dgozman/gists{/gist_id}","starred_url":"https://api.github.com/users/dgozman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dgozman/subscriptions","organizations_url":"https://api.github.com/users/dgozman/orgs","repos_url":"https://api.github.com/users/dgozman/repos","events_url":"https://api.github.com/users/dgozman/events{/privacy}","received_events_url":"https://api.github.com/users/dgozman/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2024-06-17T15:27:31Z","updated_at":"2024-07-08T16:07:26Z","closed_at":"2024-07-08T16:07:26Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Version\r\n\r\n1.43.1\r\n\r\n### Steps to reproduce\r\n\r\n```\r\n  import { chromium } from \"playwright-core\";\r\n\r\n  const browser = await chromium.launch();\r\n  const tab = await browser.newPage();\r\n\r\n  await tab.goto(\"https://www.nivus-rain.com/#nivus\");\r\n  await tab.getByTestId(\"uc-accept-all-button\").click();\r\n  await tab.waitForTimeout(3_000);\r\n\r\n  const locator = tab.getByRole(\"link\", { name: \"Button_english_Desktop\" });\r\n  await locator.click({ timeout: 5_000 });\r\n```\r\n\r\n### Expected behavior\r\n\r\nThe change language button should be clicked correctly, as this can also be clicked with the mouse.\r\n\r\n### Actual behavior\r\n\r\nThis test is clicking the change language button (e.g. changing to english, this might differ based on your current region).\r\nThe button is clickable with the mouse, but the playwright click is not working.\r\n\r\n### Additional context\r\n\r\nI assume the reason is that the parent has a size of 0x0 and also has the same locator as the actual language flag.\r\n\r\n\r\n![image](https://github.com/microsoft/playwright/assets/7467076/040caf2f-68fb-4bda-98e5-d66cf1f3d355)\r\n\r\n\r\n### Environment\r\n\r\n```shell\r\nSystem:\r\n    OS: Linux 6.5 Ubuntu 22.04.4 LTS 22.04.4 LTS (Jammy Jellyfish)\r\n    CPU: (16) x64 11th Gen Intel(R) Core(TM) i9-11950H @ 2.60GHz\r\n    Memory: 18.95 GB / 31.05 GB\r\n    Container: Yes\r\n  Binaries:\r\n    Node: 20.9.0 - ~/.nvm/versions/node/v20.9.0/bin/node\r\n    npm: 10.1.0 - ~/.nvm/versions/node/v20.9.0/bin/npm\r\n    pnpm: 9.0.6 - ~/.nvm/versions/node/v20.9.0/bin/pnpm\r\n  IDEs:\r\n    VSCode: 1.90.1 - /snap/bin/code\r\n  Languages:\r\n    Bash: 5.1.16 - /usr/bin/bash\r\n  # playwright managed by pnpm\r\n```\r\n","closed_by":{"login":"dgozman","id":9881434,"node_id":"MDQ6VXNlcjk4ODE0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9881434?v=4","gravatar_id":"","url":"https://api.github.com/users/dgozman","html_url":"https://github.com/dgozman","followers_url":"https://api.github.com/users/dgozman/followers","following_url":"https://api.github.com/users/dgozman/following{/other_user}","gists_url":"https://api.github.com/users/dgozman/gists{/gist_id}","starred_url":"https://api.github.com/users/dgozman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dgozman/subscriptions","organizations_url":"https://api.github.com/users/dgozman/orgs","repos_url":"https://api.github.com/users/dgozman/repos","events_url":"https://api.github.com/users/dgozman/events{/privacy}","received_events_url":"https://api.github.com/users/dgozman/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/31335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/playwright/issues/31335/timeline","performed_via_github_app":null,"state_reason":"completed"}