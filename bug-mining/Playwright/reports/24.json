{"url":"https://api.github.com/repos/microsoft/playwright/issues/29846","repository_url":"https://api.github.com/repos/microsoft/playwright","labels_url":"https://api.github.com/repos/microsoft/playwright/issues/29846/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/playwright/issues/29846/comments","events_url":"https://api.github.com/repos/microsoft/playwright/issues/29846/events","html_url":"https://github.com/microsoft/playwright/issues/29846","id":2174339277,"node_id":"I_kwDODTssw86BmcjN","number":29846,"title":"[Bug]: Session Storage Stops Working in Playwright Interactive (But Running in CLI Mode Fixes It)","user":{"login":"jwalkerinterpres","id":152227747,"node_id":"U_kgDOCRLPow","avatar_url":"https://avatars.githubusercontent.com/u/152227747?v=4","gravatar_id":"","url":"https://api.github.com/users/jwalkerinterpres","html_url":"https://github.com/jwalkerinterpres","followers_url":"https://api.github.com/users/jwalkerinterpres/followers","following_url":"https://api.github.com/users/jwalkerinterpres/following{/other_user}","gists_url":"https://api.github.com/users/jwalkerinterpres/gists{/gist_id}","starred_url":"https://api.github.com/users/jwalkerinterpres/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jwalkerinterpres/subscriptions","organizations_url":"https://api.github.com/users/jwalkerinterpres/orgs","repos_url":"https://api.github.com/users/jwalkerinterpres/repos","events_url":"https://api.github.com/users/jwalkerinterpres/events{/privacy}","received_events_url":"https://api.github.com/users/jwalkerinterpres/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":5070007614,"node_id":"LA_kwDODTssw88AAAABLjItPg","url":"https://api.github.com/repos/microsoft/playwright/labels/open-to-a-pull-request","name":"open-to-a-pull-request","color":"C2E0C6","default":false,"description":"The feature request looks good, we are open to reviewing a PR"},{"id":6122462647,"node_id":"LA_kwDODTssw88AAAABbO1dtw","url":"https://api.github.com/repos/microsoft/playwright/labels/v1.43","name":"v1.43","color":"000000","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dgozman","id":9881434,"node_id":"MDQ6VXNlcjk4ODE0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9881434?v=4","gravatar_id":"","url":"https://api.github.com/users/dgozman","html_url":"https://github.com/dgozman","followers_url":"https://api.github.com/users/dgozman/followers","following_url":"https://api.github.com/users/dgozman/following{/other_user}","gists_url":"https://api.github.com/users/dgozman/gists{/gist_id}","starred_url":"https://api.github.com/users/dgozman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dgozman/subscriptions","organizations_url":"https://api.github.com/users/dgozman/orgs","repos_url":"https://api.github.com/users/dgozman/repos","events_url":"https://api.github.com/users/dgozman/events{/privacy}","received_events_url":"https://api.github.com/users/dgozman/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"dgozman","id":9881434,"node_id":"MDQ6VXNlcjk4ODE0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9881434?v=4","gravatar_id":"","url":"https://api.github.com/users/dgozman","html_url":"https://github.com/dgozman","followers_url":"https://api.github.com/users/dgozman/followers","following_url":"https://api.github.com/users/dgozman/following{/other_user}","gists_url":"https://api.github.com/users/dgozman/gists{/gist_id}","starred_url":"https://api.github.com/users/dgozman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dgozman/subscriptions","organizations_url":"https://api.github.com/users/dgozman/orgs","repos_url":"https://api.github.com/users/dgozman/repos","events_url":"https://api.github.com/users/dgozman/events{/privacy}","received_events_url":"https://api.github.com/users/dgozman/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":4,"created_at":"2024-03-07T17:06:21Z","updated_at":"2024-03-12T18:06:11Z","closed_at":"2024-03-12T18:04:23Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Version\r\n\r\n1.42.1\r\n\r\n### Steps to reproduce\r\n\r\n1. Follow the steps at https://playwright.dev/docs/auth#session-storage to create a session storage authentication test which your other tests depend on\r\n2. Make the storage/auth test login to your site\r\n3. Everything works great (in either the interactive or CLI tests!\r\n4. ... a few hours later (presumably when the session has timed out) ...\r\n5. Try running tests again, in the interactive test runner\r\n6. All fail because you aren't logged in\r\n7. Run your test suite at the command line\r\n8. Tests pass\r\n9. Now run your test suite in the interactive runner\r\n10. Tests pass\r\n\r\n### Expected behavior\r\n\r\nWhen the session expires Playwright reruns the auth test and gets a fresh session.  Failing that, Playwright at least gives me some way to force the auth test to rerun when I hit this bug, so I can do some sort of try/catch to fix it when broken.\r\n\r\n### Actual behavior\r\n\r\nNo auth is run and there's no way for me as a user to make it run ... except (mysteriously) to run the tests at the command line.\r\n\r\n### Additional context\r\n\r\nI know how this is going to go:\r\n\r\n1. You're going to say \"there's no repro\"\r\n2. I'll say \"I can't put my entire site and test suite into a repro\"\r\n3. You'll say \"we only care about the 1% of Playwright bugs that can be easily reproduced; we can't/won't address the other 99%\"\r\n4. You'll close this ticket\r\n\r\nBut before you do ... is there any chance you can offer any insight into what's going on, or how to resolve it?\r\n\r\nIf you can offer any insight into how the interactive test runner runs setup/dependent tests differently from the CLI runner, or even just how Playwright decides when to rerun the session-generating auth/session \"tests\" (or even if you could just point me to where in the code I could see it myself), it would be greatly appreciated.\r\n\r\nIn fact, a simple (like one paragraph) explanation of how sessions expire and are renewed would make a _great_ addition to https://playwright.dev/docs/auth#session-storage.\r\n\r\n### Environment\r\n\r\n```shell\r\nSystem:\r\n    OS: macOS 14.3.1\r\n    CPU: (10) arm64 Apple M1 Max\r\n    Memory: 6.76 GB / 32.00 GB\r\n  Binaries:\r\n    Node: 21.2.0 - /usr/local/bin/node\r\n    Yarn: 1.22.21 - /usr/local/bin/yarn\r\n    npm: 10.2.3 - /usr/local/bin/npm\r\n  IDEs:\r\n    VSCode: 1.87.0 - /usr/local/bin/code\r\n  Languages:\r\n    Bash: 3.2.57 - /bin/bash\r\n```\r\n","closed_by":{"login":"dgozman","id":9881434,"node_id":"MDQ6VXNlcjk4ODE0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9881434?v=4","gravatar_id":"","url":"https://api.github.com/users/dgozman","html_url":"https://github.com/dgozman","followers_url":"https://api.github.com/users/dgozman/followers","following_url":"https://api.github.com/users/dgozman/following{/other_user}","gists_url":"https://api.github.com/users/dgozman/gists{/gist_id}","starred_url":"https://api.github.com/users/dgozman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dgozman/subscriptions","organizations_url":"https://api.github.com/users/dgozman/orgs","repos_url":"https://api.github.com/users/dgozman/repos","events_url":"https://api.github.com/users/dgozman/events{/privacy}","received_events_url":"https://api.github.com/users/dgozman/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/29846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/playwright/issues/29846/timeline","performed_via_github_app":null,"state_reason":"completed"}