[{"id":11083169989,"node_id":"RTE_lADODTssw854ELWAzwAAAAKUm8DF","url":"https://api.github.com/repos/microsoft/playwright/issues/events/11083169989","actor":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2023-11-28T12:50:46Z","rename":{"from":"Allow toHaveScreenshot to disable the need for to consecutive matching screenshots","to":"Allow toHaveScreenshot to disable the need for two consecutive matching screenshots"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830134218","html_url":"https://github.com/microsoft/playwright/issues/28375#issuecomment-1830134218","issue_url":"https://api.github.com/repos/microsoft/playwright/issues/28375","id":1830134218,"node_id":"IC_kwDODTssw85tFaHK","user":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-28T15:50:15Z","updated_at":"2023-11-28T15:50:15Z","body":"Possibly related: https://github.com/microsoft/playwright/issues/20987","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830134218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830199291","html_url":"https://github.com/microsoft/playwright/issues/28375#issuecomment-1830199291","issue_url":"https://api.github.com/repos/microsoft/playwright/issues/28375","id":1830199291,"node_id":"IC_kwDODTssw85tFp_7","user":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-28T16:15:53Z","updated_at":"2023-11-28T16:15:53Z","body":"@anoblet wouldn't your tests be inherently racy if the image is changing under your feet?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830199291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11085834058,"node_id":"MEE_lADODTssw854ELWAzwAAAAKUxGdK","url":"https://api.github.com/repos/microsoft/playwright/issues/events/11085834058","actor":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-11-28T16:15:54Z","performed_via_github_app":null},{"id":11085834086,"node_id":"SE_lADODTssw854ELWAzwAAAAKUxGdm","url":"https://api.github.com/repos/microsoft/playwright/issues/events/11085834086","actor":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-11-28T16:15:54Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830245347","html_url":"https://github.com/microsoft/playwright/issues/28375#issuecomment-1830245347","issue_url":"https://api.github.com/repos/microsoft/playwright/issues/28375","id":1830245347,"node_id":"IC_kwDODTssw85tF1Pj","user":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-28T16:28:06Z","updated_at":"2023-11-28T16:30:50Z","body":"Our test is extremely simple:\r\n\r\n```\r\nimport { test, expect } from '@playwright/test';\r\n\r\ntest('index', async ({ page }) => {\r\n  await page.goto('https://www.example.com/');\r\n  await expect.soft(async () => {\r\n    await expect(page).toHaveScreenshot();\r\n  }).toPass();\r\n});\r\n```\r\n\r\nIntermittent failures occur on three separate applications we host. If I run the tests in debug mode, I see no layout shifting or animations of any kind.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830245347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830273008","html_url":"https://github.com/microsoft/playwright/issues/28375#issuecomment-1830273008","issue_url":"https://api.github.com/repos/microsoft/playwright/issues/28375","id":1830273008,"node_id":"IC_kwDODTssw85tF7_w","user":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-28T16:43:09Z","updated_at":"2023-11-28T16:43:09Z","body":"Side note, you should not be wrapping awaiting assertions with awaiting assertions, you probably want\r\n```js\r\nawait expect.soft(page).toHaveScreenshot();\r\n```\r\n\r\nSo I am still not sure how matching consecutive screenshots is in your way. Could you elaborate?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830273008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830343004","html_url":"https://github.com/microsoft/playwright/issues/28375#issuecomment-1830343004","issue_url":"https://api.github.com/repos/microsoft/playwright/issues/28375","id":1830343004,"node_id":"IC_kwDODTssw85tGNFc","user":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-28T17:23:28Z","updated_at":"2023-11-29T14:21:03Z","body":"Using that code, the test will fail. I used the wrapping assertions as suggested here: https://github.com/microsoft/playwright/issues/20987#issuecomment-1444169452\r\n\r\nThis automatically retries the assertion, though when I run it, I get a never ending loop of failed assertions.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830343004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830392084","html_url":"https://github.com/microsoft/playwright/issues/28375#issuecomment-1830392084","issue_url":"https://api.github.com/repos/microsoft/playwright/issues/28375","id":1830392084,"node_id":"IC_kwDODTssw85tGZEU","user":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-28T17:56:10Z","updated_at":"2023-11-28T17:56:10Z","body":"Can we go back to the original issue of consecutive matching snapshots? Or better yet tell us what you expect, is it a bug or a feature, what is expected and what is actually happening? Share a self-contained example that we can run locally to understand the issue as well.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830392084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830849151","html_url":"https://github.com/microsoft/playwright/issues/28375#issuecomment-1830849151","issue_url":"https://api.github.com/repos/microsoft/playwright/issues/28375","id":1830849151,"node_id":"IC_kwDODTssw85tIIp_","user":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-28T22:18:46Z","updated_at":"2023-11-29T15:16:32Z","body":"I'm not sure if it's a bug, or if there's something particular on our sites that causing this to happen. We expect `screenshot` and `toHaveScreenshot` to not time out. Here are the URL we are testing:\r\n\r\nhttps://cxl.com/\r\nhttps://cxl.com/blog\r\nhttps://cxl.com/institute\r\n\r\nRoot and blog are on one instance of Wordpress. Institute is on another.\r\n\r\nA simple test like this will time out:\r\n\r\n```\r\nimport { test, expect } from '@playwright/test';\r\n\r\ntest('index', async ({ page }) => {\r\n  await page.goto('https://cxl.com/institute/');\r\n  await expect(page).toHaveScreenshot();\r\n});\r\n```\r\n\r\nThank you for your help!\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830849151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830866378","html_url":"https://github.com/microsoft/playwright/issues/28375#issuecomment-1830866378","issue_url":"https://api.github.com/repos/microsoft/playwright/issues/28375","id":1830866378,"node_id":"IC_kwDODTssw85tIM3K","user":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-28T22:34:34Z","updated_at":"2023-11-28T22:34:34Z","body":"When doing visual regression testing, you need to wait for the page to get into the loaded state prior to taking the screenshot. I just tried running your test and I have got this:\r\n\r\n![wall](https://github.com/microsoft/playwright/assets/883973/9080eaba-99cf-4734-b61a-832570505ffe)\r\n\r\nAs far as Playwright is concerned, the page has finished loading, but while being behind the cloudflare wall, anything can happen, including invitation for the user to interact with the spam detector. You should use other web assertions (wait for intercom manager icon to appear) prior to taking screenshot.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830866378/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830905343","html_url":"https://github.com/microsoft/playwright/issues/28375#issuecomment-1830905343","issue_url":"https://api.github.com/repos/microsoft/playwright/issues/28375","id":1830905343,"node_id":"IC_kwDODTssw85tIWX_","user":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-28T23:11:21Z","updated_at":"2023-11-29T14:21:42Z","body":"We've proxied these requests through a whitelisted IP, and get the same result. Running these tests locally in debug mode, I'm able to see the actual page, though when taking the screenshot it times out.\r\n\r\nWe can retry the test over and over indefinitely, even with the update snapshots flag, though every time it never satisfies the `toPass` function and continues to time out.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1830905343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1831022279","html_url":"https://github.com/microsoft/playwright/issues/28375#issuecomment-1831022279","issue_url":"https://api.github.com/repos/microsoft/playwright/issues/28375","id":1831022279,"node_id":"IC_kwDODTssw85tIy7H","user":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T00:55:33Z","updated_at":"2023-11-29T00:55:33Z","body":"Is there a way for us to reproduce this? Now you are saying that even taking a screenshot sometimes times out, so consecutive screenshot comparison does not seem to be the issue? We can't act on it unless we have a clear problem definition and ability to repro.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1831022279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1831896533","html_url":"https://github.com/microsoft/playwright/issues/28375#issuecomment-1831896533","issue_url":"https://api.github.com/repos/microsoft/playwright/issues/28375","id":1831896533,"node_id":"IC_kwDODTssw85tMIXV","user":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T13:27:36Z","updated_at":"2023-11-30T05:55:57Z","body":"In this video, the screenshot is successfully taken, though the assertion times out. I will work on seeing if there is a way to give you proxy access to bypass Cloudflare. My assumption is, that even if you hit Cloudflare, Playwright should be able to at least take a screenshot of the interstitial.\r\n\r\nhttps://www.loom.com/share/83fb7a536cc94f458aa098f7a3cf8c00?sid=a36cb867-c4f0-471f-88b4-c8f76688bae8","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1831896533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11098379657,"node_id":"RTE_lADODTssw854ELWAzwAAAAKVg9WJ","url":"https://api.github.com/repos/microsoft/playwright/issues/events/11098379657","actor":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2023-11-29T15:56:45Z","rename":{"from":"Allow toHaveScreenshot to disable the need for two consecutive matching screenshots","to":"[BUG] page.screenshot() takes 45s on https://cxl.com/institute/"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1832190331","html_url":"https://github.com/microsoft/playwright/issues/28375#issuecomment-1832190331","issue_url":"https://api.github.com/repos/microsoft/playwright/issues/28375","id":1832190331,"node_id":"IC_kwDODTssw85tNQF7","user":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T15:57:55Z","updated_at":"2023-11-29T15:57:55Z","body":"Screenshot should not take 45s, so something is wrong. I can't however repro it because of the cloudflare wall.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1832190331/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":2},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1836051073","html_url":"https://github.com/microsoft/playwright/issues/28375#issuecomment-1836051073","issue_url":"https://api.github.com/repos/microsoft/playwright/issues/28375","id":1836051073,"node_id":"IC_kwDODTssw85tb-qB","user":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-01T12:37:17Z","updated_at":"2023-12-01T12:37:17Z","body":"We've set up a proxy server that is whitelisted. Is there an appropriate way to give you credentials?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1836051073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-01T13:07:43Z","updated_at":"2023-12-01T13:07:43Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/microsoft/playwright/issues/27068","repository_url":"https://api.github.com/repos/microsoft/playwright","labels_url":"https://api.github.com/repos/microsoft/playwright/issues/27068/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/playwright/issues/27068/comments","events_url":"https://api.github.com/repos/microsoft/playwright/issues/27068/events","html_url":"https://github.com/microsoft/playwright/issues/27068","id":1895918477,"node_id":"I_kwDODTssw85xAWuN","number":27068,"title":"[BUG] very slow screenshot comparison","user":{"login":"DudaGod","id":5900697,"node_id":"MDQ6VXNlcjU5MDA2OTc=","avatar_url":"https://avatars.githubusercontent.com/u/5900697?v=4","gravatar_id":"","url":"https://api.github.com/users/DudaGod","html_url":"https://github.com/DudaGod","followers_url":"https://api.github.com/users/DudaGod/followers","following_url":"https://api.github.com/users/DudaGod/following{/other_user}","gists_url":"https://api.github.com/users/DudaGod/gists{/gist_id}","starred_url":"https://api.github.com/users/DudaGod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DudaGod/subscriptions","organizations_url":"https://api.github.com/users/DudaGod/orgs","repos_url":"https://api.github.com/users/DudaGod/repos","events_url":"https://api.github.com/users/DudaGod/events{/privacy}","received_events_url":"https://api.github.com/users/DudaGod/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":3606382663,"node_id":"LA_kwDODTssw87W9QhH","url":"https://api.github.com/repos/microsoft/playwright/labels/feature-visual-regression-testing","name":"feature-visual-regression-testing","color":"D4C5F9","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"yury-s","id":9798949,"node_id":"MDQ6VXNlcjk3OTg5NDk=","avatar_url":"https://avatars.githubusercontent.com/u/9798949?v=4","gravatar_id":"","url":"https://api.github.com/users/yury-s","html_url":"https://github.com/yury-s","followers_url":"https://api.github.com/users/yury-s/followers","following_url":"https://api.github.com/users/yury-s/following{/other_user}","gists_url":"https://api.github.com/users/yury-s/gists{/gist_id}","starred_url":"https://api.github.com/users/yury-s/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yury-s/subscriptions","organizations_url":"https://api.github.com/users/yury-s/orgs","repos_url":"https://api.github.com/users/yury-s/repos","events_url":"https://api.github.com/users/yury-s/events{/privacy}","received_events_url":"https://api.github.com/users/yury-s/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"yury-s","id":9798949,"node_id":"MDQ6VXNlcjk3OTg5NDk=","avatar_url":"https://avatars.githubusercontent.com/u/9798949?v=4","gravatar_id":"","url":"https://api.github.com/users/yury-s","html_url":"https://github.com/yury-s","followers_url":"https://api.github.com/users/yury-s/followers","following_url":"https://api.github.com/users/yury-s/following{/other_user}","gists_url":"https://api.github.com/users/yury-s/gists{/gist_id}","starred_url":"https://api.github.com/users/yury-s/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yury-s/subscriptions","organizations_url":"https://api.github.com/users/yury-s/orgs","repos_url":"https://api.github.com/users/yury-s/repos","events_url":"https://api.github.com/users/yury-s/events{/privacy}","received_events_url":"https://api.github.com/users/yury-s/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":18,"created_at":"2023-09-14T07:31:35Z","updated_at":"2025-05-12T09:22:20Z","closed_at":null,"author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":221981891,"node_id":"MDEwOlJlcG9zaXRvcnkyMjE5ODE4OTE=","name":"playwright","full_name":"microsoft/playwright","private":false,"owner":{"login":"microsoft","id":6154722,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6154722?v=4","gravatar_id":"","url":"https://api.github.com/users/microsoft","html_url":"https://github.com/microsoft","followers_url":"https://api.github.com/users/microsoft/followers","following_url":"https://api.github.com/users/microsoft/following{/other_user}","gists_url":"https://api.github.com/users/microsoft/gists{/gist_id}","starred_url":"https://api.github.com/users/microsoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/microsoft/subscriptions","organizations_url":"https://api.github.com/users/microsoft/orgs","repos_url":"https://api.github.com/users/microsoft/repos","events_url":"https://api.github.com/users/microsoft/events{/privacy}","received_events_url":"https://api.github.com/users/microsoft/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/microsoft/playwright","description":"Playwright is a framework for Web Testing and Automation. It allows testing Chromium, Firefox and WebKit with a single API. ","fork":false,"url":"https://api.github.com/repos/microsoft/playwright","forks_url":"https://api.github.com/repos/microsoft/playwright/forks","keys_url":"https://api.github.com/repos/microsoft/playwright/keys{/key_id}","collaborators_url":"https://api.github.com/repos/microsoft/playwright/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/microsoft/playwright/teams","hooks_url":"https://api.github.com/repos/microsoft/playwright/hooks","issue_events_url":"https://api.github.com/repos/microsoft/playwright/issues/events{/number}","events_url":"https://api.github.com/repos/microsoft/playwright/events","assignees_url":"https://api.github.com/repos/microsoft/playwright/assignees{/user}","branches_url":"https://api.github.com/repos/microsoft/playwright/branches{/branch}","tags_url":"https://api.github.com/repos/microsoft/playwright/tags","blobs_url":"https://api.github.com/repos/microsoft/playwright/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/microsoft/playwright/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/microsoft/playwright/git/refs{/sha}","trees_url":"https://api.github.com/repos/microsoft/playwright/git/trees{/sha}","statuses_url":"https://api.github.com/repos/microsoft/playwright/statuses/{sha}","languages_url":"https://api.github.com/repos/microsoft/playwright/languages","stargazers_url":"https://api.github.com/repos/microsoft/playwright/stargazers","contributors_url":"https://api.github.com/repos/microsoft/playwright/contributors","subscribers_url":"https://api.github.com/repos/microsoft/playwright/subscribers","subscription_url":"https://api.github.com/repos/microsoft/playwright/subscription","commits_url":"https://api.github.com/repos/microsoft/playwright/commits{/sha}","git_commits_url":"https://api.github.com/repos/microsoft/playwright/git/commits{/sha}","comments_url":"https://api.github.com/repos/microsoft/playwright/comments{/number}","issue_comment_url":"https://api.github.com/repos/microsoft/playwright/issues/comments{/number}","contents_url":"https://api.github.com/repos/microsoft/playwright/contents/{+path}","compare_url":"https://api.github.com/repos/microsoft/playwright/compare/{base}...{head}","merges_url":"https://api.github.com/repos/microsoft/playwright/merges","archive_url":"https://api.github.com/repos/microsoft/playwright/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/microsoft/playwright/downloads","issues_url":"https://api.github.com/repos/microsoft/playwright/issues{/number}","pulls_url":"https://api.github.com/repos/microsoft/playwright/pulls{/number}","milestones_url":"https://api.github.com/repos/microsoft/playwright/milestones{/number}","notifications_url":"https://api.github.com/repos/microsoft/playwright/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/microsoft/playwright/labels{/name}","releases_url":"https://api.github.com/repos/microsoft/playwright/releases{/id}","deployments_url":"https://api.github.com/repos/microsoft/playwright/deployments","created_at":"2019-11-15T18:32:42Z","updated_at":"2025-11-09T20:37:29Z","pushed_at":"2025-11-08T00:38:15Z","git_url":"git://github.com/microsoft/playwright.git","ssh_url":"git@github.com:microsoft/playwright.git","clone_url":"https://github.com/microsoft/playwright.git","svn_url":"https://github.com/microsoft/playwright","homepage":"https://playwright.dev","size":219054,"stargazers_count":79140,"watchers_count":79140,"language":"TypeScript","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":4802,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":564,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":["automation","chrome","chromium","e2e-testing","electron","end-to-end-testing","firefox","javascript","playwright","test","test-automation","testing","testing-tools","web","webkit"],"visibility":"public","forks":4802,"open_issues":564,"watchers":79140,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### System info\r\n- Playwright Version: v1.37.1\r\n- Operating System: macOS 12.3\r\n- Browser: Chromium\r\n\r\n### Source code\r\n\r\n**Config file**\r\n\r\n```js\r\n// playwright.config.ts\r\nimport { defineConfig, devices } from '@playwright/test';\r\n\r\nexport default defineConfig({\r\n  projects: [\r\n    {\r\n      name: 'chromium',\r\n      use: { ...devices['Desktop Chrome'], },\r\n    },\r\n  ]\r\n});\r\n```\r\n\r\n**Test file (self-contained)**\r\n\r\n```js\r\nimport { test, expect } from '@playwright/test';\r\n\r\ntest('test long page', async ({page}) => {\r\n    await page.setViewportSize({\r\n        width: 1280,\r\n        height: 1024,\r\n    });\r\n\r\n    await page.goto('https://bank.yandex.ru');\r\n\r\n    await expect(page).toHaveScreenshot('foo.png', {fullPage: true, animations: 'disabled'});\r\n});\r\n```\r\n\r\n**Steps**\r\n- Run the test (screenshot accepted\r\n- Change viewport width to 1075 (for example) in order to get screenshot difference\r\n- Run the test again -> screenshot comparison takes more than 5000 ms in most cases\r\n\r\n**Expected**\r\n\r\n[Describe expected behavior]\r\n\r\nComparing screenshots takes less than 5 seconds and no unnecessary comparisons are made under the hood\r\n\r\n[Describe actual behavior]\r\n\r\nTest fails when taking a screenshot (timeout).\r\n\r\nI looked at the [code sources](https://github.com/microsoft/playwright/blob/main/packages/playwright-core/src/server/page.ts#L550-L571) and found that when the reference and the current image do not match, a comparison is made between the two screenshots just taken (previous actual and new actual). It takes a lot of time (more than 5 sec). For what purpose is this done? Is it possible not to do this?\r\n\r\nWhat takes the most time:\r\n- screenshot page - ~1-2 sec (x2, for actual and previous actual)\r\n- compare with pixelmatch - ~2-3 sec (x2, compare actual with reference and actual with previous actual)","reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/27068/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/playwright/issues/27068/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1836446288","html_url":"https://github.com/microsoft/playwright/issues/28375#issuecomment-1836446288","issue_url":"https://api.github.com/repos/microsoft/playwright/issues/28375","id":1836446288,"node_id":"IC_kwDODTssw85tdfJQ","user":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-01T16:46:55Z","updated_at":"2023-12-01T17:40:55Z","body":"I was able to narrow it down to just the Chrome browser. I have disabled it, and we now have successful tests.\r\n\r\nPossibly related: https://github.com/microsoft/playwright/issues/12711","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/comments/1836446288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"anoblet","id":7674171,"node_id":"MDQ6VXNlcjc2NzQxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/7674171?v=4","gravatar_id":"","url":"https://api.github.com/users/anoblet","html_url":"https://github.com/anoblet","followers_url":"https://api.github.com/users/anoblet/followers","following_url":"https://api.github.com/users/anoblet/following{/other_user}","gists_url":"https://api.github.com/users/anoblet/gists{/gist_id}","starred_url":"https://api.github.com/users/anoblet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anoblet/subscriptions","organizations_url":"https://api.github.com/users/anoblet/orgs","repos_url":"https://api.github.com/users/anoblet/repos","events_url":"https://api.github.com/users/anoblet/events{/privacy}","received_events_url":"https://api.github.com/users/anoblet/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-01T23:03:42Z","updated_at":"2023-12-01T23:03:42Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/microsoft/playwright/issues/28460","repository_url":"https://api.github.com/repos/microsoft/playwright","labels_url":"https://api.github.com/repos/microsoft/playwright/issues/28460/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/playwright/issues/28460/comments","events_url":"https://api.github.com/repos/microsoft/playwright/issues/28460/events","html_url":"https://github.com/microsoft/playwright/pull/28460","id":2021701540,"node_id":"PR_kwDODTssw85g8UwX","number":28460,"title":"fix: speed up caret hiding while screenshotting","user":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-12-01T23:03:41Z","updated_at":"2023-12-04T05:06:41Z","closed_at":"2023-12-04T05:06:40Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":221981891,"node_id":"MDEwOlJlcG9zaXRvcnkyMjE5ODE4OTE=","name":"playwright","full_name":"microsoft/playwright","private":false,"owner":{"login":"microsoft","id":6154722,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6154722?v=4","gravatar_id":"","url":"https://api.github.com/users/microsoft","html_url":"https://github.com/microsoft","followers_url":"https://api.github.com/users/microsoft/followers","following_url":"https://api.github.com/users/microsoft/following{/other_user}","gists_url":"https://api.github.com/users/microsoft/gists{/gist_id}","starred_url":"https://api.github.com/users/microsoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/microsoft/subscriptions","organizations_url":"https://api.github.com/users/microsoft/orgs","repos_url":"https://api.github.com/users/microsoft/repos","events_url":"https://api.github.com/users/microsoft/events{/privacy}","received_events_url":"https://api.github.com/users/microsoft/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/microsoft/playwright","description":"Playwright is a framework for Web Testing and Automation. It allows testing Chromium, Firefox and WebKit with a single API. ","fork":false,"url":"https://api.github.com/repos/microsoft/playwright","forks_url":"https://api.github.com/repos/microsoft/playwright/forks","keys_url":"https://api.github.com/repos/microsoft/playwright/keys{/key_id}","collaborators_url":"https://api.github.com/repos/microsoft/playwright/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/microsoft/playwright/teams","hooks_url":"https://api.github.com/repos/microsoft/playwright/hooks","issue_events_url":"https://api.github.com/repos/microsoft/playwright/issues/events{/number}","events_url":"https://api.github.com/repos/microsoft/playwright/events","assignees_url":"https://api.github.com/repos/microsoft/playwright/assignees{/user}","branches_url":"https://api.github.com/repos/microsoft/playwright/branches{/branch}","tags_url":"https://api.github.com/repos/microsoft/playwright/tags","blobs_url":"https://api.github.com/repos/microsoft/playwright/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/microsoft/playwright/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/microsoft/playwright/git/refs{/sha}","trees_url":"https://api.github.com/repos/microsoft/playwright/git/trees{/sha}","statuses_url":"https://api.github.com/repos/microsoft/playwright/statuses/{sha}","languages_url":"https://api.github.com/repos/microsoft/playwright/languages","stargazers_url":"https://api.github.com/repos/microsoft/playwright/stargazers","contributors_url":"https://api.github.com/repos/microsoft/playwright/contributors","subscribers_url":"https://api.github.com/repos/microsoft/playwright/subscribers","subscription_url":"https://api.github.com/repos/microsoft/playwright/subscription","commits_url":"https://api.github.com/repos/microsoft/playwright/commits{/sha}","git_commits_url":"https://api.github.com/repos/microsoft/playwright/git/commits{/sha}","comments_url":"https://api.github.com/repos/microsoft/playwright/comments{/number}","issue_comment_url":"https://api.github.com/repos/microsoft/playwright/issues/comments{/number}","contents_url":"https://api.github.com/repos/microsoft/playwright/contents/{+path}","compare_url":"https://api.github.com/repos/microsoft/playwright/compare/{base}...{head}","merges_url":"https://api.github.com/repos/microsoft/playwright/merges","archive_url":"https://api.github.com/repos/microsoft/playwright/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/microsoft/playwright/downloads","issues_url":"https://api.github.com/repos/microsoft/playwright/issues{/number}","pulls_url":"https://api.github.com/repos/microsoft/playwright/pulls{/number}","milestones_url":"https://api.github.com/repos/microsoft/playwright/milestones{/number}","notifications_url":"https://api.github.com/repos/microsoft/playwright/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/microsoft/playwright/labels{/name}","releases_url":"https://api.github.com/repos/microsoft/playwright/releases{/id}","deployments_url":"https://api.github.com/repos/microsoft/playwright/deployments","created_at":"2019-11-15T18:32:42Z","updated_at":"2025-11-09T20:37:29Z","pushed_at":"2025-11-08T00:38:15Z","git_url":"git://github.com/microsoft/playwright.git","ssh_url":"git@github.com:microsoft/playwright.git","clone_url":"https://github.com/microsoft/playwright.git","svn_url":"https://github.com/microsoft/playwright","homepage":"https://playwright.dev","size":219054,"stargazers_count":79140,"watchers_count":79140,"language":"TypeScript","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":4802,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":564,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":["automation","chrome","chromium","e2e-testing","electron","end-to-end-testing","firefox","javascript","playwright","test","test-automation","testing","testing-tools","web","webkit"],"visibility":"public","forks":4802,"open_issues":564,"watchers":79140,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/microsoft/playwright/pulls/28460","html_url":"https://github.com/microsoft/playwright/pull/28460","diff_url":"https://github.com/microsoft/playwright/pull/28460.diff","patch_url":"https://github.com/microsoft/playwright/pull/28460.patch","merged_at":"2023-12-04T05:06:40Z"},"body":"Fixes #28375","reactions":{"url":"https://api.github.com/repos/microsoft/playwright/issues/28460/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/playwright/issues/28460/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":11134132268,"node_id":"CE_lADODTssw854ELWAzwAAAAKXpWAs","url":"https://api.github.com/repos/microsoft/playwright/issues/events/11134132268","actor":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2023-12-04T05:06:42Z","state_reason":null,"performed_via_github_app":null},{"id":11134132805,"node_id":"REFE_lADODTssw854ELWAzwAAAAKXpWJF","url":"https://api.github.com/repos/microsoft/playwright/issues/events/11134132805","actor":{"login":"pavelfeldman","id":883973,"node_id":"MDQ6VXNlcjg4Mzk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/883973?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelfeldman","html_url":"https://github.com/pavelfeldman","followers_url":"https://api.github.com/users/pavelfeldman/followers","following_url":"https://api.github.com/users/pavelfeldman/following{/other_user}","gists_url":"https://api.github.com/users/pavelfeldman/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelfeldman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelfeldman/subscriptions","organizations_url":"https://api.github.com/users/pavelfeldman/orgs","repos_url":"https://api.github.com/users/pavelfeldman/repos","events_url":"https://api.github.com/users/pavelfeldman/events{/privacy}","received_events_url":"https://api.github.com/users/pavelfeldman/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"facec88c99dd04d41381333e3d72ebdd5bf29f28","commit_url":"https://api.github.com/repos/microsoft/playwright/commits/facec88c99dd04d41381333e3d72ebdd5bf29f28","created_at":"2023-12-04T05:06:47Z","performed_via_github_app":null}]