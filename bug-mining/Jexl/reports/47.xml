<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sun Nov 09 05:57:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JEXL-148] Incorrect Map Property get</title>
                <link>https://issues.apache.org/jira/browse/JEXL-148</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;If I try to execute jelly statement that assigns values to map and gets values from that map after. In one particular case map value is not accessible, I assume there is an error. &lt;/p&gt;

&lt;p&gt;&quot;var x = new (&quot;java.util.HashMap&quot;); x.one = 1; x.two = 2; x.one&quot; results to 1&lt;br/&gt;
&quot;x = new (&quot;java.util.HashMap&quot;); x.one = 1; x.two = 2; x.one&quot; results to 1&lt;br/&gt;
&quot;x = new (&quot;java.util.HashMap&quot;); x.one = 1; x.two = 2; x&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;one&amp;#39;&amp;#93;&lt;/span&gt;&quot; results to 1&lt;br/&gt;
&quot;var x = new (&quot;java.util.HashMap&quot;); x.one = 1; x.two = 2; x&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;one&amp;#39;&amp;#93;&lt;/span&gt;&quot; result to null&lt;/p&gt;

&lt;p&gt;The script is evaluated in the following usual manner:&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
       Script s = jexl.createScript(expr);&lt;br/&gt;
       try {&lt;br/&gt;
          Object result = s.execute(jc);&lt;br/&gt;
..&lt;/p&gt;

&lt;p&gt;I&apos;m ready to provide more details if nessesary&lt;/p&gt;</description>
                <environment></environment>
        <key id="12780496">JEXL-148</key>
            <summary>Incorrect Map Property get</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Mar 2015 13:25:53 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:11 +0000</updated>
                            <resolved>Thu, 19 Mar 2015 15:26:16 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14354596" author="henrib" created="Tue, 10 Mar 2015 09:39:05 +0000"  >&lt;p&gt;Not reproduced on 3.0 trunk:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test148() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] scripts = {&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;java.util.HashMap&apos;&lt;/span&gt;); x.one = 1; x.two = 2; x.one&quot;&lt;/span&gt;, &lt;span class=&quot;code-comment&quot;&gt;// results to 1
&lt;/span&gt;            &lt;span class=&quot;code-quote&quot;&gt;&quot;x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;java.util.HashMap&apos;&lt;/span&gt;); x.one = 1; x.two = 2; x.one&quot;&lt;/span&gt;,&lt;span class=&quot;code-comment&quot;&gt;// results to 1
&lt;/span&gt;            &lt;span class=&quot;code-quote&quot;&gt;&quot;x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;java.util.HashMap&apos;&lt;/span&gt;); x.one = 1; x.two = 2; x[&lt;span class=&quot;code-quote&quot;&gt;&apos;one&apos;&lt;/span&gt;]&quot;&lt;/span&gt;,&lt;span class=&quot;code-comment&quot;&gt;//results to 1
&lt;/span&gt;            &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;java.util.HashMap&apos;&lt;/span&gt;); x.one = 1; x.two = 2; x[&lt;span class=&quot;code-quote&quot;&gt;&apos;one&apos;&lt;/span&gt;]&quot;&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// result to &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;?
&lt;/span&gt;        };

        JexlEngine JEXL = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Engine();
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s : scripts) {
            &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o = JEXL.createScript(s).execute(jc);
            Assert.assertEquals(1, o);
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14354881" author="dmitri_blinov" created="Tue, 10 Mar 2015 13:33:18 +0000"  >&lt;p&gt;Sorry could you adjust the test case as follows ?&lt;/p&gt;

&lt;p&gt;    public void test148() throws Exception {&lt;br/&gt;
        String[] scripts = &lt;/p&gt;
{&quot;var x = new (&apos;java.util.HashMap&apos;); x.one = 1; x.two = 2; x.one&quot;, // results to 1
            &quot;x = new (&apos;java.util.HashMap&apos;); x.one = 1; x.two = 2; x.one&quot;,// results to 1
            &quot;x = new (&apos;java.util.HashMap&apos;); x.one = 1; x.two = 2; x[&apos;one&apos;]&quot;,//results to 1
            &quot;var x = new (&apos;java.util.HashMap&apos;); x.one = 1; x.two = 2; x[&apos;one&apos;]&quot;// result to null?
        }
&lt;p&gt;;&lt;/p&gt;

&lt;p&gt;        JexlEngine JEXL = new Engine();&lt;br/&gt;
        for (String s : scripts) &lt;/p&gt;
{
            JexlContext jc = new MapContext();
            Object o = JEXL.createScript(s).execute(jc);
            Assert.assertEquals(1, o);
        }
&lt;p&gt;    }&lt;/p&gt;</comment>
                            <comment id="14354904" author="henrib" created="Tue, 10 Mar 2015 13:51:45 +0000"  >&lt;p&gt;Same result with 3.0 with the JexlContext created for each script evaluation.&lt;/p&gt;</comment>
                            <comment id="14354910" author="dmitri_blinov" created="Tue, 10 Mar 2015 13:58:29 +0000"  >&lt;p&gt;I&apos;m getting the following exception for 2.1.1.&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; org.apache.commons.jexl2.JexlException: com.msy.ext.JexlTest.main@48!&lt;span class=&quot;error&quot;&gt;&amp;#91;56,61&amp;#93;&lt;/span&gt;: &apos;var x = new (&apos;java.util.HashMap&apos;);x.one = 1;x.two = 2;x&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;one&amp;#39;&amp;#93;&lt;/span&gt;;&apos; object is null&lt;br/&gt;
        at org.apache.commons.jexl2.Interpreter.getAttribute(Interpreter.java:1532)&lt;br/&gt;
        at org.apache.commons.jexl2.Interpreter.visit(Interpreter.java:480)&lt;br/&gt;
        at org.apache.commons.jexl2.parser.ASTArrayAccess.jjtAccept(ASTArrayAccess.java:18)&lt;br/&gt;
        at org.apache.commons.jexl2.Interpreter.visit(Interpreter.java:1335)&lt;br/&gt;
        at org.apache.commons.jexl2.parser.ASTReference.jjtAccept(ASTReference.java:18)&lt;br/&gt;
        at org.apache.commons.jexl2.Interpreter.visit(Interpreter.java:950)&lt;br/&gt;
        at org.apache.commons.jexl2.parser.ASTJexlScript.jjtAccept(ASTJexlScript.java:38)&lt;br/&gt;
        at org.apache.commons.jexl2.Interpreter.interpret(Interpreter.java:230)&lt;br/&gt;
        at org.apache.commons.jexl2.ExpressionImpl.execute(ExpressionImpl.java:107)&lt;br/&gt;
        at com.msy.ext.JexlTest.main(JexlTest.java:48)&lt;/p&gt;</comment>
                            <comment id="14354915" author="henrib" created="Tue, 10 Mar 2015 14:03:04 +0000"  >&lt;p&gt;That&apos;s unfortunate ( I&apos;ve stopped maintaining 2.x ). Maybe someone else is interested in fixing it...&lt;/p&gt;</comment>
                            <comment id="14354925" author="dmitri_blinov" created="Tue, 10 Mar 2015 14:05:47 +0000"  >&lt;p&gt;Sorry for troubling you then. Looking forward for 3.0 release. Many thanks in advance.&lt;/p&gt;</comment>
                            <comment id="15204257" author="henrib" created="Mon, 21 Mar 2016 14:10:11 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26ipj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>