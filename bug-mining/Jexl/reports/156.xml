<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sun Nov 09 05:59:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JEXL-324] JexlEngine.createExpression(&quot;new()&quot;).getParsedText() throws NPE</title>
                <link>https://issues.apache.org/jira/browse/JEXL-324</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;JEXL is able to parse the expression &quot;new()&quot;, but some parts of the system do not expect this.&#160; Specifically, if you try to get the parsed text, JEXL throws a NullPointerException instead of returning &quot;new()&quot;.&lt;/p&gt;

&lt;p&gt;I expect &lt;tt&gt;JexlExpression.getParsedText()&lt;/tt&gt; to return a String&#160; for any expression that was successfully parsed. So either &lt;tt&gt;createExpression()&lt;/tt&gt; should throw an exception or &lt;tt&gt;getParsedText()&lt;/tt&gt; should return &quot;new()&quot;.&#160; My preference is for &lt;tt&gt;createExpression()&lt;/tt&gt; to fail and I&apos;ll try to submit a PR for this.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Impact:&lt;/b&gt;&lt;br/&gt;
My program tries to fail fast with a clear error message when a user attempts to &quot;register&quot; a function using a reserved name (function registration happens outside of JEXL and is implemented by populating a JexlContext with a parsed expression). My program does this by probing for valid function names by parsing &lt;tt&gt;&lt;em&gt;FUNCTION_NAME&lt;/em&gt;+&quot;()&quot;&lt;/tt&gt; and checking for errors.&#160; Since &quot;new()&quot; is a legal expression, my program has a special case to disallow &quot;new&quot;.&#160; If &lt;tt&gt;createExpression(&quot;new()&quot;)&lt;/tt&gt; threw an exception, then I could remove the special case.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Steps to Reproduce:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testNew() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            JexlExpression expression = jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;()&quot;&lt;/span&gt;);
            Assert.assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;()&quot;&lt;/span&gt;, expression.getParsedText());
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (JexlException.Parsing exception) {
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;What Happens:&lt;/b&gt;&lt;br/&gt;
&lt;tt&gt;getParsedText()&lt;/tt&gt; throws a &lt;tt&gt;NullPointerException&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Expected Result:&lt;/b&gt;&lt;br/&gt;
Either &lt;tt&gt;JexlEngine.createExpression()&lt;/tt&gt; throws a &lt;tt&gt;JexlException.Parsing&lt;/tt&gt; or &lt;tt&gt;expression.getParsedText()&lt;/tt&gt; returns &quot;new()&quot;.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Note:&lt;/b&gt;&lt;br/&gt;
This was found on JEXL 3.1, the latest official release. I reproduced it on a snapshot of JEXL 3.2 built from GitHub source.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13281798">JEXL-324</key>
            <summary>JexlEngine.createExpression(&quot;new()&quot;).getParsedText() throws NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="david_costanzo">David Costanzo</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Jan 2020 20:35:01 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:33 +0000</updated>
                            <resolved>Mon, 27 Jan 2020 21:49:25 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17024689" author="henrib" created="Mon, 27 Jan 2020 21:49:25 +0000"  >&lt;p&gt;Changeset: 9dab666d3ecb09fc9ab2e9acd9486ac066e888c8&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-01-27 22:48&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-324&quot; title=&quot;JexlEngine.createExpression(&amp;quot;new()&amp;quot;).getParsedText() throws NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-324&quot;&gt;&lt;del&gt;JEXL-324&lt;/del&gt;&lt;/a&gt;: fixed grammar for new(arg, ...), made one arg mandatory&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;fixed debugger (belt and suspenders)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17025023" author="henrib" created="Tue, 28 Jan 2020 10:29:26 +0000"  >&lt;p&gt;Changeset: 1a304ae037c278ce2204989ecfdddf9ac449638c&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-01-28 11:26&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-324&quot; title=&quot;JexlEngine.createExpression(&amp;quot;new()&amp;quot;).getParsedText() throws NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-324&quot;&gt;&lt;del&gt;JEXL-324&lt;/del&gt;&lt;/a&gt;: refining parsing error reporting&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 41 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0awj4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>