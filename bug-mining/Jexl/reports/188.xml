<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sun Nov 09 05:59:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JEXL-370] Cannot check if variable is defined using ObjectContext if the value is null </title>
                <link>https://issues.apache.org/jira/browse/JEXL-370</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I&apos;m migrating from 3.1 to 3.2.1, and I&apos;ve noticed the following change in behaviour when using ObjectContext:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Calling ObjectContext.has(String) for an object which has the given property, but for which the current value is null, returns false, and not true as it did before.&lt;/li&gt;
	&lt;li&gt;Similarly, evaluating an expression which uses a property that is defined but which is null, throws an (&apos;is undefined&apos;) exception rather than returning the null value.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The javadoc for JexlContext.has(String) says:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;A variable may be defined with a null value; this method checks whether the value is null or if the variable is undefined.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;so my impression is that the behaviour of ObjectContext does not match what is written in the Javadoc  for the JexlContext interface.  It is a problem in my case because the &apos;undefined&apos; exception causes quite a lot of confusion in use.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a test class to demonstrate the example.  Please let me know if any extra info is needed, and thanks for all the great work on Jexl!&lt;/p&gt;</description>
                <environment></environment>
        <key id="13446357">JEXL-370</key>
            <summary>Cannot check if variable is defined using ObjectContext if the value is null </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="ahutton">Alex Hutton</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 May 2022 11:36:23 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:01 +0000</updated>
                            <resolved>Wed, 25 May 2022 08:53:45 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17541846" author="henrib" created="Wed, 25 May 2022 06:33:21 +0000"  >&lt;p&gt;Thank you for the report Alex, issue confirmed.&lt;br/&gt;
As a workaround, you can use your own ObjectContext and override the has() method as in the following.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Var370 {
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setName(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s) {
            name = s;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getName() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; name;
        }
    }
    @Test &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test370() {
        Var370 var370 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Var370();
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().safe(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).create();
        ObjectContext&amp;lt;Var370&amp;gt; ctxt = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ObjectContext&amp;lt;Var370&amp;gt;(jexl, var370) {
            @Override &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; has(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; jexl.getUberspect().getPropertyGet(getObject(), name) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
            }
        };
        JexlExpression get = jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-comment&quot;&gt;// not &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/span&gt;        var370.setName(&lt;span class=&quot;code-quote&quot;&gt;&quot;John&quot;&lt;/span&gt;);
        Assert.assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;John&quot;&lt;/span&gt;,get.evaluate(ctxt));
        Assert.assertTrue(ctxt.has(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;));
        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/span&gt;        var370.setName(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        Assert.assertNull(get.evaluate(ctxt));
        Assert.assertTrue(ctxt.has(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17541888" author="JIRAUSER289876" created="Wed, 25 May 2022 08:27:12 +0000"  >&lt;p&gt;Many thanks for the confirmation and suggested workaround Henri.&lt;/p&gt;</comment>
                            <comment id="17541905" author="henrib" created="Wed, 25 May 2022 08:53:45 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/dfc15a7472d0b641a19bc6e69f6bb90690eda4f0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dfc15a7&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13044060" name="ObjectContextTest.java" size="1715" author="ahutton" created="Mon, 23 May 2022 11:28:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 24 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z12lpc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>