<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sun Nov 09 05:58:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JEXL-285] For statement variable may seem unaffected by iteration</title>
                <link>https://issues.apache.org/jira/browse/JEXL-285</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;When a &apos;for&apos; loop uses a global variable (as in (for c: ...)), if a local variable with that name has been declared previously, the global variable is nevertheless used for iteration. Since the local variable is preferred during resolution in statements within the loop, the iteration does not change the variable value.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13208777">JEXL-285</key>
            <summary>For statement variable may seem unaffected by iteration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jan 2019 13:02:58 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:30 +0000</updated>
                            <resolved>Fri, 11 Jan 2019 16:05:01 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16740518" author="henrib" created="Fri, 11 Jan 2019 16:05:01 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Detect reuse of local variable in &apos;for&apos; statements at parsing time&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/889b4b01e7998c485661eca4eb3159fbe1840a5e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/889b4b01e7998c485661eca4eb3159fbe1840a5e&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16740547" author="dmitri_blinov" created="Fri, 11 Jan 2019 16:41:51 +0000"  >&lt;p&gt;Though I don&apos;t like the initial idea of using contextual variables in &apos;for&apos; statements, I think we are breaking contract by this change. It is stated that &lt;tt&gt;for(x : items)&lt;/tt&gt; should use a contextual variable, because it was syntaxically specified to do so. After this change it becomes unclear whether a contextual variable is used or a local one, because it is not defined by syntax anymore.&lt;br/&gt;
Consider the following example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
x = 0; 
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (somecondition) {
   &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = 1;
}
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (x : items) {
}
&lt;span class=&quot;code-comment&quot;&gt;// What is the value of contextual variable &lt;span class=&quot;code-quote&quot;&gt;&apos;x&apos;&lt;/span&gt; here?&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If one is intentionally mixing local and contextual variables, one should be prepared to resolve the visibilty shadowing by some other means, like using &lt;tt&gt;this.variable&lt;/tt&gt; or something.&lt;/p&gt;</comment>
                            <comment id="16741385" author="henrib" created="Sat, 12 Jan 2019 19:54:18 +0000"  >&lt;p&gt;After the declaration of a local variable, its symbol is always resolved as the local variable; local variables have global scope after their declaration and they do have precedence over contextual ones. In you example, the contextual &apos;x&apos; is 0 ; &apos;x&apos; is however solved as the local one (ie the last value of iteration). In other words, in a vanilla JEXL -&apos;this&apos; not pointing at the context - , there is no way to access a contextual variable whose symbol clashes with a local after its declaration.&lt;br/&gt;
No-one does clash intentionally contextual and local variables; these are mistake that cause much grief since forgetting the &apos;var&apos; in the &apos;for&apos; may result in incorrect iteration. The fix is actually enforcing the contract of variable resolution in the &apos;for&apos; statement.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|u00pgo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>