<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:23:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCORE-762] HTTPcore5-h2 (5.2.2) Frame Size Regression: Issues with File Uploads Beyond 16KB</title>
                <link>https://issues.apache.org/jira/browse/HTTPCORE-762</link>
                <project id="12310340" key="HTTPCORE">HttpComponents HttpCore</project>
                    <description>&lt;p&gt;The Issue: HTTP calls to send a file larger than 16KB are failing due to an error stating, &quot;Frame size exceeds maximum.&quot;&lt;/p&gt;

&lt;p&gt;Background: Our server is accessed behind an Application Load Balancer (ALB). We previously faced an issue where the frame size was set to 16MB, as dictated by the remote configuration, leading to memory problems. This particular issue was addressed in a previous resolution:&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-751&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HTTPCORE-751&lt;/a&gt;. In that resolution, we agreed to use a smaller frame size, expecting that the server would not send frames larger than the specified size.&lt;/p&gt;

&lt;p&gt;I believe that the current issue may be a regression resulting from the changes implemented in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-751&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HTTPCORE-751&lt;/a&gt;.&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://mail.google.com/mail/u/0?ui=2&amp;amp;ik=caee5e288f&amp;amp;attid=0.1&amp;amp;permmsgid=msg-a:r747936870174475375&amp;amp;th=18bf6f169a1fc0c2&amp;amp;view=fimg&amp;amp;fur=ip&amp;amp;sz=s0-l75-ft&amp;amp;attbid=ANGjdJ_mq5F_P-JcuijCkNbPGldDMj-IPL9dP5S0DVGPFcae9FGmKqX0TPdrjdiWQshql8Yjil1AfyArPVsntOEZhb5YW4dyKelUSDCG3MCcD0xhTWGBNaFpqcjz6s0&amp;amp;disp=emb&amp;amp;realattid=ii_lp9pv8sd0&quot; height=&quot;319&quot; width=&quot;472&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
if you look at the code highlighted above in&#160;AbstractH2StreamMultiplexer class,&#160;it should be&#160;&lt;br/&gt;
final int maxPayloadSize = Math.min(capacity, localConfig.getMaxFrameSize()); &lt;br/&gt;
because we have set it value between the minimum of both server and local config otherwise payload can exceed the outBuffer size which is happening in our case.&lt;br/&gt;
Traces Of the issues:java.lang.IllegalArgumentException: Frame size exceeds maximum&lt;br/&gt;
at org.apache.hc.core5.util.Args.check(Args.java:41)&lt;br/&gt;
at org.apache.hc.core5.http2.impl.nio.FrameOutputBuffer.write(FrameOutputBuffer.java:98)&lt;br/&gt;
at org.apache.hc.core5.http2.impl.nio.AbstractH2StreamMultiplexer.streamDataFrame(AbstractH2StreamMultiplexer.java:340)&lt;br/&gt;
at org.apache.hc.core5.http2.impl.nio.AbstractH2StreamMultiplexer.streamData(AbstractH2StreamMultiplexer.java:361)&lt;br/&gt;
at org.apache.hc.core5.http2.impl.nio.AbstractH2StreamMultiplexer.access$1300(AbstractH2StreamMultiplexer.java:92)&lt;br/&gt;
at org.apache.hc.core5.http2.impl.nio.AbstractH2StreamMultiplexer$H2StreamChannelImpl.write(AbstractH2StreamMultiplexer.java:1709)&lt;br/&gt;
at org.apache.hc.core5.http2.impl.nio.ClientH2StreamHandler$1.write(ClientH2StreamHandler.java:92)&lt;br/&gt;
at org.apache.hc.client5.http.impl.async.HttpAsyncMainClientExec$1$1.write(HttpAsyncMainClientExec.java:172)&lt;br/&gt;
at org.apache.hc.core5.http.nio.entity.BasicAsyncEntityProducer.produce(BasicAsyncEntityProducer.java:129)&lt;br/&gt;
at org.apache.hc.core5.http.nio.support.BasicRequestProducer.produce(BasicRequestProducer.java:104)&lt;br/&gt;
at com.iontrading.treasuryportal.core.bindingshelper.producers.TARequestProducer.produce(TARequestProducer.java:52)&lt;br/&gt;
at org.apache.hc.client5.http.impl.async.InternalAbstractHttpAsyncClient$2.produce(InternalAbstractHttpAsyncClient.java:260)&lt;br/&gt;
at org.apache.hc.client5.http.impl.async.HttpAsyncMainClientExec$1.produce(HttpAsyncMainClientExec.java:163)&lt;br/&gt;
at org.apache.hc.core5.http2.impl.nio.ClientH2StreamHandler.produceOutput(ClientH2StreamHandler.java:172)&lt;br/&gt;
at org.apache.hc.core5.http2.impl.nio.AbstractH2StreamMultiplexer$H2Stream.produceOutput(AbstractH2StreamMultiplexer.java:1539)&lt;br/&gt;
at org.apache.hc.core5.http2.impl.nio.AbstractH2StreamMultiplexer.produceOutput(AbstractH2StreamMultiplexer.java:1266)&lt;br/&gt;
at org.apache.hc.core5.http2.impl.nio.AbstractH2StreamMultiplexer.onOutput(AbstractH2StreamMultiplexer.java:474)&lt;br/&gt;
at org.apache.hc.core5.http2.impl.nio.AbstractH2IOEventHandler.outputReady(AbstractH2IOEventHandler.java:74)&lt;br/&gt;
at org.apache.hc.core5.http2.impl.nio.ClientH2IOEventHandler.outputReady(ClientH2IOEventHandler.java:39)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13559047">HTTPCORE-762</key>
            <summary>HTTPcore5-h2 (5.2.2) Frame Size Regression: Issues with File Uploads Beyond 16KB</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sandeep_gaur">Sandeep_gaur</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Nov 2023 14:36:30 +0000</created>
                <updated>Wed, 22 Nov 2023 16:16:59 +0000</updated>
                            <resolved>Wed, 22 Nov 2023 16:16:59 +0000</resolved>
                                    <version>5.2.3</version>
                                    <fixVersion>5.2.4</fixVersion>
                    <fixVersion>5.3-alpha1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17788814" author="jira-bot" created="Wed, 22 Nov 2023 15:37:47 +0000"  >&lt;p&gt;Commit 3db8de101840dcf85718dbaaf7c5c28aa3dcf498 in httpcomponents-core&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-762&quot; title=&quot;HTTPcore5-h2 (5.2.2) Frame Size Regression: Issues with File Uploads Beyond 16KB&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-762&quot;&gt;&lt;del&gt;HTTPCORE-762&lt;/del&gt;&lt;/a&gt; from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=3db8de101&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=3db8de101&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-762&quot; title=&quot;HTTPcore5-h2 (5.2.2) Frame Size Regression: Issues with File Uploads Beyond 16KB&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-762&quot;&gt;&lt;del&gt;HTTPCORE-762&lt;/del&gt;&lt;/a&gt;: H2 protocol handler incorrectly determines the maximum frame size for outgoing frames in case the remote endpoint negotiated a max frame size larger than the protocol default&lt;/p&gt;</comment>
                            <comment id="17788815" author="olegk" created="Wed, 22 Nov 2023 15:40:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sandeep_gaur&quot; class=&quot;user-hover&quot; rel=&quot;sandeep_gaur&quot;&gt;sandeep_gaur&lt;/a&gt; Please review / test the proposed fix:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/httpcomponents-core/compare/master...HTTPCORE-762&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-core/compare/master...HTTPCORE-762&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17788816" author="JIRAUSER300839" created="Wed, 22 Nov 2023 15:49:20 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt; ,&lt;/p&gt;

&lt;p&gt;Change looks fine to me, please consider this reviewed by me, this is in aligned with the analysis I have done.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Sandeep Gaur&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17788821" author="jira-bot" created="Wed, 22 Nov 2023 16:15:47 +0000"  >&lt;p&gt;Commit faaa82fb76574c07fb31a916f64adcb52f56148e in httpcomponents-core&apos;s branch refs/heads/master from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=faaa82fb7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=faaa82fb7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-762&quot; title=&quot;HTTPcore5-h2 (5.2.2) Frame Size Regression: Issues with File Uploads Beyond 16KB&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-762&quot;&gt;&lt;del&gt;HTTPCORE-762&lt;/del&gt;&lt;/a&gt;: H2 protocol handler incorrectly determines the maximum frame size for outgoing frames in case the remote endpoint negotiated a max frame size larger than the protocol default&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 50 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ls7s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>