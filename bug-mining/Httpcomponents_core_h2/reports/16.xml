<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:23:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCORE-751] Memory Consumption and GC Performance Issues with HttpClient-5.2.1 in HTTP/2 Communication</title>
                <link>https://issues.apache.org/jira/browse/HTTPCORE-751</link>
                <project id="12310340" key="HTTPCORE">HttpComponents HttpCore</project>
                    <description>&lt;p&gt;After upgrading from version 5.1 to 5.2.1 of the HttpClient library for HTTP/2 communication, we encountered an issue. When connecting to any endpoint exposed by ALB (Application Load Balancer), our application consumes a significant amount of memory and fails to release it efficiently, leading to increased time spent on garbage collection (GC).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Some analysis already done:-&#160;&lt;/p&gt;

&lt;p&gt;This is what happens: both endpoints, the client and server, transmit their settings approximately at about the same time. The client states it can handle 64K frames at max, whereas the server states it can handle 16MB frames. The client ACKs the server settings because its MAX_FRAME_SIZE is lesser than that of the server. The server, however, just ACKs the client settings without re-sending its settings with a smaller MAX_FRAME_SIZE. I suppose what means is the server acknowledges the client settings including the limit and states its intent to respect it and the client can be reasonably sure it will never get hit with a frame greater than 64K, but I have to got to revisit the HTTP/2 specification to be sure.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;For more details please follow below link:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/76439023/memory-consumption-and-gc-performance-issues-with-httpclient-5-2-1-in-http-2-com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/76439023/memory-consumption-and-gc-performance-issues-with-httpclient-5-2-1-in-http-2-com&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13539604">HTTPCORE-751</key>
            <summary>Memory Consumption and GC Performance Issues with HttpClient-5.2.1 in HTTP/2 Communication</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sandeep_gaur">Sandeep_gaur</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Jun 2023 06:22:02 +0000</created>
                <updated>Thu, 14 Sep 2023 14:12:52 +0000</updated>
                            <resolved>Tue, 13 Jun 2023 13:58:32 +0000</resolved>
                                    <version>5.2.1</version>
                                    <fixVersion>5.2.2</fixVersion>
                                    <component>HttpCore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17731587" author="olegk" created="Mon, 12 Jun 2023 12:33:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sandeep_gaur&quot; class=&quot;user-hover&quot; rel=&quot;sandeep_gaur&quot;&gt;sandeep_gaur&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhusivarga&quot; class=&quot;user-hover&quot; rel=&quot;lhusivarga&quot;&gt;lhusivarga&lt;/a&gt; Please review the proposed fix:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/httpcomponents-core/pull/409&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-core/pull/409&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17731897" author="JIRAUSER300839" created="Tue, 13 Jun 2023 05:47:45 +0000"  >&lt;p&gt;I have reviewed the code and tested it, it is working fine, memory consumption is almost same as with http1.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt;&#160; when we can expect release having this fix.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Sandeep gaur&lt;/p&gt;</comment>
                            <comment id="17732102" author="jira-bot" created="Tue, 13 Jun 2023 13:57:04 +0000"  >&lt;p&gt;Commit 9af8e78a495a15202c29235ac310e9f2408eba8e in httpcomponents-core&apos;s branch refs/heads/master from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=9af8e78a4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=9af8e78a4&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-751&quot; title=&quot;Memory Consumption and GC Performance Issues with HttpClient-5.2.1 in HTTP/2 Communication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-751&quot;&gt;&lt;del&gt;HTTPCORE-751&lt;/del&gt;&lt;/a&gt;: H2 protocol handler always resizes the output frame buffer to the remove MAX_FRAME_SIZE instead of doing so only then the remote MAX_FRAME_SIZE is lesser than the current MAX_FRAME_SIZE (partially reverts &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-707&quot; title=&quot;AbstractH2StreamMultiplexer: FrameOutputBuffer: Frame size exceeds maximum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-707&quot;&gt;&lt;del&gt;HTTPCORE-707&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17732105" author="olegk" created="Tue, 13 Jun 2023 13:58:32 +0000"  >&lt;p&gt;Fix committed to master.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17732115" author="jira-bot" created="Tue, 13 Jun 2023 14:23:22 +0000"  >&lt;p&gt;Commit ed61f0e62053d3953fb33bf655e1af0cb7f59988 in httpcomponents-core&apos;s branch refs/heads/master from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=ed61f0e62&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=ed61f0e62&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-751&quot; title=&quot;Memory Consumption and GC Performance Issues with HttpClient-5.2.1 in HTTP/2 Communication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-751&quot;&gt;&lt;del&gt;HTTPCORE-751&lt;/del&gt;&lt;/a&gt;: H2 protocol handler always resizes the output frame buffer to the remove MAX_FRAME_SIZE instead of doing so only then the remote MAX_FRAME_SIZE is lesser than the current MAX_FRAME_SIZE (partially reverts &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-707&quot; title=&quot;AbstractH2StreamMultiplexer: FrameOutputBuffer: Frame size exceeds maximum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-707&quot;&gt;&lt;del&gt;HTTPCORE-707&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17732119" author="jira-bot" created="Tue, 13 Jun 2023 14:25:28 +0000"  >&lt;p&gt;Commit ed61f0e62053d3953fb33bf655e1af0cb7f59988 in httpcomponents-core&apos;s branch refs/heads/dependabot/maven/io.reactivex.rxjava3-rxjava-3.1.6 from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=ed61f0e62&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=ed61f0e62&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-751&quot; title=&quot;Memory Consumption and GC Performance Issues with HttpClient-5.2.1 in HTTP/2 Communication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-751&quot;&gt;&lt;del&gt;HTTPCORE-751&lt;/del&gt;&lt;/a&gt;: H2 protocol handler always resizes the output frame buffer to the remove MAX_FRAME_SIZE instead of doing so only then the remote MAX_FRAME_SIZE is lesser than the current MAX_FRAME_SIZE (partially reverts &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-707&quot; title=&quot;AbstractH2StreamMultiplexer: FrameOutputBuffer: Frame size exceeds maximum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-707&quot;&gt;&lt;del&gt;HTTPCORE-707&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17732477" author="jira-bot" created="Wed, 14 Jun 2023 09:53:30 +0000"  >&lt;p&gt;Commit 3ab9d95da1a828da32246facd03aec44f30a7201 in httpcomponents-core&apos;s branch refs/heads/master from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=3ab9d95da&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=3ab9d95da&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-751&quot; title=&quot;Memory Consumption and GC Performance Issues with HttpClient-5.2.1 in HTTP/2 Communication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-751&quot;&gt;&lt;del&gt;HTTPCORE-751&lt;/del&gt;&lt;/a&gt;: H2 protocol handler always resizes the output frame buffer to the remove MAX_FRAME_SIZE instead of doing so only then the remote MAX_FRAME_SIZE is lesser than the current MAX_FRAME_SIZE (partially reverts &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-707&quot; title=&quot;AbstractH2StreamMultiplexer: FrameOutputBuffer: Frame size exceeds maximum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-707&quot;&gt;&lt;del&gt;HTTPCORE-707&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17765080" author="enigo" created="Thu, 14 Sep 2023 09:41:34 +0000"  >&lt;p&gt;hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt; &lt;br/&gt;
I see that the issue is fixed but there is no 5.2.2 version in &lt;a href=&quot;https://mvnrepository.com/artifact/org.apache.httpcomponents.client5/httpclient5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Maven Repo&lt;/a&gt;.&lt;br/&gt;
when is it going to be available there?&lt;/p&gt;</comment>
                            <comment id="17765192" author="olegk" created="Thu, 14 Sep 2023 14:01:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Enigo&quot; class=&quot;user-hover&quot; rel=&quot;Enigo&quot;&gt;Enigo&lt;/a&gt; You were looking at the wrong artifact. It is right there:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://mvnrepository.com/artifact/org.apache.httpcomponents.core5/httpcore5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://mvnrepository.com/artifact/org.apache.httpcomponents.core5/httpcore5&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17765194" author="enigo" created="Thu, 14 Sep 2023 14:12:52 +0000"  >&lt;p&gt;oh, I see, client and core versions are not necessarily the same. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 8 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ih3s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>