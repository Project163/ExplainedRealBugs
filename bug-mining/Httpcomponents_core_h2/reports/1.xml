<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:23:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCORE-508] Handle &quot;HTTP/1.1 000 status code 000&quot; responses</title>
                <link>https://issues.apache.org/jira/browse/HTTPCORE-508</link>
                <project id="12310340" key="HTTPCORE">HttpComponents HttpCore</project>
                    <description>&lt;p&gt;Hi!&lt;/p&gt;

&lt;p&gt;I have a very &lt;em&gt;funny&lt;/em&gt; behaviour where the HttpClient seems to wrongly&#160;interpret the body of an HTTP response&#160;as headers, the parsing of which eventually leads to a&#160;java.net.SocketTimeoutException. &lt;/p&gt;

&lt;p&gt;The underlying cause of this seems to be a a faulty server response, i.e.,&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;HTTP/1.1 000 status code 000&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Thank you Apple! /s&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I have managed to trace the origin of the problem to the &lt;b&gt;method&#160;HttpRequestExecutor#canResponseHaveBody&lt;/b&gt;&#160;where, as expected, 000 is not considered as a valid status code.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12908963/12908963_canResponseHaveABody.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12908962/12908962_doReceiveResponse.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;So what happens seems to be that the status line and headers get parsed. The 000 is not considered valid and that ends the processing of the response. Then the rest of the response (the body) seems to&#160;go through the parsing procedure again in&#160;&lt;b&gt;DefaultHttpResponseParser#parseHead&lt;/b&gt;. The body is of content type application/json. Eventually the following exceptions gets thrown after a while:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.net.SocketTimeoutException: Read timed out

at java.net.SocketInputStream.socketRead0(Native Method)

at java.net.SocketInputStream.socketRead(SocketInputStream.java:127)

at java.net.SocketInputStream.read(SocketInputStream.java:182)

at java.net.SocketInputStream.read(SocketInputStream.java:152)

at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)

at org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153)

at org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:282)

at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138)

at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56)

at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259)

at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163)

at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:165)

at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273)

at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)

at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272)

at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)

at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)

at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)

at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)

at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)

at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;m not really familiar if 000 is even a valid return code. When querying the server with some other HTTP tools like Postman, I do get the json response with a status code 000.&lt;/p&gt;

&lt;p&gt;Do you guys think this is something that can be fixed in HttpClient or at least handled by some sort of an error?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13135742">HTTPCORE-508</key>
            <summary>Handle &quot;HTTP/1.1 000 status code 000&quot; responses</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olegk">Oleg Kalnichevski</assignee>
                                    <reporter username="ppetrov">Petar Petrov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Feb 2018 10:51:32 +0000</created>
                <updated>Mon, 5 Feb 2018 09:42:20 +0000</updated>
                            <resolved>Fri, 2 Feb 2018 14:59:52 +0000</resolved>
                                    <version>4.4.9</version>
                    <version>5.0-beta2</version>
                                    <fixVersion>4.4.10</fixVersion>
                    <fixVersion>5.0-beta3</fixVersion>
                                    <component>HttpCore</component>
                    <component>HttpCore NIO</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16350205" author="olegk" created="Fri, 2 Feb 2018 11:55:32 +0000"  >&lt;p&gt;The easiest and possibly the most appropriate solution to this issue is&#160;rejecting any response with status code below 100 as invalid.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16350236" author="ppetrov" created="Fri, 2 Feb 2018 12:30:35 +0000"  >&lt;p&gt;That sounds more than reasonable. Is there a way I can plug in my own implementation to handle this faulty behavior in a custom manner, so I can still process the request?&lt;/p&gt;</comment>
                            <comment id="16350257" author="olegk" created="Fri, 2 Feb 2018 12:50:06 +0000"  >&lt;p&gt;In 4.x one can plug-in a custom&#160;&lt;tt&gt;HttpMessageParser&lt;/tt&gt; and rewrite the response message returned by the parser. It is not particularly elegant&#160;but will get the job done. For 5.x I am open to more elegant solutions (as long as they work with classic HTTP/1.1, async HTTP/1.1 and async HTTP/2.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16350459" author="jira-bot" created="Fri, 2 Feb 2018 14:58:52 +0000"  >&lt;p&gt;Commit 5739fb646dd5634eb36b736683c9118c40a49b0f in httpcomponents-core&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=httpcomponents-core.git;h=5739fb6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=httpcomponents-core.git;h=5739fb6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-508&quot; title=&quot;Handle &amp;quot;HTTP/1.1 000 status code 000&amp;quot; responses&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-508&quot;&gt;&lt;del&gt;HTTPCORE-508&lt;/del&gt;&lt;/a&gt;: Reject response messages with status code lesser than 100 as invalid&lt;/p&gt;</comment>
                            <comment id="16350462" author="jira-bot" created="Fri, 2 Feb 2018 14:59:10 +0000"  >&lt;p&gt;Commit 7d47ad0d77439259a236e8d570b04b75eec00e00 in httpcomponents-core&apos;s branch refs/heads/4.4.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=httpcomponents-core.git;h=7d47ad0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=httpcomponents-core.git;h=7d47ad0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-508&quot; title=&quot;Handle &amp;quot;HTTP/1.1 000 status code 000&amp;quot; responses&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-508&quot;&gt;&lt;del&gt;HTTPCORE-508&lt;/del&gt;&lt;/a&gt;: Reject response messages with status code lesser than 100 as invalid&lt;/p&gt;</comment>
                            <comment id="16350463" author="olegk" created="Fri, 2 Feb 2018 14:59:52 +0000"  >&lt;p&gt;Fixed in 4.4.x and master. Please review.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16352162" author="ppetrov" created="Mon, 5 Feb 2018 09:16:19 +0000"  >&lt;p&gt;Tested the httpcore &lt;b&gt;4.4.x&lt;/b&gt; branch. Got an exception as expected:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.http.client.ClientProtocolException
 at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:187)
 at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
 at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)
 at com.mycompany.initJunctions(VPPManager.java:451)
 at com.mycompany.initialize(VPPManager.java:119)
 at com.mycompany.Task.doRun(VPPMonitorTask.java:59)
 at com.ibm.dots.task.AbstractServerTaskExt.run(AbstractServerTaskExt.java:47)
 at com.ibm.dots.task.JobTaskService$ServiceTaskJob.doRun(JobTaskService.java:136)
 at com.ibm.dots.task.JobTaskService$ServiceTaskJob.run(JobTaskService.java:99)
 at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: org.apache.http.ProtocolException: Invalid response: HTTP/1.1 0 status code 000
 at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:276)
 at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)
 at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272)
 at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)
 at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
 at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)
 at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
 ... 9 more&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16352165" author="ppetrov" created="Mon, 5 Feb 2018 09:18:23 +0000"  >&lt;p&gt;Could you point me to a 4.4.x based&#160;&lt;b&gt;HttpMessageParser&lt;/b&gt; example? I&#160;could&#160;only find&#160;5.x based tests in the master.&lt;/p&gt;</comment>
                            <comment id="16352185" author="olegk" created="Mon, 5 Feb 2018 09:42:20 +0000"  >&lt;p&gt;@&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ppetrov&quot; class=&quot;user-hover&quot; rel=&quot;ppetrov&quot;&gt;ppetrov&lt;/a&gt; Please see&#160;&lt;a href=&quot;http://hc.apache.org/httpcomponents-client-4.5.x/httpclient/examples/org/apache/http/examples/client/ClientConfiguration.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this example&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12908963" name="canResponseHaveABody.png" size="127351" author="ppetrov" created="Fri, 2 Feb 2018 10:39:14 +0000"/>
                            <attachment id="12908962" name="doReceiveResponse.png" size="184708" author="ppetrov" created="Fri, 2 Feb 2018 10:39:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ppif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>