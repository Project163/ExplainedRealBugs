diff --git a/httpcore5-h2/src/main/java/org/apache/hc/core5/http2/impl/nio/AbstractH2StreamMultiplexer.java b/httpcore5-h2/src/main/java/org/apache/hc/core5/http2/impl/nio/AbstractH2StreamMultiplexer.java
index 6431c43de..03ac7302e 100644
--- a/httpcore5-h2/src/main/java/org/apache/hc/core5/http2/impl/nio/AbstractH2StreamMultiplexer.java
+++ b/httpcore5-h2/src/main/java/org/apache/hc/core5/http2/impl/nio/AbstractH2StreamMultiplexer.java
@@ -351,7 +351,7 @@ private int streamData(
             if (capacity <= 0) {
                 return 0;
             }
-            final int maxPayloadSize = Math.min(capacity, remoteConfig.getMaxFrameSize());
+            final int maxPayloadSize = Math.min(capacity, outputBuffer.getMaxFramePayloadSize());
             final int chunk;
             if (payload.remaining() <= maxPayloadSize) {
                 chunk = payload.remaining();
