diff --git a/src/main/java/org/apache/maven/plugin/CompilerMojo.java b/src/main/java/org/apache/maven/plugin/CompilerMojo.java
index b45603c..b1542dc 100644
--- a/src/main/java/org/apache/maven/plugin/CompilerMojo.java
+++ b/src/main/java/org/apache/maven/plugin/CompilerMojo.java
@@ -146,17 +146,19 @@ public class CompilerMojo
     {
         SourceInclusionScanner scanner = null;
 
+        // it's not defined if we get the ending with or without the dot '.'
+        String defaultIncludePattern = "**/*" + ( inputFileEnding.startsWith( "." ) ? "" : "." ) + inputFileEnding;
+
         if ( includes.isEmpty() && excludes.isEmpty() )
         {
-            String includePattern = "**/*" + ( inputFileEnding.startsWith( "." ) ? "" : "." ) + inputFileEnding;
-            includes = Collections.singleton( includePattern );
+            includes = Collections.singleton( defaultIncludePattern );
             scanner = new SimpleSourceInclusionScanner( includes, Collections.<String>emptySet() );
         }
         else
         {
             if ( includes.isEmpty() )
             {
-                includes.add( "**/*." + inputFileEnding );
+                includes.add( defaultIncludePattern );
             }
             scanner = new SimpleSourceInclusionScanner( includes, excludes );
         }
diff --git a/src/main/java/org/apache/maven/plugin/TestCompilerMojo.java b/src/main/java/org/apache/maven/plugin/TestCompilerMojo.java
index b28a505..409dd70 100644
--- a/src/main/java/org/apache/maven/plugin/TestCompilerMojo.java
+++ b/src/main/java/org/apache/maven/plugin/TestCompilerMojo.java
@@ -191,17 +191,19 @@ public class TestCompilerMojo
     {
         SourceInclusionScanner scanner = null;
 
+        // it's not defined if we get the ending with or without the dot '.'
+        String defaultIncludePattern = "**/*" + ( inputFileEnding.startsWith( "." ) ? "" : "." ) + inputFileEnding;
+
         if ( testIncludes.isEmpty() && testExcludes.isEmpty() )
         {
-            String includePattern = "**/*" + ( inputFileEnding.startsWith( "." ) ? "" : "." ) + inputFileEnding;
-            testIncludes = Collections.singleton( includePattern );
+            testIncludes = Collections.singleton( defaultIncludePattern );
             scanner = new SimpleSourceInclusionScanner( testIncludes, Collections.<String>emptySet() );
         }
         else
         {
             if ( testIncludes.isEmpty() )
             {
-                testIncludes.add( "**/*." + inputFileEnding );
+                testIncludes.add( defaultIncludePattern );
             }
             scanner = new SimpleSourceInclusionScanner( testIncludes, testExcludes );
         }
