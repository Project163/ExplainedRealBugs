diff --git a/src/main/java/org/apache/maven/plugin/CompilerMojo.java b/src/main/java/org/apache/maven/plugin/CompilerMojo.java
index bd66416..2f244b2 100644
--- a/src/main/java/org/apache/maven/plugin/CompilerMojo.java
+++ b/src/main/java/org/apache/maven/plugin/CompilerMojo.java
@@ -127,7 +127,10 @@ public class CompilerMojo
     {
         super.execute();
 
-        projectArtifact.setFile( outputDirectory );
+        if ( outputDirectory.isDirectory() )
+        {
+            projectArtifact.setFile( outputDirectory );
+        }
     }
 
     protected SourceInclusionScanner getSourceInclusionScanner( int staleMillis )
diff --git a/src/test/java/org/apache/maven/plugin/CompilerMojoTestCase.java b/src/test/java/org/apache/maven/plugin/CompilerMojoTestCase.java
index 928d203..e2e9644 100644
--- a/src/test/java/org/apache/maven/plugin/CompilerMojoTestCase.java
+++ b/src/test/java/org/apache/maven/plugin/CompilerMojoTestCase.java
@@ -19,11 +19,6 @@ package org.apache.maven.plugin;
  * under the License.
  */
 
-import org.apache.maven.plugin.stubs.CompilerManagerStub;
-import org.apache.maven.plugin.stubs.DebugEnabledLog;
-import org.apache.maven.plugin.testing.AbstractMojoTestCase;
-import org.apache.maven.plugin.testing.stubs.ArtifactStub;
-
 import java.io.File;
 import java.util.ArrayList;
 import java.util.Collections;
@@ -31,6 +26,12 @@ import java.util.HashSet;
 import java.util.List;
 import java.util.Set;
 
+import org.apache.maven.artifact.Artifact;
+import org.apache.maven.plugin.stubs.CompilerManagerStub;
+import org.apache.maven.plugin.stubs.DebugEnabledLog;
+import org.apache.maven.plugin.testing.AbstractMojoTestCase;
+import org.apache.maven.plugin.testing.stubs.ArtifactStub;
+
 public class CompilerMojoTestCase
     extends AbstractMojoTestCase
 {
@@ -54,6 +55,9 @@ public class CompilerMojoTestCase
             getTestCompilerMojo( compileMojo, "target/test-classes/unit/compiler-basic-test/plugin-config.xml" );
 
         testCompileMojo.execute();
+        
+        Artifact projectArtifact = (Artifact) getVariableValueFromObject( compileMojo, "projectArtifact" );
+        assertNotNull( "MCOMPILER-94: artifact file should only be null if there is nothing to compile", projectArtifact.getFile() );
 
         testClass = new File( testCompileMojo.getOutputDirectory(), "TestCompile0Test.class" );
 
@@ -75,6 +79,9 @@ public class CompilerMojoTestCase
 
         assertFalse( compileMojo.getOutputDirectory().exists() );
 
+        Artifact projectArtifact = (Artifact) getVariableValueFromObject( compileMojo, "projectArtifact" );
+        assertNull( "MCOMPILER-94: artifact file should be null if there is nothing to compile", projectArtifact.getFile() );
+
         TestCompilerMojo testCompileMojo =
             getTestCompilerMojo( compileMojo, "target/test-classes/unit/compiler-empty-source-test/plugin-config.xml" );
 
