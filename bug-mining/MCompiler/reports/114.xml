<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:22:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MCOMPILER-481] JPMS Regression: cannot access &lt;class&gt; (requires static module not include anymore)</title>
                <link>https://issues.apache.org/jira/browse/MCOMPILER-481</link>
                <project id="12317225" key="MCOMPILER">Maven Compiler Plugin (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;Version 3.8.1 is not affected.&lt;/p&gt;

&lt;p&gt;The problem lies in how the module-path is constructed by the maven-compiler-plugin &#8211; not sure what changes from 3.8.1 caused this.&lt;/p&gt;

&lt;p&gt;In 3.8.1:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-d
&#160; /home/simon/tmp/compiler-bug/app/target/test-classes
-classpath
&#160; /home/simon/tmp/compiler-bug/app/target/test-classes
&#160; /home/simon/.m2/repository/org/junit/jupiter/junit-jupiter-api/5.8.2/junit-jupiter-api-5.8.2.jar
&#160; /home/simon/.m2/repository/org/opentest4j/opentest4j/1.2.0/opentest4j-1.2.0.jar
&#160; /home/simon/.m2/repository/org/junit/platform/junit-platform-commons/1.8.2/junit-platform-commons-1.8.2.jar
&#160; /home/simon/.m2/repository/org/apiguardian/apiguardian-api/1.1.2/apiguardian-api-1.1.2.jar
&#160;&#160;
--module-path
&#160; /home/simon/tmp/compiler-bug/app/target/classes
&#160; /home/simon/.m2/repository/org/example/compiler-bug-service/1.0-SNAPSHOT/compiler-bug-service-1.0-SNAPSHOT.jar
&#160; /home/simon/.m2/repository/org/eclipse/jetty/jetty-util-ajax/10.0.7/jetty-util-ajax-10.0.7.jar
&#160; /home/simon/.m2/repository/org/eclipse/jetty/jetty-util/10.0.7/jetty-util-10.0.7.jar
&#160; /home/simon/.m2/repository/org/slf4j/slf4j-api/2.0.0-alpha5/slf4j-api-2.0.0-alpha5.jar
&#160;&#160;
-sourcepath
&#160; /home/simon/tmp/compiler-bug/app/src/test/java
&#160; /home/simon/tmp/compiler-bug/app/target/generated-test-sources/test-annotations
&#160;&#160;
-s
&#160; /home/simon/tmp/compiler-bug/app/target/generated-test-sources/test-annotations
-g
-nowarn
--release
&#160; 11
-encoding
&#160; UTF-8
--patch-module
&#160; compiler.bug.app=/home/simon/tmp/compiler-bug/app/target/classes
&#160; /home/simon/tmp/compiler-bug/app/src/test/java
&#160; /home/simon/tmp/compiler-bug/app/target/generated-test-sources/test-annotations
&#160;&#160;
--add-reads
&#160; compiler.bug.app=ALL-UNNAMED &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In 3.9.0:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-d
&#160; /home/simon/tmp/compiler-bug/app/target/test-classes
-classpath
&#160; /home/simon/tmp/compiler-bug/app/target/test-classes
&#160; /home/simon/.m2/repository/org/eclipse/jetty/jetty-util-ajax/10.0.7/jetty-util-ajax-10.0.7.jar
&#160; /home/simon/.m2/repository/org/eclipse/jetty/jetty-util/10.0.7/jetty-util-10.0.7.jar
&#160; /home/simon/.m2/repository/org/slf4j/slf4j-api/2.0.0-alpha5/slf4j-api-2.0.0-alpha5.jar
&#160; /home/simon/.m2/repository/org/junit/jupiter/junit-jupiter-api/5.8.2/junit-jupiter-api-5.8.2.jar
&#160; /home/simon/.m2/repository/org/opentest4j/opentest4j/1.2.0/opentest4j-1.2.0.jar
&#160; /home/simon/.m2/repository/org/junit/platform/junit-platform-commons/1.8.2/junit-platform-commons-1.8.2.jar
&#160; /home/simon/.m2/repository/org/apiguardian/apiguardian-api/1.1.2/apiguardian-api-1.1.2.jar
&#160;&#160;
--module-path
&#160; /home/simon/tmp/compiler-bug/app/target/classes
&#160; /home/simon/.m2/repository/org/example/compiler-bug-service/1.0-SNAPSHOT/compiler-bug-service-1.0-SNAPSHOT.jar
&#160;&#160;
-sourcepath
&#160; /home/simon/tmp/compiler-bug/app/src/test/java
&#160; /home/simon/tmp/compiler-bug/app/target/generated-test-sources/test-annotations
&#160;&#160;
-s
&#160; /home/simon/tmp/compiler-bug/app/target/generated-test-sources/test-annotations
-g
-nowarn
--release
&#160; 11
-encoding
&#160; UTF-8
--patch-module
&#160; compiler.bug.app=/home/simon/tmp/compiler-bug/app/target/classes
&#160; /home/simon/tmp/compiler-bug/app/src/test/java
&#160; /home/simon/tmp/compiler-bug/app/target/generated-test-sources/test-annotations
&#160;&#160;
--add-reads
&#160; compiler.bug.app=ALL-UNNAMED &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Running with 3.9.0 yields:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.9.0:testCompile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-testCompile) on project compiler-bug-app: Compilation failure
[ERROR] /home/simon/tmp/compiler-bug/app/src/test/java/org/test/app/MainTest.java:[12,38] cannot access org.eclipse.jetty.util.ajax.JSON
[ERROR] &#160; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;file &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; org.eclipse.jetty.util.ajax.JSON not found &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Class &lt;tt&gt;JSON&lt;/tt&gt; is in&#160;&lt;tt&gt;jetty-util-10.0.7.jar&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;In 3.9.0 this jar is missing from the module-path, causing the error.&lt;/p&gt;

&lt;p&gt;Attached you can find a reproducer: switch the maven-compiler-plugin version from 3.8.1 (works) to 3.9.0 (does not work) in the main POM.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13423120">MCOMPILER-481</key>
            <summary>JPMS Regression: cannot access &lt;class&gt; (requires static module not include anymore)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olamy">Olivier Lamy</assignee>
                                    <reporter username="sbordet">Simone Bordet</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Jan 2022 17:52:20 +0000</created>
                <updated>Mon, 16 Jun 2025 11:23:28 +0000</updated>
                            <resolved>Tue, 1 Feb 2022 22:30:42 +0000</resolved>
                                    <version>3.9.0</version>
                                    <fixVersion>3.10.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="17477347" author="sbordet" created="Mon, 17 Jan 2022 18:05:55 +0000"  >&lt;p&gt;The setup is that module &quot;app&quot; depends on module &quot;service&quot;.&lt;/p&gt;

&lt;p&gt;Module &quot;service&quot; has an interface and a default implementation that depends optionally (requires static) on the JSON class (present in the jetty-util-ajax-10.0.7.jar).&lt;/p&gt;

&lt;p&gt;Module &quot;app&quot; wants to perform some test, so it has to bind to an implementation (only for the tests &#8211; the source still depends only on the interface declared in module &quot;service&quot;).&lt;/p&gt;

&lt;p&gt;I would have expected that putting jetty-util-ajax-10.0.7.jar in the classpath with --patch-module and --add-reads compiler.bug.app=ALL-UNNAMED would be enough, but apparently it is not, so this may well be a javac compiler bug?&lt;/p&gt;

&lt;p&gt;The only alternative I see is to keep track of requires static dependencies, and if a Maven module declares them as a dependency in the POM, then they get added to the module-path?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rfscholte&quot; class=&quot;user-hover&quot; rel=&quot;rfscholte&quot;&gt;rfscholte&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olamy&quot; class=&quot;user-hover&quot; rel=&quot;olamy&quot;&gt;olamy&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sor&quot; class=&quot;user-hover&quot; rel=&quot;sor&quot;&gt;sor&lt;/a&gt; any idea?&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="17477436" author="rfscholte" created="Mon, 17 Jan 2022 21:32:07 +0000"  >&lt;p&gt;Thanks for test-project, that really helps to understand the issue. The handling of static required modules has changed a bit. I need some time to figure out how we want to handle an optional dependencies in this way. &lt;/p&gt;</comment>
                            <comment id="17477494" author="sbordet" created="Tue, 18 Jan 2022 00:23:33 +0000"  >&lt;p&gt;The more I think about this, the more I&apos;m surprised at why &lt;tt&gt;--add-reads compiler.bug.app=ALL-UNNAMED&lt;/tt&gt; is not enough...&lt;/p&gt;</comment>
                            <comment id="17478330" author="olamy" created="Wed, 19 Jan 2022 04:35:59 +0000"  >&lt;p&gt;requires static are not include anymore per default (ResolvePathsRequest has includeStatic field false per default).&lt;/p&gt;

&lt;p&gt;BTW I tried to change m-compiler-p to ResolvePathsRequest.setIncludeStatic(true) but doesn&apos;t work.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rfscholte&quot; class=&quot;user-hover&quot; rel=&quot;rfscholte&quot;&gt;rfscholte&lt;/a&gt;&#160; This commit has some issues &lt;a href=&quot;https://github.com/codehaus-plexus/plexus-languages/commit/868b3d7439634c35d05cfc6aa8a012adb070d02d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/codehaus-plexus/plexus-languages/commit/868b3d7439634c35d05cfc6aa8a012adb070d02d&lt;/a&gt; I&apos;m investigating.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sbordet&quot; class=&quot;user-hover&quot; rel=&quot;sbordet&quot;&gt;sbordet&lt;/a&gt; not sure why you need static&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;requires static org.eclipse.jetty.util.ajax;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Thanks for the test project. As there is no license included do you mind if I include it as a test in the maven-compiler-plugin code?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17478380" author="rfscholte" created="Wed, 19 Jan 2022 07:57:50 +0000"  >&lt;p&gt;Based on the test, it is about supporting &quot;static transitive&quot;, which is very unusual but valid. I should have added a cross-link to the original issue in one of the plugins.&lt;/p&gt;</comment>
                            <comment id="17478628" author="rfscholte" created="Wed, 19 Jan 2022 12:11:29 +0000"  >&lt;p&gt;`ResolvePathsRequest.setIncludeStatic(true)` did fix it for me, still wondering if this is the right approach.&lt;/p&gt;</comment>
                            <comment id="17478630" author="rfscholte" created="Wed, 19 Jan 2022 12:13:52 +0000"  >&lt;p&gt;Found it, it was &lt;a href=&quot;https://issues.apache.org/jira/browse/MJAVADOC-677&quot; title=&quot;Using &amp;quot;requires static transitive&amp;quot; makes javadoc goal fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MJAVADOC-677&quot;&gt;&lt;del&gt;MJAVADOC-677&lt;/del&gt;&lt;/a&gt; that required this change.&lt;/p&gt;</comment>
                            <comment id="17479103" author="olamy" created="Thu, 20 Jan 2022 05:43:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rfscholte&quot; class=&quot;user-hover&quot; rel=&quot;rfscholte&quot;&gt;rfscholte&lt;/a&gt;&#160; I started a branch called &lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-481&quot; title=&quot;JPMS Regression: cannot access &amp;lt;class&amp;gt; (requires static module not include anymore)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-481&quot;&gt;&lt;del&gt;MCOMPILER-481&lt;/del&gt;&lt;/a&gt;-requires-static-included draft PR &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/82&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/82&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This PR include the sample project as a new IT test.&lt;/p&gt;

&lt;p&gt;simple change ResolvePathsRequest.setIncludeStatic(true) do not fix the problem&lt;/p&gt;

&lt;p&gt;I made some other changes in plexus-java see draft PR &lt;a href=&quot;https://github.com/codehaus-plexus/plexus-languages/pull/106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/codehaus-plexus/plexus-languages/pull/106&lt;/a&gt; the changes fix this problem but there is now 2 test failures&lt;/p&gt;

&lt;p&gt;still investigating&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17479961" author="rfscholte" created="Fri, 21 Jan 2022 09:58:55 +0000"  >&lt;p&gt;This is how I think it should work for compilation:&lt;br/&gt;
Based on the module descriptor:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;direct static required modules should always be included&lt;/li&gt;
	&lt;li&gt;indirect required modules should always be included&lt;/li&gt;
	&lt;li&gt;indirect static required modules should not be included&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;And I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sbordet&quot; class=&quot;user-hover&quot; rel=&quot;sbordet&quot;&gt;sbordet&lt;/a&gt;: it is very weird that &lt;tt&gt;--add-reads compiler.bug.app=ALL-UNNAMED&lt;/tt&gt; doesn&apos;t work.&lt;/p&gt;

&lt;p&gt;To me the adjusted separation between 3.8.1 and 3.9.0 now looks better, maybe we&apos;ve now hit an issue in the compiler.&lt;/p&gt;</comment>
                            <comment id="17479973" author="sbordet" created="Fri, 21 Jan 2022 10:19:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rfscholte&quot; class=&quot;user-hover&quot; rel=&quot;rfscholte&quot;&gt;rfscholte&lt;/a&gt; I was thinking a variation of your algorithm above, like this:&lt;/p&gt;

&lt;p&gt;From &lt;tt&gt;module-info.java&lt;/tt&gt; files:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;required modules should be included in module-path&lt;/li&gt;
	&lt;li&gt;transitively resolved required modules should be included in module-path&lt;/li&gt;
	&lt;li&gt;direct static requires modules should be included in module-path&lt;/li&gt;
	&lt;li&gt;indirect static required modules should &lt;em&gt;not&lt;/em&gt; be included in module-path&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;From the POM:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;every dependency that belongs to any of the categories above (included the last one) should be included in module-path, if not already&lt;/li&gt;
	&lt;li&gt;every dependency that does &lt;em&gt;not&lt;/em&gt; belong to the categories above should be included in the class-path.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;For my specific case, &lt;tt&gt;jetty-util-ajax&lt;/tt&gt; belongs to category module-info(4), and will be included in the module-path by pom(1), but &lt;tt&gt;junit&lt;/tt&gt; belongs to category pom(2), so it can remain in the class-path (with the usual &lt;tt&gt;--add-reads &amp;lt;module&amp;gt;=ALL-UNNAMED&lt;/tt&gt;).&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="17479983" author="sbordet" created="Fri, 21 Jan 2022 10:32:14 +0000"  >&lt;p&gt;&lt;cite&gt;And I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sbordet&quot; class=&quot;user-hover&quot; rel=&quot;sbordet&quot;&gt;sbordet&lt;/a&gt;: it is very weird that&#160;&lt;tt&gt;--add-reads compiler.bug.app=ALL-UNNAMED&lt;/tt&gt; doesn&apos;t work.&lt;/cite&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ll send an email to compiler-dev, linking this issue.&lt;/p&gt;

&lt;p&gt;In any case, it will be fixed for Java 19, perhaps backported, so we still need a workaround in Maven, right?&lt;/p&gt;</comment>
                            <comment id="17479984" author="rfscholte" created="Fri, 21 Jan 2022 10:32:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sbordet&quot; class=&quot;user-hover&quot; rel=&quot;sbordet&quot;&gt;sbordet&lt;/a&gt; smart to add those numbers &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I just don&apos;t understand the add-reads is ignored in this case by the compiler.&lt;/p&gt;</comment>
                            <comment id="17479986" author="rfscholte" created="Fri, 21 Jan 2022 10:36:30 +0000"  >&lt;p&gt;Let&apos;s see what we&apos;ll get back from the compiler-dev list. The &lt;a href=&quot;https://github.com/codehaus-plexus/plexus-languages/blob/master/plexus-java/src/main/java/org/codehaus/plexus/languages/java/jpms/ResolvePathsRequest.java#L206-L210&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ResolvePathsRequest&lt;/a&gt; has an option to enforce extra modules, maybe we need to expose that as a workaround.&lt;/p&gt;</comment>
                            <comment id="17479990" author="sbordet" created="Fri, 21 Jan 2022 10:47:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://mail.openjdk.java.net/pipermail/compiler-dev/2022-January/018989.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://mail.openjdk.java.net/pipermail/compiler-dev/2022-January/018989.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17480228" author="sbordet" created="Fri, 21 Jan 2022 18:42:27 +0000"  >&lt;p&gt;There was a reply in the compiler-dev thread.&lt;/p&gt;

&lt;p&gt;IIUC, when the &lt;tt&gt;compiler.bug.service&lt;/tt&gt; module is imported as a dependency, it does not import (because it&apos;s a &lt;tt&gt;requires static&lt;/tt&gt;) the &lt;tt&gt;jetty-util-ajax&lt;/tt&gt; jar.&lt;/p&gt;

&lt;p&gt;So when compiling the module &lt;tt&gt;compiler.bug.app,&lt;/tt&gt; the &quot;app&quot; module sees the &lt;tt&gt;JSON&lt;/tt&gt; class because of &lt;tt&gt;&amp;#45;-add-reads compiler.bug.app=ALL-UNNAMED&lt;/tt&gt;, but the &quot;service&quot; module still does not see it because it&apos;s not in the module-path and neither there is an &lt;tt&gt;&amp;#45;-add-reads&lt;/tt&gt; for the &quot;service&quot; module.&lt;/p&gt;

&lt;p&gt;So it seems a legit Maven Compiler Plugin issue/ feature that needs to be supported.&lt;/p&gt;

&lt;p&gt;In light of this information, is my algorithm or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rfscholte&quot; class=&quot;user-hover&quot; rel=&quot;rfscholte&quot;&gt;rfscholte&lt;/a&gt;&apos;s algorithm the right solution, or something else?&lt;/p&gt;</comment>
                            <comment id="17480394" author="rfscholte" created="Sat, 22 Jan 2022 10:20:47 +0000"  >&lt;p&gt;As I read it, it can only happen with test-compile. It looks like that only need the includeStatic option, and plexus-java needs to make sure it will include them static required modules, no matter the depth.&lt;br/&gt;
And there&apos;s the tricky part, as is it recursive code: direct static modules should always be included, indirect static modules depend on this flag.&lt;/p&gt;</comment>
                            <comment id="17481495" author="olamy" created="Tue, 25 Jan 2022 02:13:20 +0000"  >&lt;p&gt;I find it strange we almost do not read anything from pom regarding (test?) dependencies.&lt;/p&gt;

&lt;p&gt;Shouldn&apos;t we automatically add test dependencies coming from the pom&#160; in module-path&#160; for test?&lt;/p&gt;

&lt;p&gt;not sure including static should be limited to test compilation only. If you look at the provided test project. not included static will fail compilation as there is&#160;&lt;/p&gt;

&lt;p&gt;requires static org.eclipse.jetty.util.ajax&lt;/p&gt;

&lt;p&gt;and the dependency is marked as optional&lt;/p&gt;

&lt;p&gt;but it&apos;s required for compilation.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17481574" author="mgrigorov" created="Tue, 25 Jan 2022 06:34:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-482&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MCOMPILER-482&lt;/a&gt; is a similar issue like this one. You can take an inspiration from it for more test cases.&lt;/p&gt;</comment>
                            <comment id="17481623" author="rfscholte" created="Tue, 25 Jan 2022 07:53:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;Shouldn&apos;t we automatically add test dependencies coming from the pom in module-path for test?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No, that would mean that for instance junit ends up on the modulepath, that doesn&apos;t make sense.&lt;br/&gt;
Only jars that are used by both compile and test should be added to the modulepath.&lt;/p&gt;</comment>
                            <comment id="17482296" author="olamy" created="Wed, 26 Jan 2022 07:16:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rfscholte&quot; class=&quot;user-hover&quot; rel=&quot;rfscholte&quot;&gt;rfscholte&lt;/a&gt; please have a look &lt;a href=&quot;https://github.com/codehaus-plexus/plexus-languages/pull/106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/codehaus-plexus/plexus-languages/pull/106&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;this is fixing both issues&#160;&lt;/p&gt;

&lt;p&gt;and need compiler-plugin PR as well &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/82&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/82&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;but to test m-c-p PR you need a local build of plexus-languages PR&#160;&lt;/p&gt;</comment>
                            <comment id="17485124" author="olamy" created="Tue, 1 Feb 2022 08:51:37 +0000"  >&lt;p&gt;ETA plexus-java released.&lt;/p&gt;

&lt;p&gt;still the m-c-p PR to merge&lt;/p&gt;</comment>
                            <comment id="17485513" author="olamy" created="Tue, 1 Feb 2022 22:30:42 +0000"  >&lt;p&gt;PR merge&lt;/p&gt;</comment>
                            <comment id="17641581" author="hohwille" created="Wed, 30 Nov 2022 22:53:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/74635027/java-compiler-error-cannot-access-class-file-for-not-found&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/74635027/java-compiler-error-cannot-access-class-file-for-not-found&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17679050" author="cstamas" created="Fri, 20 Jan 2023 08:17:48 +0000"  >&lt;p&gt;When building maven-compiler-plugin master with Maven 3.9.0 this IT fails&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] -------------------------------------------------
[INFO] Build Summary:
[INFO] &#160; Passed: 62, Failed: 1, Errors: 0, Skipped: 5
[INFO] -------------------------------------------------
[ERROR] The following builds failed:
[ERROR] * &#160;MCOMPILER-481-requires-static-included/pom.xml
[INFO] ------------------------------------------------- &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Using&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[cstamas@urnebes maven-compiler-plugin]$ java -version
openjdk version &quot;11.0.17&quot; 2022-10-18
OpenJDK Runtime Environment Temurin-11.0.17+8 (build 11.0.17+8)
OpenJDK 64-Bit Server VM Temurin-11.0.17+8 (build 11.0.17+8, mixed mode)
[cstamas@urnebes maven-compiler-plugin]$ mvn -v
Apache Maven 3.9.0-SNAPSHOT (f7ca0b697ac7223b42d982d92cad5af48c9d184d)
Maven home: /home/cstamas/.sdkman/candidates/maven/current
Java version: 11.0.17, vendor: Eclipse Adoptium, runtime: /home/cstamas/.sdkman/candidates/java/11.0.17-tem
Default locale: en_US, platform encoding: UTF-8
OS name: &quot;linux&quot;, version: &quot;6.1.6-200.fc37.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;
[cstamas@urnebes maven-compiler-plugin]$&#160; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Same happens with Java17 + mvn 3.9.0-SNAP&lt;/p&gt;</comment>
                            <comment id="17679435" author="rfscholte" created="Sat, 21 Jan 2023 11:08:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cstamas&quot; class=&quot;user-hover&quot; rel=&quot;cstamas&quot;&gt;cstamas&lt;/a&gt; what makes you think it is a plugin bug? &lt;a href=&quot;https://ci-maven.apache.org/job/Maven/job/maven-box/job/maven-compiler-plugin/job/master/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-maven.apache.org/job/Maven/job/maven-box/job/maven-compiler-plugin/job/master/&lt;/a&gt; is green. Tested succesfully locally with 3.8.7, but failed with 3.9.0-SNAPSHOT. Looks more like a Maven bug.&lt;/p&gt;</comment>
                            <comment id="17682296" author="cstamas" created="Mon, 30 Jan 2023 22:39:58 +0000"  >&lt;p&gt;This seems like Surefire 3.0.0-M8 bug (as it is used by Maven 3.9 and Maven 4.0), as Maven 3.8.7 uses ancient 2.x surefire.... (the IT fails at test, compilation passes OK in 3.9.x)&lt;/p&gt;</comment>
                            <comment id="17682326" author="olamy" created="Tue, 31 Jan 2023 00:28:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cstamas&quot; class=&quot;user-hover&quot; rel=&quot;cstamas&quot;&gt;cstamas&lt;/a&gt; good catch!! maybe you can lock the surefire plugin version in the IT&lt;br/&gt;
but again another difference between what m-compiler-p is doing for jpms and what surefire is doing... &#129318;&#128553;&lt;/p&gt;</comment>
                            <comment id="17979104" author="olamy" created="Mon, 16 Jun 2025 11:23:28 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/issues/712&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-compiler-plugin#712&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13424324">MCOMPILER-482</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13379096">MJAVADOC-677</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13424324">MCOMPILER-482</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13520467">MCOMPILER-523</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13437730">SUREFIRE-2057</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13038950" name="compiler-bug.tar.gz" size="1581" author="sbordet" created="Mon, 17 Jan 2022 17:51:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ynw0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>