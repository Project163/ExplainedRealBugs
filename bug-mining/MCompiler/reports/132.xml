<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:22:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MCOMPILER-567] Fail to compile if the &quot;generated-sources/annotations&quot; does not exist</title>
                <link>https://issues.apache.org/jira/browse/MCOMPILER-567</link>
                <project id="12317225" key="MCOMPILER">Maven Compiler Plugin (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;On some configurations (like a Kotlin project), the cleanup of the generated-soruces/annotations directory returns an error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.IllegalStateException: basedir /maven-compiler-plugin/target/it/MCOMPILER-XX/target/generated-sources/annotations does not exist
&#160; &#160; at org.codehaus.plexus.util.DirectoryScanner.scan (DirectoryScanner.java:268)
&#160; &#160; at org.codehaus.plexus.compiler.AbstractCompiler.getSourceFilesForSourceRoot (AbstractCompiler.java:168)
&#160; &#160; at org.codehaus.plexus.compiler.AbstractCompiler.getSourceFiles (AbstractCompiler.java:194)
&#160; &#160; at org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile (JavacCompiler.java:138)
&#160; &#160; at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1187)
&#160; &#160; at org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:212)
&#160; &#160; at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)
&#160; &#160; at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:328)
&#160; &#160; at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:316)
&#160; &#160; at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:212)
&#160; &#160; at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:174)
&#160; &#160; at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:75)
&#160; &#160; at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:162)
&#160; &#160; at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)
&#160; &#160; at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:159)
&#160; &#160; at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)
&#160; &#160; at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)
&#160; &#160; at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)
&#160; &#160; at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)
&#160; &#160; at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:261)
&#160; &#160; at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:173)
&#160; &#160; at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:101)
&#160; &#160; at org.apache.maven.cli.MavenCli.execute (MavenCli.java:906)
&#160; &#160; at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:283)
&#160; &#160; at org.apache.maven.cli.MavenCli.main (MavenCli.java:206)
&#160; &#160; at jdk.internal.reflect.DirectMethodHandleAccessor.invoke (DirectMethodHandleAccessor.java:103)
&#160; &#160; at java.lang.reflect.Method.invoke (Method.java:580)
&#160; &#160; at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:283)
&#160; &#160; at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:226)
&#160; &#160; at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:407)
&#160; &#160; at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I didn&apos;t catch this earlier since I don&apos;t use Kotlin and on a normal project, this should not be an issue since the javac documentation mentions that the directory, and any necessary subdirectories, will be created if they do not already exist.&lt;/p&gt;

&lt;p&gt;But on a somewhat modified project that compiles kotlin source code, this triggers an issue on plexus-compiler where the generated-soruces directory does not exist.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This might be related to issue &lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-538&quot; title=&quot;Do not add target/generated-sources/annotations to the source roots&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-538&quot;&gt;&lt;del&gt;MCOMPILER-538&lt;/del&gt;&lt;/a&gt;, where it claims that generated source root is not required for javac, but additional confirmation is required.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The fix will be to create the generated sources directory to preserve the current behavior.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13562265">MCOMPILER-567</key>
            <summary>Fail to compile if the &quot;generated-sources/annotations&quot; does not exist</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sjaranowski">Slawomir Jaranowski</assignee>
                                    <reporter username="jorsol">Jorge Sol&#243;rzano</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 19 Dec 2023 00:13:30 +0000</created>
                <updated>Mon, 16 Jun 2025 11:25:15 +0000</updated>
                            <resolved>Wed, 20 Dec 2023 22:11:28 +0000</resolved>
                                    <version>3.12.0</version>
                                    <fixVersion>3.12.1</fixVersion>
                                        <due></due>
                            <votes>7</votes>
                                    <watches>17</watches>
                                                                                                                <comments>
                            <comment id="17798388" author="githubbot" created="Tue, 19 Dec 2023 00:29:29 +0000"  >&lt;p&gt;jorsol opened a new pull request, #218:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/218&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &#8230;s is not created&lt;/p&gt;

&lt;p&gt;   Following this checklist to help us incorporate your &lt;br/&gt;
   contribution quickly and easily:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;X&amp;#93;&lt;/span&gt; Make sure there is a &lt;span class=&quot;error&quot;&gt;&amp;#91;JIRA issue&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MCOMPILER&lt;/a&gt;) filed&lt;br/&gt;
          for the change (usually before you start working on it).  Trivial changes like typos do not &lt;br/&gt;
          require a JIRA issue.  Your pull request should address just this issue, without &lt;br/&gt;
          pulling in other changes.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;X&amp;#93;&lt;/span&gt; Each commit in the pull request should have a meaningful subject line and body.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;X&amp;#93;&lt;/span&gt; Format the pull request title like `&lt;span class=&quot;error&quot;&gt;&amp;#91;MCOMPILER-XXX&amp;#93;&lt;/span&gt; - Fixes bug in ApproximateQuantiles`,&lt;br/&gt;
          where you replace `MCOMPILER-XXX` with the appropriate JIRA issue. Best practice&lt;br/&gt;
          is to use the JIRA issue title in the pull request title and in the first line of the &lt;br/&gt;
          commit message.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;X&amp;#93;&lt;/span&gt; Write a pull request description that is detailed enough to understand what the pull request does, how, and why.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;X&amp;#93;&lt;/span&gt; Run `mvn clean verify` to make sure basic checks pass. A more thorough check will&lt;br/&gt;
          be performed on your pull request automatically.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;X&amp;#93;&lt;/span&gt; You have run the integration tests successfully (`mvn -Prun-its clean verify`).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   If your pull request is about ~20 lines of code you don&apos;t need to sign an&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;Individual Contributor License Agreement&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.apache.org/licenses/icla.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/licenses/icla.pdf&lt;/a&gt;) if you are unsure&lt;br/&gt;
   please ask on the developers list.&lt;/p&gt;

&lt;p&gt;   To make clear that you license your contribution under &lt;br/&gt;
   the &lt;span class=&quot;error&quot;&gt;&amp;#91;Apache License Version 2.0, January 2004&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;)&lt;br/&gt;
   you have to acknowledge this by using the following check-box.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;X&amp;#93;&lt;/span&gt; I hereby declare this contribution to be licenced under the &lt;span class=&quot;error&quot;&gt;&amp;#91;Apache License Version 2.0, January 2004&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;X&amp;#93;&lt;/span&gt; In any other case, please file an &lt;span class=&quot;error&quot;&gt;&amp;#91;Apache Individual Contributor License Agreement&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.apache.org/licenses/icla.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/licenses/icla.pdf&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="17798450" author="slawekjaranowski" created="Tue, 19 Dec 2023 06:37:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jorsol&quot; class=&quot;user-hover&quot; rel=&quot;jorsol&quot;&gt;jorsol&lt;/a&gt; Do you want say that all kotlin compilation will fail? Or depends on other configuration? &lt;/p&gt;

&lt;p&gt;But look like should have a higher priority ...&lt;/p&gt;</comment>
                            <comment id="17798455" author="jorsol" created="Tue, 19 Dec 2023 06:53:43 +0000"  >&lt;p&gt;It looks like only on &quot;some&quot; configurations, the attached IT uses &amp;lt;sourceDirectory&amp;gt; that apparently affects the behavior of plexus-compiler, I tried some other configurations but it seems it&apos;s triggered by this, could not fully check why but &lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-538&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MCOMPILER-538&lt;/a&gt; gives me a hint that the generated-sources/annotations directory should not be added to the generated source root.&lt;/p&gt;

&lt;p&gt;Annotation processors are handled somewhat specially by javac, and it seems is not correct to add the generated-sources to the source list, as adding it to the -s argument is enough. Is hard to provide a failing test since the generated-sources/annotations directory is cleaned but IMO it looks like the fix in &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/191/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/191/files&lt;/a&gt; is correct, I have tested with both changes, and works as expected.&lt;/p&gt;

&lt;p&gt;And yes, I agree that this should have a higher priority, so we might need to do a 3.12.1 release.&lt;/p&gt;</comment>
                            <comment id="17798578" author="jherkel" created="Tue, 19 Dec 2023 13:26:50 +0000"  >&lt;p&gt;I can see something similar but for test-annotations dir&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.IllegalStateException: basedir /home/user1/projects/ch2/server/common/module-api/target/generated-test-sources/test-annotations does not exist
&#160; &#160; at org.codehaus.plexus.util.DirectoryScanner.scan (DirectoryScanner.java:268)
&#160; &#160; at org.codehaus.plexus.compiler.AbstractCompiler.getSourceFilesForSourceRoot (AbstractCompiler.java:168)
&#160; &#160; at org.codehaus.plexus.compiler.AbstractCompiler.getSourceFiles (AbstractCompiler.java:194)
&#160; &#160; at org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile (JavacCompiler.java:138)
&#160; &#160; at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1186)
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17798590" author="jorsol" created="Tue, 19 Dec 2023 13:54:44 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jherkel&quot; class=&quot;user-hover&quot; rel=&quot;jherkel&quot;&gt;jherkel&lt;/a&gt; do you have a reproducer for this?&lt;/p&gt;

&lt;p&gt;Can you please try if the changes in &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/218&lt;/a&gt; fix your problem?&lt;/p&gt;

&lt;p&gt;Also, can you please check if &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/191&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/191&lt;/a&gt; works for you?&lt;/p&gt;</comment>
                            <comment id="17798622" author="norrisjeremy" created="Tue, 19 Dec 2023 15:20:01 +0000"  >&lt;p&gt;Yes, please spin a 3.12.1 release that fixes this ASAP.&lt;br/&gt;
It&apos;s not just Kotlin projects that are impacted: we have a large Java based project that is impacted as well.&lt;/p&gt;</comment>
                            <comment id="17798624" author="norrisjeremy" created="Tue, 19 Dec 2023 15:27:20 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.lang.IllegalStateException: basedir .../target/generated-test-sources/test-annotations does not exist
    at org.codehaus.plexus.util.DirectoryScanner.scan (DirectoryScanner.java:268)
    at org.codehaus.plexus.compiler.AbstractCompiler.getSourceFilesForSourceRoot (AbstractCompiler.java:168)
    at org.codehaus.plexus.compiler.AbstractCompiler.getSourceFiles (AbstractCompiler.java:194)
    at org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile (JavacCompiler.java:138)
    at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1186)
    at org.apache.maven.plugin.compiler.TestCompilerMojo.execute (TestCompilerMojo.java:204)
    ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17798627" author="jorsol" created="Tue, 19 Dec 2023 15:28:19 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=norrisjeremy&quot; class=&quot;user-hover&quot; rel=&quot;norrisjeremy&quot;&gt;norrisjeremy&lt;/a&gt;, could you please provide a small reproducer that triggers this issue?&lt;/p&gt;

&lt;p&gt;Can you please paste your maven-compiler-plugin configuration here?&lt;/p&gt;</comment>
                            <comment id="17798630" author="norrisjeremy" created="Tue, 19 Dec 2023 15:34:50 +0000"  >&lt;p&gt;I&apos;ve confirmed that all combinations of the following two PRs appears to resolve the issue for us:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/191&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/191&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/218&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17798633" author="norrisjeremy" created="Tue, 19 Dec 2023 15:41:23 +0000"  >&lt;p&gt;Hi Jorge,&lt;/p&gt;

&lt;p&gt;Unfortunately, I don&apos;t have a great reproducer at the moment. For us, we have a large multi-module project and it seemingly triggers in at least one module, that has an pretty innocuous pom.xml. We do use a couple annotation processors in our maven-compiler-plugin configuration (Error Prone &amp;amp; Lombok), so my first guess is it is somehow related to that.&lt;br/&gt;
Either or both of the PRs cited earlier (&lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/191&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/191&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/218&lt;/a&gt;) appear to resolve the issue and allow this module to compile without the IllegalStateException being thrown.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;br/&gt;
Jeremy&lt;/p&gt;</comment>
                            <comment id="17798683" author="jorsol" created="Tue, 19 Dec 2023 17:54:56 +0000"  >&lt;p&gt;I&apos;m trying to generate a reproducer that doesn&apos;t depend on Kotlin, but none of the combinations I have tried fails, the fix is tested and reported to work, but trying to create a self-contained IT (different from the Kotlin one) is hard.&lt;/p&gt;</comment>
                            <comment id="17798685" author="norrisjeremy" created="Tue, 19 Dec 2023 17:59:30 +0000"  >&lt;p&gt;Hi Jorge,&lt;/p&gt;

&lt;p&gt;I haven&apos;t been able to create a simple reproducer either.&lt;br/&gt;
I&apos;ll keep trying and if I manage to create one I&apos;ll report back here.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Jeremy&lt;/p&gt;</comment>
                            <comment id="17798688" author="jorsol" created="Tue, 19 Dec 2023 18:01:45 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=norrisjeremy&quot; class=&quot;user-hover&quot; rel=&quot;norrisjeremy&quot;&gt;norrisjeremy&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Is possible to share the pom.xml with the configuration you are using?&lt;/p&gt;</comment>
                            <comment id="17798692" author="norrisjeremy" created="Tue, 19 Dec 2023 18:06:27 +0000"  >&lt;p&gt;Hi Jorge,&lt;/p&gt;

&lt;p&gt;Unfortunately I cannot: it&apos;s a large proprietary, hierarchical project with 30+ modules that uses significant inheritance from parent pom&apos;s.&lt;br/&gt;
I&apos;m trying to breakdown and distill a simple reproducer, but no luck as of yet.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Jeremy&lt;/p&gt;</comment>
                            <comment id="17798703" author="norrisjeremy" created="Tue, 19 Dec 2023 18:49:36 +0000"  >&lt;p&gt;Hi Jorge,&lt;/p&gt;

&lt;p&gt;Ok, I think I finally figured out a what reproduces it: make sure you have an empty `src/test/java` directory (but making sure you have one or more Java files to compile under `src/main/java` and then use the following pom:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&amp;gt;
  &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;
  &amp;lt;groupId&amp;gt;foo&amp;lt;/groupId&amp;gt;
  &amp;lt;artifactId&amp;gt;bar&amp;lt;/artifactId&amp;gt;
  &amp;lt;version&amp;gt;1.0.0-SNAPSHOT&amp;lt;/version&amp;gt;
  &amp;lt;packaging&amp;gt;jar&amp;lt;/packaging&amp;gt;
  &amp;lt;properties&amp;gt;
    &amp;lt;project.build.sourceEncoding&amp;gt;UTF-8&amp;lt;/project.build.sourceEncoding&amp;gt;
    &amp;lt;project.reporting.outputEncoding&amp;gt;UTF-8&amp;lt;/project.reporting.outputEncoding&amp;gt;
  &amp;lt;/properties&amp;gt;
  &amp;lt;build&amp;gt;
    &amp;lt;plugins&amp;gt;
      &amp;lt;plugin&amp;gt;
        &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;maven-compiler-plugin&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;3.12.0&amp;lt;/version&amp;gt;
      &amp;lt;/plugin&amp;gt;
    &amp;lt;/plugins&amp;gt;
  &amp;lt;/build&amp;gt;
&amp;lt;/project&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Jeremy&lt;/p&gt;</comment>
                            <comment id="17798705" author="norrisjeremy" created="Tue, 19 Dec 2023 18:53:16 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://github.com/norrisjeremy/MCOMPILER-567&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/norrisjeremy/MCOMPILER-567&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17798706" author="norrisjeremy" created="Tue, 19 Dec 2023 18:54:05 +0000"  >&lt;p&gt;FYI, it doesn&apos;t fail every time I execute `mvn clean verify`: it is intermittent, sometimes it fails and sometimes it succeeds.&lt;/p&gt;</comment>
                            <comment id="17798708" author="norrisjeremy" created="Tue, 19 Dec 2023 19:02:27 +0000"  >&lt;p&gt;When it fails to compile, the following is reported, so I suspect some sort of issue with incremental compilation support?&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] --- compiler:3.12.0:testCompile (default-testCompile) @ bar ---
[INFO] Recompiling the module because of changed dependency.
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  0.502 s
[INFO] Finished at: 2023-12-19T13:00:20-06:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.12.0:testCompile (default-testCompile) on project bar: Fatal error compiling: basedir .../MCOMPILER-567/target/generated-test-sources/test-annotations does not exist -&amp;gt; [Help 1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17798710" author="edeandrea" created="Tue, 19 Dec 2023 19:10:39 +0000"  >&lt;p&gt;I also have a use case with a reproducer which can reproduce this. My project is a pure Kotlin project (no Java code in it). I have it in a pull request which failed to build.&lt;/p&gt;

&lt;p&gt;You can check out &lt;a href=&quot;https://github.com/quarkusio/quarkus-super-heroes/pull/504.&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/quarkusio/quarkus-super-heroes/pull/504&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;cd&lt;/tt&gt; into the &lt;tt&gt;grpc-locations&lt;/tt&gt; subdirectory and run &lt;tt&gt;./mvnw clean package -DskipTests&lt;/tt&gt; and you will see the error&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.12.0:testCompile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-testCompile) on project grpc-locations: Fatal error compiling: basedir /Users/edeandre/workspaces/quarkus/quarkus-&lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;-heroes-main/grpc-locations/target/generated-test-sources/test-annotations does not exist -&amp;gt; [Help 1] &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You can also see it in the GitHub action CI log: &lt;a href=&quot;https://github.com/quarkusio/quarkus-super-heroes/actions/runs/7266484498/job/19798319849?pr=504#step:4:693&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/quarkusio/quarkus-super-heroes/actions/runs/7266484498/job/19798319849?pr=504#step:4:693&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17798718" author="jorsol" created="Tue, 19 Dec 2023 19:31:14 +0000"  >&lt;p&gt;Awesome &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=norrisjeremy&quot; class=&quot;user-hover&quot; rel=&quot;norrisjeremy&quot;&gt;norrisjeremy&lt;/a&gt; that&apos;s what I was looking for, extremely simple to reproduce! +1&lt;/p&gt;

&lt;p&gt;Adding ITs to the PR.&lt;/p&gt;</comment>
                            <comment id="17798724" author="githubbot" created="Tue, 19 Dec 2023 19:54:13 +0000"  >&lt;p&gt;jorsol commented on PR #218:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/218#issuecomment-1863388857&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/218#issuecomment-1863388857&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   @slawekjaranowski this is ready for review, hoping for a hotfix release soon, thanks!&lt;/p&gt;

</comment>
                            <comment id="17798737" author="slawekjaranowski" created="Tue, 19 Dec 2023 20:53:35 +0000"  >&lt;p&gt;Another proposition to fix this issue &lt;a href=&quot;https://github.com/codehaus-plexus/plexus-compiler/pull/338&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/codehaus-plexus/plexus-compiler/pull/338&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We can return empty list for not existing location.&lt;/p&gt;</comment>
                            <comment id="17798741" author="githubbot" created="Tue, 19 Dec 2023 20:55:13 +0000"  >&lt;p&gt;slawekjaranowski commented on code in PR #218:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/218#discussion_r1431929731&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/218#discussion_r1431929731&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
src/it/&lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-567&quot; title=&quot;Fail to compile if the &amp;quot;generated-sources/annotations&amp;quot; does not exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-567&quot;&gt;&lt;del&gt;MCOMPILER-567&lt;/del&gt;&lt;/a&gt;/pom.xml:&lt;br/&gt;
##########&lt;br/&gt;
@@ -0,0 +1,39 @@&lt;br/&gt;
+&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
+&amp;lt;!--&lt;br/&gt;
+  Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+  or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+  distributed with this work for additional information&lt;br/&gt;
+  regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+  to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+  &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+  with the License.  You may obtain a copy of the License at&lt;br/&gt;
+&lt;br/&gt;
+  &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+&lt;br/&gt;
+  Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+  software distributed under the License is distributed on an&lt;br/&gt;
+  &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+  KIND, either express or implied.  See the License for the&lt;br/&gt;
+  specific language governing permissions and limitations&lt;br/&gt;
+  under the License.&lt;br/&gt;
+--&amp;gt;&lt;br/&gt;
+&amp;lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;&lt;br/&gt;
+  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;br/&gt;
+  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 &lt;a href=&quot;http://maven.apache.org/maven-v4_0_0.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org/maven-v4_0_0.xsd&lt;/a&gt;&quot;&amp;gt;&lt;br/&gt;
+  &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;&lt;br/&gt;
+  &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+  &amp;lt;artifactId&amp;gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-567&quot; title=&quot;Fail to compile if the &amp;quot;generated-sources/annotations&amp;quot; does not exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-567&quot;&gt;&lt;del&gt;MCOMPILER-567&lt;/del&gt;&lt;/a&gt;&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+  &amp;lt;name&amp;gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-567&quot; title=&quot;Fail to compile if the &amp;quot;generated-sources/annotations&amp;quot; does not exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-567&quot;&gt;&lt;del&gt;MCOMPILER-567&lt;/del&gt;&lt;/a&gt;&amp;lt;/name&amp;gt;&lt;br/&gt;
+  &amp;lt;packaging&amp;gt;jar&amp;lt;/packaging&amp;gt;&lt;br/&gt;
+  &amp;lt;version&amp;gt;1.0-SNAPSHOT&amp;lt;/version&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+  &amp;lt;build&amp;gt;&lt;br/&gt;
+    &amp;lt;plugins&amp;gt;&lt;br/&gt;
+      &amp;lt;plugin&amp;gt;&lt;br/&gt;
+        &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+        &amp;lt;artifactId&amp;gt;maven-compiler-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+        &amp;lt;version&amp;gt;@project.version@&amp;lt;/version&amp;gt;&lt;br/&gt;
+      &amp;lt;/plugin&amp;gt;&lt;br/&gt;
+    &amp;lt;/plugins&amp;gt;&lt;br/&gt;
+  &amp;lt;/build&amp;gt;&lt;br/&gt;
+&amp;lt;/project&amp;gt;&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   missing empty line at the end &#128516; &lt;/p&gt;


</comment>
                            <comment id="17798745" author="githubbot" created="Tue, 19 Dec 2023 20:57:14 +0000"  >&lt;p&gt;slawekjaranowski commented on code in PR #218:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/218#discussion_r1431931312&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/218#discussion_r1431931312&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
src/main/java/org/apache/maven/plugin/compiler/AbstractCompilerMojo.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -1172,6 +1172,8 @@ public void execute() throws MojoExecutionException, CompilationFailureException&lt;br/&gt;
                 try (Stream&amp;lt;Path&amp;gt; walk =&lt;br/&gt;
                         Files.walk(getGeneratedSourcesDirectory().toPath())) {&lt;br/&gt;
                     walk.sorted(Comparator.reverseOrder()).map(Path::toFile).forEach(File::delete);&lt;br/&gt;
+                    // &lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-567&quot; title=&quot;Fail to compile if the &amp;quot;generated-sources/annotations&amp;quot; does not exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-567&quot;&gt;&lt;del&gt;MCOMPILER-567&lt;/del&gt;&lt;/a&gt;: recreate directory&lt;br/&gt;
+                    Files.createDirectories(getGeneratedSourcesDirectory().toPath());&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   Instead of creating directory we can detect not existing in plexus-compiler - what do you think&lt;/p&gt;


</comment>
                            <comment id="17798750" author="githubbot" created="Tue, 19 Dec 2023 21:35:29 +0000"  >&lt;p&gt;jorsol commented on code in PR #218:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/218#discussion_r1431960191&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/218#discussion_r1431960191&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
src/main/java/org/apache/maven/plugin/compiler/AbstractCompilerMojo.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -1172,6 +1172,8 @@ public void execute() throws MojoExecutionException, CompilationFailureException&lt;br/&gt;
                 try (Stream&amp;lt;Path&amp;gt; walk =&lt;br/&gt;
                         Files.walk(getGeneratedSourcesDirectory().toPath())) {&lt;br/&gt;
                     walk.sorted(Comparator.reverseOrder()).map(Path::toFile).forEach(File::delete);&lt;br/&gt;
+                    // &lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-567&quot; title=&quot;Fail to compile if the &amp;quot;generated-sources/annotations&amp;quot; does not exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-567&quot;&gt;&lt;del&gt;MCOMPILER-567&lt;/del&gt;&lt;/a&gt;: recreate directory&lt;br/&gt;
+                    Files.createDirectories(getGeneratedSourcesDirectory().toPath());&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   Sure, that should work too.&lt;/p&gt;


</comment>
                            <comment id="17798753" author="githubbot" created="Tue, 19 Dec 2023 21:37:34 +0000"  >&lt;p&gt;jorsol commented on code in PR #218:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/218#discussion_r1431961614&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/218#discussion_r1431961614&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
src/main/java/org/apache/maven/plugin/compiler/AbstractCompilerMojo.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -1172,6 +1172,8 @@ public void execute() throws MojoExecutionException, CompilationFailureException&lt;br/&gt;
                 try (Stream&amp;lt;Path&amp;gt; walk =&lt;br/&gt;
                         Files.walk(getGeneratedSourcesDirectory().toPath())) {&lt;br/&gt;
                     walk.sorted(Comparator.reverseOrder()).map(Path::toFile).forEach(File::delete);&lt;br/&gt;
+                    // &lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-567&quot; title=&quot;Fail to compile if the &amp;quot;generated-sources/annotations&amp;quot; does not exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-567&quot;&gt;&lt;del&gt;MCOMPILER-567&lt;/del&gt;&lt;/a&gt;: recreate directory&lt;br/&gt;
+                    Files.createDirectories(getGeneratedSourcesDirectory().toPath());&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   In any case, it does not harm to create the directory too.&lt;/p&gt;


</comment>
                            <comment id="17798759" author="githubbot" created="Tue, 19 Dec 2023 22:13:51 +0000"  >&lt;p&gt;jorsol commented on code in PR #218:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/218#discussion_r1431961614&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/218#discussion_r1431961614&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
src/main/java/org/apache/maven/plugin/compiler/AbstractCompilerMojo.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -1172,6 +1172,8 @@ public void execute() throws MojoExecutionException, CompilationFailureException&lt;br/&gt;
                 try (Stream&amp;lt;Path&amp;gt; walk =&lt;br/&gt;
                         Files.walk(getGeneratedSourcesDirectory().toPath())) {&lt;br/&gt;
                     walk.sorted(Comparator.reverseOrder()).map(Path::toFile).forEach(File::delete);&lt;br/&gt;
+                    // &lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-567&quot; title=&quot;Fail to compile if the &amp;quot;generated-sources/annotations&amp;quot; does not exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-567&quot;&gt;&lt;del&gt;MCOMPILER-567&lt;/del&gt;&lt;/a&gt;: recreate directory&lt;br/&gt;
+                    Files.createDirectories(getGeneratedSourcesDirectory().toPath());&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   We might need to create the directory too... reading the javac documentation for Java 8, it seems that the directory must exists as it not created.&lt;/p&gt;


</comment>
                            <comment id="17798879" author="githubbot" created="Wed, 20 Dec 2023 09:14:20 +0000"  >&lt;p&gt;slawekjaranowski commented on code in PR #218:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/218#discussion_r1432450761&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/218#discussion_r1432450761&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
src/main/java/org/apache/maven/plugin/compiler/AbstractCompilerMojo.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -1172,6 +1172,8 @@ public void execute() throws MojoExecutionException, CompilationFailureException&lt;br/&gt;
                 try (Stream&amp;lt;Path&amp;gt; walk =&lt;br/&gt;
                         Files.walk(getGeneratedSourcesDirectory().toPath())) {&lt;br/&gt;
                     walk.sorted(Comparator.reverseOrder()).map(Path::toFile).forEach(File::delete);&lt;br/&gt;
+                    // &lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-567&quot; title=&quot;Fail to compile if the &amp;quot;generated-sources/annotations&amp;quot; does not exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-567&quot;&gt;&lt;del&gt;MCOMPILER-567&lt;/del&gt;&lt;/a&gt;: recreate directory&lt;br/&gt;
+                    Files.createDirectories(getGeneratedSourcesDirectory().toPath());&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   please fix comments in line 1170&lt;/p&gt;


</comment>
                            <comment id="17798896" author="JIRAUSER303578" created="Wed, 20 Dec 2023 10:01:24 +0000"  >&lt;p&gt;I faced the similar error&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.12.0:testCompile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-testCompile) .... 
Fatal error compiling: basedir ...\target\generated-test-sources\test-annotations does not exist -&amp;gt; [Help 1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;and investigating I see it is not on all projects but only on these where the message&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] --- maven-compiler-plugin:3.12.0:testCompile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-testCompile) @ ... ---
[INFO] Recompiling the module because of changed dependency.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;above is printed.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Workaround&lt;/b&gt; for me was to add&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;useIncrementalCompilation&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;lt;/useIncrementalCompilation&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;to the maven-compiler-plugin-configuration. (even it is not recommended, but we are running mvn &lt;ins&gt;clean&lt;/ins&gt; deploy on our build anyway ).&lt;/p&gt;

&lt;p&gt;Now same build prints&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;[INFO] --- maven-compiler-plugin:3.12.0:testCompile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-testCompile) @ ... --&#160; 
[INFO] Nothing to compile - all classes are up to date.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;and no error comes up.&lt;/p&gt;</comment>
                            <comment id="17798914" author="norrisjeremy" created="Wed, 20 Dec 2023 10:59:32 +0000"  >&lt;p&gt;Could this issue be related to the changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-381&quot; title=&quot;Refactoring needed for isDependencyChanged / Using fileExtensions (AbstractCompilerMojo)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-381&quot;&gt;&lt;del&gt;MCOMPILER-381&lt;/del&gt;&lt;/a&gt;?&lt;br/&gt;
I mentioned earlier that for the simplified reproduction I came up with (&lt;a href=&quot;https://github.com/norrisjeremy/MCOMPILER-567&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/norrisjeremy/MCOMPILER-567&lt;/a&gt;), that it was inconsistent: sometimes it would fail to build, but other times it did not fail and the build succeeded.&lt;br/&gt;
And when it does fail, it always notes &quot;Recompiling the module because of changed dependency&quot;.&lt;/p&gt;

&lt;p&gt;If I run with &quot;-Dmaven.compiler.showCompilationChanges=true&quot;, then when it does fail to build, I see the following:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] --- compiler:3.12.0:testCompile (default-testCompile) @ bar ---
[INFO] 	New dependency detected: .../MCOMPILER-567/target/classes/foo/Bar.class
[INFO] Recompiling the module because of changed dependency.
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  0.453 s
[INFO] Finished at: 2023-12-20T04:52:08-06:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.12.0:testCompile (default-testCompile) on project bar: Fatal error compiling: basedir .../MCOMPILER-567/target/generated-test-sources/test-annotations does not exist -&amp;gt; [Help 1]
[ERROR] 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The times in which the build succeeds:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] --- compiler:3.12.0:testCompile (default-testCompile) @ bar ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17799093" author="githubbot" created="Wed, 20 Dec 2023 16:33:23 +0000"  >&lt;p&gt;jorsol commented on code in PR #218:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/218#discussion_r1432938500&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/218#discussion_r1432938500&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
src/main/java/org/apache/maven/plugin/compiler/AbstractCompilerMojo.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -1172,6 +1172,8 @@ public void execute() throws MojoExecutionException, CompilationFailureException&lt;br/&gt;
                 try (Stream&amp;lt;Path&amp;gt; walk =&lt;br/&gt;
                         Files.walk(getGeneratedSourcesDirectory().toPath())) {&lt;br/&gt;
                     walk.sorted(Comparator.reverseOrder()).map(Path::toFile).forEach(File::delete);&lt;br/&gt;
+                    // &lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-567&quot; title=&quot;Fail to compile if the &amp;quot;generated-sources/annotations&amp;quot; does not exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-567&quot;&gt;&lt;del&gt;MCOMPILER-567&lt;/del&gt;&lt;/a&gt;: recreate directory&lt;br/&gt;
+                    Files.createDirectories(getGeneratedSourcesDirectory().toPath());&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   Done! it should be clear now.&lt;/p&gt;


</comment>
                            <comment id="17799192" author="githubbot" created="Wed, 20 Dec 2023 22:11:13 +0000"  >&lt;p&gt;slawekjaranowski merged PR #218:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/218&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17799426" author="tilman" created="Thu, 21 Dec 2023 13:36:30 +0000"  >&lt;p&gt;Works with 3.12.1-SNAPSHOT (Apache PDFBox project build on Windows 10)&lt;/p&gt;</comment>
                            <comment id="17799685" author="githubbot" created="Fri, 22 Dec 2023 07:06:00 +0000"  >&lt;p&gt;beiertu-mms commented on PR #218:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/218#issuecomment-1867318730&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/218#issuecomment-1867318730&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   hi @slawekjaranowski, will there be a patch release created for this fix or will it be in the next minor release? &lt;/p&gt;

</comment>
                            <comment id="17799690" author="githubbot" created="Fri, 22 Dec 2023 07:27:51 +0000"  >&lt;p&gt;slawekjaranowski commented on PR #218:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/pull/218#issuecomment-1867335137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-compiler-plugin/pull/218#issuecomment-1867335137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Hi @beiertu-mms &lt;/p&gt;

&lt;p&gt;   Patch version is under voting&lt;br/&gt;
   &lt;a href=&quot;https://lists.apache.org/thread/scb8qw1or396l4hqgf5h78z5h0km60z4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread/scb8qw1or396l4hqgf5h78z5h0km60z4&lt;/a&gt;&lt;/p&gt;


</comment>
                            <comment id="17799698" author="jherkel" created="Fri, 22 Dec 2023 07:57:23 +0000"  >&lt;p&gt;I checked 3.12.1 (voting candidate) and I was able to compile all my projects.&lt;/p&gt;</comment>
                            <comment id="17799864" author="scordio" created="Fri, 22 Dec 2023 15:47:40 +0000"  >&lt;p&gt;AssertJ uses Kotlin for &lt;a href=&quot;https://github.com/assertj/assertj/tree/main/assertj-tests/assertj-integration-tests/assertj-core-kotlin&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;integration tests&lt;/a&gt; and we experienced something similar but for test-annotations in &lt;a href=&quot;https://github.com/assertj/assertj/pull/3302&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/assertj/assertj/pull/3302&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.12.0:testCompile (default-testCompile) on project assertj-core-kotlin: Fatal error compiling: basedir /home/runner/work/assertj/assertj/assertj-tests/assertj-integration-tests/assertj-core-kotlin/target/generated-test-sources/test-annotations does not exist -&amp;gt; [Help 1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I tried 3.12.1 locally and &lt;tt&gt;assertj-core-kotlin&lt;/tt&gt; is now test-compiled correctly.&lt;/p&gt;</comment>
                            <comment id="17979182" author="olamy" created="Mon, 16 Jun 2025 11:25:15 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/issues/783&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-compiler-plugin#783&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1mc28:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>