<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:21:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MCOMPILER-21] compiler smarts</title>
                <link>https://issues.apache.org/jira/browse/MCOMPILER-21</link>
                <project id="12317225" key="MCOMPILER">Maven Compiler Plugin (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;there are probably other ways we can make the compiler stale check smarter. List them out here if you think of them.&lt;/p&gt;

&lt;p&gt;1) if a snapshot was resolved to a newer version, rebuild everything.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12800337">MCOMPILER-21</key>
            <summary>compiler smarts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="struberg">Mark Struberg</assignee>
                                    <reporter username="brett">Brett Porter</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Mar 2005 07:18:13 +0000</created>
                <updated>Mon, 16 Jun 2025 11:10:10 +0000</updated>
                            <resolved>Tue, 25 Nov 2014 14:40:09 +0000</resolved>
                                                                        <due></due>
                            <votes>8</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14429117" author="brianf@infinity.nu" created="Mon, 9 Jan 2006 18:17:28 +0000"  >&lt;p&gt;2) if a parent version changes, rebuild everything&lt;/p&gt;</comment>
                            <comment id="14428459" author="cg" created="Tue, 9 Jan 2007 21:36:32 +0000"  >&lt;p&gt;3) Track inventory. If files are removed, remove associated class files and force jar repacking/&lt;/p&gt;

&lt;p&gt;4) Track timestamps. If file timestamp changes (e.g. to an &lt;del&gt;older&lt;/del&gt; version), rebuild.&lt;/p&gt;

&lt;p&gt;5) Track hash signatures for source files. Recompute signature if file timestamp changes, rebuild only if signature changes.&lt;/p&gt;

&lt;p&gt;6) Track hash signatures for class files. Repack jars only if hash signatures change.&lt;/p&gt;</comment>
                            <comment id="14428389" author="michael.tamm" created="Thu, 29 Mar 2007 11:04:52 +0000"  >&lt;p&gt;(Re-)Use the depend task from Ant&lt;/p&gt;</comment>
                            <comment id="14428701" author="andreasch" created="Sat, 6 Feb 2010 00:49:16 +0000"  >&lt;p&gt;I think the priority of this issue should be higher. &lt;/p&gt;

&lt;p&gt;In the case of a file deletion the file is not removed and still packaged. In the case of a rename, both file versions are packaged. In my experience when developers see these problems they start doing clean builds every time making the build time several times slower. Imagine making a single file change and rebuilding everything from scratch. It is issues like this that makes users get the perception that Maven is slow.&lt;/p&gt;

&lt;p&gt;These is not a problem only with the Maven compiler plugin because I believe it also happens with the resources plugin.&lt;/p&gt;</comment>
                            <comment id="14428728" author="gupta_naren" created="Fri, 23 Sep 2011 12:52:10 +0000"  >&lt;p&gt;I have following directory for java source code &lt;br/&gt;
--lion&lt;br/&gt;
     --com&lt;br/&gt;
          test1 --&amp;gt; contains pom.xml and java source code with package com.test1&lt;br/&gt;
          test2 -&amp;gt; contains pom.cml and java source code with pakage com.test2&lt;br/&gt;
when compiler plugin compiles it does directory scanning and compiles only java code that are modified from previous build. But In above directory structure case it recompiles the all source code in subsequent builds. How to overcome this ? I found that it is because of basedirectory do not follow maven standard direcotry layout. Please advise.&lt;/p&gt;</comment>
                            <comment id="14428835" author="mjlachman" created="Wed, 20 Jun 2012 11:57:12 +0000"  >&lt;p&gt;7) Based on the following snippet from &lt;a href=&quot;http://svn.apache.org/viewvc/maven/plugins/tags/maven-compiler-plugin-2.5.1/src/main/java/org/apache/maven/plugin/AbstractCompilerMojo.java?revision=1344618&amp;amp;view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;AbstractCompilerMojo.java&lt;/a&gt;...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-comment&quot;&gt;// TODO: have an option to always compile (without need to clean)
&lt;/span&gt;        Set&amp;lt;File&amp;gt; staleSources;

        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; canUpdateTarget;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...implement the TODO.&lt;/p&gt;</comment>
                            <comment id="14428904" author="struberg" created="Sun, 26 Aug 2012 17:55:31 +0000"  >&lt;p&gt;started with some ugly hacks for now. &lt;/p&gt;

&lt;p&gt;Doing proper incremental build support actually contains of 2 steps.&lt;/p&gt;

&lt;p&gt;The first one mainly kicks in if someone invokes a phase &amp;lt; package. In this case the Artifact of the other module is a directory. In this case we check whether the depending module is a path and if so, we check whether it contains newer files. -&amp;gt; recompile all.&lt;/p&gt;

&lt;p&gt;The second trick will be on the reactor level. We might check the md5 of the dependencies and compare them with the md5 previously used. -&amp;gt; invoke clean if something changed.&lt;/p&gt;</comment>
                            <comment id="14428890" author="struberg" created="Sun, 26 Aug 2012 17:56:27 +0000"  >&lt;p&gt;PS: the code above currently only builds with skipping the tests. I&apos;ll need to move all the tests to the invoker-plugin first. The old plugin-test-harness doesn&apos;t work with sisu...&lt;/p&gt;</comment>
                            <comment id="14428816" author="struberg" created="Mon, 27 Aug 2012 01:52:58 +0000"  >&lt;p&gt;gosh, it&apos;s even more broken. We also have problems detecting compile dependencies inside the same module!&lt;/p&gt;

&lt;p&gt;Compile a project with 2 classes:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BeanA { 
  getI() {&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 42;}
}

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BeanA2 {
  getI() { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BeanA().getI(); }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now go on and change BeanA#getI() to BeanA#getI_broken(). Since BeanA2 still uses the now non-existing getI() we should get a compile error. But &apos;mvn compile&apos; only detects that BeanA needs a compile and doesn&apos;t recompile BeanB.&lt;/p&gt;

&lt;p&gt;The whole plexus StaleSourceScanner doesn&apos;t work as expected and should get dropped imo. Detecting cross dependencies would only be possible by a full code analysis and could require multi-pass scans. It&apos;s much more simple to just recompile the whole plugin in that case once we detect a &apos;newer&apos; file.&lt;/p&gt;

&lt;p&gt;Once we hit a java file which is newer than it&apos; corresponding class file then we need to recompile all classes.&lt;/p&gt;</comment>
                            <comment id="14428850" author="struberg" created="Mon, 27 Aug 2012 02:45:29 +0000"  >&lt;p&gt;first version of an ugly hack to also get class inter-dependencies properly recompiled&lt;/p&gt;</comment>
                            <comment id="14428767" author="jglick" created="Tue, 4 Sep 2012 11:55:36 +0000"  >&lt;p&gt;Note that Ant&apos;s &lt;tt&gt;&amp;lt;depend&amp;gt;&lt;/tt&gt; does a reasonably good job of figuring out which dependent classes need to be recompiled. Can still be fooled by compile-time constants (at least until JDK 8 javac which addresses this), and things get more complicated when JSR 269 is used to generate classes and/or resources.&lt;/p&gt;</comment>
                            <comment id="14428821" author="panchmp" created="Tue, 9 Oct 2012 16:22:56 +0000"  >&lt;p&gt;Why you can&apos;t use&lt;br/&gt;
  &lt;a href=&quot;http://maven.apache.org/ref/2.2.1/maven-core/apidocs/org/apache/maven/execution/MavenSession.html#getStartTime(&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org/ref/2.2.1/maven-core/apidocs/org/apache/maven/execution/MavenSession.html#getStartTime(&lt;/a&gt;)&lt;br/&gt;
  &lt;a href=&quot;http://maven.apache.org/ref/3.0.4/maven-core/apidocs/org/apache/maven/execution/MavenSession.html#getStartTime(&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org/ref/3.0.4/maven-core/apidocs/org/apache/maven/execution/MavenSession.html#getStartTime(&lt;/a&gt;)&lt;br/&gt;
to get build start time?&lt;/p&gt;


&lt;p&gt;Instead of that you use&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; Date getBuildStartTime()
+    {
+        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;
+        {
+            Method getRequestMethod = session.getClass().getMethod( &lt;span class=&quot;code-quote&quot;&gt;&quot;getRequest&quot;&lt;/span&gt; );
+            &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; mavenExecutionRequest = getRequestMethod.invoke( session );
+            Method getStartTimeMethod = mavenExecutionRequest.getClass().getMethod( &lt;span class=&quot;code-quote&quot;&gt;&quot;getStartTime&quot;&lt;/span&gt; );
+            Date buildStartTime = (Date) getStartTimeMethod.invoke( mavenExecutionRequest );
+            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; buildStartTime;
+        }
+        &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; ( Exception e )
+        {
+            getLog().debug( &lt;span class=&quot;code-quote&quot;&gt;&quot;unable to get start time &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the current build: &quot;&lt;/span&gt; + e.getMessage() );
+        }
+
+        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Date();
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14429090" author="michael-o" created="Tue, 25 Nov 2014 14:40:09 +0000"  >&lt;p&gt;Please refer to &lt;a href=&quot;https://cwiki.apache.org/confluence/display/MAVEN/The+Great+JIRA+Cleanup+of+2014&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/MAVEN/The+Great+JIRA+Cleanup+of+2014&lt;/a&gt; if you&apos;re wondering why this issue was closed out.&lt;/p&gt;

&lt;p&gt;Assignee, if you think you can fix this bug anytime soon, please reopen and proceed appropriately.&lt;/p&gt;</comment>
                            <comment id="17978768" author="olamy" created="Mon, 16 Jun 2025 11:10:10 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-compiler-plugin/issues/358&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-compiler-plugin#358&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12714933" name="MCOMPILER-21-v2.patch" size="10698" author="struberg" created="Mon, 27 Aug 2012 02:45:29 +0000"/>
                            <attachment id="12714908" name="MCOMPILER-21.patch" size="9759" author="struberg" created="Sun, 26 Aug 2012 17:55:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i29tqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>