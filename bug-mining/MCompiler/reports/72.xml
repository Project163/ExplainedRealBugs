<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:21:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MCOMPILER-235] duplicate classes due to MCOMPILER-157 when compiler is called twice or more</title>
                <link>https://issues.apache.org/jira/browse/MCOMPILER-235</link>
                <project id="12317225" key="MCOMPILER">Maven Compiler Plugin (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;I tried to upgrade our projects to use the compiler 3.2 and instead of 3.1&lt;br/&gt;
Classical builds are ok but site builds are KO because for various reasons (reports) the lifecycle is forked and thus the compiler is called twice (or more) and fails because it finds duplicated classes&lt;br/&gt;
Example :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[INFO] ------------------------------------------------------------------------
[INFO] Building eXo Commons - Common Services 4.1.x-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.3.1:enforce (enforce-java-version) @ commons-component-common ---
[INFO] 
[INFO] --- maven-enforcer-plugin:1.3.1:enforce (enforce-maven-version) @ commons-component-common ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;) @ commons-component-common ---
[INFO] 
[INFO] --- jacoco-maven-plugin:0.7.2.201409121644:prepare-agent (prepare-ut-agent) @ commons-component-common ---
[INFO] argLine set to -javaagent:/srv/ciagent/workspace/commons-master-site/.repository/org/jacoco/org.jacoco.agent/0.7.2.201409121644/org.jacoco.agent-0.7.2.201409121644-runtime.jar=destfile=/srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/jacoco.exec,append=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
[INFO] 
[INFO] --- maven-resources-plugin:2.7:resources (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-resources) @ commons-component-common ---
[INFO] Using &lt;span class=&quot;code-quote&quot;&gt;&apos;UTF-8&apos;&lt;/span&gt; encoding to copy filtered resources.
[INFO] Copying 0 resource
[INFO] Copying 5 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.2:compile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-compile) @ commons-component-common ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 97 source files to /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/classes
[WARNING] Supported source version &lt;span class=&quot;code-quote&quot;&gt;&apos;RELEASE_5&apos;&lt;/span&gt; from annotation processor &lt;span class=&quot;code-quote&quot;&gt;&apos;org.chromattic.apt.ChromatticProcessor&apos;&lt;/span&gt; less than -source &lt;span class=&quot;code-quote&quot;&gt;&apos;1.7&apos;&lt;/span&gt;
[INFO] About to process the type org.exoplatform.settings.chromattic.SettingsRoot
[INFO] About to process the type org.exoplatform.settings.chromattic.SubContextEntity
[INFO] About to process the type org.exoplatform.settings.chromattic.SimpleContextEntity
[INFO] About to process the type org.exoplatform.settings.chromattic.ScopeEntity
[INFO] About to process the type org.exoplatform.settings.chromattic.ContextEntity
[INFO] Processing node type &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.exoplatform.settings.chromattic
[INFO] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/src/main/java/org/exoplatform/services/user/UserStateService.java: Some input files use unchecked or unsafe operations.
[INFO] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/src/main/java/org/exoplatform/services/user/UserStateService.java: Recompile with -Xlint:unchecked &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.
[INFO] 
[INFO] --- maven-resources-plugin:2.7:testResources (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-testResources) @ commons-component-common ---
[INFO] Using &lt;span class=&quot;code-quote&quot;&gt;&apos;UTF-8&apos;&lt;/span&gt; encoding to copy filtered resources.
[INFO] Copying 19 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.2:testCompile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-testCompile) @ commons-component-common ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 32 source files to /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/test-classes
[WARNING] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/src/test/java/org/exoplatform/commons/event/TestEventManager.java:[29,23] junit.framework.Assert in junit.framework has been deprecated
[WARNING] Supported source version &lt;span class=&quot;code-quote&quot;&gt;&apos;RELEASE_5&apos;&lt;/span&gt; from annotation processor &lt;span class=&quot;code-quote&quot;&gt;&apos;org.chromattic.apt.ChromatticProcessor&apos;&lt;/span&gt; less than -source &lt;span class=&quot;code-quote&quot;&gt;&apos;1.7&apos;&lt;/span&gt;
[WARNING] Supported source version &lt;span class=&quot;code-quote&quot;&gt;&apos;RELEASE_5&apos;&lt;/span&gt; from annotation processor &lt;span class=&quot;code-quote&quot;&gt;&apos;org.chromattic.testgenerator.CheckTestProcessor&apos;&lt;/span&gt; less than -source &lt;span class=&quot;code-quote&quot;&gt;&apos;1.7&apos;&lt;/span&gt;
[WARNING] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/src/test/java/org/exoplatform/commons/event/TestEventManager.java:[29,23] junit.framework.Assert in junit.framework has been deprecated
[WARNING] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/src/test/java/org/exoplatform/commons/event/TestEventManager.java:[29,23] junit.framework.Assert in junit.framework has been deprecated
[WARNING] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/src/test/java/org/exoplatform/commons/event/TestEventManager.java:[88,9] junit.framework.Assert in junit.framework has been deprecated
[WARNING] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/src/test/java/org/exoplatform/commons/event/TestEventManager.java:[95,9] junit.framework.Assert in junit.framework has been deprecated
[WARNING] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/src/test/java/org/exoplatform/commons/event/TestEventManager.java:[123,9] junit.framework.Assert in junit.framework has been deprecated
[WARNING] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/src/test/java/org/exoplatform/commons/event/TestEventManager.java:[130,9] junit.framework.Assert in junit.framework has been deprecated
[WARNING] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/src/test/java/org/exoplatform/commons/event/TestEventManager.java:[135,9] junit.framework.Assert in junit.framework has been deprecated
[WARNING] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/src/test/java/org/exoplatform/settings/impl/UserSettingServiceTest.java:[136,17] setCreatedDate(java.util.Date) in org.exoplatform.services.organization.User has been deprecated
[INFO] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/src/test/java/org/exoplatform/settings/impl/SettingServiceEventTest.java: /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/src/test/java/org/exoplatform/settings/impl/SettingServiceEventTest.java uses unchecked or unsafe operations.
[INFO] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/src/test/java/org/exoplatform/settings/impl/SettingServiceEventTest.java: Recompile with -Xlint:unchecked &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.
[INFO] 
[INFO] --- maven-surefire-plugin:2.17:test (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-test) @ commons-component-common ---
[INFO] Surefire report directory: /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.exoplatform.services.user.RESTUserServiceTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.112 sec - in org.exoplatform.services.user.RESTUserServiceTest
Running org.exoplatform.services.user.UserStateServiceTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 14.127 sec - in org.exoplatform.services.user.UserStateServiceTest
Running org.exoplatform.services.bench.TestDataInjector
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.653 sec - in org.exoplatform.services.bench.TestDataInjector
Running org.exoplatform.services.bench.TestDataInjectorService
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.327 sec - in org.exoplatform.services.bench.TestDataInjectorService
Running org.exoplatform.services.deployment.TestContentInitializerService
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec - in org.exoplatform.services.deployment.TestContentInitializerService
Running org.exoplatform.services.deployment.ContentInitializerServiceTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.151 sec - in org.exoplatform.services.deployment.ContentInitializerServiceTest
Running org.exoplatform.services.deployment.plugins.XMLDeploymentPluginTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.718 sec - in org.exoplatform.services.deployment.plugins.XMLDeploymentPluginTest
Running org.exoplatform.services.deployment.UtilsTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.45 sec - in org.exoplatform.services.deployment.UtilsTest
Running org.exoplatform.commons.utils.CommonsUtilsTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.331 sec - in org.exoplatform.commons.utils.CommonsUtilsTest
Running org.exoplatform.commons.utils.TestActivityTypeUtils
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.412 sec - in org.exoplatform.commons.utils.TestActivityTypeUtils
Running org.exoplatform.commons.utils.XPathUtilsTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.4 sec - in org.exoplatform.commons.utils.XPathUtilsTest
Running org.exoplatform.commons.embedder.EmbedderTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.205 sec - in org.exoplatform.commons.embedder.EmbedderTest
Running org.exoplatform.commons.notification.template.TemplateUtilsTestCase
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.266 sec - in org.exoplatform.commons.notification.template.TemplateUtilsTestCase
Running org.exoplatform.commons.notification.NotificationContextImplTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.266 sec - in org.exoplatform.commons.notification.NotificationContextImplTest
Running org.exoplatform.commons.notification.NotificationServiceTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.249 sec - in org.exoplatform.commons.notification.NotificationServiceTest
Running org.exoplatform.commons.notification.TemplateTestCase
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.605 sec - in org.exoplatform.commons.notification.TemplateTestCase
Running org.exoplatform.commons.notification.TestNotificationUtils
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.315 sec - in org.exoplatform.commons.notification.TestNotificationUtils
Running org.exoplatform.commons.notification.PluginContainerTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.356 sec - in org.exoplatform.commons.notification.PluginContainerTest
Running org.exoplatform.commons.event.TestEventManager
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.507 sec - in org.exoplatform.commons.event.TestEventManager
Running org.exoplatform.settings.impl.SettingServiceEventTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.605 sec - in org.exoplatform.settings.impl.SettingServiceEventTest
Running org.exoplatform.settings.impl.UserSettingServiceTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.861 sec - in org.exoplatform.settings.impl.UserSettingServiceTest
Running org.exoplatform.settings.impl.CacheSettingTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.58 sec - in org.exoplatform.settings.impl.CacheSettingTest
Running org.exoplatform.settings.impl.FeatureServiceTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.12 sec - in org.exoplatform.settings.impl.FeatureServiceTest
Running org.exoplatform.settings.impl.SettingServiceImplTest
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.995 sec - in org.exoplatform.settings.impl.SettingServiceImplTest
Running org.exoplatform.job.MultiTenancyTaskTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.148 sec - in org.exoplatform.job.MultiTenancyTaskTest
Running org.exoplatform.job.MultiTenancyJobTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.118 sec - in org.exoplatform.job.MultiTenancyJobTest

Results :

Tests run: 77, Failures: 0, Errors: 0, Skipped: 1

[JENKINS] Recording test results
[INFO] 
[INFO] --- build-helper-maven-plugin:1.9.1:parse-version (parse-version) @ commons-component-common ---
[INFO] 
[INFO] --- maven-jar-plugin:2.5:jar (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-jar) @ commons-component-common ---
[INFO] Building jar: /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/commons-component-common-4.1.x-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-source-plugin:2.4:jar-no-fork (attach-sources) @ commons-component-common ---
[INFO] Building jar: /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/commons-component-common-4.1.x-SNAPSHOT-sources.jar
[INFO] 
[INFO] --- jacoco-maven-plugin:0.7.2.201409121644:prepare-agent-integration (prepare-it-agent) @ commons-component-common ---
[INFO] argLine set to -javaagent:/srv/ciagent/workspace/commons-master-site/.repository/org/jacoco/org.jacoco.agent/0.7.2.201409121644/org.jacoco.agent-0.7.2.201409121644-runtime.jar=destfile=/srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/jacoco-it.exec,append=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
[INFO] 
[INFO] --- maven-failsafe-plugin:2.17:integration-test (integration-test) @ commons-component-common ---
[JENKINS] Recording test results
[INFO] 
[INFO] --- maven-failsafe-plugin:2.17:verify (verify) @ commons-component-common ---
[INFO] Failsafe report directory: /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/surefire-reports
[JENKINS] Recording test results
[INFO] 
[INFO] --- maven-site-plugin:3.4:site (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-site) @ commons-component-common ---
[INFO] configuring report plugin org.apache.maven.plugins:maven-project-info-reports-plugin:2.7
[INFO] configuring report plugin org.apache.maven.plugins:maven-dependency-plugin:2.9
[INFO] preparing &lt;span class=&quot;code-quote&quot;&gt;&apos;analyze-report&apos;&lt;/span&gt; report requires &lt;span class=&quot;code-quote&quot;&gt;&apos;test-compile&apos;&lt;/span&gt; forked phase execution
[INFO] 
[INFO] &amp;gt;&amp;gt;&amp;gt; maven-dependency-plugin:2.9:analyze-report @ commons-component-common &amp;gt;&amp;gt;&amp;gt;
[INFO] 
[INFO] --- maven-enforcer-plugin:1.3.1:enforce (enforce-java-version) @ commons-component-common ---
[INFO] 
[INFO] --- maven-enforcer-plugin:1.3.1:enforce (enforce-maven-version) @ commons-component-common ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;) @ commons-component-common ---
[INFO] 
[INFO] --- jacoco-maven-plugin:0.7.2.201409121644:prepare-agent (prepare-ut-agent) @ commons-component-common ---
[INFO] argLine set to -javaagent:/srv/ciagent/workspace/commons-master-site/.repository/org/jacoco/org.jacoco.agent/0.7.2.201409121644/org.jacoco.agent-0.7.2.201409121644-runtime.jar=destfile=/srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/jacoco.exec,append=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
[INFO] 
[INFO] --- maven-resources-plugin:2.7:resources (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-resources) @ commons-component-common ---
[INFO] Using &lt;span class=&quot;code-quote&quot;&gt;&apos;UTF-8&apos;&lt;/span&gt; encoding to copy filtered resources.
[INFO] Copying 0 resource
[INFO] Copying 5 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.2:compile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-compile) @ commons-component-common ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 107 source files to /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/classes
[INFO] About to process the type org.exoplatform.settings.chromattic.SimpleContextEntity
[INFO] About to process the type org.exoplatform.settings.chromattic.SettingsRoot
[INFO] About to process the type org.exoplatform.settings.chromattic.SubContextEntity
[INFO] About to process the type org.exoplatform.settings.chromattic.ScopeEntity
[INFO] About to process the type org.exoplatform.settings.chromattic.ContextEntity
[INFO] Processing node type &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.exoplatform.settings.chromattic
[INFO] -------------------------------------------------------------
[WARNING] COMPILATION WARNING : 
[INFO] -------------------------------------------------------------
[WARNING] Supported source version &lt;span class=&quot;code-quote&quot;&gt;&apos;RELEASE_5&apos;&lt;/span&gt; from annotation processor &lt;span class=&quot;code-quote&quot;&gt;&apos;org.chromattic.apt.ChromatticProcessor&apos;&lt;/span&gt; less than -source &lt;span class=&quot;code-quote&quot;&gt;&apos;1.7&apos;&lt;/span&gt;
[INFO] 1 warning
[INFO] -------------------------------------------------------------
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/generated-sources/annotations/org/exoplatform/settings/chromattic/SimpleContextEntity_Chromattic.java:[4,8] duplicate class: org.exoplatform.settings.chromattic.SimpleContextEntity_Chromattic
[ERROR] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/generated-sources/annotations/org/exoplatform/settings/chromattic/SettingsRoot_Chromattic.java:[4,8] duplicate class: org.exoplatform.settings.chromattic.SettingsRoot_Chromattic
[ERROR] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/generated-sources/annotations/org/exoplatform/settings/chromattic/SubContextEntity_Chromattic.java:[4,8] duplicate class: org.exoplatform.settings.chromattic.SubContextEntity_Chromattic
[ERROR] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/generated-sources/annotations/org/exoplatform/settings/chromattic/ScopeEntity_Chromattic.java:[4,8] duplicate class: org.exoplatform.settings.chromattic.ScopeEntity_Chromattic
[ERROR] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/generated-sources/annotations/org/exoplatform/settings/chromattic/ContextEntity_Chromattic.java:[4,8] duplicate class: org.exoplatform.settings.chromattic.ContextEntity_Chromattic
[ERROR] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/generated-sources/annotations/org/exoplatform/settings/chromattic/ScopeEntity_.java:[3,8] duplicate class: org.exoplatform.settings.chromattic.ScopeEntity_
[ERROR] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/generated-sources/annotations/org/exoplatform/settings/chromattic/SimpleContextEntity_.java:[3,8] duplicate class: org.exoplatform.settings.chromattic.SimpleContextEntity_
[ERROR] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/generated-sources/annotations/org/exoplatform/settings/chromattic/ContextEntity_.java:[3,8] duplicate class: org.exoplatform.settings.chromattic.ContextEntity_
[ERROR] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/generated-sources/annotations/org/exoplatform/settings/chromattic/SubContextEntity_.java:[3,8] duplicate class: org.exoplatform.settings.chromattic.SubContextEntity_
[ERROR] /srv/ciagent/workspace/commons-master-site/sources/commons-component-common/target/generated-sources/annotations/org/exoplatform/settings/chromattic/SettingsRoot_.java:[3,8] duplicate class: org.exoplatform.settings.chromattic.SettingsRoot_
[INFO] 10 errors 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Full logs : &lt;a href=&quot;https://ci.exoplatform.org/job/commons-master-site/26/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.exoplatform.org/job/commons-master-site/26/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It seems to be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-157&quot; title=&quot;Maven Compiler Plugin should add to compileSourceRoots for next plugins to consider as source directory for generated files &quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-157&quot;&gt;&lt;del&gt;MCOMPILER-157&lt;/del&gt;&lt;/a&gt; but I don&apos;t really know if it should be considered as a bug in the compiler plugin&lt;br/&gt;
You can reproduce it with (I hope)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;git clone https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/exoplatform/commons.git &amp;amp;&amp;amp; cd commons &amp;amp;&amp;amp; git checkout 4.1.0-RC1 &amp;amp;&amp;amp; mvn site -Dversion.compiler.plugin=3.2&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>Maven 3.2.3</environment>
        <key id="12800483">MCOMPILER-235</key>
            <summary>duplicate classes due to MCOMPILER-157 when compiler is called twice or more</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="agudian">Andreas Gudian</assignee>
                                    <reporter username="aheritier">Arnaud Heritier</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Oct 2014 04:34:13 +0000</created>
                <updated>Wed, 22 Nov 2017 01:05:18 +0000</updated>
                            <resolved>Wed, 27 Jan 2016 20:13:31 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>3.5.1</fixVersion>
                                        <due></due>
                            <votes>13</votes>
                                    <watches>17</watches>
                                                                                                                <comments>
                            <comment id="14429023" author="drekbour" created="Wed, 5 Nov 2014 07:53:57 +0000"  >&lt;p&gt;The problem is more fundamental than &lt;tt&gt;compile&lt;/tt&gt; running twice in the same build. If you take any code-generating APT plugin and simply run &lt;tt&gt;mvn compile&lt;/tt&gt; from the commandline it will fail second time around (i.e. you &lt;em&gt;must&lt;/em&gt; &lt;tt&gt;clean compile&lt;/tt&gt; to work around this)&lt;/p&gt;

&lt;p&gt;I checked this with two different APT plugins. Attached is a bare-bones project using &lt;a href=&quot;https://github.com/mkarneim/pojobuilder&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Pojobuilder&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ mvn clean compile
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building apt-test 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ apt-test ---
[INFO] Deleting C:\devsrc\external\apt-test\target
[INFO]
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ apt-test ---
[INFO] Using &apos;UTF-8&apos; encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\devsrc\external\apt-test\src\main\resources
[INFO]
[INFO] --- maven-compiler-plugin:3.2:compile (default-compile) @ apt-test ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 1 source file to C:\devsrc\external\apt-test\target\classes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.703 s
[INFO] Finished at: 2014-11-05T13:45:31+00:00
[INFO] Final Memory: 11M/246M
[INFO] ------------------------------------------------------------------------

$ mvn compile
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building apt-test 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ apt-test ---
[INFO] Using &apos;UTF-8&apos; encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\devsrc\external\apt-test\src\main\resources
[INFO]
[INFO] --- maven-compiler-plugin:3.2:compile (default-compile) @ apt-test ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 2 source files to C:\devsrc\external\apt-test\target\classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR :
[INFO] -------------------------------------------------------------
[ERROR] /C:/devsrc/external/apt-test/target/generated-sources/annotations/maven/apt/PersonBuilder.java:[6,8] duplicate class: maven.apt.PersonBuilder
[INFO] 1 error
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.468 s
[INFO] Finished at: 2014-11-05T13:45:42+00:00
[INFO] Final Memory: 10M/246M
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14428979" author="gsmet" created="Fri, 7 Nov 2014 02:14:19 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;We also had to go back to 3.1 because of issues with our annotation processors: we use Bindgen and, after the upgrade to 3.2, it started doing &lt;b&gt;very&lt;/b&gt; weird things (it mixes classes, put Runnable in place of *BindingPath and other weird behaviors).&lt;/p&gt;

&lt;p&gt;I also suspect &lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-157&quot; title=&quot;Maven Compiler Plugin should add to compileSourceRoots for next plugins to consider as source directory for generated files &quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-157&quot;&gt;&lt;del&gt;MCOMPILER-157&lt;/del&gt;&lt;/a&gt; to be the root cause of this and I think this change has a lot more consequences than initially suspected.&lt;/p&gt;</comment>
                            <comment id="14527440" author="gjoseph" created="Mon, 4 May 2015 22:11:49 +0000"  >&lt;p&gt;Using &lt;tt&gt;useIncrementalCompilation&lt;/tt&gt; set explicitly to false as noted in &lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-236&quot; title=&quot;Compilation error due to MCOMPILER-157 in deploy phase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-236&quot;&gt;&lt;del&gt;MCOMPILER-236&lt;/del&gt;&lt;/a&gt; seems to be a workaround for this also.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-157&quot; title=&quot;Maven Compiler Plugin should add to compileSourceRoots for next plugins to consider as source directory for generated files &quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-157&quot;&gt;&lt;del&gt;MCOMPILER-157&lt;/del&gt;&lt;/a&gt; makes a lot of sense, but causes headaches when used in a forked build, e.g with Clover. (and  &lt;tt&gt;useIncrementalCompilation&lt;/tt&gt;  does NOT help, there)&lt;/p&gt;</comment>
                            <comment id="14623963" author="jmhodges" created="Sun, 12 Jul 2015 19:27:51 +0000"  >&lt;p&gt;This is also happening for closure-templates because it uses autovalue. It&apos;s pretty frustrating.&lt;/p&gt;</comment>
                            <comment id="14623969" author="jmhodges" created="Sun, 12 Jul 2015 19:40:52 +0000"  >&lt;p&gt;I put this on &lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-236&quot; title=&quot;Compilation error due to MCOMPILER-157 in deploy phase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-236&quot;&gt;&lt;del&gt;MCOMPILER-236&lt;/del&gt;&lt;/a&gt;, but since it was mentioned here, I&apos;ll duplicate the response. &lt;/p&gt;

&lt;p&gt;Just to inform folks: setting useIncrementalCompilation will turn on maven&apos;s incremental compilation, not turn it off. And the incremental compile code has a history of not being smart enough to do what you want (plus hurts folks who want to use forked builds).&lt;/p&gt;

&lt;p&gt;The documentation is not clear about this boolean and you have to go digging through the code for that information. See &lt;a href=&quot;https://svn.apache.org/viewvc/maven/plugins/tags/maven-compiler-plugin-3.3/src/main/java/org/apache/maven/plugin/compiler/AbstractCompilerMojo.java?revision=1668695&amp;amp;view=markup#l674&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this code&lt;/a&gt; and the &lt;a href=&quot;https://svn.apache.org/viewvc/maven/plugins/tags/maven-compiler-plugin-3.3/src/main/java/org/apache/maven/plugin/compiler/AbstractCompilerMojo.java?revision=1668695&amp;amp;view=markup#l714&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;stale sources calculation&lt;/a&gt; that seems to be what&apos;s in maven 3.3.&lt;/p&gt;</comment>
                            <comment id="15111194" author="agudian" created="Thu, 21 Jan 2016 19:54:39 +0000"  >&lt;p&gt;I&apos;ve just committed a possible fix for this and it works for me now.&lt;/p&gt;

&lt;p&gt;As there are quite some different sightings of this issue and also different types of errors observed based on this, I&apos;d appreciate some feedback from here. The safest way for testing would be checking out the code (&lt;a href=&quot;https://svn.apache.org/repos/asf/maven/plugins/trunk/maven-compiler-plugin&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/maven/plugins/trunk/maven-compiler-plugin&lt;/a&gt; - or use the github-mirror), &lt;tt&gt;mvn clean install&lt;/tt&gt; it and use the 3.6-SNAPSHOT version in your build.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="15111215" author="hudson" created="Thu, 21 Jan 2016 20:10:44 +0000"  >&lt;p&gt;SUCCESS: Integrated in maven-plugins #5007 (See &lt;a href=&quot;https://builds.apache.org/job/maven-plugins/5007/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/maven-plugins/5007/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-235&quot; title=&quot;duplicate classes due to MCOMPILER-157 when compiler is called twice or more&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-235&quot;&gt;&lt;del&gt;MCOMPILER-235&lt;/del&gt;&lt;/a&gt; do not add files from generatedSourcesDirectory to the list of source files to compile. (agudian: &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1726074&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1726074&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;maven-compiler-plugin/src/main/java/org/apache/maven/plugin/compiler/AbstractCompilerMojo.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15114259" author="t.broyer" created="Sun, 24 Jan 2016 10:11:54 +0000"  >&lt;p&gt;The source code changes look good, but wouldn&apos;t it be somewhat easier to just defer adding the generatedSourcesDirectory to the compileSourceRoots to after the actual compilation (or use of the compileSourceRoots)&#160;? (accounting for the early exits when everything&apos;s up-to-date and compilation is skipped entirely)&lt;/p&gt;

&lt;p&gt;Also tried it and it appears to work OK (would be even better to ensure non-regression in the future with an integration test if you ask me, just have the `invoker.properties` do the build twice)&lt;/p&gt;</comment>
                            <comment id="15120092" author="agudian" created="Wed, 27 Jan 2016 20:13:23 +0000"  >&lt;p&gt;Thanks for trying it out!&lt;/p&gt;

&lt;p&gt;I&apos;ve extended a test now as well - just wanted to make sure I&apos;m in the right ballpark regarding the supposed error (the error message is looking quite different on Java 8).&lt;/p&gt;</comment>
                            <comment id="15120106" author="hudson" created="Wed, 27 Jan 2016 20:29:35 +0000"  >&lt;p&gt;SUCCESS: Integrated in maven-plugins #5035 (See &lt;a href=&quot;https://builds.apache.org/job/maven-plugins/5035/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/maven-plugins/5035/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-235&quot; title=&quot;duplicate classes due to MCOMPILER-157 when compiler is called twice or more&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-235&quot;&gt;&lt;del&gt;MCOMPILER-235&lt;/del&gt;&lt;/a&gt; extend IT to verify that the repeated build without a clean works when using an annotation processor that generates java sources. (agudian: &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1727173&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1727173&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;maven-compiler-plugin/src/it/&lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-203&quot; title=&quot;Allow compiler-plugin to specify annotation processor dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-203&quot;&gt;&lt;del&gt;MCOMPILER-203&lt;/del&gt;&lt;/a&gt;-processorpath/annotation-processor/src/main/java/org/issue/SimpleAnnotationProcessor.java&lt;/li&gt;
	&lt;li&gt;maven-compiler-plugin/src/it/&lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER-203&quot; title=&quot;Allow compiler-plugin to specify annotation processor dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MCOMPILER-203&quot;&gt;&lt;del&gt;MCOMPILER-203&lt;/del&gt;&lt;/a&gt;-processorpath/invoker.properties&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15185101" author="mlassiter" created="Tue, 8 Mar 2016 15:39:31 +0000"  >&lt;p&gt;Stumbled on this and noted that the Fixed Version incorrectly states 2.5.1.  I believe it is meant to say 3.5.1.&lt;/p&gt;</comment>
                            <comment id="15185162" author="agudian" created="Tue, 8 Mar 2016 16:19:54 +0000"  >&lt;p&gt;Oops, indeed. Thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12800499">MCOMPILER-236</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12800364">MCOMPILER-240</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12800448">MCOMPILER-157</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12714951" name="MCOMPILER-235.zip" size="7194" author="drekbour" created="Wed, 5 Nov 2014 07:53:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i29tv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>