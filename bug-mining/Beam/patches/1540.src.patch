diff --git a/runners/core-construction-java/src/test/java/org/apache/beam/runners/core/construction/resources/ClasspathScanningResourcesDetectorTest.java b/runners/core-construction-java/src/test/java/org/apache/beam/runners/core/construction/resources/ClasspathScanningResourcesDetectorTest.java
index 77cd17ddd78..afd0472946b 100644
--- a/runners/core-construction-java/src/test/java/org/apache/beam/runners/core/construction/resources/ClasspathScanningResourcesDetectorTest.java
+++ b/runners/core-construction-java/src/test/java/org/apache/beam/runners/core/construction/resources/ClasspathScanningResourcesDetectorTest.java
@@ -21,6 +21,7 @@ import static org.hamcrest.CoreMatchers.containsString;
 import static org.hamcrest.CoreMatchers.hasItem;
 import static org.hamcrest.CoreMatchers.hasItems;
 import static org.hamcrest.MatcherAssert.assertThat;
+import static org.hamcrest.Matchers.containsInRelativeOrder;
 import static org.hamcrest.Matchers.not;
 import static org.junit.Assert.assertFalse;
 
@@ -69,6 +70,24 @@ public class ClasspathScanningResourcesDetectorTest {
     assertThat(result, hasItem(containsString(jarFile.getAbsolutePath())));
   }
 
+  @Test
+  public void shouldDetectResourcesInOrderTheyAppearInURLClassLoader() throws Exception {
+    File file1 = createTestTmpJarFile("test1");
+    File file2 = createTestTmpJarFile("test2");
+    ClassLoader classLoader =
+        new URLClassLoader(new URL[] {file1.toURI().toURL(), file2.toURI().toURL()});
+
+    ClasspathScanningResourcesDetector detector =
+        new ClasspathScanningResourcesDetector(new ClassGraph());
+
+    List<String> result = detector.detect(classLoader);
+
+    assertThat(
+        result,
+        containsInRelativeOrder(
+            containsString(file1.getAbsolutePath()), containsString(file2.getAbsolutePath())));
+  }
+
   private File createTestTmpJarFile(String name) throws IOException {
     File jarFile = tmpFolder.newFile(name);
     try (JarOutputStream os = new JarOutputStream(new FileOutputStream(jarFile), new Manifest())) {}
