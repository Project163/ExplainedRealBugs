diff --git a/buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy b/buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy
index ea24693d292..ae9b791842b 100644
--- a/buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy
+++ b/buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy
@@ -445,7 +445,7 @@ class BeamModulePlugin implements Plugin<Project> {
     def activemq_version = "5.14.5"
     def autovalue_version = "1.8.2"
     def aws_java_sdk_version = "1.11.974"
-    def aws_java_sdk2_version = "2.15.31"
+    def aws_java_sdk2_version = "2.17.77"
     def cassandra_driver_version = "3.10.2"
     def checkerframework_version = "3.10.0"
     def classgraph_version = "4.8.104"
diff --git a/sdks/java/io/amazon-web-services2/src/test/java/org/apache/beam/sdk/io/aws2/kinesis/DynamicCheckpointGeneratorTest.java b/sdks/java/io/amazon-web-services2/src/test/java/org/apache/beam/sdk/io/aws2/kinesis/DynamicCheckpointGeneratorTest.java
index 3bbf39a206d..ac68cf0f5e7 100644
--- a/sdks/java/io/amazon-web-services2/src/test/java/org/apache/beam/sdk/io/aws2/kinesis/DynamicCheckpointGeneratorTest.java
+++ b/sdks/java/io/amazon-web-services2/src/test/java/org/apache/beam/sdk/io/aws2/kinesis/DynamicCheckpointGeneratorTest.java
@@ -22,28 +22,31 @@ import static org.mockito.Mockito.when;
 
 import java.util.Set;
 import org.apache.beam.vendor.guava.v26_0_jre.com.google.common.collect.Sets;
+import org.junit.Before;
 import org.junit.Test;
 import org.junit.runner.RunWith;
 import org.mockito.Mock;
-import org.powermock.core.classloader.annotations.PrepareForTest;
 import org.powermock.modules.junit4.PowerMockRunner;
 import software.amazon.awssdk.services.kinesis.model.Shard;
 import software.amazon.kinesis.common.InitialPositionInStream;
 
 /** * */
 @RunWith(PowerMockRunner.class)
-@PrepareForTest(Shard.class)
 public class DynamicCheckpointGeneratorTest {
 
   @Mock private SimplifiedKinesisClient kinesisClient;
   @Mock private StartingPointShardsFinder startingPointShardsFinder;
-  @Mock private Shard shard1, shard2, shard3;
+  private Shard shard1, shard2, shard3;
+
+  @Before
+  public void init() {
+    shard1 = Shard.builder().shardId("shard-01").build();
+    shard2 = Shard.builder().shardId("shard-02").build();
+    shard3 = Shard.builder().shardId("shard-03").build();
+  }
 
   @Test
   public void shouldMapAllShardsToCheckpoints() throws Exception {
-    when(shard1.shardId()).thenReturn("shard-01");
-    when(shard2.shardId()).thenReturn("shard-02");
-    when(shard3.shardId()).thenReturn("shard-03");
     Set<Shard> shards = Sets.newHashSet(shard1, shard2, shard3);
     StartingPoint startingPoint = new StartingPoint(InitialPositionInStream.LATEST);
     when(startingPointShardsFinder.findShardsAtStartingPoint(
@@ -59,9 +62,6 @@ public class DynamicCheckpointGeneratorTest {
 
   @Test
   public void shouldMapAllValidShardsToCheckpoints() throws Exception {
-    when(shard1.shardId()).thenReturn("shard-01");
-    when(shard2.shardId()).thenReturn("shard-02");
-    when(shard3.shardId()).thenReturn("shard-03");
     String streamName = "stream";
     Set<Shard> shards = Sets.newHashSet(shard1, shard2);
     StartingPoint startingPoint = new StartingPoint(InitialPositionInStream.LATEST);
