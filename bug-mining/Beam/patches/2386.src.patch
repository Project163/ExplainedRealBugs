diff --git a/sdks/go/pkg/beam/core/runtime/harness/gen.go b/sdks/go/pkg/beam/core/runtime/harness/gen.go
index cac56226ff0..ab02ee2f863 100644
--- a/sdks/go/pkg/beam/core/runtime/harness/gen.go
+++ b/sdks/go/pkg/beam/core/runtime/harness/gen.go
@@ -15,4 +15,4 @@
 
 package harness
 
-//go:generate protoc -I. -I../../../../../../../model/fn-execution/src/main/proto -I../../../../../../../model/pipeline/src/main/proto session.proto --go_out=Mbeam_fn_api.proto=github.com/apache/beam/sdks/go/pkg/beam/model/fnexecution_v1:session
+//go:generate protoc -I. -I../../../../../../../model/fn-execution/src/main/proto -I../../../../../../../model/pipeline/src/main/proto session.proto --go_out=Mbeam_fn_api.proto=github.com/apache/beam/sdks/go/pkg/beam/model/fnexecution_v1:../../../../../../../../../../
diff --git a/sdks/go/pkg/beam/core/runtime/harness/session.proto b/sdks/go/pkg/beam/core/runtime/harness/session.proto
index 04cc5de7412..27101e211ba 100644
--- a/sdks/go/pkg/beam/core/runtime/harness/session.proto
+++ b/sdks/go/pkg/beam/core/runtime/harness/session.proto
@@ -22,7 +22,9 @@
 
 syntax = "proto3";
 
-package session;
+package org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session;
+
+option go_package = "github.com/apache/beam/sdks/go/pkg/beam/core/runtime/harness/session;session";
 
 import "beam_fn_api.proto";
 
diff --git a/sdks/go/pkg/beam/core/runtime/harness/session/session.pb.go b/sdks/go/pkg/beam/core/runtime/harness/session/session.pb.go
index 80487530a00..b89899305d5 100644
--- a/sdks/go/pkg/beam/core/runtime/harness/session/session.pb.go
+++ b/sdks/go/pkg/beam/core/runtime/harness/session/session.pb.go
@@ -1,35 +1,45 @@
+//
+// Licensed to the Apache Software Foundation (ASF) under one
+// or more contributor license agreements.  See the NOTICE file
+// distributed with this work for additional information
+// regarding copyright ownership.  The ASF licenses this file
+// to you under the Apache License, Version 2.0 (the
+// "License"); you may not use this file except in compliance
+// with the License.  You may obtain a copy of the License at
+//
+//     http://www.apache.org/licenses/LICENSE-2.0
+//
+// Unless required by applicable law or agreed to in writing, software
+// distributed under the License is distributed on an "AS IS" BASIS,
+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+// See the License for the specific language governing permissions and
+// limitations under the License.
+
+//
+// Protocol buffer definition for session serialization files
+
 // Code generated by protoc-gen-go. DO NOT EDIT.
+// versions:
+// 	protoc-gen-go v1.25.0-devel
+// 	protoc        v3.13.0
 // source: session.proto
 
-/*
-Package session is a generated protocol buffer package.
-
-It is generated from these files:
-	session.proto
-
-It has these top-level messages:
-	Header
-	Footer
-	EntryHeader
-	Entry
-*/
 package session
 
-import proto "github.com/golang/protobuf/proto"
-import fmt "fmt"
-import math "math"
-import org_apache_beam_model_fn_execution_v1 "github.com/apache/beam/sdks/go/pkg/beam/model/fnexecution_v1"
-
-// Reference imports to suppress errors if they are not otherwise used.
-var _ = proto.Marshal
-var _ = fmt.Errorf
-var _ = math.Inf
+import (
+	fnexecution_v1 "github.com/apache/beam/sdks/go/pkg/beam/model/fnexecution_v1"
+	protoreflect "google.golang.org/protobuf/reflect/protoreflect"
+	protoimpl "google.golang.org/protobuf/runtime/protoimpl"
+	reflect "reflect"
+	sync "sync"
+)
 
-// This is a compile-time assertion to ensure that this generated file
-// is compatible with the proto package it is being compiled against.
-// A compilation error at this line likely means your copy of the
-// proto package needs to be updated.
-const _ = proto.ProtoPackageIsVersion2 // please upgrade the proto package
+const (
+	// Verify that this generated code is sufficiently up-to-date.
+	_ = protoimpl.EnforceVersion(20 - protoimpl.MinVersion)
+	// Verify that runtime/protoimpl is sufficiently up-to-date.
+	_ = protoimpl.EnforceVersion(protoimpl.MaxVersion - 20)
+)
 
 type Kind int32
 
@@ -44,99 +54,220 @@ const (
 	Kind_FOOTER               Kind = 7
 )
 
-var Kind_name = map[int32]string{
-	0: "INVALID",
-	1: "INSTRUCTION_REQUEST",
-	2: "INSTRUCTION_RESPONSE",
-	3: "DATA_RECEIVED",
-	4: "DATA_SENT",
-	5: "LOG_ENTRIES",
-	6: "HEADER",
-	7: "FOOTER",
-}
-var Kind_value = map[string]int32{
-	"INVALID":              0,
-	"INSTRUCTION_REQUEST":  1,
-	"INSTRUCTION_RESPONSE": 2,
-	"DATA_RECEIVED":        3,
-	"DATA_SENT":            4,
-	"LOG_ENTRIES":          5,
-	"HEADER":               6,
-	"FOOTER":               7,
+// Enum value maps for Kind.
+var (
+	Kind_name = map[int32]string{
+		0: "INVALID",
+		1: "INSTRUCTION_REQUEST",
+		2: "INSTRUCTION_RESPONSE",
+		3: "DATA_RECEIVED",
+		4: "DATA_SENT",
+		5: "LOG_ENTRIES",
+		6: "HEADER",
+		7: "FOOTER",
+	}
+	Kind_value = map[string]int32{
+		"INVALID":              0,
+		"INSTRUCTION_REQUEST":  1,
+		"INSTRUCTION_RESPONSE": 2,
+		"DATA_RECEIVED":        3,
+		"DATA_SENT":            4,
+		"LOG_ENTRIES":          5,
+		"HEADER":               6,
+		"FOOTER":               7,
+	}
+)
+
+func (x Kind) Enum() *Kind {
+	p := new(Kind)
+	*p = x
+	return p
 }
 
 func (x Kind) String() string {
-	return proto.EnumName(Kind_name, int32(x))
+	return protoimpl.X.EnumStringOf(x.Descriptor(), protoreflect.EnumNumber(x))
+}
+
+func (Kind) Descriptor() protoreflect.EnumDescriptor {
+	return file_session_proto_enumTypes[0].Descriptor()
+}
+
+func (Kind) Type() protoreflect.EnumType {
+	return &file_session_proto_enumTypes[0]
+}
+
+func (x Kind) Number() protoreflect.EnumNumber {
+	return protoreflect.EnumNumber(x)
+}
+
+// Deprecated: Use Kind.Descriptor instead.
+func (Kind) EnumDescriptor() ([]byte, []int) {
+	return file_session_proto_rawDescGZIP(), []int{0}
 }
-func (Kind) EnumDescriptor() ([]byte, []int) { return fileDescriptor0, []int{0} }
 
 type Header struct {
-	Version    string `protobuf:"bytes,1,opt,name=version" json:"version,omitempty"`
-	SdkVersion string `protobuf:"bytes,2,opt,name=sdk_version,json=sdkVersion" json:"sdk_version,omitempty"`
-	MaxMsgLen  int64  `protobuf:"varint,3,opt,name=max_msg_len,json=maxMsgLen" json:"max_msg_len,omitempty"`
+	state         protoimpl.MessageState
+	sizeCache     protoimpl.SizeCache
+	unknownFields protoimpl.UnknownFields
+
+	Version    string `protobuf:"bytes,1,opt,name=version,proto3" json:"version,omitempty"`                         // version identifier of the session schema
+	SdkVersion string `protobuf:"bytes,2,opt,name=sdk_version,json=sdkVersion,proto3" json:"sdk_version,omitempty"` // build information for the SDK that generated the session.
+	MaxMsgLen  int64  `protobuf:"varint,3,opt,name=max_msg_len,json=maxMsgLen,proto3" json:"max_msg_len,omitempty"` // maximum length of a single entry
 }
 
-func (m *Header) Reset()                    { *m = Header{} }
-func (m *Header) String() string            { return proto.CompactTextString(m) }
-func (*Header) ProtoMessage()               {}
-func (*Header) Descriptor() ([]byte, []int) { return fileDescriptor0, []int{0} }
+func (x *Header) Reset() {
+	*x = Header{}
+	if protoimpl.UnsafeEnabled {
+		mi := &file_session_proto_msgTypes[0]
+		ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
+		ms.StoreMessageInfo(mi)
+	}
+}
 
-func (m *Header) GetVersion() string {
-	if m != nil {
-		return m.Version
+func (x *Header) String() string {
+	return protoimpl.X.MessageStringOf(x)
+}
+
+func (*Header) ProtoMessage() {}
+
+func (x *Header) ProtoReflect() protoreflect.Message {
+	mi := &file_session_proto_msgTypes[0]
+	if protoimpl.UnsafeEnabled && x != nil {
+		ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
+		if ms.LoadMessageInfo() == nil {
+			ms.StoreMessageInfo(mi)
+		}
+		return ms
+	}
+	return mi.MessageOf(x)
+}
+
+// Deprecated: Use Header.ProtoReflect.Descriptor instead.
+func (*Header) Descriptor() ([]byte, []int) {
+	return file_session_proto_rawDescGZIP(), []int{0}
+}
+
+func (x *Header) GetVersion() string {
+	if x != nil {
+		return x.Version
 	}
 	return ""
 }
 
-func (m *Header) GetSdkVersion() string {
-	if m != nil {
-		return m.SdkVersion
+func (x *Header) GetSdkVersion() string {
+	if x != nil {
+		return x.SdkVersion
 	}
 	return ""
 }
 
-func (m *Header) GetMaxMsgLen() int64 {
-	if m != nil {
-		return m.MaxMsgLen
+func (x *Header) GetMaxMsgLen() int64 {
+	if x != nil {
+		return x.MaxMsgLen
 	}
 	return 0
 }
 
 type Footer struct {
+	state         protoimpl.MessageState
+	sizeCache     protoimpl.SizeCache
+	unknownFields protoimpl.UnknownFields
+}
+
+func (x *Footer) Reset() {
+	*x = Footer{}
+	if protoimpl.UnsafeEnabled {
+		mi := &file_session_proto_msgTypes[1]
+		ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
+		ms.StoreMessageInfo(mi)
+	}
+}
+
+func (x *Footer) String() string {
+	return protoimpl.X.MessageStringOf(x)
+}
+
+func (*Footer) ProtoMessage() {}
+
+func (x *Footer) ProtoReflect() protoreflect.Message {
+	mi := &file_session_proto_msgTypes[1]
+	if protoimpl.UnsafeEnabled && x != nil {
+		ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
+		if ms.LoadMessageInfo() == nil {
+			ms.StoreMessageInfo(mi)
+		}
+		return ms
+	}
+	return mi.MessageOf(x)
 }
 
-func (m *Footer) Reset()                    { *m = Footer{} }
-func (m *Footer) String() string            { return proto.CompactTextString(m) }
-func (*Footer) ProtoMessage()               {}
-func (*Footer) Descriptor() ([]byte, []int) { return fileDescriptor0, []int{1} }
+// Deprecated: Use Footer.ProtoReflect.Descriptor instead.
+func (*Footer) Descriptor() ([]byte, []int) {
+	return file_session_proto_rawDescGZIP(), []int{1}
+}
 
 type EntryHeader struct {
-	Len  int64 `protobuf:"varint,1,opt,name=len" json:"len,omitempty"`
-	Kind Kind  `protobuf:"varint,2,opt,name=kind,enum=session.Kind" json:"kind,omitempty"`
+	state         protoimpl.MessageState
+	sizeCache     protoimpl.SizeCache
+	unknownFields protoimpl.UnknownFields
+
+	Len  int64 `protobuf:"varint,1,opt,name=len,proto3" json:"len,omitempty"`
+	Kind Kind  `protobuf:"varint,2,opt,name=kind,proto3,enum=org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.Kind" json:"kind,omitempty"`
 }
 
-func (m *EntryHeader) Reset()                    { *m = EntryHeader{} }
-func (m *EntryHeader) String() string            { return proto.CompactTextString(m) }
-func (*EntryHeader) ProtoMessage()               {}
-func (*EntryHeader) Descriptor() ([]byte, []int) { return fileDescriptor0, []int{2} }
+func (x *EntryHeader) Reset() {
+	*x = EntryHeader{}
+	if protoimpl.UnsafeEnabled {
+		mi := &file_session_proto_msgTypes[2]
+		ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
+		ms.StoreMessageInfo(mi)
+	}
+}
 
-func (m *EntryHeader) GetLen() int64 {
-	if m != nil {
-		return m.Len
+func (x *EntryHeader) String() string {
+	return protoimpl.X.MessageStringOf(x)
+}
+
+func (*EntryHeader) ProtoMessage() {}
+
+func (x *EntryHeader) ProtoReflect() protoreflect.Message {
+	mi := &file_session_proto_msgTypes[2]
+	if protoimpl.UnsafeEnabled && x != nil {
+		ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
+		if ms.LoadMessageInfo() == nil {
+			ms.StoreMessageInfo(mi)
+		}
+		return ms
+	}
+	return mi.MessageOf(x)
+}
+
+// Deprecated: Use EntryHeader.ProtoReflect.Descriptor instead.
+func (*EntryHeader) Descriptor() ([]byte, []int) {
+	return file_session_proto_rawDescGZIP(), []int{2}
+}
+
+func (x *EntryHeader) GetLen() int64 {
+	if x != nil {
+		return x.Len
 	}
 	return 0
 }
 
-func (m *EntryHeader) GetKind() Kind {
-	if m != nil {
-		return m.Kind
+func (x *EntryHeader) GetKind() Kind {
+	if x != nil {
+		return x.Kind
 	}
 	return Kind_INVALID
 }
 
 type Entry struct {
-	Kind Kind `protobuf:"varint,1,opt,name=kind,enum=session.Kind" json:"kind,omitempty"`
-	// Types that are valid to be assigned to Msg:
+	state         protoimpl.MessageState
+	sizeCache     protoimpl.SizeCache
+	unknownFields protoimpl.UnknownFields
+
+	Kind Kind `protobuf:"varint,1,opt,name=kind,proto3,enum=org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.Kind" json:"kind,omitempty"`
+	// Types that are assignable to Msg:
 	//	*Entry_InstReq
 	//	*Entry_InstResp
 	//	*Entry_Elems
@@ -144,43 +275,47 @@ type Entry struct {
 	//	*Entry_Header
 	//	*Entry_Footer
 	Msg       isEntry_Msg `protobuf_oneof:"msg"`
-	Timestamp int64       `protobuf:"varint,2,opt,name=timestamp" json:"timestamp,omitempty"`
+	Timestamp int64       `protobuf:"varint,2,opt,name=timestamp,proto3" json:"timestamp,omitempty"`
 }
 
-func (m *Entry) Reset()                    { *m = Entry{} }
-func (m *Entry) String() string            { return proto.CompactTextString(m) }
-func (*Entry) ProtoMessage()               {}
-func (*Entry) Descriptor() ([]byte, []int) { return fileDescriptor0, []int{3} }
-
-type isEntry_Msg interface {
-	isEntry_Msg()
+func (x *Entry) Reset() {
+	*x = Entry{}
+	if protoimpl.UnsafeEnabled {
+		mi := &file_session_proto_msgTypes[3]
+		ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
+		ms.StoreMessageInfo(mi)
+	}
 }
 
-type Entry_InstReq struct {
-	InstReq *org_apache_beam_model_fn_execution_v1.InstructionRequest `protobuf:"bytes,1000,opt,name=inst_req,json=instReq,oneof"`
-}
-type Entry_InstResp struct {
-	InstResp *org_apache_beam_model_fn_execution_v1.InstructionResponse `protobuf:"bytes,1001,opt,name=inst_resp,json=instResp,oneof"`
-}
-type Entry_Elems struct {
-	Elems *org_apache_beam_model_fn_execution_v1.Elements `protobuf:"bytes,1002,opt,name=elems,oneof"`
+func (x *Entry) String() string {
+	return protoimpl.X.MessageStringOf(x)
 }
-type Entry_LogEntries struct {
-	LogEntries *org_apache_beam_model_fn_execution_v1.LogEntry_List `protobuf:"bytes,1003,opt,name=log_entries,json=logEntries,oneof"`
-}
-type Entry_Header struct {
-	Header *Header `protobuf:"bytes,1004,opt,name=header,oneof"`
+
+func (*Entry) ProtoMessage() {}
+
+func (x *Entry) ProtoReflect() protoreflect.Message {
+	mi := &file_session_proto_msgTypes[3]
+	if protoimpl.UnsafeEnabled && x != nil {
+		ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
+		if ms.LoadMessageInfo() == nil {
+			ms.StoreMessageInfo(mi)
+		}
+		return ms
+	}
+	return mi.MessageOf(x)
 }
-type Entry_Footer struct {
-	Footer *Footer `protobuf:"bytes,1005,opt,name=footer,oneof"`
+
+// Deprecated: Use Entry.ProtoReflect.Descriptor instead.
+func (*Entry) Descriptor() ([]byte, []int) {
+	return file_session_proto_rawDescGZIP(), []int{3}
 }
 
-func (*Entry_InstReq) isEntry_Msg()    {}
-func (*Entry_InstResp) isEntry_Msg()   {}
-func (*Entry_Elems) isEntry_Msg()      {}
-func (*Entry_LogEntries) isEntry_Msg() {}
-func (*Entry_Header) isEntry_Msg()     {}
-func (*Entry_Footer) isEntry_Msg()     {}
+func (x *Entry) GetKind() Kind {
+	if x != nil {
+		return x.Kind
+	}
+	return Kind_INVALID
+}
 
 func (m *Entry) GetMsg() isEntry_Msg {
 	if m != nil {
@@ -189,256 +324,299 @@ func (m *Entry) GetMsg() isEntry_Msg {
 	return nil
 }
 
-func (m *Entry) GetKind() Kind {
-	if m != nil {
-		return m.Kind
-	}
-	return Kind_INVALID
-}
-
-func (m *Entry) GetInstReq() *org_apache_beam_model_fn_execution_v1.InstructionRequest {
-	if x, ok := m.GetMsg().(*Entry_InstReq); ok {
+func (x *Entry) GetInstReq() *fnexecution_v1.InstructionRequest {
+	if x, ok := x.GetMsg().(*Entry_InstReq); ok {
 		return x.InstReq
 	}
 	return nil
 }
 
-func (m *Entry) GetInstResp() *org_apache_beam_model_fn_execution_v1.InstructionResponse {
-	if x, ok := m.GetMsg().(*Entry_InstResp); ok {
+func (x *Entry) GetInstResp() *fnexecution_v1.InstructionResponse {
+	if x, ok := x.GetMsg().(*Entry_InstResp); ok {
 		return x.InstResp
 	}
 	return nil
 }
 
-func (m *Entry) GetElems() *org_apache_beam_model_fn_execution_v1.Elements {
-	if x, ok := m.GetMsg().(*Entry_Elems); ok {
+func (x *Entry) GetElems() *fnexecution_v1.Elements {
+	if x, ok := x.GetMsg().(*Entry_Elems); ok {
 		return x.Elems
 	}
 	return nil
 }
 
-func (m *Entry) GetLogEntries() *org_apache_beam_model_fn_execution_v1.LogEntry_List {
-	if x, ok := m.GetMsg().(*Entry_LogEntries); ok {
+func (x *Entry) GetLogEntries() *fnexecution_v1.LogEntry_List {
+	if x, ok := x.GetMsg().(*Entry_LogEntries); ok {
 		return x.LogEntries
 	}
 	return nil
 }
 
-func (m *Entry) GetHeader() *Header {
-	if x, ok := m.GetMsg().(*Entry_Header); ok {
+func (x *Entry) GetHeader() *Header {
+	if x, ok := x.GetMsg().(*Entry_Header); ok {
 		return x.Header
 	}
 	return nil
 }
 
-func (m *Entry) GetFooter() *Footer {
-	if x, ok := m.GetMsg().(*Entry_Footer); ok {
+func (x *Entry) GetFooter() *Footer {
+	if x, ok := x.GetMsg().(*Entry_Footer); ok {
 		return x.Footer
 	}
 	return nil
 }
 
-func (m *Entry) GetTimestamp() int64 {
-	if m != nil {
-		return m.Timestamp
+func (x *Entry) GetTimestamp() int64 {
+	if x != nil {
+		return x.Timestamp
 	}
 	return 0
 }
 
-// XXX_OneofFuncs is for the internal use of the proto package.
-func (*Entry) XXX_OneofFuncs() (func(msg proto.Message, b *proto.Buffer) error, func(msg proto.Message, tag, wire int, b *proto.Buffer) (bool, error), func(msg proto.Message) (n int), []interface{}) {
-	return _Entry_OneofMarshaler, _Entry_OneofUnmarshaler, _Entry_OneofSizer, []interface{}{
-		(*Entry_InstReq)(nil),
-		(*Entry_InstResp)(nil),
-		(*Entry_Elems)(nil),
-		(*Entry_LogEntries)(nil),
-		(*Entry_Header)(nil),
-		(*Entry_Footer)(nil),
-	}
+type isEntry_Msg interface {
+	isEntry_Msg()
 }
 
-func _Entry_OneofMarshaler(msg proto.Message, b *proto.Buffer) error {
-	m := msg.(*Entry)
-	// msg
-	switch x := m.Msg.(type) {
-	case *Entry_InstReq:
-		b.EncodeVarint(1000<<3 | proto.WireBytes)
-		if err := b.EncodeMessage(x.InstReq); err != nil {
-			return err
-		}
-	case *Entry_InstResp:
-		b.EncodeVarint(1001<<3 | proto.WireBytes)
-		if err := b.EncodeMessage(x.InstResp); err != nil {
-			return err
-		}
-	case *Entry_Elems:
-		b.EncodeVarint(1002<<3 | proto.WireBytes)
-		if err := b.EncodeMessage(x.Elems); err != nil {
-			return err
-		}
-	case *Entry_LogEntries:
-		b.EncodeVarint(1003<<3 | proto.WireBytes)
-		if err := b.EncodeMessage(x.LogEntries); err != nil {
-			return err
-		}
-	case *Entry_Header:
-		b.EncodeVarint(1004<<3 | proto.WireBytes)
-		if err := b.EncodeMessage(x.Header); err != nil {
-			return err
-		}
-	case *Entry_Footer:
-		b.EncodeVarint(1005<<3 | proto.WireBytes)
-		if err := b.EncodeMessage(x.Footer); err != nil {
-			return err
-		}
-	case nil:
-	default:
-		return fmt.Errorf("Entry.Msg has unexpected type %T", x)
-	}
-	return nil
+type Entry_InstReq struct {
+	InstReq *fnexecution_v1.InstructionRequest `protobuf:"bytes,1000,opt,name=inst_req,json=instReq,proto3,oneof"`
 }
 
-func _Entry_OneofUnmarshaler(msg proto.Message, tag, wire int, b *proto.Buffer) (bool, error) {
-	m := msg.(*Entry)
-	switch tag {
-	case 1000: // msg.inst_req
-		if wire != proto.WireBytes {
-			return true, proto.ErrInternalBadWireType
-		}
-		msg := new(org_apache_beam_model_fn_execution_v1.InstructionRequest)
-		err := b.DecodeMessage(msg)
-		m.Msg = &Entry_InstReq{msg}
-		return true, err
-	case 1001: // msg.inst_resp
-		if wire != proto.WireBytes {
-			return true, proto.ErrInternalBadWireType
-		}
-		msg := new(org_apache_beam_model_fn_execution_v1.InstructionResponse)
-		err := b.DecodeMessage(msg)
-		m.Msg = &Entry_InstResp{msg}
-		return true, err
-	case 1002: // msg.elems
-		if wire != proto.WireBytes {
-			return true, proto.ErrInternalBadWireType
+type Entry_InstResp struct {
+	InstResp *fnexecution_v1.InstructionResponse `protobuf:"bytes,1001,opt,name=inst_resp,json=instResp,proto3,oneof"`
+}
+
+type Entry_Elems struct {
+	Elems *fnexecution_v1.Elements `protobuf:"bytes,1002,opt,name=elems,proto3,oneof"`
+}
+
+type Entry_LogEntries struct {
+	LogEntries *fnexecution_v1.LogEntry_List `protobuf:"bytes,1003,opt,name=log_entries,json=logEntries,proto3,oneof"`
+}
+
+type Entry_Header struct {
+	Header *Header `protobuf:"bytes,1004,opt,name=header,proto3,oneof"`
+}
+
+type Entry_Footer struct {
+	Footer *Footer `protobuf:"bytes,1005,opt,name=footer,proto3,oneof"`
+}
+
+func (*Entry_InstReq) isEntry_Msg() {}
+
+func (*Entry_InstResp) isEntry_Msg() {}
+
+func (*Entry_Elems) isEntry_Msg() {}
+
+func (*Entry_LogEntries) isEntry_Msg() {}
+
+func (*Entry_Header) isEntry_Msg() {}
+
+func (*Entry_Footer) isEntry_Msg() {}
+
+var File_session_proto protoreflect.FileDescriptor
+
+var file_session_proto_rawDesc = []byte{
+	0x0a, 0x0d, 0x73, 0x65, 0x73, 0x73, 0x69, 0x6f, 0x6e, 0x2e, 0x70, 0x72, 0x6f, 0x74, 0x6f, 0x12,
+	0x3d, 0x6f, 0x72, 0x67, 0x2e, 0x61, 0x70, 0x61, 0x63, 0x68, 0x65, 0x2e, 0x62, 0x65, 0x61, 0x6d,
+	0x2e, 0x73, 0x64, 0x6b, 0x73, 0x2e, 0x67, 0x6f, 0x2e, 0x70, 0x6b, 0x67, 0x2e, 0x62, 0x65, 0x61,
+	0x6d, 0x2e, 0x63, 0x6f, 0x72, 0x65, 0x2e, 0x72, 0x75, 0x6e, 0x74, 0x69, 0x6d, 0x65, 0x2e, 0x68,
+	0x61, 0x72, 0x6e, 0x65, 0x73, 0x73, 0x2e, 0x73, 0x65, 0x73, 0x73, 0x69, 0x6f, 0x6e, 0x1a, 0x11,
+	0x62, 0x65, 0x61, 0x6d, 0x5f, 0x66, 0x6e, 0x5f, 0x61, 0x70, 0x69, 0x2e, 0x70, 0x72, 0x6f, 0x74,
+	0x6f, 0x22, 0x63, 0x0a, 0x06, 0x48, 0x65, 0x61, 0x64, 0x65, 0x72, 0x12, 0x18, 0x0a, 0x07, 0x76,
+	0x65, 0x72, 0x73, 0x69, 0x6f, 0x6e, 0x18, 0x01, 0x20, 0x01, 0x28, 0x09, 0x52, 0x07, 0x76, 0x65,
+	0x72, 0x73, 0x69, 0x6f, 0x6e, 0x12, 0x1f, 0x0a, 0x0b, 0x73, 0x64, 0x6b, 0x5f, 0x76, 0x65, 0x72,
+	0x73, 0x69, 0x6f, 0x6e, 0x18, 0x02, 0x20, 0x01, 0x28, 0x09, 0x52, 0x0a, 0x73, 0x64, 0x6b, 0x56,
+	0x65, 0x72, 0x73, 0x69, 0x6f, 0x6e, 0x12, 0x1e, 0x0a, 0x0b, 0x6d, 0x61, 0x78, 0x5f, 0x6d, 0x73,
+	0x67, 0x5f, 0x6c, 0x65, 0x6e, 0x18, 0x03, 0x20, 0x01, 0x28, 0x03, 0x52, 0x09, 0x6d, 0x61, 0x78,
+	0x4d, 0x73, 0x67, 0x4c, 0x65, 0x6e, 0x22, 0x08, 0x0a, 0x06, 0x46, 0x6f, 0x6f, 0x74, 0x65, 0x72,
+	0x22, 0x78, 0x0a, 0x0b, 0x45, 0x6e, 0x74, 0x72, 0x79, 0x48, 0x65, 0x61, 0x64, 0x65, 0x72, 0x12,
+	0x10, 0x0a, 0x03, 0x6c, 0x65, 0x6e, 0x18, 0x01, 0x20, 0x01, 0x28, 0x03, 0x52, 0x03, 0x6c, 0x65,
+	0x6e, 0x12, 0x57, 0x0a, 0x04, 0x6b, 0x69, 0x6e, 0x64, 0x18, 0x02, 0x20, 0x01, 0x28, 0x0e, 0x32,
+	0x43, 0x2e, 0x6f, 0x72, 0x67, 0x2e, 0x61, 0x70, 0x61, 0x63, 0x68, 0x65, 0x2e, 0x62, 0x65, 0x61,
+	0x6d, 0x2e, 0x73, 0x64, 0x6b, 0x73, 0x2e, 0x67, 0x6f, 0x2e, 0x70, 0x6b, 0x67, 0x2e, 0x62, 0x65,
+	0x61, 0x6d, 0x2e, 0x63, 0x6f, 0x72, 0x65, 0x2e, 0x72, 0x75, 0x6e, 0x74, 0x69, 0x6d, 0x65, 0x2e,
+	0x68, 0x61, 0x72, 0x6e, 0x65, 0x73, 0x73, 0x2e, 0x73, 0x65, 0x73, 0x73, 0x69, 0x6f, 0x6e, 0x2e,
+	0x4b, 0x69, 0x6e, 0x64, 0x52, 0x04, 0x6b, 0x69, 0x6e, 0x64, 0x22, 0xa2, 0x05, 0x0a, 0x05, 0x45,
+	0x6e, 0x74, 0x72, 0x79, 0x12, 0x57, 0x0a, 0x04, 0x6b, 0x69, 0x6e, 0x64, 0x18, 0x01, 0x20, 0x01,
+	0x28, 0x0e, 0x32, 0x43, 0x2e, 0x6f, 0x72, 0x67, 0x2e, 0x61, 0x70, 0x61, 0x63, 0x68, 0x65, 0x2e,
+	0x62, 0x65, 0x61, 0x6d, 0x2e, 0x73, 0x64, 0x6b, 0x73, 0x2e, 0x67, 0x6f, 0x2e, 0x70, 0x6b, 0x67,
+	0x2e, 0x62, 0x65, 0x61, 0x6d, 0x2e, 0x63, 0x6f, 0x72, 0x65, 0x2e, 0x72, 0x75, 0x6e, 0x74, 0x69,
+	0x6d, 0x65, 0x2e, 0x68, 0x61, 0x72, 0x6e, 0x65, 0x73, 0x73, 0x2e, 0x73, 0x65, 0x73, 0x73, 0x69,
+	0x6f, 0x6e, 0x2e, 0x4b, 0x69, 0x6e, 0x64, 0x52, 0x04, 0x6b, 0x69, 0x6e, 0x64, 0x12, 0x57, 0x0a,
+	0x08, 0x69, 0x6e, 0x73, 0x74, 0x5f, 0x72, 0x65, 0x71, 0x18, 0xe8, 0x07, 0x20, 0x01, 0x28, 0x0b,
+	0x32, 0x39, 0x2e, 0x6f, 0x72, 0x67, 0x2e, 0x61, 0x70, 0x61, 0x63, 0x68, 0x65, 0x2e, 0x62, 0x65,
+	0x61, 0x6d, 0x2e, 0x6d, 0x6f, 0x64, 0x65, 0x6c, 0x2e, 0x66, 0x6e, 0x5f, 0x65, 0x78, 0x65, 0x63,
+	0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x76, 0x31, 0x2e, 0x49, 0x6e, 0x73, 0x74, 0x72, 0x75, 0x63,
+	0x74, 0x69, 0x6f, 0x6e, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74, 0x48, 0x00, 0x52, 0x07, 0x69,
+	0x6e, 0x73, 0x74, 0x52, 0x65, 0x71, 0x12, 0x5a, 0x0a, 0x09, 0x69, 0x6e, 0x73, 0x74, 0x5f, 0x72,
+	0x65, 0x73, 0x70, 0x18, 0xe9, 0x07, 0x20, 0x01, 0x28, 0x0b, 0x32, 0x3a, 0x2e, 0x6f, 0x72, 0x67,
+	0x2e, 0x61, 0x70, 0x61, 0x63, 0x68, 0x65, 0x2e, 0x62, 0x65, 0x61, 0x6d, 0x2e, 0x6d, 0x6f, 0x64,
+	0x65, 0x6c, 0x2e, 0x66, 0x6e, 0x5f, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e,
+	0x76, 0x31, 0x2e, 0x49, 0x6e, 0x73, 0x74, 0x72, 0x75, 0x63, 0x74, 0x69, 0x6f, 0x6e, 0x52, 0x65,
+	0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x48, 0x00, 0x52, 0x08, 0x69, 0x6e, 0x73, 0x74, 0x52, 0x65,
+	0x73, 0x70, 0x12, 0x48, 0x0a, 0x05, 0x65, 0x6c, 0x65, 0x6d, 0x73, 0x18, 0xea, 0x07, 0x20, 0x01,
+	0x28, 0x0b, 0x32, 0x2f, 0x2e, 0x6f, 0x72, 0x67, 0x2e, 0x61, 0x70, 0x61, 0x63, 0x68, 0x65, 0x2e,
+	0x62, 0x65, 0x61, 0x6d, 0x2e, 0x6d, 0x6f, 0x64, 0x65, 0x6c, 0x2e, 0x66, 0x6e, 0x5f, 0x65, 0x78,
+	0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x76, 0x31, 0x2e, 0x45, 0x6c, 0x65, 0x6d, 0x65,
+	0x6e, 0x74, 0x73, 0x48, 0x00, 0x52, 0x05, 0x65, 0x6c, 0x65, 0x6d, 0x73, 0x12, 0x58, 0x0a, 0x0b,
+	0x6c, 0x6f, 0x67, 0x5f, 0x65, 0x6e, 0x74, 0x72, 0x69, 0x65, 0x73, 0x18, 0xeb, 0x07, 0x20, 0x01,
+	0x28, 0x0b, 0x32, 0x34, 0x2e, 0x6f, 0x72, 0x67, 0x2e, 0x61, 0x70, 0x61, 0x63, 0x68, 0x65, 0x2e,
+	0x62, 0x65, 0x61, 0x6d, 0x2e, 0x6d, 0x6f, 0x64, 0x65, 0x6c, 0x2e, 0x66, 0x6e, 0x5f, 0x65, 0x78,
+	0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x76, 0x31, 0x2e, 0x4c, 0x6f, 0x67, 0x45, 0x6e,
+	0x74, 0x72, 0x79, 0x2e, 0x4c, 0x69, 0x73, 0x74, 0x48, 0x00, 0x52, 0x0a, 0x6c, 0x6f, 0x67, 0x45,
+	0x6e, 0x74, 0x72, 0x69, 0x65, 0x73, 0x12, 0x60, 0x0a, 0x06, 0x68, 0x65, 0x61, 0x64, 0x65, 0x72,
+	0x18, 0xec, 0x07, 0x20, 0x01, 0x28, 0x0b, 0x32, 0x45, 0x2e, 0x6f, 0x72, 0x67, 0x2e, 0x61, 0x70,
+	0x61, 0x63, 0x68, 0x65, 0x2e, 0x62, 0x65, 0x61, 0x6d, 0x2e, 0x73, 0x64, 0x6b, 0x73, 0x2e, 0x67,
+	0x6f, 0x2e, 0x70, 0x6b, 0x67, 0x2e, 0x62, 0x65, 0x61, 0x6d, 0x2e, 0x63, 0x6f, 0x72, 0x65, 0x2e,
+	0x72, 0x75, 0x6e, 0x74, 0x69, 0x6d, 0x65, 0x2e, 0x68, 0x61, 0x72, 0x6e, 0x65, 0x73, 0x73, 0x2e,
+	0x73, 0x65, 0x73, 0x73, 0x69, 0x6f, 0x6e, 0x2e, 0x48, 0x65, 0x61, 0x64, 0x65, 0x72, 0x48, 0x00,
+	0x52, 0x06, 0x68, 0x65, 0x61, 0x64, 0x65, 0x72, 0x12, 0x60, 0x0a, 0x06, 0x66, 0x6f, 0x6f, 0x74,
+	0x65, 0x72, 0x18, 0xed, 0x07, 0x20, 0x01, 0x28, 0x0b, 0x32, 0x45, 0x2e, 0x6f, 0x72, 0x67, 0x2e,
+	0x61, 0x70, 0x61, 0x63, 0x68, 0x65, 0x2e, 0x62, 0x65, 0x61, 0x6d, 0x2e, 0x73, 0x64, 0x6b, 0x73,
+	0x2e, 0x67, 0x6f, 0x2e, 0x70, 0x6b, 0x67, 0x2e, 0x62, 0x65, 0x61, 0x6d, 0x2e, 0x63, 0x6f, 0x72,
+	0x65, 0x2e, 0x72, 0x75, 0x6e, 0x74, 0x69, 0x6d, 0x65, 0x2e, 0x68, 0x61, 0x72, 0x6e, 0x65, 0x73,
+	0x73, 0x2e, 0x73, 0x65, 0x73, 0x73, 0x69, 0x6f, 0x6e, 0x2e, 0x46, 0x6f, 0x6f, 0x74, 0x65, 0x72,
+	0x48, 0x00, 0x52, 0x06, 0x66, 0x6f, 0x6f, 0x74, 0x65, 0x72, 0x12, 0x1c, 0x0a, 0x09, 0x74, 0x69,
+	0x6d, 0x65, 0x73, 0x74, 0x61, 0x6d, 0x70, 0x18, 0x02, 0x20, 0x01, 0x28, 0x03, 0x52, 0x09, 0x74,
+	0x69, 0x6d, 0x65, 0x73, 0x74, 0x61, 0x6d, 0x70, 0x42, 0x05, 0x0a, 0x03, 0x6d, 0x73, 0x67, 0x2a,
+	0x91, 0x01, 0x0a, 0x04, 0x4b, 0x69, 0x6e, 0x64, 0x12, 0x0b, 0x0a, 0x07, 0x49, 0x4e, 0x56, 0x41,
+	0x4c, 0x49, 0x44, 0x10, 0x00, 0x12, 0x17, 0x0a, 0x13, 0x49, 0x4e, 0x53, 0x54, 0x52, 0x55, 0x43,
+	0x54, 0x49, 0x4f, 0x4e, 0x5f, 0x52, 0x45, 0x51, 0x55, 0x45, 0x53, 0x54, 0x10, 0x01, 0x12, 0x18,
+	0x0a, 0x14, 0x49, 0x4e, 0x53, 0x54, 0x52, 0x55, 0x43, 0x54, 0x49, 0x4f, 0x4e, 0x5f, 0x52, 0x45,
+	0x53, 0x50, 0x4f, 0x4e, 0x53, 0x45, 0x10, 0x02, 0x12, 0x11, 0x0a, 0x0d, 0x44, 0x41, 0x54, 0x41,
+	0x5f, 0x52, 0x45, 0x43, 0x45, 0x49, 0x56, 0x45, 0x44, 0x10, 0x03, 0x12, 0x0d, 0x0a, 0x09, 0x44,
+	0x41, 0x54, 0x41, 0x5f, 0x53, 0x45, 0x4e, 0x54, 0x10, 0x04, 0x12, 0x0f, 0x0a, 0x0b, 0x4c, 0x4f,
+	0x47, 0x5f, 0x45, 0x4e, 0x54, 0x52, 0x49, 0x45, 0x53, 0x10, 0x05, 0x12, 0x0a, 0x0a, 0x06, 0x48,
+	0x45, 0x41, 0x44, 0x45, 0x52, 0x10, 0x06, 0x12, 0x0a, 0x0a, 0x06, 0x46, 0x4f, 0x4f, 0x54, 0x45,
+	0x52, 0x10, 0x07, 0x42, 0x4e, 0x5a, 0x4c, 0x67, 0x69, 0x74, 0x68, 0x75, 0x62, 0x2e, 0x63, 0x6f,
+	0x6d, 0x2f, 0x61, 0x70, 0x61, 0x63, 0x68, 0x65, 0x2f, 0x62, 0x65, 0x61, 0x6d, 0x2f, 0x73, 0x64,
+	0x6b, 0x73, 0x2f, 0x67, 0x6f, 0x2f, 0x70, 0x6b, 0x67, 0x2f, 0x62, 0x65, 0x61, 0x6d, 0x2f, 0x63,
+	0x6f, 0x72, 0x65, 0x2f, 0x72, 0x75, 0x6e, 0x74, 0x69, 0x6d, 0x65, 0x2f, 0x68, 0x61, 0x72, 0x6e,
+	0x65, 0x73, 0x73, 0x2f, 0x73, 0x65, 0x73, 0x73, 0x69, 0x6f, 0x6e, 0x3b, 0x73, 0x65, 0x73, 0x73,
+	0x69, 0x6f, 0x6e, 0x62, 0x06, 0x70, 0x72, 0x6f, 0x74, 0x6f, 0x33,
+}
+
+var (
+	file_session_proto_rawDescOnce sync.Once
+	file_session_proto_rawDescData = file_session_proto_rawDesc
+)
+
+func file_session_proto_rawDescGZIP() []byte {
+	file_session_proto_rawDescOnce.Do(func() {
+		file_session_proto_rawDescData = protoimpl.X.CompressGZIP(file_session_proto_rawDescData)
+	})
+	return file_session_proto_rawDescData
+}
+
+var file_session_proto_enumTypes = make([]protoimpl.EnumInfo, 1)
+var file_session_proto_msgTypes = make([]protoimpl.MessageInfo, 4)
+var file_session_proto_goTypes = []interface{}{
+	(Kind)(0),           // 0: org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.Kind
+	(*Header)(nil),      // 1: org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.Header
+	(*Footer)(nil),      // 2: org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.Footer
+	(*EntryHeader)(nil), // 3: org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.EntryHeader
+	(*Entry)(nil),       // 4: org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.Entry
+	(*fnexecution_v1.InstructionRequest)(nil),  // 5: org.apache.beam.model.fn_execution.v1.InstructionRequest
+	(*fnexecution_v1.InstructionResponse)(nil), // 6: org.apache.beam.model.fn_execution.v1.InstructionResponse
+	(*fnexecution_v1.Elements)(nil),            // 7: org.apache.beam.model.fn_execution.v1.Elements
+	(*fnexecution_v1.LogEntry_List)(nil),       // 8: org.apache.beam.model.fn_execution.v1.LogEntry.List
+}
+var file_session_proto_depIdxs = []int32{
+	0, // 0: org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.EntryHeader.kind:type_name -> org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.Kind
+	0, // 1: org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.Entry.kind:type_name -> org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.Kind
+	5, // 2: org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.Entry.inst_req:type_name -> org.apache.beam.model.fn_execution.v1.InstructionRequest
+	6, // 3: org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.Entry.inst_resp:type_name -> org.apache.beam.model.fn_execution.v1.InstructionResponse
+	7, // 4: org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.Entry.elems:type_name -> org.apache.beam.model.fn_execution.v1.Elements
+	8, // 5: org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.Entry.log_entries:type_name -> org.apache.beam.model.fn_execution.v1.LogEntry.List
+	1, // 6: org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.Entry.header:type_name -> org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.Header
+	2, // 7: org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.Entry.footer:type_name -> org.apache.beam.sdks.go.pkg.beam.core.runtime.harness.session.Footer
+	8, // [8:8] is the sub-list for method output_type
+	8, // [8:8] is the sub-list for method input_type
+	8, // [8:8] is the sub-list for extension type_name
+	8, // [8:8] is the sub-list for extension extendee
+	0, // [0:8] is the sub-list for field type_name
+}
+
+func init() { file_session_proto_init() }
+func file_session_proto_init() {
+	if File_session_proto != nil {
+		return
+	}
+	if !protoimpl.UnsafeEnabled {
+		file_session_proto_msgTypes[0].Exporter = func(v interface{}, i int) interface{} {
+			switch v := v.(*Header); i {
+			case 0:
+				return &v.state
+			case 1:
+				return &v.sizeCache
+			case 2:
+				return &v.unknownFields
+			default:
+				return nil
+			}
 		}
-		msg := new(org_apache_beam_model_fn_execution_v1.Elements)
-		err := b.DecodeMessage(msg)
-		m.Msg = &Entry_Elems{msg}
-		return true, err
-	case 1003: // msg.log_entries
-		if wire != proto.WireBytes {
-			return true, proto.ErrInternalBadWireType
+		file_session_proto_msgTypes[1].Exporter = func(v interface{}, i int) interface{} {
+			switch v := v.(*Footer); i {
+			case 0:
+				return &v.state
+			case 1:
+				return &v.sizeCache
+			case 2:
+				return &v.unknownFields
+			default:
+				return nil
+			}
 		}
-		msg := new(org_apache_beam_model_fn_execution_v1.LogEntry_List)
-		err := b.DecodeMessage(msg)
-		m.Msg = &Entry_LogEntries{msg}
-		return true, err
-	case 1004: // msg.header
-		if wire != proto.WireBytes {
-			return true, proto.ErrInternalBadWireType
+		file_session_proto_msgTypes[2].Exporter = func(v interface{}, i int) interface{} {
+			switch v := v.(*EntryHeader); i {
+			case 0:
+				return &v.state
+			case 1:
+				return &v.sizeCache
+			case 2:
+				return &v.unknownFields
+			default:
+				return nil
+			}
 		}
-		msg := new(Header)
-		err := b.DecodeMessage(msg)
-		m.Msg = &Entry_Header{msg}
-		return true, err
-	case 1005: // msg.footer
-		if wire != proto.WireBytes {
-			return true, proto.ErrInternalBadWireType
+		file_session_proto_msgTypes[3].Exporter = func(v interface{}, i int) interface{} {
+			switch v := v.(*Entry); i {
+			case 0:
+				return &v.state
+			case 1:
+				return &v.sizeCache
+			case 2:
+				return &v.unknownFields
+			default:
+				return nil
+			}
 		}
-		msg := new(Footer)
-		err := b.DecodeMessage(msg)
-		m.Msg = &Entry_Footer{msg}
-		return true, err
-	default:
-		return false, nil
 	}
-}
-
-func _Entry_OneofSizer(msg proto.Message) (n int) {
-	m := msg.(*Entry)
-	// msg
-	switch x := m.Msg.(type) {
-	case *Entry_InstReq:
-		s := proto.Size(x.InstReq)
-		n += proto.SizeVarint(1000<<3 | proto.WireBytes)
-		n += proto.SizeVarint(uint64(s))
-		n += s
-	case *Entry_InstResp:
-		s := proto.Size(x.InstResp)
-		n += proto.SizeVarint(1001<<3 | proto.WireBytes)
-		n += proto.SizeVarint(uint64(s))
-		n += s
-	case *Entry_Elems:
-		s := proto.Size(x.Elems)
-		n += proto.SizeVarint(1002<<3 | proto.WireBytes)
-		n += proto.SizeVarint(uint64(s))
-		n += s
-	case *Entry_LogEntries:
-		s := proto.Size(x.LogEntries)
-		n += proto.SizeVarint(1003<<3 | proto.WireBytes)
-		n += proto.SizeVarint(uint64(s))
-		n += s
-	case *Entry_Header:
-		s := proto.Size(x.Header)
-		n += proto.SizeVarint(1004<<3 | proto.WireBytes)
-		n += proto.SizeVarint(uint64(s))
-		n += s
-	case *Entry_Footer:
-		s := proto.Size(x.Footer)
-		n += proto.SizeVarint(1005<<3 | proto.WireBytes)
-		n += proto.SizeVarint(uint64(s))
-		n += s
-	case nil:
-	default:
-		panic(fmt.Sprintf("proto: unexpected type %T in oneof", x))
+	file_session_proto_msgTypes[3].OneofWrappers = []interface{}{
+		(*Entry_InstReq)(nil),
+		(*Entry_InstResp)(nil),
+		(*Entry_Elems)(nil),
+		(*Entry_LogEntries)(nil),
+		(*Entry_Header)(nil),
+		(*Entry_Footer)(nil),
 	}
-	return n
-}
-
-func init() {
-	proto.RegisterType((*Header)(nil), "session.Header")
-	proto.RegisterType((*Footer)(nil), "session.Footer")
-	proto.RegisterType((*EntryHeader)(nil), "session.EntryHeader")
-	proto.RegisterType((*Entry)(nil), "session.Entry")
-	proto.RegisterEnum("session.Kind", Kind_name, Kind_value)
-}
-
-func init() { proto.RegisterFile("session.proto", fileDescriptor0) }
-
-var fileDescriptor0 = []byte{
-	// 532 bytes of a gzipped FileDescriptorProto
-	0x1f, 0x8b, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0xff, 0x9c, 0x93, 0xcd, 0x6e, 0xd3, 0x40,
-	0x10, 0x80, 0xe3, 0x3a, 0xb1, 0x9b, 0xb1, 0x42, 0xdd, 0x05, 0x09, 0x0b, 0x21, 0x28, 0x39, 0x55,
-	0x3d, 0x18, 0x51, 0xb8, 0xc0, 0x2d, 0x6d, 0xb6, 0xd8, 0x22, 0x38, 0xb0, 0x76, 0x0b, 0xe2, 0x62,
-	0xb9, 0xf1, 0xd4, 0xb5, 0x62, 0xaf, 0x1d, 0xaf, 0x53, 0x85, 0x1b, 0xaf, 0xc0, 0x5b, 0xf2, 0xfb,
-	0x0e, 0xc8, 0xeb, 0xa4, 0x08, 0x24, 0xa4, 0x8a, 0xdb, 0xce, 0xcc, 0xb7, 0xdf, 0x6a, 0x67, 0x76,
-	0x61, 0x20, 0x50, 0x88, 0xb4, 0xe0, 0x76, 0x59, 0x15, 0x75, 0x41, 0xf4, 0x75, 0x78, 0x6f, 0xf7,
-	0x1c, 0xa3, 0x3c, 0xbc, 0xe0, 0x61, 0x54, 0xa6, 0x6d, 0x6d, 0x38, 0x03, 0xcd, 0xc1, 0x28, 0xc6,
-	0x8a, 0x58, 0xa0, 0x5f, 0x61, 0xd5, 0x70, 0x96, 0xb2, 0xa7, 0xec, 0xf7, 0xd9, 0x26, 0x24, 0x0f,
-	0xc1, 0x10, 0xf1, 0x3c, 0xdc, 0x54, 0xb7, 0x64, 0x15, 0x44, 0x3c, 0x3f, 0x5b, 0x03, 0x0f, 0xc0,
-	0xc8, 0xa3, 0x55, 0x98, 0x8b, 0x24, 0xcc, 0x90, 0x5b, 0xea, 0x9e, 0xb2, 0xaf, 0xb2, 0x7e, 0x1e,
-	0xad, 0x5e, 0x8b, 0x64, 0x82, 0x7c, 0xb8, 0x0d, 0xda, 0x49, 0x51, 0xd4, 0x58, 0x0d, 0x8f, 0xc0,
-	0xa0, 0xbc, 0xae, 0x3e, 0xae, 0xcf, 0x34, 0x41, 0x6d, 0x36, 0x28, 0x72, 0x43, 0xb3, 0x24, 0x8f,
-	0xa0, 0x3b, 0x4f, 0x79, 0x2c, 0x0f, 0xb9, 0x75, 0x38, 0xb0, 0x37, 0x37, 0x79, 0x95, 0xf2, 0x98,
-	0xc9, 0xd2, 0xf0, 0x53, 0x17, 0x7a, 0x52, 0x72, 0x0d, 0x2b, 0xff, 0x84, 0xc9, 0x3b, 0xd8, 0x4e,
-	0xb9, 0xa8, 0xc3, 0x0a, 0x17, 0xd6, 0x17, 0x7d, 0x4f, 0xd9, 0x37, 0x0e, 0x9f, 0xdb, 0x45, 0x95,
-	0xd8, 0x51, 0x19, 0xcd, 0x2e, 0xd1, 0x6e, 0x3a, 0x62, 0xe7, 0x45, 0x8c, 0x99, 0x7d, 0xc1, 0x43,
-	0x5c, 0xe1, 0x6c, 0x59, 0x37, 0x8a, 0xab, 0x27, 0xb6, 0xcb, 0x45, 0x5d, 0x2d, 0x67, 0x4d, 0xc8,
-	0x70, 0xb1, 0x44, 0x51, 0x3b, 0x1d, 0xa6, 0x37, 0x36, 0x86, 0x0b, 0xf2, 0x01, 0xfa, 0x6b, 0xb1,
-	0x28, 0xad, 0xaf, 0xad, 0xf9, 0xc5, 0xff, 0x98, 0x45, 0x59, 0x70, 0x81, 0x4e, 0x87, 0x6d, 0xb7,
-	0x6a, 0x51, 0x12, 0x07, 0x7a, 0x98, 0x61, 0x2e, 0xac, 0x6f, 0xad, 0xf7, 0xf1, 0x0d, 0xbd, 0x34,
-	0xc3, 0x1c, 0x79, 0x2d, 0x9c, 0x0e, 0x6b, 0x05, 0xe4, 0x3d, 0x18, 0x59, 0x91, 0x84, 0xc8, 0xeb,
-	0x2a, 0x45, 0x61, 0x7d, 0x6f, 0x7d, 0xcf, 0x6e, 0xe8, 0x9b, 0x14, 0x89, 0x6c, 0xb4, 0x3d, 0x49,
-	0xe5, 0xe5, 0x21, 0x6b, 0x13, 0x29, 0x0a, 0x72, 0x00, 0xda, 0xa5, 0x1c, 0xa2, 0xf5, 0xa3, 0x95,
-	0xee, 0x5c, 0xb7, 0xbf, 0x1d, 0xae, 0xd3, 0x61, 0x6b, 0xa2, 0x61, 0x2f, 0xe4, 0xfc, 0xad, 0x9f,
-	0x7f, 0xb3, 0xed, 0xbb, 0x68, 0xd8, 0x96, 0x20, 0xf7, 0xa1, 0x5f, 0xa7, 0x39, 0x8a, 0x3a, 0xca,
-	0x4b, 0xf9, 0x0a, 0x54, 0xf6, 0x3b, 0x71, 0xd4, 0x03, 0x35, 0x17, 0xc9, 0xc1, 0x67, 0x05, 0xba,
-	0xcd, 0x90, 0x89, 0x01, 0xba, 0xeb, 0x9d, 0x8d, 0x26, 0xee, 0xd8, 0xec, 0x90, 0xbb, 0x70, 0xdb,
-	0xf5, 0xfc, 0x80, 0x9d, 0x1e, 0x07, 0xee, 0xd4, 0x0b, 0x19, 0x7d, 0x7b, 0x4a, 0xfd, 0xc0, 0x54,
-	0x88, 0x05, 0x77, 0xfe, 0x2c, 0xf8, 0x6f, 0xa6, 0x9e, 0x4f, 0xcd, 0x2d, 0xb2, 0x0b, 0x83, 0xf1,
-	0x28, 0x18, 0x85, 0x8c, 0x1e, 0x53, 0xf7, 0x8c, 0x8e, 0x4d, 0x95, 0x0c, 0xa0, 0x2f, 0x53, 0x3e,
-	0xf5, 0x02, 0xb3, 0x4b, 0x76, 0xc0, 0x98, 0x4c, 0x5f, 0x86, 0xd4, 0x0b, 0x98, 0x4b, 0x7d, 0xb3,
-	0x47, 0x00, 0x34, 0x87, 0x8e, 0xc6, 0x94, 0x99, 0x5a, 0xb3, 0x3e, 0x99, 0x4e, 0x03, 0xca, 0x4c,
-	0xfd, 0x5c, 0x93, 0x1f, 0xea, 0xe9, 0xaf, 0x00, 0x00, 0x00, 0xff, 0xff, 0xc8, 0x2f, 0xbd, 0x8f,
-	0x7d, 0x03, 0x00, 0x00,
+	type x struct{}
+	out := protoimpl.TypeBuilder{
+		File: protoimpl.DescBuilder{
+			GoPackagePath: reflect.TypeOf(x{}).PkgPath(),
+			RawDescriptor: file_session_proto_rawDesc,
+			NumEnums:      1,
+			NumMessages:   4,
+			NumExtensions: 0,
+			NumServices:   0,
+		},
+		GoTypes:           file_session_proto_goTypes,
+		DependencyIndexes: file_session_proto_depIdxs,
+		EnumInfos:         file_session_proto_enumTypes,
+		MessageInfos:      file_session_proto_msgTypes,
+	}.Build()
+	File_session_proto = out.File
+	file_session_proto_rawDesc = nil
+	file_session_proto_goTypes = nil
+	file_session_proto_depIdxs = nil
 }
diff --git a/sdks/go/pkg/beam/io/pubsubio/v1/gen.go b/sdks/go/pkg/beam/io/pubsubio/v1/gen.go
index 55191112ce7..35b595e1522 100644
--- a/sdks/go/pkg/beam/io/pubsubio/v1/gen.go
+++ b/sdks/go/pkg/beam/io/pubsubio/v1/gen.go
@@ -15,7 +15,7 @@
 
 package v1
 
-//go:generate protoc -I . v1.proto --go_out=.
+//go:generate protoc -I . v1.proto --go_out=../../../../../../../../../../
 
 // PubSubPayloadURN is the URN of the pubsub proto payload.
 const PubSubPayloadURN = "beam:go:payload:pubsub:v1"
diff --git a/sdks/go/pkg/beam/io/pubsubio/v1/v1.pb.go b/sdks/go/pkg/beam/io/pubsubio/v1/v1.pb.go
index e398a09d1ed..bbf071acf3d 100644
--- a/sdks/go/pkg/beam/io/pubsubio/v1/v1.pb.go
+++ b/sdks/go/pkg/beam/io/pubsubio/v1/v1.pb.go
@@ -1,31 +1,44 @@
-// Code generated by protoc-gen-go. DO NOT EDIT.
-// source: v1.proto
+//
+// Licensed to the Apache Software Foundation (ASF) under one
+// or more contributor license agreements.  See the NOTICE file
+// distributed with this work for additional information
+// regarding copyright ownership.  The ASF licenses this file
+// to you under the Apache License, Version 2.0 (the
+// "License"); you may not use this file except in compliance
+// with the License.  You may obtain a copy of the License at
+//
+//     http://www.apache.org/licenses/LICENSE-2.0
+//
+// Unless required by applicable law or agreed to in writing, software
+// distributed under the License is distributed on an "AS IS" BASIS,
+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+// See the License for the specific language governing permissions and
+// limitations under the License.
 
-/*
-Package v1 is a generated protocol buffer package.
+//
+// Protocol Buffers describing pubsub payload (v1) to pass to beam.External.
 
-It is generated from these files:
-	v1.proto
+// Code generated by protoc-gen-go. DO NOT EDIT.
+// versions:
+// 	protoc-gen-go v1.25.0-devel
+// 	protoc        v3.13.0
+// source: v1.proto
 
-It has these top-level messages:
-	PubSubPayload
-*/
 package v1
 
-import proto "github.com/golang/protobuf/proto"
-import fmt "fmt"
-import math "math"
-
-// Reference imports to suppress errors if they are not otherwise used.
-var _ = proto.Marshal
-var _ = fmt.Errorf
-var _ = math.Inf
+import (
+	protoreflect "google.golang.org/protobuf/reflect/protoreflect"
+	protoimpl "google.golang.org/protobuf/runtime/protoimpl"
+	reflect "reflect"
+	sync "sync"
+)
 
-// This is a compile-time assertion to ensure that this generated file
-// is compatible with the proto package it is being compiled against.
-// A compilation error at this line likely means your copy of the
-// proto package needs to be updated.
-const _ = proto.ProtoPackageIsVersion2 // please upgrade the proto package
+const (
+	// Verify that this generated code is sufficiently up-to-date.
+	_ = protoimpl.EnforceVersion(20 - protoimpl.MinVersion)
+	// Verify that runtime/protoimpl is sufficiently up-to-date.
+	_ = protoimpl.EnforceVersion(protoimpl.MaxVersion - 20)
+)
 
 type PubSubPayload_Op int32
 
@@ -35,100 +48,231 @@ const (
 	PubSubPayload_WRITE   PubSubPayload_Op = 2
 )
 
-var PubSubPayload_Op_name = map[int32]string{
-	0: "INVALID",
-	1: "READ",
-	2: "WRITE",
-}
-var PubSubPayload_Op_value = map[string]int32{
-	"INVALID": 0,
-	"READ":    1,
-	"WRITE":   2,
+// Enum value maps for PubSubPayload_Op.
+var (
+	PubSubPayload_Op_name = map[int32]string{
+		0: "INVALID",
+		1: "READ",
+		2: "WRITE",
+	}
+	PubSubPayload_Op_value = map[string]int32{
+		"INVALID": 0,
+		"READ":    1,
+		"WRITE":   2,
+	}
+)
+
+func (x PubSubPayload_Op) Enum() *PubSubPayload_Op {
+	p := new(PubSubPayload_Op)
+	*p = x
+	return p
 }
 
 func (x PubSubPayload_Op) String() string {
-	return proto.EnumName(PubSubPayload_Op_name, int32(x))
+	return protoimpl.X.EnumStringOf(x.Descriptor(), protoreflect.EnumNumber(x))
+}
+
+func (PubSubPayload_Op) Descriptor() protoreflect.EnumDescriptor {
+	return file_v1_proto_enumTypes[0].Descriptor()
+}
+
+func (PubSubPayload_Op) Type() protoreflect.EnumType {
+	return &file_v1_proto_enumTypes[0]
+}
+
+func (x PubSubPayload_Op) Number() protoreflect.EnumNumber {
+	return protoreflect.EnumNumber(x)
+}
+
+// Deprecated: Use PubSubPayload_Op.Descriptor instead.
+func (PubSubPayload_Op) EnumDescriptor() ([]byte, []int) {
+	return file_v1_proto_rawDescGZIP(), []int{0, 0}
 }
-func (PubSubPayload_Op) EnumDescriptor() ([]byte, []int) { return fileDescriptor0, []int{0, 0} }
 
 type PubSubPayload struct {
-	Op                 PubSubPayload_Op `protobuf:"varint,1,opt,name=op,enum=v1.PubSubPayload_Op" json:"op,omitempty"`
-	Topic              string           `protobuf:"bytes,2,opt,name=Topic" json:"Topic,omitempty"`
-	Subscription       string           `protobuf:"bytes,3,opt,name=Subscription" json:"Subscription,omitempty"`
-	IdAttribute        string           `protobuf:"bytes,4,opt,name=IdAttribute" json:"IdAttribute,omitempty"`
-	TimestampAttribute string           `protobuf:"bytes,5,opt,name=TimestampAttribute" json:"TimestampAttribute,omitempty"`
-	WithAttributes     bool             `protobuf:"varint,6,opt,name=WithAttributes" json:"WithAttributes,omitempty"`
-}
-
-func (m *PubSubPayload) Reset()                    { *m = PubSubPayload{} }
-func (m *PubSubPayload) String() string            { return proto.CompactTextString(m) }
-func (*PubSubPayload) ProtoMessage()               {}
-func (*PubSubPayload) Descriptor() ([]byte, []int) { return fileDescriptor0, []int{0} }
-
-func (m *PubSubPayload) GetOp() PubSubPayload_Op {
-	if m != nil {
-		return m.Op
+	state         protoimpl.MessageState
+	sizeCache     protoimpl.SizeCache
+	unknownFields protoimpl.UnknownFields
+
+	Op                 PubSubPayload_Op `protobuf:"varint,1,opt,name=op,proto3,enum=org.apache.beam.sdks.go.pkg.beam.io.pubsubio.v1.PubSubPayload_Op" json:"op,omitempty"`
+	Topic              string           `protobuf:"bytes,2,opt,name=Topic,proto3" json:"Topic,omitempty"`
+	Subscription       string           `protobuf:"bytes,3,opt,name=Subscription,proto3" json:"Subscription,omitempty"`
+	IdAttribute        string           `protobuf:"bytes,4,opt,name=IdAttribute,proto3" json:"IdAttribute,omitempty"`
+	TimestampAttribute string           `protobuf:"bytes,5,opt,name=TimestampAttribute,proto3" json:"TimestampAttribute,omitempty"`
+	WithAttributes     bool             `protobuf:"varint,6,opt,name=WithAttributes,proto3" json:"WithAttributes,omitempty"`
+}
+
+func (x *PubSubPayload) Reset() {
+	*x = PubSubPayload{}
+	if protoimpl.UnsafeEnabled {
+		mi := &file_v1_proto_msgTypes[0]
+		ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
+		ms.StoreMessageInfo(mi)
+	}
+}
+
+func (x *PubSubPayload) String() string {
+	return protoimpl.X.MessageStringOf(x)
+}
+
+func (*PubSubPayload) ProtoMessage() {}
+
+func (x *PubSubPayload) ProtoReflect() protoreflect.Message {
+	mi := &file_v1_proto_msgTypes[0]
+	if protoimpl.UnsafeEnabled && x != nil {
+		ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
+		if ms.LoadMessageInfo() == nil {
+			ms.StoreMessageInfo(mi)
+		}
+		return ms
+	}
+	return mi.MessageOf(x)
+}
+
+// Deprecated: Use PubSubPayload.ProtoReflect.Descriptor instead.
+func (*PubSubPayload) Descriptor() ([]byte, []int) {
+	return file_v1_proto_rawDescGZIP(), []int{0}
+}
+
+func (x *PubSubPayload) GetOp() PubSubPayload_Op {
+	if x != nil {
+		return x.Op
 	}
 	return PubSubPayload_INVALID
 }
 
-func (m *PubSubPayload) GetTopic() string {
-	if m != nil {
-		return m.Topic
+func (x *PubSubPayload) GetTopic() string {
+	if x != nil {
+		return x.Topic
 	}
 	return ""
 }
 
-func (m *PubSubPayload) GetSubscription() string {
-	if m != nil {
-		return m.Subscription
+func (x *PubSubPayload) GetSubscription() string {
+	if x != nil {
+		return x.Subscription
 	}
 	return ""
 }
 
-func (m *PubSubPayload) GetIdAttribute() string {
-	if m != nil {
-		return m.IdAttribute
+func (x *PubSubPayload) GetIdAttribute() string {
+	if x != nil {
+		return x.IdAttribute
 	}
 	return ""
 }
 
-func (m *PubSubPayload) GetTimestampAttribute() string {
-	if m != nil {
-		return m.TimestampAttribute
+func (x *PubSubPayload) GetTimestampAttribute() string {
+	if x != nil {
+		return x.TimestampAttribute
 	}
 	return ""
 }
 
-func (m *PubSubPayload) GetWithAttributes() bool {
-	if m != nil {
-		return m.WithAttributes
+func (x *PubSubPayload) GetWithAttributes() bool {
+	if x != nil {
+		return x.WithAttributes
 	}
 	return false
 }
 
-func init() {
-	proto.RegisterType((*PubSubPayload)(nil), "v1.PubSubPayload")
-	proto.RegisterEnum("v1.PubSubPayload_Op", PubSubPayload_Op_name, PubSubPayload_Op_value)
-}
-
-func init() { proto.RegisterFile("v1.proto", fileDescriptor0) }
-
-var fileDescriptor0 = []byte{
-	// 226 bytes of a gzipped FileDescriptorProto
-	0x1f, 0x8b, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0xff, 0x6c, 0x90, 0x41, 0x4b, 0xc3, 0x30,
-	0x18, 0x86, 0x4d, 0x5c, 0x67, 0xf7, 0x4d, 0x47, 0xf9, 0xd8, 0x21, 0xc7, 0x52, 0x64, 0xf4, 0x14,
-	0xa8, 0xfe, 0x82, 0xc2, 0x76, 0x08, 0x88, 0x1b, 0x59, 0x71, 0xe7, 0x66, 0x1b, 0x18, 0x70, 0xe6,
-	0xa3, 0x4d, 0x0a, 0xfe, 0x0c, 0xff, 0xb1, 0x10, 0x41, 0x9d, 0xec, 0xf8, 0x3e, 0xcf, 0x73, 0x7a,
-	0x21, 0x1d, 0x2a, 0x49, 0x9d, 0xf3, 0x0e, 0xf9, 0x50, 0x15, 0x9f, 0x1c, 0xee, 0x36, 0xc1, 0x6c,
-	0x83, 0xd9, 0xb4, 0x1f, 0x6f, 0xae, 0x3d, 0xe0, 0x3d, 0x70, 0x47, 0x82, 0xe5, 0xac, 0x9c, 0x3d,
-	0xcc, 0xe5, 0x50, 0xc9, 0x33, 0x2d, 0xd7, 0xa4, 0xb9, 0x23, 0x9c, 0x43, 0xd2, 0x38, 0xb2, 0x7b,
-	0xc1, 0x73, 0x56, 0x4e, 0xf4, 0xf7, 0xc0, 0x02, 0x6e, 0xb7, 0xc1, 0xf4, 0xfb, 0xce, 0x92, 0xb7,
-	0xee, 0x5d, 0x5c, 0x47, 0x79, 0xc6, 0x30, 0x87, 0xa9, 0x3a, 0xd4, 0xde, 0x77, 0xd6, 0x04, 0x7f,
-	0x14, 0xa3, 0x98, 0xfc, 0x45, 0x28, 0x01, 0x1b, 0x7b, 0x3a, 0xf6, 0xbe, 0x3d, 0xd1, 0x6f, 0x98,
-	0xc4, 0xf0, 0x82, 0xc1, 0x05, 0xcc, 0x76, 0xd6, 0xbf, 0xfe, 0x80, 0x5e, 0x8c, 0x73, 0x56, 0xa6,
-	0xfa, 0x1f, 0x2d, 0x16, 0xc0, 0xd7, 0x84, 0x53, 0xb8, 0x51, 0xcf, 0x2f, 0xf5, 0x93, 0x5a, 0x66,
-	0x57, 0x98, 0xc2, 0x48, 0xaf, 0xea, 0x65, 0xc6, 0x70, 0x02, 0xc9, 0x4e, 0xab, 0x66, 0x95, 0x71,
-	0x33, 0x8e, 0xf7, 0x3c, 0x7e, 0x05, 0x00, 0x00, 0xff, 0xff, 0x3a, 0x1b, 0xdf, 0x4b, 0x2a, 0x01,
-	0x00, 0x00,
+var File_v1_proto protoreflect.FileDescriptor
+
+var file_v1_proto_rawDesc = []byte{
+	0x0a, 0x08, 0x76, 0x31, 0x2e, 0x70, 0x72, 0x6f, 0x74, 0x6f, 0x12, 0x2f, 0x6f, 0x72, 0x67, 0x2e,
+	0x61, 0x70, 0x61, 0x63, 0x68, 0x65, 0x2e, 0x62, 0x65, 0x61, 0x6d, 0x2e, 0x73, 0x64, 0x6b, 0x73,
+	0x2e, 0x67, 0x6f, 0x2e, 0x70, 0x6b, 0x67, 0x2e, 0x62, 0x65, 0x61, 0x6d, 0x2e, 0x69, 0x6f, 0x2e,
+	0x70, 0x75, 0x62, 0x73, 0x75, 0x62, 0x69, 0x6f, 0x2e, 0x76, 0x31, 0x22, 0xbe, 0x02, 0x0a, 0x0d,
+	0x50, 0x75, 0x62, 0x53, 0x75, 0x62, 0x50, 0x61, 0x79, 0x6c, 0x6f, 0x61, 0x64, 0x12, 0x51, 0x0a,
+	0x02, 0x6f, 0x70, 0x18, 0x01, 0x20, 0x01, 0x28, 0x0e, 0x32, 0x41, 0x2e, 0x6f, 0x72, 0x67, 0x2e,
+	0x61, 0x70, 0x61, 0x63, 0x68, 0x65, 0x2e, 0x62, 0x65, 0x61, 0x6d, 0x2e, 0x73, 0x64, 0x6b, 0x73,
+	0x2e, 0x67, 0x6f, 0x2e, 0x70, 0x6b, 0x67, 0x2e, 0x62, 0x65, 0x61, 0x6d, 0x2e, 0x69, 0x6f, 0x2e,
+	0x70, 0x75, 0x62, 0x73, 0x75, 0x62, 0x69, 0x6f, 0x2e, 0x76, 0x31, 0x2e, 0x50, 0x75, 0x62, 0x53,
+	0x75, 0x62, 0x50, 0x61, 0x79, 0x6c, 0x6f, 0x61, 0x64, 0x2e, 0x4f, 0x70, 0x52, 0x02, 0x6f, 0x70,
+	0x12, 0x14, 0x0a, 0x05, 0x54, 0x6f, 0x70, 0x69, 0x63, 0x18, 0x02, 0x20, 0x01, 0x28, 0x09, 0x52,
+	0x05, 0x54, 0x6f, 0x70, 0x69, 0x63, 0x12, 0x22, 0x0a, 0x0c, 0x53, 0x75, 0x62, 0x73, 0x63, 0x72,
+	0x69, 0x70, 0x74, 0x69, 0x6f, 0x6e, 0x18, 0x03, 0x20, 0x01, 0x28, 0x09, 0x52, 0x0c, 0x53, 0x75,
+	0x62, 0x73, 0x63, 0x72, 0x69, 0x70, 0x74, 0x69, 0x6f, 0x6e, 0x12, 0x20, 0x0a, 0x0b, 0x49, 0x64,
+	0x41, 0x74, 0x74, 0x72, 0x69, 0x62, 0x75, 0x74, 0x65, 0x18, 0x04, 0x20, 0x01, 0x28, 0x09, 0x52,
+	0x0b, 0x49, 0x64, 0x41, 0x74, 0x74, 0x72, 0x69, 0x62, 0x75, 0x74, 0x65, 0x12, 0x2e, 0x0a, 0x12,
+	0x54, 0x69, 0x6d, 0x65, 0x73, 0x74, 0x61, 0x6d, 0x70, 0x41, 0x74, 0x74, 0x72, 0x69, 0x62, 0x75,
+	0x74, 0x65, 0x18, 0x05, 0x20, 0x01, 0x28, 0x09, 0x52, 0x12, 0x54, 0x69, 0x6d, 0x65, 0x73, 0x74,
+	0x61, 0x6d, 0x70, 0x41, 0x74, 0x74, 0x72, 0x69, 0x62, 0x75, 0x74, 0x65, 0x12, 0x26, 0x0a, 0x0e,
+	0x57, 0x69, 0x74, 0x68, 0x41, 0x74, 0x74, 0x72, 0x69, 0x62, 0x75, 0x74, 0x65, 0x73, 0x18, 0x06,
+	0x20, 0x01, 0x28, 0x08, 0x52, 0x0e, 0x57, 0x69, 0x74, 0x68, 0x41, 0x74, 0x74, 0x72, 0x69, 0x62,
+	0x75, 0x74, 0x65, 0x73, 0x22, 0x26, 0x0a, 0x02, 0x4f, 0x70, 0x12, 0x0b, 0x0a, 0x07, 0x49, 0x4e,
+	0x56, 0x41, 0x4c, 0x49, 0x44, 0x10, 0x00, 0x12, 0x08, 0x0a, 0x04, 0x52, 0x45, 0x41, 0x44, 0x10,
+	0x01, 0x12, 0x09, 0x0a, 0x05, 0x57, 0x52, 0x49, 0x54, 0x45, 0x10, 0x02, 0x42, 0x3b, 0x5a, 0x39,
+	0x67, 0x69, 0x74, 0x68, 0x75, 0x62, 0x2e, 0x63, 0x6f, 0x6d, 0x2f, 0x61, 0x70, 0x61, 0x63, 0x68,
+	0x65, 0x2f, 0x62, 0x65, 0x61, 0x6d, 0x2f, 0x73, 0x64, 0x6b, 0x73, 0x2f, 0x67, 0x6f, 0x2f, 0x70,
+	0x6b, 0x67, 0x2f, 0x62, 0x65, 0x61, 0x6d, 0x2f, 0x69, 0x6f, 0x2f, 0x70, 0x75, 0x62, 0x73, 0x75,
+	0x62, 0x69, 0x6f, 0x2f, 0x76, 0x31, 0x3b, 0x76, 0x31, 0x62, 0x06, 0x70, 0x72, 0x6f, 0x74, 0x6f,
+	0x33,
+}
+
+var (
+	file_v1_proto_rawDescOnce sync.Once
+	file_v1_proto_rawDescData = file_v1_proto_rawDesc
+)
+
+func file_v1_proto_rawDescGZIP() []byte {
+	file_v1_proto_rawDescOnce.Do(func() {
+		file_v1_proto_rawDescData = protoimpl.X.CompressGZIP(file_v1_proto_rawDescData)
+	})
+	return file_v1_proto_rawDescData
+}
+
+var file_v1_proto_enumTypes = make([]protoimpl.EnumInfo, 1)
+var file_v1_proto_msgTypes = make([]protoimpl.MessageInfo, 1)
+var file_v1_proto_goTypes = []interface{}{
+	(PubSubPayload_Op)(0), // 0: org.apache.beam.sdks.go.pkg.beam.io.pubsubio.v1.PubSubPayload.Op
+	(*PubSubPayload)(nil), // 1: org.apache.beam.sdks.go.pkg.beam.io.pubsubio.v1.PubSubPayload
+}
+var file_v1_proto_depIdxs = []int32{
+	0, // 0: org.apache.beam.sdks.go.pkg.beam.io.pubsubio.v1.PubSubPayload.op:type_name -> org.apache.beam.sdks.go.pkg.beam.io.pubsubio.v1.PubSubPayload.Op
+	1, // [1:1] is the sub-list for method output_type
+	1, // [1:1] is the sub-list for method input_type
+	1, // [1:1] is the sub-list for extension type_name
+	1, // [1:1] is the sub-list for extension extendee
+	0, // [0:1] is the sub-list for field type_name
+}
+
+func init() { file_v1_proto_init() }
+func file_v1_proto_init() {
+	if File_v1_proto != nil {
+		return
+	}
+	if !protoimpl.UnsafeEnabled {
+		file_v1_proto_msgTypes[0].Exporter = func(v interface{}, i int) interface{} {
+			switch v := v.(*PubSubPayload); i {
+			case 0:
+				return &v.state
+			case 1:
+				return &v.sizeCache
+			case 2:
+				return &v.unknownFields
+			default:
+				return nil
+			}
+		}
+	}
+	type x struct{}
+	out := protoimpl.TypeBuilder{
+		File: protoimpl.DescBuilder{
+			GoPackagePath: reflect.TypeOf(x{}).PkgPath(),
+			RawDescriptor: file_v1_proto_rawDesc,
+			NumEnums:      1,
+			NumMessages:   1,
+			NumExtensions: 0,
+			NumServices:   0,
+		},
+		GoTypes:           file_v1_proto_goTypes,
+		DependencyIndexes: file_v1_proto_depIdxs,
+		EnumInfos:         file_v1_proto_enumTypes,
+		MessageInfos:      file_v1_proto_msgTypes,
+	}.Build()
+	File_v1_proto = out.File
+	file_v1_proto_rawDesc = nil
+	file_v1_proto_goTypes = nil
+	file_v1_proto_depIdxs = nil
 }
diff --git a/sdks/go/pkg/beam/io/pubsubio/v1/v1.proto b/sdks/go/pkg/beam/io/pubsubio/v1/v1.proto
index e55930ed6ec..f2f779350de 100644
--- a/sdks/go/pkg/beam/io/pubsubio/v1/v1.proto
+++ b/sdks/go/pkg/beam/io/pubsubio/v1/v1.proto
@@ -21,7 +21,9 @@
  */
 syntax = "proto3";
 
-package v1;
+package org.apache.beam.sdks.go.pkg.beam.io.pubsubio.v1;
+
+option go_package = "github.com/apache/beam/sdks/go/pkg/beam/io/pubsubio/v1;v1";
 
 message PubSubPayload {
     enum Op {
