diff --git a/sdks/java/io/elasticsearch-tests/elasticsearch-tests-2/src/test/java/org/apache/beam/sdk/io/elasticsearch/ElasticsearchIOTest.java b/sdks/java/io/elasticsearch-tests/elasticsearch-tests-2/src/test/java/org/apache/beam/sdk/io/elasticsearch/ElasticsearchIOTest.java
index 28ffa0293ef..06298cd23b6 100644
--- a/sdks/java/io/elasticsearch-tests/elasticsearch-tests-2/src/test/java/org/apache/beam/sdk/io/elasticsearch/ElasticsearchIOTest.java
+++ b/sdks/java/io/elasticsearch-tests/elasticsearch-tests-2/src/test/java/org/apache/beam/sdk/io/elasticsearch/ElasticsearchIOTest.java
@@ -180,6 +180,6 @@ public class ElasticsearchIOTest implements Serializable {
         nonEmptySplits += 1;
       }
     }
-    assertEquals("Wrong number of empty splits", expectedNumSplits, nonEmptySplits);
+    assertEquals("Wrong number of non empty splits", expectedNumSplits, nonEmptySplits);
   }
 }
diff --git a/sdks/java/io/elasticsearch-tests/elasticsearch-tests-5/src/test/java/org/apache/beam/sdk/io/elasticsearch/ElasticsearchIOTest.java b/sdks/java/io/elasticsearch-tests/elasticsearch-tests-5/src/test/java/org/apache/beam/sdk/io/elasticsearch/ElasticsearchIOTest.java
index 362f0a888df..9a7eb07e0d3 100644
--- a/sdks/java/io/elasticsearch-tests/elasticsearch-tests-5/src/test/java/org/apache/beam/sdk/io/elasticsearch/ElasticsearchIOTest.java
+++ b/sdks/java/io/elasticsearch-tests/elasticsearch-tests-5/src/test/java/org/apache/beam/sdk/io/elasticsearch/ElasticsearchIOTest.java
@@ -179,6 +179,6 @@ public class ElasticsearchIOTest extends ESIntegTestCase implements Serializable
         nonEmptySplits += 1;
       }
     }
-    assertEquals("Wrong number of empty splits", expectedNumSources, nonEmptySplits);
+    assertEquals("Wrong number of non empty splits", expectedNumSources, nonEmptySplits);
   }
 }
diff --git a/sdks/java/io/elasticsearch-tests/elasticsearch-tests-common/pom.xml b/sdks/java/io/elasticsearch-tests/elasticsearch-tests-common/pom.xml
index 4381eeb09ef..17325291211 100644
--- a/sdks/java/io/elasticsearch-tests/elasticsearch-tests-common/pom.xml
+++ b/sdks/java/io/elasticsearch-tests/elasticsearch-tests-common/pom.xml
@@ -33,7 +33,6 @@
 
     <properties>
         <commons-io.version>1.3.2</commons-io.version>
-        <jna.version>4.1.0</jna.version>
         <log4j.version>2.6.2</log4j.version>
         <elasticsearch.client.rest.version>5.0.0</elasticsearch.client.rest.version>
         <httpcomponents.core.version>4.4.5</httpcomponents.core.version>
diff --git a/sdks/java/io/elasticsearch-tests/elasticsearch-tests-common/src/test/java/org/apache/beam/sdk/io/elasticsearch/ElasticSearchIOTestUtils.java b/sdks/java/io/elasticsearch-tests/elasticsearch-tests-common/src/test/java/org/apache/beam/sdk/io/elasticsearch/ElasticSearchIOTestUtils.java
index 2f6ac3ea8a9..142789bffc0 100644
--- a/sdks/java/io/elasticsearch-tests/elasticsearch-tests-common/src/test/java/org/apache/beam/sdk/io/elasticsearch/ElasticSearchIOTestUtils.java
+++ b/sdks/java/io/elasticsearch-tests/elasticsearch-tests-common/src/test/java/org/apache/beam/sdk/io/elasticsearch/ElasticSearchIOTestUtils.java
@@ -61,8 +61,11 @@ class ElasticSearchIOTestUtils {
         ElasticSearchIOTestUtils.createDocuments(
             numDocs, ElasticSearchIOTestUtils.InjectionMode.DO_NOT_INJECT_INVALID_DOCS);
     StringBuilder bulkRequest = new StringBuilder();
+    int i = 0;
     for (String document : data) {
-      bulkRequest.append(String.format("{ \"index\" : {} }%n%s%n", document));
+      bulkRequest.append(String.format(
+          "{ \"index\" : { \"_index\" : \"%s\", \"_type\" : \"%s\", \"_id\" : \"%d\" } }%n%s%n",
+          connectionConfiguration.getIndex(), connectionConfiguration.getType(), i++, document));
     }
     String endPoint = String.format("/%s/%s/_bulk", connectionConfiguration.getIndex(),
         connectionConfiguration.getType());
diff --git a/sdks/java/io/elasticsearch-tests/pom.xml b/sdks/java/io/elasticsearch-tests/pom.xml
index 4d947bef66d..a4a1e2a719f 100644
--- a/sdks/java/io/elasticsearch-tests/pom.xml
+++ b/sdks/java/io/elasticsearch-tests/pom.xml
@@ -35,7 +35,7 @@
         <commons-io.version>1.3.2</commons-io.version>
         <jna.version>4.1.0</jna.version>
         <log4j.version>2.6.2</log4j.version>
-        <elasticsearch.client.rest.version>5.0.0</elasticsearch.client.rest.version>
+        <elasticsearch.client.rest.version>5.4.0</elasticsearch.client.rest.version>
     </properties>
 
     <dependencies>
diff --git a/sdks/java/io/elasticsearch/pom.xml b/sdks/java/io/elasticsearch/pom.xml
index 6624c467116..4942d4f0f91 100644
--- a/sdks/java/io/elasticsearch/pom.xml
+++ b/sdks/java/io/elasticsearch/pom.xml
@@ -33,7 +33,7 @@
     <description>IO to read and write on Elasticsearch</description>
 
     <properties>
-        <elasticsearch.client.rest.version>5.0.0</elasticsearch.client.rest.version>
+        <elasticsearch.client.rest.version>5.4.0</elasticsearch.client.rest.version>
         <httpcomponents.core.version>4.4.5</httpcomponents.core.version>
         <httpcomponents.httpasyncclient.version>4.1.2</httpcomponents.httpasyncclient.version>
         <httpcomponents.httpclient.version>4.5.2</httpcomponents.httpclient.version>
