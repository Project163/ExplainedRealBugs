diff --git a/pom.xml b/pom.xml
index d9065a33dd7..718326407bd 100644
--- a/pom.xml
+++ b/pom.xml
@@ -1337,14 +1337,16 @@
                 <relocations>
                   <relocation>
                     <pattern>com.google.common</pattern>
+                    <!--suppress MavenModelInspection -->
                     <shadedPattern>
-                      org.apache.beam.${project.artifactId}.repackaged.com.google.common
+                      org.apache.${renderedArtifactId}.repackaged.com.google.common
                     </shadedPattern>
                   </relocation>
                   <relocation>
                     <pattern>com.google.thirdparty</pattern>
+                    <!--suppress MavenModelInspection -->
                     <shadedPattern>
-                      org.apache.beam.${project.artifactId}.repackaged.com.google.thirdparty
+                      org.apache.${renderedArtifactId}.repackaged.com.google.thirdparty
                     </shadedPattern>
                   </relocation>
                 </relocations>
@@ -1446,6 +1448,32 @@
             </filesets>
           </configuration>
         </plugin>
+
+        <plugin>
+          <groupId>org.codehaus.mojo</groupId>
+          <artifactId>build-helper-maven-plugin</artifactId>
+          <version>3.0.0</version>
+          <executions>
+            <execution>
+              <id>render-artifact-id</id>
+              <goals>
+                <goal>regex-properties</goal>
+              </goals>
+              <phase>prepare-package</phase>
+              <configuration>
+                <regexPropertySettings>
+                  <regexPropertySetting>
+                    <name>renderedArtifactId</name>
+                    <regex>[^A-Za-z0-9]</regex>
+                    <replacement>.</replacement>
+                    <value>${project.artifactId}</value>
+                    <failIfNoMatch>false</failIfNoMatch>
+                  </regexPropertySetting>
+                </regexPropertySettings>
+              </configuration>
+            </execution>
+          </executions>
+        </plugin>
       </plugins>
     </pluginManagement>
 
@@ -1506,6 +1534,10 @@
           </dependency>
         </dependencies>
       </plugin>
+      <plugin>
+        <groupId>org.codehaus.mojo</groupId>
+        <artifactId>build-helper-maven-plugin</artifactId>
+      </plugin>
       <plugin>
         <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-shade-plugin</artifactId>
