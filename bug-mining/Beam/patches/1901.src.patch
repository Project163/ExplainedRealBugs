diff --git a/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/VoidCoder.java b/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/VoidCoder.java
index 1db061959bb..3be962727b7 100644
--- a/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/VoidCoder.java
+++ b/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/VoidCoder.java
@@ -17,9 +17,11 @@
  */
 package org.apache.beam.sdk.coders;
 
+import java.io.IOException;
 import java.io.InputStream;
 import java.io.OutputStream;
 import javax.annotation.Nullable;
+import org.apache.beam.sdk.util.VarInt;
 import org.apache.beam.sdk.values.TypeDescriptor;
 
 /** A {@link Coder} for {@link Void}. Uses zero bytes per {@link Void}. */
@@ -38,14 +40,17 @@ public class VoidCoder extends AtomicCoder<Void> {
   private VoidCoder() {}
 
   @Override
-  public void encode(Void value, OutputStream outStream) {
-    // Nothing to write!
+  public void encode(Void value, OutputStream outStream) throws IOException {
+    VarInt.encode(0, outStream);
   }
 
   @Override
   @Nullable
-  public Void decode(InputStream inStream) {
-    // Nothing to read!
+  public Void decode(InputStream inStream) throws IOException {
+    int size = VarInt.decodeInt(inStream);
+    if (size != 0) {
+      throw new CoderException("Unexpected non-zero encoded size for VoidCoder: " + size);
+    }
     return null;
   }
 
@@ -74,6 +79,7 @@ public class VoidCoder extends AtomicCoder<Void> {
 
   @Override
   protected long getEncodedElementByteSize(Void value) throws Exception {
-    return 0;
+    int size = 0;
+    return VarInt.getLength(size);
   }
 }
diff --git a/sdks/java/harness/src/main/java/org/apache/beam/fn/harness/state/FnApiStateAccessor.java b/sdks/java/harness/src/main/java/org/apache/beam/fn/harness/state/FnApiStateAccessor.java
index 7f4be6beb15..69f03cf68be 100644
--- a/sdks/java/harness/src/main/java/org/apache/beam/fn/harness/state/FnApiStateAccessor.java
+++ b/sdks/java/harness/src/main/java/org/apache/beam/fn/harness/state/FnApiStateAccessor.java
@@ -128,7 +128,7 @@ public class FnApiStateAccessor<K> implements SideInputReader, StateBinder {
       @Override
       public ResultT get() {
         ArgT currentArg = arg.get();
-        if (currentArg != memoizedArg) {
+        if (currentArg != memoizedArg || currentArg == null) {
           memoizedResult = f.apply(this.memoizedArg = currentArg);
         }
         return memoizedResult;
