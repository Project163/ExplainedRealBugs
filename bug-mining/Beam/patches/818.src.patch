diff --git a/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/MapCoder.java b/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/MapCoder.java
index 24052ed501a..4ca3fcc8e05 100644
--- a/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/MapCoder.java
+++ b/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/MapCoder.java
@@ -147,6 +147,25 @@ public class MapCoder<K, V> extends StructuredCoder<Map<K, V>> {
         this, "Ordering of entries in a Map may be non-deterministic.");
   }
 
+  @Override
+  public boolean consistentWithEquals() {
+    return keyCoder.consistentWithEquals() && valueCoder.consistentWithEquals();
+  }
+
+  @Override
+  public Object structuralValue(Map<K, V> value) {
+    if (consistentWithEquals()) {
+      return value;
+    } else {
+      Map<Object, Object> ret = Maps.newHashMapWithExpectedSize(value.size());
+      for (Map.Entry<K, V> entry : value.entrySet()) {
+        ret.put(
+            keyCoder.structuralValue(entry.getKey()), valueCoder.structuralValue(entry.getValue()));
+      }
+      return ret;
+    }
+  }
+
   @Override
   public void registerByteSizeObserver(Map<K, V> map, ElementByteSizeObserver observer)
       throws Exception {
diff --git a/sdks/java/core/src/test/java/org/apache/beam/sdk/coders/MapCoderTest.java b/sdks/java/core/src/test/java/org/apache/beam/sdk/coders/MapCoderTest.java
index 578b4b77371..f18f2b220b8 100644
--- a/sdks/java/core/src/test/java/org/apache/beam/sdk/coders/MapCoderTest.java
+++ b/sdks/java/core/src/test/java/org/apache/beam/sdk/coders/MapCoderTest.java
@@ -18,7 +18,9 @@
 package org.apache.beam.sdk.coders;
 
 import static org.hamcrest.Matchers.equalTo;
+import static org.junit.Assert.assertFalse;
 import static org.junit.Assert.assertThat;
+import static org.junit.Assert.assertTrue;
 
 import com.google.common.collect.ImmutableMap;
 import java.util.Arrays;
@@ -84,6 +86,25 @@ public class MapCoderTest {
     CoderUtils.encodeToBase64(TEST_CODER, null);
   }
 
+  @Test
+  public void testStructuralValueDecodeEncodeEqual() throws Exception {
+    MapCoder<byte[], Integer> coder = MapCoder.of(ByteArrayCoder.of(), VarIntCoder.of());
+    Map<byte[], Integer> value = Collections.singletonMap(new byte[] {1, 2, 3, 4}, 1);
+    CoderProperties.structuralValueDecodeEncodeEqual(coder, value);
+  }
+
+  @Test
+  public void testNotConsistentWithEquals() {
+    MapCoder<Integer, byte[]> coder = MapCoder.of(VarIntCoder.of(), ByteArrayCoder.of());
+    assertFalse(coder.consistentWithEquals());
+  }
+
+  @Test
+  public void testConsistentWithEquals() {
+    MapCoder<Integer, Integer> coder = MapCoder.of(VarIntCoder.of(), VarIntCoder.of());
+    assertTrue(coder.consistentWithEquals());
+  }
+
   @Test
   public void testEncodedTypeDescriptor() throws Exception {
     TypeDescriptor<Map<Integer, String>> typeDescriptor =
