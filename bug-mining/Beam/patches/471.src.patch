diff --git a/sdks/java/io/hadoop/jdk1.8-tests/build.gradle b/sdks/java/io/hadoop/jdk1.8-tests/build.gradle
index ffedc39e389..70d40c051bc 100644
--- a/sdks/java/io/hadoop/jdk1.8-tests/build.gradle
+++ b/sdks/java/io/hadoop/jdk1.8-tests/build.gradle
@@ -49,7 +49,11 @@ dependencies {
   shadow project(path: ":sdks:java:core", configuration: "shadow")
   shadow project(path: ":sdks:java:io:hadoop:input-format", configuration: "shadow")
   shadow library.java.slf4j_api
-  shadow "org.elasticsearch:elasticsearch-hadoop:$elastic_search_version"
+  shadow ("org.elasticsearch:elasticsearch-hadoop:$elastic_search_version") {
+    exclude group: "org.apache.spark", module: "spark-core_2.10"
+    exclude group: "org.apache.spark", module: "spark-streaming_2.10"
+    exclude group: "org.apache.spark", module: "spark-sql_2.10"
+  }
   shadow "com.fasterxml.jackson.module:jackson-module-scala_2.11:2.8.9"
   shadow library.java.commons_io_2x
   provided library.java.hadoop_common
diff --git a/sdks/java/io/hadoop/jdk1.8-tests/pom.xml b/sdks/java/io/hadoop/jdk1.8-tests/pom.xml
index f148f13bf5c..f096aa76cf0 100644
--- a/sdks/java/io/hadoop/jdk1.8-tests/pom.xml
+++ b/sdks/java/io/hadoop/jdk1.8-tests/pom.xml
@@ -236,6 +236,21 @@
       <groupId>org.elasticsearch</groupId>
       <artifactId>elasticsearch-hadoop</artifactId>
       <version>${elasticsearch.version}</version>
+      <scope>test</scope>
+      <exclusions>
+        <exclusion>
+          <groupId>org.apache.spark</groupId>
+          <artifactId>spark-core_2.10</artifactId>
+        </exclusion>
+        <exclusion>
+          <groupId>org.apache.spark</groupId>
+          <artifactId>spark-streaming_2.10</artifactId>
+        </exclusion>
+        <exclusion>
+          <groupId>org.apache.spark</groupId>
+          <artifactId>spark-sql_2.10</artifactId>
+        </exclusion>
+      </exclusions>
     </dependency>
     <dependency>
       <groupId>com.datastax.cassandra</groupId>
