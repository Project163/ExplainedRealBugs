diff --git a/sdks/python/apache_beam/io/restriction_trackers.py b/sdks/python/apache_beam/io/restriction_trackers.py
index 00cefee3031..ff7345f0807 100644
--- a/sdks/python/apache_beam/io/restriction_trackers.py
+++ b/sdks/python/apache_beam/io/restriction_trackers.py
@@ -88,7 +88,7 @@ class OffsetRestrictionTracker(RestrictionTracker):
   """
   def __init__(self, offset_range):
     # type: (OffsetRange) -> None
-    assert isinstance(offset_range, OffsetRange)
+    assert isinstance(offset_range, OffsetRange), offset_range
     self._range = offset_range
     self._current_position = None
     self._last_claim_attempt = None
diff --git a/sdks/python/apache_beam/runners/common.py b/sdks/python/apache_beam/runners/common.py
index 05d24876efb..745cbc15051 100644
--- a/sdks/python/apache_beam/runners/common.py
+++ b/sdks/python/apache_beam/runners/common.py
@@ -717,6 +717,14 @@ class PerWindowInvoker(DoFnInvoker):
 
     residuals = []
     if self.is_splittable:
+      if restriction is None:
+        # This may be a SDF invoked as an ordinary DoFn on runners that don't
+        # understand SDF.  See, e.g. BEAM-11472.
+        # In this case, processing the element is simply processing it against
+        # the entire initial restriction.
+        restriction = self.signature.initial_restriction_method.method_value(
+            windowed_value.value)
+
       with self.splitting_lock:
         self.current_windowed_value = windowed_value
         self.restriction = restriction
