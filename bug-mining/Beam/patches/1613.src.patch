diff --git a/runners/flink/job-server/flink_job_server.gradle b/runners/flink/job-server/flink_job_server.gradle
index 47f83d31bc9..26bdb0a2c8c 100644
--- a/runners/flink/job-server/flink_job_server.gradle
+++ b/runners/flink/job-server/flink_job_server.gradle
@@ -212,13 +212,14 @@ def addTestJavaJarCreator(String pyVersion) {
       exec {
         executable "sh"
         def options = [
+                "--runner FlinkRunner",
                 "--flink_job_server_jar ${shadowJar.archivePath}",
                 "--env_dir ${project.rootProject.buildDir}/gradleenv/${project.path.hashCode()}",
                 "--python_root_dir ${project.rootDir}/sdks/python",
                 "--python_version ${pyVersion}",
                 "--python_container_image apachebeam/python${pyVersion}_sdk:${project.sdk_version}",
         ]
-        args "-c", "../../job-server/test_pipeline_jar.sh ${options.join(' ')}"
+        args "-c", "../../../portability/test_pipeline_jar.sh ${options.join(' ')}"
       }
     }
   }
diff --git a/runners/flink/job-server/test_pipeline_jar.sh b/runners/portability/test_pipeline_jar.sh
similarity index 87%
rename from runners/flink/job-server/test_pipeline_jar.sh
rename to runners/portability/test_pipeline_jar.sh
index 9db6b79f5c7..d202c1e25e4 100755
--- a/runners/flink/job-server/test_pipeline_jar.sh
+++ b/runners/portability/test_pipeline_jar.sh
@@ -28,6 +28,16 @@ case $key in
         shift # past argument
         shift # past value
         ;;
+    --spark_job_server_jar)
+        SPARK_JOB_SERVER_JAR="$2"
+        shift # past argument
+        shift # past value
+        ;;
+    --runner)
+        RUNNER="$2"
+        shift # past argument
+        shift # past value
+        ;;
     --env_dir)
         ENV_DIR="$2"
         shift # past argument
@@ -96,11 +106,19 @@ result = pipeline.run()
 result.wait_until_finish()
 "
 
+if [[ "$RUNNER" -eq "FlinkRunner" ]]; then
+  INPUT_JAR_ARG="flink_job_server_jar"
+  INPUT_JAR_VAL="$FLINK_JOB_SERVER_JAR"
+else
+  INPUT_JAR_ARG="spark_job_server_jar"
+  INPUT_JAR_VAL="$SPARK_JOB_SERVER_JAR"
+fi
+
 # Create the jar
 OUTPUT_JAR=flink-test-$(date +%Y%m%d-%H%M%S).jar
 (python -c "$PIPELINE_PY" \
-  --runner FlinkRunner \
-  --flink_job_server_jar $FLINK_JOB_SERVER_JAR \
+  --runner "$RUNNER" \
+  --"$INPUT_JAR_ARG" "$INPUT_JAR_VAL" \
   --output_executable_path $OUTPUT_JAR \
   --parallelism 1 \
   --sdk_worker_parallelism 1 \
diff --git a/runners/spark/job-server/build.gradle b/runners/spark/job-server/build.gradle
index 7abae9da9a5..63b6fd6b17d 100644
--- a/runners/spark/job-server/build.gradle
+++ b/runners/spark/job-server/build.gradle
@@ -159,13 +159,14 @@ def addTestJavaJarCreator(String pyVersion) {
       exec {
         executable "sh"
         def options = [
+                "--runner SparkRunner",
                 "--spark_job_server_jar ${shadowJar.archivePath}",
                 "--env_dir ${project.rootProject.buildDir}/gradleenv/${project.path.hashCode()}",
                 "--python_root_dir ${project.rootDir}/sdks/python",
                 "--python_version ${pyVersion}",
                 "--python_container_image apachebeam/python${pyVersion}_sdk:${project.sdk_version}",
         ]
-        args "-c", "./test_spark_pipeline_jar.sh ${options.join(' ')}"
+        args "-c", "../../portability/test_pipeline_jar.sh ${options.join(' ')}"
       }
     }
   }
