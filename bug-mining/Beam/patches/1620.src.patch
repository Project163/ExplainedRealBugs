diff --git a/buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy b/buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy
index e6b10f6ed89..50c1828eb85 100644
--- a/buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy
+++ b/buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy
@@ -1724,7 +1724,8 @@ class BeamModulePlugin implements Plugin<Project> {
       def beamJavaTestPipelineOptions = [
         "--runner=PortableRunner",
         "--jobEndpoint=${config.jobEndpoint}",
-        "--environmentCacheMillis=10000"
+        "--environmentCacheMillis=10000",
+        "--experiments=beam_fn_api",
       ]
       beamJavaTestPipelineOptions.addAll(config.pipelineOpts)
       ['Java': javaPort, 'Python': pythonPort].each { sdk, port ->
diff --git a/runners/core-construction-java/src/test/java/org/apache/beam/runners/core/construction/ValidateRunnerXlangTest.java b/runners/core-construction-java/src/test/java/org/apache/beam/runners/core/construction/ValidateRunnerXlangTest.java
index f80db19a86c..3a0f60baf30 100644
--- a/runners/core-construction-java/src/test/java/org/apache/beam/runners/core/construction/ValidateRunnerXlangTest.java
+++ b/runners/core-construction-java/src/test/java/org/apache/beam/runners/core/construction/ValidateRunnerXlangTest.java
@@ -44,7 +44,6 @@ import org.apache.beam.vendor.grpc.v1p26p0.com.google.protobuf.ByteString;
 import org.apache.beam.vendor.grpc.v1p26p0.io.grpc.ConnectivityState;
 import org.apache.beam.vendor.grpc.v1p26p0.io.grpc.ManagedChannel;
 import org.apache.beam.vendor.grpc.v1p26p0.io.grpc.ManagedChannelBuilder;
-import org.apache.beam.vendor.guava.v26_0_jre.com.google.common.collect.ImmutableList;
 import org.apache.beam.vendor.guava.v26_0_jre.com.google.common.collect.Iterables;
 import org.junit.After;
 import org.junit.Before;
@@ -85,10 +84,8 @@ public class ValidateRunnerXlangTest implements Serializable {
 
   @Before
   public void setUp() {
-    testPipeline
-        .getOptions()
-        .as(ExperimentalOptions.class)
-        .setExperiments(ImmutableList.of("jar_packages=" + expansionJar));
+    ExperimentalOptions.addExperiment(
+        testPipeline.getOptions().as(ExperimentalOptions.class), "jar_packages=" + expansionJar);
     waitForReady();
   }
 
