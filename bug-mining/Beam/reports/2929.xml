<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:25:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-14403] Allow Prime to be used with Legacy workers</title>
                <link>https://issues.apache.org/jira/browse/BEAM-14403</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/beam/blob/v2.37.0/runners/google-cloud-dataflow-java/src/main/java/org/apache/beam/runners/dataflow/DataflowRunner.java#L2315&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/blob/v2.37.0/runners/google-cloud-dataflow-java/src/main/java/org/apache/beam/runners/dataflow/DataflowRunner.java#L2315&lt;/a&gt; assumes that enable_prime forces UW. This decision should be left up to the service.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13443027">BEAM-14403</key>
            <summary>Allow Prime to be used with Legacy workers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10101" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">P1</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="robertwb">Robert Bradshaw</assignee>
                                    <reporter username="robertwb">Robert Bradshaw</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 May 2022 21:12:04 +0000</created>
                <updated>Wed, 11 May 2022 19:56:59 +0000</updated>
                            <resolved>Fri, 6 May 2022 17:44:06 +0000</resolved>
                                    <version>2.35.0</version>
                    <version>2.36.0</version>
                    <version>2.37.0</version>
                    <version>2.38.0</version>
                                    <fixVersion>2.39.0</fixVersion>
                                    <component>runner-dataflow</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="17531818" author="kenn" created="Wed, 4 May 2022 16:27:30 +0000"  >&lt;p&gt;Since it is a library logic problem, not an outage, P1 is the maximum priority for it.&lt;/p&gt;</comment>
                            <comment id="17531820" author="kenn" created="Wed, 4 May 2022 16:28:53 +0000"  >&lt;p&gt;Does the PR fully resolve it or does it need a cherrypick now?&lt;/p&gt;</comment>
                            <comment id="17531821" author="robertwb" created="Wed, 4 May 2022 16:31:00 +0000"  >&lt;p&gt;I don&apos;t think the release has been cut yet.&lt;/p&gt;
</comment>
                            <comment id="17531884" author="yichi" created="Wed, 4 May 2022 18:27:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=robertwb&quot; class=&quot;user-hover&quot; rel=&quot;robertwb&quot;&gt;robertwb&lt;/a&gt; is this resolved?&lt;/p&gt;</comment>
                            <comment id="17531986" author="altay" created="Thu, 5 May 2022 01:05:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kenn&quot; class=&quot;user-hover&quot; rel=&quot;kenn&quot;&gt;kenn&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=robertwb&quot; class=&quot;user-hover&quot; rel=&quot;robertwb&quot;&gt;robertwb&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Is there something we could do to prevent an issue like this in the future? In an ideal world SDK could leave these types of choices to the service. And if SDK has to make a choice it could distinguish between options SDK set vs the options a user explicitly set. We could check for such things in code review, but beyond that is there a way for us to check if SDK is setting options that is more than necessary in a more automated way. (I might be overthinking this and this might be a single example.)&lt;/p&gt;</comment>
                            <comment id="17535090" author="kenn" created="Wed, 11 May 2022 19:56:59 +0000"  >&lt;p&gt;A while ago we had a similar problem with &lt;tt&gt;PTransform.expand&lt;/tt&gt; methods doing different things based on the pipeline options, even though they were not supposed to. Many even checked what the runner was and built a totally different graph based on the runner, which meant they ended up not being truly portable, or not actually implemented in terms of the Beam model. We solved this problem by completely removing access to this information, so PTransforms had no choice but to have a portable expansion.&lt;/p&gt;

&lt;p&gt;An analogous solution might be to have service options exist outside the pipeline options. Or to have pipeline options that are somehow not actually available in the code paths where the runner is submitting things.&lt;/p&gt;

&lt;p&gt;I want to note that the issue here is in the &lt;tt&gt;DataflowRunner&lt;/tt&gt; not the core SDK. I know many people do not care about that distinction. But the issue is in the logic that decides how to submit a Beam graph to Dataflow. So it is not really a generalized problem anyhow. It is a small enough code base that code review, and a general best practice of having as few options as possible, should suffice.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1219k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>