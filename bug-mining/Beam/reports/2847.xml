<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:23:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-12753] Flink Runner fails with memory issue when creating first TestStream instance</title>
                <link>https://issues.apache.org/jira/browse/BEAM-12753</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Running Go SDK TestStream integration tests on the Flink runner consistently results in the following error on the first test run regardless of the test itself:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2021/08/11 21:12:47  (): java.io.IOException: Insufficient number of network buffers: required 17, but only 14 available. The total number of network buffers is currently set to 2048 of 32768 bytes each. You can increase &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; number by setting the configuration keys &lt;span class=&quot;code-quote&quot;&gt;&apos;taskmanager.memory.network.fraction&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;taskmanager.memory.network.min&apos;&lt;/span&gt;, and &lt;span class=&quot;code-quote&quot;&gt;&apos;taskmanager.memory.network.max&apos;&lt;/span&gt;.

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This error is thrown on the first test run on a fresh instance of the Flink job server; subsequent test runs of the same suite pass. Stopping the job server and starting a new one results in the first test run failing again. The memory error is thrown for int64, float64, and boolean data types; however, if the first TestStream contains strings or byte slices the memory error does not occur. It should be noted that strings and byte slices are getting appended with an extra length prefix on the Flink side, although it is unclear if that is related.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;On further investigation, the bug appears to be environment-specific, with many machines unable to reproduce the issue; however, the error still occurs on Jenkins for test runs.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13394931">BEAM-12753</key>
            <summary>Flink Runner fails with memory issue when creating first TestStream instance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10103" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">P3</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="damccorm">Danny McCormick</assignee>
                                    <reporter username="jrmccluskey">Jack McCluskey</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Aug 2021 15:13:12 +0000</created>
                <updated>Mon, 21 Mar 2022 01:35:34 +0000</updated>
                            <resolved>Mon, 21 Mar 2022 01:35:34 +0000</resolved>
                                                    <fixVersion>Not applicable</fixVersion>
                                    <component>runner-flink</component>
                    <component>sdk-go</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="51000">14h 10m</timespent>
                                <comments>
                            <comment id="17427254" author="beamjirabot" created="Mon, 11 Oct 2021 17:24:17 +0000"  >&lt;p&gt;This issue is P2 but has been unassigned without any comment for 60 days so it has been labeled &quot;stale-P2&quot;. If this issue is still affecting you, we care! Please comment and remove the label. Otherwise, in 14 days the issue will be moved to P3.&lt;/p&gt;

&lt;p&gt;Please see &lt;a href=&quot;https://beam.apache.org/contribute/jira-priorities/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://beam.apache.org/contribute/jira-priorities/&lt;/a&gt; for a detailed explanation of what these priorities mean.&lt;/p&gt;</comment>
                            <comment id="17433891" author="beamjirabot" created="Mon, 25 Oct 2021 17:24:21 +0000"  >&lt;p&gt;This issue was marked &quot;stale-P2&quot; and has not received a public comment in 14 days. It is now automatically moved to P3. If you are still affected by it, you can comment and move it back to P2.&lt;/p&gt;</comment>
                            <comment id="17473831" author="kenn" created="Wed, 12 Jan 2022 03:50:12 +0000"  >&lt;p&gt;This Jira ticket has a pull request attached to it, but is still open. Did the pull request resolve the issue? If so, could you please mark it resolved? This will help the project have a clear view of its open issues.&lt;/p&gt;</comment>
                            <comment id="17478905" author="ibzib" created="Wed, 19 Jan 2022 19:12:28 +0000"  >&lt;p&gt;The PR was closed before merging.&lt;/p&gt;</comment>
                            <comment id="17504583" author="JIRAUSER282469" created="Thu, 10 Mar 2022 21:11:31 +0000"  >&lt;p&gt;I&apos;ve been digging in to this one and noticed that it is the same general issue as &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-12815&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BEAM-12815&lt;/a&gt; - I suspect this might have more to do with our flink config than the TestStream implementation. I&apos;m going to try playing with some of the flink tuning parameters and see if that fixes the problem once ci is back (unfortunately I can&apos;t get a local repro yet)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0tuq0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>