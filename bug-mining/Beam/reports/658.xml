<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:50:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-4847] Java PreCommit is flaky: Expiring Daemon because JVM Tenured space is exhausted</title>
                <link>https://issues.apache.org/jira/browse/BEAM-4847</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Java PreCommit seems like flaky:&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/beam_PreCommit_Java_Commit/505/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PreCommit_Java_Commit/505/console&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13173903">BEAM-4847</key>
            <summary>Java PreCommit is flaky: Expiring Daemon because JVM Tenured space is exhausted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10103" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">P3</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="11">Done</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="boyuanz">Boyuan Zhang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Jul 2018 19:32:50 +0000</created>
                <updated>Fri, 24 Jul 2020 20:17:24 +0000</updated>
                            <resolved>Tue, 16 Jun 2020 18:07:35 +0000</resolved>
                                                    <fixVersion>Not applicable</fixVersion>
                                    <component>build-system</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="12000">3h 20m</timespent>
                                <comments>
                            <comment id="16553355" author="lcwik" created="Mon, 23 Jul 2018 20:19:43 +0000"  >&lt;p&gt;Expiring Daemon because JVM Tenured space is exhausted&lt;/p&gt;</comment>
                            <comment id="16553357" author="lcwik" created="Mon, 23 Jul 2018 20:22:39 +0000"  >&lt;p&gt;This&#160;seems to be more of an existing issue: &lt;a href=&quot;https://lists.apache.org/thread.html/b47799450c73d1c2588a8029c224d1c85278fd7431568345a7928983@%3Cdev.beam.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/b47799450c73d1c2588a8029c224d1c85278fd7431568345a7928983@%3Cdev.beam.apache.org%3E&lt;/a&gt;&#160;that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=swegner&quot; class=&quot;user-hover&quot; rel=&quot;swegner&quot;&gt;swegner&lt;/a&gt; dealt a lot with.&lt;/p&gt;</comment>
                            <comment id="16553543" author="thw" created="Mon, 23 Jul 2018 23:26:54 +0000"  >&lt;p&gt;I have noticed this issue (&quot;Expiring Daemon because JVM Tenured space is exhausted&quot;) since the last few days and also don&apos;t see any recent successful pre-commit build at&#160;&lt;a href=&quot;https://builds.apache.org/job/beam_PreCommit_Java_Phrase/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PreCommit_Java_Phrase/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16553732" author="rdub" created="Tue, 24 Jul 2018 03:05:47 +0000"  >&lt;p&gt;FWIW, java precommit has failed 3x (&lt;a href=&quot;https://builds.apache.org/job/beam_PreCommit_Java_Commit/503/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;1&lt;/a&gt;, &lt;a href=&quot;https://builds.apache.org/job/beam_PreCommit_Java_Phrase/71/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2&lt;/a&gt;, &lt;a href=&quot;https://builds.apache.org/job/beam_PreCommit_Java_Phrase/73/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3&lt;/a&gt;) on &lt;a href=&quot;https://github.com/apache/beam/pull/5958&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#5958&lt;/a&gt;&#160;for what seems like this reason.&lt;/p&gt;

&lt;p&gt;Could it be related to &lt;a href=&quot;https://lists.apache.org/thread.html/266ad449ae7e7225d24db18d2ee51e2bd5ef17f8f2edcebf726ca4ae@%3Cdev.beam.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;the Jenkins upgrade that happened this weekend&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="16553828" author="amaliujia" created="Tue, 24 Jul 2018 05:34:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janpeuker&quot; class=&quot;user-hover&quot; rel=&quot;janpeuker&quot;&gt;janpeuker&lt;/a&gt; provided extra information that might help in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-4848&quot; title=&quot;GC overhead limit exceeded in Java Pre and PostCommit tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-4848&quot;&gt;&lt;del&gt;BEAM-4848&lt;/del&gt;&lt;/a&gt;&#160;(which is a dup of this&#160;JIRA that I have already closed).&lt;/p&gt;</comment>
                            <comment id="16554286" author="thw" created="Tue, 24 Jul 2018 14:12:23 +0000"  >&lt;p&gt;Here is another error from ValidatesRunner build:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;gt; Could not resolve all dependencies &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; configuration &lt;span class=&quot;code-quote&quot;&gt;&apos;:buildSrc:classpath&apos;&lt;/span&gt;.
   &amp;gt; Timeout waiting to lock artifact cache (/home/jenkins/.gradle/caches/modules-2). It is currently in use by another Gradle instance.
     Owner PID: 30950
     Our PID: 23164
     Owner Operation: 
     Our operation: 
     Lock file: /home/jenkins/.gradle/caches/modules-2/modules-2.lock&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/beam_PostCommit_Java_ValidatesRunner_Flink_Gradle_PR/25/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PostCommit_Java_ValidatesRunner_Flink_Gradle_PR/25/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16554476" author="alanmyrvold" created="Tue, 24 Jul 2018 16:21:46 +0000"  >&lt;p&gt;I will&#160;look into this&lt;/p&gt;</comment>
                            <comment id="16554501" author="alanmyrvold" created="Tue, 24 Jul 2018 16:39:16 +0000"  >&lt;p&gt;In earlier runs, I see --max-workers=16 and&#160;-Dorg.gradle.jvmargs=-Xmx3328m&lt;/p&gt;

&lt;p&gt;Now I see&#160;--max-workers=48 -Dorg.gradle.jvmargs=-Xmx1109m&lt;/p&gt;</comment>
                            <comment id="16554606" author="alanmyrvold" created="Tue, 24 Jul 2018 18:04:43 +0000"  >&lt;p&gt;Setting more reasonable values for max-workers and&#160;Xmx worked.&lt;/p&gt;</comment>
                            <comment id="16554681" author="alanmyrvold" created="Tue, 24 Jul 2018 19:01:23 +0000"  >&lt;p&gt;Java PreCommit&#160;passes with&#160;&lt;a href=&quot;https://github.com/apache/beam/pull/6046&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/6046&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16554794" author="thw" created="Tue, 24 Jul 2018 21:05:52 +0000"  >&lt;p&gt;Following build is stuck in &quot;Expiring Daemon because JVM Tenured space is exhausted&quot;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/beam_PreCommit_Java_Phrase/81/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PreCommit_Java_Phrase/81/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16554799" author="rdub" created="Tue, 24 Jul 2018 21:10:39 +0000"  >&lt;p&gt;Similarly, &lt;a href=&quot;https://builds.apache.org/job/beam_PreCommit_Java_Commit/528/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PreCommit_Java_Commit/528/console&lt;/a&gt;&#160;looks stalled with the same.&lt;/p&gt;

&lt;p&gt;It seems deterministic on &lt;a href=&quot;https://github.com/apache/beam/pull/5958#pullrequestreview-137563193&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;that PR&lt;/a&gt;, having now failed that way 4 of 4 times (though I don&apos;t think I did anything that would affect Jenkins memory usage).&lt;/p&gt;

&lt;p&gt;Thanks for looking into it &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alanmyrvold&quot; class=&quot;user-hover&quot; rel=&quot;alanmyrvold&quot;&gt;alanmyrvold&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="16554968" author="thw" created="Wed, 25 Jul 2018 00:50:56 +0000"  >&lt;p&gt;It appears that when only a single build runs, Java PreCommit&#160;passes.&lt;/p&gt;

&lt;p&gt;How about reducing to&#160;-Xmx4g ?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16555025" author="alanmyrvold" created="Wed, 25 Jul 2018 02:17:09 +0000"  >&lt;p&gt;Both&#160;&lt;a href=&quot;https://builds.apache.org/job/beam_PreCommit_Java_Commit/528/consoleFull&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PreCommit_Java_Commit/528/consoleFull&lt;/a&gt;&#160;and &lt;a href=&quot;https://builds.apache.org/job/beam_PreCommit_Java_Phrase/81/consoleFull&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PreCommit_Java_Phrase/81/consoleFull&lt;/a&gt;&#160;show the old, broken, values of&#160;--max-workers=48 -Dorg.gradle.jvmargs=-Xmx1109m&#160; since the seed job had not updated to the new settings, so these are not evidence that -Xmx8g was broken, but 4gb should be ok.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16555034" author="thw" created="Wed, 25 Jul 2018 02:29:47 +0000"  >&lt;p&gt;Yep, 3g/8g works at least for single build runs, based on latest precommits. So we don&apos;t know for sure if that setting had worked for concurrent builds also. Let&apos;s observe concurrent builds running for a day with 2g/4g.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16555040" author="thw" created="Wed, 25 Jul 2018 02:38:35 +0000"  >&lt;p&gt;BTW can the changes be made effective immediately, w/o waiting for the seed job?&lt;/p&gt;</comment>
                            <comment id="17123252" author="beamjirabot" created="Tue, 2 Jun 2020 04:16:32 +0000"  >&lt;p&gt;This issue is P2 but has been unassigned without any comment for 60 days so it has been labeled &quot;stale-P2&quot;. If this issue is still affecting you, we care! Please comment and remove the label. Otherwise, in 14 days the issue will be moved to P3.&lt;/p&gt;

&lt;p&gt;Please see &lt;a href=&quot;https://beam.apache.org/contribute/jira-priorities/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://beam.apache.org/contribute/jira-priorities/&lt;/a&gt; for a detailed explanation of what these priorities mean.&lt;/p&gt;</comment>
                            <comment id="17137699" author="beamjirabot" created="Tue, 16 Jun 2020 17:28:27 +0000"  >&lt;p&gt;This issue was marked &quot;stale-P2&quot; and has not received a public comment in 14 days. It is now automatically moved to P3. If you are still affected by it, you can comment and move it back to P2.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3w6vj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>