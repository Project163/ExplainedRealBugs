<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:01:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-6783] byte[] breaks in BeamSQL codegen</title>
                <link>https://issues.apache.org/jira/browse/BEAM-6783</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Calcite will call `byte[].toString` because BeamSQL codegen read byte[] from Row to calcite (see: &lt;a href=&quot;https://github.com/apache/beam/blob/master/sdks/java/extensions/sql/src/main/java/org/apache/beam/sdk/extensions/sql/impl/rel/BeamCalcRel.java#L334&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/blob/master/sdks/java/extensions/sql/src/main/java/org/apache/beam/sdk/extensions/sql/impl/rel/BeamCalcRel.java#L334&lt;/a&gt;). &lt;/p&gt;</description>
                <environment></environment>
        <key id="13220533">BEAM-6783</key>
            <summary>byte[] breaks in BeamSQL codegen</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kanterov">Gleb Kanterov</assignee>
                                    <reporter username="amaliujia">Rui Wang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Mar 2019 21:02:53 +0000</created>
                <updated>Fri, 24 Jul 2020 19:54:39 +0000</updated>
                            <resolved>Tue, 23 Jul 2019 21:07:12 +0000</resolved>
                                                    <fixVersion>2.15.0</fixVersion>
                                    <component>dsl-sql</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="18600">5h 10m</timespent>
                                <comments>
                            <comment id="16788301" author="amaliujia" created="Fri, 8 Mar 2019 21:04:13 +0000"  >&lt;p&gt;FYI &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apilloud&quot; class=&quot;user-hover&quot; rel=&quot;apilloud&quot;&gt;apilloud&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16788308" author="apilloud" created="Fri, 8 Mar 2019 21:13:57 +0000"  >&lt;p&gt;Calcite is expecting we wrap the type in `org.apache.calcite.avatica.util.ByteString`. Fix coming shortly, just need to write some tests.&lt;/p&gt;</comment>
                            <comment id="16788320" author="apilloud" created="Fri, 8 Mar 2019 21:32:23 +0000"  >&lt;p&gt;There are quite a few UDFs that have this assumption baked in. More work is required here, but the fix looks something like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git a/sdks/java/extensions/sql/src/main/java/org/apache/beam/sdk/extensions/sql/impl/rel/BeamCalcRel.java b/sdks/java/extensions/sql/src/main/java/org/apache/beam/sdk/extensions/sql/impl/rel/BeamCalcRel.java
index 790bcf2635..59baf4b307 100644
--- a/sdks/java/extensions/sql/src/main/java/org/apache/beam/sdk/extensions/sql/impl/rel/BeamCalcRel.java
+++ b/sdks/java/extensions/sql/src/main/java/org/apache/beam/sdk/extensions/sql/impl/rel/BeamCalcRel.java
@@ -51,6 +51,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.calcite.adapter.enumerable.PhysType;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.calcite.adapter.enumerable.PhysTypeImpl;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.calcite.adapter.enumerable.RexToLixTranslator;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.calcite.adapter.java.JavaTypeFactory;
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.calcite.avatica.util.ByteString;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.calcite.linq4j.QueryProvider;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.calcite.linq4j.tree.BlockBuilder;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.calcite.linq4j.tree.Expression;
@@ -277,6 +278,10 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BeamCalcRel &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Calc &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; BeamRelNode {
&amp;amp;&amp;amp; !Types.isAssignableFrom(BigDecimal.class, (&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;) value.getType())) {
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Expressions.new_(BigDecimal.class, value);

+ } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (toType.getTypeName() == TypeName.BYTES
+ &amp;amp;&amp;amp; Types.isAssignableFrom(ByteString.class, (&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;) value.getType())) {
+ &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Expressions.call(value, &lt;span class=&quot;code-quote&quot;&gt;&quot;getBytes&quot;&lt;/span&gt;);
+
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (((&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;) value.getType()).isPrimitive()
|| Types.isAssignableFrom(&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;.class, (&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;) value.getType())) {
Type rawType = rawTypeMap.get(toType.getTypeName());
@@ -400,6 +405,8 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BeamCalcRel &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Calc &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; BeamRelNode {
}
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (CalciteUtils.isDateTimeType(fromType)) {
field = Expressions.call(field, &lt;span class=&quot;code-quote&quot;&gt;&quot;getMillis&quot;&lt;/span&gt;);
+ } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fromType.getTypeName() == TypeName.BYTES) {
+ field = Expressions.new_(ByteString.class, field);
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fromType.getTypeName().isCompositeType()
|| (fromType.getTypeName().isCollectionType()
&amp;amp;&amp;amp; fromType.getCollectionElementType().getTypeName().isCompositeType())) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16889589" author="amaliujia" created="Sat, 20 Jul 2019 21:08:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sridharG&quot; class=&quot;user-hover&quot; rel=&quot;sridharG&quot;&gt;sridharG&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please let me know if you need any help.&lt;/p&gt;</comment>
                            <comment id="16890433" author="kanterov" created="Mon, 22 Jul 2019 19:55:37 +0000"  >&lt;p&gt;I have reassigned the issue to myself because I have found it independently, and I have a fix with tests. PR is coming.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z00ig0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>