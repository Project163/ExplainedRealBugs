<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:53:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-4176] Java: Portable batch runner passes all ValidatesRunner tests that non-portable runner passes</title>
                <link>https://issues.apache.org/jira/browse/BEAM-4176</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;We need this as a sanity check that runner execution is correct.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13155275">BEAM-4176</key>
            <summary>Java: Portable batch runner passes all ValidatesRunner tests that non-portable runner passes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angoenka">Ankur Goenka</assignee>
                                    <reporter username="bsidhom">Ben Sidhom</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Apr 2018 00:02:38 +0000</created>
                <updated>Sat, 16 May 2020 13:50:56 +0000</updated>
                            <resolved>Wed, 1 May 2019 20:22:35 +0000</resolved>
                                                    <fixVersion>2.13.0</fixVersion>
                                    <component>runner-flink</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="132000">36h 40m</timespent>
                                <comments>
                            <comment id="16580381" author="rdub" created="Tue, 14 Aug 2018 20:19:14 +0000"  >&lt;p&gt;Per discussion on the OSS Runners call yesterday, &lt;a href=&quot;https://storage.googleapis.com/runsascoded-tmp/beam-portable-flink-vr-tests/2018-08-14/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&apos;s the output from a run of the Flink Portable VR tests&lt;/a&gt; from &lt;a href=&quot;https://github.com/apache/beam/commit/80a01bf9e8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a recent HEAD&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Key stats:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12935609/12935609_Screen+Shot+2018-08-14+at+4.18.31+PM.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16603089" author="rdub" created="Tue, 4 Sep 2018 14:07:06 +0000"  >&lt;p&gt;Some updates here:&lt;/p&gt;

&lt;p&gt;Running from current &lt;tt&gt;HEAD&lt;/tt&gt;, I just saw a hang in &lt;tt&gt;ParDoLifecycleTest&lt;/tt&gt; (&lt;a href=&quot;https://gist.github.com/ryan-williams/fbc93da91696de8eec51d6e5128ffe5b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;full output&lt;/a&gt;); on re-run I see &lt;a href=&quot;https://storage.googleapis.com/runsascoded-tmp/beam-portable-flink-vr-tests/d82a8a529a/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;the same as previously&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I&apos;ve just sent &lt;a href=&quot;https://github.com/apache/beam/pull/6328&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#6328&lt;/a&gt; which fixes&#160;some&#160;cases; &lt;a href=&quot;https://storage.googleapis.com/runsascoded-tmp/beam-portable-flink-vr-tests/a73e93d054/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here is the&#160;&quot;after&quot;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12938143/12938143_Screen+Shot+2018-09-03+at+11.07.38+AM.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16619901" author="rdub" created="Tue, 18 Sep 2018 23:52:57 +0000"  >&lt;p&gt;As of &lt;a href=&quot;https://github.com/apache/beam/pull/6328&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#6328&lt;/a&gt; being merged, we&apos;re down to 117 failures:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/be8a669f7d4fd09b1cd83e224ab37db2a4c68fd4/68747470733a2f2f636c2e6c792f3465643734343832393236342f53637265656e25323053686f74253230323031382d30392d31382532306174253230362e30342e3232253230504d2e706e67&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;I put them in &lt;a href=&quot;https://docs.google.com/spreadsheets/d/1aNH4iwR99s2bSjFpj3vcHhdrVg_9q7XySX_5jKjyK2E/edit?usp=sharing&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this google sheet&lt;/a&gt;, where I am also going through and spot-checking why each case failed (&lt;a href=&quot;https://storage.googleapis.com/runsascoded-tmp/beam-portable-flink-vr-tests/ecd1ac085a/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&apos;s the full test output I&apos;m working from&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;So far, all the cases I&apos;ve checked have failed due transforms of the form &lt;tt&gt;Combine.globally(&#8230;)/View.AsIterable/View.CreatePCollectionView&lt;/tt&gt;&#160;, e.g.:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[flink-runner-job-server] ERROR org.apache.beam.runners.flink.FlinkJobInvocation - Error during job invocation combinetest0accumulationtests0testaccumulatingcombineempty-ryan-0918183535-7620b406_f38db722-b27f-45a6-bbf5-e0bc86261cb2.
java.lang.IllegalArgumentException: Unknown type of URN beam:transform:create_view:v1 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; PTransform with id Combine.globally(MeanInts)/View.AsIterable/View.CreatePCollectionView.
	at org.apache.beam.runners.flink.FlinkBatchPortablePipelineTranslator.urnNotFound(FlinkBatchPortablePipelineTranslator.java:578)
	at org.apache.beam.runners.flink.FlinkBatchPortablePipelineTranslator.translate(FlinkBatchPortablePipelineTranslator.java:233)
	at org.apache.beam.runners.flink.FlinkJobInvocation.runPipeline(FlinkJobInvocation.java:112)
	at org.apache.beam.repackaged.beam_runners_flink_2.11.com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:111)
	at org.apache.beam.repackaged.beam_runners_flink_2.11.com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:58)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is promising; getting &lt;tt&gt;PTransformTranslation.CREATE_VIEW_TRANSFORM_URN&lt;/tt&gt;&#160;into&#160;&#160;&lt;a href=&quot;https://github.com/apache/beam/blob/c49a97ecbf815b320926285dcddba993590e3073/runners/flink/src/main/java/org/apache/beam/runners/flink/FlinkBatchPortablePipelineTranslator.java#L132-L153&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this list in&#160;FlinkBatchPortablePipelineTranslator&lt;/a&gt;&#160;may recover many more cases.&lt;/p&gt;

&lt;p&gt;Should&#160;FlinkBatchPortablePipelineTranslator handle &lt;tt&gt;create_view&lt;/tt&gt; URN directly? Or should such transforms be folded into ExecutableStages? Or something else?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16637390" author="angoenka" created="Wed, 3 Oct 2018 19:07:52 +0000"  >&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12942308/12942308_81VxNWtFtke.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;We are able to run all the test cases with a hack on create_view now.&lt;/p&gt;</comment>
                            <comment id="16743166" author="mxm" created="Tue, 15 Jan 2019 15:56:37 +0000"  >&lt;p&gt;Small update on this, these are the categories still excluded:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        excludeCategories &apos;org.apache.beam.sdk.testing.FlattenWithHeterogeneousCoders&apos;
        excludeCategories &apos;org.apache.beam.sdk.testing.LargeKeys$Above100MB&apos;
        excludeCategories &apos;org.apache.beam.sdk.testing.UsesAttemptedMetrics&apos;
        excludeCategories &apos;org.apache.beam.sdk.testing.UsesCommittedMetrics&apos;
        excludeCategories &apos;org.apache.beam.sdk.testing.UsesCounterMetrics&apos;
        excludeCategories &apos;org.apache.beam.sdk.testing.UsesCustomWindowMerging&apos;
        excludeCategories &apos;org.apache.beam.sdk.testing.UsesDistributionMetrics&apos;
        excludeCategories &apos;org.apache.beam.sdk.testing.UsesFailureMessage&apos;
        excludeCategories &apos;org.apache.beam.sdk.testing.UsesGaugeMetrics&apos;
        excludeCategories &apos;org.apache.beam.sdk.testing.UsesParDoLifecycle&apos;
        excludeCategories &apos;org.apache.beam.sdk.testing.UsesMapState&apos;
        excludeCategories &apos;org.apache.beam.sdk.testing.UsesSetState&apos;
        excludeCategories &apos;org.apache.beam.sdk.testing.UsesTestStream&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So we are almost on par with the non-portabe Runner. Metrics should be fixed soon, the state tests are only enabled for ValueState and BagState because the Harness doesn&apos;t support any other state types at the moment. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rdub&quot; class=&quot;user-hover&quot; rel=&quot;rdub&quot;&gt;rdub&lt;/a&gt; Do you think we could enable the metrics tests soon?&lt;/p&gt;</comment>
                            <comment id="16743339" author="rdub" created="Tue, 15 Jan 2019 19:45:23 +0000"  >&lt;p&gt;Yea I&apos;m actively working on those metrics tests as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-4775&quot; title=&quot;JobService should support returning metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-4775&quot;&gt;&lt;del&gt;BEAM-4775&lt;/del&gt;&lt;/a&gt;, stay tuned!&lt;/p&gt;</comment>
                            <comment id="16743486" author="mxm" created="Wed, 16 Jan 2019 00:25:00 +0000"  >&lt;p&gt;Awesome, thanks for the info. &lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310361">
                    <name>Blocked</name>
                                                                <inwardlinks description="Blocked">
                                        <issuelink>
            <issuekey id="13182465">BEAM-5284</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13186359">BEAM-5441</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="13152347">BEAM-4067</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="13101359">BEAM-2889</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12942308" name="81VxNWtFtke.png" size="403420" author="angoenka" created="Wed, 3 Oct 2018 19:07:03 +0000"/>
                            <attachment id="12935609" name="Screen Shot 2018-08-14 at 4.18.31 PM.png" size="10563" author="rdub" created="Tue, 14 Aug 2018 20:18:55 +0000"/>
                            <attachment id="12938143" name="Screen Shot 2018-09-03 at 11.07.38 AM.png" size="10364" author="rdub" created="Mon, 3 Sep 2018 15:08:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 43 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3t19j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>