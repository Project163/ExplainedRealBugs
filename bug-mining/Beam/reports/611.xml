<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:50:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-4473] Flaky org.apache.beam.runners.direct.portable.ReferenceRunnerTest.pipelineExecution</title>
                <link>https://issues.apache.org/jira/browse/BEAM-4473</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Example run: &lt;a href=&quot;https://builds.apache.org/job/beam_PreCommit_Java_GradleBuild/6062/testReport/junit/org.apache.beam.runners.direct.portable/ReferenceRunnerTest/pipelineExecution/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PreCommit_Java_GradleBuild/6062/testReport/junit/org.apache.beam.runners.direct.portable/ReferenceRunnerTest/pipelineExecution/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Error Message
java.lang.IllegalStateException: sendHeaders has already been called
Stacktrace
java.lang.IllegalStateException: sendHeaders has already been called
	at org.apache.beam.repackaged.beam_sdks_java_harness.com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at io.grpc.internal.ServerCallImpl.sendHeaders(ServerCallImpl.java:104)
	at io.grpc.stub.ServerCalls$ServerCallStreamObserverImpl.onNext(ServerCalls.java:282)
	at org.apache.beam.sdk.fn.data.BeamFnDataBufferingOutboundObserver.close(BeamFnDataBufferingOutboundObserver.java:112)
	at org.apache.beam.runners.fnexecution.control.SdkHarnessClient$ActiveBundle.close(SdkHarnessClient.java:224)
	at org.apache.beam.runners.direct.portable.RemoteStageEvaluatorFactory$RemoteStageEvaluator.finishBundle(RemoteStageEvaluatorFactory.java:85)
	at org.apache.beam.runners.direct.portable.DirectTransformExecutor.finishBundle(DirectTransformExecutor.java:154)
	at org.apache.beam.runners.direct.portable.DirectTransformExecutor.run(DirectTransformExecutor.java:103)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
	Suppressed: java.lang.IllegalStateException: Processing bundle failed, TODO: [BEAM-3962] abort bundle.
		at org.apache.beam.runners.fnexecution.control.SdkHarnessClient$ActiveBundle.close(SdkHarnessClient.java:234)
		... 8 more
Standard Output
Shutting SDK harness down.
Standard Error
Jun 04, 2018 9:34:41 PM org.apache.beam.sdk.coders.SerializableCoder checkEqualsMethodDefined
WARNING: Can&apos;t verify serialized elements of type BoundedSource have well defined equals method. This may produce incorrect results on some PipelineRunner
Jun 04, 2018 9:34:41 PM org.apache.beam.sdk.coders.SerializableCoder checkEqualsMethodDefined
WARNING: Can&apos;t verify serialized elements of type BoundedSource have well defined equals method. This may produce incorrect results on some PipelineRunner
Jun 04, 2018 9:34:45 PM org.apache.beam.runners.fnexecution.control.FnApiControlClient closeAndTerminateOutstandingRequests
SEVERE: FnApiControlClient closed, clearing outstanding requests {5=java.util.concurrent.CompletableFuture@1051ec6e[Not completed, 1 dependents], 6=java.util.concurrent.CompletableFuture@341889cc[Not completed, 1 dependents]}
Jun 04, 2018 9:34:45 PM org.apache.beam.runners.fnexecution.logging.Slf4jLogWriter log
INFO: Beam Fn Control client connected with id 
Jun 04, 2018 9:34:45 PM org.apache.beam.runners.fnexecution.logging.Slf4jLogWriter log
INFO: Fn Harness started
Jun 04, 2018 9:34:45 PM org.apache.beam.runners.fnexecution.logging.Slf4jLogWriter log
INFO: Beam Fn Logging client connected.
Jun 04, 2018 9:34:45 PM org.apache.beam.runners.fnexecution.logging.Slf4jLogWriter log
INFO: Entering instruction processing loop
Jun 04, 2018 9:34:45 PM org.apache.beam.runners.fnexecution.logging.Slf4jLogWriter log
INFO: Beam Fn Data client connected.
Jun 04, 2018 9:34:45 PM org.apache.beam.runners.fnexecution.logging.GrpcLoggingService$InboundObserver onCompleted
INFO: Logging client hanged up.
java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: CANCELLED: Runner closed connection
	at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:357)
	at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1895)
	at org.apache.beam.fn.harness.control.BeamFnControlClient.processInstructionRequests(BeamFnControlClient.java:158)
	at org.apache.beam.fn.harness.FnHarness.main(FnHarness.java:157)
	at org.apache.beam.runners.fnexecution.environment.InProcessEnvironmentFactory.lambda$createEnvironment$0(InProcessEnvironmentFactory.java:90)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
Jun 04, 2018 9:34:45 PM org.apache.beam.sdk.fn.data.BeamFnDataGrpcMultiplexer$InboundObserver onError
SEVERE: Failed to handle &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; url: &lt;span class=&quot;code-quote&quot;&gt;&quot;InProcessServer_4&quot;&lt;/span&gt;

io.grpc.StatusRuntimeException: CANCELLED: Multiplexer hanging up
	at io.grpc.Status.asRuntimeException(Status.java:540)
	at io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:392)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:428)
	at io.grpc.internal.ClientCallImpl.access$100(ClientCallImpl.java:76)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl.close(ClientCallImpl.java:514)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl.access$700(ClientCallImpl.java:431)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:546)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:52)
	at io.grpc.internal.SerializingExecutor$TaskRunner.run(SerializingExecutor.java:152)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)

Jun 04, 2018 9:34:45 PM org.apache.beam.sdk.fn.data.BeamFnDataGrpcMultiplexer$InboundObserver onCompleted
WARNING: Hanged up &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; unknown endpoint.
Caused by: io.grpc.StatusRuntimeException: CANCELLED: Runner closed connection
	at io.grpc.Status.asRuntimeException(Status.java:540)
	at io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:392)
	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:428)
	at io.grpc.internal.ClientCallImpl.access$100(ClientCallImpl.java:76)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl.close(ClientCallImpl.java:514)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl.access$700(ClientCallImpl.java:431)
	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:546)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:52)
	at io.grpc.internal.SerializingExecutor$TaskRunner.run(SerializingExecutor.java:152)
	... 3 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13164017">BEAM-4473</key>
            <summary>Flaky org.apache.beam.runners.direct.portable.ReferenceRunnerTest.pipelineExecution</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lcwik">Luke Cwik</assignee>
                                    <reporter username="lcwik">Luke Cwik</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Jun 2018 00:05:49 +0000</created>
                <updated>Fri, 24 Jul 2020 20:19:13 +0000</updated>
                            <resolved>Fri, 15 Jun 2018 00:46:45 +0000</resolved>
                                                    <fixVersion>2.6.0</fixVersion>
                                    <component>runner-direct</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16506482" author="jkff" created="Fri, 8 Jun 2018 19:31:05 +0000"  >&lt;p&gt;I think the bug is that at &lt;a href=&quot;https://github.com/apache/beam/blob/69fb5c97a91ec9be3f481e827300cf796cbbfa19/runners/java-fn-execution/src/main/java/org/apache/beam/runners/fnexecution/data/GrpcDataService.java#L83&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/blob/69fb5c97a91ec9be3f481e827300cf796cbbfa19/runners/java-fn-execution/src/main/java/org/apache/beam/runners/fnexecution/data/GrpcDataService.java#L83&lt;/a&gt;&#160;we don&apos;t wrap the outbound observer into any sort of synchronization, unlike at &lt;a href=&quot;https://github.com/apache/beam/blob/69fb5c97a91ec9be3f481e827300cf796cbbfa19/sdks/java/harness/src/main/java/org/apache/beam/fn/harness/data/BeamFnDataGrpcClient.java#L130,&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/blob/69fb5c97a91ec9be3f481e827300cf796cbbfa19/sdks/java/harness/src/main/java/org/apache/beam/fn/harness/data/BeamFnDataGrpcClient.java#L130,&lt;/a&gt;&#160;where we end up wrapping it into &lt;a href=&quot;https://github.com/apache/beam/blob/master/sdks/java/fn-execution/src/main/java/org/apache/beam/sdk/fn/stream/StreamObserverFactory.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/blob/master/sdks/java/fn-execution/src/main/java/org/apache/beam/sdk/fn/stream/StreamObserverFactory.java&lt;/a&gt;&#160;.&lt;/p&gt;</comment>
                            <comment id="16513184" author="jkff" created="Fri, 15 Jun 2018 00:46:45 +0000"  >&lt;p&gt;Fixed in&#160;&lt;a href=&quot;https://github.com/apache/beam/pull/5585&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/5585&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13165118">BEAM-4528</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ui6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>