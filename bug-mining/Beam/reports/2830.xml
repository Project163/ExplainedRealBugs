<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:23:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-14026] Using unnest on a array with rows having nested rows throws IllegalArgumentException</title>
                <link>https://issues.apache.org/jira/browse/BEAM-14026</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Using unnest with example sql statement like&lt;/p&gt;

&lt;p&gt;&quot;select t.a1, t.a2, t.a3, d.b1, d.b2, d.b4, d.b3.c1, d.b3.c2, d.b3.c3 from test t cross join unnest(t.a4) d&quot;&lt;/p&gt;

&lt;p&gt;on the following dataset throws Illegal argument exception&lt;/p&gt;

&lt;p&gt;Java code snippet&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;// define the input row format level3&lt;br/&gt;
Schema level3Type =&lt;br/&gt;
Schema.builder().addInt32Field(&quot;c1&quot;).addStringField(&quot;c2&quot;).addDoubleField(&quot;c3&quot;).build();&lt;/p&gt;

&lt;p&gt;Row level3Row1 = Row.withSchema(level3Type).addValues(1, &quot;row&quot;, 1.0).build();&lt;br/&gt;
Row level3Row2 = Row.withSchema(level3Type).addValues(2, &quot;row&quot;, 2.0).build();&lt;br/&gt;
Row level3Row3 = Row.withSchema(level3Type).addValues(3, &quot;row&quot;, 3.0).build();&lt;/p&gt;

&lt;p&gt;// define the input row format level3&lt;br/&gt;
Schema level2Type =&lt;br/&gt;
Schema.builder().addInt32Field(&quot;b1&quot;)&lt;br/&gt;
.addStringField(&quot;b2&quot;)&lt;br/&gt;
.addRowField(&quot;b3&quot;, level3Type)&lt;br/&gt;
.addDoubleField(&quot;b4&quot;).build();&lt;/p&gt;


&lt;p&gt;Row level2Row1 = Row.withSchema(level2Type).addValues(1, &quot;row&quot;, level3Row1, 1.0).build();&lt;br/&gt;
Row level2Row2 = Row.withSchema(level2Type).addValues(2, &quot;row&quot;, level3Row2, 2.0).build();&lt;br/&gt;
Row level2Row3 = Row.withSchema(level2Type).addValues(3, &quot;row&quot;, level3Row3, 3.0).build();&lt;/p&gt;

&lt;p&gt;// define the input row format level3&lt;br/&gt;
Schema level1Type =&lt;br/&gt;
Schema.builder().addInt32Field(&quot;a1&quot;)&lt;br/&gt;
.addStringField(&quot;a2&quot;)&lt;br/&gt;
.addDoubleField(&quot;a3&quot;)&lt;br/&gt;
.addArrayField(&quot;a4&quot;, Schema.FieldType.row(level2Type))&lt;br/&gt;
.build();&lt;br/&gt;
Row level1Row1 = Row.withSchema(level1Type).addValues(1, &quot;row&quot;, 1.0,&lt;br/&gt;
Arrays.asList(level2Row1, level2Row2, level2Row3)).build();&lt;br/&gt;
Row level1Row2 = Row.withSchema(level1Type).addValues(2, &quot;row&quot;, 2.0,&lt;br/&gt;
Arrays.asList(level2Row1, level2Row2, level2Row3)).build();&lt;br/&gt;
Row level1Row3 = Row.withSchema(level1Type).addValues(3, &quot;row&quot;, 3.0,&lt;br/&gt;
Arrays.asList(level2Row1, level2Row2, level2Row3)).build();&lt;/p&gt;


&lt;p&gt;// create a source PCollection with Create.of();&lt;br/&gt;
PCollection&amp;lt;Row&amp;gt; inputTable =&lt;br/&gt;
PBegin.in(p).apply(Create.of(level1Row1, level1Row2, level1Row3).withRowSchema(level1Type));&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Throws following exception&lt;/p&gt;

&lt;p&gt;java.lang.IllegalArgumentException: Row expected 10 fields. initialized with 8 fields&lt;/p&gt;</description>
                <environment></environment>
        <key id="13431527">BEAM-14026</key>
            <summary>Using unnest on a array with rows having nested rows throws IllegalArgumentException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="abhijeet-lele">Abhijeet</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Mar 2022 16:10:14 +0000</created>
                <updated>Fri, 4 Mar 2022 23:04:29 +0000</updated>
                            <resolved>Fri, 4 Mar 2022 23:04:29 +0000</resolved>
                                    <version>2.36.0</version>
                                    <fixVersion>2.38.0</fixVersion>
                                    <component>dsl-sql</component>
                    <component>sdk-java-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4800">1h 20m</timespent>
                                <comments>
                            <comment id="17500983" author="lostluck" created="Thu, 3 Mar 2022 19:00:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bhulette&quot; class=&quot;user-hover&quot; rel=&quot;bhulette&quot;&gt;bhulette&lt;/a&gt; Tagging you for triaging this as it&apos;s schemas and SQL. I guess we don&apos;t have a SQL or Relational label?&lt;/p&gt;</comment>
                            <comment id="17500991" author="bhulette" created="Thu, 3 Mar 2022 19:17:37 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lostluck&quot; class=&quot;user-hover&quot; rel=&quot;lostluck&quot;&gt;lostluck&lt;/a&gt;, we do have a dsl-sql component that is good for this.&lt;/p&gt;</comment>
                            <comment id="17501002" author="lostluck" created="Thu, 3 Mar 2022 19:34:53 +0000"  >&lt;p&gt;That would do it. the search is prefix-match only, so nothing I was trying brought it up.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 36 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z103hc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>