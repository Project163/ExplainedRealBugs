<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:23:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-13741] :sdks:java:extensions:sql:hcatalog:compileJava failing in beam_Release_NightlySnapshot </title>
                <link>https://issues.apache.org/jira/browse/BEAM-13741</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Started in &lt;a href=&quot;https://ci-beam.apache.org/job/beam_Release_NightlySnapshot/1421/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_Release_NightlySnapshot/1421/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
23:36:14 &amp;gt; Task :sdks:java:extensions:sql:hcatalog:compileJava FAILED
23:36:14 error: cannot access Statistic
23:36:14   &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;file &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; org.apache.beam.vendor.calcite.v1_28_0.org.apache.calcite.schema.Statistic not found
23:36:14   Consult the following stack trace &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.
23:36:14   com.sun.tools.javac.code.Symbol$CompletionFailure: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;file &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; org.apache.beam.vendor.calcite.v1_28_0.org.apache.calcite.schema.Statistic not found
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13424760">BEAM-13741</key>
            <summary>:sdks:java:extensions:sql:hcatalog:compileJava failing in beam_Release_NightlySnapshot </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10101" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">P1</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="apilloud">Andrew Pilloud</assignee>
                                    <reporter username="bhulette">Brian Hulette</reporter>
                        <labels>
                            <label>currently-failing</label>
                            <label>stale-assigned</label>
                    </labels>
                <created>Tue, 25 Jan 2022 18:41:24 +0000</created>
                <updated>Fri, 1 Apr 2022 01:59:15 +0000</updated>
                            <resolved>Fri, 1 Apr 2022 01:59:15 +0000</resolved>
                                                    <fixVersion>2.39.0</fixVersion>
                                    <component>test-failures</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="12000">3h 20m</timespent>
                                <comments>
                            <comment id="17483355" author="kileys" created="Thu, 27 Jan 2022 17:56:03 +0000"  >&lt;p&gt;Can&apos;t repro locally, but did a quick diff of dependencies in the build scan.&lt;/p&gt;

&lt;p&gt;A recent build scan&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, calcite isn&apos;t a dependency but is in the last successful run &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://scans.gradle.com/s/33crfrasbhvfc/dependencies?expandAll&amp;amp;focusedDependencyView=details&amp;amp;projectFilter=WyI6c2RrczpqYXZhOmV4dGVuc2lvbnM6c3FsOmhjYXRhbG9nIl0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://scans.gradle.com/s/33crfrasbhvfc/dependencies?expandAll&amp;amp;focusedDependencyView=details&amp;amp;projectFilter=WyI6c2RrczpqYXZhOmV4dGVuc2lvbnM6c3FsOmhjYXRhbG9nIl0&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://scans.gradle.com/s/pydkrzca6t4p6/dependencies?dependencies=calcite&amp;amp;expandAll&amp;amp;focusedDependencyView=versions&amp;amp;projectFilter=WyI6c2RrczpqYXZhOmV4dGVuc2lvbnM6c3FsOmhjYXRhbG9nIl0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://scans.gradle.com/s/pydkrzca6t4p6/dependencies?dependencies=calcite&amp;amp;expandAll&amp;amp;focusedDependencyView=versions&amp;amp;projectFilter=WyI6c2RrczpqYXZhOmV4dGVuc2lvbnM6c3FsOmhjYXRhbG9nIl0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17486694" author="ibzib" created="Thu, 3 Feb 2022 20:44:13 +0000"  >&lt;p&gt;This may be an issue with the checker framework: &lt;a href=&quot;https://checkerframework.org/manual/#common-problems-running&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://checkerframework.org/manual/#common-problems-running&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17490465" author="kenn" created="Thu, 10 Feb 2022 19:26:06 +0000"  >&lt;p&gt;The similarly-phrased issue on that link is &lt;tt&gt;class file for com.sun.source.tree.Tree not found&lt;/tt&gt; and is specific to that class, which is part of the javac toolchain checker depends on. Did you mean a different issue listed there?&lt;/p&gt;</comment>
                            <comment id="17490567" author="bhulette" created="Thu, 10 Feb 2022 22:44:48 +0000"  >&lt;p&gt;Note that the lack of dependencies I described &lt;a href=&quot;https://github.com/apache/beam/pull/16631#issuecomment-1024805793&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&#160;seems to be a quirk of the build scan UI. If we look at the scan for a Java PreCommit, it also shows no dependencies for extensions:sql, but in either case you can navigate to the extensions:sql target and see the depdencies listed there, including vendored calcite.&lt;/p&gt;</comment>
                            <comment id="17490568" author="bhulette" created="Thu, 10 Feb 2022 22:47:01 +0000"  >&lt;p&gt;The only clue I&apos;ve managed to find here is that the Release_NightlySnapshot build is running on a different worker (h49-shared) than all of our other builds, it has an older Linux Kernel (4.15) and JDK (Oracle 8u291). To be safe I confirmed that I&apos;m able to build the hcatalog extension with Oracle JDK 8u291 on a Ubuntu 18 VM.&lt;/p&gt;</comment>
                            <comment id="17492179" author="bhulette" created="Mon, 14 Feb 2022 19:16:11 +0000"  >&lt;p&gt;I don&apos;t think this is a release blocker. We seem to be publishing SNAPSHOTs fine for other artifacts, e.g. for core Java: &lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/beam/beam-sdks-java-core/2.37.0-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/beam/beam-sdks-java-core/2.37.0-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It&apos;s just the sql-hcatalog artifact that is not getting published: &lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/beam/beam-sdks-java-extensions-sql-hcatalog/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/beam/beam-sdks-java-extensions-sql-hcatalog/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Note there was a 2.37.0-SNAPSHOT published on January 28, this is from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kileys&quot; class=&quot;user-hover&quot; rel=&quot;kileys&quot;&gt;kileys&lt;/a&gt; testing pr/16631. Note that is the &lt;em&gt;only&lt;/em&gt; SNAPSHOT published for that artifact - while core has a SNAPSHOT for every release. Perhaps there&apos;s been an issue here for longer and it just wasn&apos;t an explicit failure before.&lt;/p&gt;

&lt;p&gt;Key Takeway: This only seems to be affecting publishing the sql-hcatalog artifact&lt;/p&gt;</comment>
                            <comment id="17494173" author="angoenka" created="Thu, 17 Feb 2022 19:23:09 +0000"  >&lt;p&gt;It is still failing with hcatalog publising error. Would you be able to take a look.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
00:28:54 &amp;gt; Task :sdks:java:extensions:sql:hcatalog:compileJava FAILED&lt;br/&gt;
00:28:54 error: cannot access Statistic&lt;br/&gt;
00:28:54 &#160; class file for org.apache.beam.vendor.calcite.v1_28_0.org.apache.calcite.schema.Statistic not found&lt;br/&gt;
00:28:54 &#160; Consult the following stack trace for details.&lt;br/&gt;
00:28:54 &#160; com.sun.tools.javac.code.Symbol$CompletionFailure: class file for org.apache.beam.vendor.calcite.v1_28_0.org.apache.calcite.schema.Statistic not found&lt;br/&gt;
00:28:54 1 error&lt;/p&gt;</comment>
                            <comment id="17499248" author="tvalentyn" created="Tue, 1 Mar 2022 00:08:49 +0000"  >&lt;p&gt;This is still failing. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kileys&quot; class=&quot;user-hover&quot; rel=&quot;kileys&quot;&gt;kileys&lt;/a&gt; - would you be the right owner for this issue?&lt;/p&gt;</comment>
                            <comment id="17515439" author="beamjirabot" created="Thu, 31 Mar 2022 16:58:16 +0000"  >&lt;p&gt;This issue is assigned but has not received an update in 30 days so it has been labeled &quot;stale-assigned&quot;. If you are still working on the issue, please give an update and remove the label. If you are no longer working on the issue, please unassign so someone else may work on it. In 7 days the issue will be automatically unassigned.&lt;/p&gt;</comment>
                            <comment id="17515515" author="apilloud" created="Thu, 31 Mar 2022 18:59:51 +0000"  >&lt;p&gt;The class is bundled in the vendored jar, this is an issue with the build process:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ unzip -l beam-vendor-calcite-1_28_0-0.2.jar  | grep schema/Statistic.class
     1562  1980-02-01 00:00   org/apache/beam/vendor/calcite/v1_28_0/org/apache/calcite/schema/Statistic.class
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I was able to reproduce this with `./gradlew :sdks:java:extensions:sql:hcatalog:compileJava` on a clean checkout. Adding calcite as a dependency fixed the issue. Sending a PR.&lt;/p&gt;</comment>
                            <comment id="17515523" author="apilloud" created="Thu, 31 Mar 2022 19:07:51 +0000"  >&lt;p&gt;I&apos;ve been told that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bhulette&quot; class=&quot;user-hover&quot; rel=&quot;bhulette&quot;&gt;bhulette&lt;/a&gt; is also working on this. Just adding a dependency on Calcite isn&apos;t the right thing to do because nothing in this code directly uses Calcite. The dependency must be missing further up the tree.&lt;/p&gt;</comment>
                            <comment id="17515551" author="apilloud" created="Thu, 31 Mar 2022 19:40:40 +0000"  >&lt;p&gt;Looks like BeamTableStatistics exposes the Statistics interface from Calcite. So you need to depend on calcite to implement that. I&apos;ve added the recommended default value to BaseBeamTable so this is less of an issue.&lt;/p&gt;

&lt;p&gt;It would be a breaking change to actually fix this issue in the Sql package, so I won&apos;t do that for now.&lt;/p&gt;</comment>
                            <comment id="17515579" author="bhulette" created="Thu, 31 Mar 2022 20:27:42 +0000"  >&lt;p&gt;I haven&apos;t been actively working on it recently, I just investigated while it looked like it was blocking the release.&lt;/p&gt;

&lt;p&gt;I think this is finally making some sense - this likely materialized when we switched to gradle 7, and declared vendored calcite an &quot;implementation&quot; (as opposed to &quot;api&quot;) dependency: &lt;a href=&quot;https://github.com/apache/beam/blob/01d3cd7ca31767da60afe4b1a6e073751194ef29/sdks/java/extensions/sql/build.gradle#L85&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/blob/01d3cd7ca31767da60afe4b1a6e073751194ef29/sdks/java/extensions/sql/build.gradle#L85&lt;/a&gt;&lt;br/&gt;
I gues this prevented hcatalog from getting vendored calcite as a transitive dependency?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0yxzc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>