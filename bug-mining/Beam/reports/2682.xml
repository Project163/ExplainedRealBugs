<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:21:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-13456] beam_PostCommit_Java consistently timing out.</title>
                <link>https://issues.apache.org/jira/browse/BEAM-13456</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;This seems to have first appeared with build #8367: &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PostCommit_Java/8367/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PostCommit_Java/8367/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Frustratingly, no build scans pop up when the test fails this way, and no error messages appear except for the timeout. It may be easiest to attempt to determine which commit introduced the error.&lt;/p&gt;

&lt;p&gt;The previous successful test is at commit b52762bf150cacceb0fdeb1f0dc85cbea6e6f39c&lt;/p&gt;

&lt;p&gt;The first failing test is at commit 06a5e67332aae53ea90dedb4ef6421c2a7d65035&lt;/p&gt;</description>
                <environment></environment>
        <key id="13417279">BEAM-13456</key>
            <summary>beam_PostCommit_Java consistently timing out.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10101" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">P1</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lcwik">Luke Cwik</assignee>
                                    <reporter username="danoliveira">Daniel Oliveira</reporter>
                        <labels>
                            <label>currently-failing</label>
                    </labels>
                <created>Tue, 14 Dec 2021 05:36:05 +0000</created>
                <updated>Tue, 21 Dec 2021 18:41:04 +0000</updated>
                            <resolved>Fri, 17 Dec 2021 01:37:21 +0000</resolved>
                                    <version>2.36.0</version>
                                    <fixVersion>2.36.0</fixVersion>
                                    <component>test-failures</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="11400">3h 10m</timespent>
                                <comments>
                            <comment id="17458912" author="danoliveira" created="Tue, 14 Dec 2021 05:37:03 +0000"  >&lt;p&gt;As a side note, the beam_PostCommit_Java_ValidatesRunner_ULR test appears to be suffering from the same issue starting at nearly the same time, so it&apos;s probably related: &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PostCommit_Java_ValidatesRunner_ULR/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PostCommit_Java_ValidatesRunner_ULR/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17459497" author="kenn" created="Tue, 14 Dec 2021 21:24:46 +0000"  >&lt;p&gt;The ULR ValidatesRunner failures seem to have a clear culprit of &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PostCommit_Java_ValidatesRunner_ULR/1710/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PostCommit_Java_ValidatesRunner_ULR/1710/&lt;/a&gt;. It fails in 40 minutes sometimes and other times hits a 3 hour timeout.&lt;/p&gt;</comment>
                            <comment id="17459498" author="kenn" created="Tue, 14 Dec 2021 21:25:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/beam/commit/774008de21090c635dc23c58b2f7d9d4aaa40cbf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/commit/774008de21090c635dc23c58b2f7d9d4aaa40cbf&lt;/a&gt; (process-wide cache) appears to be the only candidate culprit for the ULR validates runner failures.&lt;/p&gt;</comment>
                            <comment id="17459503" author="kenn" created="Tue, 14 Dec 2021 21:37:39 +0000"  >&lt;p&gt;They are about the same time, but the postcommit timed out one time prior to that PR being merged.&lt;/p&gt;</comment>
                            <comment id="17459505" author="kenn" created="Tue, 14 Dec 2021 21:38:35 +0000"  >&lt;p&gt;We do see OOMs in the runs that don&apos;t time out. The other runs may be crash looping and logging to local filesystem.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
RuntimeError: org.apache.beam.sdk.util.UserCodeException: java.lang.AssertionError: Count/ParMultiDo(Anonymous).output: Java heap space
	at org.apache.beam.sdk.util.UserCodeException.wrap(UserCodeException.java:39)
	at org.apache.beam.sdk.testing.PAssert$DefaultConcludeFn$DoFnInvoker.invokeProcessElement(Unknown Source)
	at org.apache.beam.fn.harness.FnApiDoFnRunner.processElementForParDo(FnApiDoFnRunner.java:750)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I noticed in the caching PR this was a risk. We could configure more JVM heap space, if it isn&apos;t already high.&lt;/p&gt;</comment>
                            <comment id="17460420" author="lcwik" created="Thu, 16 Dec 2021 05:11:23 +0000"  >&lt;p&gt;Taking a look now, working on local repro.&lt;/p&gt;</comment>
                            <comment id="17460847" author="lcwik" created="Thu, 16 Dec 2021 16:26:49 +0000"  >&lt;p&gt;The OOM is happening because the ProcessBundleDescriptors are taking up more space then they.&lt;/p&gt;

&lt;p&gt;There was a recommendation to swap to guava over cache2k, testing this.&lt;/p&gt;

&lt;p&gt;See attached screenshot: &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13037603/13037603_8jHFYMYydUhHrMe.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="17460864" author="lcwik" created="Thu, 16 Dec 2021 16:44:25 +0000"  >&lt;p&gt;Running with &lt;a href=&quot;https://github.com/apache/beam/pull/16252&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/16252&lt;/a&gt; did seem to address the OOM.&lt;/p&gt;

&lt;p&gt;Running the postcommits on the PR to verify.&lt;/p&gt;</comment>
                            <comment id="17460955" author="bhulette" created="Thu, 16 Dec 2021 18:36:15 +0000"  >&lt;p&gt;Java PostCommit is still pending on pr/16252 after close to 2 hours, seems like that doesn&apos;t help?&lt;/p&gt;

&lt;p&gt;Looking at the changes in &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PostCommit_Java/8367/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PostCommit_Java/8367/&lt;/a&gt;, one stands out: &lt;a href=&quot;https://github.com/apache/beam/commit/06a5e67332aae53ea90dedb4ef6421c2a7d65035&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/commit/06a5e67332aae53ea90dedb4ef6421c2a7d65035&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This addressed a lot of errorprone checks  throughout the codebase, including &lt;a href=&quot;https://errorprone.info/bugpattern/LockNotBeforeTry&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://errorprone.info/bugpattern/LockNotBeforeTry&lt;/a&gt; - maybe something was done incorrectly there. I can try reverting to see if that helps&lt;/p&gt;</comment>
                            <comment id="17460960" author="lcwik" created="Thu, 16 Dec 2021 18:42:49 +0000"  >&lt;p&gt;Rerunning postcommit at prior commits to see if we can pinpoint the exact PR:&lt;br/&gt;
&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PostCommit_Java/8399/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PostCommit_Java/8399/&lt;/a&gt; - commit 414707077bb1f2689017d54076184c0b7d64955c&lt;br/&gt;
&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PostCommit_Java/8400/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PostCommit_Java/8400/&lt;/a&gt; - commit e52bdf2add268cb0a9ce3b1fe405029a8e3da189&lt;br/&gt;
&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PostCommit_Java/8401/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PostCommit_Java/8401/&lt;/a&gt; - commit 06a5e67332aae53ea90dedb4ef6421c2a7d65035&lt;br/&gt;
&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PostCommit_Java/8402/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PostCommit_Java/8402/&lt;/a&gt; - last passing run at b52762bf150cacceb0fdeb1f0dc85cbea6e6f39c&lt;/p&gt;</comment>
                            <comment id="17460971" author="bhulette" created="Thu, 16 Dec 2021 18:50:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;Rerunning postcommit at prior commits&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You can do that?&lt;/p&gt;</comment>
                            <comment id="17461010" author="bhulette" created="Thu, 16 Dec 2021 19:38:00 +0000"  >&lt;p&gt;PostCommit did not time out with &lt;a href=&quot;https://github.com/apache/beam/commit/06a5e67332aae53ea90dedb4ef6421c2a7d65035&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/commit/06a5e67332aae53ea90dedb4ef6421c2a7d65035&lt;/a&gt; reverted&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/beam/pull/16257&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/16257&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17461053" author="lcwik" created="Thu, 16 Dec 2021 21:38:01 +0000"  >&lt;p&gt;Yes, you can launch the job from the jenkins UI and specify what git ref to use (like a branch or a commit).&lt;/p&gt;</comment>
                            <comment id="17461135" author="lcwik" created="Fri, 17 Dec 2021 00:29:36 +0000"  >&lt;p&gt;Killed jobs 8400-8402, and restarted one from master #8400&lt;/p&gt;</comment>
                            <comment id="17461139" author="lcwik" created="Fri, 17 Dec 2021 00:47:33 +0000"  >&lt;p&gt;ULR passed &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PostCommit_Java_ValidatesRunner_ULR/1741/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PostCommit_Java_ValidatesRunner_ULR/1741/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17461150" author="lcwik" created="Fri, 17 Dec 2021 01:36:43 +0000"  >&lt;p&gt;Java post commit passed &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PostCommit_Java/8400/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PostCommit_Java/8400/&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13037603" name="8jHFYMYydUhHrMe.png" size="111360" author="lcwik" created="Thu, 16 Dec 2021 16:26:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0xnww:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>