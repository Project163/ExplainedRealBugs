<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:12:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-10987] stager_test.py::StagerTest::test_with_main_session flaky on windows py3.6,3.7 (sickbayed)</title>
                <link>https://issues.apache.org/jira/browse/BEAM-10987</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Frequently fails with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
TypeError: can&apos;t pickle zipimport.zipimporter objects
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Example: &lt;a href=&quot;https://github.com/apache/beam/pull/12505/checks?check_run_id=1183364761&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/12505/checks?check_run_id=1183364761&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13330055">BEAM-10987</key>
            <summary>stager_test.py::StagerTest::test_with_main_session flaky on windows py3.6,3.7 (sickbayed)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10103" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">P3</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bhulette">Brian Hulette</reporter>
                        <labels>
                            <label>beam-fixit</label>
                            <label>sickbay</label>
                    </labels>
                <created>Tue, 29 Sep 2020 23:08:09 +0000</created>
                <updated>Sat, 4 Jun 2022 18:53:53 +0000</updated>
                                                                            <component>sdk-py-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4200">1h 10m</timespent>
                                <comments>
                            <comment id="17204553" author="tobked" created="Wed, 30 Sep 2020 08:08:49 +0000"  >&lt;p&gt;Does it appear as only failed test? Is it possible it may be connected with some side effects from the other (possible failed/flaky) tests.&lt;/p&gt;</comment>
                            <comment id="17204829" author="bhulette" created="Wed, 30 Sep 2020 15:50:28 +0000"  >&lt;p&gt;I think it&apos;s actually a flake, since it fails for different versions of python. Here&apos;s one with a failure on py36 and py37: &lt;a href=&quot;https://github.com/apache/beam/runs/1179874513?check_suite_focus=true&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/runs/1179874513?check_suite_focus=true&lt;/a&gt;&lt;br/&gt;
Here&apos;s one on just py37: &lt;a href=&quot;https://github.com/apache/beam/runs/1188087263?check_suite_focus=true&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/runs/1188087263?check_suite_focus=true&lt;/a&gt;&lt;br/&gt;
Here&apos;s one with no failures: &lt;a href=&quot;https://github.com/apache/beam/actions/runs/279654152&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/actions/runs/279654152&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It seems likely its connected to some side effect from other tests, maybe its related to the text execution order, sometimes a zipimporter object is brought into the scope and gets pickled with a lambda?&lt;/p&gt;

&lt;p&gt;I tested if zipimporter objects are picklable on my linux laptop, it failed on py2.7, and succeeded on py3.8.&lt;/p&gt;</comment>
                            <comment id="17213334" author="bhulette" created="Tue, 13 Oct 2020 19:41:35 +0000"  >&lt;p&gt;zipimporter instances are not picklable on py3.7 or below. Confirmed this on my linux laptop and on a windows VM.&lt;/p&gt;</comment>
                            <comment id="17213340" author="bhulette" created="Tue, 13 Oct 2020 20:02:42 +0000"  >&lt;p&gt;Notably the object that is getting pulled in from the main_session and failing to pickle is a zipimporter of the pytest.exe:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
self = &amp;lt;dill._dill.Pickler object at 0x000002C7C5B72940&amp;gt;
obj = &amp;lt;zipimporter object &lt;span class=&quot;code-quote&quot;&gt;&quot;D:\a\beam\beam\sdks\python\target\.tox\py36-win\Scripts\pytest.exe&quot;&lt;/span&gt;&amp;gt;
save_persistent_id = True
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;pytest must only create this zipimporter object when running on Windows. I&apos;m curious why it&apos;s flaky and not failing permanently. Maybe the object is no longer used and sometimes gets GC&apos;d before we attempt to pickle it?&lt;/p&gt;</comment>
                            <comment id="17213436" author="bhulette" created="Tue, 13 Oct 2020 21:47:43 +0000"  >&lt;p&gt;I tried forcing a GC before pickling the session and still saw flakes: &lt;a href=&quot;https://github.com/apache/beam/pull/13096/checks?check_run_id=1250134859&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/13096/checks?check_run_id=1250134859&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17213505" author="bhulette" created="Wed, 14 Oct 2020 00:51:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/beam/pull/13099&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/13099&lt;/a&gt; should resolve the flakiness by skipping this test on windows. The action now is to fix and unskip the test, lowering priority.&lt;/p&gt;</comment>
                            <comment id="17248625" author="beamjirabot" created="Sun, 13 Dec 2020 17:12:39 +0000"  >&lt;p&gt;This issue is P2 but has been unassigned without any comment for 60 days so it has been labeled &quot;stale-P2&quot;. If this issue is still affecting you, we care! Please comment and remove the label. Otherwise, in 14 days the issue will be moved to P3.&lt;/p&gt;

&lt;p&gt;Please see &lt;a href=&quot;https://beam.apache.org/contribute/jira-priorities/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://beam.apache.org/contribute/jira-priorities/&lt;/a&gt; for a detailed explanation of what these priorities mean.&lt;/p&gt;</comment>
                            <comment id="17255273" author="beamjirabot" created="Sun, 27 Dec 2020 17:12:50 +0000"  >&lt;p&gt;This issue was marked &quot;stale-P2&quot; and has not received a public comment in 14 days. It is now automatically moved to P3. If you are still affected by it, you can comment and move it back to P2.&lt;/p&gt;</comment>
                            <comment id="17473917" author="kenn" created="Wed, 12 Jan 2022 03:50:21 +0000"  >&lt;p&gt;This Jira ticket has a pull request attached to it, but is still open. Did the pull request resolve the issue? If so, could you please mark it resolved? This will help the project have a clear view of its open issues.&lt;/p&gt;</comment>
                            <comment id="17549051" author="JIRAUSER282469" created="Sat, 4 Jun 2022 18:53:53 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/apache/beam/issues/20659&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/issues/20659&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0j11k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>