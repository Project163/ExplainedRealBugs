<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:24:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-14336] Access Denied: Table bigquery-samples:airline_ontime_data.flights</title>
                <link>https://issues.apache.org/jira/browse/BEAM-14336</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;This has been perma-red for the last week.&lt;br/&gt;
&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PostCommit_Python36/5189/testReport/junit/apache_beam.examples.dataframe.flight_delays_it_test/FlightDelaysTest/test_flight_delays/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PostCommit_Python36/5189/testReport/junit/apache_beam.examples.dataframe.flight_delays_it_test/FlightDelaysTest/test_flight_delays/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PostCommit_Python36/5215/testReport/apache_beam.examples.dataframe.flight_delays_it_test/FlightDelaysTest/test_flight_delays/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PostCommit_Python36/5215/testReport/apache_beam.examples.dataframe.flight_delays_it_test/FlightDelaysTest/test_flight_delays/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
self = &amp;lt;apache_beam.examples.dataframe.flight_delays_it_test.FlightDelaysTest testMethod=test_flight_delays&amp;gt;

    @pytest.mark.examples_postcommit
    @pytest.mark.it_postcommit
    def test_flight_delays(self):
      flight_delays.run_flight_delay_pipeline(
          self.test_pipeline,
          start_date=&lt;span class=&quot;code-quote&quot;&gt;&apos;2012-12-23&apos;&lt;/span&gt;,
          end_date=&lt;span class=&quot;code-quote&quot;&gt;&apos;2012-12-25&apos;&lt;/span&gt;,
&amp;gt;         output=self.output_path)

apache_beam/examples/dataframe/flight_delays_it_test.py:110: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
apache_beam/examples/dataframe/flight_delays.py:105: in run_flight_delay_pipeline
    result.to_csv(output)
apache_beam/pipeline.py:596: in __exit__
    self.result = self.run()
apache_beam/testing/test_pipeline.py:114: in run
    False &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; self.not_use_test_runner_api &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; test_runner_api))
apache_beam/pipeline.py:549: in run
    self._options).run(False)
apache_beam/pipeline.py:573: in run
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; self.runner.run_pipeline(self, self._options)
apache_beam/runners/dataflow/test_dataflow_runner.py:64: in run_pipeline
    self.result.wait_until_finish(duration=wait_duration)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = &amp;lt;DataflowPipelineResult &amp;lt;Job
 clientRequestId: &lt;span class=&quot;code-quote&quot;&gt;&apos;20220420090044988852-7153&apos;&lt;/span&gt;
 createTime: &lt;span class=&quot;code-quote&quot;&gt;&apos;2022-04-20T09:00:55.136265Z&apos;&lt;/span&gt;
...022-04-20T09:00:55.136265Z&apos;
 steps: []
 tempFiles: []
 type: TypeValueValuesEnum(JOB_TYPE_BATCH, 1)&amp;gt; at 0x7fcf0b6f0e80&amp;gt;
duration = None

    def wait_until_finish(self, duration=None):
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not self.is_in_terminal_state():
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not self.has_job:
          raise IOError(&lt;span class=&quot;code-quote&quot;&gt;&apos;Failed to get the Dataflow job id.&apos;&lt;/span&gt;)
    
        thread = threading.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;(
            target=DataflowRunner.poll_for_job_completion,
            args=(self._runner, self, duration))
    
        # Mark the thread as a daemon thread so a keyboard interrupt on the main
        # thread will terminate everything. This is also the reason we will not
        # use thread.join() to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the polling thread.
        thread.daemon = True
        thread.start()
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; thread.is_alive():
          time.sleep(5.0)
    
        # TODO: Merge the termination code in poll_for_job_completion and
        # is_in_terminal_state.
        terminated = self.is_in_terminal_state()
        &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; duration or terminated, (
            &lt;span class=&quot;code-quote&quot;&gt;&apos;Job did not reach to a terminal state after waiting indefinitely.&apos;&lt;/span&gt;)
    
        # TODO(BEAM-14291): Also run &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; check &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; wait_until_finish was called
        # after the pipeline completed.
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; terminated and self.state != PipelineState.DONE:
          # TODO(BEAM-1290): Consider converting &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; to an error log based on
          # theresolution of the issue.
          raise DataflowRuntimeException(
              &lt;span class=&quot;code-quote&quot;&gt;&apos;Dataflow pipeline failed. State: %s, Error:\n%s&apos;&lt;/span&gt; %
              (self.state, getattr(self._runner, &lt;span class=&quot;code-quote&quot;&gt;&apos;last_error_msg&apos;&lt;/span&gt;, None)),
&amp;gt;             self)
E         apache_beam.runners.dataflow.dataflow_runner.DataflowRuntimeException: Dataflow pipeline failed. State: FAILED, Error:
E         Traceback (most recent call last):
E           File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python3.6/site-packages/dataflow_worker/batchworker.py&quot;&lt;/span&gt;, line 646, in do_work
E             work_executor.execute()
E           File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python3.6/site-packages/dataflow_worker/executor.py&quot;&lt;/span&gt;, line 255, in execute
E             self._split_task)
E           File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python3.6/site-packages/dataflow_worker/executor.py&quot;&lt;/span&gt;, line 263, in _perform_source_split_considering_api_limits
E             desired_bundle_size)
E           File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python3.6/site-packages/dataflow_worker/executor.py&quot;&lt;/span&gt;, line 300, in _perform_source_split
E             &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; split in source.split(desired_bundle_size):
E           File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python3.6/site-packages/apache_beam/io/gcp/bigquery.py&quot;&lt;/span&gt;, line 810, in split
E             self._setup_temporary_dataset(bq)
E           File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python3.6/site-packages/apache_beam/options/value_provider.py&quot;&lt;/span&gt;, line 193, in _f
E             &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; fnc(self, *args, **kwargs)
E           File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python3.6/site-packages/apache_beam/io/gcp/bigquery.py&quot;&lt;/span&gt;, line 849, in _setup_temporary_dataset
E             self._get_project(), self.query.get(), self.use_legacy_sql)
E           File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python3.6/site-packages/apache_beam/utils/retry.py&quot;&lt;/span&gt;, line 253, in wrapper
E             &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; fun(*args, **kwargs)
E           File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python3.6/site-packages/apache_beam/io/gcp/bigquery_tools.py&quot;&lt;/span&gt;, line 416, in get_query_location
E             response = self.client.jobs.Insert(request)
E           File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python3.6/site-packages/apache_beam/io/gcp/internal/clients/bigquery/bigquery_v2_client.py&quot;&lt;/span&gt;, line 345, in Insert
E             upload=upload, upload_config=upload_config)
E           File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python3.6/site-packages/apitools/base/py/base_api.py&quot;&lt;/span&gt;, line 731, in _RunMethod
E             &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; self.ProcessHttpResponse(method_config, http_response, request)
E           File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python3.6/site-packages/apitools/base/py/base_api.py&quot;&lt;/span&gt;, line 737, in ProcessHttpResponse
E             self.__ProcessHttpResponse(method_config, http_response, request))
E           File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python3.6/site-packages/apitools/base/py/base_api.py&quot;&lt;/span&gt;, line 604, in __ProcessHttpResponse
E             http_response, method_config=method_config, request=request)
E         apitools.base.py.exceptions.HttpForbiddenError: HttpError accessing &amp;lt;https:&lt;span class=&quot;code-comment&quot;&gt;//bigquery.googleapis.com/bigquery/v2/projects/apache-beam-testing/jobs?alt=json&amp;gt;: response: &amp;lt;{&lt;span class=&quot;code-quote&quot;&gt;&apos;vary&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;Origin, X-Origin, Referer&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;content-type&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;application/json; charset=UTF-8&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;date&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;Wed, 20 Apr 2022 09:06:44 GMT&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;server&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;ESF&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;cache-control&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;x-xss-protection&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;0&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;x-frame-options&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;SAMEORIGIN&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;x-content-type-options&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;nosniff&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;transfer-encoding&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;chunked&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;status&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;403&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;content-length&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;528&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;-content-encoding&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;gzip&apos;&lt;/span&gt;}&amp;gt;, content &amp;lt;{
&lt;/span&gt;E           &lt;span class=&quot;code-quote&quot;&gt;&quot;error&quot;&lt;/span&gt;: {
E             &lt;span class=&quot;code-quote&quot;&gt;&quot;code&quot;&lt;/span&gt;: 403,
E             &lt;span class=&quot;code-quote&quot;&gt;&quot;message&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Access Denied: Table bigquery-samples:airline_ontime_data.flights: User does not have permission to query table bigquery-samples:airline_ontime_data.flights.&quot;&lt;/span&gt;,
E             &lt;span class=&quot;code-quote&quot;&gt;&quot;errors&quot;&lt;/span&gt;: [
E               {
E                 &lt;span class=&quot;code-quote&quot;&gt;&quot;message&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Access Denied: Table bigquery-samples:airline_ontime_data.flights: User does not have permission to query table bigquery-samples:airline_ontime_data.flights.&quot;&lt;/span&gt;,
E                 &lt;span class=&quot;code-quote&quot;&gt;&quot;domain&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;global&quot;&lt;/span&gt;,
E                 &lt;span class=&quot;code-quote&quot;&gt;&quot;reason&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;accessDenied&quot;&lt;/span&gt;
E               }
E             ],
E             &lt;span class=&quot;code-quote&quot;&gt;&quot;status&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;PERMISSION_DENIED&quot;&lt;/span&gt;
E           }
E         }
E         &amp;gt;

apache_beam/runners/dataflow/dataflow_runner.py:1661: DataflowRuntimeException
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13440728">BEAM-14336</key>
            <summary>Access Denied: Table bigquery-samples:airline_ontime_data.flights</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bhulette">Brian Hulette</assignee>
                                    <reporter username="apilloud">Andrew Pilloud</reporter>
                        <labels>
                            <label>stale-assigned</label>
                    </labels>
                <created>Wed, 20 Apr 2022 16:20:33 +0000</created>
                <updated>Thu, 26 May 2022 16:09:58 +0000</updated>
                            <resolved>Thu, 26 May 2022 16:09:58 +0000</resolved>
                                                    <fixVersion>Not applicable</fixVersion>
                                    <component>dsl-dataframe</component>
                    <component>examples-python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7800">2h 10m</timespent>
                                <comments>
                            <comment id="17525100" author="apilloud" created="Wed, 20 Apr 2022 16:22:23 +0000"  >&lt;p&gt;Also permared on Python 38 &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PostCommit_Python38/2539/testReport/apache_beam.examples.dataframe.flight_delays_it_test/FlightDelaysTest/test_flight_delays/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PostCommit_Python38/2539/testReport/apache_beam.examples.dataframe.flight_delays_it_test/FlightDelaysTest/test_flight_delays/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17525102" author="apilloud" created="Wed, 20 Apr 2022 16:23:04 +0000"  >&lt;p&gt;Also permared on Python 39 &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PostCommit_Python_Examples_Dataflow/292/testReport/apache_beam.examples.dataframe.flight_delays_it_test/FlightDelaysTest/test_flight_delays/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PostCommit_Python_Examples_Dataflow/292/testReport/apache_beam.examples.dataframe.flight_delays_it_test/FlightDelaysTest/test_flight_delays/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17525111" author="bhulette" created="Wed, 20 Apr 2022 16:38:08 +0000"  >&lt;p&gt;It looks like this dataset might have been deleted? I can&apos;t find it. I will sickbay the test and investigate.&lt;/p&gt;</comment>
                            <comment id="17525220" author="bhulette" created="Wed, 20 Apr 2022 19:11:28 +0000"  >&lt;p&gt;Test has been sickbayed. Lowering to P2 as we have lots of other test coverage here.&lt;/p&gt;

&lt;p&gt;I&apos;m following up with some BigQuery folks on this internally, I think we should be able to get access restored and unskip this test.&lt;/p&gt;</comment>
                            <comment id="17540463" author="beamjirabot" created="Sat, 21 May 2022 16:59:31 +0000"  >&lt;p&gt;This issue is assigned but has not received an update in 30 days so it has been labeled &quot;stale-assigned&quot;. If you are still working on the issue, please give an update and remove the label. If you are no longer working on the issue, please unassign so someone else may work on it. In 7 days the issue will be automatically unassigned.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 25 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z11n60:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>