<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:00:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-7747] ERROR: test_sink_transform (apache_beam.io.avroio_test.TestFastAvro) Fails on Windows</title>
                <link>https://issues.apache.org/jira/browse/BEAM-7747</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>
&lt;p&gt;======================================================================&lt;br/&gt;
ERROR: test_sink_transform (apache_beam.io.avroio_test.TestFastAvro)&lt;br/&gt;
----------------------------------------------------------------------&lt;br/&gt;
Traceback (most recent call last):&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\io\avroio_test.py&quot;, line 436, in test_sink_transform&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; avroio.WriteToAvro(path, self.SCHEMA, use_fastavro=self.use_fastavro)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\pipeline.py&quot;, line 426, in _&lt;em&gt;exit&lt;/em&gt;_&lt;br/&gt;
    self.run().wait_until_finish()&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\testing\test_pipeline.py&quot;, line 107, in run&lt;br/&gt;
    else test_runner_api))&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\pipeline.py&quot;, line 406, in run&lt;br/&gt;
    self._options).run(False)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\pipeline.py&quot;, line 419, in run&lt;br/&gt;
    return self.runner.run_pipeline(self, self._options)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\direct\direct_runner.py&quot;, line 128, in run_pipeline&lt;br/&gt;
    return runner.run_pipeline(pipeline, options)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\portability\fn_api_runner.py&quot;, line 319, in run_pipeline&lt;br/&gt;
    default_environment=self._default_environment))&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\portability\fn_api_runner.py&quot;, line 326, in run_via_runner_api&lt;br/&gt;
    return self.run_stages(stage_context, stages)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\portability\fn_api_runner.py&quot;, line 408, in run_stages&lt;br/&gt;
    stage_context.safe_coders)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\portability\fn_api_runner.py&quot;, line 681, in _run_stage&lt;br/&gt;
    result, splits = bundle_manager.process_bundle(data_input, data_output)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\portability\fn_api_runner.py&quot;, line 1562, in process_bundle&lt;br/&gt;
    part_inputs):&lt;br/&gt;
  File &quot;C:\venv\newenv1\lib\site-packages\concurrent\futures&amp;#95;base.py&quot;, line 641, in result_iterator&lt;br/&gt;
    yield fs.pop().result()&lt;br/&gt;
  File &quot;C:\venv\newenv1\lib\site-packages\concurrent\futures&amp;#95;base.py&quot;, line 462, in result&lt;br/&gt;
    return self.__get_result()&lt;br/&gt;
  File &quot;C:\venv\newenv1\lib\site-packages\concurrent\futures\thread.py&quot;, line 63, in run&lt;br/&gt;
    result = self.fn(*self.args, **self.kwargs)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\portability\fn_api_runner.py&quot;, line 1561, in &amp;lt;lambda&amp;gt;&lt;br/&gt;
    self._registered).process_bundle(part, expected_outputs),&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\portability\fn_api_runner.py&quot;, line 1500, in process_bundle&lt;br/&gt;
    result_future = self._controller.control_handler.push(process_bundle_req)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\portability\fn_api_runner.py&quot;, line 1017, in push&lt;br/&gt;
    response = self.worker.do_instruction(request)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\worker\sdk_worker.py&quot;, line 342, in do_instruction&lt;br/&gt;
    request.instruction_id)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\worker\sdk_worker.py&quot;, line 368, in process_bundle&lt;br/&gt;
    bundle_processor.process_bundle(instruction_id))&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\worker\bundle_processor.py&quot;, line 593, in process_bundle&lt;br/&gt;
    data.ptransform_id].process_encoded(data.data)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\worker\bundle_processor.py&quot;, line 143, in process_encoded&lt;br/&gt;
    self.output(decoded_value)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\worker\operations.py&quot;, line 256, in output&lt;br/&gt;
    cython.cast(Receiver, self.receivers&lt;span class=&quot;error&quot;&gt;&amp;#91;output_index&amp;#93;&lt;/span&gt;).receive(windowed_value)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\worker\operations.py&quot;, line 143, in receive&lt;br/&gt;
    self.consumer.process(windowed_value)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\worker\operations.py&quot;, line 594, in process&lt;br/&gt;
    delayed_application = self.dofn_receiver.receive(o)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\common.py&quot;, line 795, in receive&lt;br/&gt;
    self.process(windowed_value)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\common.py&quot;, line 801, in process&lt;br/&gt;
    self._reraise_augmented(exn)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\common.py&quot;, line 868, in _reraise_augmented&lt;br/&gt;
    raise_with_traceback(new_exn)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\common.py&quot;, line 799, in process&lt;br/&gt;
    return self.do_fn_invoker.invoke_process(windowed_value)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\common.py&quot;, line 611, in invoke_process&lt;br/&gt;
    windowed_value, additional_args, additional_kwargs, output_processor)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\common.py&quot;, line 683, in _invoke_process_per_window&lt;br/&gt;
    windowed_value, self.process_method(*args_for_process))&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\runners\common.py&quot;, line 914, in process_outputs&lt;br/&gt;
    for result in results:&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\io\iobase.py&quot;, line 1085, in &amp;lt;genexpr&amp;gt;&lt;br/&gt;
    window.TimestampedValue(v, timestamp.MAX_TIMESTAMP) for v in outputs)&lt;br/&gt;
  File &quot;C:\projects\beam\sdks\python\apache_beam\io\filebasedsink.py&quot;, line 322, in finalize_write&lt;br/&gt;
    &apos;Encountered exceptions in finalize_write: %s&apos; % all_exceptions)&lt;br/&gt;
Exception: Encountered exceptions in finalize_write: [IOError(WindowsError(32, &apos;The process cannot access the file becau&lt;br/&gt;
se it is being used by another process&apos;),)] &lt;span class=&quot;error&quot;&gt;&amp;#91;while running &amp;#39;WriteToAvro/Write/WriteImpl/FinalizeWrite&amp;#39;&amp;#93;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13245046">BEAM-7747</key>
            <summary>ERROR: test_sink_transform (apache_beam.io.avroio_test.TestFastAvro) Fails on Windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tvalentyn">Valentyn Tymofieiev</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Jul 2019 19:04:23 +0000</created>
                <updated>Sat, 16 May 2020 13:31:31 +0000</updated>
                            <resolved>Wed, 7 Aug 2019 21:19:58 +0000</resolved>
                                                    <fixVersion>2.15.0</fixVersion>
                                    <component>io-py-avro</component>
                    <component>test-failures</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="13200">3h 40m</timespent>
                                <comments>
                            <comment id="16889173" author="tvalentyn" created="Fri, 19 Jul 2019 20:56:04 +0000"  >&lt;p&gt;I suspect a temporary file created by FastAvroIO is not is not being closed in time.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR:root:Exception in _rename_batch. src: 
c:\users\deft-t~1\appdata\local\temp\2\beam-temp-tmpokw4ei-d2a9f2cfaa6611e981e8c45de4a2bf0c\1eb13c37-3f7c-4f0e-b553-32c7248d2c74.tmpokw4ei, dst: 
c:\users\deft-t~1\appdata\local\temp\2\tmpokw4ei-00000-of-00001, err: [Error 32] The process cannot access the file because it is being used by another 
process
ERROR
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16889229" author="tvalentyn" created="Fri, 19 Jul 2019 23:00:08 +0000"  >&lt;p&gt;Currently, _FastAvroSink.close() calls &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; `flush()` method on FastAvro writer, which does not close the file handle &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;. On Windows platform, the temporary output file created by the sink cannot be accessed until it is closed.&lt;br/&gt;
PR  #9111 out to fix this.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/beam/blob/2bbf6eb1f65f49625d2f17b2703ec1e774f8c85f/sdks/python/apache_beam/io/avroio.py#L631&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/blob/2bbf6eb1f65f49625d2f17b2703ec1e774f8c85f/sdks/python/apache_beam/io/avroio.py#L631&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/fastavro/fastavro/blob/53ed64d95d4f82875d1238b1f76d4d87547e40e1/fastavro/_write.pyx#L548&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/fastavro/fastavro/blob/53ed64d95d4f82875d1238b1f76d4d87547e40e1/fastavro/_write.pyx#L548&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 17 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04oug:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>