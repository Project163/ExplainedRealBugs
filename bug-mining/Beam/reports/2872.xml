<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:24:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-13519] Java precommit flaky (timing out)</title>
                <link>https://issues.apache.org/jira/browse/BEAM-13519</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Java precommits are sometimes timing out with no clear cause. Gradle will log a bunch of routine build tasks, and then Jenkins will abort the job much later. There are no logs to indicate what happened. It is not even clear which task or tasks, if any, was the culprit, since many tasks are run in parallel.&lt;/p&gt;

&lt;p&gt;01:53:28 &amp;gt; Task :sdks:java:testing:nexmark:build&lt;br/&gt;
01:53:28 &amp;gt; Task :sdks:java:testing:nexmark:buildDependents&lt;br/&gt;
01:53:28 &amp;gt; Task :sdks:java:extensions:sql:zetasql:buildDependents&lt;br/&gt;
01:53:28 &amp;gt; Task :sdks:java:io:google-cloud-platform:buildDependents&lt;br/&gt;
01:53:28 &amp;gt; Task :sdks:java:extensions:sql:buildDependents&lt;br/&gt;
01:53:28 &amp;gt; Task :sdks:java:io:kafka:buildDependents&lt;br/&gt;
01:53:28 &amp;gt; Task :sdks:java:extensions:join-library:buildDependents&lt;br/&gt;
01:53:28 &amp;gt; Task :sdks:java:io:synthetic:buildDependents&lt;br/&gt;
01:53:28 &amp;gt; Task :sdks:java:io:mongodb:buildDependents&lt;br/&gt;
01:53:28 &amp;gt; Task :sdks:java:io:thrift:buildDependents&lt;br/&gt;
01:53:28 &amp;gt; Task :sdks:java:testing:test-utils:buildDependents&lt;br/&gt;
01:53:28 &amp;gt; Task :sdks:java:expansion-service:buildDependents&lt;br/&gt;
01:53:28 &amp;gt; Task :sdks:java:extensions:arrow:buildDependents&lt;br/&gt;
01:53:28 &amp;gt; Task :sdks:java:extensions:protobuf:buildDependents&lt;br/&gt;
01:53:28 &amp;gt; Task :sdks:java:io:common:buildDependents&lt;br/&gt;
01:53:28 &amp;gt; Task :runners:direct-java:buildDependents&lt;br/&gt;
01:53:28 &amp;gt; Task :runners:local-java:buildDependents&lt;br/&gt;
01:53:28 Build timed out (after 120 minutes). Marking the build as aborted.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_cron/4874/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_cron/4874/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13419061">BEAM-13519</key>
            <summary>Java precommit flaky (timing out)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10101" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">P1</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kileys">Kiley Sok</assignee>
                                    <reporter username="ibzib">Kyle Weaver</reporter>
                        <labels>
                            <label>flake</label>
                    </labels>
                <created>Wed, 22 Dec 2021 17:01:30 +0000</created>
                <updated>Wed, 6 Apr 2022 21:54:56 +0000</updated>
                            <resolved>Wed, 6 Apr 2022 21:54:56 +0000</resolved>
                                                    <fixVersion>2.38.0</fixVersion>
                                    <component>test-failures</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="9600">2h 40m</timespent>
                                <comments>
                            <comment id="17463968" author="ibzib" created="Wed, 22 Dec 2021 17:10:05 +0000"  >&lt;p&gt;It is possible to enforce timeouts per Gradle task, however a task&apos;s timeout does not apply to its dependency tasks, so unfortunately we can&apos;t simply slap a 2hr time limit on the :javaPreCommit task. &lt;/p&gt;</comment>
                            <comment id="17480492" author="beamjirabot" created="Sat, 22 Jan 2022 16:57:11 +0000"  >&lt;p&gt;This issue is assigned but has not received an update in 30 days so it has been labeled &quot;stale-assigned&quot;. If you are still working on the issue, please give an update and remove the label. If you are no longer working on the issue, please unassign so someone else may work on it. In 7 days the issue will be automatically unassigned.&lt;/p&gt;</comment>
                            <comment id="17484201" author="beamjirabot" created="Sat, 29 Jan 2022 17:26:12 +0000"  >&lt;p&gt;This issue was marked &quot;stale-assigned&quot; and has not received a public comment in 7 days. It is now automatically unassigned. If you are still working on it, you can assign it to yourself again. Please also give an update about the status of the work.&lt;/p&gt;</comment>
                            <comment id="17514374" author="danoliveira" created="Wed, 30 Mar 2022 00:23:41 +0000"  >&lt;p&gt;This is resurfacing now, despite the Precommit timeout getting extended to 180 minutes. Check out &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Cron/5270/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Cron/5270/&lt;/a&gt; for example:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;12:00:48 &amp;gt; Task :sdks:java:core:validateShadedJarDoesntLeakNonProjectClasses
12:00:48 &amp;gt; Task :sdks:java:core:check
12:00:48 &amp;gt; Task :sdks:java:core:build
12:00:48 &amp;gt; Task :sdks:java:core:buildNeeded
14:16:44 Build timed out (after 180 minutes). Marking the build as aborted.
14:16:44 Build was aborted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17514377" author="danoliveira" created="Wed, 30 Mar 2022 00:24:44 +0000"  >&lt;p&gt;I should probably add that this has been making reviewing PRs annoying since it makes the Java precommit very flaky, and since it takes ~3 hours to run, deflaking is a huge time sink.&lt;/p&gt;</comment>
                            <comment id="17514898" author="kileys" created="Wed, 30 Mar 2022 19:01:51 +0000"  >&lt;p&gt;Some builds were able to publish Gradle scans&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;  before aborting and they show it&apos;s getting stuck on this test testCachingOfClient. Skipping it to see if it helps&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://scans.gradle.com/s/p6yc5tr4cnyjq/tests/slowest-tests#testcachingofclient-0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://scans.gradle.com/s/p6yc5tr4cnyjq/tests/slowest-tests#testcachingofclient-0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17514933" author="bhulette" created="Wed, 30 Mar 2022 20:34:10 +0000"  >&lt;p&gt;We should consider rolling back my change to the timeout (&lt;a href=&quot;https://github.com/apache/beam/pull/17157&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/17157&lt;/a&gt;) if testCachingOfClient is in fact the culprit.&lt;/p&gt;</comment>
                            <comment id="17515561" author="kileys" created="Thu, 31 Mar 2022 19:51:57 +0000"  >&lt;p&gt;Cron and commit jobs are looking okay so far. I&apos;ll lower the timeout and cut a new ticket for the stuck test if it&apos;s the same tomorrow.&lt;/p&gt;</comment>
                            <comment id="17515652" author="lcwik" created="Fri, 1 Apr 2022 01:20:53 +0000"  >&lt;p&gt;testCachingOfClient definitely was getting stuck, fix in &lt;a href=&quot;https://github.com/apache/beam/pull/17240&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/17240&lt;/a&gt; with a few more fixes related to threading as well.&lt;/p&gt;</comment>
                            <comment id="17517703" author="danoliveira" created="Tue, 5 Apr 2022 21:05:55 +0000"  >&lt;p&gt;I see there was an actual race condition causing this and not just an error with the test, so it looks important enough to cherry-pick. Any bug able to cause consistent failures in a Precommit like this is definitely release-blocking.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13419075">BEAM-13523</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 31 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0xywg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>