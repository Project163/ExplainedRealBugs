<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:18:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-12479] UnsupportedOperationException when reading from BigQuery tables and converting TableRows to Beam Rows</title>
                <link>https://issues.apache.org/jira/browse/BEAM-12479</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;&lt;tt&gt;UnsupportedOperationExceptions&lt;/tt&gt; are thrown in&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;org.apache.beam.sdk.io.gcp.bigquery.BigQueryUtils#toBeamValue(FieldType, Object)&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;when reading from BigQuery tables with&#160;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO#readTableRowsWithSchema()&lt;/tt&gt; and converting the returned &lt;tt&gt;TableRows&lt;/tt&gt; to Beam &lt;tt&gt;Rows&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
PCollection&amp;lt;Row&amp;gt; rows =
 pipeline
 .apply(
 &lt;span class=&quot;code-quote&quot;&gt;&quot;Read from BigQuery table&quot;&lt;/span&gt;,
 BigQueryIO.readTableRowsWithSchema().from(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;%s:%s.%s&quot;&lt;/span&gt;, project, dataset, table)))
 .apply(Convert.toRows());&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;UnsupportedOperationException&lt;/tt&gt;&#160;messages that I have encountered are of the type:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Converting BigQuery type &quot;java.lang.Boolean&quot; to &quot;BOOLEAN&quot;&#160;is not supported&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Converting BigQuery type &quot;java.lang.Double&quot; to &quot;DOUBLE&quot;&#160;is not supported&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;...While the conversion of these Java types should be straightforward.&lt;/p&gt;

&lt;p&gt;Indeed, the method &lt;tt&gt;BigQueryUtils#toBeamValue(FieldType, Object)&lt;/tt&gt; expects only &lt;tt&gt;String&lt;/tt&gt; objects or &lt;tt&gt;Collections&lt;/tt&gt; of &lt;tt&gt;Strings&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I had to upgrade&#160;&lt;tt&gt;com.google.cloud:google-cloud-bigquery&lt;/tt&gt; from 1.108.0 to&#160;1.132.0 in my project. So my guess is this latest version is now able to map BiqQuery (SQL) types to Java types instead of raw Strings, in particular BOOL to Boolean, INT64 to Long and FLOAT64 to Double.&lt;/p&gt;

&lt;p&gt;In my understanding though, from BigQuery to Beam, there would be no need to manage Java Byte, Short, Integer and Float since BigQuery types are &quot;limited&quot; to standard SQL types INT64, and FLOAT64 that encompass them all (on the other hand, BQ NUMERIC type is mapped to Java BigDecimal).&lt;/p&gt;

&lt;p&gt;I propose a pull request to also support &lt;tt&gt;Number&lt;/tt&gt; and &lt;tt&gt;Boolean&lt;/tt&gt; objects in method &lt;tt&gt;BigQueryUtils#toBeamValue(FieldType, Object)&lt;/tt&gt;. It is only added behavior and the updated method is still compatible with the current functioning.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>Beam Java SDK</environment>
        <key id="13383444">BEAM-12479</key>
            <summary>UnsupportedOperationException when reading from BigQuery tables and converting TableRows to Beam Rows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="10722" iconUrl="https://issues.apache.org/jira/images/icons/statuses/generic.png" description="">Triage Needed</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pgillet">Pascal GILLET</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 11 Jun 2021 15:26:26 +0000</created>
                <updated>Thu, 13 Apr 2023 11:06:46 +0000</updated>
                            <resolved>Thu, 9 Sep 2021 20:23:33 +0000</resolved>
                                    <version>2.29.0</version>
                                    <fixVersion>2.33.0</fixVersion>
                                    <component>io-java-gcp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4800">1h 20m</timespent>
                                <comments>
                            <comment id="17380758" author="beamjirabot" created="Wed, 14 Jul 2021 17:20:22 +0000"  >&lt;p&gt;This issue is assigned but has not received an update in 30 days so it has been labeled &quot;stale-assigned&quot;. If you are still working on the issue, please give an update and remove the label. If you are no longer working on the issue, please unassign so someone else may work on it. In 7 days the issue will be automatically unassigned.&lt;/p&gt;</comment>
                            <comment id="17381516" author="angoenka" created="Thu, 15 Jul 2021 18:13:58 +0000"  >&lt;p&gt;As this issue has not been worked on, I am moving it to 2.33&lt;/p&gt;

&lt;p&gt;Please move it back to 2.32 ASAP if this is blocker for 2.32&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/AddComment!default.jspa?id=13368617&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/AddComment!default.jspa?id=13368617&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="17386398" author="beamjirabot" created="Fri, 23 Jul 2021 17:21:14 +0000"  >&lt;p&gt;This issue was marked &quot;stale-assigned&quot; and has not received a public comment in 7 days. It is now automatically unassigned. If you are still working on it, you can assign it to yourself again. Please also give an update about the status of the work.&lt;/p&gt;</comment>
                            <comment id="17412818" author="udim" created="Thu, 9 Sep 2021 20:23:25 +0000"  >&lt;p&gt;This seems to have been resolved (PR above was merged), closing. Please reopen ASAP if not.&lt;/p&gt;</comment>
                            <comment id="17413042" author="pgillet" created="Fri, 10 Sep 2021 08:03:07 +0000"  >&lt;p&gt;I confirm: I created both the Jira ticket and the PR, which has been merged and closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 9 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rvxk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>