<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:43:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-1777] If PipelineEnforcement throws an exception after Pipeline.run() fails, it overwrites the original failure</title>
                <link>https://issues.apache.org/jira/browse/BEAM-1777</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;The exception is thrown out of the finally block after the original exception was already thrown, and is not properly suppressed.&lt;/p&gt;

&lt;p&gt;If the Pipeline throws an exception in construction (including validation failures), this can cause &lt;tt&gt;AbandonedNodeEnforcement&lt;/tt&gt; to attempt to traverse a &lt;tt&gt;Pipeline&lt;/tt&gt; which is invalid, which throws another exception. That exception is improperly propagated instead of the original failure, which complicates debugging.&lt;/p&gt;

&lt;p&gt;An example is using an unkeyed input PCollection to a Stateful ParDo. The validation will fail, but the error message will suggest that a node has incompletely specified outputs (which is a consequence rather than a cause of having an invalid transform).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13058003">BEAM-1777</key>
            <summary>If PipelineEnforcement throws an exception after Pipeline.run() fails, it overwrites the original failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="staslev">Stas Levin</assignee>
                                    <reporter username="tgroh">Thomas Groh</reporter>
                        <labels>
                            <label>Done</label>
                    </labels>
                <created>Tue, 21 Mar 2017 20:57:00 +0000</created>
                <updated>Tue, 6 Oct 2020 21:51:47 +0000</updated>
                            <resolved>Thu, 27 Apr 2017 16:56:33 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                                    <component>sdk-java-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15936232" author="staslev" created="Wed, 22 Mar 2017 12:45:06 +0000"  >&lt;p&gt;I wonder if this can be resolved by removing the &lt;tt&gt;finally&lt;/tt&gt; around &lt;tt&gt;enforcement.get().afterPipelineExecution()&lt;/tt&gt;.&lt;br/&gt;
At first glance, if &lt;tt&gt;Pipeline#run()&lt;/tt&gt; fails there&apos;s little point in moving on to checking enforcements and the likes.&lt;/p&gt;

&lt;p&gt;I&apos;ll look into it.&lt;/p&gt;</comment>
                            <comment id="15952626" author="githubbot" created="Sun, 2 Apr 2017 11:11:49 +0000"  >&lt;p&gt;GitHub user staslev opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/2403&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/2403&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-1777&quot; title=&quot;If PipelineEnforcement throws an exception after Pipeline.run() fails, it overwrites the original failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-1777&quot;&gt;&lt;del&gt;BEAM-1777&lt;/del&gt;&lt;/a&gt; In certain circumstances PipelineEnforcement shades exceptions.&lt;/p&gt;

&lt;p&gt;    &#8230;ine&apos;s exceptions.&lt;/p&gt;

&lt;p&gt;    Be sure to do all of the following to help us incorporate your contribution&lt;br/&gt;
    quickly and easily:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Make sure the PR title is formatted like:&lt;br/&gt;
       `&lt;a href=&quot;#&amp;gt;&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;BEAM-&amp;lt;Jira issue #&amp;gt;&lt;/a&gt; Description of pull request`&lt;/li&gt;
	&lt;li&gt;[ ] Make sure tests pass via `mvn clean verify`. (Even better, enable&lt;br/&gt;
           Travis-CI on your fork and ensure the whole test matrix passes).&lt;/li&gt;
	&lt;li&gt;[ ] Replace `&amp;lt;Jira issue #&amp;gt;` in the title with the actual Jira issue&lt;br/&gt;
           number, if there is one.&lt;/li&gt;
	&lt;li&gt;[ ] If this contribution is large, please file an Apache&lt;br/&gt;
           &lt;span class=&quot;error&quot;&gt;&amp;#91;Individual Contributor License Agreement&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.apache.org/licenses/icla.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/licenses/icla.txt&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    &amp;#8212;&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/staslev/beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/staslev/beam&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-1777&quot; title=&quot;If PipelineEnforcement throws an exception after Pipeline.run() fails, it overwrites the original failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-1777&quot;&gt;&lt;del&gt;BEAM-1777&lt;/del&gt;&lt;/a&gt;-PipelineEnforcement-shades-run-exceptions&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/2403.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/2403.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2403&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 5ecf911f2f826594d829d4820c5e26e6705b8afe&lt;br/&gt;
Author: Stas Levin &amp;lt;staslevin@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-04-02T11:09:43Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-1777&quot; title=&quot;If PipelineEnforcement throws an exception after Pipeline.run() fails, it overwrites the original failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-1777&quot;&gt;&lt;del&gt;BEAM-1777&lt;/del&gt;&lt;/a&gt; In certain circumstances PipelineEnforcement shades pipeline&apos;s exceptions.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15956435" author="githubbot" created="Wed, 5 Apr 2017 07:28:22 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/2403&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/2403&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15956479" author="staslev" created="Wed, 5 Apr 2017 08:00:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tgroh&quot; class=&quot;user-hover&quot; rel=&quot;tgroh&quot;&gt;tgroh&lt;/a&gt; since I was unable to come up with a proper test for this, would you mind confirming it resolves the use-case you encountered (the fix is already in the master)?&lt;/p&gt;</comment>
                            <comment id="15986425" author="staslev" created="Thu, 27 Apr 2017 11:46:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tgroh&quot; class=&quot;user-hover&quot; rel=&quot;tgroh&quot;&gt;tgroh&lt;/a&gt; do you believe we can mark this one as resolved?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 29 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3clin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>