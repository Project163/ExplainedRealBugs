<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:09:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-9164] [PreCommit_Java] [Flake] UnboundedSourceWrapperTest$ParameterizedUnboundedSourceWrapperTest</title>
                <link>https://issues.apache.org/jira/browse/BEAM-9164</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Test:&lt;/p&gt;

&lt;p&gt;org.apache.beam.runners.flink.translation.wrappers.streaming.io.UnboundedSourceWrapperTest$ParameterizedUnboundedSourceWrapperTest &amp;gt;&amp;gt;&#160;testWatermarkEmission&lt;span class=&quot;error&quot;&gt;&amp;#91;numTasks = 1; numSplits=1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Fails with the following exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.junit.runners.model.TestTimedOutException:&#160;test timed out after 30000 milliseconds&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Affected Jenkins job:&#160;&lt;a href=&quot;https://builds.apache.org/job/beam_PreCommit_Java_Phrase/1665/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PreCommit_Java_Phrase/1665/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Gradle build scan:&#160;&lt;a href=&quot;https://scans.gradle.com/s/nvgeb425fe63q&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://scans.gradle.com/s/nvgeb425fe63q&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13280836">BEAM-9164</key>
            <summary>[PreCommit_Java] [Flake] UnboundedSourceWrapperTest$ParameterizedUnboundedSourceWrapperTest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10101" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">P1</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mxm">Maximilian Michels</assignee>
                                    <reporter username="kirillkozlov">Kirill Kozlov</reporter>
                        <labels>
                            <label>flake</label>
                    </labels>
                <created>Tue, 21 Jan 2020 20:44:42 +0000</created>
                <updated>Thu, 18 Jun 2020 09:23:02 +0000</updated>
                            <resolved>Thu, 18 Jun 2020 09:23:02 +0000</resolved>
                                                    <fixVersion>Not applicable</fixVersion>
                                    <component>runner-flink</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="17022558" author="ibzib" created="Thu, 23 Jan 2020 22:26:41 +0000"  >&lt;p&gt;Same thing happened on &lt;a href=&quot;https://builds.apache.org/job/beam_PreCommit_Java_Commit/9726&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PreCommit_Java_Commit/9726&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17057128" author="suztomo" created="Wed, 11 Mar 2020 15:40:11 +0000"  >&lt;p&gt;I tried to reproduce the flakiness in my workstation by running the &lt;tt&gt;UnboundedSourceWrapperTest&lt;/tt&gt; 100 times, but could not reproduce the failure.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    @Parameterized.Parameters(name = &quot;numTasks = {0}; numSplits={1}&quot;)
    public static Collection&amp;lt;Object[]&amp;gt; data() {
      /*
       * Parameters for initializing the tests:
       * {numTasks, numSplits}
       * The test currently assumes powers of two for some assertions.
       */

      ImmutableList.Builder&amp;lt;Object[]&amp;gt; list = ImmutableList.builder();
      for (int i=0; i&amp;lt; 100; ++i) {
        list.addAll(Arrays.asList(new Object[][] {
            {1, 1}, {1, 2}, {1, 4},
            {2, 1}, {2, 2}, {2, 4},
            {4, 1}, {4, 2}, {4, 4},
        }));
      }
      return list.build();
    }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Memo: what if the test is interfered by other tests? How can we verify a fix is correct solution?&lt;/p&gt;</comment>
                            <comment id="17083408" author="ibzib" created="Tue, 14 Apr 2020 16:39:24 +0000"  >&lt;p&gt;Saw a timeout on  org.apache.beam.runners.flink.translation.wrappers.streaming.io.UnboundedSourceWrapperTest$ParameterizedUnboundedSourceWrapperTest.testWatermarkEmission&lt;span class=&quot;error&quot;&gt;&amp;#91;numTasks = 4; numSplits=1&amp;#93;&lt;/span&gt;.&lt;/p&gt;</comment>
                            <comment id="17104924" author="ibzib" created="Mon, 11 May 2020 21:56:41 +0000"  >&lt;p&gt;Note that we are ignoring this test for now: &lt;a href=&quot;https://github.com/apache/beam/pull/11614&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/11614&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I ran UnboundedSourceWrapperTest a great many times on my desktop as well, but I was unable to reproduce the error. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mxm&quot; class=&quot;user-hover&quot; rel=&quot;mxm&quot;&gt;mxm&lt;/a&gt; Have you investigated this?&lt;/p&gt;</comment>
                            <comment id="17105184" author="mxm" created="Tue, 12 May 2020 07:42:43 +0000"  >&lt;p&gt;I was not aware that tests had been disabled. I&apos;m a bit shocked that we just disabled them without mentioning relevant folks or at least posting in the JIRA.&lt;/p&gt;

&lt;p&gt;I changed logic around the watermark propagation in &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-9900&quot; title=&quot;Remove the need for shutdownSourcesOnFinalWatermark flag&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-9900&quot;&gt;&lt;del&gt;BEAM-9900&lt;/del&gt;&lt;/a&gt; which could have removed the flakiness. I&apos;ll re-enable the tests.&lt;/p&gt;</comment>
                            <comment id="17105722" author="mxm" created="Tue, 12 May 2020 20:36:25 +0000"  >&lt;p&gt;This should be fixed but feel free to re-open if it pops up again.&lt;/p&gt;</comment>
                            <comment id="17136125" author="bhulette" created="Mon, 15 Jun 2020 19:56:08 +0000"  >&lt;p&gt;Just saw this again here: &lt;a href=&quot;https://builds.apache.org/job/beam_PreCommit_Java_Commit/11773/testReport/junit/org.apache.beam.runners.flink.translation.wrappers.streaming.io/UnboundedSourceWrapperTest$ParameterizedUnboundedSourceWrapperTest/testWatermarkEmission_numTasks___4__numSplits_2_/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PreCommit_Java_Commit/11773/testReport/junit/org.apache.beam.runners.flink.translation.wrappers.streaming.io/UnboundedSourceWrapperTest$ParameterizedUnboundedSourceWrapperTest/testWatermarkEmission_numTasks___4__numSplits_2_/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17136127" author="bhulette" created="Mon, 15 Jun 2020 19:56:30 +0000"  >&lt;p&gt;Do you have time to take a look &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mxm&quot; class=&quot;user-hover&quot; rel=&quot;mxm&quot;&gt;mxm&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17138359" author="mxm" created="Wed, 17 Jun 2020 11:43:31 +0000"  >&lt;p&gt;Finally had a look at the code. I was able to find the race condition. PR: &lt;a href=&quot;https://github.com/apache/beam/pull/12025&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/12025&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17139253" author="mxm" created="Thu, 18 Jun 2020 09:23:02 +0000"  >&lt;p&gt;The root cause has been investigated and fixed per &lt;a href=&quot;https://github.com/apache/beam/pull/12025&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/12025&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13301604">BEAM-9843</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0aqlk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>