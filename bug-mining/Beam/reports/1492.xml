<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:03:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-8814] --no_auth flag is boolean type and is misleading</title>
                <link>https://issues.apache.org/jira/browse/BEAM-8814</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Pipeline options defines a &lt;a href=&quot;#L468]&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;no_auth&lt;/a&gt;&#160;flag that is type=bool. This type is known to be ambiguous because it will expect a value, but anything passed to it will be considered True. For example, passing in &quot;--no_auth=False&quot; would still evaluate to True. We should instead use action=&quot;store_true&quot; which only detects whether the flag is passed or not.&#160;&lt;/p&gt;

&lt;p&gt;Furthermore, &lt;a href=&quot;#L229]&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;PipelineOptions.from_dictionary&lt;/a&gt; will assume that boolean flags are passed in without values (e.g.&#160;passing --no_auth, instead of --no_auth=True). This, combined with type=bool failing without a value, will ensure that it always fails.&#160;&lt;/p&gt;

&lt;p&gt;sdk_worker_main is the only place that uses from_dictionary (aside from tests), and it will crash if no_auth flag is passed. Looking at pipeline_options_test, tests that call &lt;a href=&quot;#L218]&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;from_dictionary&lt;/a&gt; will feed in get_all_options, which means it have intended to only be used for serializing/deserializing flag options.&lt;/p&gt;

&lt;p&gt;So from here, to support the no_auth flag:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;we change no_auth so that it is action=&quot;store_true&quot;, or&lt;/li&gt;
	&lt;li&gt;we change sdk_worker_main so that it does not use from_dictionary&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Or both.&lt;/p&gt;</description>
                <environment>Python2, Python3</environment>
        <key id="13270207">BEAM-8814</key>
            <summary>--no_auth flag is boolean type and is misleading</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10101" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">P1</priority>
                        <status id="10722" iconUrl="https://issues.apache.org/jira/images/icons/statuses/generic.png" description="">Triage Needed</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wintermelons">David Song</assignee>
                                    <reporter username="wintermelons">David Song</reporter>
                        <labels>
                            <label>backward-incompatible</label>
                    </labels>
                <created>Sat, 23 Nov 2019 01:44:50 +0000</created>
                <updated>Thu, 13 Apr 2023 10:58:53 +0000</updated>
                            <resolved>Thu, 5 Dec 2019 17:52:44 +0000</resolved>
                                    <version>2.14.0</version>
                    <version>2.15.0</version>
                    <version>2.16.0</version>
                    <version>2.17.0</version>
                                    <fixVersion>2.18.0</fixVersion>
                                    <component>sdk-py-harness</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="1"/>
                                    <progress percentage="1">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="1" backgroundColor="#51a825"/>
                                                    <row percentage="99" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="1">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="1" backgroundColor="#51a825"/>
                                                    <row percentage="99" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="604800">168h</timeoriginalestimate>
                            <timeestimate seconds="598200">166h 10m</timeestimate>
                            <timespent seconds="6600">1h 50m</timespent>
                                <comments>
                            <comment id="16980705" author="wintermelons" created="Sat, 23 Nov 2019 07:20:21 +0000"  >&lt;p&gt;More details on sdk_worker_main: I&apos;ve found this bug mainly due that I could not pass no_auth flag when running the worker. sdk_worker_main will serialize the flag value and then somewhere down the line reparse it. When doing this with a type=bool flag and using use_dictionary to deserialize, there will be an error and the program will crash.&lt;/p&gt;

&lt;p&gt;Created a simple test to mimic behavior at&#160;&lt;a href=&quot;https://github.com/wintermelons/beam/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/wintermelons/beam/pull/1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Output when running the test:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ python pipeline_options_bool_test.py
usage: pipeline_options_bool_test.py [-h] [--runner RUNNER] [--streaming]
[some outputs omitted]
pipeline_options_bool_test.py: error: argument --no_auth: ignored explicit argument &lt;span class=&quot;code-quote&quot;&gt;&apos;False&apos;&lt;/span&gt;
E
======================================================================
ERROR: test_serialize_deserialize (__main__.PipelineOptionsTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/lib/python3.6/argparse.py&quot;&lt;/span&gt;, line 1775, in parse_known_args
    namespace, args = self._parse_known_args(args, namespace)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/lib/python3.6/argparse.py&quot;&lt;/span&gt;, line 1981, in _parse_known_args
    start_index = consume_optional(start_index)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/lib/python3.6/argparse.py&quot;&lt;/span&gt;, line 1903, in consume_optional
    raise ArgumentError(action, msg % explicit_arg)
argparse.ArgumentError: argument --no_auth: ignored explicit argument &lt;span class=&quot;code-quote&quot;&gt;&apos;False&apos;&lt;/span&gt;During handling of the above exception, another exception occurred:Traceback (most recent call last):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;options/pipeline_options_bool_test.py&quot;&lt;/span&gt;, line 48, in test_serialize_deserialize
    all_options_dict = options.get_all_options()
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/wintermelons/dev/beam/sdks/python/apache_beam/options/pipeline_options.py&quot;&lt;/span&gt;, line 266, in get_all_options
    known_args, unknown_args = parser.parse_known_args(self._flags)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/lib/python3.6/argparse.py&quot;&lt;/span&gt;, line 1782, in parse_known_args
    self.error(str(err))
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/wintermelons/dev/beam/sdks/python/apache_beam/options/pipeline_options.py&quot;&lt;/span&gt;, line 123, in error
    &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(_BeamArgumentParser, self).error(message)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/lib/python3.6/argparse.py&quot;&lt;/span&gt;, line 2402, in error
    self.exit(2, _(&lt;span class=&quot;code-quote&quot;&gt;&apos;%(prog)s: error: %(message)s\n&apos;&lt;/span&gt;) % args)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/lib/python3.6/argparse.py&quot;&lt;/span&gt;, line 2389, in exit
    _sys.exit(status)
SystemExit: 2&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16989029" author="kenn" created="Thu, 5 Dec 2019 17:51:38 +0000"  >&lt;p&gt;Per &lt;a href=&quot;https://beam.apache.org/contribute/jira-priorities/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://beam.apache.org/contribute/jira-priorities/&lt;/a&gt; this is probably at most P1&lt;/p&gt;</comment>
                            <comment id="16989031" author="kenn" created="Thu, 5 Dec 2019 17:52:26 +0000"  >&lt;p&gt;If this has never worked, it is not a regression, yes? At this point 2.17.0 is very delayed and 2.18.0 is even on the way. I do not think it is worth cherrypicking.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z08xqg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>