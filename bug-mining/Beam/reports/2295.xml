<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:15:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-11277] WriteToBigQuery with batch file loads does not respect schema update options when there are multiple load jobs</title>
                <link>https://issues.apache.org/jira/browse/BEAM-11277</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;When multiple load jobs are needed to write data to a destination table, e.g., when the data is spread over more than &lt;a href=&quot;https://cloud.google.com/bigquery/quotas#load_jobs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;10,000&lt;/a&gt; URIs, WriteToBigQuery in FILE_LOADS mode will write data into temporary tables and then copy the temporary tables into the destination table.&lt;/p&gt;

&lt;p&gt;When WriteToBigQuery is used with &lt;tt&gt;write_disposition=BigQueryDisposition.WRITE_APPEND&lt;/tt&gt; and &lt;tt&gt;additional_bq_parameters={&quot;schemaUpdateOptions&quot;: &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;ALLOW_FIELD_ADDITION&amp;quot;&amp;#93;&lt;/span&gt;&lt;/tt&gt;}, the schema update options are not respected by the jobs that copy data from temporary tables into the destination table. The effect is that for small jobs (&amp;lt;10K source URIs), schema field addition is allowed, however, if the job is scaled to &amp;gt;10K source URIs, then schema field addition will fail with an error such as:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;Provided Schema does not match Table project:dataset.table. Cannot add fields (field: field_name)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ve been able to reproduce this issue with Python 3.7 and DataflowRunner on Beam 2.21.0 and Beam 2.25.0. I could not reproduce the issue with DirectRunner. A minimal reproducible example is attached.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13341003">BEAM-11277</key>
            <summary>WriteToBigQuery with batch file loads does not respect schema update options when there are multiple load jobs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="10722" iconUrl="https://issues.apache.org/jira/images/icons/statuses/generic.png" description="">Triage Needed</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cccyang">Chun Yang</assignee>
                                    <reporter username="cccyang">Chun Yang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Nov 2020 08:36:09 +0000</created>
                <updated>Thu, 13 Apr 2023 11:04:46 +0000</updated>
                            <resolved>Wed, 28 Apr 2021 18:41:59 +0000</resolved>
                                    <version>2.21.0</version>
                    <version>2.24.0</version>
                    <version>2.25.0</version>
                    <version>2.28.0</version>
                                    <fixVersion>2.30.0</fixVersion>
                                    <component>io-py-gcp</component>
                    <component>runner-dataflow</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="45600">12h 40m</timespent>
                                <comments>
                            <comment id="17234073" author="angoenka" created="Tue, 17 Nov 2020 22:55:46 +0000"  >&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chamikara&quot; class=&quot;user-hover&quot; rel=&quot;chamikara&quot;&gt;chamikara&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;cc:&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=heejong&quot; class=&quot;user-hover&quot; rel=&quot;heejong&quot;&gt;heejong&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17249372" author="wenbing-bai" created="Mon, 14 Dec 2020 22:51:34 +0000"  >&lt;p&gt;Any progress on this ticket?&#160;&lt;/p&gt;</comment>
                            <comment id="17284256" author="beamjirabot" created="Sat, 13 Feb 2021 17:15:27 +0000"  >&lt;p&gt;This issue is P2 but has been unassigned without any comment for 60 days so it has been labeled &quot;stale-P2&quot;. If this issue is still affecting you, we care! Please comment and remove the label. Otherwise, in 14 days the issue will be moved to P3.&lt;/p&gt;

&lt;p&gt;Please see &lt;a href=&quot;https://beam.apache.org/contribute/jira-priorities/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://beam.apache.org/contribute/jira-priorities/&lt;/a&gt; for a detailed explanation of what these priorities mean.&lt;/p&gt;</comment>
                            <comment id="17291881" author="cccyang" created="Fri, 26 Feb 2021 19:06:06 +0000"  >&lt;p&gt;I will take a stab at this issue this week.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13015433" name="repro.py" size="2587" author="cccyang" created="Tue, 17 Nov 2020 08:40:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 37 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0knls:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>