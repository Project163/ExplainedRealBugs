<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:02:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-8352] Reading records in background may lead to OOM errors</title>
                <link>https://issues.apache.org/jira/browse/BEAM-8352</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;We have faced a problem with OOM errors in our dataflow job containing Kinesis sources. After investigation, it occurred that the issue was caused by too many records being consumed by Kinesis sources that pipeline couldn&apos;t handle in time.&lt;/p&gt;

&lt;p&gt;Looking into the Kinesis connector&apos;s code, the internal queue (recordsQueue) that records are being put in the background is setup for each ShardReadersPool (created for each source being Kinesis stream). The size of the queue is set to `queueCapacityPerShard * number of shards`. The bigger number of shards, the bigger queue size. There is no ability to limit the maximum capacity of the queue (queueCapacityPerShard is also not configurable and it&apos;s set to DEFAULT_CAPACITY_PER_SHARD=10_000). Additionally, there is no differentiation on records size, so the size of data placed to the queue might increase to the point where OOM will be thrown.&lt;/p&gt;

&lt;p&gt;It would be great to have ability to somehow limit the number of records that are being read in the background to some sensible value. At the beginning, simple solution would be to allow configuring max queue size for source at the creation of KinesisIO.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13260513">BEAM-8352</key>
            <summary>Reading records in background may lead to OOM errors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="10722" iconUrl="https://issues.apache.org/jira/images/icons/statuses/generic.png" description="">Triage Needed</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aromanenko">Alexey Romanenko</assignee>
                                    <reporter username="m.juraszek">Mateusz Juraszek</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Oct 2019 06:41:45 +0000</created>
                <updated>Thu, 13 Apr 2023 10:58:29 +0000</updated>
                            <resolved>Wed, 6 Nov 2019 16:10:11 +0000</resolved>
                                    <version>2.2.0</version>
                    <version>2.3.0</version>
                    <version>2.4.0</version>
                    <version>2.5.0</version>
                    <version>2.6.0</version>
                    <version>2.7.0</version>
                    <version>2.8.0</version>
                    <version>2.9.0</version>
                    <version>2.10.0</version>
                    <version>2.11.0</version>
                    <version>2.12.0</version>
                    <version>2.13.0</version>
                    <version>2.14.0</version>
                    <version>2.15.0</version>
                                    <fixVersion>2.18.0</fixVersion>
                                    <component>io-java-kinesis</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="9600">2h 40m</timespent>
                                <comments>
                            <comment id="16946063" author="aromanenko" created="Mon, 7 Oct 2019 17:29:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=m.juraszek&quot; class=&quot;user-hover&quot; rel=&quot;m.juraszek&quot;&gt;m.juraszek&lt;/a&gt; Thank you for reporting this. Do you want to contribute on this?&lt;/p&gt;</comment>
                            <comment id="16946499" author="m.juraszek" created="Tue, 8 Oct 2019 05:46:22 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aromanenko&quot; class=&quot;user-hover&quot; rel=&quot;aromanenko&quot;&gt;aromanenko&lt;/a&gt;, currently we don&apos;t have capacity for that&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07ae0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>