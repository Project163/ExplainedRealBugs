<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:54:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-6179] Batch size estimation failing</title>
                <link>https://issues.apache.org/jira/browse/BEAM-6179</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Batch size estimation is failing on flink when running 13MB input pipeline with error&lt;br/&gt;
ValueError: On entry to DLASCL parameter number 4 had an illegal value &lt;br/&gt;
java.util.concurrent.ExecutionException: java.lang.RuntimeException: Error received from SDK harness for instruction 48: Traceback (most recent call last):&lt;br/&gt;
  File &quot;/usr/local/lib/python2.7/site-packages/apache_beam/runners/worker/sdk_worker.py&quot;, line 135, in _execute&lt;br/&gt;
    response = task()&lt;br/&gt;
  File &quot;/usr/local/lib/python2.7/site-packages/apache_beam/runners/worker/sdk_worker.py&quot;, line 170, in &amp;lt;lambda&amp;gt;&lt;br/&gt;
    self._execute(lambda: worker.do_instruction(work), work)&lt;br/&gt;
  File &quot;/usr/local/lib/python2.7/site-packages/apache_beam/runners/worker/sdk_worker.py&quot;, line 221, in do_instruction&lt;br/&gt;
    request.instruction_id)&lt;br/&gt;
  File &quot;/usr/local/lib/python2.7/site-packages/apache_beam/runners/worker/sdk_worker.py&quot;, line 237, in process_bundle&lt;br/&gt;
    bundle_processor.process_bundle(instruction_id)&lt;br/&gt;
  File &quot;/usr/local/lib/python2.7/site-packages/apache_beam/runners/worker/bundle_processor.py&quot;, line 480, in process_bundle&lt;br/&gt;
    ].process_encoded(data.data)&lt;br/&gt;
  File &quot;/usr/local/lib/python2.7/site-packages/apache_beam/runners/worker/bundle_processor.py&quot;, line 125, in process_encoded&lt;br/&gt;
    self.output(decoded_value)&lt;br/&gt;
  File &quot;apache_beam/runners/worker/operations.py&quot;, line 182, in apache_beam.runners.worker.operations.Operation.output&lt;br/&gt;
    def output(self, windowed_value, output_index=0):&lt;br/&gt;
  File &quot;apache_beam/runners/worker/operations.py&quot;, line 183, in apache_beam.runners.worker.operations.Operation.output&lt;br/&gt;
    cython.cast(Receiver, self.receivers&lt;span class=&quot;error&quot;&gt;&amp;#91;output_index&amp;#93;&lt;/span&gt;).receive(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/worker/operations.py&quot;, line 89, in apache_beam.runners.worker.operations.ConsumerSet.receive&lt;br/&gt;
    cython.cast(Operation, consumer).process(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/worker/operations.py&quot;, line 497, in apache_beam.runners.worker.operations.DoOperation.process&lt;br/&gt;
    with self.scoped_process_state:&lt;br/&gt;
  File &quot;apache_beam/runners/worker/operations.py&quot;, line 498, in apache_beam.runners.worker.operations.DoOperation.process&lt;br/&gt;
    self.dofn_receiver.receive(o)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 680, in apache_beam.runners.common.DoFnRunner.receive&lt;br/&gt;
    self.process(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 686, in apache_beam.runners.common.DoFnRunner.process&lt;br/&gt;
    self._reraise_augmented(exn)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 709, in apache_beam.runners.common.DoFnRunner._reraise_augmented&lt;br/&gt;
    raise&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 684, in apache_beam.runners.common.DoFnRunner.process&lt;br/&gt;
    self.do_fn_invoker.invoke_process(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 420, in apache_beam.runners.common.SimpleInvoker.invoke_process&lt;br/&gt;
    output_processor.process_outputs(&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 794, in apache_beam.runners.common._OutputProcessor.process_outputs&lt;br/&gt;
    self.main_receivers.receive(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/worker/operations.py&quot;, line 89, in apache_beam.runners.worker.operations.ConsumerSet.receive&lt;br/&gt;
    cython.cast(Operation, consumer).process(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/worker/operations.py&quot;, line 497, in apache_beam.runners.worker.operations.DoOperation.process&lt;br/&gt;
    with self.scoped_process_state:&lt;br/&gt;
  File &quot;apache_beam/runners/worker/operations.py&quot;, line 498, in apache_beam.runners.worker.operations.DoOperation.process&lt;br/&gt;
    self.dofn_receiver.receive(o)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 680, in apache_beam.runners.common.DoFnRunner.receive&lt;br/&gt;
    self.process(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 686, in apache_beam.runners.common.DoFnRunner.process&lt;br/&gt;
    self._reraise_augmented(exn)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 709, in apache_beam.runners.common.DoFnRunner._reraise_augmented&lt;br/&gt;
    raise&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 684, in apache_beam.runners.common.DoFnRunner.process&lt;br/&gt;
    self.do_fn_invoker.invoke_process(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 420, in apache_beam.runners.common.SimpleInvoker.invoke_process&lt;br/&gt;
    output_processor.process_outputs(&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 794, in apache_beam.runners.common._OutputProcessor.process_outputs&lt;br/&gt;
    self.main_receivers.receive(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/worker/operations.py&quot;, line 89, in apache_beam.runners.worker.operations.ConsumerSet.receive&lt;br/&gt;
    cython.cast(Operation, consumer).process(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/worker/operations.py&quot;, line 497, in apache_beam.runners.worker.operations.DoOperation.process&lt;br/&gt;
    with self.scoped_process_state:&lt;br/&gt;
  File &quot;apache_beam/runners/worker/operations.py&quot;, line 498, in apache_beam.runners.worker.operations.DoOperation.process&lt;br/&gt;
    self.dofn_receiver.receive(o)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 680, in apache_beam.runners.common.DoFnRunner.receive&lt;br/&gt;
    self.process(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 686, in apache_beam.runners.common.DoFnRunner.process&lt;br/&gt;
    self._reraise_augmented(exn)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 709, in apache_beam.runners.common.DoFnRunner._reraise_augmented&lt;br/&gt;
    raise&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 684, in apache_beam.runners.common.DoFnRunner.process&lt;br/&gt;
    self.do_fn_invoker.invoke_process(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 420, in apache_beam.runners.common.SimpleInvoker.invoke_process&lt;br/&gt;
    output_processor.process_outputs(&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 794, in apache_beam.runners.common._OutputProcessor.process_outputs&lt;br/&gt;
    self.main_receivers.receive(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/worker/operations.py&quot;, line 89, in apache_beam.runners.worker.operations.ConsumerSet.receive&lt;br/&gt;
    cython.cast(Operation, consumer).process(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/worker/operations.py&quot;, line 497, in apache_beam.runners.worker.operations.DoOperation.process&lt;br/&gt;
    with self.scoped_process_state:&lt;br/&gt;
  File &quot;apache_beam/runners/worker/operations.py&quot;, line 498, in apache_beam.runners.worker.operations.DoOperation.process&lt;br/&gt;
    self.dofn_receiver.receive(o)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 680, in apache_beam.runners.common.DoFnRunner.receive&lt;br/&gt;
    self.process(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 686, in apache_beam.runners.common.DoFnRunner.process&lt;br/&gt;
    self._reraise_augmented(exn)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 709, in apache_beam.runners.common.DoFnRunner._reraise_augmented&lt;br/&gt;
    raise&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 684, in apache_beam.runners.common.DoFnRunner.process&lt;br/&gt;
    self.do_fn_invoker.invoke_process(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 420, in apache_beam.runners.common.SimpleInvoker.invoke_process&lt;br/&gt;
    output_processor.process_outputs(&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 794, in apache_beam.runners.common._OutputProcessor.process_outputs&lt;br/&gt;
    self.main_receivers.receive(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/worker/operations.py&quot;, line 89, in apache_beam.runners.worker.operations.ConsumerSet.receive&lt;br/&gt;
    cython.cast(Operation, consumer).process(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/worker/operations.py&quot;, line 497, in apache_beam.runners.worker.operations.DoOperation.process&lt;br/&gt;
    with self.scoped_process_state:&lt;br/&gt;
  File &quot;apache_beam/runners/worker/operations.py&quot;, line 498, in apache_beam.runners.worker.operations.DoOperation.process&lt;br/&gt;
    self.dofn_receiver.receive(o)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 680, in apache_beam.runners.common.DoFnRunner.receive&lt;br/&gt;
    self.process(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 686, in apache_beam.runners.common.DoFnRunner.process&lt;br/&gt;
    self._reraise_augmented(exn)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 724, in apache_beam.runners.common.DoFnRunner._reraise_augmented&lt;br/&gt;
    raise_with_traceback(new_exn)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 684, in apache_beam.runners.common.DoFnRunner.process&lt;br/&gt;
    self.do_fn_invoker.invoke_process(windowed_value)&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 420, in apache_beam.runners.common.SimpleInvoker.invoke_process&lt;br/&gt;
    output_processor.process_outputs(&lt;br/&gt;
  File &quot;apache_beam/runners/common.py&quot;, line 770, in apache_beam.runners.common._OutputProcessor.process_outputs&lt;br/&gt;
    for result in results:&lt;br/&gt;
  File &quot;/usr/local/lib/python2.7/site-packages/apache_beam/transforms/util.py&quot;, line 398, in process&lt;br/&gt;
    self._batch_size = self._batch_size_estimator.next_batch_size()&lt;br/&gt;
  File &quot;/usr/local/lib/python2.7/site-packages/apache_beam/transforms/util.py&quot;, line 351, in next_batch_size&lt;br/&gt;
    a, b = self.linear_regression(xs, ys)&lt;br/&gt;
  File &quot;/usr/local/lib/python2.7/site-packages/apache_beam/transforms/util.py&quot;, line 321, in linear_regression_numpy&lt;br/&gt;
    b, a = np.polyfit(xs, ys, 1, w=weight)&lt;br/&gt;
  File &quot;/usr/local/lib/python2.7/site-packages/numpy/lib/polynomial.py&quot;, line 585, in polyfit&lt;br/&gt;
    c, resids, rank, s = lstsq(lhs, rhs, rcond)&lt;br/&gt;
  File &quot;/usr/local/lib/python2.7/site-packages/numpy/linalg/linalg.py&quot;, line 1957, in lstsq&lt;br/&gt;
    0, work, lwork, iwork, 0)&lt;br/&gt;
ValueError: On entry to DLASCL parameter number 4 had an illegal value [while running &apos;Analyze/RunPhase&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;/BatchAnalyzerInputs/BatchElements/ParDo(_GlobalWindowsBatchingDoFn)&apos;]&lt;/p&gt;

&lt;p&gt;	at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:357)&lt;br/&gt;
	at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1895)&lt;br/&gt;
	at org.apache.beam.sdk.util.MoreFutures.get(MoreFutures.java:57)&lt;br/&gt;
	at org.apache.beam.runners.fnexecution.control.SdkHarnessClient$ActiveBundle.close(SdkHarnessClient.java:263)&lt;br/&gt;
	at org.apache.beam.runners.flink.translation.functions.FlinkExecutableStageFunction.$closeResource(FlinkExecutableStageFunction.java:188)&lt;br/&gt;
	at org.apache.beam.runners.flink.translation.functions.FlinkExecutableStageFunction.mapPartition(FlinkExecutableStageFunction.java:188)&lt;br/&gt;
	at org.apache.flink.runtime.operators.MapPartitionDriver.run(MapPartitionDriver.java:103)&lt;br/&gt;
	at org.apache.flink.runtime.operators.BatchTask.run(BatchTask.java:503)&lt;br/&gt;
	at org.apache.flink.runtime.operators.BatchTask.invoke(BatchTask.java:368)&lt;br/&gt;
	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:712)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:748)&lt;br/&gt;
&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13202373">BEAM-6179</key>
            <summary>Batch size estimation failing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angoenka">Ankur Goenka</assignee>
                                    <reporter username="angoenka">Ankur Goenka</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Dec 2018 21:27:55 +0000</created>
                <updated>Sat, 16 May 2020 14:04:41 +0000</updated>
                            <resolved>Wed, 26 Dec 2018 23:29:44 +0000</resolved>
                                                    <fixVersion>2.10.0</fixVersion>
                                    <component>runner-flink</component>
                    <component>sdk-py-harness</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="9600">2h 40m</timespent>
                                <comments>
                            <comment id="16709271" author="angoenka" created="Tue, 4 Dec 2018 21:28:51 +0000"  >&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=robertwb&quot; class=&quot;user-hover&quot; rel=&quot;robertwb&quot;&gt;robertwb&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16720513" author="angoenka" created="Thu, 13 Dec 2018 19:33:12 +0000"  >&lt;p&gt;The error is happening because all values in weights is 0&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
Parameters xs: [2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2.&lt;br/&gt;
 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2.&lt;br/&gt;
 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2. 2.&lt;br/&gt;
 2. 2. 2. 2. 2. 2.], ys: [0.00035095 0.00035191 0.00035191 0.00035214 0.00035286 0.0003531&lt;br/&gt;
 0.0003531  0.0003531  0.00035381 0.00035405 0.00035405 0.00035501&lt;br/&gt;
 0.00035501 0.00035501 0.00035501 0.00035501 0.00035501 0.00035596&lt;br/&gt;
 0.00035596 0.00035596 0.00035596 0.00035596 0.00035596 0.00035691&lt;br/&gt;
 0.00035691 0.00035715 0.00035787 0.00035906 0.00036001 0.00036001&lt;br/&gt;
 0.00036001 0.00036097 0.00036097 0.00036216 0.00036311 0.00036311&lt;br/&gt;
 0.00036311 0.00036407 0.00036478 0.00036502 0.00036502 0.00036502&lt;br/&gt;
 0.00036502 0.00036597 0.00036693 0.00036716 0.00036716 0.00036788&lt;br/&gt;
 0.00036812 0.00036883 0.00036883 0.00037098 0.00037098 0.00037217&lt;br/&gt;
 0.00037313 0.00037408 0.00037408 0.00037503 0.00037599 0.00037694&lt;br/&gt;
 0.00037718 0.00037813 0.00037885 0.00038004 0.00038099 0.00038099&lt;br/&gt;
 0.00038815 0.0003891  0.0003891  0.00039101 0.00039101 0.00039411&lt;br/&gt;
 0.00039482 0.00039506 0.00040007 0.00040793 0.00040913 0.00041509], weight: [0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.&lt;br/&gt;
 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.&lt;br/&gt;
 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.&lt;br/&gt;
 0. 0. 0. 0. 0. 0.]&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13196952">BEAM-6015</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 48 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s0163k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>