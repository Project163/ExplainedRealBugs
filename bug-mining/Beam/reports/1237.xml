<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:00:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-7547] StreamingDataflowWorker can observe inconsistent cache for stale work items</title>
                <link>https://issues.apache.org/jira/browse/BEAM-7547</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;1. Dataflow backend generates a work item with a cache token C.&lt;br/&gt;
2. StreamingDataflowWorker receives the work item and reads the state using C, it either hits the cache or performs a read.&lt;br/&gt;
3. Dataflow backend sends a retry of the work item (possibly because it thinks original work item never reached the StreamingDataflowWorker).&lt;br/&gt;
4. StreamingDataflowWorker commits the work item and gets ack from dataflow backend.  It caches the state for the key using C.&lt;br/&gt;
5. StreamingDataflowWorker receives the retried work item with cache token C.  It uses the cached state and causes possible user consistency failures because the cache view is of after the work item completed processing.&lt;/p&gt;

&lt;p&gt;Note that this will not cause corrupted Dataflow persistent state because the commit of the retried work item using the inconsistent cache will fail. However it may cause failures in user logic for example if they keep the set of all seen items in state and throw an exception on duplicates which should have been removed by an upstream stage.&lt;/p&gt;</description>
                <environment>Dataflow Streaming Engine</environment>
        <key id="13239135">BEAM-7547</key>
            <summary>StreamingDataflowWorker can observe inconsistent cache for stale work items</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10103" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">P3</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="scwhittle">Sam Whittle</assignee>
                                    <reporter username="scwhittle">Sam Whittle</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Jun 2019 22:22:34 +0000</created>
                <updated>Sat, 16 May 2020 13:24:42 +0000</updated>
                            <resolved>Mon, 1 Jul 2019 18:13:34 +0000</resolved>
                                                    <fixVersion>2.15.0</fixVersion>
                                    <component>runner-dataflow</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="9600">2h 40m</timespent>
                                <comments>
                            <comment id="16876198" author="steveniemitz" created="Mon, 1 Jul 2019 13:48:40 +0000"  >&lt;p&gt;Is it possible this was the cause of &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-7614&quot; title=&quot;Event-time timers seem to sometimes fire multiple times on dataflow + streaming engine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-7614&quot;&gt;BEAM-7614&lt;/a&gt;?&#160; What this issue describes sounds exactly like what I was seeing, &quot;impossible&quot; state but no actual impact to the overall data consistency.&lt;/p&gt;</comment>
                            <comment id="16876399" author="scwhittle" created="Mon, 1 Jul 2019 18:08:01 +0000"  >&lt;p&gt;The symptoms described in that issue certainly line up with what would happen if this triggered.  I&apos;ll watch that issue and please reopen it if it still occurs when you are running an SDK including &lt;a href=&quot;https://github.com/apache/beam/pull/8842&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/8842&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z03oko:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>