<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:59:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-7542] java.lang.ClassCastException when writing BYTES to BigQuery</title>
                <link>https://issues.apache.org/jira/browse/BEAM-7542</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;When trying to use BigQueryIO.write() with BigQueryUtils.toTableRow() with a BYTES field it breaks with &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.ClassCastException: [B cannot be cast to java.nio.ByteBuffer at org.apache.beam.sdk.io.gcp.bigquery.BigQueryUtils.fromBeamField(BigQueryUtils.java:280)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;BigQueryUtils.fromBeamField() attempts to cast fieldValue to java.nio.ByteBuffer but&#160;it is a byte[].&lt;/p&gt;

&lt;p&gt;Unit tests are not covering BYTES field type.&lt;/p&gt;</description>
                <environment>Running on OS X 10.14.5 (18F132), JRE 1.8.0_152, also in GCP DataFlow</environment>
        <key id="13239036">BEAM-7542</key>
            <summary>java.lang.ClassCastException when writing BYTES to BigQuery</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="viktor.gerdin">Viktor Gerdin</assignee>
                                    <reporter username="viktor.gerdin">Viktor Gerdin</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Jun 2019 13:52:41 +0000</created>
                <updated>Sat, 16 May 2020 14:02:40 +0000</updated>
                            <resolved>Fri, 14 Jun 2019 14:53:59 +0000</resolved>
                                    <version>2.13.0</version>
                                    <fixVersion>2.14.0</fixVersion>
                                    <component>io-java-gcp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                    <workratio workratioPercent="4"/>
                                    <progress percentage="4">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="4" backgroundColor="#51a825"/>
                                                    <row percentage="96" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="4">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="4" backgroundColor="#51a825"/>
                                                    <row percentage="96" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="82800">23h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="16862839" author="kanterov" created="Thu, 13 Jun 2019 08:52:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kedin&quot; class=&quot;user-hover&quot; rel=&quot;kedin&quot;&gt;kedin&lt;/a&gt; it looks like a big oversight and low hanging fruit to fix, WDYT about having it as a part of 2.14.0?&lt;/p&gt;</comment>
                            <comment id="16863326" author="kedin" created="Thu, 13 Jun 2019 17:43:16 +0000"  >&lt;p&gt;I think&#160;we should&#160;try to get this into 2.14. I can help review and merge it. But my understanding is that if it&apos;s not a regression then we shouldn&apos;t block the release just for this fix.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=viktor.gerdin&quot; class=&quot;user-hover&quot; rel=&quot;viktor.gerdin&quot;&gt;viktor.gerdin&lt;/a&gt;,&#160;is this issue being actively worked on?&#160;&lt;/p&gt;</comment>
                            <comment id="16863576" author="tvalentyn" created="Fri, 14 Jun 2019 00:48:58 +0000"  >&lt;p&gt;I came across an integration test that exercises BYTES recently: &lt;a href=&quot;https://github.com/apache/beam/blob/82bf1ae76288b5c679beb58fa06a85b1dd3127d8/sdks/java/io/google-cloud-platform/src/test/java/org/apache/beam/sdk/io/gcp/bigquery/BigQueryToTableIT.java#L92&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/blob/82bf1ae76288b5c679beb58fa06a85b1dd3127d8/sdks/java/io/google-cloud-platform/src/test/java/org/apache/beam/sdk/io/gcp/bigquery/BigQueryToTableIT.java#L92&lt;/a&gt; , not sure if it covers the codepath discussed here. Note that Bigquery IO expects BYTES to be base64-encoded by the user of the IO.&lt;/p&gt;</comment>
                            <comment id="16863805" author="viktor.gerdin" created="Fri, 14 Jun 2019 07:52:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kedin&quot; class=&quot;user-hover&quot; rel=&quot;kedin&quot;&gt;kedin&lt;/a&gt; I have a working copy running my pipeline and would gladly commit these for the greater good.&lt;/p&gt;</comment>
                            <comment id="16863847" author="iemejia" created="Fri, 14 Jun 2019 08:55:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=viktor.gerdin&quot; class=&quot;user-hover&quot; rel=&quot;viktor.gerdin&quot;&gt;viktor.gerdin&lt;/a&gt; please open the PR for this, we still have until next wednesday to get it in.&lt;/p&gt;</comment>
                            <comment id="16863940" author="viktor.gerdin" created="Fri, 14 Jun 2019 10:45:48 +0000"  >&lt;p&gt;PR submitted. That vglocus guy is me.&lt;/p&gt;</comment>
                            <comment id="16864273" author="kedin" created="Fri, 14 Jun 2019 16:58:27 +0000"  >&lt;p&gt;Awesome, thank you for the contribution!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 22 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z03nyo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>