<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:52:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-5442] PortableRunner swallows custom options for Runner</title>
                <link>https://issues.apache.org/jira/browse/BEAM-5442</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;The PortableRunner doesn&apos;t pass custom PipelineOptions to the executing Runner.&lt;/p&gt;

&lt;p&gt;Example: &lt;tt&gt;--parallelism=4&lt;/tt&gt; won&apos;t be forwarded to the FlinkRunner.&lt;br/&gt;
(The option is just removed during proto translation without any warning)&lt;/p&gt;

&lt;p&gt;We should allow some form of customization through the options, even for the PortableRunner. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13186380">BEAM-5442</key>
            <summary>PortableRunner swallows custom options for Runner</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thw">Thomas Weise</assignee>
                                    <reporter username="mxm">Maximilian Michels</reporter>
                        <labels>
                            <label>Done</label>
                            <label>portability</label>
                            <label>portability-flink</label>
                    </labels>
                <created>Thu, 20 Sep 2018 15:18:19 +0000</created>
                <updated>Tue, 6 Oct 2020 21:53:42 +0000</updated>
                            <resolved>Tue, 29 Jan 2019 20:01:39 +0000</resolved>
                                                    <fixVersion>2.11.0</fixVersion>
                                    <component>sdk-java-core</component>
                    <component>sdk-py-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="91200">25h 20m</timespent>
                                <comments>
                            <comment id="16622268" author="thw" created="Thu, 20 Sep 2018 16:11:06 +0000"  >&lt;p&gt;Ideally all of the options would be passed through, I suppose that was the intention:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/beam/blob/master/sdks/python/apache_beam/runners/portability/portable_runner.py#L108&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/blob/master/sdks/python/apache_beam/runners/portability/portable_runner.py#L108&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There are options for the runner, options for the sdk harness, ... that the user needs to be able to control. Perhaps we need to scope the runner specific options differently?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16622449" author="mxm" created="Thu, 20 Sep 2018 18:10:04 +0000"  >&lt;p&gt;Actually, if you look at &lt;tt&gt;get_all_options&lt;/tt&gt; method you see it filter out all the options which are not part of a &lt;tt&gt;PipelineOptions&lt;/tt&gt; class. See &lt;a href=&quot;https://github.com/apache/beam/blob/master/sdks/python/apache_beam/options/pipeline_options.py#L212&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/blob/master/sdks/python/apache_beam/options/pipeline_options.py#L212&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So we just need to add a FlinkOptions derived from PipelineOptions to the Python SDK.&lt;/p&gt;</comment>
                            <comment id="16622452" author="thw" created="Thu, 20 Sep 2018 18:14:40 +0000"  >&lt;p&gt;Yeah, except that it would be nice to solve this generically (not depending on FlinkOptions) since other runners will have their own options. Can we not simply delegate the responsibility to validate those unknown / runner specific options to the job server?&lt;/p&gt;</comment>
                            <comment id="16622500" author="mxm" created="Thu, 20 Sep 2018 18:38:05 +0000"  >&lt;p&gt;There are some pros to doing an upfront parsing/validation of the options. Maybe both can work complementary. The options can be parsed/validated but unknown options should still be forwarded.&lt;/p&gt;</comment>
                            <comment id="16623368" author="robertwb" created="Fri, 21 Sep 2018 10:11:58 +0000"  >&lt;p&gt;It seems like we should validate the options we know about, but pass all options through. (Maybe warn about ones we don&apos;t know about?)&lt;/p&gt;</comment>
                            <comment id="16637617" author="altay" created="Wed, 3 Oct 2018 23:39:07 +0000"  >&lt;p&gt;What is the plan for this JIRA? Are we targeting 2.8.0 with cut date 10/10?&lt;/p&gt;</comment>
                            <comment id="16637627" author="thw" created="Wed, 3 Oct 2018 23:44:09 +0000"  >&lt;p&gt;Yes, the PR is open.&lt;/p&gt;</comment>
                            <comment id="16637961" author="mxm" created="Thu, 4 Oct 2018 09:14:53 +0000"  >&lt;p&gt;Yes, this should go into 2.8.0. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=altay&quot; class=&quot;user-hover&quot; rel=&quot;altay&quot;&gt;altay&lt;/a&gt; You can check out the PR if you&apos;re interested: &lt;a href=&quot;https://github.com/apache/beam/pull/6557&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/6557&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16640114" author="udim" created="Fri, 5 Oct 2018 17:32:12 +0000"  >&lt;p&gt;I believe PR 6557 broke integration tests using Dataflow.&lt;/p&gt;


&lt;p&gt;Cloud console:&lt;/p&gt;

&lt;p&gt;&quot;Parsing unknown args: &lt;span class=&quot;error&quot;&gt;&amp;#91;u&amp;#39;--dataflowJobId=2018-10-05_07_00_20-5526009939236014896&amp;#39;, u&amp;#39;--autoscalingAlgorithm=NONE&amp;#39;, u&amp;#39;--direct_runner_use_stacked_bundle&amp;#39;, u&amp;#39;--maxNumWorkers=0&amp;#39;, u&amp;#39;--style=scrambled&amp;#39;, u&amp;#39;--sleep_secs=20&amp;#39;, u&amp;#39;--pipeline_type_check&amp;#39;, u&amp;#39;--gcpTempLocation=gs://temp-storage-for-end-to-end-tests/temp-it/beamapp-jenkins-1005140012-917021.1538748012.917145&amp;#39;, u&amp;#39;--numWorkers=1&amp;#39;, u&amp;#39;--beam_plugins=apache_beam.io.filesystem.FileSystem&amp;#39;, u&amp;#39;--beam_plugins=apache_beam.io.hadoopfilesystem.HadoopFileSystem&amp;#39;, u&amp;#39;--beam_plugins=apache_beam.io.localfilesystem.LocalFileSystem&amp;#39;, u&amp;#39;--beam_plugins=apache_beam.io.gcp.gcsfilesystem.GCSFileSystem&amp;#39;, u&amp;#39;--beam_plugins=apache_beam.io.filesystem_test.TestingFileSystem&amp;#39;, u&amp;#39;--beam_plugins=apache_beam.runners.interactive.display.pipeline_graph_renderer.PipelineGraphRenderer&amp;#39;, u&amp;#39;--beam_plugins=apache_beam.runners.interactive.display.pipeline_graph_renderer.MuteRenderer&amp;#39;, u&amp;#39;--beam_plugins=apache_beam.runners.interactive.display.pipeline_graph_renderer.TextRenderer&amp;#39;, u&amp;#39;--beam_plugins=apache_beam.runners.interactive.display.pipeline_graph_renderer.PydotRenderer&amp;#39;, u&amp;#39;--pipelineUrl=gs://temp-storage-for-end-to-end-tests/staging-it/beamapp-jenkins-1005140012-917021.1538748012.917145/pipeline.pb&amp;#39;&amp;#93;&lt;/span&gt;&quot; &lt;br/&gt;
&quot;Python sdk harness failed: &lt;br/&gt;
Traceback (most recent call last):&lt;br/&gt;
  File &quot;/usr/local/lib/python2.7/dist-packages/apache_beam/runners/worker/sdk_worker_main.py&quot;, line 133, in main&lt;br/&gt;
    sdk_pipeline_options.get_all_options(drop_default=True))&lt;br/&gt;
  File &quot;/usr/local/lib/python2.7/dist-packages/apache_beam/options/pipeline_options.py&quot;, line 224, in get_all_options&lt;br/&gt;
    parser.add_argument(arg.split(&apos;=&apos;, 1)&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;, nargs=&apos;?&apos;)&lt;br/&gt;
  File &quot;/usr/lib/python2.7/argparse.py&quot;, line 1308, in add_argument&lt;br/&gt;
    return self._add_action(action)&lt;br/&gt;
  File &quot;/usr/lib/python2.7/argparse.py&quot;, line 1682, in _add_action&lt;br/&gt;
    self._optionals._add_action(action)&lt;br/&gt;
  File &quot;/usr/lib/python2.7/argparse.py&quot;, line 1509, in _add_action&lt;br/&gt;
    action = super(_ArgumentGroup, self)._add_action(action)&lt;br/&gt;
  File &quot;/usr/lib/python2.7/argparse.py&quot;, line 1322, in _add_action&lt;br/&gt;
    self._check_conflict(action)&lt;br/&gt;
  File &quot;/usr/lib/python2.7/argparse.py&quot;, line 1460, in _check_conflict&lt;br/&gt;
    conflict_handler(action, confl_optionals)&lt;br/&gt;
  File &quot;/usr/lib/python2.7/argparse.py&quot;, line 1467, in _handle_conflict_error&lt;br/&gt;
    raise ArgumentError(action, message % conflict_string)&lt;br/&gt;
ArgumentError: argument --beam_plugins: conflicting option string(s): --beam_plugins&quot;   &lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;Test output:&lt;br/&gt;
07:28:37 ======================================================================&lt;br/&gt;
07:28:37 FAIL: test_streaming_with_attributes (apache_beam.io.gcp.pubsub_integration_test.PubSubIntegrationTest)&lt;br/&gt;
07:28:37 ----------------------------------------------------------------------&lt;br/&gt;
07:28:37 Traceback (most recent call last):&lt;br/&gt;
07:28:37   File &quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python_Verify/src/sdks/python/apache_beam/io/gcp/pubsub_integration_test.py&quot;, line 172, in test_streaming_with_attributes&lt;br/&gt;
07:28:37     self._test_streaming(with_attributes=True)&lt;br/&gt;
07:28:37   File &quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python_Verify/src/sdks/python/apache_beam/io/gcp/pubsub_integration_test.py&quot;, line 164, in _test_streaming&lt;br/&gt;
07:28:37     timestamp_attribute=self.TIMESTAMP_ATTRIBUTE)&lt;br/&gt;
07:28:37   File &quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python_Verify/src/sdks/python/apache_beam/io/gcp/pubsub_it_pipeline.py&quot;, line 91, in run_pipeline&lt;br/&gt;
07:28:37     result = p.run()&lt;br/&gt;
07:28:37   File &quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python_Verify/src/sdks/python/apache_beam/pipeline.py&quot;, line 416, in run&lt;br/&gt;
07:28:37     return self.runner.run_pipeline(self)&lt;br/&gt;
07:28:37   File &quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python_Verify/src/sdks/python/apache_beam/runners/dataflow/test_dataflow_runner.py&quot;, line 65, in run_pipeline&lt;br/&gt;
07:28:37     hc_assert_that(self.result, pickler.loads(on_success_matcher))&lt;br/&gt;
07:28:37 AssertionError: &lt;br/&gt;
07:28:37 Expected: (Test pipeline expected terminated in state: RUNNING and Expected 2 messages.)&lt;br/&gt;
07:28:37      but: Expected 2 messages. Got 0 messages. Diffs (item, count):&lt;br/&gt;
07:28:37   Expected but not in actual: [(PubsubMessage(data001-seen, &lt;/p&gt;
{&apos;processed&apos;: &apos;IT&apos;}
&lt;p&gt;), 1), (PubsubMessage(data002-seen, &lt;/p&gt;
{&apos;timestamp_out&apos;: &apos;2018-07-11T02:02:50.149000Z&apos;, &apos;processed&apos;: &apos;IT&apos;}
&lt;p&gt;), 1)]&lt;br/&gt;
07:28:37   Unexpected: []&lt;br/&gt;
07:28:37   Stripped attributes: &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;id&amp;#39;, &amp;#39;timestamp&amp;#39;&amp;#93;&lt;/span&gt;&lt;br/&gt;
07:28:37 &lt;br/&gt;
07:28:37 -------------------- &amp;gt;&amp;gt; begin captured stdout &amp;lt;&amp;lt; ---------------------&lt;br/&gt;
07:28:37 Found: &lt;a href=&quot;https://console.cloud.google.com/dataflow/jobsDetail/locations/us-central1/jobs/2018-10-05_07_00_20-5526009939236014896?project=apache-beam-testing&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://console.cloud.google.com/dataflow/jobsDetail/locations/us-central1/jobs/2018-10-05_07_00_20-5526009939236014896?project=apache-beam-testing&lt;/a&gt;.&lt;br/&gt;
07:28:37 &lt;br/&gt;
07:28:37 --------------------- &amp;gt;&amp;gt; end captured stdout &amp;lt;&amp;lt; ----------------------&lt;/p&gt;</comment>
                            <comment id="16640145" author="thw" created="Fri, 5 Oct 2018 17:59:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=udim&quot; class=&quot;user-hover&quot; rel=&quot;udim&quot;&gt;udim&lt;/a&gt;&#160;as stop gap we could probably skip --beam_plugins here: &lt;a href=&quot;https://github.com/apache/beam/pull/6557/files#diff-525d5d65bedd7ea5e6fce6e4cd57e153R221&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/6557/files#diff-525d5d65bedd7ea5e6fce6e4cd57e153R221&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16641279" author="thw" created="Mon, 8 Oct 2018 01:58:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mxm&quot; class=&quot;user-hover&quot; rel=&quot;mxm&quot;&gt;mxm&lt;/a&gt; I checked and see that an unknown option such as&#160;--checkpointing_interval=30000 is now passed through to the runner. BTW checkpointing doesn&apos;t seem to work for other reasons, but that&apos;s a separate issue.&lt;/p&gt;</comment>
                            <comment id="16641521" author="mxm" created="Mon, 8 Oct 2018 08:39:55 +0000"  >&lt;p&gt;Great! I will get in contact with you to see why the checkpointing is not working.&lt;/p&gt;</comment>
                            <comment id="16664203" author="thw" created="Thu, 25 Oct 2018 19:31:48 +0000"  >&lt;p&gt;Discussion thread:&#160;&lt;a href=&quot;https://lists.apache.org/thread.html/78fe33dc41b04886f5355d66d50359265bfa2985580bb70f79c53545@%3Cdev.beam.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/78fe33dc41b04886f5355d66d50359265bfa2985580bb70f79c53545@%3Cdev.beam.apache.org%3E&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16694872" author="iemejia" created="Wed, 21 Nov 2018 15:51:23 +0000"  >&lt;p&gt;Minor comment on this, just saw you moved it to version 3.0.0 Not sure if this is what you intended, next version should be 2.10.0 no? AFAIK 3.0.0 was reserved for future backwards incompatible changes. Or is this the case?&lt;/p&gt;</comment>
                            <comment id="16732390" author="kenn" created="Wed, 2 Jan 2019 20:05:06 +0000"  >&lt;p&gt;What is the status of this? It did not block 2.8.0 or 2.9.0 so is it a release blocker at all?&lt;/p&gt;</comment>
                            <comment id="16733237" author="mxm" created="Thu, 3 Jan 2019 17:10:22 +0000"  >&lt;p&gt;As per mailing list discussion, not a release blocker. We decided to revert this for the release for as long as a programmatic solution hasn&apos;t been implemented.&lt;/p&gt;</comment>
                            <comment id="16755967" author="mxm" created="Wed, 30 Jan 2019 10:25:07 +0000"  >&lt;p&gt;This is great. Thank you for the following up &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thw&quot; class=&quot;user-hover&quot; rel=&quot;thw&quot;&gt;thw&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13212793">BEAM-6549</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13037911">BEAM-1318</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13212388">BEAM-6531</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13212621">BEAM-6537</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3yb6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>