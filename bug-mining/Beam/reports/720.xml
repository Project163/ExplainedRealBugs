<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:51:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-4704] String operations yield incorrect results when executed through SQL shell</title>
                <link>https://issues.apache.org/jira/browse/BEAM-4704</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;&lt;tt&gt;TRIM&lt;/tt&gt; is defined to trim &lt;em&gt;all&lt;/em&gt; the characters in the first string from the string-to-be-trimmed. Calcite has an incorrect implementation of this. We use our own fixed implementation. But when executed through the SQL shell, the results do not match what we get from the PTransform path. Here two test cases that pass on &lt;tt&gt;master&lt;/tt&gt; but are incorrect in the shell:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
BeamSQL&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;TRIM&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;LEADING&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;eh&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;hehe__hehe&apos;&lt;/span&gt;);
+&lt;span class=&quot;code-comment&quot;&gt;------------+
&lt;/span&gt;| EXPR$0 |
+&lt;span class=&quot;code-comment&quot;&gt;------------+
&lt;/span&gt;| hehe__hehe |
+&lt;span class=&quot;code-comment&quot;&gt;------------+&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
BeamSQL&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;TRIM&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;TRAILING&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;eh&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;hehe__hehe&apos;&lt;/span&gt;);
+&lt;span class=&quot;code-comment&quot;&gt;------------+
&lt;/span&gt;|   EXPR$0   |
+&lt;span class=&quot;code-comment&quot;&gt;------------+
&lt;/span&gt;| hehe__heh  |
+&lt;span class=&quot;code-comment&quot;&gt;------------+&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
BeamSQL&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;TRIM&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;BOTH&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;eh&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;hehe__hehe&apos;&lt;/span&gt;);
+&lt;span class=&quot;code-comment&quot;&gt;------------+
&lt;/span&gt;|   EXPR$0   |
+&lt;span class=&quot;code-comment&quot;&gt;------------+
&lt;/span&gt;| hehe__heh  |
+&lt;span class=&quot;code-comment&quot;&gt;------------+&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13169444">BEAM-4704</key>
            <summary>String operations yield incorrect results when executed through SQL shell</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10103" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">P3</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="apilloud">Andrew Pilloud</assignee>
                                    <reporter username="kenn">Kenneth Knowles</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Jul 2018 04:10:42 +0000</created>
                <updated>Mon, 10 Mar 2025 20:10:39 +0000</updated>
                            <resolved>Tue, 11 May 2021 01:40:21 +0000</resolved>
                                                    <fixVersion>2.8.0</fixVersion>
                                    <component>dsl-sql</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="16529370" author="kenn" created="Mon, 2 Jul 2018 04:14:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apilloud&quot; class=&quot;user-hover&quot; rel=&quot;apilloud&quot;&gt;apilloud&lt;/a&gt;&#160;&lt;del&gt;wild&lt;/del&gt; confident guess here - the shell only invokes our code when the calling convention insists that it do so.&lt;/p&gt;</comment>
                            <comment id="16530127" author="apilloud" created="Mon, 2 Jul 2018 16:16:28 +0000"  >&lt;p&gt;Correct. Queries that do not involve a Beam table will be implemented purely in calcite. There is a variant of this bug where queries that don&apos;t begin with a Beam table are unplannable.&lt;/p&gt;</comment>
                            <comment id="16531674" author="kenn" created="Tue, 3 Jul 2018 16:53:44 +0000"  >&lt;p&gt;I&apos;m going to leave this open, as we should either force our convention somehow and/or fix Calcite&apos;s implementation.&lt;/p&gt;</comment>
                            <comment id="16597973" author="apilloud" created="Thu, 30 Aug 2018 22:07:18 +0000"  >&lt;p&gt;We can&apos;t override calcite&apos;s implementation if calcite is generating our code. Fixing is in calcite blocks&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-5112&quot; title=&quot;Investigate if Calcite can generate functions that we need&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-5112&quot;&gt;&lt;del&gt;BEAM-5112&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16604072" author="julianhyde" created="Wed, 5 Sep 2018 07:55:54 +0000"  >&lt;p&gt;Calcite&apos;s implementation complies (mostly) with the SQL standard, which says that the trim string must be exactly one character long. The  standard says that the implementation must throw, whereas Calcite just takes the first character.&lt;/p&gt;</comment>
                            <comment id="17123276" author="beamjirabot" created="Tue, 2 Jun 2020 04:16:37 +0000"  >&lt;p&gt;This issue is P2 but has been unassigned without any comment for 60 days so it has been labeled &quot;stale-P2&quot;. If this issue is still affecting you, we care! Please comment and remove the label. Otherwise, in 14 days the issue will be moved to P3.&lt;/p&gt;

&lt;p&gt;Please see &lt;a href=&quot;https://beam.apache.org/contribute/jira-priorities/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://beam.apache.org/contribute/jira-priorities/&lt;/a&gt; for a detailed explanation of what these priorities mean.&lt;/p&gt;</comment>
                            <comment id="17137721" author="beamjirabot" created="Tue, 16 Jun 2020 17:28:33 +0000"  >&lt;p&gt;This issue was marked &quot;stale-P2&quot; and has not received a public comment in 14 days. It is now automatically moved to P3. If you are still affected by it, you can comment and move it back to P2.&lt;/p&gt;</comment>
                            <comment id="17342237" author="apilloud" created="Tue, 11 May 2021 01:40:21 +0000"  >&lt;p&gt;Should be resolved by&#160;&lt;a href=&quot;https://github.com/apache/beam/pull/6389&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/6389&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13183023">CALCITE-2530</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vfnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>