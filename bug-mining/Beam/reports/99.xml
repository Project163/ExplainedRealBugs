<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:41:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-944] Spark runner causes an exception when creating pipeline options</title>
                <link>https://issues.apache.org/jira/browse/BEAM-944</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Running any example with &lt;b&gt;any&lt;/b&gt; runner throws an exception as soon as it tries to construct PipelineOptions as long as SparkRunner is on the class path:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;mvn compile exec:java -Dexec.mainClass=org.apache.beam.examples.complete.game.LeaderBoard -Dexec.args=&lt;span class=&quot;code-quote&quot;&gt;&quot;--runner=DirectRunner&quot;&lt;/span&gt;
[INFO] Scanning &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Tutorial 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-resources) @ Tutorial ---
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory /Users/fjp/dev/mobile/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-compile) @ Tutorial ---
[INFO] No sources to compile
[INFO] 
[INFO] --- exec-maven-plugin:1.5.0:java (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-cli) @ Tutorial ---
SLF4J: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/Users/fjp/.m2/repository/org/slf4j/slf4j-log4j12/1.7.10/slf4j-log4j12-1.7.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/Users/fjp/.m2/repository/org/slf4j/slf4j-jdk14/1.7.5/slf4j-jdk14-1.7.5.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http:&lt;span class=&quot;code-comment&quot;&gt;//www.slf4j.org/codes.html#multiple_bindings &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; an explanation.
&lt;/span&gt;SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]
[WARNING] 
java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:294)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: java.lang.ExceptionInInitializerError
	at org.apache.beam.examples.complete.game.LeaderBoard.main(LeaderBoard.java:179)
	... 6 more
Caused by: java.lang.TypeNotPresentException: Type org.apache.spark.streaming.api.java.JavaStreamingListener not present
	at sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117)
	at sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)
	at sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68)
	at sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138)
	at sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at sun.reflect.generics.repository.ConstructorRepository.getParameterTypes(ConstructorRepository.java:94)
	at java.lang.reflect.Executable.getGenericParameterTypes(Executable.java:284)
	at java.lang.reflect.Method.getGenericParameterTypes(Method.java:282)
	at java.beans.FeatureDescriptor.getParameterTypes(FeatureDescriptor.java:387)
	at java.beans.PropertyDescriptor.findPropertyType(PropertyDescriptor.java:653)
	at java.beans.PropertyDescriptor.setWriteMethod(PropertyDescriptor.java:326)
	at java.beans.PropertyDescriptor.&amp;lt;init&amp;gt;(PropertyDescriptor.java:138)
	at org.apache.beam.sdk.options.PipelineOptionsFactory.getPropertyDescriptors(PipelineOptionsFactory.java:896)
	at org.apache.beam.sdk.options.PipelineOptionsFactory.validateClass(PipelineOptionsFactory.java:992)
	at org.apache.beam.sdk.options.PipelineOptionsFactory.validateWellFormed(PipelineOptionsFactory.java:627)
	at org.apache.beam.sdk.options.PipelineOptionsFactory.register(PipelineOptionsFactory.java:561)
	at org.apache.beam.sdk.options.PipelineOptionsFactory.initializeRegistry(PipelineOptionsFactory.java:587)
	at org.apache.beam.sdk.options.PipelineOptionsFactory.&amp;lt;clinit&amp;gt;(PipelineOptionsFactory.java:536)
	... 7 more
Caused by: java.lang.ClassNotFoundException: org.apache.spark.streaming.api.java.JavaStreamingListener
	at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:424)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:357)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName0(Native Method)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:348)
	at sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)
	... 25 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It is introduced by &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/1072&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/1072&lt;/a&gt; that was added in mid-October, so it reproduces starting with 0.3.0-incubating, but not earlier.&lt;/p&gt;

&lt;p&gt;A possible workaround for users is to add this explicit dependency, which is marked as provided in the Spark runner:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;dependency&amp;gt;
  &amp;lt;groupId&amp;gt;org.apache.spark&amp;lt;/groupId&amp;gt;
  &amp;lt;artifactId&amp;gt;spark-streaming_2.10&amp;lt;/artifactId&amp;gt;
  &amp;lt;version&amp;gt;${spark.version}&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On a quick glance, JavaStreamingListener is not a real pipeline option. Perhaps it can be just removed from pipeline options, and passed around differently.&lt;/p&gt;

&lt;p&gt;Separately, we should perhaps re-think how this works with respect to dependencies in general.&lt;/p&gt;

&lt;p&gt;Marking blocking for 0.4.0-incubating since it affects Spark quickstart.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amitsela&quot; class=&quot;user-hover&quot; rel=&quot;amitsela&quot;&gt;amitsela&lt;/a&gt;, what do you think?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019292">BEAM-944</key>
            <summary>Spark runner causes an exception when creating pipeline options</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="amitsela">Amit Sela</assignee>
                                    <reporter username="davor">Davor Bonaci</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Nov 2016 18:07:58 +0000</created>
                <updated>Sat, 16 May 2020 13:33:52 +0000</updated>
                            <resolved>Thu, 10 Nov 2016 21:44:41 +0000</resolved>
                                    <version>0.3.0-incubating</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>runner-spark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15648341" author="amitsela" created="Tue, 8 Nov 2016 18:21:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davor&quot; class=&quot;user-hover&quot; rel=&quot;davor&quot;&gt;davor&lt;/a&gt; is this because the reflective mechanism of &lt;tt&gt;PipelineOptions&lt;/tt&gt; is scanning all implementations available ?&lt;/p&gt;

&lt;p&gt;And what about &lt;tt&gt;JavaSparkContext&lt;/tt&gt; for the ProvidedSparkContext option: &lt;a href=&quot;https://github.com/apache/incubator-beam/blob/master/runners/spark/src/main/java/org/apache/beam/runners/spark/SparkPipelineOptions.java#L103&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/blob/master/runners/spark/src/main/java/org/apache/beam/runners/spark/SparkPipelineOptions.java#L103&lt;/a&gt; ? should this be a part of PipelineOptions ?&lt;/p&gt;</comment>
                            <comment id="15648360" author="amitsela" created="Tue, 8 Nov 2016 18:26:49 +0000"  >&lt;p&gt;We either remove all of Spark-dependent PipelineOptions, or simply add dependency on &lt;tt&gt;spark-streaming&lt;/tt&gt; as we did for &lt;tt&gt;spark-core&lt;/tt&gt; in examples pom here :&lt;a href=&quot;https://github.com/apache/incubator-beam/blob/master/examples/java/pom.xml#L95&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/blob/master/examples/java/pom.xml#L95&lt;/a&gt;&lt;br/&gt;
Spark has a separate artifact for streaming, IMO it should be simply added.&lt;/p&gt;</comment>
                            <comment id="15648372" author="amitsela" created="Tue, 8 Nov 2016 18:30:52 +0000"  >&lt;p&gt;As a side note, why aren&apos;t they really &lt;tt&gt;PipelineOptions&lt;/tt&gt; ? is there another mechanism in Beam to pass along external properties ?&lt;/p&gt;

&lt;p&gt;I feel like we&apos;re missing a runner-specific PipelineOptions.. maybe to be fused with the applicative PipelineOptions ? or have a separate mechanism for the runners. So that applicative PipelineOptions would be portable as well. WDYT ?&lt;/p&gt;</comment>
                            <comment id="15648377" author="kenn" created="Tue, 8 Nov 2016 18:31:55 +0000"  >&lt;p&gt;I think we should follow all three of the following paths:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;I agree that we should move away from putting miscellaneous objects in the &lt;tt&gt;PipelineOptions&lt;/tt&gt; unless they are &quot;just data&quot;. Basically things that could be command line options. For complex types, they need to be trivially convertible using Jackson&apos;s &lt;tt&gt;ObjectMapper&lt;/tt&gt;. So I don&apos;t think that fits this case, where the listener embodies complex behavior. Am I wrong?&lt;/li&gt;
	&lt;li&gt;Even if we follow that rule, I can imagine we may still have a &lt;tt&gt;PipelineOptions&lt;/tt&gt; subclass that links to &lt;tt&gt;provided&lt;/tt&gt; dependencies. So &lt;tt&gt;PipelineOptions&lt;/tt&gt; also needs to validate later and not force class loading - it needs to respect the usual expectations of Java&apos;s linking. If it wouldn&apos;t cause a crash without &lt;tt&gt;PipelineOptions&lt;/tt&gt;, it shouldn&apos;t cause a crash with it. This is not a quick fix for this issue but important long term.&lt;/li&gt;
	&lt;li&gt;Last, we are moving towards always isolating each runner in its own profile in every example. This is an easy quick fix.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="15648394" author="amitsela" created="Tue, 8 Nov 2016 18:37:23 +0000"  >&lt;p&gt;Both the Listener and the provided context are fields that are not meant to be shipped to workers (@JsonIgnore) but this the only mechanism Beam provides at the moment to pass properties from the client to the driver.&lt;/p&gt;

&lt;p&gt;Agree about avoiding to force class loading.&lt;/p&gt;

&lt;p&gt;And eventually, if examples should depend on  spark, flink, or any other runner, consider spark as: spark-core + spark-streaming. Less convenient, but shouldn&apos;t make much difference.. &lt;/p&gt;</comment>
                            <comment id="15648395" author="davor" created="Tue, 8 Nov 2016 18:37:29 +0000"  >&lt;p&gt;I believe PipelineOptions will scan &lt;b&gt;registered&lt;/b&gt; pipeline options only, plus those requested by the user when calling &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;something.as(SomeOptions.class)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;. It scans Spark ones because SparkRunner uses AutoService to register its options, &lt;a href=&quot;https://github.com/apache/incubator-beam/blob/master/runners/spark/pom.xml#L165&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/blob/master/runners/spark/pom.xml#L165&lt;/a&gt;. I believe this behavior is roughly correct; but perhaps it could be less eager in some cases.&lt;/p&gt;

&lt;p&gt;It would be good to move &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;JavaSparkContext&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; elsewhere, in addition to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;JavaStreamingListener&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;. Basically, these aren&apos;t real pipeline options. They seem to be there because pipeline options make it easy to pass things around. To be honest, there are many such examples everywhere, this being just one of them: &lt;a href=&quot;https://github.com/apache/incubator-beam/blob/465c7d1f1e4f77e3de218365005f06e8e4ec6167/sdks/java/core/src/main/java/org/apache/beam/sdk/options/GcsOptions.java#L46&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/blob/465c7d1f1e4f77e3de218365005f06e8e4ec6167/sdks/java/core/src/main/java/org/apache/beam/sdk/options/GcsOptions.java#L46&lt;/a&gt; &amp;#8211; just the impact is smaller because it doesn&apos;t normally causes an exception.&lt;/p&gt;

&lt;p&gt;Is there a better way to pass these around?&lt;/p&gt;</comment>
                            <comment id="15648401" author="amitsela" created="Tue, 8 Nov 2016 18:40:34 +0000"  >&lt;p&gt;I can&apos;t think of anything immediate, but given there is no other way to pass things around, examples pom should add dependency on &lt;tt&gt;spark-streaming&lt;/tt&gt;. Like I said, both spark-core and spark-streaming make-up Spark&apos;s compute engine, if we&apos;re OK with one of them, we should be fine with the other.&lt;/p&gt;</comment>
                            <comment id="15648409" author="amitsela" created="Tue, 8 Nov 2016 18:41:58 +0000"  >&lt;p&gt;Wait, there is a &lt;tt&gt;runtime&lt;/tt&gt; dependency in examples pom.. &lt;br/&gt;
Both spark-core and spark-streaming are scoped &lt;tt&gt;runtime&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I that&apos;s the issue, we&apos;ll have the same problem and have to remove the provided context.&lt;/p&gt;

&lt;p&gt;As for listeners, they&apos;re nice, useful for testing (to the best of my knowledge so far), but removing the provided context option will prevent the runner from running with the Spark Job Server, and intents to running Scio+SparkRunner in REPL. And maybe Zeppelin. All of which are examples of features users asked about..   &lt;/p&gt;</comment>
                            <comment id="15648493" author="kenn" created="Tue, 8 Nov 2016 19:11:09 +0000"  >&lt;p&gt;Perhaps you can split it into two options classes, with the troublesome one not registered?&lt;/p&gt;</comment>
                            <comment id="15648518" author="amitsela" created="Tue, 8 Nov 2016 19:19:37 +0000"  >&lt;p&gt;Mmm... forgot about the fact that it will only try to load if registered, and those two options could be used only if explicitly, programmatically, defined (i.e., not via --args).&lt;br/&gt;
Would there be any other implications, except for having to use them only directly via the &lt;tt&gt;SparkPipelineOptions&lt;/tt&gt; API ? is there something I&apos;m missing ?  &lt;/p&gt;</comment>
                            <comment id="15648551" author="amitsela" created="Tue, 8 Nov 2016 19:29:12 +0000"  >&lt;p&gt;It could be confusing to users though..&lt;/p&gt;</comment>
                            <comment id="15648589" author="kenn" created="Tue, 8 Nov 2016 19:43:28 +0000"  >&lt;p&gt;If you had &lt;tt&gt;SparkPipelineOptions&lt;/tt&gt; registered and &lt;tt&gt;SparkContextOptions&lt;/tt&gt; not registered, then instead of &lt;tt&gt;options.as(SparkPipelineOptions.class).setListeners(...)&lt;/tt&gt; they would write something like &lt;tt&gt;options.as(SparkContextOptions.class).setListeners(...)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;It might actually make it clearer for users, so all the things they can easily toggle on the command line are in one place, and all the things that are more advanced code-only uses in another place.&lt;/p&gt;</comment>
                            <comment id="15648595" author="amitsela" created="Tue, 8 Nov 2016 19:46:00 +0000"  >&lt;p&gt;Seems fine. Give me 1-2 hours.&lt;/p&gt;</comment>
                            <comment id="15648794" author="davor" created="Tue, 8 Nov 2016 21:07:23 +0000"  >&lt;p&gt;Not sure I understand. If we are moving these pipelineoptions and not registering some of them, nothing is changing conceptually. Everything is still available, just a little bit hidden.&lt;/p&gt;</comment>
                            <comment id="15648796" author="githubbot" created="Tue, 8 Nov 2016 21:08:09 +0000"  >&lt;p&gt;GitHub user amitsela opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/1316&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/1316&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-944&quot; title=&quot;Spark runner causes an exception when creating pipeline options&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-944&quot;&gt;&lt;del&gt;BEAM-944&lt;/del&gt;&lt;/a&gt; Spark runner causes an exception when creating pipeline op&#8230;&lt;/p&gt;

&lt;p&gt;    Be sure to do all of the following to help us incorporate your contribution&lt;br/&gt;
    quickly and easily:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Make sure the PR title is formatted like:&lt;br/&gt;
       `&lt;a href=&quot;#&amp;gt;&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;BEAM-&amp;lt;Jira issue #&amp;gt;&lt;/a&gt; Description of pull request`&lt;/li&gt;
	&lt;li&gt;[ ] Make sure tests pass via `mvn clean verify`. (Even better, enable&lt;br/&gt;
           Travis-CI on your fork and ensure the whole test matrix passes).&lt;/li&gt;
	&lt;li&gt;[ ] Replace `&amp;lt;Jira issue #&amp;gt;` in the title with the actual Jira issue&lt;br/&gt;
           number, if there is one.&lt;/li&gt;
	&lt;li&gt;[ ] If this contribution is large, please file an Apache&lt;br/&gt;
           &lt;span class=&quot;error&quot;&gt;&amp;#91;Individual Contributor License Agreement&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.apache.org/licenses/icla.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/licenses/icla.txt&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    &amp;#8212;&lt;/p&gt;

&lt;p&gt;    &#8230;tions.&lt;/p&gt;

&lt;p&gt;    Create a SparkContextOptions for context-ware options.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/amitsela/incubator-beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/amitsela/incubator-beam&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-944&quot; title=&quot;Spark runner causes an exception when creating pipeline options&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-944&quot;&gt;&lt;del&gt;BEAM-944&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/1316.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/1316.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1316&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 45823481d1356caad138ca5c8504276045425411&lt;br/&gt;
Author: Sela &amp;lt;ansela@paypal.com&amp;gt;&lt;br/&gt;
Date:   2016-11-08T21:05:13Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-944&quot; title=&quot;Spark runner causes an exception when creating pipeline options&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-944&quot;&gt;&lt;del&gt;BEAM-944&lt;/del&gt;&lt;/a&gt; Spark runner causes an exception when creating pipeline options.&lt;br/&gt;
    Create a SparkContextOptions for context-ware options.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15648820" author="amitsela" created="Tue, 8 Nov 2016 21:17:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davor&quot; class=&quot;user-hover&quot; rel=&quot;davor&quot;&gt;davor&lt;/a&gt; I&apos;ve tried running the same from &lt;tt&gt;example/java&lt;/tt&gt; but I get:&lt;br/&gt;
&lt;tt&gt;java.lang.ClassNotFoundException: org.apache.beam.examples.complete.game.LeaderBoard&lt;/tt&gt;&lt;br/&gt;
What am I missing ?&lt;/p&gt;</comment>
                            <comment id="15648847" author="davor" created="Tue, 8 Nov 2016 21:29:15 +0000"  >&lt;p&gt;`LeaderBoard` is in `examples/java8`, not `examples/java`. But, any other example from `examples/java` would do too.&lt;/p&gt;</comment>
                            <comment id="15648871" author="amitsela" created="Tue, 8 Nov 2016 21:40:47 +0000"  >&lt;p&gt;Successfully executed WordCount example with direct runner.&lt;/p&gt;</comment>
                            <comment id="15648960" author="davor" created="Tue, 8 Nov 2016 22:17:45 +0000"  >&lt;p&gt;Great! It has to be one of these three, right?&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;After the fix in the pending PR, or&lt;/li&gt;
	&lt;li&gt;spark runner is not on the classpath, or&lt;/li&gt;
	&lt;li&gt;spark runner is on the classpath but spark-streaming is too.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15648968" author="amitsela" created="Tue, 8 Nov 2016 22:21:43 +0000"  >&lt;p&gt;Tested after the fix, but I actually fail to reproduce the failure you describe on master branch.&lt;br/&gt;
I&apos;m running:&lt;tt&gt;mvn compile exec:java &lt;del&gt;Dexec.mainClass=org.apache.beam.examples.WordCount -Dexec.args=&quot;&lt;/del&gt;-inputFile=/tmp/kinglear.txt --output=/tmp/out-example-master --runner=DirectRunner&quot;&lt;/tt&gt; from &lt;tt&gt;examples/java&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15648985" author="amitsela" created="Tue, 8 Nov 2016 22:29:03 +0000"  >&lt;p&gt;Damn you weird JIRA markdown :-0&lt;/p&gt;</comment>
                            <comment id="15653903" author="amitsela" created="Thu, 10 Nov 2016 12:15:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davor&quot; class=&quot;user-hover&quot; rel=&quot;davor&quot;&gt;davor&lt;/a&gt; I tried reproducing (on master) the failure with the java8 &lt;tt&gt;LeaderBoard&lt;/tt&gt; example, but I see a different exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:293)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: java.lang.IllegalArgumentException: Property [tableName] is marked with contradictory annotations. Found [[Default.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(value=hourly_team_score) on org.apache.beam.examples.complete.game.HourlyTeamScore$Options#getTableName()], [Default.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(value=leaderboard) on org.apache.beam.examples.complete.game.LeaderBoard$Options#getTableName()], [Default.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(value=user_score) on org.apache.beam.examples.complete.game.UserScore$Options#getTableName()]].
	at org.apache.beam.sdk.options.PipelineOptionsFactory.validateGettersHaveConsistentAnnotation(PipelineOptionsFactory.java:1107)
	at org.apache.beam.sdk.options.PipelineOptionsFactory.validateMethodAnnotations(PipelineOptionsFactory.java:1065)
	at org.apache.beam.sdk.options.PipelineOptionsFactory.validateClass(PipelineOptionsFactory.java:995)
	at org.apache.beam.sdk.options.PipelineOptionsFactory.validateWellFormed(PipelineOptionsFactory.java:626)
	at org.apache.beam.sdk.options.PipelineOptionsFactory.parseObjects(PipelineOptionsFactory.java:1575)
	at org.apache.beam.sdk.options.PipelineOptionsFactory.access$400(PipelineOptionsFactory.java:105)
	at org.apache.beam.sdk.options.PipelineOptionsFactory$Builder.as(PipelineOptionsFactory.java:290)
	at org.apache.beam.examples.complete.game.LeaderBoard.main(LeaderBoard.java:186)
	... 6 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15655172" author="davor" created="Thu, 10 Nov 2016 21:18:13 +0000"  >&lt;p&gt;Looks like another, unrelated regression. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=peihe0%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;peihe0@gmail.com&quot;&gt;peihe0@gmail.com&lt;/a&gt;, can you take a peek? (Probably worth a separate JIRA.)&lt;/p&gt;</comment>
                            <comment id="15655237" author="githubbot" created="Thu, 10 Nov 2016 21:42:33 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/1316&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/1316&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15655240" author="peihe0@gmail.com" created="Thu, 10 Nov 2016 21:43:07 +0000"  >&lt;p&gt;Filed &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-962&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BEAM-962&lt;/a&gt;&lt;br/&gt;
And, I will send a PR soon.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i362zr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>