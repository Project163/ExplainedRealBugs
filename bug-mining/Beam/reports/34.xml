<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:39:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-145] OutputTimeFn#assignOutputTime overrides WindowFn#getOutputTime in unfortunate ways</title>
                <link>https://issues.apache.org/jira/browse/BEAM-145</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Today the &lt;tt&gt;OutputTimeFn&lt;/tt&gt; includes &lt;tt&gt;#assignOutputTime&lt;/tt&gt;, &lt;tt&gt;#combine&lt;/tt&gt;, and &lt;tt&gt;#merge&lt;/tt&gt;. Together these express the grouping of timestamps, analogous to the grouping of values in a GBK / Combine, in a canonical way.&lt;/p&gt;

&lt;p&gt;The default &lt;tt&gt;OutputTimeFn&lt;/tt&gt; is provided by the &lt;tt&gt;WindowFn&lt;/tt&gt;. In particular, &lt;tt&gt;SlidingWindows&lt;/tt&gt; provides an &lt;tt&gt;OutputTimeFn&lt;/tt&gt; that shifts input timestamps later to avoid watermark stuckness and then takes the minimum to compute the output timestamp.&lt;/p&gt;

&lt;p&gt;The SDK additionally provides instance for &quot;min&quot;, &quot;max&quot; and &quot;end of window&quot; output timestamps.&lt;/p&gt;

&lt;p&gt;Unfortunately,  if one overrides the &lt;tt&gt;OutputTimeFn&lt;/tt&gt; to one of these, the shifting done by &lt;tt&gt;SlidingWindows&lt;/tt&gt; is lost.&lt;/p&gt;

&lt;p&gt;This is actually only a minor problem for now, since &quot;min&quot; is the default, &quot;end of window&quot; is unaffected, and &quot;max&quot; has only esoteric uses.The fix is easy:&lt;/p&gt;

&lt;p&gt;This is interrelated with another suggested change:  Since there are only three common &lt;tt&gt;OutputTimeFn&lt;/tt&gt; instances, and it is a high bandwidth API, it does not seem worthwhile to leave it in userland. So it is proposed to reduce it to an enum, which would leave only the &lt;tt&gt;WindowFn&lt;/tt&gt; as a userland place for timestamp adjustments. (requiring special casing for end-of-window, since it cannot be implemented without owning &lt;tt&gt;#assignOutputTime&lt;/tt&gt;)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12952913">BEAM-145</key>
            <summary>OutputTimeFn#assignOutputTime overrides WindowFn#getOutputTime in unfortunate ways</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10103" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">P3</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="kenn">Kenneth Knowles</assignee>
                                    <reporter username="kenn">Kenneth Knowles</reporter>
                        <labels>
                            <label>windowing</label>
                    </labels>
                <created>Wed, 23 Mar 2016 17:38:22 +0000</created>
                <updated>Sat, 16 May 2020 13:19:30 +0000</updated>
                            <resolved>Thu, 23 Mar 2017 05:12:19 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                                    <component>runner-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15276642" author="githubbot" created="Mon, 9 May 2016 17:12:23 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/296&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/296&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15359267" author="githubbot" created="Fri, 1 Jul 2016 16:56:28 +0000"  >&lt;p&gt;GitHub user kennknowles opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/573&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/573&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-145&quot; title=&quot;OutputTimeFn#assignOutputTime overrides WindowFn#getOutputTime in unfortunate ways&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-145&quot;&gt;&lt;del&gt;BEAM-145&lt;/del&gt;&lt;/a&gt; Fix timestamps in GroupAlsoByWindowsProperties&lt;/p&gt;

&lt;p&gt;    Be sure to do all of the following to help us incorporate your contribution&lt;br/&gt;
    quickly and easily:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Make sure the PR title is formatted like:&lt;br/&gt;
       `&lt;a href=&quot;#&amp;gt;&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;BEAM-&amp;lt;Jira issue #&amp;gt;&lt;/a&gt; Description of pull request`&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Make sure tests pass via `mvn clean verify`. (Even better, enable&lt;br/&gt;
           Travis-CI on your fork and ensure the whole test matrix passes).&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Replace `&amp;lt;Jira issue #&amp;gt;` in the title with the actual Jira issue&lt;br/&gt;
           number, if there is one.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; If this contribution is large, please file an Apache&lt;br/&gt;
           &lt;span class=&quot;error&quot;&gt;&amp;#91;Individual Contributor License Agreement&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.apache.org/licenses/icla.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/licenses/icla.txt&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    &amp;#8212;&lt;/p&gt;

&lt;p&gt;    Some of the timestamps were not adjusted when &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-145&quot; title=&quot;OutputTimeFn#assignOutputTime overrides WindowFn#getOutputTime in unfortunate ways&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-145&quot;&gt;&lt;del&gt;BEAM-145&lt;/del&gt;&lt;/a&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-145&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BEAM-145&lt;/a&gt;) was fixed to respect the `WindowFn`&apos;s timestamps.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/kennknowles/incubator-beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/kennknowles/incubator-beam&lt;/a&gt; GABWProperties&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/573.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/573.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #573&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 190740f7971be506df5416dc4dfc5714bba0c972&lt;br/&gt;
Author: Kenneth Knowles &amp;lt;klk@google.com&amp;gt;&lt;br/&gt;
Date:   2016-07-01T16:53:37Z&lt;/p&gt;

&lt;p&gt;    Fix timestamps in GroupAlsoByWindowsProperties&lt;/p&gt;

&lt;p&gt;    Some of the timestamps were not adjusted when&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-145&quot; title=&quot;OutputTimeFn#assignOutputTime overrides WindowFn#getOutputTime in unfortunate ways&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-145&quot;&gt;&lt;del&gt;BEAM-145&lt;/del&gt;&lt;/a&gt; was fixed to respect the WindowFn&apos;s&lt;br/&gt;
    timestamps.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15359666" author="githubbot" created="Fri, 1 Jul 2016 21:29:41 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/573&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/573&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15384661" author="kenn" created="Tue, 19 Jul 2016 18:44:29 +0000"  >&lt;p&gt;There&apos;s an unfortunate mutual default-invocation loop left over from the fix to this. It will go away when OutputTime becomes an AST instead of a Fn, but keeping this open to track that there remains an issue.&lt;/p&gt;</comment>
                            <comment id="15937737" author="kenn" created="Thu, 23 Mar 2017 05:12:20 +0000"  >&lt;p&gt;The appropriate status would be &quot;Redundant&quot; in that the existing Runner API proto combined with our intent to use it and imminent use of it make this irrelevant now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2v3vr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>