<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:54:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-6115] SyntheticSource bundle size parameter sometimes is casted to invalid type</title>
                <link>https://issues.apache.org/jira/browse/BEAM-6115</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;The parameter &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;bundle_size_in_elements&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; in SyntheticSources in Python in specific situations becomes `float` instead of `int` what causes failure on Dataflow:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Traceback (most recent call last):
File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python2.7/dist-packages/dataflow_worker/batchworker.py&quot;&lt;/span&gt;, line 642, in do_work
work_executor.execute()
File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python2.7/dist-packages/dataflow_worker/executor.py&quot;&lt;/span&gt;, line 198, in execute
self._split_task)
File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python2.7/dist-packages/dataflow_worker/executor.py&quot;&lt;/span&gt;, line 206, in _perform_source_split_considering_api_limits
desired_bundle_size)
File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python2.7/dist-packages/dataflow_worker/executor.py&quot;&lt;/span&gt;, line 243, in _perform_source_split
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; split in source.split(desired_bundle_size):
File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python2.7/dist-packages/apache_beam/testing/synthetic_pipeline.py&quot;&lt;/span&gt;, line 222, in split
bundle_size_in_elements):
TypeError: range() integer step argument expected, got &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
Debugging&#160;showed that on Dataflow following line causes this problem (line 213-214):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-python&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;max&lt;/span&gt;(1, &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._num_records / &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._initial_splitting_num_bundles)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;.&lt;br/&gt;
In line 218, there is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-python&quot;&gt;math.floor(math.sqrt(&lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._num_records))&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; which also returns float.&lt;/p&gt;

&lt;p&gt;In 222 line &lt;em&gt;bundle_size_in_elements&lt;/em&gt; is used to &lt;em&gt;range&lt;/em&gt; method which requires&#160;&lt;em&gt;int&lt;/em&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13200020">BEAM-6115</key>
            <summary>SyntheticSource bundle size parameter sometimes is casted to invalid type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10103" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">P3</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kasiak">Kasia Kucharczyk</assignee>
                                    <reporter username="kasiak">Kasia Kucharczyk</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Nov 2018 09:31:49 +0000</created>
                <updated>Sat, 16 May 2020 13:21:14 +0000</updated>
                            <resolved>Fri, 28 Dec 2018 16:29:28 +0000</resolved>
                                                    <fixVersion>2.9.0</fixVersion>
                                    <component>testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00rog:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>