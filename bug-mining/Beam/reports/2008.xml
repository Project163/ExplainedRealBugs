<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:11:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-10460] Failure / timeout in SparkPortableExecutionTest</title>
                <link>https://issues.apache.org/jira/browse/BEAM-10460</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Commit/12263/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Commit/12263/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13316251">BEAM-10460</key>
            <summary>Failure / timeout in SparkPortableExecutionTest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10101" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">P1</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ibzib">Kyle Weaver</assignee>
                                    <reporter username="kenn">Kenneth Knowles</reporter>
                        <labels>
                            <label>flake</label>
                    </labels>
                <created>Fri, 10 Jul 2020 23:10:35 +0000</created>
                <updated>Thu, 13 May 2021 22:59:10 +0000</updated>
                            <resolved>Thu, 13 May 2021 22:59:10 +0000</resolved>
                                                    <fixVersion>Not applicable</fixVersion>
                                    <component>runner-spark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="10200">2h 50m</timespent>
                                <comments>
                            <comment id="17155837" author="kenn" created="Sat, 11 Jul 2020 02:48:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/2460/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/2460/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17156204" author="kenn" created="Sun, 12 Jul 2020 04:24:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/2463/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/2463/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17156923" author="kenn" created="Mon, 13 Jul 2020 19:17:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/2469/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/2469/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17156925" author="kenn" created="Mon, 13 Jul 2020 19:17:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ibzib&quot; class=&quot;user-hover&quot; rel=&quot;ibzib&quot;&gt;ibzib&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=angoenka&quot; class=&quot;user-hover&quot; rel=&quot;angoenka&quot;&gt;angoenka&lt;/a&gt; would you have a second to see if this is something obvious or give it to someone?&lt;/p&gt;</comment>
                            <comment id="17156993" author="kenn" created="Mon, 13 Jul 2020 21:35:53 +0000"  >&lt;p&gt;Found 90 second successful runs. So probably 120 seconds for timeout could be too tight a bound. We only really need the timeout to halt the test if it is deadlocked or crashlooping etc.&lt;/p&gt;</comment>
                            <comment id="17157642" author="kenn" created="Tue, 14 Jul 2020 19:54:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/2473/testReport/junit/org.apache.beam.runners.spark/SparkPortableExecutionTest/testExecution/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/2473/testReport/junit/org.apache.beam.runners.spark/SparkPortableExecutionTest/testExecution/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17157644" author="kenn" created="Tue, 14 Jul 2020 19:58:18 +0000"  >&lt;p&gt;Handing the reigns to you, since your PR was a better diagnosis and fix.&lt;/p&gt;</comment>
                            <comment id="17158747" author="kenn" created="Wed, 15 Jul 2020 22:33:41 +0000"  >&lt;p&gt;Looks like there&apos;s still a problem: &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Commit/12388/testReport/junit/org.apache.beam.runners.spark/SparkPortableExecutionTest/testExecution/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Commit/12388/testReport/junit/org.apache.beam.runners.spark/SparkPortableExecutionTest/testExecution/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Is this a bug in the Java SDK harness not shutting down?&lt;/p&gt;</comment>
                            <comment id="17158781" author="kenn" created="Wed, 15 Jul 2020 23:28:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Commit/12391/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Commit/12391/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17158789" author="ibzib" created="Wed, 15 Jul 2020 23:52:40 +0000"  >&lt;p&gt;&amp;gt; Is this a bug in the Java SDK harness not shutting down?&lt;br/&gt;
&#160;&lt;br/&gt;
Perhaps. But why would it only happen for this particular test?&lt;br/&gt;
&#160;&lt;br/&gt;
SparkPortableExecutionTest contains three tests that are set up mostly the same. But I&apos;ve only seen testExecution fail. Besides the actual pipelines being tested (which I&apos;m reasonably sure are not the issue here since they all finish successfully), the only difference I see is that&#160;testExecution sets &quot;--experiments=beam_fn_api&quot;, while the other two do not.&lt;/p&gt;</comment>
                            <comment id="17158861" author="kenn" created="Thu, 16 Jul 2020 03:10:34 +0000"  >&lt;p&gt;One side effect of &lt;tt&gt;--experiments=beam_fn_api&lt;/tt&gt; is to use SDF as the primitive and not the legacy Read transform. This is at construction time in the Java SDK. In case that helps...&lt;/p&gt;</comment>
                            <comment id="17168263" author="altay" created="Thu, 30 Jul 2020 22:13:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ibzib&quot; class=&quot;user-hover&quot; rel=&quot;ibzib&quot;&gt;ibzib&lt;/a&gt; - any progress on this?&lt;/p&gt;</comment>
                            <comment id="17171854" author="ibzib" created="Thu, 6 Aug 2020 01:00:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=altay&quot; class=&quot;user-hover&quot; rel=&quot;altay&quot;&gt;altay&lt;/a&gt;&#160;have you seen this flake recently? (As discussed on the mailing list, we really need a better way of tracking flakes...)&lt;/p&gt;</comment>
                            <comment id="17172602" author="altay" created="Thu, 6 Aug 2020 18:38:42 +0000"  >&lt;p&gt;No, I have not seen it recently. I was reviewing issues with the flake level. If this is no longer an issue please close it.&lt;/p&gt;</comment>
                            <comment id="17173448" author="ibzib" created="Fri, 7 Aug 2020 20:19:32 +0000"  >&lt;p&gt;This hasn&apos;t failed for a while, so I&apos;m marking this as resolved.&#160;&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Cron/lastCompletedBuild/testReport/junit/org.apache.beam.runners.spark/SparkPortableExecutionTest/history&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Cron/lastCompletedBuild/testReport/junit/org.apache.beam.runners.spark/SparkPortableExecutionTest/history&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Incidentally, I&apos;m considering simplifying or removing textExecution altogether, since it doesn&apos;t really test anything that&apos;s not already being tested by the validates runner tests.&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-10646&quot; title=&quot;Simplify SparkPortableExecutionTest.testExecution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-10646&quot;&gt;&lt;del&gt;BEAM-10646&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17182152" author="ibzib" created="Fri, 21 Aug 2020 21:12:23 +0000"  >&lt;p&gt;After removing testExecution, now we are seeing&#160;SparkPortableExecutionTest.testExecStageWithMultipleOutputs fail instead. Just like testExecution before, the pipeline is finishing but then must be hanging after shutdown. This leads me to believe that the timeout errors are caused somehow by the setup of the test.&lt;/p&gt;

&lt;p&gt;The remaining two tests are testing the behavior of ParDos with side effects, which as I understand it are not well-defined the Beam model anyway.&lt;/p&gt;</comment>
                            <comment id="17182176" author="ibzib" created="Fri, 21 Aug 2020 23:10:46 +0000"  >&lt;p&gt;This class is removed for good.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 12 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0go2w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>