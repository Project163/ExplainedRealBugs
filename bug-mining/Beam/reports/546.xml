<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:49:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-3087] Extend lock scope in Flink UnboundedSourceWrapper</title>
                <link>https://issues.apache.org/jira/browse/BEAM-3087</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;In &lt;tt&gt;UnboundedSourceWrapper&lt;/tt&gt; the lock scope is not big enough: we synchronise in &lt;tt&gt;emitElement()&lt;/tt&gt; but should instead synchronise inside the reader loop in &lt;tt&gt;run()&lt;/tt&gt; because the &lt;tt&gt;Source&lt;/tt&gt; interface does not allow concurrent calls.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13111150">BEAM-3087</key>
            <summary>Extend lock scope in Flink UnboundedSourceWrapper</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="10722" iconUrl="https://issues.apache.org/jira/images/icons/statuses/generic.png" description="">Triage Needed</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="grzegorz_kolakowski">Grzegorz Ko&#322;akowski</assignee>
                                    <reporter username="aljoscha">Aljoscha Krettek</reporter>
                        <labels>
                    </labels>
                <created>Sat, 21 Oct 2017 06:12:16 +0000</created>
                <updated>Sat, 23 Nov 2024 09:38:32 +0000</updated>
                            <resolved>Tue, 27 Mar 2018 04:51:08 +0000</resolved>
                                                    <fixVersion>2.5.0</fixVersion>
                                    <component>runner-flink</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16339655" author="kenn" created="Thu, 25 Jan 2018 19:08:27 +0000"  >&lt;p&gt;Does this need to block 2.3.0? Instead of using the Fix Version as a priority list, I have bumped up the priority. What are the consequences of this bug?&lt;/p&gt;</comment>
                            <comment id="16340619" author="jbonofre" created="Fri, 26 Jan 2018 06:31:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt; any update on this one ? If we have no news soon, I will bump to 2.4.0.&lt;/p&gt;</comment>
                            <comment id="16341059" author="aljoscha" created="Fri, 26 Jan 2018 13:33:41 +0000"  >&lt;p&gt;There was one user that had a problem because of this but I didn&apos;t hear about it recently, so I think it&apos;s ok to push it back.&lt;/p&gt;</comment>
                            <comment id="16342278" author="jbonofre" created="Sat, 27 Jan 2018 19:32:56 +0000"  >&lt;p&gt;Thanks for the update Aljoscha. I bumped to 2.4.0.&lt;/p&gt;</comment>
                            <comment id="16398841" author="aromanenko" created="Wed, 14 Mar 2018 16:32:32 +0000"  >&lt;p&gt;Does anyone work on this? &lt;/p&gt;

&lt;p&gt;It looks like it&apos;s related to this issue: &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-3726&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BEAM-3726&lt;/a&gt;, especially, to&#160;this Pawel&apos;s &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-3726?focusedCommentId=16383882&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16383882&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;comment&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;This call (actually, two calls inside this method) should be synchronized with other reader calls. Otherwise, we can have potentially race condition there.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;UnboundedSourceWrapper
...
@Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void run(SourceContext&amp;lt;WindowedValue&amp;lt;ValueWithRecordId&amp;lt;OutputT&amp;gt;&amp;gt;&amp;gt; ctx) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
  ...
    &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (isRunning) {
        dataAvailable = readerInvoker.invokeAdvance(reader);
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Does this assumption make sense?&lt;br/&gt;
&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16401739" author="grzegorz_kolakowski" created="Fri, 16 Mar 2018 11:00:26 +0000"  >&lt;p&gt;I &quot;accidentally&quot; started working on this as a part of this task: &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-2393&quot; title=&quot;BoundedSource is not fault-tolerant in FlinkRunner Streaming mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-2393&quot;&gt;&lt;del&gt;BEAM-2393&lt;/del&gt;&lt;/a&gt;&#160;3 weeks ago. However, I got stuck (please see the discussion under the task).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13076132">BEAM-2393</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13139957">BEAM-3726</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 35 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ljov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>