<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:26:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-12792] Multiple jobs running on Flink session cluster reuse the persistent Python environment.</title>
                <link>https://issues.apache.org/jira/browse/BEAM-12792</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;I&apos;m running TFX pipelines on a Flink cluster using Beam in k8s. However, extra python packages passed to the Flink runner (or rather beam worker side-car) are only installed once per deployment cycle. Example:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Flink is deployed and is up and running&lt;/li&gt;
	&lt;li&gt;A TFX pipeline starts, submits a job to Flink along with a python whl of custom code and beam ops.&lt;/li&gt;
	&lt;li&gt;The beam worker installs the package and the pipeline finishes succesfully.&lt;/li&gt;
	&lt;li&gt;A new TFX pipeline is build where a new beam fn is introduced, the pipline is started and the new whl is submitted as in step 2).&lt;/li&gt;
	&lt;li&gt;This time, the new package is not being installed in the beam worker causing the job to fail due to a reference which does not exist in the beam worker, since it didn&apos;t install the new package.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I started using Flink from beam version 2.27 and it has been an issue all the time.&lt;/p&gt;</description>
                <environment>Kubernetes 1.20 on Ubuntu 18.04.</environment>
        <key id="13396898">BEAM-12792</key>
            <summary>Multiple jobs running on Flink session cluster reuse the persistent Python environment.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10101" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">P1</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ConverJens">Jens Wiren</reporter>
                        <labels>
                            <label>FlinkRunner</label>
                            <label>beam</label>
                    </labels>
                <created>Tue, 24 Aug 2021 09:58:50 +0000</created>
                <updated>Sat, 4 Jun 2022 21:40:10 +0000</updated>
                                            <version>2.27.0</version>
                    <version>2.28.0</version>
                    <version>2.29.0</version>
                    <version>2.30.0</version>
                    <version>2.31.0</version>
                                                    <component>sdk-py-harness</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="70200">19.5h</timespent>
                                <comments>
                            <comment id="17475648" author="tvalentyn" created="Thu, 13 Jan 2022 18:55:31 +0000"  >&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kcweaver&quot; class=&quot;user-hover&quot; rel=&quot;kcweaver&quot;&gt;kcweaver&lt;/a&gt; who may have advice here.&lt;br/&gt;
I am not very familiar with Beam on Flink setup so not sure if this is a bug or WAI. You could also ask on user@.&lt;br/&gt;
If you are running SDK harness in a Beam SDK container, then the container should be executing the same startup sequence.&lt;/p&gt;</comment>
                            <comment id="17476014" author="converjens" created="Fri, 14 Jan 2022 08:15:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tvalentyn&quot; class=&quot;user-hover&quot; rel=&quot;tvalentyn&quot;&gt;tvalentyn&lt;/a&gt; It seems very strange that this would be the intended behaviour. In practice it means that a session cluster (which is meant to run indefinitely) can only run the first job submitted to it, since any following job will fail due to missing deps/code.&lt;/p&gt;

&lt;p&gt;The SDK harness is running in an official py3.7 apache beam image so everything should be quite the &quot;vanilla&quot; use case.&lt;/p&gt;

&lt;p&gt;You mentioned &quot;ask on @user&quot;, what or who are you referring to? If there is a faster way of getting answers/solutions then I&apos;m all ears!&lt;/p&gt;</comment>
                            <comment id="17476029" author="tvalentyn" created="Fri, 14 Jan 2022 09:01:25 +0000"  >&lt;p&gt;I meant to email user@beam.apache.org - this mailing list had discussions in the past about using Beam on Flink on K8s and people there may be able to share their experience.&lt;/p&gt;</comment>
                            <comment id="17476030" author="tvalentyn" created="Fri, 14 Jan 2022 09:02:01 +0000"  >&lt;p&gt;Also, i meant to cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ibzib&quot; class=&quot;user-hover&quot; rel=&quot;ibzib&quot;&gt;ibzib&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17479611" author="JIRAUSER283944" created="Thu, 20 Jan 2022 19:00:33 +0000"  >&lt;p&gt;Drive by when searching for Flink+Beam+TFX as I am using exactly the same setup.&lt;/p&gt;

&lt;p&gt;How do you submit a job with python whl and custom code? In my case I built a custom image based on the official beam_py_sdk to include custom code so repeated submission is not a problem.&lt;/p&gt;</comment>
                            <comment id="17480109" author="converjens" created="Fri, 21 Jan 2022 14:36:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tvalentyn&quot; class=&quot;user-hover&quot; rel=&quot;tvalentyn&quot;&gt;tvalentyn&lt;/a&gt; Thanks, I&apos;ll give the mailing list a try!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ynait&quot; class=&quot;user-hover&quot; rel=&quot;ynait&quot;&gt;ynait&lt;/a&gt; Beam has several ways to specify dependencies of the beam worker process (just google beam python dependecies). I have been building a whl from my pipeline code and then passed that to beam using the --extra-package flag. BTW, TFX does this automatically in an attempt to ensure that the runner has the correct TFX version installed.&lt;/p&gt;

&lt;p&gt;Currently, I&apos;m doing something similar but there are several limitations:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;You can only run one version of your custom code at any given time on your flink cluster. If you want to run updated code, you need to redeploy flink.&lt;/li&gt;
	&lt;li&gt;You have to manually keep track of when your beam workers custom code is out of date and only occupies space in your cluster etc&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;In the ideal (intended!) scenario, you have one auto scaling flink deploy and you just submit your beam jobs and your dependencies per job&lt;/p&gt;</comment>
                            <comment id="17480294" author="tvalentyn" created="Fri, 21 Jan 2022 23:39:47 +0000"  >&lt;p&gt;Thanks. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phoerious&quot; class=&quot;user-hover&quot; rel=&quot;phoerious&quot;&gt;phoerious&lt;/a&gt; who raised a similar issue. For my education regarding Beam + Flink configuration: which component manages the lifecycle of Beam SDK harness container when running on Flink + K8s ? &lt;br/&gt;
Sounds like the same containers persist across multiple pipeline executions - is it a hard requirement? Can the same SDK containers be used at the same time to process two concurrently running pipelines?  &lt;/p&gt;</comment>
                            <comment id="17480934" author="phoerious" created="Mon, 24 Jan 2022 09:07:12 +0000"  >&lt;p&gt;There are two modes. The most basic deployment mode is an ad-hoc application cluster, which is deployed explicitly for one job. The other is a session cluster, which can host multiple jobs (I guess that&apos;s the more common choice).&lt;/p&gt;

&lt;p&gt;A session cluster can be deployed either as a static deployment (manual or via the third-party Flink K8S operator CRD, examples here: &lt;a href=&quot;https://github.com/spotify/flink-on-k8s-operator/tree/master/examples/beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/spotify/flink-on-k8s-operator/tree/master/examples/beam&lt;/a&gt;) or dynamically via Flink&apos;s built-in &quot;native&quot; K8S mode (&lt;a href=&quot;https://nightlies.apache.org/flink/flink-docs-master/docs/deployment/resource-providers/native_kubernetes/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://nightlies.apache.org/flink/flink-docs-master/docs/deployment/resource-providers/native_kubernetes/&lt;/a&gt;). Neither binds the lifecycle explicitly to a job. The native mode will spawn new pods on demand and despawn them again afterwards (after a configured timeout), but if you submit two jobs in short succession, nothing prevents Flink from reusing an already running container from the previous job.&lt;/p&gt;

&lt;p&gt;And yes, a single execution container can host multiple pipelines at the same time. By default, the number of execution slots available per taskmanager is 1, but that settings is configurable.&lt;/p&gt;</comment>
                            <comment id="17480945" author="phoerious" created="Mon, 24 Jan 2022 09:33:02 +0000"  >&lt;p&gt;That said, I think the easiest way to solve this problem is to create a namespaced temporary venv in the container and install everything there. The venv is deleted when the job finishes (or fails) and the next job creates a new venv. Two concurrent jobs use different venv folders. Ideally, all this runs as a non-root user, which is more secure and also gets rid of the &quot;pip as root&quot; warning that you find in the logs right now. With a local venv, there is no need to install any dependencies as root.&lt;/p&gt;</comment>
                            <comment id="17480994" author="converjens" created="Mon, 24 Jan 2022 10:48:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phoerious&quot; class=&quot;user-hover&quot; rel=&quot;phoerious&quot;&gt;phoerious&lt;/a&gt; I think this solution is worth a shot.&lt;/p&gt;

&lt;p&gt;BTW, do you have any example of how to install a Flink native k8s session cluster that includes a beam worker side car?&lt;/p&gt;</comment>
                            <comment id="17481033" author="phoerious" created="Mon, 24 Jan 2022 11:56:14 +0000"  >&lt;p&gt;You do that with pod templates. You spawn the cluster with the start-cluster.sh script, which accepts several configuration parameters, including one for a pod template. The JobManager uses the pod template to deploy the TaskManager pods.&lt;/p&gt;

&lt;p&gt;The deployment I&apos;m running here is a persisted version of that. It&apos;s a bit hacky, but as long as the K8S operator doesn&apos;t support the native K8S mode (which would do the same thing, just more user-friendly), it&apos;s the only way to have a persistent session cluster with auto-scaling enabled (if I don&apos;t want to fumble with start-cluster.sh all the time).&lt;/p&gt;

&lt;p&gt;The pod template is saved in a K8S ConfigMap, which is mounted into the JobManager pod. Here&apos;s the critical container spec part of my pod template:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &#160; &#160;containers:
&#160; &#160; &#160; &#160; - name: flink-main-container
&#160; &#160; &#160; &#160; &#160; image: apache/flink:1.13.2-scala_2.12
&#160; &#160; &#160; &#160; &#160; ports:
&#160; &#160; &#160; &#160; &#160; &#160; - containerPort: 6122
&#160; &#160; &#160; &#160; &#160; &#160; &#160; name: rpc
&#160; &#160; &#160; &#160; &#160; &#160; - containerPort: 6125
&#160; &#160; &#160; &#160; &#160; &#160; &#160; name: query-state
&#160; &#160; &#160; &#160; &#160; livenessProbe:
&#160; &#160; &#160; &#160; &#160; &#160; tcpSocket:
&#160; &#160; &#160; &#160; &#160; &#160; &#160; port: 6122
&#160; &#160; &#160; &#160; &#160; &#160; initialDelaySeconds: 30
&#160; &#160; &#160; &#160; &#160; resources:
&#160; &#160; &#160; &#160; &#160; &#160; requests:
&#160; &#160; &#160; &#160; &#160; &#160; &#160; memory: 2048Mi
&#160; &#160; &#160; &#160; &#160; &#160; &#160; cpu: 2
&#160; &#160; &#160; &#160; &#160; volumeMounts:
&#160; &#160; &#160; &#160; &#160; &#160; - mountPath: /tmp/beam-artifact-staging
&#160; &#160; &#160; &#160; &#160; &#160; &#160; name: artifact-staging
&#160; &#160; &#160; &#160; &#160; &#160; - mountPath: /opt/flink/log
&#160; &#160; &#160; &#160; &#160; &#160; &#160; name: flink-logs
&#160; &#160; &#160; &#160; - name: beam-worker-pool
&#160; &#160; &#160; &#160; &#160; image: apache/beam_python3.8_sdk
&#160; &#160; &#160; &#160; &#160; args: [&lt;span class=&quot;code-quote&quot;&gt;&quot;--worker_pool&quot;&lt;/span&gt;]
&#160; &#160; &#160; &#160; &#160; ports:
&#160; &#160; &#160; &#160; &#160; &#160; - containerPort: 50000
&#160; &#160; &#160; &#160; &#160; &#160; &#160; name: pool
&#160; &#160; &#160; &#160; &#160; livenessProbe:
&#160; &#160; &#160; &#160; &#160; &#160; tcpSocket:
&#160; &#160; &#160; &#160; &#160; &#160; &#160; port: 50000
&#160; &#160; &#160; &#160; &#160; &#160; initialDelaySeconds: 30
&#160; &#160; &#160; &#160; &#160; &#160; periodSeconds: 60
&#160; &#160; &#160; &#160; &#160; resources:
&#160; &#160; &#160; &#160; &#160; &#160; requests:
&#160; &#160; &#160; &#160; &#160; &#160; &#160; memory: 4096Mi
&#160; &#160; &#160; &#160; &#160; &#160; &#160; cpu: &lt;span class=&quot;code-quote&quot;&gt;&quot;2&quot;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; volumeMounts:
&#160; &#160; &#160; &#160; &#160; &#160; - mountPath: /tmp/beam-artifact-staging
&#160; &#160; &#160; &#160; &#160; &#160; &#160; name: artifact-staging&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;tt&gt;artifact-staging&lt;/tt&gt; volume is a shared CephFS volume accessible by all TaskManager pods (I wish there was a way to deploy artifacts without shared storage, but that&apos;s another issue).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17481039" author="converjens" created="Mon, 24 Jan 2022 12:04:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phoerious&quot; class=&quot;user-hover&quot; rel=&quot;phoerious&quot;&gt;phoerious&lt;/a&gt; Thanks for the pointers! I&apos;m currently running a static Flink deploy which doesn&apos;t scale so this would be very nice indeed!&lt;/p&gt;</comment>
                            <comment id="17481051" author="phoerious" created="Mon, 24 Jan 2022 12:33:26 +0000"  >&lt;p&gt;For Beam, it looks the same. A job is stuck in pending mode until all TaskManagers are up and running. Only then is the Beam pipeline started.&lt;/p&gt;</comment>
                            <comment id="17481348" author="tvalentyn" created="Mon, 24 Jan 2022 19:38:48 +0000"  >&lt;p&gt;As a proof-of-concept, you could try to create a custom container with a modified entrypoint that would create a new virtual environment somewhere along these lines: &lt;a href=&quot;https://github.com/apache/beam/blob/37d9c2bff380857e61c7cf2476b776b954101f5a/sdks/python/container/boot.go#L85&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/blob/37d9c2bff380857e61c7cf2476b776b954101f5a/sdks/python/container/boot.go#L85&lt;/a&gt;, see also: &lt;a href=&quot;https://cloud.google.com/dataflow/docs/guides/using-custom-containers&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cloud.google.com/dataflow/docs/guides/using-custom-containers&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;I am wondering if this is will address the original error reported here, since from current description it sounds like the for the second pipeline, some packages do not get installed, but perhaps we are dealing with a conflict caused by similar packages installed twice in the same environment.&lt;/p&gt;</comment>
                            <comment id="17481350" author="tvalentyn" created="Mon, 24 Jan 2022 19:41:25 +0000"  >&lt;p&gt;Note that Beam SDK container comes with Beam dependencies installed in the default environment. creating a new environment at startup of the container would not have the preinstalled dependencies, and they will be reinstalled on startup when Beam SDK tarball is installed; also the size of the container will keep growing with each environment created if it&apos;s not cleaned up, so this solution would need more work to iron out, but it would nevertheless be useful to verify if it addresses the issue.&lt;/p&gt;</comment>
                            <comment id="17481638" author="phoerious" created="Tue, 25 Jan 2022 08:33:45 +0000"  >&lt;p&gt;You can configure a venv so that it inherits the pre-installed packages from the global environment. No need to reinstall those.&lt;/p&gt;</comment>
                            <comment id="17483163" author="converjens" created="Thu, 27 Jan 2022 14:14:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phoerious&quot; class=&quot;user-hover&quot; rel=&quot;phoerious&quot;&gt;phoerious&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tvalentyn&quot; class=&quot;user-hover&quot; rel=&quot;tvalentyn&quot;&gt;tvalentyn&lt;/a&gt; Would anyone like to try and implement this?&lt;/p&gt;</comment>
                            <comment id="17483185" author="phoerious" created="Thu, 27 Jan 2022 14:44:54 +0000"  >&lt;p&gt;Only if you give me a detailed rundown on how I can properly build, deploy and test the SDK from the Beam repository. I don&apos;t really have time to sift through tons of hard-to-find and mostly incomplete documentation. Last time I contributed code, this got really complicated really quickly and none of the involved Beam guys seemed to have deeper knowledge of the Python SDK, so they couldn&apos;t help me either.&lt;/p&gt;</comment>
                            <comment id="17483209" author="tvalentyn" created="Thu, 27 Jan 2022 15:21:59 +0000"  >&lt;p&gt;Relevant documentation pages:&lt;br/&gt;
How to build and use custom containers: &lt;a href=&quot;https://beam.apache.org/documentation/runtime/environments/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://beam.apache.org/documentation/runtime/environments/&lt;/a&gt;&lt;br/&gt;
Python documentation is here: &lt;a href=&quot;https://s.apache.org/beam-python-dev-wiki&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s.apache.org/beam-python-dev-wiki&lt;/a&gt; . We made lots of updates to both recently. If the changes are contained to the containers&apos; boot.go, you&apos;d not need to make SDK changes.&lt;/p&gt;
</comment>
                            <comment id="17483213" author="tvalentyn" created="Thu, 27 Jan 2022 15:25:56 +0000"  >&lt;p&gt;I am not very familiar with Flink runner set up but should be able to help with general Python SDK issues. From the thread so far, my main question is whether creating a new venv in boot.go will help at all here, and also if we do that, how do we deal with packages preinstalled in the image. It may need a one-pager and a discussion on dev@ with more context on the Flink setup and more eyes on the approach. &lt;/p&gt;</comment>
                            <comment id="17483214" author="tvalentyn" created="Thu, 27 Jan 2022 15:26:44 +0000"  >&lt;p&gt;&amp;gt; You can configure a venv so that it inherits the pre-installed packages from the global environment. No need to reinstall those.&lt;br/&gt;
ack, just saw that.&lt;/p&gt;</comment>
                            <comment id="17483217" author="tvalentyn" created="Thu, 27 Jan 2022 15:27:59 +0000"  >&lt;p&gt;what if there are some conflicting dependencies between global deps and local to the pipeline? If only the local env is modified, then it should be fine.&lt;/p&gt;</comment>
                            <comment id="17483826" author="phoerious" created="Fri, 28 Jan 2022 16:02:16 +0000"  >&lt;p&gt;&lt;cite&gt;How to build and use custom containers: &lt;a href=&quot;https://beam.apache.org/documentation/runtime/environments/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://beam.apache.org/documentation/runtime/environments/&lt;/a&gt;&lt;/cite&gt;&lt;/p&gt;

&lt;p&gt;I set up my build env according to the steps outlined in that document, but when I run pytest, there are already 13 failing tests without me changing anything. Is that normal?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
13 failed, 4519 passed, 680 skipped, 1037 warnings, 1 error in 1490.96 seconds&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I also have to suppress a lot of PEP8 errors in my IDE, particularly about indentation. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17484073" author="tvalentyn" created="Sat, 29 Jan 2022 05:01:21 +0000"  >&lt;p&gt;No, having test failures is not expected; are they persistent failures and fail individually when you run the tests? We run precommits on all PRs so tests are expected to pass. That said, this shouldn&apos;t stop you from making changes though, unless of course the tests directly exercise the functionality you are modifying. &lt;/p&gt;

&lt;p&gt;Formatting-wise, we are currently using lint and yapf autoformatter, configs are available in the repo; but perhaps that disagrees with some of the rules in the IDE that you have?&lt;/p&gt;</comment>
                            <comment id="17484734" author="phoerious" created="Mon, 31 Jan 2022 15:05:17 +0000"  >&lt;p&gt;&lt;cite&gt;are they persistent failures and fail individually when you run the tests?&#160;&lt;/cite&gt;????????&lt;/p&gt;

&lt;p&gt;Yes, they are persistent, but I didn&apos;t really bother with testing everything individually, since I&apos;m not modifying any of the Python code anyway.&lt;/p&gt;

&lt;p&gt;I submitted a draft PR here: &lt;a href=&quot;https://github.com/apache/beam/pull/16658&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/16658&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please have a look. There are still some design and life cycle issues with this, on which I need Beam SDK expert advice.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;cite&gt;Formatting-wise, we are currently using lint and yapf autoformatter, configs are available in the repo; but perhaps that disagrees with some of the rules in the IDE that you have&lt;/cite&gt;?&lt;/p&gt;

&lt;p&gt;Not just my IDE, they outright violate PEP8. Formatting the Go code with tabs is also a strange choice.&lt;/p&gt;</comment>
                            <comment id="17549548" author="JIRAUSER282469" created="Sat, 4 Jun 2022 21:40:10 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/apache/beam/issues/21123&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/issues/21123&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13423000">BEAM-13669</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Python</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0u6v4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>