<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:00:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-7814] bigquery tests flaky with empty actual result values</title>
                <link>https://issues.apache.org/jira/browse/BEAM-7814</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Example failure:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
16:54:32 ======================================================================
16:54:32 FAIL: test_big_query_write_new_types (apache_beam.io.gcp.bigquery_write_it_test.BigQueryWriteIntegrationTests)
16:54:32 ----------------------------------------------------------------------
16:54:32 Traceback (most recent call last):
16:54:32   File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python35_PR/src/sdks/python/apache_beam/io/gcp/bigquery_write_it_test.py&quot;&lt;/span&gt;, line 229, in test_big_query_write_new_types
16:54:32     write_disposition=beam.io.BigQueryDisposition.WRITE_EMPTY))
16:54:32   File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python35_PR/src/sdks/python/apache_beam/pipeline.py&quot;&lt;/span&gt;, line 426, in __exit__
16:54:32     self.run().wait_until_finish()
16:54:32   File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python35_PR/src/sdks/python/apache_beam/pipeline.py&quot;&lt;/span&gt;, line 406, in run
16:54:32     self._options).run(False)
16:54:32   File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python35_PR/src/sdks/python/apache_beam/pipeline.py&quot;&lt;/span&gt;, line 419, in run
16:54:32     &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; self.runner.run_pipeline(self, self._options)
16:54:32   File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python35_PR/src/sdks/python/apache_beam/runners/direct/test_direct_runner.py&quot;&lt;/span&gt;, line 51, in run_pipeline
16:54:32     hc_assert_that(self.result, pickler.loads(on_success_matcher))
16:54:32 AssertionError: 
16:54:32 Expected: (Expected data is [(0.33, Decimal(&lt;span class=&quot;code-quote&quot;&gt;&apos;10&apos;&lt;/span&gt;), b&lt;span class=&quot;code-quote&quot;&gt;&apos;\xab\xac&apos;&lt;/span&gt;, datetime.date(3000, 12, 31), datetime.time(23, 59, 59), datetime.datetime(2018, 12, 31, 12, 44, 31), datetime.datetime(2018, 12, 31, 12, 44, 31, 744957, tzinfo=&amp;lt;UTC&amp;gt;), &lt;span class=&quot;code-quote&quot;&gt;&apos;POINT(30 10)&apos;&lt;/span&gt;), (0.33, None, None, None, None, None, None, None), (None, Decimal(&lt;span class=&quot;code-quote&quot;&gt;&apos;10&apos;&lt;/span&gt;), None, None, None, None, None, None), (None, None, b&lt;span class=&quot;code-quote&quot;&gt;&apos;\xab\xac&apos;&lt;/span&gt;, None, None, None, None, None), (None, None, None, datetime.date(3000, 12, 31), None, None, None, None), (None, None, None, None, datetime.time(23, 59, 59), None, None, None), (None, None, None, None, None, datetime.datetime(2018, 12, 31, 12, 44, 31), None, None), (None, None, None, None, None, None, datetime.datetime(2018, 12, 31, 12, 44, 31, 744957, tzinfo=&amp;lt;UTC&amp;gt;), None), (None, None, None, None, None, None, None, &lt;span class=&quot;code-quote&quot;&gt;&apos;POINT(30 10)&apos;&lt;/span&gt;)])
16:54:32      but: 
16:54:32 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ve managed to recreated this locally on my workstation. The issue seems to be incorrect usage of the BigQuery client library. PR forthcoming.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13246936">BEAM-7814</key>
            <summary>bigquery tests flaky with empty actual result values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="udim">Udi Meiri</assignee>
                                    <reporter username="udim">Udi Meiri</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Jul 2019 01:07:34 +0000</created>
                <updated>Sat, 16 May 2020 14:05:25 +0000</updated>
                            <resolved>Tue, 30 Jul 2019 00:43:32 +0000</resolved>
                                                    <fixVersion>Not applicable</fixVersion>
                                    <component>io-py-gcp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="14400">4h</timespent>
                                <comments>
                            <comment id="16892956" author="udim" created="Thu, 25 Jul 2019 17:06:16 +0000"  >&lt;p&gt;Still happening:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/beam_PostCommit_Python2/lastCompletedBuild/testReport/junit/apache_beam.io.gcp.big_query_query_to_table_it_test/BigQueryQueryToTableIT/test_big_query_legacy_sql/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PostCommit_Python2/lastCompletedBuild/testReport/junit/apache_beam.io.gcp.big_query_query_to_table_it_test/BigQueryQueryToTableIT/test_big_query_legacy_sql/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I fixed BigqueryFullResultMatcher, but BigqueryMatcher has the same bug.&lt;/p&gt;</comment>
                            <comment id="16898369" author="udim" created="Thu, 1 Aug 2019 21:26:19 +0000"  >&lt;p&gt;Still buggy, PR forthcoming.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/beam_PostCommit_Python35/lastCompletedBuild/testReport/junit/apache_beam.io.gcp.big_query_query_to_table_it_test/BigQueryQueryToTableIT/test_big_query_legacy_sql/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PostCommit_Python35/lastCompletedBuild/testReport/junit/apache_beam.io.gcp.big_query_query_to_table_it_test/BigQueryQueryToTableIT/test_big_query_legacy_sql/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/lib/python3.5/unittest/&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;.py&quot;&lt;/span&gt;, line 58, in testPartExecutor
    yield
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/lib/python3.5/unittest/&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;.py&quot;&lt;/span&gt;, line 600, in run
    testMethod()
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python35/src/sdks/python/apache_beam/io/gcp/big_query_query_to_table_it_test.py&quot;&lt;/span&gt;, line 146, in test_big_query_legacy_sql
    big_query_query_to_table_pipeline.run_bq_pipeline(options)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python35/src/sdks/python/apache_beam/io/gcp/big_query_query_to_table_pipeline.py&quot;&lt;/span&gt;, line 82, in run_bq_pipeline
    result = p.run()
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python35/src/sdks/python/apache_beam/testing/test_pipeline.py&quot;&lt;/span&gt;, line 107, in run
    &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; test_runner_api))
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python35/src/sdks/python/apache_beam/pipeline.py&quot;&lt;/span&gt;, line 406, in run
    self._options).run(False)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python35/src/sdks/python/apache_beam/pipeline.py&quot;&lt;/span&gt;, line 419, in run
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; self.runner.run_pipeline(self, self._options)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python35/src/sdks/python/apache_beam/runners/direct/test_direct_runner.py&quot;&lt;/span&gt;, line 51, in run_pipeline
    hc_assert_that(self.result, pickler.loads(on_success_matcher))
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python35/src/build/gradleenv/1398941889/lib/python3.5/site-packages/hamcrest/core/assert_that.py&quot;&lt;/span&gt;, line 43, in assert_that
    _assert_match(actual=arg1, matcher=arg2, reason=arg3)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python35/src/build/gradleenv/1398941889/lib/python3.5/site-packages/hamcrest/core/assert_that.py&quot;&lt;/span&gt;, line 55, in _assert_match
    matcher.describe_mismatch(actual, description)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python35/src/build/gradleenv/1398941889/lib/python3.5/site-packages/hamcrest/core/core/allof.py&quot;&lt;/span&gt;, line 25, in describe_mismatch
    self.matches(item, mismatch_description)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python35/src/build/gradleenv/1398941889/lib/python3.5/site-packages/hamcrest/core/core/allof.py&quot;&lt;/span&gt;, line 16, in matches
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not matcher.matches(item):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python35/src/build/gradleenv/1398941889/lib/python3.5/site-packages/hamcrest/core/base_matcher.py&quot;&lt;/span&gt;, line 28, in matches
    match_result = self._matches(item)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/jenkins-slave/workspace/beam_PostCommit_Python35/src/sdks/python/apache_beam/io/gcp/tests/bigquery_matcher.py&quot;&lt;/span&gt;, line 89, in _matches
    self.checksum = compute_hash(response)
local variable &lt;span class=&quot;code-quote&quot;&gt;&apos;response&apos;&lt;/span&gt; referenced before assignment

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16902467" author="tvalentyn" created="Wed, 7 Aug 2019 20:49:32 +0000"  >&lt;p&gt;Is this a different error? &lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/beam_PostCommit_Python37_PR/16/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PostCommit_Python37_PR/16/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;apache_beam.io.gcp.bigquery_write_it_test.BigQueryWriteIntegrationTests.test_big_query_write_without_schema (from nosetests)

Expected: (Expected data is [(b&apos;xyw&apos;, datetime.date(2011, 1, 1), datetime.time(23, 59, 59, 999999)), (b&apos;abc&apos;, datetime.date(2000, 1, 1), datetime.time(0, 0)), (b&apos;\xe4\xbd\xa0\xe5\xa5\xbd&apos;, datetime.date(3000, 12, 31), datetime.time(23, 59, 59)), (b&apos;\xab\xac\xad&apos;, datetime.date(2000, 1, 1), datetime.time(0, 0))])
     but: Expected data is [(b&apos;xyw&apos;, datetime.date(2011, 1, 1), datetime.time(23, 59, 59, 999999)), (b&apos;abc&apos;, datetime.date(2000, 1, 1), datetime.time(0, 0)), (b&apos;\xe4\xbd\xa0\xe5\xa5\xbd&apos;, datetime.date(3000, 12, 31), datetime.time(23, 59, 59)), (b&apos;\xab\xac\xad&apos;, datetime.date(2000, 1, 1), datetime.time(0, 0))] Actual data is []

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13194507">BEAM-5874</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 14 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0501s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>