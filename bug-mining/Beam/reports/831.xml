<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:53:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-5243] beam_Release_Gradle_NightlySnapshot InvocationError py27-cython/bin/python setup.py nosetests</title>
                <link>https://issues.apache.org/jira/browse/BEAM-5243</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;It isn&apos;t clear to me what exactly failed, logs are full of stack traces.&lt;br/&gt;
 &lt;a href=&quot;https://builds.apache.org/job/beam_Release_Gradle_NightlySnapshot/151/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_Release_Gradle_NightlySnapshot/151/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/beam_PostCommit_Python_Verify/5844/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PostCommit_Python_Verify/5844/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
 &lt;b&gt;01:00:38&lt;/b&gt; ERROR: InvocationError for command &apos;/home/jenkins/jenkins-slave/workspace/beam_Release_Gradle_NightlySnapshot/src/sdks/python/target/.tox/py27-cython/bin/python setup.py nosetests&apos; (exited with code -11)&lt;b&gt;01:00:38&lt;/b&gt; ___________________________________ summary ____________________________________&lt;b&gt;01:00:38&lt;/b&gt; ERROR: py27-cython: commands failed*01:00:38*&lt;/p&gt;</description>
                <environment></environment>
        <key id="13181474">BEAM-5243</key>
            <summary>beam_Release_Gradle_NightlySnapshot InvocationError py27-cython/bin/python setup.py nosetests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="robinyqiu">Robin Qiu</assignee>
                                    <reporter username="apilloud">Andrew Pilloud</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Aug 2018 22:45:07 +0000</created>
                <updated>Fri, 24 Jul 2020 20:02:11 +0000</updated>
                            <resolved>Fri, 4 Jan 2019 17:09:58 +0000</resolved>
                                                    <fixVersion>Not applicable</fixVersion>
                                    <component>sdk-py-core</component>
                    <component>test-failures</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16638998" author="tvalentyn" created="Thu, 4 Oct 2018 22:53:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=swegner&quot; class=&quot;user-hover&quot; rel=&quot;swegner&quot;&gt;swegner&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It seems that we are hit by this flake ~once per month, most recently in &lt;a href=&quot;https://builds.apache.org/job/beam_Release_Gradle_NightlySnapshot/197/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_Release_Gradle_NightlySnapshot/197/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The symptoms are that a test suite started by `python setup.py nosetests` is passing but then returns a non-zero exit code &quot;-11&quot;, which we interpret as failure:&lt;br/&gt;
========================&lt;br/&gt;
Ran 1726 tests in 261.611s&lt;br/&gt;
OK (SKIP=324)&lt;br/&gt;
ERROR: InvocationError for command &apos;/home/jenkins/jenkins-slave/workspace/beam_Release_Gradle_NightlySnapshot/src/sdks/python/target/.tox/py27/bin/python setup.py nosetests&apos; (exited with code -11)&lt;br/&gt;
========================&lt;/p&gt;

&lt;p&gt;Exit code -11 may in some cases be a segmentation fault as per Stackoverflow Search.&lt;/p&gt;

&lt;p&gt;This may be an issue with &quot;nose&quot; package, or some side-effects of some of our tests.&lt;/p&gt;

&lt;p&gt;I suggest following further investigations avenues:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Try to reproduce this locally, in a virtual environment, that has nose package and Beam SDK installed via something like  `for i in `seq 100`; do python setup.py nosetests || echo &quot;Last exit code was $?&quot;; done`.&lt;/li&gt;
	&lt;li&gt;See if the tests that we are running make a difference whether the error appears.&lt;/li&gt;
	&lt;li&gt;See if versions of nose makes a difference.&lt;/li&gt;
	&lt;li&gt;Reach out to nose maintainers.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="16645754" author="tvalentyn" created="Thu, 11 Oct 2018 00:15:54 +0000"  >&lt;p&gt;Happened today again: &lt;a href=&quot;https://builds.apache.org/job/beam_PostCommit_Python_Verify/6235/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PostCommit_Python_Verify/6235/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16665621" author="herohde" created="Fri, 26 Oct 2018 19:53:10 +0000"  >&lt;p&gt;And again: &lt;a href=&quot;https://scans.gradle.com/s/s5nz7kobglcdm/console-log?task=:beam-sdks-python:testPython2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://scans.gradle.com/s/s5nz7kobglcdm/console-log?task=:beam-sdks-python:testPython2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16665782" author="altay" created="Sat, 27 Oct 2018 00:11:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=robinyqiu&quot; class=&quot;user-hover&quot; rel=&quot;robinyqiu&quot;&gt;robinyqiu&lt;/a&gt; could you take a look at this?&lt;/p&gt;

&lt;p&gt;Suggestions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Try to reproduce locally.&lt;/li&gt;
	&lt;li&gt;If the above fails, perhaps update the shell scripts to ignore -11 exit code with a TODO to this bug until we understand why it happens even when the tests pass.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16667643" author="robinyqiu" created="Mon, 29 Oct 2018 19:34:07 +0000"  >&lt;p&gt;FYI, I found this Nose&apos;s note to users:&#160;&lt;/p&gt;

&lt;p&gt;&quot;Nose has been in maintenance mode for the past several years and will likely cease without a new person/team to take over maintainership. New projects should consider using Nose2, py.test, or just plain unittest/unittest2.&quot;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16669143" author="robinyqiu" created="Tue, 30 Oct 2018 18:13:16 +0000"  >&lt;p&gt;I did successfully reproduced the error locally. The error occurred only once in 100+ runs. I compare its output with the successful outputs but cannot&#160;find any big difference, other than the exit code. I also tried to rerun the failed test by setting the PYTHONHASHSEED value, which is a source of indeterminism, but it doesn&apos;t help to to reproduce the failure. So my guess is that something like a race condition in Nose is the root of the bug.&lt;/p&gt;

&lt;p&gt;I have also found that the last change made in the Nose project was almost 3 years ago.&lt;/p&gt;</comment>
                            <comment id="16669152" author="altay" created="Tue, 30 Oct 2018 18:22:28 +0000"  >&lt;p&gt;We should probably move away from using nose. In the mean time, could we retry on this specific exit code?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markflyhigh&quot; class=&quot;user-hover&quot; rel=&quot;markflyhigh&quot;&gt;markflyhigh&lt;/a&gt; Do you know what alternatives are there for nose?&lt;/p&gt;</comment>
                            <comment id="16669163" author="robinyqiu" created="Tue, 30 Oct 2018 18:28:24 +0000"  >&lt;p&gt;As the Nose&apos;s note mentioned, we could choose from Nose2, py.test, or plain unittest/unittest2, among which I found py.test is liked by many people.&lt;/p&gt;</comment>
                            <comment id="16669224" author="markflyhigh" created="Tue, 30 Oct 2018 19:23:24 +0000"  >&lt;p&gt;For alternatives, pytest&#160;is one of most popular test framework for Python. It has&#160;rich functionalities and plugins and under active developing. We&#160;should&#160;do some evaluation to&#160;those tools in terms of functionalities, maintenance, replacement cost and etc.&lt;/p&gt;</comment>
                            <comment id="16670707" author="robinyqiu" created="Wed, 31 Oct 2018 20:55:58 +0000"  >&lt;p&gt;I created a shell script wrapper around tox to retry exit code -11 once when this failure happens. The long term solution should be migrating to py.test, then we can remove this usage of the wrapper.&lt;/p&gt;</comment>
                            <comment id="16733665" author="rohdesam" created="Fri, 4 Jan 2019 00:23:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=robinyqiu&quot; class=&quot;user-hover&quot; rel=&quot;robinyqiu&quot;&gt;robinyqiu&lt;/a&gt; ping&lt;/p&gt;

&lt;p&gt;Can you please take a look?&lt;/p&gt;</comment>
                            <comment id="16733691" author="robinyqiu" created="Fri, 4 Jan 2019 01:00:29 +0000"  >&lt;p&gt;This bug should have been fixed already by the script wrapper. Did you see that happen again?&lt;/p&gt;

&lt;p&gt;In the long term however,&#160;it would be great if we could migrate&#160;to py.test. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markflyhigh&quot; class=&quot;user-hover&quot; rel=&quot;markflyhigh&quot;&gt;markflyhigh&lt;/a&gt;, do we have any update on this?&lt;/p&gt;</comment>
                            <comment id="16734341" author="rohdesam" created="Fri, 4 Jan 2019 17:09:49 +0000"  >&lt;p&gt;Haven&apos;t seen this again, since you&apos;re saying it&apos;s fixed I&apos;ll close this out.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 45 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xh8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>