<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:45:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-2439] Datastore writer can fail to progress if Datastore is slow</title>
                <link>https://issues.apache.org/jira/browse/BEAM-2439</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;When writing to Datastore, Beam groups writes into large batches (usually 500 entities per write, the maximum permitted by the API). If these writes are slow to commit on the serving side, the request may time out before all of the entities are written.&lt;/p&gt;

&lt;p&gt;When this happens, it loses any progress that has been made on those entities (the connector uses non-transactional writes, so some entities might have been written, but partial results are not returned to the connector so it has to assume that all entities need rewriting). It will retry the write with the same set of entities, which may time out in the same way repeatedly. This can be influenced by factors on the Datastore serving side, some of which are transient (hotspots) but some of which are not.&lt;/p&gt;

&lt;p&gt;We (Datastore) are developing a fix for this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13079436">BEAM-2439</key>
            <summary>Datastore writer can fail to progress if Datastore is slow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10103" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">P3</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cphipps">Colin Phipps</assignee>
                                    <reporter username="cphipps">Colin Phipps</reporter>
                        <labels>
                            <label>datastore</label>
                    </labels>
                <created>Tue, 13 Jun 2017 09:54:03 +0000</created>
                <updated>Sat, 16 May 2020 13:19:33 +0000</updated>
                            <resolved>Thu, 22 Jun 2017 20:38:40 +0000</resolved>
                                                    <fixVersion>2.1.0</fixVersion>
                                    <component>io-java-gcp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16048080" author="sisk" created="Tue, 13 Jun 2017 16:25:02 +0000"  >&lt;p&gt;thanks for letting us know. &lt;/p&gt;</comment>
                            <comment id="16053774" author="githubbot" created="Mon, 19 Jun 2017 10:42:51 +0000"  >&lt;p&gt;GitHub user cph6 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3390&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3390&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-2439&quot; title=&quot;Datastore writer can fail to progress if Datastore is slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-2439&quot;&gt;&lt;del&gt;BEAM-2439&lt;/del&gt;&lt;/a&gt; Dynamic sizing of Datastore write RPCs&lt;/p&gt;

&lt;p&gt;    This stops the Datastore connector from always sending 500 entities per RPC.&lt;br/&gt;
    Instead, it starts at a lower number which is more likely to complete within&lt;br/&gt;
    the deadline even in adverse conditions, and then increases or reduces the&lt;br/&gt;
    batch size in response to measured latency of past requests.&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/cph6/beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/cph6/beam&lt;/a&gt; datastore_batching&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3390.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3390.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3390&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1967f0cc3e52a3b2948d449db4bdc6e5ba0a6bdf&lt;br/&gt;
Author: Colin Phipps &amp;lt;fipsy@google.com&amp;gt;&lt;br/&gt;
Date:   2017-05-15T14:18:16Z&lt;/p&gt;

&lt;p&gt;    Dynamic batching of entity writes.&lt;/p&gt;

&lt;p&gt;    This stops the Datastore connector from always sending 500 entities per RPC.&lt;br/&gt;
    Instead, it starts at a lower number which is more likely to complete within&lt;br/&gt;
    the deadline even in adverse conditions, and then increases or reduces the&lt;br/&gt;
    batch size in response to measured latency of past requests.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16059968" author="githubbot" created="Thu, 22 Jun 2017 20:34:43 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3390&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3390&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16091737" author="githubbot" created="Tue, 18 Jul 2017 15:44:58 +0000"  >&lt;p&gt;GitHub user cph6 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3585&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3585&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-2439&quot; title=&quot;Datastore writer can fail to progress if Datastore is slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-2439&quot;&gt;&lt;del&gt;BEAM-2439&lt;/del&gt;&lt;/a&gt; Dynamic sizing of Datastore write RPCs.&lt;/p&gt;

&lt;p&gt;    This implements the same behaviour recently added to Java SDK:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;start at 200 entities per RPC;&lt;/li&gt;
	&lt;li&gt;size subsequent requests based on observed latency of previous requests.&lt;br/&gt;
    Includes a MovingSum class to track recent latency.&lt;br/&gt;
    Report RPC success &amp;amp; failure counts as metrics (again, as in the Java SDK).&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;    R: @vikkyrk&lt;br/&gt;
    R: @ssisk&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/cph6/beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/cph6/beam&lt;/a&gt; datastore_batching_py&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3585.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3585.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3585&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;</comment>
                            <comment id="16095021" author="githubbot" created="Thu, 20 Jul 2017 17:19:39 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3585&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3585&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 17 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3g7fz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>