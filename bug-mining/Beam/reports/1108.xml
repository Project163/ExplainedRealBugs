<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:57:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-6974] [beam_PreCommit_Java_Cron] [:beam-sdks-java-io-cassandra:test][Flake] Test fails in native code</title>
                <link>https://issues.apache.org/jira/browse/BEAM-6974</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;This test fails often during last several days.&lt;/p&gt;

&lt;p&gt;Suspicion is that same error also fails&#160;:beam-sdks-java-io-hadoop-input-format:test that flakes as well.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/beam_PreCommit_Java_Cron/1136/consoleFull&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PreCommit_Java_Cron/1136/consoleFull&lt;/a&gt;&lt;br/&gt;
 &lt;a href=&quot;https://builds.apache.org/job/beam_PreCommit_Java_Cron/1133/consoleFull&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PreCommit_Java_Cron/1133/consoleFull&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Initial investigation:&lt;/p&gt;

&lt;p&gt;Jenkins doesn&apos;t give any error output. Local run fails gradle task stating that there&apos;s error in native code.&lt;/p&gt;

&lt;p&gt;I was reproing it on version before any of PRs mentioned below (8178 &amp;amp; 8182) as well. So there might be some independent issue.&lt;/p&gt;

&lt;p&gt;Dev list thread:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://lists.apache.org/thread.html/80258cf7dcdf404b3de686a5ffdc13a4319c7d2e11698747d62cf5ad@%3Cdev.beam.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/80258cf7dcdf404b3de686a5ffdc13a4319c7d2e11698747d62cf5ad@%3Cdev.beam.apache.org%3E&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Relevant PRs that might have influenced the issue:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/beam/pull/8178&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/8178&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/beam/pull/8182&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/8182&lt;/a&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;After you&apos;ve filled out the above details, please &lt;a href=&quot;https://beam.apache.org/contribute/postcommits-guides/index.html#find_specialist&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;assign the issue to an individual&lt;/a&gt;. Assignee should &lt;a href=&quot;https://beam.apache.org/contribute/postcommits-policies/#assigned-failing-test&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;treat test failures as high-priority&lt;/a&gt;, helping to fix the issue or find a more appropriate owner. See &lt;a href=&quot;https://beam.apache.org/contribute/postcommits-policies&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Apache Beam Post-Commit Policies&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13225594">BEAM-6974</key>
            <summary>[beam_PreCommit_Java_Cron] [:beam-sdks-java-io-cassandra:test][Flake] Test fails in native code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10100" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">P0</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="echauchot">Etienne Chauchot</assignee>
                                    <reporter username="Ardagan">Mikhail Gryzykhin</reporter>
                        <labels>
                            <label>currently-failing</label>
                    </labels>
                <created>Tue, 2 Apr 2019 17:51:16 +0000</created>
                <updated>Sat, 16 May 2020 14:21:26 +0000</updated>
                            <resolved>Fri, 5 Apr 2019 15:59:23 +0000</resolved>
                                                    <fixVersion>2.12.0</fixVersion>
                                    <component>test-failures</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7200">2h</timespent>
                                <comments>
                            <comment id="16809907" author="aromanenko" created="Thu, 4 Apr 2019 14:26:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ardagan&quot; class=&quot;user-hover&quot; rel=&quot;Ardagan&quot;&gt;Ardagan&lt;/a&gt; Did you manage to reproduce this locally? I didn&apos;t.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&amp;gt; Local run fails gradle task stating that there&apos;s error in native code.&lt;/em&gt;&lt;br/&gt;
 Could you paste this error or attache an error log?&lt;/p&gt;

&lt;p&gt;As I can see from Jenkins logs, it fails either with&#160;&lt;br/&gt;
&lt;tt&gt;Process &apos;Gradle Test Executor 49&apos; finished with non-zero exit value 1&lt;/tt&gt;&lt;br/&gt;
or &lt;br/&gt;
&lt;tt&gt;Process &apos;Gradle Test Executor 50&apos; finished with non-zero exit value 3&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;I don&apos;t know exactly what these error codes could mean in this case but I found that exit value 3 could be caused by OoM issue and can be fixed by increasing &lt;tt&gt;-Xmx&lt;/tt&gt; value.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echauchot&quot; class=&quot;user-hover&quot; rel=&quot;echauchot&quot;&gt;echauchot&lt;/a&gt; Do you have any ideas about this issue? &lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16809941" author="echauchot" created="Thu, 4 Apr 2019 14:50:48 +0000"  >&lt;p&gt;I have no idea about this ticket as there is no error message and there it was not reproduced locally. But raising XMx of the jenkins JVM seems a good idea now that we have several embedded backends in the UTests&lt;/p&gt;</comment>
                            <comment id="16810060" author="robinyqiu" created="Thu, 4 Apr 2019 16:45:49 +0000"  >&lt;p&gt;This is a Jenkins job failing&#160;HadoopFormatIOCassandraTest:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/beam_PreCommit_Java_Cron/1144/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PreCommit_Java_Cron/1144/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16810592" author="echauchot" created="Fri, 5 Apr 2019 08:03:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=robinyqiu&quot; class=&quot;user-hover&quot; rel=&quot;robinyqiu&quot;&gt;robinyqiu&lt;/a&gt; thx for the log, it seems that there is a port conflict because the embedded cassandra that is in HadoopFormatIOCassandraTest uses a static 9042 port that is already in use. The embedded cassandra used is the official minimal one not cassandra-unit (that has incompatible licence or Achilles that replaced it in the CassandraIO). I&apos;ll try to use a dynamic port defined out of free ports&lt;/p&gt;</comment>
                            <comment id="16810973" author="kenn" created="Fri, 5 Apr 2019 15:59:47 +0000"  >&lt;p&gt;Pinging &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apilloud&quot; class=&quot;user-hover&quot; rel=&quot;apilloud&quot;&gt;apilloud&lt;/a&gt; in case the tests flake on the release branch and needs the cherrypick.&lt;/p&gt;</comment>
                            <comment id="16812208" author="echauchot" created="Mon, 8 Apr 2019 08:04:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kenn&quot; class=&quot;user-hover&quot; rel=&quot;kenn&quot;&gt;kenn&lt;/a&gt; you closed the ticket and targeted to 2.13. Does that mean that this fix will not be cherry picked to 2.12 release? &lt;br/&gt;
Also please note that without the fix, cassandraIO tests on hadoop platform use 9042 static port. CassandraIOTest (outside hadoop) uses a dynamic port starting at 9042 (with my other fix). The flakes are due to the order the tests execute. If CassandraIOTest runs first and takes the port a the beginning of the port range (ie 9042) and then hadoop cassandra test runs without the fix it will try to bind 9042 as well. In the other case, If hadoop cassandra test runs first, it binds 9042 and then when cassandraIOTest runs it binds 9043 (2nd free port in the range) so the build is green.&lt;/p&gt;

&lt;p&gt;Long story short, I think we should cherry pick this fix see &lt;a href=&quot;https://github.com/apache/beam/pull/8237&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/8237&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apilloud&quot; class=&quot;user-hover&quot; rel=&quot;apilloud&quot;&gt;apilloud&lt;/a&gt; WDYT ?&lt;/p&gt;
</comment>
                            <comment id="16812521" author="kenn" created="Mon, 8 Apr 2019 15:44:28 +0000"  >&lt;p&gt;My thinking was if we can build an RC then we don&apos;t need to deflake tests on the release branch. I have no objections to cherrypicking.&lt;/p&gt;</comment>
                            <comment id="16812526" author="apilloud" created="Mon, 8 Apr 2019 15:48:30 +0000"  >&lt;p&gt;I haven&apos;t cut the RC yet, so&#160;I merged the cherrypick.&lt;/p&gt;</comment>
                            <comment id="16813082" author="echauchot" created="Tue, 9 Apr 2019 07:40:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kenn&quot; class=&quot;user-hover&quot; rel=&quot;kenn&quot;&gt;kenn&lt;/a&gt; it makes total sense to me. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apilloud&quot; class=&quot;user-hover&quot; rel=&quot;apilloud&quot;&gt;apilloud&lt;/a&gt; it seems we are lucky with the timing &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01dk0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>