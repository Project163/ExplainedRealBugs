<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:00:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-7424] Retry HTTP 429 errors from GCS w/ exponential backoff when reading data</title>
                <link>https://issues.apache.org/jira/browse/BEAM-7424</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;This has to be done for both Java and Python SDKs.&lt;/p&gt;

&lt;p&gt;Seems like Java SDK already retries 429 errors w/o backoff (please verify):&#160;&lt;a href=&quot;https://github.com/apache/beam/blob/master/sdks/java/extensions/google-cloud-platform-core/src/main/java/org/apache/beam/sdk/extensions/gcp/util/RetryHttpRequestInitializer.java#L185&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/blob/master/sdks/java/extensions/google-cloud-platform-core/src/main/java/org/apache/beam/sdk/extensions/gcp/util/RetryHttpRequestInitializer.java#L185&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13235557">BEAM-7424</key>
            <summary>Retry HTTP 429 errors from GCS w/ exponential backoff when reading data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10100" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">P0</priority>
                        <status id="10722" iconUrl="https://issues.apache.org/jira/images/icons/statuses/generic.png" description="">Triage Needed</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="heejong">Heejong Lee</assignee>
                                    <reporter username="chamikara">Chamikara Madhusanka Jayalath</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 May 2019 23:23:38 +0000</created>
                <updated>Fri, 22 Nov 2024 15:32:11 +0000</updated>
                            <resolved>Fri, 12 Jul 2019 19:59:37 +0000</resolved>
                                                    <fixVersion>2.14.0</fixVersion>
                                    <component>io-java-gcp</component>
                    <component>io-py-gcp</component>
                    <component>sdk-py-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="21000">5h 50m</timespent>
                                <comments>
                            <comment id="16853455" author="robinyqiu" created="Fri, 31 May 2019 22:28:58 +0000"  >&lt;p&gt;Retry while staging files is out of scope because writing data to GCS will not incur 429 now. Updated the issue name to reflect this.&lt;/p&gt;</comment>
                            <comment id="16858200" author="chamikara" created="Fri, 7 Jun 2019 00:08:52 +0000"  >&lt;p&gt;Created&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-7500&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BEAM-7500&lt;/a&gt;&#160;to track merging the fix to 2.7.1 branch.&lt;/p&gt;</comment>
                            <comment id="16860399" author="kedin" created="Mon, 10 Jun 2019 22:50:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chamikara&quot; class=&quot;user-hover&quot; rel=&quot;chamikara&quot;&gt;chamikara&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=heejong&quot; class=&quot;user-hover&quot; rel=&quot;heejong&quot;&gt;heejong&lt;/a&gt;&#160;what needs to be done here? Is the request to add retry logic to python SDK? It&apos;s unclear from the description.&#160; &lt;/p&gt;

&lt;p&gt;*(trying to understand the scope of changes for 2.14)&lt;/p&gt;</comment>
                            <comment id="16860421" author="chamikara" created="Mon, 10 Jun 2019 23:54:42 +0000"  >&lt;p&gt;There are few things that are planned to do.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;(1) Add retry logic for Java and Python SDKs.&lt;/p&gt;

&lt;p&gt;(2) For Dataflow runner, plumb throttled time to Dataflow backend to consider when making autoscaling decisions.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This bug is for (1), It&apos;s great if we can get (2) into 2.14 as well but I&apos;m not sure if timelines will match.&lt;/p&gt;</comment>
                            <comment id="16865726" author="kedin" created="Mon, 17 Jun 2019 16:03:24 +0000"  >&lt;p&gt;Is this on track for release (branch will be cut this Wednesday, June 19 at 11am)?&lt;/p&gt;</comment>
                            <comment id="16866060" author="heejong" created="Mon, 17 Jun 2019 23:10:12 +0000"  >&lt;p&gt;In Java SDK, exponential backoff is already&#160;working for 429 error code: &lt;a href=&quot;https://github.com/apache/beam/blob/master/sdks/java/extensions/google-cloud-platform-core/src/main/java/org/apache/beam/sdk/extensions/gcp/util/RetryHttpRequestInitializer.java#L254&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/blob/master/sdks/java/extensions/google-cloud-platform-core/src/main/java/org/apache/beam/sdk/extensions/gcp/util/RetryHttpRequestInitializer.java#L254&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16867126" author="chamikara" created="Tue, 18 Jun 2019 23:35:51 +0000"  >&lt;p&gt;I believe Python fix is still in development.&lt;/p&gt;</comment>
                            <comment id="16869011" author="heejong" created="Thu, 20 Jun 2019 23:05:10 +0000"  >&lt;p&gt;update: Got a testing account from GCS. Will test whether the retrying logic works for both Java SDK and Python SDK.&lt;/p&gt;</comment>
                            <comment id="16872731" author="heejong" created="Tue, 25 Jun 2019 21:22:11 +0000"  >&lt;p&gt;update: succeeded in getting 429 errors from Python SDK. Will try to fix and submit PR today.&lt;/p&gt;</comment>
                            <comment id="16872813" author="heejong" created="Wed, 26 Jun 2019 00:20:20 +0000"  >&lt;p&gt;Confirming that 429 handler is already there in Python api_tools (&lt;a href=&quot;https://github.com/google/apitools/blob/master/apitools/base/py/http_wrapper.py#L297&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/google/apitools/blob/master/apitools/base/py/http_wrapper.py#L297&lt;/a&gt;). Maybe it&apos;s just okay or we can increase the default retrying threshold since it looks a bit small for quota errors.&lt;/p&gt;</comment>
                            <comment id="16873580" author="heejong" created="Wed, 26 Jun 2019 18:27:19 +0000"  >&lt;p&gt;Confirming that 429 handler is working fine in Java SDK. Will submit PR for increasing the default retrying threshold in Python SDK to match the default value to Java SDK.&lt;/p&gt;</comment>
                            <comment id="16876506" author="chamikara" created="Mon, 1 Jul 2019 21:12:56 +0000"  >&lt;p&gt;Please make sure to cherry-pick&#160;&lt;a href=&quot;https://github.com/apache/beam/pull/8933&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/8933&lt;/a&gt;&#160;to the 2.14 release branch.&lt;/p&gt;</comment>
                            <comment id="16884131" author="kedin" created="Fri, 12 Jul 2019 19:59:24 +0000"  >&lt;p&gt;#8933 has been cherry-picked to the release branch, resolving this Jira&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13242570">BEAM-7667</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 18 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z032l4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>