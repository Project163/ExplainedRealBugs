<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:38:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-196] Pipeline options must be available Context in DoFn.startBundle</title>
                <link>https://issues.apache.org/jira/browse/BEAM-196</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Our (not yet merged) Java Pubsub implementation has code like this in a DoFn:&lt;/p&gt;

&lt;p&gt;    @Override&lt;br/&gt;
    public void startBundle(Context c) throws Exception &lt;/p&gt;
{
      Preconditions.checkState(pubsubClient == null);
      pubsubClient = PubsubClient.newClient(transportType,
          timestampLabel, idLabel, c.getPipelineOptions().as(PubsubOptions.class));
      super.startBundle(c);
    }

&lt;p&gt;This fails with NPE since the pipeline options are not conveyed via the context.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12959001">BEAM-196</key>
            <summary>Pipeline options must be available Context in DoFn.startBundle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mxm">Maximilian Michels</assignee>
                                    <reporter username="mshields822">Mark Shields</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Apr 2016 22:56:07 +0000</created>
                <updated>Fri, 24 Jul 2020 20:56:24 +0000</updated>
                            <resolved>Wed, 8 Jun 2016 16:11:36 +0000</resolved>
                                                    <fixVersion>0.1.0-incubating</fixVersion>
                                    <component>runner-flink</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15245934" author="githubbot" created="Mon, 18 Apr 2016 16:22:35 +0000"  >&lt;p&gt;GitHub user mxm opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/200&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/200&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-196&quot; title=&quot;Pipeline options must be available Context in DoFn.startBundle&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-196&quot;&gt;&lt;del&gt;BEAM-196&lt;/del&gt;&lt;/a&gt; Pipeline options must be available Context in DoFn.startBundle&lt;/p&gt;

&lt;p&gt;    This gets rid of the custom Java serialization code by defaulting to serialization of the `PipelineOptions` to a byte array. So far, this has been proven the most hassle-free method for the Flink Runner. For code reuse and avoiding multiple deserialization of the byte array, the `SerializedPipelineOptions` class has been introduced.&lt;/p&gt;

&lt;p&gt;    The changes also make the options accessible in the context of the `DoFn` function.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mxm/incubator-beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mxm/incubator-beam&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-196&quot; title=&quot;Pipeline options must be available Context in DoFn.startBundle&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-196&quot;&gt;&lt;del&gt;BEAM-196&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/200.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/200.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #200&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 81577b31c2642522f7dd4ba8eba794df48a0ca56&lt;br/&gt;
Author: Maximilian Michels &amp;lt;mxm@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-04-18T15:40:38Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-196&quot; title=&quot;Pipeline options must be available Context in DoFn.startBundle&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-196&quot;&gt;&lt;del&gt;BEAM-196&lt;/del&gt;&lt;/a&gt; abstraction for PipelineOptions serialization&lt;/p&gt;

&lt;p&gt;commit 43b5ec743718e63c2d9d9532e3ca55bc87370290&lt;br/&gt;
Author: Maximilian Michels &amp;lt;mxm@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-04-18T15:40:50Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-196&quot; title=&quot;Pipeline options must be available Context in DoFn.startBundle&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-196&quot;&gt;&lt;del&gt;BEAM-196&lt;/del&gt;&lt;/a&gt; make use of SerializedPipelineOptions&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15247331" author="mxm" created="Tue, 19 Apr 2016 07:49:59 +0000"  >&lt;p&gt;Fixed in 43b5ec743718e63c2d9d9532e3ca55bc87370290.&lt;/p&gt;</comment>
                            <comment id="15247333" author="githubbot" created="Tue, 19 Apr 2016 07:51:17 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/200&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/200&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15320290" author="mxm" created="Wed, 8 Jun 2016 09:34:18 +0000"  >&lt;p&gt;Still an issue. Pull request coming up.&lt;/p&gt;</comment>
                            <comment id="15320368" author="githubbot" created="Wed, 8 Jun 2016 10:44:18 +0000"  >&lt;p&gt;GitHub user mxm opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/432&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/432&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-196&quot; title=&quot;Pipeline options must be available Context in DoFn.startBundle&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-196&quot;&gt;&lt;del&gt;BEAM-196&lt;/del&gt;&lt;/a&gt; Additional fix to ensure the PipelineOptions are available in DoFns.&lt;/p&gt;

&lt;p&gt;    Fixes a NullPointException if `PipelineOptions` are acceessed inside a DoFn and backs it up with a test.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mxm/incubator-beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mxm/incubator-beam&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-196&quot; title=&quot;Pipeline options must be available Context in DoFn.startBundle&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-196&quot;&gt;&lt;del&gt;BEAM-196&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/432.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/432.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #432&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 05287c4ddcc38378e4e8cd921b6f6394e43eed75&lt;br/&gt;
Author: Maximilian Michels &amp;lt;mxm@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-06-07T11:57:33Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-196&quot; title=&quot;Pipeline options must be available Context in DoFn.startBundle&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-196&quot;&gt;&lt;del&gt;BEAM-196&lt;/del&gt;&lt;/a&gt; fix NPE in ParDoWrapper&lt;/p&gt;

&lt;p&gt;commit 595146d5759a6f631f057050cdbe71f9849035f9&lt;br/&gt;
Author: Maximilian Michels &amp;lt;mxm@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-06-08T10:40:50Z&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;flink&amp;#93;&lt;/span&gt; improve lifecycle of ParDoBoundWrapper&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15320833" author="githubbot" created="Wed, 8 Jun 2016 16:11:13 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/432&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/432&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15320836" author="mxm" created="Wed, 8 Jun 2016 16:11:36 +0000"  >&lt;p&gt;Resolved in eced106e50ddb257524a7826ab7d27254be89da8&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2w5ev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>