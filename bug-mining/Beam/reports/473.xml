<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:47:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-3160] Type based coder inference incorrectly assumes that a coder for one type is equivalent to every other coder for that type.</title>
                <link>https://issues.apache.org/jira/browse/BEAM-3160</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;We should prevent coder inference from assuming that two coders for the same type are interchangeable.&lt;/p&gt;

&lt;p&gt;Two Avro GenericRecord coders with different schemas are considered identical and an arbitrary one is returned by the Coder/Type inference system if the GenericRecord type appears multiple times.&lt;br/&gt;
e.g.&lt;br/&gt;
&lt;b&gt;KvCoder.of(IterableCoder.of(AvroCoder.of(SchemaA)), IterableCoder.of(AvroCoder.of(SchemaB)))&lt;/b&gt; after coder inference for the type &lt;b&gt;KV&amp;lt;Iterable&amp;lt;GenericRecord&amp;gt;, Iterable&amp;lt;GenericRecord&amp;gt;&amp;gt;&lt;/b&gt; will return &lt;b&gt;KvCoder.of(IterableCoder.of(AvroCoder.of(SchemaX)), IterableCoder.of(AvroCoder.of(SchemaX)))&lt;/b&gt; where SchemaX is either SchemaA or SchemaB.&lt;/p&gt;

&lt;p&gt;Code:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/beam/blob/v2.1.1/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/CoderRegistry.java#L420&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/blob/v2.1.1/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/CoderRegistry.java#L420&lt;/a&gt; and other Type -&amp;gt; Coder maps in the same file should prevent insertion if the type already exists and the coders aren&apos;t equal.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13117065">BEAM-3160</key>
            <summary>Type based coder inference incorrectly assumes that a coder for one type is equivalent to every other coder for that type.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10100" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">P0</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lcwik">Luke Cwik</assignee>
                                    <reporter username="lcwik">Luke Cwik</reporter>
                        <labels>
                            <label>Done</label>
                    </labels>
                <created>Wed, 8 Nov 2017 18:49:27 +0000</created>
                <updated>Tue, 6 Oct 2020 21:55:09 +0000</updated>
                            <resolved>Thu, 25 Jan 2018 16:34:33 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                    <component>sdk-java-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16329756" author="githubbot" created="Thu, 18 Jan 2018 00:30:31 +0000"  >&lt;p&gt;lukecwik opened a new pull request #4433: &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-3160&quot; title=&quot;Type based coder inference incorrectly assumes that a coder for one type is equivalent to every other coder for that type.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-3160&quot;&gt;&lt;del&gt;BEAM-3160&lt;/del&gt;&lt;/a&gt; Prevent issue where we would choose which coder to use arbitrarily when it is over specified with multiple coders.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/beam/pull/4433&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/4433&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Follow this checklist to help us incorporate your contribution quickly and easily:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Make sure there is a &lt;span class=&quot;error&quot;&gt;&amp;#91;JIRA issue&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/projects/BEAM/issues/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/BEAM/issues/&lt;/a&gt;) filed for the change (usually before you start working on it).  Trivial changes like typos do not require a JIRA issue.  Your pull request should address just this issue, without pulling in other changes.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Each commit in the pull request should have a meaningful subject line and body.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Format the pull request title like `&lt;span class=&quot;error&quot;&gt;&amp;#91;BEAM-XXX&amp;#93;&lt;/span&gt; Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Write a pull request description that is detailed enough to understand what the pull request does, how, and why.&lt;/li&gt;
	&lt;li&gt;[ ] Run `mvn clean verify` to make sure basic checks pass. A more thorough check will be performed on your pull request automatically.&lt;/li&gt;
	&lt;li&gt;[ ] If this contribution is large, please file an Apache &lt;span class=&quot;error&quot;&gt;&amp;#91;Individual Contributor License Agreement&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.apache.org/licenses/icla.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/licenses/icla.pdf&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   &amp;#8212;&lt;/p&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16339460" author="githubbot" created="Thu, 25 Jan 2018 16:31:23 +0000"  >&lt;p&gt;iemejia closed pull request #4433: &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-3160&quot; title=&quot;Type based coder inference incorrectly assumes that a coder for one type is equivalent to every other coder for that type.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-3160&quot;&gt;&lt;del&gt;BEAM-3160&lt;/del&gt;&lt;/a&gt; Prevent issue where we would choose which coder to use arbitrarily when it is over specified with multiple coders.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/beam/pull/4433&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/4433&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/CannotProvideCoderException.java b/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/CannotProvideCoderException.java&lt;br/&gt;
index bc2ef3fe2dd..76b1fb47081 100644&lt;br/&gt;
&amp;#8212; a/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/CannotProvideCoderException.java&lt;br/&gt;
+++ b/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/CannotProvideCoderException.java&lt;br/&gt;
@@ -82,7 +82,7 @@ public Throwable getRootCause() {&lt;br/&gt;
    */&lt;br/&gt;
   public enum ReasonCode {&lt;br/&gt;
     /**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* The reason a coder could not be provided is unknown or does have an established&lt;br/&gt;
+     * The reason a coder could not be provided is unknown or does not have an established&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;{@link ReasonCode}
&lt;p&gt;.&lt;br/&gt;
      */&lt;br/&gt;
     UNKNOWN,&lt;br/&gt;
@@ -91,6 +91,12 @@ public Throwable getRootCause() {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;The reason a coder could not be provided is type erasure, for example when requesting&lt;/li&gt;
	&lt;li&gt;coder inference for a 
{@code List&amp;lt;T&amp;gt;}
&lt;p&gt; where &lt;/p&gt;
{@code T} is unknown.&lt;br/&gt;
      */&lt;br/&gt;
-    TYPE_ERASURE&lt;br/&gt;
+    TYPE_ERASURE,&lt;br/&gt;
+&lt;br/&gt;
+    /**&lt;br/&gt;
+     * The reason a coder could not be provided is because the type variable {@code T}
&lt;p&gt; is&lt;br/&gt;
+     * over specified with multiple incompatible coders.&lt;br/&gt;
+     */&lt;br/&gt;
+    OVER_SPECIFIED&lt;br/&gt;
   }&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/CoderRegistry.java b/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/CoderRegistry.java&lt;br/&gt;
index e4cb55acf18..b867d935c49 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/CoderRegistry.java&lt;br/&gt;
+++ b/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/CoderRegistry.java&lt;br/&gt;
@@ -20,10 +20,13 @@&lt;br/&gt;
 import static com.google.common.base.Preconditions.checkArgument;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; import com.google.common.annotations.VisibleForTesting;&lt;br/&gt;
+import com.google.common.collect.HashMultimap;&lt;br/&gt;
 import com.google.common.collect.ImmutableList;&lt;br/&gt;
 import com.google.common.collect.ImmutableMap;&lt;br/&gt;
+import com.google.common.collect.ImmutableSetMultimap;&lt;br/&gt;
+import com.google.common.collect.Iterables;&lt;br/&gt;
 import com.google.common.collect.Lists;&lt;br/&gt;
-import com.google.common.collect.Maps;&lt;br/&gt;
+import com.google.common.collect.SetMultimap;&lt;br/&gt;
 import com.google.common.collect.Sets;&lt;br/&gt;
 import java.lang.reflect.ParameterizedType;&lt;br/&gt;
 import java.lang.reflect.Type;&lt;br/&gt;
@@ -246,7 +249,7 @@ public void registerCoderForType(TypeDescriptor&amp;lt;?&amp;gt; type, Coder&amp;lt;?&amp;gt; coder) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@throws CannotProvideCoderException if a 
{@link Coder} cannot be provided&lt;br/&gt;
    */&lt;br/&gt;
   public &amp;lt;T&amp;gt; Coder&amp;lt;T&amp;gt; getCoder(TypeDescriptor&amp;lt;T&amp;gt; type) throws CannotProvideCoderException {
-    return getCoderFromTypeDescriptor(type, Collections.emptyMap());
+    return getCoderFromTypeDescriptor(type, HashMultimap.create());
   }&lt;br/&gt;
 &lt;br/&gt;
   /**&lt;br/&gt;
@@ -433,7 +436,7 @@ public void registerCoderForType(TypeDescriptor&amp;lt;?&amp;gt; type, Coder&amp;lt;?&amp;gt; coder) {
               baseClass.getCanonicalName(), typeArgs.length, knownCoders.length));
     }&lt;br/&gt;
 &lt;br/&gt;
-    Map&amp;lt;Type, Coder&amp;lt;?&amp;gt;&amp;gt; context = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+    SetMultimap&amp;lt;Type, Coder&amp;lt;?&amp;gt;&amp;gt; context = HashMultimap.create();&lt;br/&gt;
     for (int i = 0; i &amp;lt; knownCoders.length; i++) {&lt;br/&gt;
       if (knownCoders&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt; != null) {&lt;br/&gt;
         try {&lt;br/&gt;
@@ -591,12 +594,23 @@ private static boolean isNullOrEmpty(Collection&amp;lt;?&amp;gt; c) {&lt;br/&gt;
    * @throws CannotProvideCoderException if a coder cannot be provided&lt;br/&gt;
    */&lt;br/&gt;
   private &amp;lt;T&amp;gt; Coder&amp;lt;T&amp;gt; getCoderFromTypeDescriptor(&lt;br/&gt;
-      TypeDescriptor&amp;lt;T&amp;gt; typeDescriptor, Map&amp;lt;Type, Coder&amp;lt;?&amp;gt;&amp;gt; typeCoderBindings)&lt;br/&gt;
+      TypeDescriptor&amp;lt;T&amp;gt; typeDescriptor, SetMultimap&amp;lt;Type, Coder&amp;lt;?&amp;gt;&amp;gt; typeCoderBindings)&lt;br/&gt;
       throws CannotProvideCoderException {&lt;br/&gt;
     Type type = typeDescriptor.getType();&lt;br/&gt;
     Coder&amp;lt;?&amp;gt; coder;&lt;br/&gt;
     if (typeCoderBindings.containsKey(type)) {&lt;br/&gt;
-      coder = typeCoderBindings.get(type);&lt;br/&gt;
+      Set&amp;lt;Coder&amp;lt;?&amp;gt;&amp;gt; coders = typeCoderBindings.get(type);&lt;br/&gt;
+      if (coders.size() == 1) {
+        coder = Iterables.getOnlyElement(coders);
+      } else {
+        throw new CannotProvideCoderException(
+            String.format(&quot;Cannot provide a coder for type variable %s&quot;
+                    + &quot; because the actual type is over specified by multiple&quot;
+                    + &quot; incompatible coders %s.&quot;,
+                type,
+                coders),
+            ReasonCode.OVER_SPECIFIED);
+      }&lt;br/&gt;
     } else if (type instanceof Class&amp;lt;?&amp;gt;) {
       coder = getCoderFromFactories(typeDescriptor, Collections.emptyList());
     } else if (type instanceof ParameterizedType) {&lt;br/&gt;
@@ -631,7 +645,7 @@ private static boolean isNullOrEmpty(Collection&amp;lt;?&amp;gt; c) {&lt;br/&gt;
    */&lt;br/&gt;
   private Coder&amp;lt;?&amp;gt; getCoderFromParameterizedType(&lt;br/&gt;
       ParameterizedType type,&lt;br/&gt;
-      Map&amp;lt;Type, Coder&amp;lt;?&amp;gt;&amp;gt; typeCoderBindings)&lt;br/&gt;
+      SetMultimap&amp;lt;Type, Coder&amp;lt;?&amp;gt;&amp;gt; typeCoderBindings)&lt;br/&gt;
           throws CannotProvideCoderException {&lt;br/&gt;
 &lt;br/&gt;
     List&amp;lt;Coder&amp;lt;?&amp;gt;&amp;gt; typeArgumentCoders = new ArrayList&amp;lt;&amp;gt;();&lt;br/&gt;
@@ -682,37 +696,38 @@ private static boolean isNullOrEmpty(Collection&amp;lt;?&amp;gt; c) {&lt;br/&gt;
   }&lt;br/&gt;
 &lt;br/&gt;
   /**&lt;br/&gt;
-   * Returns an immutable {@code Map} from each of the type variables&lt;br/&gt;
+   * Returns an immutable {@code SetMultimap} from each of the type variables&lt;br/&gt;
    * embedded in the given type to the corresponding types&lt;br/&gt;
    * in the given {@link Coder}
&lt;p&gt;.&lt;br/&gt;
    */&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private Map&amp;lt;Type, Coder&amp;lt;?&amp;gt;&amp;gt; getTypeToCoderBindings(Type type, Coder&amp;lt;?&amp;gt; coder) {&lt;br/&gt;
+  private SetMultimap&amp;lt;Type, Coder&amp;lt;?&amp;gt;&amp;gt; getTypeToCoderBindings(Type type, Coder&amp;lt;?&amp;gt; coder) {&lt;br/&gt;
     checkArgument(type != null);&lt;br/&gt;
     checkArgument(coder != null);&lt;br/&gt;
     if (type instanceof TypeVariable || type instanceof Class) 
{
-      return ImmutableMap.of(type, coder);
+      return ImmutableSetMultimap.of(type, coder);
     }
&lt;p&gt; else if (type instanceof ParameterizedType) &lt;/p&gt;
{
       return getTypeToCoderBindings((ParameterizedType) type, coder);
     }
&lt;p&gt; else &lt;/p&gt;
{
-      return ImmutableMap.of();
+      return ImmutableSetMultimap.of();
     }&lt;br/&gt;
   }&lt;br/&gt;
 &lt;br/&gt;
   /**&lt;br/&gt;
-   * Returns an immutable {@code Map} from the type arguments of the parameterized type to their&lt;br/&gt;
-   * corresponding {@link Coder Coders}, and so on recursively for their type parameters.&lt;br/&gt;
+   * Returns an immutable {@code SetMultimap} from the type arguments of the parameterized type to&lt;br/&gt;
+   * their corresponding {@link Coder Coders}, and so on recursively for their type parameters.&lt;br/&gt;
    *&lt;br/&gt;
    * &amp;lt;p&amp;gt;This method is simply a specialization to break out the most&lt;br/&gt;
    * elaborate case of {@link #getTypeToCoderBindings(Type, Coder)}.&lt;br/&gt;
    */&lt;br/&gt;
-  private Map&amp;lt;Type, Coder&amp;lt;?&amp;gt;&amp;gt; getTypeToCoderBindings(ParameterizedType type, Coder&amp;lt;?&amp;gt; coder) {&lt;br/&gt;
+  private SetMultimap&amp;lt;Type, Coder&amp;lt;?&amp;gt;&amp;gt; getTypeToCoderBindings(&lt;br/&gt;
+      ParameterizedType type, Coder&amp;lt;?&amp;gt; coder) {&lt;br/&gt;
     List&amp;lt;Type&amp;gt; typeArguments = Arrays.asList(type.getActualTypeArguments());&lt;br/&gt;
     List&amp;lt;? extends Coder&amp;lt;?&amp;gt;&amp;gt; coderArguments = coder.getCoderArguments();&lt;br/&gt;
 &lt;br/&gt;
     if ((coderArguments == null) || (typeArguments.size() != coderArguments.size())) {-      return ImmutableMap.of();+      return ImmutableSetMultimap.of();     }
&lt;p&gt; else {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;Map&amp;lt;Type, Coder&amp;lt;?&amp;gt;&amp;gt; typeToCoder = Maps.newHashMap();&lt;br/&gt;
+      SetMultimap&amp;lt;Type, Coder&amp;lt;?&amp;gt;&amp;gt; typeToCoder = HashMultimap.create();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;       typeToCoder.put(type, coder);&lt;/p&gt;

&lt;p&gt;@@ -724,7 +739,7 @@ private static boolean isNullOrEmpty(Collection&amp;lt;?&amp;gt; c) {&lt;br/&gt;
         }&lt;br/&gt;
       }&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return ImmutableMap.&amp;lt;Type, Coder&amp;lt;?&amp;gt;&amp;gt;builder().putAll(typeToCoder).build();&lt;br/&gt;
+      return ImmutableSetMultimap.&amp;lt;Type, Coder&amp;lt;?&amp;gt;&amp;gt;builder().putAll(typeToCoder).build();&lt;br/&gt;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   }&lt;br/&gt;
diff --git a/sdks/java/core/src/test/java/org/apache/beam/sdk/coders/CoderRegistryTest.java b/sdks/java/core/src/test/java/org/apache/beam/sdk/coders/CoderRegistryTest.java&lt;br/&gt;
index b6430e52bbe..3af2806353c 100644&lt;br/&gt;
&amp;#8212; a/sdks/java/core/src/test/java/org/apache/beam/sdk/coders/CoderRegistryTest.java&lt;br/&gt;
+++ b/sdks/java/core/src/test/java/org/apache/beam/sdk/coders/CoderRegistryTest.java&lt;br/&gt;
@@ -227,6 +227,18 @@ public void testIntVersusStringIncompatibility() throws Exception &lt;/p&gt;
{
     CoderRegistry.verifyCompatible(BigEndianIntegerCoder.of(), String.class);
   }

&lt;p&gt;+  // &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-3160&quot; title=&quot;Type based coder inference incorrectly assumes that a coder for one type is equivalent to every other coder for that type.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-3160&quot;&gt;&lt;del&gt;BEAM-3160&lt;/del&gt;&lt;/a&gt;: We can&apos;t choose between the BigEndianIntegerCoder or the VarIntCoder since&lt;br/&gt;
+  // they are incompatible.&lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void testTypeOverSpecifiedWithMultipleCoders() throws Exception {&lt;br/&gt;
+    thrown.expect(CannotProvideCoderException.class);&lt;br/&gt;
+    thrown.expectMessage(&quot;type is over specified&quot;);&lt;br/&gt;
+    CoderRegistry.createDefault().getCoder(&lt;br/&gt;
+        new TypeDescriptor&amp;lt;Integer&amp;gt;() {},&lt;br/&gt;
+        new TypeDescriptor&amp;lt;KV&amp;lt;Integer, Integer&amp;gt;&amp;gt;() {},&lt;br/&gt;
+        KvCoder.of(BigEndianIntegerCoder.of(), VarIntCoder.of()));&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
   private static class TooManyComponentCoders&amp;lt;T&amp;gt; extends ListCoder&amp;lt;T&amp;gt; {&lt;br/&gt;
     public TooManyComponentCoders(Coder&amp;lt;T&amp;gt; actualComponentCoder) {&lt;br/&gt;
       super(actualComponentCoder);&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mk3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>