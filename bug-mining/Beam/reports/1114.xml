<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:57:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-7042] beam-sdks-java-core leaks antlr4 dependency</title>
                <link>https://issues.apache.org/jira/browse/BEAM-7042</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;beam-sdks-java-core brings antlr4 and its transitive deps which is quite unlikely and has a huge probability to conflict (antlt, jsonp in an outdated version at least for the one breaking my apps).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13226953">BEAM-7042</key>
            <summary>beam-sdks-java-core leaks antlr4 dependency</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="michel">Michael Luckey</assignee>
                                    <reporter username="romain.manni-bucau">Romain Manni-Bucau</reporter>
                        <labels>
                            <label>Done</label>
                    </labels>
                <created>Tue, 9 Apr 2019 13:14:09 +0000</created>
                <updated>Tue, 6 Oct 2020 21:58:57 +0000</updated>
                            <resolved>Fri, 12 Apr 2019 16:16:58 +0000</resolved>
                                                    <fixVersion>2.12.0</fixVersion>
                                    <component>sdk-java-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4800">1h 20m</timespent>
                                <comments>
                            <comment id="16813492" author="iemejia" created="Tue, 9 Apr 2019 14:37:03 +0000"  >&lt;p&gt;The interesting question is why we need a parser in core at all? can&apos;t this be an extension? It seems that antlr leaks a really old version of jsonp and that indeed seems messy. Any info on this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reuvenlax&quot; class=&quot;user-hover&quot; rel=&quot;reuvenlax&quot;&gt;reuvenlax&lt;/a&gt;? Or will this be at least vendored &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kenn&quot; class=&quot;user-hover&quot; rel=&quot;kenn&quot;&gt;kenn&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16813541" author="reuvenlax" created="Tue, 9 Apr 2019 15:29:25 +0000"  >&lt;p&gt;Yes, I do believe it needs to be in core. Schema select-statement parsing will be integrated into DoFnRunner (so you can select schema fields in ParDo as discussed in the past on the dev list), and DoFnRunner is in core.&lt;/p&gt;

&lt;p&gt;Yes, I think this should be probably be vendored.&lt;/p&gt;</comment>
                            <comment id="16813547" author="reuvenlax" created="Tue, 9 Apr 2019 15:37:23 +0000"  >&lt;p&gt;though I&apos;m a bit confused as to why antlr depends on jsonp at all &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16813628" author="romain.manni-bucau" created="Tue, 9 Apr 2019 17:09:27 +0000"  >&lt;p&gt;Another good and saner option is IMHO to not mess up sdk core with schema and make it an extension, there is no blocker to do it. Also note that ArgumentProvider would benefit becoming a SPI and enable to unify injectable types and even would be a good user feature IMHO. These architecture fixes would solve cleanly that issue and precent to come back yet another time.&lt;/p&gt;</comment>
                            <comment id="16813662" author="reuvenlax" created="Tue, 9 Apr 2019 17:45:41 +0000"  >&lt;p&gt;The current design of schemas is for them to be a type system for Beam, which means they are the core of Beam now, not a layer on top. This was the design that was agreed upon, and over the past year+ schemas have been tightly integrated into the core. This can of course be reevaluated on the dev list, but is off topic for this Jira issue.&lt;/p&gt;

&lt;p&gt;Dependency conflicts can (and sadly) do happen due to any and all of our dependencies, so there&apos;s nothing special about Antlr here. Likely the right answer is to vendor Antlr. Is there documentation anywhere about how to go about the vendoring process?&lt;/p&gt;</comment>
                            <comment id="16813669" author="reuvenlax" created="Tue, 9 Apr 2019 17:52:51 +0000"  >&lt;p&gt;question for &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=romain.manni-bucau&quot; class=&quot;user-hover&quot; rel=&quot;romain.manni-bucau&quot;&gt;romain.manni-bucau&lt;/a&gt;. The Antlr dependency went in in January, and so was present in both Beam 2.10 and Beam 2.11. Is there a reason .that you are seeing a problem only now with 2.12? Has something changed with this dependency?&lt;/p&gt;</comment>
                            <comment id="16813806" author="romain.manni-bucau" created="Tue, 9 Apr 2019 20:53:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reuvenlax&quot; class=&quot;user-hover&quot; rel=&quot;reuvenlax&quot;&gt;reuvenlax&lt;/a&gt; no, dont mix consumer and producer. Antlr was not added to poms so consumers were safe. This is no more true. Guess relocation/vendoring work broke something?&lt;/p&gt;</comment>
                            <comment id="16813864" author="apilloud" created="Tue, 9 Apr 2019 22:24:59 +0000"  >&lt;p&gt;Hello, I&apos;m about to cut RC3. Is this really a release blocker?&lt;/p&gt;</comment>
                            <comment id="16813875" author="reuvenlax" created="Tue, 9 Apr 2019 22:46:00 +0000"  >&lt;p&gt;Given that Antlr has been part of core since 2.10, I don&apos;t think this is a&lt;br/&gt;
release blocker. We should fix this bogus dependency on jsonp, but for now&lt;br/&gt;
I&apos;ll move this bug to the next release.&lt;/p&gt;

&lt;p&gt;On Tue, Apr 9, 2019 at 3:33 PM Andrew Pilloud (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;
</comment>
                            <comment id="16813947" author="kenn" created="Wed, 10 Apr 2019 00:55:11 +0000"  >&lt;p&gt;Vendoring == an empty project with a bundled + relocated dependency on antlr support libs (and transitive deps). See Guava for example.&lt;/p&gt;</comment>
                            <comment id="16814034" author="romain.manni-bucau" created="Wed, 10 Apr 2019 04:46:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reuvenlax&quot; class=&quot;user-hover&quot; rel=&quot;reuvenlax&quot;&gt;reuvenlax&lt;/a&gt; as mentionned it is a regression so a blocker. It was NOT the case in 2.10 and 2.11.&lt;/p&gt;</comment>
                            <comment id="16814115" author="reuvenlax" created="Wed, 10 Apr 2019 06:43:00 +0000"  >&lt;p&gt;I&apos;m trying to figure this out. The last PR that changed the antlr rules&lt;br/&gt;
went in on Jan 25 - before Beam 2.10 - and even that one didn&apos;t modify the&lt;br/&gt;
antlr dependency. The antlr dependency has been fixed at antlr 4.7 since&lt;br/&gt;
Jan 15. I&apos;m not entirely sure how you could see this in 2.12 and not in&lt;br/&gt;
2.10 or 2.11. The only PR I can find that could maybe have an effect, is&lt;br/&gt;
that Gradle was upgraded from Gradle 4 to Gradle 5.&lt;/p&gt;

&lt;p&gt;On Tue, Apr 9, 2019, 9:47 PM Romain Manni-Bucau (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;
</comment>
                            <comment id="16814191" author="iemejia" created="Wed, 10 Apr 2019 08:24:39 +0000"  >&lt;p&gt;Pinging &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michel&quot; class=&quot;user-hover&quot; rel=&quot;michel&quot;&gt;michel&lt;/a&gt; to see if he can help make sens on this. Maybe the gradle guys fixed some issue in version 5, or we fixed something in the script and now this is evident.&lt;/p&gt;</comment>
                            <comment id="16814354" author="michel" created="Wed, 10 Apr 2019 11:22:01 +0000"  >&lt;p&gt;I think this could be caused by &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reuvenlax&quot; class=&quot;user-hover&quot; rel=&quot;reuvenlax&quot;&gt;reuvenlax&lt;/a&gt; do you remember, why this was added? Should we only require runtime?&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/beam/pull/7635/files#diff-9390c20635aed5f42f83b97506a87333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/7635/files#diff-9390c20635aed5f42f83b97506a87333&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="16814362" author="michel" created="Wed, 10 Apr 2019 11:37:47 +0000"  >&lt;p&gt;Opened a PR. If it breaks, we might know, why it was added.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/beam/pull/8268&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/8268&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16814548" author="reuvenlax" created="Wed, 10 Apr 2019 15:27:00 +0000"  >&lt;p&gt;It was added because some things were breaking without it. I don&apos;t quite&lt;br/&gt;
remember what broke though.&lt;/p&gt;

&lt;p&gt;On Wed, Apr 10, 2019 at 4:23 AM Michael Luckey (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;
</comment>
                            <comment id="16814923" author="michel" created="Wed, 10 Apr 2019 22:51:09 +0000"  >&lt;p&gt;Yah... somehow that answer was expected &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;So best we can do is properly retest to find the culprit. &lt;/p&gt;</comment>
                            <comment id="16814926" author="reuvenlax" created="Wed, 10 Apr 2019 23:03:00 +0000"  >&lt;p&gt;All tests appear to pass. However we probably should try and vendor this&lt;br/&gt;
dependency so we don&apos;t have any more weirdness.&lt;/p&gt;

&lt;p&gt;On Wed, Apr 10, 2019 at 3:52 PM Michael Luckey (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;
</comment>
                            <comment id="16815154" author="iemejia" created="Thu, 11 Apr 2019 07:39:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reuvenlax&quot; class=&quot;user-hover&quot; rel=&quot;reuvenlax&quot;&gt;reuvenlax&lt;/a&gt; vendoring probably won&apos;t solve the issue because it is not only related to `antlr4` but about the transitive dependencies leaking into the classpath. Also `antlr4-runtime` should be enough for Beam&apos;s use case and we are already relocating it we should be ok..&lt;/p&gt;</comment>
                            <comment id="16816412" author="apilloud" created="Fri, 12 Apr 2019 16:16:58 +0000"  >&lt;p&gt;This is fixed for the 2.12 release. Please open a new bug if we need to do additional work.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 31 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01lmg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>