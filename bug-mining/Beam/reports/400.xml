<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:45:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-2790] Error while reading from Amazon S3 via Hadoop File System</title>
                <link>https://issues.apache.org/jira/browse/BEAM-2790</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;If you try to use hadoop-aws with Beam to read from AWS S3 it breaks because S3AInputStream (the implementation of Hadoop&apos;s FSDataInputStream) is not ByteBufferReadable. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.UnsupportedOperationException: &lt;span class=&quot;code-object&quot;&gt;Byte&lt;/span&gt;-buffer read unsupported by input stream
	at org.apache.hadoop.fs.FSDataInputStream.read(FSDataInputStream.java:146)
	at org.apache.beam.sdk.io.hdfs.HadoopFileSystem$HadoopSeekableByteChannel.read(HadoopFileSystem.java:192)
	at org.apache.beam.sdk.io.TextSource$TextBasedReader.tryToEnsureNumberOfBytesInBuffer(TextSource.java:232)
	at org.apache.beam.sdk.io.TextSource$TextBasedReader.findSeparatorBounds(TextSource.java:166)
	at org.apache.beam.sdk.io.TextSource$TextBasedReader.readNextRecord(TextSource.java:198)
	at org.apache.beam.sdk.io.FileBasedSource$FileBasedReader.advanceImpl(FileBasedSource.java:481)
	at org.apache.beam.sdk.io.FileBasedSource$FileBasedReader.startImpl(FileBasedSource.java:476)
	at org.apache.beam.sdk.io.OffsetBasedSource$OffsetBasedReader.start(OffsetBasedSource.java:261)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13096733">BEAM-2790</key>
            <summary>Error while reading from Amazon S3 via Hadoop File System</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="echauchot">Etienne Chauchot</assignee>
                                    <reporter username="iemejia">Isma&#235;l Mej&#237;a</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Aug 2017 12:49:53 +0000</created>
                <updated>Fri, 24 Jul 2020 20:17:43 +0000</updated>
                            <resolved>Fri, 15 Sep 2017 15:09:50 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>2.1.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>io-java-aws</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16136748" author="githubbot" created="Tue, 22 Aug 2017 12:55:30 +0000"  >&lt;p&gt;GitHub user iemejia opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3744&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3744&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-2790&quot; title=&quot;Error while reading from Amazon S3 via Hadoop File System&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-2790&quot;&gt;&lt;del&gt;BEAM-2790&lt;/del&gt;&lt;/a&gt; Use byte[] instead of ByteBuffer to read from Hadoop FS&lt;/p&gt;

&lt;p&gt;    Follow this checklist to help us incorporate your contribution quickly and easily:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Make sure there is a &lt;span class=&quot;error&quot;&gt;&amp;#91;JIRA issue&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/projects/BEAM/issues/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/BEAM/issues/&lt;/a&gt;) filed for the change (usually before you start working on it).  Trivial changes like typos do not require a JIRA issue.  Your pull request should address just this issue, without pulling in other changes.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Each commit in the pull request should have a meaningful subject line and body.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Format the pull request title like `&lt;span class=&quot;error&quot;&gt;&amp;#91;BEAM-XXX&amp;#93;&lt;/span&gt; Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Write a pull request description that is detailed enough to understand what the pull request does, how, and why.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Run `mvn clean verify` to make sure basic checks pass. A more thorough check will be performed on your pull request automatically.&lt;/li&gt;
	&lt;li&gt;[ ] If this contribution is large, please file an Apache &lt;span class=&quot;error&quot;&gt;&amp;#91;Individual Contributor License Agreement&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.apache.org/licenses/icla.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/licenses/icla.pdf&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    &amp;#8212;&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/iemejia/beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/iemejia/beam&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-2790&quot; title=&quot;Error while reading from Amazon S3 via Hadoop File System&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-2790&quot;&gt;&lt;del&gt;BEAM-2790&lt;/del&gt;&lt;/a&gt;-fix-s3-read&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3744.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3744.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3744&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 76f2d91bc9f612d4e98fe7d8099dffd36c47ff85&lt;br/&gt;
Author: Isma&#235;l Mej&#237;a &amp;lt;iemejia@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-08-22T12:50:12Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-2790&quot; title=&quot;Error while reading from Amazon S3 via Hadoop File System&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-2790&quot;&gt;&lt;del&gt;BEAM-2790&lt;/del&gt;&lt;/a&gt; Use byte[] instead of ByteBuffer to read from Hadoop FS&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16139909" author="stevel@apache.org" created="Thu, 24 Aug 2017 11:23:45 +0000"  >&lt;p&gt;OF course, a patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-14603&quot; title=&quot;S3A input stream to support ByteBufferReadable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-14603&quot;&gt;HADOOP-14603&lt;/a&gt; would make this go away completely. &lt;/p&gt;</comment>
                            <comment id="16140321" author="lcwik" created="Thu, 24 Aug 2017 17:05:17 +0000"  >&lt;p&gt;That would fix it for S3A, but I can only expect that there are other implementations which won&apos;t implement HasEnhancedByteBufferAccess&lt;/p&gt;</comment>
                            <comment id="16140412" author="stevel@apache.org" created="Thu, 24 Aug 2017 17:59:03 +0000"  >&lt;p&gt;...looks like it&apos;s only in HDFS. More specifically, it looks like one of those things the HDFS team added without actually updating the FS spec to say what it&apos;s meant to do, hence there&apos;s no cross-fs compliance tests. Pity.&lt;/p&gt;
</comment>
                            <comment id="16152722" author="stevel@apache.org" created="Mon, 4 Sep 2017 15:30:35 +0000"  >&lt;p&gt;Looking at Hadoop&apos;s FileSystem there is meant to be some fallback mechanism, but it only works if there&apos;s a class cast exception, not if the implementation throws UnsupportedOperationException, and there&apos;s no broad contract test across all FS implementations.&lt;/p&gt;

&lt;p&gt;In theory if someone were to add the tests &amp;amp; fix that fallback behaviour, it would end up working for everything....&lt;/p&gt;</comment>
                            <comment id="16163080" author="echauchot" created="Tue, 12 Sep 2017 15:01:43 +0000"  >&lt;p&gt;Isma&#235;l is off for some weeks, I will continue his work on this ticket.&lt;/p&gt;</comment>
                            <comment id="16165153" author="githubbot" created="Wed, 13 Sep 2017 19:25:49 +0000"  >&lt;p&gt;Github user iemejia closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3744&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3744&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16165999" author="githubbot" created="Thu, 14 Sep 2017 09:27:46 +0000"  >&lt;p&gt;GitHub user echauchot opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3850&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3850&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-2790&quot; title=&quot;Error while reading from Amazon S3 via Hadoop File System&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-2790&quot;&gt;&lt;del&gt;BEAM-2790&lt;/del&gt;&lt;/a&gt; Use byte[] instead of ByteBuffer to read from HadoopFilesystem&lt;/p&gt;

&lt;p&gt;    Follow this checklist to help us incorporate your contribution quickly and easily:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;X&amp;#93;&lt;/span&gt; Make sure there is a &lt;span class=&quot;error&quot;&gt;&amp;#91;JIRA issue&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/projects/BEAM/issues/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/BEAM/issues/&lt;/a&gt;) filed for the change (usually before you start working on it).  Trivial changes like typos do not require a JIRA issue.  Your pull request should address just this issue, without pulling in other changes.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;X&amp;#93;&lt;/span&gt; Each commit in the pull request should have a meaningful subject line and body.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;X&amp;#93;&lt;/span&gt; Format the pull request title like `&lt;span class=&quot;error&quot;&gt;&amp;#91;BEAM-XXX&amp;#93;&lt;/span&gt; Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;X&amp;#93;&lt;/span&gt; Write a pull request description that is detailed enough to understand what the pull request does, how, and why.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;X&amp;#93;&lt;/span&gt; Run `mvn clean verify` to make sure basic checks pass. A more thorough check will be performed on your pull request automatically.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;X&amp;#93;&lt;/span&gt; If this contribution is large, please file an Apache &lt;span class=&quot;error&quot;&gt;&amp;#91;Individual Contributor License Agreement&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.apache.org/licenses/icla.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/licenses/icla.pdf&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    &amp;#8212;&lt;br/&gt;
    This is the continuation of PR &lt;a href=&quot;https://github.com/apache/beam/pull/3744&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3744&lt;/a&gt;. It fixes the code to deal with the offsets/limits to have the same behavior than read(ByteBuffer) and it adds corner cases tests.&lt;br/&gt;
    R: @lukecwik @steveloughran&lt;br/&gt;
    CC: @iemejia &lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/echauchot/beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/echauchot/beam&lt;/a&gt; byte_array_instead_of_ByBuffer_HadoopFS2&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3850.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3850.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3850&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ed5ba0c2ecc6e3a0b305cb9928d610f8ab58acbe&lt;br/&gt;
Author: Etienne Chauchot &amp;lt;echauchot@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-09-14T08:28:12Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-2790&quot; title=&quot;Error while reading from Amazon S3 via Hadoop File System&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-2790&quot;&gt;&lt;del&gt;BEAM-2790&lt;/del&gt;&lt;/a&gt; Use byte[] instead of ByteBuffer to read from HadoopFilesystem&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16167987" author="githubbot" created="Fri, 15 Sep 2017 15:08:59 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3850&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3850&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13083080">HADOOP-14603</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 9 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3j547:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>