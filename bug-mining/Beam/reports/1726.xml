<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:07:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-9645] Python flinkrunner cannot inspect container</title>
                <link>https://issues.apache.org/jira/browse/BEAM-9645</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I&apos;m trying to submit a python pipeline job as portable runner with FlinkRunner with a very simple setup file, though I can&apos;t see error logs since it fails retrieving logs/state from underlying container:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.io.IOException: Received exit code 1 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; command &lt;span class=&quot;code-quote&quot;&gt;&apos;docker inspect -f {{.State.Running}} 248d660be908ef58385eb962658cee831c4c3b1be9ea1f835e4563f53016363b&apos;&lt;/span&gt;. stderr: Error: No such object: 248d660be908ef58385eb962658cee831c4c3b1be9ea1f835e4563f53016363bCaused by: java.io.IOException: Received exit code 1 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; command &lt;span class=&quot;code-quote&quot;&gt;&apos;docker inspect -f {{.State.Running}} 248d660be908ef58385eb962658cee831c4c3b1be9ea1f835e4563f53016363b&apos;&lt;/span&gt;. stderr: Error: No such object: 248d660be908ef58385eb962658cee831c4c3b1be9ea1f835e4563f53016363b at org.apache.beam.runners.fnexecution.environment.DockerCommand.runShortCommand(DockerCommand.java:234) at org.apache.beam.runners.fnexecution.environment.DockerCommand.runShortCommand(DockerCommand.java:168) at org.apache.beam.runners.fnexecution.environment.DockerCommand.isContainerRunning(DockerCommand.java:112) at org.apache.beam.runners.fnexecution.environment.DockerEnvironmentFactory.createEnvironment(DockerEnvironmentFactory.java:165) at org.apache.beam.runners.fnexecution.control.DefaultJobBundleFactory$1.load(DefaultJobBundleFactory.java:200) at org.apache.beam.runners.fnexecution.control.DefaultJobBundleFactory$1.load(DefaultJobBundleFactory.java:184) at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3528) at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2277) at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2154) at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2044) at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache.get(LocalCache.java:3952) at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3974) at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4958) at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:4964) ... 12 more Suppressed: java.io.IOException: Received exit code 1 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; command &lt;span class=&quot;code-quote&quot;&gt;&apos;docker kill 248d660be908ef58385eb962658cee831c4c3b1be9ea1f835e4563f53016363b&apos;&lt;/span&gt;. stderr: Error response from daemon: Cannot kill container: 248d660be908ef58385eb962658cee831c4c3b1be9ea1f835e4563f53016363b: No such container: 248d660be908ef58385eb962658cee831c4c3b1be9ea1f835e4563f53016363b at org.apache.beam.runners.fnexecution.environment.DockerCommand.runShortCommand(DockerCommand.java:234) at org.apache.beam.runners.fnexecution.environment.DockerCommand.runShortCommand(DockerCommand.java:168) at org.apache.beam.runners.fnexecution.environment.DockerCommand.killContainer(DockerCommand.java:148) at org.apache.beam.runners.fnexecution.environment.DockerEnvironmentFactory.createEnvironment(DockerEnvironmentFactory.java:192) ... 22 moreERROR:root:java.io.IOException: Received exit code 1 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; command &lt;span class=&quot;code-quote&quot;&gt;&apos;docker inspect -f {{.State.Running}} 248d660be908ef58385eb962658cee831c4c3b1be9ea1f835e4563f53016363b&apos;&lt;/span&gt;. stderr: Error: No such object: 248d660be908ef58385eb962658cee831c4c3b1be9ea1f835e4563f53016363b[flink-runner-job-invoker] INFO org.apache.beam.runners.fnexecution.artifact.AbstractArtifactRetrievalService - Manifest at /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/folders/s3/29yl1s8125j33_9vb5tczdxw0000gn/T/beam-tempiwx1szcz/artifacts6ptzmo6u/job_a340349c-cc95-4e32-9cbd-7f915c2d0407/MANIFEST has 1 artifact locations[flink-runner-job-invoker] INFO org.apache.beam.runners.fnexecution.artifact.BeamFileSystemArtifactStagingService - Removed dir /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/folders/s3/29yl1s8125j33_9vb5tczdxw0000gn/T/beam-tempiwx1szcz/artifacts6ptzmo6u/job_a340349c-cc95-4e32-9cbd-7f915c2d0407/Traceback (most recent call last):&#160; File &lt;span class=&quot;code-quote&quot;&gt;&quot;importer/test_runner.py&quot;&lt;/span&gt;, line 46, in &amp;lt;module&amp;gt;&#160; &#160; run()&#160; File &lt;span class=&quot;code-quote&quot;&gt;&quot;importer/test_runner.py&quot;&lt;/span&gt;, line 41, in run&#160; &#160; | &lt;span class=&quot;code-quote&quot;&gt;&apos;write to file&apos;&lt;/span&gt; &amp;gt;&amp;gt; WriteToText(known_args.output)&#160; File &lt;span class=&quot;code-quote&quot;&gt;&quot;/Users/leopold/.pyenv/versions/BenchmarkListingStreaming/lib/python3.6/site-packages/apache_beam/pipeline.py&quot;&lt;/span&gt;, line 481, in __exit__&#160; &#160; self.run().wait_until_finish()&#160; File &lt;span class=&quot;code-quote&quot;&gt;&quot;/Users/leopold/.pyenv/versions/BenchmarkListingStreaming/lib/python3.6/site-packages/apache_beam/runners/portability/portable_runner.py&quot;&lt;/span&gt;, line 455, in wait_until_finish&#160; &#160; self._job_id, self._state, self._last_error_message()))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Job args&lt;/p&gt;

&lt;p&gt;-&lt;del&gt;runner FlinkRunner --flink_master={flink_master} --flink_version 1.9&#160;&lt;/del&gt;-setup_file ./setup.py&lt;/p&gt;

&lt;p&gt;And corresponding setup file&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; setuptoolsinstall_requires = [&lt;span class=&quot;code-quote&quot;&gt;&apos;networkx==2.4&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;PyYAML==5.3&apos;&lt;/span&gt;]
setuptools.setup(
    name=&lt;span class=&quot;code-quote&quot;&gt;&apos;benchmark_listing&apos;&lt;/span&gt;,
    version=&lt;span class=&quot;code-quote&quot;&gt;&apos;0.1.0&apos;&lt;/span&gt;, #build_version(&lt;span class=&quot;code-quote&quot;&gt;&apos;0.1.0&apos;&lt;/span&gt;),    author=&lt;span class=&quot;code-quote&quot;&gt;&apos;MeilleursAgents&apos;&lt;/span&gt;,
    author_email=&lt;span class=&quot;code-quote&quot;&gt;&apos;geeks@meilleursagents.com&apos;&lt;/span&gt;,
    description=&lt;span class=&quot;code-quote&quot;&gt;&apos;Benchmark Listing Streaming&apos;&lt;/span&gt;,
    # long_description=long_description,
    # long_description_content_type=&lt;span class=&quot;code-quote&quot;&gt;&apos;text/markdown&apos;&lt;/span&gt;,    install_requires=install_requires,
    # packages=setuptools.find_packages(),
    # python_requires=&lt;span class=&quot;code-quote&quot;&gt;&apos;&amp;gt;=3.7.6&apos;&lt;/span&gt;,
    # include_package_data=True,
)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Could you advise on this issue please?&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</description>
                <environment>dataproc cluster, running flink version 1.9</environment>
        <key id="13295223">BEAM-9645</key>
            <summary>Python flinkrunner cannot inspect container</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mxm">Maximilian Michels</assignee>
                                    <reporter username="leopold.boudard">L&#233;opold Boudard</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Mar 2020 10:25:04 +0000</created>
                <updated>Sat, 16 May 2020 14:18:58 +0000</updated>
                            <resolved>Fri, 3 Apr 2020 13:11:14 +0000</resolved>
                                    <version>2.19.0</version>
                                    <fixVersion>2.21.0</fixVersion>
                                    <component>runner-flink</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4800">1h 20m</timespent>
                                <comments>
                            <comment id="17072710" author="leopold.boudard" created="Wed, 1 Apr 2020 12:20:47 +0000"  >&lt;p&gt;small update on this, it seems clearly to be linked to issues during portable executor container initialization though I couldn&apos;t find a way to debug/diagnose what&apos;s the problem (and I don&apos;t encounter same init issues on dataflow runner).&lt;/p&gt;

&lt;p&gt;I could circumvent this issue by directly using a specific container that embeded required packages&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://beam.apache.org/documentation/runtime/environments/#customizing-container-images&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://beam.apache.org/documentation/runtime/environments/#customizing-container-images&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
GOOGLE_APPLICATION_CREDENTIALS=~/gcp/dataflow.json python -m listing_beam_pipeline.run --runner FlinkRunner --flink_master={} --flink_version 1.9  --input gs:&lt;span class=&quot;code-comment&quot;&gt;//... --output gs://... --environment_config eu.gcr.io/ma-dev2/listing_beam_pipeline:latest&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17074672" author="mxm" created="Fri, 3 Apr 2020 15:42:14 +0000"  >&lt;p&gt;Thanks for reporting. This is indeed a bug in the log retrieval in case of errors which will be fixed in Beam 2.21.0. You can use the &lt;tt&gt;--retain_docker_containers&lt;/tt&gt; pipeline option to prevent this from happening.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13251924">BEAM-8015</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 32 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0d43k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>