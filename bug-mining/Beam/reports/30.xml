<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:38:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-350] beam_PostCommit_RunnableOnService_GoogleCloudDataflow flaky</title>
                <link>https://issues.apache.org/jira/browse/BEAM-350</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;These tests have been flaking for a little while with 500 server errors calling Google Cloud Dataflow APIS. There may be additional retry logic needed in the SDK around the calls to check the job status.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;code&quot;&lt;/span&gt; : 500,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;errors&quot;&lt;/span&gt; : [ {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;domain&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;global&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;message&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;Internal error encountered.&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;reason&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;backendError&quot;&lt;/span&gt;
  } ],
  &lt;span class=&quot;code-quote&quot;&gt;&quot;message&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;Internal error encountered.&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;status&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;INTERNAL&quot;&lt;/span&gt;
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:113)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:40)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$1.interceptResponse(AbstractGoogleClientRequest.java:321)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1065)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:419)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:352)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:469)
	at org.apache.beam.runners.dataflow.testing.TestDataflowPipelineRunner.checkForSuccess(TestDataflowPipelineRunner.java:185)
	at org.apache.beam.runners.dataflow.testing.TestDataflowPipelineRunner.run(TestDataflowPipelineRunner.java:141)
	... 25 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12979882">BEAM-350</key>
            <summary>beam_PostCommit_RunnableOnService_GoogleCloudDataflow flaky</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dhalperi">Dan Halperin</assignee>
                                    <reporter username="dhalperi">Dan Halperin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jun 2016 16:45:55 +0000</created>
                <updated>Sat, 16 May 2020 13:58:14 +0000</updated>
                            <resolved>Sat, 25 Jun 2016 20:01:40 +0000</resolved>
                                                    <fixVersion>Not applicable</fixVersion>
                                    <component>testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15334134" author="githubbot" created="Thu, 16 Jun 2016 16:48:47 +0000"  >&lt;p&gt;GitHub user dhalperi opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/476&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/476&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-350&quot; title=&quot;beam_PostCommit_RunnableOnService_GoogleCloudDataflow flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-350&quot;&gt;&lt;del&gt;BEAM-350&lt;/del&gt;&lt;/a&gt; DataflowPipelineJob: Retry messages, metrics, and status polls&lt;/p&gt;

&lt;p&gt;    At some point in the past, we decided to use a rawDataflowClient that&lt;br/&gt;
    does not do retries when checking job status, because it was best-effort&lt;br/&gt;
    reporting to users. The purported goal was to not clutter the log with&lt;br/&gt;
    networking errors.&lt;/p&gt;

&lt;p&gt;    However, since that time, we have:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Added the ability to suppress logs (emit only at DEBUG level or not at&lt;br/&gt;
      all) when retrying.&lt;/li&gt;
	&lt;li&gt;Increased reliability of the job checking status so that these errors&lt;br/&gt;
      are less frequent and more indicative of quota or other issues.&lt;/li&gt;
	&lt;li&gt;Started using the metrics in tests, where we do need to retry&lt;br/&gt;
      transient issues (&lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-350&quot; title=&quot;beam_PostCommit_RunnableOnService_GoogleCloudDataflow flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-350&quot;&gt;&lt;del&gt;BEAM-350&lt;/del&gt;&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    So let&apos;s drop the raw transport client and just use the one that&lt;br/&gt;
    retries.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/dhalperi/incubator-beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dhalperi/incubator-beam&lt;/a&gt; test-pipeline-runne&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/476.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/476.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #476&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 127d7f48bb50e42f879ea4299f78889132ebc4b7&lt;br/&gt;
Author: Dan Halperin &amp;lt;dhalperi@google.com&amp;gt;&lt;br/&gt;
Date:   2016-06-16T15:57:18Z&lt;/p&gt;

&lt;p&gt;    DataflowPipelineJob: Retry messages, metrics, and status polls&lt;/p&gt;

&lt;p&gt;    At some point in the past, we decided to use a rawDataflowClient that&lt;br/&gt;
    does not do retries when checking job status, because it was best-effort&lt;br/&gt;
    reporting to users. The purported goal was to not clutter the log with&lt;br/&gt;
    networking errors.&lt;/p&gt;

&lt;p&gt;    However, since that time, we have:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Added the ability to suppress logs (emit only at DEBUG level or not at&lt;br/&gt;
      all) when retrying.&lt;/li&gt;
	&lt;li&gt;Increased reliability of the job checking status so that these errors&lt;br/&gt;
      are less frequent and more indicative of quota or other issues.&lt;/li&gt;
	&lt;li&gt;Started using the metrics in tests, where we do need to retry&lt;br/&gt;
      transient issues (&lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-350&quot; title=&quot;beam_PostCommit_RunnableOnService_GoogleCloudDataflow flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-350&quot;&gt;&lt;del&gt;BEAM-350&lt;/del&gt;&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    So let&apos;s drop the raw transport client and just use the one that&lt;br/&gt;
    retries.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15339966" author="githubbot" created="Mon, 20 Jun 2016 17:26:23 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/476&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/476&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zkqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>