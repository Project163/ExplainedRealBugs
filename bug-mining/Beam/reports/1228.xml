<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:59:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-6955] Support Dataflow --sdk_location with modified version number</title>
                <link>https://issues.apache.org/jira/browse/BEAM-6955</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Support Dataflow --sdk_location with modified version number&lt;/p&gt;

&lt;p&gt;Determine the version tag to use for the Google Container Registry, for the service image versions to use on the Dataflow worker nodes. Users of Dataflow may be using a locally-modified version of Apache Beam, which they submit to Dataflow with the --sdk_location option. Those users would most likely modify the version number of Apache Beam, so they can distinguish it from the public distribution of Apache Beam. However, the remote nodes in Dataflow still need to bootsrap the worker service with a Docker image that a version tag exists for. &lt;/p&gt;

&lt;p&gt;The most appropriate way for system integrators to modify the Apache Beam version number would be to add a Local Version Identifier: &lt;a href=&quot;https://www.python.org/dev/peps/pep-0440/#local-version-identifiers&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.python.org/dev/peps/pep-0440/#local-version-identifiers&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If people only use Local Version Identifiers, then we could use the &quot;public&quot; attribute of the pkg_resources version object.&lt;/p&gt;

&lt;p&gt;If people instead use a post-release version identifier: &lt;a href=&quot;https://www.python.org/dev/peps/pep-0440/#post-releases&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.python.org/dev/peps/pep-0440/#post-releases&lt;/a&gt; then only the &quot;base_version&quot; attribute would work both of these version number changes. &lt;/p&gt;

&lt;p&gt;Since Dataflow documentation does not specify how to modify version numbers, I am choosing to use &quot;base_version&quot; attribute.&lt;/p&gt;

&lt;p&gt;Will shortly submit a PR with the change.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13225326">BEAM-6955</key>
            <summary>Support Dataflow --sdk_location with modified version number</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tvalentyn">Valentyn Tymofieiev</assignee>
                                    <reporter username="danl">Daniel Lescohier</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Apr 2019 16:58:20 +0000</created>
                <updated>Fri, 24 Jul 2020 19:52:14 +0000</updated>
                            <resolved>Wed, 19 Jun 2019 21:31:58 +0000</resolved>
                                    <version>2.11.0</version>
                                    <fixVersion>2.14.0</fixVersion>
                                    <component>runner-dataflow</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="10200">2h 50m</timespent>
                                <comments>
                            <comment id="16845036" author="tvalentyn" created="Tue, 21 May 2019 17:01:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=danl&quot; class=&quot;user-hover&quot; rel=&quot;danl&quot;&gt;danl&lt;/a&gt; You could pass --worker_harness_container_image=gcr.io/... . Would this work for your purposes? Also I am curious, what are the modifications you need to make to Beam Python SDK to support your use case.&lt;/p&gt;</comment>
                            <comment id="16845921" author="danl" created="Wed, 22 May 2019 14:33:57 +0000"  >&lt;p&gt;The modifications is the bug fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-6952&quot; title=&quot;concatenated compressed files bug with python sdk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-6952&quot;&gt;&lt;del&gt;BEAM-6952&lt;/del&gt;&lt;/a&gt; (which I created, but I haven&apos;t finished the work on the PR to finish getting it upstreamed).  I believe we needed it for reading Google Doubleclick data files, which have two concatenated gzip files, the csv header line in one, and then all the data lines. Our patched version also contains this ticket&apos;s fix.&lt;/p&gt;

&lt;p&gt;This came up when we upgraded from Apache Beam 2.2 to 2.11, because of the Dataflow retirement notice for Beam &amp;lt; 2.5.  In 2.2, there was different logic than what I implemented in this PR, but it acted similarly, it found the Docker image based on a portion of the version number, not the complete version number.  But 2.11 used the whole version number, and we couldn&apos;t launch Dataflow jobs any more until I investigated the problem and found this change that it no longer only used a portion of the version number to determine the Docker image name.&lt;/p&gt;

&lt;p&gt;I didn&apos;t know about the --worker_harness_container_image option, but I don&apos;t think it&apos;s a good user interface to require you to set two options.  If you&apos;re passing --sdk_location, I think it should just find the correct image for you, without having to know about and specify a second option.&lt;/p&gt;</comment>
                            <comment id="16847968" author="tvalentyn" created="Fri, 24 May 2019 23:55:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=danl&quot; class=&quot;user-hover&quot; rel=&quot;danl&quot;&gt;danl&lt;/a&gt;, please note that Dataflow service cannot guarantee compatibility between Dataflow python workers and the modified SDK. Also I encourage you to contribute your fixes upstream. Beam community has been producing releases every 6 weeks, and you can expect your changes to be released within 3-9 weeks once a PR is merged. &lt;/p&gt;

&lt;p&gt;That said, we plan to make a very similar change to one you suggest, to support pre-released versions of the SDK, for example 2.14.0rc2. The gist of the change will be identical to PR-8189 but we need to add tests and warnings. If you don&apos;t mind, I can take over this JIRA and CC you on my PR once it is ready. What do you think?&lt;/p&gt;</comment>
                            <comment id="16849767" author="danl" created="Tue, 28 May 2019 14:23:51 +0000"  >&lt;p&gt;That plan sounds fine.  Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01bx4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>