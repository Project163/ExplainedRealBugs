<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:13:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-11355] pipeline_from_stages after sort_stages can return non-topologically ordered pipelines</title>
                <link>https://issues.apache.org/jira/browse/BEAM-11355</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;translations.sort_stages() sorts stages in topological order. However, calling translations.pipeline_from_stages() on sorted stages can result in a pipeline that is not topologically ordered. This is because of how it constructs the tree of parent to subtransforms.&lt;/p&gt;

&lt;p&gt;Example pipeline:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Leaf transforms are A, B and C.&lt;/li&gt;
	&lt;li&gt;Composite transform D has subtransforms B and C.&lt;/li&gt;
	&lt;li&gt;Root transform E has subtransforms A and D.&lt;/li&gt;
	&lt;li&gt;A produces an output that is an input to C, and B produces an output that is an input to C.&lt;/li&gt;
	&lt;li&gt;After optimizations and sort stages, the order of leaf stages is B, A, C (this is a valid ordering)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Under the current implementation of translations.pipeline_from_stages():&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;B is added to the pipeline first, which also adds its parent D and its grandparent E to the pipeline. D is added as the first subtransform of E and B is added as the first subtransform of D.&lt;/li&gt;
	&lt;li&gt;A is added to the pipeline second. A is added as the second subtransform of E.&lt;/li&gt;
	&lt;li&gt;C is added to the pipeline third. C is added as the second subtransform of D.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The order is now E(D(B, C), A) which is invalid because C must follow A. A valid order would be E(A, D(B, C)).&lt;/p&gt;

&lt;p&gt;The easiest fix is to change translations.pipeline_from_stages() such that whenever a leaf transform is added to the pipeline, all its ancestors are moved to the last position of the subtransforms of their respective parent.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13342731">BEAM-11355</key>
            <summary>pipeline_from_stages after sort_stages can return non-topologically ordered pipelines</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myffical@gmail.com">Yifan Mai</assignee>
                                    <reporter username="myffical@gmail.com">Yifan Mai</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Nov 2020 01:37:23 +0000</created>
                <updated>Thu, 13 Jan 2022 21:49:24 +0000</updated>
                            <resolved>Tue, 8 Dec 2020 23:38:37 +0000</resolved>
                                                    <fixVersion>Missing</fixVersion>
                                    <component>sdk-py-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ky88:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>