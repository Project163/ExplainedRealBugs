<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:15:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-11807] SDK Worker with multithreading causes boto3 the KeyError(endpoint_resolver)</title>
                <link>https://issues.apache.org/jira/browse/BEAM-11807</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://github.com/boto/botocore/issues/1776&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/boto/botocore/issues/1776&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Traceback (most recent call last):
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/sdk_worker.py&quot;, line 289, in _execute
    response = task()
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/sdk_worker.py&quot;, line 362, in &amp;lt;lambda&amp;gt;
    lambda: self.create_worker().do_instruction(request), request)
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/sdk_worker.py&quot;, line 606, in do_instruction
    return getattr(self, request_type)(
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/sdk_worker.py&quot;, line 644, in process_bundle
    bundle_processor.process_bundle(instruction_id))
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/bundle_processor.py&quot;, line 1000, in process_bundle
    input_op_by_transform_id[element.transform_id].process_encoded(
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/bundle_processor.py&quot;, line 229, in process_encoded
    self.output(decoded_value)
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/operations.py&quot;, line 359, in output
    cython.cast(Receiver, self.receivers[output_index]).receive(windowed_value)
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/operations.py&quot;, line 221, in receive
    self.consumer.process(windowed_value)
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/operations.py&quot;, line 719, in process
    delayed_application = self.dofn_runner.process(o)
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/common.py&quot;, line 1241, in process
    self._reraise_augmented(exn)
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/common.py&quot;, line 1239, in process
    return self.do_fn_invoker.invoke_process(windowed_value)
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/common.py&quot;, line 587, in invoke_process
    self.output_processor.process_outputs(
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/common.py&quot;, line 1401, in process_outputs
    self.main_receivers.receive(windowed_value)
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/operations.py&quot;, line 221, in receive
    self.consumer.process(windowed_value)
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/operations.py&quot;, line 719, in process
    delayed_application = self.dofn_runner.process(o)
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/common.py&quot;, line 1241, in process
    self._reraise_augmented(exn)
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/common.py&quot;, line 1321, in _reraise_augmented
    raise_with_traceback(new_exn)
  File &quot;/home/local/.local/lib/python3.8/site-packages/future/utils/__init__.py&quot;, line 446, in raise_with_traceback
    raise exc.with_traceback(traceback)
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/common.py&quot;, line 1239, in process
    return self.do_fn_invoker.invoke_process(windowed_value)
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/common.py&quot;, line 587, in invoke_process
    self.output_processor.process_outputs(
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/common.py&quot;, line 1374, in process_outputs
    for result in results:
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/bundle_processor.py&quot;, line 1426, in process
    initial_restriction = self.restriction_provider.initial_restriction(
  File &quot;/tmp/beam/sdks/python/apache_beam/io/iobase.py&quot;, line 1545, in initial_restriction
    range_tracker = element_source.get_range_tracker(None, None)
  File &quot;/tmp/beam/sdks/python/apache_beam/io/filebasedsource.py&quot;, line 210, in get_range_tracker
    return self._get_concat_source().get_range_tracker(
  File &quot;/tmp/beam/sdks/python/apache_beam/options/value_provider.py&quot;, line 200, in _f
    return fnc(self, *args, **kwargs)
  File &quot;/tmp/beam/sdks/python/apache_beam/io/filebasedsource.py&quot;, line 145, in _get_concat_source
    match_result = FileSystems.match([pattern])[0]
  File &quot;/tmp/beam/sdks/python/apache_beam/io/filesystems.py&quot;, line 209, in match
    return filesystem.match(patterns, limits)
  File &quot;/tmp/beam/sdks/python/apache_beam/io/filesystem.py&quot;, line 765, in match
    raise BeamIOError(&quot;Match operation failed&quot;, exceptions)
apache_beam.io.filesystem.BeamIOError: Match operation failed with exceptions {&apos;s3://bucket_name/pipeline_output/pipe-name/ImportExampleGen/examples/7/train/*&apos;: BeamIOError(&quot;List operation failed with exceptions {&apos;s3://bucket_name/pipeline_output/pipe-name/ImportExampleGen/examples/7/train/&apos;: KeyError(&apos;endpoint_resolver&apos;)}&quot;)} [while running &apos;TFXIOReadAndDecode[TransformIndex1]/RawRecordBeamSource/ReadRawRecords/ReadFromTFRecord[0]/Read/SDFBoundedSourceReader/ParDo(SDFBoundedSourceDoFn)/PairWithRestriction0&apos;] with exceptions None&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Traceback (most recent call last):
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/sdk_worker.py&quot;, line 289, in _execute
    response = task()
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/sdk_worker.py&quot;, line 362, in &amp;lt;lambda&amp;gt;
    lambda: self.create_worker().do_instruction(request), request)
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/sdk_worker.py&quot;, line 606, in do_instruction
    return getattr(self, request_type)(
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/sdk_worker.py&quot;, line 644, in process_bundle
    bundle_processor.process_bundle(instruction_id))
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/bundle_processor.py&quot;, line 1000, in process_bundle
    input_op_by_transform_id[element.transform_id].process_encoded(
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/bundle_processor.py&quot;, line 229, in process_encoded
    self.output(decoded_value)
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/operations.py&quot;, line 359, in output
    cython.cast(Receiver, self.receivers[output_index]).receive(windowed_value)
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/operations.py&quot;, line 221, in receive
    self.consumer.process(windowed_value)
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/worker/operations.py&quot;, line 838, in process
    delayed_applications = self.dofn_runner.process_with_sized_restriction(
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/common.py&quot;, line 1247, in process_with_sized_restriction
    return self.do_fn_invoker.invoke_process(
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/common.py&quot;, line 748, in invoke_process
    residual = self._invoke_process_per_window(
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/common.py&quot;, line 886, in _invoke_process_per_window
    self.output_processor.process_outputs(
  File &quot;/tmp/beam/sdks/python/apache_beam/runners/common.py&quot;, line 1374, in process_outputs
    for result in results:
  File &quot;/tmp/beam/sdks/python/apache_beam/io/tfrecordio.py&quot;, line 187, in read_records
    with self.open_file(file_name) as file_handle:
  File &quot;/tmp/beam/sdks/python/apache_beam/io/filebasedsource.py&quot;, line 177, in open_file
    return FileSystems.open(
  File &quot;/tmp/beam/sdks/python/apache_beam/io/filesystems.py&quot;, line 249, in open
    return filesystem.open(path, mime_type, compression_type)
  File &quot;/tmp/beam/sdks/python/apache_beam/io/aws/s3filesystem.py&quot;, line 190, in open
    return self._path_open(path, &apos;rb&apos;, mime_type, compression_type)
  File &quot;/tmp/beam/sdks/python/apache_beam/io/aws/s3filesystem.py&quot;, line 154, in _path_open
    raw_file = s3io.S3IO(options=self._options).open(
  File &quot;/tmp/beam/sdks/python/apache_beam/io/aws/s3io.py&quot;, line 67, in __init__
    self.client = boto3_client.Client(options=options)
  File &quot;/tmp/beam/sdks/python/apache_beam/io/aws/clients/s3/boto3_client.py&quot;, line 60, in __init__
    self.client = boto3.client(
  File &quot;/home/local/.local/lib/python3.8/site-packages/boto3/__init__.py&quot;, line 93, in client
    return _get_default_session().client(*args, **kwargs)
  File &quot;/home/local/.local/lib/python3.8/site-packages/boto3/session.py&quot;, line 258, in client
    return self._session.create_client(
  File &quot;/home/local/.local/lib/python3.8/site-packages/botocore/session.py&quot;, line 827, in create_client
    endpoint_resolver = self._get_internal_component(&apos;endpoint_resolver&apos;)
  File &quot;/home/local/.local/lib/python3.8/site-packages/botocore/session.py&quot;, line 700, in _get_internal_component
    return self._internal_components.get_component(name)
  File &quot;/home/local/.local/lib/python3.8/site-packages/botocore/session.py&quot;, line 928, in get_component
    del self._deferred[name]
KeyError: &apos;endpoint_resolver&apos;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13358275">BEAM-11807</key>
            <summary>SDK Worker with multithreading causes boto3 the KeyError(endpoint_resolver)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="10722" iconUrl="https://issues.apache.org/jira/images/icons/statuses/generic.png" description="">Triage Needed</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ferryvg">ferryvg</reporter>
                        <labels>
                            <label>AWS</label>
                            <label>S3</label>
                            <label>multi-threading</label>
                    </labels>
                <created>Fri, 12 Feb 2021 06:04:54 +0000</created>
                <updated>Fri, 22 Nov 2024 15:31:40 +0000</updated>
                            <resolved>Fri, 12 Feb 2021 18:34:04 +0000</resolved>
                                    <version>2.27.0</version>
                    <version>2.28.0</version>
                                    <fixVersion>2.29.0</fixVersion>
                                    <component>io-py-aws</component>
                    <component>sdk-py-harness</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="6600">1h 50m</timespent>
                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/beam/pull/13977]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 39 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nm9k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>