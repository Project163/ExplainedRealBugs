<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:41:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-1140] Apex ParDoBoundTranslatorTest.testMultiOutputParDoWithSideInputs is flaky</title>
                <link>https://issues.apache.org/jira/browse/BEAM-1140</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;The test fails about one in 10-20 times or so when run in &quot;Run until failure&quot; mode in IntelliJ (I did it 3 times; once it failed on the 3rd run, once on the 15th, once on the 40th).&lt;/p&gt;

&lt;p&gt;It&apos;s making precommits unstable (e.g. currently &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/1565&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/1565&lt;/a&gt; failed with this test error).&lt;/p&gt;

&lt;p&gt;Unfortunately I don&apos;t understand enough about the Apex runner to understand what&apos;s going on and fix this myself...&lt;/p&gt;</description>
                <environment></environment>
        <key id="13027631">BEAM-1140</key>
            <summary>Apex ParDoBoundTranslatorTest.testMultiOutputParDoWithSideInputs is flaky</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jkff">Eugene Kirpichov</reporter>
                        <labels>
                            <label>flake</label>
                            <label>stale-assigned</label>
                            <label>triaged</label>
                    </labels>
                <created>Tue, 13 Dec 2016 00:01:21 +0000</created>
                <updated>Fri, 24 Jul 2020 20:54:58 +0000</updated>
                            <resolved>Thu, 11 Jun 2020 16:37:37 +0000</resolved>
                                                    <fixVersion>Not applicable</fixVersion>
                                    <component>runner-apex</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15768641" author="thw" created="Thu, 22 Dec 2016 01:00:03 +0000"  >&lt;p&gt;Run it for ~ 30 minutes using&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; mvn test -Dtest=ParDoBoundTranslatorTest#testMultiOutputParDoWithSideInputs; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; :; done
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;without error. But I have seen this failing in a different environment before as well.&lt;/p&gt;</comment>
                            <comment id="15794073" author="thw" created="Tue, 3 Jan 2017 04:10:29 +0000"  >&lt;p&gt;I was able to reproduce on a VM. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Failed tests:
  ParDoBoundTranslatorTest.testMultiOutputParDoWithSideInputs:307 expected:&amp;lt;[processing: -42: [11, 222], processing: 3: [11, 222], processing: 666: [11, 222]]&amp;gt; but was:&amp;lt;[processing: -42: [11, 222], processing: 3: [11, 222]]&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When the test fails, input 666 was read, but never processed by the MultiOutputParDo, because the topology gets terminated before. I cannot see any issue in the runner code, so need to look at this further at the Apex level. I suspect it is the same issue that also manifests in other flaky tests.&lt;/p&gt;
</comment>
                            <comment id="15794247" author="githubbot" created="Tue, 3 Jan 2017 06:02:16 +0000"  >&lt;p&gt;GitHub user tweise opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/1727&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/1727&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-1140&quot; title=&quot;Apex ParDoBoundTranslatorTest.testMultiOutputParDoWithSideInputs is flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-1140&quot;&gt;&lt;del&gt;BEAM-1140&lt;/del&gt;&lt;/a&gt; terminate stream in interval following the final mark to reduce test flakiness (stop gap measure).&lt;/p&gt;

&lt;p&gt;    Be sure to do all of the following to help us incorporate your contribution&lt;br/&gt;
    quickly and easily:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Make sure the PR title is formatted like:&lt;br/&gt;
       `&lt;a href=&quot;#&amp;gt;&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;BEAM-&amp;lt;Jira issue #&amp;gt;&lt;/a&gt; Description of pull request`&lt;/li&gt;
	&lt;li&gt;[ ] Make sure tests pass via `mvn clean verify`. (Even better, enable&lt;br/&gt;
           Travis-CI on your fork and ensure the whole test matrix passes).&lt;/li&gt;
	&lt;li&gt;[ ] Replace `&amp;lt;Jira issue #&amp;gt;` in the title with the actual Jira issue&lt;br/&gt;
           number, if there is one.&lt;/li&gt;
	&lt;li&gt;[ ] If this contribution is large, please file an Apache&lt;br/&gt;
           &lt;span class=&quot;error&quot;&gt;&amp;#91;Individual Contributor License Agreement&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.apache.org/licenses/icla.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/licenses/icla.txt&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    &amp;#8212;&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tweise/beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tweise/beam&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-1140&quot; title=&quot;Apex ParDoBoundTranslatorTest.testMultiOutputParDoWithSideInputs is flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-1140&quot;&gt;&lt;del&gt;BEAM-1140&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/1727.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/1727.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1727&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit bb11170915f5c05629f591304f01fbc528e2ea57&lt;br/&gt;
Author: Thomas Weise &amp;lt;thw@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-01-03T05:58:57Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-1140&quot; title=&quot;Apex ParDoBoundTranslatorTest.testMultiOutputParDoWithSideInputs is flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-1140&quot;&gt;&lt;del&gt;BEAM-1140&lt;/del&gt;&lt;/a&gt; terminate stream in interval following the final mark to reduce test flakiness (stop gap measure).&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15796094" author="kenn" created="Tue, 3 Jan 2017 20:27:00 +0000"  >&lt;p&gt;The whole topology is terminated? That should require that the final watermarks reach infinity, which should be a bit later. Is it possible that the pending element is not holding things up? I could imagine this being in Apex or in the runner translation somehow.&lt;/p&gt;</comment>
                            <comment id="15796116" author="thw" created="Tue, 3 Jan 2017 20:35:43 +0000"  >&lt;p&gt;The termination event is a control tuple that follows the data flow. If everything works as intended, then the topology will be terminated only once the watermark has traversed it fully. Something isn&apos;t working as intended, this workaround reduces the likelihood of the race condition. &lt;/p&gt;</comment>
                            <comment id="15796267" author="githubbot" created="Tue, 3 Jan 2017 21:40:12 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/1727&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/1727&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17132485" author="beamjirabot" created="Wed, 10 Jun 2020 17:28:11 +0000"  >&lt;p&gt;This issue is assigned but has not received an update in 30 days so it has been labeled &quot;stale-assigned&quot;. If you are still working on the issue, please give an update and remove the label. If you are no longer working on the issue, please unassign so someone else may work on it. In 7 days the issue will be automatically unassigned.&lt;/p&gt;</comment>
                            <comment id="17133389" author="bhulette" created="Thu, 11 Jun 2020 16:37:18 +0000"  >&lt;p&gt;Closing as wont fix since Apex runner is being removed&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13032048">APEXCORE-599</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13024851">BEAM-1067</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37igf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>