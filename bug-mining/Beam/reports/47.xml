<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:39:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-383] BigQueryIO: update sink to shard into multiple write jobs</title>
                <link>https://issues.apache.org/jira/browse/BEAM-383</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;BigQuery has global limits on both the # files that can be written in a single job and the total bytes in those files. We should be able to modify BigQueryIO.Write to chunk into multiple smaller jobs that meet these limits, write to temp tables, and atomically copy into the destination table.&lt;/p&gt;

&lt;p&gt;This functionality will let us safely stay within BQ&apos;s load job limits.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12984472">BEAM-383</key>
            <summary>BigQueryIO: update sink to shard into multiple write jobs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ianzhou">Ian Zhou</assignee>
                                    <reporter username="dhalperi">Dan Halperin</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jun 2016 19:12:31 +0000</created>
                <updated>Fri, 24 Jul 2020 20:55:07 +0000</updated>
                            <resolved>Thu, 4 Aug 2016 06:53:14 +0000</resolved>
                                                    <fixVersion>0.3.0-incubating</fixVersion>
                                    <component>io-java-gcp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15388653" author="githubbot" created="Fri, 22 Jul 2016 00:10:52 +0000"  >&lt;p&gt;GitHub user ianzhou1 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/707&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/707&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-383&quot; title=&quot;BigQueryIO: update sink to shard into multiple write jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-383&quot;&gt;&lt;del&gt;BEAM-383&lt;/del&gt;&lt;/a&gt; BigQueryIO update sink to shard into multiple write jobs&lt;/p&gt;

&lt;p&gt;    Be sure to do all of the following to help us incorporate your contribution&lt;br/&gt;
    quickly and easily:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Make sure the PR title is formatted like:&lt;br/&gt;
       `&lt;a href=&quot;#&amp;gt;&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;BEAM-&amp;lt;Jira issue #&amp;gt;&lt;/a&gt; Description of pull request`&lt;/li&gt;
	&lt;li&gt;[ ] Make sure tests pass via `mvn clean verify`. (Even better, enable&lt;br/&gt;
           Travis-CI on your fork and ensure the whole test matrix passes).&lt;/li&gt;
	&lt;li&gt;[ ] Replace `&amp;lt;Jira issue #&amp;gt;` in the title with the actual Jira issue&lt;br/&gt;
           number, if there is one.&lt;/li&gt;
	&lt;li&gt;[ ] If this contribution is large, please file an Apache&lt;br/&gt;
           &lt;span class=&quot;error&quot;&gt;&amp;#91;Individual Contributor License Agreement&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.apache.org/licenses/icla.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/licenses/icla.txt&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    &amp;#8212;&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ianzhou1/incubator-beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ianzhou1/incubator-beam&lt;/a&gt; BigQueryBranch&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/707.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/707.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #707&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 5294e161d38c37a71c54a8925288f488e9982cab&lt;br/&gt;
Author: Ian Zhou &amp;lt;ianzhou@google.com&amp;gt;&lt;br/&gt;
Date:   2016-07-20T22:56:21Z&lt;/p&gt;

&lt;p&gt;    Modified BigQueryIO to write based on number of files and file sizes&lt;/p&gt;

&lt;p&gt;commit b96184d221de08fd825c9f914b8dc393987c6de9&lt;br/&gt;
Author: Ian Zhou &amp;lt;ianzhou@google.com&amp;gt;&lt;br/&gt;
Date:   2016-07-22T00:04:25Z&lt;/p&gt;

&lt;p&gt;    Added unit tests for DoFns used in BigQueryWrite&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15407287" author="githubbot" created="Thu, 4 Aug 2016 06:43:41 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/707&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/707&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15435276" author="githubbot" created="Wed, 24 Aug 2016 16:51:11 +0000"  >&lt;p&gt;GitHub user dhalperi opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/877&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/877&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-383&quot; title=&quot;BigQueryIO: update sink to shard into multiple write jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-383&quot;&gt;&lt;del&gt;BEAM-383&lt;/del&gt;&lt;/a&gt; BigQueryIO.Write: raise size limit to 11 TiB&lt;/p&gt;

&lt;p&gt;    BigQuery has changed their total size quota to 12 TiB.&lt;br/&gt;
    &lt;a href=&quot;https://cloud.google.com/bigquery/quota-policy#import&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cloud.google.com/bigquery/quota-policy#import&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/dhalperi/incubator-beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dhalperi/incubator-beam&lt;/a&gt; bigquery-limits&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/877.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/877.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #877&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 02648a968992617ba77393d889c8df9d0191b9ea&lt;br/&gt;
Author: Dan Halperin &amp;lt;dhalperi@google.com&amp;gt;&lt;br/&gt;
Date:   2016-08-24T16:49:46Z&lt;/p&gt;

&lt;p&gt;    BigQueryIO.Write: raise size limit to 11 TiB&lt;/p&gt;

&lt;p&gt;    BigQuery has changed their total size quota to 12 TiB.&lt;br/&gt;
    &lt;a href=&quot;https://cloud.google.com/bigquery/quota-policy#import&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cloud.google.com/bigquery/quota-policy#import&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15435869" author="githubbot" created="Wed, 24 Aug 2016 22:49:05 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/877&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/877&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15463597" author="githubbot" created="Sun, 4 Sep 2016 22:11:57 +0000"  >&lt;p&gt;GitHub user dhalperi opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/917&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/917&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-383&quot; title=&quot;BigQueryIO: update sink to shard into multiple write jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-383&quot;&gt;&lt;del&gt;BEAM-383&lt;/del&gt;&lt;/a&gt; BigQuery: limit max job polling time to 1 minute&lt;/p&gt;

&lt;p&gt;    Be sure to do all of the following to help us incorporate your contribution&lt;br/&gt;
    quickly and easily:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Make sure the PR title is formatted like:&lt;br/&gt;
       `&lt;a href=&quot;#&amp;gt;&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;BEAM-&amp;lt;Jira issue #&amp;gt;&lt;/a&gt; Description of pull request`&lt;/li&gt;
	&lt;li&gt;[ ] Make sure tests pass via `mvn clean verify`. (Even better, enable&lt;br/&gt;
           Travis-CI on your fork and ensure the whole test matrix passes).&lt;/li&gt;
	&lt;li&gt;[ ] Replace `&amp;lt;Jira issue #&amp;gt;` in the title with the actual Jira issue&lt;br/&gt;
           number, if there is one.&lt;/li&gt;
	&lt;li&gt;[ ] If this contribution is large, please file an Apache&lt;br/&gt;
           &lt;span class=&quot;error&quot;&gt;&amp;#91;Individual Contributor License Agreement&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.apache.org/licenses/icla.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/licenses/icla.txt&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    &amp;#8212;&lt;/p&gt;

&lt;p&gt;    Before the backoff would grow unboundedly, so we could in principle wait&lt;br/&gt;
    1.5x to 2x the actual job time. For long running jobs this is hours.&lt;br/&gt;
    Now, we just back off at most 1 minute between checking the job state.&lt;br/&gt;
    Note there should be no danger of QPS overload here because we should&lt;br/&gt;
    have very few concurrent outstanding jobs&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/dhalperi/incubator-beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dhalperi/incubator-beam&lt;/a&gt; bigquery-write-backoff&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/917.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/917.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #917&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0cc46575c32fc5f96b9ec0a488b639d8ea105b99&lt;br/&gt;
Author: Dan Halperin &amp;lt;dhalperi@google.com&amp;gt;&lt;br/&gt;
Date:   2016-09-04T21:54:42Z&lt;/p&gt;

&lt;p&gt;    BigQuery: limit max job polling time to 1 minute&lt;/p&gt;

&lt;p&gt;    Before the backoff would grow unboundedly, so we could in principle wait&lt;br/&gt;
    1.5x to 2x the actual job time. For long running jobs this is hours.&lt;br/&gt;
    Now, we just back off at most 1 minute between checking the job state.&lt;br/&gt;
    Note there should be no danger of QPS overload here because we should&lt;br/&gt;
    have very few concurrent outstanding jobs&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15468151" author="githubbot" created="Tue, 6 Sep 2016 18:32:04 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/917&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/917&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i309w7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>