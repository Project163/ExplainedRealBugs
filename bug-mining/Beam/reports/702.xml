<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:51:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-5172] org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest is flaky</title>
                <link>https://issues.apache.org/jira/browse/BEAM-5172</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;In a recent PostCommit builld, &lt;a href=&quot;https://builds.apache.org/job/beam_PostCommit_Java_GradleBuild/1290/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/testRead/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PostCommit_Java_GradleBuild/1290/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/testRead/&lt;/a&gt; failed with:&lt;/p&gt;

&lt;p&gt;Error Message&lt;br/&gt;
java.lang.AssertionError: Count/Flatten.PCollections.out: &lt;br/&gt;
Expected: &amp;lt;400L&amp;gt;&lt;br/&gt;
     but: was &amp;lt;470L&amp;gt;&lt;br/&gt;
Stacktrace&lt;br/&gt;
java.lang.AssertionError: Count/Flatten.PCollections.out: &lt;br/&gt;
Expected: &amp;lt;400L&amp;gt;&lt;br/&gt;
     but: was &amp;lt;470L&amp;gt;&lt;br/&gt;
	at org.apache.beam.sdk.testing.PAssert$PAssertionSite.capture(PAssert.java:168)&lt;br/&gt;
	at org.apache.beam.sdk.testing.PAssert.thatSingleton(PAssert.java:413)&lt;br/&gt;
	at org.apache.beam.sdk.testing.PAssert.thatSingleton(PAssert.java:404)&lt;br/&gt;
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIOTestCommon.testRead(ElasticsearchIOTestCommon.java:124)&lt;br/&gt;
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIOTest.testRead(ElasticsearchIOTest.java:125)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:498)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)&lt;br/&gt;
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)&lt;br/&gt;
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)&lt;br/&gt;
	at org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:239)&lt;br/&gt;
	at org.apache.beam.sdk.testing.TestPipeline$1.evaluate(TestPipeline.java:319)&lt;br/&gt;
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)&lt;br/&gt;
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)&lt;br/&gt;
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)&lt;br/&gt;
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)&lt;br/&gt;
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)&lt;br/&gt;
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)&lt;br/&gt;
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)&lt;br/&gt;
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)&lt;br/&gt;
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:106)&lt;br/&gt;
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:58)&lt;br/&gt;
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:38)&lt;br/&gt;
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)&lt;br/&gt;
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:498)&lt;br/&gt;
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)&lt;br/&gt;
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)&lt;br/&gt;
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)&lt;br/&gt;
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)&lt;br/&gt;
	at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)&lt;br/&gt;
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:498)&lt;br/&gt;
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)&lt;br/&gt;
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)&lt;br/&gt;
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:155)&lt;br/&gt;
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:137)&lt;br/&gt;
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)&lt;br/&gt;
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)&lt;br/&gt;
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)&lt;br/&gt;
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)&lt;br/&gt;
Caused by: java.lang.AssertionError: &lt;br/&gt;
Expected: &amp;lt;400L&amp;gt;&lt;br/&gt;
     but: was &amp;lt;470L&amp;gt;&lt;br/&gt;
	at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)&lt;br/&gt;
	at org.junit.Assert.assertThat(Assert.java:956)&lt;br/&gt;
	at org.junit.Assert.assertThat(Assert.java:923)&lt;br/&gt;
	at org.apache.beam.sdk.testing.PAssert$AssertIsEqualTo.apply(PAssert.java:1264)&lt;br/&gt;
	at org.apache.beam.sdk.testing.PAssert$AssertIsEqualTo.apply(PAssert.java:1254)&lt;br/&gt;
	at org.apache.beam.sdk.testing.PAssert$CheckRelationAgainstExpected.apply(PAssert.java:960)&lt;br/&gt;
	at org.apache.beam.sdk.testing.PAssert$CheckRelationAgainstExpected.apply(PAssert.java:940)&lt;br/&gt;
	at org.apache.beam.sdk.testing.PAssert.doChecks(PAssert.java:1241)&lt;br/&gt;
	at org.apache.beam.sdk.testing.PAssert$SideInputCheckerDoFn.processElement(PAssert.java:1185)&lt;br/&gt;
	at org.apache.beam.sdk.testing.PAssert$SideInputCheckerDoFn$DoFnInvoker.invokeProcessElement(Unknown Source)&lt;br/&gt;
	at org.apache.beam.repackaged.beam_runners_direct_java.runners.core.SimpleDoFnRunner.invokeProcessElement(SimpleDoFnRunner.java:275)&lt;br/&gt;
	at org.apache.beam.repackaged.beam_runners_direct_java.runners.core.SimpleDoFnRunner.processElement(SimpleDoFnRunner.java:237)&lt;br/&gt;
	at org.apache.beam.repackaged.beam_runners_direct_java.runners.core.SimplePushbackSideInputDoFnRunner.processElementInReadyWindows(SimplePushbackSideInputDoFnRunner.java:87)&lt;br/&gt;
	at org.apache.beam.runners.direct.ParDoEvaluator.processElement(ParDoEvaluator.java:207)&lt;br/&gt;
	at org.apache.beam.runners.direct.DoFnLifecycleManagerRemovingTransformEvaluator.processElement(DoFnLifecycleManagerRemovingTransformEvaluator.java:55)&lt;br/&gt;
	at org.apache.beam.runners.direct.DirectTransformExecutor.processElements(DirectTransformExecutor.java:160)&lt;br/&gt;
	at org.apache.beam.runners.direct.DirectTransformExecutor.run(DirectTransformExecutor.java:124)&lt;br/&gt;
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)&lt;br/&gt;
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:748)&lt;br/&gt;
Standard Error&lt;/p&gt;</description>
                <environment></environment>
        <key id="13179860">BEAM-5172</key>
            <summary>org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest is flaky</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10101" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">P1</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tvalentyn">Valentyn Tymofieiev</reporter>
                        <labels>
                            <label>flake</label>
                            <label>sickbay</label>
                    </labels>
                <created>Mon, 20 Aug 2018 04:38:45 +0000</created>
                <updated>Wed, 26 Jan 2022 18:55:43 +0000</updated>
                            <resolved>Wed, 26 Jan 2022 14:58:05 +0000</resolved>
                                    <version>2.31.0</version>
                                    <fixVersion>2.37.0</fixVersion>
                                    <component>io-java-elasticsearch</component>
                    <component>test-failures</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="10200">2h 50m</timespent>
                                <comments>
                            <comment id="16591633" author="echauchot" created="Fri, 24 Aug 2018 13:15:50 +0000"  >&lt;p&gt;There are 2 types of failure:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;timeout in the connection to embedded ES =&amp;gt; overload of jenkins ? Need to block until embedded ES is ready?&lt;/li&gt;
	&lt;li&gt;assert of number of docs in index fail: the index contains more docs than inserted. Maybe the index drop was not finished before running the test&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16593378" author="echauchot" created="Mon, 27 Aug 2018 09:23:32 +0000"  >&lt;p&gt;Actually for testRead:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;insert test docs is a simple loop&lt;/li&gt;
	&lt;li&gt;IO.read() has been tested a lot and there is no duplicated record&lt;/li&gt;
	&lt;li&gt;index suppression is synchronous with no exception raising&lt;br/&gt;
=&amp;gt; I now bet on parallel inserts on the same index. I will try setting an index name different for tests that can be run in parallel&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16593656" author="echauchot" created="Mon, 27 Aug 2018 13:37:11 +0000"  >&lt;p&gt;For testWrite timeout in ES2: starting the embedded ES node is blocking so connection timeout in testWrite cannot be due to embedded ES not started when the test runs. I&apos;ll add a simple temporisation if the connection fails before launching the tests.&lt;/p&gt;</comment>
                            <comment id="16681834" author="chamikara" created="Fri, 9 Nov 2018 18:59:09 +0000"  >&lt;p&gt;Another flake for testRead: &lt;a href=&quot;https://builds.apache.org/job/beam_PostCommit_Java_GradleBuild/1853/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PostCommit_Java_GradleBuild/1853/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;java.lang.AssertionError: Count/Flatten.PCollections.out: Expected: &amp;lt;400L&amp;gt; but: was &amp;lt;775L&amp;gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16683435" author="echauchot" created="Mon, 12 Nov 2018 09:03:06 +0000"  >&lt;p&gt;Thanks Cham for raising that ! It was not parallel inserts after all &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Re-opening ticket&lt;/p&gt;</comment>
                            <comment id="16683439" author="echauchot" created="Mon, 12 Nov 2018 09:04:31 +0000"  >&lt;p&gt;testRead reports more docs than inserted, even if index names are different between instances of testRread to avoid parallelisation problems. Re-opening ticket&lt;/p&gt;</comment>
                            <comment id="16684158" author="chamikara" created="Mon, 12 Nov 2018 17:47:06 +0000"  >&lt;p&gt;Another flake: &lt;a href=&quot;https://builds.apache.org/job/beam_PostCommit_Java_GradleBuild/1872/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PostCommit_Java_GradleBuild/1872/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Etienne, can we consider&#160;disabling&#160;ElasticsearchIOTest till it&apos;s more stable to&#160;keep&#160;post-commit test suite (beam_PostCommit_Java_GradleBuild) healthy&#160;?&#160;&lt;/p&gt;</comment>
                            <comment id="16684980" author="echauchot" created="Tue, 13 Nov 2018 10:15:07 +0000"  >&lt;p&gt;Most of them are timeouts connecting to the embedded ES. It looks like load problems.&lt;br/&gt;
There is ongoing work on ES with &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-6052&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BEAM-6052&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-5925&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BEAM-5925&lt;/a&gt;. So I would prefer keeping the tests enabled during the development to avoid regression.&lt;br/&gt;
WDYT.&lt;/p&gt;</comment>
                            <comment id="16685556" author="chamikara" created="Tue, 13 Nov 2018 18:06:15 +0000"  >&lt;p&gt;Sounds good. Thanks for the update.&lt;/p&gt;</comment>
                            <comment id="16686780" author="echauchot" created="Wed, 14 Nov 2018 16:07:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chamikara&quot; class=&quot;user-hover&quot; rel=&quot;chamikara&quot;&gt;chamikara&lt;/a&gt; This PR &lt;a href=&quot;https://github.com/apache/beam/pull/7038&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/7038&lt;/a&gt; might also correct the testRead flakiness (number of documents). &lt;br/&gt;
For the timeouts &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wouts&quot; class=&quot;user-hover&quot; rel=&quot;wouts&quot;&gt;wouts&lt;/a&gt; is working on them: see &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-5925&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BEAM-5925&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-5988&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BEAM-5988&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16693009" author="echauchot" created="Tue, 20 Nov 2018 10:21:12 +0000"  >&lt;p&gt;Within I week I saw no ES flakiness in postcommits, so PR &lt;a href=&quot;https://github.com/apache/beam/pull/7038&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/7038&lt;/a&gt;&#160;seems to have also fixed this. Closing this ticket. There are only timeouts left and &lt;a href=&quot;https://github.com/apache/beam/pull/7065&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/7065&lt;/a&gt;&#160;addresses them&lt;/p&gt;</comment>
                            <comment id="17326151" author="tvalentyn" created="Tue, 20 Apr 2021 23:11:24 +0000"  >&lt;p&gt;Seems to be happening again:&lt;/p&gt;

&lt;p&gt;From a precommit &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Commit/17290/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/testWriteWithIsDeleteFn/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Commit/17290/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/testWriteWithIsDeleteFn/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Error Message
java.lang.AssertionError: expected:&amp;lt;400&amp;gt; but was:&amp;lt;296&amp;gt;
Stacktrace
java.lang.AssertionError: expected:&amp;lt;400&amp;gt; but was:&amp;lt;296&amp;gt;
	at org.junit.Assert.fail(Assert.java:89)
	at org.junit.Assert.failNotEquals(Assert.java:835)
	at org.junit.Assert.assertEquals(Assert.java:647)
	at org.junit.Assert.assertEquals(Assert.java:633)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIOTestCommon.testWriteWithIsDeletedFnWithoutPartialUpdate(ElasticsearchIOTestCommon.java:719)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIOTest.testWriteWithIsDeleteFn(ElasticsearchIOTest.java:232)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:258)
	at org.apache.beam.sdk.testing.TestPipeline$1.evaluate(TestPipeline.java:322)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:110)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:58)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:38)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:62)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:119)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:414)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)
	at java.lang.Thread.run(Thread.java:748)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17349795" author="beamjirabot" created="Sat, 22 May 2021 17:19:26 +0000"  >&lt;p&gt;This issue is assigned but has not received an update in 30 days so it has been labeled &quot;stale-assigned&quot;. If you are still working on the issue, please give an update and remove the label. If you are no longer working on the issue, please unassign so someone else may work on it. In 7 days the issue will be automatically unassigned.&lt;/p&gt;</comment>
                            <comment id="17353123" author="echauchot" created="Fri, 28 May 2021 09:22:45 +0000"  >&lt;p&gt;After this PR &lt;a href=&quot;https://github.com/apache/beam/pull/14347&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/14347&lt;/a&gt;&#160;was merged yesterday I see more flakiness on the write side of the IO. &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/3636/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/3636/&lt;/a&gt;&#160;it is timeouts and waiting queue not empty issues. They are typically overload like issues. I think we should revive the discussion about migrating these test from the ES in-jvm test framework to testContainers cf&#160;&lt;a href=&quot;https://lists.apache.org/thread.html/reb68f37c435995a64ded19100e09dfc31c5cf6227feae16494226100%40%3Cdev.beam.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/reb68f37c435995a64ded19100e09dfc31c5cf6227feae16494226100%40%3Cdev.beam.apache.org%3E&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17353124" author="echauchot" created="Fri, 28 May 2021 09:23:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=egalpin&quot; class=&quot;user-hover&quot; rel=&quot;egalpin&quot;&gt;egalpin&lt;/a&gt;&#160;can you take a look at the recent failures in write tests ? I took the liberty to assign the ticket to you&lt;/p&gt;</comment>
                            <comment id="17353133" author="echauchot" created="Fri, 28 May 2021 09:38:52 +0000"  >&lt;p&gt;I just opened a ticket for migration to test containers : &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-12421&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BEAM-12421&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17353391" author="egalpin" created="Fri, 28 May 2021 14:45:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echauchot&quot; class=&quot;user-hover&quot; rel=&quot;echauchot&quot;&gt;echauchot&lt;/a&gt; the recent failures are unfortunately in line with what I&apos;d seen from remote/Jenkins tests while developing recent ElasticsearchIO features. Locally, the tests reliably pass. They appear to be flaky based on server load. I&apos;ll have a look into testContainer migration (&lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-12421&quot; title=&quot;Migrate elasticsearchio tests to test containers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-12421&quot;&gt;&lt;del&gt;BEAM-12421&lt;/del&gt;&lt;/a&gt;) but am not able to commit to a timeline on that migration just now&lt;/p&gt;</comment>
                            <comment id="17357505" author="beamjirabot" created="Fri, 4 Jun 2021 17:19:30 +0000"  >&lt;p&gt;This issue was marked &quot;stale-assigned&quot; and has not received a public comment in 7 days. It is now automatically unassigned. If you are still working on it, you can assign it to yourself again. Please also give an update about the status of the work.&lt;/p&gt;</comment>
                            <comment id="17357528" author="egalpin" created="Fri, 4 Jun 2021 17:56:59 +0000"  >&lt;p&gt;Hopefully flakiness is reduced in part by &lt;a href=&quot;https://github.com/apache/beam/pull/14933&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/14933&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17358451" author="echauchot" created="Mon, 7 Jun 2021 08:54:46 +0000"  >&lt;p&gt;build links are temporary, here are the collected errors:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// org.apache.beam.vendor.guava.v26_0_jre.com.google.common.util.concurrent.UncheckedExecutionException: org.apache.beam.sdk.util.UserCodeException: java.lang.IllegalArgumentException: Cannot get Elasticsearch version
&lt;/span&gt;	at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2050)
	at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache.get(LocalCache.java:3952)
	at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3974)
	at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4958)
	at org.apache.beam.runners.direct.DoFnLifecycleManager.get(DoFnLifecycleManager.java:62)
	at org.apache.beam.runners.direct.ParDoEvaluatorFactory.createEvaluator(ParDoEvaluatorFactory.java:131)
	at org.apache.beam.runners.direct.ParDoEvaluatorFactory.forApplication(ParDoEvaluatorFactory.java:81)
	at org.apache.beam.runners.direct.TransformEvaluatorRegistry.forApplication(TransformEvaluatorRegistry.java:178)
	at org.apache.beam.runners.direct.DirectTransformExecutor.run(DirectTransformExecutor.java:122)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
Caused by: org.apache.beam.sdk.util.UserCodeException: java.lang.IllegalArgumentException: Cannot get Elasticsearch version
	at org.apache.beam.sdk.util.UserCodeException.wrap(UserCodeException.java:39)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIO$Write$WriteFn$DoFnInvoker.invokeSetup(Unknown Source)
	at org.apache.beam.sdk.transforms.reflect.DoFnInvokers.tryInvokeSetupFor(DoFnInvokers.java:53)
	at org.apache.beam.runners.direct.DoFnLifecycleManager$DeserializingCacheLoader.load(DoFnLifecycleManager.java:107)
	at org.apache.beam.runners.direct.DoFnLifecycleManager$DeserializingCacheLoader.load(DoFnLifecycleManager.java:92)
	at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3528)
	at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2277)
	at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2154)
	at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2044)
	... 13 more
Caused by: java.lang.IllegalArgumentException: Cannot get Elasticsearch version
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIO.getBackendVersion(ElasticsearchIO.java:1540)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIO$Write$WriteFn.setup(ElasticsearchIO.java:1330)
Caused by: org.elasticsearch.client.ResponseException: method [GET], host [http:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:44085], URI [/], status line [HTTP/1.1 503 Service Unavailable]
&lt;/span&gt;{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;beam&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;cluster_name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;beam&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;cluster_uuid&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;pPkgXGRCQqSYiAYeidGMFQ&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;version&quot;&lt;/span&gt; : {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;number&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2.4.1&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;build_hash&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;c67dc32e24162035d18d6fe1e952c4cbcbe79d16&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;build_timestamp&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-09-27T18:57:55Z&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;build_snapshot&quot;&lt;/span&gt; : &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;lucene_version&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;5.5.2&quot;&lt;/span&gt;
  },
  &lt;span class=&quot;code-quote&quot;&gt;&quot;tagline&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;You Know, &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Search&quot;&lt;/span&gt;
}

	at org.elasticsearch.client.RestClient.convertResponse(RestClient.java:302)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:272)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:246)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIO.getBackendVersion(ElasticsearchIO.java:1524)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIO$Write$WriteFn.setup(ElasticsearchIO.java:1330)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIO$Write$WriteFn$DoFnInvoker.invokeSetup(Unknown Source)
	at org.apache.beam.sdk.transforms.reflect.DoFnInvokers.tryInvokeSetupFor(DoFnInvokers.java:53)
	at org.apache.beam.runners.direct.DoFnLifecycleManager$DeserializingCacheLoader.load(DoFnLifecycleManager.java:107)
	at org.apache.beam.runners.direct.DoFnLifecycleManager$DeserializingCacheLoader.load(DoFnLifecycleManager.java:92)
	at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3528)
	at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2277)
	at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2154)
	at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2044)
	at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache.get(LocalCache.java:3952)
	at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3974)
	at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4958)
	at org.apache.beam.runners.direct.DoFnLifecycleManager.get(DoFnLifecycleManager.java:62)
	at org.apache.beam.runners.direct.ParDoEvaluatorFactory.createEvaluator(ParDoEvaluatorFactory.java:131)
	at org.apache.beam.runners.direct.ParDoEvaluatorFactory.forApplication(ParDoEvaluatorFactory.java:81)
	at org.apache.beam.runners.direct.TransformEvaluatorRegistry.forApplication(TransformEvaluatorRegistry.java:178)
	at org.apache.beam.runners.direct.DirectTransformExecutor.run(DirectTransformExecutor.java:122)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;
java.net.SocketTimeoutException: 120,000 milliseconds timeout on connection http-outgoing-0 [ACTIVE] at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:834) at org.elasticsearch.client.RestClient.performRequest(RestClient.java:259) at org.elasticsearch.client.RestClient.performRequest(RestClient.java:246) at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIOTestUtils.closeIndex(ElasticsearchIOTestUtils.java:66) at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIOTestUtils.deleteIndex(ElasticsearchIOTestUtils.java:71) at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIOTestUtils.deleteIndex(ElasticsearchIOTestUtils.java:61) at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIOTest.before(ElasticsearchIOTest.java:119) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56) at org.junit.internal.runners.statements.RunBefores.invokeMethod(RunBefores.java:33) at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24) at org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:258) at org.apache.beam.sdk.testing.TestPipeline$1.evaluate(TestPipeline.java:322) at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306) at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100) at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366) at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103) at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63) at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331) at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79) at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329) at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293) at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26) at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27) at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54) at org.junit.rules.RunRules.evaluate(RunRules.java:20) at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306) at org.junit.runners.ParentRunner.run(ParentRunner.java:413) at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:110) at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:58) at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:38) at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:62) at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) at com.sun.proxy.$Proxy2.processTestClass(Unknown Source) at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:119) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182) at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164) at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:414) at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64) at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56) at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748) Caused by: java.net.SocketTimeoutException: 120,000 milliseconds timeout on connection http-outgoing-0 [ACTIVE] at org.apache.http.nio.protocol.HttpAsyncRequestExecutor.timeout(HttpAsyncRequestExecutor.java:387) at org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:92) at org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:39) at org.apache.http.impl.nio.reactor.AbstractIODispatch.timeout(AbstractIODispatch.java:175) at org.apache.http.impl.nio.reactor.BaseIOReactor.sessionTimedOut(BaseIOReactor.java:261) at org.apache.http.impl.nio.reactor.AbstractIOReactor.timeoutCheck(AbstractIOReactor.java:502) at org.apache.http.impl.nio.reactor.BaseIOReactor.validate(BaseIOReactor.java:211) at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:280) at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104) at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.beam.sdk.Pipeline$PipelineExecutionException: java.io.IOException: Error writing to Elasticsearch, some elements could not be inserted:
	at org.apache.beam.runners.direct.DirectRunner$DirectPipelineResult.waitUntilFinish(DirectRunner.java:372)
	at org.apache.beam.runners.direct.DirectRunner$DirectPipelineResult.waitUntilFinish(DirectRunner.java:340)
	at org.apache.beam.runners.direct.DirectRunner.run(DirectRunner.java:218)
	at org.apache.beam.runners.direct.DirectRunner.run(DirectRunner.java:67)
	at org.apache.beam.sdk.Pipeline.run(Pipeline.java:323)
	at org.apache.beam.sdk.testing.TestPipeline.run(TestPipeline.java:398)
	at org.apache.beam.sdk.testing.TestPipeline.run(TestPipeline.java:334)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIOTestCommon.testWriteWithFullAddressing(ElasticsearchIOTestCommon.java:521)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIOTest.testWriteFullAddressing(ElasticsearchIOTest.java:195)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:258)
	at org.apache.beam.sdk.testing.TestPipeline$1.evaluate(TestPipeline.java:322)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:110)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:58)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:38)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:62)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:119)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:414)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
Caused by: java.io.IOException: Error writing to Elasticsearch, some elements could not be inserted:
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIO.checkForErrors(ElasticsearchIO.java:233)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIO$Write$WriteFn.flushBatch(ElasticsearchIO.java:1484)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIO$Write$WriteFn.finishBundle(ElasticsearchIO.java:1450)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.beam.sdk.Pipeline$PipelineExecutionException: java.io.IOException: Error writing to Elasticsearch, some elements could not be inserted:
Document id AXldB_RiIN49JHQZu-U8: [curie][3] primary shard is not active Timeout: [1m], request: [BulkShardRequest to [curie] containing [1] requests] (unavailable_shards_exception)
	at org.apache.beam.runners.direct.DirectRunner$DirectPipelineResult.waitUntilFinish(DirectRunner.java:372)
	at org.apache.beam.runners.direct.DirectRunner$DirectPipelineResult.waitUntilFinish(DirectRunner.java:340)
	at org.apache.beam.runners.direct.DirectRunner.run(DirectRunner.java:218)
	at org.apache.beam.runners.direct.DirectRunner.run(DirectRunner.java:67)
	at org.apache.beam.sdk.Pipeline.run(Pipeline.java:323)
	at org.apache.beam.sdk.testing.TestPipeline.run(TestPipeline.java:398)
	at org.apache.beam.sdk.testing.TestPipeline.run(TestPipeline.java:334)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIOTestCommon.testWriteWithIndexFn(ElasticsearchIOTestCommon.java:439)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIOTest.testWriteWithIndexFn(ElasticsearchIOTest.java:183)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:258)
	at org.apache.beam.sdk.testing.TestPipeline$1.evaluate(TestPipeline.java:322)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:110)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:58)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:38)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:62)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:119)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:414)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
Caused by: java.io.IOException: Error writing to Elasticsearch, some elements could not be inserted:
Document id AXldB_RiIN49JHQZu-U8: [curie][3] primary shard is not active Timeout: [1m], request: [BulkShardRequest to [curie] containing [1] requests] (unavailable_shards_exception)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIO.checkForErrors(ElasticsearchIO.java:233)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIO$Write$WriteFn.flushBatch(ElasticsearchIO.java:1484)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIO$Write$WriteFn.finishBundle(ElasticsearchIO.java:1450)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17358590" author="egalpin" created="Mon, 7 Jun 2021 13:21:28 +0000"  >&lt;p&gt;If this is indeed tied to server load, what recourse do we have? And I wonder why it would be that Elasticsearch shows more flakiness under load than other IO connectors?&lt;/p&gt;

&lt;p&gt;One option we have which may not be popular: write less to Elasticsearch. We can now separately test interfacing with ES (the actual IO) and creating valid request bodies. This won&apos;t catch classes of bugs where the API changes for example, but it would reduce the number of interactions with an ES cluster (dockerized or otherwise) and would allow for a large number of Write tests to happen in memory only. Thoughts?&lt;/p&gt;</comment>
                            <comment id="17359202" author="echauchot" created="Tue, 8 Jun 2021 09:42:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=egalpin&quot; class=&quot;user-hover&quot; rel=&quot;egalpin&quot;&gt;egalpin&lt;/a&gt;&#160;some IOs are less sensitive to load because not all the IOs use an embeded server and also because ES test framework is quite heavy and designed for integration tests, not unit tests.&lt;/p&gt;

&lt;p&gt;Right now, the UTest dataset contains 400 documents but it can be reduced as Integration tests are there to test write and read on larger datasets.&lt;/p&gt;

&lt;p&gt;Separation between serialization and write is good but still the write part can saturate the backend.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17359476" author="egalpin" created="Tue, 8 Jun 2021 17:05:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echauchot&quot; class=&quot;user-hover&quot; rel=&quot;echauchot&quot;&gt;echauchot&lt;/a&gt; were the errors you posted from a build which used the testContainers changes? Or the in Mem ES instances? Good idea to reduce number of docs as probably 100 would equally be able to give definitive answers about test results for Utests&lt;/p&gt;</comment>
                            <comment id="17360164" author="echauchot" created="Wed, 9 Jun 2021 15:42:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=egalpin&quot; class=&quot;user-hover&quot; rel=&quot;egalpin&quot;&gt;egalpin&lt;/a&gt;&#160;good question. I cannot be a hundred percent sure as both PR builds and regular builds are shown side by side in jenkins and I no more have the links nor the timestamp in logs. But I&apos;d guess without testContainers as these errors look like the ones we already had&lt;/p&gt;</comment>
                            <comment id="17361314" author="apilloud" created="Fri, 11 Jun 2021 00:55:54 +0000"  >&lt;p&gt;This is pretty aggressively affecting the 2.31.0 release branch:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/3701/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/3701/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/3702/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/3702/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Is this a release blocker?&lt;/p&gt;</comment>
                            <comment id="17361316" author="egalpin" created="Fri, 11 Jun 2021 01:00:37 +0000"  >&lt;p&gt;@Andrew I have a PR open&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; which attempts to alleviate the flakiness. Please have a look to review if you have bandwidth and if it is indeed a release blocker.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/beam/pull/14933&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/14933&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17378713" author="beamjirabot" created="Sun, 11 Jul 2021 17:20:23 +0000"  >&lt;p&gt;This issue is assigned but has not received an update in 30 days so it has been labeled &quot;stale-assigned&quot;. If you are still working on the issue, please give an update and remove the label. If you are no longer working on the issue, please unassign so someone else may work on it. In 7 days the issue will be automatically unassigned.&lt;/p&gt;</comment>
                            <comment id="17383471" author="beamjirabot" created="Mon, 19 Jul 2021 17:20:25 +0000"  >&lt;p&gt;This issue was marked &quot;stale-assigned&quot; and has not received a public comment in 7 days. It is now automatically unassigned. If you are still working on it, you can assign it to yourself again. Please also give an update about the status of the work.&lt;/p&gt;</comment>
                            <comment id="17409116" author="bhulette" created="Thu, 2 Sep 2021 20:47:41 +0000"  >&lt;p&gt;It looks like we&apos;re still seeing a lot of similar flakes in ElasticSearchIOTest per &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Cron/lastCompletedBuild/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/history/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Cron/lastCompletedBuild/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/history/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Most recently &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Cron/4452/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/testSizes/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Cron/4452/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/testSizes/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.AssertionError: Wrong estimated size
Expected: a value greater than &amp;lt;2500L&amp;gt;
     but: &amp;lt;162L&amp;gt; was less than &amp;lt;2500L&amp;gt;
	at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIOTestCommon.testSizes(ElasticsearchIOTestCommon.java:199)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIOTest.testSizes(ElasticsearchIOTest.java:91)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17409348" author="echauchot" created="Fri, 3 Sep 2021 07:42:53 +0000"  >&lt;p&gt;testSizes and testSplit seem to be flaky in ES5. I propose to sickbay them waiting for a resolution. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=egalpin&quot; class=&quot;user-hover&quot; rel=&quot;egalpin&quot;&gt;egalpin&lt;/a&gt;&#160;WDYT ?&lt;/p&gt;</comment>
                            <comment id="17409459" author="echauchot" created="Fri, 3 Sep 2021 11:36:40 +0000"  >&lt;p&gt;actually they are flaky in all ES versions, in my &lt;a href=&quot;https://github.com/apache/beam/pull/15267&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ongoing PR&lt;/a&gt; I have sickbayed this tests as requested by the reviewer but this ticket needs attention as it is dangerous to leave ignored tests for too long, so I raised the importance of the ticket.&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=egalpin&quot; class=&quot;user-hover&quot; rel=&quot;egalpin&quot;&gt;egalpin&lt;/a&gt;&#160;can you take a look at the flakes please ? I took the liberty to assign to you feel free to unassign yourself if not suited.&lt;/p&gt;</comment>
                            <comment id="17411466" author="egalpin" created="Tue, 7 Sep 2021 20:29:51 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echauchot&quot; class=&quot;user-hover&quot; rel=&quot;echauchot&quot;&gt;echauchot&lt;/a&gt; , I&apos;m going to have a look ASAP. I know this is high priority for the project and I&apos;ll try to balance that appropriately; that is to say, all help is appreciated &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17426839" author="beamjirabot" created="Sun, 10 Oct 2021 17:24:18 +0000"  >&lt;p&gt;This issue is assigned but has not received an update in 30 days so it has been labeled &quot;stale-assigned&quot;. If you are still working on the issue, please give an update and remove the label. If you are no longer working on the issue, please unassign so someone else may work on it. In 7 days the issue will be automatically unassigned.&lt;/p&gt;</comment>
                            <comment id="17429734" author="beamjirabot" created="Sun, 17 Oct 2021 17:24:24 +0000"  >&lt;p&gt;This issue was marked &quot;stale-assigned&quot; and has not received a public comment in 7 days. It is now automatically unassigned. If you are still working on it, you can assign it to yourself again. Please also give an update about the status of the work.&lt;/p&gt;</comment>
                            <comment id="17431031" author="echauchot" created="Wed, 20 Oct 2021 07:45:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/beam/commit/a05aa45dac5e7295a56634f0916b7019bc6782e5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;This&lt;/a&gt; commit should solve the issue. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=egalpin&quot; class=&quot;user-hover&quot; rel=&quot;egalpin&quot;&gt;egalpin&lt;/a&gt;&#160;can you monitor the ES UTests status for a week (just once within a week is enough) so that we know that the flake has disappeared and close the ticket ?&lt;/p&gt;</comment>
                            <comment id="17431435" author="egalpin" created="Wed, 20 Oct 2021 19:31:08 +0000"  >&lt;p&gt;Will do &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echauchot&quot; class=&quot;user-hover&quot; rel=&quot;echauchot&quot;&gt;echauchot&lt;/a&gt; ! &#128077;&lt;/p&gt;</comment>
                            <comment id="17433780" author="egalpin" created="Mon, 25 Oct 2021 14:05:19 +0000"  >&lt;p&gt;I checked quite a few PRs last week.&#160; I did see a single instance of a flake for ES tests here: &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Commit/19333/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Commit/19333/&lt;/a&gt;&#160; (&lt;a href=&quot;https://github.com/apache/beam/pull/15766)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/15766).&lt;/a&gt; A single instance is a vast improvement over the constant flakiness before, but I&apos;m not sure if that means we should leave this ticket open or if we can call it closed for now?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echauchot&quot; class=&quot;user-hover&quot; rel=&quot;echauchot&quot;&gt;echauchot&lt;/a&gt; Thoughts?&lt;/p&gt;</comment>
                            <comment id="17434054" author="tvalentyn" created="Tue, 26 Oct 2021 00:11:40 +0000"  >&lt;p&gt;Happened ~today on:  &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/4147/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/testReadWithQueryString/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/4147/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/testReadWithQueryString/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17434464" author="egalpin" created="Tue, 26 Oct 2021 16:49:36 +0000"  >&lt;p&gt;I think it&apos;s safe to say that some read tests are still flaky, even though they&apos;re improved. I don&apos;t currently have bandwidth to dive in deeper into RCA or alternative approaches.&#160; Should we re-mark the flaky tests in the suite as `Skip`, or is the current level of flakiness &quot;acceptable&quot;?&lt;/p&gt;</comment>
                            <comment id="17434485" author="tvalentyn" created="Tue, 26 Oct 2021 17:38:35 +0000"  >&lt;p&gt;Happened again for me on the same PR: &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/4189/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/4189/&lt;/a&gt;&lt;br/&gt;
Seems that&apos;s it&apos;s still quite flaky, I&apos;d prefer to have it disabled or be in a separate suite, or auto-rerun X times... The latter could be acceptable if there is known cause of inherent flakiness that is too difficult to address. But by looking at the error and this issue discussion, it&apos;s not clear whether it&apos;s a test setup issue or an actual ES IO issue that would be dangerous to sweep under the rug.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Error Message
java.lang.AssertionError: Wrong estimated size
Expected: a value greater than &amp;lt;1000L&amp;gt;
     but: &amp;lt;208L&amp;gt; was less than &amp;lt;1000L&amp;gt;
Stacktrace
java.lang.AssertionError: Wrong estimated size
Expected: a value greater than &amp;lt;1000L&amp;gt;
     but: &amp;lt;208L&amp;gt; was less than &amp;lt;1000L&amp;gt;
	at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIOTestCommon.testSizes(ElasticsearchIOTestCommon.java:213)
	at org.apache.beam.sdk.io.elasticsearch.ElasticsearchIOTest.testSizes(ElasticsearchIOTest.ja
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="17435498" author="echauchot" created="Thu, 28 Oct 2021 15:32:58 +0000"  >&lt;p&gt;Took a look at the 3 flakiness:&lt;/p&gt;

&lt;p&gt;1. &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Commit/19333/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/testSplit/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Commit/19333/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/testSplit/&lt;/a&gt;&#160;: root cause is that there is no splits on ES6. The only possible cause is estimated index size is &amp;lt;&#160;desiredBundleSizeBytes (2000 in the test)&lt;/p&gt;

&lt;p&gt;2. &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/4189/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/testSizes/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/4147/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/testReadWithQueryString/&#160;&lt;/a&gt;once again the guilty one is the index size estimation estimation is 209 whereas average size is 25 and 40 docs.&#160;&lt;/p&gt;

&lt;p&gt;=&amp;gt; I recall size estimation is statistical in ES and might vary over time hence the error margin included in the tests. I think we should give the tests more margin but also fix size estimation. I opened this ticket&#160;for that. I also opened a cleaning ticket while reviewing the split code.&lt;/p&gt;

&lt;p&gt;3. &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/4147/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/testReadWithQueryString/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/4147/testReport/junit/org.apache.beam.sdk.io.elasticsearch/ElasticsearchIOTest/testReadWithQueryString/&#160;&lt;/a&gt;this one worries me more: if there is no scientist matching Einstein out of 40 docs inserted (with 10 different scientists) it is either that the insert was not done or indexed (too much load and docs not yet inserted or not enough wait before indexing time) or the match query was not properly passed by the queryconfigurer in the unit test.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=egalpin&quot; class=&quot;user-hover&quot; rel=&quot;egalpin&quot;&gt;egalpin&lt;/a&gt; can you take a look with this hints in mind ?&lt;/p&gt;</comment>
                            <comment id="17437364" author="egalpin" created="Tue, 2 Nov 2021 13:40:17 +0000"  >&lt;p&gt;I apologize for the timing but I&apos;m swamped right now and can&apos;t guarantee dedicated time to investigate for the next few weeks likely. I did quickly look at the test which you mentioned was more concerning, and it appears to be flaky on the ES side rather than the Beam IO (2 of the 3 supported ES version suites passed the test, while the other failed).&#160; We likely need to double check that we&apos;re waiting for the cluster to be green and indexes refreshed synchronously before making the query.&lt;/p&gt;

&lt;p&gt;Given my lack of bandwidth for the next few weeks, should I mark these tests to be skipped? Maybe we could create an additional suite of known flaky tests to manually trigger on any ES specific PRs for the time being?&lt;/p&gt;</comment>
                            <comment id="17438613" author="echauchot" created="Thu, 4 Nov 2021 10:17:00 +0000"  >&lt;p&gt;No worries for the lack of bandwidth. And no hurry about fixing. This tests suite has been flaky for months so I guess it is fine considering the flakiness frequency has dropped. So I would rather leave it as it is as a reminder about fixing (but no hurry) rather than ignoring and possibly forgetting about it.&#160;&lt;/p&gt;</comment>
                            <comment id="17440755" author="ibzib" created="Mon, 8 Nov 2021 21:36:29 +0000"  >&lt;p&gt;I strongly prefer to sickbay these tests, at least in Java precommit. IMO this level of flakiness is unacceptable for a global precommit that runs on so many unrelated PRs.&lt;/p&gt;

&lt;p&gt;If we don&apos;t want to &quot;sweep under the rug,&quot; we can move the sickbayed tests into a separate postcommit/cron job, and continue to monitor and improve it before moving it back into precommit.&lt;/p&gt;</comment>
                            <comment id="17441170" author="echauchot" created="Tue, 9 Nov 2021 13:37:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ibzib&quot; class=&quot;user-hover&quot; rel=&quot;ibzib&quot;&gt;ibzib&lt;/a&gt; ok fair enough&lt;/p&gt;</comment>
                            <comment id="17473740" author="kenn" created="Wed, 12 Jan 2022 03:50:03 +0000"  >&lt;p&gt;This Jira ticket has a pull request attached to it, but is still open. Did the pull request resolve the issue? If so, could you please mark it resolved? This will help the project have a clear view of its open issues.&lt;/p&gt;</comment>
                            <comment id="17474503" author="echauchot" created="Wed, 12 Jan 2022 13:01:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kenn&quot; class=&quot;user-hover&quot; rel=&quot;kenn&quot;&gt;kenn&lt;/a&gt; ongoing related tests&lt;/p&gt;</comment>
                            <comment id="17475513" author="egalpin" created="Thu, 13 Jan 2022 16:22:51 +0000"  >&lt;p&gt;Latest related PR: &#160;&lt;a href=&quot;https://github.com/apache/beam/pull/16507&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/16507&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17482528" author="egalpin" created="Wed, 26 Jan 2022 14:47:35 +0000"  >&lt;p&gt;Update: since merging &lt;a href=&quot;https://github.com/apache/beam/pull/16507&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/16507&lt;/a&gt; (related to &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-13137&quot; title=&quot;make ElasticsearchIO$BoundedElasticsearchSource#getEstimatedSizeBytes deterministic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-13137&quot;&gt;&lt;del&gt;BEAM-13137&lt;/del&gt;&lt;/a&gt;), there has not been a flaky failure from the ESIO unit tests in over a week.  I&apos;m inclined to close this ticket as well, marking the same fix version as &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-13137&quot; title=&quot;make ElasticsearchIO$BoundedElasticsearchSource#getEstimatedSizeBytes deterministic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-13137&quot;&gt;&lt;del&gt;BEAM-13137&lt;/del&gt;&lt;/a&gt; (2.37.0).  &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kenn&quot; class=&quot;user-hover&quot; rel=&quot;kenn&quot;&gt;kenn&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echauchot&quot; class=&quot;user-hover&quot; rel=&quot;echauchot&quot;&gt;echauchot&lt;/a&gt; Any opposition?&lt;/p&gt;</comment>
                            <comment id="17482535" author="echauchot" created="Wed, 26 Jan 2022 14:58:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=egalpin&quot; class=&quot;user-hover&quot; rel=&quot;egalpin&quot;&gt;egalpin&lt;/a&gt; I agree, closing this ticket.&lt;/p&gt;</comment>
                            <comment id="17482682" author="bhulette" created="Wed, 26 Jan 2022 18:55:43 +0000"  >&lt;p&gt;This is great, thank you both!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13399335">BEAM-12841</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13408874">BEAM-13137</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13380948">BEAM-12421</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3x7bb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>