<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:49:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-3817] Incompatible input encoding running Tornadoes example on dataflow</title>
                <link>https://issues.apache.org/jira/browse/BEAM-3817</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Trying to run:&lt;/p&gt;

&lt;p&gt;go run tornadoes.go --output=&amp;lt;redacted&amp;gt;:bbass.tornadoes --project &amp;lt;redacted&amp;gt; --runner dataflow --staging_location=gs://bbass/tornadoes --worker_harness_container_image=gcr.io/&amp;lt;redacted&amp;gt;/beam/go&lt;/p&gt;

&lt;p&gt;Found here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/beam/blob/master/sdks/go/examples/cookbook/tornadoes/tornadoes.go&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/blob/master/sdks/go/examples/cookbook/tornadoes/tornadoes.go&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I can run it locally but I get the error on Dataflow:&lt;/p&gt;

&lt;p&gt;(8fa522c2bb03a769): Workflow failed. Causes: (8fa522c2bb03ab04): Incompatible input encoding.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I built the&#160;worker_harness_container_image using:&lt;/p&gt;

&lt;p&gt;mvn clean install -DskipTests -Pbuild-containers -Ddocker-repository-root=gcr.io/&amp;lt;redacted&amp;gt;/beam&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Very excited to start using the golang beam sdk!&#160;great work!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13143766">BEAM-3817</key>
            <summary>Incompatible input encoding running Tornadoes example on dataflow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="herohde">Henning Rohde</assignee>
                                    <reporter username="bbassingthwaite">Braden Bassingthwaite</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Mar 2018 02:26:40 +0000</created>
                <updated>Sat, 16 May 2020 13:58:31 +0000</updated>
                            <resolved>Tue, 20 Mar 2018 22:18:55 +0000</resolved>
                                                    <fixVersion>2.5.0</fixVersion>
                                    <component>sdk-go</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="5400">1.5h</timespent>
                                <comments>
                            <comment id="16393241" author="herohde" created="Fri, 9 Mar 2018 17:35:57 +0000"  >&lt;p&gt;Thanks for giving the Go SDK a spin!&lt;/p&gt;

&lt;p&gt;This example doesn&apos;t work on Dataflow yet, because the BQ writer uses side input (&lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-3286&quot; title=&quot;Go SDK support for portable side input&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-3286&quot;&gt;&lt;del&gt;BEAM-3286&lt;/del&gt;&lt;/a&gt;). The error message is unfortunately super-unhelpful. That said, the BQ writer doesn&apos;t really need to and I can change it similarly to textio (&lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-3579&quot; title=&quot;Go textio.Write does not work on non-direct runners&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-3579&quot;&gt;&lt;del&gt;BEAM-3579&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="16393295" author="herohde" created="Fri, 9 Mar 2018 18:03:44 +0000"  >&lt;p&gt;Sent a PR. Verified that it now works on Dataflow.&lt;/p&gt;</comment>
                            <comment id="16393475" author="bbassingthwaite" created="Fri, 9 Mar 2018 20:09:53 +0000"  >&lt;p&gt;Ah okay, a better error would be very useful.&#160; Thank you for the very quick fix!&lt;/p&gt;</comment>
                            <comment id="16393630" author="bbassingthwaite" created="Fri, 9 Mar 2018 21:39:36 +0000"  >&lt;p&gt;With your changes, I now see:&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
&#160;2018-03-09 (14:27:35) Job 2018-03-09_12_27_35-10713097759675171289 might autoscale up to 30 workers.&lt;br/&gt;
&#160;&#160;2018-03-09 (14:27:38) Executing operation CountTornadoes/stats.Count/stats.SumPerKey/group/Create&lt;br/&gt;
&#160;&#160;&#160;2018-03-09 (14:27:38) Starting 1 workers in us-central1-f...&lt;br/&gt;
&#160;&#160;2018-03-09 (14:27:38) Executing operation bigquery.Read/bigqueryio.queryFn+CountTornadoes/main.extractFn+CountTornadoes/st...&lt;br/&gt;
&#160;&#160;2018-03-09 (15:27:38) Workflow failed. Causes: (b1e90c830a04bd8c): The Dataflow appears to be stuck. You can get help with...&lt;br/&gt;
(b1e90c830a04b843): Workflow failed. Causes: (b1e90c830a04bd8c): The Dataflow appears to be stuck. You can get help with Cloud Dataflow at &lt;a href=&quot;https://cloud.google.com/dataflow/support&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cloud.google.com/dataflow/support&lt;/a&gt;.&#160;&lt;br/&gt;
&#160;&#160;&#160;2018-03-09 (15:27:38) Cancel request is committed for workflow job: 2018-03-09_12_27_35-10713097759675171289.&lt;br/&gt;
&#160;&lt;br/&gt;
&#160;&#160;2018-03-09 (15:27:39) Stopping worker pool...&lt;/p&gt;</comment>
                            <comment id="16393856" author="herohde" created="Sat, 10 Mar 2018 00:20:23 +0000"  >&lt;p&gt;I took a look and the job uses the wrong container image: &quot;gcr.io/&amp;lt;redacted&amp;gt;/beam/gcemd&quot;, not the &quot;gcr.io/&amp;lt;redacted&amp;gt;/beam/go&quot; image. The stackdriver logs show that is fails to start up, because it expects different arguments.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 36 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3r2y7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>