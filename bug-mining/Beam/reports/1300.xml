<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:00:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-4775] JobService should support returning metrics</title>
                <link>https://issues.apache.org/jira/browse/BEAM-4775</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Design doc: &lt;a href=&quot;https://s.apache.org/get-metrics-api&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s.apache.org/get-metrics-api&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Further discussion is ongoing on &lt;a href=&quot;https://docs.google.com/document/d/1m83TsFvJbOlcLfXVXprQm1B7vUakhbLZMzuRrOHWnTg/edit?ts=5c826bb4#heading=h.faqan9rjc6dm&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this doc&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;We want to report job metrics back to the portability harness from the runner harness, for&#160;displaying to users.&lt;/p&gt;
&lt;h1&gt;&lt;a name=&quot;RelevantPRsinflight%3A&quot;&gt;&lt;/a&gt;Relevant PRs in flight:&lt;/h1&gt;
&lt;h2&gt;&lt;a name=&quot;ReadyforReview%3A&quot;&gt;&lt;/a&gt;Ready for Review:&lt;/h2&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/beam/pull/8022&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#8022&lt;/a&gt;: correct the Job RPC protos from &lt;a href=&quot;https://github.com/apache/beam/pull/8018&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#8018&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;&lt;a name=&quot;Iterating%2FDiscussing%3A&quot;&gt;&lt;/a&gt;Iterating / Discussing:&lt;/h2&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/beam/pull/7971&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#7971&lt;/a&gt;:&#160;Flink portable metrics: get ptransform from MonitoringInfo, not stage name
	&lt;ul&gt;
		&lt;li&gt;this is a simpler, Flink-specific PR that is basically duplicated inside each of the following two, so may be worth trying to merge in first&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;#&lt;a href=&quot;https://github.com/apache/beam/pull/7915&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;7915&lt;/a&gt;: use MonitoringInfo data model in Java SDK metrics&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/beam/pull/7868&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#7868&lt;/a&gt;: MonitoringInfo URN tweaks&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;&lt;a name=&quot;Merged&quot;&gt;&lt;/a&gt;Merged&lt;/h2&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/beam/pull/8018&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#8018&lt;/a&gt;: add job metrics RPC protos&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/beam/pull/7867&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#7867&lt;/a&gt;:&#160;key MetricResult by a MetricKey&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/beam/pull/7938&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#7938&lt;/a&gt;:&#160;move MonitoringInfo protos to model/pipeline module&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/beam/pull/7883&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#7883&lt;/a&gt;: Add MetricQueryResults.allMetrics() helper&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/beam/pull/7866&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#7866&lt;/a&gt;: move function helpers from fn-harness to sdks/java/core&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/beam/pull/7890&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#7890&lt;/a&gt;: consolidate MetricResult implementations&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;&lt;a name=&quot;Closed&quot;&gt;&lt;/a&gt;Closed&lt;/h2&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/beam/pull/7934&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#7934&lt;/a&gt;: job metrics RPC + SDK support&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/beam/pull/7876&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#7876&lt;/a&gt;: Clean up metric protos; support integer distributions, gauges&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13171834">BEAM-4775</key>
            <summary>JobService should support returning metrics</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="&#321;ukaszG">Lukasz Gajowy</assignee>
                                    <reporter username="jkff">Eugene Kirpichov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Jul 2018 21:46:19 +0000</created>
                <updated>Sat, 16 May 2020 14:12:10 +0000</updated>
                            <resolved>Mon, 18 Nov 2019 22:15:34 +0000</resolved>
                                                    <fixVersion>Not applicable</fixVersion>
                                    <component>beam-model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="199200">55h 20m</timespent>
                                <comments>
                            <comment id="16773652" author="rdub" created="Thu, 21 Feb 2019 05:00:00 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=robertwb&quot; class=&quot;user-hover&quot; rel=&quot;robertwb&quot;&gt;robertwb&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ajamato%40google.com&quot; class=&quot;user-hover&quot; rel=&quot;ajamato@google.com&quot;&gt;ajamato@google.com&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ardagan&quot; class=&quot;user-hover&quot; rel=&quot;Ardagan&quot;&gt;Ardagan&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve moved the state of this work here from &lt;a href=&quot;https://github.com/apache/beam/pull/7823&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#7823&lt;/a&gt;, and will keep it up to date.&lt;/p&gt;</comment>
                            <comment id="16851934" author="&#322;ukaszg" created="Thu, 30 May 2019 14:33:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rdub&quot; class=&quot;user-hover&quot; rel=&quot;rdub&quot;&gt;rdub&lt;/a&gt; I think I was able to successfully avoid converting from/to MonitoringInfos and return a collection of MonitoringInfos all the way to&#160;JobServicePipelineResult&#160;so that it could be converted to MetricsResults only once. It&apos;s a work in progress and it can be seen here:&#160;&lt;a href=&quot;https://github.com/lgajowy/beam/commit/228e4a0e7a6231416ce3d467e7d821aefd3ff93a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/lgajowy/beam/commit/228e4a0e7a6231416ce3d467e7d821aefd3ff93a&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If you&apos;re not working on this anymore I&#160;will assign this issue to me. If you&#160;are still working on this - I&apos;m happy to communicate! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16851940" author="rdub" created="Thu, 30 May 2019 14:37:54 +0000"  >&lt;p&gt;Sounds great &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=%C5%81ukaszG&quot; class=&quot;user-hover&quot; rel=&quot;&#321;ukaszG&quot;&gt;&#321;ukaszG&lt;/a&gt;, it&apos;s all yours, thanks!&lt;/p&gt;</comment>
                            <comment id="16872698" author="ibzib" created="Tue, 25 Jun 2019 20:42:11 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=%C5%81ukaszG&quot; class=&quot;user-hover&quot; rel=&quot;&#321;ukaszG&quot;&gt;&#321;ukaszG&lt;/a&gt;, just checking in &#8211; have you been able to make further progress on this? Any blockers?&lt;/p&gt;</comment>
                            <comment id="16872705" author="&#322;ukaszg" created="Tue, 25 Jun 2019 20:55:36 +0000"  >&lt;p&gt;I&apos;m glad that you asked. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;I got drawn away by other things but before that I was able to pass MonitoringInfos to PortableRunner successfuly (as described in the comment above). So at least that part should be contributed IMO (not converting to MetricsResults yet). I should have a PR for this in a week or two.&lt;/p&gt;</comment>
                            <comment id="16881424" author="&#322;ukaszg" created="Tue, 9 Jul 2019 17:30:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ibzib&quot; class=&quot;user-hover&quot; rel=&quot;ibzib&quot;&gt;ibzib&lt;/a&gt; FYI: I created a draft PR* for this:&#160;&lt;a href=&quot;https://github.com/apache/beam/pull/9020&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/9020&lt;/a&gt;&#160;. I&apos;m still fighting some problems and testing it but decided to share in case I&apos;m going the wrong direction.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;*&#160;&lt;a href=&quot;https://github.blog/2019-02-14-introducing-draft-pull-requests/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.blog/2019-02-14-introducing-draft-pull-requests/&lt;/a&gt;&#160;- cool feature btw. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16976940" author="&#322;ukaszg" created="Mon, 18 Nov 2019 22:15:34 +0000"  >&lt;p&gt;the JobServer part is done - all kinds of MonitroingInfos are forwarded through grpc to PortableRunners (sdk side). The PortableRunners can decide how to digest them (e.g. create MetricsResult from monitoring infos where possible).&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="13061232">BEAM-1866</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="13171837">BEAM-4776</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vubz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>