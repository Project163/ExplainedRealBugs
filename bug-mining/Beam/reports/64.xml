<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:40:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-630] DataflowRunnableOnService test suite is broken</title>
                <link>https://issues.apache.org/jira/browse/BEAM-630</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Looks like it&apos;s related to problems with the new DoFnSignatures/Invoker: &lt;a href=&quot;https://builds.apache.org/job/beam_PostCommit_RunnableOnService_GoogleCloudDataflow/1134/#showFailuresLink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PostCommit_RunnableOnService_GoogleCloudDataflow/1134/#showFailuresLink&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13004691">BEAM-630</key>
            <summary>DataflowRunnableOnService test suite is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jkff">Eugene Kirpichov</assignee>
                                    <reporter username="dhalperi">Dan Halperin</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Sep 2016 19:06:37 +0000</created>
                <updated>Sat, 16 May 2020 13:35:36 +0000</updated>
                            <resolved>Wed, 14 Sep 2016 01:07:09 +0000</resolved>
                                    <version>Not applicable</version>
                                    <fixVersion>Not applicable</fixVersion>
                                    <component>runner-dataflow</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15488356" author="jkff" created="Tue, 13 Sep 2016 20:41:30 +0000"  >&lt;p&gt;Some investigation:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The issue can be narrowed down to &quot;-DforkCount=0&quot; - &quot;mvn clean test -DforkCount=0&quot; fails in this way, but a simple &quot;mvn clean test&quot; passes.&lt;/li&gt;
	&lt;li&gt;The class files generated with and without this option are identical.&lt;/li&gt;
	&lt;li&gt;On my machine, system properties with and without this option are nearly identical: the differing properties are classworlds.conf, java.class.path, magen.home, maven.multiModuleProjectDirectory, securerandom.source, sun.java.command. The JVM version et al. are the same. I don&apos;t see how any of these properties could affect whether or not the class verifies.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15488397" author="jkff" created="Tue, 13 Sep 2016 20:55:32 +0000"  >&lt;p&gt;Wonderful. This seems like a bug in ByteBuddy - it legitimately produces a broken class file (the class name that the JVM complains is illegal by that link, &quot;Lorg/apache/beam/sdk/transforms/DoFn$ProcessContext;&quot;, is actually illegal cause it contains a semicolon - see &lt;a href=&quot;https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.2.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.2.1&lt;/a&gt;, &lt;a href=&quot;https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.2.2&lt;/a&gt;), but in some cases JVM skips verifying it. With -DforkCount=0 it doesn&apos;t, for some reason I don&apos;t quite understand yet (and it probably doesn&apos;t matter), but with -XX:+BytecodeVerificationLocal it fails even when run as a test method from IDEA.&lt;/p&gt;

&lt;p&gt;Don&apos;t ask how I found out (hint: I found out by reading JVM source code).&lt;/p&gt;

&lt;p&gt;To answer the implicit question &quot;why does anything work&quot;. Seems like ByteBuddy generated a constant pool entry of type &quot;class&quot; containing this invalid class name, but the entry is not used in the rest of the code. So it fails verification, but doesn&apos;t cause anything to break at runtime. Weird.&lt;/p&gt;</comment>
                            <comment id="15488439" author="jkff" created="Tue, 13 Sep 2016 21:13:29 +0000"  >&lt;p&gt;WELL, ACTUALLY it might be our bug. Almost narrowed down.&lt;/p&gt;</comment>
                            <comment id="15488470" author="githubbot" created="Tue, 13 Sep 2016 21:21:47 +0000"  >&lt;p&gt;GitHub user jkff opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/953&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/953&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-630&quot; title=&quot;DataflowRunnableOnService test suite is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-630&quot;&gt;&lt;del&gt;BEAM-630&lt;/del&gt;&lt;/a&gt; Fixes wrong type name in generated code&lt;/p&gt;

&lt;p&gt;    See &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-630&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BEAM-630&lt;/a&gt; for details. We generated the wrong local variable type (with a semicolon - &quot;descriptor&quot; - rather than without a semicolon - &quot;internal name&quot;). It only failed when JVM was using sufficiently strict settings when verifying the bytecode.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jkff/incubator-beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jkff/incubator-beam&lt;/a&gt; fix-invokers&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/953.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/953.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #953&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2f825177c59add53fa259325c2fe17981a707ba1&lt;br/&gt;
Author: Eugene Kirpichov &amp;lt;kirpichov@google.com&amp;gt;&lt;br/&gt;
Date:   2016-09-13T21:19:29Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-630&quot; title=&quot;DataflowRunnableOnService test suite is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-630&quot;&gt;&lt;del&gt;BEAM-630&lt;/del&gt;&lt;/a&gt; Fixes wrong type name in generated code&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15488494" author="githubbot" created="Tue, 13 Sep 2016 21:31:29 +0000"  >&lt;p&gt;GitHub user jkff opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/954&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/954&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Enables BytecodeVerificationLocal on travis&lt;/p&gt;

&lt;p&gt;    This is to achieve stricter verification of bytecode,&lt;br/&gt;
    mainly bytecode generated by DoFnInvokers dynamically.&lt;/p&gt;

&lt;p&gt;    See &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-630&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BEAM-630&lt;/a&gt; for&lt;br/&gt;
    an example situation that could have been caught earlier&lt;br/&gt;
    with this change.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jkff/incubator-beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jkff/incubator-beam&lt;/a&gt; bytecode-verify&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/954.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/954.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #954&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;</comment>
                            <comment id="15488859" author="githubbot" created="Tue, 13 Sep 2016 23:53:36 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/953&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/953&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15488969" author="jkff" created="Wed, 14 Sep 2016 00:51:05 +0000"  >&lt;p&gt;Hmm, looks like I don&apos;t have the rights to close this issue. Dan, can you either close it or grant me the rights? or am I missing something?&lt;/p&gt;</comment>
                            <comment id="15491053" author="githubbot" created="Wed, 14 Sep 2016 17:53:01 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/954&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/954&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33l3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>