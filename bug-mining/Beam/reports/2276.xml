<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:15:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-11837] Java build flakes: &quot;Memory constraints are impeding performance&quot;</title>
                <link>https://issues.apache.org/jira/browse/BEAM-11837</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Java Wordcount Direct Runner (ubuntu-latest) failed a couple times on me with the following warning/error. It doesn&apos;t seem like &quot;impeding performance&quot; should cause the build to fail altogether, so I&apos;m wondering if there&apos;s some way we can silence this warning.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;gt; Task :sdks:java:extensions:protobuf:compileJava
warning: Memory constraints are impeding performance; please increase max heap size.

...
&amp;gt; Task :sdks:java:extensions:protobuf:compileJava
error: warnings found and -Werror specified
Note: Some input files use or override a deprecated API.
Note: Recompile with -Xlint:deprecation &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.
Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.
1 error
1 warning

&amp;gt; Task :sdks:java:extensions:protobuf:compileJava FAILED
&amp;gt; Task :runners:core-construction-java:compileJava
Note: Some input files use or override a deprecated API.
Note: Recompile with -Xlint:deprecation &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.
Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; task &lt;span class=&quot;code-quote&quot;&gt;&apos;:sdks:java:extensions:protobuf:compileJava&apos;&lt;/span&gt;.
&amp;gt; Compilation failed; see the compiler error output &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13359466">BEAM-11837</key>
            <summary>Java build flakes: &quot;Memory constraints are impeding performance&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10101" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">P1</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ibzib">Kyle Weaver</reporter>
                        <labels>
                            <label>flake</label>
                    </labels>
                <created>Thu, 18 Feb 2021 22:37:45 +0000</created>
                <updated>Sat, 4 Jun 2022 19:50:19 +0000</updated>
                                                            <fixVersion>Not applicable</fixVersion>
                                    <component>test-failures</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="8400">2h 20m</timespent>
                                <comments>
                            <comment id="17299919" author="ibzib" created="Thu, 11 Mar 2021 22:52:28 +0000"  >&lt;p&gt;Looks like these warnings are coming from the checker framework: &lt;a href=&quot;https://github.com/typetools/checker-framework/blob/3a77a2d10760a6e13486603e35d5d27b22747291/framework/src/main/java/org/checkerframework/framework/source/SourceChecker.java#L945&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/typetools/checker-framework/blob/3a77a2d10760a6e13486603e35d5d27b22747291/framework/src/main/java/org/checkerframework/framework/source/SourceChecker.java#L945&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Probably caused by the nullness checks, which are known to be expensive.&lt;/p&gt;</comment>
                            <comment id="17300577" author="ibzib" created="Fri, 12 Mar 2021 19:46:41 +0000"  >&lt;p&gt;This has started to fail my local builds as well.&lt;/p&gt;</comment>
                            <comment id="17300678" author="ibzib" created="Sat, 13 Mar 2021 01:46:56 +0000"  >&lt;p&gt;As discussed on the mailing list, I propose turning off null checks by default. We can make them a separate precommit check, similar to Spotless.&lt;/p&gt;</comment>
                            <comment id="17300712" author="kenn" created="Sat, 13 Mar 2021 03:57:38 +0000"  >&lt;p&gt;SGTM. We probably could also increase the max heap size, gaining performance and getting past the warning. Is the build on Github Actions just not passing the JVM options needed perhaps?&lt;/p&gt;</comment>
                            <comment id="17307470" author="ibzib" created="Wed, 24 Mar 2021 00:01:19 +0000"  >&lt;p&gt;This should be fixed now, since the checker framework will only run by default on Jenkins, which doesn&apos;t seem to have &quot;memory constraints&quot; issues with it. &lt;/p&gt;</comment>
                            <comment id="17335677" author="kenn" created="Thu, 29 Apr 2021 16:54:03 +0000"  >&lt;p&gt;Well, we are seeing it in some Jenkins jobs too. Ideally those would have the biggest JVM we can get away with.&lt;/p&gt;</comment>
                            <comment id="17340467" author="altay" created="Thu, 6 May 2021 22:39:10 +0000"  >&lt;p&gt;If this is still happening, who could look into this?&lt;/p&gt;</comment>
                            <comment id="17340480" author="kenn" created="Thu, 6 May 2021 23:33:12 +0000"  >&lt;p&gt;This is a decent infra starter task - to figure out the plumbing of JVM startup args to the Jenkins builders. I have not seen it recently, though, so I think it can be closed.&lt;/p&gt;</comment>
                            <comment id="17396297" author="ibzib" created="Mon, 9 Aug 2021 21:53:08 +0000"  >&lt;p&gt;This happened again:&#160;&lt;br/&gt;
&lt;b&gt;15:37:17&lt;/b&gt; &amp;gt;&lt;br/&gt;
 &lt;b&gt;Task :examples:java:twitter:compileJava&lt;/b&gt;&lt;br/&gt;
&lt;b&gt;15:37:17&lt;/b&gt; warning: Memory constraints are impeding performance; please increase max heap size.&lt;b&gt;15:37:19&lt;/b&gt; error: warnings found and -Werror specified*15:37:19* warning: Memory constraints are impeding performance; please increase max heap size.&lt;/p&gt;</comment>
                            <comment id="17396313" author="ibzib" created="Mon, 9 Aug 2021 23:09:07 +0000"  >&lt;p&gt;Happened a second time when I reran, this time on task&#160;:sdks:java:extensions:kryo:compileJava. Reopening&lt;/p&gt;</comment>
                            <comment id="17429071" author="tvalentyn" created="Fri, 15 Oct 2021 00:58:03 +0000"  >&lt;p&gt;Happened again on &apos;:sdks:java:testing:test-utils:compileJava&apos;.&lt;/p&gt;

&lt;p&gt;Memory constraints are impeding performance; please increase max heap size.	&lt;/p&gt;</comment>
                            <comment id="17430234" author="kenn" created="Mon, 18 Oct 2021 21:36:36 +0000"  >&lt;p&gt;Are we pushing max heap size limits? If not, let&apos;s just follow the instructions.&lt;/p&gt;</comment>
                            <comment id="17473542" author="kenn" created="Wed, 12 Jan 2022 03:49:39 +0000"  >&lt;p&gt;This Jira ticket has a pull request attached to it, but is still open. Did the pull request resolve the issue? If so, could you please mark it resolved? This will help the project have a clear view of its open issues.&lt;/p&gt;</comment>
                            <comment id="17526066" author="JIRAUSER286259" created="Thu, 21 Apr 2022 20:32:51 +0000"  >&lt;p&gt;Encountered this in &lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_PVR_Flink_Docker_Commit/862/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Java_PVR_Flink_Docker PreCommit&lt;/a&gt; check.&lt;/p&gt;</comment>
                            <comment id="17528766" author="kenn" created="Wed, 27 Apr 2022 12:46:48 +0000"  >&lt;p&gt;Can you try increasing the max JVM heap, or is it already the max the worker VM can handle?&lt;/p&gt;</comment>
                            <comment id="17549212" author="JIRAUSER282469" created="Sat, 4 Jun 2022 19:50:19 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/apache/beam/issues/20819&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/issues/20819&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ntm8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>