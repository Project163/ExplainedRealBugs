<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:10:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-10300] Test failure: JdbcIOTest.testCustomFluentBackOffConfiguration</title>
                <link>https://issues.apache.org/jira/browse/BEAM-10300</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/2339/testReport/junit/org.apache.beam.sdk.io.jdbc/JdbcIOTest/testCustomFluentBackOffConfiguration/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/2339/testReport/junit/org.apache.beam.sdk.io.jdbc/JdbcIOTest/testCustomFluentBackOffConfiguration/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.sql.SQLTransactionRollbackException: A lock could not be obtained within the time requested
	at org.apache.derby.client.am.SQLExceptionFactory.getSQLException(Unknown Source)
	at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)
	at org.apache.derby.client.am.ClientStatement.executeQuery(Unknown Source)
	at org.apache.beam.sdk.io.jdbc.JdbcIOTest.assertRowCount(JdbcIOTest.java:490)
	at org.apache.beam.sdk.io.jdbc.JdbcIOTest.testCustomFluentBackOffConfiguration(JdbcIOTest.java:1033)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13312887">BEAM-10300</key>
            <summary>Test failure: JdbcIOTest.testCustomFluentBackOffConfiguration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10101" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">P1</priority>
                        <status id="10722" iconUrl="https://issues.apache.org/jira/images/icons/statuses/generic.png" description="">Triage Needed</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bhulette">Brian Hulette</assignee>
                                    <reporter username="kenn">Kenneth Knowles</reporter>
                        <labels>
                            <label>flake</label>
                    </labels>
                <created>Mon, 22 Jun 2020 18:17:37 +0000</created>
                <updated>Thu, 28 Nov 2024 10:36:48 +0000</updated>
                            <resolved>Tue, 22 Dec 2020 17:15:50 +0000</resolved>
                                                    <fixVersion>Not applicable</fixVersion>
                                    <component>io-java-jdbc</component>
                    <component>test-failures</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="17153876" author="kenn" created="Wed, 8 Jul 2020 19:30:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/2445/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/2445/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17174401" author="bhulette" created="Mon, 10 Aug 2020 15:48:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/2592&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PreCommit_Java_Phrase/2592&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17174402" author="bhulette" created="Mon, 10 Aug 2020 15:49:41 +0000"  >&lt;p&gt;From duplicate &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-10513&quot; title=&quot;Failure / flake: Repeated deadlock in JdbcIOTest &amp;gt; testCustomFluentBackOffConfiguration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-10513&quot;&gt;&lt;del&gt;BEAM-10513&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;Failure:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.sql.SQLTransactionRollbackException: A lock could not be obtained within the time requested
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)
	at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedStatement.executeQuery(Unknown Source)
	at org.apache.commons.dbcp2.DelegatingStatement.executeQuery(DelegatingStatement.java:310)
	at org.apache.commons.dbcp2.DelegatingStatement.executeQuery(DelegatingStatement.java:310)
	at org.apache.beam.sdk.io.jdbc.JdbcIOTest.assertRowCount(JdbcIOTest.java:399)
	at org.apache.beam.sdk.io.jdbc.JdbcIOTest.testCustomFluentBackOffConfiguration(JdbcIOTest.java:908)
    ...
Caused by: ERROR 40XL1: A lock could not be obtained within the time requested
	at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
	at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
	at org.apache.derby.impl.services.locks.ConcurrentLockSet.lockObject(Unknown Source)
	at org.apache.derby.impl.services.locks.AbstractPool.lockObject(Unknown Source)
	at org.apache.derby.impl.services.locks.ConcurrentPool.lockObject(Unknown Source)
	at org.apache.derby.impl.store.raw.xact.ContainerLocking2.lockContainer(Unknown Source)
	at org.apache.derby.impl.store.raw.data.BaseContainerHandle.useContainer(Unknown Source)
	at org.apache.derby.impl.store.raw.data.BaseDataFileFactory.openContainer(Unknown Source)
	at org.apache.derby.impl.store.raw.data.BaseDataFileFactory.openContainer(Unknown Source)
	at org.apache.derby.impl.store.raw.xact.Xact.openContainer(Unknown Source)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And in the logs we see:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Jul 16, 2020 10:39:11 AM org.apache.beam.sdk.io.jdbc.JdbcIO$WriteVoid$WriteFn executeBatch
WARNING: Deadlock detected, retrying
java.sql.BatchUpdateException: A lock could not be obtained within the time requested
	at org.apache.derby.impl.jdbc.EmbedStatement.executeLargeBatch(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedStatement.executeBatch(Unknown Source)
	at org.apache.commons.dbcp2.DelegatingStatement.executeBatch(DelegatingStatement.java:223)
	at org.apache.commons.dbcp2.DelegatingStatement.executeBatch(DelegatingStatement.java:223)
	at org.apache.beam.sdk.io.jdbc.JdbcIO$WriteVoid$WriteFn.executeBatch(JdbcIO.java:1467)
	at org.apache.beam.sdk.io.jdbc.JdbcIO$WriteVoid$WriteFn.finishBundle(JdbcIO.java:1417)
	at org.apache.beam.sdk.io.jdbc.JdbcIO$WriteVoid$WriteFn$DoFnInvoker.invokeFinishBundle(Unknown Source)
	at org.apache.beam.repackaged.direct_java.runners.core.SimpleDoFnRunner.finishBundle(SimpleDoFnRunner.java:237)
	at org.apache.beam.repackaged.direct_java.runners.core.SimplePushbackSideInputDoFnRunner.finishBundle(SimplePushbackSideInputDoFnRunner.java:124)
	at org.apache.beam.runners.direct.ParDoEvaluator.finishBundle(ParDoEvaluator.java:265)
	at org.apache.beam.runners.direct.DoFnLifecycleManagerRemovingTransformEvaluator.finishBundle(DoFnLifecycleManagerRemovingTransformEvaluator.java:73)
	at org.apache.beam.runners.direct.DirectTransformExecutor.finishBundle(DirectTransformExecutor.java:188)
	at org.apache.beam.runners.direct.DirectTransformExecutor.run(DirectTransformExecutor.java:126)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17174403" author="bhulette" created="Mon, 10 Aug 2020 15:50:31 +0000"  >&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lcwik&quot; class=&quot;user-hover&quot; rel=&quot;lcwik&quot;&gt;lcwik&lt;/a&gt; - any ideas on this?&lt;/p&gt;</comment>
                            <comment id="17174417" author="lcwik" created="Mon, 10 Aug 2020 16:09:25 +0000"  >&lt;p&gt;That is the expectation within the test, you can see that the error code is faked: &lt;a href=&quot;https://github.com/apache/beam/blob/de8ff705145cbbc41bea7750a0a5d3553924ab3a/sdks/java/io/jdbc/src/test/java/org/apache/beam/sdk/io/jdbc/JdbcIOTest.java#L853&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/blob/de8ff705145cbbc41bea7750a0a5d3553924ab3a/sdks/java/io/jdbc/src/test/java/org/apache/beam/sdk/io/jdbc/JdbcIOTest.java#L853&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17174432" author="lcwik" created="Mon, 10 Aug 2020 16:28:04 +0000"  >&lt;p&gt;But it looks like the error is being thrown from the validation code where the faked retry strategy shouldn&apos;t be applying. It looks like somehow it still is.&lt;/p&gt;</comment>
                            <comment id="17174978" author="bhulette" created="Mon, 10 Aug 2020 18:08:17 +0000"  >&lt;p&gt;Interesting, thank you. Maybe we need to move around the commitThread join? I&apos;m not sure where exactly the exception that the test is catching is getting thrown. I&apos;ll see if I can come up with a fix.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13317214">BEAM-10513</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0g3jc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>