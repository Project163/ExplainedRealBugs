<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:24:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-10708] InteractiveRunner cannot execute pipeline with cross-language transform</title>
                <link>https://issues.apache.org/jira/browse/BEAM-10708</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;The InteractiveRunner crashes when given a pipeline that includes a cross-language transform.&lt;/p&gt;

&lt;p&gt;Here&apos;s the example I tried to run in a jupyter notebook:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-python&quot;&gt;
p = beam.Pipeline(InteractiveRunner())
pc = (p | SqlTransform(&quot;&quot;&quot;SELECT
            CAST(1 AS INT) AS `&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;`,
            CAST(&lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt; AS VARCHAR) AS `&lt;span class=&quot;code-object&quot;&gt;str&lt;/span&gt;`,
            CAST(3.14  AS DOUBLE) AS `flt`&quot;&quot;&quot;))
df = interactive_beam.collect(pc)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem occurs when &lt;a href=&quot;https://github.com/apache/beam/blob/dce1eb83b8d5137c56ac58568820c24bd8fda526/sdks/python/apache_beam/runners/interactive/pipeline_fragment.py#L66&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;pipeline_fragment.py&lt;/a&gt; creates a copy of the pipeline by &lt;a href=&quot;https://github.com/apache/beam/blob/dce1eb83b8d5137c56ac58568820c24bd8fda526/sdks/python/apache_beam/runners/interactive/pipeline_fragment.py#L120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;writing it to proto and reading it back&lt;/a&gt;. Reading it back fails because some of the pipeline is not written in Python.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13322827">BEAM-10708</key>
            <summary>InteractiveRunner cannot execute pipeline with cross-language transform</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bhulette">Brian Hulette</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Aug 2020 23:08:09 +0000</created>
                <updated>Sat, 4 Jun 2022 18:03:40 +0000</updated>
                                                                            <component>cross-language</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="178800">49h 40m</timespent>
                                <comments>
                            <comment id="17178096" author="bhulette" created="Fri, 14 Aug 2020 23:12:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=emukang&quot; class=&quot;user-hover&quot; rel=&quot;emukang&quot;&gt;emukang&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rohdesam&quot; class=&quot;user-hover&quot; rel=&quot;rohdesam&quot;&gt;rohdesam&lt;/a&gt; could one of you take a look at this? Is it possible to get a copy of the pipeline without writing to proto using &lt;tt&gt;copy.deepcopy&lt;/tt&gt; or similar?&lt;/p&gt;

&lt;p&gt;We could also look into making it so you can read the proto back when it includes cross-language transforms. It seems reasonable to expect python to re-create the original ExternalTransform instance in this case&lt;/p&gt;

&lt;p&gt;CC: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=robertwb&quot; class=&quot;user-hover&quot; rel=&quot;robertwb&quot;&gt;robertwb&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17214065" author="beamjirabot" created="Wed, 14 Oct 2020 17:09:46 +0000"  >&lt;p&gt;This issue is P2 but has been unassigned without any comment for 60 days so it has been labeled &quot;stale-P2&quot;. If this issue is still affecting you, we care! Please comment and remove the label. Otherwise, in 14 days the issue will be moved to P3.&lt;/p&gt;

&lt;p&gt;Please see &lt;a href=&quot;https://beam.apache.org/contribute/jira-priorities/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://beam.apache.org/contribute/jira-priorities/&lt;/a&gt; for a detailed explanation of what these priorities mean.&lt;/p&gt;</comment>
                            <comment id="17222281" author="beamjirabot" created="Wed, 28 Oct 2020 17:10:09 +0000"  >&lt;p&gt;This issue was marked &quot;stale-P2&quot; and has not received a public comment in 14 days. It is now automatically moved to P3. If you are still affected by it, you can comment and move it back to P2.&lt;/p&gt;</comment>
                            <comment id="17263715" author="ningk" created="Tue, 12 Jan 2021 21:46:52 +0000"  >&lt;p&gt;As of today (2021-01-12), when a pipeline including a SqlTransform is executed with InteractiveRunner() or invoked in `from_runner_api(to_runner_api())`, an example failure stack trace can be found as following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-python&quot;&gt;
---------------------------------------------------------------------------
&lt;span class=&quot;code-object&quot;&gt;ValueError&lt;/span&gt;                                Traceback (most recent call last)
&amp;lt;ipython-&lt;span class=&quot;code-object&quot;&gt;input&lt;/span&gt;-9-ae3e3b2a5b98&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; &amp;lt;module&amp;gt;
----&amp;gt; 1 ib.show(pcoll)

~/beam/sdks/python/apache_beam/runners/interactive/utils.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; run_within_progress_indicator(*args, **kwargs)
    226   &lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; run_within_progress_indicator(*args, **kwargs):
    227     &lt;span class=&quot;code-keyword&quot;&gt;with&lt;/span&gt; ProgressIndicator(&lt;span class=&quot;code-quote&quot;&gt;&apos;Processing...&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;Done.&apos;&lt;/span&gt;):
--&amp;gt; 228       &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; func(*args, **kwargs)
    229 
    230   &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; run_within_progress_indicator

~/beam/sdks/python/apache_beam/runners/interactive/interactive_beam.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; show(*pcolls, **configs)
    484   recording_manager = ie.current_env().get_recording_manager(
    485       user_pipeline, create_if_absent=&lt;span class=&quot;code-keyword&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;True&lt;/span&gt;&lt;/span&gt;)
--&amp;gt; 486   recording = recording_manager.record(pcolls, max_n=n, max_duration=duration)
    487 
    488   &lt;span class=&quot;code-comment&quot;&gt;# Catch a &lt;span class=&quot;code-object&quot;&gt;KeyboardInterrupt&lt;/span&gt; to gracefully cancel the recording &lt;span class=&quot;code-keyword&quot;&gt;and&lt;/span&gt;
&lt;/span&gt;
~/beam/sdks/python/apache_beam/runners/interactive/recording_manager.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; record(&lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;, pcolls, max_n, max_duration)
    420     &lt;span class=&quot;code-comment&quot;&gt;# arbitrary variables.
&lt;/span&gt;    421     &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._watch(pcolls)
--&amp;gt; 422     pipeline_instrument = pi.PipelineInstrument(&lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;.user_pipeline)
    423     &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;.record_pipeline()
    424 

~/beam/sdks/python/apache_beam/runners/interactive/pipeline_instrument.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; __init__(&lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;, pipeline, options)
    113     &lt;span class=&quot;code-comment&quot;&gt;# proto &lt;span class=&quot;code-keyword&quot;&gt;is&lt;/span&gt; stable. The snapshot of pipeline will &lt;span class=&quot;code-keyword&quot;&gt;not&lt;/span&gt; be mutated within this
&lt;/span&gt;    114     &lt;span class=&quot;code-comment&quot;&gt;# module &lt;span class=&quot;code-keyword&quot;&gt;and&lt;/span&gt; can be used to recover original pipeline &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; needed.
&lt;/span&gt;--&amp;gt; 115     &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._pipeline_snap = beam.pipeline.Pipeline.from_runner_api(
    116         pipeline.to_runner_api(use_fake_coders=&lt;span class=&quot;code-keyword&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;True&lt;/span&gt;&lt;/span&gt;), pipeline.runner, options)
    117     ie.current_env().add_derived_pipeline(&lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._pipeline, &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._pipeline_snap)

~/beam/sdks/python/apache_beam/pipeline.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; from_runner_api(proto, runner, options, return_context)
    900     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; proto.root_transform_ids:
    901       root_transform_id, = proto.root_transform_ids
--&amp;gt; 902       p.transforms_stack = [context.transforms.get_by_id(root_transform_id)]
    903     &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;:
    904       p.transforms_stack = [AppliedPTransform(&lt;span class=&quot;code-keyword&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;None&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;None&lt;/span&gt;&lt;/span&gt;, &apos;&apos;, &lt;span class=&quot;code-keyword&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;None&lt;/span&gt;&lt;/span&gt;)]

~/beam/sdks/python/apache_beam/runners/pipeline_context.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; get_by_id(&lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;)
    113     &lt;span class=&quot;code-comment&quot;&gt;# &lt;span class=&quot;code-object&quot;&gt;type&lt;/span&gt;: (&lt;span class=&quot;code-object&quot;&gt;str&lt;/span&gt;) -&amp;gt; PortableObjectT
&lt;/span&gt;    114     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj:
--&amp;gt; 115       &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;] = &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._obj_type.from_runner_api(
    116           &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_proto[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;], &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._pipeline_context)
    117     &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;]

~/beam/sdks/python/apache_beam/pipeline.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; from_runner_api(proto, context)
   1250     result.parts = []
   1251     &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; transform_id &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; proto.subtransforms:
-&amp;gt; 1252       part = context.transforms.get_by_id(transform_id)
   1253       part.parent = result
   1254       result.parts.append(part)

~/beam/sdks/python/apache_beam/runners/pipeline_context.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; get_by_id(&lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;)
    113     &lt;span class=&quot;code-comment&quot;&gt;# &lt;span class=&quot;code-object&quot;&gt;type&lt;/span&gt;: (&lt;span class=&quot;code-object&quot;&gt;str&lt;/span&gt;) -&amp;gt; PortableObjectT
&lt;/span&gt;    114     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj:
--&amp;gt; 115       &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;] = &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._obj_type.from_runner_api(
    116           &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_proto[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;], &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._pipeline_context)
    117     &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;]

~/beam/sdks/python/apache_beam/pipeline.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; from_runner_api(proto, context)
   1250     result.parts = []
   1251     &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; transform_id &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; proto.subtransforms:
-&amp;gt; 1252       part = context.transforms.get_by_id(transform_id)
   1253       part.parent = result
   1254       result.parts.append(part)

~/beam/sdks/python/apache_beam/runners/pipeline_context.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; get_by_id(&lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;)
    113     &lt;span class=&quot;code-comment&quot;&gt;# &lt;span class=&quot;code-object&quot;&gt;type&lt;/span&gt;: (&lt;span class=&quot;code-object&quot;&gt;str&lt;/span&gt;) -&amp;gt; PortableObjectT
&lt;/span&gt;    114     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj:
--&amp;gt; 115       &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;] = &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._obj_type.from_runner_api(
    116           &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_proto[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;], &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._pipeline_context)
    117     &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;]

~/beam/sdks/python/apache_beam/pipeline.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; from_runner_api(proto, context)
   1250     result.parts = []
   1251     &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; transform_id &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; proto.subtransforms:
-&amp;gt; 1252       part = context.transforms.get_by_id(transform_id)
   1253       part.parent = result
   1254       result.parts.append(part)

~/beam/sdks/python/apache_beam/runners/pipeline_context.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; get_by_id(&lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;)
    113     &lt;span class=&quot;code-comment&quot;&gt;# &lt;span class=&quot;code-object&quot;&gt;type&lt;/span&gt;: (&lt;span class=&quot;code-object&quot;&gt;str&lt;/span&gt;) -&amp;gt; PortableObjectT
&lt;/span&gt;    114     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj:
--&amp;gt; 115       &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;] = &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._obj_type.from_runner_api(
    116           &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_proto[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;], &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._pipeline_context)
    117     &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;]

~/beam/sdks/python/apache_beam/pipeline.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; from_runner_api(proto, context)
   1250     result.parts = []
   1251     &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; transform_id &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; proto.subtransforms:
-&amp;gt; 1252       part = context.transforms.get_by_id(transform_id)
   1253       part.parent = result
   1254       result.parts.append(part)

~/beam/sdks/python/apache_beam/runners/pipeline_context.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; get_by_id(&lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;)
    113     &lt;span class=&quot;code-comment&quot;&gt;# &lt;span class=&quot;code-object&quot;&gt;type&lt;/span&gt;: (&lt;span class=&quot;code-object&quot;&gt;str&lt;/span&gt;) -&amp;gt; PortableObjectT
&lt;/span&gt;    114     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj:
--&amp;gt; 115       &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;] = &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._obj_type.from_runner_api(
    116           &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_proto[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;], &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._pipeline_context)
    117     &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;]

~/beam/sdks/python/apache_beam/pipeline.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; from_runner_api(proto, context)
   1250     result.parts = []
   1251     &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; transform_id &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; proto.subtransforms:
-&amp;gt; 1252       part = context.transforms.get_by_id(transform_id)
   1253       part.parent = result
   1254       result.parts.append(part)

~/beam/sdks/python/apache_beam/runners/pipeline_context.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; get_by_id(&lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;)
    113     &lt;span class=&quot;code-comment&quot;&gt;# &lt;span class=&quot;code-object&quot;&gt;type&lt;/span&gt;: (&lt;span class=&quot;code-object&quot;&gt;str&lt;/span&gt;) -&amp;gt; PortableObjectT
&lt;/span&gt;    114     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj:
--&amp;gt; 115       &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;] = &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._obj_type.from_runner_api(
    116           &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_proto[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;], &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._pipeline_context)
    117     &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;self&lt;/span&gt;._id_to_obj[&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;]

~/beam/sdks/python/apache_beam/pipeline.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; from_runner_api(proto, context)
   1227     ]
   1228 
-&amp;gt; 1229     transform = ptransform.PTransform.from_runner_api(proto, context)
   1230     &lt;span class=&quot;code-comment&quot;&gt;# Ordering &lt;span class=&quot;code-keyword&quot;&gt;is&lt;/span&gt; important here.
&lt;/span&gt;   1231     &lt;span class=&quot;code-comment&quot;&gt;# TODO(BEAM-9635): use key, value pairs instead of depending on tags &lt;span class=&quot;code-keyword&quot;&gt;with&lt;/span&gt;
&lt;/span&gt;
~/beam/sdks/python/apache_beam/transforms/ptransform.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; from_runner_api(cls, proto, context)
    728     parameter_type, constructor = cls._known_urns[proto.spec.urn]
    729 
--&amp;gt; 730     &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; constructor(
    731         proto,
    732         proto_utils.parse_Bytes(proto.spec.payload, parameter_type),

~/beam/sdks/python/apache_beam/transforms/core.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; from_runner_api_parameter(unused_ptransform, pardo_payload, context)
   1417   &lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; from_runner_api_parameter(unused_ptransform, pardo_payload, context):
   1418     fn, args, kwargs, si_tags_and_types, windowing = pickler.loads(
-&amp;gt; 1419         DoFnInfo.from_runner_api(
   1420             pardo_payload.do_fn, context).serialized_dofn_data())
   1421     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; si_tags_and_types:

~/beam/sdks/python/apache_beam/transforms/core.py &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; from_runner_api(spec, unused_context)
   1491       &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; StatelessDoFnInfo(spec.urn)
   1492     &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;:
-&amp;gt; 1493       &lt;span class=&quot;code-keyword&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;ValueError&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&apos;Unexpected DoFn &lt;span class=&quot;code-object&quot;&gt;type&lt;/span&gt;: %s&apos;&lt;/span&gt; % spec.urn)
   1494 
   1495   @&lt;span class=&quot;code-object&quot;&gt;staticmethod&lt;/span&gt;

&lt;span class=&quot;code-object&quot;&gt;ValueError&lt;/span&gt;: Unexpected DoFn &lt;span class=&quot;code-object&quot;&gt;type&lt;/span&gt;: beam:dofn:javasdk:0.1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17266469" author="chamikara" created="Sat, 16 Jan 2021 01:18:36 +0000"  >&lt;p&gt;You cannot run &apos;from_runner_api()&apos; on runner API proto definitions that contain external transforms since you won&apos;t be able to create a Python object representation for some external constructs (for example, Java DoFns). I got rid of this for regular pipelines (for Dataflow) but possibly somehow you are still running into this for interactive runner.&lt;/p&gt;</comment>
                            <comment id="17268901" author="bhulette" created="Wed, 20 Jan 2021 22:51:46 +0000"  >&lt;p&gt;Yes the interactive runner has a separate runner API roundtrip to create a copy of the pipeline: &lt;a href=&quot;https://github.com/apache/beam/blob/dce1eb83b8d5137c56ac58568820c24bd8fda526/sdks/python/apache_beam/runners/interactive/pipeline_fragment.py#L120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/blob/dce1eb83b8d5137c56ac58568820c24bd8fda526/sdks/python/apache_beam/runners/interactive/pipeline_fragment.py#L120&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In an offline conversation I suggested that Ning try using copy.deepcopy instead of the proto roundtrip to make a copy.&lt;/p&gt;
</comment>
                            <comment id="17268918" author="ningk" created="Wed, 20 Jan 2021 23:17:46 +0000"  >&lt;p&gt;Thanks for the comments, Cham and Brian! If `from_runner_api` is not a possible solution to copy pipelines, the InteractiveRunner has to either copy the pipeline objects explicitly or make changes directly on the proto before each iteration of execution.&lt;/p&gt;</comment>
                            <comment id="17341374" author="beamjirabot" created="Sat, 8 May 2021 17:19:24 +0000"  >&lt;p&gt;This issue is assigned but has not received an update in 30 days so it has been labeled &quot;stale-assigned&quot;. If you are still working on the issue, please give an update and remove the label. If you are no longer working on the issue, please unassign so someone else may work on it. In 7 days the issue will be automatically unassigned.&lt;/p&gt;</comment>
                            <comment id="17345761" author="beamjirabot" created="Sun, 16 May 2021 17:19:29 +0000"  >&lt;p&gt;This issue was marked &quot;stale-assigned&quot; and has not received a public comment in 7 days. It is now automatically unassigned. If you are still working on it, you can assign it to yourself again. Please also give an update about the status of the work.&lt;/p&gt;</comment>
                            <comment id="17346506" author="chamikara" created="Tue, 18 May 2021 00:11:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ningk&quot; class=&quot;user-hover&quot; rel=&quot;ningk&quot;&gt;ningk&lt;/a&gt;&#160;any updates on this ?&lt;/p&gt;</comment>
                            <comment id="17347084" author="ningk" created="Tue, 18 May 2021 17:29:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chamikara&quot; class=&quot;user-hover&quot; rel=&quot;chamikara&quot;&gt;chamikara&lt;/a&gt; Thanks for asking, the first PR#14368 that initiated a new augmented_pipeline module to replace pipeline_instrument has been merged. I&apos;ll be working on this after finishing some other higher priority tasks. &lt;br/&gt;
There are some known users who depend on the old modules that uses runner api roundtrips, I&apos;ll work with them to roll out the new module. We might need to keep the old modules as deprecated for a while.&lt;/p&gt;</comment>
                            <comment id="17387500" author="beamjirabot" created="Mon, 26 Jul 2021 17:21:15 +0000"  >&lt;p&gt;This issue is assigned but has not received an update in 30 days so it has been labeled &quot;stale-assigned&quot;. If you are still working on the issue, please give an update and remove the label. If you are no longer working on the issue, please unassign so someone else may work on it. In 7 days the issue will be automatically unassigned.&lt;/p&gt;</comment>
                            <comment id="17388903" author="ningk" created="Wed, 28 Jul 2021 17:30:31 +0000"  >&lt;p&gt;An update: I&apos;m currently working on &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-12506&quot; title=&quot;Change WindowedValueHolder into a Row Schema&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-12506&quot;&gt;&lt;del&gt;BEAM-12506&lt;/del&gt;&lt;/a&gt; that could help resolve the issue.&lt;/p&gt;</comment>
                            <comment id="17394219" author="beamjirabot" created="Thu, 5 Aug 2021 17:21:23 +0000"  >&lt;p&gt;This issue was marked &quot;stale-assigned&quot; and has not received a public comment in 7 days. It is now automatically unassigned. If you are still working on it, you can assign it to yourself again. Please also give an update about the status of the work.&lt;/p&gt;</comment>
                            <comment id="17408334" author="bhulette" created="Wed, 1 Sep 2021 19:03:23 +0000"  >&lt;p&gt;Is this resolved now that &lt;a href=&quot;https://github.com/apache/beam/pull/15368&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/15368&lt;/a&gt; is in?&lt;/p&gt;</comment>
                            <comment id="17408370" author="ningk" created="Wed, 1 Sep 2021 20:37:17 +0000"  >&lt;p&gt;Yes, customers could use the beam_sql magic instead of the SqlTransform directly with the InteractiveRunner.&lt;/p&gt;

&lt;p&gt;For streaming, I&apos;ll additionally support TestStream in FnApiRunner.&lt;/p&gt;</comment>
                            <comment id="17408374" author="chamikara" created="Wed, 1 Sep 2021 20:47:20 +0000"  >&lt;p&gt;Thanks. That&apos;s great to know.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Is the fix somehow SQL only or will cross-language transforms work for InteractiveRunner in general now ?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Also is there an integration test somewhere for InteractiveRunner + Python SQL transform ?&lt;/p&gt;</comment>
                            <comment id="17408399" author="ningk" created="Wed, 1 Sep 2021 22:02:42 +0000"  >&lt;p&gt;It&apos;s a workaround for SQL only. There is no integration test for this. Underlying it, it builds a normal pipeline executing SqlTransform with a DirectRunner. If that&apos;s covered, there is no need to add another integration test.&lt;/p&gt;</comment>
                            <comment id="17408425" author="bhulette" created="Wed, 1 Sep 2021 23:32:33 +0000"  >&lt;p&gt;&amp;gt; It&apos;s a workaround for SQL only. There is no integration test for this. Underlying it, it builds a normal pipeline executing SqlTransform with a DirectRunner. If that&apos;s covered, there is no need to add another integration test.&lt;/p&gt;

&lt;p&gt;That should be covered in XVR Direct (&lt;a href=&quot;https://ci-beam.apache.org/job/beam_PostCommit_XVR_Direct&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-beam.apache.org/job/beam_PostCommit_XVR_Direct&lt;/a&gt;). Although I don&apos;t think that actually verifies with the runner configured for streaming.&lt;/p&gt;

&lt;p&gt;I think Cham&apos;s question was around the proto roundtrip that originally broke multi-language pipelines on the interactive runner. Does InteractiveRunner no longer make a roundtrip to the runner API proto, or is there some other fix specific to SQL?&lt;/p&gt;</comment>
                            <comment id="17408457" author="ningk" created="Thu, 2 Sep 2021 01:09:29 +0000"  >&lt;p&gt;&lt;b&gt;For streaming,  a summary of the current status&lt;/b&gt;:&lt;/p&gt;

&lt;p&gt;For the 2 DirectRunner implementations:&lt;br/&gt;
FnApiRunner&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Support SqlTransform&lt;/li&gt;
	&lt;li&gt;Does not support TestStream&lt;/li&gt;
	&lt;li&gt;Does not support NativeSources such as ReadFromPubSub&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;BundleBasedDirectRunner&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Support TestStream and ReadFromPubSub&lt;/li&gt;
	&lt;li&gt;Does not support SqlTransform&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;SqlTransform is not supported by DirectRunner for streaming pipelines anyway.&lt;/p&gt;

&lt;p&gt;I&apos;m going to make FnApiRunner support TestStream so that&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Support SqlTransform&lt;/li&gt;
	&lt;li&gt;Support TestStream/NativeSources such as ReadFromPubSub (locally an InteractiveRunner uses TestStream to replace all ReadFromPubSubs)&lt;/li&gt;
	&lt;li&gt;Not to be deprecated and xLang friendly.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;&lt;b&gt;The other topic&lt;/b&gt;:&lt;/p&gt;

&lt;p&gt;The workaround usage for SQL can be demonstrated as:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-python&quot;&gt;
p = beam.Pipeline(ir.InteractiveRunner())

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Person(typing.NamedTuple):
    &lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;
    name: &lt;span class=&quot;code-object&quot;&gt;str&lt;/span&gt;

persons = (p | beam.Create(&lt;span class=&quot;code-object&quot;&gt;range&lt;/span&gt;(10))
           | beam.Map(&lt;span class=&quot;code-keyword&quot;&gt;lambda&lt;/span&gt; x: Person(&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;=x, name=names.get_full_name())).with_output_types(Person))

persons_2 = (p | beam.Create(&lt;span class=&quot;code-object&quot;&gt;range&lt;/span&gt;(5,15))
              | beam.Map(&lt;span class=&quot;code-keyword&quot;&gt;lambda&lt;/span&gt; x: Person(&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;=x, name=names.get_full_name())).with_output_types(Person)) 

%%beam_sql persons_id_conflict  &lt;span class=&quot;code-comment&quot;&gt;# This &lt;span class=&quot;code-keyword&quot;&gt;is&lt;/span&gt; the output variable name &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; the __main__ module.
&lt;/span&gt;SELECT * FROM persons JOIN persons_2 USING (&lt;span class=&quot;code-object&quot;&gt;id&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The output is a PCollection. Note there is no need from the user to explicitly apply a SqlTransform nor build the input PCollection dict.&lt;/p&gt;

&lt;p&gt;Under the hood, InteractiveRunner has no change (still uses roundtrips to duplicate pipelines without external transforms).&lt;br/&gt;
For SQL usages, the beam_sql ipython magic takes care of implicitly building a pipeline with appropriate SqlTransform and inputs.&lt;/p&gt;


</comment>
                            <comment id="17409004" author="chamikara" created="Thu, 2 Sep 2021 17:23:52 +0000"  >&lt;p&gt;Thanks for the update &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ningk&quot; class=&quot;user-hover&quot; rel=&quot;ningk&quot;&gt;ningk&lt;/a&gt;. It&apos;s great to know that the InteractiveRunner now supports the SQL transform.&lt;/p&gt;

&lt;p&gt;Is there a plan to move out of Runner API from/to round trip in general ? I think it happens to work for most transforms in Python SDK by accident and there&apos;s no guarantee that a given transform will support this in a given environment (and cross-language transforms definitely do not support this).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=robertwb&quot; class=&quot;user-hover&quot; rel=&quot;robertwb&quot;&gt;robertwb&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17409012" author="ningk" created="Thu, 2 Sep 2021 17:43:49 +0000"  >&lt;p&gt;Yes, we could deprecate the runner api roundtrip usage in Interactive Beam by moving the DirectRunner usage completely to its FnApiRunner implementation.&lt;/p&gt;

&lt;p&gt;We can use this ticket to track the progress. I could work on this next quarter.&lt;/p&gt;</comment>
                            <comment id="17409016" author="ningk" created="Thu, 2 Sep 2021 17:49:26 +0000"  >&lt;p&gt;Once FnApiRunner supports TestStream, streaming pipelines defined with InteractiveRunner (with or without sql transforms) can be executed.&lt;/p&gt;</comment>
                            <comment id="17409019" author="chamikara" created="Thu, 2 Sep 2021 17:59:04 +0000"  >&lt;p&gt;I see, so the round-trip occurs only when using the &quot;BundleBasedDirectRunner&quot; ? Agree that In that case moving to &quot;FnApiRunner&quot; should be the correct path. Also agree that we should keep this Jira open till cross-language transforms are supported in general for the InteractiveRunner.&lt;/p&gt;

&lt;p&gt;Thanks for the update.&#160;&lt;/p&gt;</comment>
                            <comment id="17409032" author="ningk" created="Thu, 2 Sep 2021 18:42:04 +0000"  >&lt;p&gt;Thanks for asking. Switching to &quot;FnApiRunner&quot; makes the deprecation of runner api roundtrip feasible.&lt;/p&gt;

&lt;p&gt;Our roundtrip &lt;b&gt;does nothing but making copies of pipelines&lt;/b&gt;. &lt;font color=&quot;#505F79&quot;&gt;It&apos;s something useful (to avoid corrupting the _&lt;em&gt;main&lt;/em&gt;_ module in the REPL env) in the interactive scenario where the user applies-transforms-then-inspect-output one by one, but not needed for scenarios where the user creates-pipelines-then-execute one by one (or any other non-interactive use cases. Deep copying pipelines is not a feature because it&apos;s not needed. So we could only use runner api roundtrip in the early days.)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;To deprecate it, instead of making copies of pipelines, we make copies of runner api protos.&lt;br/&gt;
Theoretically, runner api is the SDK-and-runner-independent definition of a Beam pipeline. Every runner implementation should be able to accept them for execution.&lt;br/&gt;
For DirectRunner, the right approach is to use its FnApiRunner implementation that is implemented to accept a runner api through &quot;run_via_runner_api&quot;.&lt;/p&gt;

&lt;p&gt;I hope DataflowRunner could also support &quot;run_via_runner_api&quot; to truly support mixing matching SDKs and runners envisioned &lt;a href=&quot;https://docs.google.com/document/d/1XYzb1Fnt2sam7u2MsGFaZp-2qSIGxUn66VLer-bcXAk/edit#heading=h.p6lvszfbmyj6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. But to productionize a pipeline from notebooks to dataflow, we could have other workaround. Making copies of pipelines is not needed.&lt;/p&gt;</comment>
                            <comment id="17409103" author="chamikara" created="Thu, 2 Sep 2021 20:13:42 +0000"  >&lt;p&gt;Dataflow supports &quot;run_via_runner_api&quot; via portable job submission.&lt;/p&gt;</comment>
                            <comment id="17411363" author="ningk" created="Tue, 7 Sep 2021 17:12:24 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Thanks! That&apos;s good to know!&lt;/p&gt;</comment>
                            <comment id="17439396" author="beamjirabot" created="Fri, 5 Nov 2021 17:25:29 +0000"  >&lt;p&gt;This issue is assigned but has not received an update in 30 days so it has been labeled &quot;stale-assigned&quot;. If you are still working on the issue, please give an update and remove the label. If you are no longer working on the issue, please unassign so someone else may work on it. In 7 days the issue will be automatically unassigned.&lt;/p&gt;</comment>
                            <comment id="17442876" author="beamjirabot" created="Fri, 12 Nov 2021 17:26:48 +0000"  >&lt;p&gt;This issue was marked &quot;stale-assigned&quot; and has not received a public comment in 7 days. It is now automatically unassigned. If you are still working on it, you can assign it to yourself again. Please also give an update about the status of the work.&lt;/p&gt;</comment>
                            <comment id="17473675" author="kenn" created="Wed, 12 Jan 2022 03:49:55 +0000"  >&lt;p&gt;This Jira ticket has a pull request attached to it, but is still open. Did the pull request resolve the issue? If so, could you please mark it resolved? This will help the project have a clear view of its open issues.&lt;/p&gt;</comment>
                            <comment id="17474771" author="ningk" created="Wed, 12 Jan 2022 18:03:06 +0000"  >&lt;p&gt;Use beam_sql magic in notebooks to work with SqlTransform and InteractiveRunner.&lt;/p&gt;</comment>
                            <comment id="17499730" author="bhulette" created="Tue, 1 Mar 2022 20:07:38 +0000"  >&lt;p&gt;I don&apos;t think we should close this. The beam_sql magic is a great workaround for a specific (important) use-case, but we should still track the underlying issue. There are many other external transforms and it would be nice for them all to work with the InteractiveRunner.&lt;/p&gt;

&lt;p&gt;It would also be nice to fail more gracefully as an intermediate step.&lt;/p&gt;</comment>
                            <comment id="17523537" author="nnamnielk" created="Mon, 18 Apr 2022 05:53:38 +0000"  >&lt;p&gt;Just seconding Brian&apos;s comment.&#160;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I am a corporate developer stuck behind a firewall, with business users trying to evaluate Beam.&#160; The first thing we want to try is loading up csvs and running SQL on them offline, and outputting a file (might sound pedestrian, but this is where we are coming from).&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Of course, you could ask why offline, but getting a project approved, and setup, and a bucket is actually a weeks long process in a bank, if you haven&apos;t done it before.&#160;&lt;/p&gt;</comment>
                            <comment id="17523814" author="ningk" created="Mon, 18 Apr 2022 17:48:01 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nnamnielk&quot; class=&quot;user-hover&quot; rel=&quot;nnamnielk&quot;&gt;nnamnielk&lt;/a&gt;, yes, I completely agree with that! We still have a long way to rebuild InteractiveRunner so that it can work with external transforms. For the time being, could you please check whether the `beam_sql` magic works for your use cases? An example can be found and &lt;a href=&quot;https://github.com/apache/beam/blob/master/sdks/python/apache_beam/runners/interactive/examples/Run%20Beam%20SQL%20with%20beam_sql%20magic.ipynb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; and &lt;a href=&quot;https://cloud.google.com/dataflow/docs/guides/interactive-pipeline-development#beam_sql_and_beam_sql_magic&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17548916" author="JIRAUSER282469" created="Sat, 4 Jun 2022 18:03:40 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/apache/beam/issues/20526&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/issues/20526&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13238329">BEAM-7515</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310460">
                    <name>Child-Issue</name>
                                                                <inwardlinks description="is a child of">
                                        <issuelink>
            <issuekey id="13440529">BEAM-14331</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0hsi8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>