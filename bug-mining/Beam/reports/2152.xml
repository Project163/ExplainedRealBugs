<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:13:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-11329] HDFS not deduplicating identical configuration paths.</title>
                <link>https://issues.apache.org/jira/browse/BEAM-11329</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;Originally reported by Yuhong on the dev list: &lt;a href=&quot;https://lists.apache.org/thread.html/r6a61c94e6d14aa9e8b56ff4919c0bea17fceada446d1193d19fd9ed2%40%3Cdev.beam.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/r6a61c94e6d14aa9e8b56ff4919c0bea17fceada446d1193d19fd9ed2%40%3Cdev.beam.apache.org%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.IllegalArgumentException: The HadoopFileSystemRegistrar currently only supports at most a single Hadoop configuration.&lt;br/&gt;
at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.base.Preconditions.checkArgument(Preconditions.java:141) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;beam-vendor-guava-26_0-jre-0.1.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.beam.sdk.io.hdfs.HadoopFileSystemRegistrar.fromOptions(HadoopFileSystemRegistrar.java:60) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;beam-sdks-java-io-hadoop-file-system-3.2250.5.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.beam.sdk.io.FileSystems.verifySchemesAreUnique(FileSystems.java:496) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;beam-sdks-java-core-3.2250.5.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.beam.sdk.io.FileSystems.setDefaultPipelineOptions(FileSystems.java:486) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;beam-sdks-java-core-3.2250.5.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.beam.sdk.PipelineRunner.fromOptions(PipelineRunner.java:47) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;beam-sdks-java-core-3.2250.5.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.beam.sdk.Pipeline.create(Pipeline.java:149) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;beam-sdks-java-core-3.2250.5.jar:?&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;I tried to debug and printed some logs using&lt;br/&gt;
 List&amp;lt;Configuration&amp;gt; configurations =&lt;br/&gt;
        pipelineOpts.as(HadoopFileSystemOptions.class).getHdfsConfiguration();&lt;br/&gt;
 LOG.info(&quot;print hdfsConfiguration for testing: &quot; + configurations.toString());&lt;/p&gt;

&lt;p&gt;2020-11-19 18:02:26.289 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; HelloBeam &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; print hdfsConfiguration for testing: &lt;br/&gt;
[Configuration: /export/content/lid/apps/samza-yarn-nodemanager/1d5c39c31bb33e3dd8e8149168167870328a014b/genConfig/core-site.xml, &lt;br/&gt;
 Configuration: /export/content/lid/apps/samza-yarn-nodemanager/1d5c39c31bb33e3dd8e8149168167870328a014b/genConfig/core-site.xml]&lt;/p&gt;

&lt;p&gt;as you can see the hdfsConfiguration is a list and contains two same elements, which caused the error.&lt;br/&gt;
I noticed that the configurations are generated according to HADOOP_CONF_DIR and YARN_CONF_DIR. In the class, a set is used to dedup,&lt;br/&gt;
however, in my test environment, the two dirs are: &lt;/p&gt;

&lt;p&gt;HADOOP_CONF_DIR=/export/content/lid/apps/samza-yarn-nodemanager/1d5c39c31bb33e3dd8e8149168167870328a014b/bin/../genConfig/&lt;br/&gt;
YARN_CONF_DIR=/export/content/lid/apps/samza-yarn-nodemanager/1d5c39c31bb33e3dd8e8149168167870328a014b/bin/../genConfig&lt;/p&gt;

&lt;p&gt;HADOOP_CONF_DIR contains a &apos;/&apos; at the end so these two dir are considered to be different and then got added twice.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13342240">BEAM-11329</key>
            <summary>HDFS not deduplicating identical configuration paths.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10103" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">P3</priority>
                        <status id="10722" iconUrl="https://issues.apache.org/jira/images/icons/statuses/generic.png" description="">Triage Needed</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="YC">Yuhong Cheng</assignee>
                                    <reporter username="ibzib">Kyle Weaver</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Nov 2020 01:42:17 +0000</created>
                <updated>Thu, 13 Apr 2023 11:04:20 +0000</updated>
                            <resolved>Mon, 28 Dec 2020 17:04:27 +0000</resolved>
                                                    <fixVersion>2.28.0</fixVersion>
                                    <component>io-java-hadoop-file-system</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kv7k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>