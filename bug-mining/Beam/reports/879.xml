<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:54:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-5925] Test flake in ElasticsearchIOTest.testWriteFullAddressing</title>
                <link>https://issues.apache.org/jira/browse/BEAM-5925</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/view/A-D/view/Beam/job/beam_PostCommit_Java_GradleBuild/1789/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/A-D/view/Beam/job/beam_PostCommit_Java_GradleBuild/1789/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://scans.gradle.com/s/j42mwdsn5svcs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://scans.gradle.com/s/j42mwdsn5svcs&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.beam.sdk.Pipeline$PipelineExecutionException: java.io.IOException: listener timeout after waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; [30000] ms
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log looks like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[2018-10-31T04:06:07,571][INFO ][o.a.b.s.i.e.ElasticsearchIOTest] [testWriteFullAddressing]: before test
[2018-10-31T04:06:07,572][INFO ][o.a.b.s.i.e.ElasticsearchIOTest] [ElasticsearchIOTest#testWriteFullAddressing]: setting up test
[2018-10-31T04:06:07,589][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node_s0] adding template [random_index_template] &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; index patterns [*]
[2018-10-31T04:06:07,645][INFO ][o.a.b.s.i.e.ElasticsearchIOTest] [ElasticsearchIOTest#testWriteFullAddressing]: all set up test
[2018-10-31T04:06:10,536][INFO ][o.e.c.m.MetaDataCreateIndexService] [node_s0] [galilei] creating index, cause [auto(bulk api)], templates [random_index_template], shards [6]/[0], mappings []
[2018-10-31T04:06:33,963][INFO ][o.e.c.m.MetaDataCreateIndexService] [node_s0] [curie] creating index, cause [auto(bulk api)], templates [random_index_template], shards [6]/[0], mappings []
[2018-10-31T04:06:34,034][INFO ][o.e.c.m.MetaDataCreateIndexService] [node_s0] [darwin] creating index, cause [auto(bulk api)], templates [random_index_template], shards [6]/[0], mappings []
[2018-10-31T04:06:34,050][INFO ][o.e.c.m.MetaDataCreateIndexService] [node_s0] [copernicus] creating index, cause [auto(bulk api)], templates [random_index_template], shards [6]/[0], mappings []
[2018-10-31T04:06:34,075][INFO ][o.e.c.m.MetaDataCreateIndexService] [node_s0] [faraday] creating index, cause [auto(bulk api)], templates [random_index_template], shards [6]/[0], mappings []
[2018-10-31T04:06:34,095][INFO ][o.e.c.m.MetaDataCreateIndexService] [node_s0] [bohr] creating index, cause [auto(bulk api)], templates [random_index_template], shards [6]/[0], mappings []
[2018-10-31T04:06:34,113][INFO ][o.e.c.m.MetaDataCreateIndexService] [node_s0] [pasteur] creating index, cause [auto(bulk api)], templates [random_index_template], shards [6]/[0], mappings []
[2018-10-31T04:06:34,142][INFO ][o.e.c.m.MetaDataCreateIndexService] [node_s0] [einstein] creating index, cause [auto(bulk api)], templates [random_index_template], shards [6]/[0], mappings []
[2018-10-31T04:06:34,205][INFO ][o.e.c.m.MetaDataCreateIndexService] [node_s0] [maxwell] creating index, cause [auto(bulk api)], templates [random_index_template], shards [6]/[0], mappings []
[2018-10-31T04:06:34,226][INFO ][o.e.c.m.MetaDataCreateIndexService] [node_s0] [newton] creating index, cause [auto(bulk api)], templates [random_index_template], shards [6]/[0], mappings []
[2018-10-31T04:06:36,914][INFO ][o.e.c.r.a.AllocationService] [node_s0] Cluster health status changed from [YELLOW] to [GREEN] (reason: [shards started [[galilei][4], [galilei][5]] ...]).
[2018-10-31T04:06:36,970][INFO ][o.e.c.m.MetaDataMappingService] [node_s0] [galilei/Vn1b8XXVSAmrTb5BVe2IJQ] create_mapping [TYPE_1]
[2018-10-31T04:06:37,137][INFO ][o.e.c.m.MetaDataMappingService] [node_s0] [newton/bjnImLt_QguBGEFH9lBJ6Q] create_mapping [TYPE_-1]
[2018-10-31T04:06:37,385][INFO ][o.e.c.m.MetaDataMappingService] [node_s0] [maxwell/-RZ32NbRRZWaGaVfaptFIA] create_mapping [TYPE_0]
[2018-10-31T04:06:37,636][INFO ][o.e.c.m.MetaDataMappingService] [node_s0] [einstein/2lgF5Vj6Ti2KTS-pYSzv3Q] create_mapping [TYPE_1]
[2018-10-31T04:06:37,806][INFO ][o.e.c.m.MetaDataMappingService] [node_s0] [pasteur/832OwzleRSOHsWx85vOH-w] create_mapping [TYPE_0]
[2018-10-31T04:06:38,103][INFO ][o.e.c.m.MetaDataMappingService] [node_s0] [bohr/9YTwB1yvTYKf9YjYCmHjwg] create_mapping [TYPE_1]
[2018-10-31T04:06:38,229][INFO ][o.e.c.m.MetaDataMappingService] [node_s0] [faraday/vIMYG8vpTQKqNkyajcFOxw] create_mapping [TYPE_0]
[2018-10-31T04:06:38,576][INFO ][o.e.c.m.MetaDataMappingService] [node_s0] [copernicus/NzCZssInSiOdZKTmLCoXRw] create_mapping [TYPE_1]
[2018-10-31T04:06:38,890][INFO ][o.e.c.m.MetaDataMappingService] [node_s0] [darwin/g_sIfS5aQwi6BAXw_--vgw] create_mapping [TYPE_1]
[2018-10-31T04:06:39,201][INFO ][o.e.c.m.MetaDataMappingService] [node_s0] [curie/PDuZqTZQROytGLowXGMxhA] create_mapping [TYPE_0]
[2018-10-31T04:06:40,030][INFO ][o.a.b.s.i.e.ElasticsearchIOTest] [ElasticsearchIOTest#testWriteFullAddressing]: cleaning up after test
[2018-10-31T04:06:40,185][INFO ][o.e.c.m.MetaDataDeleteIndexService] [node_s0] [bohr/9YTwB1yvTYKf9YjYCmHjwg] deleting index
[2018-10-31T04:06:40,185][INFO ][o.e.c.m.MetaDataDeleteIndexService] [node_s0] [copernicus/NzCZssInSiOdZKTmLCoXRw] deleting index
[2018-10-31T04:06:40,185][INFO ][o.e.c.m.MetaDataDeleteIndexService] [node_s0] [maxwell/-RZ32NbRRZWaGaVfaptFIA] deleting index
[2018-10-31T04:06:40,185][INFO ][o.e.c.m.MetaDataDeleteIndexService] [node_s0] [pasteur/832OwzleRSOHsWx85vOH-w] deleting index
[2018-10-31T04:06:40,185][INFO ][o.e.c.m.MetaDataDeleteIndexService] [node_s0] [einstein/2lgF5Vj6Ti2KTS-pYSzv3Q] deleting index
[2018-10-31T04:06:40,185][INFO ][o.e.c.m.MetaDataDeleteIndexService] [node_s0] [newton/bjnImLt_QguBGEFH9lBJ6Q] deleting index
[2018-10-31T04:06:40,185][INFO ][o.e.c.m.MetaDataDeleteIndexService] [node_s0] [darwin/g_sIfS5aQwi6BAXw_--vgw] deleting index
[2018-10-31T04:06:40,185][INFO ][o.e.c.m.MetaDataDeleteIndexService] [node_s0] [galilei/Vn1b8XXVSAmrTb5BVe2IJQ] deleting index
[2018-10-31T04:06:40,185][INFO ][o.e.c.m.MetaDataDeleteIndexService] [node_s0] [curie/PDuZqTZQROytGLowXGMxhA] deleting index
[2018-10-31T04:06:40,185][INFO ][o.e.c.m.MetaDataDeleteIndexService] [node_s0] [faraday/vIMYG8vpTQKqNkyajcFOxw] deleting index
[2018-10-31T04:06:40,801][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node_s0] removing template [random_index_template]
[2018-10-31T04:06:40,811][INFO ][o.a.b.s.i.e.ElasticsearchIOTest] [ElasticsearchIOTest#testWriteFullAddressing]: cleaned up after test
[2018-10-31T04:06:40,811][INFO ][o.a.b.s.i.e.ElasticsearchIOTest] [testWriteFullAddressing]: after test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So perhaps it is just too tight a timeout?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13195233">BEAM-5925</key>
            <summary>Test flake in ElasticsearchIOTest.testWriteFullAddressing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10101" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">P1</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wouts">Wout Scheepers</assignee>
                                    <reporter username="kenn">Kenneth Knowles</reporter>
                        <labels>
                            <label>flake</label>
                    </labels>
                <created>Tue, 30 Oct 2018 21:19:24 +0000</created>
                <updated>Tue, 19 May 2020 15:52:18 +0000</updated>
                            <resolved>Wed, 16 Jan 2019 09:25:04 +0000</resolved>
                                                    <fixVersion>2.10.0</fixVersion>
                                    <component>io-java-elasticsearch</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7200">2h</timespent>
                                <comments>
                            <comment id="16669345" author="kenn" created="Tue, 30 Oct 2018 21:25:09 +0000"  >&lt;p&gt;To be clear, this is v6: &lt;tt&gt;:beam-sdks-java-io-elasticsearch-tests-6:test&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16669346" author="kenn" created="Tue, 30 Oct 2018 21:25:37 +0000"  >&lt;p&gt;I&apos;m going to take a minute to see if I can just increase the timeout.&lt;/p&gt;</comment>
                            <comment id="16669429" author="kenn" created="Tue, 30 Oct 2018 23:26:58 +0000"  >&lt;p&gt;Looked into it, and I couldn&apos;t quite figure out what is going on, but I don&apos;t think adding a timeout (which would be to the ES RetryConfiguration I think) is the issue. Do &lt;tt&gt;:beam-sdks-java-io-elasticsearch-tests-2:test&lt;/tt&gt;, &lt;tt&gt;:beam-sdks-java-io-elasticsearch-tests-5:test&lt;/tt&gt;, and &lt;tt&gt;:beam-sdks-java-io-elasticsearch-tests-6:test&lt;/tt&gt; have some accidental conflict in their clusters or teardown? I see they use different indices...&lt;/p&gt;</comment>
                            <comment id="16670115" author="echauchot" created="Wed, 31 Oct 2018 13:36:07 +0000"  >&lt;p&gt;Thanks Kenn for pointing out. It has been a lot of flakiness lately with ESIO v6. I&apos;ll take a look at them&lt;/p&gt;</comment>
                            <comment id="16677858" author="echauchot" created="Wed, 7 Nov 2018 08:50:04 +0000"  >&lt;p&gt;I have very little availability to work on ES6 &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dattran.vn01&quot; class=&quot;user-hover&quot; rel=&quot;dattran.vn01&quot;&gt;dattran.vn01&lt;/a&gt; can you take a look at this flaky test? I cannot assign you the ticket. CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=timrobertson100&quot; class=&quot;user-hover&quot; rel=&quot;timrobertson100&quot;&gt;timrobertson100&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16677881" author="dattran.vn01" created="Wed, 7 Nov 2018 09:13:42 +0000"  >&lt;p&gt;Let me check &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echauchot&quot; class=&quot;user-hover&quot; rel=&quot;echauchot&quot;&gt;echauchot&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16677889" author="timrobertson100" created="Wed, 7 Nov 2018 09:18:25 +0000"  >&lt;p&gt;CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wouts&quot; class=&quot;user-hover&quot; rel=&quot;wouts&quot;&gt;wouts&lt;/a&gt; too, a new ES contributor who is also looking at timeouts in his environment&#160;&lt;/p&gt;</comment>
                            <comment id="16678166" author="wouts" created="Wed, 7 Nov 2018 12:44:37 +0000"  >&lt;p&gt;I&apos;m certain the retryConfiguration does not take care of RestClient listener timeouts, as they still&#160;show&#160;up when trying to stream 40M documents with a retryConfig set.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=timrobertson100&quot; class=&quot;user-hover&quot; rel=&quot;timrobertson100&quot;&gt;timrobertson100&lt;/a&gt; suggested me to try again with an increased timeout of the RestClient:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
RestClient createClient() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
...
...
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; restClientBuilder
.setRequestConfigCallback(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RestClientBuilder.RequestConfigCallback() {
@Override
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; RequestConfig.Builder customizeRequestConfig(RequestConfig.Builder requestConfigBuilder)

{ &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; requestConfigBuilder.setConnectTimeout(600000) .setSocketTimeout(600000); }

})
.setMaxRetryTimeoutMillis(600000)
.build();
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This worked for me. My elastic dev cluster consists of one node, and it took my dataflow job 1h45 min to stream 40M docs with 5 workers.&lt;br/&gt;
 Hope this helps&lt;/p&gt;</comment>
                            <comment id="16680186" author="chamikara" created="Thu, 8 Nov 2018 18:57:00 +0000"  >&lt;p&gt;Another timeout here but from a different location:&#160;&lt;a href=&quot;https://scans.gradle.com/s/33iongbzxsfy4/tests/fo2bghfaj5ysq-nxssse2hlcccy?openStackTraces=WzEsMl0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://scans.gradle.com/s/33iongbzxsfy4/tests/fo2bghfaj5ysq-nxssse2hlcccy?openStackTraces=WzEsMl0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16686569" author="echauchot" created="Wed, 14 Nov 2018 14:20:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wouts&quot; class=&quot;user-hover&quot; rel=&quot;wouts&quot;&gt;wouts&lt;/a&gt; assigning to you as you started to work on that. Tell me is you need help. I&apos;ll take a look at the other test flakes&lt;/p&gt;</comment>
                            <comment id="16707173" author="echauchot" created="Mon, 3 Dec 2018 13:03:51 +0000"  >&lt;p&gt;Waiting a week to close this ticket, just to see if PR &lt;a href=&quot;https://github.com/apache/beam/pull/7065&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/7065&lt;/a&gt;&#160;fixes the flakiness. It should fix it as the problem was a timeout.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16743787" author="echauchot" created="Wed, 16 Jan 2019 09:25:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kenn&quot; class=&quot;user-hover&quot; rel=&quot;kenn&quot;&gt;kenn&lt;/a&gt; I was waiting for some time to see if this flake&#160;is fixed with Wout&apos;s PR. It&#160;is indeed already fixed, I just forgot to close the ticket so I&apos;m targeting 2.10.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 43 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ztk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>