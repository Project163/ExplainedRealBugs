<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 11:09:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-9822] SpannerIO: Reduce memory usage - especially when streaming</title>
                <link>https://issues.apache.org/jira/browse/BEAM-9822</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;SpannerIO uses a lot of memory. &lt;br/&gt;
In Streaming Dataflow, it uses many times as much (because dataflow creates many worker threads)&lt;/p&gt;

&lt;p&gt;Lower the memory use, and change default parameters during streaming to use smaller batches and disable grouping.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13301102">BEAM-9822</key>
            <summary>SpannerIO: Reduce memory usage - especially when streaming</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nielm">Niel Markwick</assignee>
                                    <reporter username="nielm">Niel Markwick</reporter>
                        <labels>
                            <label>google-cloud-spanner</label>
                    </labels>
                <created>Sun, 26 Apr 2020 16:26:30 +0000</created>
                <updated>Thu, 21 May 2020 01:25:00 +0000</updated>
                            <resolved>Thu, 21 May 2020 01:25:00 +0000</resolved>
                                    <version>2.20.0</version>
                    <version>2.21.0</version>
                                    <fixVersion>2.22.0</fixVersion>
                                    <component>io-java-gcp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="37200">10h 20m</timespent>
                                <comments>
                            <comment id="17093723" author="ibzib" created="Mon, 27 Apr 2020 16:39:16 +0000"  >&lt;p&gt;Marking fix version as 2.21 indicates that this issue should block the release. Since the 2.21 release is already in progress, please either remove the fix version or provide some justification as to why this is a blocking change (usually blocking changes are limited to regressions).&lt;/p&gt;</comment>
                            <comment id="17111506" author="bhulette" created="Tue, 19 May 2020 20:27:49 +0000"  >&lt;p&gt;Spoke with Niel about this offline. This actually does represent a (long-standing) regression where streaming writes to SpannerIO have high latency and tend to OOM after a change in Beam 2.4.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nielm&quot; class=&quot;user-hover&quot; rel=&quot;nielm&quot;&gt;nielm&lt;/a&gt; I feel ok merging #11529 and #11532 since they&apos;re relatively small diffs and I have a handle on them. But #11570 is much bigger and I think it&apos;s unlikely we&apos;ll get it reviewed today or tomorrow. Is it ok if that one doesn&apos;t make it into 2.22? It seems the first two should be sufficient to unblock streaming spanner writes.&lt;/p&gt;

&lt;p&gt;If you are ok with waiting on #11570, I think we should pull out the doc changes from it into a separate PR that we can merge tomorrow before the release cut (and this could include an update to CHANGES.md as well). How does that sound?&lt;/p&gt;</comment>
                            <comment id="17112441" author="nielm" created="Wed, 20 May 2020 16:50:59 +0000"  >&lt;p&gt;#11570 does make a big reduction to the memory use of the transform in general, so would help a lot for both bounded and unbounded...&lt;/p&gt;

&lt;p&gt;But the other 2 resolve the immediate issue for streaming&lt;/p&gt;</comment>
                            <comment id="17112565" author="bhulette" created="Wed, 20 May 2020 19:46:58 +0000"  >&lt;p&gt;Filed &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-10047&quot; title=&quot;SpannerIO: Combine sorting and batching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-10047&quot;&gt;&lt;del&gt;BEAM-10047&lt;/del&gt;&lt;/a&gt; for PR #11570&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13306310">BEAM-10047</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0e394:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>