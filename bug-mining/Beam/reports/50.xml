<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:39:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-452] Implement DoFn per-instance setup and teardown methods</title>
                <link>https://issues.apache.org/jira/browse/BEAM-452</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://docs.google.com/document/d/1LLQqggSePURt3XavKBGV7SZJYQ4NW8yCu63lBchzMRk/edit&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.google.com/document/d/1LLQqggSePURt3XavKBGV7SZJYQ4NW8yCu63lBchzMRk/edit&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-38&quot; title=&quot;Reuse DoFns across multiple bundles rather than deserializing per-bundle&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-38&quot;&gt;&lt;del&gt;BEAM-38&lt;/del&gt;&lt;/a&gt; permits DoFns to be reused across bundles. DoFn instances may need to do per-instance setup and teardown, and to avoid redoing the work per-bundle, the system should provide hooks to call before a DoFn is first used and after it will no longer be used.&lt;/p&gt;

&lt;p&gt;DoFn#setup is called before any other calls to DoFn methods. DoFn#teardown is called after any method throws an exception, or when the runner will no longer use a DoFn instance (e.g. when it evicts it from a cache).&lt;/p&gt;

&lt;p&gt;Runners must call these methods appropriately in all cases (including if a DoFn is used exactly once, for a single bundle, and discarded).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12989553">BEAM-452</key>
            <summary>Implement DoFn per-instance setup and teardown methods</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tgroh">Thomas Groh</assignee>
                                    <reporter username="tgroh">Thomas Groh</reporter>
                        <labels>
                            <label>Done</label>
                    </labels>
                <created>Thu, 14 Jul 2016 19:54:24 +0000</created>
                <updated>Tue, 6 Oct 2020 21:53:14 +0000</updated>
                            <resolved>Mon, 29 Aug 2016 22:45:57 +0000</resolved>
                                                    <fixVersion>0.3.0-incubating</fixVersion>
                                    <component>runner-dataflow</component>
                    <component>runner-direct</component>
                    <component>runner-flink</component>
                    <component>runner-spark</component>
                    <component>sdk-java-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15384666" author="githubbot" created="Tue, 19 Jul 2016 18:46:25 +0000"  >&lt;p&gt;GitHub user tgroh opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/690&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/690&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-452&quot; title=&quot;Implement DoFn per-instance setup and teardown methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-452&quot;&gt;&lt;del&gt;BEAM-452&lt;/del&gt;&lt;/a&gt; Add DoFn setup and teardown methods&lt;/p&gt;

&lt;p&gt;    Be sure to do all of the following to help us incorporate your contribution&lt;br/&gt;
    quickly and easily:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Make sure the PR title is formatted like:&lt;br/&gt;
       `&lt;a href=&quot;#&amp;gt;&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;BEAM-&amp;lt;Jira issue #&amp;gt;&lt;/a&gt; Description of pull request`&lt;/li&gt;
	&lt;li&gt;[ ] Make sure tests pass via `mvn clean verify`. (Even better, enable&lt;br/&gt;
           Travis-CI on your fork and ensure the whole test matrix passes).&lt;/li&gt;
	&lt;li&gt;[ ] Replace `&amp;lt;Jira issue #&amp;gt;` in the title with the actual Jira issue&lt;br/&gt;
           number, if there is one.&lt;/li&gt;
	&lt;li&gt;[ ] If this contribution is large, please file an Apache&lt;br/&gt;
           &lt;span class=&quot;error&quot;&gt;&amp;#91;Individual Contributor License Agreement&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.apache.org/licenses/icla.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/licenses/icla.txt&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    &amp;#8212;&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tgroh/incubator-beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tgroh/incubator-beam&lt;/a&gt; dofn_setup_teardown&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/690.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/690.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #690&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d7c4440d23278135c86b193c2d25ac512d5aa5d2&lt;br/&gt;
Author: Thomas Groh &amp;lt;tgroh@google.com&amp;gt;&lt;br/&gt;
Date:   2016-06-28T22:44:49Z&lt;/p&gt;

&lt;p&gt;    Use the ParDo Application to Cache DoFns&lt;/p&gt;

&lt;p&gt;    A DoFn application is the scope of reuse.&lt;/p&gt;

&lt;p&gt;    Factor CloningThreadLocal as the top-level class instead of&lt;br/&gt;
    SerializableCloningThreadLocalCacheLoader, and extract the Fn from the&lt;br/&gt;
    AppliedPTransform when loading an absent element.&lt;/p&gt;

&lt;p&gt;commit 6f7d10e303a0cb3d86ad0f2c60db5ed1918420d1&lt;br/&gt;
Author: Thomas Groh &amp;lt;tgroh@google.com&amp;gt;&lt;br/&gt;
Date:   2016-07-15T17:51:24Z&lt;/p&gt;

&lt;p&gt;    Make TransformEvaluatorFactory reuse Explicit&lt;/p&gt;

&lt;p&gt;    Transform Evaluator Factories must be reused for the entire execution of&lt;br/&gt;
    a Pipeline and must not be reused across pipelines.&lt;/p&gt;

&lt;p&gt;    Remove EvaluatorKey, and key explicitly by the transform application.&lt;/p&gt;

&lt;p&gt;commit f2c0ba67920ba2e2772ddacc808c5adf38949bc7&lt;br/&gt;
Author: Thomas Groh &amp;lt;tgroh@google.com&amp;gt;&lt;br/&gt;
Date:   2016-07-15T18:27:00Z&lt;/p&gt;

&lt;p&gt;    Add TransformEvaluatorFactory#cleanup&lt;/p&gt;

&lt;p&gt;    This cleans up any state stored within the Transform Evaluator Factory.&lt;/p&gt;

&lt;p&gt;commit 1f35c4b64aae264d800326421db475be260de2c9&lt;br/&gt;
Author: Thomas Groh &amp;lt;tgroh@google.com&amp;gt;&lt;br/&gt;
Date:   2016-07-14T21:51:02Z&lt;/p&gt;

&lt;p&gt;    Add DoFn#setup and DoFn#teardown&lt;/p&gt;

&lt;p&gt;    These methods are called to do expensive setup work, and to clean up a&lt;br/&gt;
    DoFn before it is discarded.&lt;/p&gt;

&lt;p&gt;commit 797633a2209a59736650e255be517ec73137e94d&lt;br/&gt;
Author: Thomas Groh &amp;lt;tgroh@google.com&amp;gt;&lt;br/&gt;
Date:   2016-07-19T18:03:15Z&lt;/p&gt;

&lt;p&gt;    Replace CloningThreadLocal with DoFnLifecycleManager&lt;/p&gt;

&lt;p&gt;    This is a more focused interface that interacts with a DoFn before it&lt;br/&gt;
    is available for use and after it has completed and the reference is&lt;br/&gt;
    lost. It is required to properly support setup and teardown, as the&lt;br/&gt;
    fields in a ThreadLocal cannot all be cleaned up without additional&lt;br/&gt;
    tracking.&lt;/p&gt;

&lt;p&gt;    Part of &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-452&quot; title=&quot;Implement DoFn per-instance setup and teardown methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-452&quot;&gt;&lt;del&gt;BEAM-452&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;commit 7bf0b4185d8303b03d47fb99691fd63ae57ad887&lt;br/&gt;
Author: Thomas Groh &amp;lt;tgroh@google.com&amp;gt;&lt;br/&gt;
Date:   2016-07-19T18:08:18Z&lt;/p&gt;

&lt;p&gt;    fixup! Add DoFn#setup and DoFn#teardown&lt;/p&gt;

&lt;p&gt;    Handle DoFn setup and teardown in DoFnLifecycleManager&lt;/p&gt;

&lt;p&gt;    This ensures that the DirectRunner properly interacts with DoFn setup&lt;br/&gt;
    and teardown methods.&lt;/p&gt;

&lt;p&gt;commit 9d1b2c142aff0cb638c027567dda18169b2f8795&lt;br/&gt;
Author: Thomas Groh &amp;lt;tgroh@google.com&amp;gt;&lt;br/&gt;
Date:   2016-07-19T18:06:21Z&lt;/p&gt;

&lt;p&gt;    fixup! Add DoFn#setup and DoFn#teardown&lt;/p&gt;

&lt;p&gt;    Call DoFn#setup and #teardown in Flink and Spark&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15421690" author="githubbot" created="Mon, 15 Aug 2016 21:17:23 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-beam/pull/690&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/690&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15447298" author="tgroh" created="Mon, 29 Aug 2016 22:45:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/incubator-beam/pull/690&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/690&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/incubator-beam/pull/893&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-beam/pull/893&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30zqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>