<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:55:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-6279] Failures in ElasticSearchIOTest: testWriteRetryValidRequest (versions 2 &amp; 5) testDefaultRetryPredicate (version 5)</title>
                <link>https://issues.apache.org/jira/browse/BEAM-6279</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/beam_PreCommit_Java_Cron/730/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/beam_PreCommit_Java_Cron/730/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://scans.gradle.com/s/6rpbvgwx2nk7c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://scans.gradle.com/s/6rpbvgwx2nk7c&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I don&apos;t see recent changes, so thinking this is a flake.&lt;/p&gt;

&lt;p&gt;testDefaultRetryPredicate:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.AssertionError
:&#160;
All incoming requests on node [node_s0] should have finished. Expected 0 but got 2540 Expected: &amp;lt;0L&amp;gt; but: was &amp;lt;2540L&amp;gt;
at&#160;__randomizedtesting.SeedInfo.seed([4CF46FDC92DC07B8:B39A5DDFBC85274E]:0)
at&#160;org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)
at&#160;org.junit.Assert.assertThat(Assert.java:956)
at&#160;org.elasticsearch.test.InternalTestCluster.lambda$assertRequestsFinished$17(InternalTestCluster.java:2086)
at&#160;org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:705)
at&#160;org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:679)
at&#160;org.elasticsearch.test.InternalTestCluster.assertRequestsFinished(InternalTestCluster.java:2083)
at&#160;org.elasticsearch.test.InternalTestCluster.assertAfterTest(InternalTestCluster.java:2062)
at&#160;org.elasticsearch.test.ESIntegTestCase.afterInternal(ESIntegTestCase.java:581)
at&#160;org.elasticsearch.test.ESIntegTestCase.cleanUpCluster(ESIntegTestCase.java:2054)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This looks like an internal assertion (aka &lt;tt&gt;checkState&lt;/tt&gt;) failed and the cluster became unhealthy, maybe?&lt;/p&gt;

&lt;p&gt;&#160;testWriteRetryValidRequest:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.beam.sdk.Pipeline$PipelineExecutionException
:&#160;
java.io.IOException: listener timeout after waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; [90000] ms
Open stacktrace
Caused by:&#160;
java.io.IOException
:&#160;
listener timeout after waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; [90000] ms
Close stacktrace
at&#160;org.elasticsearch.client.RestClient$SyncResponseListener.get(RestClient.java:899)
at&#160;org.elasticsearch.client.RestClient.performRequest(RestClient.java:227)
at&#160;org.elasticsearch.client.RestClient.performRequest(RestClient.java:321)
at&#160;org.apache.beam.sdk.io.elasticsearch.ElasticsearchIO$Write$WriteFn.flushBatch(ElasticsearchIO.java:1285)
at&#160;org.apache.beam.sdk.io.elasticsearch.ElasticsearchIO$Write$WriteFn.finishBundle(ElasticsearchIO.java:1260)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13205749">BEAM-6279</key>
            <summary>Failures in ElasticSearchIOTest: testWriteRetryValidRequest (versions 2 &amp; 5) testDefaultRetryPredicate (version 5)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10101" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">P1</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="echauchot">Etienne Chauchot</assignee>
                                    <reporter username="kenn">Kenneth Knowles</reporter>
                        <labels>
                            <label>flake</label>
                    </labels>
                <created>Thu, 20 Dec 2018 15:05:21 +0000</created>
                <updated>Sat, 16 May 2020 13:29:44 +0000</updated>
                            <resolved>Wed, 16 Jan 2019 15:03:09 +0000</resolved>
                                                    <fixVersion>Not applicable</fixVersion>
                                    <component>io-java-elasticsearch</component>
                    <component>test-failures</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="6000">1h 40m</timespent>
                                <comments>
                            <comment id="16726652" author="echauchot" created="Fri, 21 Dec 2018 10:59:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=timrobertson100&quot; class=&quot;user-hover&quot; rel=&quot;timrobertson100&quot;&gt;timrobertson100&lt;/a&gt; can you take care of them? I fixed the last flakes, but now I don&apos;t have time&lt;/p&gt;</comment>
                            <comment id="16726665" author="echauchot" created="Fri, 21 Dec 2018 11:16:39 +0000"  >&lt;p&gt;Please note for point 2 that we have the ability now to set the timeout at the Elasticsearch client level .&lt;/p&gt;

&lt;p&gt;For point one, jenkins might be overloader and ES embedded cluster became unhealthy. As a defensive action I would recommend configuring the embedded cluster for IO v5 and IO v6 to&#160;fewer nodes. No need for IO v2, because there is no cluster because I could use embedded node that was removed by the ES team in favor ES test framework that provides an embedded cluster&lt;/p&gt;</comment>
                            <comment id="16743506" author="kenn" created="Wed, 16 Jan 2019 01:18:05 +0000"  >&lt;p&gt;How is this going now? If you aren&apos;t actively working on it, perhaps release it for someone else to see about deflaking.&lt;/p&gt;</comment>
                            <comment id="16743772" author="echauchot" created="Wed, 16 Jan 2019 09:01:59 +0000"  >&lt;p&gt;Hi Kenn, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=timrobertson100&quot; class=&quot;user-hover&quot; rel=&quot;timrobertson100&quot;&gt;timrobertson100&lt;/a&gt; is in holidays AFAIK.&#160; I&apos;ll take care of this ticket.&lt;/p&gt;</comment>
                            <comment id="16744058" author="echauchot" created="Wed, 16 Jan 2019 13:54:56 +0000"  >&lt;p&gt;done, PR submitted&lt;/p&gt;</comment>
                            <comment id="16744096" author="echauchot" created="Wed, 16 Jan 2019 14:31:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kenn&quot; class=&quot;user-hover&quot; rel=&quot;kenn&quot;&gt;kenn&lt;/a&gt; as you&apos;re cutting the release branch,&#160;should I target the fix to 2.10 and cherry pick commits to 2.10 release branch ? Maybe for a simple flakiness fix it&apos;s not worth it, WDYT ?&lt;/p&gt;</comment>
                            <comment id="16744115" author="kenn" created="Wed, 16 Jan 2019 14:54:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echauchot&quot; class=&quot;user-hover&quot; rel=&quot;echauchot&quot;&gt;echauchot&lt;/a&gt; if it is a fix just in the test, then it is fine to just set fix version to Not Applicable as it does not need to be tracked in release notes or anything.&lt;/p&gt;</comment>
                            <comment id="16744118" author="kenn" created="Wed, 16 Jan 2019 14:55:17 +0000"  >&lt;p&gt;I just was following my own suggestion of making sure flakes have a Fix Version when they are open to make sure they get looked at before release - to make sure the flake label is not hiding an important issue that could block a release.&lt;/p&gt;</comment>
                            <comment id="16744124" author="echauchot" created="Wed, 16 Jan 2019 15:01:03 +0000"  >&lt;p&gt;ok I understand, I&apos;ll close it and target &quot;not applicable&quot; version.&lt;/p&gt;</comment>
                            <comment id="16744128" author="echauchot" created="Wed, 16 Jan 2019 15:03:09 +0000"  >&lt;p&gt;closing,&#160;we would&#160;reopen it if other errors come up. I no more wait a week for flakiness fixes to avoid forgetting a ticket.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|u0071k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>