<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 10:45:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[BEAM-2447] Reintroduce DoFn.ProcessContinuation</title>
                <link>https://issues.apache.org/jira/browse/BEAM-2447</link>
                <project id="12319527" key="BEAM">Beam</project>
                    <description>&lt;p&gt;ProcessContinuation.resume() is useful for tailing files - when we reach current EOF, we want to voluntarily suspend the process() call rather than wait for runner to checkpoint us.&lt;/p&gt;

&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-1903&quot; title=&quot;Splittable DoFn should report watermarks via ProcessContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-1903&quot;&gt;&lt;del&gt;BEAM-1903&lt;/del&gt;&lt;/a&gt;, DoFn.ProcessContinuation was removed because there was ambiguity about the semantics of resume() especially w.r.t. the following situation described in &lt;a href=&quot;https://docs.google.com/document/d/1BGc8pM1GOvZhwR9SARSVte-20XEoBUxrGJ5gTWXdv3c/edit&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.google.com/document/d/1BGc8pM1GOvZhwR9SARSVte-20XEoBUxrGJ5gTWXdv3c/edit&lt;/a&gt; : the runner has taken a checkpoint on the tracker, and then the ProcessElement call returns resume() signaling that the work is still not done - then there&apos;s 2 checkpoints to deal with.&lt;/p&gt;

&lt;p&gt;Instead, the proper way to refine this semantics is:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;After checkpoint() on a RestrictionTracker, the tracker MUST fail all subsequent tryClaim() calls, and MUST succeed in checkDone().&lt;/li&gt;
	&lt;li&gt;After a failed tryClaim() call, the ProcessElement method MUST return stop()&lt;/li&gt;
	&lt;li&gt;So ProcessElement can return resume() only &lt;b&gt;instead&lt;/b&gt; of doing tryClaim()&lt;/li&gt;
	&lt;li&gt;Then, if the runner has already taken a checkpoint but tracker has returned resume(), we do not need to take a new checkpoint - the one already taken already accurately describes the remainder of the work.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13079605">BEAM-2447</key>
            <summary>Reintroduce DoFn.ProcessContinuation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10102" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">P2</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jkff">Eugene Kirpichov</assignee>
                                    <reporter username="jkff">Eugene Kirpichov</reporter>
                        <labels>
                            <label>Done</label>
                    </labels>
                <created>Tue, 13 Jun 2017 23:55:42 +0000</created>
                <updated>Tue, 6 Oct 2020 21:54:15 +0000</updated>
                            <resolved>Wed, 12 Jul 2017 23:30:31 +0000</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                    <component>sdk-java-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16049718" author="githubbot" created="Wed, 14 Jun 2017 22:00:04 +0000"  >&lt;p&gt;GitHub user jkff opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3360&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3360&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-2447&quot; title=&quot;Reintroduce DoFn.ProcessContinuation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-2447&quot;&gt;&lt;del&gt;BEAM-2447&lt;/del&gt;&lt;/a&gt; Reintroduces DoFn.ProcessContinuation&lt;/p&gt;

&lt;p&gt;    This is a revert of &lt;a href=&quot;https://github.com/apache/beam/pull/2455&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/2455&lt;/a&gt;, amended according to the new semantics described in &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-2447&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BEAM-2447&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;    This will require performing a traditional Dataflow worker dance beforehand, to change the signature of DoFnInvoker. I&apos;ll do that in a separate surgical PR to be submitted before this one, but the current PR is ready for review anyway.&lt;/p&gt;

&lt;p&gt;    R: @tgroh &lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jkff/incubator-beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jkff/incubator-beam&lt;/a&gt; process-cont&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3360.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3360.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3360&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0c1d725d2a1bf490ae7859c6906d7f74e3b8ffdd&lt;br/&gt;
Author: Eugene Kirpichov &amp;lt;kirpichov@google.com&amp;gt;&lt;br/&gt;
Date:   2017-06-13T23:50:35Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-2447&quot; title=&quot;Reintroduce DoFn.ProcessContinuation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-2447&quot;&gt;&lt;del&gt;BEAM-2447&lt;/del&gt;&lt;/a&gt; Reintroduces DoFn.ProcessContinuation&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16052430" author="githubbot" created="Fri, 16 Jun 2017 21:57:06 +0000"  >&lt;p&gt;GitHub user jkff opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3383&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3383&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/BEAM-2447&quot; title=&quot;Reintroduce DoFn.ProcessContinuation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEAM-2447&quot;&gt;&lt;del&gt;BEAM-2447&lt;/del&gt;&lt;/a&gt; Reintroduces DoFn.ProcessContinuation (Dataflow worker compatibility part)&lt;/p&gt;

&lt;p&gt;    Prerequisite for #3360. Will need a Dataflow worker update too.&lt;/p&gt;

&lt;p&gt;    R: @tgroh &lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jkff/incubator-beam&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jkff/incubator-beam&lt;/a&gt; process-cont-base&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3383.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3383.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3383&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 71599e1a7f0766ac5e7ea100f8bbc69152e44860&lt;br/&gt;
Author: Eugene Kirpichov &amp;lt;kirpichov@google.com&amp;gt;&lt;br/&gt;
Date:   2017-06-16T21:56:07Z&lt;/p&gt;

&lt;p&gt;    Reintroduces DoFn.ProcessContinuation (Dataflow worker compatibility part)&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16057882" author="kenn" created="Wed, 21 Jun 2017 17:28:25 +0000"  >&lt;p&gt;Is &quot;After a failed tryClaim() call, the ProcessElement method MUST return stop()&quot; necessary? What is the pitfall of the runner ignoring the value and treating everything as stop()?&lt;/p&gt;</comment>
                            <comment id="16064043" author="githubbot" created="Tue, 27 Jun 2017 00:34:37 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3383&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3383&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16064054" author="jkff" created="Tue, 27 Jun 2017 00:52:53 +0000"  >&lt;p&gt;If the runner did not already take a checkpoint, and the DoFn returns resume(), and the runner treats it as stop(), then the DoFn won&apos;t be resumed even though it should.&lt;/p&gt;

&lt;p&gt;Perhaps you meant treat everything as resume()? In that case, the DoFn will never terminate, even if it&apos;s done with the restriction, because it&apos;ll constantly be resumed and will keep producing empty checkpoints.&lt;/p&gt;</comment>
                            <comment id="16064074" author="kenn" created="Tue, 27 Jun 2017 01:14:43 +0000"  >&lt;p&gt;You have forbidden the behavior of returning &lt;tt&gt;resume()&lt;/tt&gt; after a failed &lt;tt&gt;tryClaim()&lt;/tt&gt; call. I am suggesting to remove the proscription by making the one and only allowed behavior automatically followed.&lt;/p&gt;</comment>
                            <comment id="16084903" author="githubbot" created="Wed, 12 Jul 2017 23:29:46 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/beam/pull/3360&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/beam/pull/3360&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3g8hj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>