<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:25:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[RAVE-313] Incorrect dependency scopes for slf4j and log4j jars</title>
                <link>https://issues.apache.org/jira/browse/RAVE-313</link>
                <project id="12311290" key="RAVE">Rave</project>
                    <description>&lt;p&gt;I accidentally discovered the problem when I noticed that the rave-portal-resources war, which is intentionally a shallow war (so: without any bundled dependencies/jars) currently has the slf4j-api and jcl-over-slf4j jars embedded: wrong!&lt;br/&gt;
These dependencies are pulled in through the rave-portal-web dependency, even while that dependency is included &lt;b&gt;only&lt;/b&gt; as provided (to support IDE tag lib lookup).&lt;/p&gt;

&lt;p&gt;The real problem however is that jcl-over-slf4j is defined in rave-project in the dependency management section with scope runtime.&lt;br/&gt;
That is on a &apos;nearer&apos; (and stronger: runtime) dependency resolution path than the transitive dependencies from rave-portal-web, thus resulting these jars (slf4j-api through jcl-over-slf4j) to be included by Maven (with scope runtime).&lt;/p&gt;

&lt;p&gt;The fix is to define the jcl-over-slf4j in the rave-project dependency-management section with default scope (compile).&lt;br/&gt;
That way, the provided scope of rave-portal-web on rave-portal-resources is &apos;stronger&apos; and these jars no longer will be bundled with that (intentionally) shallow war.&lt;/p&gt;

&lt;p&gt;And, then I noticed the scopes for log4j and slf4j-log4j12 also were incorrectly using scope runtime.&lt;br/&gt;
AFAIK, all this is my own doing, so mea culpa.&lt;/p&gt;

&lt;p&gt;However, for the log4j and slf4j-log4j12 dependencies the configuration is wrong for a slightly different reason.&lt;br/&gt;
These logging &lt;b&gt;implementation&lt;/b&gt; jars should not be &apos;enforced&apos; automatically: the whole point of using slf4j is that it allows you to choose which logging implementation to use.&lt;br/&gt;
So, bundling these implementation jars should &lt;b&gt;only&lt;/b&gt; be made for the final packaging, e.g. (in our case) the rave-portal war.&lt;br/&gt;
Both scope compile and runtime would &apos;enforce&apos; bundling these jars too early, and while scope provided would not do this, it does however &apos;expose&apos; these jars API at compile time which also is undesirable.&lt;/p&gt;

&lt;p&gt;The (only) proper solution therefore is configuring these implementation jars in the dependency management with scope test.&lt;br/&gt;
This ensures that only test classes will be &apos;exposed&apos; to these implementation APIs (acceptable).&lt;br/&gt;
But it also means that they then require to be &lt;b&gt;explicitly&lt;/b&gt; defined as dependencies for the final packaging on rave-portal, preferably with scope runtime (instead of compile).&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12527852">RAVE-313</key>
            <summary>Incorrect dependency scopes for slf4j and log4j jars</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="ate">Ate Douma</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Oct 2011 23:56:08 +0000</created>
                <updated>Tue, 22 Nov 2011 16:08:07 +0000</updated>
                            <resolved>Wed, 19 Oct 2011 23:59:32 +0000</resolved>
                                    <version>0.4-INCUBATING</version>
                                    <fixVersion>0.5-INCUBATING</fixVersion>
                                    <component>build &amp;amp; development</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92112</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1e113:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>290096</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>