<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:17:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LANG-1406] StringIndexOutOfBoundsException in StringUtils.replaceIgnoreCase()</title>
                <link>https://issues.apache.org/jira/browse/LANG-1406</link>
                <project id="12310481" key="LANG">Commons Lang</project>
                    <description>&lt;p&gt;STEPS TO REPRODUCE:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
StringUtils.replaceIgnoreCase(&lt;span class=&quot;code-quote&quot;&gt;&quot;\u0130x&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;, &quot;&quot;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;EXPECTED: &quot;\u0130&quot; is returned.&lt;/p&gt;

&lt;p&gt;ACTUAL: StringIndexOutOfBoundsException&lt;/p&gt;

&lt;p&gt;This happens because the replace method is assuming that text.length() == text.toLowerCase().length(), which is not true for certain characters.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13176106">LANG-1406</key>
            <summary>StringIndexOutOfBoundsException in StringUtils.replaceIgnoreCase()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="michaelryan">Michael Ryan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Aug 2018 12:21:29 +0000</created>
                <updated>Mon, 1 Jun 2020 06:39:41 +0000</updated>
                            <resolved>Wed, 11 Sep 2019 13:44:19 +0000</resolved>
                                                    <fixVersion>3.10</fixVersion>
                                    <component>lang.*</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="14400">4h</timespent>
                                <comments>
                            <comment id="16573108" author="hiukwok" created="Wed, 8 Aug 2018 12:01:56 +0000"  >&lt;p&gt;Hi all,&lt;/p&gt;

&lt;p&gt;After a bit of research, it seem to be a&#160;known issue&#160;when unicode is contained on a String object (&lt;a href=&quot;https://www.quora.com/Is-Javas-toLowercase-string-method-reliable-for-Unicode&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ref&lt;/a&gt; ),&#160;String.toLowerCase() would produce a incorrect result.&lt;/p&gt;

&lt;p&gt;In this case&#160;&quot;\u0130&quot; would become a String object with three char which are &lt;span class=&quot;error&quot;&gt;&amp;#91;&#160;i, &#160;&#775;, x&amp;#93;&lt;/span&gt; instead of &lt;span class=&quot;error&quot;&gt;&amp;#91;&#160;&#304;, x&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;So by given a incorrect result from .toLowCase() method,&#160;StringUtils.replaceIgnoreCase end attempt to access the segment of string which is not exist which is 3 in this case while str.length() is 2.&lt;/p&gt;

&lt;p&gt;The fixture I come up with is replacing the .toLowcase() to .toUpperCase() in order to avoid the mis-interprettion on .toLowerCase while performing case-insensitive comparisons.&lt;/p&gt;


&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16573123" author="githubbot" created="Wed, 8 Aug 2018 12:13:42 +0000"  >&lt;p&gt;GitHub user HiuKwok opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/340&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LANG-1406&quot; title=&quot;StringIndexOutOfBoundsException in StringUtils.replaceIgnoreCase()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LANG-1406&quot;&gt;&lt;del&gt;LANG-1406&lt;/del&gt;&lt;/a&gt;  StringIndexOutOfBoundsException in StringUtils.replaceIgnoreCase&lt;/p&gt;

&lt;p&gt;    Fix for Lang-1406 to avoid any exception while performing String.UTils.replaceIgnoreCase() against uniCode String object. &lt;/p&gt;

&lt;p&gt;    Plz let me if there have any extra things need to be done for this PR since I am the first timer for commons-lang project( add more test case?).&lt;/p&gt;

&lt;p&gt;    All the best&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/HiuKwok/commons-lang&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/HiuKwok/commons-lang&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/340.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/340.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #340&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e0f6c7802b5e721019a602bf30b31c79dbf6d233&lt;br/&gt;
Author: Hiu Kwok &amp;lt;hiufkwok@...&amp;gt;&lt;br/&gt;
Date:   2018-08-08T11:44:51Z&lt;/p&gt;

&lt;p&gt;    toUpperCase() &amp;gt; toLowerCase() to avoid unicode string length miscalculation&lt;/p&gt;

&lt;p&gt;commit 590f90889bf61a5570bd98b78e73410a07d7410b&lt;br/&gt;
Author: Hiu Kwok &amp;lt;hiufkwok@...&amp;gt;&lt;br/&gt;
Date:   2018-08-08T11:46:29Z&lt;/p&gt;

&lt;p&gt;    Assertion for example mentioned on &lt;a href=&quot;https://issues.apache.org/jira/browse/LANG-1406&quot; title=&quot;StringIndexOutOfBoundsException in StringUtils.replaceIgnoreCase()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LANG-1406&quot;&gt;&lt;del&gt;LANG-1406&lt;/del&gt;&lt;/a&gt; Description&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16573137" author="githubbot" created="Wed, 8 Aug 2018 12:22:05 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/340&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://coveralls.io/builds/18383289/badge)](https://coveralls.io/builds/18383289&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://coveralls.io/builds/18383289/badge)](https://coveralls.io/builds/18383289&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Coverage decreased (-0.04%) to 95.243% when pulling *&lt;b&gt;590f90889bf61a5570bd98b78e73410a07d7410b on HiuKwok:master&lt;/b&gt;* into *&lt;b&gt;a36c903d4f1065bc59f5e6d2bb0f9d92a5e71d83 on apache:master&lt;/b&gt;*.&lt;/p&gt;
</comment>
                            <comment id="16573168" author="githubbot" created="Wed, 8 Aug 2018 12:45:19 +0000"  >&lt;p&gt;Github user kinow commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/340&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;m surprised by this bug. Had no idea something like this could happen. Will debug later and see if I can understand why that happens (might have to train my brain to default to always use uppercase instead of lowercase?). Thanks for the pull request, we will review the code and if everything looks OK a committer will merge it.&lt;/p&gt;</comment>
                            <comment id="16574490" author="githubbot" created="Thu, 9 Aug 2018 08:45:56 +0000"  >&lt;p&gt;Github user kinow commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/340&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Oh, that does make sense now. So the first visible character we see is the &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;Latin Capital Letter I with Dot Above&amp;quot;&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://unicode-table.com/en/#0130&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://unicode-table.com/en/#0130&lt;/a&gt;) (see also &lt;span class=&quot;error&quot;&gt;&amp;#91;this other link&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://en.wikipedia.org/wiki/Dotted_and_dotless_I&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://en.wikipedia.org/wiki/Dotted_and_dotless_I&lt;/a&gt;)), and the second an `x`. And doing `toUpperCase()` simply won&apos;t change it as it&apos;s considered already upper case.&lt;/p&gt;

&lt;p&gt;    When doing a `toLowerCase`, it gets translated into two visible characters. The second is the normal `x`. While the first contains two codepoints. I tested in Python, and got the lower case `i` (`print(u&quot;\u0069&quot;)`) followed by a character invisible by itself (`print (u&quot;\u0307&quot;)`).&lt;/p&gt;

&lt;p&gt;    The special/invisible character, is visible when coming after certain letters.&lt;/p&gt;

&lt;p&gt;    ```python&lt;br/&gt;
    &amp;gt;&amp;gt;&amp;gt; print(u&quot;\u0307&quot;)&lt;/p&gt;

&lt;p&gt;    &amp;gt;&amp;gt;&amp;gt; print(u&quot;\u0069\u0307&quot;)&lt;br/&gt;
    i&#775;&lt;br/&gt;
    &amp;gt;&amp;gt;&amp;gt; print(u&quot;\u0068\u0307&quot;)&lt;br/&gt;
    h&#775;&lt;br/&gt;
    &amp;gt;&amp;gt;&amp;gt; print(u&quot;\u0067\u0307&quot;)&lt;br/&gt;
    g&#775;&lt;br/&gt;
    &amp;gt;&amp;gt;&amp;gt; print(u&quot;\u0067\u0307&quot;)&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    When we get these invisible characters, as we have one code point more, the length returned is not 2, but 3. Resulting in exception in this issue.&lt;/p&gt;

&lt;p&gt;    I don&apos;t believe the fix here would fix the reverse case, where we had a lower case, single codepoint, unicode; that would be represented by a two code codepoint. The exception could happen again (I haven&apos;t investigated whether such case exist, but I&apos;m assuming there could be such case - if not now, maybe a character could still be added in future editions).&lt;/p&gt;

&lt;p&gt;    What do you think @HiuKwok ? Any suggestions? I&apos;m not sure if there&apos;s any easy way to fix this case, except by adding a note to the documentation saying that the method is not intended to be used with unicode strings, as it doesn&apos;t handle supplementary characters well. Or maybe we could try to remove the `length()` call around the `StringBuilder`&apos;s near the end of the method...&lt;/p&gt;</comment>
                            <comment id="16574494" author="githubbot" created="Thu, 9 Aug 2018 08:47:12 +0000"  >&lt;p&gt;Github user kinow commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/340#discussion_r208851249&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/340#discussion_r208851249&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/java/org/apache/commons/lang3/StringUtils.java &amp;#8212;&lt;br/&gt;
    @@ -5596,8 +5596,8 @@ private static String replace(final String text, String searchString, final Stri&lt;br/&gt;
              }&lt;br/&gt;
              String searchText = text;&lt;br/&gt;
              if (ignoreCase) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;searchText = text.toLowerCase();&lt;/li&gt;
	&lt;li&gt;searchString = searchString.toLowerCase();&lt;br/&gt;
    +             searchText = text.toUpperCase();&lt;br/&gt;
    +             searchString = searchString.toUpperCase();
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Just leaving a comment here too to have a review here in GitHub. While your example works, as the character is considered already in upper case, the reverse case would still fail after changing from `toLowerCase` to `toUpperCase`. So I think we should find another solution or update the documentation stating how the code works with unicode.&lt;/p&gt;</comment>
                            <comment id="16578129" author="githubbot" created="Mon, 13 Aug 2018 11:24:11 +0000"  >&lt;p&gt;Github user HiuKwok commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/340#discussion_r209574053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/340#discussion_r209574053&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/java/org/apache/commons/lang3/StringUtils.java &amp;#8212;&lt;br/&gt;
    @@ -5596,8 +5596,8 @@ private static String replace(final String text, String searchString, final Stri&lt;br/&gt;
              }&lt;br/&gt;
              String searchText = text;&lt;br/&gt;
              if (ignoreCase) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;searchText = text.toLowerCase();&lt;/li&gt;
	&lt;li&gt;searchString = searchString.toLowerCase();&lt;br/&gt;
    +             searchText = text.toUpperCase();&lt;br/&gt;
    +             searchString = searchString.toUpperCase();
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Hi @kinow, yes you are right after I did try to come up with a draft java main to generate all || most unicode in string and compare it&apos;s length between original, toLowerCase() and to UpperCase().&lt;/p&gt;

&lt;p&gt;    !&lt;span class=&quot;error&quot;&gt;&amp;#91;image&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://user-images.githubusercontent.com/37996731/44028895-032488d4-9f2e-11e8-839b-c1259a182b8e.png&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://user-images.githubusercontent.com/37996731/44028895-032488d4-9f2e-11e8-839b-c1259a182b8e.png&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    It&apos;s seem like no matter which one we pick (toLowerCase || toUpperCase), it would still tend to come up with a incorrect length.&lt;/p&gt;

&lt;p&gt;    Just a quick question what you mean by remove the ```length( )``` mean? Would you mind to specify more on that? &lt;/p&gt;

&lt;p&gt;    Thanks, &lt;/p&gt;</comment>
                            <comment id="16578196" author="githubbot" created="Mon, 13 Aug 2018 12:20:31 +0000"  >&lt;p&gt;Github user kinow commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/340#discussion_r209587514&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/340#discussion_r209587514&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/java/org/apache/commons/lang3/StringUtils.java &amp;#8212;&lt;br/&gt;
    @@ -5596,8 +5596,8 @@ private static String replace(final String text, String searchString, final Stri&lt;br/&gt;
              }&lt;br/&gt;
              String searchText = text;&lt;br/&gt;
              if (ignoreCase) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;searchText = text.toLowerCase();&lt;/li&gt;
	&lt;li&gt;searchString = searchString.toLowerCase();&lt;br/&gt;
    +             searchText = text.toUpperCase();&lt;br/&gt;
    +             searchString = searchString.toUpperCase();
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Oohh, great testing @HiuKwok ! Thanks for sharing here.&lt;/p&gt;

&lt;p&gt;    &amp;gt;Just a quick question what you mean by remove the length( ) mean? Would you mind to specify more on that?&lt;/p&gt;

&lt;p&gt;    Sure. I think there could be a possibility to fix the issue by addressing how the length of the lower&apos;ed/upper&apos;ed text is used &lt;a href=&quot;https://github.com/apache/commons-lang/blob/590f90889bf61a5570bd98b78e73410a07d7410b/src/main/java/org/apache/commons/lang3/StringUtils.java#L5603&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/blob/590f90889bf61a5570bd98b78e73410a07d7410b/src/main/java/org/apache/commons/lang3/StringUtils.java#L5603&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    So maybe there could be another way to work around the way we use the strings lengths, and avoid the exception.&lt;/p&gt;</comment>
                            <comment id="16578478" author="githubbot" created="Mon, 13 Aug 2018 15:43:57 +0000"  >&lt;p&gt;Github user HiuKwok commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/340#discussion_r209659530&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/340#discussion_r209659530&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/java/org/apache/commons/lang3/StringUtils.java &amp;#8212;&lt;br/&gt;
    @@ -5596,8 +5596,8 @@ private static String replace(final String text, String searchString, final Stri&lt;br/&gt;
              }&lt;br/&gt;
              String searchText = text;&lt;br/&gt;
              if (ignoreCase) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;searchText = text.toLowerCase();&lt;/li&gt;
	&lt;li&gt;searchString = searchString.toLowerCase();&lt;br/&gt;
    +             searchText = text.toUpperCase();&lt;br/&gt;
    +             searchString = searchString.toUpperCase();
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    @kinow May be try to store a original text.length before performance any upper || lower case operation and make use of it?&lt;/p&gt;

&lt;p&gt;    haha, it&apos;s just a thought. Would try out later &lt;/p&gt;</comment>
                            <comment id="16579483" author="githubbot" created="Tue, 14 Aug 2018 09:07:11 +0000"  >&lt;p&gt;Github user HiuKwok commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/340#discussion_r209878957&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/340#discussion_r209878957&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/java/org/apache/commons/lang3/StringUtils.java &amp;#8212;&lt;br/&gt;
    @@ -5596,8 +5596,8 @@ private static String replace(final String text, String searchString, final Stri&lt;br/&gt;
              }&lt;br/&gt;
              String searchText = text;&lt;br/&gt;
              if (ignoreCase) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;searchText = text.toLowerCase();&lt;/li&gt;
	&lt;li&gt;searchString = searchString.toLowerCase();&lt;br/&gt;
    +             searchText = text.toUpperCase();&lt;br/&gt;
    +             searchString = searchString.toUpperCase();
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    @kinow It turn out the problem is large than that, because the incorrect length basically affecting the whole method, especially the part which involve parsing inside the while loop.&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/blob/590f90889bf61a5570bd98b78e73410a07d7410b/src/main/java/org/apache/commons/lang3/StringUtils.java#L5612-L5619&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/blob/590f90889bf61a5570bd98b78e73410a07d7410b/src/main/java/org/apache/commons/lang3/StringUtils.java#L5612-L5619&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    While string like following is entered, then Exception would be thrown on here instead.&lt;br/&gt;
    &lt;a href=&quot;https://github.com/apache/commons-lang/blob/590f90889bf61a5570bd98b78e73410a07d7410b/src/main/java/org/apache/commons/lang3/StringUtils.java#L5613&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/blob/590f90889bf61a5570bd98b78e73410a07d7410b/src/main/java/org/apache/commons/lang3/StringUtils.java#L5613&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    !&lt;span class=&quot;error&quot;&gt;&amp;#91;image&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://user-images.githubusercontent.com/37996731/44082531-137cb1a0-9fe4-11e8-9219-8f373aebce67.png&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://user-images.githubusercontent.com/37996731/44082531-137cb1a0-9fe4-11e8-9219-8f373aebce67.png&lt;/a&gt;)&lt;/p&gt;



</comment>
                            <comment id="16579638" author="githubbot" created="Tue, 14 Aug 2018 10:49:13 +0000"  >&lt;p&gt;Github user kinow commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/340#discussion_r209907553&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/340#discussion_r209907553&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/java/org/apache/commons/lang3/StringUtils.java &amp;#8212;&lt;br/&gt;
    @@ -5596,8 +5596,8 @@ private static String replace(final String text, String searchString, final Stri&lt;br/&gt;
              }&lt;br/&gt;
              String searchText = text;&lt;br/&gt;
              if (ignoreCase) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;searchText = text.toLowerCase();&lt;/li&gt;
	&lt;li&gt;searchString = searchString.toLowerCase();&lt;br/&gt;
    +             searchText = text.toUpperCase();&lt;br/&gt;
    +             searchString = searchString.toUpperCase();
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Yeah, a very slippery problem. We still have the option to simply document that the method does not work well with unicode strings. &lt;/p&gt;

&lt;p&gt;    But first I would like to spend at least a few hours with paper and pencil (and eraser, because this could take a bit till I give up or find a possible way around it), and perhaps even check in the mailing list if other devs have any idea.&lt;/p&gt;

&lt;p&gt;    I think you found a very interesting problem &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;! Keep the ideas coming if you have any on how to solve this issue :+1: &lt;/p&gt;

&lt;p&gt;    &lt;em&gt;* if I had more time, I would possibly either go through other methods checking for that or, just try some fuzzifier approach to test the whole project ! Not aware of any static or dynamic analysis tool that does that&lt;/em&gt;&lt;/p&gt;</comment>
                            <comment id="16599948" author="githubbot" created="Sun, 2 Sep 2018 05:31:15 +0000"  >&lt;p&gt;Github user HiuKwok commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/340#discussion_r214529178&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/340#discussion_r214529178&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/java/org/apache/commons/lang3/StringUtils.java &amp;#8212;&lt;br/&gt;
    @@ -5596,8 +5596,8 @@ private static String replace(final String text, String searchString, final Stri&lt;br/&gt;
              }&lt;br/&gt;
              String searchText = text;&lt;br/&gt;
              if (ignoreCase) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;searchText = text.toLowerCase();&lt;/li&gt;
	&lt;li&gt;searchString = searchString.toLowerCase();&lt;br/&gt;
    +             searchText = text.toUpperCase();&lt;br/&gt;
    +             searchString = searchString.toUpperCase();
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Hi all, Just a quick update finally I kind of figure the way out of this problem,&lt;br/&gt;
    while I am trying to make it happen (the implementation).&lt;br/&gt;
    But the concept is mainly Normalize incoming word at the beginning of the method call by ```Normalizer.normalize()```&lt;/p&gt;</comment>
                            <comment id="16604572" author="githubbot" created="Wed, 5 Sep 2018 15:32:50 +0000"  >&lt;p&gt;Github user HiuKwok commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/340&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    To whom who interested in this issue, here is some founding that I discovered throughout this month of issue solving. &lt;/p&gt;

&lt;p&gt;    Problem:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The exception would happened when any String object passed in with unicode character. In order to achieve ignore case replacement, the internal logic would first transform both `text` and `SearchString` to lowerCase( ) for comparaition.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;However if anyone passion enough to digger deeper into the src logic of `.toLowerCase( )`. Certain unicode character would be denormalized. In this way the result String length would tend to longer than original length().  Example like:  !&lt;span class=&quot;error&quot;&gt;&amp;#91;image&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://user-images.githubusercontent.com/37996731/45103213-efec8780-b161-11e8-8370-88a7edacfc42.png&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://user-images.githubusercontent.com/37996731/45103213-efec8780-b161-11e8-8370-88a7edacfc42.png&lt;/a&gt;)&lt;br/&gt;
    So making use of the transformed String, Out bound exception would happen when trying to access the index that doesn&apos;t access at all (3 in this case vs 2 in length before lowerCase).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Flow:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;So the first thought into my mind is, why dun just normalize both `text` and `searchString` before performing ignore case comparation? In this way the String length would always stay consistence no matter `toLowerCase( )` or `toUpperCase( )` 3 -&amp;gt; 3.  However the another problem would emerged, as you may noticed, while the String mentioned above denormalize, it would turn into a UpperCase I and a dot sign.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;But what happen if the search pattern emerge into searchText in decompose form. In this case let say I am trying to match a upper &lt;span class=&quot;error&quot;&gt;&amp;#91;I&amp;#93;&lt;/span&gt;. Then mismatch would happen and this is certain not the desire behavior of this method I believe.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    BTW I Drafted a simple main method to demonstrate how mismatch would happen in here.&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/HiuKwok/commons-lang/blob/master/src/main/java/com/hiukwok/test.java#L10-L20&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/HiuKwok/commons-lang/blob/master/src/main/java/com/hiukwok/test.java#L10-L20&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="16604694" author="michaelryan" created="Wed, 5 Sep 2018 17:19:12 +0000"  >&lt;p&gt;I&apos;ve been thinking - how do case-insensitive regular expressions handle this? Theoretically these should do the same thing:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
StringUtils.replaceIgnoreCase(&lt;span class=&quot;code-quote&quot;&gt;&quot;\u0130x&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;, &quot;&quot;);
Pattern.compile(&lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;, Pattern.CASE_INSENSITIVE).matcher(&lt;span class=&quot;code-quote&quot;&gt;&quot;\u0130x&quot;&lt;/span&gt;).replaceAll(&quot;&quot;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The Matcher.replaceAll(String) method does not throw an exception.&lt;/p&gt;

&lt;p&gt;So what is the difference? The Pattern.newSingle(int) method is the key thing to look at. It uses Character.toUpperCase(char) and Character.toLowerCase(char), which do not have the same behavior as String.toUpperCase() and String.toLowerCase(). The Character class produces a single character.&lt;/p&gt;

&lt;p&gt;So I think a possible naive solution to this would be to call Character.toLowerCase() on each character in the String and then append the characters together into a new String.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; text = &lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;;
&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[] chars = text.toCharArray();
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; chars.length; i++) {
    chars[i] = &lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;.toLowerCase(chars[i]);
}
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; lowerText = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(chars);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16604916" author="githubbot" created="Wed, 5 Sep 2018 20:40:52 +0000"  >&lt;p&gt;Github user kinow commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/340&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Good progress so far @HiuKwok . Understanding the problem well is a good first step to solve it &#128077; my next development cycle for Apache will probably be for a release for Apache Commons Imaging, then after that Lang+Text. So will try to help here if you haven&apos;t found a way to solve it yet.&lt;/p&gt;</comment>
                            <comment id="16615623" author="hiukwok" created="Sat, 15 Sep 2018 06:57:44 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michaelryan&quot; class=&quot;user-hover&quot; rel=&quot;michaelryan&quot;&gt;michaelryan&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have try to implement your idea into the actual codebase against it. According to the theory the out of bound exception should be fixed.&lt;br/&gt;
 As one to one mapping is performed during the .toLowerCase process. It&apos;s guaranteed to always give back the same length of String in return.&lt;a href=&quot;https://github.com/HiuKwok/commons-lang/commit/a998e3de65a59d0859157f99e6cdf99469aa009f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Here&lt;/a&gt;&#160;is the commit btw.&lt;/p&gt;

&lt;p&gt;However on certain situation seems would leads to mismatch, which I listed the fail case on the same commit as well.&lt;/p&gt;</comment>
                            <comment id="16688552" author="githubbot" created="Thu, 15 Nov 2018 19:32:57 +0000"  >&lt;p&gt;GitHub user drajakumar opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/381&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/381&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LANG-1406&quot; title=&quot;StringIndexOutOfBoundsException in StringUtils.replaceIgnoreCase()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LANG-1406&quot;&gt;&lt;del&gt;LANG-1406&lt;/del&gt;&lt;/a&gt; StringIndexOutOfBoundsException in StringUtils.replaceIgnor&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;eCase&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/drajakumar/commons-lang&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/drajakumar/commons-lang&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/381.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/381.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #381&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 77ad336da790dc522216300bfb20d74b779a9d62&lt;br/&gt;
Author: Don Jeba &amp;lt;donjeba@...&amp;gt;&lt;br/&gt;
Date:   2018-11-15T19:31:23Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LANG-1406&quot; title=&quot;StringIndexOutOfBoundsException in StringUtils.replaceIgnoreCase()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LANG-1406&quot;&gt;&lt;del&gt;LANG-1406&lt;/del&gt;&lt;/a&gt; StringIndexOutOfBoundsException in StringUtils.replaceIgnoreCase&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16688560" author="githubbot" created="Thu, 15 Nov 2018 19:41:44 +0000"  >&lt;p&gt;Github user drajakumar commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/381&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/381&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @kinow can you kindly review and comment whether this fix holds good, thank you!&lt;/p&gt;</comment>
                            <comment id="16688565" author="githubbot" created="Thu, 15 Nov 2018 19:45:31 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/381&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/381&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://coveralls.io/builds/20129896/badge)](https://coveralls.io/builds/20129896&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://coveralls.io/builds/20129896/badge)](https://coveralls.io/builds/20129896&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Coverage increased (+0.002%) to 95.235% when pulling *&lt;b&gt;77ad336da790dc522216300bfb20d74b779a9d62 on drajakumar:master&lt;/b&gt;* into *&lt;b&gt;c4d0dbcb56b8980b1b3b7c85d00ad6540788c08e on apache:master&lt;/b&gt;*.&lt;/p&gt;
</comment>
                            <comment id="16692232" author="githubbot" created="Mon, 19 Nov 2018 20:39:02 +0000"  >&lt;p&gt;Github user PascalSchumacher commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-lang/pull/381&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/381&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @kinow What do you think is this a better solution than #340?&lt;/p&gt;</comment>
                            <comment id="16839056" author="gtorres" created="Tue, 14 May 2019 03:53:10 +0000"  >&lt;p&gt;This error happens in StringUtils.replace and can be fixed using StringUtils.indexOfIgnoreCase instead of converting first to lower case with the native String method and using the String native indexOf method.&lt;/p&gt;

&lt;p&gt;The method StringUtils.indexOfIgnoreCase resolves the problem because converts and compare the characters individually.&lt;/p&gt;

&lt;p&gt;But will be some consequences to using indexOfIgnoreCase because is not Locale sensitive, it uses Character.toLowerCase() that is not Locale sensitive as String.toLowerCase().&#160;Thus Turkish words or other language words could be treated incorrectly.&lt;/p&gt;

&lt;p&gt;The solution I pose is to change the use of Character.toLowerCase to String.toLowerCase and upperCase in order to handle the Strings with a Locale.&lt;/p&gt;

&lt;p&gt;I created this&#160;pull request &lt;a href=&quot;https://github.com/apache/commons-lang/pull/422&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/422&lt;/a&gt;. I invite you to check it and give some feedback.&lt;/p&gt;</comment>
                            <comment id="16839786" author="gtorres" created="Tue, 14 May 2019 20:57:09 +0000"  >&lt;p&gt;I created another pull request&#160;&lt;a href=&quot;https://github.com/apache/commons-lang/pull/423&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/423&lt;/a&gt;&#160;focused on resolving only this issue. In the method replace I removed the conversion of text and searchString to lowercase, also instead of using text.indexOf() I put a ternary operator to use StringUtils.indexofIgnorecase if the ignoreCase flag is true otherwise is used StringUtils.indexOf. I think this is a good solution because replace now uses some methods already implemented on StringUtils, this commit removes the use of the&#160;auxiliary variable that makes some characters indexes were different.&lt;/p&gt;</comment>
                            <comment id="16927576" author="garydgregory" created="Wed, 11 Sep 2019 13:44:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michaelryan&quot; class=&quot;user-hover&quot; rel=&quot;michaelryan&quot;&gt;michaelryan&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtorres&quot; class=&quot;user-hover&quot; rel=&quot;gtorres&quot;&gt;gtorres&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In git master now. Please verify and close.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;br/&gt;
Gary&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13229876">LANG-1453</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 9 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wkgn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>