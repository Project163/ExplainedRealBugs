<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:18:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LANG-1743] when ArrayUtils.removeAll meeting &apos;null&apos; array</title>
                <link>https://issues.apache.org/jira/browse/LANG-1743</link>
                <project id="12310481" key="LANG">Commons Lang</project>
                    <description>&lt;p&gt;it just throw java.lang.NullPointerException: Cannot invoke &quot;Object.getClass()&quot; because &quot;array&quot; is null, hope a more propel way to handle this situation, for example just return null, or raise the illeagleargument exception (the array must not be null)&lt;/p&gt;

&lt;p&gt;the test code is :&lt;br/&gt;
&lt;font color=&quot;#bbb529&quot;&gt;@Test&lt;/font&gt;&lt;font color=&quot;#cc7832&quot;&gt;public void &lt;/font&gt;&lt;font color=&quot;#ffc66d&quot;&gt;testRemoveAll_NullArray&lt;/font&gt;() {&lt;br/&gt;
&lt;font color=&quot;#808080&quot;&gt;// Preparation of the test case&lt;/font&gt;&lt;font color=&quot;#808080&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#cc7832&quot;&gt;char&lt;/font&gt;[] array = &lt;font color=&quot;#cc7832&quot;&gt;null;&lt;/font&gt;&lt;font color=&quot;#cc7832&quot;&gt;&lt;/font&gt;&lt;font color=&quot;#cc7832&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#808080&quot;&gt;// Invocation of the API&lt;/font&gt;&lt;font color=&quot;#808080&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#cc7832&quot;&gt;char&lt;/font&gt;[] result = ArrayUtils.removeAll(array)&lt;font color=&quot;#cc7832&quot;&gt;;&lt;/font&gt;&lt;font color=&quot;#cc7832&quot;&gt;&lt;/font&gt;&lt;font color=&quot;#cc7832&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#808080&quot;&gt;// Final assertion&lt;/font&gt;&lt;font color=&quot;#808080&quot;&gt; &lt;/font&gt;assertArrayEquals(&lt;font color=&quot;#6a8759&quot;&gt;&quot;Removing elements from a null array should return null&quot;&lt;/font&gt;&lt;font color=&quot;#cc7832&quot;&gt;, null, &lt;/font&gt;result)&lt;font color=&quot;#cc7832&quot;&gt;;&lt;/font&gt;}&lt;/p&gt;</description>
                <environment>&lt;p&gt;jdk18&lt;/p&gt;</environment>
        <key id="13585128">LANG-1743</key>
            <summary>when ArrayUtils.removeAll meeting &apos;null&apos; array</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sustech-whl">Wang Hailong</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Jul 2024 07:57:02 +0000</created>
                <updated>Sat, 13 Sep 2025 19:30:32 +0000</updated>
                            <resolved>Sat, 13 Sep 2025 19:30:32 +0000</resolved>
                                    <version>3.14.0</version>
                                    <fixVersion>3.19.0</fixVersion>
                                    <component>lang.*</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17867335" author="garydgregory" created="Fri, 19 Jul 2024 13:27:49 +0000"  >&lt;p&gt;We could use &lt;tt&gt;Objects.requireNonNull()&lt;/tt&gt; but you&apos;d still get an NPE.&lt;/p&gt;

&lt;p&gt;It seems to me that&#160;&lt;tt&gt;NullPointerException&lt;/tt&gt;&#160;is the most precise exception and tells a developer&#160;&lt;em&gt;exactly&lt;/em&gt;&#160;where to look. Throwing IAE is more general and therefore less useful.&lt;/p&gt;

&lt;p&gt;What do others think?&lt;/p&gt;</comment>
                            <comment id="17895378" author="JIRAUSER307630" created="Mon, 4 Nov 2024 17:49:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; I actually agree with you on this. I made this pull request to change the behavior as a proposed change:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-lang/pull/1312&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/1312&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Returning null is not a good idea, so I think it&apos;s better indeed to throw an exception.&lt;/p&gt;</comment>
                            <comment id="17896285" author="JIRAUSER307630" created="Thu, 7 Nov 2024 12:12:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Having a second look at this, why not use Optional instead in the next release? Isn&apos;t it more appropriate? I&apos;m generally against returning null or passing nulls anywhere. Returning an empty optional seems better in my opinion and tells developer also that they should lookout for what could be returned.&lt;/p&gt;</comment>
                            <comment id="17897994" author="garydgregory" created="Wed, 13 Nov 2024 17:17:07 +0000"  >&lt;p&gt;I doubt the current PR is a good idea since it will blow up apps that previously didn&apos;t.&lt;/p&gt;</comment>
                            <comment id="17898005" author="JIRAUSER307630" created="Wed, 13 Nov 2024 17:39:59 +0000"  >&lt;p&gt;I wasn&apos;t clear in my previous comment, sorry; let me explain what I meant.&lt;/p&gt;

&lt;p&gt;I meant that I changed my mind about the change that I made since to your point, this would break existing applications. However, what I did mean is, why don&apos;t we gradually deprecate this and add new similar methods that do not return or pass null but existing apps can still use the would be deprecated methods.&lt;/p&gt;

&lt;p&gt;So the new methods can serve similar functionalities (with different method names) but they utilize the Optional class. This way, future apps will use Optional and existing apps do have a choice to use Optional.&lt;/p&gt;

&lt;p&gt;I found after my initial PR that the issue mentioned in this Jira story was already addressed for that concrete edge case; but I&apos;m opening the pandora box on the matter of using nulls.&lt;/p&gt;

&lt;p&gt;To be honest, whether nulls are used or not, I don&apos;t mind it. I just tend to find avoiding nulls in general a good idea but understand that we can&apos;t avoid null always.&lt;/p&gt;</comment>
                            <comment id="18020056" author="garydgregory" created="Sat, 13 Sep 2025 19:30:32 +0000"  >&lt;p&gt;I just tested this use case in git master, and the removeAll() APIs return null on null input.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1q82o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>