<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:17:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LANG-1241] StringUtils.ordinalIndexOf broken</title>
                <link>https://issues.apache.org/jira/browse/LANG-1241</link>
                <project id="12310481" key="LANG">Commons Lang</project>
                    <description>&lt;p&gt;Quoting rousej from the discussion of &lt;a href=&quot;https://github.com/apache/commons-lang/pull/93&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/pull/93&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I agree with britter. StringUtils.ordinalIndexOf(&quot;aaaaaa&quot;, &quot;aa&quot;, 2) == 1 would be true because the sequence &apos;aa&apos; is at every index. There seems to be confusion around this method, but it seems to me the original code had it correct.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; index = lastIndex ? str.length() : INDEX_NOT_FOUND;

&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; {

&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (lastIndex) {

index = CharSequenceUtils.lastIndexOf(str, searchStr, index - 1);

} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {

index = CharSequenceUtils.indexOf(str, searchStr, index + 1);

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m not sure why StringUtils.ordinalIndexOf(&quot;aaaaaa&quot;, &quot;aa&quot;, 2) == 3 would ever be true.&lt;br/&gt;
StringUtils.ordinalIndexOf(&quot;aaaaaa&quot;, &quot;aa&quot;, 2) == 2 is easier to see where it&apos;s coming from, but StringUtils.ordinalIndexOf(&quot;aaaaaa&quot;, &quot;aa&quot;, 2) == 1 is still the correct answer, and it also works for other tests. I found my way here because I wanted to use this method in a project, but found that the current release is broken by commit &lt;a href=&quot;https://github.com/apache/commons-lang/commit/e5a3039f7a1e727fca40db7357a9191b6a7cf41d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;e5a3039&lt;/a&gt; . With the current release if the first index is between 0 and searchStr.length() -1 the method will return the index for ordinal + 1.....in other words the wrong index.&lt;/p&gt;

&lt;p&gt;This fact is missed in a test like&lt;br/&gt;
assertEquals(3, StringUtils.ordinalIndexOf(&quot;aaaaaa&quot;, &quot;aa&quot;, 2));&lt;br/&gt;
/* Note the above test from commit &lt;a href=&quot;https://github.com/apache/commons-lang/commit/e5a3039f7a1e727fca40db7357a9191b6a7cf41d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;e5a3039&lt;/a&gt; is incorrect since the array of chars begins at 0.*/&lt;/p&gt;

&lt;p&gt;The following test should pass, but will fail in the current release due to the broken method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;assertEquals(0, StringUtils.ordinalIndexOf(&lt;span class=&quot;code-quote&quot;&gt;&quot;abaabaab&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;ab&quot;&lt;/span&gt;, 1);
assertEquals(3, StringUtils.ordinalIndexOf(&lt;span class=&quot;code-quote&quot;&gt;&quot;abaabaab&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;ab&quot;&lt;/span&gt;, 2);
assertEquals(6, StringUtils.ordinalIndexOf(&lt;span class=&quot;code-quote&quot;&gt;&quot;abaabaab&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;ab&quot;&lt;/span&gt;, 3);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12973809">LANG-1241</key>
            <summary>StringUtils.ordinalIndexOf broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pascalschumacher">Pascal Schumacher</reporter>
                        <labels>
                    </labels>
                <created>Sun, 29 May 2016 15:34:45 +0000</created>
                <updated>Wed, 19 Oct 2016 15:24:47 +0000</updated>
                            <resolved>Fri, 10 Jun 2016 10:55:37 +0000</resolved>
                                    <version>3.4</version>
                                                    <component>lang.*</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15323924" author="nmanley" created="Fri, 10 Jun 2016 05:56:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sebb%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;sebb@apache.org&quot;&gt;sebb@apache.org&lt;/a&gt;&apos;s commit &lt;a href=&quot;https://github.com/apache/commons-lang/commit/d75fe46b8f1b0d5c27887052ee4714d6a9c7ea4b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;d75fe46&lt;/a&gt; reverts &lt;a href=&quot;https://issues.apache.org/jira/browse/LANG-1077&quot; title=&quot;[PATCH] StringUtils.ordinalIndexOf(&amp;quot;aaaaaa&amp;quot;, &amp;quot;aa&amp;quot;, 2) should return 2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LANG-1077&quot;&gt;&lt;del&gt;LANG-1077&lt;/del&gt;&lt;/a&gt; which was closed as invalid. So what&apos;s considered broken here?&lt;/p&gt;</comment>
                            <comment id="15324283" author="sebb@apache.org" created="Fri, 10 Jun 2016 10:55:37 +0000"  >&lt;p&gt;No longer a problem, now that &lt;a href=&quot;https://issues.apache.org/jira/browse/LANG-1077&quot; title=&quot;[PATCH] StringUtils.ordinalIndexOf(&amp;quot;aaaaaa&amp;quot;, &amp;quot;aa&amp;quot;, 2) should return 2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LANG-1077&quot;&gt;&lt;del&gt;LANG-1077&lt;/del&gt;&lt;/a&gt; has been reverted.&lt;/p&gt;

&lt;p&gt;Repository: commons-lang&lt;br/&gt;
Updated Branches:&lt;br/&gt;
  refs/heads/master f08c4f6ae -&amp;gt; 7fd021d82&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LANG-1241&quot; title=&quot;StringUtils.ordinalIndexOf broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LANG-1241&quot;&gt;&lt;del&gt;LANG-1241&lt;/del&gt;&lt;/a&gt; StringUtils.ordinalIndexOf broken&lt;/p&gt;

&lt;p&gt;Show that the method is no longer broken, now that &lt;a href=&quot;https://issues.apache.org/jira/browse/LANG-1077&quot; title=&quot;[PATCH] StringUtils.ordinalIndexOf(&amp;quot;aaaaaa&amp;quot;, &amp;quot;aa&amp;quot;, 2) should return 2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LANG-1077&quot;&gt;&lt;del&gt;LANG-1077&lt;/del&gt;&lt;/a&gt; has been&lt;br/&gt;
reverted&lt;/p&gt;

&lt;p&gt;Project: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/commons-lang/repo&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/commons-lang/repo&lt;/a&gt;&lt;br/&gt;
Commit: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/commons-lang/commit/7fd021d8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/commons-lang/commit/7fd021d8&lt;/a&gt;&lt;br/&gt;
Tree: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/commons-lang/tree/7fd021d8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/commons-lang/tree/7fd021d8&lt;/a&gt;&lt;br/&gt;
Diff: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/commons-lang/diff/7fd021d8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/commons-lang/diff/7fd021d8&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15324839" author="pascalschumacher" created="Fri, 10 Jun 2016 17:12:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nmanley&quot; class=&quot;user-hover&quot; rel=&quot;nmanley&quot;&gt;nmanley&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sebb%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;sebb@apache.org&quot;&gt;sebb@apache.org&lt;/a&gt; I was not aware that &lt;a href=&quot;https://issues.apache.org/jira/browse/LANG-1077&quot; title=&quot;[PATCH] StringUtils.ordinalIndexOf(&amp;quot;aaaaaa&amp;quot;, &amp;quot;aa&amp;quot;, 2) should return 2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LANG-1077&quot;&gt;&lt;del&gt;LANG-1077&lt;/del&gt;&lt;/a&gt; has been reverted, else I would not have created this issue. Thanks for clarifying.&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12761125">LANG-1077</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yo1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>