<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:16:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LANG-992] NumberUtils#isNumber() returns false for &quot;0.0&quot;, &quot;0.4790&quot;, et al</title>
                <link>https://issues.apache.org/jira/browse/LANG-992</link>
                <project id="12310481" key="LANG">Commons Lang</project>
                    <description>&lt;p&gt;After upgrading from 3.1 to 3.3.1, it seems that &lt;tt&gt;isNumber(String str)&lt;/tt&gt; returns false for decimal numbers with leading zeros. In other words:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; ret = NumberUtils.isNumber(&lt;span class=&quot;code-quote&quot;&gt;&quot;0.4790&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On 3.1, &lt;tt&gt;ret&lt;/tt&gt; was true. In 3.3.1, &lt;tt&gt;ret&lt;/tt&gt; is false.&lt;/p&gt;

&lt;p&gt;Guessing that &lt;a href=&quot;https://issues.apache.org/jira/browse/LANG-972&quot; title=&quot;NumberUtils#isNumber does not allow for hex 0XABCD&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LANG-972&quot;&gt;&lt;del&gt;LANG-972&lt;/del&gt;&lt;/a&gt; is related... comment in the code states:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// leading 0, but not hex, must be octal&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is clearly a case where leading 0 means neither hex nor octal.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 8, Windows 7&lt;/p&gt;</environment>
        <key id="12703833">LANG-992</key>
            <summary>NumberUtils#isNumber() returns false for &quot;0.0&quot;, &quot;0.4790&quot;, et al</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="chtompki">Rob Tompkins</assignee>
                                    <reporter username="adam@labkey.com">Adam Rauch</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Mar 2014 21:26:22 +0000</created>
                <updated>Wed, 19 Oct 2016 15:24:37 +0000</updated>
                            <resolved>Sun, 11 Sep 2016 20:41:37 +0000</resolved>
                                    <version>3.3.1</version>
                                                    <component>lang.math.*</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="13948745" author="niallp" created="Thu, 27 Mar 2014 01:49:49 +0000"  >&lt;p&gt;Yes, this was caused by the second commit for &lt;a href=&quot;https://issues.apache.org/jira/browse/LANG-972&quot; title=&quot;NumberUtils#isNumber does not allow for hex 0XABCD&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LANG-972&quot;&gt;&lt;del&gt;LANG-972&lt;/del&gt;&lt;/a&gt;  in revision 1566967 when the change for Octal numbers was made. I have a patch that resolves this specific issue, but perhaps the Octal change should be reverted.&lt;/p&gt;</comment>
                            <comment id="13948763" author="niallp" created="Thu, 27 Mar 2014 02:04:59 +0000"  >&lt;p&gt;Attaching second version of patch&lt;/p&gt;</comment>
                            <comment id="13948961" author="dmjones500" created="Thu, 27 Mar 2014 06:55:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=niallp&quot; class=&quot;user-hover&quot; rel=&quot;niallp&quot;&gt;niallp&lt;/a&gt;: your patch looks good. I see no reason to revert the octal change, just a shame we hadn&apos;t already captured this case in a unit test. Do you intend to commit your patch?&lt;/p&gt;</comment>
                            <comment id="13949221" author="sebb@apache.org" created="Thu, 27 Mar 2014 12:27:43 +0000"  >&lt;p&gt;Should octal numbers be validated or not?&lt;br/&gt;
Clearly a number such as 0xdefgh is invalid, because the 0x prefix unambiguosly identifies a hex number.&lt;br/&gt;
However 0123 is potentially equally valid as an octal and a decimal number. &lt;br/&gt;
Which is correct depends on the context.&lt;/p&gt;

&lt;p&gt;Now the Javadoc for isNumber says &quot;Checks whether the String a valid Java number.&quot;&lt;br/&gt;
If we take that to mean that the digit string must be valid as a numeric Java literal, then clearly the leading 0 means octal.&lt;br/&gt;
However, numeric literals are not Strings.&lt;br/&gt;
JVM methods such as Integer.decode(String) that treat a leading 0 as meaning octal will reject a parameter that contains non-octal digits - so again that suggests octal should be validated.&lt;/p&gt;

&lt;p&gt;As far as I know, there are no standard Java methods that accept number type suffixes in Strings.&lt;br/&gt;
I think these are only accepted in numeric literals.&lt;/p&gt;

&lt;p&gt;The fact that isNumber() accepts all these formats leads me to the conclusion that the intention was probably to support the same syntax as Java literals, and so the code should validate octal numbers accordingly.&lt;/p&gt;</comment>
                            <comment id="13949713" author="b.eckenfels" created="Thu, 27 Mar 2014 18:00:13 +0000"  >&lt;p&gt;Actually my expectation for using that method would be that &quot;isNumber returns true if I can use it without a NumberFormatException with Integer.parseInt(String) or Double.parseDouble(String)&quot;. Because the Java syntax and literal format is not really something which you use anywhere outside the compiler/source tools.&lt;/p&gt;

&lt;p&gt;However, I would be fine with both definitions, as long as they are added to the javadoc comment.&lt;/p&gt;

&lt;p&gt;BTW1: I have some applications where the NFE is a major slow down as I use the parse function to validate. So I do see a big reason for having a boolean validate function.&lt;/p&gt;

&lt;p&gt;BTW2: I think hex/ocatal prefixes and decimal digits are never seen in the same function, so I think having a &quot;isInteger()&quot; which knows about octal/hex and having a isNumber() which fails on hex and ignores trailing 0 would be a more logical thing.&lt;/p&gt;</comment>
                            <comment id="13949781" author="rahook" created="Thu, 27 Mar 2014 18:49:03 +0000"  >&lt;p&gt;This is a show-stopper for us - I can revert to 3.1 for the project that is affected, however need to retain 3.3.1 for other projects.&lt;/p&gt;</comment>
                            <comment id="13949840" author="sebb@apache.org" created="Thu, 27 Mar 2014 19:37:26 +0000"  >&lt;p&gt;@Bernd&lt;/p&gt;

&lt;p&gt;The isNumber() method currently also allows &quot;0xABCD&quot; and &quot;27L&quot; which are not allowed by the parseTTT() methods - it is not just the octal validation that would cause problems.&lt;/p&gt;

&lt;p&gt;I think one would need several new methods to validate strings intended for parse functions.&lt;br/&gt;
In your case I would have thought a Regular Expression matcher would be suitable.&lt;br/&gt;
I suggest you create a JIRA enhancement request with details of your use-cases.&lt;br/&gt;
Note that Commons Validator provides lots of Numeric validation routines already - that may be a better solution.&lt;/p&gt;</comment>
                            <comment id="13950314" author="niallp" created="Fri, 28 Mar 2014 03:11:39 +0000"  >&lt;p&gt;I have checked in the change in revision 1582585&lt;/p&gt;</comment>
                            <comment id="13991456" author="sebb@apache.org" created="Wed, 7 May 2014 01:25:03 +0000"  >&lt;p&gt;What about 01.23 etc?&lt;br/&gt;
This will be allowed by createNumber().&lt;br/&gt;
Maybe the check for &quot;.&quot; should scan the entire string.&lt;/p&gt;</comment>
                            <comment id="14167898" author="jamessawle" created="Sat, 11 Oct 2014 01:08:33 +0000"  >&lt;p&gt;This is a possible large refactor of the isNumber functionality extracting each of the different datatypes into their own methods. Whilst this will not be as efficient as the original method, it is more maintainable and would allow for the possibility of making each of them public separately.&lt;/p&gt;

&lt;p&gt;I understand that this may be a step to far, but would be interested in hearing people&apos;s views. This does not however, cover Sebb&apos;s point about 01.23 as I do not believe that createNumber should be allowing it.&lt;/p&gt;

&lt;p&gt;If this is liked, javadoc and separate testing of each function can be added (make the method package private).&lt;/p&gt;</comment>
                            <comment id="15434717" author="mj.mahmoudi@yahoo.com" created="Wed, 24 Aug 2016 11:10:29 +0000"  >&lt;p&gt;I&apos;m starter for contribute this project and not good familiar with flow of issues. &lt;br/&gt;
I see this issue resolved in version 3.4, I say correct?&lt;/p&gt;</comment>
                            <comment id="15449975" author="pascalschumacher" created="Tue, 30 Aug 2016 19:57:59 +0000"  >&lt;p&gt;It was marked as fixed in 3.3.2, but then reopened and not closed again. So the issue remains unresolved.&lt;/p&gt;</comment>
                            <comment id="15451342" author="mj.mahmoudi@yahoo.com" created="Wed, 31 Aug 2016 06:41:34 +0000"  >&lt;p&gt;Thanks for your reply but When do this issue close?&lt;/p&gt;</comment>
                            <comment id="15453122" author="pascalschumacher" created="Wed, 31 Aug 2016 19:20:25 +0000"  >&lt;p&gt;Commons is completely volunteer based. Issues are closed when somebody contributes a fix. &lt;/p&gt;</comment>
                            <comment id="15482371" author="chtompki" created="Sun, 11 Sep 2016 20:41:39 +0000"  >&lt;p&gt;I could not reproduce this issue in the release candidate for 3.5 with java 1.6 or java 1.7.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12743786">LANG-1040</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12993216">LANG-1252</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12709554">LANG-997</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12993216">LANG-1252</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12694218">LANG-971</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12674318" name="LANG-992 Refactor.patch" size="9185" author="jamessawle" created="Sat, 11 Oct 2014 01:08:33 +0000"/>
                            <attachment id="12637074" name="LANG-992-v2.patch" size="1400" author="niallp" created="Thu, 27 Mar 2014 02:04:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382167</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tubj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382439</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>