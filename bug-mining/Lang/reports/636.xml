<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:18:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LANG-1597] Invocation fails because matching varargs method found but then discarded</title>
                <link>https://issues.apache.org/jira/browse/LANG-1597</link>
                <project id="12310481" key="LANG">Commons Lang</project>
                    <description>&lt;p&gt;&lt;tt&gt;getMatchingAccessibleMethod(Class&amp;lt;?&amp;gt;, String, Class&amp;lt;?&amp;gt;...)&lt;/tt&gt; is able to find proper match for a method to call but then discards it.&lt;/p&gt;

&lt;p&gt;Consider the situation you have a varargs method like &lt;tt&gt;Baz.foo(X... X)&lt;/tt&gt;. We call &lt;tt&gt;getMatchingAccessibleMethod(Baz.class, &quot;foo&quot;, z&lt;/tt&gt; where &lt;tt&gt;z instance of Z extends Y extends X&lt;/tt&gt;. &lt;tt&gt;getMatchingAccessibleMethod&lt;/tt&gt; finds &lt;tt&gt;foo&lt;/tt&gt; as the candidate, but then discards it because for varargs, it requires either the argument is directly is of type X or that the supertype of the argument X. It does not properly check the entire inheritance hierarchy in this code (3.11):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (bestMatch != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; bestMatch.isVarArgs() &amp;amp;&amp;amp; bestMatch.getParameterTypes().length &amp;gt; 0 &amp;amp;&amp;amp; parameterTypes.length &amp;gt; 0) {
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt;[] methodParameterTypes = bestMatch.getParameterTypes();
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; methodParameterComponentType = methodParameterTypes[methodParameterTypes.length - 1].getComponentType();
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; methodParameterComponentTypeName = ClassUtils.primitiveToWrapper(methodParameterComponentType).getName();

            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; lastParameterType = parameterTypes[parameterTypes.length - 1];
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; parameterTypeName = (lastParameterType==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) ? &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; : lastParameterType.getName();
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; parameterTypeSuperClassName = (lastParameterType==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) ? &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; : lastParameterType.getSuperclass().getName();

            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (parameterTypeName!= &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; parameterTypeSuperClassName != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !methodParameterComponentTypeName.equals(parameterTypeName)
                    &amp;amp;&amp;amp; !methodParameterComponentTypeName.equals(parameterTypeSuperClassName)) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13322643">LANG-1597</key>
            <summary>Invocation fails because matching varargs method found but then discarded</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rec">Richard Eckart de Castilho</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Aug 2020 00:58:54 +0000</created>
                <updated>Sat, 6 Sep 2025 20:18:39 +0000</updated>
                            <resolved>Sat, 30 Aug 2025 21:30:19 +0000</resolved>
                                    <version>3.11</version>
                                    <fixVersion>3.19.0</fixVersion>
                                    <component>lang.reflect.*</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17234281" author="arturobernalg" created="Wed, 18 Nov 2020 06:02:13 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rec&quot; class=&quot;user-hover&quot; rel=&quot;rec&quot;&gt;rec&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Could you provide a test case in order to reproduce and check the issue?&lt;/p&gt;


&lt;p&gt;regards&lt;/p&gt;</comment>
                            <comment id="17234309" author="rec" created="Wed, 18 Nov 2020 07:02:21 +0000"  >&lt;p&gt;As a quick measure, I can only provide the code where I wanted to rely on the method but had to work around the bug:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
            &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isFeatureStructureValue = FeatureStructure.class
                    .isAssignableFrom(aValue.getClass());
            &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isFeatureStructureVarArgValue = aValue.getClass().isArray()
                    &amp;amp;&amp;amp; FeatureStructure.class
                            .isAssignableFrom(aValue.getClass().getComponentType());

            &lt;span class=&quot;code-comment&quot;&gt;// Workaround &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; https://issues.apache.org/jira/browse/LANG-1597
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isFeatureStructureValue || isFeatureStructureVarArgValue) {
                &lt;span class=&quot;code-comment&quot;&gt;// MethodUtils.invokeStaticMethod has a &lt;span class=&quot;code-quote&quot;&gt;&quot;bug&quot;&lt;/span&gt; that vararg methods are only
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// properly found/matched &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the parameter value type or the supertype of the
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// parameter value matches the varargs type. So here we have FeatureStructure...
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// as the varargs definition, but we may want to set a value of type Annotation
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// and from Annotation to FeatureStructure is a &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; way through the inheritance
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// hierarchy.
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// Note: &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; bug exists at least up to commons-lang3 3.11 - it might be fixed
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// in later versions.
&lt;/span&gt;                MethodUtils.invokeStaticMethod(FSUtil.class, &lt;span class=&quot;code-quote&quot;&gt;&quot;setFeature&quot;&lt;/span&gt;,
                        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] { aFS, aName, aValue },
                        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;[] { FeatureStructure.class, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.class,
                                FeatureStructure[].class });
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="18017221" author="garydgregory" created="Sat, 30 Aug 2025 21:30:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rec&quot; class=&quot;user-hover&quot; rel=&quot;rec&quot;&gt;rec&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Fixed in git master and snapshot builds in &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please verify your use case.&lt;/p&gt;

&lt;p&gt;TY!&lt;/p&gt;</comment>
                            <comment id="18017223" author="rec" created="Sat, 30 Aug 2025 21:36:34 +0000"  >&lt;p&gt;Thanks for fixing!&lt;/p&gt;

&lt;p&gt;I&apos;m afraid though that after 5 years, I don&apos;t have the slightest clue anymore how to reproduce that and in which particular project I have encountered the problem. Should I by chance come across it, I&apos;ll let you know.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13626454">LANG-1782</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0hrdc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>