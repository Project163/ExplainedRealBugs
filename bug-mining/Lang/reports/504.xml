<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:17:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LANG-1472] SystemUtils.getHostName()&#33719;&#21462;&#31995;&#32479;hostname&#20026;null</title>
                <link>https://issues.apache.org/jira/browse/LANG-1472</link>
                <project id="12310481" key="LANG">Commons Lang</project>
                    <description>&lt;p&gt;SpringBoot &#39033;&#30446;&#33719;&#21462;&#31995;&#32479; hostname &#20026; null &#23548;&#33268; java.lang.NullPointerException &#12290;&lt;/p&gt;

&lt;p&gt;&#37096;&#20998;&#20195;&#30721;&#65306;&lt;br/&gt;
   private static Long getDataCenterId(){&lt;br/&gt;
        int[] ints = StringUtils.toCodePoints(SystemUtils.getHostName());&lt;br/&gt;
        int sums = 0;&lt;br/&gt;
        for (int i: ints) &lt;/p&gt;
{
            sums += i;
        }
&lt;p&gt;        return (long)(sums % 32);&lt;br/&gt;
    }&lt;/p&gt;</description>
                <environment>&lt;ul&gt;
	&lt;li&gt;&#25805;&#20316;&#31995;&#32479;&#65306;&#38463;&#37324;&#20113;&#25552;&#20379;&#30340;Ubuntu 16.04&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;root@iZwz99ibpdra8w3j3jcbw7Z:~# hostname&lt;br/&gt;
iZwz99ibpdra8w3j3jcbw7Z&lt;br/&gt;
root@iZwz99ibpdra8w3j3jcbw7Z:~# echo $HOSTNAME&lt;br/&gt;
iZwz99ibpdra8w3j3jcbw7Z&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&#35821;&#35328;&#65306;Java 8&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;root@iZwz99ibpdra8w3j3jcbw7Z:~# java -version&lt;br/&gt;
java version &quot;1.8.0_191&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.8.0_191-b12)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 25.191-b12, mixed mode)&lt;/p&gt;</environment>
        <key id="13249340">LANG-1472</key>
            <summary>SystemUtils.getHostName()&#33719;&#21462;&#31995;&#32479;hostname&#20026;null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="VioletKiss">wangrubao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Aug 2019 12:07:15 +0000</created>
                <updated>Tue, 13 Aug 2019 10:35:57 +0000</updated>
                            <resolved>Tue, 13 Aug 2019 10:35:57 +0000</resolved>
                                    <version>3.9</version>
                                                    <component>lang.*</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16903690" author="michael-o" created="Fri, 9 Aug 2019 08:27:59 +0000"  >&lt;p&gt;Please share your environment: &lt;tt&gt;$ env&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16905070" author="michael-o" created="Mon, 12 Aug 2019 11:02:11 +0000"  >&lt;p&gt;This is not what I have asked for.&lt;/p&gt;</comment>
                            <comment id="16905730" author="violetkiss" created="Tue, 13 Aug 2019 02:01:26 +0000"  >&lt;p&gt;&lt;b&gt;operating system&lt;/b&gt; :&lt;br/&gt;
 LSB Version: core-9.20160110ubuntu0.2-amd64:core-9.20160110ubuntu0.2-noarch:security-9.20160110ubuntu0.2-amd64:security-9.20160110ubuntu0.2-noarch&lt;br/&gt;
 Distributor ID: Ubuntu&lt;br/&gt;
 Description: Ubuntu 16.04.4 LTS&lt;br/&gt;
 Release: 16.04&lt;br/&gt;
 Codename: xenial&lt;/p&gt;

&lt;p&gt;&lt;b&gt;java&lt;/b&gt; :&#160;&lt;/p&gt;

&lt;p&gt;java version &quot;1.8.0_191&quot;&lt;br/&gt;
 Java(TM) SE Runtime Environment (build 1.8.0_191-b12)&lt;br/&gt;
 Java HotSpot(TM) 64-Bit Server VM (build 25.191-b12, mixed mode)&lt;/p&gt;

&lt;p&gt;&lt;b&gt;mysql&lt;/b&gt; :&#160;&lt;/p&gt;

&lt;p&gt;mysql Ver 14.14 Distrib 5.7.24, for Linux (x86_64) using EditLine wrapper&lt;/p&gt;

&lt;p&gt;&lt;b&gt;maven&lt;/b&gt; :&#160;&lt;/p&gt;

&lt;p&gt;apache-maven-3.6.1\&lt;/p&gt;</comment>
                            <comment id="16905736" author="violetkiss" created="Tue, 13 Aug 2019 02:09:16 +0000"  >&lt;p&gt;I have uploaded related files. In the file &apos;SnowflakeIdWorker.java&apos;, the NullPointerException appears on line 168. In the file &apos;pom.xml&apos;,&#160;here is the jar package I depend on.&lt;/p&gt;</comment>
                            <comment id="16905799" author="tai" created="Tue, 13 Aug 2019 04:08:26 +0000"  >&lt;p&gt;&lt;del&gt;Hi!&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;XDD&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;Execute the &lt;b&gt;env&lt;/b&gt; command on your machine to get the environment variables.&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&#22312;&#20320;&#30340;&#26381;&#21153;&#22120;&#19978;&#25191;&#34892; &lt;b&gt;env&lt;/b&gt;&#160;&#21629;&#20196;&#20320;&#20250;&#33719;&#24471;&#29615;&#22659;&#21464;&#37327;&#21015;&#34920;&#12290;&lt;/p&gt;</comment>
                            <comment id="16905951" author="violetkiss" created="Tue, 13 Aug 2019 08:35:40 +0000"  >&lt;p&gt;I am very sorry to understand what you mean now. XDD&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;//root@iZwz99ibpdra8w3j3jcbw7Z:~# env
&lt;/span&gt;XDG_SESSION_ID=21396
TERM=xterm
SHELL=/bin/bash
SSH_CLIENT=61.144.49.250 64086 22
SSH_TTY=/dev/pts/0
JRE_HOME=/java/jdk1.8.0_191/jre
USER=root
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:
MAIL=/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/mail/root
PATH=/java/jdk1.8.0_191/bin:/java/jdk1.8.0_191/jre/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:$JAVA_HOME/bin
PWD=/root
JAVA_HOME=/java/jdk1.8.0_191
LANG=en_US.UTF-8
SHLVL=1
HOME=/root
LOGNAME=root
CLASSPATH=.:/java/jdk1.8.0_191/lib:/java/jdk1.8.0_191/jre/lib:.:$JAVA_HOME/lib:$JAVA_HOME/jre/lib
SSH_CONNECTION=61.144.49.250 64086 172.18.74.88 22
LESSOPEN=| /usr/bin/lesspipe %s
XDG_RUNTIME_DIR=/run/user/0
DISPLAY=localhost:10.0
LESSCLOSE=/usr/bin/lesspipe %s %s
_=/usr/bin/env

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16906010" author="michael-o" created="Tue, 13 Aug 2019 09:34:54 +0000"  >&lt;p&gt;The method relies on environment variables. The variable &lt;tt&gt;HOSTNAME&lt;/tt&gt; is not set. Therefore the NPE.&lt;/p&gt;</comment>
                            <comment id="16906019" author="tai" created="Tue, 13 Aug 2019 09:49:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=VioletKiss&quot; class=&quot;user-hover&quot; rel=&quot;VioletKiss&quot;&gt;VioletKiss&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The &lt;b&gt;getHostName&lt;/b&gt; method works on the non-Widnwos platform depending on the &lt;b&gt;HOSTNAME&lt;/b&gt; environment variable, but there is no definition in your current environment variable, so getting &lt;font color=&quot;#FF0000&quot;&gt;null&lt;/font&gt; is normal.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    /**
     * Gets the host name from an environment variable.
     *
     * &amp;lt;p&amp;gt;
     * If you want to know what the network stack says is the host name, you should use {@code InetAddress.getLocalHost().getHostName()}.
     * &amp;lt;/p&amp;gt;
     *
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the host name.
     * @since 3.6
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getHostName() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; IS_OS_WINDOWS ? &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getenv(&lt;span class=&quot;code-quote&quot;&gt;&quot;COMPUTERNAME&quot;&lt;/span&gt;) : &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getenv(&lt;span class=&quot;code-quote&quot;&gt;&quot;HOSTNAME&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You can see in the program through the &lt;b&gt;System.getenv()&lt;/b&gt; method that the environment name of the &lt;b&gt;HOSTNAME&lt;/b&gt; is not registered in the program instance.&lt;/p&gt;</comment>
                            <comment id="16906046" author="violetkiss" created="Tue, 13 Aug 2019 10:15:41 +0000"  >&lt;p&gt;I have added the HOSTNAME in the system environment, and the program run exactly. I am to careless, thank you very much.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12977430" name="SnowflakeIdWorker.java" size="7740" author="VioletKiss" created="Tue, 13 Aug 2019 02:02:06 +0000"/>
                            <attachment id="12976935" name="error.png" size="56497" author="VioletKiss" created="Wed, 7 Aug 2019 13:03:20 +0000"/>
                            <attachment id="12977429" name="pom.xml" size="4104" author="VioletKiss" created="Tue, 13 Aug 2019 02:02:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 13 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05ev4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>