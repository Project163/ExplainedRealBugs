<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:18:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LANG-1726] ExceptionUtils.asRuntimeException is not a good replacement for deprecated ExceptionUtils.rethrow</title>
                <link>https://issues.apache.org/jira/browse/LANG-1726</link>
                <project id="12310481" key="LANG">Commons Lang</project>
                    <description>&lt;p&gt;I have been doing pass over deprecated warning in our code and one of them is that &lt;tt&gt;org.apache.commons.lang3.exception.ExceptionUtils#rethrow&lt;/tt&gt; is deprecated. Its comment says &quot;Use asRuntimeException(Throwable).&quot; However, &lt;tt&gt;asRuntimeException()&lt;/tt&gt; is not a good replacement. It lacks the generic type parameter R that the rethrow method has. In fact, the comment that says...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Returns:
Never actually returned, this generic type matches any type which the calling site requires. [..]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;...is lying. &lt;/p&gt;
</description>
                <environment></environment>
        <key id="13563607">LANG-1726</key>
            <summary>ExceptionUtils.asRuntimeException is not a good replacement for deprecated ExceptionUtils.rethrow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wilx">V&#225;clav Haisman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Jan 2024 16:05:23 +0000</created>
                <updated>Sat, 20 Jan 2024 20:53:57 +0000</updated>
                            <resolved>Thu, 4 Jan 2024 20:23:28 +0000</resolved>
                                    <version>3.14.0</version>
                                    <fixVersion>3.15.0</fixVersion>
                                    <component>lang.exception.*</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17803313" author="garydgregory" created="Thu, 4 Jan 2024 20:23:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wilx&quot; class=&quot;user-hover&quot; rel=&quot;wilx&quot;&gt;wilx&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for your report. Good point! Fixed in git master and snapshot builds &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-lang3/3.15.0-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-lang3/3.15.0-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please verify and close.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17803316" author="wilx" created="Thu, 4 Jan 2024 20:28:27 +0000"  >&lt;p&gt;The change fixes my issue. But the wrong comment still remains: &lt;a href=&quot;https://github.com/apache/commons-lang/blob/adc70c15ce3d19f4d9d6c60956038e2aa14a60bd/src/main/java/org/apache/commons/lang3/exception/ExceptionUtils.java#L125-L126&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/blob/adc70c15ce3d19f4d9d6c60956038e2aa14a60bd/src/main/java/org/apache/commons/lang3/exception/ExceptionUtils.java#L125-L126&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17803326" author="garydgregory" created="Thu, 4 Jan 2024 21:00:05 +0000"  >&lt;p&gt;What do you think the comment should read?&lt;/p&gt;</comment>
                            <comment id="17803335" author="wilx" created="Thu, 4 Jan 2024 21:49:39 +0000"  >&lt;p&gt;After looking at this more carefully, there are more problems than just the comment.&lt;/p&gt;

&lt;p&gt;The bodies of the &lt;tt&gt;rethrow&lt;/tt&gt; method and the &lt;tt&gt;asRuntimeException&lt;/tt&gt; method are the same, yet for some reason they have different return types:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &amp;lt;T&amp;gt; T rethrow(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Throwable throwable) {
    &lt;span class=&quot;code-comment&quot;&gt;// claim that the typeErasure invocation &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; a RuntimeException
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ExceptionUtils.&amp;lt;T, RuntimeException&amp;gt;eraseType(throwable);
}
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &amp;lt;T &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; RuntimeException&amp;gt; T asRuntimeException(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Throwable throwable) {
    &lt;span class=&quot;code-comment&quot;&gt;// claim that the typeErasure invocation &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; a RuntimeException
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ExceptionUtils.&amp;lt;T, RuntimeException&amp;gt;eraseType(throwable);
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The motivating example above the &lt;tt&gt;asRuntimeException&lt;/tt&gt; does not make sense with such return type, unless &lt;tt&gt;invocation()&lt;/tt&gt; also returns &lt;tt&gt;RuntimeException&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
*  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; propagateExample { &lt;span class=&quot;code-comment&quot;&gt;// note that there is no &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; clause
&lt;/span&gt;*      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
*          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; invocation(); &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
&lt;/span&gt;*      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
*          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ExceptionUtils.rethrowRuntimeException(e);  &lt;span class=&quot;code-comment&quot;&gt;// propagates a checked exception
&lt;/span&gt;*      }
*  } &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The motivating example above also uses &lt;tt&gt;rethrowRuntimeException&lt;/tt&gt;, which does not exist at all.&lt;/p&gt;

&lt;p&gt;There are other problems with the method. The method does not actually throw &lt;tt&gt;RuntimeException&lt;/tt&gt; as its name suggests. But that is correct because the 2nd sentence of the method comment (&quot;This method prevents throws clause pollution and reduces the clutter of &quot;Caused by&quot; exceptions in the stack trace.&quot;) suggests it should not be wrapping with anything.&lt;/p&gt;

&lt;p&gt;I am not sure what exactly should be changed because I do not know the intentions you had with it.&lt;/p&gt;

&lt;p&gt;If it was to wrap and throw the passed &lt;tt&gt;Throwable&lt;/tt&gt; with &lt;tt&gt;RuntimeException&lt;/tt&gt;, it should actually do that, instead of rethrowing the original throwable, and it should have the same signature as the &lt;tt&gt;rethrow&lt;/tt&gt; method to actually be useful in all the same contexts as the &lt;tt&gt;rethrow&lt;/tt&gt; method is now. And the 2nd sentence &#171;This method prevents throws clause pollution and reduces the clutter of &quot;Caused by&quot; exceptions in the stack trace.&#187; should be removed because it becomes false.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17803352" author="niallp" created="Thu, 4 Jan 2024 23:45:54 +0000"  >&lt;p&gt;V&#225;clav has identified the main issue. It looks like the intention of the original commit was to simply rename the method, I assume the intention was to make it more understandable as to what it does, but there are two problems with it&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The return type was incorrectly from &amp;lt;T&amp;gt; to &amp;lt;T extends RuntimeException&amp;gt; which makes it unusable since the return type must match the return type of the calling method which will not be a RuntimeException&lt;/li&gt;
	&lt;li&gt;The original &lt;em&gt;&lt;b&gt;rethrow&lt;/b&gt;&lt;/em&gt; method name accurately described what it did (it rethrows the original exception, but tricks the compiler into thinking its a RuntimeException). Changing the name to &lt;em&gt;&lt;b&gt;asRuntimeException&lt;/b&gt;&lt;/em&gt; introduces a confusion because it just rethrows the original exception, which may not be a RuntimeException.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;So, for me, the first thing is to decide what todo. Ideally IMO we should get rid of the new &lt;em&gt;&lt;b&gt;asRuntimeException&lt;/b&gt;&lt;/em&gt; method. I guess since its part of a release, that means it should be deprecated with a note to use the original&#160;&lt;em&gt;&lt;b&gt;rethrow&lt;/b&gt;&lt;/em&gt; method.&lt;/p&gt;

&lt;p&gt;Once its agreed what todo about this, then I think the javadoc can be corrected or improved.&lt;/p&gt;</comment>
                            <comment id="17803375" author="garydgregory" created="Fri, 5 Jan 2024 01:08:43 +0000"  >&lt;p&gt;Since we don&apos;t want to break binary compatibility, the best we can do is update the Java document. PRs welcome. Or, I&apos;ll take a look soonish.&lt;/p&gt;</comment>
                            <comment id="17803832" author="garydgregory" created="Sat, 6 Jan 2024 16:12:05 +0000"  >&lt;p&gt;I&apos;ve updated the Javadocs for both methods. Please let me know what you think.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17807378" author="wilx" created="Tue, 16 Jan 2024 18:09:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; The &lt;tt&gt;@return&lt;/tt&gt; javadoc is still wrong:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
* @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Never actually returned, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt; type matches any type
*         which the calling site requires. &lt;span class=&quot;code-quote&quot;&gt;&quot;Returning&quot;&lt;/span&gt; the results of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;
*         method, as done in the propagateExample above, will satisfy the
*         Java compiler requirement that all code paths &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; a value. &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Honestly, I think the entire &lt;tt&gt;asRuntimeException()&lt;/tt&gt; method should be removed. It is useless and it will only confuse people when &lt;tt&gt;rethrow()&lt;/tt&gt; is there as well with better interface.&lt;/p&gt;

&lt;p&gt;I understand that would be a breaking change but if anyone has used it, they must have scratched their head as well as I did.&lt;/p&gt;</comment>
                            <comment id="17808955" author="garydgregory" created="Sat, 20 Jan 2024 20:53:57 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wilx&quot; class=&quot;user-hover&quot; rel=&quot;wilx&quot;&gt;wilx&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Feel free to provide a PR on GitHub for at least a Javadoc improvement. Run &apos;mvn&apos; by itself to run all build checks before you push.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1mkc0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>