{"url":"https://api.github.com/repos/libgdx/libgdx/issues/5997","repository_url":"https://api.github.com/repos/libgdx/libgdx","labels_url":"https://api.github.com/repos/libgdx/libgdx/issues/5997/labels{/name}","comments_url":"https://api.github.com/repos/libgdx/libgdx/issues/5997/comments","events_url":"https://api.github.com/repos/libgdx/libgdx/issues/5997/events","html_url":"https://github.com/libgdx/libgdx/issues/5997","id":599119436,"node_id":"MDU6SXNzdWU1OTkxMTk0MzY=","number":5997,"title":"Not possible to deselect in a multi-select tree with more than one node selected","user":{"login":"timewasteGames","id":33322986,"node_id":"MDQ6VXNlcjMzMzIyOTg2","avatar_url":"https://avatars.githubusercontent.com/u/33322986?v=4","gravatar_id":"","url":"https://api.github.com/users/timewasteGames","html_url":"https://github.com/timewasteGames","followers_url":"https://api.github.com/users/timewasteGames/followers","following_url":"https://api.github.com/users/timewasteGames/following{/other_user}","gists_url":"https://api.github.com/users/timewasteGames/gists{/gist_id}","starred_url":"https://api.github.com/users/timewasteGames/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timewasteGames/subscriptions","organizations_url":"https://api.github.com/users/timewasteGames/orgs","repos_url":"https://api.github.com/users/timewasteGames/repos","events_url":"https://api.github.com/users/timewasteGames/events{/privacy}","received_events_url":"https://api.github.com/users/timewasteGames/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-04-13T20:33:30Z","updated_at":"2020-04-15T16:31:59Z","closed_at":"2020-04-15T16:31:09Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### Issue details\r\nIt is not possible to deselect nodes in a tree configured for multi-select after more than one node has been selected. You can if only one is selected so behaviour feels inconsistent at least. Seems to be related to [this commit](https://github.com/libgdx/libgdx/commit/74c6955a5745d7d141e3bdfe41f3ead688dc4e82#diff-91e1a1e4b6c5d3184d16accc0dee8983) to the Selection class.\r\n\r\nI'm not entirely sure what behaviour the Selection logic is trying to achieve so am hesitant to suggest a fix. I am happy to try to deconstruct it if would help.\r\n\r\nFTR, I've worked around this by replacing the ClickListener in Tree with one that doesn't use Selection.choose for deselect, which is fine for my needs.\r\n\r\n#### Reproduction steps/code\r\nRun the below, you can select and deselect one node at a time using touch (click) only. However, once both nodes are selected it is not possible to deselect any using touch only.\r\n\r\n```\r\nimport com.badlogic.gdx.ApplicationAdapter;\r\nimport com.badlogic.gdx.Gdx;\r\nimport com.badlogic.gdx.backends.lwjgl.LwjglApplication;\r\nimport com.badlogic.gdx.graphics.GL20;\r\nimport com.badlogic.gdx.scenes.scene2d.Stage;\r\nimport com.badlogic.gdx.scenes.scene2d.ui.Label;\r\nimport com.badlogic.gdx.scenes.scene2d.ui.Skin;\r\nimport com.badlogic.gdx.scenes.scene2d.ui.Table;\r\nimport com.badlogic.gdx.scenes.scene2d.ui.Tree;\r\nimport com.badlogic.gdx.utils.viewport.ScreenViewport;\r\n\r\npublic class BarebonesStage extends ApplicationAdapter {\r\n  Stage stage;\r\n  Skin skin;\r\n\r\n  class Node extends Tree.Node<BarebonesStage.Node, String, Label> {\r\n    public Node(String text) {\r\n      super(new Label(text, skin));\r\n      setValue(text);\r\n    }\r\n  }\r\n\r\n  @Override\r\n  public void create() {\r\n    stage = new Stage(new ScreenViewport());\r\n    Gdx.input.setInputProcessor(stage);\r\n    skin = new Skin(Gdx.files.internal(\"data/uiskin.json\"));\r\n\r\n    Table table = new Table();\r\n    table.setFillParent(true);\r\n    stage.addActor(table);\r\n\r\n    Tree<Node, String> tree = new Tree<>(skin);\r\n    tree.add(new Node(\"One\"));\r\n    tree.add(new Node(\"Two\"));\r\n\r\n    tree.getSelection().setMultiple(true);\r\n    tree.getSelection().setToggle(true);\r\n\r\n    table.add(tree).fill().expand();\r\n  }\r\n\r\n  @Override\r\n  public void render() {\r\n    Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);\r\n    stage.draw();\r\n  }\r\n\r\n  public void resize(int width, int height) {\r\n    // Pass false to not modify the camera position.\r\n    stage.getViewport().update(width, height, true);\r\n  }\r\n\r\n  public static void main(String[] args) {\r\n    new LwjglApplication(new BarebonesStage());\r\n  }\r\n}\r\n```\r\n\r\n#### Version of LibGDX and/or relevant dependencies\r\n1.9.10\r\n\r\n#### Please select the affected platforms\r\nAll","closed_by":{"login":"NathanSweet","id":434010,"node_id":"MDQ6VXNlcjQzNDAxMA==","avatar_url":"https://avatars.githubusercontent.com/u/434010?v=4","gravatar_id":"","url":"https://api.github.com/users/NathanSweet","html_url":"https://github.com/NathanSweet","followers_url":"https://api.github.com/users/NathanSweet/followers","following_url":"https://api.github.com/users/NathanSweet/following{/other_user}","gists_url":"https://api.github.com/users/NathanSweet/gists{/gist_id}","starred_url":"https://api.github.com/users/NathanSweet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NathanSweet/subscriptions","organizations_url":"https://api.github.com/users/NathanSweet/orgs","repos_url":"https://api.github.com/users/NathanSweet/repos","events_url":"https://api.github.com/users/NathanSweet/events{/privacy}","received_events_url":"https://api.github.com/users/NathanSweet/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/libgdx/libgdx/issues/5997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/libgdx/libgdx/issues/5997/timeline","performed_via_github_app":null,"state_reason":"completed"}