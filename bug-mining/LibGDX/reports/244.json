{"url":"https://api.github.com/repos/libgdx/libgdx/issues/3074","repository_url":"https://api.github.com/repos/libgdx/libgdx","labels_url":"https://api.github.com/repos/libgdx/libgdx/issues/3074/labels{/name}","comments_url":"https://api.github.com/repos/libgdx/libgdx/issues/3074/comments","events_url":"https://api.github.com/repos/libgdx/libgdx/issues/3074/events","html_url":"https://github.com/libgdx/libgdx/issues/3074","id":72264096,"node_id":"MDU6SXNzdWU3MjI2NDA5Ng==","number":3074,"title":"no support for BMFont's (.fnt) padding - xHeight & capHeight invalid for padded fonts","user":{"login":"FyiurAmron","id":11016998,"node_id":"MDQ6VXNlcjExMDE2OTk4","avatar_url":"https://avatars.githubusercontent.com/u/11016998?v=4","gravatar_id":"","url":"https://api.github.com/users/FyiurAmron","html_url":"https://github.com/FyiurAmron","followers_url":"https://api.github.com/users/FyiurAmron/followers","following_url":"https://api.github.com/users/FyiurAmron/following{/other_user}","gists_url":"https://api.github.com/users/FyiurAmron/gists{/gist_id}","starred_url":"https://api.github.com/users/FyiurAmron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FyiurAmron/subscriptions","organizations_url":"https://api.github.com/users/FyiurAmron/orgs","repos_url":"https://api.github.com/users/FyiurAmron/repos","events_url":"https://api.github.com/users/FyiurAmron/events{/privacy}","received_events_url":"https://api.github.com/users/FyiurAmron/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2015-04-30T19:48:39Z","updated_at":"2015-05-01T20:55:48Z","closed_at":"2015-05-01T17:56:06Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Current BitmapFont.java implementation just ignores the `padding=` field; it makes using fonts with e.g. shadow/glow very hard, since both _xHeight_ & _capHeight_ are calculated based on actual texture size, not the size minus padding one. Since for shadowed/glowed fonts the texture size is often 2-3x bigger than the proper _xHeight_/_capHeight_ calculated from of the \"core\" of the glyph, this results in very poor vertical positioning of the glyphs during text compositing (i.e. it's almost impossible to calculate where the actual glyph will appear due to offseting from padding). Horizontal positioning is unaffected, since it's directly based on raw .fnt data.\n\nThe solution I used to work around this was replacing https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/BitmapFont.java#L472 line with\n\n```\n// private static final int paddingCount = 4;\n                String line = reader.readLine();\n                String keyword = \"padding=\";\n                String substr = line.substring( line.indexOf( keyword ) + keyword.length() );\n                String[] paddingStr = substr.substring( 0, substr.indexOf( ' ' ) ).split( \",\", paddingCount );\n                if ( paddingStr.length != paddingCount ) {\n                    throw new IOException();\n                }\n                int[] padding = new int[paddingCount];\n                for( int i = 0; i < paddingCount; i++ ) {\n                    padding[i] = Integer.parseInt( paddingStr[i] );\n                }\n                // up, right, down, left\n                int paddingHorizontal = padding[1] + padding[3], // currently unused\n                        paddingVertical = padding[0] + padding[2];\n```\n\nand then, in lines 606 through 628, all occurences of `xGlyph.height`/`capGlyph.height`/`glyph.height` with the respective `.height - paddingVertical`.\n\nI don't know if this is the best way to do this, but it seems that it fixes the issue. Any suggestions/patches are most welcome.\n","closed_by":{"login":"NathanSweet","id":434010,"node_id":"MDQ6VXNlcjQzNDAxMA==","avatar_url":"https://avatars.githubusercontent.com/u/434010?v=4","gravatar_id":"","url":"https://api.github.com/users/NathanSweet","html_url":"https://github.com/NathanSweet","followers_url":"https://api.github.com/users/NathanSweet/followers","following_url":"https://api.github.com/users/NathanSweet/following{/other_user}","gists_url":"https://api.github.com/users/NathanSweet/gists{/gist_id}","starred_url":"https://api.github.com/users/NathanSweet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NathanSweet/subscriptions","organizations_url":"https://api.github.com/users/NathanSweet/orgs","repos_url":"https://api.github.com/users/NathanSweet/repos","events_url":"https://api.github.com/users/NathanSweet/events{/privacy}","received_events_url":"https://api.github.com/users/NathanSweet/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/libgdx/libgdx/issues/3074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/libgdx/libgdx/issues/3074/timeline","performed_via_github_app":null,"state_reason":"completed"}