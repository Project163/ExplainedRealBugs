{"url":"https://api.github.com/repos/libgdx/libgdx/issues/4425","repository_url":"https://api.github.com/repos/libgdx/libgdx","labels_url":"https://api.github.com/repos/libgdx/libgdx/issues/4425/labels{/name}","comments_url":"https://api.github.com/repos/libgdx/libgdx/issues/4425/comments","events_url":"https://api.github.com/repos/libgdx/libgdx/issues/4425/events","html_url":"https://github.com/libgdx/libgdx/issues/4425","id":189922885,"node_id":"MDU6SXNzdWUxODk5MjI4ODU=","number":4425,"title":"Labels don't wrap in the correct position with markup enabled","user":{"login":"DigNZ","id":817657,"node_id":"MDQ6VXNlcjgxNzY1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/817657?v=4","gravatar_id":"","url":"https://api.github.com/users/DigNZ","html_url":"https://github.com/DigNZ","followers_url":"https://api.github.com/users/DigNZ/followers","following_url":"https://api.github.com/users/DigNZ/following{/other_user}","gists_url":"https://api.github.com/users/DigNZ/gists{/gist_id}","starred_url":"https://api.github.com/users/DigNZ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DigNZ/subscriptions","organizations_url":"https://api.github.com/users/DigNZ/orgs","repos_url":"https://api.github.com/users/DigNZ/repos","events_url":"https://api.github.com/users/DigNZ/events{/privacy}","received_events_url":"https://api.github.com/users/DigNZ/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":11336980,"node_id":"MDU6TGFiZWwxMTMzNjk4MA==","url":"https://api.github.com/repos/libgdx/libgdx/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":89047068,"node_id":"MDU6TGFiZWw4OTA0NzA2OA==","url":"https://api.github.com/repos/libgdx/libgdx/labels/scene2d","name":"scene2d","color":"fbca04","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2016-11-17T03:07:11Z","updated_at":"2018-05-31T04:12:20Z","closed_at":"2018-05-31T04:12:20Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"\r\n#### Issue details\r\nIf markup is used to changed the colour of a word that is at a wrap boundary then the word will not wrap correctly and the label will spill out of the bounds of the table that it is contained in. This increases the width of the layout and causes text to be cut off or drawn in the wrong place.\r\n\r\nI've tested combinations of opening and closing the colour markup as well as different colours and the consistently reproducible thing is that if the word after the colour change needed to wrap then it will not. (even with a space between the markup and the word).\r\n\r\n#### Reproduction steps/code\r\nNote in the example below if the [GREEN] tag is moved one word before or after its current position then all the text will wrap correctly and fit within the table as it should. \r\n```\r\npublic class TextWrapping extends ApplicationAdapter {\r\n\r\n    Stage activeStage;\r\n\r\n    @Override\r\n    public void create() {\r\n        activeStage = new Stage(new FillViewport(640, 480));\r\n        BitmapFont font = new BitmapFont();\r\n        font.getData().markupEnabled = true;\r\n        Table stageContentTable = new Table();\r\n        stageContentTable.setFillParent(true);\r\n        Label l = new Label(\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris ut lacus maximus, [GREEN]volutpat ex vel, tempor leo. Vivamus elit risus, iaculis at ante vel, commodo mattis tellus. Etiam ac tempor quam, quis aliquet nisl. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Duis nisl velit, scelerisque sed ultricies ornare, ultrices non tortor. Duis justo magna, dapibus quis accumsan a, tristique eu metus. Vestibulum pellentesque lobortis ante, vel maximus odio ultricies ut. Sed lobortis cursus sem, a facilisis ex volutpat in. Pellentesque id libero quis ipsum euismod ullamcorper sit amet at enim. Donec sed dictum ex.\"\r\n                + \"Donec dignissim felis et malesuada egestas. Vivamus vel fringilla lorem. Mauris accumsan eget turpis non volutpat. Nunc facilisis laoreet mauris, scelerisque aliquet lacus eleifend eu. Integer id dignissim purus. Nunc dignissim commodo venenatis. Nullam massa mauris, elementum at rutrum sit amet, lacinia ut arcu. Quisque non nibh eget justo ornare maximus. Vestibulum finibus mi augue, eu gravida purus pulvinar ut. In fringilla dignissim suscipit.\"\r\n                + \"Fusce vitae massa consequat, finibus mauris id, efficitur nunc. Praesent nec orci quis sem euismod viverra. Vivamus non lacus nec ante consequat blandit sed sit amet purus. Mauris orci diam, interdum sit amet ipsum et, vestibulum varius sem. Integer ornare tortor id tortor varius, a varius sem volutpat. Suspendisse hendrerit condimentum tincidunt. Sed pellentesque vitae tellus sed efficitur. Etiam sodales lorem tellus, at dictum mauris pellentesque et. In vitae scelerisque nisl. Proin semper ante et quam volutpat, faucibus gravida felis consequat. Quisque ac urna mollis, scelerisque est et, venenatis risus. Etiam ac volutpat nibh.\", new Label.LabelStyle(font, Color.WHITE));\r\n        l.setWrap(true);\r\n        stageContentTable.add(l).top().left().width(560);\r\n        stageContentTable.setDebug(true, true);\r\n        activeStage.addActor(stageContentTable);\r\n    }\r\n\r\n    @Override\r\n    public void render() {\r\n        Gdx.gl.glClearColor(0.5f, 0.5f, 0.5f, 1);\r\n        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);\r\n        activeStage.act();\r\n        activeStage.draw();\r\n    }\r\n}\r\n```\r\n\r\n#### Version of LibGDX and/or relevant dependencies\r\nTested on 1.9.4\r\n\r\n\r\n\r\n#### Please select the affected platforms\r\nShows on all platforms.\r\n\r\n**With the colour tag before a word that should wrap.**\r\n\r\n![screenshot from 2016-11-17 16-11-33](https://cloud.githubusercontent.com/assets/817657/20374920/87394700-ace0-11e6-86f1-b3c1c562c75f.png)\r\n\r\n**With the colour tag before a word that does not need to wrap**\r\n![screenshot from 2016-11-17 16-11-08](https://cloud.githubusercontent.com/assets/817657/20374926/8bdaf86c-ace0-11e6-9f45-68be7f8cdb35.png)\r\n\r\n","closed_by":{"login":"NathanSweet","id":434010,"node_id":"MDQ6VXNlcjQzNDAxMA==","avatar_url":"https://avatars.githubusercontent.com/u/434010?v=4","gravatar_id":"","url":"https://api.github.com/users/NathanSweet","html_url":"https://github.com/NathanSweet","followers_url":"https://api.github.com/users/NathanSweet/followers","following_url":"https://api.github.com/users/NathanSweet/following{/other_user}","gists_url":"https://api.github.com/users/NathanSweet/gists{/gist_id}","starred_url":"https://api.github.com/users/NathanSweet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NathanSweet/subscriptions","organizations_url":"https://api.github.com/users/NathanSweet/orgs","repos_url":"https://api.github.com/users/NathanSweet/repos","events_url":"https://api.github.com/users/NathanSweet/events{/privacy}","received_events_url":"https://api.github.com/users/NathanSweet/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/libgdx/libgdx/issues/4425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/libgdx/libgdx/issues/4425/timeline","performed_via_github_app":null,"state_reason":"completed"}