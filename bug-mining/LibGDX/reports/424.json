{"url":"https://api.github.com/repos/libgdx/libgdx/issues/4895","repository_url":"https://api.github.com/repos/libgdx/libgdx","labels_url":"https://api.github.com/repos/libgdx/libgdx/issues/4895/labels{/name}","comments_url":"https://api.github.com/repos/libgdx/libgdx/issues/4895/comments","events_url":"https://api.github.com/repos/libgdx/libgdx/issues/4895/events","html_url":"https://github.com/libgdx/libgdx/issues/4895","id":260030969,"node_id":"MDU6SXNzdWUyNjAwMzA5Njk=","number":4895,"title":"OpenAL Music getPosition reports incorrect values after playing then stopping then playing again","user":{"login":"chrislo27","id":6299069,"node_id":"MDQ6VXNlcjYyOTkwNjk=","avatar_url":"https://avatars.githubusercontent.com/u/6299069?v=4","gravatar_id":"","url":"https://api.github.com/users/chrislo27","html_url":"https://github.com/chrislo27","followers_url":"https://api.github.com/users/chrislo27/followers","following_url":"https://api.github.com/users/chrislo27/following{/other_user}","gists_url":"https://api.github.com/users/chrislo27/gists{/gist_id}","starred_url":"https://api.github.com/users/chrislo27/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrislo27/subscriptions","organizations_url":"https://api.github.com/users/chrislo27/orgs","repos_url":"https://api.github.com/users/chrislo27/repos","events_url":"https://api.github.com/users/chrislo27/events{/privacy}","received_events_url":"https://api.github.com/users/chrislo27/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-09-23T18:57:44Z","updated_at":"2017-09-24T17:44:20Z","closed_at":"2017-09-24T17:44:20Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### Issue details\r\nStarting with commit https://github.com/libgdx/libgdx/commit/b0e71b000c978c179b17c9bfa8175b69d4029468, calling getPosition() on Music (desktop) returns incorrect values if played, stopped, and then played from the beginning.\r\n\r\n#### Reproduction steps/code\r\n1. Load a music object using `Gdx.audio.newMusic`.\r\n2. Play it for several seconds. Usually at least three is enough, but more makes the effect more noticeable.\r\n3. Call `stop` on the Music object. You'll see that the result of `getPosition` is 0.0.\r\n4. Play the music again.\r\n5. By checking the result of `getPosition`, you will see that it quickly returns the old position value prior to having `stop` called, but still increases. (eg: If you stopped it at 10.0 seconds, it will return 0.0 for the first frames of music, but then return to 10.0 and keep increasing.) The actual playback of music is 100% okay, though.\r\n\r\nBelow is a runnable example. SPACE will pause/play the music, S will stop it and print the position right after. You should replace the FileHandle for the music with something appropriate. So far this happens on all three supported formats from my testing (WAV, MP3, OGG).\r\n```java\r\nimport com.badlogic.gdx.ApplicationAdapter;\r\nimport com.badlogic.gdx.Gdx;\r\nimport com.badlogic.gdx.Input.Keys;\r\nimport com.badlogic.gdx.audio.Music;\r\nimport com.badlogic.gdx.backends.lwjgl.LwjglApplication;\r\nimport com.badlogic.gdx.graphics.GL20;\r\n\r\npublic class Test extends ApplicationAdapter {\r\n\r\n    Music music;\r\n\r\n    public void create () {\r\n        music = Gdx.audio.newMusic(Gdx.files.local(\"music.ogg\"));\r\n    }\r\n\r\n    public void render () {\r\n        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);\r\n\r\n        if (Gdx.input.isKeyJustPressed(Keys.SPACE)) {\r\n            if (music.isPlaying()) {\r\n                music.pause();\r\n            } else {\r\n                music.play();\r\n            }\r\n        } else if (Gdx.input.isKeyJustPressed(Keys.S)) {\r\n            music.stop();\r\n            printPosition();\r\n        }\r\n\r\n        if (music.isPlaying()) {\r\n            printPosition();\r\n        }\r\n    }\r\n\r\n    void printPosition() {\r\n        System.out.println(music.getPosition());\r\n    }\r\n\r\n    @Override\r\n    public void dispose() {\r\n        super.dispose();\r\n        music.dispose();\r\n    }\r\n\r\n    public static void main (String[] args) throws Exception {\r\n        new LwjglApplication(new Test());\r\n    }\r\n}\r\n```\r\n\r\n#### Version of LibGDX and/or relevant dependencies\r\nhttps://github.com/libgdx/libgdx/commit/b0e71b000c978c179b17c9bfa8175b69d4029468\r\n\r\n#### Please select the affected platforms\r\n- [ ] Android\r\n- [ ] iOS (robovm)\r\n- [ ] iOS (MOE)\r\n- [ ] HTML/GWT\r\n- [x] Windows\r\n- [ ] Linux\r\n- [ ] MacOS\r\n","closed_by":{"login":"Tom-Ski","id":4346114,"node_id":"MDQ6VXNlcjQzNDYxMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4346114?v=4","gravatar_id":"","url":"https://api.github.com/users/Tom-Ski","html_url":"https://github.com/Tom-Ski","followers_url":"https://api.github.com/users/Tom-Ski/followers","following_url":"https://api.github.com/users/Tom-Ski/following{/other_user}","gists_url":"https://api.github.com/users/Tom-Ski/gists{/gist_id}","starred_url":"https://api.github.com/users/Tom-Ski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tom-Ski/subscriptions","organizations_url":"https://api.github.com/users/Tom-Ski/orgs","repos_url":"https://api.github.com/users/Tom-Ski/repos","events_url":"https://api.github.com/users/Tom-Ski/events{/privacy}","received_events_url":"https://api.github.com/users/Tom-Ski/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/libgdx/libgdx/issues/4895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/libgdx/libgdx/issues/4895/timeline","performed_via_github_app":null,"state_reason":"completed"}