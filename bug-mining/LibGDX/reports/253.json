{"url":"https://api.github.com/repos/libgdx/libgdx/issues/3027","repository_url":"https://api.github.com/repos/libgdx/libgdx","labels_url":"https://api.github.com/repos/libgdx/libgdx/issues/3027/labels{/name}","comments_url":"https://api.github.com/repos/libgdx/libgdx/issues/3027/comments","events_url":"https://api.github.com/repos/libgdx/libgdx/issues/3027/events","html_url":"https://github.com/libgdx/libgdx/issues/3027","id":69044743,"node_id":"MDU6SXNzdWU2OTA0NDc0Mw==","number":3027,"title":"build.gradle and Native libraries","user":{"login":"obigu","id":1794492,"node_id":"MDQ6VXNlcjE3OTQ0OTI=","avatar_url":"https://avatars.githubusercontent.com/u/1794492?v=4","gravatar_id":"","url":"https://api.github.com/users/obigu","html_url":"https://github.com/obigu","followers_url":"https://api.github.com/users/obigu/followers","following_url":"https://api.github.com/users/obigu/following{/other_user}","gists_url":"https://api.github.com/users/obigu/gists{/gist_id}","starred_url":"https://api.github.com/users/obigu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/obigu/subscriptions","organizations_url":"https://api.github.com/users/obigu/orgs","repos_url":"https://api.github.com/users/obigu/repos","events_url":"https://api.github.com/users/obigu/events{/privacy}","received_events_url":"https://api.github.com/users/obigu/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-04-17T01:46:52Z","updated_at":"2015-05-10T06:55:37Z","closed_at":"2015-05-10T06:55:37Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I've been trying to add a dependency on a 3rd party library that included a native .so library and I've found (as reported here https://github.com/libgdx/libgdx/issues/2733) that the task \n\n```\ntasks.withType(com.android.build.gradle.tasks.PackageApplication) { pkgTask ->\n    pkgTask.jniFolders = new HashSet<File>()\n   pkgTask.jniFolders.add(new File(projectDir, 'libs'))\n```\n\nwas deleting it and thus was not being included in the APK.\n\nIf I'm not wrong this task was the workaround for adding native dependencies before NDK support was added to the build tools on version 0.8. From 0.8 onwards it's possible to define the jndi libs folder for a project and the plugin takes care of the rest (see http://sysmagazine.com/posts/216353/).\n\nIn our case we can keep the current directory structure (necessary for Eclipse apparently) just by setting the jndiLibs folder to 'libs' in the sourceSets element\n\n```\n sourceSets {\n        main {\n            manifest.srcFile 'AndroidManifest.xml'\n            java.srcDirs = ['src']\n            jniLibs.srcDir 'libs'\n            ...\n```\n\nNow we can comment out/delete the task and let the plugin handle it\n\n```\n//tasks.withType(com.android.build.gradle.tasks.PackageApplication) { pkgTask ->\n//pkgTask.jniFolders = new HashSet<File>()\n //pkgTask.jniFolders.add(new File(projectDir, 'libs'))\n```\n\nSorry if I'm missing a specific case here, in my tests it works nicely.\n","closed_by":{"login":"Tom-Ski","id":4346114,"node_id":"MDQ6VXNlcjQzNDYxMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4346114?v=4","gravatar_id":"","url":"https://api.github.com/users/Tom-Ski","html_url":"https://github.com/Tom-Ski","followers_url":"https://api.github.com/users/Tom-Ski/followers","following_url":"https://api.github.com/users/Tom-Ski/following{/other_user}","gists_url":"https://api.github.com/users/Tom-Ski/gists{/gist_id}","starred_url":"https://api.github.com/users/Tom-Ski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tom-Ski/subscriptions","organizations_url":"https://api.github.com/users/Tom-Ski/orgs","repos_url":"https://api.github.com/users/Tom-Ski/repos","events_url":"https://api.github.com/users/Tom-Ski/events{/privacy}","received_events_url":"https://api.github.com/users/Tom-Ski/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/libgdx/libgdx/issues/3027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/libgdx/libgdx/issues/3027/timeline","performed_via_github_app":null,"state_reason":"completed"}