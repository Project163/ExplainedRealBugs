{"url":"https://api.github.com/repos/libgdx/libgdx/issues/1278","repository_url":"https://api.github.com/repos/libgdx/libgdx","labels_url":"https://api.github.com/repos/libgdx/libgdx/issues/1278/labels{/name}","comments_url":"https://api.github.com/repos/libgdx/libgdx/issues/1278/comments","events_url":"https://api.github.com/repos/libgdx/libgdx/issues/1278/events","html_url":"https://github.com/libgdx/libgdx/issues/1278","id":26780779,"node_id":"MDU6SXNzdWUyNjc4MDc3OQ==","number":1278,"title":"assertLoader progress (and toLoad) values are wrong when resource load directive is directly following with the same resource unload","user":{"login":"titovmaxim","id":1524918,"node_id":"MDQ6VXNlcjE1MjQ5MTg=","avatar_url":"https://avatars.githubusercontent.com/u/1524918?v=4","gravatar_id":"","url":"https://api.github.com/users/titovmaxim","html_url":"https://github.com/titovmaxim","followers_url":"https://api.github.com/users/titovmaxim/followers","following_url":"https://api.github.com/users/titovmaxim/following{/other_user}","gists_url":"https://api.github.com/users/titovmaxim/gists{/gist_id}","starred_url":"https://api.github.com/users/titovmaxim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/titovmaxim/subscriptions","organizations_url":"https://api.github.com/users/titovmaxim/orgs","repos_url":"https://api.github.com/users/titovmaxim/repos","events_url":"https://api.github.com/users/titovmaxim/events{/privacy}","received_events_url":"https://api.github.com/users/titovmaxim/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2014-02-03T04:47:18Z","updated_at":"2014-02-05T15:35:08Z","closed_at":"2014-02-05T13:28:11Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I have a scene which requires some assets to be loaded. During the scene change the new scene FIRST require their resources first and THEN the old scene release its resources.\n\nThis is done to prevent the same resource to unload from the old scene and then immediately to load it again. Reference counting of assetManager works well here. All works except that progress value (actually toLoad value) becomes wrong.\n\nWhat steps will reproduce the problem?\n    assetManager.load(\"themes/hero.g3db\", Model.class);\n    assetManager.finishLoading();\n    assetManager.load(\"themes/hero.g3db\", Model.class);\n    assetManager.unload(\"themes/hero.g3db\");\n    assetManager.finishLoading();\n    float progress = assetManager.getProgress();\n\nWhat is the expected output?\n    progress is expected to be 1f\n    internally assetManager.toLoad expected to be 0\n\nActually got:\n    progress is 0f (but the loading is completely finished);\n    internally assetManager.toLoad is 1 (but there is nothing to load)\n\nWhat version of libgdx are you using?\n    latest nightly\n\nassetManager.load method has this:\n    if (loadQueue.size == 0) {\n        loaded = 0;\n        toLoad = 0;\n    }\n\nEither a similar thing should be added to assetManager.progress method, or toLoad-- should be present in assetManager.unload when resource is unload from queue (probably also from tasks?)\n","closed_by":{"login":"NathanSweet","id":434010,"node_id":"MDQ6VXNlcjQzNDAxMA==","avatar_url":"https://avatars.githubusercontent.com/u/434010?v=4","gravatar_id":"","url":"https://api.github.com/users/NathanSweet","html_url":"https://github.com/NathanSweet","followers_url":"https://api.github.com/users/NathanSweet/followers","following_url":"https://api.github.com/users/NathanSweet/following{/other_user}","gists_url":"https://api.github.com/users/NathanSweet/gists{/gist_id}","starred_url":"https://api.github.com/users/NathanSweet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NathanSweet/subscriptions","organizations_url":"https://api.github.com/users/NathanSweet/orgs","repos_url":"https://api.github.com/users/NathanSweet/repos","events_url":"https://api.github.com/users/NathanSweet/events{/privacy}","received_events_url":"https://api.github.com/users/NathanSweet/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/libgdx/libgdx/issues/1278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/libgdx/libgdx/issues/1278/timeline","performed_via_github_app":null,"state_reason":"completed"}