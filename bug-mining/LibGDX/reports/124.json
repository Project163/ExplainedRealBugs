{"url":"https://api.github.com/repos/libgdx/libgdx/issues/2280","repository_url":"https://api.github.com/repos/libgdx/libgdx","labels_url":"https://api.github.com/repos/libgdx/libgdx/issues/2280/labels{/name}","comments_url":"https://api.github.com/repos/libgdx/libgdx/issues/2280/comments","events_url":"https://api.github.com/repos/libgdx/libgdx/issues/2280/events","html_url":"https://github.com/libgdx/libgdx/issues/2280","id":41506920,"node_id":"MDU6SXNzdWU0MTUwNjkyMA==","number":2280,"title":"Flipping rotated sprites from TextureAtlas","user":{"login":"nfantone","id":476069,"node_id":"MDQ6VXNlcjQ3NjA2OQ==","avatar_url":"https://avatars.githubusercontent.com/u/476069?v=4","gravatar_id":"","url":"https://api.github.com/users/nfantone","html_url":"https://github.com/nfantone","followers_url":"https://api.github.com/users/nfantone/followers","following_url":"https://api.github.com/users/nfantone/following{/other_user}","gists_url":"https://api.github.com/users/nfantone/gists{/gist_id}","starred_url":"https://api.github.com/users/nfantone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nfantone/subscriptions","organizations_url":"https://api.github.com/users/nfantone/orgs","repos_url":"https://api.github.com/users/nfantone/repos","events_url":"https://api.github.com/users/nfantone/events{/privacy}","received_events_url":"https://api.github.com/users/nfantone/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2014-08-29T14:40:31Z","updated_at":"2014-08-29T21:08:45Z","closed_at":"2014-08-29T19:27:12Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Not entirely sure if this is the intended behavior, but trying to call `flip()` on a Sprite created from a `TextureAtlas` that has `rotate: true` set, does not seem to work correctly. See my scenario below.\n## Steps to reproduce the problem\n- Create or download some spritesheet with rotated frames. This is the one I'm currently working on, along with a snippet of its atlas/pack descriptor file. The snippet defines the last two frames of a given `walking` animation. One is rotated, whereas the other is not.\n\n![zero](https://cloud.githubusercontent.com/assets/476069/4090982/d662515a-2f83-11e4-962b-85baccfbd8f5.png)\n\n```\nzero.png\nformat: RGBA8888\nfilter: Linear,Linear\nrepeat: none\n...\nwalking\n  rotate: false\n  xy: 2, 2\n  size: 47, 46\n  orig: 47, 46\n  offset: 0, 0\n  index: 8\nwalking\n  rotate: true\n  xy: 97, 2\n  size: 46, 43\n  orig: 46, 43\n  offset: 0, 0\n  index: 9\n```\n- Run this simple `ApplicationAdapter` (tested on Desktop and Android projects). The spritesheet should be called `zero.png`; the atlas file should be `zero.pack`. \n\n``` java\npublic class FlippedSpriteApplicationAdapter extends ApplicationAdapter {\n    private TextureAtlas zeroAtlas;\n    private SpriteBatch batch;\n    private Sprite regularSprite;\n    private Sprite rotatedSprite;\n\n    @Override\n    public void create() {\n        batch = new SpriteBatch();\n        zeroAtlas = new TextureAtlas(\"zero.pack\");\n        regularSprite = zeroAtlas.createSprite(\"walking\", 8);\n        rotatedSprite = zeroAtlas.createSprite(\"walking\", 9);\n        regularSprite.setPosition(50.0f, 50.0f);\n        rotatedSprite.setPosition(100.0f, 50.0f);\n\n        regularSprite.flip(true, false);\n        rotatedSprite.flip(true, false);\n    }\n\n    @Override\n    public void render() {\n        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);\n        batch.begin();\n        regularSprite.draw(batch);\n        rotatedSprite.draw(batch);\n        batch.end();\n\n    }\n\n    @Override\n    public void dispose() {\n        batch.dispose();\n        zeroAtlas.dispose();\n    }\n}\n```\n\nThis just creates the two sprites from the `TextureAtlas`, sets their position so they can be drawn along side one another, and _flips their x coordinate_.\n## Expected output\n\nIf I you comment out both calls to `flip()` in the previous piece of code, you can see that the sprites are drawn correctly (facing right). So, _libgdx_ handles the `rotate: true` internally, instantiating an `AtlasSprite` instead of a regular `Sprite`. This is abstracted away from the client as the `TextureAtlas#createSprite()` returns just a `Sprite`.\n\nIf you run the code as is (leaving the calls to `flip()`), the logically expected output should be two sprites facing left (mirrored from their original position)\n## What happens instead\n\nWhen running the code above, you'll see the `regularSprite` being drawn appropriately (that is, now facing left). But the `rotatedSprite` will be flipped as is the y axis is the one being rotated (facing up).\n\nI understand that `AtlasSprite` overrides the `flip()` method in `Sprite`. But they do not seem to follow the same contract, as calling it with its `x` parameter set to `true` _flips the values along the y axis_.\n\nIf it is, indeed, the expected behavior, then it's, at least, very confusing and should be clarified somewhere in the wiki. Moreover, it is rather cumbersome to handle if using a collection of sprites to, say, create an `Animation`. If you call `createSprites(\"walking\")` on a `TextureAtlas`, you end up with an `Array` of `Sprite`. Some of them are instances of `Sprite`, while some may be `AtlasSprite`. Those two _do not behave equally_ and you have no clear way of discerning between them (other tan calling `instance of`, of course).\n","closed_by":{"login":"NathanSweet","id":434010,"node_id":"MDQ6VXNlcjQzNDAxMA==","avatar_url":"https://avatars.githubusercontent.com/u/434010?v=4","gravatar_id":"","url":"https://api.github.com/users/NathanSweet","html_url":"https://github.com/NathanSweet","followers_url":"https://api.github.com/users/NathanSweet/followers","following_url":"https://api.github.com/users/NathanSweet/following{/other_user}","gists_url":"https://api.github.com/users/NathanSweet/gists{/gist_id}","starred_url":"https://api.github.com/users/NathanSweet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NathanSweet/subscriptions","organizations_url":"https://api.github.com/users/NathanSweet/orgs","repos_url":"https://api.github.com/users/NathanSweet/repos","events_url":"https://api.github.com/users/NathanSweet/events{/privacy}","received_events_url":"https://api.github.com/users/NathanSweet/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/libgdx/libgdx/issues/2280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/libgdx/libgdx/issues/2280/timeline","performed_via_github_app":null,"state_reason":"completed"}