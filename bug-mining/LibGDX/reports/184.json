{"url":"https://api.github.com/repos/libgdx/libgdx/issues/2630","repository_url":"https://api.github.com/repos/libgdx/libgdx","labels_url":"https://api.github.com/repos/libgdx/libgdx/issues/2630/labels{/name}","comments_url":"https://api.github.com/repos/libgdx/libgdx/issues/2630/comments","events_url":"https://api.github.com/repos/libgdx/libgdx/issues/2630/events","html_url":"https://github.com/libgdx/libgdx/issues/2630","id":51209013,"node_id":"MDU6SXNzdWU1MTIwOTAxMw==","number":2630,"title":"CpuSpriteBatch error: Can't invert a singular affine matrix","user":{"login":"titovmaxim","id":1524918,"node_id":"MDQ6VXNlcjE1MjQ5MTg=","avatar_url":"https://avatars.githubusercontent.com/u/1524918?v=4","gravatar_id":"","url":"https://api.github.com/users/titovmaxim","html_url":"https://github.com/titovmaxim","followers_url":"https://api.github.com/users/titovmaxim/followers","following_url":"https://api.github.com/users/titovmaxim/following{/other_user}","gists_url":"https://api.github.com/users/titovmaxim/gists{/gist_id}","starred_url":"https://api.github.com/users/titovmaxim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/titovmaxim/subscriptions","organizations_url":"https://api.github.com/users/titovmaxim/orgs","repos_url":"https://api.github.com/users/titovmaxim/repos","events_url":"https://api.github.com/users/titovmaxim/events{/privacy}","received_events_url":"https://api.github.com/users/titovmaxim/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2014-12-07T06:21:26Z","updated_at":"2014-12-23T11:58:44Z","closed_at":"2014-12-23T11:58:44Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"CpuSpriteBatch should be very useful together with scene2d and transform=enabled. When several Groups on the scene have their ow transformations, the normal SpriteBatch will lead to many render calls. However simple replacement of SpriteBatch to CpuSpriteBatch often leads to error: Can't invert a singular affine matrix or to the loss of elements position precessions.\n\nThis happens when the first setTransform call happens when batch is not in the drawing state. If this first call occurs for for Group (for example) with setScale(0f), then the group will not be able to resetTransform  at the end of draw method with the error: Can't invert a singular affine matrix. This is clear because setScale(0f) will lead to singular matrix. If the same happens with very-very small scale, then position precision will be lost. The bad thing is that it is connected just with the first setTransform call, disregarding the hierarchy of the objects.\n\nThe proposal is to remove if (isDrawing()) checks in both setTransform methods of CpuSpriteBatch and always apply adjustAffine. If someone really need to set GPU transform, one can make couple of special public methods to set them with implicit batch flash (like SpriteBath does).\n","closed_by":{"login":"NathanSweet","id":434010,"node_id":"MDQ6VXNlcjQzNDAxMA==","avatar_url":"https://avatars.githubusercontent.com/u/434010?v=4","gravatar_id":"","url":"https://api.github.com/users/NathanSweet","html_url":"https://github.com/NathanSweet","followers_url":"https://api.github.com/users/NathanSweet/followers","following_url":"https://api.github.com/users/NathanSweet/following{/other_user}","gists_url":"https://api.github.com/users/NathanSweet/gists{/gist_id}","starred_url":"https://api.github.com/users/NathanSweet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NathanSweet/subscriptions","organizations_url":"https://api.github.com/users/NathanSweet/orgs","repos_url":"https://api.github.com/users/NathanSweet/repos","events_url":"https://api.github.com/users/NathanSweet/events{/privacy}","received_events_url":"https://api.github.com/users/NathanSweet/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/libgdx/libgdx/issues/2630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/libgdx/libgdx/issues/2630/timeline","performed_via_github_app":null,"state_reason":"completed"}