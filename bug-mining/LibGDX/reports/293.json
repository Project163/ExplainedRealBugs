{"url":"https://api.github.com/repos/libgdx/libgdx/issues/3417","repository_url":"https://api.github.com/repos/libgdx/libgdx","labels_url":"https://api.github.com/repos/libgdx/libgdx/issues/3417/labels{/name}","comments_url":"https://api.github.com/repos/libgdx/libgdx/issues/3417/comments","events_url":"https://api.github.com/repos/libgdx/libgdx/issues/3417/events","html_url":"https://github.com/libgdx/libgdx/issues/3417","id":106416394,"node_id":"MDU6SXNzdWUxMDY0MTYzOTQ=","number":3417,"title":"Cursor creation fails on lwjgl-backend","user":{"login":"intrigus","id":10353467,"node_id":"MDQ6VXNlcjEwMzUzNDY3","avatar_url":"https://avatars.githubusercontent.com/u/10353467?v=4","gravatar_id":"","url":"https://api.github.com/users/intrigus","html_url":"https://github.com/intrigus","followers_url":"https://api.github.com/users/intrigus/followers","following_url":"https://api.github.com/users/intrigus/following{/other_user}","gists_url":"https://api.github.com/users/intrigus/gists{/gist_id}","starred_url":"https://api.github.com/users/intrigus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/intrigus/subscriptions","organizations_url":"https://api.github.com/users/intrigus/orgs","repos_url":"https://api.github.com/users/intrigus/repos","events_url":"https://api.github.com/users/intrigus/events{/privacy}","received_events_url":"https://api.github.com/users/intrigus/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2015-09-14T19:59:36Z","updated_at":"2015-09-15T11:11:05Z","closed_at":"2015-09-15T11:11:05Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"If you create a cursor with a height and width of 32 and set the hotspot coords to 31 lwjgl will crash.\nIt crashs because we subtract 4 in https://github.com/libgdx/libgdx/blob/master/backends/gdx-backend-lwjgl/src/com/badlogic/gdx/backends/lwjgl/LwjglCursor.java#L83 for no real reason.\nChanging \n\n```\nlwjglCursor = new org.lwjgl.input.Cursor(pixmap.getWidth(), pixmap.getHeight(), xHotspot, pixmap.getHeight() - yHotspot\n                - 4, 1, IntBuffer.wrap(pixelsARGBflipped), null);\n```\n\nto\n\n```\nlwjglCursor = new org.lwjgl.input.Cursor(pixmap.getWidth(), pixmap.getHeight(), xHotspot, pixmap.getHeight() - yHotspot\n                - 1, 1, IntBuffer.wrap(pixelsARGBflipped), null);\n```\n\nshould fix it.\n\nCode to reproduce:\n\n``` /*******************************************************************************\n * Copyright 2011 See AUTHORS file.\n * \n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * \n *   http://www.apache.org/licenses/LICENSE-2.0\n * \n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ******************************************************************************/\n\npackage com.badlogic.gdx.tests;\n\nimport com.badlogic.gdx.Gdx;\nimport com.badlogic.gdx.graphics.Color;\nimport com.badlogic.gdx.graphics.Cursor;\nimport com.badlogic.gdx.graphics.GL20;\nimport com.badlogic.gdx.graphics.OrthographicCamera;\nimport com.badlogic.gdx.graphics.Pixmap;\nimport com.badlogic.gdx.graphics.Pixmap.Format;\nimport com.badlogic.gdx.graphics.Texture;\nimport com.badlogic.gdx.graphics.g2d.BitmapFont;\nimport com.badlogic.gdx.graphics.g2d.SpriteBatch;\nimport com.badlogic.gdx.math.Vector3;\nimport com.badlogic.gdx.scenes.scene2d.Actor;\nimport com.badlogic.gdx.scenes.scene2d.InputEvent;\nimport com.badlogic.gdx.scenes.scene2d.Stage;\nimport com.badlogic.gdx.scenes.scene2d.ui.HorizontalGroup;\nimport com.badlogic.gdx.scenes.scene2d.ui.Label;\nimport com.badlogic.gdx.scenes.scene2d.ui.Table;\nimport com.badlogic.gdx.scenes.scene2d.ui.VerticalGroup;\nimport com.badlogic.gdx.scenes.scene2d.utils.ClickListener;\nimport com.badlogic.gdx.tests.utils.GdxTest;\nimport com.badlogic.gdx.utils.viewport.FitViewport;\nimport com.badlogic.gdx.utils.viewport.ScreenViewport;\nimport com.badlogic.gdx.utils.viewport.StretchViewport;\n\n/** Simple test case for mouse cursor hover over different labels to see different cursors and hotspots\n * pressed\n * @author haedri \n * @author Simon Gerst*/\npublic class CursorIssueTest extends GdxTest {\n    Cursor cursor1;\n    Stage stage;\n    Label pixmapLabel1;\n\n    public void create () {\n                Pixmap pixmap2 = new Pixmap(32, 32, Format.RGBA8888);\n        pixmap2.setColor(Color.RED);\n        pixmap2.fillCircle(16, 16, 8);\n        cursor1 = Gdx.graphics.newCursor(pixmap2, 31, 31);\nstage = new Stage(new ScreenViewport());\n        Gdx.input.setInputProcessor(stage);\n        BitmapFont font = new BitmapFont(Gdx.files.internal(\"data/arial-15.fnt\"), false);\n        pixmapLabel1 = new Label(\"Hover for Red Circle as Cursor, Hotspot: x[31], y[31]\", new Label.LabelStyle(font, Color.WHITE));\n        pixmapLabel1.addListener(new ClickListener() {\n\n            @Override\n            public void enter (InputEvent event, float x, float y, int pointer, Actor fromActor) {\n                super.enter(event, x, y, pointer, fromActor);\n                Gdx.graphics.setCursor(cursor1);\n            }\n\n            @Override\n            public void exit (InputEvent event, float x, float y, int pointer, Actor fromActor) {\n                super.enter(event, x, y, pointer, fromActor);\n                Gdx.graphics.setCursor(null);\n            }\n\n        });\n\n        Table hg = new Table();\n        hg.setFillParent(true);\n        hg.add(pixmapLabel1).top().center().row();\n        stage.addActor(hg);\n    }\n\n    @Override\n    public void render () {\n        // set the clear color and clear the screen.\n        Gdx.gl.glClearColor(0, 1, 1, 1);\n        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);\n        stage.draw();\n        stage.act();\n    }\n\n    @Override\n    public void resize (int width, int height) {\n        stage.getViewport().update(width, height, true);\n    }\n}\n```\n","closed_by":{"login":"Tom-Ski","id":4346114,"node_id":"MDQ6VXNlcjQzNDYxMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4346114?v=4","gravatar_id":"","url":"https://api.github.com/users/Tom-Ski","html_url":"https://github.com/Tom-Ski","followers_url":"https://api.github.com/users/Tom-Ski/followers","following_url":"https://api.github.com/users/Tom-Ski/following{/other_user}","gists_url":"https://api.github.com/users/Tom-Ski/gists{/gist_id}","starred_url":"https://api.github.com/users/Tom-Ski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tom-Ski/subscriptions","organizations_url":"https://api.github.com/users/Tom-Ski/orgs","repos_url":"https://api.github.com/users/Tom-Ski/repos","events_url":"https://api.github.com/users/Tom-Ski/events{/privacy}","received_events_url":"https://api.github.com/users/Tom-Ski/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/libgdx/libgdx/issues/3417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/libgdx/libgdx/issues/3417/timeline","performed_via_github_app":null,"state_reason":"completed"}