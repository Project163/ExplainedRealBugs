{"url":"https://api.github.com/repos/libgdx/libgdx/issues/3455","repository_url":"https://api.github.com/repos/libgdx/libgdx","labels_url":"https://api.github.com/repos/libgdx/libgdx/issues/3455/labels{/name}","comments_url":"https://api.github.com/repos/libgdx/libgdx/issues/3455/comments","events_url":"https://api.github.com/repos/libgdx/libgdx/issues/3455/events","html_url":"https://github.com/libgdx/libgdx/issues/3455","id":109644820,"node_id":"MDU6SXNzdWUxMDk2NDQ4MjA=","number":3455,"title":"Padded fonts have inconsistent space calculation around [] tags in marked up strings.","user":{"login":"xGnoSiSx","id":8305672,"node_id":"MDQ6VXNlcjgzMDU2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8305672?v=4","gravatar_id":"","url":"https://api.github.com/users/xGnoSiSx","html_url":"https://github.com/xGnoSiSx","followers_url":"https://api.github.com/users/xGnoSiSx/followers","following_url":"https://api.github.com/users/xGnoSiSx/following{/other_user}","gists_url":"https://api.github.com/users/xGnoSiSx/gists{/gist_id}","starred_url":"https://api.github.com/users/xGnoSiSx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xGnoSiSx/subscriptions","organizations_url":"https://api.github.com/users/xGnoSiSx/orgs","repos_url":"https://api.github.com/users/xGnoSiSx/repos","events_url":"https://api.github.com/users/xGnoSiSx/events{/privacy}","received_events_url":"https://api.github.com/users/xGnoSiSx/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-10-03T20:51:51Z","updated_at":"2015-12-11T02:40:53Z","closed_at":"2015-12-11T01:39:04Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Please merge #3432 and other relevant issues to this:\n\nAfter testing with padded and not-padded fonts it is clear that padding is bugged.\n\nTested with the built-in: data\\arial-32.fnt and data\\arial-32-pad.fnt for contrast (and to eliminate issues with my personal assets that I wrongly uploaded in #3432).\n\nThe top pair of draws are the padded font, the second pair has no padding and is displayed correctly.\n\nIf the last glyphrun ended with a space, the location to start the new glyphrun (for the next colored text section) doesn't compute the correct offset taking into account pad left & pad right.\n\nThe same happens when closing a tag since a new run starts with the previous color.\n\nEdit: Note that it's not about glyphs or spaces at all, the text from the next run has wrong offset and overlaps the previous text and the total width of the text element is incorrect.\n\nEdit 2: Note how the 4rth line is also different than the 3d this is a seperate and maybe a linked issue since it's not affected by font padding.\n\n![output](https://cloud.githubusercontent.com/assets/8305672/10265004/6bb0d220-6a27-11e5-83e9-162a964d3107.png)\n\nApplication class:\n\n``` java\npackage com.mygdx.tests;\n\nimport com.badlogic.gdx.ApplicationAdapter;\nimport com.badlogic.gdx.Gdx;\nimport com.badlogic.gdx.graphics.GL20;\nimport com.badlogic.gdx.graphics.Texture;\nimport com.badlogic.gdx.graphics.g2d.BitmapFont;\nimport com.badlogic.gdx.graphics.g2d.SpriteBatch;\n\npublic class MyGdxTest extends ApplicationAdapter {\n    SpriteBatch batch;\n    BitmapFont f,f_no_pad;\n\n    @Override\n    public void create () {\n        batch = new SpriteBatch();\n\n        f = new BitmapFont(Gdx.files.internal(\"data/arial-32-pad.fnt\"), false);\n        f_no_pad = new BitmapFont(Gdx.files.internal(\"data/arial-32.fnt\"), false);\n        f.getData().markupEnabled = true;\n        f_no_pad.getData().markupEnabled = true;\n    }\n\n    @Override\n    public void render () {\n        Gdx.gl.glClearColor(0.5f, 0.5f, 0.5f, 1);\n        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);\n        batch.begin();\n\n\n        f.draw(batch, \"...blah blah[RED] BINGO[] blah blah... \",200,300);\n        f.draw(batch, \"...blah blah [RED]BINGO []blah blah... \",200,270);\n\n        f_no_pad.draw(batch, \"...blah blah[RED] BINGO[] blah blah... \",200,200);\n        f_no_pad.draw(batch, \"...blah blah [RED]BINGO []blah blah... \",200,170);\n\n        batch.end();\n    }\n}\n```\n","closed_by":{"login":"NathanSweet","id":434010,"node_id":"MDQ6VXNlcjQzNDAxMA==","avatar_url":"https://avatars.githubusercontent.com/u/434010?v=4","gravatar_id":"","url":"https://api.github.com/users/NathanSweet","html_url":"https://github.com/NathanSweet","followers_url":"https://api.github.com/users/NathanSweet/followers","following_url":"https://api.github.com/users/NathanSweet/following{/other_user}","gists_url":"https://api.github.com/users/NathanSweet/gists{/gist_id}","starred_url":"https://api.github.com/users/NathanSweet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NathanSweet/subscriptions","organizations_url":"https://api.github.com/users/NathanSweet/orgs","repos_url":"https://api.github.com/users/NathanSweet/repos","events_url":"https://api.github.com/users/NathanSweet/events{/privacy}","received_events_url":"https://api.github.com/users/NathanSweet/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/libgdx/libgdx/issues/3455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/libgdx/libgdx/issues/3455/timeline","performed_via_github_app":null,"state_reason":"completed"}