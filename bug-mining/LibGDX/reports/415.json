{"url":"https://api.github.com/repos/libgdx/libgdx/issues/4515","repository_url":"https://api.github.com/repos/libgdx/libgdx","labels_url":"https://api.github.com/repos/libgdx/libgdx/issues/4515/labels{/name}","comments_url":"https://api.github.com/repos/libgdx/libgdx/issues/4515/comments","events_url":"https://api.github.com/repos/libgdx/libgdx/issues/4515/events","html_url":"https://github.com/libgdx/libgdx/issues/4515","id":198349931,"node_id":"MDU6SXNzdWUxOTgzNDk5MzE=","number":4515,"title":"[BUG] [LWJGL3] GLProfiler stats not counting after GLProfiler.reset()","user":{"login":"sreich","id":1508497,"node_id":"MDQ6VXNlcjE1MDg0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1508497?v=4","gravatar_id":"","url":"https://api.github.com/users/sreich","html_url":"https://github.com/sreich","followers_url":"https://api.github.com/users/sreich/followers","following_url":"https://api.github.com/users/sreich/following{/other_user}","gists_url":"https://api.github.com/users/sreich/gists{/gist_id}","starred_url":"https://api.github.com/users/sreich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sreich/subscriptions","organizations_url":"https://api.github.com/users/sreich/orgs","repos_url":"https://api.github.com/users/sreich/repos","events_url":"https://api.github.com/users/sreich/events{/privacy}","received_events_url":"https://api.github.com/users/sreich/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":309796149,"node_id":"MDU6TGFiZWwzMDk3OTYxNDk=","url":"https://api.github.com/repos/libgdx/libgdx/labels/LWJGL3","name":"LWJGL3","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-01-02T15:30:48Z","updated_at":"2017-06-25T13:46:22Z","closed_at":"2017-06-25T13:46:22Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### Issue details\r\nwith the lwjgl3 backend, at init running GLProfiler.enable() and then in render, do a batch draw, print counters and call GLProfiler.reset. counters will not update after that, ONLY on lwjgl3 backend. on lwjgl2 backend it works fine.\r\n\r\n#### Reproduction steps/code\r\n* use lwjgl3 backend\r\n* at init call GLProfiler.enable()\r\n* render anything (spritebatch is fine)\r\n* print the GLProfiler.drawCalls counter, for example\r\n* GLProfiler.reset()\r\n* counters never go beyond 0 anymore, after that reset\r\n\r\na workaround for this i found is after the reset to call GLProfiler.enable() -- obviously this isn't meant to be called, but it fixes it. i've no idea how lwjgl3 manages to affect this sort of thing, as it is just a rather simple interception of gl calls, which all go through libgdx first.\r\n\r\n```\r\n\r\npublic class GLProfilerTestCaseIssue extends ApplicationAdapter {\r\n    SpriteBatch batch;\r\n    Texture texture;\r\n\r\n    public void create() {\r\n        GLProfiler.enable();\r\n        batch = new SpriteBatch();\r\n        Pixmap pixmap = new Pixmap(16, 16, Pixmap.Format.RGBA8888);\r\n        pixmap.setColor(Color.RED);\r\n        pixmap.fill();\r\n        texture = new Texture(pixmap);\r\n    }\r\n\r\n    public void render() {\r\n        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);\r\n        batch.begin();\r\n        batch.draw(texture, 100, 100);\r\n        batch.end();\r\n\r\n        //draw calls printed as 1 the first frame, 0 every frame after!\r\n        System.out.println(\"draw calls:\" + GLProfiler.drawCalls);\r\n        GLProfiler.reset();\r\n\r\n        //if we add:\r\n        //GLProfiler.enable();\r\n        //here every frame, it magically counts properly. obviously that isn't the right way\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        Lwjgl3ApplicationConfiguration config = new Lwjgl3ApplicationConfiguration();\r\n        config.setWindowedMode(640, 480);\r\n        new Lwjgl3Application(new GLProfilerTestCaseIssue(), config);\r\n    }\r\n}\r\n\r\n\r\n```\r\n#### Version of LibGDX and/or relevant dependencies\r\nlwjgl3 backend - libgdx 1.9.4 and 1.9.5 confirmed.\r\n\r\n#### Please select the affected platforms\r\n- [ ] Android\r\n- [ ] iOS (robovm)\r\n- [ ] iOS (MOE)\r\n- [ ] HTML/GWT\r\n- [ ] Windows\r\n- [X] Linux\r\n- [ ] MacOS\r\n","closed_by":{"login":"Tom-Ski","id":4346114,"node_id":"MDQ6VXNlcjQzNDYxMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4346114?v=4","gravatar_id":"","url":"https://api.github.com/users/Tom-Ski","html_url":"https://github.com/Tom-Ski","followers_url":"https://api.github.com/users/Tom-Ski/followers","following_url":"https://api.github.com/users/Tom-Ski/following{/other_user}","gists_url":"https://api.github.com/users/Tom-Ski/gists{/gist_id}","starred_url":"https://api.github.com/users/Tom-Ski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tom-Ski/subscriptions","organizations_url":"https://api.github.com/users/Tom-Ski/orgs","repos_url":"https://api.github.com/users/Tom-Ski/repos","events_url":"https://api.github.com/users/Tom-Ski/events{/privacy}","received_events_url":"https://api.github.com/users/Tom-Ski/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/libgdx/libgdx/issues/4515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/libgdx/libgdx/issues/4515/timeline","performed_via_github_app":null,"state_reason":"completed"}