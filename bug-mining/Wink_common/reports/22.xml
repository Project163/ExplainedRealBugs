<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:28:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WINK-73] Cannot run QADefect example on Geronimo-tomcat6</title>
                <link>https://issues.apache.org/jira/browse/WINK-73</link>
                <project id="12310940" key="WINK">Wink</project>
                    <description>&lt;p&gt;I downloaded wink-dist-0.1-SNAPSHOT.zip from &lt;a href=&quot;http://hudson.zones.apache.org/hudson/view/Wink/job/Wink-Trunk-JDK15/lastBuild/org.apache.wink$wink-dist/artifact/org.apache.wink/wink-dist/0.1-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/view/Wink/job/Wink-Trunk-JDK15/lastBuild/org.apache.wink$wink-dist/artifact/org.apache.wink/wink-dist/0.1-SNAPSHOT/&lt;/a&gt; , and then built &quot;examples\apps\QADefect&quot; sample using &quot;ant dist&quot; command.&lt;/p&gt;

&lt;p&gt;I then deployed the built &quot;QADefect.war&quot; using Geronimo Admin Console. Deploy is successful. However when I run &lt;a href=&quot;http://localhost:8080/QADefect/rest/defects&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/QADefect/rest/defects&lt;/a&gt; it throws the following error:&lt;br/&gt;
HTTP Status 500&lt;br/&gt;
description: The server encountered an internal error () that prevented it from fulfilling this request.&lt;/p&gt;

&lt;p&gt;Below is the error reported in Geronimo server&apos;s command console:&lt;br/&gt;
WebApplicationException (500 - Internal Server Error) occured during the handlers chain invocation&lt;br/&gt;
javax.ws.rs.WebApplicationException: javax.servlet.ServletException: Original SevletRequest or wrapped original ServletRequest not passed to RequestDispatcher in violation of SRV.8.2 and SRV.14.2.5.1&lt;br/&gt;
	at org.apache.wink.server.internal.providers.entity.html.HtmlProvider.include(HtmlProvider.java:81)&lt;br/&gt;
	at org.apache.wink.server.internal.providers.entity.html.HtmlProvider.writeTo(HtmlProvider.java:106)&lt;br/&gt;
	at org.apache.wink.server.internal.providers.entity.html.HtmlProvider.writeTo(HtmlProvider.java:46)&lt;br/&gt;
	at org.apache.wink.server.internal.providers.entity.html.HtmlSyndFeedProvider.writeTo(HtmlSyndFeedProvider.java:63)&lt;br/&gt;
	at org.apache.wink.server.internal.providers.entity.html.HtmlSyndFeedProvider.writeTo(HtmlSyndFeedProvider.java:39)&lt;br/&gt;
	at org.apache.wink.common.internal.providers.entity.AssetProvider.writeTo(AssetProvider.java:97)&lt;br/&gt;
	at org.apache.wink.server.internal.handlers.FlushResultHandler.handleResponse(FlushResultHandler.java:149)&lt;br/&gt;
	at org.apache.wink.server.handlers.AbstractHandler.handleResponse(AbstractHandler.java:37)&lt;br/&gt;
	at org.apache.wink.server.handlers.ResponseHandlersChain.handle(ResponseHandlersChain.java:26)&lt;br/&gt;
	at org.apache.wink.server.handlers.ResponseHandlersChain.handle(ResponseHandlersChain.java:22)&lt;br/&gt;
	at org.apache.wink.server.handlers.AbstractHandlersChain.doChain(AbstractHandlersChain.java:56)&lt;br/&gt;
	at org.apache.wink.server.handlers.AbstractHandler.handleResponse(AbstractHandler.java:38)&lt;br/&gt;
	at org.apache.wink.server.handlers.ResponseHandlersChain.handle(ResponseHandlersChain.java:26)&lt;br/&gt;
	at org.apache.wink.server.handlers.ResponseHandlersChain.handle(ResponseHandlersChain.java:22)&lt;br/&gt;
	at org.apache.wink.server.handlers.AbstractHandlersChain.doChain(AbstractHandlersChain.java:56)&lt;br/&gt;
	at org.apache.wink.server.handlers.AbstractHandler.handleResponse(AbstractHandler.java:38)&lt;br/&gt;
	at org.apache.wink.server.handlers.ResponseHandlersChain.handle(ResponseHandlersChain.java:26)&lt;br/&gt;
	at org.apache.wink.server.handlers.ResponseHandlersChain.handle(ResponseHandlersChain.java:22)&lt;br/&gt;
	at org.apache.wink.server.handlers.AbstractHandlersChain.doChain(AbstractHandlersChain.java:56)&lt;br/&gt;
	at org.apache.wink.server.handlers.AbstractHandlersChain.run(AbstractHandlersChain.java:44)&lt;br/&gt;
	at org.apache.wink.server.internal.RequestProcessor.handleRequestWithoutFaultBarrier(RequestProcessor.java:131)&lt;br/&gt;
	at org.apache.wink.server.internal.RequestProcessor.handleRequest(RequestProcessor.java:110)&lt;br/&gt;
	at org.apache.wink.server.internal.servlet.RestServlet.service(RestServlet.java:98)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:806)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&lt;br/&gt;
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)&lt;br/&gt;
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)&lt;br/&gt;
	at org.apache.geronimo.tomcat.valve.DefaultSubjectValve.invoke(DefaultSubjectValve.java:56)&lt;br/&gt;
	at org.apache.geronimo.tomcat.GeronimoStandardContext$SystemMethodValve.invoke(GeronimoStandardContext.java:406)&lt;br/&gt;
	at org.apache.geronimo.tomcat.valve.GeronimoBeforeAfterValve.invoke(GeronimoBeforeAfterValve.java:47)&lt;br/&gt;
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)&lt;br/&gt;
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)&lt;br/&gt;
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)&lt;br/&gt;
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:568)&lt;br/&gt;
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)&lt;br/&gt;
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)&lt;br/&gt;
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)&lt;br/&gt;
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:595)&lt;br/&gt;
Caused by: javax.servlet.ServletException: Original SevletRequest or wrapped original ServletRequest not passed to RequestDispatcher in violation of SRV.8.2 and SRV.14.2.5.1&lt;br/&gt;
	at org.apache.catalina.core.ApplicationDispatcher.checkSameObjects(ApplicationDispatcher.java:941)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:484)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:472)&lt;br/&gt;
	at org.apache.wink.server.internal.providers.entity.html.HtmlProvider.include(HtmlProvider.java:78)&lt;br/&gt;
	... 39 more&lt;/p&gt;</description>
                <environment>&lt;p&gt;OS name: &quot;windows xp&quot; version: &quot;5.1&quot;&lt;br/&gt;
Java version: 1.5.0_12&lt;br/&gt;
geronimo-tomcat6-javaee5-2.1.4&lt;br/&gt;
Apache Ant version 1.7.0&lt;/p&gt;</environment>
        <key id="12430125">WINK-73</key>
            <summary>Cannot run QADefect example on Geronimo-tomcat6</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bluk">Bryant Luk</assignee>
                                    <reporter username="shivahr">Shiva Kumar</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Jul 2009 05:36:19 +0000</created>
                <updated>Sat, 13 Jul 2013 20:13:13 +0000</updated>
                            <resolved>Mon, 13 Jul 2009 21:09:46 +0000</resolved>
                                                    <fixVersion>0.1</fixVersion>
                                    <component>Examples</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12729951" author="shivahr" created="Sat, 11 Jul 2009 05:40:01 +0000"  >&lt;p&gt;Forgot to mention before - I am able to run HelloWorld &amp;amp; Bookmarks samples successfully.&lt;/p&gt;</comment>
                            <comment id="12729953" author="shivahr" created="Sat, 11 Jul 2009 06:15:54 +0000"  >&lt;p&gt;I tried running the example on Geronimo-jetty6 (v2.1.4) and it runs successfully! Wondering if any jetty specific configuration/code is used in the example.&lt;/p&gt;</comment>
                            <comment id="12729969" author="shivahr" created="Sat, 11 Jul 2009 10:21:28 +0000"  >&lt;p&gt;All the examples ran fine on Geronimo-jetty6 (v2.1.4) . Now trying other examples on Geronimo-tomcat6 (v2.1.4).&lt;/p&gt;</comment>
                            <comment id="12729987" author="shivahr" created="Sat, 11 Jul 2009 13:29:23 +0000"  >&lt;p&gt;All other examples except &quot;QADefectWithSpring&quot; run fine on Geronimo-tomcat6 (v2.1.4) too and QADefectWithSpring  fails to run with exactly the same error as QADefect reported above.&lt;/p&gt;

&lt;p&gt;So in summary, QADefect &amp;amp; QADefectWithSpring fail to run on Geronimo-tomcat6 while all other examples run fine.&lt;/p&gt;</comment>
                            <comment id="12730013" author="bluk" created="Sat, 11 Jul 2009 20:55:05 +0000"  >&lt;p&gt;Thanks Shiva for running through all the samples on both Tomcat and Jetty.&lt;/p&gt;

&lt;p&gt;Tomcat is a bit more strict than Jetty in following the spec.  In the current code, basically a Proxy is used for injection for types in singleton objects.  If this was a method parameter, it would have worked out but can&apos;t have method parameters in Providers.&lt;/p&gt;

&lt;p&gt;(BTW, that SevletRequest is misspelled in the Exception message, dunno if that&apos;s fixed in later versions of Tomcat).&lt;/p&gt;

&lt;p&gt;I&apos;ll attach a patch.  Need someone to review this.  Tried to make it shorter but haven&apos;t thought of a better way yet.&lt;/p&gt;</comment>
                            <comment id="12730014" author="bluk" created="Sat, 11 Jul 2009 20:56:24 +0000"  >&lt;p&gt;A possible fix.&lt;/p&gt;</comment>
                            <comment id="12730058" author="nfischer" created="Sun, 12 Jul 2009 08:37:53 +0000"  >&lt;p&gt;It seems that we have no choice but to implement it as Bryant suggested, but I really really really hate that we have to have special handling for a weird requirement of the SRV spec. I mean, I can&apos;t see the benefit of being able to use with the include() method only the original request or wrappers of the original request (and response). It&apos;s so very easy to fool the validation process to think that we&apos;re using the original request and response, so what&apos;s the point?&lt;/p&gt;

&lt;p&gt;Anyway, the patch looks excellent, though I&apos;m not sure we need the &lt;tt&gt;&quot;if (contextClass.isInterface() == false)&quot;&lt;/tt&gt; or the proxy creation stuff in ServletContextAccessor.&lt;/p&gt;

&lt;p&gt;I think it&apos;s sufficient to have the &lt;tt&gt;&quot;if (runtimeContext != null)&quot;&lt;/tt&gt; bit and the HttpServletRequest and HttpServletResponse stuff because the ServerContextParam class guarantees that we will use the ServletContextAccessor class only if the injectable parameters are HttpServletRequest/Response.&lt;/p&gt;</comment>
                            <comment id="12730515" author="bluk" created="Mon, 13 Jul 2009 21:09:46 +0000"  >&lt;p&gt;I&apos;ve committed my proposed patch with Nadav&apos;s suggested changes.  I made two other small changes:  corrected issue with typecast with RuntimeException and made slight JavaDoc correction.  I also added some JavaDoc to the new classes.&lt;/p&gt;</comment>
                            <comment id="12730553" author="hudson" created="Mon, 13 Jul 2009 22:16:03 +0000"  >&lt;p&gt;Integrated in Wink-Trunk-JDK15 #27 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Wink-Trunk-JDK15/27/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Wink-Trunk-JDK15/27/&lt;/a&gt;)&lt;br/&gt;
    Silly executable bit&lt;/p&gt;

&lt;p&gt;See []&lt;br/&gt;
Use HttpServlet*Wrapper to comply w/ Servlet spec&lt;/p&gt;

&lt;p&gt;See []&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12413212" name="WINK-73.patch" size="36911" author="bluk" created="Sat, 11 Jul 2009 20:56:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>204558</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ggzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>304344</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>