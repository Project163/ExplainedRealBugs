<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:29:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WINK-388] broken cdi integration</title>
                <link>https://issues.apache.org/jira/browse/WINK-388</link>
                <project id="12310940" key="WINK">Wink</project>
                    <description>&lt;p&gt;list of issues:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;JCDIDefaultObjectFactory doesn&apos;t use the cdi api correctly - e.g.:
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;random behaviour in case of @Alternative and @Specializes beans&lt;/li&gt;
		&lt;li&gt;managing instances manually is only valid for @Dependent scoped beans&lt;/li&gt;
		&lt;li&gt;CreationalContext#release just destroys dependent scoped dependencies of the contextual-instance, but not the contextual-instance itself -&amp;gt; e.g. @PreDestroy callbacks don&apos;t get called for the contextual-instance itself&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;JCDISingletonObjectFactory isn&apos;t a valid approach
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;JCDILifecycleManager only needs JCDIDefaultObjectFactory&lt;/li&gt;
		&lt;li&gt;keeping dependent instances as &quot;forced singletons&quot; should be avoided&lt;/li&gt;
		&lt;li&gt;during bootstrapping providers and instances of &quot;application&quot; need to be validated instead (of using JCDISingletonObjectFactory)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;using mocks for cdi tests, won&apos;t show real issues&lt;br/&gt;
   -&amp;gt; arquillian or the test-module of OpenWebBeans should be used&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12656399">WINK-388</key>
            <summary>broken cdi integration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gpetracek">Gerhard Petracek</assignee>
                                    <reporter username="gpetracek">Gerhard Petracek</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Jul 2013 17:04:00 +0000</created>
                <updated>Wed, 24 Jul 2013 02:44:06 +0000</updated>
                            <resolved>Wed, 24 Jul 2013 02:44:06 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13707795" author="gpetracek" created="Sat, 13 Jul 2013 17:53:44 +0000"  >&lt;p&gt;since i had to change almost every part of the jcdi-module, i continued with it as an add-on at &lt;a href=&quot;http://s.apache.org/Tx7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://s.apache.org/Tx7&lt;/a&gt;&lt;br/&gt;
-&amp;gt; it can be used with existing versions of wink.&lt;br/&gt;
since i can&apos;t commit it, you are welcome to use the code and change the packages for a new cdi-module.&lt;/p&gt;

&lt;p&gt;the next step is to replace the existing wink/cdi-tests with arquillian based tests.&lt;/p&gt;</comment>
                            <comment id="13708217" author="luciano resende" created="Mon, 15 Jul 2013 03:15:11 +0000"  >&lt;p&gt;Gehard, due to IP issues, it&apos;s best that you provide the changes as a patch to this jira.&lt;/p&gt;</comment>
                            <comment id="13708867" author="gpetracek" created="Mon, 15 Jul 2013 19:43:04 +0000"  >&lt;p&gt;there were recent discussions, that pull-requests are ok. since it isn&apos;t a direct pull-request, i&apos;ve created a patch.&lt;br/&gt;
as mentioned earlier we have to create an arquillian based test-setup for proper tests. the add-on was tested manually. the patch contains a copy of those classes (with different packages), but isn&apos;t tested so far.&lt;/p&gt;</comment>
                            <comment id="13711374" author="gpetracek" created="Wed, 17 Jul 2013 18:03:33 +0000"  >&lt;p&gt;the current patch contains also an in-container test. the test works in an ide, but with mvn clean install -Ptomee-build-managed it hangs. that&apos;s afaik a tomee issue and i&apos;m currently discussing it with a tomee committer. however, the patch is fine.&lt;/p&gt;</comment>
                            <comment id="13713287" author="luciano resende" created="Fri, 19 Jul 2013 02:51:58 +0000"  >&lt;p&gt;I&apos;m starting to take a look at applying this patch and I&apos;m having some build failures after the patch gets applied. Can you actually build wink with this patch with no issues ? &lt;/p&gt;</comment>
                            <comment id="13713304" author="luciano resende" created="Fri, 19 Jul 2013 03:33:05 +0000"  >&lt;p&gt;After dealing with the local issues due to deleted files being flagged as not with appropriate licenses, I&apos;m not getting some other errors in wink-common. I&apos;ll spend more time trying to bring up the patch tomorrow.&lt;/p&gt;

&lt;p&gt;-------------------------------------------------------------------------------&lt;br/&gt;
Test set: org.apache.wink.common.internal.i18n.MessagesTest&lt;br/&gt;
-------------------------------------------------------------------------------&lt;br/&gt;
Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 4.277 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
testMessages(org.apache.wink.common.internal.i18n.MessagesTest)  Time elapsed: 4.271 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
junit.framework.AssertionFailedError: There are some unused key/value pairs in one or more of your properties message files.  See System.err for this test for the list of unused keys.&lt;/p&gt;</comment>
                            <comment id="13713339" author="luciano resende" created="Fri, 19 Jul 2013 04:57:52 +0000"  >&lt;p&gt;Just FYI, i got it working locally... will take a look at it in more details.&lt;/p&gt;</comment>
                            <comment id="13713413" author="gpetracek" created="Fri, 19 Jul 2013 07:25:50 +0000"  >&lt;p&gt;great to hear. (before providing it, i applied the patch with intellij and compiled the patched version with maven.)&lt;/p&gt;</comment>
                            <comment id="13713429" author="gpetracek" created="Fri, 19 Jul 2013 08:04:40 +0000"  >&lt;p&gt;fyi: in a 2nd step i&apos;ll provide some javadoc for it. i&apos;ll create a separated ticket for it.&lt;/p&gt;</comment>
                            <comment id="13714467" author="gpetracek" created="Sat, 20 Jul 2013 16:07:30 +0000"  >&lt;p&gt;you can use &lt;a href=&quot;http://s.apache.org/LDd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://s.apache.org/LDd&lt;/a&gt; to compare it.&lt;/p&gt;</comment>
                            <comment id="13716030" author="luciano resende" created="Tue, 23 Jul 2013 04:09:15 +0000"  >&lt;p&gt;I noted that most of the tests from the project got removed with this patch. Is that intentional ? Are we loosing test coverage here ?&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;deleted:    wink-jcdi-server/src/test/java/org/apache/wink/jcdi/server/internal/extension/JAXRSJCDICustomInjectionTargetTest.java&lt;/li&gt;
	&lt;li&gt;deleted:    wink-jcdi-server/src/test/java/org/apache/wink/jcdi/server/internal/extension/JAXRSJCDIExtensionTest.java&lt;/li&gt;
	&lt;li&gt;deleted:    wink-jcdi-server/src/test/java/org/apache/wink/jcdi/server/internal/lifecycle/JCDIDefaultObjectFactoryTest.java&lt;/li&gt;
	&lt;li&gt;deleted:    wink-jcdi-server/src/test/java/org/apache/wink/jcdi/server/internal/lifecycle/JCDILifecycleManagerTest.java&lt;/li&gt;
	&lt;li&gt;deleted:    wink-jcdi-server/src/test/java/org/apache/wink/jcdi/server/internal/lifecycle/JCDISingletonObjectFactoryTest.java&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13716172" author="gpetracek" created="Tue, 23 Jul 2013 06:57:28 +0000"  >&lt;p&gt;as mentioned earlier it isn&apos;t that useful to test cdi with a mocked env. e.g. at apache deltaspike we don&apos;t have a single test which uses a mocked env. (for a good reason). as you saw those mocked tests didn&apos;t show a single issue which can happen in a real world application.&lt;br/&gt;
almost everything which was covered before should be covered by the new arquillian based test already.&lt;br/&gt;
after the initial commit for this ticket, i&apos;ll add further arquillian based tests for special cases (as well as for  OptionalScopeAutoUpgradeExtension).&lt;/p&gt;</comment>
                            <comment id="13717837" author="luciano resende" created="Wed, 24 Jul 2013 00:46:19 +0000"  >&lt;p&gt;How should I handle the new &quot;fixed_test_dependency&quot;. I pretty much had the first patch ready locally, and not sure if the new patch is additions to the previous or a superset of it.&lt;/p&gt;</comment>
                            <comment id="13717844" author="luciano resende" created="Wed, 24 Jul 2013 00:52:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WINK-388&quot; title=&quot;broken cdi integration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WINK-388&quot;&gt;&lt;del&gt;WINK-388&lt;/del&gt;&lt;/a&gt;.patch delivered to trunk.&lt;/p&gt;</comment>
                            <comment id="13717846" author="gpetracek" created="Wed, 24 Jul 2013 00:55:11 +0000"  >&lt;p&gt;the 2nd patch just solves the hanging deployment of the in-container test with tomee.&lt;br/&gt;
(it was just a maven dependency issue. that was also the reason why it worked in an ide, but not with maven.)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12592810" name="WINK-388.patch" size="156172" author="gpetracek" created="Wed, 17 Jul 2013 17:55:29 +0000"/>
                            <attachment id="12593821" name="WINK-388_fixed_test_dependency.patch" size="155228" author="gpetracek" created="Wed, 24 Jul 2013 00:42:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>336622</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 17 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1m2b3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>336945</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>