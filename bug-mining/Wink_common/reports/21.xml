<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:28:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WINK-53] MessageBodyReader.isReadable methods should do straight ==</title>
                <link>https://issues.apache.org/jira/browse/WINK-53</link>
                <project id="12310940" key="WINK">Wink</project>
                    <description>&lt;p&gt;In some cases the built in MessageBodyReaders providers&apos;s isReadable method does an isAssignableFrom.  This should just be a straight == instead.&lt;/p&gt;

&lt;p&gt;For instance in InputStreamProvider:&lt;/p&gt;

&lt;p&gt;     public boolean isReadable(Class&amp;lt;?&amp;gt; type, Type genericType, Annotation[] ann&lt;br/&gt;
         MediaType mediaType) &lt;/p&gt;
{
-        return type != null &amp;amp;&amp;amp; InputStream.class.isAssignableFrom(type);
+        return type != null &amp;amp;&amp;amp; InputStream.class == type;
     }

&lt;p&gt;If the method parameter were:&lt;/p&gt;

&lt;p&gt;@GET&lt;br/&gt;
public void getMethod(FileInputStream fis) {&lt;/p&gt;

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;we get a 500 back (because I think the injection throws) instead of a 415.  I can fix this up.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12429724">WINK-53</key>
            <summary>MessageBodyReader.isReadable methods should do straight ==</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bluk">Bryant Luk</assignee>
                                    <reporter username="bluk">Bryant Luk</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jul 2009 16:11:35 +0000</created>
                <updated>Tue, 14 Jul 2009 14:37:22 +0000</updated>
                            <resolved>Mon, 13 Jul 2009 17:30:16 +0000</resolved>
                                    <version>0.1</version>
                                    <fixVersion>0.1</fixVersion>
                                    <component>Common</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12728375" author="bluk" created="Tue, 7 Jul 2009 21:42:29 +0000"  >&lt;p&gt;The only one that I didn&apos;t know what to do for is:&lt;/p&gt;

&lt;p&gt;org.apache.wink.common.internal.providers.entity.csv.CsvDeserializerProvider &lt;/p&gt;

&lt;p&gt;I think the code for that is correct as is.&lt;/p&gt;</comment>
                            <comment id="12728901" author="bluk" created="Wed, 8 Jul 2009 21:06:02 +0000"  >&lt;p&gt;If there&apos;s an issue with the fix, please reopen.&lt;/p&gt;</comment>
                            <comment id="12728934" author="hudson" created="Wed, 8 Jul 2009 22:19:56 +0000"  >&lt;p&gt;Integrated in Wink-Trunk-JDK15 #13 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Wink-Trunk-JDK15/13/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Wink-Trunk-JDK15/13/&lt;/a&gt;)&lt;br/&gt;
    Use == for isReadable instead of isAssignable&lt;/p&gt;

&lt;p&gt;See []&lt;/p&gt;</comment>
                            <comment id="12729215" author="nfischer" created="Thu, 9 Jul 2009 11:54:11 +0000"  >&lt;p&gt;You&apos;re completely right that the previous implementation was incorrect, but after re-thinking this, I think that we are missing some functionality by using the == (thanks go to Eli Baram for pointing this out)&lt;/p&gt;

&lt;p&gt;Consider this scenario:&lt;/p&gt;

&lt;p&gt;Given the following class hierarchy, where B inherits from A, and C and D inherit from B:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;A
|-B
 |-C
 |-D
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 
&lt;p&gt;and a Provider for class B (let&apos;s call it BProvider &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;), if we simply use == for the isReadable, then BProvider will not be picked up for an entity of type A (assuming the media type is not the issue), even though it shouldn&apos;t be a problem.&lt;/p&gt;

&lt;p&gt;I think that what we want to do is reverse the order of classes in the isAssignableFrom invocation in isReadable so that C and D entities won&apos;t be picked up, but A will be, like so:&lt;/p&gt;

&lt;p&gt;instead of this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; type != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; InputStream.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;isAssignableFrom(type);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;do this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; type != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; type.isAssignableFrom(InputStream.class);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What do you think?&lt;/p&gt;</comment>
                            <comment id="12729282" author="bluk" created="Thu, 9 Jul 2009 14:41:03 +0000"  >&lt;p&gt;(If this reposts, sorry.  JIRA didn&apos;t think I was logged in so I lost my original comment).&lt;/p&gt;

&lt;p&gt;In essence, I think I understand what you&apos;re saying.  Honestly, I didn&apos;t think about moving up the hierarchy.  However, beyond the Source built-in providers, what type are you expecting to support above (i.e. is it only Object)?  I would hope that no one is expecting an Object entity parameter to be useful since every JAX-RS implementation could implement this very differently and who knows what gets injected (i.e. String, Source, etc.)&lt;/p&gt;

&lt;p&gt;I think we should be careful about supporting things up the hierarchy and/or supporting Object entity parameter injection.  This can &quot;wildly&quot; change behavior depending on providers moving around, media types being added, etc.&lt;/p&gt;

&lt;p&gt;Taking the Source provider as an example, I would also be harder pressed to change the StreamSource that is returned for a plain Source entity parameter to a a different Source type after we do a release unless there&apos;s a strong reason to do so.  Just throwing this out there (which I&apos;m fairly certain everyone already knows), but some developers expect certain behavior/performance characteristics after a release to stay constant even though the runtime should have the flexibility to do things differently.&lt;/p&gt;

&lt;p&gt;My recommendation to them is of course, to write their own application provided Provider (which is one of the things I like about JAX-RS in that we supposedly always get out of your way) but not everyone will be &quot;happy&quot; about that. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12730362" author="bluk" created="Mon, 13 Jul 2009 14:31:51 +0000"  >&lt;p&gt;I&apos;ll redo this fix, just wanted to let people know what my initial thoughts were.  For certain providers where we have some ambiguity (Source), I&apos;ll try to clear the ambiguity up so we return something consistent.&lt;/p&gt;</comment>
                            <comment id="12730413" author="bluk" created="Mon, 13 Jul 2009 17:30:16 +0000"  >&lt;p&gt;I think I&apos;ve fixed this for the ones I touched originally and added it for String as well.  I think this should be &quot;good enough&quot; as Object will be filled by something.  If not, please re-open.&lt;/p&gt;

&lt;p&gt;Thanks Eli and Nadav for catching this.&lt;/p&gt;</comment>
                            <comment id="12730435" author="hudson" created="Mon, 13 Jul 2009 18:08:34 +0000"  >&lt;p&gt;Integrated in Wink-Trunk-JDK15 #26 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Wink-Trunk-JDK15/26/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Wink-Trunk-JDK15/26/&lt;/a&gt;)&lt;br/&gt;
    Update reverse isAssignableFrom for readers&lt;/p&gt;

&lt;p&gt;See []&lt;/p&gt;</comment>
                            <comment id="12730879" author="bluk" created="Tue, 14 Jul 2009 14:37:22 +0000"  >&lt;p&gt;Please reopen again if this is still an issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12412793" name="WINK-53.patch" size="5363" author="bluk" created="Tue, 7 Jul 2009 21:42:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>204539</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 19 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1gh3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>304363</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>