<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:28:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WINK-219] JAXBXmlProvider should be able to handle inherited types, since JAXB is able to handle them</title>
                <link>https://issues.apache.org/jira/browse/WINK-219</link>
                <project id="12310940" key="WINK">Wink</project>
                    <description>&lt;p&gt;Here is the issue which led to opening this one: &lt;a href=&quot;https://issues.apache.org/jira/browse/WINK-218&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/WINK-218&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12438707">WINK-219</key>
            <summary>JAXBXmlProvider should be able to handle inherited types, since JAXB is able to handle them</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rott">Michael Rheinheimer</assignee>
                                    <reporter username="kkolev">Kaloyan Kolev</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Oct 2009 14:28:35 +0000</created>
                <updated>Sat, 13 Jul 2013 20:13:14 +0000</updated>
                            <resolved>Thu, 25 Mar 2010 15:58:53 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.0</fixVersion>
                                    <component>Common</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12768267" author="nickgallardo" created="Wed, 21 Oct 2009 14:55:40 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The best solution will be probably testing if the class can be handled. I&apos;m not sure if there is a way to check it using JAXB APIs.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We had to go through considerable gymnastics to get down to a usable set of classes in the JAX-WS support for Axis2.  Here&apos;s a pointer to part of what we had to do to determine whether a class was usable:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/webservices/axis2/trunk/java/modules/jaxws/src/org/apache/axis2/jaxws/message/databinding/JAXBContextFromClasses.java?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/webservices/axis2/trunk/java/modules/jaxws/src/org/apache/axis2/jaxws/message/databinding/JAXBContextFromClasses.java?view=markup&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Specifically, the separate() and findBestSet() methods are the key.  The net is, if the class can be added to a JAXBContext, then the assumption is that the class is usable for marshalling/unmarshalling.&lt;/p&gt;

&lt;p&gt;This is an alternative to an exhaustive approach of checking the class&apos; hierarchy looking for JAXB annotations.&lt;/p&gt;

&lt;p&gt;So...  maybe that means we can assume that if the class is part of the JAXBContext that we have, then the isWritable should pass?  Maybe, but something makes me uncomfortable with that approach.&lt;/p&gt;
</comment>
                            <comment id="12768277" author="kkolev" created="Wed, 21 Oct 2009 15:15:43 +0000"  >&lt;p&gt;Isn&apos;t the user the one that is responsible for providing the type of the entity to use when serializing? Meaning that If the generic type is an instance of class it should be passed through the same checks the raw type has been passed on the first place. This should make sense for the most of the cases. If the generic type is instance of another derivative we could use a  more flexible approach as you suggest. &lt;/p&gt;</comment>
                            <comment id="12848922" author="rott" created="Tue, 23 Mar 2010 21:39:46 +0000"  >&lt;p&gt;I must be doing something wrong.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  If I read this jira and &lt;a href=&quot;https://issues.apache.org/jira/browse/WINK-218&quot; title=&quot;GenericEntity&amp;#39;s generic type is not used when choosing provider.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WINK-218&quot;&gt;&lt;del&gt;WINK-218&lt;/del&gt;&lt;/a&gt; correctly, we expect JAXB to be able to handle an inherited JAXB type that has no JAXB annotations.  So I might have:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = &quot;&quot;, propOrder = {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;arg0&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;arg1&quot;&lt;/span&gt;
    })
    @XmlRootElement(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;addNumbers&quot;&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AddNumbers { }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AddInts &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; AddNumbers { }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And expect to be able to do this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        AddInts addInts = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AddInts();

        &lt;span class=&quot;code-comment&quot;&gt;// JAXBContext can handle inherited types?
&lt;/span&gt;        JAXBContext context = JAXBContext.newInstance(AddInts.class);
        Marshaller marshaller = context.createMarshaller();
        Writer writer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringWriter();
        marshaller.marshal(addInts, writer);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This didn&apos;t work out so good for me.  I got exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
Caused by: com.sun.istack.SAXException2: unable to marshal type &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.wink.server.internal.providers.entity.JAXBProviderInheritanceTest$AddInts&quot;&lt;/span&gt; as an element because it is missing an @XmlRootElement annotation
	at com.sun.xml.bind.v2.runtime.XMLSerializer.reportError(XMLSerializer.java:242)
	at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeRoot(ClassBeanInfoImpl.java:303)
	at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:488)
	at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:317)
	... 22 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, I put the @XmlRootElement annotation on my AddInts class, and it succeeds.  In fact, the only check the JAXBXmlProvider performs before allowing the creation of the marshaller/unmarshaller instances is for the @XmlRootElement annotation.  Looks like JAXBXmlProvider is doing the necessary and appropriate check.  So I think we&apos;re all done here.  Maybe this got fixed between opening the jira and now?&lt;/p&gt;

&lt;p&gt;Anyway, please review and confirm.  See attached test patch.&lt;/p&gt;</comment>
                            <comment id="12848923" author="bluk" created="Tue, 23 Mar 2010 21:44:51 +0000"  >&lt;p&gt;I also got the same results but I think the expectation is for a resource method like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@GET
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Response get() {
   &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Response.ok(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericEntity&amp;lt;AddNumbers&amp;gt;(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AddInts()) {}).build();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to work perhaps?&lt;/p&gt;</comment>
                            <comment id="12849041" author="rott" created="Wed, 24 Mar 2010 04:09:04 +0000"  >&lt;p&gt;Thanks Bryant.  So, I added a resource method that does as you describe, but with AddInts still annotated with @XmlRootElement.  This worked.  So refactored AddInts to be called AddIntsAnnotated and added another type called AddIntsNotAnnotated and ran the same test.&lt;/p&gt;

&lt;p&gt;I temporarily changed JAXBXmlProvider.isWriteable to allow AddIntsNotAnnotated and changed the AbstractJAXBProvider.getDefaultContext to take both the type and genericType so they would &lt;b&gt;both&lt;/b&gt; be included in the JAXBContext instance.  I &lt;b&gt;still&lt;/b&gt; get the same exception I reported above.&lt;/p&gt;

&lt;p&gt;I&apos;m thinking this is not supportable.  The net of my testing so far shows that the Object passed down to the AbstractJAXBProvider.writeTo is AddIntsNotAnnotated, to which we cannot unmarshal due to JAXB requiring the @XmlRootElement annotation on that class.  The class is already in the JAXBContext in my prototype, so it&apos;s certainly not a matter of it being missed during JAXBContext instance creation.&lt;/p&gt;

&lt;p&gt;Maybe I need some clarification on the expectations.  Please see the attached revised test.  I have not included the prototype fix; the description above captures what I did.&lt;/p&gt;</comment>
                            <comment id="12849173" author="kkolev" created="Wed, 24 Mar 2010 13:09:36 +0000"  >&lt;p&gt;As Bryant pointed my initial question was whether this code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@GET
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Response get() {
   &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Response.ok(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericEntity(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AddIntsNotAnnotated(), AddNumbers.class) {}).build();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should be serializable by the provider that understands how to handle the AddNumbers class. Please note the second argument being passed to the GenericEntity constructor as I would expect that it will be used when finding a provider.&lt;/p&gt;</comment>
                            <comment id="12849177" author="kkolev" created="Wed, 24 Mar 2010 13:17:01 +0000"  >&lt;p&gt;To try to make it more clearer I would also expect this to translate to something like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;AddInts addInts = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AddInts();

        JAXBContext context = JAXBContext.newInstance(AddInts.class, AddNumbers.class); \
        &lt;span class=&quot;code-comment&quot;&gt;// or just JAXBContext context = JAXBContext.newInstance(AddNumbers.class);
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// not sure which of them is supposed to work.
&lt;/span&gt;
        Marshaller marshaller = context.createMarshaller();
        Writer writer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringWriter();

        &lt;span class=&quot;code-comment&quot;&gt;// here you might also need to wrap it in JAXBElement to specify that the instance should 
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// be serialized as AddNumbers
&lt;/span&gt;        marshaller.marshal(addInts, writer);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12849460" author="rott" created="Wed, 24 Mar 2010 21:38:19 +0000"  >&lt;p&gt;Thanks Kaloyan.  There&apos;s a solution in attached file &lt;a href=&quot;https://issues.apache.org/jira/browse/WINK-219&quot; title=&quot;JAXBXmlProvider should be able to handle inherited types, since JAXB is able to handle them&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WINK-219&quot;&gt;&lt;del&gt;WINK-219&lt;/del&gt;&lt;/a&gt;_3.patch that doesn&apos;t degrade performance and satisfies the feature request.&lt;/p&gt;

&lt;p&gt;Please have a look.  Thanks!&lt;/p&gt;</comment>
                            <comment id="12849711" author="kkolev" created="Thu, 25 Mar 2010 14:31:07 +0000"  >&lt;p&gt;Not sure if I should be validating your changes, but they look ok to me.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12849736" author="rott" created="Thu, 25 Mar 2010 15:58:28 +0000"  >&lt;p&gt;No validation necessary; that&apos;s what unittests are for!  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  Thanks for your clarifications and help.  Patch is committed in SVN 927462.&lt;/p&gt;</comment>
                            <comment id="12850100" author="hudson" created="Fri, 26 Mar 2010 11:44:08 +0000"  >&lt;p&gt;Integrated in Wink-Trunk-JDK1.5 #299 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Wink-Trunk-JDK1.5/299/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Wink-Trunk-JDK1.5/299/&lt;/a&gt;)&lt;br/&gt;
    : best-effort to support JAXB inherited types&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12439612" name="WINK-219.patch" size="5772" author="rott" created="Tue, 23 Mar 2010 21:39:46 +0000"/>
                            <attachment id="12439631" name="WINK-219_2.patch" size="8321" author="rott" created="Wed, 24 Mar 2010 04:09:59 +0000"/>
                            <attachment id="12439711" name="WINK-219_3.patch" size="17870" author="rott" created="Wed, 24 Mar 2010 21:38:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>204688</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ghhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>304426</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>