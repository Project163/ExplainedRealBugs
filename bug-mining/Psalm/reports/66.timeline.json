[{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/493774089","html_url":"https://github.com/vimeo/psalm/issues/1657#issuecomment-493774089","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/1657","id":493774089,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5Mzc3NDA4OQ==","user":{"login":"bdsl","id":159481,"node_id":"MDQ6VXNlcjE1OTQ4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/159481?v=4","gravatar_id":"","url":"https://api.github.com/users/bdsl","html_url":"https://github.com/bdsl","followers_url":"https://api.github.com/users/bdsl/followers","following_url":"https://api.github.com/users/bdsl/following{/other_user}","gists_url":"https://api.github.com/users/bdsl/gists{/gist_id}","starred_url":"https://api.github.com/users/bdsl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bdsl/subscriptions","organizations_url":"https://api.github.com/users/bdsl/orgs","repos_url":"https://api.github.com/users/bdsl/repos","events_url":"https://api.github.com/users/bdsl/events{/privacy}","received_events_url":"https://api.github.com/users/bdsl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-19T17:07:32Z","updated_at":"2019-05-19T17:07:32Z","body":"I think it would be more useful to say that the concept of 'class' for the purposes of `class-string` includes interfaces as well as classes.\r\n\r\nThe [docs say](https://psalm.dev/docs/docblock_type_syntax/) that class-string is used \"_to tell Psalm make sure that the function is always called with a ::class constant in that position_\". `:class` is valid for interfaces in PHP just as it is for classes, and \\ReflectionClass has an [isInterface](https://www.php.net/manual/en/reflectionclass.isinterface.php) function.\r\n\r\nI think a solution to prevent the error in the code shown, is to create a `hasInterfaceExistsCheck` function, and change `elseif (self::hasClassExistsCheck($expr))` to `elseif (self::hasClassExistsCheck($expr) || self::hasInterfaceExistsCheck($expr))` in the [AssertionFinder](https://github.com/vimeo/psalm/blob/ae531506de5eba8beb8afbbd3a5b379faadcec85/src/Psalm/Internal/Analyzer/Statements/Expression/AssertionFinder.php#L1667).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/493774089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bdsl","id":159481,"node_id":"MDQ6VXNlcjE1OTQ4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/159481?v=4","gravatar_id":"","url":"https://api.github.com/users/bdsl","html_url":"https://github.com/bdsl","followers_url":"https://api.github.com/users/bdsl/followers","following_url":"https://api.github.com/users/bdsl/following{/other_user}","gists_url":"https://api.github.com/users/bdsl/gists{/gist_id}","starred_url":"https://api.github.com/users/bdsl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bdsl/subscriptions","organizations_url":"https://api.github.com/users/bdsl/orgs","repos_url":"https://api.github.com/users/bdsl/repos","events_url":"https://api.github.com/users/bdsl/events{/privacy}","received_events_url":"https://api.github.com/users/bdsl/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/493779550","html_url":"https://github.com/vimeo/psalm/issues/1657#issuecomment-493779550","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/1657","id":493779550,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5Mzc3OTU1MA==","user":{"login":"thiagorb","id":821208,"node_id":"MDQ6VXNlcjgyMTIwOA==","avatar_url":"https://avatars.githubusercontent.com/u/821208?v=4","gravatar_id":"","url":"https://api.github.com/users/thiagorb","html_url":"https://github.com/thiagorb","followers_url":"https://api.github.com/users/thiagorb/followers","following_url":"https://api.github.com/users/thiagorb/following{/other_user}","gists_url":"https://api.github.com/users/thiagorb/gists{/gist_id}","starred_url":"https://api.github.com/users/thiagorb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thiagorb/subscriptions","organizations_url":"https://api.github.com/users/thiagorb/orgs","repos_url":"https://api.github.com/users/thiagorb/repos","events_url":"https://api.github.com/users/thiagorb/events{/privacy}","received_events_url":"https://api.github.com/users/thiagorb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-19T18:19:50Z","updated_at":"2019-05-19T18:19:50Z","body":"Hey @bdsl! I thought about this at first, but I was afraid that information could be lost by using this approach. Making `class-type` accept interfaces would make it impossible to point out errors using `new $interfaceString` for example.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/493779550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thiagorb","id":821208,"node_id":"MDQ6VXNlcjgyMTIwOA==","avatar_url":"https://avatars.githubusercontent.com/u/821208?v=4","gravatar_id":"","url":"https://api.github.com/users/thiagorb","html_url":"https://github.com/thiagorb","followers_url":"https://api.github.com/users/thiagorb/followers","following_url":"https://api.github.com/users/thiagorb/following{/other_user}","gists_url":"https://api.github.com/users/thiagorb/gists{/gist_id}","starred_url":"https://api.github.com/users/thiagorb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thiagorb/subscriptions","organizations_url":"https://api.github.com/users/thiagorb/orgs","repos_url":"https://api.github.com/users/thiagorb/repos","events_url":"https://api.github.com/users/thiagorb/events{/privacy}","received_events_url":"https://api.github.com/users/thiagorb/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2351564882,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjM1MTU2NDg4Mg==","url":"https://api.github.com/repos/vimeo/psalm/issues/events/2351564882","actor":{"login":"bdsl","id":159481,"node_id":"MDQ6VXNlcjE1OTQ4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/159481?v=4","gravatar_id":"","url":"https://api.github.com/users/bdsl","html_url":"https://github.com/bdsl","followers_url":"https://api.github.com/users/bdsl/followers","following_url":"https://api.github.com/users/bdsl/following{/other_user}","gists_url":"https://api.github.com/users/bdsl/gists{/gist_id}","starred_url":"https://api.github.com/users/bdsl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bdsl/subscriptions","organizations_url":"https://api.github.com/users/bdsl/orgs","repos_url":"https://api.github.com/users/bdsl/repos","events_url":"https://api.github.com/users/bdsl/events{/privacy}","received_events_url":"https://api.github.com/users/bdsl/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-19T18:19:50Z","performed_via_github_app":null},{"id":2351564884,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzNTE1NjQ4ODQ=","url":"https://api.github.com/repos/vimeo/psalm/issues/events/2351564884","actor":{"login":"bdsl","id":159481,"node_id":"MDQ6VXNlcjE1OTQ4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/159481?v=4","gravatar_id":"","url":"https://api.github.com/users/bdsl","html_url":"https://github.com/bdsl","followers_url":"https://api.github.com/users/bdsl/followers","following_url":"https://api.github.com/users/bdsl/following{/other_user}","gists_url":"https://api.github.com/users/bdsl/gists{/gist_id}","starred_url":"https://api.github.com/users/bdsl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bdsl/subscriptions","organizations_url":"https://api.github.com/users/bdsl/orgs","repos_url":"https://api.github.com/users/bdsl/repos","events_url":"https://api.github.com/users/bdsl/events{/privacy}","received_events_url":"https://api.github.com/users/bdsl/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-19T18:19:50Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/493785074","html_url":"https://github.com/vimeo/psalm/issues/1657#issuecomment-493785074","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/1657","id":493785074,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5Mzc4NTA3NA==","user":{"login":"bdsl","id":159481,"node_id":"MDQ6VXNlcjE1OTQ4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/159481?v=4","gravatar_id":"","url":"https://api.github.com/users/bdsl","html_url":"https://github.com/bdsl","followers_url":"https://api.github.com/users/bdsl/followers","following_url":"https://api.github.com/users/bdsl/following{/other_user}","gists_url":"https://api.github.com/users/bdsl/gists{/gist_id}","starred_url":"https://api.github.com/users/bdsl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bdsl/subscriptions","organizations_url":"https://api.github.com/users/bdsl/orgs","repos_url":"https://api.github.com/users/bdsl/repos","events_url":"https://api.github.com/users/bdsl/events{/privacy}","received_events_url":"https://api.github.com/users/bdsl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-19T19:35:09Z","updated_at":"2019-05-19T19:35:09Z","body":"Hey @thiagorb . It's true that `new $interfaceString`, will fail, but so will `new $abstractClass`, `new $classWithConstructorWithRequiredParam`, and `new $classWithNonPublicConstructor`.\r\n\r\nI'm not sure there's much value in something that can prevent the first failure but not the others. What sort of mistakes would it typically catch?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/493785074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bdsl","id":159481,"node_id":"MDQ6VXNlcjE1OTQ4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/159481?v=4","gravatar_id":"","url":"https://api.github.com/users/bdsl","html_url":"https://github.com/bdsl","followers_url":"https://api.github.com/users/bdsl/followers","following_url":"https://api.github.com/users/bdsl/following{/other_user}","gists_url":"https://api.github.com/users/bdsl/gists{/gist_id}","starred_url":"https://api.github.com/users/bdsl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bdsl/subscriptions","organizations_url":"https://api.github.com/users/bdsl/orgs","repos_url":"https://api.github.com/users/bdsl/repos","events_url":"https://api.github.com/users/bdsl/events{/privacy}","received_events_url":"https://api.github.com/users/bdsl/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2351597642,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjM1MTU5NzY0Mg==","url":"https://api.github.com/repos/vimeo/psalm/issues/events/2351597642","actor":{"login":"thiagorb","id":821208,"node_id":"MDQ6VXNlcjgyMTIwOA==","avatar_url":"https://avatars.githubusercontent.com/u/821208?v=4","gravatar_id":"","url":"https://api.github.com/users/thiagorb","html_url":"https://github.com/thiagorb","followers_url":"https://api.github.com/users/thiagorb/followers","following_url":"https://api.github.com/users/thiagorb/following{/other_user}","gists_url":"https://api.github.com/users/thiagorb/gists{/gist_id}","starred_url":"https://api.github.com/users/thiagorb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thiagorb/subscriptions","organizations_url":"https://api.github.com/users/thiagorb/orgs","repos_url":"https://api.github.com/users/thiagorb/repos","events_url":"https://api.github.com/users/thiagorb/events{/privacy}","received_events_url":"https://api.github.com/users/thiagorb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-19T19:35:09Z","performed_via_github_app":null},{"id":2351597643,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzNTE1OTc2NDM=","url":"https://api.github.com/repos/vimeo/psalm/issues/events/2351597643","actor":{"login":"thiagorb","id":821208,"node_id":"MDQ6VXNlcjgyMTIwOA==","avatar_url":"https://avatars.githubusercontent.com/u/821208?v=4","gravatar_id":"","url":"https://api.github.com/users/thiagorb","html_url":"https://github.com/thiagorb","followers_url":"https://api.github.com/users/thiagorb/followers","following_url":"https://api.github.com/users/thiagorb/following{/other_user}","gists_url":"https://api.github.com/users/thiagorb/gists{/gist_id}","starred_url":"https://api.github.com/users/thiagorb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thiagorb/subscriptions","organizations_url":"https://api.github.com/users/thiagorb/orgs","repos_url":"https://api.github.com/users/thiagorb/repos","events_url":"https://api.github.com/users/thiagorb/events{/privacy}","received_events_url":"https://api.github.com/users/thiagorb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-19T19:35:09Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/493785548","html_url":"https://github.com/vimeo/psalm/issues/1657#issuecomment-493785548","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/1657","id":493785548,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5Mzc4NTU0OA==","user":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-19T19:40:44Z","updated_at":"2019-05-19T19:40:44Z","body":"Yeah, I don't think there's an easy answer for this - `class-string<SomeAbstractClass>` allows `SomeAbstractClass::class` and any classes that extend `SomeAbstractClass` - hard to detect problems.\r\n\r\nThe documentation should be updated to make clear that `class-string` can represent an interface, and `interface_exists` should also result in a `class-string`-making assertion.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/493785548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2351606400,"node_id":"MDExOkNsb3NlZEV2ZW50MjM1MTYwNjQwMA==","url":"https://api.github.com/repos/vimeo/psalm/issues/events/2351606400","actor":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"1e853800a332e46583f766b22ec4dd8bc1b67cb6","commit_url":"https://api.github.com/repos/vimeo/psalm/commits/1e853800a332e46583f766b22ec4dd8bc1b67cb6","created_at":"2019-05-19T19:56:09Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/881020867","html_url":"https://github.com/vimeo/psalm/issues/1657#issuecomment-881020867","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/1657","id":881020867,"node_id":"MDEyOklzc3VlQ29tbWVudDg4MTAyMDg2Nw==","user":{"login":"orklah","id":9605520,"node_id":"MDQ6VXNlcjk2MDU1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9605520?v=4","gravatar_id":"","url":"https://api.github.com/users/orklah","html_url":"https://github.com/orklah","followers_url":"https://api.github.com/users/orklah/followers","following_url":"https://api.github.com/users/orklah/following{/other_user}","gists_url":"https://api.github.com/users/orklah/gists{/gist_id}","starred_url":"https://api.github.com/users/orklah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orklah/subscriptions","organizations_url":"https://api.github.com/users/orklah/orgs","repos_url":"https://api.github.com/users/orklah/repos","events_url":"https://api.github.com/users/orklah/events{/privacy}","received_events_url":"https://api.github.com/users/orklah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-15T21:20:08Z","updated_at":"2021-07-15T21:20:08Z","body":"Related to https://github.com/vimeo/psalm/pull/6106","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/881020867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"orklah","id":9605520,"node_id":"MDQ6VXNlcjk2MDU1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9605520?v=4","gravatar_id":"","url":"https://api.github.com/users/orklah","html_url":"https://github.com/orklah","followers_url":"https://api.github.com/users/orklah/followers","following_url":"https://api.github.com/users/orklah/following{/other_user}","gists_url":"https://api.github.com/users/orklah/gists{/gist_id}","starred_url":"https://api.github.com/users/orklah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orklah/subscriptions","organizations_url":"https://api.github.com/users/orklah/orgs","repos_url":"https://api.github.com/users/orklah/repos","events_url":"https://api.github.com/users/orklah/events{/privacy}","received_events_url":"https://api.github.com/users/orklah/received_events","type":"User","user_view_type":"public","site_admin":false}}]