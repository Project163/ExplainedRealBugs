[{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/612845510","html_url":"https://github.com/vimeo/psalm/issues/3133#issuecomment-612845510","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/3133","id":612845510,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjg0NTUxMA==","user":{"login":"psalm-github-bot[bot]","id":58627613,"node_id":"MDM6Qm90NTg2Mjc2MTM=","avatar_url":"https://avatars.githubusercontent.com/in/48546?v=4","gravatar_id":"","url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D","html_url":"https://github.com/apps/psalm-github-bot","followers_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2020-04-13T10:30:23Z","updated_at":"2020-04-13T10:30:23Z","body":"I found these snippets:\n<details>\n<summary>https://psalm.dev/r/eba2823198</summary>\n\n```php\n<?php\n\n$a = [];\n$b = [];\nif (! isset($b['id'], $a[$b['id']])) {\n    echo 'z';\n}\n```\n\n```\nPsalm encountered an internal error:\n\n/vendor/vimeo/psalm/src/Psalm/Type/Algebra.php: $clause->impossibilities should not be null\n```\n</details>\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/612845510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"psalm-github-bot[bot]","id":58627613,"node_id":"MDM6Qm90NTg2Mjc2MTM=","avatar_url":"https://avatars.githubusercontent.com/in/48546?v=4","gravatar_id":"","url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D","html_url":"https://github.com/apps/psalm-github-bot","followers_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false}},{"id":3226927427,"node_id":"MDEyOkxhYmVsZWRFdmVudDMyMjY5Mjc0Mjc=","url":"https://api.github.com/repos/vimeo/psalm/issues/events/3226927427","actor":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-04-13T12:34:26Z","label":{"name":"bug","color":"ee0701"},"performed_via_github_app":null},{"id":3226928111,"node_id":"MDExOkNsb3NlZEV2ZW50MzIyNjkyODExMQ==","url":"https://api.github.com/repos/vimeo/psalm/issues/events/3226928111","actor":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"a25610cefd5b8ce674dd1e8c925d559626495506","commit_url":"https://api.github.com/repos/vimeo/psalm/commits/a25610cefd5b8ce674dd1e8c925d559626495506","created_at":"2020-04-13T12:34:45Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"renovate[bot]","id":29139614,"node_id":"MDM6Qm90MjkxMzk2MTQ=","avatar_url":"https://avatars.githubusercontent.com/in/2740?v=4","gravatar_id":"","url":"https://api.github.com/users/renovate%5Bbot%5D","html_url":"https://github.com/apps/renovate","followers_url":"https://api.github.com/users/renovate%5Bbot%5D/followers","following_url":"https://api.github.com/users/renovate%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/renovate%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/renovate%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renovate%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/renovate%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/renovate%5Bbot%5D/repos","events_url":"https://api.github.com/users/renovate%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/renovate%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2021-06-06T20:11:15Z","updated_at":"2021-06-06T20:11:15Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/shrikeh/scuba-diving/issues/88","repository_url":"https://api.github.com/repos/shrikeh/scuba-diving","labels_url":"https://api.github.com/repos/shrikeh/scuba-diving/issues/88/labels{/name}","comments_url":"https://api.github.com/repos/shrikeh/scuba-diving/issues/88/comments","events_url":"https://api.github.com/repos/shrikeh/scuba-diving/issues/88/events","html_url":"https://github.com/shrikeh/scuba-diving/pull/88","id":598561521,"node_id":"MDExOlB1bGxSZXF1ZXN0NDAyMzkxODQx","number":88,"title":"chore(deps): update dependency vimeo/psalm to v3.18.2","user":{"login":"renovate[bot]","id":29139614,"node_id":"MDM6Qm90MjkxMzk2MTQ=","avatar_url":"https://avatars.githubusercontent.com/in/2740?v=4","gravatar_id":"","url":"https://api.github.com/users/renovate%5Bbot%5D","html_url":"https://github.com/apps/renovate","followers_url":"https://api.github.com/users/renovate%5Bbot%5D/followers","following_url":"https://api.github.com/users/renovate%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/renovate%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/renovate%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renovate%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/renovate%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/renovate%5Bbot%5D/repos","events_url":"https://api.github.com/users/renovate%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/renovate%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-04-12T20:08:13Z","updated_at":"2024-05-09T08:54:56Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"repository":{"id":236858731,"node_id":"MDEwOlJlcG9zaXRvcnkyMzY4NTg3MzE=","name":"scuba-diving","full_name":"shrikeh/scuba-diving","private":false,"owner":{"login":"shrikeh","id":445227,"node_id":"MDQ6VXNlcjQ0NTIyNw==","avatar_url":"https://avatars.githubusercontent.com/u/445227?v=4","gravatar_id":"","url":"https://api.github.com/users/shrikeh","html_url":"https://github.com/shrikeh","followers_url":"https://api.github.com/users/shrikeh/followers","following_url":"https://api.github.com/users/shrikeh/following{/other_user}","gists_url":"https://api.github.com/users/shrikeh/gists{/gist_id}","starred_url":"https://api.github.com/users/shrikeh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrikeh/subscriptions","organizations_url":"https://api.github.com/users/shrikeh/orgs","repos_url":"https://api.github.com/users/shrikeh/repos","events_url":"https://api.github.com/users/shrikeh/events{/privacy}","received_events_url":"https://api.github.com/users/shrikeh/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/shrikeh/scuba-diving","description":"My personal site for scuba diving","fork":false,"url":"https://api.github.com/repos/shrikeh/scuba-diving","forks_url":"https://api.github.com/repos/shrikeh/scuba-diving/forks","keys_url":"https://api.github.com/repos/shrikeh/scuba-diving/keys{/key_id}","collaborators_url":"https://api.github.com/repos/shrikeh/scuba-diving/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/shrikeh/scuba-diving/teams","hooks_url":"https://api.github.com/repos/shrikeh/scuba-diving/hooks","issue_events_url":"https://api.github.com/repos/shrikeh/scuba-diving/issues/events{/number}","events_url":"https://api.github.com/repos/shrikeh/scuba-diving/events","assignees_url":"https://api.github.com/repos/shrikeh/scuba-diving/assignees{/user}","branches_url":"https://api.github.com/repos/shrikeh/scuba-diving/branches{/branch}","tags_url":"https://api.github.com/repos/shrikeh/scuba-diving/tags","blobs_url":"https://api.github.com/repos/shrikeh/scuba-diving/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/shrikeh/scuba-diving/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/shrikeh/scuba-diving/git/refs{/sha}","trees_url":"https://api.github.com/repos/shrikeh/scuba-diving/git/trees{/sha}","statuses_url":"https://api.github.com/repos/shrikeh/scuba-diving/statuses/{sha}","languages_url":"https://api.github.com/repos/shrikeh/scuba-diving/languages","stargazers_url":"https://api.github.com/repos/shrikeh/scuba-diving/stargazers","contributors_url":"https://api.github.com/repos/shrikeh/scuba-diving/contributors","subscribers_url":"https://api.github.com/repos/shrikeh/scuba-diving/subscribers","subscription_url":"https://api.github.com/repos/shrikeh/scuba-diving/subscription","commits_url":"https://api.github.com/repos/shrikeh/scuba-diving/commits{/sha}","git_commits_url":"https://api.github.com/repos/shrikeh/scuba-diving/git/commits{/sha}","comments_url":"https://api.github.com/repos/shrikeh/scuba-diving/comments{/number}","issue_comment_url":"https://api.github.com/repos/shrikeh/scuba-diving/issues/comments{/number}","contents_url":"https://api.github.com/repos/shrikeh/scuba-diving/contents/{+path}","compare_url":"https://api.github.com/repos/shrikeh/scuba-diving/compare/{base}...{head}","merges_url":"https://api.github.com/repos/shrikeh/scuba-diving/merges","archive_url":"https://api.github.com/repos/shrikeh/scuba-diving/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/shrikeh/scuba-diving/downloads","issues_url":"https://api.github.com/repos/shrikeh/scuba-diving/issues{/number}","pulls_url":"https://api.github.com/repos/shrikeh/scuba-diving/pulls{/number}","milestones_url":"https://api.github.com/repos/shrikeh/scuba-diving/milestones{/number}","notifications_url":"https://api.github.com/repos/shrikeh/scuba-diving/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/shrikeh/scuba-diving/labels{/name}","releases_url":"https://api.github.com/repos/shrikeh/scuba-diving/releases{/id}","deployments_url":"https://api.github.com/repos/shrikeh/scuba-diving/deployments","created_at":"2020-01-28T22:42:57Z","updated_at":"2020-07-02T12:21:39Z","pushed_at":"2025-11-04T23:16:45Z","git_url":"git://github.com/shrikeh/scuba-diving.git","ssh_url":"git@github.com:shrikeh/scuba-diving.git","clone_url":"https://github.com/shrikeh/scuba-diving.git","svn_url":"https://github.com/shrikeh/scuba-diving","homepage":null,"size":1727,"stargazers_count":0,"watchers_count":0,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":102,"license":null,"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":0,"open_issues":102,"watchers":0,"default_branch":"develop","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/shrikeh/scuba-diving/pulls/88","html_url":"https://github.com/shrikeh/scuba-diving/pull/88","diff_url":"https://github.com/shrikeh/scuba-diving/pull/88.diff","patch_url":"https://github.com/shrikeh/scuba-diving/pull/88.patch","merged_at":null},"body":"[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| [vimeo/psalm](https://togithub.com/vimeo/psalm) | require-dev | minor | `3.10.1` -> `3.18.2` |\n\n---\n\n### Release Notes\n\n<details>\n<summary>vimeo/psalm</summary>\n\n### [`v3.18.2`](https://togithub.com/vimeo/psalm/releases/tag/3.18.2): Improve treatment of finally blocks\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.18.0...3.18.2)\n\nLast night's release added a regression in how variables set in try statements are treated, ticketed here: [https://github.com/vimeo/psalm/issues/4368](https://togithub.com/vimeo/psalm/issues/4368)\n\n### [`v3.18.0`](https://togithub.com/vimeo/psalm/releases/tag/3.18.0): Bugfixes\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.17.2...3.18.0)\n\n#### Language server works again\n\nThis [fixes](https://togithub.com/vimeo/psalm/commit/4c17fb1db2028ada18cd06b078cac5943672dfeb) an issue that prevented the language server from seeing recent changes to files (caused, almost inexplicably, by removing a `@param` docblock).\n\n#### Other bugfixes\n\n-   Fix an issue with remapped template params ([#&#8203;4326](https://togithub.com/vimeo/psalm/issues/4326))\n-   Improve handling of `try` statements without catches ([#&#8203;4333](https://togithub.com/vimeo/psalm/issues/4333), [#&#8203;4366](https://togithub.com/vimeo/psalm/issues/4366))\n-   Deal with a few more combinatorial expansion issues gracefully ([#&#8203;4347](https://togithub.com/vimeo/psalm/issues/4347))\n-   Improve Psalter replacements ([#&#8203;4350](https://togithub.com/vimeo/psalm/issues/4350), [#&#8203;4349](https://togithub.com/vimeo/psalm/issues/4349))\n-   [@&#8203;pascalheidmann](https://togithub.com/pascalheidmann) fixed an error when creating a report in a non-existent directory ([#&#8203;4353](https://togithub.com/vimeo/psalm/issues/4353))\n-   Improve handling of assignments on the RHS of `||` if conditionals ([#&#8203;4354](https://togithub.com/vimeo/psalm/issues/4354))\n\n### [`v3.17.2`](https://togithub.com/vimeo/psalm/releases/tag/3.17.2): Fix two regressions\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.17.1...3.17.2)\n\n-   Fix [#&#8203;4327](https://togithub.com/vimeo/psalm/issues/4327) - make sure loop always returns\n-   Fix [#&#8203;4315](https://togithub.com/vimeo/psalm/issues/4315) - prevent crash when setting unknown property in finally\n\n### [`v3.17.1`](https://togithub.com/vimeo/psalm/releases/tag/3.17.1): Fix preg_split\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.17.0...3.17.1)\n\n3.17.0 added a potentially-erroneous return type when a non-zero `$flags` param is passed to `preg_split`. This fixes things.\n\n### [`v3.17.0`](https://togithub.com/vimeo/psalm/releases/tag/3.17.0): A bunch of bugfixes\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.16...3.17.0)\n\n#### Features\n\n-   [@&#8203;mr-feek](https://togithub.com/mr-feek) added support for configurable universal objects ([#&#8203;3948](https://togithub.com/vimeo/psalm/issues/3948))\n-   Improved error messages and reporting for `ParadoxicalCondition` ([example](https://psalm.dev/r/1035490c06))  – thanks to [@&#8203;dkarlovi](https://togithub.com/dkarlovi), [@&#8203;jbafford](https://togithub.com/jbafford) and [@&#8203;ro0NL](https://togithub.com/ro0NL) for their input\n\n#### Bugfixes\n\n##### Fixed XML generation\n\n3.16 broke XML output, this is now fixed ([#&#8203;4252](https://togithub.com/vimeo/psalm/issues/4252)).\n\n##### Other bugfixes\n\n-   [@&#8203;DanielBadura](https://togithub.com/DanielBadura) added a stub for `random_int`, providing better inference ([#&#8203;4199](https://togithub.com/vimeo/psalm/issues/4199))\n-   Improved signatures for `preg_match_all` ([#&#8203;4202](https://togithub.com/vimeo/psalm/issues/4202)) and [@&#8203;orklah](https://togithub.com/orklah) helped improve `preg_split`\n-   Treat `func_num_args` as pure ([#&#8203;4215](https://togithub.com/vimeo/psalm/issues/4215))\n-   Fix `__invoke` declaration crash ([#&#8203;4210](https://togithub.com/vimeo/psalm/issues/4210))\n-   Allow hinting arrow function return types ([#&#8203;4209](https://togithub.com/vimeo/psalm/issues/4209))\n-   Add checks for `if ((bool) $foo)` ([#&#8203;4206](https://togithub.com/vimeo/psalm/issues/4206))\n-   Fix crash with some class-string property assignments ([#&#8203;4198](https://togithub.com/vimeo/psalm/issues/4198))\n-   [@&#8203;aheart](https://togithub.com/aheart) fixed bugs with JUnit generation ([#&#8203;4234](https://togithub.com/vimeo/psalm/issues/4234))\n-   [@&#8203;danog](https://togithub.com/danog) added a bunch of stubs for `Spl*` classes ([#&#8203;4255](https://togithub.com/vimeo/psalm/issues/4255))\n-   `allowMissingFiles` was fixed by [@&#8203;ddeboer](https://togithub.com/ddeboer) ([#&#8203;4259](https://togithub.com/vimeo/psalm/issues/4259))\n-   prevent crash after analysing file that defines a class twice ([#&#8203;4264](https://togithub.com/vimeo/psalm/issues/4264))\n-   prevent an infinite loop when analysing a closure unioned with invokable class ([#&#8203;4266](https://togithub.com/vimeo/psalm/issues/4266))\n-   [@&#8203;marcosh](https://togithub.com/marcosh) added more stubs for array functions ([#&#8203;4271](https://togithub.com/vimeo/psalm/issues/4271))\n-   prevent crash when annotating the intersection of arrays ([#&#8203;4287](https://togithub.com/vimeo/psalm/issues/4287))\n-   Fix reported property id for multiple `MissingConstructor` issues on a single class ([#&#8203;4297](https://togithub.com/vimeo/psalm/issues/4297))\n-   Prevent crash when trying to negate a `positive-numeric` assertion ([#&#8203;4306](https://togithub.com/vimeo/psalm/issues/4306))\n-   Fix return types for a few callmap-provided functions ([#&#8203;4309](https://togithub.com/vimeo/psalm/issues/4309))\n-   Prevent a class name validation check on a string argument to a `class-string|Foo` union ([#&#8203;4310](https://togithub.com/vimeo/psalm/issues/4310))\n\nAlso thanks to [@&#8203;orklah](https://togithub.com/orklah) for many linting PRs, and to [@&#8203;weirdan](https://togithub.com/weirdan) for very good triaging\n\n### [`v3.16`](https://togithub.com/vimeo/psalm/releases/tag/3.16): A smattering of things\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.15...3.16)\n\n#### Features\n\n##### New PHPStorm-optimised output format\n\nAdded a `phpstorm` report format that displays errors in a manner that PHPStorm can parse more easily ([#&#8203;4085](https://togithub.com/vimeo/psalm/issues/4085)) – thanks [@&#8203;the-toster](https://togithub.com/the-toster) (with additional help from [@&#8203;Rarst](https://togithub.com/Rarst))\n\n##### Detection of `strpos` issues\n\nPsalm will now raise two separate issues for the following code:\n\n```php\nfunction foo(string $s) : void {\n  if (strpos(\".\", $s) !== -1) {}\n}\n```\n\nThe first, `InvalidLiteralArgument`, complains a string was passed where a variable was expected. The second complains that the output of `strpos` can never be negative.\n\n##### Allow intersection of object-like arrays and regular arrays\n\nPsalm now allows the docblock `array{foo: string}&array<string, string>`, understanding it to mean an array of strings with one explicit known key.\n\n##### [@&#8203;psalm-stub-override](https://togithub.com/psalm-stub-override)\n\nAdded support for `@psalm-stub-override` which only renders the stub valid if the given class already exists – thanks [@&#8203;weirdan](https://togithub.com/weirdan) ([#&#8203;4177](https://togithub.com/vimeo/psalm/issues/4177))\n\n##### [@&#8203;psalm-suppress](https://togithub.com/psalm-suppress) Issue1, Issue2\n\nAdded support for multiple suppressed issues on a given line – thanks [@&#8203;weirdan](https://togithub.com/weirdan)  ([#&#8203;4179](https://togithub.com/vimeo/psalm/issues/4179))\n\n#### Bugfixes\n\n##### Allow multiple issues of the same type at a single position\n\nPsalm will now report multiple issues that map to the same code position (but whose message body is different). If you use the baseline, you might need to update it accordingly ([#&#8203;4167](https://togithub.com/vimeo/psalm/issues/4167))\n\n##### Other bugfixes\n\n-   allow slashes in docblock tags ([#&#8203;4112](https://togithub.com/vimeo/psalm/issues/4112))\n-   ensure calling `Closure::__invoke` doesn't break when running Psalm in PHP 7.2.11 and below ([#&#8203;4111](https://togithub.com/vimeo/psalm/issues/4111))\n-   refine closure types more accurately according to a callable\n-   prevent crash when suppressing `UndefinedTrait` ([#&#8203;4130](https://togithub.com/vimeo/psalm/issues/4130))\n-   improve inference of `preg_match_all` `$matches` array value ([#&#8203;4128](https://togithub.com/vimeo/psalm/issues/4128))\n-   fix a crash when using a short closure without specifying the `Closure` type anywhere in the affected methods ([#&#8203;4148](https://togithub.com/vimeo/psalm/issues/4148))\n-   allow null checks on the output of `Iterator::current` ([#&#8203;4146](https://togithub.com/vimeo/psalm/issues/4146))\n-   **Language Server** [@&#8203;matthijskooijman](https://togithub.com/matthijskooijman) made a couple of improvements ([#&#8203;4143](https://togithub.com/vimeo/psalm/issues/4143))\n-   treat literal numeric strings as `numeric` always ([#&#8203;4154](https://togithub.com/vimeo/psalm/issues/4154))\n-   **Taint analysis** [@&#8203;craigfrancis](https://togithub.com/craigfrancis) added additional mysql sinks ([#&#8203;4155](https://togithub.com/vimeo/psalm/issues/4155))\n-   **Language Server** [@&#8203;ngyuki](https://togithub.com/ngyuki) fixed a bug using the Phar ([#&#8203;4174](https://togithub.com/vimeo/psalm/issues/4174))\n-   Fix Psalm's assertion generation from `count($arr) <= 1` ([#&#8203;4169](https://togithub.com/vimeo/psalm/issues/4169))\n-   [@&#8203;ygottschalk](https://togithub.com/ygottschalk) improved Psalm's assertion generation from `count` calls further ([#&#8203;4175](https://togithub.com/vimeo/psalm/issues/4175))\n-   Improve error message (and location) for unused params once they've been written to ([#&#8203;4127](https://togithub.com/vimeo/psalm/issues/4127))\n-   prevent an empty docblock from suppressing missing property types ([#&#8203;4178](https://togithub.com/vimeo/psalm/issues/4178))\n-   properly detect `yield` expressions in function arguments ([#&#8203;4122](https://togithub.com/vimeo/psalm/issues/4122))\n-   improved Psalm's understanding of `array_merge` and `array_filter` functions\n\n### [`v3.15`](https://togithub.com/vimeo/psalm/releases/tag/3.15): Automatically add pure/immutable annotations\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.14.2...3.15)\n\n#### Features\n\nThis release brings a couple of features that are useful to fans of functional programming.\n\nIf you're unfamiliar with these concepts, or want to know how Psalm uses them, [read this article first](https://psalm.dev/articles/immutability-and-beyond).\n\n##### Automatic addition of `@psalm-pure`/`@psalm-immutable` annotations ([#&#8203;4036](https://togithub.com/vimeo/psalm/issues/4036)):\n\nRunning `vendor/bin/psalm --alter --issues=MissingPureAnnotation,MissingImmutableAnnotation` will add those annotations to any function, method or class that deserves it.\n\nSo\n\n```php\nfunction sayHello(string $s): string {\n    return 'Hello ' . $s;\n}\n```\n\nis transformed into\n\n```php\n/**\n * @&#8203;psalm-pure\n */\nfunction sayHello(string $s): string {\n    return 'Hello ' . $s;\n}\n```\n\n**Note**: running this command will not recursively add annotations, so if you have a chain of callers like\n\n```php\nfunction one(string $s) { return two($s); }\n\nfunction two(string $s) { return $s; }\n```\n\nrunning the command once will produce\n\n```php\nfunction one(string $s) { return two($s); }\n\n/**\n * @&#8203;psalm-pure\n */\nfunction two(string $s) { return $s; }\n```\n\nand running it a second time will produce\n\n```php\n/**\n * @&#8203;psalm-pure\n */\nfunction one(string $s) { return two($s); }\n\n/**\n * @&#8203;psalm-pure\n */\nfunction two(string $s) { return $s; }\n```\n\n#### Pure callables and closures\n\nThanks to [@&#8203;azjezz](https://togithub.com/azjezz), Psalm now understands the annotation `pure-callable`, which allows you to guarantee the purity of a pure function that executes a callable.\n\nLet's say we want to return the longest string in an array of strings `[\"a\", \"bbb\", \"cc\"]`. We could write that function pretty simply, but let's suppose we want to make it a bit more generic: given an array of items, and a `callable` that returns a score for the each entry, return the highest-scoring value.\n\nWe can define that function in PHP like\n\n```php\n/**\n * @&#8203;psalm-param non-empty-array $values\n * @&#8203;psalm-pure\n */\nfunction get_max(array $values, callable $score_func) {\n    $max = reset($values);\n    $max_num = null;\n    foreach ($values as $value) {\n        $value_num = $score_func($value);\n        if (null === $max_num || $value_num >= $max_num) {\n            $max = $value;\n            $max_num = $value_num;\n        }\n    }\n\n    return $max;\n}\n\necho get_max(['a', 'bbb', 'cc'], 'strlen'); // outputs \"bbb\"\n```\n\nThis function is only pure, though, if the callable that we're passing is pure.\n\nWith this latest version the full, pure type signature of the function can be written:\n\n```php\n/**\n * @&#8203;template T\n * @&#8203;psalm-param non-empty-array<T> $values\n * @&#8203;psalm-param pure-callable(T):int $score_func\n * @&#8203;psalm-return T\n *\n * @&#8203;psalm-pure\n */\nfunction get_max(array $values, callable $score_func) { ... }\n```\n\n#### Bugfixes\n\n-   preserve intersections when expanding templated types ([#&#8203;4043](https://togithub.com/vimeo/psalm/issues/4043))\n-   don't remove null types unnecessarily in mixed union, and refine iterable keys after `is_array` check ([#&#8203;4038](https://togithub.com/vimeo/psalm/issues/4038))\n-   assume most iterators are impure ([#&#8203;4064](https://togithub.com/vimeo/psalm/issues/4064))\n-   process indirect comparisons to `null` in assertions ([#&#8203;4061](https://togithub.com/vimeo/psalm/issues/4061))\n-   allow pure functions to return impure closures ([#&#8203;4077](https://togithub.com/vimeo/psalm/issues/4077))\n-   allow literal reconciliation against `positive-int` types ([#&#8203;4081](https://togithub.com/vimeo/psalm/issues/4081), [#&#8203;4093](https://togithub.com/vimeo/psalm/issues/4093))\n-   allow `ParamNameMismatch` to be suppressed locally ([#&#8203;4012](https://togithub.com/vimeo/psalm/issues/4012))\n-   fix parsing of union param types inside docblock `@method` annotations([#&#8203;4083](https://togithub.com/vimeo/psalm/issues/4083))\n-   [@&#8203;staabm](https://togithub.com/staabm) added a slightly-improved return type for `strpos` that precludes negative numbers\n-   [@&#8203;weirdan](https://togithub.com/weirdan) fixed [#&#8203;3869](https://togithub.com/vimeo/psalm/issues/3869) by creating a per-user cache directory\n-   `MissingPropertyType` can now be refined on a per-property basis ([#&#8203;2200](https://togithub.com/vimeo/psalm/issues/2200))\n-   [@&#8203;lhchavez](https://togithub.com/lhchavez) broadened the param type for `strval` to allow `null`\n\n### [`v3.14.2`](https://togithub.com/vimeo/psalm/releases/tag/3.14.2): Fix another regression\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.14.1...3.14.2)\n\nBugfixes\n\n-   Fix exception when two mixins declare the same method (seen frequently on Laravel, thanks [@&#8203;xyng](https://togithub.com/xyng)) – [#&#8203;4013](https://togithub.com/vimeo/psalm/issues/4013)\n-   Prevent mixed assignment in loop after positive check ([#&#8203;4011](https://togithub.com/vimeo/psalm/issues/4011))\n-   Allow `@psalm-type` to reference imported type right above ([#&#8203;3999](https://togithub.com/vimeo/psalm/issues/3999))\n-   Fixed some `hash_*` function signatures - thanks [@&#8203;baukevdw](https://togithub.com/baukevdw) ([#&#8203;4014](https://togithub.com/vimeo/psalm/issues/4014))\n-   Allow `float` defaults in namespaced class `@method` docblock annotations ([#&#8203;4017](https://togithub.com/vimeo/psalm/issues/4017))\n-   **Taint analysis** - added sinks for `pgsql` functions - thanks [@&#8203;TysonAndre](https://togithub.com/TysonAndre) ([#&#8203;4021](https://togithub.com/vimeo/psalm/issues/4021))\n-   Resolve type aliases in `foreach` docblock annotations - thanks [@&#8203;weirdan](https://togithub.com/weirdan) ([#&#8203;4029](https://togithub.com/vimeo/psalm/issues/4029))\n-   Don’t hang when `pcntl_fork` is disabled - thanks [@&#8203;weirdan](https://togithub.com/weirdan)  ([#&#8203;3951](https://togithub.com/vimeo/psalm/issues/3951))\n-   Add config option to discover unused `@psalm-suppress` on every run – thanks [@&#8203;micheh](https://togithub.com/micheh) ([#&#8203;3011](https://togithub.com/vimeo/psalm/issues/3011))\n\n### [`v3.14.1`](https://togithub.com/vimeo/psalm/releases/tag/3.14.1): Fix regression\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.14.0...3.14.1)\n\nFixes a crash with this code:\n\n    /**\n      * @&#8203;param array<int, int> $arr\n     */\n     function foo(array $arr) : void {\n        for ($i = 20; $arr[$i] === 5 && $i > 0; $i--) {}\n    }\n\n### [`v3.14.0`](https://togithub.com/vimeo/psalm/releases/tag/3.14.0): Flag named argument discrepancies\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.13.1...3.14.0)\n\n#### Features\n\n##### Named argument checks with ParamNameMismatch\n\nFor more information, [see this article](https://psalm.dev/articles/getting-ready-for-named-arguments).\n\n##### Preventing unsafe instantiation\n\nPsalm now warns you when calling `new $foo()` where `$foo()` is a class that can be extended and where the constructor is not declared `final`, or `new static` where the constructor is not declared `final` ([#&#8203;3934](https://togithub.com/vimeo/psalm/issues/3934)).\n\nFor more information, see the [issue page](https://psalm.dev/docs/running_psalm/issues/UnsafeInstantiation/)\n\n##### Other features\n\n-   [@&#8203;mr-feek](https://togithub.com/mr-feek) added support for supplying memory limit with a `--memory-limit` flag ([#&#8203;3947](https://togithub.com/vimeo/psalm/issues/3947))\n\n#### Bugfixes\n\n-   fix a few false-positives around `positive-int` types ([#&#8203;3914](https://togithub.com/vimeo/psalm/issues/3914))\n-   expand `scalar-class-constant` types in a few more places ([#&#8203;3913](https://togithub.com/vimeo/psalm/issues/3913), [#&#8203;3741](https://togithub.com/vimeo/psalm/issues/3741))\n-   [@&#8203;NicolasCARPi](https://togithub.com/NicolasCARPi) improved the signature for `hash_file()` ([#&#8203;3920](https://togithub.com/vimeo/psalm/issues/3920))\n-   honour arrays with `class-string` keys when appending literal classes ([#&#8203;3923](https://togithub.com/vimeo/psalm/issues/3923))\n-   [@&#8203;SignpostMarv](https://togithub.com/SignpostMarv) marked `bscale` as impure (ref [#&#8203;3918](https://togithub.com/vimeo/psalm/issues/3918))\n-   preserve `list`-ness when assigning to a tuple inside a loop ([#&#8203;3928](https://togithub.com/vimeo/psalm/issues/3928))\n-   fix regression with `array_shift` ([#&#8203;3941](https://togithub.com/vimeo/psalm/issues/3941))\n-   [@&#8203;jarstelfox](https://togithub.com/jarstelfox) fixed the casing checker to ignore `callStatic` ([#&#8203;3939](https://togithub.com/vimeo/psalm/issues/3939))\n-   [@&#8203;xyng](https://togithub.com/xyng) added support for multiple mixins ([#&#8203;3772](https://togithub.com/vimeo/psalm/issues/3772))\n-   improved Psalm's recovery when it encounters complex boolean logic ([#&#8203;3932](https://togithub.com/vimeo/psalm/issues/3932), [#&#8203;3954](https://togithub.com/vimeo/psalm/issues/3954))\n-   [@&#8203;ygottschalk](https://togithub.com/ygottschalk) improved `reset`'s return type\n-   [@&#8203;sasezaki](https://togithub.com/sasezaki) fixed the treatment of generators when an explicit send type is provided ([#&#8203;3966](https://togithub.com/vimeo/psalm/issues/3966))\n-   **Language Server** [@&#8203;ngyuki](https://togithub.com/ngyuki) fixed file path handling on windows ([#&#8203;3984](https://togithub.com/vimeo/psalm/issues/3984))\n-   Use unused code config settings when running language server ([#&#8203;3987](https://togithub.com/vimeo/psalm/issues/3987))\n-   Prevent an incorrect intersection of union types with `usort` ([#&#8203;3964](https://togithub.com/vimeo/psalm/issues/3964))\n-   Prevent crash with bad imported type reference ([#&#8203;3927](https://togithub.com/vimeo/psalm/issues/3927))\n-   [@&#8203;weirdan](https://togithub.com/weirdan) improved handling of `@psalm-import-type` errors ([#&#8203;3997](https://togithub.com/vimeo/psalm/issues/3997))\n-   comparisons between classes and interfaces are now allowed ([#&#8203;3917](https://togithub.com/vimeo/psalm/issues/3917))\n\n### [`v3.13.1`](https://togithub.com/vimeo/psalm/releases/tag/3.13.1): Minor bugfixes\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.13.0...3.13.1)\n\n-   fixes a possible crash when recursing through template params ([#&#8203;3912](https://togithub.com/vimeo/psalm/issues/3912))\n-   improves the return type for `fgetcsv` (now more lenient)\n\n### [`v3.13.0`](https://togithub.com/vimeo/psalm/releases/tag/3.13.0): Allow MissingPropertyType to be fixed automatically\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.12.2...3.13.0)\n\n#### Features\n\n##### MissingPropertyType fixer\n\nRunning `vendor/bin/psalm --alter --issues=MissingPropertyType` (when using PHP 7.4) on\n\n```php\n<?php\nclass A {\n    public $string_or_int;\n    public $only_string;\n    public $conditionally_set_string;\n\n    public function __construct()\n    {\n        if (rand(0, 1)) {\n            $this->string_or_int = 5;\n        } else {\n            $this->string_or_int = \"hello\";\n            $this->conditionally_set_string = \"goodbye\";\n        }\n\n        $this->only_string = \"bar\";\n    }\n}\n```\n\ngives\n\n```php\n<?php\nclass A {\n    /**\n     * @&#8203;var string|int\n     */\n    public $string_or_int;\n\n    public string $only_string;\n\n    /**\n     * @&#8203;var null|string\n     */\n    public $conditionally_set_string;\n\n    public function __construct()\n    {\n        if (rand(0, 1)) {\n            $this->string_or_int = 5;\n        } else {\n            $this->string_or_int = \"hello\";\n            $this->conditionally_set_string = \"goodbye\";\n        }\n\n        $this->only_string = \"baz\";\n    }\n}\n```\n\nThis fix has full compatibility with previous versions of PHP, too.\n\n##### === true detection\n\n[@&#8203;greg0ire](https://togithub.com/greg0ire) added support such that Psalm will warn you when comparing `$some_bool === true` where `$some_bool` would have sufficed.\n\nThis option is hidden behind the `strictBinaryOperands` config flag.\n\n##### positive-int\n\nPsalm has a new type, `positive-int`, for situations where you want the typechecker to guarantee that an integer is positive.\n\n##### Other features\n\n-   [@&#8203;TysonAndre](https://togithub.com/TysonAndre) added support for generating multiple reports from a single Psalm run ([#&#8203;3776](https://togithub.com/vimeo/psalm/issues/3776), [#&#8203;3777](https://togithub.com/vimeo/psalm/issues/3777))\n-   **Language Server:** [@&#8203;joehoyle](https://togithub.com/joehoyle) added jump-to-definition for use statements ([#&#8203;3805](https://togithub.com/vimeo/psalm/issues/3805))\n-   [@&#8203;ntzm](https://togithub.com/ntzm) added support for disabling the analysis of phpStormMeta files ([#&#8203;3833](https://togithub.com/vimeo/psalm/issues/3833))\n-   [@&#8203;bdsl](https://togithub.com/bdsl) improved the handling of `@internal`, hopefully clarifying its usage ([#&#8203;3841](https://togithub.com/vimeo/psalm/issues/3841))\n-   Psalm now detects impossible `substr` comparisons based on string length ([#&#8203;3877](https://togithub.com/vimeo/psalm/issues/3877))\n-   `@var` docblock annotations are now supported in many more places ([#&#8203;1916](https://togithub.com/vimeo/psalm/issues/1916))\n\n#### Bugfixes\n\n-   fix resolution of `@template T as self` inside traits ([#&#8203;3753](https://togithub.com/vimeo/psalm/issues/3753))\n-   prevent a crash when a class being thrown is not found ([#&#8203;3755](https://togithub.com/vimeo/psalm/issues/3755))\n-   `array_map` should remember how an array was created ([#&#8203;3764](https://togithub.com/vimeo/psalm/issues/3764))\n-   [@&#8203;joehoyle](https://togithub.com/joehoyle) improved performance when scanning large stub files ([#&#8203;3781](https://togithub.com/vimeo/psalm/issues/3781))\n-   **Language Server:** [@&#8203;joehoyle](https://togithub.com/joehoyle) fixed the offset calculation in `getReferenceAtPosition` ([#&#8203;3783](https://togithub.com/vimeo/psalm/issues/3783))\n-   allow removing `false` and `null` from a templated var ([#&#8203;3790](https://togithub.com/vimeo/psalm/issues/3790))\n-   [@&#8203;erunion](https://togithub.com/erunion) added support for always running taint analysis via the config ([#&#8203;3800](https://togithub.com/vimeo/psalm/issues/3800))\n-   allow analysis of `$i++` inside an `isset` check ([#&#8203;3802](https://togithub.com/vimeo/psalm/issues/3802))\n-   prevent a large number of chained assignments crashing Psalm ([#&#8203;3797](https://togithub.com/vimeo/psalm/issues/3797))\n-   **Language Server:** [@&#8203;joehoyle](https://togithub.com/joehoyle) fixed jump-to-definition for nullable function param types ([#&#8203;3804](https://togithub.com/vimeo/psalm/issues/3804))\n-   **Language Server:** [@&#8203;joehoyle](https://togithub.com/joehoyle) fixed jump-to-definition for return types where the docblock type is invalid ([#&#8203;3806](https://togithub.com/vimeo/psalm/issues/3806))\n-   [@&#8203;weirdan](https://togithub.com/weirdan) improved Psalm's support for custom autoloader logic ([#&#8203;3183](https://togithub.com/vimeo/psalm/issues/3183))\n-   allow more complex negations from custom assertions ([#&#8203;3811](https://togithub.com/vimeo/psalm/issues/3811))\n-   allow detection of paradoxes when switching on the result of a function call ([#&#8203;3808](https://togithub.com/vimeo/psalm/issues/3808))\n-   [@&#8203;EvgeniiR](https://togithub.com/EvgeniiR) improved support for `array_column` such that it can understand emptiness ([#&#8203;3813](https://togithub.com/vimeo/psalm/issues/3813))\n-   [@&#8203;TysonAndre](https://togithub.com/TysonAndre) added more impure function references ([#&#8203;3814](https://togithub.com/vimeo/psalm/issues/3814))\n-   improved a bunch of things around how getters are treated ([#&#8203;3820](https://togithub.com/vimeo/psalm/issues/3820), [#&#8203;3825](https://togithub.com/vimeo/psalm/issues/3825) and more)\n-   [@&#8203;ntzm](https://togithub.com/ntzm) made the `*getcsv` return types more specific ([#&#8203;3832](https://togithub.com/vimeo/psalm/issues/3832))\n-   [@&#8203;adrienlucas](https://togithub.com/adrienlucas) added taint tracking through `strval` and `sprintf`\n-   [@&#8203;ygottschalk](https://togithub.com/ygottschalk) improved handling of `key`, `array_key_first` and `array_key_last` ([#&#8203;3838](https://togithub.com/vimeo/psalm/issues/3838))\n-   [@&#8203;EvgeniiR](https://togithub.com/EvgeniiR) fixed an erroneous `UndefinedClass` issue that could crop up with params of type `array|callable` ([#&#8203;3842](https://togithub.com/vimeo/psalm/issues/3842))\n-   [@&#8203;gharlan](https://togithub.com/gharlan) added support for assignments to immutable classes in `__unserialize` ([#&#8203;3845](https://togithub.com/vimeo/psalm/issues/3845))\n-   improve support for `falsy` assertions ([#&#8203;3858](https://togithub.com/vimeo/psalm/issues/3858))\n-   allow magic properties to be reconciled just like regular properties ([#&#8203;3857](https://togithub.com/vimeo/psalm/issues/3857))\n-   detect mutations due to property assignments in mutation-free methods ([#&#8203;3870](https://togithub.com/vimeo/psalm/issues/3870))\n-   prevent a crash when comparing an object with properties to a missing class ([#&#8203;3882](https://togithub.com/vimeo/psalm/issues/3882))\n-   don't alter a `class-string` type when doing an empty check ([#&#8203;3894](https://togithub.com/vimeo/psalm/issues/3894))\n-   support turning methods `final` via trait aliasing ([#&#8203;3897](https://togithub.com/vimeo/psalm/issues/3897))\n-   allow templated types to be refined via `instanceof` ([#&#8203;3907](https://togithub.com/vimeo/psalm/issues/3907))\n\n### [`v3.12.2`](https://togithub.com/vimeo/psalm/releases/tag/3.12.2)\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.12.1...3.12.2)\n\n#### Taint analysis bugfixes & features\n\n-   allow taints to flow when no return type is given ([#&#8203;3652](https://togithub.com/vimeo/psalm/issues/3652))\n-   taint encapsulated strings based on their contents ([#&#8203;3655](https://togithub.com/vimeo/psalm/issues/3655))\n-   [@&#8203;TysonAndre](https://togithub.com/TysonAndre) added `print`, `unserialize`, `create_function` and more as sinks\n-   allow taints to flow through unpacked arguments and mixed `foreach` ([#&#8203;3670](https://togithub.com/vimeo/psalm/issues/3670))\n-   taint property types for magic getters/setters even in the absence of a `@property` annotation ([#&#8203;3668](https://togithub.com/vimeo/psalm/issues/3668))\n-   add taints to `filter_var` ([#&#8203;3675](https://togithub.com/vimeo/psalm/issues/3675))\n-   preserve taints after `is_string` checks ([#&#8203;3680](https://togithub.com/vimeo/psalm/issues/3680))\n-   taint the contents of `exit` just as `echo` is ([#&#8203;3681](https://togithub.com/vimeo/psalm/issues/3681))\n-   [@&#8203;TysonAndre](https://togithub.com/TysonAndre) improved handling of `preg_replace_callback`\n-   allow taints to flow through implied `__toString` methods ([#&#8203;3697](https://togithub.com/vimeo/psalm/issues/3697))\n-   specialize constructor taints as nececssary\n-   allow any part of a taint path to be suppressed with `@psalm-suppress TaintedInput`\n\n#### Other features\n\n[@&#8203;olleharstedt](https://togithub.com/olleharstedt) added support for `@psalm-self-out`, which allows some typestate-oriented programming in Psalm ([#&#8203;3650](https://togithub.com/vimeo/psalm/issues/3650))\n\n#### Bugfixes\n\n-   allow comparison of `get_class($foo) === static::class`\n-   fix false-negative around missing property declarations ([#&#8203;3642](https://togithub.com/vimeo/psalm/issues/3642))\n-   improve treatment of comparisons after assignment in conditional ([#&#8203;3631](https://togithub.com/vimeo/psalm/issues/3631))\n-   [@&#8203;villfa](https://togithub.com/villfa) improved reflection info for `Redis` ([#&#8203;3673](https://togithub.com/vimeo/psalm/issues/3673))\n-   `PDO::query` now allows two arguments ([#&#8203;3694](https://togithub.com/vimeo/psalm/issues/3694))\n-   [@&#8203;simPod](https://togithub.com/simPod) improved reflection for `RdKafka\\ProducerTopic::producev` ([#&#8203;3700](https://togithub.com/vimeo/psalm/issues/3700))\n-   [@&#8203;bdsl](https://togithub.com/bdsl) added a change that propagates `@internal` annotations on classes to their methods ([#&#8203;3698](https://togithub.com/vimeo/psalm/issues/3698))\n-   prevent crash with a `Foo|?` return type ([#&#8203;3716](https://togithub.com/vimeo/psalm/issues/3716))\n-   prevent crash on empty `@method` ([#&#8203;3721](https://togithub.com/vimeo/psalm/issues/3721))\n-   [@&#8203;jarstelfox](https://togithub.com/jarstelfox) fixed up the example `TemplateChecker` plugin\n-   prevent crash when `clone`-ing undefined class ([#&#8203;3719](https://togithub.com/vimeo/psalm/issues/3719))\n-   infer template params from a class-string where appropriate ([#&#8203;3726](https://togithub.com/vimeo/psalm/issues/3726))\n-   improve handling of `if` conditionals inside `do {...} while();` ([#&#8203;3685](https://togithub.com/vimeo/psalm/issues/3685))\n-   [@&#8203;lhchavez](https://togithub.com/lhchavez) fixed a bug in docblock parsing where data was lost if a comment referred to a tag ([#&#8203;3776](https://togithub.com/vimeo/psalm/issues/3776))\n-   allow `false` to be removed from template params ([#&#8203;3737](https://togithub.com/vimeo/psalm/issues/3737))\n-   allow storing references to impure classes via the class names inside immutable classes ([#&#8203;3738](https://togithub.com/vimeo/psalm/issues/3738))\n\n### [`v3.12.1`](https://togithub.com/vimeo/psalm/releases/tag/3.12.1): Improve taint analysis a little\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.12.0...3.12.1)\n\n#### Taint analysis\n\n-   `$_REQUEST` is now treated as a source, and taints now flow through `trim` and similar funcs\n-   `@psalm-taint-specialize` now works in static methods\n\nAlso [@&#8203;TysonAndre](https://togithub.com/TysonAndre) added a `--debug-emitted-issues` command line flag to help debug the route of a Psalm issue.\n\n#### Bugfixes\n\n-   `preg_replace_callback` now supports arrays properly even when the closure is not well-documented ([#&#8203;3639](https://togithub.com/vimeo/psalm/issues/3639))\n\n### [`v3.12.0`](https://togithub.com/vimeo/psalm/releases/tag/3.12.0): Add --taint-analysis command\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.11.7...3.12.0)\n\nThis will be the officially-supported taint analysis command going forward.\n\n### [`v3.11.7`](https://togithub.com/vimeo/psalm/releases/tag/3.11.7): Add more taint analysis features\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.11.6...3.11.7)\n\n#### Features\n\n-   various taint analysis improvements\n-   added an `<extraFiles>` tag to tell Psalm about directories it should scan, but not analyse ([#&#8203;3618](https://togithub.com/vimeo/psalm/issues/3618))\n\n#### Bugfixes\n\n-   add better support for complex `switch (true)` case statements ([#&#8203;3603](https://togithub.com/vimeo/psalm/issues/3603))\n-   allow lists to have their types refined in `@psalm-assert` calls ([#&#8203;3605](https://togithub.com/vimeo/psalm/issues/3605))\n-   treat `(Foo\\Bar::class)::baz()` as `Foo\\Bar::baz()` ([#&#8203;3609](https://togithub.com/vimeo/psalm/issues/3609))\n-   [@&#8203;andrei-petre](https://togithub.com/andrei-petre) improved error message casing for undefined methods ([#&#8203;3615](https://togithub.com/vimeo/psalm/issues/3615))\n-   [@&#8203;iluuu1994](https://togithub.com/iluuu1994) allowed strings with leading backslashes e.g. `'\\Foo\\Bar::baz'` to be treated as callables ([#&#8203;3607](https://togithub.com/vimeo/psalm/issues/3607))\n-   prevent a crash when analysing an assertion on a class constant where the class doesn’t exist ([#&#8203;3607](https://togithub.com/vimeo/psalm/issues/3607))\n\n### [`v3.11.6`](https://togithub.com/vimeo/psalm/releases/tag/3.11.6): Improve diff behaviour &amp; bugfixes\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.11.5...3.11.6)\n\n#### Improved `--diff` behaviour\n\n[@&#8203;bendavies](https://togithub.com/bendavies) pointed out an issue ([#&#8203;3367](https://togithub.com/vimeo/psalm/issues/3367)) in Psalm's behaviour when running `--diff`, where the caching would only take effect the third time you ran Psalm, not the second. This is now fixed.\n\n#### Pathological-case switch statement speedups\n\nswitch statements with 100 case statements in a row like\n\n```php\nswitch ($i) {\n  case 0:\n  case 1:\n  ...\n  case 99:\n    return;\n}\n```\n\nUsed to have polynomial complexity, but now they're evaluated in linear time.\n\n#### `sealAllMethods` config\n\nby default, if Psalm sees\n\n```php\n/**\n * @&#8203;method getString():string\n */\nclass Foo {\n  public function __call(string $name, array $args) {}\n}\n\n(new Foo)->bar(); // UndefinedMagicMethod\n```\n\nit emits a  `UndefinedMagicMethod` for the call to `Foo::bar()`.\n\nBut if no `@method` annotation is given, nor a `@psalm-seal-methods` annotation, then the call is allowed:\n\n```php\nclass Foo {\n  public function __call(string $name, array $args) {}\n}\n\n(new Foo)->bar(); // no issue\n```\n\n[@&#8203;olleharstedt](https://togithub.com/olleharstedt) added a new config option, `sealAllMethods`, that tells Psalm that this is *always* bad.\n\n#### `@mixin` bugfixes\n\n-   [@&#8203;mr-feek](https://togithub.com/mr-feek) fixed a bug in a `@mixin` annotation used with a `final` class ([#&#8203;3470](https://togithub.com/vimeo/psalm/issues/3470))\n-   fix a crash when encountering a weird `@mixin` annotation ([#&#8203;3537](https://togithub.com/vimeo/psalm/issues/3537))\n-   allow magic method call on `@mixin` ([#&#8203;3534](https://togithub.com/vimeo/psalm/issues/3534))\n-   added back support for static `@mixin` calls ([#&#8203;3552](https://togithub.com/vimeo/psalm/issues/3552))\n\n#### Bugfixes\n\n-   [@&#8203;still-dreaming-1](https://togithub.com/still-dreaming-1) added better type inference for `__TRAIT__` and `__FILE__` ([#&#8203;3464](https://togithub.com/vimeo/psalm/issues/3464))\n\n-   allow wildcard references to builtin class constants ([#&#8203;3484](https://togithub.com/vimeo/psalm/issues/3484))\n\n-   [@&#8203;orklah](https://togithub.com/orklah) added a better return type for `DateInterval::$days` ([#&#8203;3493](https://togithub.com/vimeo/psalm/issues/3493))\n\n-   [@&#8203;orklah](https://togithub.com/orklah) added checks for duplicate `@return`/`@param` annotations ([#&#8203;3487](https://togithub.com/vimeo/psalm/issues/3487))\n\n-   [@&#8203;0x450x6c](https://togithub.com/0x450x6c) added wildcard support for class constants inside generics ([#&#8203;3489](https://togithub.com/vimeo/psalm/issues/3489))\n\n-   [@&#8203;orklah](https://togithub.com/orklah) prevented division by explicit zero in `bcdiv` ([#&#8203;3494](https://togithub.com/vimeo/psalm/issues/3494))\n\n-   [@&#8203;staabm](https://togithub.com/staabm) fixed the type of `mysqli_warning::$sqlstate` ([#&#8203;3497](https://togithub.com/vimeo/psalm/issues/3497))\n\n-   prevent crash on malformed `@throws` annotation ([#&#8203;3506](https://togithub.com/vimeo/psalm/issues/3506))\n\n-   prevent incorrect `mixed` type with Amp when a `@psalm-yield` annotation is provided ([#&#8203;3418](https://togithub.com/vimeo/psalm/issues/3418))\n\n-   [@&#8203;LeSuisse](https://togithub.com/LeSuisse) fixed signatures of `stream_filter_append/prepend` ([#&#8203;3514](https://togithub.com/vimeo/psalm/issues/3514))\n\n-   prevent crash when a callable string is empty ([#&#8203;3519](https://togithub.com/vimeo/psalm/issues/3519))\n\n-   fix a regression with the `memoizeMethodCallResults` option ([#&#8203;3522](https://togithub.com/vimeo/psalm/issues/3522))\n\n-   expand `@psalm-type` aliases recursively ([#&#8203;3532](https://togithub.com/vimeo/psalm/issues/3532))\n\n-   **Language Server**: [@&#8203;joehoyle](https://togithub.com/joehoyle) added support for globally-defined functions ([#&#8203;3477](https://togithub.com/vimeo/psalm/issues/3477))\n\n-   [@&#8203;andrei-petre](https://togithub.com/andrei-petre) fixed some config location resolution issues when setting baselines ([#&#8203;3521](https://togithub.com/vimeo/psalm/issues/3521))\n\n-   [@&#8203;gharlan](https://togithub.com/gharlan) added `PharData::offsetGet/offsetExists` to callmap ([#&#8203;3557](https://togithub.com/vimeo/psalm/issues/3557))\n\n-   [@&#8203;enumag](https://togithub.com/enumag) improved `ext-ds` stubs ([#&#8203;3559](https://togithub.com/vimeo/psalm/issues/3559))\n\n-   fix a crash when reconciling strings to template params ([#&#8203;3510](https://togithub.com/vimeo/psalm/issues/3510))\n\n-   [@&#8203;tvdijen](https://togithub.com/tvdijen) improved the return type for `preg_grep` ([#&#8203;3565](https://togithub.com/vimeo/psalm/issues/3565))\n\n-   support complicated case expressions after `switch (true)` ([#&#8203;3563](https://togithub.com/vimeo/psalm/issues/3563))\n\n-   make `callable():void` is valid for `callable():?bool` ([#&#8203;3571](https://togithub.com/vimeo/psalm/issues/3571))\n\n-   always analyse cast expressions even when used in unknown context ([#&#8203;3577](https://togithub.com/vimeo/psalm/issues/3577))\n\n-   [@&#8203;weirdan](https://togithub.com/weirdan) marked `session_decode` as impure ([#&#8203;3572](https://togithub.com/vimeo/psalm/issues/3572))\n\n-   [@&#8203;andrei-petre](https://togithub.com/andrei-petre) added a check to prevent users extending `final` classes ([#&#8203;3037](https://togithub.com/vimeo/psalm/issues/3037))\n\n-   [@&#8203;ostrolucky](https://togithub.com/ostrolucky) marked `fgetcsv` impure ([#&#8203;3582](https://togithub.com/vimeo/psalm/issues/3582))\n\n-   prevent impure use of `count` ([#&#8203;3551](https://togithub.com/vimeo/psalm/issues/3551))\n\n-   [@&#8203;Daeroni](https://togithub.com/Daeroni) fixed the property type of `tidyNode::$child` ([#&#8203;3599](https://togithub.com/vimeo/psalm/issues/3599))\n\n-   [@&#8203;jaikdean](https://togithub.com/jaikdean) fixed some `Redis::` signatures ([#&#8203;3597](https://togithub.com/vimeo/psalm/issues/3597))\n\n### [`v3.11.5`](https://togithub.com/vimeo/psalm/releases/tag/3.11.5)\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.11.4...3.11.5)\n\n#### Features\n\n##### Import [@&#8203;psalm-type](https://togithub.com/psalm-type) annotations into classes\n\nAdded support for importing `@psalm-type` annotations from one class to another based on a suggestion from [@&#8203;malukenho](https://togithub.com/malukenho) (in [https://github.com/vimeo/psalm/pull/2924](https://togithub.com/vimeo/psalm/pull/2924))\n\nGiven a class `Phone` that defines a `@psalm-type` annotation on a class:\n\n```php\n<?php\n/**\n * @&#8203;psalm-type PhoneType = array{phone: string}\n */\nclass Phone {\n    /**\n     * @&#8203;psalm-return PhoneType\n     */\n    public function toArray(): array {\n        return [\"phone\" => \"Nokia\"];\n    }\n}\n```\n\nYou can reference that type with the `@psalm-import-type` annotation:\n\n```php\n/**\n * @&#8203;psalm-import-type PhoneType from Phone\n */\nclass User {\n    /**\n     * @&#8203;psalm-return PhoneType\n     */\n    function toArray(): array {\n        return array_merge([], (new Phone)->toArray());\n    }\n}   \n```\n\n##### Other features\n\n-   Psalm now detects a number of unused magic methods (e.g. `__get`, `__set`) ([#&#8203;3236](https://togithub.com/vimeo/psalm/issues/3236))\n-   Psalm now continues its analysis after encountering undefined variables ([#&#8203;3366](https://togithub.com/vimeo/psalm/issues/3366))\n-   [@&#8203;dereuromark](https://togithub.com/dereuromark) added a `pretty-print` option for JSON output\n-   **Language Server**: [@&#8203;joehoyle](https://togithub.com/joehoyle) added variable assignment hover information ([#&#8203;3401](https://togithub.com/vimeo/psalm/issues/3401))\n\n#### Bugfixes\n\n-   Prevent crashes in method type parsing ([#&#8203;3340](https://togithub.com/vimeo/psalm/issues/3340)), when `@mixin` type can't be found ([#&#8203;3452](https://togithub.com/vimeo/psalm/issues/3452)), when throwing an exception without a known alias ([#&#8203;3465](https://togithub.com/vimeo/psalm/issues/3465)), and when yielded type tokenisation fails ([#&#8203;3430](https://togithub.com/vimeo/psalm/issues/3430))\n-   Prevent notice due to empty function id ([#&#8203;3354](https://togithub.com/vimeo/psalm/issues/3354))\n-   The Phar now doesn’t prefix any Psalm classes ([#&#8203;3152](https://togithub.com/vimeo/psalm/issues/3152), [#&#8203;2904](https://togithub.com/vimeo/psalm/issues/2904), [#&#8203;2652](https://togithub.com/vimeo/psalm/issues/2652))\n-   [@&#8203;nobuf](https://togithub.com/nobuf) added support for inferring that an object can be cast after `is_callable([$var, '__isString'])` ([#&#8203;3372](https://togithub.com/vimeo/psalm/issues/3372))\n-   **Psalter**: [@&#8203;orklah](https://togithub.com/orklah) added a fix that avoids updating docblocks when no changes are made ([#&#8203;3374](https://togithub.com/vimeo/psalm/issues/3374))\n-   [@&#8203;ragboyjr](https://togithub.com/ragboyjr) fixed return type inference (based on docblock return type) for arrow functions ([#&#8203;3376](https://togithub.com/vimeo/psalm/issues/3376))\n-   Eliminate `null` after `> 0` check ([#&#8203;3388](https://togithub.com/vimeo/psalm/issues/3388))\n-   [@&#8203;SignpostMarv](https://togithub.com/SignpostMarv) added `numeric-string` inference when casting a numeric type to a string ([#&#8203;3390](https://togithub.com/vimeo/psalm/issues/3390))\n-   [@&#8203;EvgeniiR](https://togithub.com/EvgeniiR) helped improve analysis of possibly-correct `clone` expressions ([#&#8203;3382](https://togithub.com/vimeo/psalm/issues/3382))\n-   [@&#8203;orklah](https://togithub.com/orklah) improved inference for `array_sum` ([#&#8203;3395](https://togithub.com/vimeo/psalm/issues/3395))\n-   **Language Server**: [@&#8203;joehoyle](https://togithub.com/joehoyle) fixed bugs around getting symbol information for array shapes ([#&#8203;3400](https://togithub.com/vimeo/psalm/issues/3400))\n-   Remove possibly-undefined array keys when merging ([#&#8203;3393](https://togithub.com/vimeo/psalm/issues/3393))\n-   Allow conditional return types with `func_num_args()` in namespaces ([#&#8203;3423](https://togithub.com/vimeo/psalm/issues/3423))\n-   Don’t add `null` to return type as part of reflection when using docblock templates ([#&#8203;3419](https://togithub.com/vimeo/psalm/issues/3419))\n-   Allow falsy reconciliation for templated params ([#&#8203;3426](https://togithub.com/vimeo/psalm/issues/3426))\n-   Always treat `$this` as static-y ([#&#8203;3417](https://togithub.com/vimeo/psalm/issues/3417))\n-   Flesh out `static` references in `Closure():static` return types ([#&#8203;3415](https://togithub.com/vimeo/psalm/issues/3415))\n-   Prevent a function param typed with a `\"0\"|\"1\"` from accepting a `numeric-string` type ([#&#8203;3440](https://togithub.com/vimeo/psalm/issues/3440))\n-   Allow `isset` checks on undefined static properties ([#&#8203;3460](https://togithub.com/vimeo/psalm/issues/3460))\n-   Allow conditional return type inference with `func_get_args()` on instance methods ([#&#8203;3453](https://togithub.com/vimeo/psalm/issues/3453))\n-   [@&#8203;still-dreaming-1](https://togithub.com/still-dreaming-1) improved plugin handling for `AfterAnalysisInterface` ([#&#8203;3461](https://togithub.com/vimeo/psalm/issues/3461))\n-   Improve handling of templated `@mixin` annotation ([#&#8203;3458](https://togithub.com/vimeo/psalm/issues/3458))\n-   Improve handling of `array_key_exists` checks ([#&#8203;3463](https://togithub.com/vimeo/psalm/issues/3463))\n\n### [`v3.11.4`](https://togithub.com/vimeo/psalm/releases/tag/3.11.4): Fix loop unset crash introduced by 3.11.3\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.11.3...3.11.4)\n\nUse of `unset` inside a loop on variables initialised before the loop was entered resulted in a crash after a change in 3.11.3\n\n### [`v3.11.3`](https://togithub.com/vimeo/psalm/releases/tag/3.11.3): Add more comprehensive support for conditional types\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.11.2...3.11.3)\n\n#### Features\n\n##### func_num_args() in conditional types\n\nHaving added support for conditional types in 3.11.0, this release fleshes out that support, adding the ability (among other things) to return different values based on the number of passed arguments.\n\nYou can use `func_num_args()` in your definition to change the function's behaviour.\n\n```php\n/**\n  * @&#8203;return (func_num_args() is 0 ? false : string)\n */\nfunction zeroArgsFalseOneArgString(string $s = \"\") {\n    if (func_num_args() === 0) {\n        return false;\n    }\n    return $s;\n}\n\nzeroArgsFalseOneArgString(); // type inferred as false\nzeroArgsFalseOneArgString(\"\"); // type inferred as string\nzeroArgsFalseOneArgString(\"hello\"); // type inferred as string\n```\n\n##### Improved inference for `date` calls\n\nPsalm now understands when the `date` function can return a numeric string.\n\n##### Language Server options\n\n[@&#8203;pristinesource](https://togithub.com/pristinesource) added a bunch of additional language server options in [#&#8203;3161](https://togithub.com/vimeo/psalm/issues/3161)\n\n##### Constructor initialisation method checks\n\nIn [#&#8203;3201](https://togithub.com/vimeo/psalm/issues/3201) [@&#8203;weirdan](https://togithub.com/weirdan) pointed out that there was problem with Psalm's property initialisation checks when a public or protected method that initialises a property is overridden in a subclass, such that the property initialisation never takes place. Psalm was ignorant of issue.\n\nWith this release, if you initialise a property in a public or protected method, that method has to be declared `final` or Psalm will complain that the property isn't properly initialised.\n\n##### Templated `@mixin`\n\n`@mixin SomeTemplate` is now valid, as is `@mixin SomeGenericClass<int>` ([#&#8203;3237](https://togithub.com/vimeo/psalm/issues/3237)) – thanks [@&#8203;mr-feek](https://togithub.com/mr-feek) for help here!\n\n##### Improved RecursiveIteratorIterator return types\n\nAs part of the above, Psalm now has a better understanding of `RecursiveIteratorIterator` calls ([#&#8203;3228](https://togithub.com/vimeo/psalm/issues/3228))\n\n##### Array shape key quoting/escaping\n\nYou can now specify array shape keys with special characters in docblocks ([#&#8203;1518](https://togithub.com/vimeo/psalm/issues/1518)), e.g.\n\n    /** @&#8203;return array{'?': string, '\\'': int} */\n\n##### New plugin AfterFunctionLikeAnalysisInterface\n\nSee [#&#8203;3258](https://togithub.com/vimeo/psalm/issues/3258)\n\n##### Add more protections when destructuring arrays\n\nCode like\n\n```php\n[$a, $b, $c] = [1, 2];\n```\n\nis now caught ([#&#8203;3210](https://togithub.com/vimeo/psalm/issues/3210))\n\n##### Tuple annotations\n\nWhen you use the docblock annotation `array{int, string}`  (with no keys given) Psalm will treat it like a tuple – that is, a sequential array of the form `[$some_int, $some_string]`.\n\nPreviously this was just treated as an alternative form for `array{0: int, 1: string}`, which allows `[1 => $some_string, 0 => $some_int]`. These types are now represented separately internally.\n\n#### Bugfixes\n\n-   array_unique now removes assumed information about array length ([#&#8203;3142](https://togithub.com/vimeo/psalm/issues/3142))\n-   [@&#8203;enumag](https://togithub.com/enumag) improved `Ds\\*` generics ([#&#8203;3146](https://togithub.com/vimeo/psalm/issues/3146))\n-   nested templates are now supported ([#&#8203;3137](https://togithub.com/vimeo/psalm/issues/3137))\n-   `array_keys` now respects array non-emptiness - thanks [@&#8203;vudaltsov](https://togithub.com/vudaltsov)  ([#&#8203;3168](https://togithub.com/vimeo/psalm/issues/3168))\n-   `Throwable` methods are now marked as pure – thanks [@&#8203;greg0ire](https://togithub.com/greg0ire) ([#&#8203;3171](https://togithub.com/vimeo/psalm/issues/3171))\n-   array access in class constants is now resolved properly ([#&#8203;3132](https://togithub.com/vimeo/psalm/issues/3132))\n-   improve inference of templated properties ([#&#8203;3138](https://togithub.com/vimeo/psalm/issues/3138), [#&#8203;3163](https://togithub.com/vimeo/psalm/issues/3163), [#&#8203;3289](https://togithub.com/vimeo/psalm/issues/3289))\n-   [@&#8203;vladyslavstartsev](https://togithub.com/vladyslavstartsev) added correct types for BCMath and GMP functions ([#&#8203;3189](https://togithub.com/vimeo/psalm/issues/3189))\n-   prevent un-namespaced string references to functions in the current namespace ([#&#8203;3182](https://togithub.com/vimeo/psalm/issues/3182), [#&#8203;3204](https://togithub.com/vimeo/psalm/issues/3204))\n-   [@&#8203;still-dreaming-1](https://togithub.com/still-dreaming-1) improved the specificity of `compact`'s return type ([#&#8203;3209](https://togithub.com/vimeo/psalm/issues/3209))\n-   Mixed assignments to all variables named `$_` are now ignored - thanks [@&#8203;villfa](https://togithub.com/villfa) ([#&#8203;3045](https://togithub.com/vimeo/psalm/issues/3045))\n-   Support intersections with object with `__toString` method ([#&#8203;3149](https://togithub.com/vimeo/psalm/issues/3149))\n-   allow non-string keys in `array_change_key_case` - thanks [@&#8203;greg0ire](https://togithub.com/greg0ire) ([#&#8203;3221](https://togithub.com/vimeo/psalm/issues/3221))\n-   `yield` within a closure is now correctly understood ([#&#8203;3268](https://togithub.com/vimeo/psalm/issues/3268))\n-   add support for parsing extra spaces before `@param` ([#&#8203;3270](https://togithub.com/vimeo/psalm/issues/3270))\n-   ensure short closures see the same sorts of issues as closures ([#&#8203;3305](https://togithub.com/vimeo/psalm/issues/3305))\n-   fix a crash when asserting on a possibly-undefined variable ([#&#8203;3324](https://togithub.com/vimeo/psalm/issues/3324))\n-   allow interface methods to be used in `array_map` callables ([#&#8203;3321](https://togithub.com/vimeo/psalm/issues/3321))\n-   improve treatment of custom autoloader scripts which themselves contain non-composer-loaded classes ([#&#8203;3311](https://togithub.com/vimeo/psalm/issues/3311))\n-   [@&#8203;sj-i](https://togithub.com/sj-i) improved function types for `proc_open` in PHP 7.4 ([#&#8203;3333](https://togithub.com/vimeo/psalm/issues/3333))\n\n### [`v3.11.2`](https://togithub.com/vimeo/psalm/releases/tag/3.11.2): Prevent crash when analysing some isset conditions\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.11.1...3.11.2)\n\nFixes [https://github.com/vimeo/psalm/issues/3133](https://togithub.com/vimeo/psalm/issues/3133)\n\n### [`v3.11.1`](https://togithub.com/vimeo/psalm/releases/tag/3.11.1): Bugfixes\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.11.0...3.11.1)\n\n-   Allow templated value `T as X` where `X&static` is expected ([#&#8203;3127](https://togithub.com/vimeo/psalm/issues/3127))\n-   Evaluate out class constants wherever possible ([#&#8203;3128](https://togithub.com/vimeo/psalm/issues/3128))\n-   Only apply loop clauses where applicable ([#&#8203;3125](https://togithub.com/vimeo/psalm/issues/3125))\n\n### [`v3.11.0`](https://togithub.com/vimeo/psalm/releases/tag/3.11.0): Conditional types &amp; faster --diff mode\n\n[Compare Source](https://togithub.com/vimeo/psalm/compare/3.10.1...3.11.0)\n\n### Features\n\n#### Conditional Return Types\n\nPsalm now supports [conditional return types](https://psalm.dev/docs/annotating_code/type_syntax/conditional_types/).\n\n#### Improved --diff mode\n\nPsalm's `--diff` mode should now produce all the same issues that running without `--diff` does ([#&#8203;3024](https://togithub.com/vimeo/psalm/issues/3024), [#&#8203;3032](https://togithub.com/vimeo/psalm/issues/3032))\n\nAdditionally, it should now run much faster for small changesets.\n\nWith this change, `--diff-methods` is now implied when running `--diff`.\n\n#### Improve detection of problematic array types\n\nPreviously when dealing with arrays the `mixed` type subsumed everything in its path. Since Psalm converts any bare PHP `array` types to `array<array-key, mixed>`, that `mixed` type can hide real bugs, such as in the following code: https://psalm.dev/r/a97351e870 (this corresponds to code that caused an outage on vimeo.com).\n\nThis version of Psalm introduces slightly more careful array handling, and allows unions on `mixed` inside arrays in certain circumstances to allow you to catch more of these sorts of errors.\n\n#### Other features\n\n-   `@psalm-property-read` and `@psalm-property-write` are now supported as prefixed versions of `@property-read`  and `@property-write` - thanks [@&#8203;iggyvolz](https://togithub.com/iggyvolz) ([#&#8203;3013](https://togithub.com/vimeo/psalm/issues/3013))\n-   Psalter can now be run without using cache (via `--no-cache`) - thanks [@&#8203;orklah](https://togithub.com/orklah)!\n-   You can now use a `@psalm-trace` annotation to figure out what type Psalm infers for a given variable – thanks [@&#8203;m0003r](https://togithub.com/m0003r) ([#&#8203;3080](https://togithub.com/vimeo/psalm/issues/3080), [#&#8203;3106](https://togithub.com/vimeo/psalm/issues/3106))\n-   Docblock inheritance for function params is now just position-dependent, not name dependent as previously ([#&#8203;2722](https://togithub.com/vimeo/psalm/issues/2722))\n\n### Bugfixes\n\n-   improve handling of templated assertions when calling `array_filter` ([#&#8203;3008](https://togithub.com/vimeo/psalm/issues/3008))\n-   fix templating of properties ([#&#8203;3027](https://togithub.com/vimeo/psalm/issues/3027), [#&#8203;3035](https://togithub.com/vimeo/psalm/issues/3035))\n-   `@return static` is now enforced in places it should have been, but was not\n-   variables set in conditional branches of `while` expressions are now more completely understood ([#&#8203;3034](https://togithub.com/vimeo/psalm/issues/3034))\n-   **Psalter** don’t suggest hard return types for functions that don’t always return ([#&#8203;3030](https://togithub.com/vimeo/psalm/issues/3030))\n-   Allow `__invoke` to be called on unions with non-objects ([#&#8203;3033](https://togithub.com/vimeo/psalm/issues/3033))\n-   Allow inheritance from classes that only exist in stubs ([#&#8203;2191](https://togithub.com/vimeo/psalm/issues/2191))\n-   Fix class constant access rules for constant defined in subclass ([#&#8203;3014](https://togithub.com/vimeo/psalm/issues/3014))\n-   Use a better method for determining switch case complexity, preventing crashes ([#&#8203;2728](https://togithub.com/vimeo/psalm/issues/2728))\n-   [@&#8203;LeSuisse](https://togithub.com/LeSuisse) updated the return value of `zip_open`\n-   Improve handling of generators ([#&#8203;3058](https://togithub.com/vimeo/psalm/issues/3058), [#&#8203;3057](https://togithub.com/vimeo/psalm/issues/3057))\n-   Prevent `array_key_exists` calls from changing the array type ([#&#8203;3061](https://togithub.com/vimeo/psalm/issues/3061))\n-   Allow comparing `self`-returning trait methods in 7.4 without a MethodSignatureMismatch ([#&#8203;3042](https://togithub.com/vimeo/psalm/issues/3042))\n-   Perform more intelligent templating for callable arrays passed to `array_map` ([#&#8203;3039](https://togithub.com/vimeo/psalm/issues/3039))\n-   Improve handling of intersection types when merging templated types ([#&#8203;3082](https://togithub.com/vimeo/psalm/issues/3082))\n-   Psalm now infers template upper and lower bounds correctly, and will present more useful error messages when they don’t match ([#&#8203;3084](https://togithub.com/vimeo/psalm/issues/3084))\n-   Improve handling of elseif clauses ([#&#8203;3091](https://togithub.com/vimeo/psalm/issues/3091))\n-   Forget what's been asserted in methods when checking constructor initialisation ([#&#8203;3096](https://togithub.com/vimeo/psalm/issues/3096))\n-   [@&#8203;Ocramius](https://togithub.com/Ocramius) improved the return type for ReflectionProperty::getType() ([#&#8203;3093](https://togithub.com/vimeo/psalm/issues/3093))\n-   [@&#8203;lhchavez](https://togithub.com/lhchavez) added the ability to annotate intersections of arrays in docblocks ([#&#8203;3064](https://togithub.com/vimeo/psalm/issues/3064))\n-   [@&#8203;mpesari](https://togithub.com/mpesari) updated property types for `mysqli` objects ([#&#8203;3114](https://togithub.com/vimeo/psalm/issues/3114))\n-   Prevent a crash when encountering a `@method` annotation with a dash in the method name ([#&#8203;3107](https://togithub.com/vimeo/psalm/issues/3107))\n-   Perform intersections on arrays after assertions on their key types ([#&#8203;3095](https://togithub.com/vimeo/psalm/issues/3095))\n-   `round` always ret\n\n</details>\n\n---\n\n### Configuration\n\n📅 **Schedule**: Branch creation - At any time (no schedule defined), Automerge - At any time (no schedule defined).\n\n🚦 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n♻ **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n🔕 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/shrikeh/scuba-diving).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNC4yOC4wIiwidXBkYXRlZEluVmVyIjoiMzQuMjguMCJ9-->\n","reactions":{"url":"https://api.github.com/repos/shrikeh/scuba-diving/issues/88/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/shrikeh/scuba-diving/issues/88/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]