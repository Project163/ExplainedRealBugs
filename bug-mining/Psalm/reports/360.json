{"url":"https://api.github.com/repos/vimeo/psalm/issues/2437","repository_url":"https://api.github.com/repos/vimeo/psalm","labels_url":"https://api.github.com/repos/vimeo/psalm/issues/2437/labels{/name}","comments_url":"https://api.github.com/repos/vimeo/psalm/issues/2437/comments","events_url":"https://api.github.com/repos/vimeo/psalm/issues/2437/events","html_url":"https://github.com/vimeo/psalm/issues/2437","id":534320883,"node_id":"MDU6SXNzdWU1MzQzMjA4ODM=","number":2437,"title":"Psalter: Erroneously fixing templated params","user":{"login":"jarstelfox","id":857362,"node_id":"MDQ6VXNlcjg1NzM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857362?v=4","gravatar_id":"","url":"https://api.github.com/users/jarstelfox","html_url":"https://github.com/jarstelfox","followers_url":"https://api.github.com/users/jarstelfox/followers","following_url":"https://api.github.com/users/jarstelfox/following{/other_user}","gists_url":"https://api.github.com/users/jarstelfox/gists{/gist_id}","starred_url":"https://api.github.com/users/jarstelfox/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jarstelfox/subscriptions","organizations_url":"https://api.github.com/users/jarstelfox/orgs","repos_url":"https://api.github.com/users/jarstelfox/repos","events_url":"https://api.github.com/users/jarstelfox/events{/privacy}","received_events_url":"https://api.github.com/users/jarstelfox/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":486061586,"node_id":"MDU6TGFiZWw0ODYwNjE1ODY=","url":"https://api.github.com/repos/vimeo/psalm/labels/bug","name":"bug","color":"ee0701","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-12-07T00:30:16Z","updated_at":"2019-12-10T22:15:24Z","closed_at":"2019-12-10T19:58:31Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Problem\r\nPsalm version: 3.7.2\r\n\r\nSee my simplified example here: https://psalm.dev/r/8c78332c09\r\n\r\n_Note: The psalter warning doesn't show on the website, but I can see the warning when running psalm locally_\r\n\r\n---\r\n\r\nPsalm is recommending to use the psalter with `--issues=MissingParamType` on a library which is 100% typed.\r\n\r\n\r\nIn my library - I have 2 similar classes:\r\n`Result<TOkay, TError>`\r\n`Either<TLeft, TRight>` \r\n\r\nUnder the hood of `Result<TOkay, TError>` is actually composed of an `Either<TLeft, TRight>`.\r\n\r\nThus, in my codebase: `Result<TOkay, TError>` is essentially the same as `Either<TOkay, TError>`\r\n\r\nThe psalter notices this and suggests changing either from `Either<TLeft, TRight>` -> `Either<TOkay, TError>`.\r\n\r\n---\r\n\r\nThe psalter is not wrong with its types.\r\n\r\nHowever, I want the generics on both classes as both are public in my library.\r\n\r\nThe types are generic so they support more use cases than the ones limited to my library src. This allows consumers to type-check against my library.\r\n\r\nThe real problem is psalm notices I *could* be more strict given only my library src.\r\n\r\n## Possible Solutions\r\n\r\n* An annotation to suppress the psalter warning\r\n\t* Would be nice on the class as well\r\n* An annotation to indicate the code is a library\r\n\t* I suspect this might be heavy-handed\r\n* Psalm: Be less eager with it's typing in this case\r\n\r\n### Background\r\n\r\nI have a library: https://github.com/iFixit/php7-optional\r\n[This master build](https://travis-ci.org/iFixit/php7-optional/jobs/621387041#L304) is recommending to use the psalter with `--alter --issues=MissingParamType --dry-run`\r\n\r\n","closed_by":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/2437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vimeo/psalm/issues/2437/timeline","performed_via_github_app":null,"state_reason":"completed"}