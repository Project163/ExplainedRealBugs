[{"id":8555051040,"node_id":"MEE_lADOBG8K985ez2APzwAAAAH967gg","url":"https://api.github.com/repos/vimeo/psalm/issues/events/8555051040","actor":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-02-19T11:13:22Z","performed_via_github_app":null},{"id":8555051042,"node_id":"SE_lADOBG8K985ez2APzwAAAAH967gi","url":"https://api.github.com/repos/vimeo/psalm/issues/events/8555051042","actor":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-02-19T11:13:23Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435963240","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1435963240","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1435963240,"node_id":"IC_kwDOBG8K985Vlw9o","user":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T11:30:52Z","updated_at":"2023-02-19T12:16:14Z","body":"# To anyone who also has this issue\r\n\r\nPlease react with heart (:heart:) to the issue itself, so that we can gauge the impact.\r\n\r\n----\r\n\r\n> And in the version 5.7 the exit code is 139, so there is something fishy going on.\r\n\r\nThis exit code usually indicates a segmentation fault, meaning the problem is in PHP (or one of its extensions), and Psalm just triggers it somehow. Compiling PHP with debug symbols (or installing them with your package manager), getting the core dump and analyzing it with `gdb` may help to see what PHP was doing when the crash happened. See https://bugs.php.net/bugs-generating-backtrace.php\r\n\r\nAlternatively, you may try to disable all non-essential extensions. The extensions Psalm requires are listed here:\r\n\r\nhttps://github.com/vimeo/psalm/blob/d934875532c7eb344d6b2914c3525f116a6b0cf2/src/Psalm/Internal/CliUtils.php#L521-L536","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435963240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8555074008,"node_id":"LE_lADOBG8K985ez2APzwAAAAH97BHY","url":"https://api.github.com/repos/vimeo/psalm/issues/events/8555074008","actor":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-02-19T11:31:12Z","label":{"name":"causes crash","color":"A80503"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435966157","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1435966157","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1435966157,"node_id":"IC_kwDOBG8K985VlxrN","user":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T11:45:36Z","updated_at":"2023-02-19T11:45:36Z","body":"Another thing you may try is stopping Psalm from enabling JIT by running it with `PSALM_ALLOW_XDEBUG=1 vendor/bin/psalm`","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435966157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435966888","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1435966888","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1435966888,"node_id":"IC_kwDOBG8K985Vlx2o","user":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T11:49:14Z","updated_at":"2023-02-19T11:49:14Z","body":"Another update, this happens when I run Psalm _inside_ docker container - if I run that same with host machine it works as expected.\r\n\r\nPHP extenstions on that docker machine:\r\n```bash\r\ndev@php-fpm /app (chore(deps)/dependency-update)> php -m\r\n[PHP Modules]\r\napcu\r\nbcmath\r\nCore\r\nctype\r\ncurl\r\ndate\r\ndom\r\nfileinfo\r\nfilter\r\nftp\r\nhash\r\niconv\r\nigbinary\r\nintl\r\njson\r\nlibxml\r\nmbstring\r\nmysqlnd\r\nopenssl\r\npcre\r\nPDO\r\npdo_mysql\r\npdo_sqlite\r\nPhar\r\nposix\r\nrandom\r\nreadline\r\nReflection\r\nsession\r\nSimpleXML\r\nsodium\r\nSPL\r\nsqlite3\r\nstandard\r\ntokenizer\r\nxdebug\r\nxml\r\nxmlreader\r\nxmlwriter\r\nZend OPcache\r\nzip\r\nzlib\r\n\r\n[Zend Modules]\r\nXdebug\r\nZend OPcache\r\n\r\ndev@php-fpm /app (chore(deps)/dependency-update)>\r\n```\r\n\r\nAnd PHP extensions on my host machine:\r\n```bash\r\ntle@morko-virtualbox:~$ php -m\r\n[PHP Modules]\r\ncalendar\r\nCore\r\nctype\r\ncurl\r\ndate\r\ndom\r\nexif\r\nFFI\r\nfileinfo\r\nfilter\r\nftp\r\ngettext\r\nhash\r\niconv\r\nintl\r\njson\r\nlibxml\r\nmbstring\r\nopenssl\r\npcntl\r\npcre\r\nPDO\r\nPhar\r\nposix\r\nrandom\r\nreadline\r\nReflection\r\nsession\r\nshmop\r\nSimpleXML\r\nsockets\r\nsodium\r\nSPL\r\nstandard\r\nsysvmsg\r\nsysvsem\r\nsysvshm\r\ntokenizer\r\nxml\r\nxmlreader\r\nxmlwriter\r\nxsl\r\nZend OPcache\r\nzlib\r\n\r\n[Zend Modules]\r\nZend OPcache\r\n\r\ntle@morko-virtualbox:~$ \r\n```\r\n\r\nHmm with that\r\n\r\n> Another thing you may try is stopping Psalm from enabling JIT by running it with `PSALM_ALLOW_XDEBUG=1 vendor/bin/psalm`\r\n\r\nIt seems to work as expected\r\n```bash\r\ndev@php-fpm /app (chore(deps)/dependency-update)> PSALM_ALLOW_XDEBUG=1 ./vendor/bin/psalm src/Controller/IndexController.php\r\n\r\nInstall the opcache extension to make use of JIT on PHP 8.0+ for a 20%+ performance boost!\r\n\r\nTarget PHP version: 8.2 (inferred from current PHP version) Enabled extensions: pdo.\r\nScanning files...\r\nAnalyzing files...\r\n\r\nâ–‘\r\n\r\nTo whom it may concern: Psalm cannot detect unused classes, methods and properties\r\nwhen analyzing individual files and folders. Run on the full project to enable\r\ncomplete unused code detection.\r\n------------------------------\r\n                              \r\n       No errors found!       \r\n                              \r\n------------------------------\r\n\r\nChecks took 9.89 seconds and used 318.176MB of memory\r\nPsalm was able to infer types for 100% of the codebase\r\ndev@php-fpm /app (chore(deps)/dependency-update)> \r\n```\r\n\r\nWhat might be the cause that this worked without that `PSALM_ALLOW_XDEBUG` on version `5.6` and with `5.7`  it just crashes?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435966888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435971780","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1435971780","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1435971780,"node_id":"IC_kwDOBG8K985VlzDE","user":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T12:09:25Z","updated_at":"2023-02-19T12:09:25Z","body":"Try commenting out these lines:\r\n\r\nhttps://github.com/vimeo/psalm/blob/d934875532c7eb344d6b2914c3525f116a6b0cf2/src/Psalm/Internal/Fork/PsalmRestarter.php#L98-L100\r\n\r\nand running *without* `PSALM_ALLOW_XDEBUG=1`","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435971780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435972286","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1435972286","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1435972286,"node_id":"IC_kwDOBG8K985VlzK-","user":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T12:11:59Z","updated_at":"2023-02-19T12:11:59Z","body":"> Try commenting out these lines:\r\n> \r\n> https://github.com/vimeo/psalm/blob/d934875532c7eb344d6b2914c3525f116a6b0cf2/src/Psalm/Internal/Fork/PsalmRestarter.php#L98-L100\r\n> \r\n> and running _without_ `PSALM_ALLOW_XDEBUG=1`\r\n\r\nYeah it works when I commented out those lines.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435972286/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435972605","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1435972605","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1435972605,"node_id":"IC_kwDOBG8K985VlzP9","user":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T12:13:35Z","updated_at":"2023-02-19T12:13:35Z","body":"@danog any ideas?","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435972605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8555130819,"node_id":"MEE_lADOBG8K985ez2APzwAAAAH97O_D","url":"https://api.github.com/repos/vimeo/psalm/issues/events/8555130819","actor":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-02-19T12:13:35Z","performed_via_github_app":null},{"id":8555130821,"node_id":"SE_lADOBG8K985ez2APzwAAAAH97O_F","url":"https://api.github.com/repos/vimeo/psalm/issues/events/8555130821","actor":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-02-19T12:13:35Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435972882","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1435972882","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1435972882,"node_id":"IC_kwDOBG8K985VlzUS","user":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T12:14:52Z","updated_at":"2023-02-19T12:16:05Z","body":"If you find a way to reproduce the issue consistently with a subset of your code (or link to it if it's FOSS), please open an issue @ https://github.com/php/php-src/issues, or otherwise send the code that triggers the segfault here (or try making a https://psalm.dev reproducer) so we can open an issue with proper gdb backtraces ourselves.\r\n\r\nThis would really be of great help to the PHP developers :)","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435972882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435973002","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1435973002","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1435973002,"node_id":"IC_kwDOBG8K985VlzWK","user":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T12:15:29Z","updated_at":"2023-02-19T12:15:29Z","body":"And it looks like that following cases works:\r\n \r\n```\r\n '-dopcache.enable_cli=true', \r\n '-dopcache.jit_buffer_size=512M', \r\n// '-dopcache.jit=1205', \r\n```\r\n\r\n```\r\n '-dopcache.enable_cli=true', \r\n// '-dopcache.jit_buffer_size=512M', \r\n '-dopcache.jit=1205', \r\n```\r\n\r\n```\r\n// '-dopcache.enable_cli=true', \r\n '-dopcache.jit_buffer_size=512M', \r\n '-dopcache.jit=1205', \r\n```\r\n\r\nSo if all of those three options are set then this happen.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435973002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435973510","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1435973510","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1435973510,"node_id":"IC_kwDOBG8K985VlzeG","user":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T12:17:29Z","updated_at":"2023-02-19T12:17:29Z","body":"> // '-dopcache.jit=1205', \r\n\r\nThis one is of particular interest. Disabling any of the others just disables the JIT.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435973510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435989533","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1435989533","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1435989533,"node_id":"IC_kwDOBG8K985Vl3Yd","user":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T13:27:55Z","updated_at":"2023-02-19T13:40:29Z","body":"@tarlepp Could you try reproducing the crash on psalm.dev, or at least send the contents of `src/Controller/IndexController.php`, if you can?\r\n\r\nEdit: nevermind psalm.dev doesn't have JIT enabled, can you just try creating a Dockerfile that reproduces the issue?","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435989533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8555234854,"node_id":"MEE_lADOBG8K985ez2APzwAAAAH97oYm","url":"https://api.github.com/repos/vimeo/psalm/issues/events/8555234854","actor":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-02-19T13:27:55Z","performed_via_github_app":null},{"id":8555234855,"node_id":"SE_lADOBG8K985ez2APzwAAAAH97oYn","url":"https://api.github.com/repos/vimeo/psalm/issues/events/8555234855","actor":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-02-19T13:27:55Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435992519","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1435992519","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1435992519,"node_id":"IC_kwDOBG8K985Vl4HH","user":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T13:40:45Z","updated_at":"2023-02-19T13:40:45Z","body":"> @tarlepp Could you try reproducing the crash on psalm.dev, or at least send the contents of `src/Controller/IndexController.php`, if you can?\r\n\r\nIt doesn't matter which file I try to analyze with Psalm, but the contents of that `IndexController.php` is just:\r\n```php\r\n<?php\r\ndeclare(strict_types = 1);\r\n\r\nnamespace App\\Controller;\r\n\r\nuse Symfony\\Component\\HttpFoundation\\JsonResponse;\r\nuse Symfony\\Component\\HttpFoundation\\Request;\r\nuse Symfony\\Component\\HttpKernel\\Attribute\\AsController;\r\nuse Symfony\\Component\\Routing\\Annotation\\Route;\r\n\r\n#[AsController]\r\nclass IndexController\r\n{\r\n    #[Route(\r\n        path: '/',\r\n        methods: [Request::METHOD_GET],\r\n    )]\r\n    public function __invoke(): JsonResponse\r\n    {\r\n        return new JsonResponse();\r\n    }\r\n}\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435992519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8555253065,"node_id":"MEE_lADOBG8K985ez2APzwAAAAH97s1J","url":"https://api.github.com/repos/vimeo/psalm/issues/events/8555253065","actor":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-02-19T13:40:46Z","performed_via_github_app":null},{"id":8555253067,"node_id":"SE_lADOBG8K985ez2APzwAAAAH97s1L","url":"https://api.github.com/repos/vimeo/psalm/issues/events/8555253067","actor":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-02-19T13:40:46Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435997222","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1435997222","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1435997222,"node_id":"IC_kwDOBG8K985Vl5Qm","user":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T14:01:28Z","updated_at":"2023-02-19T14:01:28Z","body":"Could you try running with --debug-by-line, and what version of PHP are you using?\r\nCould you try sending the dockerfile?","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435997222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435997914","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1435997914","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1435997914,"node_id":"IC_kwDOBG8K985Vl5ba","user":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T14:03:52Z","updated_at":"2023-02-19T14:04:04Z","body":"> Could you try running with --debug-by-line\r\n\r\nThat didn't change the results\r\n\r\n> and what version of PHP are you using?\r\n\r\n8.2.3\r\n\r\n> Could you try sending the dockerfile?\r\n\r\nI created example repository where this can reproduced - https://github.com/tarlepp/psalm-issue\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435997914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435999417","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1435999417","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1435999417,"node_id":"IC_kwDOBG8K985Vl5y5","user":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T14:08:40Z","updated_at":"2023-02-19T14:08:40Z","body":"Does JIT work for you at all? I.e. what does the following command produce?\r\n\r\n```console\r\nphp -dopcache.enable_cli=true -dopcache.jit_buffer_size=512M -dopcache.jit=1205 -r 'var_dump(opcache_get_status()[\"jit\"]); '\r\n```","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1435999417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1436000034","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1436000034","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1436000034,"node_id":"IC_kwDOBG8K985Vl58i","user":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T14:11:23Z","updated_at":"2023-02-19T14:11:23Z","body":"> Does JIT work for you at all? I.e. what does the following command produce?\r\n> \r\n> ```\r\n> php -dopcache.enable_cli=true -dopcache.jit_buffer_size=512M -dopcache.jit=1205 -r 'var_dump(opcache_get_status()[\"jit\"]); '\r\n> ```\r\n\r\nIf I run that command in that example repository I get following:\r\n```\r\nroot@071981653ed6:/app# php -dopcache.enable_cli=true -dopcache.jit_buffer_size=512M -dopcache.jit=1205 -r 'var_dump(opcache_get_status()[\"jit\"]); '\r\n\r\nWarning: JIT is incompatible with third party extensions that override zend_execute_ex(). JIT disabled. in Unknown on line 0\r\nXdebug: [Step Debug] Could not connect to debugging client. Tried: 127.0.0.1:9003 (through xdebug.client_host/xdebug.client_port).\r\nCommand line code:1:\r\narray(7) {\r\n  'enabled' =>\r\n  bool(false)\r\n  'on' =>\r\n  bool(false)\r\n  'kind' =>\r\n  int(0)\r\n  'opt_level' =>\r\n  int(5)\r\n  'opt_flags' =>\r\n  int(6)\r\n  'buffer_size' =>\r\n  int(0)\r\n  'buffer_free' =>\r\n  int(0)\r\n}\r\nroot@071981653ed6:/app# \r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1436000034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1436000270","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1436000270","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1436000270,"node_id":"IC_kwDOBG8K985Vl6AO","user":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T14:12:33Z","updated_at":"2023-02-19T14:12:33Z","body":"And what if you disable Xdebug in your php.ini?","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1436000270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1436000697","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1436000697","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1436000697,"node_id":"IC_kwDOBG8K985Vl6G5","user":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T14:14:24Z","updated_at":"2023-02-19T14:15:03Z","body":"> And what if you disable Xdebug in your php.ini?\r\n\r\nIf Xdebug is disabled Psalm runs as expected. That is quite easy to test with that example repository, just edit that `php-dev.ini` file and build container again.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1436000697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1436001972","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1436001972","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1436001972,"node_id":"IC_kwDOBG8K985Vl6a0","user":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T14:19:52Z","updated_at":"2023-02-19T14:19:52Z","body":"No, I mean `php -dopcache.enable_cli=true -dopcache.jit_buffer_size=512M -dopcache.jit=1205 -r 'var_dump(opcache_get_status()[\"jit\"]); '`, but with Xdebug disabled.\r\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1436001972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1436002294","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1436002294","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1436002294,"node_id":"IC_kwDOBG8K985Vl6f2","user":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T14:21:21Z","updated_at":"2023-02-19T14:21:21Z","body":"> No, I mean `php -dopcache.enable_cli=true -dopcache.jit_buffer_size=512M -dopcache.jit=1205 -r 'var_dump(opcache_get_status()[\"jit\"]); '`, but with Xdebug disabled.\r\n\r\nOh, sorry - that output is:\r\n```\r\nroot@2cfd3c9faf68:/app# php -dopcache.enable_cli=true -dopcache.jit_buffer_size=512M -dopcache.jit=1205 -r 'var_dump(opcache_get_status()[\"jit\"]); '\r\n\r\nWarning: JIT is incompatible with third party extensions that override zend_execute_ex(). JIT disabled. in Unknown on line 0\r\nCommand line code:1:\r\narray(7) {\r\n  'enabled' =>\r\n  bool(false)\r\n  'on' =>\r\n  bool(false)\r\n  'kind' =>\r\n  int(0)\r\n  'opt_level' =>\r\n  int(5)\r\n  'opt_flags' =>\r\n  int(6)\r\n  'buffer_size' =>\r\n  int(0)\r\n  'buffer_free' =>\r\n  int(0)\r\n}\r\nroot@2cfd3c9faf68:/app#\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1436002294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tarlepp","id":595561,"node_id":"MDQ6VXNlcjU5NTU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595561?v=4","gravatar_id":"","url":"https://api.github.com/users/tarlepp","html_url":"https://github.com/tarlepp","followers_url":"https://api.github.com/users/tarlepp/followers","following_url":"https://api.github.com/users/tarlepp/following{/other_user}","gists_url":"https://api.github.com/users/tarlepp/gists{/gist_id}","starred_url":"https://api.github.com/users/tarlepp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarlepp/subscriptions","organizations_url":"https://api.github.com/users/tarlepp/orgs","repos_url":"https://api.github.com/users/tarlepp/repos","events_url":"https://api.github.com/users/tarlepp/events{/privacy}","received_events_url":"https://api.github.com/users/tarlepp/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1436006001","html_url":"https://github.com/vimeo/psalm/issues/9340#issuecomment-1436006001","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/9340","id":1436006001,"node_id":"IC_kwDOBG8K985Vl7Zx","user":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T14:37:54Z","updated_at":"2023-02-19T14:37:54Z","body":"Strangely enough, it doesn't seem to be related to xdebug, but just to opcache.\r\n\r\nRunnning psalm with this php.ini causes a segfault:\r\n```\r\nzend_extension=opcache.so\r\nopcache.optimization_level=\"0\"\r\nopcache.enable_cli=1\r\nopcache.jit_buffer_size=512M\r\nopcache.jit=1205\r\n```\r\n\r\nCommand:\r\n```\r\nphp -n -c php.ini ./psalm --no-cache\r\n```\r\n\r\nXdebug is disabled.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/1436006001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T14:42:23Z","updated_at":"2023-02-19T14:42:23Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/php/php-src/issues/10626","repository_url":"https://api.github.com/repos/php/php-src","labels_url":"https://api.github.com/repos/php/php-src/issues/10626/labels{/name}","comments_url":"https://api.github.com/repos/php/php-src/issues/10626/comments","events_url":"https://api.github.com/repos/php/php-src/issues/10626/events","html_url":"https://github.com/php/php-src/issues/10626","id":1590713618,"node_id":"I_kwDOAB0Los5e0F0S","number":10626,"title":"Segfault when using opcache and JIT","user":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":148912283,"node_id":"MDU6TGFiZWwxNDg5MTIyODM=","url":"https://api.github.com/repos/php/php-src/labels/Bug","name":"Bug","color":"E99695","default":false,"description":""},{"id":3035722709,"node_id":"MDU6TGFiZWwzMDM1NzIyNzA5","url":"https://api.github.com/repos/php/php-src/labels/Category:%20JIT","name":"Category: JIT","color":"5319E7","default":false,"description":""},{"id":3611416941,"node_id":"LA_kwDOAB0Los7XQdlt","url":"https://api.github.com/repos/php/php-src/labels/Status:%20Needs%20Triage","name":"Status: Needs Triage","color":"D93F0B","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dstogov","id":2510034,"node_id":"MDQ6VXNlcjI1MTAwMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/2510034?v=4","gravatar_id":"","url":"https://api.github.com/users/dstogov","html_url":"https://github.com/dstogov","followers_url":"https://api.github.com/users/dstogov/followers","following_url":"https://api.github.com/users/dstogov/following{/other_user}","gists_url":"https://api.github.com/users/dstogov/gists{/gist_id}","starred_url":"https://api.github.com/users/dstogov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstogov/subscriptions","organizations_url":"https://api.github.com/users/dstogov/orgs","repos_url":"https://api.github.com/users/dstogov/repos","events_url":"https://api.github.com/users/dstogov/events{/privacy}","received_events_url":"https://api.github.com/users/dstogov/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"dstogov","id":2510034,"node_id":"MDQ6VXNlcjI1MTAwMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/2510034?v=4","gravatar_id":"","url":"https://api.github.com/users/dstogov","html_url":"https://github.com/dstogov","followers_url":"https://api.github.com/users/dstogov/followers","following_url":"https://api.github.com/users/dstogov/following{/other_user}","gists_url":"https://api.github.com/users/dstogov/gists{/gist_id}","starred_url":"https://api.github.com/users/dstogov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstogov/subscriptions","organizations_url":"https://api.github.com/users/dstogov/orgs","repos_url":"https://api.github.com/users/dstogov/repos","events_url":"https://api.github.com/users/dstogov/events{/privacy}","received_events_url":"https://api.github.com/users/dstogov/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":16,"created_at":"2023-02-19T14:42:23Z","updated_at":"2024-02-28T16:28:49Z","closed_at":"2023-02-20T17:46:26Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":1903522,"node_id":"MDEwOlJlcG9zaXRvcnkxOTAzNTIy","name":"php-src","full_name":"php/php-src","private":false,"owner":{"login":"php","id":25158,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI1MTU4","avatar_url":"https://avatars.githubusercontent.com/u/25158?v=4","gravatar_id":"","url":"https://api.github.com/users/php","html_url":"https://github.com/php","followers_url":"https://api.github.com/users/php/followers","following_url":"https://api.github.com/users/php/following{/other_user}","gists_url":"https://api.github.com/users/php/gists{/gist_id}","starred_url":"https://api.github.com/users/php/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/php/subscriptions","organizations_url":"https://api.github.com/users/php/orgs","repos_url":"https://api.github.com/users/php/repos","events_url":"https://api.github.com/users/php/events{/privacy}","received_events_url":"https://api.github.com/users/php/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/php/php-src","description":"The PHP Interpreter","fork":false,"url":"https://api.github.com/repos/php/php-src","forks_url":"https://api.github.com/repos/php/php-src/forks","keys_url":"https://api.github.com/repos/php/php-src/keys{/key_id}","collaborators_url":"https://api.github.com/repos/php/php-src/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/php/php-src/teams","hooks_url":"https://api.github.com/repos/php/php-src/hooks","issue_events_url":"https://api.github.com/repos/php/php-src/issues/events{/number}","events_url":"https://api.github.com/repos/php/php-src/events","assignees_url":"https://api.github.com/repos/php/php-src/assignees{/user}","branches_url":"https://api.github.com/repos/php/php-src/branches{/branch}","tags_url":"https://api.github.com/repos/php/php-src/tags","blobs_url":"https://api.github.com/repos/php/php-src/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/php/php-src/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/php/php-src/git/refs{/sha}","trees_url":"https://api.github.com/repos/php/php-src/git/trees{/sha}","statuses_url":"https://api.github.com/repos/php/php-src/statuses/{sha}","languages_url":"https://api.github.com/repos/php/php-src/languages","stargazers_url":"https://api.github.com/repos/php/php-src/stargazers","contributors_url":"https://api.github.com/repos/php/php-src/contributors","subscribers_url":"https://api.github.com/repos/php/php-src/subscribers","subscription_url":"https://api.github.com/repos/php/php-src/subscription","commits_url":"https://api.github.com/repos/php/php-src/commits{/sha}","git_commits_url":"https://api.github.com/repos/php/php-src/git/commits{/sha}","comments_url":"https://api.github.com/repos/php/php-src/comments{/number}","issue_comment_url":"https://api.github.com/repos/php/php-src/issues/comments{/number}","contents_url":"https://api.github.com/repos/php/php-src/contents/{+path}","compare_url":"https://api.github.com/repos/php/php-src/compare/{base}...{head}","merges_url":"https://api.github.com/repos/php/php-src/merges","archive_url":"https://api.github.com/repos/php/php-src/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/php/php-src/downloads","issues_url":"https://api.github.com/repos/php/php-src/issues{/number}","pulls_url":"https://api.github.com/repos/php/php-src/pulls{/number}","milestones_url":"https://api.github.com/repos/php/php-src/milestones{/number}","notifications_url":"https://api.github.com/repos/php/php-src/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/php/php-src/labels{/name}","releases_url":"https://api.github.com/repos/php/php-src/releases{/id}","deployments_url":"https://api.github.com/repos/php/php-src/deployments","created_at":"2011-06-16T01:52:25Z","updated_at":"2025-11-10T12:47:26Z","pushed_at":"2025-11-09T21:57:25Z","git_url":"git://github.com/php/php-src.git","ssh_url":"git@github.com:php/php-src.git","clone_url":"https://github.com/php/php-src.git","svn_url":"https://github.com/php/php-src","homepage":"https://www.php.net","size":615309,"stargazers_count":39605,"watchers_count":39605,"language":"C","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":false,"forks_count":7960,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1603,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":7960,"open_issues":1603,"watchers":39605,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Description\r\n\r\nRunnning https://github.com/vimeo/psalm with this php.ini causes a segfault (ref vimeo/psalm#9340):\r\n\r\n```\r\nzend_extension=opcache.so\r\nopcache.optimization_level=\"0\"\r\nopcache.enable_cli=1\r\nopcache.jit_buffer_size=512M\r\nopcache.jit=1205\r\n```\r\n\r\nCommand:\r\n```\r\ngit clone https://github.com/vimeo/psalm\r\ncd psalm\r\ngit checkout 5.7.0\r\ncomposer i\r\nphp -n -c php.ini ./psalm --no-cache\r\n```\r\n\r\ngdb backtrace:\r\n```\r\n(gdb) backtrace\r\n#0  0x00005555558c4a74 in zend_parse_arg (arg_num=4106310752, arg=0x7fffffffa0e0, va=0x55555642a70c, spec=0x7fffffffa278, flags=-23928) at /usr/src/debug/php/php-8.2.3/Zend/zend_API.c:989\r\n#1  0x0000000000000000 in ?? ()\r\n```\r\n\r\ngdb zbacktrace:\r\n```\r\n(gdb) zbacktrace\r\n[0x7ffff4c15400] DOMDocument->getElementsByTagNameNS(\"https://getpsalm.org/schema/config\", unknown type 103) [internal function]\r\n[0x7ffff4c151a0] Psalm\\Config->processConfigDeprecations(object[0x7ffff4c151f0], object[0x7ffff4c15200], \"<?xml version=\"1.0\"?>\\12<psalm\\12    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instanc\r\ne\"\\12    xmlns=\"https://getpsalm.org/schema/config\"\\12    name=\"Psalm for Psalm\"\\12    errorLevel=\"1\"\\12    throwExceptionOnError=\"0\"\\12    findUnusedCode=\"true\"\\12    ensureArrayStrin...\", \"/ho\r\nme/daniil/repos/psalm/psalm.xml.dist\") /home/daniil/repos/psalm/src/Psalm/Config.php:1003\r\n[0x7ffff4c135d0] Psalm\\Config->fromXmlAndPaths(\"/home/daniil/repos/psalm/\", \"<?xml version=\"1.0\"?>\\12<psalm\\12    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\\12    xmlns=\"https://getps\r\nalm.org/schema/config\"\\12    name=\"Psalm for Psalm\"\\12    errorLevel=\"1\"\\12    throwExceptionOnError=\"0\"\\12    findUnusedCode=\"true\"\\12    ensureArrayStrin...\", \"/home/daniil/repos/psalm/\", \"/ho\r\nme/daniil/repos/psalm/psalm.xml.dist\") /home/daniil/repos/psalm/src/Psalm/Config.php:1033\r\n[0x7ffff4c13500] Psalm\\Config->loadFromXML(\"/home/daniil/repos/psalm/\", \"<?xml version=\"1.0\"?>\\12<psalm\\12    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\\12    xmlns=\"https://getpsalm.\r\norg/schema/config\"\\12    name=\"Psalm for Psalm\"\\12    errorLevel=\"1\"\\12    throwExceptionOnError=\"0\"\\12    findUnusedCode=\"true\"\\12    ensureArrayStrin...\", \"/home/daniil/repos/psalm/\", \"/home/d\r\naniil/repos/psalm/psalm.xml.dist\") /home/daniil/repos/psalm/src/Psalm/Config.php:823\r\n[0x7ffff4c132b0] Psalm\\Config->loadFromXMLFile(\"/home/daniil/repos/psalm/psalm.xml.dist\", \"/home/daniil/repos/psalm/\") /home/daniil/repos/psalm/src/Psalm/Config.php:785\r\n[0x7ffff4c131c0] Psalm\\Config->getConfigForPath(\"/home/daniil/repos/psalm/\", \"/home/daniil/repos/psalm/\") /home/daniil/repos/psalm/src/Psalm/Config.php:734\r\n[0x7ffff4c12fa0] Psalm\\Internal\\CliUtils->initializeConfig(NULL, \"/home/daniil/repos/psalm/\", \"console\", object[0x7ffff4c13020], false)\r\n/home/daniil/repos/psalm/src/Psalm/Internal/CliUtils.php:348\r\n[0x7ffff4c12df0] Psalm\\Internal\\Cli\\Psalm->loadConfig(NULL, \"/home/daniil/repos/psalm/\", \"console\", object[0x7ffff4c12e70], false, array(1)[0x7ffff4c12e90])\r\n/home/daniil/repos/psalm/src/Psalm/Internal/Cli/Psalm.php:559\r\n[0x7ffff4c12c30] Psalm\\Internal\\Cli\\Psalm->initConfig(\"/home/daniil/repos/psalm/\", array(1)[0x7ffff4c12c90], \"vendor\", object[0x7ffff4c12cb0], NULL, \"console\", false, array(1)[0x7ffff4c12cf0])\r\n/home/daniil/repos/psalm/src/Psalm/Internal/Cli/Psalm.php:1020\r\n[0x7ffff4c120a0] Psalm\\Internal\\Cli\\Psalm->run(array(2)[0x7ffff4c120f0]) /home/daniil/repos/psalm/src/Psalm/Internal/Cli/Psalm.php:238\r\n[0x7ffff4c12020] (main) /home/daniil/repos/psalm/psalm:9\r\n```\r\n\r\n### PHP Version\r\n\r\nPHP 8.2.3\r\n\r\n### Operating System\r\n\r\nArch linux","reactions":{"url":"https://api.github.com/repos/php/php-src/issues/10626/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/php/php-src/issues/10626/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]