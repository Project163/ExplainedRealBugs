{"url":"https://api.github.com/repos/vimeo/psalm/issues/2247","repository_url":"https://api.github.com/repos/vimeo/psalm","labels_url":"https://api.github.com/repos/vimeo/psalm/issues/2247/labels{/name}","comments_url":"https://api.github.com/repos/vimeo/psalm/issues/2247/comments","events_url":"https://api.github.com/repos/vimeo/psalm/issues/2247/events","html_url":"https://github.com/vimeo/psalm/issues/2247","id":508989434,"node_id":"MDU6SXNzdWU1MDg5ODk0MzQ=","number":2247,"title":"Trying psalm for the first time, got multiple errors","user":{"login":"enumag","id":539462,"node_id":"MDQ6VXNlcjUzOTQ2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/539462?v=4","gravatar_id":"","url":"https://api.github.com/users/enumag","html_url":"https://github.com/enumag","followers_url":"https://api.github.com/users/enumag/followers","following_url":"https://api.github.com/users/enumag/following{/other_user}","gists_url":"https://api.github.com/users/enumag/gists{/gist_id}","starred_url":"https://api.github.com/users/enumag/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enumag/subscriptions","organizations_url":"https://api.github.com/users/enumag/orgs","repos_url":"https://api.github.com/users/enumag/repos","events_url":"https://api.github.com/users/enumag/events{/privacy}","received_events_url":"https://api.github.com/users/enumag/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":486061586,"node_id":"MDU6TGFiZWw0ODYwNjE1ODY=","url":"https://api.github.com/repos/vimeo/psalm/labels/bug","name":"bug","color":"ee0701","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":16,"created_at":"2019-10-18T10:18:52Z","updated_at":"2019-10-30T09:39:18Z","closed_at":"2019-10-18T15:01:21Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I used these commands:\r\n\r\n```\r\ncomposer require --dev vimeo/psalm\r\nvendor/bin/psalm --init src 1\r\nvendor/bin/psalm\r\n```\r\n\r\nOutput of the last command:\r\n\r\n```\r\nScanning files...\r\nAnalyzing files...\r\n\r\nPHP Notice:  Undefined offset: 1 in /<project-path>/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php on line 1001\r\n\r\nNotice: Undefined offset: 1 in /<project-path>/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php on line 1001\r\nPHP Notice:  Undefined offset: 1 in /<project-path>/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php on line 1001\r\n\r\nNotice: Undefined offset: 1 in /<project-path>/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php on line 1001\r\nPHP Notice:  Undefined offset: 1 in /<project-path>/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/FunctionLike/ReturnTypeCollector.php on line 242\r\nPHP Fatal error:  Uncaught Error: __clone method called on non-object in /<project-path>/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/FunctionLike/ReturnTypeCollector.php:257\r\nStack trace:\r\n#0 /<project-path>/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/FunctionLike/ReturnTypeAnalyzer.php(133): Psalm\\Internal\\Analyzer\\FunctionLike\\ReturnTypeCollector::getReturnTypes(Array, Array, false, false, true)\r\n#1 /<project-path>/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/ClassAnalyzer.php(1752): Psalm\\Internal\\Analyzer\\FunctionLike\\ReturnTypeAnalyzer::verifyReturnType(Object(PhpParser\\Node\\Stmt\\ClassMethod), Object(Psalm\\Internal\\Analyzer\\ClassAnalyzer), Object(Psalm\\Internal\\Analyzer\\MethodAnalyzer), Object(Psalm\\Type\\Union), 'App\\\\Library\\\\Ds\\\\...', Object(Psalm\\CodeLocation), Array)\r\n#2 /<project-path>/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/ClassAnalyzer.php(1644): Psalm\\Internal\\Analyzer\\ClassAnalyzer::analyzeClassMethodReturnType(Object(PhpP in /<project-path>/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/FunctionLike/ReturnTypeCollector.php on line 257\r\n\r\nNotice: Undefined offset: 1 in /<project-path>/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/FunctionLike/ReturnTypeCollector.php on line 242\r\n\r\nFatal error: Uncaught Error: __clone method called on non-object in /<project-path>/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/FunctionLike/ReturnTypeCollector.php:257\r\nStack trace:\r\n#0 /<project-path>/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/FunctionLike/ReturnTypeAnalyzer.php(133): Psalm\\Internal\\Analyzer\\FunctionLike\\ReturnTypeCollector::getReturnTypes(Array, Array, false, false, true)\r\n#1 /<project-path>/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/ClassAnalyzer.php(1752): Psalm\\Internal\\Analyzer\\FunctionLike\\ReturnTypeAnalyzer::verifyReturnType(Object(PhpParser\\Node\\Stmt\\ClassMethod), Object(Psalm\\Internal\\Analyzer\\ClassAnalyzer), Object(Psalm\\Internal\\Analyzer\\MethodAnalyzer), Object(Psalm\\Type\\Union), 'App\\\\Library\\\\Ds\\\\...', Object(Psalm\\CodeLocation), Array)\r\n#2 /<project-path>/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/ClassAnalyzer.php(1644): Psalm\\Internal\\Analyzer\\ClassAnalyzer::analyzeClassMethodReturnType(Object(PhpP in /<project-path>/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/FunctionLike/ReturnTypeCollector.php on line 257\r\n```\r\n\r\nThis seems to be an internal error of Psalm. Can you fix this just from this report?\r\n\r\nAlso it's worth mentioning that each error seems to be printed twice to the output. You might want to review your error handling logic and only print them once.","closed_by":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/2247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vimeo/psalm/issues/2247/timeline","performed_via_github_app":null,"state_reason":"completed"}