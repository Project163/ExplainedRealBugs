{"url":"https://api.github.com/repos/vimeo/psalm/issues/1531","repository_url":"https://api.github.com/repos/vimeo/psalm","labels_url":"https://api.github.com/repos/vimeo/psalm/issues/1531/labels{/name}","comments_url":"https://api.github.com/repos/vimeo/psalm/issues/1531/comments","events_url":"https://api.github.com/repos/vimeo/psalm/issues/1531/events","html_url":"https://github.com/vimeo/psalm/issues/1531","id":428904589,"node_id":"MDU6SXNzdWU0Mjg5MDQ1ODk=","number":1531,"title":"hrtime(true) incorrectly reports as an array","user":{"login":"Firehed","id":354842,"node_id":"MDQ6VXNlcjM1NDg0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/354842?v=4","gravatar_id":"","url":"https://api.github.com/users/Firehed","html_url":"https://github.com/Firehed","followers_url":"https://api.github.com/users/Firehed/followers","following_url":"https://api.github.com/users/Firehed/following{/other_user}","gists_url":"https://api.github.com/users/Firehed/gists{/gist_id}","starred_url":"https://api.github.com/users/Firehed/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Firehed/subscriptions","organizations_url":"https://api.github.com/users/Firehed/orgs","repos_url":"https://api.github.com/users/Firehed/repos","events_url":"https://api.github.com/users/Firehed/events{/privacy}","received_events_url":"https://api.github.com/users/Firehed/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-04-03T18:10:55Z","updated_at":"2019-04-03T21:08:42Z","closed_at":"2019-04-03T21:08:42Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Reproduce code:\r\n\r\n```\r\n$ cat src/hrtime.php\r\n<?php\r\n$start = hrtime(true);\r\n$duration = hrtime(true) - $start;\r\n\r\n$ vendor/bin/psalm src/hrtime.php\r\nScanning files...\r\nAnalyzing files...\r\n\r\nERROR: PossiblyInvalidOperand - src/hrtime.php:3:13 - Cannot add an array to a non-array int\r\n$duration = hrtime(true) - $start;\r\n\r\n\r\nERROR: PossiblyInvalidOperand - src/hrtime.php:3:28 - Cannot add an array to a non-array int\r\n$duration = hrtime(true) - $start;\r\n\r\n\r\n------------------------------\r\n2 errors found\r\n------------------------------\r\n\r\nChecks took 0.38 seconds and used 48.973MB of memory\r\nPsalm was able to infer types for 87.7863% of the codebase\r\n\r\n$ vendor/bin/psalm --version\r\nPsalm dev-master@9447cd2d98ba943ea9b47e5d1777865608794f70\r\n```\r\n\r\nLike `microtime(true)`, `hrtime(true)` returns a number. It appears to be always an int but I don't know if that's actually part of the spec (the docs suggest it's 32/64-bit platform specific).\r\n\r\n\r\n~Related: while I was looking at creating a patch to fix this, it looks like the return type of `microtime(false)` and `microtime()` is erroneously defined as `string`, when in fact it's `[int, int]`.~ never mind, I'm wrong.","closed_by":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/1531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vimeo/psalm/issues/1531/timeline","performed_via_github_app":null,"state_reason":"completed"}