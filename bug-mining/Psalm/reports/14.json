{"url":"https://api.github.com/repos/vimeo/psalm/issues/1526","repository_url":"https://api.github.com/repos/vimeo/psalm","labels_url":"https://api.github.com/repos/vimeo/psalm/issues/1526/labels{/name}","comments_url":"https://api.github.com/repos/vimeo/psalm/issues/1526/comments","events_url":"https://api.github.com/repos/vimeo/psalm/issues/1526/events","html_url":"https://github.com/vimeo/psalm/issues/1526","id":428364780,"node_id":"MDU6SXNzdWU0MjgzNjQ3ODA=","number":1526,"title":"PHP Fatal error:  Uncaught InvalidArgumentException: Could not get file storage for (file)","user":{"login":"Firehed","id":354842,"node_id":"MDQ6VXNlcjM1NDg0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/354842?v=4","gravatar_id":"","url":"https://api.github.com/users/Firehed","html_url":"https://github.com/Firehed","followers_url":"https://api.github.com/users/Firehed/followers","following_url":"https://api.github.com/users/Firehed/following{/other_user}","gists_url":"https://api.github.com/users/Firehed/gists{/gist_id}","starred_url":"https://api.github.com/users/Firehed/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Firehed/subscriptions","organizations_url":"https://api.github.com/users/Firehed/orgs","repos_url":"https://api.github.com/users/Firehed/repos","events_url":"https://api.github.com/users/Firehed/events{/privacy}","received_events_url":"https://api.github.com/users/Firehed/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":486061586,"node_id":"MDU6TGFiZWw0ODYwNjE1ODY=","url":"https://api.github.com/repos/vimeo/psalm/labels/bug","name":"bug","color":"ee0701","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2019-04-02T17:59:02Z","updated_at":"2019-04-03T22:01:15Z","closed_at":"2019-04-03T21:41:37Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I'm trying to get Psalm set up for the first time on my codebase (PHPStan and PHPCS already happily run), and I'm getting a crash. This is using the default config with `psalm --init`.\r\n\r\nPsalm 3.2.5@d8411dc510f948dea463953d87a71d65e12fade8\r\n\r\n`--debug-by-line` output:\r\n```\r\n...\r\nAnalyzing /Users/firehed/dev/github/parli/normalizer/src/Endpoints/Meta/All.php\r\n/Users/firehed/dev/github/parli/normalizer/src/Endpoints/Meta/All.php:2\r\n/Users/firehed/dev/github/parli/normalizer/vendor/firehed/api/src/Traits/Input/NoOptional.php:11\r\n...\r\n/Users/firehed/dev/github/parli/normalizer/src/Endpoints/Meta/All.php:55\r\n/Users/firehed/dev/github/parli/normalizer/src/Endpoints/Meta/All.php:57\r\n  checking __endpoint_list__.php\r\nPHP Fatal error:  Uncaught InvalidArgumentException: Could not get file storage for /users/firehed/dev/github/parli/normalizer/__endpoint_list__.php in /Users/firehed/dev/github/parli/normalizer/vendor/vimeo/psalm/src/Psalm/Internal/Provider/FileStorageProvider.php:47\r\nStack trace:\r\n#0 /Users/firehed/dev/github/parli/normalizer/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/FileAnalyzer.php(123): Psalm\\Internal\\Provider\\FileStorageProvider->get('/users/firehed/...')\r\n#1 /Users/firehed/dev/github/parli/normalizer/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/Expression/IncludeAnalyzer.php(121): Psalm\\Internal\\Analyzer\\FileAnalyzer->analyze(Object(Psalm\\Context), false, NULL)\r\n#2 /Users/firehed/dev/github/parli/normalizer/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/ExpressionAnalyzer.php(526): Psalm\\Internal\\Analyzer\\Statements\\Expression\\IncludeAnalyzer::analyze(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(PhpParser\\Node\\Expr\\Include_), Object(Psalm\\Context), NULL)\r\n#3 /Users/firehed/dev/githu in /Users/firehed/dev/github/parli/normalizer/vendor/vimeo/psalm/src/Psalm/Internal/Provider/FileStorageProvider.php on line 47\r\n```\r\n\r\nThe source of the file causing a crash:\r\n```php\r\n    protected function getEndpoints()\r\n    {\r\n        $listFile = '__endpoint_list__.php';\r\n        if (!file_exists($listFile)) {\r\n            throw new RuntimeException('Endpoint list not found');\r\n        }\r\n        $data = include $listFile; // <-- this line\r\n```\r\n\r\nThe file being included is auto-generated, and simply returns an array (like many config definition files). The file does exist and works fine, but is not something Composer's autoloader is aware of.","closed_by":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/1526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vimeo/psalm/issues/1526/timeline","performed_via_github_app":null,"state_reason":"completed"}