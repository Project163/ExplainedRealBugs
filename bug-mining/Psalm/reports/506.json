{"url":"https://api.github.com/repos/vimeo/psalm/issues/2775","repository_url":"https://api.github.com/repos/vimeo/psalm","labels_url":"https://api.github.com/repos/vimeo/psalm/issues/2775/labels{/name}","comments_url":"https://api.github.com/repos/vimeo/psalm/issues/2775/comments","events_url":"https://api.github.com/repos/vimeo/psalm/issues/2775/events","html_url":"https://github.com/vimeo/psalm/issues/2775","id":562150060,"node_id":"MDU6SXNzdWU1NjIxNTAwNjA=","number":2775,"title":"Return type with multiple inherited interfaces leading to type confusion","user":{"login":"iquito","id":973653,"node_id":"MDQ6VXNlcjk3MzY1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/973653?v=4","gravatar_id":"","url":"https://api.github.com/users/iquito","html_url":"https://github.com/iquito","followers_url":"https://api.github.com/users/iquito/followers","following_url":"https://api.github.com/users/iquito/following{/other_user}","gists_url":"https://api.github.com/users/iquito/gists{/gist_id}","starred_url":"https://api.github.com/users/iquito/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iquito/subscriptions","organizations_url":"https://api.github.com/users/iquito/orgs","repos_url":"https://api.github.com/users/iquito/repos","events_url":"https://api.github.com/users/iquito/events{/privacy}","received_events_url":"https://api.github.com/users/iquito/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":486061586,"node_id":"MDU6TGFiZWw0ODYwNjE1ODY=","url":"https://api.github.com/repos/vimeo/psalm/labels/bug","name":"bug","color":"ee0701","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-02-09T09:40:52Z","updated_at":"2020-02-13T22:44:22Z","closed_at":"2020-02-13T22:44:22Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When having multiple levels of \"inheritance\" Psalm seems to incorrectly apply the type hints - this is [a simple example](https://psalm.dev/r/6056b59870):\r\n\r\n```php\r\ninterface NumberInterface\r\n{\r\n    public function getStatus(): string;\r\n}\r\n\r\ninterface NumberInternalInterface extends NumberInterface\r\n{\r\n    /**\r\n     * @psalm-return \"free\"|\"assigned\"|\"locked\"|\"ported\"|\"parent\"|\"fragmented\"|\"external\"\r\n     */\r\n    public function getStatus(): string;\r\n}\r\n\r\nclass NumberInternal implements NumberInternalInterface\r\n{\r\n    public function getStatus(): string\r\n    {\r\n        return 'free';\r\n    }\r\n}\r\n```\r\n\r\nPsalm gives the following error in this case:\r\n\r\n    ERROR: LessSpecificImplementedReturnType - 18:34 - The inherited return type 'string(assigned)|string(external)|string(fragmented)|string(free)|string(locked)|string(parent)|string(ported)' for NumberInternalInterface::getStatus is more specific than the implemented return type for NumberInternal::getstatus 'string'\r\n\r\nIf you move the `@psalm-return` to the `NumberInterface` instead of the `NumberInternalInterface`, the error still stays the same, so the problem seems to be that there are multiple levels of inheritance.\r\n\r\nWhen only one interface in the example is used, it works without an error, as seen [in this example](https://psalm.dev/r/cea10b07c6):\r\n\r\n```php\r\ninterface NumberInternalInterface\r\n{\r\n    /**\r\n     * @psalm-return \"free\"|\"assigned\"|\"locked\"|\"ported\"|\"parent\"|\"fragmented\"|\"external\"\r\n     */\r\n    public function getStatus(): string;\r\n}\r\n\r\nclass NumberInternal implements NumberInternalInterface\r\n{\r\n    public function getStatus(): string\r\n    {\r\n        return 'free';\r\n    }\r\n}\r\n```\r\n\r\nThis reports no issues, as expected.","closed_by":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/2775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vimeo/psalm/issues/2775/timeline","performed_via_github_app":null,"state_reason":"completed"}