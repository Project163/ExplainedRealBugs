[{"id":2564147680,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MjU2NDE0NzY4MA==","url":"https://api.github.com/repos/vimeo/psalm/issues/events/2564147680","actor":{"login":"lhchavez","id":168028,"node_id":"MDQ6VXNlcjE2ODAyOA==","avatar_url":"https://avatars.githubusercontent.com/u/168028?v=4","gravatar_id":"","url":"https://api.github.com/users/lhchavez","html_url":"https://github.com/lhchavez","followers_url":"https://api.github.com/users/lhchavez/followers","following_url":"https://api.github.com/users/lhchavez/following{/other_user}","gists_url":"https://api.github.com/users/lhchavez/gists{/gist_id}","starred_url":"https://api.github.com/users/lhchavez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lhchavez/subscriptions","organizations_url":"https://api.github.com/users/lhchavez/orgs","repos_url":"https://api.github.com/users/lhchavez/repos","events_url":"https://api.github.com/users/lhchavez/events{/privacy}","received_events_url":"https://api.github.com/users/lhchavez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2019-08-17T20:55:49Z","rename":{"from":"Constants with complex expressions cannot be type inferred","to":"Constants within complex expressions cannot be type inferred"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/522272095","html_url":"https://github.com/vimeo/psalm/issues/2031#issuecomment-522272095","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/2031","id":522272095,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjI3MjA5NQ==","user":{"login":"lhchavez","id":168028,"node_id":"MDQ6VXNlcjE2ODAyOA==","avatar_url":"https://avatars.githubusercontent.com/u/168028?v=4","gravatar_id":"","url":"https://api.github.com/users/lhchavez","html_url":"https://github.com/lhchavez","followers_url":"https://api.github.com/users/lhchavez/followers","following_url":"https://api.github.com/users/lhchavez/following{/other_user}","gists_url":"https://api.github.com/users/lhchavez/gists{/gist_id}","starred_url":"https://api.github.com/users/lhchavez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lhchavez/subscriptions","organizations_url":"https://api.github.com/users/lhchavez/orgs","repos_url":"https://api.github.com/users/lhchavez/repos","events_url":"https://api.github.com/users/lhchavez/events{/privacy}","received_events_url":"https://api.github.com/users/lhchavez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-17T21:32:49Z","updated_at":"2019-08-17T21:32:49Z","body":"a-ha! found it. There is some amount of manipulation of `$context` within `FunctionCallAnalyzer.php` that is not reset when an expression is done being processed. i'll try to introduce something like Chromium's [`ScopedClosureRunner`](https://codesearch.chromium.org/chromium/src/base/callback_helpers.h?q=symbol:base::ScopedClosureRunner) or [`AutoReset`](https://codesearch.chromium.org/chromium/src/base/auto_reset.h?q=symbol:base::AutoReset) in order to simplify the state management of the context.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/522272095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lhchavez","id":168028,"node_id":"MDQ6VXNlcjE2ODAyOA==","avatar_url":"https://avatars.githubusercontent.com/u/168028?v=4","gravatar_id":"","url":"https://api.github.com/users/lhchavez","html_url":"https://github.com/lhchavez","followers_url":"https://api.github.com/users/lhchavez/followers","following_url":"https://api.github.com/users/lhchavez/following{/other_user}","gists_url":"https://api.github.com/users/lhchavez/gists{/gist_id}","starred_url":"https://api.github.com/users/lhchavez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lhchavez/subscriptions","organizations_url":"https://api.github.com/users/lhchavez/orgs","repos_url":"https://api.github.com/users/lhchavez/repos","events_url":"https://api.github.com/users/lhchavez/events{/privacy}","received_events_url":"https://api.github.com/users/lhchavez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/522272994","html_url":"https://github.com/vimeo/psalm/issues/2031#issuecomment-522272994","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/2031","id":522272994,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjI3Mjk5NA==","user":{"login":"lhchavez","id":168028,"node_id":"MDQ6VXNlcjE2ODAyOA==","avatar_url":"https://avatars.githubusercontent.com/u/168028?v=4","gravatar_id":"","url":"https://api.github.com/users/lhchavez","html_url":"https://github.com/lhchavez","followers_url":"https://api.github.com/users/lhchavez/followers","following_url":"https://api.github.com/users/lhchavez/following{/other_user}","gists_url":"https://api.github.com/users/lhchavez/gists{/gist_id}","starred_url":"https://api.github.com/users/lhchavez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lhchavez/subscriptions","organizations_url":"https://api.github.com/users/lhchavez/orgs","repos_url":"https://api.github.com/users/lhchavez/repos","events_url":"https://api.github.com/users/lhchavez/events{/privacy}","received_events_url":"https://api.github.com/users/lhchavez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-17T21:48:08Z","updated_at":"2019-08-17T21:48:08Z","body":"before that, also took a stab at Context's `$parent_context` to avoid re-inventing the wheel and neatly isolating all changes, but it seems like the function call context needs to propagate _some_ things (e.g. if something is `define`d).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/522272994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lhchavez","id":168028,"node_id":"MDQ6VXNlcjE2ODAyOA==","avatar_url":"https://avatars.githubusercontent.com/u/168028?v=4","gravatar_id":"","url":"https://api.github.com/users/lhchavez","html_url":"https://github.com/lhchavez","followers_url":"https://api.github.com/users/lhchavez/followers","following_url":"https://api.github.com/users/lhchavez/following{/other_user}","gists_url":"https://api.github.com/users/lhchavez/gists{/gist_id}","starred_url":"https://api.github.com/users/lhchavez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lhchavez/subscriptions","organizations_url":"https://api.github.com/users/lhchavez/orgs","repos_url":"https://api.github.com/users/lhchavez/repos","events_url":"https://api.github.com/users/lhchavez/events{/privacy}","received_events_url":"https://api.github.com/users/lhchavez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/522273193","html_url":"https://github.com/vimeo/psalm/issues/2031#issuecomment-522273193","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/2031","id":522273193,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjI3MzE5Mw==","user":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-17T21:51:21Z","updated_at":"2019-08-17T21:51:21Z","body":"so I don't even think that's necessary. When I first created Psalm I was also super cautious about `function_exists` and `class_exists` - after they were called, subsequent calls of _existing_ functions and usage of _existing_, reflectable classes was mangled. Now they work mostly as expected - I just need to extend that to `defined` too.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/522273193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/522273249","html_url":"https://github.com/vimeo/psalm/issues/2031#issuecomment-522273249","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/2031","id":522273249,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjI3MzI0OQ==","user":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-17T21:52:28Z","updated_at":"2019-08-17T21:52:28Z","body":"Basically, this check should be moved further inside: https://github.com/vimeo/psalm/blob/c98c16090749aac83f8398409d86a0c22948c2b5/src/Psalm/Internal/Analyzer/Statements/Expression/Fetch/ConstFetchAnalyzer.php#L99","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/522273249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2564166118,"node_id":"MDEyOkxhYmVsZWRFdmVudDI1NjQxNjYxMTg=","url":"https://api.github.com/repos/vimeo/psalm/issues/events/2564166118","actor":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-08-17T21:52:37Z","label":{"name":"bug","color":"ee0701"},"performed_via_github_app":null},{"id":2564168943,"node_id":"MDExOkNsb3NlZEV2ZW50MjU2NDE2ODk0Mw==","url":"https://api.github.com/repos/vimeo/psalm/issues/events/2564168943","actor":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"b6dc8f547ef6eb0c2b4b3c73e47295cac4eae6a6","commit_url":"https://api.github.com/repos/vimeo/psalm/commits/b6dc8f547ef6eb0c2b4b3c73e47295cac4eae6a6","created_at":"2019-08-17T22:01:29Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/522275768","html_url":"https://github.com/vimeo/psalm/issues/2031#issuecomment-522275768","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/2031","id":522275768,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjI3NTc2OA==","user":{"login":"lhchavez","id":168028,"node_id":"MDQ6VXNlcjE2ODAyOA==","avatar_url":"https://avatars.githubusercontent.com/u/168028?v=4","gravatar_id":"","url":"https://api.github.com/users/lhchavez","html_url":"https://github.com/lhchavez","followers_url":"https://api.github.com/users/lhchavez/followers","following_url":"https://api.github.com/users/lhchavez/following{/other_user}","gists_url":"https://api.github.com/users/lhchavez/gists{/gist_id}","starred_url":"https://api.github.com/users/lhchavez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lhchavez/subscriptions","organizations_url":"https://api.github.com/users/lhchavez/orgs","repos_url":"https://api.github.com/users/lhchavez/repos","events_url":"https://api.github.com/users/lhchavez/events{/privacy}","received_events_url":"https://api.github.com/users/lhchavez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-17T22:40:09Z","updated_at":"2019-08-17T22:40:09Z","body":"oh that was fast! thanks so much for fixing it!","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/522275768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lhchavez","id":168028,"node_id":"MDQ6VXNlcjE2ODAyOA==","avatar_url":"https://avatars.githubusercontent.com/u/168028?v=4","gravatar_id":"","url":"https://api.github.com/users/lhchavez","html_url":"https://github.com/lhchavez","followers_url":"https://api.github.com/users/lhchavez/followers","following_url":"https://api.github.com/users/lhchavez/following{/other_user}","gists_url":"https://api.github.com/users/lhchavez/gists{/gist_id}","starred_url":"https://api.github.com/users/lhchavez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lhchavez/subscriptions","organizations_url":"https://api.github.com/users/lhchavez/orgs","repos_url":"https://api.github.com/users/lhchavez/repos","events_url":"https://api.github.com/users/lhchavez/events{/privacy}","received_events_url":"https://api.github.com/users/lhchavez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/522280005","html_url":"https://github.com/vimeo/psalm/issues/2031#issuecomment-522280005","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/2031","id":522280005,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjI4MDAwNQ==","user":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-18T00:18:56Z","updated_at":"2019-08-18T00:18:56Z","body":"You're welcome - things that are obviously wrong tend to get fixed quickly","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/522280005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2670987351,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI2NzA5ODczNTE=","url":"https://api.github.com/repos/vimeo/psalm/issues/events/2670987351","actor":{"login":"2e3s","id":4003445,"node_id":"MDQ6VXNlcjQwMDM0NDU=","avatar_url":"https://avatars.githubusercontent.com/u/4003445?v=4","gravatar_id":"","url":"https://api.github.com/users/2e3s","html_url":"https://github.com/2e3s","followers_url":"https://api.github.com/users/2e3s/followers","following_url":"https://api.github.com/users/2e3s/following{/other_user}","gists_url":"https://api.github.com/users/2e3s/gists{/gist_id}","starred_url":"https://api.github.com/users/2e3s/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/2e3s/subscriptions","organizations_url":"https://api.github.com/users/2e3s/orgs","repos_url":"https://api.github.com/users/2e3s/repos","events_url":"https://api.github.com/users/2e3s/events{/privacy}","received_events_url":"https://api.github.com/users/2e3s/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"9d0456e507b99fe15f1e28c04c8769477cd5ae98","commit_url":"https://api.github.com/repos/2e3s/psalm/commits/9d0456e507b99fe15f1e28c04c8769477cd5ae98","created_at":"2019-09-29T06:26:00Z","performed_via_github_app":null}]