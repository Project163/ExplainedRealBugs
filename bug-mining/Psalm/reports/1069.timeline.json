[{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/777859301","html_url":"https://github.com/vimeo/psalm/issues/5198#issuecomment-777859301","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/5198","id":777859301,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Nzg1OTMwMQ==","user":{"login":"psalm-github-bot[bot]","id":58627613,"node_id":"MDM6Qm90NTg2Mjc2MTM=","avatar_url":"https://avatars.githubusercontent.com/in/48546?v=4","gravatar_id":"","url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D","html_url":"https://github.com/apps/psalm-github-bot","followers_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2021-02-11T23:17:27Z","updated_at":"2021-02-11T23:17:49Z","body":"I found these snippets:\n<details>\n<summary>https://psalm.dev/r/9449b708b5</summary>\n\n```php\n<?php\n\n/**\n * @psalm-pure\n * @template TValue\n * @template TIterable of ?iterable<TValue>\n * @param TIterable $iterable\n * @return (TIterable is null ? null : list<TValue>)\n */\nfunction toList(?iterable $iterable): ?array\n{\n    if (null === $iterable) {\n        return null;\n    }\n\n    if (is_array($iterable)) {\n        return array_values($iterable);\n    }\n\n    return iterator_to_array($iterable, false);\n}\n```\n\n```\nPsalm output (using commit 257a1ca):\n\nERROR: DocblockTypeContradiction - 16:9 - Docblock-defined type TIterable:fn-tolist as iterable<mixed, TValue:fn-tolist as mixed> for $iterable is never array\n\nINFO: MixedArgument - 17:29 - Argument 1 of array_values cannot be mixed, expecting array<array-key, mixed>\n\nINFO: MixedReturnTypeCoercion - 17:16 - The type 'array<array-key, mixed>' is more general than the declared return type '(list<TValue:fn-tolist as mixed>)|null' for toList\n\nINFO: MixedReturnTypeCoercion - 20:12 - The type 'array<array-key, mixed>' is more general than the declared return type '(list<TValue:fn-tolist as mixed>)|null' for toList\n\nINFO: MixedReturnTypeCoercion - 8:12 - The declared return type '(list<TValue:fn-tolist as mixed>)|null' for toList is more specific than the inferred return type 'array<array-key, mixed>|null'\n```\n</details>\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/777859301/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"psalm-github-bot[bot]","id":58627613,"node_id":"MDM6Qm90NTg2Mjc2MTM=","avatar_url":"https://avatars.githubusercontent.com/in/48546?v=4","gravatar_id":"","url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D","html_url":"https://github.com/apps/psalm-github-bot","followers_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false}},{"id":4322440502,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50NDMyMjQ0MDUwMg==","url":"https://api.github.com/repos/vimeo/psalm/issues/events/4322440502","actor":{"login":"vudaltsov","id":2552865,"node_id":"MDQ6VXNlcjI1NTI4NjU=","avatar_url":"https://avatars.githubusercontent.com/u/2552865?v=4","gravatar_id":"","url":"https://api.github.com/users/vudaltsov","html_url":"https://github.com/vudaltsov","followers_url":"https://api.github.com/users/vudaltsov/followers","following_url":"https://api.github.com/users/vudaltsov/following{/other_user}","gists_url":"https://api.github.com/users/vudaltsov/gists{/gist_id}","starred_url":"https://api.github.com/users/vudaltsov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vudaltsov/subscriptions","organizations_url":"https://api.github.com/users/vudaltsov/orgs","repos_url":"https://api.github.com/users/vudaltsov/repos","events_url":"https://api.github.com/users/vudaltsov/events{/privacy}","received_events_url":"https://api.github.com/users/vudaltsov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2021-02-11T23:17:47Z","rename":{"from":"Function with conditional types stopped working","to":"Function with conditional types gives errors since 4.5.0"},"performed_via_github_app":null},{"id":4322487427,"node_id":"MDEyOkxhYmVsZWRFdmVudDQzMjI0ODc0Mjc=","url":"https://api.github.com/repos/vimeo/psalm/issues/events/4322487427","actor":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-02-11T23:34:33Z","label":{"name":"bug","color":"ee0701"},"performed_via_github_app":null},{"id":4325897130,"node_id":"MDExOkNsb3NlZEV2ZW50NDMyNTg5NzEzMA==","url":"https://api.github.com/repos/vimeo/psalm/issues/events/4325897130","actor":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"fa337375aeeb4e8103daf44bb0e296b77e88be7a","commit_url":"https://api.github.com/repos/vimeo/psalm/commits/fa337375aeeb4e8103daf44bb0e296b77e88be7a","created_at":"2021-02-12T17:32:30Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/778345167","html_url":"https://github.com/vimeo/psalm/issues/5198#issuecomment-778345167","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/5198","id":778345167,"node_id":"MDEyOklzc3VlQ29tbWVudDc3ODM0NTE2Nw==","user":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-12T17:51:34Z","updated_at":"2021-02-12T17:51:34Z","body":"A bugfix in 4.5 revealed the fixed issue. The _other_ issues with mixed are also longstanding, ticketed here: https://github.com/vimeo/psalm/issues/5208","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/778345167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"dependabot[bot]","id":49699333,"node_id":"MDM6Qm90NDk2OTkzMzM=","avatar_url":"https://avatars.githubusercontent.com/in/29110?v=4","gravatar_id":"","url":"https://api.github.com/users/dependabot%5Bbot%5D","html_url":"https://github.com/apps/dependabot","followers_url":"https://api.github.com/users/dependabot%5Bbot%5D/followers","following_url":"https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dependabot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/dependabot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/dependabot%5Bbot%5D/repos","events_url":"https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/dependabot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T18:14:47Z","updated_at":"2021-03-11T18:14:47Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/issues/255","repository_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker","labels_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/issues/255/labels{/name}","comments_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/issues/255/comments","events_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/issues/255/events","html_url":"https://github.com/maglnet/ComposerRequireChecker/pull/255","id":829406201,"node_id":"MDExOlB1bGxSZXF1ZXN0NTkxMDc3NDMy","number":255,"title":"Bump vimeo/psalm from 4.3.2 to 4.6.1","user":{"login":"dependabot[bot]","id":49699333,"node_id":"MDM6Qm90NDk2OTkzMzM=","avatar_url":"https://avatars.githubusercontent.com/in/29110?v=4","gravatar_id":"","url":"https://api.github.com/users/dependabot%5Bbot%5D","html_url":"https://github.com/apps/dependabot","followers_url":"https://api.github.com/users/dependabot%5Bbot%5D/followers","following_url":"https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dependabot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/dependabot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/dependabot%5Bbot%5D/repos","events_url":"https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/dependabot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"labels":[{"id":1511072769,"node_id":"MDU6TGFiZWwxNTExMDcyNzY5","url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/labels/dependencies","name":"dependencies","color":"0366d6","default":false,"description":"Pull requests that update a dependency file"}],"state":"closed","locked":false,"assignee":{"login":"maglnet","id":4430279,"node_id":"MDQ6VXNlcjQ0MzAyNzk=","avatar_url":"https://avatars.githubusercontent.com/u/4430279?v=4","gravatar_id":"","url":"https://api.github.com/users/maglnet","html_url":"https://github.com/maglnet","followers_url":"https://api.github.com/users/maglnet/followers","following_url":"https://api.github.com/users/maglnet/following{/other_user}","gists_url":"https://api.github.com/users/maglnet/gists{/gist_id}","starred_url":"https://api.github.com/users/maglnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maglnet/subscriptions","organizations_url":"https://api.github.com/users/maglnet/orgs","repos_url":"https://api.github.com/users/maglnet/repos","events_url":"https://api.github.com/users/maglnet/events{/privacy}","received_events_url":"https://api.github.com/users/maglnet/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"maglnet","id":4430279,"node_id":"MDQ6VXNlcjQ0MzAyNzk=","avatar_url":"https://avatars.githubusercontent.com/u/4430279?v=4","gravatar_id":"","url":"https://api.github.com/users/maglnet","html_url":"https://github.com/maglnet","followers_url":"https://api.github.com/users/maglnet/followers","following_url":"https://api.github.com/users/maglnet/following{/other_user}","gists_url":"https://api.github.com/users/maglnet/gists{/gist_id}","starred_url":"https://api.github.com/users/maglnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maglnet/subscriptions","organizations_url":"https://api.github.com/users/maglnet/orgs","repos_url":"https://api.github.com/users/maglnet/repos","events_url":"https://api.github.com/users/maglnet/events{/privacy}","received_events_url":"https://api.github.com/users/maglnet/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2021-03-11T18:14:46Z","updated_at":"2021-03-24T18:23:24Z","closed_at":"2021-03-24T18:23:23Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"repository":{"id":46859018,"node_id":"MDEwOlJlcG9zaXRvcnk0Njg1OTAxOA==","name":"ComposerRequireChecker","full_name":"maglnet/ComposerRequireChecker","private":false,"owner":{"login":"maglnet","id":4430279,"node_id":"MDQ6VXNlcjQ0MzAyNzk=","avatar_url":"https://avatars.githubusercontent.com/u/4430279?v=4","gravatar_id":"","url":"https://api.github.com/users/maglnet","html_url":"https://github.com/maglnet","followers_url":"https://api.github.com/users/maglnet/followers","following_url":"https://api.github.com/users/maglnet/following{/other_user}","gists_url":"https://api.github.com/users/maglnet/gists{/gist_id}","starred_url":"https://api.github.com/users/maglnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maglnet/subscriptions","organizations_url":"https://api.github.com/users/maglnet/orgs","repos_url":"https://api.github.com/users/maglnet/repos","events_url":"https://api.github.com/users/maglnet/events{/privacy}","received_events_url":"https://api.github.com/users/maglnet/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/maglnet/ComposerRequireChecker","description":"A CLI tool to check whether a specific composer package uses imported symbols that aren't part of its direct composer dependencies","fork":false,"url":"https://api.github.com/repos/maglnet/ComposerRequireChecker","forks_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/forks","keys_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/keys{/key_id}","collaborators_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/teams","hooks_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/hooks","issue_events_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/issues/events{/number}","events_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/events","assignees_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/assignees{/user}","branches_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/branches{/branch}","tags_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/tags","blobs_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/git/refs{/sha}","trees_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/git/trees{/sha}","statuses_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/statuses/{sha}","languages_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/languages","stargazers_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/stargazers","contributors_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/contributors","subscribers_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/subscribers","subscription_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/subscription","commits_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/commits{/sha}","git_commits_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/git/commits{/sha}","comments_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/comments{/number}","issue_comment_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/issues/comments{/number}","contents_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/contents/{+path}","compare_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/compare/{base}...{head}","merges_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/merges","archive_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/downloads","issues_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/issues{/number}","pulls_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/pulls{/number}","milestones_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/milestones{/number}","notifications_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/labels{/name}","releases_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/releases{/id}","deployments_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/deployments","created_at":"2015-11-25T12:01:02Z","updated_at":"2025-11-10T07:25:33Z","pushed_at":"2025-11-08T04:35:56Z","git_url":"git://github.com/maglnet/ComposerRequireChecker.git","ssh_url":"git@github.com:maglnet/ComposerRequireChecker.git","clone_url":"https://github.com/maglnet/ComposerRequireChecker.git","svn_url":"https://github.com/maglnet/ComposerRequireChecker","homepage":null,"size":1640,"stargazers_count":972,"watchers_count":972,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":75,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":42,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["ci-tools","code-quality"],"visibility":"public","forks":75,"open_issues":42,"watchers":972,"default_branch":"4.19.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/pulls/255","html_url":"https://github.com/maglnet/ComposerRequireChecker/pull/255","diff_url":"https://github.com/maglnet/ComposerRequireChecker/pull/255.diff","patch_url":"https://github.com/maglnet/ComposerRequireChecker/pull/255.patch","merged_at":null},"body":"Bumps [vimeo/psalm](https://github.com/vimeo/psalm) from 4.3.2 to 4.6.1.\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/vimeo/psalm/releases\">vimeo/psalm's releases</a>.</em></p>\n<blockquote>\n<h2>Fix autocompletion in PHP 7.3</h2>\n<p>This used some extra arguments in <code>preg_replace_callback</code> that were only added in PHP 7.4. Also <a href=\"https://github.com/orklah\"><code>@​orklah</code></a> improved bit-shift operation return types (<a href=\"https://github.com/vimeo/psalm/issues/5233\">#5233</a>)</p>\n<h2>Improve autocompletion for functions</h2>\n<p>This release improves language server behaviour for autocompletion, and fixes some caching bugs triggered by invalid PHP.</p>\n<p>Also <a href=\"https://github.com/VincentLanglet\"><code>@​VincentLanglet</code></a> renamed some stubs to avoid conflicting with PHPStorm (<a href=\"https://github.com/vimeo/psalm/issues/5213\">#5213</a>)</p>\n<h2>Fix PHP 7.1-7.2 builds</h2>\n<p>4.5.0 introduced syntax incompatible with PHP 7.2, this fixes it – thanks to <a href=\"https://github.com/drealecs\"><code>@​drealecs</code></a>, and <a href=\"https://github.com/weirdan\"><code>@​weirdan</code></a> who prevented future regressions.</p>\n<ul>\n<li>fixes a possible infinite loop with some generic instantiation (<a href=\"https://github.com/vimeo/psalm/issues/5211\">#5211</a>)</li>\n<li>adds completions for function names thanks to <a href=\"https://github.com/joehoyle\"><code>@​joehoyle</code></a> (<a href=\"https://github.com/vimeo/psalm/issues/5128\">#5128</a>)</li>\n<li>allows <code>@psalm-type</code> to be used inside generics thanks to <a href=\"https://github.com/leightonthomas\"><code>@​leightonthomas</code></a>  (<a href=\"https://github.com/vimeo/psalm/issues/5205\">#5205</a>)</li>\n<li><code>array_key_exists</code> now behaves a little safer thanks to <a href=\"https://github.com/brainlock\"><code>@​brainlock</code></a> (<a href=\"https://github.com/vimeo/psalm/issues/5197\">#5197</a>)</li>\n<li>allow <code>is_array</code> check on a templated <code>iterable</code> (<a href=\"https://github.com/vimeo/psalm/issues/5198\">#5198</a>)</li>\n</ul>\n<h2>Bugfixes</h2>\n<ul>\n<li>Fix <a href=\"https://github.com/vimeo/psalm/issues/5196\">#5196</a> - improve type resolution of templated properties before checking default values</li>\n<li>Fix <a href=\"https://github.com/vimeo/psalm/issues/5194\">#5194</a> - don’t emit <code>NonInvariantDocblockPropertyType</code> when redefining core class properties</li>\n</ul>\n<p>This should also reinstate <code>psalm/phar</code> publishing</p>\n<h2>4.5.0</h2>\n<h2>Features</h2>\n<ul>\n<li><a href=\"https://github.com/Danysan1\"><code>@​Danysan1</code></a> added support for CodeClimate (<a href=\"https://github.com/vimeo/psalm/issues/5030\">#5030</a>)</li>\n<li><a href=\"https://github.com/bdsl\"><code>@​bdsl</code></a> added detection of property type variance in <a href=\"https://github.com/vimeo/psalm/issues/5131\">#5131</a>. Non-invariant property types causes a fatal error if the property types are specified in PHP code, but can also signal issues with your code if they're specified in docblocks. Psalm has two separate issues for this, <code>NonInvariantPropertyType</code> and <code>NonInvariantDocblockPropertyType</code>.</li>\n<li><strong>Taint Analysis</strong> <a href=\"https://github.com/adrienlucas\"><code>@​adrienlucas</code></a> added an option to dump the taint flow graph for debugging purposes (<a href=\"https://github.com/vimeo/psalm/issues/5080\">#5080</a>)</li>\n<li><strong>Language Server</strong> <a href=\"https://github.com/joehoyle\"><code>@​joehoyle</code></a> added support for static class method completion (<a href=\"https://github.com/vimeo/psalm/issues/5085\">#5085</a>) and completions for array keys (<a href=\"https://github.com/vimeo/psalm/issues/5105\">#5105</a>) and constants (<a href=\"https://github.com/vimeo/psalm/issues/5115\">#5115</a>)</li>\n<li>Thanks to <a href=\"https://github.com/weirdan\"><code>@​weirdan</code></a>, Psalm now emits exit code 1 <em>only</em> when it has internal issues. When it finds issues with your code it emits code 2 (<a href=\"https://github.com/vimeo/psalm/issues/5087\">#5087</a>)</li>\n<li><a href=\"https://github.com/weirdan\"><code>@​weirdan</code></a> added checks to prevent invalid implementation of <code>Traversable</code> (<a href=\"https://github.com/vimeo/psalm/issues/5171\">#5171</a>)</li>\n</ul>\n<h2>Changes</h2>\n<ul>\n<li>The meaning of <code>non-empty-string</code> has been clarified to mean &quot;every string except the empty string <code>''</code>&quot;. A new type, <code>non-falsy-string</code>, represents &quot;every string except the empty string and the string <code>'0'</code>&quot;. This follows PHP's treatment of falsiness, where the string <code>'0'</code> is treated as false.</li>\n</ul>\n<h2>Bugfixes</h2>\n<ul>\n<li>Don't discard staticness of objects when combining types (<a href=\"https://github.com/vimeo/psalm/issues/5029\">#5029</a>)</li>\n<li><a href=\"https://github.com/orklah\"><code>@​orklah</code></a> fixed <a href=\"https://github.com/vimeo/psalm/issues/5021\">#5021</a> by having Psalm calculate more literal values</li>\n<li><a href=\"https://github.com/lukasbestle\"><code>@​lukasbestle</code></a> fixed <a href=\"https://github.com/vimeo/psalm/issues/5037\">#5037</a> by removing the <code>SimpleXMLIterator</code>'s reliance on the new <code>\\Stringable</code> interface</li>\n<li>avoid false-positive in a dynamic property fetch inside a ternary</li>\n<li>prevent complex assertions from crashing reflection (<a href=\"https://github.com/vimeo/psalm/issues/5025\">#5025</a>)</li>\n<li>improve string non-emptiness combinations (<a href=\"https://github.com/vimeo/psalm/issues/5017\">#5017</a>)</li>\n<li><a href=\"https://github.com/weirdan\"><code>@​weirdan</code></a> fixed <a href=\"https://github.com/vimeo/psalm/issues/5048\">#5048</a> by ensuring the autoloader is started in <code>psalm --init</code></li>\n<li><a href=\"https://github.com/danog\"><code>@​danog</code></a> fixed <a href=\"https://github.com/vimeo/psalm/issues/4289\">#4289</a> by checking iterator types in <code>yield from</code> expressions</li>\n<li><a href=\"https://github.com/weirdan\"><code>@​weirdan</code></a> fixed <a href=\"https://github.com/vimeo/psalm/issues/5057\">#5057</a> by adding flows to array spreads</li>\n<li><a href=\"https://github.com/weirdan\"><code>@​weirdan</code></a> ensured <code>class_alias()</code> calls are respected when accessing static properties (<a href=\"https://github.com/vimeo/psalm/issues/5068\">#5068</a>)</li>\n<li><strong>Language Server</strong> <a href=\"https://github.com/joehoyle\"><code>@​joehoyle</code></a> fixed a cache invalidation issue in language server mode (<a href=\"https://github.com/vimeo/psalm/issues/5084\">#5084</a>)</li>\n</ul>\n<!-- raw HTML omitted -->\n</blockquote>\n<p>... (truncated)</p>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/vimeo/psalm/commit/e93e532e4eaad6d68c4d7b606853800eaceccc72\"><code>e93e532</code></a> Fix <a href=\"https://github.com/vimeo/psalm/issues/5239\">#5239</a> - make replacement work in 7.1-7.3</li>\n<li><a href=\"https://github.com/vimeo/psalm/commit/b5ab0ff38b205e70cb51f67cd7ede69ba13c9deb\"><code>b5ab0ff</code></a> Allow installation of netresearch/jsonmapper ^4.0 (<a href=\"https://github.com/vimeo/psalm/issues/5240\">#5240</a>)</li>\n<li><a href=\"https://github.com/vimeo/psalm/commit/38d92347817bb3c79ae6ee203364482b4e712ed8\"><code>38d9234</code></a> Fix some typos in the docs (<a href=\"https://github.com/vimeo/psalm/issues/5245\">#5245</a>)</li>\n<li><a href=\"https://github.com/vimeo/psalm/commit/9d6d3916daba41e6b92ce6870215fe5ce3106542\"><code>9d6d391</code></a> Revert &quot;Prevent TypeParseException when dealing with nested template in asser...</li>\n<li><a href=\"https://github.com/vimeo/psalm/commit/686f9fcaaa2bd08a3f5d2ec6b5f97dbc3c51386d\"><code>686f9fc</code></a> Don’t throw an exceptin when parsing invalid type</li>\n<li><a href=\"https://github.com/vimeo/psalm/commit/196f24aac33f48e8287728d901a66593bfdb4756\"><code>196f24a</code></a> Prevent TypeParseException when dealing with nested template in assertion</li>\n<li><a href=\"https://github.com/vimeo/psalm/commit/7b24552534e4a7864a3c0bc33bafcb1c86c1406c\"><code>7b24552</code></a> Fix not always positive bit operations (<a href=\"https://github.com/vimeo/psalm/issues/5233\">#5233</a>)</li>\n<li><a href=\"https://github.com/vimeo/psalm/commit/5191dac3fab2ca761d2ddae285f53cf7b45c7a32\"><code>5191dac</code></a> Introduce Virtual Nodes in order to differentiate real nodes in plugins (<a href=\"https://github.com/vimeo/psalm/issues/5222\">#5222</a>)</li>\n<li><a href=\"https://github.com/vimeo/psalm/commit/77feecb3707bd50378c21ae4d3fe9e320e6cea65\"><code>77feecb</code></a> Apply the partial diff hack earlier</li>\n<li><a href=\"https://github.com/vimeo/psalm/commit/09281aba250079285d26a2cfbb523b6678d4d00f\"><code>09281ab</code></a> Specify it’s a snippet</li>\n<li>Additional commits viewable in <a href=\"https://github.com/vimeo/psalm/compare/4.3.2...4.6.1\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=vimeo/psalm&package-manager=composer&previous-version=4.3.2&new-version=4.6.1)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>","reactions":{"url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/issues/255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/maglnet/ComposerRequireChecker/issues/255/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"Etherlord","id":60133682,"node_id":"MDQ6VXNlcjYwMTMzNjgy","avatar_url":"https://avatars.githubusercontent.com/u/60133682?v=4","gravatar_id":"","url":"https://api.github.com/users/Etherlord","html_url":"https://github.com/Etherlord","followers_url":"https://api.github.com/users/Etherlord/followers","following_url":"https://api.github.com/users/Etherlord/following{/other_user}","gists_url":"https://api.github.com/users/Etherlord/gists{/gist_id}","starred_url":"https://api.github.com/users/Etherlord/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Etherlord/subscriptions","organizations_url":"https://api.github.com/users/Etherlord/orgs","repos_url":"https://api.github.com/users/Etherlord/repos","events_url":"https://api.github.com/users/Etherlord/events{/privacy}","received_events_url":"https://api.github.com/users/Etherlord/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T11:21:54Z","updated_at":"2021-03-29T11:21:54Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/vimeo/psalm/issues/5506","repository_url":"https://api.github.com/repos/vimeo/psalm","labels_url":"https://api.github.com/repos/vimeo/psalm/issues/5506/labels{/name}","comments_url":"https://api.github.com/repos/vimeo/psalm/issues/5506/comments","events_url":"https://api.github.com/repos/vimeo/psalm/issues/5506/events","html_url":"https://github.com/vimeo/psalm/issues/5506","id":843272598,"node_id":"MDU6SXNzdWU4NDMyNzI1OTg=","number":5506,"title":"Function with conditional types gives errors since 4.7.0","user":{"login":"Etherlord","id":60133682,"node_id":"MDQ6VXNlcjYwMTMzNjgy","avatar_url":"https://avatars.githubusercontent.com/u/60133682?v=4","gravatar_id":"","url":"https://api.github.com/users/Etherlord","html_url":"https://github.com/Etherlord","followers_url":"https://api.github.com/users/Etherlord/followers","following_url":"https://api.github.com/users/Etherlord/following{/other_user}","gists_url":"https://api.github.com/users/Etherlord/gists{/gist_id}","starred_url":"https://api.github.com/users/Etherlord/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Etherlord/subscriptions","organizations_url":"https://api.github.com/users/Etherlord/orgs","repos_url":"https://api.github.com/users/Etherlord/repos","events_url":"https://api.github.com/users/Etherlord/events{/privacy}","received_events_url":"https://api.github.com/users/Etherlord/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-03-29T11:21:54Z","updated_at":"2021-03-29T13:37:57Z","closed_at":"2021-03-29T13:37:57Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":74386167,"node_id":"MDEwOlJlcG9zaXRvcnk3NDM4NjE2Nw==","name":"psalm","full_name":"vimeo/psalm","private":false,"owner":{"login":"vimeo","id":317769,"node_id":"MDEyOk9yZ2FuaXphdGlvbjMxNzc2OQ==","avatar_url":"https://avatars.githubusercontent.com/u/317769?v=4","gravatar_id":"","url":"https://api.github.com/users/vimeo","html_url":"https://github.com/vimeo","followers_url":"https://api.github.com/users/vimeo/followers","following_url":"https://api.github.com/users/vimeo/following{/other_user}","gists_url":"https://api.github.com/users/vimeo/gists{/gist_id}","starred_url":"https://api.github.com/users/vimeo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vimeo/subscriptions","organizations_url":"https://api.github.com/users/vimeo/orgs","repos_url":"https://api.github.com/users/vimeo/repos","events_url":"https://api.github.com/users/vimeo/events{/privacy}","received_events_url":"https://api.github.com/users/vimeo/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/vimeo/psalm","description":"A PHP static analysis tool for finding errors and security vulnerabilities in PHP applications","fork":false,"url":"https://api.github.com/repos/vimeo/psalm","forks_url":"https://api.github.com/repos/vimeo/psalm/forks","keys_url":"https://api.github.com/repos/vimeo/psalm/keys{/key_id}","collaborators_url":"https://api.github.com/repos/vimeo/psalm/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/vimeo/psalm/teams","hooks_url":"https://api.github.com/repos/vimeo/psalm/hooks","issue_events_url":"https://api.github.com/repos/vimeo/psalm/issues/events{/number}","events_url":"https://api.github.com/repos/vimeo/psalm/events","assignees_url":"https://api.github.com/repos/vimeo/psalm/assignees{/user}","branches_url":"https://api.github.com/repos/vimeo/psalm/branches{/branch}","tags_url":"https://api.github.com/repos/vimeo/psalm/tags","blobs_url":"https://api.github.com/repos/vimeo/psalm/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/vimeo/psalm/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/vimeo/psalm/git/refs{/sha}","trees_url":"https://api.github.com/repos/vimeo/psalm/git/trees{/sha}","statuses_url":"https://api.github.com/repos/vimeo/psalm/statuses/{sha}","languages_url":"https://api.github.com/repos/vimeo/psalm/languages","stargazers_url":"https://api.github.com/repos/vimeo/psalm/stargazers","contributors_url":"https://api.github.com/repos/vimeo/psalm/contributors","subscribers_url":"https://api.github.com/repos/vimeo/psalm/subscribers","subscription_url":"https://api.github.com/repos/vimeo/psalm/subscription","commits_url":"https://api.github.com/repos/vimeo/psalm/commits{/sha}","git_commits_url":"https://api.github.com/repos/vimeo/psalm/git/commits{/sha}","comments_url":"https://api.github.com/repos/vimeo/psalm/comments{/number}","issue_comment_url":"https://api.github.com/repos/vimeo/psalm/issues/comments{/number}","contents_url":"https://api.github.com/repos/vimeo/psalm/contents/{+path}","compare_url":"https://api.github.com/repos/vimeo/psalm/compare/{base}...{head}","merges_url":"https://api.github.com/repos/vimeo/psalm/merges","archive_url":"https://api.github.com/repos/vimeo/psalm/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/vimeo/psalm/downloads","issues_url":"https://api.github.com/repos/vimeo/psalm/issues{/number}","pulls_url":"https://api.github.com/repos/vimeo/psalm/pulls{/number}","milestones_url":"https://api.github.com/repos/vimeo/psalm/milestones{/number}","notifications_url":"https://api.github.com/repos/vimeo/psalm/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/vimeo/psalm/labels{/name}","releases_url":"https://api.github.com/repos/vimeo/psalm/releases{/id}","deployments_url":"https://api.github.com/repos/vimeo/psalm/deployments","created_at":"2016-11-21T17:04:41Z","updated_at":"2025-11-09T12:51:34Z","pushed_at":"2025-10-15T16:48:22Z","git_url":"git://github.com/vimeo/psalm.git","ssh_url":"git@github.com:vimeo/psalm.git","clone_url":"https://github.com/vimeo/psalm.git","svn_url":"https://github.com/vimeo/psalm","homepage":"https://psalm.dev","size":115257,"stargazers_count":5770,"watchers_count":5770,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":683,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1932,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","php","security-analysis","static-analysis","taint-analysis","type-inference"],"visibility":"public","forks":683,"open_issues":1932,"watchers":5770,"default_branch":"6.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"https://github.com/vimeo/psalm/issues/5198 This bug is reproduced again since 4.7.0\r\n\r\nhttps://psalm.dev/r/9449b708b5\r\n\r\n","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/5506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vimeo/psalm/issues/5506/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]