{"url":"https://api.github.com/repos/vimeo/psalm/issues/4077","repository_url":"https://api.github.com/repos/vimeo/psalm","labels_url":"https://api.github.com/repos/vimeo/psalm/issues/4077/labels{/name}","comments_url":"https://api.github.com/repos/vimeo/psalm/issues/4077/comments","events_url":"https://api.github.com/repos/vimeo/psalm/issues/4077/events","html_url":"https://github.com/vimeo/psalm/issues/4077","id":687520920,"node_id":"MDU6SXNzdWU2ODc1MjA5MjA=","number":4077,"title":"Constructing an impure lambda is still pure","user":{"login":"olleharstedt","id":607341,"node_id":"MDQ6VXNlcjYwNzM0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/607341?v=4","gravatar_id":"","url":"https://api.github.com/users/olleharstedt","html_url":"https://github.com/olleharstedt","followers_url":"https://api.github.com/users/olleharstedt/followers","following_url":"https://api.github.com/users/olleharstedt/following{/other_user}","gists_url":"https://api.github.com/users/olleharstedt/gists{/gist_id}","starred_url":"https://api.github.com/users/olleharstedt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olleharstedt/subscriptions","organizations_url":"https://api.github.com/users/olleharstedt/orgs","repos_url":"https://api.github.com/users/olleharstedt/repos","events_url":"https://api.github.com/users/olleharstedt/events{/privacy}","received_events_url":"https://api.github.com/users/olleharstedt/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":486061586,"node_id":"MDU6TGFiZWw0ODYwNjE1ODY=","url":"https://api.github.com/repos/vimeo/psalm/labels/bug","name":"bug","color":"ee0701","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2020-08-27T20:31:16Z","updated_at":"2023-01-05T10:56:24Z","closed_at":"2020-08-28T16:43:02Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Sorry for opening the same issue again, but I didn't see a good argument for why the other got closed.\r\n\r\nThe following snippet should type-check: https://psalm.dev/r/65d07cb31c\r\n\r\nFollowing the definition of purity from Wikipedia:\r\n\r\n1. Its return value is the same for the same arguments (yes, it returns the same callable, always)\r\n2. Its evaluation has no side effects (also yes, the impure callable is not executed)\r\n\r\nThe current implementation of `@psalm-pure` does not get laziness right.\r\n\r\nAbout the error:\r\n\r\n> ERROR: ImpureFunctionCall - 9:7 - Cannot call echo from a mutation-free context\r\n\r\nMaybe \"mutation-free context\" should not be inherited from the parent scope? What are the pros/cons behind this behaviour?","closed_by":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/4077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vimeo/psalm/issues/4077/timeline","performed_via_github_app":null,"state_reason":"completed"}