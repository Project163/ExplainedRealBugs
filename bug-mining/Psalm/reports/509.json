{"url":"https://api.github.com/repos/vimeo/psalm/issues/2826","repository_url":"https://api.github.com/repos/vimeo/psalm","labels_url":"https://api.github.com/repos/vimeo/psalm/issues/2826/labels{/name}","comments_url":"https://api.github.com/repos/vimeo/psalm/issues/2826/comments","events_url":"https://api.github.com/repos/vimeo/psalm/issues/2826/events","html_url":"https://github.com/vimeo/psalm/issues/2826","id":566394767,"node_id":"MDU6SXNzdWU1NjYzOTQ3Njc=","number":2826,"title":"PHP 7.4 psalm can't find stdclass storage","user":{"login":"auroraeosrose","id":282573,"node_id":"MDQ6VXNlcjI4MjU3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/282573?v=4","gravatar_id":"","url":"https://api.github.com/users/auroraeosrose","html_url":"https://github.com/auroraeosrose","followers_url":"https://api.github.com/users/auroraeosrose/followers","following_url":"https://api.github.com/users/auroraeosrose/following{/other_user}","gists_url":"https://api.github.com/users/auroraeosrose/gists{/gist_id}","starred_url":"https://api.github.com/users/auroraeosrose/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/auroraeosrose/subscriptions","organizations_url":"https://api.github.com/users/auroraeosrose/orgs","repos_url":"https://api.github.com/users/auroraeosrose/repos","events_url":"https://api.github.com/users/auroraeosrose/events{/privacy}","received_events_url":"https://api.github.com/users/auroraeosrose/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":486061586,"node_id":"MDU6TGFiZWw0ODYwNjE1ODY=","url":"https://api.github.com/repos/vimeo/psalm/labels/bug","name":"bug","color":"ee0701","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2020-02-17T16:07:08Z","updated_at":"2020-02-17T17:36:16Z","closed_at":"2020-02-17T16:33:13Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Similar to #1016 I'm seeing this with a PHP 7.4 install and psalm 3.8.5\r\n\r\nUncaught InvalidArgumentException: Could not get class storage for stdclass\r\n\r\nNotice it's now \"stdclass\" not \"stdClass\" which is what the previous bug hit\r\n\r\nHere's the full backtrace\r\n```\r\nUncaught InvalidArgumentException: Could not get class storage for stdclass in C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Provider\\ClassLikeStorageProvider.php:47\r\nStack trace:\r\n#0 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Codebase\\ClassLikes.php(496): Psalm\\Internal\\Provider\\ClassLikeStorageProvider->get('stdclass')\r\n#1 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Codebase.php(736): Psalm\\Internal\\Codebase\\ClassLikes->classExtends('stdClass', 'Slim\\\\Http\\\\Respo...', true)\r\n#2 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Type\\TypeCombination.php(1009): Psalm\\Codebase->classExtends('stdClass', 'Slim\\\\Http\\\\Respo...')\r\n#3 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Type\\TypeCombination.php(187): Psalm\\Internal\\Type\\TypeCombination::scrapeTypeProperties(Object(Psalm\\Type\\Atomic\\TNamedObject), Object(Psalm\\Internal\\Type\\TypeCombination), Object(Psalm\\Codebase), false, true, 500)\r\n#4 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Type.php(1583): Psalm\\Internal\\Type\\TypeCombination::combineTypes(Array, Object(Psalm\\Codebase), false, true, 500)\r\n#5 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Analyzer\\Statements\\Expression\\CallAnalyzer.php(2516): Psalm\\Type::combineUnionTypes(Object(Psalm\\Type\\Union), Object(Psalm\\Type\\Union), Object(Psalm\\Codebase))\r\n#6 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Analyzer\\Statements\\Expression\\CallAnalyzer.php(1936): Psalm\\Internal\\Analyzer\\Statements\\Expression\\CallAnalyzer::checkFunctionArgumentType(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(Psalm\\Type\\Union), Object(Psalm\\Type\\Union), NULL, 'PHPUnit\\\\Framewo...', 0, Object(Psalm\\CodeLocation), Object(PhpParser\\Node\\Expr\\Variable), Object(Psalm\\Context), Object(Psalm\\Storage\\FunctionLikeParameter), false, false, false, Object(Psalm\\CodeLocation))\r\n#7 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Analyzer\\Statements\\Expression\\CallAnalyzer.php(1569): Psalm\\Internal\\Analyzer\\Statements\\Expression\\CallAnalyzer::checkFunctionLikeTypeMatches(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(Psalm\\Codebase), 'PHPUnit\\\\Framewo...', 'PHPUnit\\\\Framewo...', 'PHPUnit\\\\Framewo...', Object(Psalm\\CodeLocation), Object(Psalm\\Storage\\FunctionLikeParameter), Object(Psalm\\Type\\Union), 0, Object(PhpParser\\Node\\Arg), Object(Psalm\\Context), Array, NULL, false, false)\r\n#8 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Analyzer\\Statements\\Expression\\CallAnalyzer.php(1362): Psalm\\Internal\\Analyzer\\Statements\\Expression\\CallAnalyzer::checkFunctionLikeArgumentMatches(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), 'PHPUnit\\\\Framewo...', 'PHPUnit\\\\Framewo...', 'PHPUnit\\\\Framewo...', Object(Psalm\\CodeLocation), Object(Psalm\\Storage\\FunctionLikeParameter), 0, Object(PhpParser\\Node\\Arg), Object(Psalm\\Context), Array, NULL, false, false)\r\n#9 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Analyzer\\Statements\\Expression\\CallAnalyzer.php(326): Psalm\\Internal\\Analyzer\\Statements\\Expression\\CallAnalyzer::checkFunctionLikeArgumentsMatch(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Array, 'PHPUnit\\\\Framewo...', Array, Object(Psalm\\Storage\\MethodStorage), Object(Psalm\\Storage\\ClassLikeStorage), Object(Psalm\\Internal\\Type\\TemplateResult), Object(Psalm\\CodeLocation), Object(Psalm\\Context))\r\n#10 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Analyzer\\Statements\\Expression\\Call\\MethodCallAnalyzer.php(1063): Psalm\\Internal\\Analyzer\\Statements\\Expression\\CallAnalyzer::checkMethodArgs('PHPUnit\\\\Framewo...', Array, Object(Psalm\\Internal\\Type\\TemplateResult), Object(Psalm\\Context), Object(Psalm\\CodeLocation), Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer))\r\n#11 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Analyzer\\Statements\\Expression\\Call\\MethodCallAnalyzer.php(215): Psalm\\Internal\\Analyzer\\Statements\\Expression\\Call\\MethodCallAnalyzer::analyzeAtomicCall(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(PhpParser\\Node\\Expr\\MethodCall), Object(Psalm\\Codebase), Object(Psalm\\Context), Object(Psalm\\Type\\Atomic\\TNamedObject), Object(Psalm\\Type\\Atomic\\TNamedObject), NULL, NULL, false, false, true, false, Array, Array, Array, Array, Array)\r\n#12 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Analyzer\\Statements\\ExpressionAnalyzer.php(135): Psalm\\Internal\\Analyzer\\Statements\\Expression\\Call\\MethodCallAnalyzer::analyze(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(PhpParser\\Node\\Expr\\MethodCall), Object(Psalm\\Context))\r\n#13 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Analyzer\\StatementsAnalyzer.php(704): Psalm\\Internal\\Analyzer\\Statements\\ExpressionAnalyzer::analyze(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(PhpParser\\Node\\Expr\\MethodCall), Object(Psalm\\Context), false, Object(Psalm\\Context), true)\r\n#14 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Analyzer\\FunctionLikeAnalyzer.php(533): Psalm\\Internal\\Analyzer\\StatementsAnalyzer->analyze(Array, Object(Psalm\\Context), Object(Psalm\\Context), true)\r\n#15 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Analyzer\\ClassAnalyzer.php(1660): Psalm\\Internal\\Analyzer\\FunctionLikeAnalyzer->analyze(Object(Psalm\\Context), Object(Psalm\\Internal\\Provider\\NodeDataProvider), Object(Psalm\\Context))\r\n#16 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Analyzer\\ClassAnalyzer.php(812): Psalm\\Internal\\Analyzer\\ClassAnalyzer->analyzeClassMethod(Object(PhpParser\\Node\\Stmt\\ClassMethod), Object(Psalm\\Storage\\ClassLikeStorage), Object(Psalm\\Internal\\Analyzer\\ClassAnalyzer), Object(Psalm\\Context), Object(Psalm\\Context))\r\n#17 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Analyzer\\FileAnalyzer.php(201): Psalm\\Internal\\Analyzer\\ClassAnalyzer->analyze(Object(Psalm\\Context), Object(Psalm\\Context))\r\n#18 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Codebase\\Analyzer.php(335): Psalm\\Internal\\Analyzer\\FileAnalyzer->analyze(NULL)\r\n#19 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Codebase\\Analyzer.php(569): Psalm\\Internal\\Codebase\\Analyzer->Psalm\\Internal\\Codebase\\{closure}(81, 'C:\\\\Users\\\\emsmit...')\r\n#20 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Codebase\\Analyzer.php(258): Psalm\\Internal\\Codebase\\Analyzer->doAnalysis(Object(Psalm\\Internal\\Analyzer\\ProjectAnalyzer), 1)\r\n#21 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\Psalm\\Internal\\Analyzer\\ProjectAnalyzer.php(528): Psalm\\Internal\\Codebase\\Analyzer->analyzeFiles(Object(Psalm\\Internal\\Analyzer\\ProjectAnalyzer), 1, false)\r\n#22 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\src\\psalm.php(557): Psalm\\Internal\\Analyzer\\ProjectAnalyzer->check('C:\\\\Users\\\\emsmit...', false)\r\n#23 C:\\Users\\emsmith\\AppData\\Roaming\\Composer\\vendor\\vimeo\\psalm\\psalm(2): require_once('C:\\\\Users\\\\emsmit...')\r\n#24 {main}\r\n(Psalm 3.8.5@e6ec5fa22a7b9e61670a24d07b3119aff80dcd89 crashed due to an uncaught Throwable) \r\n```","closed_by":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/2826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vimeo/psalm/issues/2826/timeline","performed_via_github_app":null,"state_reason":"completed"}