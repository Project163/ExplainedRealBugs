{"url":"https://api.github.com/repos/vimeo/psalm/issues/10397","repository_url":"https://api.github.com/repos/vimeo/psalm","labels_url":"https://api.github.com/repos/vimeo/psalm/issues/10397/labels{/name}","comments_url":"https://api.github.com/repos/vimeo/psalm/issues/10397/comments","events_url":"https://api.github.com/repos/vimeo/psalm/issues/10397/events","html_url":"https://github.com/vimeo/psalm/issues/10397","id":2006496697,"node_id":"I_kwDOBG8K9853mLW5","number":10397,"title":"psalm-language-server: Method Psalm\\\\Internal\\\\LanguageServer\\\\Server\\\\TextDocument::documentHighlight() does not exist","user":{"login":"hexmode","id":43581,"node_id":"MDQ6VXNlcjQzNTgx","avatar_url":"https://avatars.githubusercontent.com/u/43581?v=4","gravatar_id":"","url":"https://api.github.com/users/hexmode","html_url":"https://github.com/hexmode","followers_url":"https://api.github.com/users/hexmode/followers","following_url":"https://api.github.com/users/hexmode/following{/other_user}","gists_url":"https://api.github.com/users/hexmode/gists{/gist_id}","starred_url":"https://api.github.com/users/hexmode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hexmode/subscriptions","organizations_url":"https://api.github.com/users/hexmode/orgs","repos_url":"https://api.github.com/users/hexmode/repos","events_url":"https://api.github.com/users/hexmode/events{/privacy}","received_events_url":"https://api.github.com/users/hexmode/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"tm1000","id":564256,"node_id":"MDQ6VXNlcjU2NDI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/564256?v=4","gravatar_id":"","url":"https://api.github.com/users/tm1000","html_url":"https://github.com/tm1000","followers_url":"https://api.github.com/users/tm1000/followers","following_url":"https://api.github.com/users/tm1000/following{/other_user}","gists_url":"https://api.github.com/users/tm1000/gists{/gist_id}","starred_url":"https://api.github.com/users/tm1000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tm1000/subscriptions","organizations_url":"https://api.github.com/users/tm1000/orgs","repos_url":"https://api.github.com/users/tm1000/repos","events_url":"https://api.github.com/users/tm1000/events{/privacy}","received_events_url":"https://api.github.com/users/tm1000/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"tm1000","id":564256,"node_id":"MDQ6VXNlcjU2NDI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/564256?v=4","gravatar_id":"","url":"https://api.github.com/users/tm1000","html_url":"https://github.com/tm1000","followers_url":"https://api.github.com/users/tm1000/followers","following_url":"https://api.github.com/users/tm1000/following{/other_user}","gists_url":"https://api.github.com/users/tm1000/gists{/gist_id}","starred_url":"https://api.github.com/users/tm1000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tm1000/subscriptions","organizations_url":"https://api.github.com/users/tm1000/orgs","repos_url":"https://api.github.com/users/tm1000/repos","events_url":"https://api.github.com/users/tm1000/events{/privacy}","received_events_url":"https://api.github.com/users/tm1000/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":12,"created_at":"2023-11-22T14:42:50Z","updated_at":"2025-09-08T08:23:22Z","closed_at":"2023-11-26T20:36:08Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Installed in emacs, moving my cursor to a problematic line ends up with the following output in my eglot buffer:\r\n```\r\n[server-reply] (id:3) ERROR Wed Nov 22 09:36:10 2023:\r\n(:jsonrpc \"2.0\" :id 3 :error\r\n\t\t  (:message \"Method Psalm\\\\Internal\\\\LanguageServer\\\\Server\\\\TextDocument::documentHighlight() does not exist\"\r\n\t\t\t\t\t:code -32601 :data nil))\r\n[internal] (id:3) ERROR Wed Nov 22 09:36:10 2023:\r\n(:message\r\n \"error ignored, status set (Method Psalm\\\\Internal\\\\LanguageServer\\\\Server\\\\TextDocument::documentHighlight() does not exist)\"\r\n :id 3 :error -32601)\r\n ```\r\n \r\n Entire buffer:\r\n ```\r\n [internal] Wed Nov 22 09:35:47 2023:\r\n(:message \"Running language server: /home/mah/bin/psalm-language-server\")\r\n[client-request] (id:1) Wed Nov 22 09:35:47 2023:\r\n(:jsonrpc \"2.0\" :id 1 :method \"initialize\" :params\r\n\t\t  (:processId 2623523 :clientInfo (:name \"Eglot\" :version \"1.15\") :rootPath \"/home/mah/work/code/psalter-test/\"\r\n\t\t\t\t\t  :rootUri \"file:///home/mah/work/code/psalter-test\" :initializationOptions\r\n\t\t\t\t\t  #s(hash-table size 1 test eql rehash-size 1.5 rehash-threshold 0.8125 data ()) :capabilities\r\n\t\t\t\t\t  (:workspace\r\n\t\t\t\t\t   (:applyEdit t :executeCommand (:dynamicRegistration :json-false) :workspaceEdit\r\n\t\t\t\t\t\t\t\t   (:documentChanges t) :didChangeWatchedFiles (:dynamicRegistration t) :symbol\r\n\t\t\t\t\t\t\t\t   (:dynamicRegistration :json-false) :configuration t :workspaceFolders t)\r\n\t\t\t\t\t   :textDocument\r\n\t\t\t\t\t   (:synchronization (:dynamicRegistration :json-false :willSave t :willSaveWaitUntil t :didSave t)\r\n\t\t\t\t\t\t\t\t\t\t :completion\r\n\t\t\t\t\t\t\t\t\t\t (:dynamicRegistration :json-false :completionItem\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   (:snippetSupport :json-false :deprecatedSupport t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:resolveSupport\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(:properties\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t [\"documentation\" \"details\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \"additionalTextEdits\"])\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:tagSupport (:valueSet [1]))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   :contextSupport t)\r\n\t\t\t\t\t\t\t\t\t\t :hover\r\n\t\t\t\t\t\t\t\t\t\t (:dynamicRegistration :json-false :contentFormat [\"markdown\" \"plaintext\"])\r\n\t\t\t\t\t\t\t\t\t\t :signatureHelp\r\n\t\t\t\t\t\t\t\t\t\t (:dynamicRegistration :json-false :signatureInformation\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   (:parameterInformation (:labelOffsetSupport t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  :documentationFormat\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  [\"markdown\" \"plaintext\"]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  :activeParameterSupport t))\r\n\t\t\t\t\t\t\t\t\t\t :references (:dynamicRegistration :json-false) :definition\r\n\t\t\t\t\t\t\t\t\t\t (:dynamicRegistration :json-false :linkSupport t) :declaration\r\n\t\t\t\t\t\t\t\t\t\t (:dynamicRegistration :json-false :linkSupport t) :implementation\r\n\t\t\t\t\t\t\t\t\t\t (:dynamicRegistration :json-false :linkSupport t) :typeDefinition\r\n\t\t\t\t\t\t\t\t\t\t (:dynamicRegistration :json-false :linkSupport t) :documentSymbol\r\n\t\t\t\t\t\t\t\t\t\t (:dynamicRegistration :json-false :hierarchicalDocumentSymbolSupport t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   :symbolKind\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   (:valueSet\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   22 23 24 25 26]))\r\n\t\t\t\t\t\t\t\t\t\t :documentHighlight (:dynamicRegistration :json-false) :codeAction\r\n\t\t\t\t\t\t\t\t\t\t (:dynamicRegistration :json-false :resolveSupport\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   (:properties [\"edit\" \"command\"]) :dataSupport t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   :codeActionLiteralSupport\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   (:codeActionKind\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(:valueSet\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t [\"quickfix\" \"refactor\" \"refactor.extract\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \"refactor.inline\" \"refactor.rewrite\" \"source\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \"source.organizeImports\"]))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   :isPreferredSupport t)\r\n\t\t\t\t\t\t\t\t\t\t :formatting (:dynamicRegistration :json-false) :rangeFormatting\r\n\t\t\t\t\t\t\t\t\t\t (:dynamicRegistration :json-false) :rename (:dynamicRegistration :json-false)\r\n\t\t\t\t\t\t\t\t\t\t :inlayHint (:dynamicRegistration :json-false) :publishDiagnostics\r\n\t\t\t\t\t\t\t\t\t\t (:relatedInformation :json-false :codeDescriptionSupport :json-false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  :tagSupport (:valueSet [1 2])))\r\n\t\t\t\t\t   :window (:showDocument (:support t) :workDoneProgress t) :general\r\n\t\t\t\t\t   (:positionEncodings [\"utf-32\" \"utf-8\" \"utf-16\"]) :experimental\r\n\t\t\t\t\t   #s(hash-table size 1 test eql rehash-size 1.5 rehash-threshold 0.8125 data ()))\r\n\t\t\t\t\t  :workspaceFolders\r\n\t\t\t\t\t  [(:uri \"file:///home/mah/work/code/psalter-test\" :name \"~/work/code/psalter-test/\")]))\r\n[server-notification] Wed Nov 22 09:35:48 2023:\r\n(:jsonrpc \"2.0\" :method \"window/logMessage\" :params\r\n\t\t  (:type 3 :message \"Psalm Language Server 5.x-dev@577808b12da647dd87abb435447dc6429361afdb has started.\"))\r\n[server-notification] Wed Nov 22 09:35:48 2023:\r\n(:jsonrpc \"2.0\" :method \"window/logMessage\" :params (:type 3 :message \"Initializing...\"))\r\n[server-notification] Wed Nov 22 09:35:48 2023:\r\n(:jsonrpc \"2.0\" :method \"$/progress\" :params\r\n\t\t  (:token \"tkn655e11c41d8890.39835496\" :value (:kind \"begin\" :title \"Psalm\" :message \"initializing\")))\r\n[server-notification] Wed Nov 22 09:35:48 2023:\r\n(:jsonrpc \"2.0\" :method \"window/logMessage\" :params (:type 3 :message \"Initializing: Visiting Autoload Files...\"))\r\n[server-notification] Wed Nov 22 09:35:49 2023:\r\n(:jsonrpc \"2.0\" :method \"window/logMessage\" :params (:type 3 :message \"Initializing: Loading Reference Cache...\"))\r\n[server-notification] Wed Nov 22 09:35:49 2023:\r\n(:jsonrpc \"2.0\" :method \"window/logMessage\" :params (:type 3 :message \"Initializing: Initialize Plugins...\"))\r\n[server-notification] Wed Nov 22 09:35:49 2023:\r\n(:jsonrpc \"2.0\" :method \"window/logMessage\" :params (:type 3 :message \"Initializing: Getting code base...\"))\r\n[server-notification] Wed Nov 22 09:35:49 2023:\r\n(:jsonrpc \"2.0\" :method \"$/progress\" :params\r\n\t\t  (:token \"tkn655e11c41d8890.39835496\" :value (:kind \"report\" :message \"getting code base\")))\r\n[server-notification] Wed Nov 22 09:35:49 2023:\r\n(:jsonrpc \"2.0\" :method \"window/logMessage\" :params (:type 3 :message \"Initializing: Scanning files (6 Threads)...\"))\r\n[server-notification] Wed Nov 22 09:35:49 2023:\r\n(:jsonrpc \"2.0\" :method \"$/progress\" :params\r\n\t\t  (:token \"tkn655e11c41d8890.39835496\" :value (:kind \"report\" :message \"scanning files\")))\r\n[server-notification] Wed Nov 22 09:35:49 2023:\r\n(:jsonrpc \"2.0\" :method \"window/logMessage\" :params (:type 3 :message \"Initializing: Registering stub files...\"))\r\n[server-notification] Wed Nov 22 09:35:49 2023:\r\n(:jsonrpc \"2.0\" :method \"$/progress\" :params\r\n\t\t  (:token \"tkn655e11c41d8890.39835496\" :value (:kind \"report\" :message \"registering stub files\")))\r\n[server-notification] Wed Nov 22 09:35:49 2023:\r\n(:jsonrpc \"2.0\" :method \"window/logMessage\" :params (:type 3 :message \"Initializing: Complete.\"))\r\n[server-notification] Wed Nov 22 09:35:49 2023:\r\n(:jsonrpc \"2.0\" :method \"$/progress\" :params\r\n\t\t  (:token \"tkn655e11c41d8890.39835496\" :value (:kind \"end\" :message \"initialized\")))\r\n[server-reply] (id:1) Wed Nov 22 09:35:49 2023:\r\n(:jsonrpc \"2.0\" :id 1 :result\r\n\t\t  (:capabilities\r\n\t\t   (:textDocumentSync (:openClose t :change 1 :willSave nil :willSaveWaitUntil nil :save (:includeText t))\r\n\t\t\t\t\t\t\t  :hoverProvider t :completionProvider\r\n\t\t\t\t\t\t\t  (:resolveProvider :json-false :triggerCharacters [\"$\" \">\" \":\" \"[\" \"(\" \",\" \" \"])\r\n\t\t\t\t\t\t\t  :signatureHelpProvider (:triggerCharacters [\"(\" \",\"]) :definitionProvider t\r\n\t\t\t\t\t\t\t  :typeDefinitionProvider nil :implementationProvider nil :referencesProvider :json-false\r\n\t\t\t\t\t\t\t  :documentHighlightProvider nil :documentSymbolProvider :json-false\r\n\t\t\t\t\t\t\t  :workspaceSymbolProvider :json-false :codeActionProvider nil :codeLensProvider nil\r\n\t\t\t\t\t\t\t  :documentFormattingProvider nil :documentRangeFormattingProvider nil\r\n\t\t\t\t\t\t\t  :documentOnTypeFormattingProvider nil :renameProvider nil :executeCommandProvider nil\r\n\t\t\t\t\t\t\t  :xworkspaceReferencesProvider nil :xdefinitionProvider nil :dependenciesProvider nil)\r\n\t\t   :serverInfo (:name \"Psalm Language Server\" :version \"5.x-dev@577808b12da647dd87abb435447dc6429361afdb\")))\r\n[client-notification] Wed Nov 22 09:35:49 2023:\r\n(:jsonrpc \"2.0\" :method \"initialized\" :params\r\n\t\t  #s(hash-table size 1 test eql rehash-size 1.5 rehash-threshold 0.8125 data ()))\r\n[client-notification] Wed Nov 22 09:35:49 2023:\r\n(:jsonrpc \"2.0\" :method \"textDocument/didOpen\" :params\r\n\t\t  (:textDocument\r\n\t\t   (:uri \"file:///home/mah/work/code/psalter-test/src/Test.php\" :version 0 :languageId \"php\" :text\r\n\t\t\t\t \"<?php\\n\\nnamespace Hexmode\\\\Psaltertest;\\n\\nclas Test {\\n}\\n\")))\r\n[server-request] (id:1) Wed Nov 22 09:35:49 2023:\r\n(:jsonrpc \"2.0\" :id 1 :method \"workspace/configuration\" :params (:items [(:section \"psalm\" :scopeUri nil)]))\r\n[client-reply] (id:1) Wed Nov 22 09:35:49 2023:\r\n(:jsonrpc \"2.0\" :id 1 :result [nil])\r\n[server-notification] Wed Nov 22 09:35:49 2023:\r\n(:jsonrpc \"2.0\" :method \"telemetry/event\" :params (:type 3 :message \"running\"))\r\n[server-notification] Wed Nov 22 09:35:49 2023:\r\n(:jsonrpc \"2.0\" :method \"textDocument/publishDiagnostics\" :params\r\n\t\t  (:uri \"file:///home/mah/work/code/psalter-test/src/Test.php\" :diagnostics\r\n\t\t\t\t[(:range (:start (:line 4 :character 5) :end (:line 4 :character 9)) :severity 1 :code 173\r\n\t\t\t\t\t\t :codeDescription nil :source \"psalm\" :message \"Syntax error, unexpected T_STRING on line 5\"\r\n\t\t\t\t\t\t :tags nil :relatedInformation nil :data\r\n\t\t\t\t\t\t (:type \"ParseError\" :snippet \"clas Test {\" :line_from 5 :line_to 5))\r\n\t\t\t\t (:range (:start (:line 4 :character 0) :end (:line 4 :character 4)) :severity 1 :code 20\r\n\t\t\t\t\t\t :codeDescription nil :source \"psalm\" :message \"Const clas is not defined\" :tags nil\r\n\t\t\t\t\t\t :relatedInformation nil :data\r\n\t\t\t\t\t\t (:type \"UndefinedConstant\" :snippet \"clas Test {\" :line_from 5 :line_to 5))]\r\n\t\t\t\t:version 0))\r\n[client-request] (id:2) Wed Nov 22 09:36:10 2023:\r\n(:jsonrpc \"2.0\" :id 2 :method \"textDocument/hover\" :params\r\n\t\t  (:textDocument (:uri \"file:///home/mah/work/code/psalter-test/src/Test.php\") :position (:line 4 :character 1)))\r\n[client-request] (id:3) Wed Nov 22 09:36:10 2023:\r\n(:jsonrpc \"2.0\" :id 3 :method \"textDocument/documentHighlight\" :params\r\n\t\t  (:textDocument (:uri \"file:///home/mah/work/code/psalter-test/src/Test.php\") :position (:line 4 :character 1)))\r\n[client-request] (id:4) Wed Nov 22 09:36:10 2023:\r\n(:jsonrpc \"2.0\" :id 4 :method \"textDocument/signatureHelp\" :params\r\n\t\t  (:textDocument (:uri \"file:///home/mah/work/code/psalter-test/src/Test.php\") :position (:line 4 :character 1)))\r\n[server-reply] (id:2) Wed Nov 22 09:36:10 2023:\r\n(:jsonrpc \"2.0\" :id 2 :result\r\n\t\t  (:contents (:kind \"markdown\" :value \"```php\\n<?php\\n*Hexmode\\\\Psaltertest-clas\\n```\") :range\r\n\t\t\t\t\t (:start (:line 4 :character 0) :end (:line 4 :character 4))))\r\n[server-notification] Wed Nov 22 09:36:10 2023:\r\n(:jsonrpc \"2.0\" :method \"window/logMessage\" :params\r\n\t\t  (:type 1 :message\r\n\t\t\t\t \"Method Psalm\\\\Internal\\\\LanguageServer\\\\Server\\\\TextDocument::documentHighlight() does not exist\"))\r\n[server-reply] (id:3) ERROR Wed Nov 22 09:36:10 2023:\r\n(:jsonrpc \"2.0\" :id 3 :error\r\n\t\t  (:message \"Method Psalm\\\\Internal\\\\LanguageServer\\\\Server\\\\TextDocument::documentHighlight() does not exist\"\r\n\t\t\t\t\t:code -32601 :data nil))\r\n[internal] (id:3) ERROR Wed Nov 22 09:36:10 2023:\r\n(:message\r\n \"error ignored, status set (Method Psalm\\\\Internal\\\\LanguageServer\\\\Server\\\\TextDocument::documentHighlight() does not exist)\"\r\n :id 3 :error -32601)\r\n[server-reply] (id:4) Wed Nov 22 09:36:10 2023:\r\n(:jsonrpc \"2.0\" :id 4 :result nil)\r\n```\r\n\r\n","closed_by":{"login":"orklah","id":9605520,"node_id":"MDQ6VXNlcjk2MDU1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9605520?v=4","gravatar_id":"","url":"https://api.github.com/users/orklah","html_url":"https://github.com/orklah","followers_url":"https://api.github.com/users/orklah/followers","following_url":"https://api.github.com/users/orklah/following{/other_user}","gists_url":"https://api.github.com/users/orklah/gists{/gist_id}","starred_url":"https://api.github.com/users/orklah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orklah/subscriptions","organizations_url":"https://api.github.com/users/orklah/orgs","repos_url":"https://api.github.com/users/orklah/repos","events_url":"https://api.github.com/users/orklah/events{/privacy}","received_events_url":"https://api.github.com/users/orklah/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/10397/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vimeo/psalm/issues/10397/timeline","performed_via_github_app":null,"state_reason":"completed"}