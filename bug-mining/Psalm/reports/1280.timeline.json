[{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/2736367309","html_url":"https://github.com/vimeo/psalm/issues/11363#issuecomment-2736367309","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/11363","id":2736367309,"node_id":"IC_kwDOBG8K986jGabN","user":{"login":"psalm-github-bot[bot]","id":58627613,"node_id":"MDM6Qm90NTg2Mjc2MTM=","avatar_url":"https://avatars.githubusercontent.com/in/48546?v=4","gravatar_id":"","url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D","html_url":"https://github.com/apps/psalm-github-bot","followers_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2025-03-19T11:55:52Z","updated_at":"2025-03-19T11:55:52Z","body":"Hey @cseufert, can you reproduce the issue on https://psalm.dev? These will be used as phpunit tests when implementing the feature or fixing this bug.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/2736367309/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":{"id":48546,"client_id":"Iv1.747f5d6e3a8a4657","slug":"psalm-github-bot","node_id":"MDM6QXBwNDg1NDY=","owner":{"login":"psalm","id":40830242,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQwODMwMjQy","avatar_url":"https://avatars.githubusercontent.com/u/40830242?v=4","gravatar_id":"","url":"https://api.github.com/users/psalm","html_url":"https://github.com/psalm","followers_url":"https://api.github.com/users/psalm/followers","following_url":"https://api.github.com/users/psalm/following{/other_user}","gists_url":"https://api.github.com/users/psalm/gists{/gist_id}","starred_url":"https://api.github.com/users/psalm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalm/subscriptions","organizations_url":"https://api.github.com/users/psalm/orgs","repos_url":"https://api.github.com/users/psalm/repos","events_url":"https://api.github.com/users/psalm/events{/privacy}","received_events_url":"https://api.github.com/users/psalm/received_events","type":"Organization","user_view_type":"public","site_admin":false},"name":"Psalm Github bot","description":"Github bot that monitors comments for any links to snippets posted to psalm.dev and responds with a snippet content and results of the Psalm run on that snippet.","external_url":"https://github.com/psalm/psalm-github-bot","html_url":"https://github.com/apps/psalm-github-bot","created_at":"2019-12-07T12:05:20Z","updated_at":"2022-10-01T02:44:56Z","permissions":{"issues":"write","metadata":"read","pull_requests":"write"},"events":["issues","issue_comment","pull_request"]},"event":"commented","actor":{"login":"psalm-github-bot[bot]","id":58627613,"node_id":"MDM6Qm90NTg2Mjc2MTM=","avatar_url":"https://avatars.githubusercontent.com/in/48546?v=4","gravatar_id":"","url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D","html_url":"https://github.com/apps/psalm-github-bot","followers_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false}},{"id":16862862746,"node_id":"MEE_lADOBG8K986uu1syzwAAAAPtGt2a","url":"https://api.github.com/repos/vimeo/psalm/issues/events/16862862746","actor":{"login":"cseufert","id":1734519,"node_id":"MDQ6VXNlcjE3MzQ1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/1734519?v=4","gravatar_id":"","url":"https://api.github.com/users/cseufert","html_url":"https://github.com/cseufert","followers_url":"https://api.github.com/users/cseufert/followers","following_url":"https://api.github.com/users/cseufert/following{/other_user}","gists_url":"https://api.github.com/users/cseufert/gists{/gist_id}","starred_url":"https://api.github.com/users/cseufert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cseufert/subscriptions","organizations_url":"https://api.github.com/users/cseufert/orgs","repos_url":"https://api.github.com/users/cseufert/repos","events_url":"https://api.github.com/users/cseufert/events{/privacy}","received_events_url":"https://api.github.com/users/cseufert/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-03-19T11:55:52Z","performed_via_github_app":null},{"id":16862862770,"node_id":"SE_lADOBG8K986uu1syzwAAAAPtGt2y","url":"https://api.github.com/repos/vimeo/psalm/issues/events/16862862770","actor":{"login":"cseufert","id":1734519,"node_id":"MDQ6VXNlcjE3MzQ1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/1734519?v=4","gravatar_id":"","url":"https://api.github.com/users/cseufert","html_url":"https://github.com/cseufert","followers_url":"https://api.github.com/users/cseufert/followers","following_url":"https://api.github.com/users/cseufert/following{/other_user}","gists_url":"https://api.github.com/users/cseufert/gists{/gist_id}","starred_url":"https://api.github.com/users/cseufert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cseufert/subscriptions","organizations_url":"https://api.github.com/users/cseufert/orgs","repos_url":"https://api.github.com/users/cseufert/repos","events_url":"https://api.github.com/users/cseufert/events{/privacy}","received_events_url":"https://api.github.com/users/cseufert/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-03-19T11:55:53Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/2736392553","html_url":"https://github.com/vimeo/psalm/issues/11363#issuecomment-2736392553","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/11363","id":2736392553,"node_id":"IC_kwDOBG8K986jGglp","user":{"login":"cseufert","id":1734519,"node_id":"MDQ6VXNlcjE3MzQ1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/1734519?v=4","gravatar_id":"","url":"https://api.github.com/users/cseufert","html_url":"https://github.com/cseufert","followers_url":"https://api.github.com/users/cseufert/followers","following_url":"https://api.github.com/users/cseufert/following{/other_user}","gists_url":"https://api.github.com/users/cseufert/gists{/gist_id}","starred_url":"https://api.github.com/users/cseufert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cseufert/subscriptions","organizations_url":"https://api.github.com/users/cseufert/orgs","repos_url":"https://api.github.com/users/cseufert/repos","events_url":"https://api.github.com/users/cseufert/events{/privacy}","received_events_url":"https://api.github.com/users/cseufert/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-19T12:04:00Z","updated_at":"2025-03-19T12:04:00Z","body":"I have run with --threads=0 and still crashes, with slightly different error:\n\n```\nUncaught UnexpectedValueException: This should not happen in /home/chris/code/moddengine-stable/vendor/vimeo/psalm/src/Psalm/Internal/Provider/ReturnTypeProvider/FilterInputReturnTypeProvider.php:247\nStack trace:\n#0 /home/chris/code/moddengine-stable/vendor/vimeo/psalm/src/Psalm/Internal/Provider/FunctionReturnTypeProvider.php(162): Psalm\\Internal\\Provider\\ReturnTypeProvider\\FilterInputReturnTypeProvider::getFunctionReturnType(Object(Psalm\\Plugin\\EventHandler\\Event\\FunctionReturnTypeProviderEvent))\n#1 /home/chris/code/moddengine-stable/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/Expression/Call/FunctionCallReturnTypeFetcher.php(103): Psalm\\Internal\\Provider\\FunctionReturnTypeProvider->getReturnType(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), 'filter_input', Object(PhpParser\\Node\\Expr\\FuncCall), Object(Psalm\\Context), Object(Psalm\\CodeLocation))\n#2 /home/chris/code/moddengine-stable/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/Expression/Call/FunctionCallAnalyzer.php(246): Psalm\\Internal\\Analyzer\\Statements\\Expression\\Call\\FunctionCallReturnTypeFetcher::fetch(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(Psalm\\Codebase), Object(PhpParser\\Node\\Expr\\FuncCall), Object(PhpParser\\Node\\Name), 'filter_input', true, false, NULL, Object(Psalm\\Type\\Atomic\\TCallable), Object(Psalm\\Internal\\Type\\TemplateResult), Object(Psalm\\Context))\n#3 /home/chris/code/moddengine-stable/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/ExpressionAnalyzer.php(318): Psalm\\Internal\\Analyzer\\Statements\\Expression\\Call\\FunctionCallAnalyzer::analyze(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(PhpParser\\Node\\Expr\\FuncCall), Object(Psalm\\Context), Object(Psalm\\Internal\\Type\\TemplateResult))\n#4 /home/chris/code/moddengine-stable/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/ExpressionAnalyzer.php(92): Psalm\\Internal\\Analyzer\\Statements\\ExpressionAnalyzer::handleExpression(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(PhpParser\\Node\\Expr\\FuncCall), Object(Psalm\\Context), false, NULL, NULL, NULL, false)\n...\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/2736392553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cseufert","id":1734519,"node_id":"MDQ6VXNlcjE3MzQ1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/1734519?v=4","gravatar_id":"","url":"https://api.github.com/users/cseufert","html_url":"https://github.com/cseufert","followers_url":"https://api.github.com/users/cseufert/followers","following_url":"https://api.github.com/users/cseufert/following{/other_user}","gists_url":"https://api.github.com/users/cseufert/gists{/gist_id}","starred_url":"https://api.github.com/users/cseufert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cseufert/subscriptions","organizations_url":"https://api.github.com/users/cseufert/orgs","repos_url":"https://api.github.com/users/cseufert/repos","events_url":"https://api.github.com/users/cseufert/events{/privacy}","received_events_url":"https://api.github.com/users/cseufert/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/2736433162","html_url":"https://github.com/vimeo/psalm/issues/11363#issuecomment-2736433162","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/11363","id":2736433162,"node_id":"IC_kwDOBG8K986jGqgK","user":{"login":"cseufert","id":1734519,"node_id":"MDQ6VXNlcjE3MzQ1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/1734519?v=4","gravatar_id":"","url":"https://api.github.com/users/cseufert","html_url":"https://github.com/cseufert","followers_url":"https://api.github.com/users/cseufert/followers","following_url":"https://api.github.com/users/cseufert/following{/other_user}","gists_url":"https://api.github.com/users/cseufert/gists{/gist_id}","starred_url":"https://api.github.com/users/cseufert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cseufert/subscriptions","organizations_url":"https://api.github.com/users/cseufert/orgs","repos_url":"https://api.github.com/users/cseufert/repos","events_url":"https://api.github.com/users/cseufert/events{/privacy}","received_events_url":"https://api.github.com/users/cseufert/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-19T12:18:50Z","updated_at":"2025-03-19T12:18:50Z","body":"No idea why this example crashes psalm, but only when run in the context of my project\n\nhttps://psalm.dev/r/15a8065a34","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/2736433162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cseufert","id":1734519,"node_id":"MDQ6VXNlcjE3MzQ1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/1734519?v=4","gravatar_id":"","url":"https://api.github.com/users/cseufert","html_url":"https://github.com/cseufert","followers_url":"https://api.github.com/users/cseufert/followers","following_url":"https://api.github.com/users/cseufert/following{/other_user}","gists_url":"https://api.github.com/users/cseufert/gists{/gist_id}","starred_url":"https://api.github.com/users/cseufert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cseufert/subscriptions","organizations_url":"https://api.github.com/users/cseufert/orgs","repos_url":"https://api.github.com/users/cseufert/repos","events_url":"https://api.github.com/users/cseufert/events{/privacy}","received_events_url":"https://api.github.com/users/cseufert/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/2736433298","html_url":"https://github.com/vimeo/psalm/issues/11363#issuecomment-2736433298","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/11363","id":2736433298,"node_id":"IC_kwDOBG8K986jGqiS","user":{"login":"psalm-github-bot[bot]","id":58627613,"node_id":"MDM6Qm90NTg2Mjc2MTM=","avatar_url":"https://avatars.githubusercontent.com/in/48546?v=4","gravatar_id":"","url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D","html_url":"https://github.com/apps/psalm-github-bot","followers_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2025-03-19T12:18:53Z","updated_at":"2025-03-19T12:18:53Z","body":"I found these snippets:\n<details>\n<summary>https://psalm.dev/r/15a8065a34</summary>\n\n```php\n<?php\n\nnamespace Modd\\Engine\\Plugins\\ServerDate;\n\nuse Psr\\Http\\Message\\ResponseInterface;\n\nclass HttpApi\n{\n  /**\n   * @url /\n   * @return bool|string\n   * @throws \\Exception\n   */\n  static function serverDate(ResponseInterface $response)\n  {\n    $now = round(1000 * microtime(true));\n    $res = $response->withHeader('Content-Type', 'application/json');\n    if (filter_input(INPUT_GET, 'time')) {\n      $res->getBody()->write($now);\n      return $res;\n    }\n    $out = file_get_contents(\n      ME_DIR .\n        implode(DIRECTORY_SEPARATOR, [\n          '',\n          'plugin',\n          'moddeng',\n          'serverdate',\n          'js',\n          'serverdate.js',\n        ]),\n    );\n    $out .= \"($now);\";\n    $res->getBody()->write($out);\n\n    return $res;\n  }\n}\n```\n\n```\nPsalm output (using commit 354b4d4):\n\nERROR: InvalidOperand - 16:18 - Cannot process ints and floats in strict binary operands mode, please cast explicitly\n\nERROR: RiskyTruthyFalsyComparison - 18:9 - Operand of type false|null|string contains type string, which can be falsy and truthy. This can cause possibly unexpected behavior. Use strict comparison instead.\n\nERROR: InvalidScalarArgument - 19:30 - Argument 1 of Psr\\Http\\Message\\StreamInterface::write expects string, but float provided\n\nERROR: InvalidReturnStatement - 20:14 - The inferred type 'Psr\\Http\\Message\\ResponseInterface&static' does not match the declared return type 'bool|string' for Modd\\Engine\\Plugins\\ServerDate\\HttpApi::serverDate\n\nERROR: UndefinedConstant - 23:7 - Const ME_DIR is not defined, consider enabling the allConstantsGlobal config option if scanning legacy codebases\n\nERROR: InvalidReturnStatement - 36:12 - The inferred type 'Psr\\Http\\Message\\ResponseInterface&static' does not match the declared return type 'bool|string' for Modd\\Engine\\Plugins\\ServerDate\\HttpApi::serverDate\n\nERROR: InvalidReturnType - 11:14 - The declared return type 'bool|string' for Modd\\Engine\\Plugins\\ServerDate\\HttpApi::serverDate is incorrect, got 'Psr\\Http\\Message\\ResponseInterface&static'\n```\n</details>\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/2736433298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":{"id":48546,"client_id":"Iv1.747f5d6e3a8a4657","slug":"psalm-github-bot","node_id":"MDM6QXBwNDg1NDY=","owner":{"login":"psalm","id":40830242,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQwODMwMjQy","avatar_url":"https://avatars.githubusercontent.com/u/40830242?v=4","gravatar_id":"","url":"https://api.github.com/users/psalm","html_url":"https://github.com/psalm","followers_url":"https://api.github.com/users/psalm/followers","following_url":"https://api.github.com/users/psalm/following{/other_user}","gists_url":"https://api.github.com/users/psalm/gists{/gist_id}","starred_url":"https://api.github.com/users/psalm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalm/subscriptions","organizations_url":"https://api.github.com/users/psalm/orgs","repos_url":"https://api.github.com/users/psalm/repos","events_url":"https://api.github.com/users/psalm/events{/privacy}","received_events_url":"https://api.github.com/users/psalm/received_events","type":"Organization","user_view_type":"public","site_admin":false},"name":"Psalm Github bot","description":"Github bot that monitors comments for any links to snippets posted to psalm.dev and responds with a snippet content and results of the Psalm run on that snippet.","external_url":"https://github.com/psalm/psalm-github-bot","html_url":"https://github.com/apps/psalm-github-bot","created_at":"2019-12-07T12:05:20Z","updated_at":"2022-10-01T02:44:56Z","permissions":{"issues":"write","metadata":"read","pull_requests":"write"},"events":["issues","issue_comment","pull_request"]},"event":"commented","actor":{"login":"psalm-github-bot[bot]","id":58627613,"node_id":"MDM6Qm90NTg2Mjc2MTM=","avatar_url":"https://avatars.githubusercontent.com/in/48546?v=4","gravatar_id":"","url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D","html_url":"https://github.com/apps/psalm-github-bot","followers_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false}},{"id":16900336296,"node_id":"REFE_lADOBG8K986uu1syzwAAAAPvVqqo","url":"https://api.github.com/repos/vimeo/psalm/issues/events/16900336296","actor":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"51fd960ecafc07b863e8f0fe5d966a38ea67938e","commit_url":"https://api.github.com/repos/vimeo/psalm/commits/51fd960ecafc07b863e8f0fe5d966a38ea67938e","created_at":"2025-03-20T10:49:54Z","performed_via_github_app":null},{"id":16900431114,"node_id":"REFE_lADOBG8K986uu1syzwAAAAPvWB0K","url":"https://api.github.com/repos/vimeo/psalm/issues/events/16900431114","actor":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"974a78b14ad555a0a276890b329d46dd7312323d","commit_url":"https://api.github.com/repos/vimeo/psalm/commits/974a78b14ad555a0a276890b329d46dd7312323d","created_at":"2025-03-20T10:53:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/2739944008","html_url":"https://github.com/vimeo/psalm/issues/11363#issuecomment-2739944008","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/11363","id":2739944008,"node_id":"IC_kwDOBG8K986jUDpI","user":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-20T10:53:12Z","updated_at":"2025-03-20T10:53:12Z","body":"Fixed in the next release.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/2739944008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":16900458322,"node_id":"CE_lADOBG8K986uu1syzwAAAAPvWIdS","url":"https://api.github.com/repos/vimeo/psalm/issues/events/16900458322","actor":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2025-03-20T10:53:12Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/2742477588","html_url":"https://github.com/vimeo/psalm/issues/11363#issuecomment-2742477588","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/11363","id":2742477588,"node_id":"IC_kwDOBG8K986jduMU","user":{"login":"wannevancamp","id":3399877,"node_id":"MDQ6VXNlcjMzOTk4Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/3399877?v=4","gravatar_id":"","url":"https://api.github.com/users/wannevancamp","html_url":"https://github.com/wannevancamp","followers_url":"https://api.github.com/users/wannevancamp/followers","following_url":"https://api.github.com/users/wannevancamp/following{/other_user}","gists_url":"https://api.github.com/users/wannevancamp/gists{/gist_id}","starred_url":"https://api.github.com/users/wannevancamp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wannevancamp/subscriptions","organizations_url":"https://api.github.com/users/wannevancamp/orgs","repos_url":"https://api.github.com/users/wannevancamp/repos","events_url":"https://api.github.com/users/wannevancamp/events{/privacy}","received_events_url":"https://api.github.com/users/wannevancamp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-21T06:37:01Z","updated_at":"2025-03-21T06:37:01Z","body":"I'm unsure if it's related, but the latest versions (since 6.9.1 ?) recently started crashing in the pipeline.\n\n```\nRunning on PHP 8.2.28, Psalm 6.9.4@e052de4275fb6cdbfedfef1d883a7e90732ea609.\nJIT acceleration: ON\nJIT compilation in progress... Uncaught ParseError: syntax error, unexpected identifier \"OLD\", expecting \"=\" in /opt/atlassian/pipelines/agent/build/vendor/sebastian/diff/src/Differ.php:33\nStack trace:\n#0 /opt/atlassian/pipelines/agent/build/vendor/composer/ClassLoader.php(427): Composer\\Autoload\\{closure}('/opt/atlassian/...')\n#1 [internal function]: Composer\\Autoload\\ClassLoader->loadClass('SebastianBergma...')\n#2 /opt/atlassian/pipelines/agent/build/vendor/vimeo/psalm/src/Psalm/Internal/Preloader.php(27): class_exists('SebastianBergma...')\n#3 /opt/atlassian/pipelines/agent/build/vendor/vimeo/psalm/src/Psalm/Internal/Cli/Psalm.php(1025): Psalm\\Internal\\Preloader::preload(Object(Psalm\\Progress\\LongProgress), true)\n#4 /opt/atlassian/pipelines/agent/build/vendor/vimeo/psalm/src/Psalm/Internal/Cli/Psalm.php(287): Psalm\\Internal\\Cli\\Psalm::restart(Array, 1, 1, Object(Psalm\\Progress\\LongProgress))\n#5 /opt/atlassian/pipelines/agent/build/vendor/vimeo/psalm/psalm(9): Psalm\\Internal\\Cli\\Psalm::run(Array)\n#6 /opt/atlassian/pipelines/agent/build/vendor/bin/psalm(119): include('/opt/atlassian/...')\n#7 {main}\n(Psalm 6.9.4@e052de4275fb6cdbfedfef1d883a7e90732ea609 crashed due to an uncaught Throwable)\nTo skip commit checks, add -n or --no-verify flag to commit command\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/2742477588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wannevancamp","id":3399877,"node_id":"MDQ6VXNlcjMzOTk4Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/3399877?v=4","gravatar_id":"","url":"https://api.github.com/users/wannevancamp","html_url":"https://github.com/wannevancamp","followers_url":"https://api.github.com/users/wannevancamp/followers","following_url":"https://api.github.com/users/wannevancamp/following{/other_user}","gists_url":"https://api.github.com/users/wannevancamp/gists{/gist_id}","starred_url":"https://api.github.com/users/wannevancamp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wannevancamp/subscriptions","organizations_url":"https://api.github.com/users/wannevancamp/orgs","repos_url":"https://api.github.com/users/wannevancamp/repos","events_url":"https://api.github.com/users/wannevancamp/events{/privacy}","received_events_url":"https://api.github.com/users/wannevancamp/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/2742903274","html_url":"https://github.com/vimeo/psalm/issues/11363#issuecomment-2742903274","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/11363","id":2742903274,"node_id":"IC_kwDOBG8K986jfWHq","user":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-21T10:07:54Z","updated_at":"2025-03-21T10:07:54Z","body":"That seems like an issue with your composer packages, you've likely installed sebastian/diff v7, which is not compatible with php 8.2.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/2742903274/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"danog","id":7339644,"node_id":"MDQ6VXNlcjczMzk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7339644?v=4","gravatar_id":"","url":"https://api.github.com/users/danog","html_url":"https://github.com/danog","followers_url":"https://api.github.com/users/danog/followers","following_url":"https://api.github.com/users/danog/following{/other_user}","gists_url":"https://api.github.com/users/danog/gists{/gist_id}","starred_url":"https://api.github.com/users/danog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danog/subscriptions","organizations_url":"https://api.github.com/users/danog/orgs","repos_url":"https://api.github.com/users/danog/repos","events_url":"https://api.github.com/users/danog/events{/privacy}","received_events_url":"https://api.github.com/users/danog/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/2742971553","html_url":"https://github.com/vimeo/psalm/issues/11363#issuecomment-2742971553","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/11363","id":2742971553,"node_id":"IC_kwDOBG8K986jfmyh","user":{"login":"wannevancamp","id":3399877,"node_id":"MDQ6VXNlcjMzOTk4Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/3399877?v=4","gravatar_id":"","url":"https://api.github.com/users/wannevancamp","html_url":"https://github.com/wannevancamp","followers_url":"https://api.github.com/users/wannevancamp/followers","following_url":"https://api.github.com/users/wannevancamp/following{/other_user}","gists_url":"https://api.github.com/users/wannevancamp/gists{/gist_id}","starred_url":"https://api.github.com/users/wannevancamp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wannevancamp/subscriptions","organizations_url":"https://api.github.com/users/wannevancamp/orgs","repos_url":"https://api.github.com/users/wannevancamp/repos","events_url":"https://api.github.com/users/wannevancamp/events{/privacy}","received_events_url":"https://api.github.com/users/wannevancamp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-21T10:36:25Z","updated_at":"2025-03-21T10:36:25Z","body":"Thanks, you're right. That was the issue.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/2742971553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wannevancamp","id":3399877,"node_id":"MDQ6VXNlcjMzOTk4Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/3399877?v=4","gravatar_id":"","url":"https://api.github.com/users/wannevancamp","html_url":"https://github.com/wannevancamp","followers_url":"https://api.github.com/users/wannevancamp/followers","following_url":"https://api.github.com/users/wannevancamp/following{/other_user}","gists_url":"https://api.github.com/users/wannevancamp/gists{/gist_id}","starred_url":"https://api.github.com/users/wannevancamp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wannevancamp/subscriptions","organizations_url":"https://api.github.com/users/wannevancamp/orgs","repos_url":"https://api.github.com/users/wannevancamp/repos","events_url":"https://api.github.com/users/wannevancamp/events{/privacy}","received_events_url":"https://api.github.com/users/wannevancamp/received_events","type":"User","user_view_type":"public","site_admin":false}}]