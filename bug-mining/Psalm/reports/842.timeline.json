[{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/668265299","html_url":"https://github.com/vimeo/psalm/issues/3932#issuecomment-668265299","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/3932","id":668265299,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODI2NTI5OQ==","user":{"login":"psalm-github-bot[bot]","id":58627613,"node_id":"MDM6Qm90NTg2Mjc2MTM=","avatar_url":"https://avatars.githubusercontent.com/in/48546?v=4","gravatar_id":"","url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D","html_url":"https://github.com/apps/psalm-github-bot","followers_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2020-08-03T22:07:34Z","updated_at":"2020-08-03T22:07:34Z","body":"I found these snippets:\n<details>\n<summary>https://psalm.dev/r/453ebf163e</summary>\n\n```php\n<?php\n\nfunction whatever(\n    ?string $value1,\n    ?string $value2,\n    ?string $value3,\n    ?string $value4,\n    ?string $value5\n): bool {\n    return ($value1 !== null && $value1 !== '')\n        || ($value2 !== null && $value2 !== '')\n        || ($value3 !== null && $value3 !== '')\n    \t|| ($value4 !== null && $value4 !== '')\n    \t|| ($value5 !== null && $value5 !== '');\n}\n```\n\n```\nPsalm output (using commit 9dfdcbe):\n\nINFO: UnusedParam - 8:13 - Param $value5 is never referenced in this method\n\nINFO: MixedInferredReturnType - 9:4 - Could not verify return type 'bool' for whatever\n```\n</details>\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/668265299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"psalm-github-bot[bot]","id":58627613,"node_id":"MDM6Qm90NTg2Mjc2MTM=","avatar_url":"https://avatars.githubusercontent.com/in/48546?v=4","gravatar_id":"","url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D","html_url":"https://github.com/apps/psalm-github-bot","followers_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/668271597","html_url":"https://github.com/vimeo/psalm/issues/3932#issuecomment-668271597","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/3932","id":668271597,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODI3MTU5Nw==","user":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-03T22:26:31Z","updated_at":"2020-08-03T22:26:31Z","body":"I think you might be triggering `ComplicatedExpressionException` here .\r\n\r\nSee https://github.com/vimeo/psalm/blob/2399643472a936b03dcf62bd981a75cdc8d32261/src/Psalm/Type/Algebra.php#L669-L671\r\nTransforming the expression using [De Morgan's laws](https://en.wikipedia.org/wiki/De_Morgan%27s_laws) may help: https://psalm.dev/r/37f9fd9f39\r\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/668271597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/668271615","html_url":"https://github.com/vimeo/psalm/issues/3932#issuecomment-668271615","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/3932","id":668271615,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODI3MTYxNQ==","user":{"login":"psalm-github-bot[bot]","id":58627613,"node_id":"MDM6Qm90NTg2Mjc2MTM=","avatar_url":"https://avatars.githubusercontent.com/in/48546?v=4","gravatar_id":"","url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D","html_url":"https://github.com/apps/psalm-github-bot","followers_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2020-08-03T22:26:34Z","updated_at":"2020-08-03T22:26:34Z","body":"I found these snippets:\n<details>\n<summary>https://psalm.dev/r/37f9fd9f39</summary>\n\n```php\n<?php\n\nfunction whatever(\n    ?string $value1,\n    ?string $value2,\n    ?string $value3,\n    ?string $value4,\n    ?string $value5\n): bool {\n    return !(\n        ($value1 === null || $value1 === '')\n        && ($value2 === null || $value2 === '')\n        && ($value3 === null || $value3 === '')\n    \t&& ($value4 === null || $value4 === '')\n    \t&& ($value5 === null || $value5 === '')\n    );\n}\n```\n\n```\nPsalm output (using commit 9dfdcbe):\n\nNo issues!\n```\n</details>\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/668271615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"psalm-github-bot[bot]","id":58627613,"node_id":"MDM6Qm90NTg2Mjc2MTM=","avatar_url":"https://avatars.githubusercontent.com/in/48546?v=4","gravatar_id":"","url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D","html_url":"https://github.com/apps/psalm-github-bot","followers_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/668363483","html_url":"https://github.com/vimeo/psalm/issues/3932#issuecomment-668363483","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/3932","id":668363483,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODM2MzQ4Mw==","user":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-04T03:48:10Z","updated_at":"2020-08-04T03:48:10Z","body":"The error occurs while Psalm is in the midst of trying to convert an expression in Disjunctive Normal Form to one in Conjunctive Normal Form (which it uses for all its logical dealings).\r\n\r\nThere are definitely some optimisations that could be added to avoid hitting that limit, but I'd really need someone who knows the area better than I do.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/668363483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/668794018","html_url":"https://github.com/vimeo/psalm/issues/3932#issuecomment-668794018","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/3932","id":668794018,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODc5NDAxOA==","user":{"login":"still-dreaming-1","id":354296,"node_id":"MDQ6VXNlcjM1NDI5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/354296?v=4","gravatar_id":"","url":"https://api.github.com/users/still-dreaming-1","html_url":"https://github.com/still-dreaming-1","followers_url":"https://api.github.com/users/still-dreaming-1/followers","following_url":"https://api.github.com/users/still-dreaming-1/following{/other_user}","gists_url":"https://api.github.com/users/still-dreaming-1/gists{/gist_id}","starred_url":"https://api.github.com/users/still-dreaming-1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/still-dreaming-1/subscriptions","organizations_url":"https://api.github.com/users/still-dreaming-1/orgs","repos_url":"https://api.github.com/users/still-dreaming-1/repos","events_url":"https://api.github.com/users/still-dreaming-1/events{/privacy}","received_events_url":"https://api.github.com/users/still-dreaming-1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-04T19:54:42Z","updated_at":"2020-08-04T19:57:03Z","body":"Okay, yeah not a big deal I guess. I actually refactored the code to avoid the issue and I think the result was more readable anyways. It seems like it's not exactly a bug, just a limitation. Probably the best thing would be to get it to produce a more helpful error message since the can't verify return type one through me off for a while and got me questioning the types.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/668794018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"still-dreaming-1","id":354296,"node_id":"MDQ6VXNlcjM1NDI5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/354296?v=4","gravatar_id":"","url":"https://api.github.com/users/still-dreaming-1","html_url":"https://github.com/still-dreaming-1","followers_url":"https://api.github.com/users/still-dreaming-1/followers","following_url":"https://api.github.com/users/still-dreaming-1/following{/other_user}","gists_url":"https://api.github.com/users/still-dreaming-1/gists{/gist_id}","starred_url":"https://api.github.com/users/still-dreaming-1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/still-dreaming-1/subscriptions","organizations_url":"https://api.github.com/users/still-dreaming-1/orgs","repos_url":"https://api.github.com/users/still-dreaming-1/repos","events_url":"https://api.github.com/users/still-dreaming-1/events{/privacy}","received_events_url":"https://api.github.com/users/still-dreaming-1/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3626401769,"node_id":"MDExOkNsb3NlZEV2ZW50MzYyNjQwMTc2OQ==","url":"https://api.github.com/repos/vimeo/psalm/issues/events/3626401769","actor":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"e0f559530736a5c7d332ad75a60d8d9e52fe89dd","commit_url":"https://api.github.com/repos/vimeo/psalm/commits/e0f559530736a5c7d332ad75a60d8d9e52fe89dd","created_at":"2020-08-05T20:53:37Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/669505837","html_url":"https://github.com/vimeo/psalm/issues/3932#issuecomment-669505837","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/3932","id":669505837,"node_id":"MDEyOklzc3VlQ29tbWVudDY2OTUwNTgzNw==","user":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-05T20:58:35Z","updated_at":"2020-08-05T20:58:35Z","body":"@weirdan's suggested workaround was actually the best (if slightly hacky) solution:\r\n\r\nif\r\n```\r\nnegateCNF(getFormula($php_expr))\r\n```\r\n runs into issues, it now tries\r\n```\r\ngetFormula(new PhpParser\\Node\\Expr\\BooleanNot($php_expr))\r\n```\r\nwhich works, at least in the example given","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/669505837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3626417172,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzYyNjQxNzE3Mg==","url":"https://api.github.com/repos/vimeo/psalm/issues/events/3626417172","actor":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-08-05T20:58:35Z","performed_via_github_app":null},{"id":3626417174,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM2MjY0MTcxNzQ=","url":"https://api.github.com/repos/vimeo/psalm/issues/events/3626417174","actor":{"login":"weirdan","id":57403,"node_id":"MDQ6VXNlcjU3NDAz","avatar_url":"https://avatars.githubusercontent.com/u/57403?v=4","gravatar_id":"","url":"https://api.github.com/users/weirdan","html_url":"https://github.com/weirdan","followers_url":"https://api.github.com/users/weirdan/followers","following_url":"https://api.github.com/users/weirdan/following{/other_user}","gists_url":"https://api.github.com/users/weirdan/gists{/gist_id}","starred_url":"https://api.github.com/users/weirdan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weirdan/subscriptions","organizations_url":"https://api.github.com/users/weirdan/orgs","repos_url":"https://api.github.com/users/weirdan/repos","events_url":"https://api.github.com/users/weirdan/events{/privacy}","received_events_url":"https://api.github.com/users/weirdan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-08-05T20:58:35Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/670159034","html_url":"https://github.com/vimeo/psalm/issues/3932#issuecomment-670159034","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/3932","id":670159034,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDE1OTAzNA==","user":{"login":"morozov","id":59683,"node_id":"MDQ6VXNlcjU5Njgz","avatar_url":"https://avatars.githubusercontent.com/u/59683?v=4","gravatar_id":"","url":"https://api.github.com/users/morozov","html_url":"https://github.com/morozov","followers_url":"https://api.github.com/users/morozov/followers","following_url":"https://api.github.com/users/morozov/following{/other_user}","gists_url":"https://api.github.com/users/morozov/gists{/gist_id}","starred_url":"https://api.github.com/users/morozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morozov/subscriptions","organizations_url":"https://api.github.com/users/morozov/orgs","repos_url":"https://api.github.com/users/morozov/repos","events_url":"https://api.github.com/users/morozov/events{/privacy}","received_events_url":"https://api.github.com/users/morozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-06T19:51:08Z","updated_at":"2020-08-06T20:04:58Z","body":"Not sure how relevant it is, but Psalm `3.x-dev` sill fails with a `ComplicatedExpressionException` on doctrine/dbal:\r\n```\r\n$ psalm --threads=1 src/Platforms/SqlitePlatform.php\r\nScanning files...\r\nAnalyzing files...\r\n\r\nUncaught Psalm\\Exception\\ComplicatedExpressionException in /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Type/Algebra.php:670\r\nStack trace:\r\n#0 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Type/Algebra.php(816): Psalm\\Type\\Algebra::groupImpossibilities(Array)\r\n#1 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/Block/SwitchCaseAnalyzer.php(381): Psalm\\Type\\Algebra::negateFormula(Array)\r\n#2 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/Block/SwitchAnalyzer.php(118): Psalm\\Internal\\Analyzer\\Statements\\Block\\SwitchCaseAnalyzer::analyze(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(Psalm\\Codebase), Object(PhpParser\\Node\\Stmt\\Switch_), NULL, Object(PhpParser\\Node\\Stmt\\Case_), Object(Psalm\\Context), Object(Psalm\\Context), 'return_throw', Array, true, Object(Psalm\\Internal\\Scope\\SwitchScope))\r\n#3 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php(480): Psalm\\Internal\\Analyzer\\Statements\\Block\\SwitchAnalyzer::analyze(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(PhpParser\\Node\\Stmt\\Switch_), Object(Psalm\\Context))\r\n#4 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php(169): Psalm\\Internal\\Analyzer\\StatementsAnalyzer::analyzeStatement(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(PhpParser\\Node\\Stmt\\Switch_), Object(Psalm\\Context), NULL)\r\n#5 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/Block/LoopAnalyzer.php(198): Psalm\\Internal\\Analyzer\\StatementsAnalyzer->analyze(Array, Object(Psalm\\Context))\r\n#6 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php(308): Psalm\\Internal\\Analyzer\\Statements\\Block\\LoopAnalyzer::analyze(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Array, Array, Array, Object(Psalm\\Internal\\Scope\\LoopScope), Object(Psalm\\Context), false, false)\r\n#7 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php(460): Psalm\\Internal\\Analyzer\\Statements\\Block\\ForeachAnalyzer::analyze(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(PhpParser\\Node\\Stmt\\Foreach_), Object(Psalm\\Context))\r\n#8 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php(169): Psalm\\Internal\\Analyzer\\StatementsAnalyzer::analyzeStatement(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(PhpParser\\Node\\Stmt\\Foreach_), Object(Psalm\\Context), Object(Psalm\\Context))\r\n#9 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php(569): Psalm\\Internal\\Analyzer\\StatementsAnalyzer->analyze(Array, Object(Psalm\\Context), Object(Psalm\\Context), true)\r\n#10 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/ClassAnalyzer.php(1891): Psalm\\Internal\\Analyzer\\FunctionLikeAnalyzer->analyze(Object(Psalm\\Context), Object(Psalm\\Internal\\Provider\\NodeDataProvider), Object(Psalm\\Context))\r\n#11 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/ClassAnalyzer.php(743): Psalm\\Internal\\Analyzer\\ClassAnalyzer->analyzeClassMethod(Object(PhpParser\\Node\\Stmt\\ClassMethod), Object(Psalm\\Storage\\ClassLikeStorage), Object(Psalm\\Internal\\Analyzer\\ClassAnalyzer), Object(Psalm\\Context), Object(Psalm\\Context))\r\n#12 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/FileAnalyzer.php(218): Psalm\\Internal\\Analyzer\\ClassAnalyzer->analyze(Object(Psalm\\Context), Object(Psalm\\Context))\r\n#13 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Codebase/Analyzer.php(349): Psalm\\Internal\\Analyzer\\FileAnalyzer->analyze(NULL)\r\n#14 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Codebase/Analyzer.php(583): Psalm\\Internal\\Codebase\\Analyzer->Psalm\\Internal\\Codebase\\{closure}(0, '/home/morozov/P...')\r\n#15 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Codebase/Analyzer.php(275): Psalm\\Internal\\Codebase\\Analyzer->doAnalysis(Object(Psalm\\Internal\\Analyzer\\ProjectAnalyzer), 1)\r\n#16 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/ProjectAnalyzer.php(1212): Psalm\\Internal\\Codebase\\Analyzer->analyzeFiles(Object(Psalm\\Internal\\Analyzer\\ProjectAnalyzer), 1, false, false)\r\n#17 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/psalm.php(682): Psalm\\Internal\\Analyzer\\ProjectAnalyzer->checkPaths(Array)\r\n#18 /home/morozov/Projects/dbal/vendor/vimeo/psalm/psalm(2): require_once('/home/morozov/P...')\r\n#19 {main}\r\n(Psalm dev-master@afce2dc66ff83ccad3f3a7aa26740a5eb829b2ca crashed due to an uncaught Throwable)\r\n```\r\nPlease let me know if you need a reproduction scenario.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/670159034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"morozov","id":59683,"node_id":"MDQ6VXNlcjU5Njgz","avatar_url":"https://avatars.githubusercontent.com/u/59683?v=4","gravatar_id":"","url":"https://api.github.com/users/morozov","html_url":"https://github.com/morozov","followers_url":"https://api.github.com/users/morozov/followers","following_url":"https://api.github.com/users/morozov/following{/other_user}","gists_url":"https://api.github.com/users/morozov/gists{/gist_id}","starred_url":"https://api.github.com/users/morozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morozov/subscriptions","organizations_url":"https://api.github.com/users/morozov/orgs","repos_url":"https://api.github.com/users/morozov/repos","events_url":"https://api.github.com/users/morozov/events{/privacy}","received_events_url":"https://api.github.com/users/morozov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"morozov","id":59683,"node_id":"MDQ6VXNlcjU5Njgz","avatar_url":"https://avatars.githubusercontent.com/u/59683?v=4","gravatar_id":"","url":"https://api.github.com/users/morozov","html_url":"https://github.com/morozov","followers_url":"https://api.github.com/users/morozov/followers","following_url":"https://api.github.com/users/morozov/following{/other_user}","gists_url":"https://api.github.com/users/morozov/gists{/gist_id}","starred_url":"https://api.github.com/users/morozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morozov/subscriptions","organizations_url":"https://api.github.com/users/morozov/orgs","repos_url":"https://api.github.com/users/morozov/repos","events_url":"https://api.github.com/users/morozov/events{/privacy}","received_events_url":"https://api.github.com/users/morozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-06T19:52:03Z","updated_at":"2020-08-06T19:52:03Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/doctrine/dbal/issues/4200","repository_url":"https://api.github.com/repos/doctrine/dbal","labels_url":"https://api.github.com/repos/doctrine/dbal/issues/4200/labels{/name}","comments_url":"https://api.github.com/repos/doctrine/dbal/issues/4200/comments","events_url":"https://api.github.com/repos/doctrine/dbal/issues/4200/events","html_url":"https://github.com/doctrine/dbal/issues/4200","id":674559986,"node_id":"MDU6SXNzdWU2NzQ1NTk5ODY=","number":4200,"title":"Update dependencies for compatibility with PHP 8.0","user":{"login":"morozov","id":59683,"node_id":"MDQ6VXNlcjU5Njgz","avatar_url":"https://avatars.githubusercontent.com/u/59683?v=4","gravatar_id":"","url":"https://api.github.com/users/morozov","html_url":"https://github.com/morozov","followers_url":"https://api.github.com/users/morozov/followers","following_url":"https://api.github.com/users/morozov/following{/other_user}","gists_url":"https://api.github.com/users/morozov/gists{/gist_id}","starred_url":"https://api.github.com/users/morozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morozov/subscriptions","organizations_url":"https://api.github.com/users/morozov/orgs","repos_url":"https://api.github.com/users/morozov/repos","events_url":"https://api.github.com/users/morozov/events{/privacy}","received_events_url":"https://api.github.com/users/morozov/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":308816947,"node_id":"MDU6TGFiZWwzMDg4MTY5NDc=","url":"https://api.github.com/repos/doctrine/dbal/labels/PHP","name":"PHP","color":"8892be","default":false,"description":""},{"id":309396347,"node_id":"MDU6TGFiZWwzMDkzOTYzNDc=","url":"https://api.github.com/repos/doctrine/dbal/labels/Blocker","name":"Blocker","color":"e11d21","default":false,"description":null}],"state":"closed","locked":true,"assignee":{"login":"morozov","id":59683,"node_id":"MDQ6VXNlcjU5Njgz","avatar_url":"https://avatars.githubusercontent.com/u/59683?v=4","gravatar_id":"","url":"https://api.github.com/users/morozov","html_url":"https://github.com/morozov","followers_url":"https://api.github.com/users/morozov/followers","following_url":"https://api.github.com/users/morozov/following{/other_user}","gists_url":"https://api.github.com/users/morozov/gists{/gist_id}","starred_url":"https://api.github.com/users/morozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morozov/subscriptions","organizations_url":"https://api.github.com/users/morozov/orgs","repos_url":"https://api.github.com/users/morozov/repos","events_url":"https://api.github.com/users/morozov/events{/privacy}","received_events_url":"https://api.github.com/users/morozov/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"morozov","id":59683,"node_id":"MDQ6VXNlcjU5Njgz","avatar_url":"https://avatars.githubusercontent.com/u/59683?v=4","gravatar_id":"","url":"https://api.github.com/users/morozov","html_url":"https://github.com/morozov","followers_url":"https://api.github.com/users/morozov/followers","following_url":"https://api.github.com/users/morozov/following{/other_user}","gists_url":"https://api.github.com/users/morozov/gists{/gist_id}","starred_url":"https://api.github.com/users/morozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morozov/subscriptions","organizations_url":"https://api.github.com/users/morozov/orgs","repos_url":"https://api.github.com/users/morozov/repos","events_url":"https://api.github.com/users/morozov/events{/privacy}","received_events_url":"https://api.github.com/users/morozov/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/doctrine/dbal/milestones/76","html_url":"https://github.com/doctrine/dbal/milestone/76","labels_url":"https://api.github.com/repos/doctrine/dbal/milestones/76/labels","id":4972849,"node_id":"MDk6TWlsZXN0b25lNDk3Mjg0OQ==","number":76,"title":"3.0.0","description":"","creator":{"login":"morozov","id":59683,"node_id":"MDQ6VXNlcjU5Njgz","avatar_url":"https://avatars.githubusercontent.com/u/59683?v=4","gravatar_id":"","url":"https://api.github.com/users/morozov","html_url":"https://github.com/morozov","followers_url":"https://api.github.com/users/morozov/followers","following_url":"https://api.github.com/users/morozov/following{/other_user}","gists_url":"https://api.github.com/users/morozov/gists{/gist_id}","starred_url":"https://api.github.com/users/morozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morozov/subscriptions","organizations_url":"https://api.github.com/users/morozov/orgs","repos_url":"https://api.github.com/users/morozov/repos","events_url":"https://api.github.com/users/morozov/events{/privacy}","received_events_url":"https://api.github.com/users/morozov/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":151,"state":"closed","created_at":"2020-01-04T13:37:39Z","updated_at":"2022-08-11T20:11:05Z","due_on":"2020-08-06T07:00:00Z","closed_at":"2020-11-15T22:35:47Z"},"comments":5,"created_at":"2020-08-06T19:48:02Z","updated_at":"2022-07-22T00:25:55Z","closed_at":"2020-08-14T14:23:14Z","author_association":"MEMBER","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":677464,"node_id":"MDEwOlJlcG9zaXRvcnk2Nzc0NjQ=","name":"dbal","full_name":"doctrine/dbal","private":false,"owner":{"login":"doctrine","id":209254,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwOTI1NA==","avatar_url":"https://avatars.githubusercontent.com/u/209254?v=4","gravatar_id":"","url":"https://api.github.com/users/doctrine","html_url":"https://github.com/doctrine","followers_url":"https://api.github.com/users/doctrine/followers","following_url":"https://api.github.com/users/doctrine/following{/other_user}","gists_url":"https://api.github.com/users/doctrine/gists{/gist_id}","starred_url":"https://api.github.com/users/doctrine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/doctrine/subscriptions","organizations_url":"https://api.github.com/users/doctrine/orgs","repos_url":"https://api.github.com/users/doctrine/repos","events_url":"https://api.github.com/users/doctrine/events{/privacy}","received_events_url":"https://api.github.com/users/doctrine/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/doctrine/dbal","description":"Doctrine Database Abstraction Layer","fork":false,"url":"https://api.github.com/repos/doctrine/dbal","forks_url":"https://api.github.com/repos/doctrine/dbal/forks","keys_url":"https://api.github.com/repos/doctrine/dbal/keys{/key_id}","collaborators_url":"https://api.github.com/repos/doctrine/dbal/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/doctrine/dbal/teams","hooks_url":"https://api.github.com/repos/doctrine/dbal/hooks","issue_events_url":"https://api.github.com/repos/doctrine/dbal/issues/events{/number}","events_url":"https://api.github.com/repos/doctrine/dbal/events","assignees_url":"https://api.github.com/repos/doctrine/dbal/assignees{/user}","branches_url":"https://api.github.com/repos/doctrine/dbal/branches{/branch}","tags_url":"https://api.github.com/repos/doctrine/dbal/tags","blobs_url":"https://api.github.com/repos/doctrine/dbal/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/doctrine/dbal/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/doctrine/dbal/git/refs{/sha}","trees_url":"https://api.github.com/repos/doctrine/dbal/git/trees{/sha}","statuses_url":"https://api.github.com/repos/doctrine/dbal/statuses/{sha}","languages_url":"https://api.github.com/repos/doctrine/dbal/languages","stargazers_url":"https://api.github.com/repos/doctrine/dbal/stargazers","contributors_url":"https://api.github.com/repos/doctrine/dbal/contributors","subscribers_url":"https://api.github.com/repos/doctrine/dbal/subscribers","subscription_url":"https://api.github.com/repos/doctrine/dbal/subscription","commits_url":"https://api.github.com/repos/doctrine/dbal/commits{/sha}","git_commits_url":"https://api.github.com/repos/doctrine/dbal/git/commits{/sha}","comments_url":"https://api.github.com/repos/doctrine/dbal/comments{/number}","issue_comment_url":"https://api.github.com/repos/doctrine/dbal/issues/comments{/number}","contents_url":"https://api.github.com/repos/doctrine/dbal/contents/{+path}","compare_url":"https://api.github.com/repos/doctrine/dbal/compare/{base}...{head}","merges_url":"https://api.github.com/repos/doctrine/dbal/merges","archive_url":"https://api.github.com/repos/doctrine/dbal/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/doctrine/dbal/downloads","issues_url":"https://api.github.com/repos/doctrine/dbal/issues{/number}","pulls_url":"https://api.github.com/repos/doctrine/dbal/pulls{/number}","milestones_url":"https://api.github.com/repos/doctrine/dbal/milestones{/number}","notifications_url":"https://api.github.com/repos/doctrine/dbal/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/doctrine/dbal/labels{/name}","releases_url":"https://api.github.com/repos/doctrine/dbal/releases{/id}","deployments_url":"https://api.github.com/repos/doctrine/dbal/deployments","created_at":"2010-05-20T17:01:42Z","updated_at":"2025-11-10T09:25:45Z","pushed_at":"2025-10-30T13:20:32Z","git_url":"git://github.com/doctrine/dbal.git","ssh_url":"git@github.com:doctrine/dbal.git","clone_url":"https://github.com/doctrine/dbal.git","svn_url":"https://github.com/doctrine/dbal","homepage":"https://www.doctrine-project.org/projects/dbal.html","size":44600,"stargazers_count":9662,"watchers_count":9662,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1374,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":273,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["database","hacktoberfest","ibm-db2","mariadb","mysql","oracle","postgresql","sql-server","sqlite"],"visibility":"public","forks":1374,"open_issues":273,"watchers":9662,"default_branch":"4.3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"```\r\n$ php --version\r\nPHP 8.0.0beta1 (cli) (built: Aug  6 2020 12:22:10) ( NTS )\r\nCopyright (c) The PHP Group\r\nZend Engine v4.0.0-dev, Copyright (c) Zend Technologies\r\n    with Zend OPcache v8.0.0beta1, Copyright (c), by Zend Technologies\r\n    with Xdebug v3.0.0-dev, Copyright (c) 2002-2020, by Derick Rethans\r\n\r\n$ composer install\r\ncomposer install \r\nLoading composer repositories with package information\r\nInstalling dependencies (including require-dev) from lock file\r\nYour requirements could not be resolved to an installable set of packages.\r\n\r\n  Problem 1\r\n    - Installation request for phpdocumentor/reflection-docblock 5.1.0 -> satisfiable by phpdocumentor/reflection-docblock[5.1.0].\r\n    - phpdocumentor/reflection-docblock 5.1.0 requires ext-filter ^7.1 -> the requested PHP extension filter has the wrong version (8.0.0beta1) installed.\r\n  Problem 2\r\n    - phpdocumentor/reflection-docblock 5.1.0 requires ext-filter ^7.1 -> the requested PHP extension filter has the wrong version (8.0.0beta1) installed.\r\n    - phpspec/prophecy v1.10.3 requires phpdocumentor/reflection-docblock ^2.0|^3.0.2|^4.0|^5.0 -> satisfiable by phpdocumentor/reflection-docblock[5.1.0].\r\n    - Installation request for phpspec/prophecy v1.10.3 -> satisfiable by phpspec/prophecy[v1.10.3].\r\n\r\n$ composer why phpdocumentor/reflection-docblock\r\nfelixfbecker/advanced-json-rpc  v3.1.1  requires  phpdocumentor/reflection-docblock (^4.0.0 || ^5.0.0)       \r\nphpspec/prophecy                1.9.0   requires  phpdocumentor/reflection-docblock (^2.0|^3.0.2|^4.0|^5.0)  \r\n\r\n$ composer why felixfbecker/advanced-json-rpc     144ms\r\nvimeo/psalm  3.11.5  requires  felixfbecker/advanced-json-rpc (^3.0.3)\r\n```\r\nUpdating Psalm to `^3.13` solves the dependency problem but `psalm` itself fails after the update regardless of the PHP version:\r\n```\r\n$ composer update vimeo/psalm --with-dependencies\r\nDependency \"nikic/php-parser\" is also a root requirement, but is not explicitly allowed. Ignoring.\r\nDependency \"composer/package-versions-deprecated\" is also a root requirement, but is not explicitly allowed. Ignoring.\r\nDependency \"symfony/console\" is also a root requirement, but is not explicitly allowed. Ignoring.\r\nLoading composer repositories with package information\r\nUpdating dependencies (including require-dev)\r\nPackage operations: 0 installs, 10 updates, 0 removals\r\n  - Updating symfony/polyfill-ctype (v1.17.0 => v1.18.1): Loading from cache\r\n  - Updating webmozart/assert (1.8.0 => 1.9.1): Loading from cache\r\n  - Updating sebastian/diff (4.0.1 => 4.0.2): Loading from cache\r\n  - Updating phpdocumentor/reflection-common (2.1.0 => 2.2.0): Loading from cache\r\n  - Updating phpdocumentor/type-resolver (1.1.0 => 1.3.0): Loading from cache\r\n  - Updating phpdocumentor/reflection-docblock (5.1.0 => 5.2.0): Loading from cache\r\n  - Updating composer/xdebug-handler (1.4.1 => 1.4.2): Loading from cache\r\n  - Updating amphp/amp (v2.4.4 => v2.5.0): Loading from cache\r\n  - Updating amphp/byte-stream (v1.7.3 => v1.8.0): Loading from cache\r\n  - Updating vimeo/psalm (3.11.5 => 3.13.1):  Checking out afd8874a9e\r\nWriting lock file\r\nGenerating autoload files\r\ncomposer/package-versions-deprecated: Generating version class...\r\ncomposer/package-versions-deprecated: ...done generating version class\r\n25 packages you are using are looking for funding.\r\nUse the `composer fund` command to find out more!\r\n\r\n$ psalm --threads=1\r\nScanning files...\r\nAnalyzing files...\r\n\r\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░E░░░░░░░░░░░░░░  60 / 431 (13%)\r\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ 120 / 431 (27%)\r\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░Uncaught Psalm\\Exception\\ComplicatedExpressionException in /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Type/Algebra.php:670\r\nStack trace:\r\n#0 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Type/Algebra.php(816): Psalm\\Type\\Algebra::groupImpossibilities(Array)\r\n#1 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/Block/SwitchCaseAnalyzer.php(381): Psalm\\Type\\Algebra::negateFormula(Array)\r\n#2 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/Block/SwitchAnalyzer.php(118): Psalm\\Internal\\Analyzer\\Statements\\Block\\SwitchCaseAnalyzer::analyze(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(Psalm\\Codebase), Object(PhpParser\\Node\\Stmt\\Switch_), NULL, Object(PhpParser\\Node\\Stmt\\Case_), Object(Psalm\\Context), Object(Psalm\\Context), 'return_throw', Array, true, Object(Psalm\\Internal\\Scope\\SwitchScope))\r\n#3 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php(480): Psalm\\Internal\\Analyzer\\Statements\\Block\\SwitchAnalyzer::analyze(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(PhpParser\\Node\\Stmt\\Switch_), Object(Psalm\\Context))\r\n#4 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php(169): Psalm\\Internal\\Analyzer\\StatementsAnalyzer::analyzeStatement(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(PhpParser\\Node\\Stmt\\Switch_), Object(Psalm\\Context), NULL)\r\n#5 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/Block/LoopAnalyzer.php(198): Psalm\\Internal\\Analyzer\\StatementsAnalyzer->analyze(Array, Object(Psalm\\Context))\r\n#6 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php(308): Psalm\\Internal\\Analyzer\\Statements\\Block\\LoopAnalyzer::analyze(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Array, Array, Array, Object(Psalm\\Internal\\Scope\\LoopScope), Object(Psalm\\Context), false, false)\r\n#7 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php(460): Psalm\\Internal\\Analyzer\\Statements\\Block\\ForeachAnalyzer::analyze(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(PhpParser\\Node\\Stmt\\Foreach_), Object(Psalm\\Context))\r\n#8 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php(169): Psalm\\Internal\\Analyzer\\StatementsAnalyzer::analyzeStatement(Object(Psalm\\Internal\\Analyzer\\StatementsAnalyzer), Object(PhpParser\\Node\\Stmt\\Foreach_), Object(Psalm\\Context), Object(Psalm\\Context))\r\n#9 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php(564): Psalm\\Internal\\Analyzer\\StatementsAnalyzer->analyze(Array, Object(Psalm\\Context), Object(Psalm\\Context), true)\r\n#10 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/ClassAnalyzer.php(1887): Psalm\\Internal\\Analyzer\\FunctionLikeAnalyzer->analyze(Object(Psalm\\Context), Object(Psalm\\Internal\\Provider\\NodeDataProvider), Object(Psalm\\Context))\r\n#11 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/ClassAnalyzer.php(739): Psalm\\Internal\\Analyzer\\ClassAnalyzer->analyzeClassMethod(Object(PhpParser\\Node\\Stmt\\ClassMethod), Object(Psalm\\Storage\\ClassLikeStorage), Object(Psalm\\Internal\\Analyzer\\ClassAnalyzer), Object(Psalm\\Context), Object(Psalm\\Context))\r\n#12 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/FileAnalyzer.php(217): Psalm\\Internal\\Analyzer\\ClassAnalyzer->analyze(Object(Psalm\\Context), Object(Psalm\\Context))\r\n#13 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Codebase/Analyzer.php(349): Psalm\\Internal\\Analyzer\\FileAnalyzer->analyze(NULL)\r\n#14 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Codebase/Analyzer.php(583): Psalm\\Internal\\Codebase\\Analyzer->Psalm\\Internal\\Codebase\\{closure}(161, '/home/morozov/P...')\r\n#15 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Codebase/Analyzer.php(275): Psalm\\Internal\\Codebase\\Analyzer->doAnalysis(Object(Psalm\\Internal\\Analyzer\\ProjectAnalyzer), 1)\r\n#16 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/Psalm/Internal/Analyzer/ProjectAnalyzer.php(630): Psalm\\Internal\\Codebase\\Analyzer->analyzeFiles(Object(Psalm\\Internal\\Analyzer\\ProjectAnalyzer), 1, false, true)\r\n#17 /home/morozov/Projects/dbal/vendor/vimeo/psalm/src/psalm.php(666): Psalm\\Internal\\Analyzer\\ProjectAnalyzer->check('/home/morozov/P...', false)\r\n#18 /home/morozov/Projects/dbal/vendor/vimeo/psalm/psalm(2): require_once('/home/morozov/P...')\r\n#19 {main}\r\n(Psalm 3.13.1@afd8874a9e4562eac42a02de90e42e430c3a1db1 crashed due to an uncaught Throwable)\r\n```\r\n\r\n**TODO**:\r\n- [x] See if this can be removed from `3.0.x` after the upgrade (https://github.com/doctrine/dbal/pull/4203): https://github.com/doctrine/dbal/blob/95b40a130a25be455fee4e013e9257e796abcf60/.travis.yml#L21-L24","reactions":{"url":"https://api.github.com/repos/doctrine/dbal/issues/4200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doctrine/dbal/issues/4200/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/670168050","html_url":"https://github.com/vimeo/psalm/issues/3932#issuecomment-670168050","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/3932","id":670168050,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDE2ODA1MA==","user":{"login":"morozov","id":59683,"node_id":"MDQ6VXNlcjU5Njgz","avatar_url":"https://avatars.githubusercontent.com/u/59683?v=4","gravatar_id":"","url":"https://api.github.com/users/morozov","html_url":"https://github.com/morozov","followers_url":"https://api.github.com/users/morozov/followers","following_url":"https://api.github.com/users/morozov/following{/other_user}","gists_url":"https://api.github.com/users/morozov/gists{/gist_id}","starred_url":"https://api.github.com/users/morozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morozov/subscriptions","organizations_url":"https://api.github.com/users/morozov/orgs","repos_url":"https://api.github.com/users/morozov/repos","events_url":"https://api.github.com/users/morozov/events{/privacy}","received_events_url":"https://api.github.com/users/morozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-06T20:11:09Z","updated_at":"2020-08-06T20:12:54Z","body":"This is the excerpt from the [code](https://github.com/doctrine/dbal/blob/95b40a130a25be455fee4e013e9257e796abcf60/src/Platforms/SqlitePlatform.php#L1008-L1101) causing the failure: https://psalm.dev/r/1f175f5f23.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/670168050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"morozov","id":59683,"node_id":"MDQ6VXNlcjU5Njgz","avatar_url":"https://avatars.githubusercontent.com/u/59683?v=4","gravatar_id":"","url":"https://api.github.com/users/morozov","html_url":"https://github.com/morozov","followers_url":"https://api.github.com/users/morozov/followers","following_url":"https://api.github.com/users/morozov/following{/other_user}","gists_url":"https://api.github.com/users/morozov/gists{/gist_id}","starred_url":"https://api.github.com/users/morozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morozov/subscriptions","organizations_url":"https://api.github.com/users/morozov/orgs","repos_url":"https://api.github.com/users/morozov/repos","events_url":"https://api.github.com/users/morozov/events{/privacy}","received_events_url":"https://api.github.com/users/morozov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/670168073","html_url":"https://github.com/vimeo/psalm/issues/3932#issuecomment-670168073","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/3932","id":670168073,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDE2ODA3Mw==","user":{"login":"psalm-github-bot[bot]","id":58627613,"node_id":"MDM6Qm90NTg2Mjc2MTM=","avatar_url":"https://avatars.githubusercontent.com/in/48546?v=4","gravatar_id":"","url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D","html_url":"https://github.com/apps/psalm-github-bot","followers_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2020-08-06T20:11:11Z","updated_at":"2020-08-06T20:12:57Z","body":"I found these snippets:\n<details>\n<summary>https://psalm.dev/r/1f175f5f23</summary>\n\n```php\n<?php\n\nfunction getSimpleAlterTableSQL($diff)\n{\n    // Suppress changes on integer type autoincrement columns.\n    foreach ($diff->changedColumns as $oldColumnName => $columnDiff) {\n        if (\n            $columnDiff->fromColumn === null ||\n            ! $columnDiff->column->getAutoincrement() ||\n            ! $columnDiff->column->getType() instanceof Types\\IntegerType\n        ) {\n            continue;\n        }\n\n        if (! $columnDiff->hasChanged('type') && $columnDiff->hasChanged('unsigned')) {\n            unset($diff->changedColumns[$oldColumnName]);\n\n            continue;\n        }\n\n        $fromColumnType = $columnDiff->fromColumn->getType();\n\n        if (! ($fromColumnType instanceof Types\\SmallIntType) && ! ($fromColumnType instanceof Types\\BigIntType)) {\n            continue;\n        }\n\n        unset($diff->changedColumns[$oldColumnName]);\n    }\n\n    if (\n        ! empty($diff->renamedColumns)\n        || ! empty($diff->addedForeignKeys)\n        || ! empty($diff->addedIndexes)\n        || ! empty($diff->changedColumns)\n        || ! empty($diff->changedForeignKeys)\n        || ! empty($diff->changedIndexes)\n        || ! empty($diff->removedColumns)\n        || ! empty($diff->removedForeignKeys)\n        || ! empty($diff->removedIndexes)\n        || ! empty($diff->renamedIndexes)\n    ) {\n        return false;\n    }\n\n    $table = new Table($diff->name);\n\n    $sql       = [];\n    $tableSql  = [];\n    $columnSql = [];\n\n    foreach ($diff->addedColumns as $column) {\n        if ($this->onSchemaAlterTableAddColumn($column, $diff, $columnSql)) {\n            continue;\n        }\n\n        $definition = array_merge([\n            'unique' => null,\n            'autoincrement' => null,\n            'default' => null,\n        ], $column->toArray());\n\n        $type = $definition['type'];\n\n        switch (true) {\n            case isset($definition['columnDefinition']) || $definition['autoincrement'] || $definition['unique']:\n            case $type instanceof Types\\DateTimeType && $definition['default'] === $this->getCurrentTimestampSQL():\n            case $type instanceof Types\\DateType && $definition['default'] === $this->getCurrentDateSQL():\n            case $type instanceof Types\\TimeType && $definition['default'] === $this->getCurrentTimeSQL():\n                return false;\n        }\n\n        $definition['name'] = $column->getQuotedName($this);\n        if ($type instanceof Types\\StringType && $definition['length'] === null) {\n            $definition['length'] = 255;\n        }\n\n        $sql[] = 'ALTER TABLE ' . $table->getQuotedName($this) . ' ADD COLUMN '\n            . $this->getColumnDeclarationSQL($definition['name'], $definition);\n    }\n\n    if (! $this->onSchemaAlterTable($diff, $tableSql)) {\n        if ($diff->newName !== false) {\n            $newTable = new Identifier($diff->newName);\n\n            $sql[] = 'ALTER TABLE ' . $table->getQuotedName($this) . ' RENAME TO '\n                . $newTable->getQuotedName($this);\n        }\n    }\n\n    return array_merge($sql, $tableSql, $columnSql);\n}\n```\n\n```\nPsalm encountered an internal error:\n\n/vendor/vimeo/psalm/src/Psalm/Type/Algebra.php: \n```\n</details>\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/670168073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"psalm-github-bot[bot]","id":58627613,"node_id":"MDM6Qm90NTg2Mjc2MTM=","avatar_url":"https://avatars.githubusercontent.com/in/48546?v=4","gravatar_id":"","url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D","html_url":"https://github.com/apps/psalm-github-bot","followers_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/psalm-github-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/670486964","html_url":"https://github.com/vimeo/psalm/issues/3932#issuecomment-670486964","issue_url":"https://api.github.com/repos/vimeo/psalm/issues/3932","id":670486964,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDQ4Njk2NA==","user":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-07T12:13:54Z","updated_at":"2020-08-07T12:13:54Z","body":"I've ticketed that separately, that exception needs to be caught","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/comments/670486964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false}}]