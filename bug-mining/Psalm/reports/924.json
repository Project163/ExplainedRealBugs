{"url":"https://api.github.com/repos/vimeo/psalm/issues/4374","repository_url":"https://api.github.com/repos/vimeo/psalm","labels_url":"https://api.github.com/repos/vimeo/psalm/issues/4374/labels{/name}","comments_url":"https://api.github.com/repos/vimeo/psalm/issues/4374/comments","events_url":"https://api.github.com/repos/vimeo/psalm/issues/4374/events","html_url":"https://github.com/vimeo/psalm/issues/4374","id":725765645,"node_id":"MDU6SXNzdWU3MjU3NjU2NDU=","number":4374,"title":"ParadoxicalCondition when assignment happens inside conditionals","user":{"login":"alecwcp","id":46442391,"node_id":"MDQ6VXNlcjQ2NDQyMzkx","avatar_url":"https://avatars.githubusercontent.com/u/46442391?v=4","gravatar_id":"","url":"https://api.github.com/users/alecwcp","html_url":"https://github.com/alecwcp","followers_url":"https://api.github.com/users/alecwcp/followers","following_url":"https://api.github.com/users/alecwcp/following{/other_user}","gists_url":"https://api.github.com/users/alecwcp/gists{/gist_id}","starred_url":"https://api.github.com/users/alecwcp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alecwcp/subscriptions","organizations_url":"https://api.github.com/users/alecwcp/orgs","repos_url":"https://api.github.com/users/alecwcp/repos","events_url":"https://api.github.com/users/alecwcp/events{/privacy}","received_events_url":"https://api.github.com/users/alecwcp/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":486061586,"node_id":"MDU6TGFiZWw0ODYwNjE1ODY=","url":"https://api.github.com/repos/vimeo/psalm/labels/bug","name":"bug","color":"ee0701","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-10-20T16:39:00Z","updated_at":"2020-10-20T19:21:28Z","closed_at":"2020-10-20T18:43:11Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Psalm detects ParadoxicalCondition (and UnusedVariable) but there is no paradox and the variable is used.\r\n\r\nhttps://psalm.dev/r/e23bd1a389\r\n\r\nLooks like this is because of the assignment within the conditions, so psalm sees it as 2 comparisons of the same variable with false, but actually the value of the variable changes between the conditionals due to the assignment.\r\n\r\nNormally I would be against assignment in conditionals for readability reasons, but In this case it is actually useful for checking multiple formats and stopping and the first that worked.\r\n\r\nWe can get around this by changing to\r\n```\r\n<?php\r\n\r\nfunction checkDateIsRFC3339(?string $dateString): ?\\DateTimeImmutable\r\n{\r\n    if (null === $dateString) {\r\n        return null;\r\n    }\r\n\r\n    $date1 = \\DateTimeImmutable::createFromFormat(DATE_RFC3339, $dateString);\r\n    $date2 = \\DateTimeImmutable::createFromFormat(DATE_RFC3339_EXTENDED, $dateString);\r\n\r\n    if (false === $date1 && false === $date2) {\r\n        return null;\r\n    }\r\n    if (false !== $date1) {\r\n    \treturn $date1;\r\n    }\r\n\r\n    return $date2;\r\n}\r\n```\r\n\r\n but if possible it seems that supporting the assignments within the conditionals would be potentially beneficial elsewhere.","closed_by":{"login":"muglug","id":2292638,"node_id":"MDQ6VXNlcjIyOTI2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2292638?v=4","gravatar_id":"","url":"https://api.github.com/users/muglug","html_url":"https://github.com/muglug","followers_url":"https://api.github.com/users/muglug/followers","following_url":"https://api.github.com/users/muglug/following{/other_user}","gists_url":"https://api.github.com/users/muglug/gists{/gist_id}","starred_url":"https://api.github.com/users/muglug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muglug/subscriptions","organizations_url":"https://api.github.com/users/muglug/orgs","repos_url":"https://api.github.com/users/muglug/repos","events_url":"https://api.github.com/users/muglug/events{/privacy}","received_events_url":"https://api.github.com/users/muglug/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/vimeo/psalm/issues/4374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vimeo/psalm/issues/4374/timeline","performed_via_github_app":null,"state_reason":"completed"}