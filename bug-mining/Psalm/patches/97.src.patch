diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/ArrayAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/ArrayAnalyzer.php
index d12e3e276..a779bfc4f 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/ArrayAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/ArrayAnalyzer.php
@@ -119,6 +119,25 @@ class ArrayAnalyzer
                 return false;
             }
 
+            if ($item->byRef) {
+                $var_id = ExpressionAnalyzer::getArrayVarId(
+                    $item->value,
+                    $statements_analyzer->getFQCLN(),
+                    $statements_analyzer
+                );
+
+                if ($var_id) {
+                    $context->removeDescendents(
+                        $var_id,
+                        $context->vars_in_scope[$var_id],
+                        null,
+                        $statements_analyzer
+                    );
+
+                    $context->vars_in_scope[$var_id] = Type::getMixed();
+                }
+            }
+
             if ($item_value_atomic_types && !$can_create_objectlike) {
                 continue;
             }
diff --git a/tests/ArrayAccessTest.php b/tests/ArrayAccessTest.php
index d31d112fb..4bb2bce60 100644
--- a/tests/ArrayAccessTest.php
+++ b/tests/ArrayAccessTest.php
@@ -502,6 +502,24 @@ class ArrayAccessTest extends TestCase
                 [],
                 ['MixedReturnStatement', 'MixedInferredReturnType']
             ],
+            'arrayAccessAfterByRefArrayOffsetAssignment' => [
+                '<?php
+                    /**
+                     * @param array{param1: array} $params
+                     */
+                    function dispatch(array $params) : void {
+                        $params["param1"]["foo"] = "bar";
+                    }
+
+                    $ar = [];
+                    dispatch(["param1" => &$ar]);
+                    $value = "foo";
+                    if (isset($ar[$value])) {
+                        echo (string) $ar[$value];
+                    }',
+                [],
+                ['MixedArrayAccess'],
+            ],
         ];
     }
 
