diff --git a/src/Psalm/Internal/Analyzer/Statements/ExpressionAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/ExpressionAnalyzer.php
index 3da0c00fb..b56dec476 100644
--- a/src/Psalm/Internal/Analyzer/Statements/ExpressionAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/ExpressionAnalyzer.php
@@ -1396,15 +1396,9 @@ class ExpressionAnalyzer
                     continue;
                 }
             } elseif ($use->byRef) {
-                foreach ($context->vars_in_scope[$use_var_id]->getTypes() as $atomic_type) {
-                    if ($atomic_type instanceof Type\Atomic\TLiteralInt) {
-                        $context->vars_in_scope[$use_var_id]->addType(new Type\Atomic\TInt);
-                    } elseif ($atomic_type instanceof Type\Atomic\TLiteralFloat) {
-                        $context->vars_in_scope[$use_var_id]->addType(new Type\Atomic\TFloat);
-                    } elseif ($atomic_type instanceof Type\Atomic\TLiteralString) {
-                        $context->vars_in_scope[$use_var_id]->addType(new Type\Atomic\TString);
-                    }
-                }
+                $context->remove($use_var_id);
+
+                $context->vars_in_scope[$use_var_id] = Type::getMixed();
             }
         }
 
diff --git a/src/Psalm/Internal/Diff/ClassStatementsDiffer.php b/src/Psalm/Internal/Diff/ClassStatementsDiffer.php
index ab3da70fb..86f2c5a38 100644
--- a/src/Psalm/Internal/Diff/ClassStatementsDiffer.php
+++ b/src/Psalm/Internal/Diff/ClassStatementsDiffer.php
@@ -233,6 +233,7 @@ class ClassStatementsDiffer extends AstDiffer
             }
         }
 
+        /** @var array<int, array{0: int, 1: int, 2: int, 3: int}> $diff_map */
         return [$keep, $keep_signature, $add_or_delete, $diff_map];
     }
 }
diff --git a/tests/CallableTest.php b/tests/CallableTest.php
index 926411433..ffebef0ce 100644
--- a/tests/CallableTest.php
+++ b/tests/CallableTest.php
@@ -1454,6 +1454,19 @@ class CallableTest extends TestCase
                     takesB($getAButReallyB());',
                 'error_message' => 'ArgumentTypeCoercion - src/somefile.php:13:28 - Argument 1 of takesB expects B, parent type A provided',
             ],
+            'closureByRefUseToMixed' => [
+                '<?php
+                    function assertInt(int $int): int {
+                        $s = static function() use(&$int): void {
+                            $int = "42";
+                        };
+
+                        $s();
+
+                        return $int;
+                    }',
+                'error_message' => 'MixedReturnStatement'
+            ],
         ];
     }
 }
