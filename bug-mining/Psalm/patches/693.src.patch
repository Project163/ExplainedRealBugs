diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/AssertionFinder.php b/src/Psalm/Internal/Analyzer/Statements/Expression/AssertionFinder.php
index 3fdae077b..d5992951a 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/AssertionFinder.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/AssertionFinder.php
@@ -750,15 +750,11 @@ class AssertionFinder
                 && ($var_type = $source->node_data->getType($base_conditional))
                 && $conditional instanceof PhpParser\Node\Expr\BinaryOp\Identical
             ) {
-                $null_type = Type::getEmptyArray();
+                $empty_array_type = Type::getEmptyArray();
 
-                if (!TypeAnalyzer::isContainedBy(
-                    $codebase,
-                    $var_type,
-                    $null_type
-                ) && !TypeAnalyzer::isContainedBy(
+                if (!TypeAnalyzer::canExpressionTypesBeIdentical(
                     $codebase,
-                    $null_type,
+                    $empty_array_type,
                     $var_type
                 )) {
                     if ($var_type->from_docblock) {
diff --git a/tests/Template/FunctionTemplateTest.php b/tests/Template/FunctionTemplateTest.php
index df1f29b06..603fe66a5 100644
--- a/tests/Template/FunctionTemplateTest.php
+++ b/tests/Template/FunctionTemplateTest.php
@@ -1254,6 +1254,19 @@ class FunctionTemplateTest extends TestCase
 
                     createProxy(A::class, \'Ns\foo\')->bar();',
             ],
+            'compareToEmptyArray' => [
+                '<?php
+                    /**
+                     * @template T
+                     *
+                     * @param T $a
+                     * @return T
+                     */
+                    function ex($a) {
+                        if($a === []) {}
+                        return $a;
+                    }'
+            ],
         ];
     }
 
