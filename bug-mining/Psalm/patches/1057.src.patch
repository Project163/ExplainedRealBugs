diff --git a/src/Psalm/Internal/Analyzer/MethodComparator.php b/src/Psalm/Internal/Analyzer/MethodComparator.php
index 6b4cacef6..0e1f606fc 100644
--- a/src/Psalm/Internal/Analyzer/MethodComparator.php
+++ b/src/Psalm/Internal/Analyzer/MethodComparator.php
@@ -679,15 +679,6 @@ class MethodComparator
 
         $guide_class_name = $guide_classlike_storage->name;
 
-        if ($implementer_classlike_storage->template_extended_params) {
-            self::transformTemplates(
-                $implementer_classlike_storage->template_extended_params,
-                $guide_class_name,
-                $guide_method_storage_param_type,
-                $codebase
-            );
-        }
-
         if ($implementer_classlike_storage->is_trait) {
             $implementer_called_class_storage = $codebase->classlike_storage_provider->get(
                 $implementer_called_class_name
@@ -736,6 +727,15 @@ class MethodComparator
             }
         }
 
+        if ($implementer_classlike_storage->template_extended_params) {
+            self::transformTemplates(
+                $implementer_classlike_storage->template_extended_params,
+                $guide_class_name,
+                $guide_method_storage_param_type,
+                $codebase
+            );
+        }
+
         $union_comparison_results = new TypeComparisonResult();
 
         if (!UnionTypeComparator::isContainedBy(
diff --git a/tests/Template/ClassTemplateExtendsTest.php b/tests/Template/ClassTemplateExtendsTest.php
index 4d1772cfa..1fa7d90fe 100644
--- a/tests/Template/ClassTemplateExtendsTest.php
+++ b/tests/Template/ClassTemplateExtendsTest.php
@@ -4282,6 +4282,56 @@ class ClassTemplateExtendsTest extends TestCase
                         function getIterator(): Traversable;
                     }'
             ],
+            'extendsWithoutAlias' => [
+                '<?php
+                    /**
+                     * @template TAValue
+                     */
+                    abstract class A {
+                        /**
+                         * @psalm-param TAValue $val
+                         */
+                        abstract public function foo($val): void;
+                    }
+
+                    /**
+                     * @template TBValue
+                     * @extends A<TBValue>
+                     */
+                    abstract class B extends A {
+                        /**
+                         * @psalm-param TBValue $val
+                         */
+                        abstract public function foo($val): void;
+                    }'
+            ],
+            'extendsWithAlias' => [
+                '<?php
+                    /**
+                     * @template TAValue
+                     */
+                    abstract class A {
+                        /**
+                         * @template TAValueNew as TAValue
+                         *
+                         * @psalm-param TAValueNew $val
+                         */
+                        abstract public function foo($val): void;
+                    }
+
+                    /**
+                     * @template TBValue
+                     * @extends A<TBValue>
+                     */
+                    abstract class B extends A {
+                        /**
+                         * @template TBValueNew as TBValue
+                         *
+                         * @psalm-param TBValueNew $val
+                         */
+                        abstract public function foo($val): void;
+                    }'
+            ],
         ];
     }
 
