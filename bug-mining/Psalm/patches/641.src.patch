diff --git a/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php b/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php
index 2a6d1fd99..25e023510 100644
--- a/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php
@@ -175,9 +175,17 @@ class StatementsAnalyzer extends SourceAnalyzer implements StatementsSource
         // hoist functions to the top
         foreach ($stmts as $stmt) {
             if ($stmt instanceof PhpParser\Node\Stmt\Function_) {
+                $function_name = strtolower($stmt->name->name);
+
+                if ($ns = $this->getNamespace()) {
+                    $fq_function_name = strtolower($ns) . '\\' . $function_name;
+                } else {
+                    $fq_function_name = $function_name;
+                }
+
                 try {
                     $function_analyzer = new FunctionAnalyzer($stmt, $this->source);
-                    $this->function_analyzers[strtolower($stmt->name->name)] = $function_analyzer;
+                    $this->function_analyzers[$fq_function_name] = $function_analyzer;
                 } catch (\UnexpectedValueException $e) {
                     // do nothing
                 }
@@ -691,21 +699,28 @@ class StatementsAnalyzer extends SourceAnalyzer implements StatementsSource
                 if (!$codebase->register_stub_files
                     && !$codebase->register_autoload_files
                 ) {
-                    $function_id = strtolower($stmt->name->name);
+                    $function_name = strtolower($stmt->name->name);
+
+                    if ($ns = $this->getNamespace()) {
+                        $fq_function_name = strtolower($ns) . '\\' . $function_name;
+                    } else {
+                        $fq_function_name = $function_name;
+                    }
+
                     $function_context = new Context($context->self);
                     $function_context->strict_types = $context->strict_types;
                     $config = Config::getInstance();
                     $function_context->collect_exceptions = $config->check_for_throws_docblock;
 
-                    if (isset($this->function_analyzers[$function_id])) {
-                        $this->function_analyzers[$function_id]->analyze(
+                    if (isset($this->function_analyzers[$fq_function_name])) {
+                        $this->function_analyzers[$fq_function_name]->analyze(
                             $function_context,
                             $this->node_data,
                             $context
                         );
 
                         if ($config->reportIssueInFile('InvalidReturnType', $this->getFilePath())) {
-                            $method_id = $this->function_analyzers[$function_id]->getId();
+                            $method_id = $this->function_analyzers[$fq_function_name]->getId();
 
                             $function_storage = $codebase->functions->getStorage(
                                 $this,
@@ -715,7 +730,7 @@ class StatementsAnalyzer extends SourceAnalyzer implements StatementsSource
                             $return_type = $function_storage->return_type;
                             $return_type_location = $function_storage->return_type_location;
 
-                            $this->function_analyzers[$function_id]->verifyReturnType(
+                            $this->function_analyzers[$fq_function_name]->verifyReturnType(
                                 $stmt->getStmts(),
                                 $this,
                                 $return_type,
diff --git a/tests/CallableTest.php b/tests/CallableTest.php
index 3da5cd67f..7da6b7510 100644
--- a/tests/CallableTest.php
+++ b/tests/CallableTest.php
@@ -1050,6 +1050,19 @@ class CallableTest extends TestCase
                     a($fn);',
                 'error_message' => 'UndefinedVariable',
             ],
+            'dontQualifyStringCallables' => [
+                '<?php
+                    namespace NS;
+
+                    function ff() : void {}
+
+                    function run(callable $f) : void {
+                        $f();
+                    }
+
+                    run("ff");',
+                'error_message' => 'UndefinedFunction',
+            ],
         ];
     }
 }
