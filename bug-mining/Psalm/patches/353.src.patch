diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/Fetch/PropertyFetchAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/Fetch/PropertyFetchAnalyzer.php
index f99d23409..27f23a231 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/Fetch/PropertyFetchAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/Fetch/PropertyFetchAnalyzer.php
@@ -811,7 +811,11 @@ class PropertyFetchAnalyzer
                             }
                         }
 
-                        $class_property_type = Type::parseTokens($new_type_tokens);
+                        $class_property_type = Type::parseTokens(
+                            $new_type_tokens,
+                            null,
+                            $statements_analyzer->getTemplateTypeMap() ?: []
+                        );
                     }
                 }
             }
diff --git a/tests/Template/ClassTemplateTest.php b/tests/Template/ClassTemplateTest.php
index e0c6fb8a2..ead9196fb 100644
--- a/tests/Template/ClassTemplateTest.php
+++ b/tests/Template/ClassTemplateTest.php
@@ -2106,7 +2106,33 @@ class ClassTemplateTest extends TestCase
 
                     acceptsThrowableRef(WeakReference::create(new Exception));
                 '
-            ]
+            ],
+            'mapTypeParams' => [
+                '<?php
+                    /**
+                     * @template TKey as array-key
+                     * @template TValue
+                     */
+                    class Map {
+                        /** @var array<TKey, TValue> */
+                        public $arr;
+
+                        /** @param array<TKey, TValue> $arr */
+                        function __construct(array $arr) {
+                            $this->arr = $arr;
+                        }
+                    }
+
+                    /**
+                     * @template TInputKey as array-key
+                     * @template TInputValue
+                     * @param Map<TInputKey, TInputValue> $map
+                     * @return Map<TInputKey, TInputValue>
+                     */
+                    function copyMapUsingProperty(Map $map): Map {
+                        return new Map($map->arr);
+                    }'
+            ],
         ];
     }
 
