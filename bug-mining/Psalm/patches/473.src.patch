diff --git a/composer.json b/composer.json
index 698454e8d..89a561106 100644
--- a/composer.json
+++ b/composer.json
@@ -15,13 +15,14 @@
     ],
     "require": {
         "php": "^7.1.3|^8",
+        "ext-SimpleXML": "*",
         "ext-dom": "*",
         "ext-json": "*",
         "ext-libxml": "*",
-        "ext-SimpleXML": "*",
         "ext-tokenizer": "*",
         "amphp/amp": "^2.1",
         "amphp/byte-stream": "^1.5",
+        "composer/semver": "^1.5",
         "composer/xdebug-handler": "^1.1",
         "felixfbecker/advanced-json-rpc": "^3.0.3",
         "felixfbecker/language-server-protocol": "^1.4",
diff --git a/config.xsd b/config.xsd
index 07150200d..61b658750 100644
--- a/config.xsd
+++ b/config.xsd
@@ -26,6 +26,7 @@
         <xs:attribute name="errorBaseline" type="xs:string" />
         <xs:attribute name="maxStringLength" type="xs:string" />
         <xs:attribute name="name" type="xs:string" />
+        <xs:attribute name="phpVersion" type="xs:string" />
         <xs:attribute name="serializer" type="xs:string" />
 
         <xs:attribute name="addParamDefaultToDocblockType" type="xs:boolean" default="false" />
diff --git a/src/Psalm/Config.php b/src/Psalm/Config.php
index eeedfd36c..c2444bcea 100644
--- a/src/Psalm/Config.php
+++ b/src/Psalm/Config.php
@@ -1,6 +1,7 @@
 <?php
 namespace Psalm;
 
+use Composer\Semver\Semver;
 use Webmozart\PathUtil\Path;
 use function array_merge;
 use function array_pop;
@@ -182,6 +183,13 @@ class Config
      */
     public $base_dir;
 
+    /**
+     * The PHP version to assume as declared in the config file
+     *
+     * @var string|null
+     */
+    private $configured_php_version;
+
     /**
      * @var array<int, string>
      */
@@ -745,6 +753,10 @@ class Config
             $base_dir = $current_dir;
         }
 
+        if (isset($config_xml['phpVersion'])) {
+            $config->configured_php_version = (string) $config_xml['phpVersion'];
+        }
+
         if (isset($config_xml['autoloader'])) {
             $autoloader_path = $config->base_dir . DIRECTORY_SEPARATOR . $config_xml['autoloader'];
 
@@ -1861,8 +1873,42 @@ class Config
         $this->stub_files[] = $stub_file;
     }
 
+    public function getPhpVersion(): ?string
+    {
+        if (isset($this->configured_php_version)) {
+            return $this->configured_php_version;
+        }
+
+        return $this->getPHPVersionFromComposerJson();
+    }
+
     private function setBooleanAttribute(string $name, bool $value): void
     {
         $this->$name = $value;
     }
+
+    /**
+     * @psalm-suppress MixedAssignment
+     * @psalm-suppress MixedArrayAccess
+     */
+    private function getPHPVersionFromComposerJson(): ?string
+    {
+        $composer_json_path = $this->base_dir . DIRECTORY_SEPARATOR. 'composer.json';
+
+        if (file_exists($composer_json_path)) {
+            if (!$composer_json = json_decode(file_get_contents($composer_json_path), true)) {
+                throw new \UnexpectedValueException('Invalid composer.json at ' . $composer_json_path);
+            }
+            $php_version = $composer_json['require']['php'] ?? null;
+
+            if ($php_version) {
+                foreach (['5.4', '5.5', '5.6', '7.0', '7.1', '7.2', '7.3', '7.4', '8.0'] as $candidate) {
+                    if (Semver::satisfies($candidate, (string)$php_version)) {
+                        return $candidate;
+                    }
+                }
+            }
+        }
+        return null;
+    }
 }
diff --git a/src/psalm.php b/src/psalm.php
index df23c9d1d..fcbcd09e0 100644
--- a/src/psalm.php
+++ b/src/psalm.php
@@ -493,6 +493,10 @@ $project_analyzer = new ProjectAnalyzer(
     $progress
 );
 
+if (!isset($options['php-version'])) {
+    $options['php-version'] = $config->getPhpVersion();
+}
+
 if (isset($options['php-version'])) {
     if (!is_string($options['php-version'])) {
         die('Expecting a version number in the format x.y' . PHP_EOL);
diff --git a/tests/Config/ConfigTest.php b/tests/Config/ConfigTest.php
index 443807b87..391868319 100644
--- a/tests/Config/ConfigTest.php
+++ b/tests/Config/ConfigTest.php
@@ -1451,4 +1451,30 @@ class ConfigTest extends \Psalm\Tests\TestCase
             $config->getPotentialComposerFilePathForClassLike('Psalm\\Tests\\Foo')
         );
     }
+
+    /**
+     * @return void
+     */
+    public function testTakesPhpVersionFromConfigFile()
+    {
+        $cfg = Config::loadFromXML(
+            dirname(__DIR__, 2),
+            '<?xml version="1.0"?><psalm phpVersion="7.1"></psalm>'
+        );
+        $this->assertSame('7.1', $cfg->getPhpVersion());
+    }
+
+    /**
+     * @return void
+     */
+    public function testReadsComposerJsonForPhpVersion()
+    {
+
+        $root = __DIR__ . '/../fixtures/ComposerPhpVersion';
+        $cfg = Config::loadFromXML($root, "<?xml version=\"1.0\"?><psalm></psalm>");
+        $this->assertSame('7.2', $cfg->getPhpVersion());
+
+        $cfg = Config::loadFromXML($root, "<?xml version=\"1.0\"?><psalm phpVersion='8.0'></psalm>");
+        $this->assertSame('8.0', $cfg->getPhpVersion());
+    }
 }
diff --git a/tests/fixtures/ComposerPhpVersion/composer.json b/tests/fixtures/ComposerPhpVersion/composer.json
new file mode 100644
index 000000000..e41b6f1b9
--- /dev/null
+++ b/tests/fixtures/ComposerPhpVersion/composer.json
@@ -0,0 +1,5 @@
+{
+  "require": {
+    "php": "7.2|7.3,<8"
+  }
+}
