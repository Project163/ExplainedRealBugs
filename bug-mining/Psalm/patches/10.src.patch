diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/Assignment/ArrayAssignmentAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/Assignment/ArrayAssignmentAnalyzer.php
index 63689a4d5..8a474b5fd 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/Assignment/ArrayAssignmentAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/Assignment/ArrayAssignmentAnalyzer.php
@@ -96,6 +96,25 @@ class ArrayAssignmentAnalyzer
         $root_type = isset($root_array_expr->inferredType) ? $root_array_expr->inferredType : Type::getMixed();
 
         if ($root_type->hasMixed()) {
+            if (ExpressionAnalyzer::analyze(
+                $statements_analyzer,
+                $stmt->var,
+                $context,
+                true
+            ) === false) {
+                // fall through
+            }
+
+            if ($stmt->dim) {
+                if (ExpressionAnalyzer::analyze(
+                    $statements_analyzer,
+                    $stmt->dim,
+                    $context
+                ) === false) {
+                    // fall through
+                }
+            }
+
             return null;
         }
 
diff --git a/tests/ArrayAccessTest.php b/tests/ArrayAccessTest.php
index 48788bb87..9364a090f 100644
--- a/tests/ArrayAccessTest.php
+++ b/tests/ArrayAccessTest.php
@@ -577,6 +577,14 @@ class ArrayAccessTest extends TestCase
                     echo $a[0];',
                 'error_message' => 'InvalidArrayOffset',
             ],
+            'recogniseBadVar' => [
+                '<?php
+                    /** @psalm-suppress MixedAssignment */
+                    $array = $_GET["foo"] ?? [];
+
+                    $array[$a] = "b";',
+                'error_message' => 'UndefinedGlobalVariable',
+            ],
         ];
     }
 }
