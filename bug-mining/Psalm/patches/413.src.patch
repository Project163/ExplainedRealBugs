diff --git a/src/Psalm/Internal/Analyzer/Statements/Block/ForAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Block/ForAnalyzer.php
index 8aceca203..d02a7d5fd 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Block/ForAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Block/ForAnalyzer.php
@@ -140,7 +140,9 @@ class ForAnalyzer
 
         if ($context->collect_references) {
             foreach ($for_context->unreferenced_vars as $var_id => $locations) {
-                if (isset($context->unreferenced_vars[$var_id])) {
+                if (isset($loop_scope->referenced_var_ids[$var_id])) {
+                    $statements_analyzer->registerVariableUses($locations);
+                } elseif (isset($context->unreferenced_vars[$var_id])) {
                     $context->unreferenced_vars[$var_id] += $locations;
                 } else {
                     $context->unreferenced_vars[$var_id] = $locations;
diff --git a/tests/UnusedVariableTest.php b/tests/UnusedVariableTest.php
index f6e593ea6..4ecc7d32a 100644
--- a/tests/UnusedVariableTest.php
+++ b/tests/UnusedVariableTest.php
@@ -1379,6 +1379,19 @@ class UnusedVariableTest extends TestCase
                         break;
                     }'
             ],
+            'usedForVariable' => [
+                '<?php
+                    $a = 0;
+                    for ($i = 0; $i < 1000; $i++) {
+                        if (rand(0, 1)) {
+                            $a = $a + $i;
+                            continue;
+                        }
+                        break;
+                    }
+
+                    echo $a;'
+            ],
         ];
     }
 
