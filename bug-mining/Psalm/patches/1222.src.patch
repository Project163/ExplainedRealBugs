diff --git a/README.md b/README.md
index c136915f5..5bdef9230 100644
--- a/README.md
+++ b/README.md
@@ -27,6 +27,6 @@ Have a look at [CONTRIBUTING.md](CONTRIBUTING.md).
 
 Built by Matt Brown ([@muglug](https://github.com/muglug)).
 
-Maintained by Orklah ([@orklah](https://github.com/orklah)) and Bruce Weirdan ([@weirdan](https://github.com/weirdan)).
+Maintained by Orklah ([@orklah](https://github.com/orklah)), Daniil Gentili ([@danog](https://github.com/danog)), and Bruce Weirdan ([@weirdan](https://github.com/weirdan)).
 
 The engineering team at [Vimeo](https://github.com/vimeo) have provided a lot encouragement, especially [@nbeliard](https://github.com/nbeliard), [@erunion](https://github.com/erunion) and [@nickyr](https://github.com/nickyr).
diff --git a/UPGRADING.md b/UPGRADING.md
index 6e176c69e..f1d3a10fa 100644
--- a/UPGRADING.md
+++ b/UPGRADING.md
@@ -1,25 +1,41 @@
 # Upgrading from Psalm 4 to Psalm 5
 ## Changed
-- [BC] `Psalm\Type\Union`s are now partially immutable, mutator methods were removed and moved into `Psalm\Type\MutableUnion`.  
-  To modify a union type, use the new `Psalm\Type\Union::getBuilder` method to turn a `Psalm\Type\Union` into a `Psalm\Type\MutableUnion`: once you're done, use `Psalm\Type\MutableUnion::freeze` to get a new `Psalm\Type\Union`.
+
+- [BC] Shaped arrays can now be sealed: this brings many assertion improvements and bugfixes, see [the docs for more info](https://psalm.dev/docs/annotating_code/type_syntax/array_types/#sealed-object-like-arrays).
+
+- [BC] All atomic types, `Psalm\Type\Union`, `Psalm\CodeLocation` and storages are fully immutable, use the new setter methods or the new constructors to change properties: these setter methods will return new instances without altering the original instance.  
+  Full immutability fixes a whole class of bugs that occurred in multithreaded mode, you can now feel free to use `--threads=$(nproc)` ;)
+  Full immutability also makes Psalm run faster, even in single-threaded mode, by removing all superfluous `clone`s!
+  For this purpose, `__clone` was also made private, forbidding the cloning of atomics, unions and storages (an old and brittle pattern used to avoid side-effects caused by mutability).  
+
+- [BC] `Psalm\Type\Union`s are now fully immutable, pre-existing in-place mutator methods were removed and moved into `Psalm\Type\MutableUnion`.  
+  To modify a union type, usage of the new setter methods in `Psalm\Type\Union` is strongly recommended.  
+  When many consecutive property sets are required, use `Psalm\Type\Union::setProperties` method to avoid creating a new instance for each set.  
+  All setter methods will return a new instance of the type without altering the original instance.  
+  If many property sets are required throughout multiple methods on a single Union instance, use `Psalm\Type\Union::getBuilder` to turn a `Psalm\Type\Union` into a `Psalm\Type\MutableUnion`: once you're done, use `Psalm\Type\MutableUnion::freeze` to get a new `Psalm\Type\Union`.  
   Methods removed from `Psalm\Type\Union` and moved into `Psalm\Type\MutableUnion`:
+
    - `replaceTypes`
    - `addType`
    - `removeType`
    - `substitute`
    - `replaceClassLike`
 
+- [BC] `Psalm\Type\TypeNode::getChildNodes()` was removed, use `Psalm\Type\Union::getAtomicTypes()` to get the types of a union, and use `Psalm\Type\TypeVisitor` with the new `Psalm\Type\MutableTypeVisitor` class to iterate over a type tree.  
+
+- [BC] `Psalm\Type\TypeVisitor` is now fully immutable, implementors MUST NOT alter type nodes during iteration: use `Psalm\Type\MutableTypeVisitor` if type node mutation is desired.  
+
 - [BC] TPositiveInt has been removed and replaced by TIntRange
 
 - [BC] The parameter `$php_version` of `Psalm\Type\Atomic::create()` renamed
   to `$analysis_php_version_id` and changed from `array|null` to `int|null`.
-  Previously it accepted PHP version as `array{major_version, minor_version}`
+  Previously it accepted PHP version as `strict-array{major_version, minor_version}`
   while now it accepts version ID, similar to how [`PHP_VERSION_ID` is
   calculated](https://www.php.net/manual/en/reserved.constants.php#constant.php-version-id).
 
 - [BC] The parameter `$php_version` of `Psalm\Type::parseString()` renamed to
   `$analysis_php_version_id` and changed from `array|null` to `int|null`.
-  Previously it accepted PHP version as `array{major_version, minor_version}`
+  Previously it accepted PHP version as `strict-array{major_version, minor_version}`
   while now it accepts version ID.
 
 - [BC] Parameter 0 of `canBeFullyExpressedInPhp()` of the classes listed below
@@ -789,7 +805,7 @@
     - [BC] Class `Psalm\Type\TaintKind` became final
     - [BC] Class `Psalm\Type\Union` became final
  - [BC] Property `Psalm\Config::$universal_object_crates` changed default value
-   from `array{'stdClass','SimpleXMLElement','SimpleXMLIterator'}` to `null`
+   from `strict-array{'stdClass','SimpleXMLElement','SimpleXMLIterator'}` to `null`
 
 ## Removed
  - [BC] Property `Psalm\Codebase::$php_major_version` was removed, use
diff --git a/dictionaries/CallMap.php b/dictionaries/CallMap.php
index 2c7587ff2..e2e89cfae 100644
--- a/dictionaries/CallMap.php
+++ b/dictionaries/CallMap.php
@@ -49,11 +49,11 @@ namespace Phan\Language\Internal;
  *
  * In Phan 0.12.3,
  *
- * - This started using array shapes for union types (array{...}).
+ * - This started using array shapes for union types (strict-array{...}).
  *
  *   \Phan\Language\UnionType->withFlattenedArrayShapeOrLiteralTypeInstances() may be of help to programmatically convert these to array<string,T1>|array<string,T2>
  *
- * - This started using array shapes with optional fields for union types (array{key?:int}).
+ * - This started using array shapes with optional fields for union types (strict-array{key?:int}).
  *   A `?` after the array shape field's key indicates that the field is optional.
  *
  * - This started adding param signatures and return signatures to `callable` types.
@@ -346,7 +346,7 @@ return [
 'ArgumentCountError::getLine' => ['int'],
 'ArgumentCountError::getMessage' => ['string'],
 'ArgumentCountError::getPrevious' => ['?Throwable'],
-'ArgumentCountError::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'ArgumentCountError::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'ArgumentCountError::getTraceAsString' => ['string'],
 'ArithmeticError::__clone' => ['void'],
 'ArithmeticError::__construct' => ['void', 'message='=>'string', 'code='=>'int', 'previous='=>'?Throwable|?Error'],
@@ -357,7 +357,7 @@ return [
 'ArithmeticError::getLine' => ['int'],
 'ArithmeticError::getMessage' => ['string'],
 'ArithmeticError::getPrevious' => ['?Throwable'],
-'ArithmeticError::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'ArithmeticError::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'ArithmeticError::getTraceAsString' => ['string'],
 'array_change_key_case' => ['associative-array', 'array'=>'array', 'case='=>'int'],
 'array_chunk' => ['list<array[]>', 'array'=>'array', 'length'=>'int', 'preserve_keys='=>'bool'],
@@ -501,7 +501,7 @@ return [
 'BadFunctionCallException::getLine' => ['int'],
 'BadFunctionCallException::getMessage' => ['string'],
 'BadFunctionCallException::getPrevious' => ['?Throwable|?BadFunctionCallException'],
-'BadFunctionCallException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'BadFunctionCallException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'BadFunctionCallException::getTraceAsString' => ['string'],
 'BadMethodCallException::__clone' => ['void'],
 'BadMethodCallException::__construct' => ['void', 'message='=>'string', 'code='=>'int', 'previous='=>'?Throwable|?BadMethodCallException'],
@@ -511,7 +511,7 @@ return [
 'BadMethodCallException::getLine' => ['int'],
 'BadMethodCallException::getMessage' => ['string'],
 'BadMethodCallException::getPrevious' => ['?Throwable|?BadMethodCallException'],
-'BadMethodCallException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'BadMethodCallException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'BadMethodCallException::getTraceAsString' => ['string'],
 'base64_decode' => ['string|false', 'string'=>'string', 'strict='=>'bool'],
 'base64_encode' => ['string', 'string'=>'string'],
@@ -1001,7 +1001,7 @@ return [
 'CairoSvgSurface::restrictToVersion' => ['void', 'version'=>'string'],
 'CairoSvgSurface::versionToString' => ['string', 'version'=>'int'],
 'cal_days_in_month' => ['int', 'calendar'=>'int', 'month'=>'int', 'year'=>'int'],
-'cal_from_jd' => ['false|array{date:string,month:int,day:int,year:int,dow:int,abbrevdayname:string,dayname:string,abbrevmonth:string,monthname:string}', 'julian_day'=>'int', 'calendar'=>'int'],
+'cal_from_jd' => ['false|strict-array{date:string,month:int,day:int,year:int,dow:int,abbrevdayname:string,dayname:string,abbrevmonth:string,monthname:string}', 'julian_day'=>'int', 'calendar'=>'int'],
 'cal_info' => ['array', 'calendar='=>'int'],
 'cal_to_jd' => ['int', 'calendar'=>'int', 'month'=>'int', 'day'=>'int', 'year'=>'int'],
 'calcul_hmac' => ['string', 'clent'=>'string', 'siretcode'=>'string', 'price'=>'string', 'reference'=>'string', 'validity'=>'string', 'taxation'=>'string', 'devise'=>'string', 'language'=>'string'],
@@ -1075,7 +1075,7 @@ return [
 'ClosedGeneratorException::getLine' => ['int'],
 'ClosedGeneratorException::getMessage' => ['string'],
 'ClosedGeneratorException::getPrevious' => ['Throwable|ClosedGeneratorException|null'],
-'ClosedGeneratorException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'ClosedGeneratorException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'ClosedGeneratorException::getTraceAsString' => ['string'],
 'closedir' => ['void', 'dir_handle='=>'resource'],
 'closelog' => ['bool'],
@@ -1723,7 +1723,7 @@ return [
 'date_default_timezone_set' => ['bool', 'timezoneId'=>'string'],
 'date_diff' => ['DateInterval|false', 'baseObject'=>'DateTimeInterface', 'targetObject'=>'DateTimeInterface', 'absolute='=>'bool'],
 'date_format' => ['string', 'object'=>'DateTimeInterface', 'format'=>'string'],
-'date_get_last_errors' => ['array{warning_count:int,warnings:array<int,string>,error_count:int,errors:array<int,string>}|false'],
+'date_get_last_errors' => ['strict-array{warning_count:int,warnings:array<int,string>,error_count:int,errors:array<int,string>}|false'],
 'date_interval_create_from_date_string' => ['DateInterval', 'datetime'=>'string'],
 'date_interval_format' => ['string', 'object'=>'DateInterval', 'format'=>'string'],
 'date_isodate_set' => ['DateTime|false', 'object'=>'DateTime', 'year'=>'int', 'week'=>'int', 'dayOfWeek='=>'int|mixed'],
@@ -1782,7 +1782,7 @@ return [
 'DateTime::createFromInterface' => ['static', 'object' => 'DateTimeInterface'],
 'DateTime::diff' => ['DateInterval|false', 'datetime2'=>'DateTimeInterface', 'absolute='=>'bool'],
 'DateTime::format' => ['string', 'format'=>'string'],
-'DateTime::getLastErrors' => ['array{warning_count:int,warnings:array<int,string>,error_count:int,errors:array<int,string>}|false'],
+'DateTime::getLastErrors' => ['strict-array{warning_count:int,warnings:array<int,string>,error_count:int,errors:array<int,string>}|false'],
 'DateTime::getOffset' => ['int'],
 'DateTime::getTimestamp' => ['int'],
 'DateTime::getTimezone' => ['DateTimeZone|false'],
@@ -1796,7 +1796,7 @@ return [
 'DateTimeImmutable::__set_state' => ['static', 'array'=>'array'],
 'DateTimeImmutable::__wakeup' => ['void'],
 'DateTimeImmutable::createFromInterface' => ['static', 'object' => 'DateTimeInterface'],
-'DateTimeImmutable::getLastErrors' => ['array{warning_count:int,warnings:array<int,string>,error_count:int,errors:array<int,string>}|false'],
+'DateTimeImmutable::getLastErrors' => ['strict-array{warning_count:int,warnings:array<int,string>,error_count:int,errors:array<int,string>}|false'],
 'DateTimeInterface::diff' => ['DateInterval', 'datetime2'=>'DateTimeInterface', 'absolute='=>'bool'],
 'DateTimeInterface::format' => ['string', 'format'=>'string'],
 'DateTimeInterface::getOffset' => ['int'],
@@ -1808,8 +1808,8 @@ return [
 'DateTimeZone::getLocation' => ['array|false'],
 'DateTimeZone::getName' => ['string'],
 'DateTimeZone::getOffset' => ['int|false', 'datetime'=>'DateTimeInterface'],
-'DateTimeZone::getTransitions' => ['list<array{ts: int, time: string, offset: int, isdst: bool, abbr: string}>|false', 'timestamp_begin='=>'int', 'timestamp_end='=>'int'],
-'DateTimeZone::listAbbreviations' => ['array<string, list<array{dst: bool, offset: int, timezone_id: string|null}>>|false'],
+'DateTimeZone::getTransitions' => ['list<strict-array{ts: int, time: string, offset: int, isdst: bool, abbr: string}>|false', 'timestamp_begin='=>'int', 'timestamp_end='=>'int'],
+'DateTimeZone::listAbbreviations' => ['array<string, list<strict-array{dst: bool, offset: int, timezone_id: string|null}>>|false'],
 'DateTimeZone::listIdentifiers' => ['list<string>', 'timezoneGroup='=>'int', 'countryCode='=>'string|null'],
 'db2_autocommit' => ['mixed', 'connection'=>'resource', 'value='=>'int'],
 'db2_bind_param' => ['bool', 'stmt'=>'resource', 'parameter_number'=>'int', 'variable_name'=>'string', 'parameter_type='=>'int', 'data_type='=>'int', 'precision='=>'int', 'scale='=>'int'],
@@ -1953,7 +1953,7 @@ return [
 'dcgettext' => ['string', 'domain'=>'string', 'message'=>'string', 'category'=>'int'],
 'dcngettext' => ['string', 'domain'=>'string', 'singular'=>'string', 'plural'=>'string', 'count'=>'int', 'category'=>'int'],
 'deaggregate' => ['', 'object'=>'object', 'class_name='=>'string'],
-'debug_backtrace' => ['list<array{file:string,line:int,function:string,class?:class-string,object?:object,type?:string,args?:list}>', 'options='=>'int', 'limit='=>'int'],
+'debug_backtrace' => ['list<strict-array{file:string,line:int,function:string,class?:class-string,object?:object,type?:string,args?:list}>', 'options='=>'int', 'limit='=>'int'],
 'debug_print_backtrace' => ['void', 'options='=>'int', 'limit='=>'int'],
 'debug_zval_dump' => ['void', '...value'=>'mixed'],
 'debugger_connect' => [''],
@@ -2049,7 +2049,7 @@ return [
 'DomainException::getLine' => ['int'],
 'DomainException::getMessage' => ['string'],
 'DomainException::getPrevious' => ['Throwable|DomainException|null'],
-'DomainException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'DomainException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'DomainException::getTraceAsString' => ['string'],
 'DOMAttr::__construct' => ['void', 'name'=>'string', 'value='=>'string'],
 'DOMAttr::getLineNo' => ['int'],
@@ -2488,7 +2488,7 @@ return [
 'enchant_broker_get_dict_path' => ['string', 'broker'=>'resource', 'type'=>'int'],
 'enchant_broker_get_error' => ['string|false', 'broker'=>'resource'],
 'enchant_broker_init' => ['resource|false'],
-'enchant_broker_list_dicts' => ['array<int,array{lang_tag:string,provider_name:string,provider_desc:string,provider_file:string}>|false', 'broker'=>'resource'],
+'enchant_broker_list_dicts' => ['array<int,strict-array{lang_tag:string,provider_name:string,provider_desc:string,provider_file:string}>|false', 'broker'=>'resource'],
 'enchant_broker_request_dict' => ['resource|false', 'broker'=>'resource', 'tag'=>'string'],
 'enchant_broker_request_pwl_dict' => ['resource|false', 'broker'=>'resource', 'filename'=>'string'],
 'enchant_broker_set_dict_path' => ['bool', 'broker'=>'resource', 'type'=>'int', 'path'=>'string'],
@@ -2512,10 +2512,10 @@ return [
 'Error::getLine' => ['int'],
 'Error::getMessage' => ['string'],
 'Error::getPrevious' => ['Throwable|Error|null'],
-'Error::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'Error::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'Error::getTraceAsString' => ['string'],
 'error_clear_last' => ['void'],
-'error_get_last' => ['?array{type:int,message:string,file:string,line:int}'],
+'error_get_last' => ['?strict-array{type:int,message:string,file:string,line:int}'],
 'error_log' => ['bool', 'message'=>'string', 'message_type='=>'int', 'destination='=>'string', 'additional_headers='=>'string'],
 'error_reporting' => ['int', 'error_level='=>'int'],
 'ErrorException::__clone' => ['void'],
@@ -2527,7 +2527,7 @@ return [
 'ErrorException::getMessage' => ['string'],
 'ErrorException::getPrevious' => ['Throwable|ErrorException|null'],
 'ErrorException::getSeverity' => ['int'],
-'ErrorException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'ErrorException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'ErrorException::getTraceAsString' => ['string'],
 'escapeshellarg' => ['string', 'arg'=>'string'],
 'escapeshellcmd' => ['string', 'command'=>'string'],
@@ -2895,7 +2895,7 @@ return [
 'Exception::getLine' => ['int'],
 'Exception::getMessage' => ['string'],
 'Exception::getPrevious' => ['?Throwable|?Exception'],
-'Exception::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'Exception::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'Exception::getTraceAsString' => ['string'],
 'exec' => ['string|false', 'command'=>'string', '&w_output='=>'array', '&w_result_code='=>'int'],
 'exif_imagetype' => ['int|false', 'filename'=>'string'],
@@ -3207,7 +3207,7 @@ return [
 'ffmpeg_movie::hasAudio' => ['bool'],
 'ffmpeg_movie::hasVideo' => ['bool'],
 'fgetc' => ['string|false', 'stream'=>'resource'],
-'fgetcsv' => ['list<string>|array{0: null}|false|null', 'stream'=>'resource', 'length='=>'int', 'separator='=>'string', 'enclosure='=>'string', 'escape='=>'string'],
+'fgetcsv' => ['list<string>|strict-array{0: null}|false|null', 'stream'=>'resource', 'length='=>'int', 'separator='=>'string', 'enclosure='=>'string', 'escape='=>'string'],
 'fgets' => ['string|false', 'stream'=>'resource', 'length='=>'int'],
 'fgetss' => ['string|false', 'fp'=>'resource', 'length='=>'int', 'allowable_tags='=>'string'],
 'file' => ['list<string>|false', 'filename'=>'string', 'flags='=>'int', 'context='=>'resource'],
@@ -3315,7 +3315,7 @@ return [
 'fscanf\'1' => ['int', 'stream'=>'resource', 'format'=>'string', '&...w_vars='=>'string|int|float'],
 'fseek' => ['int', 'stream'=>'resource', 'offset'=>'int', 'whence='=>'int'],
 'fsockopen' => ['resource|false', 'hostname'=>'string', 'port='=>'int', '&w_error_code='=>'int', '&w_error_message='=>'string', 'timeout='=>'float'],
-'fstat' => ['array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'stream'=>'resource'],
+'fstat' => ['strict-array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'stream'=>'resource'],
 'ftell' => ['int|false', 'stream'=>'resource'],
 'ftok' => ['int', 'filename'=>'string', 'project_id'=>'string'],
 'ftp_alloc' => ['bool', 'ftp'=>'FTP\Connection', 'size'=>'int', '&w_response='=>'string'],
@@ -3377,7 +3377,7 @@ return [
 'gc_enable' => ['void'],
 'gc_enabled' => ['bool'],
 'gc_mem_caches' => ['int'],
-'gc_status' => ['array{runs:int,collected:int,threshold:int,roots:int}'],
+'gc_status' => ['strict-array{runs:int,collected:int,threshold:int,roots:int}'],
 'gd_info' => ['array'],
 'gearman_bugreport' => [''],
 'gearman_client_add_options' => ['', 'client_object'=>'', 'option'=>''],
@@ -3644,7 +3644,7 @@ return [
 'GEOSGeometry::equals' => ['bool', 'geom'=>'GEOSGeometry'],
 'GEOSGeometry::equalsExact' => ['bool', 'geom'=>'GEOSGeometry', 'tolerance'=>'float'],
 'GEOSGeometry::isEmpty' => ['bool'],
-'GEOSGeometry::checkValidity' => ['array{valid: bool, reason?: string, location?: GEOSGeometry}'],
+'GEOSGeometry::checkValidity' => ['strict-array{valid: bool, reason?: string, location?: GEOSGeometry}'],
 'GEOSGeometry::isSimple' => ['bool'],
 'GEOSGeometry::isRing' => ['bool'],
 'GEOSGeometry::hasZ' => ['bool'],
@@ -3676,7 +3676,7 @@ return [
 'GEOSGeometry::delaunayTriangulation' => ['GEOSGeometry', 'tolerance'=>'float', 'onlyEdges'=>'bool'],
 'GEOSGeometry::voronoiDiagram' => ['GEOSGeometry', 'tolerance'=>'float', 'onlyEdges'=>'bool', 'extent'=>'GEOSGeometry|null'],
 'GEOSLineMerge' => ['array', 'geom'=>'GEOSGeometry'],
-'GEOSPolygonize' => ['array{rings: GEOSGeometry[], cut_edges?: GEOSGeometry[], dangles: GEOSGeometry[], invalid_rings: GEOSGeometry[]}', 'geom'=>'GEOSGeometry'],
+'GEOSPolygonize' => ['strict-array{rings: GEOSGeometry[], cut_edges?: GEOSGeometry[], dangles: GEOSGeometry[], invalid_rings: GEOSGeometry[]}', 'geom'=>'GEOSGeometry'],
 'GEOSRelateMatch' => ['bool', 'matrix'=>'string', 'pattern'=>'string'],
 'GEOSSharedPaths' => ['GEOSGeometry', 'geom1'=>'GEOSGeometry', 'geom2'=>'GEOSGeometry'],
 'GEOSVersion' => ['string'],
@@ -3733,7 +3733,7 @@ return [
 'get_resources' => ['array<int,resource>', 'type='=>'string'],
 'getallheaders' => ['array|false'],
 'getcwd' => ['string|false'],
-'getdate' => ['array{seconds: int<0, 59>, minutes: int<0, 59>, hours: int<0, 23>, mday: int<1, 31>, wday: int<0, 6>, mon: int<1, 12>, year: int, yday: int<0, 365>, weekday: "Monday"|"Tuesday"|"Wednesday"|"Thursday"|"Friday"|"Saturday"|"Sunday", month: "January"|"February"|"March"|"April"|"May"|"June"|"July"|"August"|"September"|"October"|"November"|"December", 0: int}', 'timestamp='=>'int'],
+'getdate' => ['strict-array{seconds: int<0, 59>, minutes: int<0, 59>, hours: int<0, 23>, mday: int<1, 31>, wday: int<0, 6>, mon: int<1, 12>, year: int, yday: int<0, 365>, weekday: "Monday"|"Tuesday"|"Wednesday"|"Thursday"|"Friday"|"Saturday"|"Sunday", month: "January"|"February"|"March"|"April"|"May"|"June"|"July"|"August"|"September"|"October"|"November"|"December", 0: int}', 'timestamp='=>'int'],
 'getenv' => ['string|false', 'name'=>'string', 'local_only='=>'bool'],
 'getenv\'1' => ['array<string,string>'],
 'gethostbyaddr' => ['string|false', 'ip'=>'string'],
@@ -3994,7 +3994,7 @@ return [
 'gmp_com' => ['GMP', 'num'=>'GMP|string|int'],
 'gmp_div' => ['GMP', 'num1'=>'GMP|resource|string', 'num2'=>'GMP|resource|string', 'rounding_mode='=>'int'],
 'gmp_div_q' => ['GMP', 'num1'=>'GMP|string|int', 'num2'=>'GMP|string|int', 'rounding_mode='=>'int'],
-'gmp_div_qr' => ['array{0: GMP, 1: GMP}', 'num1'=>'GMP|string|int', 'num2'=>'GMP|string|int', 'rounding_mode='=>'int'],
+'gmp_div_qr' => ['strict-array{0: GMP, 1: GMP}', 'num1'=>'GMP|string|int', 'num2'=>'GMP|string|int', 'rounding_mode='=>'int'],
 'gmp_div_r' => ['GMP', 'num1'=>'GMP|string|int', 'num2'=>'GMP|string|int', 'rounding_mode='=>'int'],
 'gmp_divexact' => ['GMP', 'num1'=>'GMP|string|int', 'num2'=>'GMP|string|int'],
 'gmp_export' => ['string|false', 'num'=>'GMP|string|int', 'word_size='=>'int', 'flags='=>'int'],
@@ -4025,13 +4025,13 @@ return [
 'gmp_random_range' => ['GMP', 'min'=>'GMP|string|int', 'max'=>'GMP|string|int'],
 'gmp_random_seed' => ['void', 'seed'=>'GMP|string|int'],
 'gmp_root' => ['GMP', 'num'=>'GMP|string|int', 'nth'=>'int'],
-'gmp_rootrem' => ['array{0: GMP, 1: GMP}', 'num'=>'GMP|string|int', 'nth'=>'int'],
+'gmp_rootrem' => ['strict-array{0: GMP, 1: GMP}', 'num'=>'GMP|string|int', 'nth'=>'int'],
 'gmp_scan0' => ['int', 'num1'=>'GMP|string|int', 'start'=>'int'],
 'gmp_scan1' => ['int', 'num1'=>'GMP|string|int', 'start'=>'int'],
 'gmp_setbit' => ['void', 'num'=>'GMP|string|int', 'index'=>'int', 'value='=>'bool'],
 'gmp_sign' => ['int', 'num'=>'GMP|string|int'],
 'gmp_sqrt' => ['GMP', 'num'=>'GMP|string|int'],
-'gmp_sqrtrem' => ['array{0: GMP, 1: GMP}', 'num'=>'GMP|string|int'],
+'gmp_sqrtrem' => ['strict-array{0: GMP, 1: GMP}', 'num'=>'GMP|string|int'],
 'gmp_strval' => ['numeric-string', 'num'=>'GMP|string|int', 'base='=>'int'],
 'gmp_sub' => ['GMP', 'num1'=>'GMP|string|int', 'num2'=>'GMP|string|int'],
 'gmp_testbit' => ['bool', 'num'=>'GMP|string|int', 'index'=>'int'],
@@ -4377,7 +4377,7 @@ return [
 'hexdec' => ['int|float', 'hex_string'=>'string'],
 'highlight_file' => ['string|bool', 'filename'=>'string', 'return='=>'bool'],
 'highlight_string' => ['string|bool', 'string'=>'string', 'return='=>'bool'],
-'hrtime' => ['array{0:int,1:int}|false', 'as_number='=>'false'],
+'hrtime' => ['strict-array{0:int,1:int}|false', 'as_number='=>'false'],
 'hrtime\'1' => ['int|float|false', 'as_number='=>'true'],
 'HRTime\PerformanceCounter::getElapsedTicks' => ['int'],
 'HRTime\PerformanceCounter::getFrequency' => ['int'],
@@ -5339,8 +5339,8 @@ return [
 'image_type_to_extension' => ['string', 'image_type'=>'int', 'include_dot='=>'bool'],
 'image_type_to_mime_type' => ['string', 'image_type'=>'int'],
 'imageaffine' => ['false|GdImage', 'image'=>'GdImage', 'affine'=>'array', 'clip='=>'?array'],
-'imageaffinematrixconcat' => ['array{0:float,1:float,2:float,3:float,4:float,5:float}|false', 'matrix1'=>'array', 'matrix2'=>'array'],
-'imageaffinematrixget' => ['array{0:float,1:float,2:float,3:float,4:float,5:float}|false', 'type'=>'int', 'options'=>'array|float'],
+'imageaffinematrixconcat' => ['strict-array{0:float,1:float,2:float,3:float,4:float,5:float}|false', 'matrix1'=>'array', 'matrix2'=>'array'],
+'imageaffinematrixget' => ['strict-array{0:float,1:float,2:float,3:float,4:float,5:float}|false', 'type'=>'int', 'options'=>'array|float'],
 'imagealphablending' => ['bool', 'image'=>'GdImage', 'enable'=>'bool'],
 'imageantialias' => ['bool', 'image'=>'GdImage', 'enable'=>'bool'],
 'imagearc' => ['bool', 'image'=>'GdImage', 'center_x'=>'int', 'center_y'=>'int', 'width'=>'int', 'height'=>'int', 'start_angle'=>'int', 'end_angle'=>'int', 'color'=>'int'],
@@ -5483,9 +5483,9 @@ return [
 'Imagick::colorMatrixImage' => ['void', 'color_matrix'=>'string'],
 'Imagick::combineImages' => ['Imagick', 'channeltype'=>'int'],
 'Imagick::commentImage' => ['bool', 'comment'=>'string'],
-'Imagick::compareImageChannels' => ['array{Imagick, float}', 'image'=>'Imagick', 'channeltype'=>'int', 'metrictype'=>'int'],
+'Imagick::compareImageChannels' => ['strict-array{Imagick, float}', 'image'=>'Imagick', 'channeltype'=>'int', 'metrictype'=>'int'],
 'Imagick::compareImageLayers' => ['Imagick', 'method'=>'int'],
-'Imagick::compareImages' => ['array{Imagick, float}', 'compare'=>'Imagick', 'metric'=>'int'],
+'Imagick::compareImages' => ['strict-array{Imagick, float}', 'compare'=>'Imagick', 'metric'=>'int'],
 'Imagick::compositeImage' => ['bool', 'composite_object'=>'Imagick', 'composite'=>'int', 'x'=>'int', 'y'=>'int', 'channel='=>'int'],
 'Imagick::compositeImageGravity' => ['bool', 'Imagick'=>'Imagick', 'COMPOSITE_CONSTANT'=>'int', 'GRAVITY_CONSTANT'=>'int'],
 'Imagick::contrastImage' => ['bool', 'sharpen'=>'bool'],
@@ -5545,16 +5545,16 @@ return [
 'Imagick::getImageAttribute' => ['string', 'key'=>'string'],
 'Imagick::getImageBackgroundColor' => ['ImagickPixel'],
 'Imagick::getImageBlob' => ['string'],
-'Imagick::getImageBluePrimary' => ['array{x:float, y:float}'],
+'Imagick::getImageBluePrimary' => ['strict-array{x:float, y:float}'],
 'Imagick::getImageBorderColor' => ['ImagickPixel'],
 'Imagick::getImageChannelDepth' => ['int', 'channel'=>'int'],
 'Imagick::getImageChannelDistortion' => ['float', 'reference'=>'Imagick', 'channel'=>'int', 'metric'=>'int'],
 'Imagick::getImageChannelDistortions' => ['float', 'reference'=>'Imagick', 'metric'=>'int', 'channel='=>'int'],
-'Imagick::getImageChannelExtrema' => ['array{minima:int, maxima:int}', 'channel'=>'int'],
-'Imagick::getImageChannelKurtosis' => ['array{kurtosis:float, skewness:float}', 'channel='=>'int'],
-'Imagick::getImageChannelMean' => ['array{mean:float, standardDeviation:float}', 'channel'=>'int'],
-'Imagick::getImageChannelRange' => ['array{minima:float, maxima:float}', 'channel'=>'int'],
-'Imagick::getImageChannelStatistics' => ['array<int, array{mean:float, minima:float, maxima:float, standardDeviation:float, depth:int}>'],
+'Imagick::getImageChannelExtrema' => ['strict-array{minima:int, maxima:int}', 'channel'=>'int'],
+'Imagick::getImageChannelKurtosis' => ['strict-array{kurtosis:float, skewness:float}', 'channel='=>'int'],
+'Imagick::getImageChannelMean' => ['strict-array{mean:float, standardDeviation:float}', 'channel'=>'int'],
+'Imagick::getImageChannelRange' => ['strict-array{minima:float, maxima:float}', 'channel'=>'int'],
+'Imagick::getImageChannelStatistics' => ['array<int, strict-array{mean:float, minima:float, maxima:float, standardDeviation:float, depth:int}>'],
 'Imagick::getImageClipMask' => ['Imagick'],
 'Imagick::getImageColormapColor' => ['ImagickPixel', 'index'=>'int'],
 'Imagick::getImageColors' => ['int'],
@@ -5566,13 +5566,13 @@ return [
 'Imagick::getImageDepth' => ['int'],
 'Imagick::getImageDispose' => ['int'],
 'Imagick::getImageDistortion' => ['float', 'reference'=>'magickwand', 'metric'=>'int'],
-'Imagick::getImageExtrema' => ['array{min:int, max:int}'],
+'Imagick::getImageExtrema' => ['strict-array{min:int, max:int}'],
 'Imagick::getImageFilename' => ['string'],
 'Imagick::getImageFormat' => ['string'],
 'Imagick::getImageGamma' => ['float'],
-'Imagick::getImageGeometry' => ['array{width:int, height:int}'],
+'Imagick::getImageGeometry' => ['strict-array{width:int, height:int}'],
 'Imagick::getImageGravity' => ['int'],
-'Imagick::getImageGreenPrimary' => ['array{x:float, y:float}'],
+'Imagick::getImageGreenPrimary' => ['strict-array{x:float, y:float}'],
 'Imagick::getImageHeight' => ['int'],
 'Imagick::getImageHistogram' => ['list<ImagickPixel>'],
 'Imagick::getImageIndex' => ['int'],
@@ -5585,16 +5585,16 @@ return [
 'Imagick::getImageMatteColor' => ['ImagickPixel'],
 'Imagick::getImageMimeType' => ['string'],
 'Imagick::getImageOrientation' => ['int'],
-'Imagick::getImagePage' => ['array{width:int, height:int, x:int, y:int}'],
+'Imagick::getImagePage' => ['strict-array{width:int, height:int, x:int, y:int}'],
 'Imagick::getImagePixelColor' => ['ImagickPixel', 'x'=>'int', 'y'=>'int'],
 'Imagick::getImageProfile' => ['string', 'name'=>'string'],
 'Imagick::getImageProfiles' => ['array', 'pattern='=>'string', 'only_names='=>'bool'],
 'Imagick::getImageProperties' => ['array<int|string, string>', 'pattern='=>'string', 'only_names='=>'bool'],
 'Imagick::getImageProperty' => ['string|false', 'name'=>'string'],
-'Imagick::getImageRedPrimary' => ['array{x:float, y:float}'],
+'Imagick::getImageRedPrimary' => ['strict-array{x:float, y:float}'],
 'Imagick::getImageRegion' => ['Imagick', 'width'=>'int', 'height'=>'int', 'x'=>'int', 'y'=>'int'],
 'Imagick::getImageRenderingIntent' => ['int'],
-'Imagick::getImageResolution' => ['array{x:float, y:float}'],
+'Imagick::getImageResolution' => ['strict-array{x:float, y:float}'],
 'Imagick::getImagesBlob' => ['string'],
 'Imagick::getImageScene' => ['int'],
 'Imagick::getImageSignature' => ['string'],
@@ -5604,28 +5604,28 @@ return [
 'Imagick::getImageType' => ['int'],
 'Imagick::getImageUnits' => ['int'],
 'Imagick::getImageVirtualPixelMethod' => ['int'],
-'Imagick::getImageWhitePoint' => ['array{x:float, y:float}'],
+'Imagick::getImageWhitePoint' => ['strict-array{x:float, y:float}'],
 'Imagick::getImageWidth' => ['int'],
 'Imagick::getInterlaceScheme' => ['int'],
 'Imagick::getIteratorIndex' => ['int'],
 'Imagick::getNumberImages' => ['int'],
 'Imagick::getOption' => ['string', 'key'=>'string'],
 'Imagick::getPackageName' => ['string'],
-'Imagick::getPage' => ['array{width:int, height:int, x:int, y:int}'],
+'Imagick::getPage' => ['strict-array{width:int, height:int, x:int, y:int}'],
 'Imagick::getPixelIterator' => ['ImagickPixelIterator'],
 'Imagick::getPixelRegionIterator' => ['ImagickPixelIterator', 'x'=>'int', 'y'=>'int', 'columns'=>'int', 'rows'=>'int'],
 'Imagick::getPointSize' => ['float'],
 'Imagick::getQuantum' => ['int'],
-'Imagick::getQuantumDepth' => ['array{quantumDepthLong:int, quantumDepthString:string}'],
-'Imagick::getQuantumRange' => ['array{quantumRangeLong:int, quantumRangeString:string}'],
+'Imagick::getQuantumDepth' => ['strict-array{quantumDepthLong:int, quantumDepthString:string}'],
+'Imagick::getQuantumRange' => ['strict-array{quantumRangeLong:int, quantumRangeString:string}'],
 'Imagick::getRegistry' => ['string|false', 'key'=>'string'],
 'Imagick::getReleaseDate' => ['string'],
 'Imagick::getResource' => ['int', 'type'=>'int'],
 'Imagick::getResourceLimit' => ['int', 'type'=>'int'],
 'Imagick::getSamplingFactors' => ['array'],
-'Imagick::getSize' => ['array{columns:int, rows: int}'],
+'Imagick::getSize' => ['strict-array{columns:int, rows: int}'],
 'Imagick::getSizeOffset' => ['int'],
-'Imagick::getVersion' => ['array{versionNumber: int, versionString:string}'],
+'Imagick::getVersion' => ['strict-array{versionNumber: int, versionString:string}'],
 'Imagick::haldClutImage' => ['bool', 'clut'=>'Imagick', 'channel='=>'int'],
 'Imagick::hasNextImage' => ['bool'],
 'Imagick::hasPreviousImage' => ['bool'],
@@ -5966,13 +5966,13 @@ return [
 'ImagickPixel::clear' => ['bool'],
 'ImagickPixel::clone' => ['void'],
 'ImagickPixel::destroy' => ['bool'],
-'ImagickPixel::getColor' => ['array{r: int|float, g: int|float, b: int|float, a: int|float}', 'normalized='=>'0|1|2'],
+'ImagickPixel::getColor' => ['strict-array{r: int|float, g: int|float, b: int|float, a: int|float}', 'normalized='=>'0|1|2'],
 'ImagickPixel::getColorAsString' => ['string'],
 'ImagickPixel::getColorCount' => ['int'],
 'ImagickPixel::getColorQuantum' => ['mixed'],
 'ImagickPixel::getColorValue' => ['float', 'color'=>'int'],
 'ImagickPixel::getColorValueQuantum' => ['mixed'],
-'ImagickPixel::getHSL' => ['array{hue: float, saturation: float, luminosity: float}'],
+'ImagickPixel::getHSL' => ['strict-array{hue: float, saturation: float, luminosity: float}'],
 'ImagickPixel::getIndex' => ['int'],
 'ImagickPixel::isPixelSimilar' => ['bool', 'color'=>'ImagickPixel', 'fuzz'=>'float'],
 'ImagickPixel::isPixelSimilarQuantum' => ['bool', 'color'=>'string', 'fuzz='=>'string'],
@@ -6372,7 +6372,7 @@ return [
 'IntlException::getLine' => ['int'],
 'IntlException::getMessage' => ['string'],
 'IntlException::getPrevious' => ['?Throwable'],
-'IntlException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'IntlException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'IntlException::getTraceAsString' => ['string'],
 'intlgregcal_create_instance' => ['IntlGregorianCalendar', 'timezoneOrYear='=>'mixed', 'localeOrMonth='=>'string'],
 'intlgregcal_get_gregorian_change' => ['float', 'calendar'=>'IntlGregorianCalendar'],
@@ -6512,7 +6512,7 @@ return [
 'InvalidArgumentException::getLine' => ['int'],
 'InvalidArgumentException::getMessage' => ['string'],
 'InvalidArgumentException::getPrevious' => ['Throwable|InvalidArgumentException|null'],
-'InvalidArgumentException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'InvalidArgumentException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'InvalidArgumentException::getTraceAsString' => ['string'],
 'ip2long' => ['int|false', 'ip'=>'string'],
 'iptcembed' => ['string|bool', 'iptc_data'=>'string', 'filename'=>'string', 'spool='=>'int'],
@@ -6598,7 +6598,7 @@ return [
 'JsonException::getLine' => ['int'],
 'JsonException::getMessage' => ['string'],
 'JsonException::getPrevious' => ['?Throwable'],
-'JsonException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'JsonException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'JsonException::getTraceAsString' => ['string'],
 'JsonIncrementalParser::__construct' => ['void', 'depth'=>'', 'options'=>''],
 'JsonIncrementalParser::get' => ['', 'options'=>''],
@@ -6824,7 +6824,7 @@ return [
 'LengthException::getLine' => ['int'],
 'LengthException::getMessage' => ['string'],
 'LengthException::getPrevious' => ['Throwable|LengthException|null'],
-'LengthException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'LengthException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'LengthException::getTraceAsString' => ['string'],
 'LevelDB::__construct' => ['void', 'name'=>'string', 'options='=>'array', 'read_options='=>'array', 'write_options='=>'array'],
 'LevelDB::close' => [''],
@@ -6936,10 +6936,10 @@ return [
 'LogicException::getLine' => ['int'],
 'LogicException::getMessage' => ['string'],
 'LogicException::getPrevious' => ['Throwable|LogicException|null'],
-'LogicException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'LogicException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'LogicException::getTraceAsString' => ['string'],
 'long2ip' => ['string', 'ip'=>'string|int'],
-'lstat' => ['array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'filename'=>'string'],
+'lstat' => ['strict-array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'filename'=>'string'],
 'ltrim' => ['string', 'string'=>'string', 'characters='=>'string'],
 'Lua::__call' => ['mixed', 'lua_func'=>'callable', 'args='=>'array', 'use_self='=>'int'],
 'Lua::__construct' => ['void', 'lua_script_file'=>'string'],
@@ -7647,7 +7647,7 @@ return [
 'MongoCursorException::getLine' => ['int'],
 'MongoCursorException::getMessage' => ['string'],
 'MongoCursorException::getPrevious' => ['Exception|Throwable'],
-'MongoCursorException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'MongoCursorException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'MongoCursorException::getTraceAsString' => ['string'],
 'MongoCursorInterface::__construct' => ['void'],
 'MongoCursorInterface::batchSize' => ['MongoCursorInterface', 'batchSize'=>'int'],
@@ -8015,7 +8015,7 @@ return [
 'MongoException::getLine' => ['int'],
 'MongoException::getMessage' => ['string'],
 'MongoException::getPrevious' => ['Exception|Throwable'],
-'MongoException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'MongoException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'MongoException::getTraceAsString' => ['string'],
 'MongoGridFS::__construct' => ['void', 'db'=>'MongoDB', 'prefix='=>'string', 'chunks='=>'mixed'],
 'MongoGridFS::__get' => ['MongoCollection', 'name'=>'string'],
@@ -8126,7 +8126,7 @@ return [
 'MongoResultException::getLine' => ['int'],
 'MongoResultException::getMessage' => ['string'],
 'MongoResultException::getPrevious' => ['Exception|Throwable'],
-'MongoResultException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'MongoResultException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'MongoResultException::getTraceAsString' => ['string'],
 'MongoTimestamp::__construct' => ['void', 'second='=>'int', 'inc='=>'int'],
 'MongoTimestamp::__toString' => ['string'],
@@ -8146,7 +8146,7 @@ return [
 'MongoWriteConcernException::getLine' => ['int'],
 'MongoWriteConcernException::getMessage' => ['string'],
 'MongoWriteConcernException::getPrevious' => ['Exception|Throwable'],
-'MongoWriteConcernException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'MongoWriteConcernException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'MongoWriteConcernException::getTraceAsString' => ['string'],
 'monitor_custom_event' => ['void', 'class'=>'string', 'text'=>'string', 'severe='=>'int', 'user_data='=>'mixed'],
 'monitor_httperror_event' => ['void', 'error_code'=>'int', 'url'=>'string', 'severe='=>'int'],
@@ -9424,7 +9424,7 @@ return [
 'OutOfBoundsException::getLine' => ['int'],
 'OutOfBoundsException::getMessage' => ['string'],
 'OutOfBoundsException::getPrevious' => ['Throwable|OutOfBoundsException|null'],
-'OutOfBoundsException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'OutOfBoundsException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'OutOfBoundsException::getTraceAsString' => ['string'],
 'OutOfRangeException::__clone' => ['void'],
 'OutOfRangeException::__construct' => ['void', 'message='=>'string', 'code='=>'int', 'previous='=>'?Throwable|?OutOfRangeException'],
@@ -9434,7 +9434,7 @@ return [
 'OutOfRangeException::getLine' => ['int'],
 'OutOfRangeException::getMessage' => ['string'],
 'OutOfRangeException::getPrevious' => ['Throwable|OutOfRangeException|null'],
-'OutOfRangeException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'OutOfRangeException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'OutOfRangeException::getTraceAsString' => ['string'],
 'output_add_rewrite_var' => ['bool', 'name'=>'string', 'value'=>'string'],
 'output_cache_disable' => ['void'],
@@ -9461,7 +9461,7 @@ return [
 'OverflowException::getLine' => ['int'],
 'OverflowException::getMessage' => ['string'],
 'OverflowException::getPrevious' => ['Throwable|OverflowException|null'],
-'OverflowException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'OverflowException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'OverflowException::getTraceAsString' => ['string'],
 'overload' => ['', 'class_name'=>'string'],
 'override_function' => ['bool', 'function_name'=>'string', 'function_args'=>'string', 'function_code'=>'string'],
@@ -9553,7 +9553,7 @@ return [
 'ParseError::getLine' => ['int'],
 'ParseError::getMessage' => ['string'],
 'ParseError::getPrevious' => ['Throwable|ParseError|null'],
-'ParseError::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'ParseError::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'ParseError::getTraceAsString' => ['string'],
 'parsekit_compile_file' => ['array', 'filename'=>'string', 'errors='=>'array', 'options='=>'int'],
 'parsekit_compile_string' => ['array', 'phpcode'=>'string', 'errors='=>'array', 'options='=>'int'],
@@ -9905,7 +9905,7 @@ return [
 'PDO::commit' => ['bool'],
 'PDO::cubrid_schema' => ['array', 'schema_type'=>'int', 'table_name='=>'string', 'col_name='=>'string'],
 'PDO::errorCode' => ['?string'],
-'PDO::errorInfo' => ['array{0: ?string, 1: ?int, 2: ?string, 3?: mixed, 4?: mixed}'],
+'PDO::errorInfo' => ['strict-array{0: ?string, 1: ?int, 2: ?string, 3?: mixed, 4?: mixed}'],
 'PDO::exec' => ['int|false', 'query'=>'string'],
 'PDO::getAttribute' => ['', 'attribute'=>'int'],
 'PDO::getAvailableDrivers' => ['array'],
@@ -9915,7 +9915,7 @@ return [
 'PDO::pgsqlCopyFromFile' => ['bool', 'table_name'=>'string', 'filename'=>'string', 'delimiter'=>'string', 'null_as'=>'string', 'fields'=>'string'],
 'PDO::pgsqlCopyToArray' => ['array', 'table_name'=>'string', 'delimiter'=>'string', 'null_as'=>'string', 'fields'=>'string'],
 'PDO::pgsqlCopyToFile' => ['bool', 'table_name'=>'string', 'filename'=>'string', 'delimiter'=>'string', 'null_as'=>'string', 'fields'=>'string'],
-'PDO::pgsqlGetNotify' => ['array{message:string,pid:int,payload?:string}|false', 'result_type='=>'PDO::FETCH_*', 'ms_timeout='=>'int'],
+'PDO::pgsqlGetNotify' => ['strict-array{message:string,pid:int,payload?:string}|false', 'result_type='=>'PDO::FETCH_*', 'ms_timeout='=>'int'],
 'PDO::pgsqlGetPid' => ['int'],
 'PDO::pgsqlLOBCreate' => ['string'],
 'PDO::pgsqlLOBOpen' => ['resource', 'oid'=>'string', 'mode='=>'string'],
@@ -9937,7 +9937,7 @@ return [
 'PDOException::getLine' => ['int'],
 'PDOException::getMessage' => ['string'],
 'PDOException::getPrevious' => ['?Throwable'],
-'PDOException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'PDOException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'PDOException::getTraceAsString' => ['string'],
 'PDOStatement::__sleep' => ['list<string>'],
 'PDOStatement::__wakeup' => ['void'],
@@ -9948,7 +9948,7 @@ return [
 'PDOStatement::columnCount' => ['int'],
 'PDOStatement::debugDumpParams' => ['bool|null'],
 'PDOStatement::errorCode' => ['string|null'],
-'PDOStatement::errorInfo' => ['array{0: ?string, 1: ?int, 2: ?string, 3?: mixed, 4?: mixed}'],
+'PDOStatement::errorInfo' => ['strict-array{0: ?string, 1: ?int, 2: ?string, 3?: mixed, 4?: mixed}'],
 'PDOStatement::execute' => ['bool', 'params='=>'?array'],
 'PDOStatement::fetch' => ['mixed', 'mode='=>'int', 'cursorOrientation='=>'int', 'cursorOffset='=>'int'],
 'PDOStatement::fetchAll' => ['array', 'mode='=>'int', '...args='=>'mixed'],
@@ -10097,7 +10097,7 @@ return [
 'Phar::getMetadata' => ['mixed', 'unserializeOptions='=>'array'],
 'Phar::getModified' => ['bool'],
 'Phar::getPath' => ['string'],
-'Phar::getSignature' => ['array{hash:string, hash_type:string}'],
+'Phar::getSignature' => ['strict-array{hash:string, hash_type:string}'],
 'Phar::getStub' => ['string'],
 'Phar::getSupportedCompression' => ['array'],
 'Phar::getSupportedSignatures' => ['array'],
@@ -10278,17 +10278,17 @@ return [
 'posix_getegid' => ['int'],
 'posix_geteuid' => ['int'],
 'posix_getgid' => ['int'],
-'posix_getgrgid' => ['array{name: string, passwd: string, gid: int, members: list<string>}|false', 'group_id'=>'int'],
-'posix_getgrnam' => ['array{name: string, passwd: string, gid: int, members: list<string>}|false', 'name'=>'string'],
+'posix_getgrgid' => ['strict-array{name: string, passwd: string, gid: int, members: list<string>}|false', 'group_id'=>'int'],
+'posix_getgrnam' => ['strict-array{name: string, passwd: string, gid: int, members: list<string>}|false', 'name'=>'string'],
 'posix_getgroups' => ['list<int>|false'],
 'posix_getlogin' => ['string|false'],
 'posix_getpgid' => ['int|false', 'process_id'=>'int'],
 'posix_getpgrp' => ['int'],
 'posix_getpid' => ['int'],
 'posix_getppid' => ['int'],
-'posix_getpwnam' => ['array{name: string, passwd: string, uid: int, gid: int, gecos: string, dir: string, shell: string}|false', 'username'=>'string'],
-'posix_getpwuid' => ['array{name: string, passwd: string, uid: int, gid: int, gecos: string, dir: string, shell: string}|false', 'user_id'=>'int'],
-'posix_getrlimit' => ['array{"soft core": string, "hard core": string, "soft data": string, "hard data": string, "soft stack": integer, "hard stack": string, "soft totalmem": string, "hard totalmem": string, "soft rss": string, "hard rss": string, "soft maxproc": integer, "hard maxproc": integer, "soft memlock": integer, "hard memlock": integer, "soft cpu": string, "hard cpu": string, "soft filesize": string, "hard filesize": string, "soft openfiles": integer, "hard openfiles": integer}|false'],
+'posix_getpwnam' => ['strict-array{name: string, passwd: string, uid: int, gid: int, gecos: string, dir: string, shell: string}|false', 'username'=>'string'],
+'posix_getpwuid' => ['strict-array{name: string, passwd: string, uid: int, gid: int, gecos: string, dir: string, shell: string}|false', 'user_id'=>'int'],
+'posix_getrlimit' => ['strict-array{"soft core": string, "hard core": string, "soft data": string, "hard data": string, "soft stack": integer, "hard stack": string, "soft totalmem": string, "hard totalmem": string, "soft rss": string, "hard rss": string, "soft maxproc": integer, "hard maxproc": integer, "soft memlock": integer, "hard memlock": integer, "soft cpu": string, "hard cpu": string, "soft filesize": string, "hard filesize": string, "soft openfiles": integer, "hard openfiles": integer}|false'],
 'posix_getsid' => ['int|false', 'process_id'=>'int'],
 'posix_getuid' => ['int'],
 'posix_initgroups' => ['bool', 'username'=>'string', 'group_id'=>'int'],
@@ -10304,9 +10304,9 @@ return [
 'posix_setsid' => ['int'],
 'posix_setuid' => ['bool', 'user_id'=>'int'],
 'posix_strerror' => ['string', 'error_code'=>'int'],
-'posix_times' => ['array{ticks: int, utime: int, stime: int, cutime: int, cstime: int}|false'],
+'posix_times' => ['strict-array{ticks: int, utime: int, stime: int, cutime: int, cstime: int}|false'],
 'posix_ttyname' => ['string|false', 'file_descriptor'=>'resource|int'],
-'posix_uname' => ['array{sysname: string, nodename: string, release: string, version: string, machine: string, domainname: string}|false'],
+'posix_uname' => ['strict-array{sysname: string, nodename: string, release: string, version: string, machine: string, domainname: string}|false'],
 'Postal\Expand::expand_address' => ['string[]', 'address'=>'string', 'options='=>'array<string, mixed>'],
 'Postal\Parser::parse_address' => ['array<string,string>', 'address'=>'string', 'options='=>'array<string, string>'],
 'pow' => ['float|int', 'num'=>'int|float', 'exponent'=>'int|float'],
@@ -10329,7 +10329,7 @@ return [
 'print_r\'1' => ['true', 'value'=>'mixed', 'return='=>'bool'],
 'printf' => ['int', 'format'=>'string', '...values='=>'string|int|float'],
 'proc_close' => ['int', 'process'=>'resource'],
-'proc_get_status' => ['array{command: string, pid: int, running: bool, signaled: bool, stopped: bool, exitcode: int, termsig: int, stopsig: int}', 'process'=>'resource'],
+'proc_get_status' => ['strict-array{command: string, pid: int, running: bool, signaled: bool, stopped: bool, exitcode: int, termsig: int, stopsig: int}', 'process'=>'resource'],
 'proc_nice' => ['bool', 'priority'=>'int'],
 'proc_open' => ['resource|false', 'command'=>'string|array', 'descriptor_spec'=>'array', '&pipes'=>'resource[]', 'cwd='=>'?string', 'env_vars='=>'?array', 'options='=>'?array'],
 'proc_terminate' => ['bool', 'process'=>'resource', 'signal='=>'int'],
@@ -10556,7 +10556,7 @@ return [
 'RangeException::getLine' => ['int'],
 'RangeException::getMessage' => ['string'],
 'RangeException::getPrevious' => ['Throwable|RangeException|null'],
-'RangeException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'RangeException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'RangeException::getTraceAsString' => ['string'],
 'rar_allow_broken_set' => ['bool', 'rarfile'=>'RarArchive', 'allow_broken'=>'bool'],
 'rar_broken_is' => ['bool', 'rarfile'=>'rararchive'],
@@ -10595,7 +10595,7 @@ return [
 'RarException::getLine' => ['int'],
 'RarException::getMessage' => ['string'],
 'RarException::getPrevious' => ['Exception|Throwable'],
-'RarException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'RarException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'RarException::getTraceAsString' => ['string'],
 'RarException::isUsingExceptions' => ['bool'],
 'RarException::setUsingExceptions' => ['RarEntry', 'using_exceptions'=>'bool'],
@@ -10945,7 +10945,7 @@ return [
 'Redis::geoAdd' => ['int', 'key'=>'string', 'longitude'=>'float', 'latitude'=>'float', 'member'=>'string', '...other_triples='=>'string|int|float'],
 'Redis::geoDist' => ['float', 'key'=>'string', 'member1'=>'string', 'member2'=>'string', 'unit='=>'string'],
 'Redis::geoHash' => ['array<int,string>', 'key'=>'string', 'member'=>'string', '...other_members='=>'string'],
-'Redis::geoPos' => ['array<int,array{0:string,1:string}>', 'key'=>'string', 'member'=>'string', '...members='=>'string'],
+'Redis::geoPos' => ['array<int,strict-array{0:string,1:string}>', 'key'=>'string', 'member'=>'string', '...members='=>'string'],
 'Redis::geoRadius' => ['array<int,mixed>|int', 'key'=>'string', 'longitude'=>'float', 'latitude'=>'float', 'radius'=>'float', 'unit'=>'float', 'options='=>'array<string,mixed>'],
 'Redis::geoRadiusByMember' => ['array<int,mixed>|int', 'key'=>'string', 'member'=>'string', 'radius'=>'float', 'units'=>'string', 'options='=>'array<string,mixed>'],
 'Redis::get' => ['string|false', 'key'=>'string'],
@@ -11208,7 +11208,7 @@ return [
 'RedisCluster::geoAdd' => ['int', 'key'=>'string', 'longitude'=>'float', 'latitude'=>'float', 'member'=>'string', '...other_members='=>'float|string'],
 'RedisCluster::geoDist' => ['', 'key'=>'string', 'member1'=>'string', 'member2'=>'string', 'unit='=>'string'],
 'RedisCluster::geohash' => ['array<int,string>', 'key'=>'string', 'member'=>'string', '...other_members='=>'string'],
-'RedisCluster::geopos' => ['array<int,array{0:string,1:string}>', 'key'=>'string', 'member'=>'string', '...other_members='=>'string'],
+'RedisCluster::geopos' => ['array<int,strict-array{0:string,1:string}>', 'key'=>'string', 'member'=>'string', '...other_members='=>'string'],
 'RedisCluster::geoRadius' => ['', 'key'=>'string', 'longitude'=>'float', 'latitude'=>'float', 'radius'=>'float', 'radiusUnit'=>'string', 'options='=>'array'],
 'RedisCluster::geoRadiusByMember' => ['string[]', 'key'=>'string', 'member'=>'string', 'radius'=>'float', 'radiusUnit'=>'string', 'options='=>'array'],
 'RedisCluster::get' => ['string|false', 'key'=>'string'],
@@ -11805,7 +11805,7 @@ return [
 'RuntimeException::getLine' => ['int'],
 'RuntimeException::getMessage' => ['string'],
 'RuntimeException::getPrevious' => ['Throwable|RuntimeException|null'],
-'RuntimeException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'RuntimeException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'RuntimeException::getTraceAsString' => ['string'],
 'SAMConnection::commit' => ['bool'],
 'SAMConnection::connect' => ['bool', 'protocol'=>'string', 'properties='=>'array'],
@@ -12307,7 +12307,7 @@ return [
 'SoapFault::getLine' => ['int'],
 'SoapFault::getMessage' => ['string'],
 'SoapFault::getPrevious' => ['?Exception|?Throwable'],
-'SoapFault::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'SoapFault::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'SoapFault::getTraceAsString' => ['string'],
 'SoapFault::SoapFault' => ['object', 'faultcode'=>'string', 'faultstring'=>'string', 'faultactor='=>'?string', 'detail='=>'?mixed', 'faultname='=>'?string', 'headerfault='=>'?mixed'],
 'SoapHeader::__construct' => ['void', 'namespace'=>'string', 'name'=>'string', 'data='=>'mixed', 'mustunderstand='=>'bool', 'actor='=>'string'],
@@ -12487,7 +12487,7 @@ return [
 'SolrClientException::getLine' => ['int'],
 'SolrClientException::getMessage' => ['string'],
 'SolrClientException::getPrevious' => ['?Exception|?Throwable'],
-'SolrClientException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'SolrClientException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'SolrClientException::getTraceAsString' => ['string'],
 'SolrCollapseFunction::__construct' => ['void', 'field'=>'string'],
 'SolrCollapseFunction::__toString' => ['string'],
@@ -12779,7 +12779,7 @@ return [
 'SolrException::getLine' => ['int'],
 'SolrException::getMessage' => ['string'],
 'SolrException::getPrevious' => ['Exception|Throwable'],
-'SolrException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'SolrException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'SolrException::getTraceAsString' => ['string'],
 'SolrGenericResponse::__construct' => ['void'],
 'SolrGenericResponse::__destruct' => ['void'],
@@ -12804,7 +12804,7 @@ return [
 'SolrIllegalArgumentException::getLine' => ['int'],
 'SolrIllegalArgumentException::getMessage' => ['string'],
 'SolrIllegalArgumentException::getPrevious' => ['Exception|Throwable'],
-'SolrIllegalArgumentException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'SolrIllegalArgumentException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'SolrIllegalArgumentException::getTraceAsString' => ['string'],
 'SolrIllegalOperationException::__clone' => ['void'],
 'SolrIllegalOperationException::__construct' => ['void', 'message='=>'string', 'code='=>'int', 'previous='=>'?Exception|?Throwable'],
@@ -12816,7 +12816,7 @@ return [
 'SolrIllegalOperationException::getLine' => ['int'],
 'SolrIllegalOperationException::getMessage' => ['string'],
 'SolrIllegalOperationException::getPrevious' => ['Exception|Throwable'],
-'SolrIllegalOperationException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'SolrIllegalOperationException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'SolrIllegalOperationException::getTraceAsString' => ['string'],
 'SolrInputDocument::__clone' => ['void'],
 'SolrInputDocument::__construct' => ['void'],
@@ -13124,7 +13124,7 @@ return [
 'SolrServerException::getLine' => ['int'],
 'SolrServerException::getMessage' => ['string'],
 'SolrServerException::getPrevious' => ['Exception|Throwable'],
-'SolrServerException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'SolrServerException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'SolrServerException::getTraceAsString' => ['string'],
 'SolrUpdateResponse::__construct' => ['void'],
 'SolrUpdateResponse::__destruct' => ['void'],
@@ -13251,7 +13251,7 @@ return [
 'SplFileObject::eof' => ['bool'],
 'SplFileObject::fflush' => ['bool'],
 'SplFileObject::fgetc' => ['string|false'],
-'SplFileObject::fgetcsv' => ['list<string>|array{0: null}|false|null', 'seperator='=>'string', 'enclosure='=>'string', 'escape='=>'string'],
+'SplFileObject::fgetcsv' => ['list<string>|strict-array{0: null}|false|null', 'seperator='=>'string', 'enclosure='=>'string', 'escape='=>'string'],
 'SplFileObject::fgets' => ['string|false'],
 'SplFileObject::flock' => ['bool', 'operation'=>'int', '&w_wouldblock='=>'int'],
 'SplFileObject::fpassthru' => ['int|false'],
@@ -13259,7 +13259,7 @@ return [
 'SplFileObject::fread' => ['string|false', 'length'=>'int'],
 'SplFileObject::fscanf' => ['array|int', 'format'=>'string', '&...w_vars='=>'string|int|float'],
 'SplFileObject::fseek' => ['int', 'pos'=>'int', 'whence='=>'int'],
-'SplFileObject::fstat' => ['array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}'],
+'SplFileObject::fstat' => ['strict-array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}'],
 'SplFileObject::ftell' => ['int|false'],
 'SplFileObject::ftruncate' => ['bool', 'size'=>'int'],
 'SplFileObject::fwrite' => ['int', 'string'=>'string', 'length='=>'int'],
@@ -13443,7 +13443,7 @@ return [
 'SplTempFileObject::eof' => ['bool'],
 'SplTempFileObject::fflush' => ['bool'],
 'SplTempFileObject::fgetc' => ['false|string'],
-'SplTempFileObject::fgetcsv' => ['list<string>|array{0: null}|false|null', 'seperator='=>'string', 'enclosure='=>'string', 'escape='=>'string'],
+'SplTempFileObject::fgetcsv' => ['list<string>|strict-array{0: null}|false|null', 'seperator='=>'string', 'enclosure='=>'string', 'escape='=>'string'],
 'SplTempFileObject::fgets' => ['string'],
 'SplTempFileObject::fgetss' => ['string', 'allowable_tags='=>'string'],
 'SplTempFileObject::flock' => ['bool', 'operation'=>'int', '&wouldblock='=>'int'],
@@ -13452,7 +13452,7 @@ return [
 'SplTempFileObject::fread' => ['false|string', 'length'=>'int'],
 'SplTempFileObject::fscanf' => ['bool', 'format'=>'string', '&...w_vars='=>'array<int,float>|array<int,int>|array<int,string>'],
 'SplTempFileObject::fseek' => ['int', 'pos'=>'int', 'whence='=>'int'],
-'SplTempFileObject::fstat' => ['array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}'],
+'SplTempFileObject::fstat' => ['strict-array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}'],
 'SplTempFileObject::ftell' => ['int'],
 'SplTempFileObject::ftruncate' => ['bool', 'size'=>'int'],
 'SplTempFileObject::fwrite' => ['int', 'string'=>'string', 'length='=>'int'],
@@ -13605,7 +13605,7 @@ return [
 'SQLiteException::getLine' => ['int'],
 'SQLiteException::getMessage' => ['string'],
 'SQLiteException::getPrevious' => ['RuntimeException|Throwable|null'],
-'SQLiteException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'SQLiteException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'SQLiteException::getTraceAsString' => ['string'],
 'SQLiteResult::__construct' => ['void'],
 'SQLiteResult::column' => ['mixed', 'index_or_name'=>'', 'decode_binary='=>'bool'],
@@ -13689,18 +13689,18 @@ return [
 'ssh2_scp_send' => ['bool', 'session'=>'resource', 'local_file'=>'string', 'remote_file'=>'string', 'create_mode='=>'int'],
 'ssh2_sftp' => ['resource|false', 'session'=>'resource'],
 'ssh2_sftp_chmod' => ['bool', 'sftp'=>'resource', 'filename'=>'string', 'mode'=>'int'],
-'ssh2_sftp_lstat' => ['array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'sftp'=>'resource', 'path'=>'string'],
+'ssh2_sftp_lstat' => ['strict-array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'sftp'=>'resource', 'path'=>'string'],
 'ssh2_sftp_mkdir' => ['bool', 'sftp'=>'resource', 'dirname'=>'string', 'mode='=>'int', 'recursive='=>'bool'],
 'ssh2_sftp_readlink' => ['string|false', 'sftp'=>'resource', 'link'=>'string'],
 'ssh2_sftp_realpath' => ['string|false', 'sftp'=>'resource', 'filename'=>'string'],
 'ssh2_sftp_rename' => ['bool', 'sftp'=>'resource', 'from'=>'string', 'to'=>'string'],
 'ssh2_sftp_rmdir' => ['bool', 'sftp'=>'resource', 'dirname'=>'string'],
-'ssh2_sftp_stat' => ['array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'sftp'=>'resource', 'path'=>'string'],
+'ssh2_sftp_stat' => ['strict-array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'sftp'=>'resource', 'path'=>'string'],
 'ssh2_sftp_symlink' => ['bool', 'sftp'=>'resource', 'target'=>'string', 'link'=>'string'],
 'ssh2_sftp_unlink' => ['bool', 'sftp'=>'resource', 'filename'=>'string'],
 'ssh2_shell' => ['resource|false', 'session'=>'resource', 'term_type='=>'string', 'env='=>'array', 'width='=>'int', 'height='=>'int', 'width_height_type='=>'int'],
 'ssh2_tunnel' => ['resource|false', 'session'=>'resource', 'host'=>'string', 'port'=>'int'],
-'stat' => ['array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'filename'=>'string'],
+'stat' => ['strict-array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'filename'=>'string'],
 'stats_absolute_deviation' => ['float', 'a'=>'array'],
 'stats_cdf_beta' => ['float', 'par1'=>'float', 'par2'=>'float', 'par3'=>'float', 'which'=>'int'],
 'stats_cdf_binomial' => ['float', 'par1'=>'float', 'par2'=>'float', 'par3'=>'float', 'which'=>'int'],
@@ -13847,7 +13847,7 @@ return [
 'stream_get_contents' => ['string|false', 'stream'=>'resource', 'length='=>'int', 'offset='=>'int'],
 'stream_get_filters' => ['array'],
 'stream_get_line' => ['string|false', 'stream'=>'resource', 'length'=>'int', 'ending='=>'string'],
-'stream_get_meta_data' => ['array{timed_out:bool,blocked:bool,eof:bool,unread_bytes:int,stream_type:string,wrapper_type:string,wrapper_data:mixed,mode:string,seekable:bool,uri:string,mediatype:string,crypto?:array{protocol:string,cipher_name:string,cipher_bits:int,cipher_version:string}}', 'stream'=>'resource'],
+'stream_get_meta_data' => ['strict-array{timed_out:bool,blocked:bool,eof:bool,unread_bytes:int,stream_type:string,wrapper_type:string,wrapper_data:mixed,mode:string,seekable:bool,uri:string,mediatype:string,crypto?:strict-array{protocol:string,cipher_name:string,cipher_bits:int,cipher_version:string}}', 'stream'=>'resource'],
 'stream_get_transports' => ['list<string>'],
 'stream_get_wrappers' => ['list<string>'],
 'stream_is_local' => ['bool', 'stream'=>'resource|string'],
@@ -14604,7 +14604,7 @@ return [
 'Throwable::getLine' => ['int'],
 'Throwable::getMessage' => ['string'],
 'Throwable::getPrevious' => ['?Throwable'],
-'Throwable::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'Throwable::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'Throwable::getTraceAsString' => ['string'],
 'tidy::__construct' => ['void', 'filename='=>'string', 'config='=>'', 'encoding='=>'string', 'useIncludePath='=>'bool'],
 'tidy::body' => ['tidyNode'],
@@ -14666,19 +14666,19 @@ return [
 'tidyNode::isPhp' => ['bool'],
 'tidyNode::isText' => ['bool'],
 'time' => ['positive-int'],
-'time_nanosleep' => ['array{0:0|positive-int,1:0|positive-int}|bool', 'seconds'=>'positive-int', 'nanoseconds'=>'positive-int'],
+'time_nanosleep' => ['strict-array{0:0|positive-int,1:0|positive-int}|bool', 'seconds'=>'positive-int', 'nanoseconds'=>'positive-int'],
 'time_sleep_until' => ['bool', 'timestamp'=>'float'],
-'timezone_abbreviations_list' => ['array<string, list<array{dst: bool, offset: int, timezone_id: string|null}>>|false'],
+'timezone_abbreviations_list' => ['array<string, list<strict-array{dst: bool, offset: int, timezone_id: string|null}>>|false'],
 'timezone_identifiers_list' => ['list<string>', 'timezoneGroup='=>'int', 'countryCode='=>'?string'],
 'timezone_location_get' => ['array|false', 'object'=>'DateTimeZone'],
 'timezone_name_from_abbr' => ['string|false', 'abbr'=>'string', 'utcOffset='=>'int', 'isDST='=>'int'],
 'timezone_name_get' => ['string', 'object'=>'DateTimeZone'],
 'timezone_offset_get' => ['int|false', 'object'=>'DateTimeZone', 'datetime'=>'DateTimeInterface'],
 'timezone_open' => ['DateTimeZone|false', 'timezone'=>'string'],
-'timezone_transitions_get' => ['list<array{ts: int, time: string, offset: int, isdst: bool, abbr: string}>|false', 'object'=>'DateTimeZone', 'timestampBegin='=>'int', 'timestampEnd='=>'int'],
+'timezone_transitions_get' => ['list<strict-array{ts: int, time: string, offset: int, isdst: bool, abbr: string}>|false', 'object'=>'DateTimeZone', 'timestampBegin='=>'int', 'timestampEnd='=>'int'],
 'timezone_version_get' => ['string'],
 'tmpfile' => ['resource|false'],
-'token_get_all' => ['list<string|array{0:int,1:string,2:int}>', 'code'=>'string', 'flags='=>'int'],
+'token_get_all' => ['list<string|strict-array{0:int,1:string,2:int}>', 'code'=>'string', 'flags='=>'int'],
 'token_name' => ['string', 'id'=>'int'],
 'TokyoTyrant::__construct' => ['void', 'host='=>'string', 'port='=>'int', 'options='=>'array'],
 'TokyoTyrant::add' => ['int|float', 'key'=>'string', 'increment'=>'float', 'type='=>'int'],
@@ -14924,7 +14924,7 @@ return [
 'TypeError::getLine' => ['int'],
 'TypeError::getMessage' => ['string'],
 'TypeError::getPrevious' => ['Throwable|TypeError|null'],
-'TypeError::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'TypeError::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'TypeError::getTraceAsString' => ['string'],
 'uasort' => ['bool', '&rw_array'=>'array', 'callback'=>'callable(mixed,mixed):int'],
 'ucfirst' => ['string', 'string'=>'string'],
@@ -15147,7 +15147,7 @@ return [
 'UnderflowException::getLine' => ['int'],
 'UnderflowException::getMessage' => ['string'],
 'UnderflowException::getPrevious' => ['Throwable|UnderflowException|null'],
-'UnderflowException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'UnderflowException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'UnderflowException::getTraceAsString' => ['string'],
 'UnexpectedValueException::__clone' => ['void'],
 'UnexpectedValueException::__construct' => ['void', 'message='=>'string', 'code='=>'int', 'previous='=>'?Throwable|?UnexpectedValueException'],
@@ -15157,7 +15157,7 @@ return [
 'UnexpectedValueException::getLine' => ['int'],
 'UnexpectedValueException::getMessage' => ['string'],
 'UnexpectedValueException::getPrevious' => ['Throwable|UnexpectedValueException|null'],
-'UnexpectedValueException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'UnexpectedValueException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'UnexpectedValueException::getTraceAsString' => ['string'],
 'uniqid' => ['non-empty-string', 'prefix='=>'string', 'more_entropy='=>'bool'],
 'unixtojd' => ['int', 'timestamp='=>'int'],
@@ -15250,7 +15250,7 @@ return [
 'V8JsScriptException::getLine' => ['int'],
 'V8JsScriptException::getMessage' => ['string'],
 'V8JsScriptException::getPrevious' => ['Exception|Throwable'],
-'V8JsScriptException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'V8JsScriptException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'V8JsScriptException::getTraceAsString' => ['string'],
 'var_dump' => ['void', 'value'=>'mixed', '...values='=>'mixed'],
 'var_export' => ['?string', 'value'=>'mixed', 'return='=>'bool'],
@@ -16600,7 +16600,7 @@ return [
 'Yar_Client_Exception::getLine' => ['int'],
 'Yar_Client_Exception::getMessage' => ['string'],
 'Yar_Client_Exception::getPrevious' => ['?Exception|?Throwable'],
-'Yar_Client_Exception::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'Yar_Client_Exception::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'Yar_Client_Exception::getTraceAsString' => ['string'],
 'Yar_Client_Exception::getType' => ['string'],
 'Yar_Concurrent_Client::call' => ['int', 'uri'=>'string', 'method'=>'string', 'parameters'=>'array', 'callback='=>'callable'],
@@ -16617,7 +16617,7 @@ return [
 'Yar_Server_Exception::getLine' => ['int'],
 'Yar_Server_Exception::getMessage' => ['string'],
 'Yar_Server_Exception::getPrevious' => ['?Exception|?Throwable'],
-'Yar_Server_Exception::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+'Yar_Server_Exception::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
 'Yar_Server_Exception::getTraceAsString' => ['string'],
 'Yar_Server_Exception::getType' => ['string'],
 'yaz_addinfo' => ['string', 'id'=>'resource'],
diff --git a/dictionaries/CallMap_73_delta.php b/dictionaries/CallMap_73_delta.php
index 91002d470..eba92b81e 100644
--- a/dictionaries/CallMap_73_delta.php
+++ b/dictionaries/CallMap_73_delta.php
@@ -26,18 +26,18 @@ return [
     'JsonException::getLine' => ['int'],
     'JsonException::getMessage' => ['string'],
     'JsonException::getPrevious' => ['?Throwable'],
-    'JsonException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'JsonException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'JsonException::getTraceAsString' => ['string'],
     'SplPriorityQueue::isCorrupted' => ['bool'],
     'array_key_first' => ['int|string|null', 'array'=>'array'],
     'array_key_last' => ['int|string|null', 'array'=>'array'],
     'fpm_get_status' => ['array|false'],
-    'gc_status' => ['array{runs:int,collected:int,threshold:int,roots:int}'],
+    'gc_status' => ['strict-array{runs:int,collected:int,threshold:int,roots:int}'],
     'gmp_binomial' => ['GMP|false', 'n'=>'GMP|string|int', 'k'=>'int'],
     'gmp_kronecker' => ['int', 'num1'=>'GMP|string|int', 'num2'=>'GMP|string|int'],
     'gmp_lcm' => ['GMP', 'num1'=>'GMP|string|int', 'num2'=>'GMP|string|int'],
     'gmp_perfect_power' => ['bool', 'num'=>'GMP|string|int'],
-    'hrtime' => ['array{0:int,1:int}|false', 'as_number='=>'false'],
+    'hrtime' => ['strict-array{0:int,1:int}|false', 'as_number='=>'false'],
     'hrtime\'1' => ['int|float|false', 'as_number='=>'true'],
     'is_countable' => ['bool', 'value'=>'mixed'],
     'net_get_interfaces' => ['array<string,array<string,mixed>>|false'],
diff --git a/dictionaries/CallMap_80_delta.php b/dictionaries/CallMap_80_delta.php
index 815d07edb..b60e895b9 100644
--- a/dictionaries/CallMap_80_delta.php
+++ b/dictionaries/CallMap_80_delta.php
@@ -1210,8 +1210,8 @@ return [
       'new' => ['string', 'password'=>'string', 'algo'=>'int|string|null', 'options='=>'array'],
     ],
     'proc_get_status' => [
-      'old' => ['array{command: string, pid: int, running: bool, signaled: bool, stopped: bool, exitcode: int, termsig: int, stopsig: int}|false', 'process'=>'resource'],
-      'new' => ['array{command: string, pid: int, running: bool, signaled: bool, stopped: bool, exitcode: int, termsig: int, stopsig: int}', 'process'=>'resource'],
+      'old' => ['strict-array{command: string, pid: int, running: bool, signaled: bool, stopped: bool, exitcode: int, termsig: int, stopsig: int}|false', 'process'=>'resource'],
+      'new' => ['strict-array{command: string, pid: int, running: bool, signaled: bool, stopped: bool, exitcode: int, termsig: int, stopsig: int}', 'process'=>'resource'],
     ],
     'session_set_cookie_params' => [
       'old' => ['bool', 'lifetime'=>'int', 'path='=>'string', 'domain='=>'string', 'secure='=>'bool', 'httponly='=>'bool'],
@@ -1677,7 +1677,7 @@ return [
     'ReflectionType::isBuiltin' => ['bool'],
     'SplFileObject::fgetss' => ['string|false', 'allowable_tags='=>'string'],
     'create_function' => ['string', 'args'=>'string', 'code'=>'string'],
-    'each' => ['array{0:int|string,key:int|string,1:mixed,value:mixed}', '&r_arr'=>'array'],
+    'each' => ['strict-array{0:int|string,key:int|string,1:mixed,value:mixed}', '&r_arr'=>'array'],
     'gmp_random' => ['GMP', 'limiter='=>'int'],
     'gzgetss' => ['string|false', 'zp'=>'resource', 'length'=>'int', 'allowable_tags='=>'string'],
     'image2wbmp' => ['bool', 'im'=>'resource', 'filename='=>'?string', 'threshold='=>'int'],
diff --git a/dictionaries/CallMap_historical.php b/dictionaries/CallMap_historical.php
index 97d739fa4..45445da29 100644
--- a/dictionaries/CallMap_historical.php
+++ b/dictionaries/CallMap_historical.php
@@ -196,7 +196,7 @@ return [
     'ArgumentCountError::getLine' => ['int'],
     'ArgumentCountError::getMessage' => ['string'],
     'ArgumentCountError::getPrevious' => ['?Throwable'],
-    'ArgumentCountError::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'ArgumentCountError::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'ArgumentCountError::getTraceAsString' => ['string'],
     'ArithmeticError::__clone' => ['void'],
     'ArithmeticError::__construct' => ['void', 'message='=>'string', 'code='=>'int', 'previous='=>'?Throwable|?Error'],
@@ -207,7 +207,7 @@ return [
     'ArithmeticError::getLine' => ['int'],
     'ArithmeticError::getMessage' => ['string'],
     'ArithmeticError::getPrevious' => ['?Throwable'],
-    'ArithmeticError::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'ArithmeticError::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'ArithmeticError::getTraceAsString' => ['string'],
     'ArrayAccess::offsetExists' => ['bool', 'offset'=>'mixed'],
     'ArrayAccess::offsetGet' => ['mixed', 'offset'=>'mixed'],
@@ -267,7 +267,7 @@ return [
     'BadFunctionCallException::getLine' => ['int'],
     'BadFunctionCallException::getMessage' => ['string'],
     'BadFunctionCallException::getPrevious' => ['?Throwable|?BadFunctionCallException'],
-    'BadFunctionCallException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'BadFunctionCallException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'BadFunctionCallException::getTraceAsString' => ['string'],
     'BadMethodCallException::__clone' => ['void'],
     'BadMethodCallException::__construct' => ['void', 'message='=>'string', 'code='=>'int', 'previous='=>'?Throwable|?BadMethodCallException'],
@@ -277,7 +277,7 @@ return [
     'BadMethodCallException::getLine' => ['int'],
     'BadMethodCallException::getMessage' => ['string'],
     'BadMethodCallException::getPrevious' => ['?Throwable|?BadMethodCallException'],
-    'BadMethodCallException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'BadMethodCallException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'BadMethodCallException::getTraceAsString' => ['string'],
     'COM::__call' => ['', 'name'=>'', 'args'=>''],
     'COM::__construct' => ['void', 'module_name'=>'string', 'server_name='=>'mixed', 'codepage='=>'int', 'typelib='=>'string'],
@@ -536,7 +536,7 @@ return [
     'ClosedGeneratorException::getLine' => ['int'],
     'ClosedGeneratorException::getMessage' => ['string'],
     'ClosedGeneratorException::getPrevious' => ['Throwable|ClosedGeneratorException|null'],
-    'ClosedGeneratorException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'ClosedGeneratorException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'ClosedGeneratorException::getTraceAsString' => ['string'],
     'Closure::__construct' => ['void'],
     'Closure::__invoke' => ['', '...args='=>''],
@@ -1044,7 +1044,7 @@ return [
     'DateTime::createFromFormat' => ['static|false', 'format'=>'string', 'time'=>'string', 'timezone='=>'?DateTimeZone'],
     'DateTime::diff' => ['DateInterval|false', 'datetime2'=>'DateTimeInterface', 'absolute='=>'bool'],
     'DateTime::format' => ['string|false', 'format'=>'string'],
-    'DateTime::getLastErrors' => ['array{warning_count:int,warnings:array<int,string>,error_count:int,errors:array<int,string>}|false'],
+    'DateTime::getLastErrors' => ['strict-array{warning_count:int,warnings:array<int,string>,error_count:int,errors:array<int,string>}|false'],
     'DateTime::getOffset' => ['int'],
     'DateTime::getTimestamp' => ['int|false'],
     'DateTime::getTimezone' => ['DateTimeZone|false'],
@@ -1057,7 +1057,7 @@ return [
     'DateTime::sub' => ['static', 'interval'=>'DateInterval'],
     'DateTimeImmutable::__set_state' => ['static', 'array'=>'array'],
     'DateTimeImmutable::__wakeup' => ['void'],
-    'DateTimeImmutable::getLastErrors' => ['array{warning_count:int,warnings:array<int,string>,error_count:int,errors:array<int,string>}|false'],
+    'DateTimeImmutable::getLastErrors' => ['strict-array{warning_count:int,warnings:array<int,string>,error_count:int,errors:array<int,string>}|false'],
     'DateTimeInterface::diff' => ['DateInterval', 'datetime2'=>'DateTimeInterface', 'absolute='=>'bool'],
     'DateTimeInterface::format' => ['string', 'format'=>'string'],
     'DateTimeInterface::getOffset' => ['int'],
@@ -1069,8 +1069,8 @@ return [
     'DateTimeZone::getLocation' => ['array|false'],
     'DateTimeZone::getName' => ['string'],
     'DateTimeZone::getOffset' => ['int|false', 'datetime'=>'DateTimeInterface'],
-    'DateTimeZone::getTransitions' => ['list<array{ts: int, time: string, offset: int, isdst: bool, abbr: string}>|false', 'timestamp_begin='=>'int', 'timestamp_end='=>'int'],
-    'DateTimeZone::listAbbreviations' => ['array<string, list<array{dst: bool, offset: int, timezone_id: string|null}>>|false'],
+    'DateTimeZone::getTransitions' => ['list<strict-array{ts: int, time: string, offset: int, isdst: bool, abbr: string}>|false', 'timestamp_begin='=>'int', 'timestamp_end='=>'int'],
+    'DateTimeZone::listAbbreviations' => ['array<string, list<strict-array{dst: bool, offset: int, timezone_id: string|null}>>|false'],
     'DateTimeZone::listIdentifiers' => ['list<string>|false', 'timezoneGroup='=>'int', 'countryCode='=>'string'],
     'Directory::close' => ['void', 'dir_handle='=>'resource'],
     'Directory::read' => ['string|false', 'dir_handle='=>'resource'],
@@ -1137,7 +1137,7 @@ return [
     'DomainException::getLine' => ['int'],
     'DomainException::getMessage' => ['string'],
     'DomainException::getPrevious' => ['Throwable|DomainException|null'],
-    'DomainException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'DomainException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'DomainException::getTraceAsString' => ['string'],
     'Ds\Collection::clear' => ['void'],
     'Ds\Collection::copy' => ['Ds\Collection'],
@@ -1362,7 +1362,7 @@ return [
     'Error::getLine' => ['int'],
     'Error::getMessage' => ['string'],
     'Error::getPrevious' => ['Throwable|Error|null'],
-    'Error::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'Error::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'Error::getTraceAsString' => ['string'],
     'ErrorException::__clone' => ['void'],
     'ErrorException::__construct' => ['void', 'message='=>'string', 'code='=>'int', 'severity='=>'int', 'filename='=>'string', 'line='=>'int', 'previous='=>'?Throwable|?ErrorException'],
@@ -1373,7 +1373,7 @@ return [
     'ErrorException::getMessage' => ['string'],
     'ErrorException::getPrevious' => ['Throwable|ErrorException|null'],
     'ErrorException::getSeverity' => ['int'],
-    'ErrorException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'ErrorException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'ErrorException::getTraceAsString' => ['string'],
     'Ev::backend' => ['int'],
     'Ev::depth' => ['int'],
@@ -1707,7 +1707,7 @@ return [
     'Exception::getLine' => ['int'],
     'Exception::getMessage' => ['string'],
     'Exception::getPrevious' => ['?Throwable|?Exception'],
-    'Exception::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'Exception::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'Exception::getTraceAsString' => ['string'],
     'FANNConnection::__construct' => ['void', 'from_neuron'=>'int', 'to_neuron'=>'int', 'weight'=>'float'],
     'FANNConnection::getFromNeuron' => ['int'],
@@ -1766,7 +1766,7 @@ return [
     'GEOSGeometry::boundary' => ['GEOSGeometry'],
     'GEOSGeometry::buffer' => ['GEOSGeometry', 'dist'=>'float', 'styleArray='=>'array'],
     'GEOSGeometry::centroid' => ['GEOSGeometry'],
-    'GEOSGeometry::checkValidity' => ['array{valid: bool, reason?: string, location?: GEOSGeometry}'],
+    'GEOSGeometry::checkValidity' => ['strict-array{valid: bool, reason?: string, location?: GEOSGeometry}'],
     'GEOSGeometry::contains' => ['bool', 'geom'=>'GEOSGeometry'],
     'GEOSGeometry::convexHull' => ['GEOSGeometry'],
     'GEOSGeometry::coordinateDimension' => ['int'],
@@ -1824,7 +1824,7 @@ return [
     'GEOSGeometry::voronoiDiagram' => ['GEOSGeometry', 'tolerance'=>'float', 'onlyEdges'=>'bool', 'extent'=>'GEOSGeometry|null'],
     'GEOSGeometry::within' => ['bool', 'geom'=>'GEOSGeometry'],
     'GEOSLineMerge' => ['array', 'geom'=>'GEOSGeometry'],
-    'GEOSPolygonize' => ['array{rings: GEOSGeometry[], cut_edges?: GEOSGeometry[], dangles: GEOSGeometry[], invalid_rings: GEOSGeometry[]}', 'geom'=>'GEOSGeometry'],
+    'GEOSPolygonize' => ['strict-array{rings: GEOSGeometry[], cut_edges?: GEOSGeometry[], dangles: GEOSGeometry[], invalid_rings: GEOSGeometry[]}', 'geom'=>'GEOSGeometry'],
     'GEOSRelateMatch' => ['bool', 'matrix'=>'string', 'pattern'=>'string'],
     'GEOSSharedPaths' => ['GEOSGeometry', 'geom1'=>'GEOSGeometry', 'geom2'=>'GEOSGeometry'],
     'GEOSVersion' => ['string'],
@@ -2661,9 +2661,9 @@ return [
     'Imagick::colorizeImage' => ['bool', 'colorize'=>'mixed', 'opacity'=>'mixed'],
     'Imagick::combineImages' => ['Imagick', 'channeltype'=>'int'],
     'Imagick::commentImage' => ['bool', 'comment'=>'string'],
-    'Imagick::compareImageChannels' => ['array{Imagick, float}', 'image'=>'Imagick', 'channeltype'=>'int', 'metrictype'=>'int'],
+    'Imagick::compareImageChannels' => ['strict-array{Imagick, float}', 'image'=>'Imagick', 'channeltype'=>'int', 'metrictype'=>'int'],
     'Imagick::compareImageLayers' => ['Imagick', 'method'=>'int'],
-    'Imagick::compareImages' => ['array{Imagick, float}', 'compare'=>'Imagick', 'metric'=>'int'],
+    'Imagick::compareImages' => ['strict-array{Imagick, float}', 'compare'=>'Imagick', 'metric'=>'int'],
     'Imagick::compositeImage' => ['bool', 'composite_object'=>'Imagick', 'composite'=>'int', 'x'=>'int', 'y'=>'int', 'channel='=>'int'],
     'Imagick::compositeImageGravity' => ['bool', 'Imagick'=>'Imagick', 'COMPOSITE_CONSTANT'=>'int', 'GRAVITY_CONSTANT'=>'int'],
     'Imagick::contrastImage' => ['bool', 'sharpen'=>'bool'],
@@ -2723,16 +2723,16 @@ return [
     'Imagick::getImageAttribute' => ['string', 'key'=>'string'],
     'Imagick::getImageBackgroundColor' => ['ImagickPixel'],
     'Imagick::getImageBlob' => ['string'],
-    'Imagick::getImageBluePrimary' => ['array{x:float, y:float}'],
+    'Imagick::getImageBluePrimary' => ['strict-array{x:float, y:float}'],
     'Imagick::getImageBorderColor' => ['ImagickPixel'],
     'Imagick::getImageChannelDepth' => ['int', 'channel'=>'int'],
     'Imagick::getImageChannelDistortion' => ['float', 'reference'=>'Imagick', 'channel'=>'int', 'metric'=>'int'],
     'Imagick::getImageChannelDistortions' => ['float', 'reference'=>'Imagick', 'metric'=>'int', 'channel='=>'int'],
-    'Imagick::getImageChannelExtrema' => ['array{minima:int, maxima:int}', 'channel'=>'int'],
-    'Imagick::getImageChannelKurtosis' => ['array{kurtosis:float, skewness:float}', 'channel='=>'int'],
-    'Imagick::getImageChannelMean' => ['array{mean:float, standardDeviation:float}', 'channel'=>'int'],
-    'Imagick::getImageChannelRange' => ['array{minima:float, maxima:float}', 'channel'=>'int'],
-    'Imagick::getImageChannelStatistics' => ['array<int, array{mean:float, minima:float, maxima:float, standardDeviation:float, depth:int}>'],
+    'Imagick::getImageChannelExtrema' => ['strict-array{minima:int, maxima:int}', 'channel'=>'int'],
+    'Imagick::getImageChannelKurtosis' => ['strict-array{kurtosis:float, skewness:float}', 'channel='=>'int'],
+    'Imagick::getImageChannelMean' => ['strict-array{mean:float, standardDeviation:float}', 'channel'=>'int'],
+    'Imagick::getImageChannelRange' => ['strict-array{minima:float, maxima:float}', 'channel'=>'int'],
+    'Imagick::getImageChannelStatistics' => ['array<int, strict-array{mean:float, minima:float, maxima:float, standardDeviation:float, depth:int}>'],
     'Imagick::getImageClipMask' => ['Imagick'],
     'Imagick::getImageColormapColor' => ['ImagickPixel', 'index'=>'int'],
     'Imagick::getImageColors' => ['int'],
@@ -2744,13 +2744,13 @@ return [
     'Imagick::getImageDepth' => ['int'],
     'Imagick::getImageDispose' => ['int'],
     'Imagick::getImageDistortion' => ['float', 'reference'=>'magickwand', 'metric'=>'int'],
-    'Imagick::getImageExtrema' => ['array{min:int, max:int}'],
+    'Imagick::getImageExtrema' => ['strict-array{min:int, max:int}'],
     'Imagick::getImageFilename' => ['string'],
     'Imagick::getImageFormat' => ['string'],
     'Imagick::getImageGamma' => ['float'],
-    'Imagick::getImageGeometry' => ['array{width:int, height:int}'],
+    'Imagick::getImageGeometry' => ['strict-array{width:int, height:int}'],
     'Imagick::getImageGravity' => ['int'],
-    'Imagick::getImageGreenPrimary' => ['array{x:float, y:float}'],
+    'Imagick::getImageGreenPrimary' => ['strict-array{x:float, y:float}'],
     'Imagick::getImageHeight' => ['int'],
     'Imagick::getImageHistogram' => ['list<ImagickPixel>'],
     'Imagick::getImageIndex' => ['int'],
@@ -2763,16 +2763,16 @@ return [
     'Imagick::getImageMatteColor' => ['ImagickPixel'],
     'Imagick::getImageMimeType' => ['string'],
     'Imagick::getImageOrientation' => ['int'],
-    'Imagick::getImagePage' => ['array{width:int, height:int, x:int, y:int}'],
+    'Imagick::getImagePage' => ['strict-array{width:int, height:int, x:int, y:int}'],
     'Imagick::getImagePixelColor' => ['ImagickPixel', 'x'=>'int', 'y'=>'int'],
     'Imagick::getImageProfile' => ['string', 'name'=>'string'],
     'Imagick::getImageProfiles' => ['array', 'pattern='=>'string', 'only_names='=>'bool'],
     'Imagick::getImageProperties' => ['array<int|string, string>', 'pattern='=>'string', 'only_names='=>'bool'],
     'Imagick::getImageProperty' => ['string|false', 'name'=>'string'],
-    'Imagick::getImageRedPrimary' => ['array{x:float, y:float}'],
+    'Imagick::getImageRedPrimary' => ['strict-array{x:float, y:float}'],
     'Imagick::getImageRegion' => ['Imagick', 'width'=>'int', 'height'=>'int', 'x'=>'int', 'y'=>'int'],
     'Imagick::getImageRenderingIntent' => ['int'],
-    'Imagick::getImageResolution' => ['array{x:float, y:float}'],
+    'Imagick::getImageResolution' => ['strict-array{x:float, y:float}'],
     'Imagick::getImageScene' => ['int'],
     'Imagick::getImageSignature' => ['string'],
     'Imagick::getImageSize' => ['int'],
@@ -2781,7 +2781,7 @@ return [
     'Imagick::getImageType' => ['int'],
     'Imagick::getImageUnits' => ['int'],
     'Imagick::getImageVirtualPixelMethod' => ['int'],
-    'Imagick::getImageWhitePoint' => ['array{x:float, y:float}'],
+    'Imagick::getImageWhitePoint' => ['strict-array{x:float, y:float}'],
     'Imagick::getImageWidth' => ['int'],
     'Imagick::getImagesBlob' => ['string'],
     'Imagick::getInterlaceScheme' => ['int'],
@@ -2789,21 +2789,21 @@ return [
     'Imagick::getNumberImages' => ['int'],
     'Imagick::getOption' => ['string', 'key'=>'string'],
     'Imagick::getPackageName' => ['string'],
-    'Imagick::getPage' => ['array{width:int, height:int, x:int, y:int}'],
+    'Imagick::getPage' => ['strict-array{width:int, height:int, x:int, y:int}'],
     'Imagick::getPixelIterator' => ['ImagickPixelIterator'],
     'Imagick::getPixelRegionIterator' => ['ImagickPixelIterator', 'x'=>'int', 'y'=>'int', 'columns'=>'int', 'rows'=>'int'],
     'Imagick::getPointSize' => ['float'],
     'Imagick::getQuantum' => ['int'],
-    'Imagick::getQuantumDepth' => ['array{quantumDepthLong:int, quantumDepthString:string}'],
-    'Imagick::getQuantumRange' => ['array{quantumRangeLong:int, quantumRangeString:string}'],
+    'Imagick::getQuantumDepth' => ['strict-array{quantumDepthLong:int, quantumDepthString:string}'],
+    'Imagick::getQuantumRange' => ['strict-array{quantumRangeLong:int, quantumRangeString:string}'],
     'Imagick::getRegistry' => ['string|false', 'key'=>'string'],
     'Imagick::getReleaseDate' => ['string'],
     'Imagick::getResource' => ['int', 'type'=>'int'],
     'Imagick::getResourceLimit' => ['int', 'type'=>'int'],
     'Imagick::getSamplingFactors' => ['array'],
-    'Imagick::getSize' => ['array{columns:int, rows: int}'],
+    'Imagick::getSize' => ['strict-array{columns:int, rows: int}'],
     'Imagick::getSizeOffset' => ['int'],
-    'Imagick::getVersion' => ['array{versionNumber: int, versionString:string}'],
+    'Imagick::getVersion' => ['strict-array{versionNumber: int, versionString:string}'],
     'Imagick::haldClutImage' => ['bool', 'clut'=>'Imagick', 'channel='=>'int'],
     'Imagick::hasNextImage' => ['bool'],
     'Imagick::hasPreviousImage' => ['bool'],
@@ -3144,13 +3144,13 @@ return [
     'ImagickPixel::clear' => ['bool'],
     'ImagickPixel::clone' => ['void'],
     'ImagickPixel::destroy' => ['bool'],
-    'ImagickPixel::getColor' => ['array{r: int|float, g: int|float, b: int|float, a: int|float}', 'normalized='=>'0|1|2'],
+    'ImagickPixel::getColor' => ['strict-array{r: int|float, g: int|float, b: int|float, a: int|float}', 'normalized='=>'0|1|2'],
     'ImagickPixel::getColorAsString' => ['string'],
     'ImagickPixel::getColorCount' => ['int'],
     'ImagickPixel::getColorQuantum' => ['mixed'],
     'ImagickPixel::getColorValue' => ['float', 'color'=>'int'],
     'ImagickPixel::getColorValueQuantum' => ['mixed'],
-    'ImagickPixel::getHSL' => ['array{hue: float, saturation: float, luminosity: float}'],
+    'ImagickPixel::getHSL' => ['strict-array{hue: float, saturation: float, luminosity: float}'],
     'ImagickPixel::getIndex' => ['int'],
     'ImagickPixel::isPixelSimilar' => ['bool', 'color'=>'ImagickPixel', 'fuzz'=>'float'],
     'ImagickPixel::isPixelSimilarQuantum' => ['bool', 'color'=>'string', 'fuzz='=>'string'],
@@ -3371,7 +3371,7 @@ return [
     'IntlException::getLine' => ['int'],
     'IntlException::getMessage' => ['string'],
     'IntlException::getPrevious' => ['?Throwable'],
-    'IntlException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'IntlException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'IntlException::getTraceAsString' => ['string'],
     'IntlGregorianCalendar::__construct' => ['void'],
     'IntlGregorianCalendar::add' => ['bool', 'field'=>'int', 'amount'=>'int'],
@@ -3487,7 +3487,7 @@ return [
     'InvalidArgumentException::getLine' => ['int'],
     'InvalidArgumentException::getMessage' => ['string'],
     'InvalidArgumentException::getPrevious' => ['Throwable|InvalidArgumentException|null'],
-    'InvalidArgumentException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'InvalidArgumentException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'InvalidArgumentException::getTraceAsString' => ['string'],
     'Iterator::current' => ['mixed'],
     'Iterator::key' => ['mixed'],
@@ -3583,7 +3583,7 @@ return [
     'LengthException::getLine' => ['int'],
     'LengthException::getMessage' => ['string'],
     'LengthException::getPrevious' => ['Throwable|LengthException|null'],
-    'LengthException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'LengthException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'LengthException::getTraceAsString' => ['string'],
     'LevelDB::__construct' => ['void', 'name'=>'string', 'options='=>'array', 'read_options='=>'array', 'write_options='=>'array'],
     'LevelDB::close' => [''],
@@ -3652,7 +3652,7 @@ return [
     'LogicException::getLine' => ['int'],
     'LogicException::getMessage' => ['string'],
     'LogicException::getPrevious' => ['Throwable|LogicException|null'],
-    'LogicException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'LogicException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'LogicException::getTraceAsString' => ['string'],
     'Lua::__call' => ['mixed', 'lua_func'=>'callable', 'args='=>'array', 'use_self='=>'int'],
     'Lua::__construct' => ['void', 'lua_script_file'=>'string'],
@@ -3919,7 +3919,7 @@ return [
     'MongoCursorException::getLine' => ['int'],
     'MongoCursorException::getMessage' => ['string'],
     'MongoCursorException::getPrevious' => ['Exception|Throwable'],
-    'MongoCursorException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'MongoCursorException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'MongoCursorException::getTraceAsString' => ['string'],
     'MongoCursorInterface::__construct' => ['void'],
     'MongoCursorInterface::batchSize' => ['MongoCursorInterface', 'batchSize'=>'int'],
@@ -4287,7 +4287,7 @@ return [
     'MongoException::getLine' => ['int'],
     'MongoException::getMessage' => ['string'],
     'MongoException::getPrevious' => ['Exception|Throwable'],
-    'MongoException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'MongoException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'MongoException::getTraceAsString' => ['string'],
     'MongoGridFS::__construct' => ['void', 'db'=>'MongoDB', 'prefix='=>'string', 'chunks='=>'mixed'],
     'MongoGridFS::__get' => ['MongoCollection', 'name'=>'string'],
@@ -4398,7 +4398,7 @@ return [
     'MongoResultException::getLine' => ['int'],
     'MongoResultException::getMessage' => ['string'],
     'MongoResultException::getPrevious' => ['Exception|Throwable'],
-    'MongoResultException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'MongoResultException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'MongoResultException::getTraceAsString' => ['string'],
     'MongoTimestamp::__construct' => ['void', 'second='=>'int', 'inc='=>'int'],
     'MongoTimestamp::__toString' => ['string'],
@@ -4418,7 +4418,7 @@ return [
     'MongoWriteConcernException::getLine' => ['int'],
     'MongoWriteConcernException::getMessage' => ['string'],
     'MongoWriteConcernException::getPrevious' => ['Exception|Throwable'],
-    'MongoWriteConcernException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'MongoWriteConcernException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'MongoWriteConcernException::getTraceAsString' => ['string'],
     'MultipleIterator::__construct' => ['void', 'flags='=>'int'],
     'MultipleIterator::attachIterator' => ['void', 'iterator'=>'Iterator', 'infos='=>'string'],
@@ -4599,7 +4599,7 @@ return [
     'OutOfBoundsException::getLine' => ['int'],
     'OutOfBoundsException::getMessage' => ['string'],
     'OutOfBoundsException::getPrevious' => ['Throwable|OutOfBoundsException|null'],
-    'OutOfBoundsException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'OutOfBoundsException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'OutOfBoundsException::getTraceAsString' => ['string'],
     'OutOfRangeException::__clone' => ['void'],
     'OutOfRangeException::__construct' => ['void', 'message='=>'string', 'code='=>'int', 'previous='=>'?Throwable|?OutOfRangeException'],
@@ -4609,7 +4609,7 @@ return [
     'OutOfRangeException::getLine' => ['int'],
     'OutOfRangeException::getMessage' => ['string'],
     'OutOfRangeException::getPrevious' => ['Throwable|OutOfRangeException|null'],
-    'OutOfRangeException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'OutOfRangeException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'OutOfRangeException::getTraceAsString' => ['string'],
     'OuterIterator::current' => ['mixed'],
     'OuterIterator::getInnerIterator' => ['Iterator'],
@@ -4625,7 +4625,7 @@ return [
     'OverflowException::getLine' => ['int'],
     'OverflowException::getMessage' => ['string'],
     'OverflowException::getPrevious' => ['Throwable|OverflowException|null'],
-    'OverflowException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'OverflowException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'OverflowException::getTraceAsString' => ['string'],
     'OwsrequestObj::__construct' => ['void'],
     'OwsrequestObj::addParameter' => ['int', 'name'=>'string', 'value'=>'string'],
@@ -4948,7 +4948,7 @@ return [
     'PDO::commit' => ['bool'],
     'PDO::cubrid_schema' => ['array', 'schema_type'=>'int', 'table_name='=>'string', 'col_name='=>'string'],
     'PDO::errorCode' => ['?string'],
-    'PDO::errorInfo' => ['array{0: ?string, 1: ?int, 2: ?string, 3?: mixed, 4?: mixed}'],
+    'PDO::errorInfo' => ['strict-array{0: ?string, 1: ?int, 2: ?string, 3?: mixed, 4?: mixed}'],
     'PDO::exec' => ['int|false', 'query'=>'string'],
     'PDO::getAttribute' => ['', 'attribute'=>'int'],
     'PDO::getAvailableDrivers' => ['array'],
@@ -4958,7 +4958,7 @@ return [
     'PDO::pgsqlCopyFromFile' => ['bool', 'table_name'=>'string', 'filename'=>'string', 'delimiter'=>'string', 'null_as'=>'string', 'fields'=>'string'],
     'PDO::pgsqlCopyToArray' => ['array', 'table_name'=>'string', 'delimiter'=>'string', 'null_as'=>'string', 'fields'=>'string'],
     'PDO::pgsqlCopyToFile' => ['bool', 'table_name'=>'string', 'filename'=>'string', 'delimiter'=>'string', 'null_as'=>'string', 'fields'=>'string'],
-    'PDO::pgsqlGetNotify' => ['array{message:string,pid:int,payload?:string}|false', 'result_type='=>'PDO::FETCH_*', 'ms_timeout='=>'int'],
+    'PDO::pgsqlGetNotify' => ['strict-array{message:string,pid:int,payload?:string}|false', 'result_type='=>'PDO::FETCH_*', 'ms_timeout='=>'int'],
     'PDO::pgsqlGetPid' => ['int'],
     'PDO::pgsqlLOBCreate' => ['string'],
     'PDO::pgsqlLOBOpen' => ['resource', 'oid'=>'string', 'mode='=>'string'],
@@ -4979,7 +4979,7 @@ return [
     'PDOException::getLine' => ['int'],
     'PDOException::getMessage' => ['string'],
     'PDOException::getPrevious' => ['?Throwable'],
-    'PDOException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'PDOException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'PDOException::getTraceAsString' => ['string'],
     'PDOStatement::__sleep' => ['list<string>'],
     'PDOStatement::__wakeup' => ['void'],
@@ -4990,7 +4990,7 @@ return [
     'PDOStatement::columnCount' => ['int'],
     'PDOStatement::debugDumpParams' => ['void'],
     'PDOStatement::errorCode' => ['string'],
-    'PDOStatement::errorInfo' => ['array{0: ?string, 1: ?int, 2: ?string, 3?: mixed, 4?: mixed}'],
+    'PDOStatement::errorInfo' => ['strict-array{0: ?string, 1: ?int, 2: ?string, 3?: mixed, 4?: mixed}'],
     'PDOStatement::execute' => ['bool', 'bound_input_params='=>'?array'],
     'PDOStatement::fetch' => ['mixed', 'how='=>'int', 'orientation='=>'int', 'offset='=>'int'],
     'PDOStatement::fetchAll' => ['array|false', 'how='=>'int', 'fetch_argument='=>'int|string|callable', 'ctor_args='=>'?array'],
@@ -5072,7 +5072,7 @@ return [
     'ParseError::getLine' => ['int'],
     'ParseError::getMessage' => ['string'],
     'ParseError::getPrevious' => ['Throwable|ParseError|null'],
-    'ParseError::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'ParseError::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'ParseError::getTraceAsString' => ['string'],
     'Phar::__construct' => ['void', 'fname'=>'string', 'flags='=>'int', 'alias='=>'string'],
     'Phar::addEmptyDir' => ['void', 'dirname'=>'string'],
@@ -5101,7 +5101,7 @@ return [
     'Phar::getMetadata' => ['mixed'],
     'Phar::getModified' => ['bool'],
     'Phar::getPath' => ['string'],
-    'Phar::getSignature' => ['array{hash:string, hash_type:string}'],
+    'Phar::getSignature' => ['strict-array{hash:string, hash_type:string}'],
     'Phar::getStub' => ['string'],
     'Phar::getSupportedCompression' => ['array'],
     'Phar::getSupportedSignatures' => ['array'],
@@ -5246,7 +5246,7 @@ return [
     'RangeException::getLine' => ['int'],
     'RangeException::getMessage' => ['string'],
     'RangeException::getPrevious' => ['Throwable|RangeException|null'],
-    'RangeException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'RangeException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'RangeException::getTraceAsString' => ['string'],
     'RarArchive::__toString' => ['string'],
     'RarArchive::close' => ['bool'],
@@ -5276,7 +5276,7 @@ return [
     'RarException::getLine' => ['int'],
     'RarException::getMessage' => ['string'],
     'RarException::getPrevious' => ['Exception|Throwable'],
-    'RarException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'RarException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'RarException::getTraceAsString' => ['string'],
     'RarException::isUsingExceptions' => ['bool'],
     'RarException::setUsingExceptions' => ['RarEntry', 'using_exceptions'=>'bool'],
@@ -5590,7 +5590,7 @@ return [
     'Redis::geoAdd' => ['int', 'key'=>'string', 'longitude'=>'float', 'latitude'=>'float', 'member'=>'string', '...other_triples='=>'string|int|float'],
     'Redis::geoDist' => ['float', 'key'=>'string', 'member1'=>'string', 'member2'=>'string', 'unit='=>'string'],
     'Redis::geoHash' => ['array<int,string>', 'key'=>'string', 'member'=>'string', '...other_members='=>'string'],
-    'Redis::geoPos' => ['array<int,array{0:string,1:string}>', 'key'=>'string', 'member'=>'string', '...members='=>'string'],
+    'Redis::geoPos' => ['array<int,strict-array{0:string,1:string}>', 'key'=>'string', 'member'=>'string', '...members='=>'string'],
     'Redis::geoRadius' => ['array<int,mixed>|int', 'key'=>'string', 'longitude'=>'float', 'latitude'=>'float', 'radius'=>'float', 'unit'=>'float', 'options='=>'array<string,mixed>'],
     'Redis::geoRadiusByMember' => ['array<int,mixed>|int', 'key'=>'string', 'member'=>'string', 'radius'=>'float', 'units'=>'string', 'options='=>'array<string,mixed>'],
     'Redis::get' => ['string|false', 'key'=>'string'],
@@ -5855,7 +5855,7 @@ return [
     'RedisCluster::geoRadius' => ['', 'key'=>'string', 'longitude'=>'float', 'latitude'=>'float', 'radius'=>'float', 'radiusUnit'=>'string', 'options='=>'array'],
     'RedisCluster::geoRadiusByMember' => ['string[]', 'key'=>'string', 'member'=>'string', 'radius'=>'float', 'radiusUnit'=>'string', 'options='=>'array'],
     'RedisCluster::geohash' => ['array<int,string>', 'key'=>'string', 'member'=>'string', '...other_members='=>'string'],
-    'RedisCluster::geopos' => ['array<int,array{0:string,1:string}>', 'key'=>'string', 'member'=>'string', '...other_members='=>'string'],
+    'RedisCluster::geopos' => ['array<int,strict-array{0:string,1:string}>', 'key'=>'string', 'member'=>'string', '...other_members='=>'string'],
     'RedisCluster::get' => ['string|false', 'key'=>'string'],
     'RedisCluster::getBit' => ['int', 'key'=>'string', 'offset'=>'int'],
     'RedisCluster::getLastError' => ['?string'],
@@ -6333,7 +6333,7 @@ return [
     'RuntimeException::getLine' => ['int'],
     'RuntimeException::getMessage' => ['string'],
     'RuntimeException::getPrevious' => ['Throwable|RuntimeException|null'],
-    'RuntimeException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'RuntimeException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'RuntimeException::getTraceAsString' => ['string'],
     'SAMConnection::commit' => ['bool'],
     'SAMConnection::connect' => ['bool', 'protocol'=>'string', 'properties='=>'array'],
@@ -6493,7 +6493,7 @@ return [
     'SQLiteException::getLine' => ['int'],
     'SQLiteException::getMessage' => ['string'],
     'SQLiteException::getPrevious' => ['RuntimeException|Throwable|null'],
-    'SQLiteException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'SQLiteException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'SQLiteException::getTraceAsString' => ['string'],
     'SQLiteResult::__construct' => ['void'],
     'SQLiteResult::column' => ['mixed', 'index_or_name'=>'', 'decode_binary='=>'bool'],
@@ -6927,7 +6927,7 @@ return [
     'SoapFault::getLine' => ['int'],
     'SoapFault::getMessage' => ['string'],
     'SoapFault::getPrevious' => ['?Exception|?Throwable'],
-    'SoapFault::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'SoapFault::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'SoapFault::getTraceAsString' => ['string'],
     'SoapHeader::SoapHeader' => ['object', 'namespace'=>'string', 'name'=>'string', 'data='=>'mixed', 'mustunderstand='=>'bool', 'actor='=>'string'],
     'SoapHeader::__construct' => ['void', 'namespace'=>'string', 'name'=>'string', 'data='=>'mixed', 'mustunderstand='=>'bool', 'actor='=>'string'],
@@ -7037,7 +7037,7 @@ return [
     'SolrClientException::getLine' => ['int'],
     'SolrClientException::getMessage' => ['string'],
     'SolrClientException::getPrevious' => ['?Exception|?Throwable'],
-    'SolrClientException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'SolrClientException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'SolrClientException::getTraceAsString' => ['string'],
     'SolrCollapseFunction::__construct' => ['void', 'field'=>'string'],
     'SolrCollapseFunction::__toString' => ['string'],
@@ -7329,7 +7329,7 @@ return [
     'SolrException::getLine' => ['int'],
     'SolrException::getMessage' => ['string'],
     'SolrException::getPrevious' => ['Exception|Throwable'],
-    'SolrException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'SolrException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'SolrException::getTraceAsString' => ['string'],
     'SolrGenericResponse::__construct' => ['void'],
     'SolrGenericResponse::__destruct' => ['void'],
@@ -7354,7 +7354,7 @@ return [
     'SolrIllegalArgumentException::getLine' => ['int'],
     'SolrIllegalArgumentException::getMessage' => ['string'],
     'SolrIllegalArgumentException::getPrevious' => ['Exception|Throwable'],
-    'SolrIllegalArgumentException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'SolrIllegalArgumentException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'SolrIllegalArgumentException::getTraceAsString' => ['string'],
     'SolrIllegalOperationException::__clone' => ['void'],
     'SolrIllegalOperationException::__construct' => ['void', 'message='=>'string', 'code='=>'int', 'previous='=>'?Exception|?Throwable'],
@@ -7366,7 +7366,7 @@ return [
     'SolrIllegalOperationException::getLine' => ['int'],
     'SolrIllegalOperationException::getMessage' => ['string'],
     'SolrIllegalOperationException::getPrevious' => ['Exception|Throwable'],
-    'SolrIllegalOperationException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'SolrIllegalOperationException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'SolrIllegalOperationException::getTraceAsString' => ['string'],
     'SolrInputDocument::__clone' => ['void'],
     'SolrInputDocument::__construct' => ['void'],
@@ -7674,7 +7674,7 @@ return [
     'SolrServerException::getLine' => ['int'],
     'SolrServerException::getMessage' => ['string'],
     'SolrServerException::getPrevious' => ['Exception|Throwable'],
-    'SolrServerException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'SolrServerException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'SolrServerException::getTraceAsString' => ['string'],
     'SolrUpdateResponse::__construct' => ['void'],
     'SolrUpdateResponse::__destruct' => ['void'],
@@ -7790,7 +7790,7 @@ return [
     'SplFileObject::eof' => ['bool'],
     'SplFileObject::fflush' => ['bool'],
     'SplFileObject::fgetc' => ['string|false'],
-    'SplFileObject::fgetcsv' => ['list<string>|array{0: null}|false|null', 'seperator='=>'string', 'enclosure='=>'string', 'escape='=>'string'],
+    'SplFileObject::fgetcsv' => ['list<string>|strict-array{0: null}|false|null', 'seperator='=>'string', 'enclosure='=>'string', 'escape='=>'string'],
     'SplFileObject::fgets' => ['string|false'],
     'SplFileObject::fgetss' => ['string|false', 'allowable_tags='=>'string'],
     'SplFileObject::flock' => ['bool', 'operation'=>'int', '&w_wouldblock='=>'int'],
@@ -7799,7 +7799,7 @@ return [
     'SplFileObject::fread' => ['string|false', 'length'=>'int'],
     'SplFileObject::fscanf' => ['array|int', 'format'=>'string', '&...w_vars='=>'string|int|float'],
     'SplFileObject::fseek' => ['int', 'pos'=>'int', 'whence='=>'int'],
-    'SplFileObject::fstat' => ['array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}'],
+    'SplFileObject::fstat' => ['strict-array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}'],
     'SplFileObject::ftell' => ['int|false'],
     'SplFileObject::ftruncate' => ['bool', 'size'=>'int'],
     'SplFileObject::fwrite' => ['int', 'string'=>'string', 'length='=>'int'],
@@ -7982,7 +7982,7 @@ return [
     'SplTempFileObject::eof' => ['bool'],
     'SplTempFileObject::fflush' => ['bool'],
     'SplTempFileObject::fgetc' => ['false|string'],
-    'SplTempFileObject::fgetcsv' => ['list<string>|array{0: null}|false|null', 'seperator='=>'string', 'enclosure='=>'string', 'escape='=>'string'],
+    'SplTempFileObject::fgetcsv' => ['list<string>|strict-array{0: null}|false|null', 'seperator='=>'string', 'enclosure='=>'string', 'escape='=>'string'],
     'SplTempFileObject::fgets' => ['string'],
     'SplTempFileObject::fgetss' => ['string', 'allowable_tags='=>'string'],
     'SplTempFileObject::flock' => ['bool', 'operation'=>'int', '&wouldblock='=>'int'],
@@ -7991,7 +7991,7 @@ return [
     'SplTempFileObject::fread' => ['false|string', 'length'=>'int'],
     'SplTempFileObject::fscanf' => ['bool', 'format'=>'string', '&...w_vars='=>'array<int,float>|array<int,int>|array<int,string>'],
     'SplTempFileObject::fseek' => ['int', 'pos'=>'int', 'whence='=>'int'],
-    'SplTempFileObject::fstat' => ['array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}'],
+    'SplTempFileObject::fstat' => ['strict-array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}'],
     'SplTempFileObject::ftell' => ['int'],
     'SplTempFileObject::ftruncate' => ['bool', 'size'=>'int'],
     'SplTempFileObject::fwrite' => ['int', 'string'=>'string', 'length='=>'int'],
@@ -8169,7 +8169,7 @@ return [
     'Throwable::getLine' => ['int'],
     'Throwable::getMessage' => ['string'],
     'Throwable::getPrevious' => ['?Throwable'],
-    'Throwable::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'Throwable::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'Throwable::getTraceAsString' => ['string'],
     'TokyoTyrant::__construct' => ['void', 'host='=>'string', 'port='=>'int', 'options='=>'array'],
     'TokyoTyrant::add' => ['int|float', 'key'=>'string', 'increment'=>'float', 'type='=>'int'],
@@ -8241,7 +8241,7 @@ return [
     'TypeError::getLine' => ['int'],
     'TypeError::getMessage' => ['string'],
     'TypeError::getPrevious' => ['Throwable|TypeError|null'],
-    'TypeError::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'TypeError::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'TypeError::getTraceAsString' => ['string'],
     'UConverter::__construct' => ['void', 'destination_encoding='=>'string', 'source_encoding='=>'string'],
     'UConverter::convert' => ['string', 'string'=>'string', 'reverse='=>'bool'],
@@ -8270,7 +8270,7 @@ return [
     'UnderflowException::getLine' => ['int'],
     'UnderflowException::getMessage' => ['string'],
     'UnderflowException::getPrevious' => ['Throwable|UnderflowException|null'],
-    'UnderflowException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'UnderflowException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'UnderflowException::getTraceAsString' => ['string'],
     'UnexpectedValueException::__clone' => ['void'],
     'UnexpectedValueException::__construct' => ['void', 'message='=>'string', 'code='=>'int', 'previous='=>'?Throwable|?UnexpectedValueException'],
@@ -8280,7 +8280,7 @@ return [
     'UnexpectedValueException::getLine' => ['int'],
     'UnexpectedValueException::getMessage' => ['string'],
     'UnexpectedValueException::getPrevious' => ['Throwable|UnexpectedValueException|null'],
-    'UnexpectedValueException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'UnexpectedValueException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'UnexpectedValueException::getTraceAsString' => ['string'],
     'V8Js::__construct' => ['void', 'object_name='=>'string', 'variables='=>'array', 'extensions='=>'array', 'report_uncaught_exceptions='=>'bool', 'snapshot_blob='=>'string'],
     'V8Js::clearPendingException' => [''],
@@ -8315,7 +8315,7 @@ return [
     'V8JsScriptException::getLine' => ['int'],
     'V8JsScriptException::getMessage' => ['string'],
     'V8JsScriptException::getPrevious' => ['Exception|Throwable'],
-    'V8JsScriptException::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'V8JsScriptException::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'V8JsScriptException::getTraceAsString' => ['string'],
     'VARIANT::__construct' => ['void', 'value='=>'mixed', 'type='=>'int', 'codepage='=>'int'],
     'VarnishAdmin::__construct' => ['void', 'args='=>'array'],
@@ -9333,7 +9333,7 @@ return [
     'Yar_Client_Exception::getLine' => ['int'],
     'Yar_Client_Exception::getMessage' => ['string'],
     'Yar_Client_Exception::getPrevious' => ['?Exception|?Throwable'],
-    'Yar_Client_Exception::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'Yar_Client_Exception::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'Yar_Client_Exception::getTraceAsString' => ['string'],
     'Yar_Client_Exception::getType' => ['string'],
     'Yar_Concurrent_Client::call' => ['int', 'uri'=>'string', 'method'=>'string', 'parameters'=>'array', 'callback='=>'callable'],
@@ -9350,7 +9350,7 @@ return [
     'Yar_Server_Exception::getLine' => ['int'],
     'Yar_Server_Exception::getMessage' => ['string'],
     'Yar_Server_Exception::getPrevious' => ['?Exception|?Throwable'],
-    'Yar_Server_Exception::getTrace' => ['list<array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
+    'Yar_Server_Exception::getTrace' => ['list<strict-array{file?:string,line?:int,function:string,class?:class-string,type?:\'::\'|\'->\',args?:array<mixed>}>'],
     'Yar_Server_Exception::getTraceAsString' => ['string'],
     'Yar_Server_Exception::getType' => ['string'],
     'ZMQ::__construct' => ['void'],
@@ -9936,7 +9936,7 @@ return [
     'cairo_version' => ['int'],
     'cairo_version_string' => ['string'],
     'cal_days_in_month' => ['int', 'calendar'=>'int', 'month'=>'int', 'year'=>'int'],
-    'cal_from_jd' => ['false|array{date:string,month:int,day:int,year:int,dow:int,abbrevdayname:string,dayname:string,abbrevmonth:string,monthname:string}', 'julian_day'=>'int', 'calendar'=>'int'],
+    'cal_from_jd' => ['false|strict-array{date:string,month:int,day:int,year:int,dow:int,abbrevdayname:string,dayname:string,abbrevmonth:string,monthname:string}', 'julian_day'=>'int', 'calendar'=>'int'],
     'cal_info' => ['array', 'calendar='=>'int'],
     'cal_to_jd' => ['int', 'calendar'=>'int', 'month'=>'int', 'day'=>'int', 'year'=>'int'],
     'calcul_hmac' => ['string', 'clent'=>'string', 'siretcode'=>'string', 'price'=>'string', 'reference'=>'string', 'validity'=>'string', 'taxation'=>'string', 'devise'=>'string', 'language'=>'string'],
@@ -10254,7 +10254,7 @@ return [
     'date_default_timezone_set' => ['bool', 'timezoneId'=>'string'],
     'date_diff' => ['DateInterval|false', 'baseObject'=>'DateTimeInterface', 'targetObject'=>'DateTimeInterface', 'absolute='=>'bool'],
     'date_format' => ['string|false', 'object'=>'DateTimeInterface', 'format'=>'string'],
-    'date_get_last_errors' => ['array{warning_count:int,warnings:array<int,string>,error_count:int,errors:array<int,string>}|false'],
+    'date_get_last_errors' => ['strict-array{warning_count:int,warnings:array<int,string>,error_count:int,errors:array<int,string>}|false'],
     'date_interval_create_from_date_string' => ['DateInterval', 'datetime'=>'string'],
     'date_interval_format' => ['string', 'object'=>'DateInterval', 'format'=>'string'],
     'date_isodate_set' => ['DateTime|false', 'object'=>'DateTime', 'year'=>'int', 'week'=>'int', 'dayOfWeek='=>'int|mixed'],
@@ -10433,7 +10433,7 @@ return [
     'dcgettext' => ['string', 'domain'=>'string', 'message'=>'string', 'category'=>'int'],
     'dcngettext' => ['string', 'domain'=>'string', 'singular'=>'string', 'plural'=>'string', 'count'=>'int', 'category'=>'int'],
     'deaggregate' => ['', 'object'=>'object', 'class_name='=>'string'],
-    'debug_backtrace' => ['list<array{file:string,line:int,function:string,class?:class-string,object?:object,type?:string,args?:list}>', 'options='=>'int', 'limit='=>'int'],
+    'debug_backtrace' => ['list<strict-array{file:string,line:int,function:string,class?:class-string,object?:object,type?:string,args?:list}>', 'options='=>'int', 'limit='=>'int'],
     'debug_print_backtrace' => ['void', 'options='=>'int', 'limit='=>'int'],
     'debug_zval_dump' => ['void', '...value'=>'mixed'],
     'debugger_connect' => [''],
@@ -10492,7 +10492,7 @@ return [
     'domxml_xslt_version' => ['int'],
     'dotnet_load' => ['int', 'assembly_name'=>'string', 'datatype_name='=>'string', 'codepage='=>'int'],
     'doubleval' => ['float', 'value'=>'mixed'],
-    'each' => ['array{0:int|string,key:int|string,1:mixed,value:mixed}', '&r_arr'=>'array'],
+    'each' => ['strict-array{0:int|string,key:int|string,1:mixed,value:mixed}', '&r_arr'=>'array'],
     'easter_date' => ['int', 'year='=>'int'],
     'easter_days' => ['int', 'year='=>'int', 'mode='=>'int'],
     'echo' => ['void', 'arg1'=>'string', '...args='=>'string'],
@@ -10563,7 +10563,7 @@ return [
     'enchant_broker_get_dict_path' => ['string', 'broker'=>'resource', 'type'=>'int'],
     'enchant_broker_get_error' => ['string|false', 'broker'=>'resource'],
     'enchant_broker_init' => ['resource|false'],
-    'enchant_broker_list_dicts' => ['array<int,array{lang_tag:string,provider_name:string,provider_desc:string,provider_file:string}>|false', 'broker'=>'resource'],
+    'enchant_broker_list_dicts' => ['array<int,strict-array{lang_tag:string,provider_name:string,provider_desc:string,provider_file:string}>|false', 'broker'=>'resource'],
     'enchant_broker_request_dict' => ['resource|false', 'broker'=>'resource', 'tag'=>'string'],
     'enchant_broker_request_pwl_dict' => ['resource|false', 'broker'=>'resource', 'filename'=>'string'],
     'enchant_broker_set_dict_path' => ['bool', 'broker'=>'resource', 'type'=>'int', 'path'=>'string'],
@@ -10579,7 +10579,7 @@ return [
     'enchant_dict_suggest' => ['array', 'dictionary'=>'resource', 'word'=>'string'],
     'end' => ['mixed|false', '&r_array'=>'array|object'],
     'error_clear_last' => ['void'],
-    'error_get_last' => ['?array{type:int,message:string,file:string,line:int}'],
+    'error_get_last' => ['?strict-array{type:int,message:string,file:string,line:int}'],
     'error_log' => ['bool', 'message'=>'string', 'message_type='=>'int', 'destination='=>'string', 'additional_headers='=>'string'],
     'error_reporting' => ['int', 'error_level='=>'int'],
     'escapeshellarg' => ['string', 'arg'=>'string'],
@@ -10918,7 +10918,7 @@ return [
     'ffmpeg_movie::hasAudio' => ['bool'],
     'ffmpeg_movie::hasVideo' => ['bool'],
     'fgetc' => ['string|false', 'stream'=>'resource'],
-    'fgetcsv' => ['list<string>|array{0: null}|false|null', 'stream'=>'resource', 'length='=>'int', 'separator='=>'string', 'enclosure='=>'string', 'escape='=>'string'],
+    'fgetcsv' => ['list<string>|strict-array{0: null}|false|null', 'stream'=>'resource', 'length='=>'int', 'separator='=>'string', 'enclosure='=>'string', 'escape='=>'string'],
     'fgets' => ['string|false', 'stream'=>'resource', 'length='=>'int'],
     'fgetss' => ['string|false', 'fp'=>'resource', 'length='=>'int', 'allowable_tags='=>'string'],
     'file' => ['list<string>|false', 'filename'=>'string', 'flags='=>'int', 'context='=>'resource'],
@@ -10978,7 +10978,7 @@ return [
     'fscanf\'1' => ['int', 'stream'=>'resource', 'format'=>'string', '&...w_vars='=>'string|int|float'],
     'fseek' => ['int', 'stream'=>'resource', 'offset'=>'int', 'whence='=>'int'],
     'fsockopen' => ['resource|false', 'hostname'=>'string', 'port='=>'int', '&w_error_code='=>'int', '&w_error_message='=>'string', 'timeout='=>'float'],
-    'fstat' => ['array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'stream'=>'resource'],
+    'fstat' => ['strict-array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'stream'=>'resource'],
     'ftell' => ['int|false', 'stream'=>'resource'],
     'ftok' => ['int', 'filename'=>'string', 'project_id'=>'string'],
     'ftp_alloc' => ['bool', 'ftp'=>'resource', 'size'=>'int', '&w_response='=>'string'],
@@ -11170,7 +11170,7 @@ return [
     'get_resources' => ['array<int,resource>', 'type='=>'string'],
     'getallheaders' => ['array|false'],
     'getcwd' => ['string|false'],
-    'getdate' => ['array{seconds: int<0, 59>, minutes: int<0, 59>, hours: int<0, 23>, mday: int<1, 31>, wday: int<0, 6>, mon: int<1, 12>, year: int, yday: int<0, 365>, weekday: "Monday"|"Tuesday"|"Wednesday"|"Thursday"|"Friday"|"Saturday"|"Sunday", month: "January"|"February"|"March"|"April"|"May"|"June"|"July"|"August"|"September"|"October"|"November"|"December", 0: int}', 'timestamp='=>'int'],
+    'getdate' => ['strict-array{seconds: int<0, 59>, minutes: int<0, 59>, hours: int<0, 23>, mday: int<1, 31>, wday: int<0, 6>, mon: int<1, 12>, year: int, yday: int<0, 365>, weekday: "Monday"|"Tuesday"|"Wednesday"|"Thursday"|"Friday"|"Saturday"|"Sunday", month: "January"|"February"|"March"|"April"|"May"|"June"|"July"|"August"|"September"|"October"|"November"|"December", 0: int}', 'timestamp='=>'int'],
     'getenv' => ['string|false', 'name'=>'string', 'local_only='=>'bool'],
     'gethostbyaddr' => ['string|false', 'ip'=>'string'],
     'gethostbyname' => ['string', 'hostname'=>'string'],
@@ -11206,7 +11206,7 @@ return [
     'gmp_com' => ['GMP', 'num'=>'GMP|string|int'],
     'gmp_div' => ['GMP', 'num1'=>'GMP|resource|string', 'num2'=>'GMP|resource|string', 'rounding_mode='=>'int'],
     'gmp_div_q' => ['GMP', 'num1'=>'GMP|string|int', 'num2'=>'GMP|string|int', 'rounding_mode='=>'int'],
-    'gmp_div_qr' => ['array{0: GMP, 1: GMP}', 'num1'=>'GMP|string|int', 'num2'=>'GMP|string|int', 'rounding_mode='=>'int'],
+    'gmp_div_qr' => ['strict-array{0: GMP, 1: GMP}', 'num1'=>'GMP|string|int', 'num2'=>'GMP|string|int', 'rounding_mode='=>'int'],
     'gmp_div_r' => ['GMP', 'num1'=>'GMP|string|int', 'num2'=>'GMP|string|int', 'rounding_mode='=>'int'],
     'gmp_divexact' => ['GMP', 'num1'=>'GMP|string|int', 'num2'=>'GMP|string|int'],
     'gmp_export' => ['string|false', 'num'=>'GMP|string|int', 'word_size='=>'int', 'flags='=>'int'],
@@ -11235,13 +11235,13 @@ return [
     'gmp_random_range' => ['GMP', 'min'=>'GMP|string|int', 'max'=>'GMP|string|int'],
     'gmp_random_seed' => ['void', 'seed'=>'GMP|string|int'],
     'gmp_root' => ['GMP', 'num'=>'GMP|string|int', 'nth'=>'int'],
-    'gmp_rootrem' => ['array{0: GMP, 1: GMP}', 'num'=>'GMP|string|int', 'nth'=>'int'],
+    'gmp_rootrem' => ['strict-array{0: GMP, 1: GMP}', 'num'=>'GMP|string|int', 'nth'=>'int'],
     'gmp_scan0' => ['int', 'num1'=>'GMP|string|int', 'start'=>'int'],
     'gmp_scan1' => ['int', 'num1'=>'GMP|string|int', 'start'=>'int'],
     'gmp_setbit' => ['void', 'num'=>'GMP|string|int', 'index'=>'int', 'value='=>'bool'],
     'gmp_sign' => ['int', 'num'=>'GMP|string|int'],
     'gmp_sqrt' => ['GMP', 'num'=>'GMP|string|int'],
-    'gmp_sqrtrem' => ['array{0: GMP, 1: GMP}', 'num'=>'GMP|string|int'],
+    'gmp_sqrtrem' => ['strict-array{0: GMP, 1: GMP}', 'num'=>'GMP|string|int'],
     'gmp_strval' => ['numeric-string', 'num'=>'GMP|string|int', 'base='=>'int'],
     'gmp_sub' => ['GMP', 'num1'=>'GMP|string|int', 'num2'=>'GMP|string|int'],
     'gmp_testbit' => ['bool', 'num'=>'GMP|string|int', 'index'=>'int'],
@@ -12119,8 +12119,8 @@ return [
     'image_type_to_extension' => ['string', 'image_type'=>'int', 'include_dot='=>'bool'],
     'image_type_to_mime_type' => ['string', 'image_type'=>'int'],
     'imageaffine' => ['resource|false', 'src'=>'resource', 'affine'=>'array', 'clip='=>'array'],
-    'imageaffinematrixconcat' => ['array{0:float,1:float,2:float,3:float,4:float,5:float}|false', 'matrix1'=>'array', 'matrix2'=>'array'],
-    'imageaffinematrixget' => ['array{0:float,1:float,2:float,3:float,4:float,5:float}|false', 'type'=>'int', 'options'=>'array|float'],
+    'imageaffinematrixconcat' => ['strict-array{0:float,1:float,2:float,3:float,4:float,5:float}|false', 'matrix1'=>'array', 'matrix2'=>'array'],
+    'imageaffinematrixget' => ['strict-array{0:float,1:float,2:float,3:float,4:float,5:float}|false', 'type'=>'int', 'options'=>'array|float'],
     'imagealphablending' => ['bool', 'image'=>'resource', 'enable'=>'bool'],
     'imageantialias' => ['bool', 'image'=>'resource', 'enable'=>'bool'],
     'imagearc' => ['bool', 'image'=>'resource', 'center_x'=>'int', 'center_y'=>'int', 'width'=>'int', 'height'=>'int', 'start_angle'=>'int', 'end_angle'=>'int', 'color'=>'int'],
@@ -12665,7 +12665,7 @@ return [
     'log10' => ['float', 'num'=>'float'],
     'log1p' => ['float', 'num'=>'float'],
     'long2ip' => ['string', 'ip'=>'string|int'],
-    'lstat' => ['array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'filename'=>'string'],
+    'lstat' => ['strict-array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'filename'=>'string'],
     'ltrim' => ['string', 'string'=>'string', 'characters='=>'string'],
     'lzf_compress' => ['string', 'data'=>'string'],
     'lzf_decompress' => ['string', 'data'=>'string'],
@@ -14464,17 +14464,17 @@ return [
     'posix_getegid' => ['int'],
     'posix_geteuid' => ['int'],
     'posix_getgid' => ['int'],
-    'posix_getgrgid' => ['array{name: string, passwd: string, gid: int, members: list<string>}|false', 'group_id'=>'int'],
-    'posix_getgrnam' => ['array{name: string, passwd: string, gid: int, members: list<string>}|false', 'name'=>'string'],
+    'posix_getgrgid' => ['strict-array{name: string, passwd: string, gid: int, members: list<string>}|false', 'group_id'=>'int'],
+    'posix_getgrnam' => ['strict-array{name: string, passwd: string, gid: int, members: list<string>}|false', 'name'=>'string'],
     'posix_getgroups' => ['list<int>|false'],
     'posix_getlogin' => ['string|false'],
     'posix_getpgid' => ['int|false', 'process_id'=>'int'],
     'posix_getpgrp' => ['int'],
     'posix_getpid' => ['int'],
     'posix_getppid' => ['int'],
-    'posix_getpwnam' => ['array{name: string, passwd: string, uid: int, gid: int, gecos: string, dir: string, shell: string}|false', 'username'=>'string'],
-    'posix_getpwuid' => ['array{name: string, passwd: string, uid: int, gid: int, gecos: string, dir: string, shell: string}|false', 'user_id'=>'int'],
-    'posix_getrlimit' => ['array{"soft core": string, "hard core": string, "soft data": string, "hard data": string, "soft stack": integer, "hard stack": string, "soft totalmem": string, "hard totalmem": string, "soft rss": string, "hard rss": string, "soft maxproc": integer, "hard maxproc": integer, "soft memlock": integer, "hard memlock": integer, "soft cpu": string, "hard cpu": string, "soft filesize": string, "hard filesize": string, "soft openfiles": integer, "hard openfiles": integer}|false'],
+    'posix_getpwnam' => ['strict-array{name: string, passwd: string, uid: int, gid: int, gecos: string, dir: string, shell: string}|false', 'username'=>'string'],
+    'posix_getpwuid' => ['strict-array{name: string, passwd: string, uid: int, gid: int, gecos: string, dir: string, shell: string}|false', 'user_id'=>'int'],
+    'posix_getrlimit' => ['strict-array{"soft core": string, "hard core": string, "soft data": string, "hard data": string, "soft stack": integer, "hard stack": string, "soft totalmem": string, "hard totalmem": string, "soft rss": string, "hard rss": string, "soft maxproc": integer, "hard maxproc": integer, "soft memlock": integer, "hard memlock": integer, "soft cpu": string, "hard cpu": string, "soft filesize": string, "hard filesize": string, "soft openfiles": integer, "hard openfiles": integer}|false'],
     'posix_getsid' => ['int|false', 'process_id'=>'int'],
     'posix_getuid' => ['int'],
     'posix_initgroups' => ['bool', 'username'=>'string', 'group_id'=>'int'],
@@ -14490,9 +14490,9 @@ return [
     'posix_setsid' => ['int'],
     'posix_setuid' => ['bool', 'user_id'=>'int'],
     'posix_strerror' => ['string', 'error_code'=>'int'],
-    'posix_times' => ['array{ticks: int, utime: int, stime: int, cutime: int, cstime: int}|false'],
+    'posix_times' => ['strict-array{ticks: int, utime: int, stime: int, cutime: int, cstime: int}|false'],
     'posix_ttyname' => ['string|false', 'file_descriptor'=>'resource|int'],
-    'posix_uname' => ['array{sysname: string, nodename: string, release: string, version: string, machine: string, domainname: string}|false'],
+    'posix_uname' => ['strict-array{sysname: string, nodename: string, release: string, version: string, machine: string, domainname: string}|false'],
     'pow' => ['float|int', 'num'=>'int|float', 'exponent'=>'int|float'],
     'preg_filter' => ['null|string|string[]', 'pattern'=>'mixed', 'replacement'=>'mixed', 'subject'=>'mixed', 'limit='=>'int', '&w_count='=>'int'],
     'preg_grep' => ['array|false', 'pattern'=>'string', 'array'=>'array', 'flags='=>'int'],
@@ -14513,7 +14513,7 @@ return [
     'print_r\'1' => ['true', 'value'=>'mixed', 'return='=>'bool'],
     'printf' => ['int', 'format'=>'string', '...values='=>'string|int|float'],
     'proc_close' => ['int', 'process'=>'resource'],
-    'proc_get_status' => ['array{command: string, pid: int, running: bool, signaled: bool, stopped: bool, exitcode: int, termsig: int, stopsig: int}|false', 'process'=>'resource'],
+    'proc_get_status' => ['strict-array{command: string, pid: int, running: bool, signaled: bool, stopped: bool, exitcode: int, termsig: int, stopsig: int}|false', 'process'=>'resource'],
     'proc_nice' => ['bool', 'priority'=>'int'],
     'proc_open' => ['resource|false', 'command'=>'string', 'descriptor_spec'=>'array', '&pipes'=>'resource[]', 'cwd='=>'?string', 'env_vars='=>'?array', 'options='=>'?array'],
     'proc_terminate' => ['bool', 'process'=>'resource', 'signal='=>'int'],
@@ -15119,18 +15119,18 @@ return [
     'ssh2_scp_send' => ['bool', 'session'=>'resource', 'local_file'=>'string', 'remote_file'=>'string', 'create_mode='=>'int'],
     'ssh2_sftp' => ['resource|false', 'session'=>'resource'],
     'ssh2_sftp_chmod' => ['bool', 'sftp'=>'resource', 'filename'=>'string', 'mode'=>'int'],
-    'ssh2_sftp_lstat' => ['array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'sftp'=>'resource', 'path'=>'string'],
+    'ssh2_sftp_lstat' => ['strict-array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'sftp'=>'resource', 'path'=>'string'],
     'ssh2_sftp_mkdir' => ['bool', 'sftp'=>'resource', 'dirname'=>'string', 'mode='=>'int', 'recursive='=>'bool'],
     'ssh2_sftp_readlink' => ['string|false', 'sftp'=>'resource', 'link'=>'string'],
     'ssh2_sftp_realpath' => ['string|false', 'sftp'=>'resource', 'filename'=>'string'],
     'ssh2_sftp_rename' => ['bool', 'sftp'=>'resource', 'from'=>'string', 'to'=>'string'],
     'ssh2_sftp_rmdir' => ['bool', 'sftp'=>'resource', 'dirname'=>'string'],
-    'ssh2_sftp_stat' => ['array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'sftp'=>'resource', 'path'=>'string'],
+    'ssh2_sftp_stat' => ['strict-array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'sftp'=>'resource', 'path'=>'string'],
     'ssh2_sftp_symlink' => ['bool', 'sftp'=>'resource', 'target'=>'string', 'link'=>'string'],
     'ssh2_sftp_unlink' => ['bool', 'sftp'=>'resource', 'filename'=>'string'],
     'ssh2_shell' => ['resource|false', 'session'=>'resource', 'term_type='=>'string', 'env='=>'array', 'width='=>'int', 'height='=>'int', 'width_height_type='=>'int'],
     'ssh2_tunnel' => ['resource|false', 'session'=>'resource', 'host'=>'string', 'port'=>'int'],
-    'stat' => ['array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'filename'=>'string'],
+    'stat' => ['strict-array{0: int, 1: int, 2: int, 3: int, 4: int, 5: int, 6: int, 7: int, 8: int, 9: int, 10: int, 11: int, 12: int, dev: int, ino: int, mode: int, nlink: int, uid: int, gid: int, rdev: int, size: int, atime: int, mtime: int, ctime: int, blksize: int, blocks: int}|false', 'filename'=>'string'],
     'stats_absolute_deviation' => ['float', 'a'=>'array'],
     'stats_cdf_beta' => ['float', 'par1'=>'float', 'par2'=>'float', 'par3'=>'float', 'which'=>'int'],
     'stats_cdf_binomial' => ['float', 'par1'=>'float', 'par2'=>'float', 'par3'=>'float', 'which'=>'int'],
@@ -15282,7 +15282,7 @@ return [
     'stream_get_contents' => ['string|false', 'stream'=>'resource', 'length='=>'int', 'offset='=>'int'],
     'stream_get_filters' => ['array'],
     'stream_get_line' => ['string|false', 'stream'=>'resource', 'length'=>'int', 'ending='=>'string'],
-    'stream_get_meta_data' => ['array{timed_out:bool,blocked:bool,eof:bool,unread_bytes:int,stream_type:string,wrapper_type:string,wrapper_data:mixed,mode:string,seekable:bool,uri:string,mediatype:string,crypto?:array{protocol:string,cipher_name:string,cipher_bits:int,cipher_version:string}}', 'stream'=>'resource'],
+    'stream_get_meta_data' => ['strict-array{timed_out:bool,blocked:bool,eof:bool,unread_bytes:int,stream_type:string,wrapper_type:string,wrapper_data:mixed,mode:string,seekable:bool,uri:string,mediatype:string,crypto?:strict-array{protocol:string,cipher_name:string,cipher_bits:int,cipher_version:string}}', 'stream'=>'resource'],
     'stream_get_transports' => ['list<string>'],
     'stream_get_wrappers' => ['list<string>'],
     'stream_is_local' => ['bool', 'stream'=>'resource|string'],
@@ -15805,19 +15805,19 @@ return [
     'tidy_setopt' => ['bool', 'option'=>'string', 'value'=>'mixed'],
     'tidy_warning_count' => ['int', 'tidy'=>'tidy'],
     'time' => ['positive-int'],
-    'time_nanosleep' => ['array{0:0|positive-int,1:0|positive-int}|bool', 'seconds'=>'positive-int', 'nanoseconds'=>'positive-int'],
+    'time_nanosleep' => ['strict-array{0:0|positive-int,1:0|positive-int}|bool', 'seconds'=>'positive-int', 'nanoseconds'=>'positive-int'],
     'time_sleep_until' => ['bool', 'timestamp'=>'float'],
-    'timezone_abbreviations_list' => ['array<string, list<array{dst: bool, offset: int, timezone_id: string|null}>>|false'],
+    'timezone_abbreviations_list' => ['array<string, list<strict-array{dst: bool, offset: int, timezone_id: string|null}>>|false'],
     'timezone_identifiers_list' => ['list<string>|false', 'timezoneGroup='=>'int', 'countryCode='=>'string'],
     'timezone_location_get' => ['array|false', 'object'=>'DateTimeZone'],
     'timezone_name_from_abbr' => ['string|false', 'abbr'=>'string', 'utcOffset='=>'int', 'isDST='=>'int'],
     'timezone_name_get' => ['string', 'object'=>'DateTimeZone'],
     'timezone_offset_get' => ['int|false', 'object'=>'DateTimeZone', 'datetime'=>'DateTimeInterface'],
     'timezone_open' => ['DateTimeZone|false', 'timezone'=>'string'],
-    'timezone_transitions_get' => ['list<array{ts: int, time: string, offset: int, isdst: bool, abbr: string}>|false', 'object'=>'DateTimeZone', 'timestampBegin='=>'int', 'timestampEnd='=>'int'],
+    'timezone_transitions_get' => ['list<strict-array{ts: int, time: string, offset: int, isdst: bool, abbr: string}>|false', 'object'=>'DateTimeZone', 'timestampBegin='=>'int', 'timestampEnd='=>'int'],
     'timezone_version_get' => ['string'],
     'tmpfile' => ['resource|false'],
-    'token_get_all' => ['list<string|array{0:int,1:string,2:int}>', 'code'=>'string', 'flags='=>'int'],
+    'token_get_all' => ['list<string|strict-array{0:int,1:string,2:int}>', 'code'=>'string', 'flags='=>'int'],
     'token_name' => ['string', 'id'=>'int'],
     'touch' => ['bool', 'filename'=>'string', 'mtime='=>'int', 'atime='=>'int'],
     'trader_acos' => ['array', 'real'=>'array'],
diff --git a/docs/annotating_code/supported_annotations.md b/docs/annotating_code/supported_annotations.md
index 5393cca2e..67c7542cc 100644
--- a/docs/annotating_code/supported_annotations.md
+++ b/docs/annotating_code/supported_annotations.md
@@ -484,7 +484,7 @@ This allows you to define an alias for another type.
 ```php
 <?php
 /**
- * @psalm-type PhoneType = array{phone: string}
+ * @psalm-type PhoneType = strict-array{phone: string}
  */
 class Phone {
     /**
diff --git a/docs/annotating_code/type_syntax/array_types.md b/docs/annotating_code/type_syntax/array_types.md
index bf2894575..1a94f0bdb 100644
--- a/docs/annotating_code/type_syntax/array_types.md
+++ b/docs/annotating_code/type_syntax/array_types.md
@@ -25,6 +25,16 @@ PHP treats all these arrays the same, essentially (though there are some optimis
 
 Psalm has a few different ways to represent arrays in its type system:
 
+- [array&lt;int, string&gt;](#generic-arrays)
+- [non-empty-array](#non-empty-array)
+- [string\[\]](#phpdoc-syntax)
+- [list & non-empty-list](#lists)
+- [list&lt;string&gt;](#lists)
+- [array{foo: int, bar: string} and list{int, string} &raquo;](#object-like-arrays)
+  - [Sealed arrays &raquo;](#sealed-object-like-arrays)
+  - [Unsealed arrays &raquo;](#unsealed-object-like-arrays)
+- [callable-array](#callable-arrays)
+
 ## Generic arrays
 
 Psalm uses a syntax [borrowed from Java](https://en.wikipedia.org/wiki/Generics_in_Java) that allows you to denote the types of both keys *and* values:
@@ -106,21 +116,190 @@ Given an array
 Psalm will type it internally as:
 
 ```
-array{0: string, 1: string, foo: stdClass, 28: false}
+strict-array{0: string, 1: string, foo: stdClass, 28: false}
 ```
 
 You can specify types in that format yourself, e.g.
 
 ```php
-/** @return array{foo: string, bar: int} */
+/** @return strict-array{foo: string, bar: int} */
 ```
 
 Optional keys can be denoted by a trailing `?`, e.g.:
 
 ```php
-/** @return array{optional?: string, bar: int} */
+/** @return strict-array{optional?: string, bar: int} */
+```
+
+Starting from psalm v5, psalm also supports a special format for lists where the key offsets are known: object-like lists, also known as **list shapes**.
+
+Given a list
+
+```php
+<?php
+["hello", "world", new stdClass, false];
+```
+
+Psalm will type it internally as:
+
+```
+strict-list{string, string, stdClass, false}
+```
+
+You can specify types in that format yourself, e.g.
+
+```php
+/** @return strict-list{string, int} */
+/** @return strict-list{0: string, 1: int} */
+```
+
+Optional keys can be denoted by a specifying keys for all elements and specifying a trailing `?` for optional keys, e.g.:
+
+```php
+/** @return strict-list{0: string, 1?: int} */
+```
+
+Starting from Psalm v5, object-like arrays and lists can be marked as sealed with a `strict-` prefix, which means Psalm can reason a lot better about them, see [here](#sealed-object-like-arrays) for more info.  
+
+### Sealed object-like arrays
+
+Starting from Psalm v5, object-like arrays and lists can be marked as sealed with a `strict-` prefix.  
+Sealed arrays can only have _only_ have the keys specified in the shape: extra keys are forbidden.  
+
+This additional simplicity means Psalm can reason a lot better about them:  
+
+```php
+/** @var strict-array{foo: string, bar?: int, baz?: float} $arr */
+
+if (count($arr) > 2) {
+  echo $arr['baz']; // OK!
+}
+
+// Off by one bug, detected by Psalm:
+if (count($arr) > 3) {
+  // DocblockTypeContradiction - Docblock-defined type for $arr is never has-at-least-4
+}
+
+/** @param strict-array{0: float, 1: float, 2?: float} $arr */
+function avgShape(array $arr): float {
+  return array_sum($arr) / count($arr);
+}
+
+// InvalidArgument - Argument 1 of avgShape expects ...
+avgShape([123.1, 321.0, 1.0, new class {}, 'test']);
+```
+
+The above examples contain bugs which can be detected by Psalm *only when using sealed arrays*.  
+
+The counterpart to sealed arrays are [unsealed arrays &rauo;](#unsealed-object-like-arrays), generated as intermediate types when asserting raw arrays.  
+Unsealed arrays are by definition uncertain, so Psalm can't reason well about them: always convert them to sealed arrays as specified [here &raquo;](#unsealed-object-like-arrays).  
+
+Tip: if you find yourself copying the same complex sealed array shape over and over again to avoid `InvalidArgument` issues, try using [type aliases](utility_types.md#type-aliases), instead.
+
+### Unsealed object-like arrays
+
+Starting from v5, Psalm defines a supertype of object-like arrays called unsealed object-like arrays.  
+This type is used in cases where an [object-like array](#object-like-arrays) may have extra keys not specified in the shape.  
+Avoid using unsealed arrays in your codebase, as **they can cause undetectable bugs**: always transform them into sealed arrays before use.  
+Unsealed arrays are by definition uncertain, so, unlike [sealed arrays](#sealed-object-like-arrays), Psalm can't reason well about them: always use sealed arrays in your PHPDocs.  
+
+Here's how unsealed arrays can cause weird bugs:
+
+```php
+<?php
+
+/**
+ * @param array{a: float, b: float} $params
+ */
+function avg(array $params): float {
+  return array_sum($params) / 2.0;
+}
+
+$arr = json_decode(file_get_contents('https://.../'), true);
+
+if (is_array($arr)
+  && isset($arr['a']) && is_float($arr['a'])
+  && isset($arr['b']) && is_float($arr['b'])
+) {
+  /** @psalm-trace $array */; // array{a: float, b: float}
+  echo avg($arr);
+}
+
+/**
+ * @param strict-array{a: float, b: float, c: float} $params
+ */
+function avgCoefficient(array $params): float {
+  return avg($params) * $params['c'];
+}
 ```
 
+In this example, we assume that `avg` takes an array with two elements, but what happens if the API (or some other function) also provides a third `c` parameter to a function that averages two elements?  
+And what would happen if a string `csrf` parameter were provided in `$_POST`?  
+
+Clearly, just asserting the shape of the array is not enough: we need to guarantee that the array will contain only the array elements we need.  
+
+```php
+<?php
+
+/**
+ * @param strict-array{a: float, b: float} $params
+ */
+function avg(array $params): float {
+  return array_sum($params) / 2.0;
+}
+
+$arr = json_decode(file_get_contents('https://.../'), true);
+
+if (is_array($arr)
+  && isset($arr['a']) && is_float($arr['a'])
+  && isset($arr['b']) && is_float($arr['b'])
+  && count($arr) === 2 // <-- Ensure only two elements are present
+) {
+  /** @psalm-trace $array */; // strict-array{a: float, b: float}
+  echo avg($arr);
+}
+
+/**
+ * @param strict-array{a: float, b: float, c: float} $params
+ */
+function avgCoefficient(array $params): float {
+  // InvalidArgument - Argument 1 of avg expects strict-array{a: float, b: float}, but strict-array{a: float, b: float, c: float} provided
+  //return avg($params) * $params['c'];
+
+  $coefficient = $params['c'];
+  unset($params['c']);
+  return avg($params) * $coefficient;
+}
+```
+
+You can also manually provide a `['a' => $arr['a'], 'b' => $arr['b']]`, but there's an even better way to seamlessly validate user-provided input:  
+
+<!--
+Use [Valinor](https://github.com/CuyZ/Valinor) in strict mode to easily assert sealed arrays @ runtime using Psalm array shape syntax (instead of manually asserting keys with isset):
+
+```php
+try {
+  $array = (new \CuyZ\Valinor\MapperBuilder())
+      ->mapper()
+      ->map(
+          'strict-array{a: string, b: int}',
+          json_decode(file_get_contents('https://.../'), true)
+      );
+
+  /** @psalm-trace $array */; // strict-array{a: string, b: int}
+
+  echo $array['a'];
+  echo $array['b'];
+} catch (\CuyZ\Valinor\Mapper\MappingError $error) {
+  // Do something
+}
+```
+
+Valinor provides both runtime and static Psalm assertions with full Psalm syntax support and many other features, check out the [Valinor documentation](https://valinor.cuyz.io/latest/) for more info!  
+-->
+
+Tip: if you find yourself copying the same complex sealed array shape over and over again to avoid `InvalidArgument` issues, try using [type aliases](utility_types.md#type-aliases), instead.
+
 ## Callable arrays
 
 An array holding a callable, like PHP's native `call_user_func()` and friends supports it:
@@ -135,3 +314,4 @@ $callable = [$object, 'aMethod'];
 ## non-empty-array
 
 An array which is not allowed to be empty.
+[Generic syntax](#generic-arrays) is also supported: `non-empty-array<string, int>`.
\ No newline at end of file
diff --git a/docs/annotating_code/type_syntax/atomic_types.md b/docs/annotating_code/type_syntax/atomic_types.md
index 911e9a395..cfe641473 100644
--- a/docs/annotating_code/type_syntax/atomic_types.md
+++ b/docs/annotating_code/type_syntax/atomic_types.md
@@ -2,76 +2,61 @@
 
 Atomic types are the basic building block of all type information used in Psalm. Multiple atomic types can be combined, either with [union types](union_types.md) or [intersection types](intersection_types.md). Psalm allows many different sorts of atomic types to be expressed in docblock syntax:
 
-## [Scalar types](scalar_types.md)
-
-- [int](scalar_types.md)
-- [positive-int](scalar_types.md#positive-int)
-- [float](scalar_types.md)
-- [string](scalar_types.md)
-- [class-string and class-string&lt;Foo&gt;](scalar_types.md#class-string-interface-string)
-- [trait-string](scalar_types.md#trait-string)
-- [enum-string](scalar_types.md#enum-string)
-- [callable-string](scalar_types.md#callable-string)
-- [numeric-string](scalar_types.md#numeric-string)
-- [literal-string](scalar_types.md#literal-string)
-- [bool](scalar_types.md)
-- [array-key](scalar_types.md#array-key)
-- [numeric](scalar_types.md#numeric)
-- [scalar](scalar_types.md#scalar)
-
-## [Object types](object_types.md)
-
-- [object](object_types.md)
-- [object{foo: string}](object_types.md)
-- [Exception, Foo\MyClass and Foo\MyClass<Bar>](object_types.md)
-- [Generator](object_types.md)
-
-## [Array types](array_types.md)
-
-- [array & non-empty-array](array_types.md)
-- [array&lt;int, string&gt;](array_types.md#generic-arrays)
-- [string\[\]](array_types.md#phpdoc-syntax)
-- [list & non-empty-list](array_types.md#lists)
-- [list&lt;string&gt;](array_types.md#lists)
-- [array{foo: int, bar: string}](array_types.md#object-like-arrays)
-- [callable-array](array_types.md#callable-array)
-
-## [Callable types](callable_types.md)
-
-- [callable, Closure and callable(Foo, Bar):Baz](callable_types.md)
-
-## [Value types](value_types.md)
-
-- [null](value_types.md#null)
-- [true, false](value_types.md#true-false)
-- [6, 7.0, "forty-two" and 'forty two'](value_types.md#some_string-4-314)
-- [Foo\Bar::MY_SCALAR_CONST](value_types.md#regular-class-constants)
-
-## Magical types
-
-- [(T is true ? string : bool)](conditional_types.md)
-- [`key-of<T>`](utility_types.md#key-oft)
-- [`value-of<T>`](utility_types.md#value-oft)
-- `T[K]`
-- [`properties-of<T>`](utility_types.md#properties-oft)
-
-## Top types, bottom types
-
-### `mixed`
-
-This is the _top type_ in PHP's type system, and represents a lack of type information. Psalm warns about `mixed` types when the `reportMixedIssues` flag is turned on, or when you're on level 1.
-
-### `never`
-It can be aliased to `no-return` or `never-return` in docblocks. Note: it replaced the old `empty` type that used to exist in Psalm
-
-This is the _bottom type_ in PHP's type system. It's used to describe a type that has no possible value. It can happen in multiple cases:
-- the actual `never` type from PHP 8.1 (can be used in docblocks for older versions). This type can be used as a return type for functions that will never return, either because they always throw exceptions or always exit()
-- an union type that have been stripped for all its possible types. (For example, if a variable is `string|int` and we perform a is_bool() check in a condition, the type of the variable in the condition will be `never` as the condition will never be entered)
-- it can represent a placeholder for types yet to come  a good example is the type of the empty array `[]`, which Psalm types as `array<never, never>`, the content of the array is void so it can accept any content
-- it can also happen in the same context as the line above for templates that have yet to be defined
-
-## Other
-
-- `iterable` - represents the [iterable pseudo-type](https://php.net/manual/en/language.types.iterable.php). Like arrays, iterables can have type parameters e.g. `iterable<string, Foo>`.
-- `void` - can be used in a return type when a function does not return a value.
-- `resource` represents a [PHP resource](https://www.php.net/manual/en/language.types.resource.php).
+_Click on the &raquo; next to each type to view detailed documentation and examples._
+
+* [Scalar types &raquo;](scalar_types.md)
+  * [bool &raquo;](scalar_types.md#scalar)
+  * [int &raquo;](scalar_types.md#scalar)
+  * [float &raquo;](scalar_types.md#scalar)
+  * [string &raquo;](scalar_types.md#scalar)
+  * [`int-range<x, y>` &raquo;](scalar_types.md#int-range)
+  * [`int-mask<1, 2, 4>` &raquo;](scalar_types.md#int-mask1-2-4)
+  * [`int-mask-of<MyClass::CLASS_CONSTANT_*>` &raquo;](scalar_types.md#int-mask-ofmyclassclass_constant_)
+  * [class-string and class-string&lt;Foo&gt; &raquo;](scalar_types.md#class-string-interface-string)
+  * [trait-string &raquo;](scalar_types.md#trait-string)
+  * [enum-string &raquo;](scalar_types.md#enum-string)
+  * [callable-string &raquo;](scalar_types.md#callable-string)
+  * [numeric-string &raquo;](scalar_types.md#numeric-string)
+  * [literal-string &raquo;](scalar_types.md#literal-string)
+  * [literal-int &raquo;](scalar_types.md#literal-int)
+  * [array-key &raquo;](scalar_types.md#array-key)
+  * [numeric &raquo;](scalar_types.md#numeric)
+  * [scalar &raquo;](scalar_types.md#scalar)
+* [Object types &raquo;](object_types.md)
+  * [object &raquo;](object_types.md#unnamed-objects)
+  * [object{foo: string} &raquo;](object_types.md#object-properties)
+  * [Exception, Foo\MyClass and `Foo\MyClass<Bar>` &raquo;](object_types.md#named-objectsmd)
+  * [Generator](object_types.md#generators)
+* [Array types &raquo;](array_types.md)
+  * [array&lt;int, string&gt;  &raquo;](array_types.md#generic-arrays)
+  * [non-empty-array &raquo;](array_types.md#non-empty-array)
+  * [string\[\] &raquo;](array_types.md#phpdoc-syntax)
+  * [list & non-empty-list &raquo;](array_types.md#lists)
+  * [list&lt;string&gt; &raquo;](array_types.md#lists)
+  * [array{foo: int, bar: string} and list{int, string} &raquo;](array_types.md#object-like-arrays)
+    * [Sealed arrays &raquo;](array_types.md#sealed-object-like-arrays)
+    * [Unsealed arrays &raquo;](array_types.md#unsealed-object-like-arrays)
+  * [callable-array &raquo;](array_types.md#callable-arrays)
+* [Callable types &raquo;](callable_types.md)
+* [Value types &raquo;](value_types.md)
+  * [null &raquo;](value_types.md#null)
+  * [true, false &raquo;](value_types.md#true-false)
+  * [6, 7.0, "forty-two" and 'forty two' &raquo;](value_types.md#some_string-4-314)
+  * [Foo\Bar::MY_SCALAR_CONST &raquo;](value_types.md#regular-class-constants)
+* [Utility types &raquo;](utility_types.md)
+  * [(T is true ? string : bool) &raquo;](conditional_types.md)
+  * [`key-of<T>` &raquo;](utility_types.md#key-oft)
+  * [`value-of<T>` &raquo;](utility_types.md#value-oft)
+  * [`properties-of<T>` &raquo;](utility_types.md#properties-oft)
+  * [`class-string-map<T as Foo, T>` &raquo;](utility_types.md#class-string-mapt-as-foo-t)
+  * [`T[K]` &raquo;](utility_types.md#tk)
+  * [Type aliases &raquo;](utility_types.md#type-aliases)
+  * [Variable templates &raquo;](utility_types.md#variable-templates)
+* [Other types &raquo;](other_types.md)
+  * [`iterable<TKey, TValue>` &raquo;](other_types.md)
+  * [void &raquo;](other_types.md)
+  * [resource &raquo;](other_types.md)
+  * [closed-resource &raquo;](other_types.md)
+* [Top and bottom types &raquo;](top_bottom_types.md)
+  * [mixed &raquo;](top_bottom_types.md#mixed)
+  * [never &raquo;](top_bottom_types.md#never)
diff --git a/docs/annotating_code/type_syntax/intersection_types.md b/docs/annotating_code/type_syntax/intersection_types.md
index e7a94dc23..299bd7e79 100644
--- a/docs/annotating_code/type_syntax/intersection_types.md
+++ b/docs/annotating_code/type_syntax/intersection_types.md
@@ -15,8 +15,8 @@ required to implement multiple interfaces.
 Another use case is being able to merge object-like arrays:
 ```php
 /**
- * @psalm-type A=array{a: int}
- * @psalm-type B=array{b: int}
+ * @psalm-type A=strict-array{a: int}
+ * @psalm-type B=strict-array{b: int}
  *
  * @param A $a
  * @param B $b
diff --git a/docs/annotating_code/type_syntax/object_types.md b/docs/annotating_code/type_syntax/object_types.md
index 18de65d71..eca8397ae 100644
--- a/docs/annotating_code/type_syntax/object_types.md
+++ b/docs/annotating_code/type_syntax/object_types.md
@@ -1,8 +1,19 @@
 # Object types
 
-`object`, `stdClass`, `Foo`, `Bar\Baz` etc. are examples of object types. These types are also valid types in PHP.
+- [object](#unnamed-objects)
+- [object{foo: string}](#object-properties)
+- [Exception, Foo\MyClass and Foo\MyClass<Bar>](#named-objectsmd)
+- [Generator](#generators)
 
-#### Object properties
+### Unnamed objects
+
+`object` are examples of unnamed object types. This type is also a valid type in PHP.
+
+### Named objects
+
+`stdClass`, `Foo`, `Bar\Baz` etc. are examples of named object types. These types are also valid types in PHP.
+
+### Object properties
 
 Psalm supports specifying the properties of an object and their expected types, e.g.:
 
@@ -21,11 +32,11 @@ Optional properties can be denoted by a trailing `?`, e.g.:
 /** @param object{optional?: string} */
 ```
 
-#### Generic object types
+### Generic object types
 
 Psalm supports using generic object types like `ArrayObject<int, string>`. Any generic object should be typehinted with appropriate [`@template` tags](../templated_annotations.md).
 
-#### Generators
+### Generators
 
 Generator types support up to four parameters, e.g. `Generator<int, string, mixed, void>`:
 
diff --git a/docs/annotating_code/type_syntax/scalar_types.md b/docs/annotating_code/type_syntax/scalar_types.md
index a59b1be56..92e8d69d3 100644
--- a/docs/annotating_code/type_syntax/scalar_types.md
+++ b/docs/annotating_code/type_syntax/scalar_types.md
@@ -1,18 +1,57 @@
 # Scalar types
 
-`int`, `bool`, `float`, `string` are examples of scalar types. Scalar types represent scalar values in PHP. These types are also valid types in PHP 7.
+* [bool &raquo;](scalar_types.md#scalar)
+* [int &raquo;](scalar_types.md#scalar)
+* [float &raquo;](scalar_types.md#scalar)
+* [string &raquo;](scalar_types.md#scalar)
+* [`int-range<x, y>` &raquo;](scalar_types.md#int-range)
+* [`int-mask<1, 2, 4>` &raquo;](scalar_types.md#int-mask1-2-4)
+* [`int-mask-of<MyClass::CLASS_CONSTANT_*>` &raquo;](scalar_types.md#int-mask-ofmyclassclass_constant_)
+* [class-string and class-string&lt;Foo&gt; &raquo;](scalar_types.md#class-string-interface-string)
+* [trait-string &raquo;](scalar_types.md#trait-string)
+* [enum-string &raquo;](scalar_types.md#enum-string)
+* [callable-string &raquo;](scalar_types.md#callable-string)
+* [numeric-string &raquo;](scalar_types.md#numeric-string)
+* [literal-string &raquo;](scalar_types.md#literal-string)
+* [literal-int &raquo;](scalar_types.md#literal-int)
+* [array-key &raquo;](scalar_types.md#array-key)
+* [numeric &raquo;](scalar_types.md#numeric)
+* [scalar &raquo;](scalar_types.md#scalar)
 
 ### scalar
 
+`int`, `bool`, `float`, `string` are examples of scalar types. Scalar types represent scalar values in PHP. These types are also valid types in PHP 7.
 The type `scalar` is the supertype of all scalar types.
 
-### array-key
+### int-range
 
-`array-key` is the supertype (but not a union) of `int` and `string`.
+Integer ranges indicate an integer within a range, specified using generic syntax: `int<x, y>`.  
+`x` and `y` must be integer numbers.  
+`x` can also be `min` to indicate PHP_INT_MIN, and `y` can be `max` to indicate PHP_INT_MAX.
+
+Examples:
+
+* `int<-1, 3>`
+* `int<min, 0>`
+* `int<1, max>` (equivalent to `positive-int`)
+* `int<0, max>` (equivalent to `non-negative-int`)
+* `int<min, -1>` (equivalent to `negative-int`)
+* `int<min, 0>` (equivalent to `non-positive-int`)
+* `int<min, max>` (equivalent to `int`)
+
+## `int-mask<1, 2, 4>`
+
+Represents the type that is the result of a bitmask combination of its parameters.  
+`int-mask<1, 2, 4>` corresponds to `0|1|2|3|4|5|6|7`.  
+
+## `int-mask-of<MyClass::CLASS_CONSTANT_*>`
 
-### positive-int
+Represents the type that is the result of a bitmask combination of its parameters.  
+This is the same concept as [`int-mask`](#int-mask1-2-4) but this type is used with a reference to constants in code: `int-mask-of<MyClass::CLASS_CONSTANT_*>` will correspond to `0|1|2|3|4|5|6|7` if there are three constants called `CLASS_CONSTANT_{A,B,C}` with values 1, 2 and 4.  
 
-`positive-int` allows only positive integers (equivalent to `int<1, max>`)
+### array-key
+
+`array-key` is the supertype (but not a union) of `int` and `string`.
 
 ### numeric
 
@@ -72,6 +111,21 @@ Strings that don't pass this type check:
 - `$_GET["foo"]`
 - `"hello " . $_GET["foo"]`
 
+### literal-int
+
+`literal-int` denotes an int value that is entirely composed of literal integers in your application.
+
+Examples:
+
+- `12`
+- `12+42`
+
+Integers that don't pass this type check:
+
+- `(int) file_get_contents("foo.txt")`
+- `(int) $_GET["foo"]`
+- `((int)$_GET["foo"]) + 2`
+
 ### lowercase-string, non-empty-string, non-empty-lowercase-string
 
 A non empty string, lowercased or both at once.
diff --git a/docs/annotating_code/type_syntax/utility_types.md b/docs/annotating_code/type_syntax/utility_types.md
index b85ea3b00..8b3fef940 100644
--- a/docs/annotating_code/type_syntax/utility_types.md
+++ b/docs/annotating_code/type_syntax/utility_types.md
@@ -2,6 +2,15 @@
 
 Psalm supports some _magical_ utility types that brings superpower to the PHP type system.
 
+- [(T is true ? string : bool)](conditional_types.md)
+- [`key-of<T>`](#key-oft)
+- [`value-of<T>`](#value-oft)
+- [`properties-of<T>`](#properties-oft)
+- [`class-string-map<T as Foo, T>`](#class-string-mapt-as-foo-t)
+- [`T[K]`](#tk)
+- [Type aliases](#type-aliases)
+- [Variable templates](#variable-templates)
+
 ## `key-of<T>`
 
 (Psalm 5.0+)
@@ -11,7 +20,7 @@ The `key-of` utility returns the offset-type for any [array type](array_types.md
 Some examples:
 - `key-of<Foo\Bar::ARRAY_CONST>` evaluates to offset-type of `ARRAY_CONST` (Psalm 3.3+)
 - `key-of<list<mixed>>` evaluates to `int`
-- `key-of<array{a: mixed, b: mixed}|array{c: mixed}>` evaluates to `'a'|'b'|'c'`
+- `key-of<strict-array{a: mixed, b: mixed}|strict-array{c: mixed}>` evaluates to `'a'|'b'|'c'`
 - `key-of<string[]>` evaluates to `array-key`
 - `key-of<T>` evaluates to the template param's offset-type (ensure `@template T of array`)
 
@@ -45,7 +54,7 @@ The `value-of` utility returns the value-type for any [array type](array_types.m
 Some examples:
 - `value-of<Foo\Bar::ARRAY_CONST>` evaluates to value-type of `ARRAY_CONST` (Psalm 3.3+)
 - `value-of<list<float>>` evaluates to `float`
-- `value-of<array{a: bool, b: int}|array{c: string}>` evaluates to `bool|int|string`
+- `value-of<strict-array{a: bool, b: int}|strict-array{c: string}>` evaluates to `bool|int|string`
 - `value-of<string[]>` evaluates to `string`
 - `value-of<T>` evaluates to the template param's value-type (ensure `@template T of array`)
 
@@ -110,18 +119,16 @@ properties with a certain visibility:
 
 ### Limited template support
 
-As there is no way to statically analyze if a method returns all properties of a generic param (e.g. via Reflection or
-serialization), you have to annotate it where you assume it.
+Use final classes if you want to properties-of and get_object_vars to return [sealed arrays](array_types.md#sealed-object-like-arrays):
 
 ```php
 /**
+ * @template T
  * @param T $object
  * @return properties-of<T>
  */
-public function asArray($object): array {
-  /** @var properties-of<T> */
-  $array = json_decode(json_encode($object), true);
-  return $array;
+function asArray($object): array {
+  return get_object_vars($object);
 }
 
 
@@ -130,8 +137,228 @@ class A {
   public int $bar = 42;
 }
 
-$a = new A();
-$aAsArray = asArray($a);
-$aAsArray['foo']; // valid
-$aAsArray['adams']; // error!
+final class B extends A {
+  public float $baz = 2.1;
+}
+
+$a = asArray(new A);
+/** @psalm-trace $a */; // unsealed-strict-array{foo: string, bar: int}
+
+$b = asArray(new B);
+/** @psalm-trace $b */; // strict-array{foo: string, bar: int, baz: float}
+```
+
+## `class-string-map<T as Foo, T>`
+
+Used to indicate an array where each value is equal an instance of the class string contained in the key:
+
+```php
+<?php
+
+/**
+ * @psalm-consistent-constructor
+ */
+class Foo {}
+
+/**
+ * @psalm-consistent-constructor
+ */
+class Bar extends Foo {}
+
+class A {
+  /** @var class-string-map<T as Foo, T> */
+  private static array $map = [];
+
+  /**
+   * @template U as Foo
+   * @param class-string<U> $class
+   * @return U
+   */
+  public static function get(string $class) : Foo {
+    if (isset(self::$map[$class])) {
+      return self::$map[$class];
+    }
+
+    self::$map[$class] = new $class();
+    return self::$map[$class];
+  }
+}
+
+$foo = A::get(Foo::class);
+$bar = A::get(Bar::class);
+
+/** @psalm-trace $foo */; // Foo
+/** @psalm-trace $bar */; // Bar
+```
+
+If we had used an `array<class-string<Foo>, Foo>` instead of a `class-string-map<T as Foo, T>` in the above example, we would've gotten some false positive `InvalidReturnStatement` issues, caused by the lack of a type assertion inside the `isset`.  
+On the other hand, when using `class-string-map`, Psalm assumes that the value obtained by using a key `class-string<T>` is always equal to `T`.  
+
+Unbounded templates can also be used for unrelated classes:
+
+```php
+<?php
+
+/**
+ * @psalm-consistent-constructor
+ */
+class Foo {}
+
+/**
+ * @psalm-consistent-constructor
+ */
+class Bar {}
+
+/**
+ * @psalm-consistent-constructor
+ */
+class Baz {}
+
+class A {
+  /** @var class-string-map<T, T> */
+  private static array $map = [];
+
+  /**
+   * @template U
+   * @param class-string<U> $class
+   * @return U
+   */
+  public static function get(string $class) : object {
+    if (isset(self::$map[$class])) {
+      return self::$map[$class];
+    }
+
+    self::$map[$class] = new $class();
+    return self::$map[$class];
+  }
+}
+
+$foo = A::get(Foo::class);
+$bar = A::get(Bar::class);
+$baz = A::get(Baz::class);
+
+/** @psalm-trace $foo */; // Foo
+/** @psalm-trace $bar */; // Bar
+/** @psalm-trace $baz */; // Baz
+```
+
+## `T[K]`
+
+Used to get the value corresponding to the specified key:
+
+```php
+<?php
+
+/**
+ * @template T as array
+ * @template TKey as string
+ * @param T $arr
+ * @param TKey $k
+ * @return T[TKey]
+ */
+function a(array $arr, string $k): mixed {
+  assert(isset($arr[$k]));
+  return $arr[$k];
+}
+
+$a = a(['test' => 123], 'test');
+/** @psalm-trace $a */; // 123
+```
+
+## Type aliases
+
+Psalm allows defining type aliases for complex types (like array shapes) which must be reused often:
+
+```php
+/**
+ * @psalm-type PhoneType = strict-array{phone: string}
+ */
+class Phone {
+    /**
+     * @psalm-return PhoneType
+     */
+    public function toArray(): array {
+        return ["phone" => "Nokia"];
+    }
+}
+```
+
+You can use the [`@psalm-import-type`](../supported_annotations.md#psalm-import-type) annotation to import a type defined with [`@psalm-type`](../supported_annotations.md#psalm-type) if it was defined somewhere else.
+
+```php
+<?php
+/**
+ * @psalm-import-type PhoneType from Phone
+ */
+class User {
+    /**
+     * @psalm-return PhoneType
+     */
+    public function toArray(): array {
+        return array_merge([], (new Phone())->toArray());
+    }
+}
+```
+
+You can also alias a type when you import it:
+
+```php
+<?php
+/**
+ * @psalm-import-type PhoneType from Phone as MyPhoneTypeAlias
+ */
+class User {
+    /**
+     * @psalm-return MyPhoneTypeAlias
+     */
+    public function toArray(): array {
+        return array_merge([], (new Phone())->toArray());
+    }
+}
+```
+
+## Variable templates
+
+Variable templates allow directly using variables instead of template types, for example instead of the following verbose example:
+
+```php
+<?php
+
+/**
+ * @template TA as string
+ * @template TB as string
+ * @template TChoose as bool
+ * @param TA $a
+ * @param TB $b
+ * @param TChoose $choose
+ * @return (TChoose is true ? TA : TB)
+ */
+function pick(string $a, string $b, bool $choose): string {
+  return $choose ? $a : $b;
+}
+
+$a = pick('a', 'b', true);
+/** @psalm-trace $a */; // 'a'
+
+$a = pick('a', 'b', false);
+/** @psalm-trace $a */; // 'b'
+```
+
+We can instead use variable templates like so:
+
+```php
+<?php
+
+/**
+ * @return ($choose is true ? $a : $b)
+ */
+function pick(string $a, string $b, bool $choose): string {
+  return $choose ? $a : $b;
+}
+
+$a = pick('a', 'b', true);
+/** @psalm-trace $a */; // 'a'
+
+$a = pick('a', 'b', false);
+/** @psalm-trace $a */; // 'b'
 ```
diff --git a/docs/annotating_code/type_syntax/value_types.md b/docs/annotating_code/type_syntax/value_types.md
index add67cb37..a9bb86caa 100644
--- a/docs/annotating_code/type_syntax/value_types.md
+++ b/docs/annotating_code/type_syntax/value_types.md
@@ -2,6 +2,11 @@
 
 Psalm also allows you to specify values in types.
 
+- [null](#null)
+- [true, false](#true-false)
+- [6, 7.0, "forty-two" and 'forty two'](#some_string-4-314)
+- [Foo\Bar::MY_SCALAR_CONST](#regular-class-constants)
+
 ### null
 
 This is the `null` value, destroyer of worlds. Use it sparingly. Psalm supports you writing `?Foo` to mean `null|Foo`.
diff --git a/docs/running_psalm/configuration.md b/docs/running_psalm/configuration.md
index 97eebaa9f..aa0651451 100644
--- a/docs/running_psalm/configuration.md
+++ b/docs/running_psalm/configuration.md
@@ -430,7 +430,7 @@ Please note that changing this setting might introduce unwanted side effects and
   maxShapedArraySize="100"
 >
 ```
-This setting controls the maximum size of shaped arrays that will be transformed into a shaped `array{key1: "value", key2: T}` type during Psalm analysis.  
+This setting controls the maximum size of shaped arrays that will be transformed into a shaped `strict-array{key1: "value", key2: T}` type during Psalm analysis.  
 Arrays bigger than this value (100 by default) will be transformed in a generic `non-empty-array` type, instead.  
 
 Please note that changing this setting might introduce unwanted side effects and those side effects won't be considered as bugs.  
@@ -524,8 +524,8 @@ The  following configuration declares custom types for super-globals (`$GLOBALS`
 
 ```xml
 <globals>
-  <var name="GLOBALS" type="array{DB: MyVendor\DatabaseConnection, VIEW: MyVendor\TemplateView}" />
-  <var name="_GET" type="array{data: array<string, string>}" />
+  <var name="GLOBALS" type="strict-array{DB: MyVendor\DatabaseConnection, VIEW: MyVendor\TemplateView}" />
+  <var name="_GET" type="strict-array{data: array<string, string>}" />
 </globals>
 ```
 
@@ -545,6 +545,6 @@ Plugins can access or modify the global configuration in plugins using
 ```php
 $config = \Psalm\Config::getInstance();
 if (!isset($config->globals['$GLOBALS'])) {
-    $config->globals['$GLOBALS'] = 'array{data: array<string, string>}';
+    $config->globals['$GLOBALS'] = 'strict-array{data: array<string, string>}';
 }
 ```
diff --git a/docs/running_psalm/issues/RedundantFunctionCallGivenDocblockType.md b/docs/running_psalm/issues/RedundantFunctionCallGivenDocblockType.md
index 7689d47f1..da54d4743 100644
--- a/docs/running_psalm/issues/RedundantFunctionCallGivenDocblockType.md
+++ b/docs/running_psalm/issues/RedundantFunctionCallGivenDocblockType.md
@@ -8,7 +8,7 @@ This may be desired (e.g. when checking user input) so is distinct from Redundan
 <?php
 
 /**
- * @param array{0: lowercase-string, 1: non-empty-list<lowercase-string>} $s
+ * @param strict-array{0: lowercase-string, 1: non-empty-list<lowercase-string>} $s
  *
  * @return lowercase-string
  */
diff --git a/docs/running_psalm/plugins/plugins_type_system.md b/docs/running_psalm/plugins/plugins_type_system.md
index fcddb74e0..087f70db1 100644
--- a/docs/running_psalm/plugins/plugins_type_system.md
+++ b/docs/running_psalm/plugins/plugins_type_system.md
@@ -172,8 +172,8 @@ if (true === $first) {
 `TKeyedArray` represents an 'object-like array' - an array with known keys.
 
 ``` php
-$x = ["a" => 1, "b" => 2]; // is TKeyedArray, array{a: int, b: int}
-$y = rand(0, 1) ? ["a" => null] : ["a" => 1, "b" => "b"]; // is TKeyedArray with optional keys/values, array{a: ?int, b?: string}
+$x = ["a" => 1, "b" => 2]; // is TKeyedArray, strict-array{a: int, b: int}
+$y = rand(0, 1) ? ["a" => null] : ["a" => 1, "b" => "b"]; // is TKeyedArray with optional keys/values, strict-array{a: ?int, b?: string}
 ```
 
 Note that not all associative arrays are considered object-like. If the keys are not known, the array is treated as a mapping between two types.
diff --git a/src/Psalm/CodeLocation.php b/src/Psalm/CodeLocation.php
index 664827f94..aba8dd37c 100644
--- a/src/Psalm/CodeLocation.php
+++ b/src/Psalm/CodeLocation.php
@@ -387,7 +387,7 @@ class CodeLocation
     }
 
     /**
-     * @return array{0: int, 1: int}
+     * @return strict-array{0: int, 1: int}
      */
     public function getSelectionBounds(): array
     {
@@ -397,7 +397,7 @@ class CodeLocation
     }
 
     /**
-     * @return array{0: int, 1: int}
+     * @return strict-array{0: int, 1: int}
      */
     public function getSnippetBounds(): array
     {
diff --git a/src/Psalm/Codebase.php b/src/Psalm/Codebase.php
index bc93e434d..493d11580 100644
--- a/src/Psalm/Codebase.php
+++ b/src/Psalm/Codebase.php
@@ -991,7 +991,7 @@ final class Codebase
     /**
      * @param string $file_path
      * @param string $symbol
-     * @return array{ type: string, description?: string|null}|null
+     * @return strict-array{ type: string, description?: string|null}|null
      */
     public function getSymbolInformation(string $file_path, string $symbol): ?array
     {
@@ -1204,7 +1204,7 @@ final class Codebase
     }
 
     /**
-     * @return array{0: string, 1: Range}|null
+     * @return strict-array{0: string, 1: Range}|null
      */
     public function getReferenceAtPosition(string $file_path, Position $position): ?array
     {
@@ -1257,7 +1257,7 @@ final class Codebase
     }
 
     /**
-     * @return array{0: non-empty-string, 1: int, 2: Range}|null
+     * @return strict-array{0: non-empty-string, 1: int, 2: Range}|null
      */
     public function getFunctionArgumentAtPosition(string $file_path, Position $position): ?array
     {
@@ -1393,7 +1393,7 @@ final class Codebase
     }
 
     /**
-     * @return array{0: string, 1: '->'|'::'|'['|'symbol', 2: int}|null
+     * @return strict-array{0: string, 1: '->'|'::'|'['|'symbol', 2: int}|null
      */
     public function getCompletionDataAtPosition(string $file_path, Position $position): ?array
     {
@@ -1914,7 +1914,7 @@ final class Codebase
      * //  returns [Union(TInt), Union(TString)]
      * ```
      *
-     * @return array{Union, Union}
+     * @return strict-array{Union, Union}
      */
     public function getKeyValueParamsForTraversableObject(Atomic $type): array
     {
diff --git a/src/Psalm/Config.php b/src/Psalm/Config.php
index c01a1b3a9..28ca03c8a 100644
--- a/src/Psalm/Config.php
+++ b/src/Psalm/Config.php
@@ -491,7 +491,7 @@ class Config
     public $plugin_paths = [];
 
     /**
-     * @var array<array{class:string,config:?SimpleXMLElement}>
+     * @var array<strict-array{class:string,config:?SimpleXMLElement}>
      */
     private $plugin_classes = [];
 
@@ -581,7 +581,7 @@ class Config
 
     /**
      * @psalm-readonly-allow-private-mutation
-     * @var array{
+     * @var strict-array{
      *     decimal: bool,
      *     dom: bool,
      *     ds: bool,
@@ -1425,7 +1425,7 @@ class Config
         $this->plugin_classes[] = ['class' => $class_name, 'config' => $plugin_config];
     }
 
-    /** @return array<array{class:string, config:?SimpleXMLElement}> */
+    /** @return array<strict-array{class:string, config:?SimpleXMLElement}> */
     public function getPluginClasses(): array
     {
         return $this->plugin_classes;
diff --git a/src/Psalm/Context.php b/src/Psalm/Context.php
index fc9d283c8..86b823f2b 100644
--- a/src/Psalm/Context.php
+++ b/src/Psalm/Context.php
@@ -637,7 +637,7 @@ final class Context
      * @param Clause[]             $clauses
      * @param array<string, bool>  $changed_var_ids
      *
-     * @return array{list<Clause>, list<Clause>}
+     * @return strict-array{list<Clause>, list<Clause>}
      *
      * @psalm-pure
      */
diff --git a/src/Psalm/ErrorBaseline.php b/src/Psalm/ErrorBaseline.php
index 84a804cdf..541354290 100644
--- a/src/Psalm/ErrorBaseline.php
+++ b/src/Psalm/ErrorBaseline.php
@@ -33,7 +33,7 @@ use const PHP_VERSION;
 final class ErrorBaseline
 {
     /**
-     * @param array<string,array<string,array{o:int, s:array<int, string>}>> $existingIssues
+     * @param array<string,array<string,strict-array{o:int, s:array<int, string>}>> $existingIssues
      *
      *
      * @psalm-pure
@@ -46,7 +46,7 @@ final class ErrorBaseline
             $totalIssues += array_reduce(
                 $existingIssue,
                 /**
-                 * @param array{o:int, s:array<int, string>} $existingIssue
+                 * @param strict-array{o:int, s:array<int, string>} $existingIssue
                  */
                 static fn(int $carry, array $existingIssue): int => $carry + $existingIssue['o'],
                 0
@@ -72,7 +72,7 @@ final class ErrorBaseline
     }
 
     /**
-     * @return array<string,array<string,array{o:int, s: list<string>}>>
+     * @return array<string,array<string,strict-array{o:int, s: list<string>}>>
      *
      * @throws ConfigException
      */
@@ -134,7 +134,7 @@ final class ErrorBaseline
     /**
      * @param array<string, list<IssueData>> $issues
      *
-     * @return array<string, array<string, array{o: int, s: list<string>}>>
+     * @return array<string, array<string, strict-array{o: int, s: list<string>}>>
      *
      * @throws ConfigException
      */
@@ -182,7 +182,7 @@ final class ErrorBaseline
     /**
      * @param array<string, list<IssueData>> $issues
      *
-     * @return array<string,array<string,array{o:int, s:array<int, string>}>>
+     * @return array<string,array<string,strict-array{o:int, s:array<int, string>}>>
      */
     private static function countIssueTypesByFile(array $issues): array
     {
@@ -192,9 +192,9 @@ final class ErrorBaseline
         $groupedIssues = array_reduce(
             array_merge(...array_values($issues)),
             /**
-             * @param array<string,array<string,array{o:int, s:array<int, string>}>> $carry
+             * @param array<string,array<string,strict-array{o:int, s:array<int, string>}>> $carry
              *
-             * @return array<string,array<string,array{o:int, s:array<int, string>}>>
+             * @return array<string,array<string,strict-array{o:int, s:array<int, string>}>>
              */
             static function (array $carry, IssueData $issue): array {
                 if ($issue->severity !== Config::REPORT_ERROR) {
@@ -236,7 +236,7 @@ final class ErrorBaseline
     }
 
     /**
-     * @param array<string,array<string,array{o:int, s:array<int, string>}>> $groupedIssues
+     * @param array<string,array<string,strict-array{o:int, s:array<int, string>}>> $groupedIssues
      *
      */
     private static function writeToFile(
diff --git a/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php b/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
index 5d4f4ca2b..98660f8e1 100644
--- a/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
@@ -1818,7 +1818,7 @@ abstract class FunctionLikeAnalyzer extends SourceAnalyzer
     }
 
     /**
-     * @return array{
+     * @return strict-array{
      *        MethodIdentifier|null,
      *        MethodIdentifier|null,
      *        ClassLikeStorage|null,
diff --git a/src/Psalm/Internal/Analyzer/IssueData.php b/src/Psalm/Internal/Analyzer/IssueData.php
index 318afe57f..bc10343f4 100644
--- a/src/Psalm/Internal/Analyzer/IssueData.php
+++ b/src/Psalm/Internal/Analyzer/IssueData.php
@@ -112,7 +112,7 @@ class IssueData
     public $link;
 
     /**
-     * @var ?list<DataFlowNodeData|array{label: string, entry_path_type: string}>
+     * @var ?list<DataFlowNodeData|strict-array{label: string, entry_path_type: string}>
      */
     public $taint_trace;
 
@@ -128,7 +128,7 @@ class IssueData
     public $dupe_key;
 
     /**
-     * @param ?list<DataFlowNodeData|array{label: string, entry_path_type: string}> $taint_trace
+     * @param ?list<DataFlowNodeData|strict-array{label: string, entry_path_type: string}> $taint_trace
      * @param ?list<DataFlowNodeData> $other_references
      */
     public function __construct(
diff --git a/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php
index 092e06cfa..e8a03340d 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php
@@ -470,7 +470,18 @@ class ForeachAnalyzer
                 || $iterator_atomic_type instanceof TList
             ) {
                 if ($iterator_atomic_type instanceof TKeyedArray) {
-                    if (!$iterator_atomic_type->sealed) {
+                    if ($iterator_atomic_type->sealed) {
+                        $all_possibly_undefined = true;
+                        foreach ($iterator_atomic_type->properties as $prop) {
+                            if (!$prop->possibly_undefined) {
+                                $all_possibly_undefined = false;
+                                break;
+                            }
+                        }
+                        if ($all_possibly_undefined) {
+                            $always_non_empty_array = false;
+                        }
+                    } else {
                         $always_non_empty_array = false;
                     }
                     $iterator_atomic_type = $iterator_atomic_type->getGenericArrayType();
diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/Assignment/ArrayAssignmentAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/Assignment/ArrayAssignmentAnalyzer.php
index fe4c759ec..acd3ca26f 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/Assignment/ArrayAssignmentAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/Assignment/ArrayAssignmentAnalyzer.php
@@ -997,7 +997,7 @@ class ArrayAssignmentAnalyzer
     }
 
     /**
-     * @return array{TLiteralInt|TLiteralString|null, string, bool}
+     * @return strict-array{TLiteralInt|TLiteralString|null, string, bool}
      */
     private static function getArrayAssignmentOffsetType(
         StatementsAnalyzer $statements_analyzer,
diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/Call/ArgumentMapPopulator.php b/src/Psalm/Internal/Analyzer/Statements/Expression/Call/ArgumentMapPopulator.php
index ff8c2058f..751b64139 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/Call/ArgumentMapPopulator.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/Call/ArgumentMapPopulator.php
@@ -66,7 +66,7 @@ class ArgumentMapPopulator
         }
 
         // Record ranges of the source code that need to be tokenized to find commas
-        /** @var array{0: int, 1: int}[] $ranges */
+        /** @var strict-array{0: int, 1: int}[] $ranges */
         $ranges = [];
 
         // Add range between opening paren and first argument
diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/Call/Method/AtomicMethodCallAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/Call/Method/AtomicMethodCallAnalyzer.php
index aabb7498b..e313124f1 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/Call/Method/AtomicMethodCallAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/Call/Method/AtomicMethodCallAnalyzer.php
@@ -513,7 +513,7 @@ class AtomicMethodCallAnalyzer extends CallAnalyzer
      * @param  TNamedObject|TTemplateParam $lhs_type_part
      * @param   array<string, Atomic> $intersection_types
      *
-     * @return  array{?Union, array<string>}
+     * @return  strict-array{?Union, array<string>}
      */
     private static function getIntersectionReturnType(
         StatementsAnalyzer $statements_analyzer,
@@ -707,7 +707,7 @@ class AtomicMethodCallAnalyzer extends CallAnalyzer
 
     /**
      * @param lowercase-string $method_name_lc
-     * @return array{TNamedObject, ClassLikeStorage, bool, MethodIdentifier, string}
+     * @return strict-array{TNamedObject, ClassLikeStorage, bool, MethodIdentifier, string}
      */
     private static function handleTemplatedMixins(
         ClassLikeStorage $class_storage,
@@ -795,7 +795,7 @@ class AtomicMethodCallAnalyzer extends CallAnalyzer
 
     /**
      * @param lowercase-string $method_name_lc
-     * @return array{TNamedObject, ClassLikeStorage, bool, MethodIdentifier, string}
+     * @return strict-array{TNamedObject, ClassLikeStorage, bool, MethodIdentifier, string}
      */
     private static function handleRegularMixins(
         ClassLikeStorage $class_storage,
diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/Call/Method/MissingMethodCallHandler.php b/src/Psalm/Internal/Analyzer/Statements/Expression/Call/Method/MissingMethodCallHandler.php
index 1982bcf70..7d061c3f6 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/Call/Method/MissingMethodCallHandler.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/Call/Method/MissingMethodCallHandler.php
@@ -414,7 +414,7 @@ class MissingMethodCallHandler
      * @param ClassLikeStorage $static_class_storage The called class
      * @param lowercase-string $method_name_lc
      *
-     * @return array{MethodStorage, ClassLikeStorage}
+     * @return strict-array{MethodStorage, ClassLikeStorage}
      */
     private static function findPseudoMethodAndClassStorages(
         Codebase $codebase,
diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/Call/StaticMethod/AtomicStaticCallAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/Call/StaticMethod/AtomicStaticCallAnalyzer.php
index e6474f9ba..181f1c579 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/Call/StaticMethod/AtomicStaticCallAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/Call/StaticMethod/AtomicStaticCallAnalyzer.php
@@ -1083,7 +1083,7 @@ class AtomicStaticCallAnalyzer
      * @param ClassLikeStorage $static_class_storage The called class
      * @param lowercase-string $method_name_lc
      *
-     * @return array{MethodStorage, ClassLikeStorage}|null
+     * @return strict-array{MethodStorage, ClassLikeStorage}|null
      */
     private static function findPseudoMethodAndClassStorages(
         Codebase $codebase,
diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/ClassConstAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/ClassConstAnalyzer.php
index 5e8db7bae..7f0acae29 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/ClassConstAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/ClassConstAnalyzer.php
@@ -811,7 +811,7 @@ class ClassConstAnalyzer
     /**
      * Get the const storage from the parent or interface that this class is overriding.
      *
-     * @return array{ClassLikeStorage, ClassConstantStorage}|null
+     * @return strict-array{ClassLikeStorage, ClassConstantStorage}|null
      */
     private static function getOverriddenConstant(
         ClassLikeStorage $class_storage,
diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/Fetch/VariableFetchAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/Fetch/VariableFetchAnalyzer.php
index ffe867e5a..bcfab646a 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/Fetch/VariableFetchAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/Fetch/VariableFetchAnalyzer.php
@@ -23,6 +23,7 @@ use Psalm\IssueBuffer;
 use Psalm\Type;
 use Psalm\Type\Atomic\TArray;
 use Psalm\Type\Atomic\TBool;
+use Psalm\Type\Atomic\TFloat;
 use Psalm\Type\Atomic\TInt;
 use Psalm\Type\Atomic\TIntRange;
 use Psalm\Type\Atomic\TKeyedArray;
@@ -170,7 +171,7 @@ class VariableFetchAnalyzer
                 $type = $context->vars_in_scope[$var_name];
 
                 self::taintVariable($statements_analyzer, $var_name, $type, $stmt);
-                
+
                 $context->vars_in_scope[$var_name] = $type;
                 $statements_analyzer->node_data->setType($stmt, $type);
 
@@ -583,41 +584,37 @@ class VariableFetchAnalyzer
         if (isset(self::$globalCache[$var_id])) {
             return self::$globalCache[$var_id];
         }
-        
+
         return Type::getMixed();
     }
 
     /**
-     * @psalm-suppress InaccessibleProperty Always acting on new types
-     *
      * @param value-of<self::SUPER_GLOBALS>|'$argv'|'$argc' $var_id
      */
     private static function getGlobalTypeInner(string $var_id, bool $files_full_path = false): Union
     {
         if ($var_id === '$argv') {
             // only in CLI, null otherwise
-            $argv_nullable = new Union([
+            return new Union([
                 new TNonEmptyList(Type::getString()),
                 new TNull()
+            ], [
+                'ignore_nullable_issues' => true
             ]);
             // use TNull explicitly instead of this
             // as it will cause weird errors due to ignore_nullable_issues true
             // e.g. InvalidPropertyAssignmentValue
             // $this->argv 'list<string>' cannot be assigned type 'non-empty-list<string>'
-            // $argv_nullable->possibly_undefined = true;
-            $argv_nullable->ignore_nullable_issues = true;
-            return $argv_nullable;
         }
 
         if ($var_id === '$argc') {
             // only in CLI, null otherwise
-            $argc_nullable = new Union([
+            return new Union([
                 new TIntRange(1, null),
                 new TNull()
+            ], [
+                'ignore_nullable_issues' => true
             ]);
-            // $argc_nullable->possibly_undefined = true;
-            $argc_nullable->ignore_nullable_issues = true;
-            return $argc_nullable;
         }
 
         if ($var_id === '$http_response_header') {
@@ -672,118 +669,117 @@ class VariableFetchAnalyzer
         }
 
         if ($var_id === '$_SERVER' || $var_id === '$_ENV') {
-            $string_helper = Type::getString();
-            $string_helper->possibly_undefined = true;
-
-            $non_empty_string_helper = Type::getNonEmptyString();
-            $non_empty_string_helper->possibly_undefined = true;
+            $string_helper = new Union([new TString()], ['possibly_undefined' => true]);
+            $non_empty_string_helper = new Union([new TNonEmptyString()], ['possibly_undefined' => true]);
 
             $argv_helper = new Union([
                 new TNonEmptyList(Type::getString())
-            ]);
-            $argv_helper->possibly_undefined = true;
+            ], ['possibly_undefined' => true]);
 
             $argc_helper = new Union([
                 new TIntRange(1, null)
-            ]);
-            $argc_helper->possibly_undefined = true;
+            ], ['possibly_undefined' => true]);
 
             $request_time_helper = new Union([
                 new TIntRange(time(), null)
-            ]);
-            $request_time_helper->possibly_undefined = true;
-
-            $request_time_float_helper = Type::getFloat();
-            $request_time_float_helper->possibly_undefined = true;
+            ], ['possibly_undefined' => true]);
+
+            $request_time_float_helper = new Union([
+                new TFloat()
+            ], ['possibly_undefined' => true]);
+
+            $bool_string_helper = new Union([new TBool(), new TString()], ['possibly_undefined' => true]);
+
+            $arr = [
+                // https://www.php.net/manual/en/reserved.variables.server.php
+                'PHP_SELF'             => $non_empty_string_helper,
+                'GATEWAY_INTERFACE'    => $non_empty_string_helper,
+                'SERVER_ADDR'          => $non_empty_string_helper,
+                'SERVER_NAME'          => $non_empty_string_helper,
+                'SERVER_SOFTWARE'      => $non_empty_string_helper,
+                'SERVER_PROTOCOL'      => $non_empty_string_helper,
+                'REQUEST_METHOD'       => $non_empty_string_helper,
+                'REQUEST_TIME'         => $request_time_helper,
+                'REQUEST_TIME_FLOAT'   => $request_time_float_helper,
+                'QUERY_STRING'         => $string_helper,
+                'DOCUMENT_ROOT'        => $non_empty_string_helper,
+                'HTTP_ACCEPT'          => $non_empty_string_helper,
+                'HTTP_ACCEPT_CHARSET'  => $non_empty_string_helper,
+                'HTTP_ACCEPT_ENCODING' => $non_empty_string_helper,
+                'HTTP_ACCEPT_LANGUAGE' => $non_empty_string_helper,
+                'HTTP_CONNECTION'      => $non_empty_string_helper,
+                'HTTP_HOST'            => $non_empty_string_helper,
+                'HTTP_REFERER'         => $non_empty_string_helper,
+                'HTTP_USER_AGENT'      => $non_empty_string_helper,
+                'HTTPS'                => $string_helper,
+                'REMOTE_ADDR'          => $non_empty_string_helper,
+                'REMOTE_HOST'          => $non_empty_string_helper,
+                'REMOTE_PORT'          => $string_helper,
+                'REMOTE_USER'          => $non_empty_string_helper,
+                'REDIRECT_REMOTE_USER' => $non_empty_string_helper,
+                'SCRIPT_FILENAME'      => $non_empty_string_helper,
+                'SERVER_ADMIN'         => $non_empty_string_helper,
+                'SERVER_PORT'          => $non_empty_string_helper,
+                'SERVER_SIGNATURE'     => $non_empty_string_helper,
+                'PATH_TRANSLATED'      => $non_empty_string_helper,
+                'SCRIPT_NAME'          => $non_empty_string_helper,
+                'REQUEST_URI'          => $non_empty_string_helper,
+                'PHP_AUTH_DIGEST'      => $non_empty_string_helper,
+                'PHP_AUTH_USER'        => $non_empty_string_helper,
+                'PHP_AUTH_PW'          => $non_empty_string_helper,
+                'AUTH_TYPE'            => $non_empty_string_helper,
+                'PATH_INFO'            => $non_empty_string_helper,
+                'ORIG_PATH_INFO'       => $non_empty_string_helper,
+                // misc from RFC not included above already http://www.faqs.org/rfcs/rfc3875.html
+                'CONTENT_LENGTH'       => $string_helper,
+                'CONTENT_TYPE'         => $string_helper,
+                // common, misc stuff
+                'FCGI_ROLE'            => $non_empty_string_helper,
+                'HOME'                 => $non_empty_string_helper,
+                'HTTP_CACHE_CONTROL'   => $non_empty_string_helper,
+                'HTTP_COOKIE'          => $non_empty_string_helper,
+                'HTTP_PRIORITY'        => $non_empty_string_helper,
+                'PATH'                 => $non_empty_string_helper,
+                'REDIRECT_STATUS'      => $non_empty_string_helper,
+                'REQUEST_SCHEME'       => $non_empty_string_helper,
+                'USER'                 => $non_empty_string_helper,
+                // common, misc headers
+                'HTTP_UPGRADE_INSECURE_REQUESTS' => $non_empty_string_helper,
+                'HTTP_X_FORWARDED_PROTO'         => $non_empty_string_helper,
+                'HTTP_CLIENT_IP'                 => $non_empty_string_helper,
+                'HTTP_X_REAL_IP'                 => $non_empty_string_helper,
+                'HTTP_X_FORWARDED_FOR'           => $non_empty_string_helper,
+                'HTTP_CF_CONNECTING_IP'          => $non_empty_string_helper,
+                'HTTP_CF_IPCOUNTRY'              => $non_empty_string_helper,
+                'HTTP_CF_VISITOR'                => $non_empty_string_helper,
+                'HTTP_CDN_LOOP'                  => $non_empty_string_helper,
+                // common, misc browser headers
+                'HTTP_DNT'                => $non_empty_string_helper,
+                'HTTP_SEC_FETCH_DEST'     => $non_empty_string_helper,
+                'HTTP_SEC_FETCH_USER'     => $non_empty_string_helper,
+                'HTTP_SEC_FETCH_MODE'     => $non_empty_string_helper,
+                'HTTP_SEC_FETCH_SITE'     => $non_empty_string_helper,
+                'HTTP_SEC_CH_UA_PLATFORM' => $non_empty_string_helper,
+                'HTTP_SEC_CH_UA_MOBILE'   => $non_empty_string_helper,
+                'HTTP_SEC_CH_UA'          => $non_empty_string_helper,
+                // phpunit
+                'APP_DEBUG' => $bool_string_helper,
+                'APP_ENV'   => $string_helper,
+            ];
 
-            $bool_string_helper = new Union([new TBool(), new TString()]);
-            $bool_string_helper->possibly_undefined = true;
+            if ($var_id === '$_SERVER') {
+                $arr['argv'] = $argv_helper;
+                $arr['argc'] = $argc_helper;
+            }
 
             $detailed_type = new TKeyedArray(
-                [
-                    // https://www.php.net/manual/en/reserved.variables.server.php
-                    'PHP_SELF'             => $non_empty_string_helper,
-                    'argv'                 => $argv_helper,
-                    'argc'                 => $argc_helper,
-                    'GATEWAY_INTERFACE'    => $non_empty_string_helper,
-                    'SERVER_ADDR'          => $non_empty_string_helper,
-                    'SERVER_NAME'          => $non_empty_string_helper,
-                    'SERVER_SOFTWARE'      => $non_empty_string_helper,
-                    'SERVER_PROTOCOL'      => $non_empty_string_helper,
-                    'REQUEST_METHOD'       => $non_empty_string_helper,
-                    'REQUEST_TIME'         => $request_time_helper,
-                    'REQUEST_TIME_FLOAT'   => $request_time_float_helper,
-                    'QUERY_STRING'         => $string_helper,
-                    'DOCUMENT_ROOT'        => $non_empty_string_helper,
-                    'HTTP_ACCEPT'          => $non_empty_string_helper,
-                    'HTTP_ACCEPT_CHARSET'  => $non_empty_string_helper,
-                    'HTTP_ACCEPT_ENCODING' => $non_empty_string_helper,
-                    'HTTP_ACCEPT_LANGUAGE' => $non_empty_string_helper,
-                    'HTTP_CONNECTION'      => $non_empty_string_helper,
-                    'HTTP_HOST'            => $non_empty_string_helper,
-                    'HTTP_REFERER'         => $non_empty_string_helper,
-                    'HTTP_USER_AGENT'      => $non_empty_string_helper,
-                    'HTTPS'                => $string_helper,
-                    'REMOTE_ADDR'          => $non_empty_string_helper,
-                    'REMOTE_HOST'          => $non_empty_string_helper,
-                    'REMOTE_PORT'          => $string_helper,
-                    'REMOTE_USER'          => $non_empty_string_helper,
-                    'REDIRECT_REMOTE_USER' => $non_empty_string_helper,
-                    'SCRIPT_FILENAME'      => $non_empty_string_helper,
-                    'SERVER_ADMIN'         => $non_empty_string_helper,
-                    'SERVER_PORT'          => $non_empty_string_helper,
-                    'SERVER_SIGNATURE'     => $non_empty_string_helper,
-                    'PATH_TRANSLATED'      => $non_empty_string_helper,
-                    'SCRIPT_NAME'          => $non_empty_string_helper,
-                    'REQUEST_URI'          => $non_empty_string_helper,
-                    'PHP_AUTH_DIGEST'      => $non_empty_string_helper,
-                    'PHP_AUTH_USER'        => $non_empty_string_helper,
-                    'PHP_AUTH_PW'          => $non_empty_string_helper,
-                    'AUTH_TYPE'            => $non_empty_string_helper,
-                    'PATH_INFO'            => $non_empty_string_helper,
-                    'ORIG_PATH_INFO'       => $non_empty_string_helper,
-                    // misc from RFC not included above already http://www.faqs.org/rfcs/rfc3875.html
-                    'CONTENT_LENGTH'       => $string_helper,
-                    'CONTENT_TYPE'         => $string_helper,
-                    // common, misc stuff
-                    'FCGI_ROLE'            => $non_empty_string_helper,
-                    'HOME'                 => $non_empty_string_helper,
-                    'HTTP_CACHE_CONTROL'   => $non_empty_string_helper,
-                    'HTTP_COOKIE'          => $non_empty_string_helper,
-                    'HTTP_PRIORITY'        => $non_empty_string_helper,
-                    'PATH'                 => $non_empty_string_helper,
-                    'REDIRECT_STATUS'      => $non_empty_string_helper,
-                    'REQUEST_SCHEME'       => $non_empty_string_helper,
-                    'USER'                 => $non_empty_string_helper,
-                    // common, misc headers
-                    'HTTP_UPGRADE_INSECURE_REQUESTS' => $non_empty_string_helper,
-                    'HTTP_X_FORWARDED_PROTO'         => $non_empty_string_helper,
-                    'HTTP_CLIENT_IP'                 => $non_empty_string_helper,
-                    'HTTP_X_REAL_IP'                 => $non_empty_string_helper,
-                    'HTTP_X_FORWARDED_FOR'           => $non_empty_string_helper,
-                    'HTTP_CF_CONNECTING_IP'          => $non_empty_string_helper,
-                    'HTTP_CF_IPCOUNTRY'              => $non_empty_string_helper,
-                    'HTTP_CF_VISITOR'                => $non_empty_string_helper,
-                    'HTTP_CDN_LOOP'                  => $non_empty_string_helper,
-                    // common, misc browser headers
-                    'HTTP_DNT'                => $non_empty_string_helper,
-                    'HTTP_SEC_FETCH_DEST'     => $non_empty_string_helper,
-                    'HTTP_SEC_FETCH_USER'     => $non_empty_string_helper,
-                    'HTTP_SEC_FETCH_MODE'     => $non_empty_string_helper,
-                    'HTTP_SEC_FETCH_SITE'     => $non_empty_string_helper,
-                    'HTTP_SEC_CH_UA_PLATFORM' => $non_empty_string_helper,
-                    'HTTP_SEC_CH_UA_MOBILE'   => $non_empty_string_helper,
-                    'HTTP_SEC_CH_UA'          => $non_empty_string_helper,
-                    // phpunit
-                    'APP_DEBUG' => $bool_string_helper,
-                    'APP_ENV'   => $string_helper,
-                ],
+                $arr,
                 null,
                 false,
                 Type::getNonEmptyString(),
                 Type::getString()
             );
-            
+
             return new Union([$detailed_type]);
         }
 
@@ -800,7 +796,7 @@ class VariableFetchAnalyzer
             if ($files_full_path) {
                 $values['full_path'] = $str;
             }
-            
+
             $type = new Union([new TKeyedArray($values)]);
             $parent = new TArray([Type::getNonEmptyString(), $type]);
 
@@ -808,15 +804,13 @@ class VariableFetchAnalyzer
         }
 
         // $var_id === $_SESSION
-        
+
         // keys must be string
-        $type = new Union([
+        return new Union([
             new TArray([
                 Type::getNonEmptyString(),
                 Type::getMixed(),
             ])
-        ]);
-        $type->possibly_undefined = true;
-        return $type;
+        ], ['possibly_undefined' => true]);
     }
 }
diff --git a/src/Psalm/Internal/Analyzer/Statements/UnusedAssignmentRemover.php b/src/Psalm/Internal/Analyzer/Statements/UnusedAssignmentRemover.php
index 3f6e50e81..efc9e3e78 100644
--- a/src/Psalm/Internal/Analyzer/Statements/UnusedAssignmentRemover.php
+++ b/src/Psalm/Internal/Analyzer/Statements/UnusedAssignmentRemover.php
@@ -230,7 +230,7 @@ class UnusedAssignmentRemover
 
     /**
      * @param  array<PhpParser\Node\Stmt>   $stmts
-     * @return array{
+     * @return strict-array{
      *          0: PhpParser\Node\Stmt|null,
      *          1: PhpParser\Node\Expr\Assign|PhpParser\Node\Expr\AssignOp|PhpParser\Node\Expr\AssignRef|null
      *          }
@@ -320,7 +320,7 @@ class UnusedAssignmentRemover
     }
 
     /**
-     * @return array{
+     * @return strict-array{
      *          0: PhpParser\Node\Expr\Assign|PhpParser\Node\Expr\AssignOp|PhpParser\Node\Expr\AssignRef|null,
      *          1: int
      *          }
diff --git a/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php b/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php
index 8aba70acd..13e5eb627 100644
--- a/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php
@@ -132,7 +132,7 @@ class StatementsAnalyzer extends SourceAnalyzer
     private $function_analyzers = [];
 
     /**
-     * @var array<string, array{0: string, 1: CodeLocation}>
+     * @var array<string, strict-array{0: string, 1: CodeLocation}>
      */
     private $unused_var_locations = [];
 
@@ -981,7 +981,7 @@ class StatementsAnalyzer extends SourceAnalyzer
     }
 
     /**
-     * @return array<string, array{0: string, 1: CodeLocation}>
+     * @return array<string, strict-array{0: string, 1: CodeLocation}>
      */
     public function getUnusedVarLocations(): array
     {
diff --git a/src/Psalm/Internal/Cli/Psalm.php b/src/Psalm/Internal/Cli/Psalm.php
index 5fa057c06..6d21bd9b1 100644
--- a/src/Psalm/Internal/Cli/Psalm.php
+++ b/src/Psalm/Internal/Cli/Psalm.php
@@ -638,8 +638,8 @@ final class Psalm
     }
 
     /**
-     * @param array{set-baseline:string} $options
-     * @return array<string,array<string,array{o:int, s: list<string>}>>
+     * @param array{"set-baseline": string} $options
+     * @return array<string,array<string,strict-array{o:int, s: list<string>}>>
      */
     private static function generateBaseline(
         array $options,
@@ -679,7 +679,7 @@ final class Psalm
     }
 
     /**
-     * @return array<string,array<string,array{o:int, s: list<string>}>>
+     * @return array<string,array<string,strict-array{o:int, s: list<string>}>>
      */
     private static function updateBaseline(array $options, Config $config): array
     {
@@ -978,7 +978,7 @@ final class Psalm
 
     /**
      * @param array<int, string> $args
-     * @return array{Config,?string}
+     * @return strict-array{Config,?string}
      */
     private static function initConfig(
         string $current_dir,
@@ -1015,7 +1015,7 @@ final class Psalm
     }
 
     /**
-     * @return array<string,array<string,array{o:int, s: list<string>}>>
+     * @return array<string,array<string,strict-array{o:int, s: list<string>}>>
      */
     private static function initBaseline(
         array $options,
diff --git a/src/Psalm/Internal/Codebase/Analyzer.php b/src/Psalm/Internal/Codebase/Analyzer.php
index 1239d28ed..247d7ac8b 100644
--- a/src/Psalm/Internal/Codebase/Analyzer.php
+++ b/src/Psalm/Internal/Codebase/Analyzer.php
@@ -5,8 +5,8 @@ namespace Psalm\Internal\Codebase;
 use Closure;
 use InvalidArgumentException;
 use PhpParser;
-use Psalm\CodeLocation;
 use Psalm\Codebase;
+use Psalm\CodeLocation;
 use Psalm\Config;
 use Psalm\FileManipulation;
 use Psalm\Internal\Analyzer\FileAnalyzer;
@@ -49,15 +49,15 @@ use const PATHINFO_EXTENSION;
 use const PHP_INT_MAX;
 
 /**
- * @psalm-type  TaggedCodeType = array<int, array{0: int, 1: non-empty-string}>
+ * @psalm-type  TaggedCodeType = array<int, strict-array{0: int, 1: non-empty-string}>
  *
- * @psalm-type  FileMapType = array{
+ * @psalm-type  FileMapType = strict-array{
  *      0: TaggedCodeType,
  *      1: TaggedCodeType,
- *      2: array<int, array{0: int, 1: non-empty-string, 2: int}>
+ *      2: array<int, strict-array{0: int, 1: non-empty-string, 2: int}>
  * }
  *
- * @psalm-type  WorkerData = array{
+ * @psalm-type  WorkerData = strict-array{
  *      issues: array<string, list<IssueData>>,
  *      fixable_issue_counts: array<string, int>,
  *      nonmethod_references_to_classes: array<string, array<string,bool>>,
@@ -66,7 +66,7 @@ use const PHP_INT_MAX;
  *      file_references_to_class_properties: array<string, array<string,bool>>,
  *      file_references_to_method_returns: array<string, array<string,bool>>,
  *      file_references_to_missing_class_members: array<string, array<string,bool>>,
- *      mixed_counts: array<string, array{0: int, 1: int}>,
+ *      mixed_counts: array<string, strict-array{0: int, 1: int}>,
  *      mixed_member_names: array<string, array<string, bool>>,
  *      function_timings: array<string, float>,
  *      file_manipulations: array<string, FileManipulation[]>,
@@ -120,7 +120,7 @@ class Analyzer
     /**
      * Used to store counts of mixed vs non-mixed variables
      *
-     * @var array<string, array{0: int, 1: int}>
+     * @var array<string, strict-array{0: int, 1: int}>
      */
     private $mixed_counts = [];
 
@@ -176,17 +176,17 @@ class Analyzer
     private $existing_issues = [];
 
     /**
-     * @var array<string, array<int, array{0: int, 1: non-empty-string}>>
+     * @var array<string, array<int, strict-array{0: int, 1: non-empty-string}>>
      */
     private $reference_map = [];
 
     /**
-     * @var array<string, array<int, array{0: int, 1: non-empty-string}>>
+     * @var array<string, array<int, strict-array{0: int, 1: non-empty-string}>>
      */
     private $type_map = [];
 
     /**
-     * @var array<string, array<int, array{0: int, 1: non-empty-string, 2: int}>>
+     * @var array<string, array<int, strict-array{0: int, 1: non-empty-string, 2: int}>>
      */
     private $argument_map = [];
 
@@ -911,8 +911,8 @@ class Analyzer
     }
 
     /**
-     * @param array<string, array<int, array{int, int, int, int}>> $diff_map
-     * @param array<string, array<int, array{int, int}>> $deletion_ranges
+     * @param array<string, array<int, strict-array{int, int, int, int}>> $diff_map
+     * @param array<string, array<int, strict-array{int, int}>> $deletion_ranges
      */
     public function shiftFileOffsets(array $diff_map, array $deletion_ranges): void
     {
@@ -1103,7 +1103,7 @@ class Analyzer
     }
 
     /**
-     * @return array{0:int, 1:int}
+     * @return strict-array{0:int, 1:int}
      */
     public function getMixedCountsForFile(string $file_path): array
     {
@@ -1115,7 +1115,7 @@ class Analyzer
     }
 
     /**
-     * @param  array{0:int, 1:int} $mixed_counts
+     * @param  strict-array{0:int, 1:int} $mixed_counts
      *
      */
     public function setMixedCountsForFile(string $file_path, array $mixed_counts): void
@@ -1167,7 +1167,7 @@ class Analyzer
     }
 
     /**
-     * @return array<string, array{0: int, 1: int}>
+     * @return array<string, strict-array{0: int, 1: int}>
      */
     public function getMixedCounts(): array
     {
@@ -1256,7 +1256,7 @@ class Analyzer
     }
 
     /**
-     * @return array{int, int}
+     * @return strict-array{int, int}
      */
     public function getTotalTypeCoverage(Codebase $codebase): array
     {
diff --git a/src/Psalm/Internal/Codebase/ClassLikes.php b/src/Psalm/Internal/Codebase/ClassLikes.php
index 664605ff5..8da40a3c7 100644
--- a/src/Psalm/Internal/Codebase/ClassLikes.php
+++ b/src/Psalm/Internal/Codebase/ClassLikes.php
@@ -2252,7 +2252,7 @@ class ClassLikes
     }
 
     /**
-     * @return array{
+     * @return strict-array{
      *     array<lowercase-string, bool>,
      *     array<lowercase-string, bool>,
      *     array<lowercase-string, bool>,
@@ -2280,7 +2280,7 @@ class ClassLikes
     }
 
     /**
-     * @param array{
+     * @param strict-array{
      *     0: array<lowercase-string, bool>,
      *     1: array<lowercase-string, bool>,
      *     2: array<lowercase-string, bool>,
diff --git a/src/Psalm/Internal/Codebase/DataFlowGraph.php b/src/Psalm/Internal/Codebase/DataFlowGraph.php
index 5f66a1955..e2bfc4e8c 100644
--- a/src/Psalm/Internal/Codebase/DataFlowGraph.php
+++ b/src/Psalm/Internal/Codebase/DataFlowGraph.php
@@ -109,7 +109,7 @@ abstract class DataFlowGraph
     }
 
     /**
-     * @return array{int, int, int, float}
+     * @return strict-array{int, int, int, float}
      */
     public function getEdgeStats(): array
     {
diff --git a/src/Psalm/Internal/Codebase/InternalCallMapHandler.php b/src/Psalm/Internal/Codebase/InternalCallMapHandler.php
index 3222f9e68..1c4083e6e 100644
--- a/src/Psalm/Internal/Codebase/InternalCallMapHandler.php
+++ b/src/Psalm/Internal/Codebase/InternalCallMapHandler.php
@@ -392,9 +392,9 @@ class InternalCallMapHandler
                     continue;
                 }
                 /**
-                 * @var array{
+                 * @var strict-array{
                  *     added: array<string, array<int|string, string>>,
-                 *     changed: array<string, array{
+                 *     changed: array<string, strict-array{
                  *         old: array<int|string, string>,
                  *         new: array<int|string, string>
                  *     }>,
diff --git a/src/Psalm/Internal/Codebase/Scanner.php b/src/Psalm/Internal/Codebase/Scanner.php
index ab2d7742a..b8c74bdd6 100644
--- a/src/Psalm/Internal/Codebase/Scanner.php
+++ b/src/Psalm/Internal/Codebase/Scanner.php
@@ -4,6 +4,7 @@ namespace Psalm\Internal\Codebase;
 
 use Closure;
 use Psalm\Codebase;
+use Psalm\CodeLocation;
 use Psalm\Config;
 use Psalm\Internal\Analyzer\IssueData;
 use Psalm\Internal\Analyzer\ProjectAnalyzer;
@@ -40,7 +41,7 @@ use const DIRECTORY_SEPARATOR;
 use const PHP_EOL;
 
 /**
- * @psalm-type  ThreadData = array{
+ * @psalm-type  ThreadData = strict-array{
  *     array<string, string>,
  *     array<string, string>,
  *     array<string, string>,
@@ -52,8 +53,8 @@ use const PHP_EOL;
  *     array<string, bool>
  * }
  *
- * @psalm-type  PoolData = array{
- *     classlikes_data:array{
+ * @psalm-type  PoolData = strict-array{
+ *     classlikes_data:strict-array{
  *         array<lowercase-string, bool>,
  *         array<lowercase-string, bool>,
  *         array<lowercase-string, bool>,
@@ -68,8 +69,8 @@ use const PHP_EOL;
  *     issues:array<string, list<IssueData>>,
  *     changed_members:array<string, array<string, bool>>,
  *     unchanged_signature_members:array<string, array<string, bool>>,
- *     diff_map:array<string, array<int, array{int, int, int, int}>>,
- *     deletion_ranges:array<string, array<int, array{int, int}>>,
+ *     diff_map:array<string, array<int, strict-array{int, int, int, int}>>,
+ *     deletion_ranges:array<string, array<int, strict-array{int, int}>>,
  *     errors:array<string, bool>,
  *     classlike_storage:array<string, ClassLikeStorage>,
  *     file_storage:array<lowercase-string, FileStorage>,
diff --git a/src/Psalm/Internal/Codebase/TaintFlowGraph.php b/src/Psalm/Internal/Codebase/TaintFlowGraph.php
index bebf80721..581538b8a 100644
--- a/src/Psalm/Internal/Codebase/TaintFlowGraph.php
+++ b/src/Psalm/Internal/Codebase/TaintFlowGraph.php
@@ -172,7 +172,7 @@ class TaintFlowGraph extends DataFlowGraph
     }
 
     /**
-     * @return list<array{location: ?CodeLocation, label: string, entry_path_type: string}>
+     * @return list<strict-array{location: ?CodeLocation, label: string, entry_path_type: string}>
      */
     public function getIssueTrace(DataFlowNode $source): array
     {
diff --git a/src/Psalm/Internal/Diff/AstDiffer.php b/src/Psalm/Internal/Diff/AstDiffer.php
index 7ab61cee5..1c9b6761b 100644
--- a/src/Psalm/Internal/Diff/AstDiffer.php
+++ b/src/Psalm/Internal/Diff/AstDiffer.php
@@ -28,7 +28,7 @@ class AstDiffer
      * @param array<int, Stmt> $a
      * @param array<int, Stmt> $b
      *
-     * @return array{0:non-empty-list<array<int, int>>, 1: int, 2: int, 3: array<int, bool>}
+     * @return strict-array{0:non-empty-list<array<int, int>>, 1: int, 2: int, 3: array<int, bool>}
      */
     protected static function calculateTrace(
         Closure $is_equal,
diff --git a/src/Psalm/Internal/Diff/ClassStatementsDiffer.php b/src/Psalm/Internal/Diff/ClassStatementsDiffer.php
index ccc6e9478..44f0c32ee 100644
--- a/src/Psalm/Internal/Diff/ClassStatementsDiffer.php
+++ b/src/Psalm/Internal/Diff/ClassStatementsDiffer.php
@@ -22,12 +22,12 @@ class ClassStatementsDiffer extends AstDiffer
      * @param array<int, PhpParser\Node\Stmt> $a
      * @param array<int, PhpParser\Node\Stmt> $b
      *
-     * @return array{
+     * @return strict-array{
      *      0: list<string>,
      *      1: list<string>,
      *      2: list<string>,
-     *      3: array<int, array{int, int, int, int}>,
-     *      4: list<array{int, int}>
+     *      3: array<int, strict-array{int, int, int, int}>,
+     *      4: list<strict-array{int, int}>
      * }
      */
     public static function diff(string $name, array $a, array $b, string $a_code, string $b_code): array
@@ -245,7 +245,7 @@ class ClassStatementsDiffer extends AstDiffer
             }
         }
 
-        /** @var array<int, array{int, int, int, int}> $diff_map */
+        /** @var array<int, strict-array{int, int, int, int}> $diff_map */
         return [$keep, $keep_signature, $add_or_delete, $diff_map, $deletion_ranges];
     }
 }
diff --git a/src/Psalm/Internal/Diff/FileDiffer.php b/src/Psalm/Internal/Diff/FileDiffer.php
index 675ce5c2c..f35e1f8ff 100644
--- a/src/Psalm/Internal/Diff/FileDiffer.php
+++ b/src/Psalm/Internal/Diff/FileDiffer.php
@@ -29,7 +29,7 @@ class FileDiffer
      * @param list<string>    $a
      * @param list<string>    $b
      *
-     * @return array{0:non-empty-list<array<int, int>>, 1: int, 2: int}
+     * @return strict-array{0:non-empty-list<array<int, int>>, 1: int, 2: int}
      *
      * @psalm-pure
      */
@@ -122,7 +122,7 @@ class FileDiffer
     }
 
     /**
-     * @return array<int, array{0: int, 1: int, 2: int, 3: int, 4: int, 5: string}>
+     * @return array<int, strict-array{0: int, 1: int, 2: int, 3: int, 4: int, 5: string}>
      *
      * @psalm-pure
      */
@@ -140,7 +140,7 @@ class FileDiffer
 
         $last_diff_type = null;
 
-        /** @var array{0:int, 1:int, 2:int, 3:int, 4:int, 5:string}|null */
+        /** @var strict-array{0:int, 1:int, 2:int, 3:int, 4:int, 5:string}|null */
         $last_change = null;
 
         $changes = [];
diff --git a/src/Psalm/Internal/Diff/FileStatementsDiffer.php b/src/Psalm/Internal/Diff/FileStatementsDiffer.php
index cb90a339c..17f2bff0c 100644
--- a/src/Psalm/Internal/Diff/FileStatementsDiffer.php
+++ b/src/Psalm/Internal/Diff/FileStatementsDiffer.php
@@ -18,12 +18,12 @@ class FileStatementsDiffer extends AstDiffer
      * @param list<PhpParser\Node\Stmt> $a
      * @param list<PhpParser\Node\Stmt> $b
      *
-     * @return array{
+     * @return strict-array{
      *      0: list<string>,
      *      1: list<string>,
      *      2: list<string>,
-     *      3: list<array{int, int, int, int}>,
-     *      4: list<array{int, int}>
+     *      3: list<strict-array{int, int, int, int}>,
+     *      4: list<strict-array{int, int}>
      * }
      */
     public static function diff(array $a, array $b, string $a_code, string $b_code): array
diff --git a/src/Psalm/Internal/Diff/NamespaceStatementsDiffer.php b/src/Psalm/Internal/Diff/NamespaceStatementsDiffer.php
index a3788f848..e423d5945 100644
--- a/src/Psalm/Internal/Diff/NamespaceStatementsDiffer.php
+++ b/src/Psalm/Internal/Diff/NamespaceStatementsDiffer.php
@@ -18,12 +18,12 @@ class NamespaceStatementsDiffer extends AstDiffer
      * @param array<int, PhpParser\Node\Stmt> $a
      * @param array<int, PhpParser\Node\Stmt> $b
      *
-     * @return array{
+     * @return strict-array{
      *      0: list<string>,
      *      1: list<string>,
      *      2: list<string>,
-     *      3: list<array{int, int, int, int}>,
-     *      4: list<array{int, int}>
+     *      3: list<strict-array{int, int, int, int}>,
+     *      4: list<strict-array{int, int}>
      * }
      */
     public static function diff(string $name, array $a, array $b, string $a_code, string $b_code): array
diff --git a/src/Psalm/Internal/ExecutionEnvironment/BuildInfoCollector.php b/src/Psalm/Internal/ExecutionEnvironment/BuildInfoCollector.php
index 25d731dcc..c06cc1ddf 100644
--- a/src/Psalm/Internal/ExecutionEnvironment/BuildInfoCollector.php
+++ b/src/Psalm/Internal/ExecutionEnvironment/BuildInfoCollector.php
@@ -290,10 +290,10 @@ class BuildInfoCollector
 
                 if (isset($event_data['head_commit'])) {
                     /**
-                     * @var array{
+                     * @var strict-array{
                      *    id: string,
-                     *    author: array{name: string, email: string},
-                     *    committer: array{name: string, email: string},
+                     *    author: strict-array{name: string, email: string},
+                     *    committer: strict-array{name: string, email: string},
                      *    message: string,
                      *    timestamp: string
                      * }
diff --git a/src/Psalm/Internal/FileManipulation/FileManipulationBuffer.php b/src/Psalm/Internal/FileManipulation/FileManipulationBuffer.php
index 1ed9c6c18..92bfbe1fe 100644
--- a/src/Psalm/Internal/FileManipulation/FileManipulationBuffer.php
+++ b/src/Psalm/Internal/FileManipulation/FileManipulationBuffer.php
@@ -49,7 +49,7 @@ class FileManipulationBuffer
     }
 
     /**
-     * @return array{int, int}
+     * @return strict-array{int, int}
      */
     private static function getCodeOffsets(
         string $source_file_path,
diff --git a/src/Psalm/Internal/FileManipulation/FunctionDocblockManipulator.php b/src/Psalm/Internal/FileManipulation/FunctionDocblockManipulator.php
index 3541046cd..5f9faf3f8 100644
--- a/src/Psalm/Internal/FileManipulation/FunctionDocblockManipulator.php
+++ b/src/Psalm/Internal/FileManipulation/FunctionDocblockManipulator.php
@@ -92,7 +92,7 @@ class FunctionDocblockManipulator
     /** @var array<string, int> */
     private $param_offsets = [];
 
-    /** @var array<string, array{int, int}> */
+    /** @var array<string, strict-array{int, int}> */
     private $param_typehint_offsets = [];
 
     /** @var bool */
diff --git a/src/Psalm/Internal/LanguageServer/EmitterTrait.php b/src/Psalm/Internal/LanguageServer/EmitterTrait.php
index 50535d0ed..933455b19 100644
--- a/src/Psalm/Internal/LanguageServer/EmitterTrait.php
+++ b/src/Psalm/Internal/LanguageServer/EmitterTrait.php
@@ -28,7 +28,7 @@ trait EmitterTrait
     /**
      * The list of listeners
      *
-     * @var array<string, array{0: bool, 1: int[], 2: callable[]}>
+     * @var array<string, strict-array{0: bool, 1: int[], 2: callable[]}>
      */
     protected $listeners = [];
 
diff --git a/src/Psalm/Internal/PhpVisitor/OffsetShifterVisitor.php b/src/Psalm/Internal/PhpVisitor/OffsetShifterVisitor.php
index 18c680054..f41d2e359 100644
--- a/src/Psalm/Internal/PhpVisitor/OffsetShifterVisitor.php
+++ b/src/Psalm/Internal/PhpVisitor/OffsetShifterVisitor.php
@@ -32,7 +32,7 @@ class OffsetShifterVisitor extends PhpParser\NodeVisitorAbstract
 
     public function enterNode(PhpParser\Node $node): ?int
     {
-        /** @var array{startFilePos: int, endFilePos: int, startLine: int} */
+        /** @var strict-array{startFilePos: int, endFilePos: int, startLine: int} */
         $attrs = $node->getAttributes();
 
         if ($cs = $node->getComments()) {
diff --git a/src/Psalm/Internal/PhpVisitor/PartialParserVisitor.php b/src/Psalm/Internal/PhpVisitor/PartialParserVisitor.php
index 08a9b0f6c..54cf269f0 100644
--- a/src/Psalm/Internal/PhpVisitor/PartialParserVisitor.php
+++ b/src/Psalm/Internal/PhpVisitor/PartialParserVisitor.php
@@ -29,7 +29,7 @@ use const PREG_SET_ORDER;
  */
 class PartialParserVisitor extends PhpParser\NodeVisitorAbstract
 {
-    /** @var array<int, array{int, int, int, int, int}> */
+    /** @var array<int, strict-array{int, int, int, int, int, string}> */
     private $offset_map;
 
     /** @var bool */
@@ -53,7 +53,7 @@ class PartialParserVisitor extends PhpParser\NodeVisitorAbstract
     /** @var PhpParser\ErrorHandler\Collecting */
     private $error_handler;
 
-    /** @param array<int, array{int, int, int, int, int}> $offset_map */
+    /** @param array<int, strict-array{int, int, int, int, int, string}> $offset_map */
     public function __construct(
         PhpParser\Parser $parser,
         PhpParser\ErrorHandler\Collecting $error_handler,
@@ -75,7 +75,7 @@ class PartialParserVisitor extends PhpParser\NodeVisitorAbstract
      */
     public function enterNode(PhpParser\Node $node, bool &$traverseChildren = true)
     {
-        /** @var array{startFilePos: int, endFilePos: int, startLine: int} */
+        /** @var strict-array{startFilePos: int, endFilePos: int, startLine: int} */
         $attrs = $node->getAttributes();
 
         if ($cs = $node->getComments()) {
@@ -277,7 +277,7 @@ class PartialParserVisitor extends PhpParser\NodeVisitorAbstract
                         if ($error_handler->hasErrors()) {
                             foreach ($error_handler->getErrors() as $error) {
                                 if ($error->hasColumnInfo()) {
-                                    /** @var array{startFilePos: int, endFilePos: int} */
+                                    /** @var strict-array{startFilePos: int, endFilePos: int} */
                                     $error_attrs = $error->getAttributes();
                                     $error = new PhpParser\Error(
                                         $error->getRawMessage(),
diff --git a/src/Psalm/Internal/PhpVisitor/Reflector/ClassLikeNodeScanner.php b/src/Psalm/Internal/PhpVisitor/Reflector/ClassLikeNodeScanner.php
index 0d71276b4..bbfa1b560 100644
--- a/src/Psalm/Internal/PhpVisitor/Reflector/ClassLikeNodeScanner.php
+++ b/src/Psalm/Internal/PhpVisitor/Reflector/ClassLikeNodeScanner.php
@@ -1291,7 +1291,6 @@ class ClassLikeNodeScanner
                     );
                 }
             }
-            
             $unresolved_node = null;
             if ($inferred_type
                 && !(
diff --git a/src/Psalm/Internal/PhpVisitor/Reflector/FunctionLikeDocblockParser.php b/src/Psalm/Internal/PhpVisitor/Reflector/FunctionLikeDocblockParser.php
index efd06cc0a..9bc6d5709 100644
--- a/src/Psalm/Internal/PhpVisitor/Reflector/FunctionLikeDocblockParser.php
+++ b/src/Psalm/Internal/PhpVisitor/Reflector/FunctionLikeDocblockParser.php
@@ -548,7 +548,7 @@ class FunctionLikeDocblockParser
     /**
      * @psalm-pure
      * @param list<string> $line_parts
-     * @return array{string, string} $line_parts
+     * @return strict-array{string, string} $line_parts
      */
     private static function sanitizeAssertionLineParts(array $line_parts): array
     {
diff --git a/src/Psalm/Internal/PhpVisitor/Reflector/FunctionLikeDocblockScanner.php b/src/Psalm/Internal/PhpVisitor/Reflector/FunctionLikeDocblockScanner.php
index 5452d899e..91f1dd3ee 100644
--- a/src/Psalm/Internal/PhpVisitor/Reflector/FunctionLikeDocblockScanner.php
+++ b/src/Psalm/Internal/PhpVisitor/Reflector/FunctionLikeDocblockScanner.php
@@ -425,8 +425,8 @@ class FunctionLikeDocblockScanner
      * @param  array<string, TypeAlias>|null   $type_aliases
      * @param  array<string, array<string, Union>> $function_template_types
      *
-     * @return array{
-     *     array<int, array{0: string, 1: int, 2?: string}>,
+     * @return strict-array{
+     *     array<int, strict-array{0: string, 1: int, 2?: string}>,
      *     array<string, array<string, Union>>
      * }
      */
@@ -675,7 +675,7 @@ class FunctionLikeDocblockScanner
      * @param array<string, TypeAlias> $type_aliases
      * @param array<
      *     int,
-     *     array{
+     *     strict-array{
      *         type:string,
      *         name:string,
      *         line_number:int,
@@ -1362,7 +1362,7 @@ class FunctionLikeDocblockScanner
      * @param array<string, TypeAlias> $type_aliases
      * @param array<string, array<string, Union>> $function_template_types
      * @param array<string, non-empty-array<string, Union>> $class_template_types
-     * @param  array{name:string, type:string, line_number: int} $docblock_param_out
+     * @param  strict-array{name:string, type:string, line_number: int} $docblock_param_out
      */
     private static function handleParamOut(
         array $docblock_param_out,
diff --git a/src/Psalm/Internal/PhpVisitor/Reflector/FunctionLikeNodeScanner.php b/src/Psalm/Internal/PhpVisitor/Reflector/FunctionLikeNodeScanner.php
index 487b60a8d..aefb2266e 100644
--- a/src/Psalm/Internal/PhpVisitor/Reflector/FunctionLikeNodeScanner.php
+++ b/src/Psalm/Internal/PhpVisitor/Reflector/FunctionLikeNodeScanner.php
@@ -911,8 +911,9 @@ class FunctionLikeNodeScanner
         );
     }
 
+    //phpcs:disable -- Remove this once the phpstan phpdoc parser MR is merged
     /**
-     * @return array{
+     * @return strict-array{
      *     string,
      *     FunctionStorage|MethodStorage,
      *     null|string,
@@ -928,6 +929,7 @@ class FunctionLikeNodeScanner
         PhpParser\Node\FunctionLike $stmt,
         bool $fake_method
     ) {
+        //phpcs:enable -- Remove this once the phpstan phpdoc parser MR is merged
         $classlike_storage = null;
         $fq_classlike_name = null;
         $is_functionlike_override = false;
diff --git a/src/Psalm/Internal/PhpVisitor/SimpleNameResolver.php b/src/Psalm/Internal/PhpVisitor/SimpleNameResolver.php
index 0616249b1..e5cec7b43 100644
--- a/src/Psalm/Internal/PhpVisitor/SimpleNameResolver.php
+++ b/src/Psalm/Internal/PhpVisitor/SimpleNameResolver.php
@@ -30,7 +30,7 @@ class SimpleNameResolver extends NodeVisitorAbstract
 
     /**
      * @param ErrorHandler $errorHandler Error handler
-     * @param null|array<int, array{int, int, int, int, int, string}> $offset_map
+     * @param null|array<int, strict-array{int, int, int, int, int, string}> $offset_map
      */
     public function __construct(ErrorHandler $errorHandler, ?array $offset_map = null)
     {
@@ -84,7 +84,7 @@ class SimpleNameResolver extends NodeVisitorAbstract
             && $this->start_change
             && $this->end_change
         ) {
-            /** @var array{startFilePos: int, endFilePos: int} */
+            /** @var strict-array{startFilePos: int, endFilePos: int} */
             $attrs = $node->getAttributes();
 
             if ($cs = $node->getComments()) {
diff --git a/src/Psalm/Internal/PluginManager/Command/ShowCommand.php b/src/Psalm/Internal/PluginManager/Command/ShowCommand.php
index 4e544c6c8..8af8ff543 100644
--- a/src/Psalm/Internal/PluginManager/Command/ShowCommand.php
+++ b/src/Psalm/Internal/PluginManager/Command/ShowCommand.php
@@ -59,7 +59,7 @@ class ShowCommand extends Command
 
         $formatRow =
             /**
-             * @return array{0: null|string, 1: string}
+             * @return strict-array{0: null|string, 1: string}
              */
             static fn(string $class, ?string $package): array => [$package, $class];
 
diff --git a/src/Psalm/Internal/PluginManager/ComposerLock.php b/src/Psalm/Internal/PluginManager/ComposerLock.php
index 7511d14c3..f5c890f9a 100644
--- a/src/Psalm/Internal/PluginManager/ComposerLock.php
+++ b/src/Psalm/Internal/PluginManager/ComposerLock.php
@@ -29,7 +29,10 @@ class ComposerLock
     /**
      * @param mixed $package
      *
-     * @psalm-assert-if-true array{name: string, extra: array{psalm: array{pluginClass: string}}} $package
+     * @psalm-assert-if-true strict-array{
+     *      name: string,
+     *      extra: strict-array{psalm: strict-array{pluginClass: string}}
+     * } $package
      *
      * @psalm-pure
      */
@@ -73,7 +76,7 @@ class ComposerLock
     }
 
     /**
-     * @return list<array{name:string,extra:array{psalm:array{pluginClass:string}}}>
+     * @return list<strict-array{name:string,extra:strict-array{psalm:strict-array{pluginClass:string}}}>
      */
     private function getAllPluginPackages(): array
     {
diff --git a/src/Psalm/Internal/Provider/FileReferenceCacheProvider.php b/src/Psalm/Internal/Provider/FileReferenceCacheProvider.php
index fdab4ac0e..90b24bf6c 100644
--- a/src/Psalm/Internal/Provider/FileReferenceCacheProvider.php
+++ b/src/Psalm/Internal/Provider/FileReferenceCacheProvider.php
@@ -930,11 +930,13 @@ class FileReferenceCacheProvider
         }
     }
 
+    //phpcs:disable -- Remove this once the phpstan phpdoc parser MR is merged
     /**
-     * @return array<string, array{int, int}>|false
+     * @return array<string, strict-array{int, int}>|false
      */
     public function getTypeCoverage()
     {
+        //phpcs:enable -- Remove this once the phpstan phpdoc parser MR is merged
         $cache_directory = Config::getInstance()->getCacheDirectory();
 
         $type_coverage_cache_location = $cache_directory . DIRECTORY_SEPARATOR . self::TYPE_COVERAGE_CACHE_NAME;
@@ -943,12 +945,12 @@ class FileReferenceCacheProvider
             && file_exists($type_coverage_cache_location)
         ) {
             if ($this->config->use_igbinary) {
-                /** @var array<string, array{int, int}> */
+                /** @var array<string, strict-array{int, int}> */
                 $type_coverage_cache = igbinary_unserialize(
                     Providers::safeFileGetContents($type_coverage_cache_location)
                 );
             } else {
-                /** @var array<string, array{int, int}> */
+                /** @var array<string, strict-array{int, int}> */
                 $type_coverage_cache = unserialize(
                     Providers::safeFileGetContents($type_coverage_cache_location)
                 );
@@ -961,7 +963,7 @@ class FileReferenceCacheProvider
     }
 
     /**
-     * @param array<string, array{int, int}> $mixed_counts
+     * @param array<string, strict-array{int, int}> $mixed_counts
      */
     public function setTypeCoverage(array $mixed_counts): void
     {
diff --git a/src/Psalm/Internal/Provider/FileReferenceProvider.php b/src/Psalm/Internal/Provider/FileReferenceProvider.php
index 65afc1ff2..c93ffc63e 100644
--- a/src/Psalm/Internal/Provider/FileReferenceProvider.php
+++ b/src/Psalm/Internal/Provider/FileReferenceProvider.php
@@ -89,7 +89,7 @@ class FileReferenceProvider
     /**
      * A lookup table used for getting all the files referenced by a file
      *
-     * @var array<string, array{a:array<int, string>, i:array<int, string>}>
+     * @var array<string, strict-array{a:array<int, string>, i:array<int, string>}>
      */
     private static $file_references = [];
 
@@ -159,7 +159,7 @@ class FileReferenceProvider
     private static $file_maps = [];
 
     /**
-     * @var array<string, array{int, int}>
+     * @var array<string, strict-array{int, int}>
      */
     private static $mixed_counts = [];
 
@@ -1255,7 +1255,7 @@ class FileReferenceProvider
     }
 
     /**
-     * @return array<string, array{int, int}>
+     * @return array<string, strict-array{int, int}>
      */
     public function getTypeCoverage(): array
     {
@@ -1263,7 +1263,7 @@ class FileReferenceProvider
     }
 
     /**
-     * @param array<string, array{int, int}> $mixed_counts
+     * @param array<string, strict-array{int, int}> $mixed_counts
      *
      */
     public function setTypeCoverage(array $mixed_counts): void
diff --git a/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayFilterReturnTypeProvider.php b/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayFilterReturnTypeProvider.php
index 7b2112a93..2b6725d97 100644
--- a/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayFilterReturnTypeProvider.php
+++ b/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayFilterReturnTypeProvider.php
@@ -118,7 +118,7 @@ class ArrayFilterReturnTypeProvider implements FunctionReturnTypeProviderInterfa
                 return new Union([new TKeyedArray(
                     $new_properties,
                     null,
-                    false,
+                    $first_arg_array->sealed,
                     null,
                     null,
                     $first_arg_array->is_list && $had_one
diff --git a/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayMapReturnTypeProvider.php b/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayMapReturnTypeProvider.php
index 5c550b187..b3796d38a 100644
--- a/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayMapReturnTypeProvider.php
+++ b/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayMapReturnTypeProvider.php
@@ -37,6 +37,8 @@ use UnexpectedValueException;
 use function array_map;
 use function array_shift;
 use function array_slice;
+use function array_values;
+use function assert;
 use function count;
 use function explode;
 use function in_array;
@@ -81,19 +83,33 @@ class ArrayMapReturnTypeProvider implements FunctionReturnTypeProviderInterface
             foreach ($call_args as $call_arg) {
                 $call_arg_type = $statements_source->node_data->getType($call_arg->value);
 
-                if ($call_arg_type) {
-                    $array_arg_types[] = $call_arg_type;
+                if ($call_arg_type
+                    && $call_arg_type->isSingle()
+                    && ($call_arg_atomic = $call_arg_type->getSingleAtomic()) instanceof TKeyedArray
+                    && $call_arg_atomic->sealed
+                ) {
+                    $array_arg_types []= array_values($call_arg_atomic->properties);
                 } else {
-                    $array_arg_types[] = Type::getMixed();
-                    break;
+                    return Type::getArray();
                 }
             }
 
-            if ($array_arg_types) {
-                return new Union([new TKeyedArray($array_arg_types)]);
-            }
+            $null = Type::getNull();
+            $array_arg_types = array_map(null, ...$array_arg_types);
+            $array_arg_types = array_map(
+                /** @param non-empty-array<?Union> $sub */
+                function (array $sub) use ($null) {
+                    $sub = array_map(
+                        fn (?Union $t) => $t ?? $null,
+                        $sub
+                    );
+                    return new Union([new TKeyedArray($sub, null, true, null, null, true)]);
+                },
+                $array_arg_types
+            );
+            assert(count($array_arg_types));
 
-            return Type::getArray();
+            return new Union([new TKeyedArray($array_arg_types, null, true, null, null, true)]);
         }
 
         $array_arg = $call_args[1] ?? null;
@@ -201,7 +217,7 @@ class ArrayMapReturnTypeProvider implements FunctionReturnTypeProviderInterface
                     null,
                     $array_arg_atomic_type->sealed,
                     $array_arg_atomic_type->previous_key_type,
-                    $mapping_return_type,
+                    $array_arg_atomic_type->sealed ? null : $mapping_return_type,
                     $array_arg_atomic_type->is_list
                 );
 
diff --git a/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayMergeReturnTypeProvider.php b/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayMergeReturnTypeProvider.php
index 91a9a7b54..962325f87 100644
--- a/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayMergeReturnTypeProvider.php
+++ b/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayMergeReturnTypeProvider.php
@@ -58,6 +58,7 @@ class ArrayMergeReturnTypeProvider implements FunctionReturnTypeProviderInterfac
         $generic_properties = [];
         $class_strings = [];
         $all_keyed_arrays = true;
+        $all_keyed_arrays_are_sealed = true;
         $all_int_offsets = true;
         $all_nonempty_lists = true;
         $any_nonempty = false;
@@ -116,6 +117,8 @@ class ArrayMergeReturnTypeProvider implements FunctionReturnTypeProviderInterfac
                                         $generic_properties[] = $type;
                                     }
                                     continue;
+                                } else {
+                                    $all_int_offsets = false;
                                 }
 
                                 if (isset($unpacked_type_part->class_strings[$key])) {
@@ -143,6 +146,10 @@ class ArrayMergeReturnTypeProvider implements FunctionReturnTypeProviderInterfac
                                 $all_nonempty_lists = false;
                             }
 
+                            if (!$unpacked_type_part->sealed) {
+                                $all_keyed_arrays_are_sealed = false;
+                            }
+
                             if ($unpacked_type_part->sealed) {
                                 $any_nonempty = true;
                             }
@@ -240,7 +247,7 @@ class ArrayMergeReturnTypeProvider implements FunctionReturnTypeProviderInterfac
             $objectlike = new TKeyedArray(
                 $generic_properties,
                 $class_strings ?: null,
-                false,
+                $all_keyed_arrays && $all_keyed_arrays_are_sealed,
                 $all_keyed_arrays ? null : $inner_key_type,
                 $all_keyed_arrays ? null : $inner_value_type,
                 $all_nonempty_lists || $all_int_offsets
diff --git a/src/Psalm/Internal/Provider/ReturnTypeProvider/GetObjectVarsReturnTypeProvider.php b/src/Psalm/Internal/Provider/ReturnTypeProvider/GetObjectVarsReturnTypeProvider.php
index 992551318..20191869c 100644
--- a/src/Psalm/Internal/Provider/ReturnTypeProvider/GetObjectVarsReturnTypeProvider.php
+++ b/src/Psalm/Internal/Provider/ReturnTypeProvider/GetObjectVarsReturnTypeProvider.php
@@ -6,10 +6,13 @@ use Psalm\CodeLocation;
 use Psalm\Context;
 use Psalm\Internal\Analyzer\ClassAnalyzer;
 use Psalm\Internal\Analyzer\SourceAnalyzer;
+use Psalm\Internal\Analyzer\Statements\Expression\Fetch\AtomicPropertyFetchAnalyzer;
 use Psalm\Internal\Analyzer\StatementsAnalyzer;
 use Psalm\Plugin\EventHandler\Event\FunctionReturnTypeProviderEvent;
 use Psalm\Plugin\EventHandler\FunctionReturnTypeProviderInterface;
 use Psalm\Type;
+use Psalm\Type\Atomic\TArray;
+use Psalm\Type\Atomic\TGenericObject;
 use Psalm\Type\Atomic\TKeyedArray;
 use Psalm\Type\Atomic\TNamedObject;
 use Psalm\Type\Atomic\TObjectWithProperties;
@@ -34,19 +37,23 @@ class GetObjectVarsReturnTypeProvider implements FunctionReturnTypeProviderInter
         ];
     }
 
+    private static ?Union $fallback = null;
+
     public static function getGetObjectVarsReturnType(
         Union $first_arg_type,
         SourceAnalyzer $statements_source,
         Context $context,
         CodeLocation $location
     ): Union {
+        self::$fallback ??= new Union([new TArray([Type::getString(), Type::getMixed()])]);
+
         if ($first_arg_type->isSingle()) {
             $atomics = $first_arg_type->getAtomicTypes();
             $object_type = reset($atomics);
 
             if ($object_type instanceof TObjectWithProperties) {
                 if ([] === $object_type->properties) {
-                    return Type::parseString('array<string, mixed>');
+                    return self::$fallback;
                 }
                 return new Union([
                     new TKeyedArray($object_type->properties)
@@ -55,13 +62,13 @@ class GetObjectVarsReturnTypeProvider implements FunctionReturnTypeProviderInter
 
             if ($object_type instanceof TNamedObject) {
                 if (strtolower($object_type->value) === strtolower(stdClass::class)) {
-                    return Type::parseString('array<string, mixed>');
+                    return self::$fallback;
                 }
                 $codebase = $statements_source->getCodebase();
                 $class_storage = $codebase->classlikes->getStorageFor($object_type->value);
 
                 if (null === $class_storage) {
-                    return Type::parseString('array<string, mixed>');
+                    return self::$fallback;
                 }
 
                 if ([] === $class_storage->appearing_property_ids) {
@@ -69,7 +76,7 @@ class GetObjectVarsReturnTypeProvider implements FunctionReturnTypeProviderInter
                         return Type::getEmptyArray();
                     }
 
-                    return Type::parseString('array<string, mixed>');
+                    return self::$fallback;
                 }
 
                 $properties = [];
@@ -88,7 +95,21 @@ class GetObjectVarsReturnTypeProvider implements FunctionReturnTypeProviderInter
                             $statements_source,
                             $context
                         );
-                        $properties[$name] = $property_type ?? Type::getMixed();
+                        if (!$property_type) {
+                            continue;
+                        }
+
+                        $property_type = $object_type instanceof TGenericObject
+                            ? AtomicPropertyFetchAnalyzer::localizePropertyType(
+                                $codebase,
+                                $property_type,
+                                $object_type,
+                                $class_storage,
+                                $class_storage
+                            )
+                            : $property_type
+                        ;
+                        $properties[$name] = $property_type;
                     }
                 }
 
@@ -97,15 +118,19 @@ class GetObjectVarsReturnTypeProvider implements FunctionReturnTypeProviderInter
                         return Type::getEmptyArray();
                     }
 
-                    return Type::parseString('array<string, mixed>');
+                    return self::$fallback;
                 }
 
                 return new Union([
-                    new TKeyedArray($properties)
+                    new TKeyedArray(
+                        $properties,
+                        null,
+                        $class_storage->final
+                    )
                 ]);
             }
         }
-        return Type::parseString('array<string, mixed>');
+        return self::$fallback;
     }
 
     public static function getFunctionReturnType(FunctionReturnTypeProviderEvent $event): ?Union
diff --git a/src/Psalm/Internal/Provider/ReturnTypeProvider/ParseUrlReturnTypeProvider.php b/src/Psalm/Internal/Provider/ReturnTypeProvider/ParseUrlReturnTypeProvider.php
index 0abaa72c7..3cf991af2 100644
--- a/src/Psalm/Internal/Provider/ReturnTypeProvider/ParseUrlReturnTypeProvider.php
+++ b/src/Psalm/Internal/Provider/ReturnTypeProvider/ParseUrlReturnTypeProvider.php
@@ -146,7 +146,11 @@ class ParseUrlReturnTypeProvider implements FunctionReturnTypeProviderInterface
             $component_types['port'] = new Union([new TInt()], ['possibly_undefined' => true]);
 
             self::$return_type = new Union([
-                new TKeyedArray($component_types),
+                new TKeyedArray(
+                    $component_types,
+                    null,
+                    true
+                ),
                 new TFalse(),
             ], [
                 'ignore_falsable_issues' => $statements_source->getCodebase()->config->ignore_internal_falsable_issues
diff --git a/src/Psalm/Internal/Provider/StatementsProvider.php b/src/Psalm/Internal/Provider/StatementsProvider.php
index 6094a9527..5a02b1de7 100644
--- a/src/Psalm/Internal/Provider/StatementsProvider.php
+++ b/src/Psalm/Internal/Provider/StatementsProvider.php
@@ -85,12 +85,12 @@ class StatementsProvider
     private $errors = [];
 
     /**
-     * @var array<string, array<int, array{int, int, int, int}>>
+     * @var array<string, array<int, strict-array{int, int, int, int}>>
      */
     private $diff_map = [];
 
     /**
-     * @var array<string, array<int, array{int, int}>>
+     * @var array<string, array<int, strict-array{int, int}>>
      */
     private $deletion_ranges = [];
 
@@ -367,7 +367,7 @@ class StatementsProvider
     }
 
     /**
-     * @return array<string, array<int, array{int, int, int, int}>>
+     * @return array<string, array<int, strict-array{int, int, int, int}>>
      */
     public function getDiffMap(): array
     {
@@ -375,7 +375,7 @@ class StatementsProvider
     }
 
     /**
-     * @return array<string, array<int, array{int, int}>>
+     * @return array<string, array<int, strict-array{int, int}>>
      */
     public function getDeletionRanges(): array
     {
@@ -383,7 +383,7 @@ class StatementsProvider
     }
 
     /**
-     * @param array<string, array<int, array{int, int, int, int}>> $diff_map
+     * @param array<string, array<int, strict-array{int, int, int, int}>> $diff_map
      *
      */
     public function addDiffMap(array $diff_map): void
@@ -392,7 +392,7 @@ class StatementsProvider
     }
 
     /**
-     * @param array<string, array<int, array{int, int}>> $deletion_ranges
+     * @param array<string, array<int, strict-array{int, int}>> $deletion_ranges
      *
      */
     public function addDeletionRanges(array $deletion_ranges): void
@@ -411,7 +411,7 @@ class StatementsProvider
 
     /**
      * @param  list<Stmt> $existing_statements
-     * @param  array<int, array{0:int, 1:int, 2: int, 3: int, 4: int, 5:string}> $file_changes
+     * @param  array<int, strict-list{int, int, int, int, int, string}> $file_changes
      *
      * @return list<Stmt>
      */
diff --git a/src/Psalm/Internal/Scanner/ClassLikeDocblockComment.php b/src/Psalm/Internal/Scanner/ClassLikeDocblockComment.php
index a9168cc39..21efdf96e 100644
--- a/src/Psalm/Internal/Scanner/ClassLikeDocblockComment.php
+++ b/src/Psalm/Internal/Scanner/ClassLikeDocblockComment.php
@@ -43,7 +43,7 @@ class ClassLikeDocblockComment
     public $mixins = [];
 
     /**
-     * @var array<int, array{string, ?string, ?string, bool, int}>
+     * @var array<int, strict-array{string, ?string, ?string, bool, int}>
      */
     public $templates = [];
 
@@ -63,7 +63,7 @@ class ClassLikeDocblockComment
     public $yield;
 
     /**
-     * @var array<int, array{name:string, type:string, tag:string, line_number:int}>
+     * @var array<int, strict-array{end?: int, line_number: int, name: string, start?: int, tag: string, type: string}>
      */
     public $properties = [];
 
@@ -113,7 +113,7 @@ class ClassLikeDocblockComment
     public $suppressed_issues = [];
 
     /**
-     * @var list<array{line_number:int,start_offset:int,end_offset:int,parts:list<string>}>
+     * @var list<strict-array{line_number:int,start_offset:int,end_offset:int,parts:list<string>}>
      */
     public $imported_types = [];
 
diff --git a/src/Psalm/Internal/Scanner/DocblockParser.php b/src/Psalm/Internal/Scanner/DocblockParser.php
index 6015262e2..7a586e89c 100644
--- a/src/Psalm/Internal/Scanner/DocblockParser.php
+++ b/src/Psalm/Internal/Scanner/DocblockParser.php
@@ -90,7 +90,7 @@ class DocblockParser
             }
 
             if (preg_match('/^[ \t]*\*?\s*@([\w\-\\\:]+)[\t ]*(.*)$/sm', $line, $matches, PREG_OFFSET_CAPTURE)) {
-                /** @var array<int, array{string, int}> $matches */
+                /** @var array<int, strict-array{string, int}> $matches */
                 [, $type_info, $data_info] = $matches;
 
                 [$type] = $type_info;
diff --git a/src/Psalm/Internal/Scanner/FunctionDocblockComment.php b/src/Psalm/Internal/Scanner/FunctionDocblockComment.php
index a3819b4ac..5e9513e24 100644
--- a/src/Psalm/Internal/Scanner/FunctionDocblockComment.php
+++ b/src/Psalm/Internal/Scanner/FunctionDocblockComment.php
@@ -35,7 +35,7 @@ class FunctionDocblockComment
     /**
      * @var array<
      *     int,
-     *     array{
+     *     strict-array{
      *         name:string,
      *         type:string,
      *         line_number: int,
@@ -48,22 +48,22 @@ class FunctionDocblockComment
     public $params = [];
 
     /**
-     * @var array<int, array{name:string, type:string, line_number: int}>
+     * @var array<int, strict-array{name:string, type:string, line_number: int}>
      */
     public $params_out = [];
 
     /**
-     * @var array{type:string, line_number: int}|null
+     * @var strict-array{type:string, line_number: int}|null
      */
     public $self_out;
 
     /**
-     * @var array{type:string, line_number: int}|null
+     * @var strict-array{type:string, line_number: int}|null
      */
     public $if_this_is;
 
     /**
-     * @var array<int, array{name:string, type:string, line_number: int}>
+     * @var array<int, strict-array{name:string, type:string, line_number: int}>
      */
     public $globals = [];
 
@@ -127,7 +127,7 @@ class FunctionDocblockComment
     public $removed_taints = [];
 
     /**
-     * @var array<int, array{name:string, taint: string}>
+     * @var array<int, strict-array{name:string, taint: string}>
      */
     public $taint_sink_params = [];
 
@@ -137,7 +137,7 @@ class FunctionDocblockComment
     public $taint_source_types = [];
 
     /**
-     * @var array<int, array{name:string}>
+     * @var array<int, strict-array{name:string}>
      */
     public $assert_untainted_params = [];
 
@@ -161,27 +161,27 @@ class FunctionDocblockComment
     public $suppressed_issues = [];
 
     /**
-     * @var array<int, array{0: string, 1: int, 2: int}>
+     * @var array<int, strict-array{0: string, 1: int, 2: int}>
      */
     public $throws = [];
 
     /**
-     * @var array<int, array{string, ?string, ?string, bool}>
+     * @var array<int, strict-array{string, ?string, ?string, bool}>
      */
     public $templates = [];
 
     /**
-     * @var array<int, array{type: string, param_name: string}>
+     * @var array<int, strict-array{type: string, param_name: string}>
      */
     public $assertions = [];
 
     /**
-     * @var array<int, array{type: string, param_name: string}>
+     * @var array<int, strict-array{type: string, param_name: string}>
      */
     public $if_true_assertions = [];
 
     /**
-     * @var array<int, array{type: string, param_name: string}>
+     * @var array<int, strict-array{type: string, param_name: string}>
      */
     public $if_false_assertions = [];
 
@@ -223,6 +223,6 @@ class FunctionDocblockComment
      */
     public $description;
 
-    /** @var array<string, array{lines:list<int>, suggested_replacement?:string}> */
+    /** @var array<string, strict-array{lines:list<int>, suggested_replacement?:string}> */
     public $unexpected_tags = [];
 }
diff --git a/src/Psalm/Internal/Type/Comparator/KeyedArrayComparator.php b/src/Psalm/Internal/Type/Comparator/KeyedArrayComparator.php
index 7c372e438..9e30626e1 100644
--- a/src/Psalm/Internal/Type/Comparator/KeyedArrayComparator.php
+++ b/src/Psalm/Internal/Type/Comparator/KeyedArrayComparator.php
@@ -27,10 +27,21 @@ class KeyedArrayComparator
         bool $allow_interface_equality,
         ?TypeComparisonResult $atomic_comparison_result
     ): bool {
+        $container_sealed = $container_type_part instanceof TKeyedArray
+            && $container_type_part->sealed;
+
+        if ($container_sealed
+            && $input_type_part instanceof TKeyedArray
+            && !$input_type_part->sealed
+        ) {
+            return false;
+        }
+
         $all_types_contain = true;
 
+        $input_properties = $input_type_part->properties;
         foreach ($container_type_part->properties as $key => $container_property_type) {
-            if (!isset($input_type_part->properties[$key])) {
+            if (!isset($input_properties[$key])) {
                 if (!$container_property_type->possibly_undefined) {
                     $all_types_contain = false;
                 }
@@ -38,7 +49,8 @@ class KeyedArrayComparator
                 continue;
             }
 
-            $input_property_type = $input_type_part->properties[$key];
+            $input_property_type = $input_properties[$key];
+            unset($input_properties[$key]);
 
             $property_type_comparison = new TypeComparisonResult();
 
@@ -82,6 +94,9 @@ class KeyedArrayComparator
                 }
             }
         }
+        if ($container_sealed && $input_properties) {
+            return false;
+        }
         return $all_types_contain;
     }
 
diff --git a/src/Psalm/Internal/Type/ParseTreeCreator.php b/src/Psalm/Internal/Type/ParseTreeCreator.php
index 0ee5d9b32..b65fd1096 100644
--- a/src/Psalm/Internal/Type/ParseTreeCreator.php
+++ b/src/Psalm/Internal/Type/ParseTreeCreator.php
@@ -41,7 +41,7 @@ class ParseTreeCreator
     /** @var ParseTree */
     private $current_leaf;
 
-    /** @var array<int, array{0: string, 1: int}> */
+    /** @var array<int, strict-array{0: string, 1: int, 2?: string}> */
     private $type_tokens;
 
     /** @var int */
@@ -51,7 +51,7 @@ class ParseTreeCreator
     private $t = 0;
 
     /**
-     * @param list<array{0: string, 1: int, 2?: string}> $type_tokens
+     * @param list<strict-array{0: string, 1: int, 2?: string}> $type_tokens
      */
     public function __construct(array $type_tokens)
     {
@@ -168,7 +168,7 @@ class ParseTreeCreator
     }
 
     /**
-     * @param  array{0: string, 1: int} $current_token
+     * @param  strict-array{0: string, 1: int, 2?: string} $current_token
      */
     private function createMethodParam(array $current_token, ParseTree $current_parent): void
     {
@@ -374,7 +374,7 @@ class ParseTreeCreator
         $this->current_leaf = $context_node;
     }
 
-    /** @param array{0: string, 1: int} $type_token */
+    /** @param strict-array{0: string, 1: int, 2?: string} $type_token */
     private function handleEllipsisOrEquals(array $type_token): void
     {
         $prev_token = $this->t > 0 ? $this->type_tokens[$this->t - 1] : null;
@@ -681,7 +681,7 @@ class ParseTreeCreator
         $this->current_leaf = $new_parent_leaf;
     }
 
-    /** @param array{0: string, 1: int} $type_token */
+    /** @param strict-array{0: string, 1: int, 2?: string} $type_token */
     private function handleIsOrAs(array $type_token): void
     {
         if ($this->t === 0) {
@@ -724,7 +724,7 @@ class ParseTreeCreator
         }
     }
 
-    /** @param array{0: string, 1: int, 2?: string} $type_token */
+    /** @param strict-array{0: string, 1: int, 2?: string} $type_token */
     private function handleValue(array $type_token): void
     {
         $new_parent = !$this->current_leaf instanceof Root ? $this->current_leaf : null;
diff --git a/src/Psalm/Internal/Type/SimpleAssertionReconciler.php b/src/Psalm/Internal/Type/SimpleAssertionReconciler.php
index f5b26ce19..d441b08f7 100644
--- a/src/Psalm/Internal/Type/SimpleAssertionReconciler.php
+++ b/src/Psalm/Internal/Type/SimpleAssertionReconciler.php
@@ -75,6 +75,7 @@ use Psalm\Type\Atomic\TTrue;
 use Psalm\Type\Reconciler;
 use Psalm\Type\Union;
 
+use function array_map;
 use function array_merge;
 use function count;
 use function explode;
@@ -576,14 +577,14 @@ class SimpleAssertionReconciler extends Reconciler
 
         if ($existing_var_type->hasType('array')) {
             $array_atomic_type = $existing_var_type->getAtomicTypes()['array'];
-            $did_remove_type = false;
+            $redundant = true;
 
             if ($array_atomic_type instanceof TArray) {
                 if (!$array_atomic_type instanceof TNonEmptyArray
                     || ($assertion instanceof HasAtLeastCount
                         && $array_atomic_type->min_count < $assertion->count)
                 ) {
-                    if ($array_atomic_type->getId() === 'array<empty, empty>') {
+                    if ($array_atomic_type->isEmptyArray()) {
                         $existing_var_type->removeType('array');
                     } else {
                         $non_empty_array = new TNonEmptyArray(
@@ -595,7 +596,7 @@ class SimpleAssertionReconciler extends Reconciler
                         $existing_var_type->addType($non_empty_array);
                     }
 
-                    $did_remove_type = true;
+                    $redundant = false;
                 }
             } elseif ($array_atomic_type instanceof TList) {
                 if (!$array_atomic_type instanceof TNonEmptyList
@@ -608,32 +609,64 @@ class SimpleAssertionReconciler extends Reconciler
                         $assertion instanceof HasAtLeastCount ? $assertion->count : null
                     );
 
-                    $did_remove_type = true;
+                    $redundant = false;
                     $existing_var_type->addType($non_empty_list);
                 }
             } elseif ($array_atomic_type instanceof TKeyedArray) {
-                $prop_count = count($array_atomic_type->properties);
-                $min_count = 0;
+                $prop_max_count = count($array_atomic_type->properties);
+                $prop_min_count = 0;
                 foreach ($array_atomic_type->properties as $property_type) {
                     if (!$property_type->possibly_undefined) {
-                        $min_count++;
+                        $prop_min_count++;
                     }
                 }
 
                 if ($assertion instanceof HasAtLeastCount) {
-                    if ($array_atomic_type->sealed && $assertion->count > $min_count) {
-                        $existing_var_type->removeType('array');
-                        $did_remove_type = true;
-                    } elseif (!$array_atomic_type->sealed
-                        && $array_atomic_type->is_list
-                        && $min_count === $prop_count
+                    if ($array_atomic_type->sealed) {
+                        // count($a) > 3
+                        // count($a) >= 4
+
+                        // 4
+                        $count = $assertion->count;
+
+                        // We're asserting that count($a) >= $count
+                        // If it's impossible, remove the type
+                        // If it's possible but redundant, mark as redundant
+                        // If it's possible, mark as not redundant
+
+                        // Impossible because count($a) < $count always
+                        if ($prop_max_count < $count) {
+                            $redundant = false;
+                            $existing_var_type->removeType('array');
+
+                            // Redundant because count($a) >= $count always
+                        } elseif ($prop_min_count >= $count) {
+                            $redundant = true;
+
+                            // If count($a) === $count and there are possibly undefined properties
+                        } elseif ($prop_max_count === $count && $prop_min_count !== $prop_max_count) {
+                            $existing_var_type->removeType('array');
+                            $existing_var_type->addType($array_atomic_type->setProperties(
+                                array_map(
+                                    fn (Union $union) => $union->setPossiblyUndefined(false),
+                                    $array_atomic_type->properties
+                                )
+                            ));
+                            $redundant = false;
+
+                            // Possible
+                        } else {
+                            $redundant = false;
+                        }
+                    } elseif ($array_atomic_type->is_list
+                        && $prop_min_count === $prop_max_count
                     ) {
-                        if ($assertion->count <= $min_count) {
-                            // this means a redundant condition
+                        if ($assertion->count <= $prop_min_count) {
+                            $redundant = true;
                         } else {
-                            $did_remove_type = true;
+                            $redundant = false;
                             $properties = $array_atomic_type->properties;
-                            for ($i = $prop_count; $i < $assertion->count; $i++) {
+                            for ($i = $prop_max_count; $i < $assertion->count; $i++) {
                                 $properties[$i]
                                     = ($array_atomic_type->previous_value_type ?: Type::getMixed());
                             }
@@ -642,16 +675,16 @@ class SimpleAssertionReconciler extends Reconciler
                             $existing_var_type->addType($array_atomic_type);
                         }
                     } else {
-                        $did_remove_type = true;
+                        $redundant = false;
                     }
-                } elseif ($min_count !== $prop_count) {
-                    $did_remove_type = true;
+                } elseif ($prop_min_count !== $prop_max_count) {
+                    $redundant = false;
                 }
             }
 
             if (!$is_equality
                 && !$existing_var_type->hasMixed()
-                && (!$did_remove_type || $existing_var_type->isUnionEmpty())
+                && ($redundant || $existing_var_type->isUnionEmpty())
             ) {
                 if ($key && $code_location) {
                     self::triggerIssueForImpossible(
@@ -659,7 +692,7 @@ class SimpleAssertionReconciler extends Reconciler
                         $old_var_type_string,
                         $key,
                         $assertion,
-                        !$did_remove_type,
+                        $redundant,
                         $negated,
                         $code_location,
                         $suppressed_issues
@@ -700,6 +733,31 @@ class SimpleAssertionReconciler extends Reconciler
                 $existing_var_type->addType(
                     $non_empty_list
                 );
+            } elseif ($array_atomic_type instanceof TKeyedArray) {
+                if ($array_atomic_type->sealed) {
+                    if (count($array_atomic_type->properties) === $count) {
+                        $existing_var_type->removeType('array');
+                        $existing_var_type->addType($array_atomic_type->setProperties(
+                            array_map(
+                                fn (Union $union) => $union->setPossiblyUndefined(false),
+                                $array_atomic_type->properties
+                            )
+                        ));
+                    }
+                } else {
+                    $has_possibly_undefined = false;
+                    foreach ($array_atomic_type->properties as $property) {
+                        if ($property->possibly_undefined) {
+                            $has_possibly_undefined = true;
+                            break;
+                        }
+                    }
+
+                    if (!$has_possibly_undefined && count($array_atomic_type->properties) === $count) {
+                        $existing_var_type->removeType('array');
+                        $existing_var_type->addType($array_atomic_type->setSealed(true));
+                    }
+                }
             }
         }
 
@@ -2046,7 +2104,7 @@ class SimpleAssertionReconciler extends Reconciler
                 } else {
                     $array_types[] = $type;
                 }
-            } elseif ($type instanceof TArray || $type instanceof TKeyedArray) {
+            } elseif ($type instanceof TArray || ($type instanceof TKeyedArray && !$type->sealed)) {
                 if ($type instanceof TKeyedArray) {
                     $type = $type->getGenericArrayType();
                 }
diff --git a/src/Psalm/Internal/Type/SimpleNegatedAssertionReconciler.php b/src/Psalm/Internal/Type/SimpleNegatedAssertionReconciler.php
index 1aa877227..ab1b5e927 100644
--- a/src/Psalm/Internal/Type/SimpleNegatedAssertionReconciler.php
+++ b/src/Psalm/Internal/Type/SimpleNegatedAssertionReconciler.php
@@ -62,6 +62,7 @@ use Psalm\Type\Reconciler;
 use Psalm\Type\Union;
 
 use function assert;
+use function count;
 use function get_class;
 use function max;
 use function strpos;
@@ -512,7 +513,7 @@ class SimpleNegatedAssertionReconciler extends Reconciler
         ?CodeLocation $code_location,
         array $suppressed_issues,
         bool $is_equality,
-        ?int $min_count
+        ?int $count
     ): Union {
         $existing_var_type = $existing_var_type->getBuilder();
         $old_var_type_string = $existing_var_type->getId();
@@ -520,30 +521,63 @@ class SimpleNegatedAssertionReconciler extends Reconciler
 
         if (isset($existing_var_atomic_types['array'])) {
             $array_atomic_type = $existing_var_atomic_types['array'];
-            $did_remove_type = false;
+            $redundant = true;
 
             if (($array_atomic_type instanceof TNonEmptyArray
                     || $array_atomic_type instanceof TNonEmptyList)
-                && ($min_count === null
-                    || $array_atomic_type->count >= $min_count
-                    || $array_atomic_type->min_count >= $min_count)
+                && ($count === null
+                    || $array_atomic_type->count >= $count
+                    || $array_atomic_type->min_count >= $count)
             ) {
-                $did_remove_type = true;
+                $redundant = false;
 
                 $existing_var_type->removeType('array');
             } elseif ($array_atomic_type instanceof TKeyedArray) {
-                $did_remove_type = true;
+                if ($array_atomic_type->sealed && $count !== null) {
+                    $prop_max_count = count($array_atomic_type->properties);
+                    $prop_min_count = 0;
+                    foreach ($array_atomic_type->properties as $property_type) {
+                        if (!$property_type->possibly_undefined) {
+                            $prop_min_count++;
+                        }
+                    }
+
+                    // !(count($a) >= 3)
+                    // count($a) < 3
+
+                    // We're asserting that count($a) < $count
+                    // If it's impossible, remove the type
+                    // If it's possible but redundant, mark as redundant
+                    // If it's possible, mark as not redundant
+
+                    // Impossible because count($a) >= $count always
+                    if ($prop_min_count >= $count) {
+                        $redundant = false;
+
+                        $existing_var_type->removeType('array');
 
-                foreach ($array_atomic_type->properties as $property_type) {
-                    if (!$property_type->possibly_undefined) {
-                        $did_remove_type = false;
-                        break;
+                        // Redundant because count($a) < $count always
+                    } elseif ($prop_max_count < $count) {
+                        $redundant = true;
+
+                        // Possible
+                    } else {
+                        $redundant = false;
+                    }
+                } else {
+                    $redundant = false;
+
+                    foreach ($array_atomic_type->properties as $property_type) {
+                        if (!$property_type->possibly_undefined) {
+                            $redundant = true;
+                            break;
+                        }
                     }
                 }
             } elseif (!$array_atomic_type instanceof TArray || !$array_atomic_type->isEmptyArray()) {
-                $did_remove_type = true;
+                $redundant = false;
 
-                if (!$min_count) {
+                if (!$count) {
                     $existing_var_type->addType(new TArray(
                         [
                             new Union([new TNever()]),
@@ -555,7 +589,7 @@ class SimpleNegatedAssertionReconciler extends Reconciler
 
             if (!$is_equality
                 && !$existing_var_type->hasMixed()
-                && (!$did_remove_type || $existing_var_type->isUnionEmpty())
+                && ($redundant || $existing_var_type->isUnionEmpty())
             ) {
                 if ($key && $code_location) {
                     self::triggerIssueForImpossible(
@@ -563,7 +597,7 @@ class SimpleNegatedAssertionReconciler extends Reconciler
                         $old_var_type_string,
                         $key,
                         $assertion,
-                        !$did_remove_type,
+                        $redundant,
                         $negated,
                         $code_location,
                         $suppressed_issues
diff --git a/src/Psalm/Internal/Type/TypeAlias/InlineTypeAlias.php b/src/Psalm/Internal/Type/TypeAlias/InlineTypeAlias.php
index 44a8ac30a..bfc10f688 100644
--- a/src/Psalm/Internal/Type/TypeAlias/InlineTypeAlias.php
+++ b/src/Psalm/Internal/Type/TypeAlias/InlineTypeAlias.php
@@ -15,12 +15,12 @@ class InlineTypeAlias implements TypeAlias
     use ImmutableNonCloneableTrait;
 
     /**
-     * @var list<array{0: string, 1: int}>
+     * @var list<strict-array{0: string, 1: int, 2?: string}>
      */
     public $replacement_tokens;
 
     /**
-     * @param list<array{0: string, 1: int}> $replacement_tokens
+     * @param list<strict-array{0: string, 1: int, 2?: string}> $replacement_tokens
      */
     public function __construct(array $replacement_tokens)
     {
diff --git a/src/Psalm/Internal/Type/TypeCombiner.php b/src/Psalm/Internal/Type/TypeCombiner.php
index 3c9076dae..ba7f741ef 100644
--- a/src/Psalm/Internal/Type/TypeCombiner.php
+++ b/src/Psalm/Internal/Type/TypeCombiner.php
@@ -131,7 +131,9 @@ class TypeCombiner
 
         if (count($combination->value_types) === 1
             && !count($combination->objectlike_entries)
-            && !$combination->array_type_params
+            && (!$combination->array_type_params
+                || $combination->array_type_params[1]->isNever()
+            )
             && !$combination->builtin_type_params
             && !$combination->object_type_params
             && !$combination->named_object_types
@@ -1384,7 +1386,12 @@ class TypeCombiner
                     $objectlike = new TCallableKeyedArray(
                         $combination->objectlike_entries,
                         null,
-                        $combination->objectlike_sealed && !$combination->array_type_params,
+                        $combination->objectlike_sealed && (
+                            !$combination->array_type_params
+                            || (isset($combination->array_type_params[1])
+                                && $combination->array_type_params[1]->isNever()
+                            )
+                        ),
                         $previous_key_type,
                         $previous_value_type,
                         (bool)$combination->all_arrays_lists
@@ -1393,7 +1400,12 @@ class TypeCombiner
                     $objectlike = new TKeyedArray(
                         $combination->objectlike_entries,
                         null,
-                        $combination->objectlike_sealed && !$combination->array_type_params,
+                        $combination->objectlike_sealed && (
+                            !$combination->array_type_params
+                            || (isset($combination->array_type_params[1])
+                                && $combination->array_type_params[1]->isNever()
+                            )
+                        ),
                         $previous_key_type,
                         $previous_value_type,
                         (bool)$combination->all_arrays_lists
@@ -1419,7 +1431,7 @@ class TypeCombiner
     }
 
     /**
-     * @param  array{Union, Union}  $generic_type_params
+     * @param  strict-array{Union, Union}  $generic_type_params
      */
     private static function getArrayTypeFromGenericParams(
         ?Codebase $codebase,
@@ -1505,6 +1517,7 @@ class TypeCombiner
             if ($combination->all_arrays_lists) {
                 if ($combination->objectlike_entries
                     && $combination->objectlike_sealed
+                    && isset($combination->array_type_params[1])
                 ) {
                     $array_type = new TKeyedArray(
                         [$generic_type_params[1]],
diff --git a/src/Psalm/Internal/Type/TypeExpander.php b/src/Psalm/Internal/Type/TypeExpander.php
index 17e7abb65..a9700734f 100644
--- a/src/Psalm/Internal/Type/TypeExpander.php
+++ b/src/Psalm/Internal/Type/TypeExpander.php
@@ -327,46 +327,69 @@ class TypeExpander
                 $declaring_fq_classlike_name = $self_class;
             }
 
-            if ($evaluate_class_constants && $codebase->classOrInterfaceExists($declaring_fq_classlike_name)) {
-                $class_storage = $codebase->classlike_storage_provider->get($declaring_fq_classlike_name);
-
-                $type_alias_name = $return_type->alias_name;
-
-                if (isset($class_storage->type_aliases[$type_alias_name])) {
-                    $resolved_type_alias = $class_storage->type_aliases[$type_alias_name];
-
-                    if ($resolved_type_alias->replacement_atomic_types) {
-                        $replacement_atomic_types = $resolved_type_alias->replacement_atomic_types;
-
-                        $recursively_fleshed_out_types = [];
-
-                        foreach ($replacement_atomic_types as $replacement_atomic_type) {
-                            $more_recursively_fleshed_out_types = self::expandAtomic(
-                                $codebase,
-                                $replacement_atomic_type,
-                                $self_class,
-                                $static_class_type,
-                                $parent_class,
-                                $evaluate_class_constants,
-                                $evaluate_conditional_types,
-                                $final,
-                                $expand_generic,
-                                $expand_templates,
-                                $throw_on_unresolvable_constant,
-                            );
+            if (!($evaluate_class_constants && $codebase->classOrInterfaceExists($declaring_fq_classlike_name))) {
+                return [$return_type];
+            }
 
-                            $recursively_fleshed_out_types = [
-                                ...$more_recursively_fleshed_out_types,
-                                ...$recursively_fleshed_out_types
-                            ];
-                        }
+            $class_storage = $codebase->classlike_storage_provider->get($declaring_fq_classlike_name);
 
-                        return $recursively_fleshed_out_types;
-                    }
-                }
+            $type_alias_name = $return_type->alias_name;
+
+            if (!isset($class_storage->type_aliases[$type_alias_name])) {
+                return [$return_type];
             }
 
-            return [$return_type];
+            $resolved_type_alias = $class_storage->type_aliases[$type_alias_name];
+            $replacement_atomic_types = $resolved_type_alias->replacement_atomic_types;
+
+            if (!$replacement_atomic_types) {
+                return [$return_type];
+            }
+
+            $recursively_fleshed_out_types = [];
+            foreach ($replacement_atomic_types as $replacement_atomic_type) {
+                $more_recursively_fleshed_out_types = self::expandAtomic(
+                    $codebase,
+                    $replacement_atomic_type,
+                    $self_class,
+                    $static_class_type,
+                    $parent_class,
+                    $evaluate_class_constants,
+                    $evaluate_conditional_types,
+                    $final,
+                    $expand_generic,
+                    $expand_templates,
+                    $throw_on_unresolvable_constant,
+                );
+
+                $recursively_fleshed_out_types = [
+                    ...$more_recursively_fleshed_out_types,
+                    ...$recursively_fleshed_out_types
+                ];
+            }
+
+            foreach ($return_type->extra_types ?? [] as $alias) {
+                $more_recursively_fleshed_out_types = self::expandAtomic(
+                    $codebase,
+                    $alias,
+                    $self_class,
+                    $static_class_type,
+                    $parent_class,
+                    $evaluate_class_constants,
+                    $evaluate_conditional_types,
+                    $final,
+                    $expand_generic,
+                    $expand_templates,
+                    $throw_on_unresolvable_constant,
+                );
+
+                $recursively_fleshed_out_types = [
+                    ...$more_recursively_fleshed_out_types,
+                    ...$recursively_fleshed_out_types
+                ];
+            }
+
+            return $recursively_fleshed_out_types;
         }
 
         if ($return_type instanceof TKeyOf
@@ -492,7 +515,7 @@ class TypeExpander
                 );
             }
             unset($type_param);
-            /** @psalm-suppress ArgumentTypeCoercion Psalm bug */
+            /** @psalm-suppress InvalidArgument Psalm bug */
             $return_type = $return_type->setTypeParams($type_params);
         } elseif ($return_type instanceof TKeyedArray) {
             $properties = $return_type->properties;
@@ -964,12 +987,16 @@ class TypeExpander
             return [$return_type];
         }
 
+        $all_sealed = true;
         $properties = [];
         foreach ([$class_storage->name, ...array_values($class_storage->parent_classes)] as $class) {
             if (!$codebase->classExists($class)) {
                 continue;
             }
             $storage = $codebase->classlike_storage_provider->get($class);
+            if (!$storage->final) {
+                $all_sealed = false;
+            }
             foreach ($storage->properties as $key => $property) {
                 if (isset($properties[$key])) {
                     continue;
@@ -999,7 +1026,11 @@ class TypeExpander
         if ($properties === []) {
             return [$return_type];
         }
-        return [new TKeyedArray($properties)];
+        return [new TKeyedArray(
+            $properties,
+            null,
+            $all_sealed
+        )];
     }
 
     /**
diff --git a/src/Psalm/Internal/Type/TypeParser.php b/src/Psalm/Internal/Type/TypeParser.php
index 8790c0f9a..fe0b35f99 100644
--- a/src/Psalm/Internal/Type/TypeParser.php
+++ b/src/Psalm/Internal/Type/TypeParser.php
@@ -89,6 +89,7 @@ use function is_numeric;
 use function preg_match;
 use function preg_replace;
 use function reset;
+use function str_starts_with;
 use function stripslashes;
 use function strlen;
 use function strpos;
@@ -104,8 +105,8 @@ class TypeParser
     /**
      * Parses a string type representation
      *
-     * @param  list<array{0: string, 1: int, 2?: string}> $type_tokens
-     * @param  array{int,int}|null   $php_version
+     * @param  list<strict-array{0: string, 1: int, 2?: string}> $type_tokens
+     * @param  strict-array{int,int}|null   $php_version
      * @param  array<string, array<string, Union>> $template_type_map
      * @param  array<string, TypeAlias> $type_aliases
      *
@@ -1124,8 +1125,13 @@ class TypeParser
                 array_pop($intersection_types);
             }
 
+            $all_sealed = true;
+
             /** @var TKeyedArray $intersection_type */
             foreach ($intersection_types as $intersection_type) {
+                if (!$intersection_type->sealed) {
+                    $all_sealed = false;
+                }
                 foreach ($intersection_type->properties as $property => $property_type) {
                     if (!array_key_exists($property, $properties)) {
                         $properties[$property] = $property_type;
@@ -1161,7 +1167,7 @@ class TypeParser
             return new TKeyedArray(
                 $properties,
                 null,
-                false,
+                $all_sealed,
                 $previous_key_type ?? null,
                 $previous_value_type ?? null,
                 false,
@@ -1380,7 +1386,7 @@ class TypeParser
 
         $type = $parse_tree->value;
 
-        $is_tuple = true;
+        $is_list = true;
 
         foreach ($parse_tree->children as $i => $property_branch) {
             $class_string = false;
@@ -1417,7 +1423,7 @@ class TypeParser
                 } else {
                     $property_key = $property_branch->value;
                 }
-                $is_tuple = false;
+                $is_list = false;
             } else {
                 throw new TypeParseTreeException(
                     'Missing property type'
@@ -1442,30 +1448,45 @@ class TypeParser
             }
         }
 
-        if ($type !== 'array' && $type !== 'object' && $type !== 'callable-array') {
-            throw new TypeParseTreeException('Unexpected brace character');
-        }
-
-        if (!$properties) {
-            return new TArray([Type::getNever($from_docblock), Type::getNever($from_docblock)], $from_docblock);
-        }
-
         if ($type === 'object') {
             return new TObjectWithProperties($properties, [], [], $from_docblock);
         }
 
+        $callable = str_starts_with($type, 'callable-');
         $class = TKeyedArray::class;
-        if ($type === 'callable-array') {
+        if ($callable) {
             $class = TCallableKeyedArray::class;
+            $type = substr($type, 9);
+        }
+
+        $sealed = str_starts_with($type, 'strict-');
+        if ($sealed) {
+            $type = substr($type, 7);
+        }
+
+        if ($callable && !$sealed) {
+            throw new TypeParseTreeException('A callable array cannot be unsealed!');
+        }
+
+        if ($callable && !$properties) {
+            throw new TypeParseTreeException('A callable array cannot be empty!');
+        }
+
+        if ($type !== 'array' && $type !== 'list') {
+            throw new TypeParseTreeException('Unexpected brace character');
+        }
+
+        if (!$properties) {
+            return new TArray([Type::getNever($from_docblock), Type::getNever($from_docblock)], $from_docblock);
         }
 
         return new $class(
             $properties,
             $class_strings,
-            $is_tuple,
+            $sealed,
             null,
             null,
-            $is_tuple,
+            $is_list,
             $from_docblock
         );
     }
diff --git a/src/Psalm/Internal/Type/TypeTokenizer.php b/src/Psalm/Internal/Type/TypeTokenizer.php
index 842ca87bb..d55f1ece6 100644
--- a/src/Psalm/Internal/Type/TypeTokenizer.php
+++ b/src/Psalm/Internal/Type/TypeTokenizer.php
@@ -38,6 +38,7 @@ class TypeTokenizer
         'empty' => true,
         'callable' => true,
         'array' => true,
+        'strict-array' => true,
         'non-empty-array' => true,
         'non-empty-string' => true,
         'non-falsy-string' => true,
@@ -84,6 +85,7 @@ class TypeTokenizer
         'private-properties-of' => true,
         'non-empty-countable' => true,
         'list' => true,
+        'strict-list' => true,
         'non-empty-list' => true,
         'class-string-map' => true,
         'open-resource' => true,
@@ -95,7 +97,7 @@ class TypeTokenizer
     ];
 
     /**
-     * @var array<string, list<array{0: string, 1: int}>>
+     * @var array<string, list<strict-array{0: string, 1: int}>>
      */
     private static $memoized_tokens = [];
 
@@ -103,7 +105,7 @@ class TypeTokenizer
      * Tokenises a type string into an array of tuples where the first element
      * contains the string token and the second element contains its offset,
      *
-     * @return list<array{string, int}>
+     * @return list<strict-array{string, int}>
      *
      * @psalm-suppress PossiblyUndefinedIntArrayOffset
      */
@@ -299,7 +301,7 @@ class TypeTokenizer
             $was_space = false;
         }
 
-        /** @var list<array{0: string, 1: int}> $type_tokens */
+        /** @var list<strict-array{0: string, 1: int}> $type_tokens */
         self::$memoized_tokens[$string_type] = $type_tokens;
 
         return $type_tokens;
@@ -350,7 +352,7 @@ class TypeTokenizer
      * @param  array<string, mixed>|null       $template_type_map
      * @param  array<string, TypeAlias>|null   $type_aliases
      *
-     * @return list<array{0: string, 1: int, 2?: string}>
+     * @return list<strict-array{0: string, 1: int, 2?: string}>
      */
     public static function getFullyQualifiedTokens(
         string $string_type,
@@ -503,7 +505,7 @@ class TypeTokenizer
             }
         }
 
-        /** @var list<array{0: string, 1: int, 2?: string}> */
+        /** @var list<strict-array{0: string, 1: int, 2?: string}> */
         return $type_tokens;
     }
 
diff --git a/src/Psalm/Issue/TaintedInput.php b/src/Psalm/Issue/TaintedInput.php
index 66f09b226..7eb7a4e1b 100644
--- a/src/Psalm/Issue/TaintedInput.php
+++ b/src/Psalm/Issue/TaintedInput.php
@@ -18,13 +18,13 @@ abstract class TaintedInput extends CodeIssue
     public $journey_text;
 
     /**
-     * @var list<array{location: ?CodeLocation, label: string, entry_path_type: string}>
+     * @var list<strict-array{location: ?CodeLocation, label: string, entry_path_type: string}>
      * @readonly
      */
     public $journey = [];
 
     /**
-     * @param list<array{location: ?CodeLocation, label: string, entry_path_type: string}> $journey
+     * @param list<strict-array{location: ?CodeLocation, label: string, entry_path_type: string}> $journey
      */
     public function __construct(
         string $message,
@@ -39,7 +39,7 @@ abstract class TaintedInput extends CodeIssue
     }
 
     /**
-     * @return list<DataFlowNodeData|array{label: string, entry_path_type: string}>
+     * @return list<DataFlowNodeData|strict-array{label: string, entry_path_type: string}>
      */
     public function getTaintTrace(): array
     {
diff --git a/src/Psalm/IssueBuffer.php b/src/Psalm/IssueBuffer.php
index b2b805110..bcb778202 100644
--- a/src/Psalm/IssueBuffer.php
+++ b/src/Psalm/IssueBuffer.php
@@ -533,7 +533,7 @@ final class IssueBuffer
     }
 
     /**
-     * @param  array<string,array<string,array{o:int, s:array<int, string>}>>  $issue_baseline
+     * @param  array<string,array<string,strict-array{o:int, s:array<int, string>}>>  $issue_baseline
      *
      */
     public static function finish(
@@ -833,7 +833,7 @@ final class IssueBuffer
 
     /**
      * @param array<string, array<int, IssueData>> $issues_data
-     * @param array{int, int} $mixed_counts
+     * @param strict-array{int, int} $mixed_counts
      *
      */
     public static function getOutput(
diff --git a/src/Psalm/Report/ConsoleReport.php b/src/Psalm/Report/ConsoleReport.php
index f968326f1..6398b4792 100644
--- a/src/Psalm/Report/ConsoleReport.php
+++ b/src/Psalm/Report/ConsoleReport.php
@@ -77,7 +77,7 @@ final class ConsoleReport extends Report
     }
 
     /**
-     * @param non-empty-list<DataFlowNodeData|array{label: string, entry_path_type: string}> $taint_trace
+     * @param non-empty-list<DataFlowNodeData|strict-array{label: string, entry_path_type: string}> $taint_trace
      */
     private function getTaintSnippets(array $taint_trace): string
     {
diff --git a/src/Psalm/Report/JunitReport.php b/src/Psalm/Report/JunitReport.php
index 9ff305908..d91185a87 100644
--- a/src/Psalm/Report/JunitReport.php
+++ b/src/Psalm/Report/JunitReport.php
@@ -101,7 +101,7 @@ final class JunitReport extends Report
     }
 
     /**
-     * @param  array{
+     * @param  strict-array{
      *         errors: int,
      *         warnings: int,
      *         failures: list<IssueData>
diff --git a/src/Psalm/Report/PhpStormReport.php b/src/Psalm/Report/PhpStormReport.php
index 75294cafd..e15f3afef 100644
--- a/src/Psalm/Report/PhpStormReport.php
+++ b/src/Psalm/Report/PhpStormReport.php
@@ -61,7 +61,7 @@ final class PhpStormReport extends Report
     }
 
     /**
-     * @param non-empty-list<DataFlowNodeData|array{label: string, entry_path_type: string}> $taint_trace
+     * @param non-empty-list<DataFlowNodeData|strict-array{label: string, entry_path_type: string}> $taint_trace
      */
     private function getTaintSnippets(array $taint_trace): string
     {
diff --git a/src/Psalm/Storage/FunctionLikeStorage.php b/src/Psalm/Storage/FunctionLikeStorage.php
index 0ddabfabb..cba56b6fe 100644
--- a/src/Psalm/Storage/FunctionLikeStorage.php
+++ b/src/Psalm/Storage/FunctionLikeStorage.php
@@ -225,7 +225,7 @@ abstract class FunctionLikeStorage implements HasAttributesInterface
     public $attributes = [];
 
     /**
-     * @var list<array{fqn: string, params: array<int>, return: bool}>|null
+     * @var list<strict-array{fqn: string, params: array<int>, return: bool}>|null
      */
     public $proxy_calls = [];
 
diff --git a/src/Psalm/Type.php b/src/Psalm/Type.php
index b00696b0b..2d7e3b9eb 100644
--- a/src/Psalm/Type.php
+++ b/src/Psalm/Type.php
@@ -70,7 +70,7 @@ abstract class Type
     /**
      * Parses a string type representation
      *
-     * @param  array{int,int}|null   $php_version
+     * @param  strict-array{int,int}|null   $php_version
      * @param  array<string, array<string, Union>> $template_type_map
      */
     public static function parseString(
diff --git a/src/Psalm/Type/Atomic.php b/src/Psalm/Type/Atomic.php
index 26f003c89..ae2276cbb 100644
--- a/src/Psalm/Type/Atomic.php
+++ b/src/Psalm/Type/Atomic.php
@@ -289,7 +289,7 @@ abstract class Atomic implements TypeNode
 
             case 'positive-int':
                 return new TIntRange(1, null);
-            
+
             case 'non-positive-int':
                 return new TIntRange(null, 0);
 
diff --git a/src/Psalm/Type/Atomic/CallableTrait.php b/src/Psalm/Type/Atomic/CallableTrait.php
index f53d37342..6368058b7 100644
--- a/src/Psalm/Type/Atomic/CallableTrait.php
+++ b/src/Psalm/Type/Atomic/CallableTrait.php
@@ -205,7 +205,7 @@ trait CallableTrait
     }
 
     /**
-     * @return array{list<FunctionLikeParameter>|null, Union|null}|null
+     * @return strict-array{list<FunctionLikeParameter>|null, Union|null}|null
      */
     protected function replaceCallableTemplateTypesWithStandins(
         TemplateResult $template_result,
@@ -281,7 +281,7 @@ trait CallableTrait
 
 
     /**
-     * @return array{list<FunctionLikeParameter>|null, Union|null}|null
+     * @return strict-array{list<FunctionLikeParameter>|null, Union|null}|null
      */
     protected function replaceCallableTemplateTypesWithArgTypes(
         TemplateResult $template_result,
diff --git a/src/Psalm/Type/Atomic/TArray.php b/src/Psalm/Type/Atomic/TArray.php
index 7a15176da..fc8f030f1 100644
--- a/src/Psalm/Type/Atomic/TArray.php
+++ b/src/Psalm/Type/Atomic/TArray.php
@@ -18,12 +18,12 @@ use function get_class;
 class TArray extends Atomic
 {
     /**
-     * @use GenericTrait<array{Union, Union}>
+     * @use GenericTrait<strict-array{Union, Union}>
      */
     use GenericTrait;
 
     /**
-     * @var array{Union, Union}
+     * @var strict-array{Union, Union}
      */
     public array $type_params;
 
@@ -35,7 +35,7 @@ class TArray extends Atomic
     /**
      * Constructs a new instance of a generic type
      *
-     * @param array{Union, Union} $type_params
+     * @param strict-array{Union, Union} $type_params
      */
     public function __construct(array $type_params, bool $from_docblock = false)
     {
diff --git a/src/Psalm/Type/Atomic/TCallableKeyedArray.php b/src/Psalm/Type/Atomic/TCallableKeyedArray.php
index 21a774e45..4c452f8e9 100644
--- a/src/Psalm/Type/Atomic/TCallableKeyedArray.php
+++ b/src/Psalm/Type/Atomic/TCallableKeyedArray.php
@@ -8,10 +8,6 @@ namespace Psalm\Type\Atomic;
  */
 final class TCallableKeyedArray extends TKeyedArray
 {
-    public const KEY = 'callable-array';
-
-    public function getKey(bool $include_extra = true): string
-    {
-        return 'array';
-    }
+    protected const NAME_ARRAY = 'callable-array';
+    protected const NAME_LIST = 'callable-list';
 }
diff --git a/src/Psalm/Type/Atomic/TIterable.php b/src/Psalm/Type/Atomic/TIterable.php
index 8df955ff5..57446c62d 100644
--- a/src/Psalm/Type/Atomic/TIterable.php
+++ b/src/Psalm/Type/Atomic/TIterable.php
@@ -21,12 +21,12 @@ final class TIterable extends Atomic
 {
     use HasIntersectionTrait;
     /**
-     * @use GenericTrait<array{Union, Union}>
+     * @use GenericTrait<strict-array{Union, Union}>
      */
     use GenericTrait;
 
     /**
-     * @var array{Union, Union}
+     * @var strict-array{Union, Union}
      */
     public array $type_params;
 
@@ -41,7 +41,7 @@ final class TIterable extends Atomic
     public $has_docblock_params = false;
 
     /**
-     * @param array{Union, Union}|array<never, never> $type_params
+     * @param strict-array{Union, Union}|array<never, never> $type_params
      * @param array<string, TNamedObject|TTemplateParam|TIterable|TObjectWithProperties> $extra_types
      */
     public function __construct(array $type_params = [], array $extra_types = [], bool $from_docblock = false)
diff --git a/src/Psalm/Type/Atomic/TKeyedArray.php b/src/Psalm/Type/Atomic/TKeyedArray.php
index be933b211..b0a6c3826 100644
--- a/src/Psalm/Type/Atomic/TKeyedArray.php
+++ b/src/Psalm/Type/Atomic/TKeyedArray.php
@@ -46,7 +46,10 @@ class TKeyedArray extends Atomic
     public $class_strings;
 
     /**
-     * @var bool - whether or not the objectlike has been created from an explicit array
+     * True if the objectlike has been created from an explicit array,
+     * or if we're sure that this objectlike has only these keys.
+     *
+     * @var bool
      */
     public $sealed = false;
 
@@ -70,7 +73,9 @@ class TKeyedArray extends Atomic
     public $is_list = false;
 
     /** @var non-empty-lowercase-string */
-    public const KEY = 'array';
+    protected const NAME_ARRAY = 'array';
+    /** @var non-empty-lowercase-string */
+    protected const NAME_LIST = 'list';
 
     /**
      * Constructs a new instance of a generic type
@@ -87,6 +92,9 @@ class TKeyedArray extends Atomic
         bool $is_list = false,
         bool $from_docblock = false
     ) {
+        if ($previous_key_type || $previous_value_type) {
+            $sealed = false;
+        }
         $this->properties = $properties;
         $this->class_strings = $class_strings;
         $this->sealed = $sealed;
@@ -111,12 +119,41 @@ class TKeyedArray extends Atomic
         return $cloned;
     }
 
+    /**
+     * @return static
+     */
+    public function setSealed(bool $sealed): self
+    {
+        if ($sealed === $this->sealed) {
+            return $this;
+        }
+        $cloned = clone $this;
+        $cloned->sealed = $sealed;
+        if ($sealed) {
+            $cloned->previous_key_type = null;
+            $cloned->previous_value_type = null;
+        }
+        return $cloned;
+    }
+
     public function getId(bool $exact = true, bool $nested = false): string
     {
         $property_strings = [];
 
+        if ($this->is_list) {
+            $use_list_syntax = true;
+            foreach ($this->properties as $property) {
+                if ($property->possibly_undefined) {
+                    $use_list_syntax = false;
+                    break;
+                }
+            }
+        } else {
+            $use_list_syntax = false;
+        }
+
         foreach ($this->properties as $name => $type) {
-            if ($this->is_list && $this->sealed) {
+            if ($use_list_syntax) {
                 $property_strings[$name] = $type->getId($exact);
                 continue;
             }
@@ -132,11 +169,17 @@ class TKeyedArray extends Atomic
                 . ': ' . $type->getId($exact);
         }
 
-        if (!$this->is_list) {
+        if ($this->is_list) {
+            $key = static::NAME_LIST;
+        } else {
+            $key = static::NAME_ARRAY;
             sort($property_strings);
         }
+        if ($this->sealed) {
+            $key = "strict-$key";
+        }
 
-        return static::KEY . '{' .
+        return $key . '{' .
                 implode(', ', $property_strings) .
                 '}'
                 . ($this->previous_value_type
@@ -168,7 +211,29 @@ class TKeyedArray extends Atomic
 
         $suffixed_properties = [];
 
+        if ($this->is_list) {
+            $use_list_syntax = true;
+            foreach ($this->properties as $property) {
+                if ($property->possibly_undefined) {
+                    $use_list_syntax = false;
+                    break;
+                }
+            }
+        } else {
+            $use_list_syntax = false;
+        }
+
         foreach ($this->properties as $name => $type) {
+            if ($use_list_syntax) {
+                $suffixed_properties[$name] = $type->toNamespacedString(
+                    $namespace,
+                    $aliased_classes,
+                    $this_class,
+                    false
+                );
+                continue;
+            }
+
             $class_string_suffix = '';
             if (isset($this->class_strings[$name])) {
                 $class_string_suffix = '::class';
@@ -185,7 +250,9 @@ class TKeyedArray extends Atomic
                 );
         }
 
-        return static::KEY . '{' . implode(', ', $suffixed_properties) . '}';
+        return  ($this->sealed ? 'strict-' : '') .
+                ($this->is_list ? static::NAME_LIST : static::NAME_ARRAY) . '{' .
+                implode(', ', $suffixed_properties) . '}';
     }
 
     /**
@@ -197,7 +264,7 @@ class TKeyedArray extends Atomic
         ?string $this_class,
         int $analysis_php_version_id
     ): string {
-        return $this->getKey();
+        return 'array';
     }
 
     public function canBeFullyExpressedInPhp(int $analysis_php_version_id): bool
@@ -303,8 +370,7 @@ class TKeyedArray extends Atomic
 
     public function getKey(bool $include_extra = true): string
     {
-        /** @var string */
-        return static::KEY;
+        return 'array';
     }
 
     /**
@@ -414,7 +480,7 @@ class TKeyedArray extends Atomic
 
     public function getAssertionString(): string
     {
-        return $this->getKey();
+        return $this->is_list ? 'list' : 'array';
     }
 
     public function getList(): TList
diff --git a/src/Psalm/Type/Atomic/TNonEmptyArray.php b/src/Psalm/Type/Atomic/TNonEmptyArray.php
index 2c2fba076..c1118ab82 100644
--- a/src/Psalm/Type/Atomic/TNonEmptyArray.php
+++ b/src/Psalm/Type/Atomic/TNonEmptyArray.php
@@ -27,7 +27,7 @@ class TNonEmptyArray extends TArray
     public $value = 'non-empty-array';
 
     /**
-     * @param array{Union, Union} $type_params
+     * @param strict-array{Union, Union} $type_params
      * @param positive-int|null $count
      * @param positive-int|null $min_count
      */
diff --git a/src/Psalm/Type/MutableUnion.php b/src/Psalm/Type/MutableUnion.php
index 407e9658c..2786405f5 100644
--- a/src/Psalm/Type/MutableUnion.php
+++ b/src/Psalm/Type/MutableUnion.php
@@ -470,6 +470,7 @@ final class MutableUnion implements TypeNode, Stringable
      */
     public function freeze(): Union
     {
+        /** @psalm-suppress InvalidArgument It's actually filtered internally */
         return new Union($this->getAtomicTypes(), get_object_vars($this));
     }
 
diff --git a/src/Psalm/Type/Reconciler.php b/src/Psalm/Type/Reconciler.php
index 8f6fff0a8..73d38b8b3 100644
--- a/src/Psalm/Type/Reconciler.php
+++ b/src/Psalm/Type/Reconciler.php
@@ -96,7 +96,7 @@ class Reconciler
      * @param  array<string, bool>       $referenced_var_ids
      * @param  array<string, array<string, Union>> $template_type_map
      *
-     * @return array{array<string, Union>, array<string, string>}
+     * @return strict-array{array<string, Union>, array<string, string>}
      *
      * @psalm-suppress ComplexMethod
      */
diff --git a/src/Psalm/Type/Union.php b/src/Psalm/Type/Union.php
index f20744e50..2a964a3d7 100644
--- a/src/Psalm/Type/Union.php
+++ b/src/Psalm/Type/Union.php
@@ -15,7 +15,7 @@ use function get_object_vars;
 
 /**
  * @psalm-immutable
- * @psalm-type TProperties=array{
+ * @psalm-type TProperties=strict-array{
  *      from_docblock?: bool,
  *      from_calculation?: bool,
  *      from_property?: bool,
@@ -336,6 +336,7 @@ final class Union implements TypeNode, Stringable
      */
     public function getBuilder(): MutableUnion
     {
+        /** @psalm-suppress InvalidArgument It's actually filtered internally */
         return new MutableUnion($this->getAtomicTypes(), get_object_vars($this));
     }
 
diff --git a/stubs/CoreGenericFunctions.phpstub b/stubs/CoreGenericFunctions.phpstub
index c1a589f6c..e80a831f7 100644
--- a/stubs/CoreGenericFunctions.phpstub
+++ b/stubs/CoreGenericFunctions.phpstub
@@ -512,7 +512,7 @@ function sscanf(string $string, string $format, &...$vars) {}
  *
  * @return (
  *     func_num_args() is 1
- *     ? array{dirname: string, basename: string, extension?: string, filename: string}
+ *     ? strict-array{dirname: string, basename: string, extension?: string, filename: string}
  *     : string
  * )
  */
@@ -679,7 +679,7 @@ function explode(string $separator, string $string, int $limit = -1) : array {}
  *
  * @param TFlags $flags
  *
- * @return (TFlags is 0|2 ? non-empty-list<string>|false : (TFlags is 1|3 ? list<string>|false : list<array{string,int}>|false))
+ * @return (TFlags is 0|2 ? non-empty-list<string>|false : (TFlags is 1|3 ? list<string>|false : list<strict-array{string,int}>|false))
  *
  * @psalm-ignore-falsable-return
  */
@@ -1006,15 +1006,15 @@ function preg_replace_callback($pattern, $callback, $subject, int $limit = -1, &
  *          : (TFlags is 2
  *              ? list<array<string>>
  *              : (TFlags is 256|257
- *                  ? array<list<array{string, int}>>
+ *                  ? array<list<strict-array{string, int}>>
  *                  : (TFlags is 258
- *                      ? list<array<array{string, int}>>
+ *                      ? list<array<strict-array{string, int}>>
  *                      : (TFlags is 512|513
  *                          ? array<list<?string>>
  *                          : (TFlags is 514
  *                              ? list<array<?string>>
  *                              : (TFlags is 770
- *                                  ? list<array<array{?string, int}>>
+ *                                  ? list<array<strict-array{?string, int}>>
  *                                  : array
  *                              )
  *                          )
@@ -1036,9 +1036,9 @@ function preg_match_all($pattern, $subject, &$matches = [], int $flags = 1, int
  * @param string $subject
  * @param mixed $matches
  * @param TFlags $flags
- * @param-out (TFlags is 256 ? array<array-key, array{string, 0|positive-int}|array{'', -1}> :
+ * @param-out (TFlags is 256 ? array<array-key, strict-array{string, 0|positive-int}|strict-array{'', -1}> :
  *             TFlags is 512 ? array<array-key, string|null> :
- *             TFlags is 768 ? array<array-key, array{string, 0|positive-int}|array{null, -1}> :
+ *             TFlags is 768 ? array<array-key, strict-array{string, 0|positive-int}|strict-array{null, -1}> :
  *                             array<array-key, string>
  *            ) $matches
  * @return 1|0|false
@@ -1138,7 +1138,7 @@ function bcdiv(string $num1, string $num2, int $scale = 0): ?string {}
 function strval ($value): string {}
 
 /**
- * @return ($string is non-empty-string ? non-empty-list<string> : non-empty-list<string>|array{null})
+ * @return ($string is non-empty-string ? non-empty-list<string> : non-empty-list<string>|strict-array{null})
  * @psalm-pure
  *
  * @psalm-flow ($string) -> return
diff --git a/stubs/CoreImmutableClasses.phpstub b/stubs/CoreImmutableClasses.phpstub
index 91c0a41c6..268bba8e4 100644
--- a/stubs/CoreImmutableClasses.phpstub
+++ b/stubs/CoreImmutableClasses.phpstub
@@ -155,7 +155,7 @@ interface Throwable
 
     /**
      * @psalm-mutation-free
-     * @return list<array{file?:string,line?:int,function?:string,class?:class-string,type?:'::'|'->',args?:array<mixed>}>
+     * @return list<strict-array{file?:string,line?:int,function?:string,class?:class-string,type?:'::'|'->',args?:array<mixed>}>
      */
     public function getTrace() : array;
 
@@ -234,7 +234,7 @@ class Exception implements Throwable
 
     /**
      * @psalm-mutation-free
-     * @return list<array{file?:string,line?:int,function?:string,class?:class-string,type?:'::'|'->',args?:array<mixed>}>
+     * @return list<strict-array{file?:string,line?:int,function?:string,class?:class-string,type?:'::'|'->',args?:array<mixed>}>
      */
     public final function getTrace() : array {}
 
@@ -311,7 +311,7 @@ class Error implements Throwable
 
     /**
      * @psalm-mutation-free
-     * @return list<array{file?:string,line?:int,function?:string,class?:class-string,type?:'::'|'->',args?:array<mixed>}>
+     * @return list<strict-array{file?:string,line?:int,function?:string,class?:class-string,type?:'::'|'->',args?:array<mixed>}>
      */
     public final function getTrace() : array {}
 
diff --git a/stubs/phpparser.phpstub b/stubs/phpparser.phpstub
index 834f8f625..856cd2fec 100644
--- a/stubs/phpparser.phpstub
+++ b/stubs/phpparser.phpstub
@@ -18,5 +18,5 @@ abstract class CallLike extends Expr {
      * @psalm-pure
      * @return list<Arg>
      */
-    public function getArgs(): array{}
+    public function getArgs(): array {}
 }
diff --git a/tests/AnnotationTest.php b/tests/AnnotationTest.php
index c485f07b4..950fcd1eb 100644
--- a/tests/AnnotationTest.php
+++ b/tests/AnnotationTest.php
@@ -146,9 +146,6 @@ class AnnotationTest extends TestCase
         $this->analyzeFile('somefile.php', new Context());
     }
 
-    /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
-     */
     public function providerValidCodeParse(): iterable
     {
         return [
@@ -403,7 +400,7 @@ class AnnotationTest extends TestCase
             ],
             'allowOptionalParamsToBeEmptyArray' => [
                 'code' => '<?php
-                    /** @param array{b?: int, c?: string} $_a */
+                    /** @param strict-array{b?: int, c?: string} $_a */
                     function foo(array $_a = []) : void {}',
             ],
             'allowEmptyVarAnnotation' => [
@@ -424,7 +421,7 @@ class AnnotationTest extends TestCase
             ],
             'megaClosureAnnotationWithoutSpacing' => [
                 'code' => '<?php
-                    /** @var array{a:Closure():(array<mixed, mixed>|null), b?:Closure():array<mixed, mixed>, c?:Closure():array<mixed, mixed>, d?:Closure():array<mixed, mixed>, e?:Closure():(array{f:null|string, g:null|string, h:null|string, i:string, j:mixed, k:mixed, l:mixed, m:mixed, n:bool, o?:array{0:string}}|null), p?:Closure():(array{f:null|string, g:null|string, h:null|string, q:string, i:string, j:mixed, k:mixed, l:mixed, m:mixed, n:bool, o?:array{0:string}}|null), r?:Closure():(array<mixed, mixed>|null), s:array<mixed, mixed>} */
+                    /** @var strict-array{a:Closure():(array<mixed, mixed>|null), b?:Closure():array<mixed, mixed>, c?:Closure():array<mixed, mixed>, d?:Closure():array<mixed, mixed>, e?:Closure():(strict-array{f:null|string, g:null|string, h:null|string, i:string, j:mixed, k:mixed, l:mixed, m:mixed, n:bool, o?:strict-array{0:string}}|null), p?:Closure():(strict-array{f:null|string, g:null|string, h:null|string, q:string, i:string, j:mixed, k:mixed, l:mixed, m:mixed, n:bool, o?:strict-array{0:string}}|null), r?:Closure():(array<mixed, mixed>|null), s:array<mixed, mixed>} */
                     $arr = [];
 
                     $arr["a"]();',
@@ -432,12 +429,12 @@ class AnnotationTest extends TestCase
             'megaClosureAnnotationWithSpacing' => [
                 'code' => '<?php
                     /**
-                     * @var array{
+                     * @var strict-array{
                      * a: Closure() : (array<mixed, mixed>|null),
                      * b?: Closure() : array<mixed, mixed>,
                      * c?: Closure() : array<mixed, mixed>,
                      * d?: Closure() : array<mixed, mixed>,
-                     * e?: Closure() : (array{
+                     * e?: Closure() : (strict-array{
                      *   f: null|string,
                      *   g: null|string,
                      *   h: null|string,
@@ -447,9 +444,9 @@ class AnnotationTest extends TestCase
                      *   l: mixed,
                      *   m: mixed,
                      *   n: bool,
-                     *   o?: array{0:string}
+                     *   o?: strict-array{0:string}
                      * }|null),
-                     * p?: Closure() : (array{
+                     * p?: Closure() : (strict-array{
                      *   f: null|string,
                      *   g: null|string,
                      *   h: null|string,
@@ -460,7 +457,7 @@ class AnnotationTest extends TestCase
                      *   l: mixed,
                      *   m: mixed,
                      *   n: bool,
-                     *   o?: array{0:string}
+                     *   o?: strict-array{0:string}
                      * }|null),
                      * r?: Closure() : (array<mixed, mixed>|null),
                      * s: array<mixed, mixed>
@@ -480,7 +477,7 @@ class AnnotationTest extends TestCase
                      *     array<int, string>
                      * >
                      *
-                     * @psalm-type RuleArray = array{
+                     * @psalm-type RuleArray = strict-array{
                      *     rule: string,
                      *     controller?: class-string<\Exception>,
                      *     redirect?: string,
@@ -496,7 +493,7 @@ class AnnotationTest extends TestCase
             'builtInClassInAShape' => [
                 'code' => '<?php
                     /**
-                     * @return array{d:Exception}
+                     * @return strict-array{d:Exception}
                      * @psalm-suppress InvalidReturnType
                      */
                     function f() {}'
@@ -714,7 +711,7 @@ class AnnotationTest extends TestCase
                     }
 
                     /**
-                     * @psalm-type _A=array{elt:int}
+                     * @psalm-type _A=strict-array{elt:int}
                      * @param _A $p
                      * @return _A
                      */
@@ -924,10 +921,10 @@ class AnnotationTest extends TestCase
             'allowClosingComma' => [
                 'code' => '<?php
                     /**
-                     * @psalm-type _Alias=array{
+                     * @psalm-type _Alias=strict-array{
                      *    foo: string,
                      *    bar: string,
-                     *    baz: array{
+                     *    baz: strict-array{
                      *       a: int,
                      *    },
                      * }
@@ -935,10 +932,10 @@ class AnnotationTest extends TestCase
                     class Foo { }
 
                     /**
-                     * @param array{
+                     * @param strict-array{
                      *    foo: string,
                      *    bar: string,
-                     *    baz: array{
+                     *    baz: strict-array{
                      *       a: int,
                      *    },
                      * } $foo
@@ -948,7 +945,7 @@ class AnnotationTest extends TestCase
                     }
 
                     /**
-                     * @var array{
+                     * @var strict-array{
                      *    foo:string,
                      *    bar:string,
                      *    baz:string,
@@ -979,7 +976,7 @@ class AnnotationTest extends TestCase
             'psalmTypeAnnotationAboveReturn' => [
                 'code' => '<?php
                     /**
-                     * @psalm-type Person = array{name: string, age: int}
+                     * @psalm-type Person = strict-array{name: string, age: int}
                      */
 
                     /**
@@ -996,7 +993,7 @@ class AnnotationTest extends TestCase
                     /** @param non-empty-array $_bar */
                     function foo(array $_bar) : void { }
 
-                    /** @var array{0:list<string>, 1:list<int>} */
+                    /** @var strict-array{0:list<string>, 1:list<int>} */
                     $bar = [[], []];
 
                     foo($bar);'
@@ -1032,7 +1029,7 @@ class AnnotationTest extends TestCase
             'parseTrailingCommaInReturn' => [
                 'code' => '<?php
                     /**
-                     * @psalm-return array{
+                     * @psalm-return strict-array{
                      *     a: int,
                      *     b: string,
                      * }
@@ -1079,7 +1076,7 @@ class AnnotationTest extends TestCase
                 'code' => '<?php
                     $_arr = ["foo\\bar\nbaz" => "literal"];',
                 'assertions' => [
-                    '$_arr' => 'array{\'foo\\\\bar\nbaz\': string}'
+                    '$_arr' => 'strict-array{\'foo\\\\bar\nbaz\': string}'
                 ]
             ],
             'doubleSpaceBeforeAt' => [
@@ -1101,7 +1098,7 @@ class AnnotationTest extends TestCase
 
                     function example(string $s): void {
                         if (preg_match(\'{foo-(\w+)}\', $s, $m)) {
-                          /** @var array{string, string} $m */
+                          /** @var strict-array{string, string} $m */
                           takesString($m[1]);
                         }
                     }
@@ -1255,7 +1252,7 @@ class AnnotationTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -1561,7 +1558,7 @@ class AnnotationTest extends TestCase
                      * @psalm-type aType null|"a"|"b"|"c"|"d"
                      */
 
-                    /** @psalm-return array{0:bool,1:aType} */
+                    /** @psalm-return strict-array{0:bool,1:aType} */
                     function f(): array {
                         return [(bool)rand(0,1), rand(0,1) ? "z" : null];
                     }',
@@ -1578,7 +1575,7 @@ class AnnotationTest extends TestCase
             'noCrashOnHalfDoneTKeyedArrayPropertyType' => [
                 'code' => '<?php
                     class A {
-                        /** @var array{ */
+                        /** @var strict-array{ */
                         private $foo = [];
                     }',
                 'error_message' => 'InvalidDocblock',
@@ -1629,7 +1626,7 @@ class AnnotationTest extends TestCase
             'badPsalmType' => [
                 'code' => '<?php
                     /**
-                     * @psalm-type Foo = array{a:}
+                     * @psalm-type Foo = strict-array{a:}
                      */',
                 'error_message' => 'InvalidDocblock',
             ],
@@ -1729,7 +1726,7 @@ class AnnotationTest extends TestCase
             ],
             'identifyReturnType' => [
                 'code' => '<?php
-                    /** @return array{hello: string} */
+                    /** @return strict-array{hello: string} */
                     function foo() {}',
                 'error_message' => 'InvalidReturnType - src' . DIRECTORY_SEPARATOR . 'somefile.php:2:33',
             ],
diff --git a/tests/ArgTest.php b/tests/ArgTest.php
index f643fc1d4..90bb1ebb3 100644
--- a/tests/ArgTest.php
+++ b/tests/ArgTest.php
@@ -11,7 +11,7 @@ class ArgTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -39,7 +39,7 @@ class ArgTest extends TestCase
                     $a = [[1, 2]];
                     $b = array_merge([], ...$a);',
                 'assertions' => [
-                    '$b' => 'array{0: int, 1: int}',
+                    '$b===' => 'strict-list{1, 2}',
                 ],
             ],
             'preserveTypesWhenUnpacking' => [
@@ -120,7 +120,7 @@ class ArgTest extends TestCase
                     sort($c);
                 ',
                 'assertions' => [
-                    '$a' => 'array{a: int, b: int}',
+                    '$a' => 'strict-array{a: int, b: int}',
                     '$b' => 'non-empty-list<int>',
                     '$c' => 'list<never>',
                 ],
@@ -241,7 +241,7 @@ class ArgTest extends TestCase
                     }
 
                     /**
-                     * @param array{age: int, name: string, email: string} $input
+                     * @param strict-array{age: int, name: string, email: string} $input
                      */
                     function foo(array $input) : CustomerData {
                         return new CustomerData(
@@ -312,11 +312,22 @@ class ArgTest extends TestCase
                     }
                 ',
             ],
+            'SealedAcceptSealed' => [
+                'code' => '<?php
+                    /** @param strict-array{test: string} $a */
+                    function a(array $a): string {
+                        return $a["test"];
+                    }
+
+                    $sealed = ["test" => "str"];
+                    a($sealed);
+                ',
+            ],
         ];
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -399,7 +410,7 @@ class ArgTest extends TestCase
                     }
 
                     /**
-                     * @param array{age: int, name: string, email: string} $input
+                     * @param strict-array{age: int, name: string, email: string} $input
                      */
                     function foo(array $input) : CustomerData {
                         return new CustomerData(
@@ -434,7 +445,7 @@ class ArgTest extends TestCase
                     }
 
                     /**
-                     * @param array{aage: int, name: string, email: string} $input
+                     * @param strict-array{aage: int, name: string, email: string} $input
                      */
                     function foo(array $input) : CustomerData {
                         return new CustomerData(...$input);
@@ -456,7 +467,7 @@ class ArgTest extends TestCase
                     }
 
                     /**
-                     * @param array{age: int, name: string, email: string} $input
+                     * @param strict-array{age: int, name: string, email: string} $input
                      */
                     function foo(array $input) : CustomerData {
                         return new CustomerData(
@@ -486,7 +497,7 @@ class ArgTest extends TestCase
                     }
 
                     /**
-                     * @param array{id: int, name: string} $data
+                     * @param strict-array{id: int, name: string} $data
                      */
                     function processUserDataInvalid(array $data) : User {
                         return new User(...$data);
@@ -506,7 +517,7 @@ class ArgTest extends TestCase
                     }
 
                     /**
-                     * @param array{id: int, name: string} $data
+                     * @param strict-array{id: int, name: string} $data
                      */
                     function processUserDataInvalid(array $data) : User {
                         /** @psalm-suppress MixedArgument */
@@ -724,6 +735,31 @@ class ArgTest extends TestCase
                 ',
                 'error_message' => 'TooFewArguments',
             ],
+            'SealedRefuseUnsealed' => [
+                'code' => '<?php
+                    /** @param strict-array{test: string} $a */
+                    function a(array $a): string {
+                        return $a["test"];
+                    }
+
+                    /** @var array{test: string} */
+                    $unsealed = [];
+                    a($unsealed);
+                ',
+                'error_message' => 'InvalidArgument',
+            ],
+            'SealedRefuseSealedExtra' => [
+                'code' => '<?php
+                    /** @param strict-array{test: string} $a */
+                    function a(array $a): string {
+                        return $a["test"];
+                    }
+
+                    $sealedExtraKeys = ["test" => "str", "somethingElse" => "test"];
+                    a($sealedExtraKeys);
+                ',
+                'error_message' => 'InvalidArgument',
+            ],
         ];
     }
 }
diff --git a/tests/ArrayAccessTest.php b/tests/ArrayAccessTest.php
index fdf1f4391..23d25cae1 100644
--- a/tests/ArrayAccessTest.php
+++ b/tests/ArrayAccessTest.php
@@ -431,7 +431,7 @@ class ArrayAccessTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -528,7 +528,7 @@ class ArrayAccessTest extends TestCase
                     function takesBool(bool $b): void {}
 
                     /**
-                     * @param array{int, string, bool} $b
+                     * @param strict-array{int, string, bool} $b
                      */
                     function a(array $b): void {
                         takesInt($b[0]);
@@ -555,7 +555,7 @@ class ArrayAccessTest extends TestCase
                     namespace N;
 
                     /**
-                     * @psalm-param array{key?:string} $p
+                     * @psalm-param strict-array{key?:string} $p
                      */
                     function f(array $p): void
                     {
@@ -575,8 +575,8 @@ class ArrayAccessTest extends TestCase
                     unset($x3[$k]);',
                 'assertions' => [
                     '$x1===' => 'array<never, never>',
-                    '$x2===' => "array{b: 'value'}",
-                    '$x3===' => "array{b: 'value'}",
+                    '$x2===' => "strict-array{b: 'value'}",
+                    '$x3===' => "strict-array{b: 'value'}",
                 ]
             ],
             'domNodeListAccessible' => [
@@ -605,7 +605,7 @@ class ArrayAccessTest extends TestCase
             ],
             'suppressPossiblyUndefinedStringArrayOffet' => [
                 'code' => '<?php
-                    /** @var array{a?:string} */
+                    /** @var strict-array{a?:string} */
                     $entry = ["a"];
 
                     ["a" => $elt] = $entry;
@@ -886,7 +886,7 @@ class ArrayAccessTest extends TestCase
             'arrayAccessAfterByRefArrayOffsetAssignment' => [
                 'code' => '<?php
                     /**
-                     * @param array{param1: array} $params
+                     * @param strict-array{param1: array} $params
                      */
                     function dispatch(array $params) : void {
                         $params["param1"]["foo"] = "bar";
@@ -1021,7 +1021,7 @@ class ArrayAccessTest extends TestCase
             'assignmentListCheckForNull' => [
                 'code' => '<?php
                     /**
-                     * @return array{0: int, 1:string}|null
+                     * @return strict-array{0: int, 1:string}|null
                      */
                     function bar(int $i) {
                         if ( $i < 0)
@@ -1107,7 +1107,7 @@ class ArrayAccessTest extends TestCase
                     $_arr2[$index] = 5;',
                 'assertions' => [
                     '$_arr1===' => 'non-empty-array<1, 5>',
-                    '$_arr2===' => 'array{1: 5}',
+                    '$_arr2===' => 'strict-array{1: 5}',
                 ]
             ],
             'accessArrayWithSingleStringLiteralOffset' => [
@@ -1122,13 +1122,13 @@ class ArrayAccessTest extends TestCase
                 $a = ["a", "b"];
                 unset($a[0]);
                 ',
-                'assertions' => ['$a===' => "array{1: 'b'}"]
+                'assertions' => ['$a===' => "strict-array{1: 'b'}"]
             ],
         ];
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -1181,7 +1181,7 @@ class ArrayAccessTest extends TestCase
                     $a = [];
                     echo $a[0];',
                 'error_message' => 'MixedArrayAccess',
-                'error_level' => ['MixedAssignment'],
+                'ignored_issues' => ['MixedAssignment'],
             ],
             'mixedArrayOffset' => [
                 'code' => '<?php
@@ -1189,7 +1189,7 @@ class ArrayAccessTest extends TestCase
                     $a = 5;
                     echo [1, 2, 3, 4][$a];',
                 'error_message' => 'MixedArrayOffset',
-                'error_level' => ['MixedAssignment'],
+                'ignored_issues' => ['MixedAssignment'],
             ],
             'nullArrayAccess' => [
                 'code' => '<?php
@@ -1245,7 +1245,7 @@ class ArrayAccessTest extends TestCase
             ],
             'possiblyUndefinedIntArrayOffet' => [
                 'code' => '<?php
-                    /** @var array{0?:string} */
+                    /** @var strict-array{0?:string} */
                     $entry = ["a"];
 
                     [$elt] = $entry;',
@@ -1253,7 +1253,7 @@ class ArrayAccessTest extends TestCase
             ],
             'possiblyUndefinedStringArrayOffet' => [
                 'code' => '<?php
-                    /** @var array{a?:string} */
+                    /** @var strict-array{a?:string} */
                     $entry = ["a"];
 
                     ["a" => $elt] = $entry;',
@@ -1370,7 +1370,7 @@ class ArrayAccessTest extends TestCase
                 'code' => '<?php
                     class Example {
                         /**
-                         * @param array{a: string, b: int} $context
+                         * @param strict-array{a: string, b: int} $context
                          */
                         function foo(array $context): void {
                             $context["c"];
@@ -1393,7 +1393,7 @@ class ArrayAccessTest extends TestCase
             'destructureTuple' => [
                 'code' => '<?php
                     /**
-                     * @return array{int, int}
+                     * @return strict-array{int, int}
                      */
                     function size(): array {
                         return [10, 20];
diff --git a/tests/ArrayAssignmentTest.php b/tests/ArrayAssignmentTest.php
index bf370dcc8..bc0ec591b 100644
--- a/tests/ArrayAssignmentTest.php
+++ b/tests/ArrayAssignmentTest.php
@@ -32,7 +32,7 @@ class ArrayAssignmentTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -65,7 +65,7 @@ class ArrayAssignmentTest extends TestCase
                         $out[] = [4];
                     }',
                 'assertions' => [
-                    '$out' => 'non-empty-list<array{int}>',
+                    '$out' => 'non-empty-list<strict-list{int}>',
                 ],
             ],
             'generic2dArrayCreationAddedInIf' => [
@@ -193,8 +193,8 @@ class ArrayAssignmentTest extends TestCase
                         $bat[$text] = $bar[$i];
                     }',
                 'assertions' => [
-                    '$foo' => 'array{0: string, 1: string, 2: string}',
-                    '$bar' => 'array{int, int, int}',
+                    '$foo' => 'strict-array{0: string, 1: string, 2: string}',
+                    '$bar' => 'strict-list{int, int, int}',
                     '$bat' => 'non-empty-array<string, int>',
                 ],
             ],
@@ -203,7 +203,7 @@ class ArrayAssignmentTest extends TestCase
                     $foo = [];
                     $foo["bar"] = "hello";',
                 'assertions' => [
-                    '$foo' => 'array{bar: string}',
+                    '$foo' => 'strict-array{bar: string}',
                     '$foo[\'bar\']' => 'string',
                 ],
             ],
@@ -212,7 +212,7 @@ class ArrayAssignmentTest extends TestCase
                     $foo = [];
                     $foo["bar"]["baz"] = "hello";',
                 'assertions' => [
-                    '$foo' => 'array{bar: array{baz: string}}',
+                    '$foo' => 'strict-array{bar: strict-array{baz: string}}',
                     '$foo[\'bar\'][\'baz\']' => 'string',
                 ],
             ],
@@ -221,7 +221,7 @@ class ArrayAssignmentTest extends TestCase
                     $foo = [];
                     $foo["bar"]["baz"]["bat"] = "hello";',
                 'assertions' => [
-                    '$foo' => 'array{bar: array{baz: array{bat: string}}}',
+                    '$foo' => 'strict-array{bar: strict-array{baz: strict-array{bat: string}}}',
                     '$foo[\'bar\'][\'baz\'][\'bat\']' => 'string',
                 ],
             ],
@@ -230,7 +230,7 @@ class ArrayAssignmentTest extends TestCase
                     $foo = [];
                     $foo["bar"]["baz"]["bat"]["bap"] = "hello";',
                 'assertions' => [
-                    '$foo' => 'array{bar: array{baz: array{bat: array{bap: string}}}}',
+                    '$foo' => 'strict-array{bar: strict-array{baz: strict-array{bat: strict-array{bap: string}}}}',
                     '$foo[\'bar\'][\'baz\'][\'bat\'][\'bap\']' => 'string',
                 ],
             ],
@@ -239,7 +239,7 @@ class ArrayAssignmentTest extends TestCase
                     $foo = ["bar" => []];
                     $foo["bar"]["baz"] = "hello";',
                 'assertions' => [
-                    '$foo' => 'array{bar: array{baz: string}}',
+                    '$foo' => 'strict-array{bar: strict-array{baz: string}}',
                     '$foo[\'bar\'][\'baz\']' => 'string',
                 ],
             ],
@@ -248,7 +248,7 @@ class ArrayAssignmentTest extends TestCase
                     $foo = ["bar" => []];
                     $foo["bar"]["baz"]["bat"] = "hello";',
                 'assertions' => [
-                    '$foo' => 'array{bar: array{baz: array{bat: string}}}',
+                    '$foo' => 'strict-array{bar: strict-array{baz: strict-array{bat: string}}}',
                 ],
             ],
             'conflictingTypesWithNoAssignment' => [
@@ -258,7 +258,7 @@ class ArrayAssignmentTest extends TestCase
                         "baz" => [1]
                     ];',
                 'assertions' => [
-                    '$foo' => 'array{bar: array{a: string}, baz: array{int}}',
+                    '$foo' => 'strict-array{bar: strict-array{a: string}, baz: strict-list{int}}',
                 ],
             ],
             'implicitTKeyedArrayCreation' => [
@@ -268,7 +268,7 @@ class ArrayAssignmentTest extends TestCase
                     ];
                     $foo["baz"] = "a";',
                 'assertions' => [
-                    '$foo' => 'array{bar: int, baz: string}',
+                    '$foo' => 'strict-array{bar: int, baz: string}',
                 ],
             ],
             'conflictingTypesWithAssignment' => [
@@ -279,7 +279,7 @@ class ArrayAssignmentTest extends TestCase
                     ];
                     $foo["bar"]["bam"]["baz"] = "hello";',
                 'assertions' => [
-                    '$foo' => 'array{bar: array{a: string, bam: array{baz: string}}, baz: array{int}}',
+                    '$foo' => 'strict-array{bar: strict-array{a: string, bam: strict-array{baz: string}}, baz: strict-list{int}}',
                 ],
             ],
             'conflictingTypesWithAssignment2' => [
@@ -289,7 +289,7 @@ class ArrayAssignmentTest extends TestCase
                     $foo["b"][] = "goodbye";
                     $bar = $foo["a"];',
                 'assertions' => [
-                    '$foo' => 'array{a: string, b: non-empty-list<string>}',
+                    '$foo' => 'strict-array{a: string, b: non-empty-list<string>}',
                     '$foo[\'a\']' => 'string',
                     '$foo[\'b\']' => 'non-empty-list<string>',
                     '$bar' => 'string',
@@ -301,7 +301,7 @@ class ArrayAssignmentTest extends TestCase
                     $foo["a"] = "hello";
                     $foo["b"]["c"]["d"] = "goodbye";',
                 'assertions' => [
-                    '$foo' => 'array{a: string, b: array{c: array{d: string}}}',
+                    '$foo' => 'strict-array{a: string, b: strict-array{c: strict-array{d: string}}}',
                 ],
             ],
             'nestedTKeyedArrayAssignment' => [
@@ -310,7 +310,7 @@ class ArrayAssignmentTest extends TestCase
                     $foo["a"]["b"] = "hello";
                     $foo["a"]["c"] = 1;',
                 'assertions' => [
-                    '$foo' => 'array{a: array{b: string, c: int}}',
+                    '$foo' => 'strict-array{a: strict-array{b: string, c: int}}',
                 ],
             ],
             'conditionalTKeyedArrayAssignment' => [
@@ -323,7 +323,7 @@ class ArrayAssignmentTest extends TestCase
                         $foo["b"] = 2;
                     }',
                 'assertions' => [
-                    '$foo' => 'array{a: string, b: int}',
+                    '$foo' => 'strict-array{a: string, b: int}',
                 ],
             ],
             'arrayKey' => [
@@ -342,7 +342,7 @@ class ArrayAssignmentTest extends TestCase
             'conditionalCheck' => [
                 'code' => '<?php
                     /**
-                     * @param  array{b:string} $a
+                     * @param  strict-array{b:string} $a
                      * @return null|string
                      */
                     function fooFoo($a) {
@@ -361,8 +361,8 @@ class ArrayAssignmentTest extends TestCase
                     $c = [];
                     $c[$b][$b][] = "bam";',
                 'assertions' => [
-                    '$a' => 'array{boop: non-empty-list<string>}',
-                    '$c' => 'array{boop: array{boop: non-empty-list<string>}}',
+                    '$a' => 'strict-array{boop: non-empty-list<string>}',
+                    '$c' => 'strict-array{boop: strict-array{boop: non-empty-list<string>}}',
                 ],
             ],
             'assignExplicitValueToGeneric' => [
@@ -371,7 +371,7 @@ class ArrayAssignmentTest extends TestCase
                     $a = [];
                     $a["foo"] = ["bar" => "baz"];',
                 'assertions' => [
-                    '$a' => 'array{foo: array{bar: string}}<string, array<string, string>>',
+                    '$a' => 'array{foo: strict-array{bar: string}}<string, array<string, string>>',
                 ],
             ],
             'additionWithEmpty' => [
@@ -381,8 +381,8 @@ class ArrayAssignmentTest extends TestCase
 
                     $b = [] + ["bar"];',
                 'assertions' => [
-                    '$a' => 'array{0: string}',
-                    '$b' => 'array{0: string}',
+                    '$a' => 'strict-list{string}',
+                    '$b' => 'strict-list{string}',
                 ],
             ],
             'additionDifferentType' => [
@@ -392,8 +392,8 @@ class ArrayAssignmentTest extends TestCase
 
                     $b = ["bar"] + [1];',
                 'assertions' => [
-                    '$a' => 'array{0: string}',
-                    '$b' => 'array{0: string}',
+                    '$a' => 'strict-array{0: string}',
+                    '$b' => 'strict-array{0: string}',
                 ],
             ],
             'present1dArrayTypeWithVarKeys' => [
@@ -419,7 +419,7 @@ class ArrayAssignmentTest extends TestCase
             ],
             'objectLikeWithIntegerKeys' => [
                 'code' => '<?php
-                    /** @var array{0: string, 1: int} **/
+                    /** @var strict-array{0: string, 1: int} **/
                     $a = ["hello", 5];
                     $b = $a[0]; // string
                     $c = $a[1]; // int
@@ -437,13 +437,13 @@ class ArrayAssignmentTest extends TestCase
                     $foo["a"] = 1;
                     $foo += ["b" => [2, 3]];',
                 'assertions' => [
-                    '$foo' => 'array{a: int, b: array{int, int}}',
+                    '$foo' => 'strict-array{a: int, b: strict-list{int, int}}',
                 ],
             ],
             'objectLikeArrayIsNonEmpty' => [
                 'code' => '<?php
                     /**
-                     * @param array{a?: string, b: string} $arg
+                     * @param strict-array{a?: string, b: string} $arg
                      * @return non-empty-array<string, string>
                      */
                     function test(array $arg): array {
@@ -457,7 +457,7 @@ class ArrayAssignmentTest extends TestCase
                     $foo["root"]["a"] = 1;
                     $foo["root"] += ["b" => [2, 3]];',
                 'assertions' => [
-                    '$foo' => 'array{root: array{a: int, b: array{int, int}}}',
+                    '$foo' => 'strict-array{root: strict-array{a: int, b: strict-list{int, int}}}',
                 ],
             ],
             'updateStringIntKey1' => [
@@ -467,7 +467,7 @@ class ArrayAssignmentTest extends TestCase
                     $a["a"] = 5;
                     $a[0] = 3;',
                 'assertions' => [
-                    '$a' => 'array{0: int, a: int}',
+                    '$a' => 'strict-array{0: int, a: int}',
                 ],
             ],
             'updateStringIntKey2' => [
@@ -479,7 +479,7 @@ class ArrayAssignmentTest extends TestCase
                     $b[$string] = 5;
                     $b[0] = 3;',
                 'assertions' => [
-                    '$b' => 'array{0: int, c: int}',
+                    '$b' => 'strict-array{0: int, c: int}',
                 ],
             ],
             'updateStringIntKey3' => [
@@ -491,7 +491,7 @@ class ArrayAssignmentTest extends TestCase
                     $c[0] = 3;
                     $c[$string] = 5;',
                 'assertions' => [
-                    '$c' => 'array{0: int, c: int}',
+                    '$c' => 'strict-array{0: int, c: int}',
                 ],
             ],
             'updateStringIntKey4' => [
@@ -503,7 +503,7 @@ class ArrayAssignmentTest extends TestCase
                     $d[$int] = 3;
                     $d["a"] = 5;',
                 'assertions' => [
-                    '$d' => 'array{5: int, a: int}',
+                    '$d' => 'strict-array{5: int, a: int}',
                 ],
             ],
             'updateStringIntKey5' => [
@@ -516,7 +516,7 @@ class ArrayAssignmentTest extends TestCase
                     $e[$int] = 3;
                     $e[$string] = 5;',
                 'assertions' => [
-                    '$e' => 'array{5: int, c: int}',
+                    '$e' => 'strict-array{5: int, c: int}',
                 ],
             ],
             'updateStringIntKeyWithIntRootAndNumberOffset' => [
@@ -529,7 +529,7 @@ class ArrayAssignmentTest extends TestCase
                     $a[0]["a"] = 5;
                     $a[0][0] = 3;',
                 'assertions' => [
-                    '$a' => 'array{0: array{0: int, a: int}}',
+                    '$a' => 'strict-array{0: strict-array{0: int, a: int}}',
                 ],
             ],
             'updateStringIntKeyWithIntRoot' => [
@@ -557,10 +557,10 @@ class ArrayAssignmentTest extends TestCase
                     $e[0][$int] = 3;
                     $e[0][$string] = 5;',
                 'assertions' => [
-                    '$b' => 'array{0: array{0: int, c: int}}',
-                    '$c' => 'array{0: array{0: int, c: int}}',
-                    '$d' => 'array{0: array{5: int, a: int}}',
-                    '$e' => 'array{0: array{5: int, c: int}}',
+                    '$b' => 'strict-array{0: strict-array{0: int, c: int}}',
+                    '$c' => 'strict-array{0: strict-array{0: int, c: int}}',
+                    '$d' => 'strict-array{0: strict-array{5: int, a: int}}',
+                    '$e' => 'strict-array{0: strict-array{5: int, c: int}}',
                 ],
             ],
             'updateStringIntKeyWithTKeyedArrayRootAndNumberOffset' => [
@@ -573,7 +573,7 @@ class ArrayAssignmentTest extends TestCase
                     $a["root"]["a"] = 5;
                     $a["root"][0] = 3;',
                 'assertions' => [
-                    '$a' => 'array{root: array{0: int, a: int}}',
+                    '$a' => 'strict-array{root: strict-array{0: int, a: int}}',
                 ],
             ],
             'updateStringIntKeyWithTKeyedArrayRoot' => [
@@ -601,10 +601,10 @@ class ArrayAssignmentTest extends TestCase
                     $e["root"][$int] = 3;
                     $e["root"][$string] = 5;',
                 'assertions' => [
-                    '$b' => 'array{root: array{0: int, c: int}}',
-                    '$c' => 'array{root: array{0: int, c: int}}',
-                    '$d' => 'array{root: array{5: int, a: int}}',
-                    '$e' => 'array{root: array{5: int, c: int}}',
+                    '$b' => 'strict-array{root: strict-array{0: int, c: int}}',
+                    '$c' => 'strict-array{root: strict-array{0: int, c: int}}',
+                    '$d' => 'strict-array{root: strict-array{5: int, a: int}}',
+                    '$e' => 'strict-array{root: strict-array{5: int, c: int}}',
                 ],
             ],
             'mixedArrayAssignmentWithStringKeys' => [
@@ -661,9 +661,9 @@ class ArrayAssignmentTest extends TestCase
                     $a["d"]["e"] = 5;',
                 'assertions' => [
                     '$a[\'b\']' => 'int',
-                    '$a[\'d\']' => 'array{e: int}',
+                    '$a[\'d\']' => 'strict-array{e: int}',
                     '$a[\'d\'][\'e\']' => 'int',
-                    '$a' => 'array{b: int, d: array{e: int}}',
+                    '$a' => 'strict-array{b: int, d: strict-array{e: int}}',
                 ],
             ],
             'changeTKeyedArrayTypeInIf' => [
@@ -682,8 +682,8 @@ class ArrayAssignmentTest extends TestCase
 
                     $a["b"]["e"] = "d";',
                 'assertions' => [
-                    '$a' => 'array{b: array{e: string}}',
-                    '$a[\'b\']' => 'array{e: string}',
+                    '$a' => 'strict-array{b: strict-array{e: string}}',
+                    '$a[\'b\']' => 'strict-array{e: string}',
                     '$a[\'b\'][\'e\']' => 'string',
                 ],
             ],
@@ -807,7 +807,7 @@ class ArrayAssignmentTest extends TestCase
                     $a = null;
                     $a[0][] = 1;',
                 'assertions' => [
-                    '$a' => 'array{0: non-empty-list<int>}',
+                    '$a' => 'strict-array{0: non-empty-list<int>}',
                 ],
                 'ignored_issues' => ['PossiblyNullArrayAssignment'],
             ],
@@ -845,7 +845,7 @@ class ArrayAssignmentTest extends TestCase
                     $a_values = array_values($a);
                     $a_keys = array_keys($a);',
                 'assertions' => [
-                    '$a' => 'array{string, int}',
+                    '$a' => 'strict-list{string, int}',
                     '$a_values' => 'non-empty-list<int|string>',
                     '$a_keys' => 'non-empty-list<int>',
                 ],
@@ -855,7 +855,7 @@ class ArrayAssignmentTest extends TestCase
                     $b = ["hello", 5];
                     $b[0] = 3;',
                 'assertions' => [
-                    '$b' => 'array{int, int}',
+                    '$b' => 'strict-list{int, int}',
                 ],
             ],
             'changeIntOffsetKeyValuesAfterCopy' => [
@@ -864,8 +864,8 @@ class ArrayAssignmentTest extends TestCase
                     $c = $b;
                     $c[0] = 3;',
                 'assertions' => [
-                    '$b' => 'array{string, int}',
-                    '$c' => 'array{int, int}',
+                    '$b' => 'strict-list{string, int}',
+                    '$c' => 'strict-list{int, int}',
                 ],
             ],
             'mergeIntOffsetValues' => [
@@ -873,8 +873,8 @@ class ArrayAssignmentTest extends TestCase
                     $d = array_merge(["hello", 5], []);
                     $e = array_merge(["hello", 5], ["hello again"]);',
                 'assertions' => [
-                    '$d' => 'array{0: string, 1: int}',
-                    '$e' => 'array{0: string, 1: int, 2: string}',
+                    '$d' => 'strict-list{string, int}',
+                    '$e' => 'strict-list{string, int, string}',
                 ],
             ],
             'addIntOffsetToEmptyArray' => [
@@ -882,14 +882,14 @@ class ArrayAssignmentTest extends TestCase
                     $f = [];
                     $f[0] = "hello";',
                 'assertions' => [
-                    '$f' => 'array{0: string}',
+                    '$f' => 'strict-array{0: string}',
                 ],
             ],
             'dontIncrementIntOffsetForKeyedItems' => [
                 'code' => '<?php
                     $a = [1, "a" => 2, 3];',
                 'assertions' => [
-                    '$a' => 'array{0: int, 1: int, a: int}',
+                    '$a' => 'strict-array{0: int, 1: int, a: int}',
                 ],
             ],
             'assignArrayOrSetNull' => [
@@ -1013,7 +1013,7 @@ class ArrayAssignmentTest extends TestCase
                     $a = (array) (rand(0, 1) ? [1 => "one"] : 0);
                     $b = (array) null;',
                 'assertions' => [
-                    '$a' => 'array{0?: int, 1?: string}',
+                    '$a' => 'strict-array{0?: int, 1?: string}',
                     '$b' => 'array<never, never>',
                 ],
             ],
@@ -1154,8 +1154,8 @@ class ArrayAssignmentTest extends TestCase
 
                     $b[] = rand(0, 10);',
                 'assertions' => [
-                    '$a' => 'array{int, int, int}',
-                    '$b' => 'array{int, int, int, int<0, 10>}',
+                    '$a' => 'strict-list{int, int, int}',
+                    '$b' => 'strict-list{int, int, int, int<0, 10>}',
                 ],
             ],
             'listMergedWithTKeyedArrayList' => [
@@ -1240,9 +1240,9 @@ class ArrayAssignmentTest extends TestCase
                     $arr2 = [...$arr1];
                     $arr3 = [1 => 0, ...$arr1];',
                 'assertions' => [
-                    '$result' => 'array{int, int, int, int, int, int, int, int}',
-                    '$arr2' => 'array{int, int, int}',
-                    '$arr3' => 'array{1: int, 2: int, 3: int, 4: int}',
+                    '$result' => 'strict-list{int, int, int, int, int, int, int, int}',
+                    '$arr2' => 'strict-list{int, int, int}',
+                    '$arr3' => 'strict-array{1: int, 2: int, 3: int, 4: int}',
                 ]
             ],
             'arraySpreadWithString' => [
@@ -1253,7 +1253,7 @@ class ArrayAssignmentTest extends TestCase
                         ...["b" => 2]
                     ];',
                 'assertions' => [
-                    '$x===' => 'array{a: 1, b: 2}',
+                    '$x===' => 'strict-array{a: 1, b: 2}',
                 ],
                 'ignored_issues' => [],
                 'php_version' => '8.1'
@@ -1274,7 +1274,7 @@ class ArrayAssignmentTest extends TestCase
             'propertyAssignmentToTKeyedArrayIntKeys' => [
                 'code' => '<?php
                     class Bar {
-                        /** @var array{0: string, 1:string} */
+                        /** @var strict-array{0: string, 1:string} */
                         private array $baz = ["a", "b"];
 
                         public function append(string $str) : void {
@@ -1285,7 +1285,7 @@ class ArrayAssignmentTest extends TestCase
             'propertyAssignmentToTKeyedArrayStringKeys' => [
                 'code' => '<?php
                     class Bar {
-                        /** @var array{a: string, b:string} */
+                        /** @var strict-array{a: string, b:string} */
                         private array $baz = ["a" => "c", "b" => "d"];
 
                         public function append(string $str) : void {
@@ -1408,8 +1408,8 @@ class ArrayAssignmentTest extends TestCase
             'assignWithLiteralStringKey' => [
                 'code' => '<?php
                     /**
-                     * @param array<int, array{internal: bool, ported: bool}> $i
-                     * @return array<int, array{internal: bool, ported: bool}>
+                     * @param array<int, strict-array{internal: bool, ported: bool}> $i
+                     * @return array<int, strict-array{internal: bool, ported: bool}>
                      */
                     function addOneEntry(array $i, int $id): array {
                         $i[$id][rand(0, 1) ? "internal" : "ported"] = true;
@@ -1427,7 +1427,7 @@ class ArrayAssignmentTest extends TestCase
 
                     $a += ["e" => new RuntimeException()];',
                 'assertions' => [
-                    '$a' => 'array{c: RuntimeException, e: RuntimeException}',
+                    '$a' => 'strict-array{c: RuntimeException, e: RuntimeException}',
                 ]
             ],
             'mergeArrayKeysProperly' => [
@@ -1554,7 +1554,7 @@ class ArrayAssignmentTest extends TestCase
 
                     $e = [...$a, ...$b, ...$c, ...$d, 3];
                 ',
-                'assertions' => ['$e===' => 'array{1, 2, 3}'],
+                'assertions' => ['$e===' => 'strict-list{1, 2, 3}'],
             ],
             'unpackArrayCanBeEmpty' => [
                 'code' => '<?php
@@ -1875,7 +1875,7 @@ class ArrayAssignmentTest extends TestCase
                     }
                     $_a = Token::ONE + Token::TWO + Token::THREE;
                     ',
-                'assertions' => ['$_a===' => 'array{16: 16, 17: 17, 18: 18}']
+                'assertions' => ['$_a===' => 'strict-array{16: 16, 17: 17, 18: 18}']
             ],
             'unpackTypedIterableWithStringKeysIntoArray' => [
                 'code' => '<?php
@@ -1944,7 +1944,7 @@ class ArrayAssignmentTest extends TestCase
             'nullableDestructuring' => [
                 'code' => '<?php
                     /**
-                     * @return array{"foo", "bar"}|null
+                     * @return strict-array{"foo", "bar"}|null
                      */
                     function foobar(): ?array
                     {
@@ -1983,7 +1983,7 @@ class ArrayAssignmentTest extends TestCase
 
 
                 /**
-                 * @return array{booking: array{active: false, icon: "settings"}, phones: array{active: false, icon: "phone-tube"}, stat: array{active: false, icon: "review"}, support: array{active: false, icon: "help"}}
+                 * @return strict-array{booking: strict-array{active: false, icon: "settings"}, phones: strict-array{active: false, icon: "phone-tube"}, stat: strict-array{active: false, icon: "review"}, support: strict-array{active: false, icon: "help"}}
                  */
                 function getSections(): array {
                     return [
@@ -2016,7 +2016,7 @@ class ArrayAssignmentTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/ArrayFunctionCallTest.php b/tests/ArrayFunctionCallTest.php
index aa8ca206c..2ff1985ba 100644
--- a/tests/ArrayFunctionCallTest.php
+++ b/tests/ArrayFunctionCallTest.php
@@ -13,7 +13,7 @@ class ArrayFunctionCallTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -28,7 +28,7 @@ class ArrayFunctionCallTest extends TestCase
                         }
                     );',
                 'assertions' => [
-                    '$d' => 'array{a?: int<1, 10>, b?: int<1, 10>}',
+                    '$d' => 'strict-array{a?: int<1, 10>, b?: int<1, 10>}',
                     '$e' => 'array<string, int<0, 10>|null>',
                 ],
             ],
@@ -39,7 +39,7 @@ class ArrayFunctionCallTest extends TestCase
                      * @param positive-int $positiveOne
                      * @param int<0,12> $d
                      * @param int<1,12> $f
-                     * @psalm-return array{a: numeric, b?: int, c: positive-int, d?: int<0, 12>, f: int<1,12>}
+                     * @psalm-return strict-array{a: numeric, b?: int, c: positive-int, d?: int<0, 12>, f: int<1,12>}
                      */
                     function makeAList($a, int $anyInt, int $positiveOne, int $d, int $f): array {
                         return array_filter(["a" => "1", "b" => $anyInt, "c" => $positiveOne, "d" => $d, "f" => $f]);
@@ -200,9 +200,9 @@ class ArrayFunctionCallTest extends TestCase
             'arrayCombineDynamicParams' => [
                 'code' => '<?php
                     /** @return array<string> */
-                    function getStrings(): array{ return []; }
+                    function getStrings(): array { return []; }
                     /** @return array<int> */
-                    function getInts(): array{ return []; }
+                    function getInts(): array { return []; }
                     $c = array_combine(getStrings(), getInts());',
                 'assertions' => [
                     '$c' => 'array<string, int>|false',
@@ -212,14 +212,14 @@ class ArrayFunctionCallTest extends TestCase
                 'code' => '<?php
                     $d = array_merge(["a", "b", "c", "d"], [1, 2, 3]);',
                 'assertions' => [
-                    '$d' => 'array{0: string, 1: string, 2: string, 3: string, 4: int, 5: int, 6: int}',
+                    '$d===' => "strict-list{'a', 'b', 'c', 'd', 1, 2, 3}",
                 ],
             ],
             'arrayMergePossiblyUndefined' => [
                 'code' => '<?php
                     /**
-                     * @param array{host?:string} $opts
-                     * @return array{host:string|int}
+                     * @param strict-array{host?:string} $opts
+                     * @return strict-array{host:string|int}
                      */
                     function b(array $opts): array {
                         return array_merge(["host" => 5], $opts);
@@ -248,8 +248,8 @@ class ArrayFunctionCallTest extends TestCase
             'arrayMergeTypes' => [
                 'code' => '<?php
                     /**
-                     * @psalm-type A=array{name: string}
-                     * @psalm-type B=array{age: int}
+                     * @psalm-type A=strict-array{name: string}
+                     * @psalm-type B=strict-array{age: int}
                      */
                     class Demo
                     {
@@ -268,14 +268,14 @@ class ArrayFunctionCallTest extends TestCase
                 'code' => '<?php
                     $d = array_replace(["a", "b", "c", "d"], [1, 2, 3]);',
                 'assertions' => [
-                    '$d' => 'array{0: int, 1: int, 2: int, 3: string}',
+                    '$d===' => "strict-list{1, 2, 3, 'd'}",
                 ],
             ],
             'arrayReplacePossiblyUndefined' => [
                 'code' => '<?php
                     /**
-                     * @param array{host?:string} $opts
-                     * @return array{host:string|int}
+                     * @param strict-array{host?:string} $opts
+                     * @return strict-array{host:string|int}
                      */
                     function b(array $opts): array {
                         return array_replace(["host" => 5], $opts);
@@ -304,8 +304,8 @@ class ArrayFunctionCallTest extends TestCase
             'arrayReplaceTypes' => [
                 'code' => '<?php
                     /**
-                     * @psalm-type A=array{name: string}
-                     * @psalm-type B=array{age: int}
+                     * @psalm-type A=strict-array{name: string}
+                     * @psalm-type B=strict-array{age: int}
                      */
                     class Demo
                     {
@@ -433,7 +433,7 @@ class ArrayFunctionCallTest extends TestCase
             'arrayShiftFunkyTKeyedArrayList' => [
                 'code' => '<?php
                     /**
-                     * @param non-empty-list<string>|array{null} $arr
+                     * @param non-empty-list<string>|strict-array{null} $arr
                      * @return array<int, string>
                      */
                     function foo(array $arr) {
@@ -723,7 +723,7 @@ class ArrayFunctionCallTest extends TestCase
 
                   foo($a3);',
                 'assertions' => [
-                    '$a3' => 'array{hi: int, bye: int}',
+                    '$a3' => 'strict-array{bye: int, hi: int}',
                 ],
             ],
             'arrayReplaceTKeyedArray' => [
@@ -743,7 +743,7 @@ class ArrayFunctionCallTest extends TestCase
 
                   foo($a3);',
                 'assertions' => [
-                    '$a3' => 'array{hi: int, bye: int}',
+                    '$a3' => 'strict-array{bye: int, hi: int}',
                 ],
             ],
             'arrayRand' => [
@@ -755,10 +755,10 @@ class ArrayFunctionCallTest extends TestCase
                     $e = array_rand($more_vars);',
 
                 'assertions' => [
-                    '$vars' => 'array{x: string, y: string}',
+                    '$vars' => 'strict-array{x: string, y: string}',
                     '$c' => 'string',
                     '$d' => 'string',
-                    '$more_vars' => 'array{string, string}',
+                    '$more_vars' => 'strict-list{string, string}',
                     '$e' => 'int',
                 ],
             ],
@@ -772,7 +772,7 @@ class ArrayFunctionCallTest extends TestCase
                     $f = array_rand($vars, $b);',
 
                 'assertions' => [
-                    '$vars' => 'array{x: string, y: string}',
+                    '$vars' => 'strict-array{x: string, y: string}',
                     '$c' => 'string',
                     '$e' => 'list<string>',
                     '$f' => 'list<string>|string',
@@ -797,7 +797,7 @@ class ArrayFunctionCallTest extends TestCase
                     function expectsInt(int $a) : void {}
 
                     /**
-                     * @param array<array-key, array{item:int}> $list
+                     * @param array<array-key, strict-array{item:int}> $list
                      */
                     function test(array $list) : void
                     {
@@ -913,7 +913,7 @@ class ArrayFunctionCallTest extends TestCase
             'arrayMapTKeyedArrayAndCallable' => [
                 'code' => '<?php
                     /**
-                     * @psalm-return array{key1:int,key2:int}
+                     * @psalm-return strict-array{key1:int,key2:int}
                      */
                     function foo(): array {
                         $v = ["key1"=> 1, "key2"=> "2"];
@@ -936,7 +936,7 @@ class ArrayFunctionCallTest extends TestCase
             'arrayMapTKeyedArrayAndClosure' => [
                 'code' => '<?php
                     /**
-                     * @psalm-return array{key1:int,key2:int}
+                     * @psalm-return strict-array{key1:int,key2:int}
                      */
                     function foo(): array {
                       $v = ["key1"=> 1, "key2"=> "2"];
@@ -1241,7 +1241,7 @@ class ArrayFunctionCallTest extends TestCase
             ],
             'arrayResetMaybeEmptyTKeyedArray' => [
                 'code' => '<?php
-                    /** @return array{foo?: int} */
+                    /** @return strict-array{foo?: int} */
                     function makeArray(): array { return []; }
                     $a = makeArray();
                     $b = reset($a);',
@@ -1317,7 +1317,7 @@ class ArrayFunctionCallTest extends TestCase
             ],
             'arrayEndMaybeEmptyTKeyedArray' => [
                 'code' => '<?php
-                    /** @return array{foo?: int} */
+                    /** @return strict-array{foo?: int} */
                     function makeArray(): array { return []; }
                     $a = makeArray();
                     $b = end($a);',
@@ -1330,11 +1330,11 @@ class ArrayFunctionCallTest extends TestCase
                     function makeMixedArray(): array { return []; }
                     /** @return array<array<int,bool>> */
                     function makeGenericArray(): array { return []; }
-                    /** @return array<array{0:string}> */
+                    /** @return array<strict-array{0:string}> */
                     function makeShapeArray(): array { return []; }
-                    /** @return array<array{0:string}|int> */
+                    /** @return array<strict-array{0:string}|int> */
                     function makeUnionArray(): array { return []; }
-                    /** @return array<string, array{x?:int, y?:int, width?:int, height?:int}> */
+                    /** @return array<string, strict-array{x?:int, y?:int, width?:int, height?:int}> */
                     function makeKeyedArray(): array { return []; }
                     $a = array_column([[1], [2], [3]], 0);
                     $b = array_column([["a" => 1], ["a" => 2], ["a" => 3]], "a");
@@ -1358,8 +1358,8 @@ class ArrayFunctionCallTest extends TestCase
                 'assertions' => [
                     '$a' => 'non-empty-list<int>',
                     '$b' => 'non-empty-list<int>',
-                    '$c' => 'array<int, array{a: int}>',
-                    '$d' => 'array<array-key, array{a: int}>',
+                    '$c' => 'array<int, strict-array{a: int}>',
+                    '$d' => 'array<array-key, strict-array{a: int}>',
                     '$e' => 'array<array-key, mixed>',
                     '$f' => 'non-empty-array<string, int>',
                     '$g' => 'list<mixed>',
@@ -1528,8 +1528,8 @@ class ArrayFunctionCallTest extends TestCase
                     array_splice($a, rand(-10, 0), rand(0, 10), $b);',
                 'assertions' => [
                     '$a' => 'non-empty-list<int|string>',
-                    '$b' => 'array{string, string, string}',
-                    '$c' => 'array{int, int, int}',
+                    '$b' => 'strict-list{string, string, string}',
+                    '$c' => 'strict-list{int, int, int}',
                 ],
             ],
             'arraySpliceReturn' => [
@@ -1545,7 +1545,7 @@ class ArrayFunctionCallTest extends TestCase
                     $d = [["red"], ["green"], ["blue"]];
                     array_splice($d, -1, 1, "foo");',
                 'assertions' => [
-                    '$d' => 'array<int, array{string}|string>',
+                    '$d' => 'array<int, strict-list{string}|string>',
                 ],
             ],
             'ksortPreserveShape' => [
@@ -1555,7 +1555,7 @@ class ArrayFunctionCallTest extends TestCase
                     acceptsAShape($a);
 
                     /**
-                     * @param array{a:int,b:int} $a
+                     * @param strict-array{a:int,b:int} $a
                      */
                     function acceptsAShape(array $a): void {}',
             ],
@@ -1680,7 +1680,7 @@ class ArrayFunctionCallTest extends TestCase
             ],
             'arrayPadMixed' => [
                 'code' => '<?php
-                    /** @var array{foo: mixed, bar: mixed} $arr */
+                    /** @var strict-array{foo: mixed, bar: mixed} $arr */
                     $a = array_pad($arr, 5, null);
                     /** @var mixed $mixed */
                     $b = array_pad([$mixed, $mixed], 5, null);
@@ -1708,7 +1708,7 @@ class ArrayFunctionCallTest extends TestCase
             ],
             'arrayChunk' => [
                 'code' => '<?php
-                    /** @var array{a: int, b: int, c: int, d: int} $arr */
+                    /** @var strict-array{a: int, b: int, c: int, d: int} $arr */
                     $a = array_chunk($arr, 2);
                     /** @var list<string> $list */
                     $b = array_chunk($list, 2);
@@ -1723,7 +1723,7 @@ class ArrayFunctionCallTest extends TestCase
             ],
             'arrayChunkPreservedKeys' => [
                 'code' => '<?php
-                    /** @var array{a: int, b: int, c: int, d: int} $arr */
+                    /** @var strict-array{a: int, b: int, c: int, d: int} $arr */
                     $a = array_chunk($arr, 2, true);
                     /** @var list<string> $list */
                     $b = array_chunk($list, 2, true);
@@ -1745,7 +1745,7 @@ class ArrayFunctionCallTest extends TestCase
             ],
             'arrayChunkMixed' => [
                 'code' => '<?php
-                    /** @var array{a: mixed, b: mixed, c: mixed} $arr */
+                    /** @var strict-array{a: mixed, b: mixed, c: mixed} $arr */
                     $a = array_chunk($arr, 2);
                     /** @var list<mixed> $list */
                     $b = array_chunk($list, 2);
@@ -1781,7 +1781,7 @@ class ArrayFunctionCallTest extends TestCase
             'SKIPPED-arrayMapZip' => [
                 'code' => '<?php
                     /**
-                     * @return array<int, array{string,?string}>
+                     * @return array<int, strict-array{string,?string}>
                      */
                     function getCharPairs(string $line) : array {
                         $chars = str_split($line);
@@ -1972,6 +1972,19 @@ class ArrayFunctionCallTest extends TestCase
                     takesString($a[0]);
                     array_map("takesString", $a);',
             ],
+            'arrayMapZip' => [
+                'code' => '<?php
+                    $a = [1, 2, 3, 4, 5];
+                    $b = ["one", "two", "three", "four", "five"];
+                    $c = ["uno", "dos", "tres", "cuatro", "cinco", "seis"];
+
+                    $d = array_map(null, $a, $b, $c);',
+                'assertions' => [
+                    '$d===' => "strict-list{strict-list{1, 'one', 'uno'}, strict-list{2, 'two', 'dos'}, strict-list{3, 'three', 'tres'}, strict-list{4, 'four', 'cuatro'}, strict-list{5, 'five', 'cinco'}, strict-list{null, null, 'seis'}}"
+                ],
+                'ignored_issues' => [],
+                'php_version' => '7.4',
+            ],
             'arrayMapExplicitZip' => [
                 'code' => '<?php
                     $as = ["key"];
@@ -2029,7 +2042,7 @@ class ArrayFunctionCallTest extends TestCase
             'arrayMergeKeepLastKeysAndType' => [
                 'code' => '<?php
                     /**
-                     * @param array{A: int} $a
+                     * @param strict-array{A: int} $a
                      * @param array<string, string> $b
                      *
                      * @return array{A: int}
@@ -2041,7 +2054,7 @@ class ArrayFunctionCallTest extends TestCase
             'arrayMergeKeepFirstKeysSameType' => [
                 'code' => '<?php
                     /**
-                     * @param array{A: int} $a
+                     * @param strict-array{A: int} $a
                      * @param array<string, int> $b
                      *
                      * @return array{A: int}
@@ -2053,7 +2066,7 @@ class ArrayFunctionCallTest extends TestCase
             'arrayReplaceKeepLastKeysAndType' => [
                 'code' => '<?php
                     /**
-                     * @param array{A: int} $a
+                     * @param strict-array{A: int} $a
                      * @param array<string, string> $b
                      *
                      * @return array{A: int}
@@ -2065,7 +2078,7 @@ class ArrayFunctionCallTest extends TestCase
             'arrayReplaceKeepFirstKeysSameType' => [
                 'code' => '<?php
                     /**
-                     * @param array{A: int} $a
+                     * @param strict-array{A: int} $a
                      * @param array<string, int> $b
                      *
                      * @return array{A: int}
@@ -2103,7 +2116,7 @@ class ArrayFunctionCallTest extends TestCase
             ],
             'countOnListIntoTuple' => [
                 'code' => '<?php
-                    /** @param array{string, string} $tuple */
+                    /** @param strict-array{string, string} $tuple */
                     function foo(array $tuple) : void {}
 
                     /** @param list<string> $list */
@@ -2116,7 +2129,7 @@ class ArrayFunctionCallTest extends TestCase
             'arrayColumnwithKeyedArrayWithoutRedundantUnion' => [
                 'code' => '<?php
                     /**
-                     * @param array<string, array{x?:int, y?:int, width?:int, height?:int}> $foos
+                     * @param array<string, strict-array{x?:int, y?:int, width?:int, height?:int}> $foos
                      */
                     function foo(array $foos): void {
                         array_multisort($formLayoutFields, SORT_ASC, array_column($foos, "y"));
@@ -2154,7 +2167,7 @@ class ArrayFunctionCallTest extends TestCase
 
                     $line = getLine();
 
-                    if (empty($line[0])) { // converts array<string> to array{0:string}<string>
+                    if (empty($line[0])) { // converts array<string> to strict-array{0:string}<string>
                         throw new InvalidArgumentException;
                     }
 
@@ -2203,7 +2216,7 @@ class ArrayFunctionCallTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -2351,7 +2364,7 @@ class ArrayFunctionCallTest extends TestCase
                     function expectsInt(int $a) : void {}
 
                     /**
-                     * @param array<array-key, array{item:int}> $list
+                     * @param array<array-key, strict-array{item:int}> $list
                      */
                     function test(array $list) : void
                     {
@@ -2408,7 +2421,7 @@ class ArrayFunctionCallTest extends TestCase
             'arrayMergeKeepFirstKeysButNotType' => [
                 'code' => '<?php
                     /**
-                     * @param array{A: int} $a
+                     * @param strict-array{A: int} $a
                      * @param array<string, string> $b
                      *
                      * @return array{A: int}
@@ -2421,7 +2434,7 @@ class ArrayFunctionCallTest extends TestCase
             'arrayReplaceKeepFirstKeysButNotType' => [
                 'code' => '<?php
                     /**
-                     * @param array{A: int} $a
+                     * @param strict-array{A: int} $a
                      * @param array<string, string> $b
                      *
                      * @return array{A: int}
diff --git a/tests/ArrayKeysTest.php b/tests/ArrayKeysTest.php
index 0e2185e4c..7fba8bb6b 100644
--- a/tests/ArrayKeysTest.php
+++ b/tests/ArrayKeysTest.php
@@ -13,7 +13,7 @@ class ArrayKeysTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -104,7 +104,7 @@ class ArrayKeysTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/AssertAnnotationTest.php b/tests/AssertAnnotationTest.php
index adc2fc39f..3edba3414 100644
--- a/tests/AssertAnnotationTest.php
+++ b/tests/AssertAnnotationTest.php
@@ -91,7 +91,7 @@ class AssertAnnotationTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -995,7 +995,7 @@ class AssertAnnotationTest extends TestCase
             'assertDifferentTypeOfArray' => [
                 'code' => '<?php
                     /**
-                     * @psalm-assert array{0: string, 1: string} $value
+                     * @psalm-assert strict-array{0: string, 1: string} $value
                      * @param mixed $value
                      */
                     function isStringTuple($value): void {
@@ -1038,7 +1038,7 @@ class AssertAnnotationTest extends TestCase
                     /**
                      * @param mixed $data
                      * @return bool
-                     * @psalm-assert-if-true array{type: string} $data
+                     * @psalm-assert-if-true strict-array{type: string} $data
                      */
                     function isBar($data) {
                         return isset($data["type"]);
@@ -1227,12 +1227,12 @@ class AssertAnnotationTest extends TestCase
             'parseLongAssertion' => [
                 'code' => '<?php
                     /**
-                     * @psalm-assert array{
-                     *      extensions: array<string, array{
+                     * @psalm-assert strict-array{
+                     *      extensions: array<string, strict-array{
                      *          version?: string,
                      *          type?: "bundled"|"pecl",
                      *          require?: list<string>,
-                     *          env?: array<string, array{
+                     *          env?: array<string, strict-array{
                      *              deps?: list<string>,
                      *              buildDeps?: list<string>,
                      *              configure?: string
@@ -1247,12 +1247,12 @@ class AssertAnnotationTest extends TestCase
             'intersectArraysAfterAssertion' => [
                 'code' => '<?php
                     /**
-                     * @psalm-assert array{foo: string} $v
+                     * @psalm-assert strict-array{foo: string} $v
                      */
                     function hasFoo(array $v): void {}
 
                     /**
-                     * @psalm-assert array{bar: int} $v
+                     * @psalm-assert strict-array{bar: int} $v
                      */
                     function hasBar(array $v): void {}
 
@@ -1612,7 +1612,7 @@ class AssertAnnotationTest extends TestCase
                     }',
                     'assertions' => [],
                     'ignored_issues' => [],
-                    '7.4'
+                    'php_version' => '7.4'
             ],
             'onPropertyOfImmutableArgument' => [
                 'code' => '<?php
@@ -2117,7 +2117,7 @@ class AssertAnnotationTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/AssignmentTest.php b/tests/AssignmentTest.php
index 29749fcbf..76d047fbe 100644
--- a/tests/AssignmentTest.php
+++ b/tests/AssignmentTest.php
@@ -10,9 +10,6 @@ class AssignmentTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
     use ValidCodeAnalysisTestTrait;
 
-    /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
-     */
     public function providerValidCodeParse(): iterable
     {
         return [
@@ -98,7 +95,7 @@ class AssignmentTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/AttributeTest.php b/tests/AttributeTest.php
index 7318ecaba..717a61a6e 100644
--- a/tests/AttributeTest.php
+++ b/tests/AttributeTest.php
@@ -36,9 +36,6 @@ class AttributeTest extends TestCase
         $this->analyzeFile('somefile.php', new Context());
     }
 
-    /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
-     */
     public function providerValidCodeParse(): iterable
     {
         return [
@@ -437,7 +434,7 @@ class AttributeTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/BinaryOperationTest.php b/tests/BinaryOperationTest.php
index b7eb0153e..0b1dfd16a 100644
--- a/tests/BinaryOperationTest.php
+++ b/tests/BinaryOperationTest.php
@@ -149,7 +149,7 @@ class BinaryOperationTest extends TestCase
     {
         $config = Config::getInstance();
         $config->strict_binary_operands = true;
-        
+
         $this->addFile(
             'somefile.php',
             '<?php
@@ -313,9 +313,6 @@ class BinaryOperationTest extends TestCase
         $this->analyzeFile('somefile.php', new Context());
     }
 
-    /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
-     */
     public function providerValidCodeParse(): iterable
     {
         return [
@@ -630,8 +627,8 @@ class BinaryOperationTest extends TestCase
             'addArrays' => [
                 'code' => '<?php
                     /**
-                     * @param array{host?:string} $opts
-                     * @return array{host:string|int}
+                     * @param strict-array{host?:string} $opts
+                     * @return strict-array{host:string|int}
                      */
                     function a(array $opts): array {
                         return $opts + ["host" => 5];
@@ -996,7 +993,7 @@ class BinaryOperationTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/CallableTest.php b/tests/CallableTest.php
index 5e09cbf8b..6c95e9a2f 100644
--- a/tests/CallableTest.php
+++ b/tests/CallableTest.php
@@ -10,9 +10,6 @@ class CallableTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
     use ValidCodeAnalysisTestTrait;
 
-    /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
-     */
     public function providerValidCodeParse(): iterable
     {
         return [
@@ -132,7 +129,7 @@ class CallableTest extends TestCase
                     /**
                      * @template T
                      * @param ArrayList<T> $list
-                     * @return ArrayList<array{T}>
+                     * @return ArrayList<strict-array{T}>
                      */
                     function asTupled(ArrayList $list): ArrayList
                     {
@@ -144,7 +141,7 @@ class CallableTest extends TestCase
                     $a = new ArrayList();
                     $b = asTupled($a);',
                 'assertions' => [
-                    '$b' => 'ArrayList<array{int}>',
+                    '$b' => 'ArrayList<strict-list{int}>',
                 ],
             ],
             'inferArgByPreviousFunctionArg' => [
@@ -430,8 +427,8 @@ class CallableTest extends TestCase
                     '$result1' => 'list<int>',
                     '$result2' => 'list<int>',
                 ],
-                'error_levels' => [],
-                '8.0',
+                'ignored_issues' => [],
+                'php_version' => '8.0',
             ],
             'inferPipelineWithPartiallyAppliedFunctions' => [
                 'code' => '<?php
@@ -514,8 +511,8 @@ class CallableTest extends TestCase
                 'assertions' => [
                     '$result' => 'non-empty-list<Item<string, bool>>|null',
                 ],
-                'error_levels' => [],
-                '8.0',
+                'ignored_issues' => [],
+                'php_version' => '8.0',
             ],
             'varReturnType' => [
                 'code' => '<?php
@@ -671,12 +668,12 @@ class CallableTest extends TestCase
                     $e = array_map([$a_instance, "bar"], ["one", "two"]);
                     $f = array_map("baz", ["one", "two"]);',
                 'assertions' => [
-                    '$a' => 'array{string, string}<string>',
-                    '$b' => 'array{string, string}<string>',
-                    '$c' => 'array{string, string}<string>',
-                    '$d' => 'array{string, string}<string>',
-                    '$e' => 'array{string, string}<string>',
-                    '$f' => 'array{string, string}<string>',
+                    '$a' => 'strict-list{string, string}',
+                    '$b' => 'strict-list{string, string}',
+                    '$c' => 'strict-list{string, string}',
+                    '$d' => 'strict-list{string, string}',
+                    '$e' => 'strict-list{string, string}',
+                    '$f' => 'strict-list{string, string}',
                 ],
             ],
             'arrayCallableMethod' => [
@@ -1334,7 +1331,7 @@ class CallableTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -1720,7 +1717,7 @@ class CallableTest extends TestCase
                      * @template B
                      *
                      * @param ArrayList<T> $list
-                     * @return ArrayList<array{T}>
+                     * @return ArrayList<strict-array{T}>
                      */
                     function genericContext(ArrayList $list): ArrayList
                     {
diff --git a/tests/CastTest.php b/tests/CastTest.php
index 2d20c4d3f..43397273e 100644
--- a/tests/CastTest.php
+++ b/tests/CastTest.php
@@ -8,9 +8,6 @@ class CastTest extends TestCase
 {
     use ValidCodeAnalysisTestTrait;
 
-    /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
-     */
     public function providerValidCodeParse(): iterable
     {
         yield 'SKIPPED-castFalseOrIntToInt' => [
diff --git a/tests/CheckTypeTest.php b/tests/CheckTypeTest.php
index d6ca6e3f6..5178f4ffe 100644
--- a/tests/CheckTypeTest.php
+++ b/tests/CheckTypeTest.php
@@ -10,9 +10,6 @@ class CheckTypeTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
     use ValidCodeAnalysisTestTrait;
 
-    /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
-     */
     public function providerValidCodeParse(): iterable
     {
         yield 'allowSubtype' => [
@@ -23,9 +20,6 @@ class CheckTypeTest extends TestCase
         ];
     }
 
-    /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
-     */
     public function providerInvalidCodeParse(): iterable
     {
         yield 'checkType' => [
diff --git a/tests/ClassLikeStringTest.php b/tests/ClassLikeStringTest.php
index 8541c05e7..5a2213a04 100644
--- a/tests/ClassLikeStringTest.php
+++ b/tests/ClassLikeStringTest.php
@@ -53,9 +53,6 @@ class ClassLikeStringTest extends TestCase
         $this->analyzeFile('somefile.php', new Context());
     }
 
-    /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
-     */
     public function providerValidCodeParse(): iterable
     {
         return [
@@ -82,7 +79,7 @@ class ClassLikeStringTest extends TestCase
                     class B {}
 
                     takesClassConstants(["A", "B"]);',
-                'annotations' => [],
+                'assertions' => [],
                 'ignored_issues' => ['ArgumentTypeCoercion'],
             ],
             'singleClassConstantAsConstant' => [
@@ -107,7 +104,7 @@ class ClassLikeStringTest extends TestCase
 
                     /** @psalm-suppress ArgumentTypeCoercion */
                     takesClassConstants("A");',
-                'annotations' => [],
+                'assertions' => [],
             ],
             'returnClassConstant' => [
                 'code' => '<?php
@@ -130,7 +127,7 @@ class ClassLikeStringTest extends TestCase
                     function takesClassConstants() : string {
                         return "A";
                     }',
-                'annotations' => [],
+                'assertions' => [],
                 'ignored_issues' => ['LessSpecificReturnStatement', 'MoreSpecificReturnType'],
             ],
             'returnClassConstantArray' => [
@@ -156,7 +153,7 @@ class ClassLikeStringTest extends TestCase
                     function takesClassConstants() : array {
                         return ["A", "B"];
                     }',
-                'annotations' => [],
+                'assertions' => [],
                 'ignored_issues' => ['LessSpecificReturnStatement', 'MoreSpecificReturnType'],
             ],
             'ifClassStringEquals' => [
@@ -815,12 +812,12 @@ class ClassLikeStringTest extends TestCase
                 'code' => '<?php
                     class A {}
                     class B {}
-                    
+
                     /** @param class-string<A> $s */
                     function takesAString(string $a): void {}
                     /** @param class-string<B> $s */
                     function takesBString(string $a): void {}
-                    
+
                     /** @param class-string $s */
                     function foo(string $s): void {
                         if (is_subclass_of($s, A::class)) {
@@ -840,7 +837,7 @@ class ClassLikeStringTest extends TestCase
                     function takesAString(string $a): void {}
                     /** @param class-string<B> $s */
                     function takesBString(string $a): void {}
-                    
+
                     function foo(string $s): void {
                         if (!class_exists($s, false)) {
                             return;
@@ -866,7 +863,7 @@ class ClassLikeStringTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/ClassLoadOrderTest.php b/tests/ClassLoadOrderTest.php
index 4dc07fa14..706df50b7 100644
--- a/tests/ClassLoadOrderTest.php
+++ b/tests/ClassLoadOrderTest.php
@@ -10,9 +10,6 @@ class ClassLoadOrderTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
     use ValidCodeAnalysisTestTrait;
 
-    /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
-     */
     public function providerValidCodeParse(): iterable
     {
         return [
@@ -123,7 +120,7 @@ class ClassLoadOrderTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/ClassScopeTest.php b/tests/ClassScopeTest.php
index 1047a5b53..c00d1c590 100644
--- a/tests/ClassScopeTest.php
+++ b/tests/ClassScopeTest.php
@@ -10,9 +10,6 @@ class ClassScopeTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
     use ValidCodeAnalysisTestTrait;
 
-    /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
-     */
     public function providerValidCodeParse(): iterable
     {
         return [
@@ -154,7 +151,7 @@ class ClassScopeTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/ClassTest.php b/tests/ClassTest.php
index 609eec1e5..580622b9e 100644
--- a/tests/ClassTest.php
+++ b/tests/ClassTest.php
@@ -40,7 +40,7 @@ class ClassTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -628,7 +628,7 @@ class ClassTest extends TestCase
                             return $this;
                         }
                     }
-                    
+
                     class a {
                         /**
                          * @return iter<int, static>
@@ -639,7 +639,7 @@ class ClassTest extends TestCase
                     }
                     class b extends a {
                     }
-                    
+
                     $a = new b;
                     $a = $a->ret();
                     $a = $a->stabilize();',
@@ -663,7 +663,7 @@ class ClassTest extends TestCase
                             return $this;
                         }
                     }
-                    
+
                     interface a {
                         /**
                          * @return iter<int, static>
@@ -675,7 +675,7 @@ class ClassTest extends TestCase
                             return new iter([$this]);
                         }
                     }
-                    
+
                     /** @var a */
                     $a = new b;
                     $a = $a->ret();
@@ -700,7 +700,7 @@ class ClassTest extends TestCase
                             return $this;
                         }
                     }
-                    
+
                     interface a {
                         /**
                          * @return iter<int, a&static>
@@ -712,7 +712,7 @@ class ClassTest extends TestCase
                             return new iter([$this]);
                         }
                     }
-                    
+
                     /** @var a */
                     $a = new b;
                     $a = $a->ret();
@@ -754,7 +754,7 @@ class ClassTest extends TestCase
                     /**
                      * @template TKey
                      * @template TValue
-                     * 
+                     *
                      * @implements Traversable<TKey, TValue>
                      */
                     abstract class C implements Traversable {}
@@ -773,7 +773,7 @@ class ClassTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -1121,7 +1121,7 @@ class ClassTest extends TestCase
                     /** @var class-string<Bar> */
                     protected const CLASS = Bar::class;
                 }
-                
+
                 class Bar {}
                 ',
                 'error_message' => 'ReservedWord',
diff --git a/tests/CloneTest.php b/tests/CloneTest.php
index 6afe54b5a..6b19178a3 100644
--- a/tests/CloneTest.php
+++ b/tests/CloneTest.php
@@ -13,7 +13,7 @@ class CloneTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -49,7 +49,7 @@ class CloneTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -88,7 +88,7 @@ class CloneTest extends TestCase
                         private function __clone() {}
                     }
                     class b extends a {}
-                    
+
                     clone new b;',
                 'error_message' => 'InvalidClone',
             ],
@@ -100,7 +100,7 @@ class CloneTest extends TestCase
                     class b {
                         use a;
                     }
-                    
+
                     clone new b;',
                 'error_message' => 'InvalidClone',
             ],
diff --git a/tests/ClosureTest.php b/tests/ClosureTest.php
index 53b3154ce..68e79d720 100644
--- a/tests/ClosureTest.php
+++ b/tests/ClosureTest.php
@@ -13,7 +13,7 @@ class ClosureTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -98,7 +98,7 @@ class ClosureTest extends TestCase
                     $mirror = function(int $i) : int { return $i; };
                     $a = array_map($mirror, [1, 2, 3]);',
                 'assertions' => [
-                    '$a' => 'array{int, int, int}<int>',
+                    '$a' => 'strict-list{int, int, int}',
                 ],
             ],
             'inlineCallableFunction' => [
@@ -263,14 +263,14 @@ class ClosureTest extends TestCase
             'inferArrayMapReturnTypeWithoutTypehints' => [
                 'code' => '<?php
                     /**
-                     * @param array{0:string,1:string}[] $ret
-                     * @return array{0:string,1:int}[]
+                     * @param strict-array{0:string,1:string}[] $ret
+                     * @return strict-array{0:string,1:int}[]
                      */
                     function f(array $ret) : array
                     {
                         return array_map(
                             /**
-                             * @param array{0:string,1:string} $row
+                             * @param strict-array{0:string,1:string} $row
                              */
                             function (array $row) {
                                 return [
@@ -287,14 +287,14 @@ class ClosureTest extends TestCase
             'inferArrayMapReturnTypeWithTypehints' => [
                 'code' => '<?php
                     /**
-                     * @param array{0:string,1:string}[] $ret
-                     * @return array{0:string,1:int}[]
+                     * @param strict-array{0:string,1:string}[] $ret
+                     * @return strict-array{0:string,1:int}[]
                      */
                     function f(array $ret): array
                     {
                         return array_map(
                             /**
-                             * @param array{0:string,1:string} $row
+                             * @param strict-array{0:string,1:string} $row
                              */
                             function (array $row): array {
                                 return [
@@ -562,7 +562,7 @@ class ClosureTest extends TestCase
                     $maker = maker(stdClass::class);
                     $result = array_map($maker, ["abc"]);',
                 'assertions' => [
-                    '$result' => 'array{stdClass}<stdClass>'
+                    '$result' => 'strict-list{stdClass}'
                 ],
             ],
             'CallableWithArrayReduce' => [
@@ -785,8 +785,8 @@ class ClosureTest extends TestCase
 
                     takesIntToString(C::foo(...));',
                 'assertions' => [],
-                [],
-                '8.1',
+                'ignored_issues' => [],
+                'php_version' => '8.1',
             ],
             'FirstClassCallable:InheritedStaticMethodWithStaticTypeParameter' => [
                 'code' => '<?php
@@ -825,9 +825,9 @@ class ClosureTest extends TestCase
                     $result3 = array_map($closure(...), $array);
                 ',
                 'assertions' => [
-                    '$result1' => 'array{null, null, null}<null>',
-                    '$result2' => 'array{string, string, string}<string>',
-                    '$result3' => 'array{int, int, int}<int>',
+                    '$result1' => 'strict-list{null, null, null}',
+                    '$result2' => 'strict-list{string, string, string}',
+                    '$result3' => 'strict-list{int, int, int}',
                 ],
                 'ignored_issues' => [],
                 'php_version' => '8.1'
@@ -906,7 +906,7 @@ class ClosureTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/CodebaseTest.php b/tests/CodebaseTest.php
index 4083e836a..2900ebd80 100644
--- a/tests/CodebaseTest.php
+++ b/tests/CodebaseTest.php
@@ -51,7 +51,7 @@ class CodebaseTest extends TestCase
         );
     }
 
-    /** @return iterable<int,array{string,string,bool}> */
+    /** @return iterable<int,strict-array{string,string,bool}> */
     public function typeContainments(): iterable
     {
         yield ['int', 'int|string', true];
@@ -81,7 +81,7 @@ class CodebaseTest extends TestCase
         );
     }
 
-    /** @return iterable<int,array{string,string,bool}> */
+    /** @return iterable<int,strict-array{string,string,bool}> */
     public function typeIntersections(): iterable
     {
         yield ['int', 'int|string', true];
@@ -95,7 +95,7 @@ class CodebaseTest extends TestCase
      * @test
      * @dataProvider iterableParams
      *
-     * @param array{string,string} $expected
+     * @param strict-array{string,string} $expected
      *
      */
     public function getKeyValueParamsForTraversableObject(string $input, array $expected): void
@@ -120,7 +120,7 @@ class CodebaseTest extends TestCase
         );
     }
 
-    /** @return iterable<int,array{string,array{string,string}}> */
+    /** @return iterable<int,strict-array{string,strict-array{string,string}}> */
     public function iterableParams(): iterable
     {
         yield ['iterable<int,string>', ['int', 'string']];
diff --git a/tests/Config/ConfigTest.php b/tests/Config/ConfigTest.php
index 442cdbfa6..7b8fcff8b 100644
--- a/tests/Config/ConfigTest.php
+++ b/tests/Config/ConfigTest.php
@@ -1127,10 +1127,10 @@ class ConfigTest extends TestCase
                 <psalm>
                     <globals>
                         <var name="glob1" type="string" />
-                        <var name="glob2" type="array{str:string}" />
+                        <var name="glob2" type="strict-array{str:string}" />
                         <var name="glob3" type="ns\Clazz" />
                         <var name="glob4" type="string|null" />
-                        <var name="_GET" type="array{str:string}" />
+                        <var name="_GET" type="strict-array{str:string}" />
                     </globals>
                 </psalm>'
             )
@@ -1424,7 +1424,7 @@ class ConfigTest extends TestCase
     }
 
     /**
-     * @return array<string, array{0: int, 1: int|null}>
+     * @return array<string, strict-array{0: int, 1: int|null}>
      */
     public function pluginRegistersScannerAndAnalyzerDataProvider(): array
     {
diff --git a/tests/Config/PluginTest.php b/tests/Config/PluginTest.php
index 1fd197ec0..a30824ffc 100644
--- a/tests/Config/PluginTest.php
+++ b/tests/Config/PluginTest.php
@@ -1016,7 +1016,7 @@ class PluginTest extends TestCase
                 function custom_array_map(...$_args) { throw new RuntimeException("???"); }
 
                 /**
-                 * @param list<array{num: int}> $_list
+                 * @param list<strict-array{num: int}> $_list
                  */
                 function acceptsList(array $_list): void { }
 
diff --git a/tests/ConstValuesTest.php b/tests/ConstValuesTest.php
index 4358c0367..643e69d84 100644
--- a/tests/ConstValuesTest.php
+++ b/tests/ConstValuesTest.php
@@ -11,7 +11,7 @@ class ConstValuesTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -109,7 +109,7 @@ class ConstValuesTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/ConstantTest.php b/tests/ConstantTest.php
index c7152b432..7c8615409 100644
--- a/tests/ConstantTest.php
+++ b/tests/ConstantTest.php
@@ -84,7 +84,7 @@ class ConstantTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>, php_version?: string}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -308,10 +308,12 @@ class ConstantTest extends TestCase
             'lateConstantResolutionParentArrayPlus' => [
                 'code' => '<?php
                     class A {
+                        /** @var array{a: true} */
                         public const ARR = ["a" => true];
                     }
 
                     class B extends A {
+                        /** @var array{a: true, b: true} */
                         public const ARR = parent::ARR + ["b" => true];
                     }
 
@@ -319,7 +321,7 @@ class ConstantTest extends TestCase
                         public const ARR = parent::ARR + ["c" => true];
                     }
 
-                    /** @param array{a: true, b: true, c: true} $arg */
+                    /** @param strict-array{a: true, b: true, c: true} $arg */
                     function foo(array $arg): void {}
                     foo(C::ARR);
                 ',
@@ -327,10 +329,12 @@ class ConstantTest extends TestCase
             'lateConstantResolutionParentArraySpread' => [
                 'code' => '<?php
                     class A {
+                        /** @var list{"a"} */
                         public const ARR = ["a"];
                     }
 
                     class B extends A {
+                        /** @var list{"a", "b"} */
                         public const ARR = [...parent::ARR, "b"];
                     }
 
@@ -338,7 +342,7 @@ class ConstantTest extends TestCase
                         public const ARR = [...parent::ARR, "c"];
                     }
 
-                    /** @param array{"a", "b", "c"} $arg */
+                    /** @param strict-array{"a", "b", "c"} $arg */
                     function foo(array $arg): void {}
                     foo(C::ARR);
                 ',
@@ -1264,7 +1268,7 @@ class ConstantTest extends TestCase
                     $arr = C::A;
                 ',
                 'assertions' => [
-                    '$arr===' => 'array{1, 2}',
+                    '$arr===' => 'strict-list{1, 2}',
                 ],
             ],
             'keysInUnpackedArrayAreReset' => [
@@ -1275,7 +1279,7 @@ class ConstantTest extends TestCase
                     $arr = C::A;
                 ',
                 'assertions' => [
-                    '$arr===' => 'array{2}',
+                    '$arr===' => 'strict-list{2}',
                 ],
             ],
             'arrayKeysSequenceContinuesAfterExplicitIntKey' => [
@@ -1286,7 +1290,7 @@ class ConstantTest extends TestCase
                     $arr = C::A;
                 ',
                 'assertions' => [
-                    '$arr===' => "array{10: 'aa', 11: 'zz', 5: 'a', 6: 'z'}",
+                    '$arr===' => "strict-array{10: 'aa', 11: 'zz', 5: 'a', 6: 'z'}",
                 ],
             ],
             'arrayKeysSequenceContinuesAfterNonIntKey' => [
@@ -1297,7 +1301,7 @@ class ConstantTest extends TestCase
                     $arr = C::A;
                 ',
                 'assertions' => [
-                    '$arr===' => "array{5: 'a', 6: 'aa', zz: 'z'}",
+                    '$arr===' => "strict-array{5: 'a', 6: 'aa', zz: 'z'}",
                 ],
             ],
             'unresolvedConstWithUnaryMinus' => [
@@ -1524,7 +1528,7 @@ class ConstantTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/CoreStubsTest.php b/tests/CoreStubsTest.php
index 5a60a348b..3d76a0d34 100644
--- a/tests/CoreStubsTest.php
+++ b/tests/CoreStubsTest.php
@@ -8,9 +8,6 @@ class CoreStubsTest extends TestCase
 {
     use ValidCodeAnalysisTestTrait;
 
-    /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
-     */
     public function providerValidCodeParse(): iterable
     {
         yield 'RecursiveArrayIterator::CHILD_ARRAYS_ONLY (#6464)' => [
@@ -49,7 +46,7 @@ class CoreStubsTest extends TestCase
                 '$period' => 'DatePeriod<DateTimeImmutable>',
                 '$dt' => 'DateTimeInterface|null'
             ],
-            'error_levels' => [],
+            'ignored_issues' => [],
             'php_version' => '7.3',
         ];
         yield 'Iterating over \DatePeriod (#5954) PHP8 IteratorAggregate' => [
@@ -68,7 +65,7 @@ class CoreStubsTest extends TestCase
                 '$period' => 'DatePeriod<DateTimeImmutable>',
                 '$dt' => 'DateTimeImmutable|null'
             ],
-            'error_levels' => [],
+            'ignored_issues' => [],
             'php_version' => '8.0',
         ];
         yield 'Iterating over \DatePeriod (#5954), ISO string' => [
@@ -83,7 +80,7 @@ class CoreStubsTest extends TestCase
                 '$period' => 'DatePeriod<string>',
                 '$dt' => 'DateTime|null'
             ],
-            'error_levels' => [],
+            'ignored_issues' => [],
             'php_version' => '8.0',
         ];
         yield 'DatePeriod implements only Traversable on PHP 7' => [
@@ -92,7 +89,7 @@ class CoreStubsTest extends TestCase
             $period = new DatePeriod("R4/2012-07-01T00:00:00Z/P7D");
             if ($period instanceof IteratorAggregate) {}',
             'assertions' => [],
-            'error_levels' => [],
+            'ignored_issues' => [],
             'php_version' => '7.3',
         ];
         yield 'DatePeriod implements IteratorAggregate on PHP 8' => [
@@ -101,7 +98,7 @@ class CoreStubsTest extends TestCase
             $period = new DatePeriod("R4/2012-07-01T00:00:00Z/P7D");
             if ($period instanceof IteratorAggregate) {}',
             'assertions' => [],
-            'error_levels' => ['RedundantCondition'],
+            'ignored_issues' => ['RedundantCondition'],
             'php_version' => '8.0',
         ];
     }
diff --git a/tests/DateTimeTest.php b/tests/DateTimeTest.php
index d5ae0d50d..25a69376e 100644
--- a/tests/DateTimeTest.php
+++ b/tests/DateTimeTest.php
@@ -8,9 +8,6 @@ class DateTimeTest extends TestCase
 {
     use ValidCodeAnalysisTestTrait;
 
-    /**
-     * @return array<string, array{code: string, assertions?:array<string,string>, error_levels?: list<string>}>
-     */
     public function providerValidCodeParse(): iterable
     {
         return [
diff --git a/tests/DeprecatedAnnotationTest.php b/tests/DeprecatedAnnotationTest.php
index 02f21cc99..218b716a1 100644
--- a/tests/DeprecatedAnnotationTest.php
+++ b/tests/DeprecatedAnnotationTest.php
@@ -11,7 +11,7 @@ class DeprecatedAnnotationTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -106,7 +106,7 @@ class DeprecatedAnnotationTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/DocblockInheritanceTest.php b/tests/DocblockInheritanceTest.php
index 6a1762a31..e532185ae 100644
--- a/tests/DocblockInheritanceTest.php
+++ b/tests/DocblockInheritanceTest.php
@@ -11,7 +11,7 @@ class DocblockInheritanceTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -154,7 +154,7 @@ class DocblockInheritanceTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/DocumentationTest.php b/tests/DocumentationTest.php
index 8dd2a40cb..190e62003 100644
--- a/tests/DocumentationTest.php
+++ b/tests/DocumentationTest.php
@@ -203,11 +203,11 @@ class DocumentationTest extends TestCase
      *
      * @param string $code
      * @param string $error_message
-     * @param array<string> $error_levels
+     * @param array<string> $ignored_issues
      * @param bool $check_references
      *
      */
-    public function testInvalidCode($code, $error_message, $error_levels = [], $check_references = false, string $php_version = '8.0'): void
+    public function testInvalidCode($code, $error_message, $ignored_issues = [], $check_references = false, string $php_version = '8.0'): void
     {
         if (strpos($this->getTestName(), 'SKIPPED-') !== false) {
             $this->markTestSkipped();
@@ -227,7 +227,7 @@ class DocumentationTest extends TestCase
         $this->project_analyzer->getConfig()->ensure_array_string_offsets_exist = $is_array_offset_test;
         $this->project_analyzer->getConfig()->ensure_array_int_offsets_exist = $is_array_offset_test;
 
-        foreach ($error_levels as $error_level) {
+        foreach ($ignored_issues as $error_level) {
             $this->project_analyzer->getCodebase()->config->setCustomErrorLevel($error_level, Config::REPORT_SUPPRESS);
         }
 
@@ -253,7 +253,7 @@ class DocumentationTest extends TestCase
     }
 
     /**
-     * @return array<string,array{string,string,string[],bool,string}>
+     * @return array<string,strict-array{string,string,string[],bool,string}>
      */
     public function providerInvalidCodeParse(): array
     {
@@ -370,7 +370,7 @@ class DocumentationTest extends TestCase
         );
     }
 
-    /** @return iterable<string, array{string}> */
+    /** @return iterable<string, strict-array{string}> */
     public function knownAnnotations(): iterable
     {
         foreach (DocComment::PSALM_ANNOTATIONS as $annotation) {
diff --git a/tests/EndToEnd/PsalmEndToEndTest.php b/tests/EndToEnd/PsalmEndToEndTest.php
index e8e9ddb1e..7b6d1a7de 100644
--- a/tests/EndToEnd/PsalmEndToEndTest.php
+++ b/tests/EndToEnd/PsalmEndToEndTest.php
@@ -233,7 +233,7 @@ class PsalmEndToEndTest extends TestCase
     }
 
     /**
-     * @return array{STDOUT: string, STDERR: string, CODE: int|null}
+     * @return strict-array{STDOUT: string, STDERR: string, CODE: int|null}
      */
     private function runPsalmInit(?int $level = null, ?string $php_version = null): array
     {
diff --git a/tests/EndToEnd/PsalmRunnerTrait.php b/tests/EndToEnd/PsalmRunnerTrait.php
index 75065071a..e521d22bf 100644
--- a/tests/EndToEnd/PsalmRunnerTrait.php
+++ b/tests/EndToEnd/PsalmRunnerTrait.php
@@ -17,7 +17,7 @@ trait PsalmRunnerTrait
     /**
      * @param list<string> $args
      *
-     * @return array{STDOUT: string, STDERR: string, CODE: int|null}
+     * @return strict-array{STDOUT: string, STDERR: string, CODE: int|null}
      */
     private function runPsalm(
         array $args,
diff --git a/tests/EnumTest.php b/tests/EnumTest.php
index 863acba0c..b65d840ff 100644
--- a/tests/EnumTest.php
+++ b/tests/EnumTest.php
@@ -11,7 +11,7 @@ class EnumTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -444,7 +444,7 @@ class EnumTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/ExtendsFinalClassTest.php b/tests/ExtendsFinalClassTest.php
index e9adcb8ef..a0fb1e675 100644
--- a/tests/ExtendsFinalClassTest.php
+++ b/tests/ExtendsFinalClassTest.php
@@ -11,7 +11,7 @@ class ExtendsFinalClassTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -43,7 +43,7 @@ class ExtendsFinalClassTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/FileDiffTest.php b/tests/FileDiffTest.php
index 3b18fdb69..f81732c9a 100644
--- a/tests/FileDiffTest.php
+++ b/tests/FileDiffTest.php
@@ -61,9 +61,9 @@ class FileDiffTest extends TestCase
 
         $found_offsets = array_map(
             /**
-             * @param array{0: int, 1: int, 2: int, 3: int} $arr
+             * @param strict-array{0: int, 1: int, 2: int, 3: int} $arr
              *
-             * @return array{0: int, 1: int}
+             * @return strict-array{0: int, 1: int}
              */
             fn(array $arr): array => [$arr[2], $arr[3]],
             $diff[3]
@@ -80,7 +80,7 @@ class FileDiffTest extends TestCase
      * @param string[] $same_methods
      * @param string[] $same_signatures
      * @param string[] $changed_methods
-     * @param array<array-key,array{int,int}> $diff_map_offsets
+     * @param array<array-key,strict-array{int,int}> $diff_map_offsets
      *
      */
     public function testPartialAstDiff(
@@ -135,9 +135,9 @@ class FileDiffTest extends TestCase
 
         $found_offsets = array_map(
             /**
-             * @param array{0: int, 1: int, 2: int, 3: int} $arr
+             * @param strict-array{0: int, 1: int, 2: int, 3: int} $arr
              *
-             * @return array{0: int, 1: int}
+             * @return strict-array{0: int, 1: int}
              */
             fn(array $arr): array => [$arr[2], $arr[3]],
             $diff[3]
@@ -204,7 +204,7 @@ class FileDiffTest extends TestCase
     }
 
     /**
-     * @return array<string,array{string,string,string[],string[],string[],array<array-key,array{int,int}>,list<array{int,int}>}>
+     * @return array<string,strict-array{string,string,string[],string[],string[],array<array-key,strict-array{int,int}>,list<strict-array{int,int}>}>
      */
     public function getChanges(): array
     {
diff --git a/tests/FileManipulation/ClassConstantMoveTest.php b/tests/FileManipulation/ClassConstantMoveTest.php
index 707664328..dbf9b7ccf 100644
--- a/tests/FileManipulation/ClassConstantMoveTest.php
+++ b/tests/FileManipulation/ClassConstantMoveTest.php
@@ -75,7 +75,7 @@ class ClassConstantMoveTest extends TestCase
     }
 
     /**
-     * @return array<string,array{input:string,output:string,migrations:array<string, string>}>
+     * @return array<string,strict-array{input:string,output:string,migrations:array<string, string>}>
      */
     public function providerValidCodeParse(): array
     {
diff --git a/tests/FileManipulation/ClassMoveTest.php b/tests/FileManipulation/ClassMoveTest.php
index e40e62194..0cee3a4b7 100644
--- a/tests/FileManipulation/ClassMoveTest.php
+++ b/tests/FileManipulation/ClassMoveTest.php
@@ -75,7 +75,7 @@ class ClassMoveTest extends TestCase
     }
 
     /**
-     * @return array<string,array{input:string,output:string,migrations:array<string, string>}>
+     * @return array<string,strict-array{input:string,output:string,migrations:array<string, string>}>
      */
     public function providerValidCodeParse(): array
     {
diff --git a/tests/FileManipulation/FileManipulationTestCase.php b/tests/FileManipulation/FileManipulationTestCase.php
index 98c604cc8..dc53981aa 100644
--- a/tests/FileManipulation/FileManipulationTestCase.php
+++ b/tests/FileManipulation/FileManipulationTestCase.php
@@ -97,7 +97,7 @@ abstract class FileManipulationTestCase extends TestCase
     }
 
     /**
-     * @return array<string,array{input:string,output:string,php_version:string,issues_to_fix:string[],safe_types:bool}>
+     * @return array<string,strict-array{input:string,output:string,php_version:string,issues_to_fix:array<string>,safe_types:bool,allow_backwards_incompatible_changes?:bool}>
      */
     abstract public function providerValidCodeParse(): array;
 }
diff --git a/tests/FileManipulation/ImmutableAnnotationAdditionTest.php b/tests/FileManipulation/ImmutableAnnotationAdditionTest.php
index 8c0e902a3..926cef22a 100644
--- a/tests/FileManipulation/ImmutableAnnotationAdditionTest.php
+++ b/tests/FileManipulation/ImmutableAnnotationAdditionTest.php
@@ -4,9 +4,6 @@ namespace Psalm\Tests\FileManipulation;
 
 class ImmutableAnnotationAdditionTest extends FileManipulationTestCase
 {
-    /**
-     * @return array<string,array{input:string,output:string,php_version:string,issues_to_fix:string[],safe_types:bool}>
-     */
     public function providerValidCodeParse(): array
     {
         return [
diff --git a/tests/FileManipulation/MethodMoveTest.php b/tests/FileManipulation/MethodMoveTest.php
index ef195c582..1d2d3ca9b 100644
--- a/tests/FileManipulation/MethodMoveTest.php
+++ b/tests/FileManipulation/MethodMoveTest.php
@@ -75,7 +75,7 @@ class MethodMoveTest extends TestCase
     }
 
     /**
-     * @return array<string,array{input:string,output:string,migrations:array<string, string>}>
+     * @return array<string,strict-array{input:string,output:string,migrations:array<string, string>}>
      */
     public function providerValidCodeParse(): array
     {
diff --git a/tests/FileManipulation/MissingPropertyTypeTest.php b/tests/FileManipulation/MissingPropertyTypeTest.php
index df3414ff1..afeb644ee 100644
--- a/tests/FileManipulation/MissingPropertyTypeTest.php
+++ b/tests/FileManipulation/MissingPropertyTypeTest.php
@@ -4,9 +4,6 @@ namespace Psalm\Tests\FileManipulation;
 
 class MissingPropertyTypeTest extends FileManipulationTestCase
 {
-    /**
-     * @return array<string,array{input:string,output:string,php_version:string,issues_to_fix:array<string>,safe_types:bool,allow_backwards_incompatible_changes?:bool}>
-     */
     public function providerValidCodeParse(): array
     {
         return [
diff --git a/tests/FileManipulation/MissingReturnTypeTest.php b/tests/FileManipulation/MissingReturnTypeTest.php
index 9c55762a3..062b47aaa 100644
--- a/tests/FileManipulation/MissingReturnTypeTest.php
+++ b/tests/FileManipulation/MissingReturnTypeTest.php
@@ -4,9 +4,6 @@ namespace Psalm\Tests\FileManipulation;
 
 class MissingReturnTypeTest extends FileManipulationTestCase
 {
-    /**
-     * @return array<string,array{input:string,output:string,php_version:string,issues_to_fix:array<string>,safe_types:bool,allow_backwards_incompatible_changes?:bool}>
-     */
     public function providerValidCodeParse(): array
     {
         return [
@@ -160,7 +157,7 @@ class MissingReturnTypeTest extends FileManipulationTestCase
                     /**
                      * @return string[]
                      *
-                     * @psalm-return array{0: \'hello\'}
+                     * @psalm-return strict-list{\'hello\'}
                      */
                     function foo() {
                         return ["hello"];
@@ -178,7 +175,7 @@ class MissingReturnTypeTest extends FileManipulationTestCase
                     /**
                      * @return string[]
                      *
-                     * @psalm-return array{0: \'hello\'}
+                     * @psalm-return strict-list{\'hello\'}
                      */
                     function foo(): array {
                         return ["hello"];
@@ -196,7 +193,7 @@ class MissingReturnTypeTest extends FileManipulationTestCase
                     /**
                      * @return string[]
                      *
-                     * @psalm-return array{a: \'goodbye\'|\'hello\', b?: \'hello again\'}
+                     * @psalm-return strict-array{a: \'goodbye\'|\'hello\', b?: \'hello again\'}
                      */
                     function foo(): array {
                         return rand(0, 1) ? ["a" => "hello"] : ["a" => "goodbye", "b" => "hello again"];
@@ -221,7 +218,7 @@ class MissingReturnTypeTest extends FileManipulationTestCase
                     /**
                      * @return int[]
                      *
-                     * @psalm-return array{a?: 1, b?: 2}
+                     * @psalm-return strict-array{a?: 1, b?: 2}
                      */
                     function foo(): array {
                         if (rand(0, 1)) {
@@ -258,7 +255,7 @@ class MissingReturnTypeTest extends FileManipulationTestCase
                     /**
                      * @return ((int|int[])[]|int)[]
                      *
-                     * @psalm-return array{a: 1, b: 2, c: array{a: 1, b: 2, c: array{a: 1, b: 2, c: 3}}}
+                     * @psalm-return strict-array{a: 1, b: 2, c: strict-array{a: 1, b: 2, c: strict-array{a: 1, b: 2, c: 3}}}
                      */
                     function foo(): array {
                         return [
@@ -296,7 +293,7 @@ class MissingReturnTypeTest extends FileManipulationTestCase
                     /**
                      * @return string[]
                      *
-                     * @psalm-return array{a: \'goodbye\'|\'hello\', b?: \'hello again\'}
+                     * @psalm-return strict-array{a: \'goodbye\'|\'hello\', b?: \'hello again\'}
                      */
                     function foo(): array {
                         if (rand(0, 1)) {
diff --git a/tests/FileManipulation/NamespaceMoveTest.php b/tests/FileManipulation/NamespaceMoveTest.php
index 129663dfb..4c519737c 100644
--- a/tests/FileManipulation/NamespaceMoveTest.php
+++ b/tests/FileManipulation/NamespaceMoveTest.php
@@ -75,7 +75,7 @@ class NamespaceMoveTest extends TestCase
     }
 
     /**
-     * @return array<string,array{input:string,output:string,migrations:array<string, string>}>
+     * @return array<string,strict-array{input:string,output:string,migrations:array<string, string>}>
      */
     public function providerValidCodeParse(): array
     {
diff --git a/tests/FileManipulation/ParamNameMismatchTest.php b/tests/FileManipulation/ParamNameMismatchTest.php
index 4577dc21e..3dfd82d77 100644
--- a/tests/FileManipulation/ParamNameMismatchTest.php
+++ b/tests/FileManipulation/ParamNameMismatchTest.php
@@ -4,9 +4,6 @@ namespace Psalm\Tests\FileManipulation;
 
 class ParamNameMismatchTest extends FileManipulationTestCase
 {
-    /**
-     * @return array<string,array{input:string,output:string,php_version:string,issues_to_fix:string[],safe_types:bool}>
-     */
     public function providerValidCodeParse(): array
     {
         return [
diff --git a/tests/FileManipulation/ParamTypeManipulationTest.php b/tests/FileManipulation/ParamTypeManipulationTest.php
index 86d11d20c..9d00e1d69 100644
--- a/tests/FileManipulation/ParamTypeManipulationTest.php
+++ b/tests/FileManipulation/ParamTypeManipulationTest.php
@@ -4,9 +4,6 @@ namespace Psalm\Tests\FileManipulation;
 
 class ParamTypeManipulationTest extends FileManipulationTestCase
 {
-    /**
-     * @return array<string,array{input:string,output:string,php_version:string,issues_to_fix:string[],safe_types:bool}>
-     */
     public function providerValidCodeParse(): array
     {
         return [
diff --git a/tests/FileManipulation/PropertyMoveTest.php b/tests/FileManipulation/PropertyMoveTest.php
index e9e98429e..fac948956 100644
--- a/tests/FileManipulation/PropertyMoveTest.php
+++ b/tests/FileManipulation/PropertyMoveTest.php
@@ -75,7 +75,7 @@ class PropertyMoveTest extends TestCase
     }
 
     /**
-     * @return array<string,array{input:string,output:string,migrations:array<string, string>}>
+     * @return array<string,strict-array{input:string,output:string,migrations:array<string, string>}>
      */
     public function providerValidCodeParse(): array
     {
diff --git a/tests/FileManipulation/PureAnnotationAdditionTest.php b/tests/FileManipulation/PureAnnotationAdditionTest.php
index af8be6c14..3434481ad 100644
--- a/tests/FileManipulation/PureAnnotationAdditionTest.php
+++ b/tests/FileManipulation/PureAnnotationAdditionTest.php
@@ -4,9 +4,6 @@ namespace Psalm\Tests\FileManipulation;
 
 class PureAnnotationAdditionTest extends FileManipulationTestCase
 {
-    /**
-     * @return array<string,array{input:string,output:string,php_version:string,issues_to_fix:string[],safe_types:bool}>
-     */
     public function providerValidCodeParse(): array
     {
         return [
diff --git a/tests/FileManipulation/RedundantCastManipulationTest.php b/tests/FileManipulation/RedundantCastManipulationTest.php
index 509fdd6e5..fa679ce33 100644
--- a/tests/FileManipulation/RedundantCastManipulationTest.php
+++ b/tests/FileManipulation/RedundantCastManipulationTest.php
@@ -4,9 +4,6 @@ namespace Psalm\Tests\FileManipulation;
 
 class RedundantCastManipulationTest extends FileManipulationTestCase
 {
-    /**
-     * @return array<string,array{input:string,output:string,php_version:string,issues_to_fix:array<string>,safe_types:bool,allow_backwards_incompatible_changes?:bool}>
-     */
     public function providerValidCodeParse(): array
     {
         return [
diff --git a/tests/FileManipulation/ReturnTypeManipulationTest.php b/tests/FileManipulation/ReturnTypeManipulationTest.php
index 78e37f101..aefcca3da 100644
--- a/tests/FileManipulation/ReturnTypeManipulationTest.php
+++ b/tests/FileManipulation/ReturnTypeManipulationTest.php
@@ -4,9 +4,6 @@ namespace Psalm\Tests\FileManipulation;
 
 class ReturnTypeManipulationTest extends FileManipulationTestCase
 {
-    /**
-     * @return array<string,array{input:string,output:string,php_version:string,issues_to_fix:array<string>,safe_types:bool,allow_backwards_incompatible_changes?:bool}>
-     */
     public function providerValidCodeParse(): array
     {
         return [
@@ -235,7 +232,7 @@ class ReturnTypeManipulationTest extends FileManipulationTestCase
                             /**
                              * @return B\C[]
                              *
-                             * @psalm-return array{0: B\C}
+                             * @psalm-return strict-list{B\C}
                              */
                             public function getArrayOfC(): array {
                                 return [new \A\B\C];
@@ -499,7 +496,7 @@ class ReturnTypeManipulationTest extends FileManipulationTestCase
                         /**
                          * @return string[]
                          *
-                         * @psalm-return array{0: \'hello\'}
+                         * @psalm-return strict-list{\'hello\'}
                          */
                         public function foo(): ?array {
                             return ["hello"];
@@ -525,7 +522,7 @@ class ReturnTypeManipulationTest extends FileManipulationTestCase
                         /**
                          * @return string[]
                          *
-                         * @psalm-return array{0: \'hello\'}
+                         * @psalm-return strict-list{\'hello\'}
                          */
                         public function foo(): array {
                             return ["hello"];
@@ -884,7 +881,7 @@ class ReturnTypeManipulationTest extends FileManipulationTestCase
                      * @extends container1<TT>
                      */
                     class container2 extends container1 {}
-                    
+
                     function ret() {
                         /** @var container1<int>&container2<int> $a */
                         $a = new container1;
@@ -901,7 +898,7 @@ class ReturnTypeManipulationTest extends FileManipulationTestCase
                      * @extends container1<TT>
                      */
                     class container2 extends container1 {}
-                    
+
                     /**
                      * @return container1&container2
                      *
@@ -929,7 +926,7 @@ class ReturnTypeManipulationTest extends FileManipulationTestCase
                      * @extends container1<TT>
                      */
                     class container2 extends container1 {}
-                    
+
                     function ret() {
                         /** @var container1<int>&container2<int> $a */
                         $a = new container1;
@@ -946,7 +943,7 @@ class ReturnTypeManipulationTest extends FileManipulationTestCase
                      * @extends container1<TT>
                      */
                     class container2 extends container1 {}
-                    
+
                     /**
                      * @psalm-return container1<int>&container2<int>
                      */
diff --git a/tests/FileManipulation/ThrowsBlockAdditionTest.php b/tests/FileManipulation/ThrowsBlockAdditionTest.php
index 467fe05b1..a4a2e8389 100644
--- a/tests/FileManipulation/ThrowsBlockAdditionTest.php
+++ b/tests/FileManipulation/ThrowsBlockAdditionTest.php
@@ -4,9 +4,6 @@ namespace Psalm\Tests\FileManipulation;
 
 class ThrowsBlockAdditionTest extends FileManipulationTestCase
 {
-    /**
-     * @return array<string,array{input:string,output:string,php_version:string,issues_to_fix:string[],safe_types:bool}>
-     */
     public function providerValidCodeParse(): array
     {
         return [
diff --git a/tests/FileManipulation/UndefinedVariableManipulationTest.php b/tests/FileManipulation/UndefinedVariableManipulationTest.php
index 7801fc74e..5d0e09eec 100644
--- a/tests/FileManipulation/UndefinedVariableManipulationTest.php
+++ b/tests/FileManipulation/UndefinedVariableManipulationTest.php
@@ -4,9 +4,6 @@ namespace Psalm\Tests\FileManipulation;
 
 class UndefinedVariableManipulationTest extends FileManipulationTestCase
 {
-    /**
-     * @return array<string,array{input:string,output:string,php_version:string,issues_to_fix:string[],safe_types:bool}>
-     */
     public function providerValidCodeParse(): array
     {
         return [
diff --git a/tests/FileManipulation/UnnecessaryVarAnnotationManipulationTest.php b/tests/FileManipulation/UnnecessaryVarAnnotationManipulationTest.php
index 953e3b9f3..99e3c22ae 100644
--- a/tests/FileManipulation/UnnecessaryVarAnnotationManipulationTest.php
+++ b/tests/FileManipulation/UnnecessaryVarAnnotationManipulationTest.php
@@ -4,9 +4,6 @@ namespace Psalm\Tests\FileManipulation;
 
 class UnnecessaryVarAnnotationManipulationTest extends FileManipulationTestCase
 {
-    /**
-     * @return array<string,array{input:string,output:string,php_version:string,issues_to_fix:string[],safe_types:bool}>
-     */
     public function providerValidCodeParse(): array
     {
         return [
diff --git a/tests/FileManipulation/UnusedCodeManipulationTest.php b/tests/FileManipulation/UnusedCodeManipulationTest.php
index 95bcb2db1..efbc2c126 100644
--- a/tests/FileManipulation/UnusedCodeManipulationTest.php
+++ b/tests/FileManipulation/UnusedCodeManipulationTest.php
@@ -4,9 +4,6 @@ namespace Psalm\Tests\FileManipulation;
 
 class UnusedCodeManipulationTest extends FileManipulationTestCase
 {
-    /**
-     * @return array<string,array{input:string,output:string,php_version:string,issues_to_fix:string[],safe_types:bool}>
-     */
     public function providerValidCodeParse(): array
     {
         return [
diff --git a/tests/FileManipulation/UnusedVariableManipulationTest.php b/tests/FileManipulation/UnusedVariableManipulationTest.php
index 1e73f75fe..91636f4cb 100644
--- a/tests/FileManipulation/UnusedVariableManipulationTest.php
+++ b/tests/FileManipulation/UnusedVariableManipulationTest.php
@@ -4,9 +4,6 @@ namespace Psalm\Tests\FileManipulation;
 
 class UnusedVariableManipulationTest extends FileManipulationTestCase
 {
-    /**
-     * @return array<string,array{input:string,output:string,php_version:string,issues_to_fix:string[],safe_types:bool}>
-     */
     public function providerValidCodeParse(): array
     {
         return [
diff --git a/tests/FileReferenceTest.php b/tests/FileReferenceTest.php
index 9b37cabfa..22ac4b852 100644
--- a/tests/FileReferenceTest.php
+++ b/tests/FileReferenceTest.php
@@ -125,7 +125,7 @@ class FileReferenceTest extends TestCase
     }
 
     /**
-     * @return array<string,array{string,string,array<int,string>}>
+     * @return array<string,strict-array{string,string,array<int,string>}>
      */
     public function providerReferenceLocations(): array
     {
@@ -152,7 +152,7 @@ class FileReferenceTest extends TestCase
     }
 
     /**
-     * @return array<string, array{
+     * @return array<string, strict-array{
      *              0: string,
      *              1: array<string,array<string,bool>>,
      *              2: array<string,array<string,bool>>,
@@ -311,8 +311,6 @@ class FileReferenceTest extends TestCase
                 [],
                 [],
                 [],
-                [],
-                [],
             ],
             'staticPropertyRefs' => [
                 '<?php
@@ -416,8 +414,6 @@ class FileReferenceTest extends TestCase
                 [],
                 [],
                 [],
-                [],
-                [],
             ],
         ];
     }
diff --git a/tests/FileUpdates/AnalyzedMethodTest.php b/tests/FileUpdates/AnalyzedMethodTest.php
index 541acfdb4..c90708921 100644
--- a/tests/FileUpdates/AnalyzedMethodTest.php
+++ b/tests/FileUpdates/AnalyzedMethodTest.php
@@ -49,7 +49,7 @@ class AnalyzedMethodTest extends TestCase
      *
      * @param array<string, string> $start_files
      * @param array<string, string> $end_files
-     * @param array<string, string> $error_levels
+     * @param array<string, string> $ignored_issues
      *
      */
     public function testValidInclude(
@@ -57,7 +57,7 @@ class AnalyzedMethodTest extends TestCase
         array $end_files,
         array $initial_analyzed_methods,
         array $unaffected_analyzed_methods,
-        array $error_levels = []
+        array $ignored_issues = []
     ): void {
         $test_name = $this->getTestName();
         if (strpos($test_name, 'SKIPPED-') !== false) {
@@ -71,7 +71,7 @@ class AnalyzedMethodTest extends TestCase
         $config = $codebase->config;
         $config->throw_exception = false;
 
-        foreach ($error_levels as $error_type => $error_level) {
+        foreach ($ignored_issues as $error_type => $error_level) {
             $config->setCustomErrorLevel($error_type, $error_level);
         }
 
@@ -108,7 +108,7 @@ class AnalyzedMethodTest extends TestCase
     }
 
     /**
-     * @return array<string,array{start_files:array<string,string>,end_files:array<string,string>,initial_analyzed_methods:array<string,array<string,int>>,unaffected_analyzed_methods:array<string,array<string,int>>,4?:array<string,string>}>
+     * @return array<string,strict-array{start_files:array<string,string>,end_files:array<string,string>,initial_analyzed_methods:array<string,array<string,int>>,unaffected_analyzed_methods:array<string,array<string,int>>,0?:array<string,string>}>
      */
     public function providerTestValidUpdates(): array
     {
diff --git a/tests/FileUpdates/ErrorAfterUpdateTest.php b/tests/FileUpdates/ErrorAfterUpdateTest.php
index c9805f589..5e68c58c1 100644
--- a/tests/FileUpdates/ErrorAfterUpdateTest.php
+++ b/tests/FileUpdates/ErrorAfterUpdateTest.php
@@ -50,13 +50,13 @@ class ErrorAfterUpdateTest extends TestCase
      * @dataProvider providerTestInvalidUpdates
      *
      * @param array<int, array<string, string>> $file_stages
-     * @param array<string, string> $error_levels
+     * @param array<string, string> $ignored_issues
      *
      */
     public function testErrorAfterUpdate(
         array $file_stages,
         string $error_message,
-        array $error_levels = []
+        array $ignored_issues = []
     ): void {
         $this->project_analyzer->getCodebase()->diff_methods = true;
         $this->project_analyzer->getCodebase()->reportUnusedCode();
@@ -65,7 +65,7 @@ class ErrorAfterUpdateTest extends TestCase
 
         $config = $codebase->config;
 
-        foreach ($error_levels as $error_type => $error_level) {
+        foreach ($ignored_issues as $error_type => $error_level) {
             $config->setCustomErrorLevel($error_type, $error_level);
         }
 
@@ -102,7 +102,7 @@ class ErrorAfterUpdateTest extends TestCase
     }
 
     /**
-     * @return array<string,array{file_stages:array<int,array<string,string>>,error_message:string}>
+     * @return array<string,strict-array{file_stages:array<int,array<string,string>>,error_message:string}>
      */
     public function providerTestInvalidUpdates(): array
     {
diff --git a/tests/FileUpdates/ErrorFixTest.php b/tests/FileUpdates/ErrorFixTest.php
index 164fef5f3..c435ec325 100644
--- a/tests/FileUpdates/ErrorFixTest.php
+++ b/tests/FileUpdates/ErrorFixTest.php
@@ -51,13 +51,13 @@ class ErrorFixTest extends TestCase
      *
      * @param array<int, array<string, string>> $files
      * @param array<int, int> $error_counts
-     * @param array<string, string> $error_levels
+     * @param array<string, string> $ignored_issues
      *
      */
     public function testErrorFix(
         array $files,
         array $error_counts,
-        array $error_levels = []
+        array $ignored_issues = []
     ): void {
         $this->project_analyzer->getCodebase()->diff_methods = true;
 
@@ -65,7 +65,7 @@ class ErrorFixTest extends TestCase
 
         $config = $codebase->config;
 
-        foreach ($error_levels as $error_type => $error_level) {
+        foreach ($ignored_issues as $error_type => $error_level) {
             $config->setCustomErrorLevel($error_type, $error_level);
         }
 
@@ -104,7 +104,7 @@ class ErrorFixTest extends TestCase
     }
 
     /**
-     * @return array<string,array{files: array<int, array<string,string>>,error_counts:array<int,int>,ignored_issues?:array<string,string>}>
+     * @return array<string,strict-array{files: array<int, array<string,string>>,error_counts:array<int,int>,ignored_issues?:array<string,string>}>
      */
     public function providerTestErrorFix(): array
     {
@@ -193,7 +193,7 @@ class ErrorFixTest extends TestCase
                     ],
                 ],
                 'error_counts' => [2, 1, 0],
-                [
+                'ignored_issues' => [
                     'MissingReturnType' => Config::REPORT_INFO,
                 ],
             ],
diff --git a/tests/FileUpdates/TemporaryUpdateTest.php b/tests/FileUpdates/TemporaryUpdateTest.php
index 95147a9f5..0231c337e 100644
--- a/tests/FileUpdates/TemporaryUpdateTest.php
+++ b/tests/FileUpdates/TemporaryUpdateTest.php
@@ -54,13 +54,13 @@ class TemporaryUpdateTest extends TestCase
      *
      * @param array<int, array<string, string>> $file_stages
      * @param array<int, array<int>> $error_positions
-     * @param array<string, string> $error_levels
+     * @param array<string, string> $ignored_issues
      *
      */
     public function testErrorFix(
         array $file_stages,
         array $error_positions,
-        array $error_levels = [],
+        array $ignored_issues = [],
         bool $test_save = true,
         bool $check_unused_code = false
     ): void {
@@ -73,7 +73,7 @@ class TemporaryUpdateTest extends TestCase
 
         $config = $codebase->config;
 
-        foreach ($error_levels as $error_type => $error_level) {
+        foreach ($ignored_issues as $error_type => $error_level) {
             $config->setCustomErrorLevel($error_type, $error_level);
         }
 
@@ -162,7 +162,7 @@ class TemporaryUpdateTest extends TestCase
     }
 
     /**
-     * @return array<string,array{array<int, array<string, string>>,error_positions:array<int, array<int>>, ignored_issues?:array<string, string>, test_save?:bool}>
+     * @return array<string,strict-array{array<int, array<string, string>>,error_positions:array<int, array<int>>, ignored_issues?:array<string, string>, test_save?:bool, check_unused_code?: bool}>
      */
     public function providerTestErrorFix(): array
     {
@@ -310,7 +310,7 @@ class TemporaryUpdateTest extends TestCase
                     ],
                 ],
                 'error_positions' => [[373], [374], [375]],
-                [
+                'ignored_issues' => [
                     'MixedAssignment' => Config::REPORT_INFO,
                 ],
             ],
@@ -360,7 +360,7 @@ class TemporaryUpdateTest extends TestCase
                     ],
                 ],
                 'error_positions' => [[196, 144, 339, 290], [345, 296], []],
-                [
+                'ignored_issues' => [
                     'MissingReturnType' => Config::REPORT_INFO,
                 ],
             ],
@@ -404,7 +404,7 @@ class TemporaryUpdateTest extends TestCase
                     ],
                 ],
                 'error_positions' => [[333], []],
-                [
+                'ignored_issues' => [
                     'InvalidDocblock' => Config::REPORT_INFO,
                 ],
             ],
@@ -450,7 +450,7 @@ class TemporaryUpdateTest extends TestCase
                     ],
                 ],
                 'error_positions' => [[136, 273], [279], [193, 144]],
-                [
+                'ignored_issues' => [
                     'MissingReturnType' => Config::REPORT_INFO,
                 ],
             ],
@@ -486,10 +486,10 @@ class TemporaryUpdateTest extends TestCase
                     ],
                 ],
                 'error_positions' => [[136, 273], [144, 136, 275]],
-                [
+                'ignored_issues' => [
                     'MissingReturnType' => Config::REPORT_INFO,
                 ],
-                false,
+                'test_save' => false,
             ],
             'noChangeJustWeirdDocblocks' => [
                 [
@@ -1728,9 +1728,9 @@ class TemporaryUpdateTest extends TestCase
                     ],
                 ],
                 'error_positions' => [[84], [84]],
-                [],
-                false,
-                true
+                'ignored_issues' => [],
+                'test_save' => false,
+                'check_unused_code' => true
             ],
             'stillUnusedMethod' => [
                 [
@@ -1765,9 +1765,9 @@ class TemporaryUpdateTest extends TestCase
                     ],
                 ],
                 'error_positions' => [[201], [234]],
-                [],
-                false,
-                true
+                'ignored_issues' => [],
+                'test_save' => false,
+                'check_unused_code' => true
             ],
             'usedMethodWithNoAffectedConstantChanges' => [
                 [
@@ -1824,9 +1824,9 @@ class TemporaryUpdateTest extends TestCase
                     ],
                 ],
                 'error_positions' => [[], []],
-                [],
-                false,
-                true
+                'ignored_issues' => [],
+                'test_save' => false,
+                'check_unused_code' => true
             ],
             'syntaxErrorFixed' => [
                 [
diff --git a/tests/ForbiddenCodeTest.php b/tests/ForbiddenCodeTest.php
index 2f8ea3080..aa57a5896 100644
--- a/tests/ForbiddenCodeTest.php
+++ b/tests/ForbiddenCodeTest.php
@@ -20,7 +20,7 @@ class ForbiddenCodeTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -54,7 +54,7 @@ class ForbiddenCodeTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
diff --git a/tests/FunctionCallTest.php b/tests/FunctionCallTest.php
index 9b4f21793..c7288f72e 100644
--- a/tests/FunctionCallTest.php
+++ b/tests/FunctionCallTest.php
@@ -15,7 +15,7 @@ class FunctionCallTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -272,7 +272,7 @@ class FunctionCallTest extends TestCase
             'objectLikeKeyChecksAgainstTKeyedArray' => [
                 'code' => '<?php
                     /**
-                     * @param array{a: string} $b
+                     * @param strict-array{a: string} $b
                      */
                     function a($b): string
                     {
@@ -674,7 +674,7 @@ class FunctionCallTest extends TestCase
                     $query = parse_url($url, PHP_URL_QUERY);
                     $fragment = parse_url($url, PHP_URL_FRAGMENT);',
                 'assertions' => [
-                    '$components' => 'array{fragment?: string, host?: string, pass?: string, path?: string, port?: int, query?: string, scheme?: string, user?: string}|false',
+                    '$components' => 'false|strict-array{fragment?: string, host?: string, pass?: string, path?: string, port?: int, query?: string, scheme?: string, user?: string}',
                     '$scheme' => 'false|null|string',
                     '$host' => 'false|null|string',
                     '$port' => 'false|int|null',
@@ -693,9 +693,9 @@ class FunctionCallTest extends TestCase
                     $b = parse_url($url, -42);
                     $c = parse_url($url, $component);',
                 'assertions' => [
-                    '$a' => 'array{fragment?: string, host?: string, pass?: string, path?: string, port?: int, query?: string, scheme?: string, user?: string}|false',
-                    '$b' => 'array{fragment?: string, host?: string, pass?: string, path?: string, port?: int, query?: string, scheme?: string, user?: string}|false',
-                    '$c' => 'array{fragment?: string, host?: string, pass?: string, path?: string, port?: int, query?: string, scheme?: string, user?: string}|false',
+                    '$a' => 'false|strict-array{fragment?: string, host?: string, pass?: string, path?: string, port?: int, query?: string, scheme?: string, user?: string}',
+                    '$b' => 'false|strict-array{fragment?: string, host?: string, pass?: string, path?: string, port?: int, query?: string, scheme?: string, user?: string}',
+                    '$c' => 'false|strict-array{fragment?: string, host?: string, pass?: string, path?: string, port?: int, query?: string, scheme?: string, user?: string}',
                 ],
             ],
             'triggerUserError' => [
@@ -1066,9 +1066,9 @@ class FunctionCallTest extends TestCase
                     $d = hrtime(false);',
                 'assertions' => [
                     '$a' => 'int',
-                    '$b' => 'array{int, int}',
-                    '$c' => 'array{int, int}|int',
-                    '$d' => 'array{int, int}',
+                    '$b' => 'strict-list{int, int}',
+                    '$c' => 'int|strict-list{int, int}',
+                    '$d' => 'strict-list{int, int}',
                 ],
             ],
             'hrtimeCanBeFloat' => [
@@ -1202,7 +1202,7 @@ class FunctionCallTest extends TestCase
                 'code' => '<?php
                     /**
                      * @psalm-pure
-                     * @param array{int, int, string} $x
+                     * @param strict-array{int, int, string} $x
                      * @return 3
                      */
                     function example($x) : int {
@@ -1367,7 +1367,7 @@ class FunctionCallTest extends TestCase
                     $r = preg_match("{foo}", "foo", $matches, PREG_OFFSET_CAPTURE);',
                 'assertions' => [
                     '$r===' => '0|1|false',
-                    '$matches===' => 'array<array-key, array{string, int<-1, max>}>',
+                    '$matches===' => 'array<array-key, strict-list{string, int<-1, max>}>',
                 ],
             ],
             'pregMatchWithFlagUnmatchedAsNull' => [
@@ -1383,7 +1383,7 @@ class FunctionCallTest extends TestCase
                     $r = preg_match("{foo}", "foo", $matches, PREG_OFFSET_CAPTURE | PREG_UNMATCHED_AS_NULL);',
                 'assertions' => [
                     '$r===' => '0|1|false',
-                    '$matches===' => 'array<array-key, array{null|string, int<-1, max>}>',
+                    '$matches===' => 'array<array-key, strict-list{null|string, int<-1, max>}>',
                 ],
             ],
             'pregReplaceCallback' => [
@@ -1413,7 +1413,7 @@ class FunctionCallTest extends TestCase
                     };',
                     'assertions' => [],
                     'ignored_issues' => [],
-                    '7.4'
+                    'php_version' => '7.4'
             ],
             'compactDefinedVariable' => [
                 'code' => '<?php
@@ -1843,7 +1843,7 @@ class FunctionCallTest extends TestCase
                         }
                     }',
                 'assertions' => [],
-                'error_levels' => ['MixedMethodCall'],
+                'ignored_issues' => ['MixedMethodCall'],
                 'php_version' => '8.1',
             ],
             'refineWithEnumExists' => [
@@ -1854,7 +1854,7 @@ class FunctionCallTest extends TestCase
                         }
                     }',
                 'assertions' => [],
-                'error_levels' => [],
+                'ignored_issues' => [],
                 'php_version' => '8.1',
             ],
             'refineWithClassExistsOrEnumExists' => [
@@ -1877,7 +1877,7 @@ class FunctionCallTest extends TestCase
                         }
                     }',
                 'assertions' => [],
-                'error_levels' => [],
+                'ignored_issues' => [],
                 'php_version' => '8.1',
             ],
             'trimSavesLowercaseAttribute' => [
@@ -1911,7 +1911,7 @@ class FunctionCallTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -2081,7 +2081,7 @@ class FunctionCallTest extends TestCase
             'objectLikeKeyChecksAgainstDifferentTKeyedArray' => [
                 'code' => '<?php
                     /**
-                     * @param array{a: int} $b
+                     * @param strict-array{a: int} $b
                      */
                     function a($b): int
                     {
@@ -2450,6 +2450,14 @@ class FunctionCallTest extends TestCase
                     }',
                 'error_message' => 'ArgumentTypeCoercion',
             ],
+            'array_is_list_literal_array' => [
+                'code' => '<?php
+                    $list = [1 => 0, 0 => 1];
+                    assert(array_is_list($list));',
+                'error_message' => 'TypeDoesNotContainType',
+                'ignored_issues' => [],
+                'php_version' => '8.1',
+            ]
         ];
     }
 
diff --git a/tests/GeneratorTest.php b/tests/GeneratorTest.php
index 5a1aab47a..1b764a51d 100644
--- a/tests/GeneratorTest.php
+++ b/tests/GeneratorTest.php
@@ -11,7 +11,7 @@ class GeneratorTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -291,14 +291,14 @@ class GeneratorTest extends TestCase
                     $_a = function() { return [yield "a"]; };
                     ',
                 'assertions' => [
-                    '$_a' => 'pure-Closure():Generator<int, string, mixed, array{string}>',
+                    '$_a' => 'pure-Closure():Generator<int, string, mixed, strict-list{string}>',
                 ]
             ],
         ];
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/IfThisIsTest.php b/tests/IfThisIsTest.php
index 248fe4955..9cc097faf 100644
--- a/tests/IfThisIsTest.php
+++ b/tests/IfThisIsTest.php
@@ -11,7 +11,7 @@ class IfThisIsTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -290,7 +290,7 @@ class IfThisIsTest extends TestCase
     }
 
     /**
-     * @return array<string, array{code: string, error_message: string}>
+     * @return array<string, strict-array{code: string, error_message: string}>
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/ImmutableAnnotationTest.php b/tests/ImmutableAnnotationTest.php
index 6907f517b..e86089b00 100644
--- a/tests/ImmutableAnnotationTest.php
+++ b/tests/ImmutableAnnotationTest.php
@@ -11,7 +11,7 @@ class ImmutableAnnotationTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -216,7 +216,7 @@ class ImmutableAnnotationTest extends TestCase
                             return ["data" => $this->data];
                         }
 
-                        /** @param array{data: string} $data */
+                        /** @param strict-array{data: string} $data */
                         public function __unserialize(array $data): void {
                             $this->data = $data["data"];
                         }
@@ -551,7 +551,7 @@ class ImmutableAnnotationTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/IncludeTest.php b/tests/IncludeTest.php
index 3f13695fd..bbd895454 100644
--- a/tests/IncludeTest.php
+++ b/tests/IncludeTest.php
@@ -20,14 +20,14 @@ class IncludeTest extends TestCase
      * @param array<int, string> $files_to_check
      * @param array<string, string> $files
      * @param bool $hoist_constants
-     * @param array<string, string> $error_levels
+     * @param list<string> $ignored_issues
      *
      */
     public function testValidInclude(
         array $files,
         array $files_to_check,
         $hoist_constants = false,
-        array $error_levels = []
+        array $ignored_issues = []
     ): void {
         $codebase = $this->project_analyzer->getCodebase();
 
@@ -43,7 +43,7 @@ class IncludeTest extends TestCase
         $config = $codebase->config;
         $config->skip_checks_on_unresolvable_includes = true;
 
-        foreach ($error_levels as $error_level) {
+        foreach ($ignored_issues as $error_level) {
             $config->setCustomErrorLevel($error_level, Config::REPORT_SUPPRESS);
         }
 
@@ -99,7 +99,7 @@ class IncludeTest extends TestCase
     }
 
     /**
-     * @return array<string,array{files:array<string,string>,files_to_check:array<int,string>}>
+     * @return array<string,strict-array{files:array<string,string>,files_to_check:array<int,string>,hoist_constants?:bool,ignored_issues?:list<string>}>
      */
     public function providerTestValidIncludes(): array
     {
@@ -628,7 +628,7 @@ class IncludeTest extends TestCase
     }
 
     /**
-     * @return array<string,array{files:array<string,string>,files_to_check:array<int,string>,error_message:string}>
+     * @return array<string,strict-array{files:array<string,string>,files_to_check:array<int,string>,error_message:string}>
      */
     public function providerTestInvalidIncludes(): array
     {
diff --git a/tests/IntRangeTest.php b/tests/IntRangeTest.php
index d4f8c78bf..0e43208f6 100644
--- a/tests/IntRangeTest.php
+++ b/tests/IntRangeTest.php
@@ -23,7 +23,7 @@ class IntRangeTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -489,7 +489,7 @@ class IntRangeTest extends TestCase
 
 
                     /** @return array<int, string> */
-                    function getArray(): array{
+                    function getArray(): array {
                         return [];
                     }'
             ],
@@ -861,7 +861,7 @@ class IntRangeTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/InterfaceTest.php b/tests/InterfaceTest.php
index 106219b76..01b6af376 100644
--- a/tests/InterfaceTest.php
+++ b/tests/InterfaceTest.php
@@ -13,7 +13,7 @@ class InterfaceTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -743,7 +743,7 @@ class InterfaceTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/Internal/CallMapTest.php b/tests/Internal/CallMapTest.php
index 162ea0d4e..d5d2a6d4e 100644
--- a/tests/Internal/CallMapTest.php
+++ b/tests/Internal/CallMapTest.php
@@ -61,9 +61,9 @@ class CallMapTest extends TestCase
 
     /**
      * @depends testDictionaryPathMustBeAReadableDirectory
-     * @return array<string, array{
+     * @return array<string, strict-array{
      *     added: array<string, array<int|string, string>>,
-     *     changed: array<string, array{
+     *     changed: array<string, strict-array{
      *         old: array<int|string, string>,
      *         new: array<int|string, string>
      *     }>,
@@ -90,9 +90,9 @@ class CallMapTest extends TestCase
             }
 
             /**
-             * @var array{
+             * @var strict-array{
              *     added: array<string, array<int|string, string>>,
-             *     changed: array<string, array{
+             *     changed: array<string, strict-array{
              *         old: array<int|string, string>,
              *         new: array<int|string, string>
              *     }>,
@@ -133,9 +133,9 @@ class CallMapTest extends TestCase
      * @depends testMainCallmapFileContainsACallmap
      * @depends testDeltaFilesContainAddedChangedAndRemovedSections
      * @param array<string, array<int|string,string>> $mainCallMap
-     * @param array<string, array{
+     * @param array<string, strict-array{
      *     added: array<string, array<int|string, string>>,
-     *     changed: array<string, array{
+     *     changed: array<string, strict-array{
      *         old: array<int|string, string>,
      *         new: array<int|string, string>
      *     }>,
@@ -166,9 +166,9 @@ class CallMapTest extends TestCase
      * @depends testDeltaFilesContainAddedChangedAndRemovedSections
      * @depends testCallmapKeysAreStringsAndValuesAreSignatures
      * @param array<string, array<int|string,string>> $mainCallMap
-     * @param array<string, array{
+     * @param array<string, strict-array{
      *     added: array<string, array<int|string, string>>,
-     *     changed: array<string, array{
+     *     changed: array<string, strict-array{
      *         old: array<int|string, string>,
      *         new: array<int|string, string>
      *     }>,
@@ -208,9 +208,9 @@ class CallMapTest extends TestCase
      * @depends testDeltaFilesContainAddedChangedAndRemovedSections
      * @depends testSignatureKeysAreZeroOrStringAndValuesAreTypes
      * @param array<string, array<int|string,string>> $mainCallMap
-     * @param array<string, array{
+     * @param array<string, strict-array{
      *     added: array<string, array<int|string, string>>,
-     *     changed: array<string, array{
+     *     changed: array<string, strict-array{
      *         old: array<int|string, string>,
      *         new: array<int|string, string>
      *     }>,
@@ -252,9 +252,9 @@ class CallMapTest extends TestCase
     /**
      * @depends testDeltaFilesContainAddedChangedAndRemovedSections
      * @depends testCallmapKeysAreStringsAndValuesAreSignatures
-     * @param array<string, array{
+     * @param array<string, strict-array{
      *     added: array<string, array<int|string, string>>,
-     *     changed: array<string, array{
+     *     changed: array<string, strict-array{
      *         old: array<int|string, string>,
      *         new: array<int|string, string>
      *     }>,
@@ -296,9 +296,9 @@ class CallMapTest extends TestCase
      * @depends testDeltaFilesContainAddedChangedAndRemovedSections
      * @depends testCallmapKeysAreStringsAndValuesAreSignatures
      * @depends testChangedAndRemovedFunctionsMustExist
-     * @param array<string, array{
+     * @param array<string, strict-array{
      *     added: array<string, array<int|string, string>>,
-     *     changed: array<string, array{
+     *     changed: array<string, strict-array{
      *         old: array<int|string, string>,
      *         new: array<int|string, string>
      *     }>,
@@ -330,9 +330,9 @@ class CallMapTest extends TestCase
     /**
      * @depends testDeltaFilesContainAddedChangedAndRemovedSections
      * @depends testCallmapKeysAreStringsAndValuesAreSignatures
-     * @param array<string, array{
+     * @param array<string, strict-array{
      *     added: array<string, array<int|string, string>>,
-     *     changed: array<string, array{
+     *     changed: array<string, strict-array{
      *         old: array<int|string, string>,
      *         new: array<int|string, string>
      *     }>,
@@ -445,9 +445,9 @@ class CallMapTest extends TestCase
     /**
      * @depends testDeltaFilesContainAddedChangedAndRemovedSections
      * @depends testSignatureKeysAreZeroOrStringAndValuesAreTypes
-     * @param array<string, array{
+     * @param array<string, strict-array{
      *     added: array<string, array<int|string, string>>,
-     *     changed: array<string, array{
+     *     changed: array<string, strict-array{
      *         old: array<int|string, string>,
      *         new: array<int|string, string>
      *     }>,
diff --git a/tests/Internal/CliUtilsTest.php b/tests/Internal/CliUtilsTest.php
index 928eb0152..1630d6ec9 100644
--- a/tests/Internal/CliUtilsTest.php
+++ b/tests/Internal/CliUtilsTest.php
@@ -28,7 +28,7 @@ class CliUtilsTest extends TestCase
         $argv = $this->argv;
     }
 
-    /** @return iterable<string,array{list<string>,list<string>}> */
+    /** @return iterable<string,strict-array{list<string>,list<string>}> */
     public function provideGetArguments(): iterable
     {
         $psalter = __DIR__ . '/../../psalter';
@@ -61,7 +61,7 @@ class CliUtilsTest extends TestCase
         self::assertEquals($expected, $result);
     }
 
-    /** @return iterable<string,array{list<string>|null,list<string>,fpaths?:list<string>}> */
+    /** @return iterable<string,strict-list{0: list<string>|null, 1: list<string>, 2?: list<string>}> */
     public function provideGetPathsToCheck(): iterable
     {
         $psalm = __DIR__ . DIRECTORY_SEPARATOR . '..' . DIRECTORY_SEPARATOR . '..' . DIRECTORY_SEPARATOR . 'psalm';
diff --git a/tests/Internal/Codebase/InternalCallMapHandlerTest.php b/tests/Internal/Codebase/InternalCallMapHandlerTest.php
index 6181f6611..0992c3d5d 100644
--- a/tests/Internal/Codebase/InternalCallMapHandlerTest.php
+++ b/tests/Internal/Codebase/InternalCallMapHandlerTest.php
@@ -549,7 +549,7 @@ class InternalCallMapHandlerTest extends TestCase
 
     /**
      *
-     * @return iterable<string, array{0: callable-string, 1: array<int|string, string>}>
+     * @return iterable<string, strict-array{0: callable-string, 1: array<int|string, string>}>
      */
     public function callMapEntryProvider(): iterable
     {
@@ -685,15 +685,14 @@ class InternalCallMapHandlerTest extends TestCase
     {
         /**
          * Parse the parameter names from the map.
-         * @var array<string, array{byRef: bool, refMode: 'rw'|'w', variadic: bool, optional: bool, type: string}>
+         * @var array<string, strict-array{byRef: bool, refMode: 'rw'|'w'|'r', variadic: bool, optional: bool, type: string}>
          */
         $normalizedEntries = [];
 
         foreach ($entryParameters as $key => $entry) {
             $normalizedKey = $key;
             /**
-             *
-             * @var array{byRef: bool, refMode: 'rw'|'w', variadic: bool, optional: bool, type: string} $normalizedEntry
+             * @var strict-array{byRef: bool, refMode: 'rw'|'w'|'r', variadic: bool, optional: bool, type: string} $normalizedEntry
              */
             $normalizedEntry = [
                 'variadic' => false,
@@ -715,6 +714,9 @@ class InternalCallMapHandlerTest extends TestCase
             if ($normalizedEntry['byRef']) {
                 $parts = explode('_', $normalizedKey, 2);
                 if (count($parts) === 2) {
+                    if (!($parts[0] === 'rw' || $parts[0] === 'w' || $parts[0] === 'r')) {
+                        throw new InvalidArgumentException('Invalid refMode: '.$parts[0]);
+                    }
                     $normalizedEntry['refMode'] = $parts[0];
                     $normalizedKey = $parts[1];
                 } else {
@@ -739,7 +741,7 @@ class InternalCallMapHandlerTest extends TestCase
 
     /**
      *
-     * @param array{byRef: bool, refMode: 'rw'|'w', variadic: bool, optional: bool, type: string} $normalizedEntry
+     * @param strict-array{byRef: bool, name?: string, refMode: 'rw'|'w'|'r', variadic: bool, optional: bool, type: string} $normalizedEntry
      */
     private function assertParameter(array $normalizedEntry, ReflectionParameter $param): void
     {
diff --git a/tests/Internal/Provider/FakeFileReferenceCacheProvider.php b/tests/Internal/Provider/FakeFileReferenceCacheProvider.php
index 8e3c17ef2..9fb08f930 100644
--- a/tests/Internal/Provider/FakeFileReferenceCacheProvider.php
+++ b/tests/Internal/Provider/FakeFileReferenceCacheProvider.php
@@ -65,10 +65,10 @@ class FakeFileReferenceCacheProvider extends FileReferenceCacheProvider
     /**
      * @var array<
      *      string,
-     *      array{
-     *          0: array<int, array{0: int, 1: non-empty-string}>,
-     *          1: array<int, array{0: int, 1: non-empty-string}>,
-     *          2: array<int, array{0: int, 1: non-empty-string, 2: int}>
+     *      strict-array{
+     *          0: array<int, strict-array{0: int, 1: non-empty-string}>,
+     *          1: array<int, strict-array{0: int, 1: non-empty-string}>,
+     *          2: array<int, strict-array{0: int, 1: non-empty-string, 2: int}>
      *      }
      *  >
      */
@@ -258,10 +258,10 @@ class FakeFileReferenceCacheProvider extends FileReferenceCacheProvider
     /**
      * @return array<
      *      string,
-     *      array{
-     *          0: array<int, array{0: int, 1: non-empty-string}>,
-     *          1: array<int, array{0: int, 1: non-empty-string}>,
-     *          2: array<int, array{0: int, 1: non-empty-string, 2: int}>
+     *      strict-array{
+     *          0: array<int, strict-array{0: int, 1: non-empty-string}>,
+     *          1: array<int, strict-array{0: int, 1: non-empty-string}>,
+     *          2: array<int, strict-array{0: int, 1: non-empty-string, 2: int}>
      *      }
      *  >
      */
@@ -273,10 +273,10 @@ class FakeFileReferenceCacheProvider extends FileReferenceCacheProvider
     /**
      * @param array<
      *      string,
-     *      array{
-     *          0: array<int, array{0: int, 1: non-empty-string}>,
-     *          1: array<int, array{0: int, 1: non-empty-string}>,
-     *          2: array<int, array{0: int, 1: non-empty-string, 2: int}>
+     *      strict-array{
+     *          0: array<int, strict-array{0: int, 1: non-empty-string}>,
+     *          1: array<int, strict-array{0: int, 1: non-empty-string}>,
+     *          2: array<int, strict-array{0: int, 1: non-empty-string, 2: int}>
      *      }
      *  > $file_maps
      */
@@ -286,7 +286,7 @@ class FakeFileReferenceCacheProvider extends FileReferenceCacheProvider
     }
 
     /**
-     * @param array<string, array{int, int}> $mixed_counts
+     * @param array<string, strict-array{int, int}> $mixed_counts
      */
     public function setTypeCoverage(array $mixed_counts): void
     {
diff --git a/tests/InternalAnnotationTest.php b/tests/InternalAnnotationTest.php
index 38f6dd5df..6e2a86849 100644
--- a/tests/InternalAnnotationTest.php
+++ b/tests/InternalAnnotationTest.php
@@ -11,7 +11,7 @@ class InternalAnnotationTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -613,7 +613,7 @@ class InternalAnnotationTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/IssueSuppressionTest.php b/tests/IssueSuppressionTest.php
index 8a08db45a..2c4847b96 100644
--- a/tests/IssueSuppressionTest.php
+++ b/tests/IssueSuppressionTest.php
@@ -251,7 +251,7 @@ class IssueSuppressionTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -410,7 +410,7 @@ class IssueSuppressionTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/JsonOutputTest.php b/tests/JsonOutputTest.php
index 1ab0c0457..5613b2bd7 100644
--- a/tests/JsonOutputTest.php
+++ b/tests/JsonOutputTest.php
@@ -68,7 +68,7 @@ class JsonOutputTest extends TestCase
     }
 
     /**
-     * @return array<string,array{code:string,error_count:int,message:string,line:int,error:string}>
+     * @return array<string,strict-array{code:string,error_count:int,message:string,line:int,error:string}>
      */
     public function providerTestJsonOutputErrors(): array
     {
diff --git a/tests/KeyOfArrayTest.php b/tests/KeyOfArrayTest.php
index 5fd4a5604..cf296db2e 100644
--- a/tests/KeyOfArrayTest.php
+++ b/tests/KeyOfArrayTest.php
@@ -13,7 +13,7 @@ class KeyOfArrayTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -102,7 +102,7 @@ class KeyOfArrayTest extends TestCase
             'keyOfUnionListAndKeyedArray' => [
                 'code' => '<?php
                     /**
-                     * @return key-of<list<int>|array{a: int, b: int}>
+                     * @return key-of<list<int>|strict-array{a: int, b: int}>
                      */
                     function getKey(bool $asInt) {
                         if ($asInt) {
@@ -155,7 +155,7 @@ class KeyOfArrayTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -217,7 +217,7 @@ class KeyOfArrayTest extends TestCase
             'noLiteralCAllowedInKeyOfUnionListAndKeyedArray' => [
                 'code' => '<?php
                     /**
-                     * @return key-of<list<int>|array{a: int, b: int}>
+                     * @return key-of<list<int>|strict-array{a: int, b: int}>
                      */
                     function getKey() {
                         return "c";
diff --git a/tests/LanguageServer/CompletionTest.php b/tests/LanguageServer/CompletionTest.php
index ce44833a2..ddec01af2 100644
--- a/tests/LanguageServer/CompletionTest.php
+++ b/tests/LanguageServer/CompletionTest.php
@@ -1357,7 +1357,7 @@ class CompletionTest extends TestCase
         $completion_data = $codebase->getCompletionDataAtPosition('somefile.php', new Position(2, 26));
         $this->assertSame(
             [
-                'array{bar: 2, foo: 1}',
+                'strict-array{bar: 2, foo: 1}',
                 '[',
                 86,
             ],
diff --git a/tests/LanguageServer/SymbolLookupTest.php b/tests/LanguageServer/SymbolLookupTest.php
index be928a96d..e6f89d961 100644
--- a/tests/LanguageServer/SymbolLookupTest.php
+++ b/tests/LanguageServer/SymbolLookupTest.php
@@ -487,7 +487,7 @@ class SymbolLookupTest extends TestCase
     }
 
     /**
-     * @return array<int, array{0: Position, 1: ?string, 2: ?int, 3: ?int}>
+     * @return array<int, strict-array{0: Position, 1: ?string, 2: ?int, 3: ?int}>
      */
     public function providerGetSignatureHelp(): array
     {
diff --git a/tests/ListTest.php b/tests/ListTest.php
index 80edb1efc..e371df5d7 100644
--- a/tests/ListTest.php
+++ b/tests/ListTest.php
@@ -13,7 +13,7 @@ class ListTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -156,7 +156,7 @@ class ListTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/Loop/DoTest.php b/tests/Loop/DoTest.php
index 45f6056ce..cf7f0dc95 100644
--- a/tests/Loop/DoTest.php
+++ b/tests/Loop/DoTest.php
@@ -14,7 +14,7 @@ class DoTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -366,7 +366,7 @@ class DoTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/Loop/ForTest.php b/tests/Loop/ForTest.php
index dfc9b605a..b1c3592f0 100644
--- a/tests/Loop/ForTest.php
+++ b/tests/Loop/ForTest.php
@@ -14,7 +14,7 @@ class ForTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -50,7 +50,7 @@ class ForTest extends TestCase
                         break;
                       }
                     }',
-                'assignments' => [
+                'assertions' => [
                     '$a' => 'bool',
                 ],
             ],
@@ -142,7 +142,7 @@ class ForTest extends TestCase
             'noCrashOnLongThing' => [
                 'code' => '<?php
                     /**
-                     * @param list<array{a: array{int, int}}> $data
+                     * @param list<strict-array{a: strict-array{int, int}}> $data
                      */
                     function makeData(array $data) : array {
                         while (rand(0, 1)) {
@@ -184,7 +184,7 @@ class ForTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/Loop/ForeachTest.php b/tests/Loop/ForeachTest.php
index 99c93c2d5..d7475d10e 100644
--- a/tests/Loop/ForeachTest.php
+++ b/tests/Loop/ForeachTest.php
@@ -14,7 +14,7 @@ class ForeachTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -317,7 +317,7 @@ class ForeachTest extends TestCase
                     $tag = null;
                     foreach (["a", "b", "c"] as $tag) {
                     }',
-                'assignments' => [
+                'assertions' => [
                     '$tag' => 'string',
                 ],
             ],
@@ -331,7 +331,7 @@ class ForeachTest extends TestCase
                         $tag = null;
                       }
                     }',
-                'assignments' => [
+                'assertions' => [
                     '$tag' => 'null',
                 ],
             ],
@@ -350,7 +350,7 @@ class ForeachTest extends TestCase
                         break;
                       }
                     }',
-                'assignments' => [
+                'assertions' => [
                     '$tag' => 'null',
                 ],
             ],
@@ -364,7 +364,7 @@ class ForeachTest extends TestCase
                         break;
                       }
                     }',
-                'assignments' => [
+                'assertions' => [
                     '$tag' => 'null|string',
                 ],
             ],
@@ -378,7 +378,7 @@ class ForeachTest extends TestCase
                         $tag = null;
                       }
                     }',
-                'assignments' => [
+                'assertions' => [
                     '$tag' => 'null|string',
                 ],
             ],
@@ -392,7 +392,7 @@ class ForeachTest extends TestCase
                         break;
                       }
                     }',
-                'assignments' => [
+                'assertions' => [
                     '$tag' => 'int|null|string',
                 ],
             ],
@@ -407,7 +407,7 @@ class ForeachTest extends TestCase
                         break;
                       }
                     }',
-                'assignments' => [
+                'assertions' => [
                     '$tag' => 'null',
                 ],
             ],
@@ -424,7 +424,7 @@ class ForeachTest extends TestCase
                         $a = $s;
                       }
                     }',
-                'assignments' => [
+                'assertions' => [
                     '$a' => 'mixed',
                 ],
                 'ignored_issues' => [
@@ -470,7 +470,7 @@ class ForeachTest extends TestCase
                         continue;
                       }
                     }',
-                'assignments' => [
+                'assertions' => [
                     '$a' => 'mixed',
                 ],
                 'ignored_issues' => [
@@ -485,7 +485,7 @@ class ForeachTest extends TestCase
                       $a = true;
                       break;
                     }',
-                'assignments' => [
+                'assertions' => [
                     '$a' => 'bool',
                 ],
             ],
@@ -497,7 +497,7 @@ class ForeachTest extends TestCase
                       $a = true;
                       continue;
                     }',
-                'assignments' => [
+                'assertions' => [
                     '$a' => 'bool',
                 ],
             ],
@@ -514,7 +514,7 @@ class ForeachTest extends TestCase
                         break;
                       }
                     }',
-                'assignments' => [
+                'assertions' => [
                     '$a' => 'bool',
                 ],
             ],
@@ -528,7 +528,7 @@ class ForeachTest extends TestCase
                         continue;
                       }
                     }',
-                'assignments' => [
+                'assertions' => [
                     '$a' => 'bool',
                 ],
             ],
@@ -547,7 +547,7 @@ class ForeachTest extends TestCase
                         continue;
                       }
                     }',
-                'assignments' => [
+                'assertions' => [
                     '$a' => 'bool',
                 ],
             ],
@@ -568,7 +568,7 @@ class ForeachTest extends TestCase
                             }
                         }
                     }',
-                'assignments' => [
+                'assertions' => [
                     '$a' => 'bool',
                 ],
             ],
@@ -583,7 +583,7 @@ class ForeachTest extends TestCase
 
                       break;
                     }',
-                'assignments' => [
+                'assertions' => [
                     '$a' => 'bool',
                 ],
             ],
@@ -619,7 +619,7 @@ class ForeachTest extends TestCase
                         $r[] = $key;
                       }
                     }',
-                'assignments' => [],
+                'assertions' => [],
                 'ignored_issues' => [
                     'MixedAssignment', 'MixedArrayAccess',
                 ],
@@ -709,7 +709,7 @@ class ForeachTest extends TestCase
 
                     loopT(new C);
                     loopI(new C);',
-                'assignments' => [],
+                'assertions' => [],
                 'ignored_issues' => [
                     'MixedAssignment', 'UndefinedThisPropertyAssignment',
                 ],
@@ -1165,7 +1165,7 @@ class ForeachTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/Loop/WhileTest.php b/tests/Loop/WhileTest.php
index 26f252455..31bdc6045 100644
--- a/tests/Loop/WhileTest.php
+++ b/tests/Loop/WhileTest.php
@@ -12,7 +12,7 @@ class WhileTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -680,7 +680,7 @@ class WhileTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/MagicMethodAnnotationTest.php b/tests/MagicMethodAnnotationTest.php
index 13ecd9a83..3ebf108d2 100644
--- a/tests/MagicMethodAnnotationTest.php
+++ b/tests/MagicMethodAnnotationTest.php
@@ -148,7 +148,7 @@ class MagicMethodAnnotationTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -879,7 +879,7 @@ class MagicMethodAnnotationTest extends TestCase
 
                     /** @var I<B> $i */
                     $c = $i->foo();',
-                [
+                'assertions' => [
                     '$b' => 'A<B>&static',
                     '$c' => 'I<B>&static',
                 ]
@@ -944,7 +944,7 @@ class MagicMethodAnnotationTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/MagicPropertyTest.php b/tests/MagicPropertyTest.php
index 470c3214c..a6b9876dd 100644
--- a/tests/MagicPropertyTest.php
+++ b/tests/MagicPropertyTest.php
@@ -36,7 +36,7 @@ class MagicPropertyTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -225,7 +225,7 @@ class MagicPropertyTest extends TestCase
                         $a->__set("foo", $b);
                     }',
                 'assertions' => [],
-                'error_level' => ['MixedAssignment', 'MixedPropertyTypeCoercion'],
+                'ignored_issues' => ['MixedAssignment', 'MixedPropertyTypeCoercion'],
             ],
             'namedPropertyByVariable' => [
                 'code' => '<?php
@@ -367,7 +367,7 @@ class MagicPropertyTest extends TestCase
                     $c->foo = "bar";
                     echo $c->foo;',
                 'assertions' => [],
-                'error_level' => ['MixedArgument'],
+                'ignored_issues' => ['MixedArgument'],
             ],
             'dontAssumeNonNullAfterPossibleMagicFetch' => [
                 'code' => '<?php
@@ -383,7 +383,7 @@ class MagicPropertyTest extends TestCase
                         if ($c) {}
                     }',
                 'assertions' => [],
-                'error_level' => ['PossiblyNullPropertyFetch'],
+                'ignored_issues' => ['PossiblyNullPropertyFetch'],
             ],
             'accessInMagicGet' => [
                 'code' => '<?php
@@ -399,7 +399,7 @@ class MagicPropertyTest extends TestCase
                         }
                     }',
                 'assertions' => [],
-                'error_level' => ['MixedReturnStatement', 'MixedInferredReturnType'],
+                'ignored_issues' => ['MixedReturnStatement', 'MixedInferredReturnType'],
             ],
             'overrideInheritedProperty' => [
                 'code' => '<?php
@@ -735,7 +735,7 @@ class MagicPropertyTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/MatchTest.php b/tests/MatchTest.php
index 615b7f69c..fcb3aa9ae 100644
--- a/tests/MatchTest.php
+++ b/tests/MatchTest.php
@@ -11,7 +11,7 @@ class MatchTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -102,7 +102,7 @@ class MatchTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/MethodCallTest.php b/tests/MethodCallTest.php
index 8e2eaa327..9d7850cc7 100644
--- a/tests/MethodCallTest.php
+++ b/tests/MethodCallTest.php
@@ -194,7 +194,7 @@ class MethodCallTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -1030,7 +1030,7 @@ class MethodCallTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/MethodSignatureTest.php b/tests/MethodSignatureTest.php
index 884ddc539..5b503f2af 100644
--- a/tests/MethodSignatureTest.php
+++ b/tests/MethodSignatureTest.php
@@ -290,7 +290,7 @@ class MethodSignatureTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -923,7 +923,7 @@ class MethodSignatureTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -1565,7 +1565,7 @@ class MethodSignatureTest extends TestCase
                 ',
                 'error_message' => 'MethodSignatureMismatch',
                 'ignored_issues' => [],
-                '8.0'
+                'php_version' => '8.0'
             ],
             'noTypehintInNativeDescendant' => [
                 'code' => '<?php
@@ -1577,7 +1577,7 @@ class MethodSignatureTest extends TestCase
                 ',
                 'error_message' => 'MethodSignatureMustProvideReturnType',
                 'ignored_issues' => [],
-                '8.1'
+                'php_version' => '8.1'
             ],
         ];
     }
diff --git a/tests/MixinAnnotationTest.php b/tests/MixinAnnotationTest.php
index c89531bf2..b1b088d5c 100644
--- a/tests/MixinAnnotationTest.php
+++ b/tests/MixinAnnotationTest.php
@@ -11,7 +11,7 @@ class MixinAnnotationTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -601,7 +601,7 @@ class MixinAnnotationTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/NamespaceTest.php b/tests/NamespaceTest.php
index ffb129fe9..e6b53727a 100644
--- a/tests/NamespaceTest.php
+++ b/tests/NamespaceTest.php
@@ -11,7 +11,7 @@ class NamespaceTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -75,7 +75,7 @@ class NamespaceTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/NativeIntersectionsTest.php b/tests/NativeIntersectionsTest.php
index d64587fc4..4ffe33662 100644
--- a/tests/NativeIntersectionsTest.php
+++ b/tests/NativeIntersectionsTest.php
@@ -11,7 +11,7 @@ class NativeIntersectionsTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -58,7 +58,7 @@ class NativeIntersectionsTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/NativeUnionsTest.php b/tests/NativeUnionsTest.php
index 679c6d6bf..cdae31054 100644
--- a/tests/NativeUnionsTest.php
+++ b/tests/NativeUnionsTest.php
@@ -10,9 +10,6 @@ class NativeUnionsTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
     use ValidCodeAnalysisTestTrait;
 
-    /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
-     */
     public function providerValidCodeParse(): iterable
     {
         return [
@@ -31,7 +28,7 @@ class NativeUnionsTest extends TestCase
                         }
                     }',
                 'assertions' => [],
-                'error_levels' => [],
+                'ignored_issues' => [],
                 'php_version' => '8.0'
             ],
             'nativeTypeUnionAsArgument' => [
@@ -52,7 +49,7 @@ class NativeUnionsTest extends TestCase
                     test(new C());
                 ',
                 'assertions' => [],
-                'error_levels' => [],
+                'ignored_issues' => [],
                 'php_version' => '8.0'
             ],
             'unionAndNullableEquivalent' => [
@@ -62,14 +59,14 @@ class NativeUnionsTest extends TestCase
                     }
                 ',
                 'assertions' => [],
-                'error_levels' => [],
+                'ignored_issues' => [],
                 'php_version' => '8.0'
             ],
         ];
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/Php40Test.php b/tests/Php40Test.php
index dd67e8724..9cc142cbe 100644
--- a/tests/Php40Test.php
+++ b/tests/Php40Test.php
@@ -9,7 +9,7 @@ class Php40Test extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
diff --git a/tests/Php55Test.php b/tests/Php55Test.php
index 8ed1c723a..5458a0510 100644
--- a/tests/Php55Test.php
+++ b/tests/Php55Test.php
@@ -9,7 +9,7 @@ class Php55Test extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
diff --git a/tests/Php56Test.php b/tests/Php56Test.php
index e7ae3022c..699d10da9 100644
--- a/tests/Php56Test.php
+++ b/tests/Php56Test.php
@@ -9,7 +9,7 @@ class Php56Test extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
diff --git a/tests/Php70Test.php b/tests/Php70Test.php
index 9c2a30213..e735000a5 100644
--- a/tests/Php70Test.php
+++ b/tests/Php70Test.php
@@ -11,7 +11,7 @@ class Php70Test extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -217,7 +217,7 @@ class Php70Test extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/Php71Test.php b/tests/Php71Test.php
index 4467a991e..2ee9fa8f6 100644
--- a/tests/Php71Test.php
+++ b/tests/Php71Test.php
@@ -11,7 +11,7 @@ class Php71Test extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -276,7 +276,7 @@ class Php71Test extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/PropertiesOfTest.php b/tests/PropertiesOfTest.php
index 77d6c248d..588ab15d1 100644
--- a/tests/PropertiesOfTest.php
+++ b/tests/PropertiesOfTest.php
@@ -11,7 +11,7 @@ class PropertiesOfTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -126,6 +126,19 @@ class PropertiesOfTest extends TestCase
                     }
                 ',
             ],
+            'finalPropertiesOf' => [
+                'code' => '<?php
+                    class A {
+                        /** @var bool */
+                        public $foo = false;
+                    }
+
+                    /** @return properties-of<A> */
+                    function returnPropertyOfA() {
+                        return ["foo" => true];
+                    }
+                ',
+            ],
             'allPropertiesOfContainsNoStatic' => [
                 'code' => '<?php
                     class A {
@@ -240,7 +253,7 @@ class PropertiesOfTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -377,6 +390,24 @@ class PropertiesOfTest extends TestCase
                 ',
                 'error_message' => 'InvalidReturnStatement'
             ],
+            'finalPropertiesOfInexact' => [
+                'code' => '<?php
+                    final class A {
+                        /** @var bool */
+                        public $foo = false;
+                        /** @var string */
+                        private $bar = "";
+                        /** @var int */
+                        protected $adams = 42;
+                    }
+
+                    /** @return properties-of<A> */
+                    function returnPropertyOfA() {
+                        return ["foo" => true];
+                    }
+                ',
+                'error_message' => 'InvalidReturnStatement'
+            ],
         ];
     }
 }
diff --git a/tests/PropertyTypeInvarianceTest.php b/tests/PropertyTypeInvarianceTest.php
index d85e0de58..19e30a398 100644
--- a/tests/PropertyTypeInvarianceTest.php
+++ b/tests/PropertyTypeInvarianceTest.php
@@ -11,7 +11,7 @@ class PropertyTypeInvarianceTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -237,9 +237,6 @@ class PropertyTypeInvarianceTest extends TestCase
         ];
     }
 
-    /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
-     */
     public function providerInvalidCodeParse(): iterable
     {
         return [
@@ -336,7 +333,7 @@ class PropertyTypeInvarianceTest extends TestCase
                     }
 
                     /**
-                     * @psalm-suppress MissingTemplateParam 
+                     * @psalm-suppress MissingTemplateParam
                      */
                     class FooPair extends Pair
                     {
diff --git a/tests/PropertyTypeTest.php b/tests/PropertyTypeTest.php
index b16175481..c780636c3 100644
--- a/tests/PropertyTypeTest.php
+++ b/tests/PropertyTypeTest.php
@@ -353,7 +353,7 @@ class PropertyTypeTest extends TestCase
 
                         return $has_changes;
                     }
-                        
+
                     public function alter() : void {
                         if (rand(0, 1)) {
                             array_pop($this->a);
@@ -551,7 +551,7 @@ class PropertyTypeTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -1068,7 +1068,7 @@ class PropertyTypeTest extends TestCase
 
                         /**
                          * @param string[] $opts
-                         * @psalm-param array{a:string,b:string} $opts
+                         * @psalm-param strict-array{a:string,b:string} $opts
                          */
                         public function __construct(array $opts)
                         {
@@ -1077,7 +1077,7 @@ class PropertyTypeTest extends TestCase
 
                         /**
                          * @param string[] $opts
-                         * @psalm-param array{a:string,b:string} $opts
+                         * @psalm-param strict-array{a:string,b:string} $opts
                          */
                         final public function setOptions(array $opts): void
                         {
@@ -1102,7 +1102,7 @@ class PropertyTypeTest extends TestCase
 
                         /**
                          * @param string[] $opts
-                         * @psalm-param array{a:string,b:string} $opts
+                         * @psalm-param strict-array{a:string,b:string} $opts
                          */
                         public function __construct(array $opts)
                         {
@@ -1111,7 +1111,7 @@ class PropertyTypeTest extends TestCase
 
                         /**
                          * @param string[] $opts
-                         * @psalm-param array{a:string,b:string} $opts
+                         * @psalm-param strict-array{a:string,b:string} $opts
                          */
                         public function setOptions(array $opts): void
                         {
@@ -1757,7 +1757,7 @@ class PropertyTypeTest extends TestCase
                 'code' => '<?php
                     class Foo {
                         /**
-                         * @psalm-var array{from:bool, to:bool}
+                         * @psalm-var strict-array{from:bool, to:bool}
                          */
                         protected $changed = [
                             "from" => false,
@@ -2072,7 +2072,7 @@ class PropertyTypeTest extends TestCase
                     class Foo {
                         private $bar;
 
-                        /** @psalm-param array{key: string} $bar */
+                        /** @psalm-param strict-array{key: string} $bar */
                         public function __construct(array $bar) {
                             $this->bar = $bar;
                         }
@@ -2680,7 +2680,7 @@ class PropertyTypeTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/PureAnnotationTest.php b/tests/PureAnnotationTest.php
index bdf6a90d0..00b0f8dc5 100644
--- a/tests/PureAnnotationTest.php
+++ b/tests/PureAnnotationTest.php
@@ -11,7 +11,7 @@ class PureAnnotationTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -467,7 +467,7 @@ class PureAnnotationTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/PureCallableTest.php b/tests/PureCallableTest.php
index bb9e551d1..67feb644a 100644
--- a/tests/PureCallableTest.php
+++ b/tests/PureCallableTest.php
@@ -11,7 +11,7 @@ class PureCallableTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -238,7 +238,7 @@ class PureCallableTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/ReadonlyPropertyTest.php b/tests/ReadonlyPropertyTest.php
index b29548c51..797d90b1f 100644
--- a/tests/ReadonlyPropertyTest.php
+++ b/tests/ReadonlyPropertyTest.php
@@ -13,7 +13,7 @@ class ReadonlyPropertyTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -135,7 +135,7 @@ class ReadonlyPropertyTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/ReferenceConstraintTest.php b/tests/ReferenceConstraintTest.php
index 2cdec8413..840afa2de 100644
--- a/tests/ReferenceConstraintTest.php
+++ b/tests/ReferenceConstraintTest.php
@@ -11,7 +11,7 @@ class ReferenceConstraintTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -164,7 +164,7 @@ class ReferenceConstraintTest extends TestCase
             'paramOutArrayDefaultNullWithThrow' => [
                 'code' => '<?php
                     /**
-                     * @param-out array{errors: int}|null $info
+                     * @param-out strict-array{errors: int}|null $info
                      */
                     function idnToAsci(?array &$info = null): void {
                         if (rand(0, 1)) {
@@ -200,7 +200,7 @@ class ReferenceConstraintTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/ReferenceTest.php b/tests/ReferenceTest.php
index 3f3262fcb..94bda657a 100644
--- a/tests/ReferenceTest.php
+++ b/tests/ReferenceTest.php
@@ -13,11 +13,22 @@ class ReferenceTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
         return [
+            'referenceAssignmentToNonReferenceCountsAsUse' => [
+                'code' => '<?php
+                    $b = &$a;
+                    $b = 2;
+                    echo $a;
+                ',
+                'assertions' => [
+                    '$b===' => '2',
+                    '$a===' => '2',
+                ],
+            ],
             'updateReferencedTypes' => [
                 'code' => '<?php
                     $a = 1;
@@ -239,7 +250,7 @@ class ReferenceTest extends TestCase
             ],
             'dontCrashOnReferenceToArrayMixedOffset' => [
                 'code' => '<?php
-                    /** @param array{f: mixed} $a */
+                    /** @param strict-array{f: mixed} $a */
                     function func(array &$a): void
                     {
                         $_ = &$a["f"];
@@ -267,7 +278,7 @@ class ReferenceTest extends TestCase
                     $result = ($a === "not-a" && ($b || false));
                 ',
                 'assertions' => [
-                    '$reference===' => 'array{id: 1}',
+                    '$reference===' => 'strict-array{id: 1}',
                 ],
             ],
             'multipleReferencesToArrayVariableOffsetThatChangesDueToReconciliation' => [
@@ -282,15 +293,15 @@ class ReferenceTest extends TestCase
                     $reference1["id"] = 2;
                 ',
                 'assertions' => [
-                    '$reference1===' => 'array{id: 2}',
-                    '$reference2===' => 'array{id: 2}',
+                    '$reference1===' => 'strict-array{id: 2}',
+                    '$reference2===' => 'strict-array{id: 2}',
                 ],
             ],
         ];
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/ReturnTypeProvider/ArrayColumnTest.php b/tests/ReturnTypeProvider/ArrayColumnTest.php
index ea6a8d604..684e9564b 100644
--- a/tests/ReturnTypeProvider/ArrayColumnTest.php
+++ b/tests/ReturnTypeProvider/ArrayColumnTest.php
@@ -55,7 +55,7 @@ class ArrayColumnTest extends TestCase
         yield 'arrayColumnWithShapes' => [
             'code' => '<?php
                 /**
-                 * @param array{id:int} $shape
+                 * @param strict-array{id:int} $shape
                  * @return non-empty-list<int>
                  */
                 function f(array $shape): array {
@@ -145,7 +145,7 @@ class ArrayColumnTest extends TestCase
     {
         yield 'arrayColumnWithArrayAndColumnNameNull' => [
             'code' => '<?php
-                /** @var list<array{name: string, instance: object}> $arrays */
+                /** @var list<strict-array{name: string, instance: object}> $arrays */
                 $arrays = [];
                 foreach (array_column($arrays, null, "name") as $array) {
                     $array["instance"]->foo();
diff --git a/tests/ReturnTypeProvider/ExceptionCodeTest.php b/tests/ReturnTypeProvider/ExceptionCodeTest.php
index 6ebb68196..ec1e38960 100644
--- a/tests/ReturnTypeProvider/ExceptionCodeTest.php
+++ b/tests/ReturnTypeProvider/ExceptionCodeTest.php
@@ -10,7 +10,7 @@ class ExceptionCodeTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
diff --git a/tests/ReturnTypeProvider/GetObjectVarsTest.php b/tests/ReturnTypeProvider/GetObjectVarsTest.php
index 0edbfe083..1fe26f434 100644
--- a/tests/ReturnTypeProvider/GetObjectVarsTest.php
+++ b/tests/ReturnTypeProvider/GetObjectVarsTest.php
@@ -22,6 +22,17 @@ class GetObjectVarsTest extends TestCase
             'assertions' => ['$ret' => 'array{prop: string}'],
         ];
 
+        yield 'returnsSealedArrayForFinalClass' => [
+            'code' => '<?php
+                final class C {
+                    /** @var string */
+                    public $prop = "val";
+                }
+                $ret = get_object_vars(new C);
+            ',
+            'assertions' => ['$ret' => 'strict-array{prop: string}'],
+        ];
+
         yield 'omitsPrivateAndProtectedPropertiesWhenCalledOutsideOfClassScope' => [
             'code' => '<?php
                 final class C {
@@ -68,7 +79,7 @@ class GetObjectVarsTest extends TestCase
                 }
 
                 class D extends C {
-                    /** @return array{prot: string} */
+                    /** @return array{prot: string, pub: string} */
                     public function method(): array {
                         return get_object_vars($this);
                     }
@@ -99,5 +110,63 @@ class GetObjectVarsTest extends TestCase
             'code' => '<?php $ret = get_object_vars((object)["a" => 1]);',
             'assertions' => ['$ret' => 'array{a: int}'],
         ];
+
+        yield 'templatedProperties' => [
+            'code' => '<?php
+                /** @template T */
+                final class a {
+                    /** @param T $t */
+                    public function __construct(public mixed $t) {}
+                }
+
+                $a = get_object_vars(new a("test"));',
+            'assertions' => [
+                '$a===' => "strict-array{t: 'test'}"
+            ]
+        ];
+
+        yield 'SKIPPED-dynamicProperties' => [
+            'code' => '<?php
+                class a {
+                    public function __construct(public string $t) {}
+                }
+
+                $a = new a("test");
+                $a->b = "test";
+                $test = get_object_vars($a);',
+            'assertions' => [
+                '$test===' => "array{t: 'test'}"
+            ]
+        ];
+
+        yield 'SKIPPED-dynamicProperties82' => [
+            'code' => '<?php
+                #[AllowDynamicProperties]
+                class a {
+                    public function __construct(public string $t) {}
+                }
+
+                $a = new a("test");
+                $a->b = "test";
+                $test = get_object_vars($a);',
+            'assertions' => [
+                '$test===' => "array{t: 'test'}"
+            ],
+            'php_version' => '8.2'
+        ];
+
+        yield 'SKIPPED-noDynamicProperties82' => [
+            'code' => '<?php
+                class a {
+                    public function __construct(public string $t) {}
+                }
+
+                $a = new a("test");
+                $test = get_object_vars($a);',
+            'assertions' => [
+                '$test===' => "strict-array{t: 'test'}"
+            ],
+            'php_version' => '8.2'
+        ];
     }
 }
diff --git a/tests/ReturnTypeTest.php b/tests/ReturnTypeTest.php
index 2c01eed21..ff5af60a0 100644
--- a/tests/ReturnTypeTest.php
+++ b/tests/ReturnTypeTest.php
@@ -13,7 +13,7 @@ class ReturnTypeTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -498,14 +498,14 @@ class ReturnTypeTest extends TestCase
             ],
             'objectLikeArrayOptionalKeyReturn' => [
                 'code' => '<?php
-                    /** @return array{a: int, b?: int} */
+                    /** @return strict-array{a: int, b?: int} */
                     function foo() : array {
                         return rand(0, 1) ? ["a" => 1, "b" => 2] : ["a" => 2];
                     }',
             ],
             'objectLikeArrayOptionalKeyReturnSeparateStatements' => [
                 'code' => '<?php
-                    /** @return array{a: int, b?: int} */
+                    /** @return strict-array{a: int, b?: int} */
                     function foo() : array {
                         if (rand(0, 1)) {
                             return ["a" => 1, "b" => 2];
@@ -514,24 +514,6 @@ class ReturnTypeTest extends TestCase
                         return ["a" => 2];
                     }',
             ],
-            'badlyCasedReturnType' => [
-                'code' => '<?php
-                    namespace MyNS;
-
-                    class Example {
-                        /** @return array<int,example> */
-                        public static function test() : array {
-                            return [new Example()];
-                        }
-
-                        /** @return example */
-                        public static function instance() {
-                            return new Example();
-                        }
-                    }',
-                'assertions' => [],
-                'ignored_issues' => ['InvalidClass'],
-            ],
             'arrayReturnTypeWithExplicitKeyType' => [
                 'code' => '<?php
                     /** @return array<int|string, mixed> */
@@ -723,7 +705,7 @@ class ReturnTypeTest extends TestCase
                         ];
 
                         /**
-                         * @return iterable<array-key, array{foo: value-of<self::AVAILABLE_TYPES>}>
+                         * @return iterable<array-key, strict-array{foo: value-of<self::AVAILABLE_TYPES>}>
                          */
                         public function foo() {
                             return [
@@ -870,7 +852,7 @@ class ReturnTypeTest extends TestCase
             'infersObjectShapeOfCastArray' => [
                 'code' => '<?php
                     /**
-                     * @return array{a:1}
+                     * @return strict-array{a:1}
                      */
                     function returnsArray(): array {
                         return ["a" => 1];
@@ -1140,7 +1122,7 @@ class ReturnTypeTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -1367,7 +1349,7 @@ class ReturnTypeTest extends TestCase
             ],
             'objectLikeArrayOptionalKeyWithNonOptionalReturn' => [
                 'code' => '<?php
-                    /** @return array{a: int, b: int} */
+                    /** @return strict-array{a: int, b: int} */
                     function foo() : array {
                         return rand(0, 1) ? ["a" => 1, "b" => 2] : ["a" => 2];
                     }',
@@ -1533,6 +1515,9 @@ class ReturnTypeTest extends TestCase
                 'code' => '<?php
                     /**
                      * @param array<"from"|"to", bool> $a
+                     *
+                     * This is unsealed because there is no way to mark a TArray as sealed.
+                     *
                      * @return array{from: bool, to: bool}
                      */
                     function foo(array $a) : array {
@@ -1612,6 +1597,23 @@ class ReturnTypeTest extends TestCase
                         }
                     }',
                     'error_message' => 'LessSpecificImplementedReturnType',
+            ],
+            'badlyCasedReturnType' => [
+                'code' => '<?php
+                    namespace MyNS;
+
+                    class Example {
+                        /** @return array<int,example> */
+                        public static function test() : array {
+                            return [new Example()];
+                        }
+
+                        /** @return example */
+                        public static function instance() {
+                            return new Example();
+                        }
+                    }',
+                'error_message' => 'InvalidClass',
             ]
         ];
     }
diff --git a/tests/StubTest.php b/tests/StubTest.php
index 736943df3..97bc8d540 100644
--- a/tests/StubTest.php
+++ b/tests/StubTest.php
@@ -899,7 +899,7 @@ class StubTest extends TestCase
         $this->analyzeFile($file_path, new Context());
     }
 
-    /** @return iterable<string, array{string,string}> */
+    /** @return iterable<string, strict-array{string,string}> */
     public function versionDependentStubsProvider(): iterable
     {
         yield '7.0' => [
diff --git a/tests/SuperGlobalsTest.php b/tests/SuperGlobalsTest.php
index 3e7d54ad5..a1780fd98 100644
--- a/tests/SuperGlobalsTest.php
+++ b/tests/SuperGlobalsTest.php
@@ -9,7 +9,7 @@ class SuperGlobalsTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
diff --git a/tests/SwitchTypeTest.php b/tests/SwitchTypeTest.php
index d101015a8..a1fbb3641 100644
--- a/tests/SwitchTypeTest.php
+++ b/tests/SwitchTypeTest.php
@@ -13,7 +13,7 @@ class SwitchTypeTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -1091,7 +1091,7 @@ class SwitchTypeTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/TaintTest.php b/tests/TaintTest.php
index 3058697a1..cd093ea0c 100644
--- a/tests/TaintTest.php
+++ b/tests/TaintTest.php
@@ -65,7 +65,7 @@ class TaintTest extends TestCase
     }
 
     /**
-     * @return array<string, array{code:string}>
+     * @return array<string, strict-array{code:string}>
      */
     public function providerValidCodeParse(): array
     {
@@ -726,7 +726,7 @@ class TaintTest extends TestCase
     }
 
     /**
-     * @return array<string, array{code: string, error_message: string}>
+     * @return array<string, strict-array{code: string, error_message: string}>
      */
     public function providerInvalidCodeParse(): array
     {
@@ -2404,7 +2404,7 @@ class TaintTest extends TestCase
     }
 
     /**
-     * @return array<string, array{code: string, expectedIssueTypes: list<string>}>
+     * @return array<string, strict-array{code: string, expectedIssueTypes: list<string>}>
      */
     public function multipleTaintIssuesAreDetectedDataProvider(): array
     {
diff --git a/tests/Template/ClassStringMapTest.php b/tests/Template/ClassStringMapTest.php
index 0ec5e078a..f3a4a47a9 100644
--- a/tests/Template/ClassStringMapTest.php
+++ b/tests/Template/ClassStringMapTest.php
@@ -12,7 +12,7 @@ class ClassStringMapTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -90,7 +90,7 @@ class ClassStringMapTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/Template/ClassTemplateCovarianceTest.php b/tests/Template/ClassTemplateCovarianceTest.php
index fd28d7314..494f1d423 100644
--- a/tests/Template/ClassTemplateCovarianceTest.php
+++ b/tests/Template/ClassTemplateCovarianceTest.php
@@ -12,7 +12,7 @@ class ClassTemplateCovarianceTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -487,7 +487,7 @@ class ClassTemplateCovarianceTest extends TestCase
                      */
                     interface IParentCollection {
                         /**
-                         * @return IParentCollection<array{0: T1}>
+                         * @return IParentCollection<strict-array{0: T1}>
                          */
                         public function getNested(): IParentCollection;
                     }
@@ -499,7 +499,7 @@ class ClassTemplateCovarianceTest extends TestCase
                      */
                     interface IChildCollection extends IParentCollection {
                         /**
-                         * @return IChildCollection<array{0: T2}>
+                         * @return IChildCollection<strict-array{0: T2}>
                          */
                         public function getNested(): IChildCollection;
                     }',
@@ -535,7 +535,7 @@ class ClassTemplateCovarianceTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/Template/ClassTemplateExtendsTest.php b/tests/Template/ClassTemplateExtendsTest.php
index ea883366c..7d444a987 100644
--- a/tests/Template/ClassTemplateExtendsTest.php
+++ b/tests/Template/ClassTemplateExtendsTest.php
@@ -14,7 +14,7 @@ class ClassTemplateExtendsTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -1376,7 +1376,7 @@ class ClassTemplateExtendsTest extends TestCase
 
                     /**
                      * @template T
-                     * 
+                     *
                      * @psalm-suppress MissingTemplateParam
                      */
                     class C implements I {
@@ -1417,7 +1417,7 @@ class ClassTemplateExtendsTest extends TestCase
 
                     /**
                      * @template T2
-                     * 
+                     *
                      * @psalm-suppress MissingTemplateParam
                      */
                     class C implements I {
@@ -1769,7 +1769,7 @@ class ClassTemplateExtendsTest extends TestCase
                         }
                     }
 
-                    /** @extends DataBag<array{a: int, b: string}> */
+                    /** @extends DataBag<strict-array{a: int, b: string}> */
                     class FooBag extends DataBag {}
 
                     $foo = new FooBag(["a" => 5, "b" => "hello"]);
@@ -1794,7 +1794,7 @@ class ClassTemplateExtendsTest extends TestCase
                     abstract class Foo {}
 
                     /**
-                     * @template-extends Foo<array{id:int}>
+                     * @template-extends Foo<strict-array{id:int}>
                      *
                      * @internal
                      */
@@ -1843,7 +1843,7 @@ class ClassTemplateExtendsTest extends TestCase
                     }
 
                     /**
-                     * @template-extends Foo<array{id:int, name:string}>
+                     * @template-extends Foo<strict-array{id:int, name:string}>
                      */
                     class FooChild extends Foo {
                         public function getIdProperty() : string {
@@ -2250,7 +2250,7 @@ class ClassTemplateExtendsTest extends TestCase
 
                     /**
                      * @template TT
-                     * 
+                     *
                      * @extends Container<TT>
                      */
                     class MyContainer extends Container {}
@@ -4052,14 +4052,14 @@ class ClassTemplateExtendsTest extends TestCase
                      */
                     class a {
                     }
-                    
+
                     /**
                      * @template TT1
                      * @template TT2
                      * @extends a<TT2>
                      */
                     class b extends a {}
-                    
+
                     /** @return Generator<int, b<"test1", "test2">, mixed, "test2"> */
                     function bb(): \Generator {
                         /** @var b<"test1", "test2"> */
@@ -4076,12 +4076,12 @@ class ClassTemplateExtendsTest extends TestCase
                      */
                     class a {
                     }
-                    
+
                     /**
                      * @extends a<"test">
                      */
                     class b extends a {}
-                    
+
                     /** @return Generator<int, b, mixed, "test"> */
                     function bb(): \Generator {
                         $b = new b;
@@ -4094,7 +4094,7 @@ class ClassTemplateExtendsTest extends TestCase
 
                 /** @psalm-yield int */
                 class a {}
-                
+
                 /**
                  * @return Generator<int, a, mixed, int>
                  */
@@ -4130,7 +4130,7 @@ class ClassTemplateExtendsTest extends TestCase
 
                     /**
                      * @extends WriteModelInterface<
-                     *     array{
+                     *     strict-array{
                      *         ulid: string,
                      *         senderPersonId: int
                      *     }
@@ -4142,7 +4142,7 @@ class ClassTemplateExtendsTest extends TestCase
 
                     /**
                      * @psalm-immutable
-                     * @extends WriteModel<array{
+                     * @extends WriteModel<strict-array{
                      *    ulid: string,
                      *    senderPersonId: int
                      * }>
@@ -4637,7 +4637,7 @@ class ClassTemplateExtendsTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/Template/ClassTemplateTest.php b/tests/Template/ClassTemplateTest.php
index 282380d4f..48994b85f 100644
--- a/tests/Template/ClassTemplateTest.php
+++ b/tests/Template/ClassTemplateTest.php
@@ -14,7 +14,7 @@ class ClassTemplateTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -1021,7 +1021,7 @@ class ClassTemplateTest extends TestCase
                      */
                     class Collection {
                         /**
-                         * @return array{0:Collection<TKey,TValue>,1:Collection<TKey,TValue>}
+                         * @return strict-array{0:Collection<TKey,TValue>,1:Collection<TKey,TValue>}
                          * @psalm-suppress InvalidReturnType
                          */
                         public function partition() {}
@@ -3378,7 +3378,7 @@ class ClassTemplateTest extends TestCase
             'templateIsAComplexMultilineType' => [
                 'code' => '<?php
                 /**
-                 * @template T of array{
+                 * @template T of strict-array{
                  *    a: string,
                  *    b: int
                  * }
@@ -3417,7 +3417,7 @@ class ClassTemplateTest extends TestCase
 
                     /**
                      * @param WeakMap<Throwable,int> $wm
-                     * @return array{Throwable,int}
+                     * @return strict-array{Throwable,int}
                      */
                     function isTraverable(WeakMap $wm): array {
                         foreach ($wm as $k => $v) {
@@ -3517,7 +3517,7 @@ class ClassTemplateTest extends TestCase
                         }
                     }
 
-                    /** @param Container<array{name: string}> $r */
+                    /** @param Container<strict-array{name: string}> $r */
                     function takesContainer(Container $r): void {
                         $r->data = ["name" => "David"];
                     }
@@ -3993,7 +3993,7 @@ class ClassTemplateTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -4275,7 +4275,7 @@ class ClassTemplateTest extends TestCase
                         }
                     }
 
-                    /** @extends Row<array{id: int, name: string, height: float}> */
+                    /** @extends Row<strict-array{id: int, name: string, height: float}> */
                     class CharacterRow extends Row {}
 
                     $mario = new CharacterRow(["id" => 5, "name" => "Mario", "height" => 3.5]);
diff --git a/tests/Template/ConditionalReturnTypeTest.php b/tests/Template/ConditionalReturnTypeTest.php
index 726fab218..98f13c0a7 100644
--- a/tests/Template/ConditionalReturnTypeTest.php
+++ b/tests/Template/ConditionalReturnTypeTest.php
@@ -10,7 +10,7 @@ class ConditionalReturnTypeTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
diff --git a/tests/Template/FunctionClassStringTemplateTest.php b/tests/Template/FunctionClassStringTemplateTest.php
index 34edd8fc5..46ef12118 100644
--- a/tests/Template/FunctionClassStringTemplateTest.php
+++ b/tests/Template/FunctionClassStringTemplateTest.php
@@ -12,7 +12,7 @@ class FunctionClassStringTemplateTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -780,7 +780,7 @@ class FunctionClassStringTemplateTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/Template/FunctionTemplateAssertTest.php b/tests/Template/FunctionTemplateAssertTest.php
index 61e9674c5..a71c2d881 100644
--- a/tests/Template/FunctionTemplateAssertTest.php
+++ b/tests/Template/FunctionTemplateAssertTest.php
@@ -12,7 +12,7 @@ class FunctionTemplateAssertTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -923,7 +923,7 @@ class FunctionTemplateAssertTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/Template/FunctionTemplateTest.php b/tests/Template/FunctionTemplateTest.php
index 4369152eb..fcad3997b 100644
--- a/tests/Template/FunctionTemplateTest.php
+++ b/tests/Template/FunctionTemplateTest.php
@@ -12,7 +12,7 @@ class FunctionTemplateTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -847,8 +847,8 @@ class FunctionTemplateTest extends TestCase
                     }
 
                     /**
-                     * @param array<int, array{0: int, 1: string}> $array
-                     * @return list<array{0: int, 1: string}>
+                     * @param array<int, strict-array{0: int, 1: string}> $array
+                     * @return list<strict-array{0: int, 1: string}>
                      */
                     function example(array $array): array {
                         example_sort_by_ref($array);
@@ -1625,7 +1625,7 @@ class FunctionTemplateTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -2165,7 +2165,7 @@ class FunctionTemplateTest extends TestCase
             'preventBadArraySubtyping' => [
                 'code' => '<?php
                     /**
-                     * @template T as array{a: int}
+                     * @template T as strict-array{a: int}
                      * @return T
                      */
                     function foo() : array {
@@ -2177,7 +2177,7 @@ class FunctionTemplateTest extends TestCase
             'modifyTemplatedShape' => [
                 'code' => '<?php
                     /**
-                     * @template T as array{a: int}
+                     * @template T as strict-array{a: int}
                      * @param T $s
                      * @return T
                      */
diff --git a/tests/Template/KeyOfTemplateTest.php b/tests/Template/KeyOfTemplateTest.php
index 69696ba7a..1da3d777e 100644
--- a/tests/Template/KeyOfTemplateTest.php
+++ b/tests/Template/KeyOfTemplateTest.php
@@ -14,7 +14,7 @@ class KeyOfTemplateTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -99,7 +99,7 @@ class KeyOfTemplateTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/Template/NestedTemplateTest.php b/tests/Template/NestedTemplateTest.php
index 9550f0546..fceb2620d 100644
--- a/tests/Template/NestedTemplateTest.php
+++ b/tests/Template/NestedTemplateTest.php
@@ -12,7 +12,7 @@ class NestedTemplateTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -128,7 +128,7 @@ class NestedTemplateTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/Template/PropertiesOfTemplateTest.php b/tests/Template/PropertiesOfTemplateTest.php
index 3ec94ab75..414ae7a1a 100644
--- a/tests/Template/PropertiesOfTemplateTest.php
+++ b/tests/Template/PropertiesOfTemplateTest.php
@@ -12,7 +12,7 @@ class PropertiesOfTemplateTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -195,7 +195,7 @@ class PropertiesOfTemplateTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/Template/TraitTemplateTest.php b/tests/Template/TraitTemplateTest.php
index dac423059..f867c63ff 100644
--- a/tests/Template/TraitTemplateTest.php
+++ b/tests/Template/TraitTemplateTest.php
@@ -12,7 +12,7 @@ class TraitTemplateTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -389,10 +389,10 @@ class TraitTemplateTest extends TestCase
                 'code' => '<?php
                     /** @template TValue */
                     trait A {
-                        /** @psalm-var array{TValue} */
+                        /** @psalm-var strict-array{TValue} */
                         private $foo;
 
-                        /** @psalm-param array{TValue} $foo */
+                        /** @psalm-param strict-array{TValue} $foo */
                         public function __construct(array $foo)
                         {
                             $this->foo = $foo;
@@ -517,7 +517,7 @@ class TraitTemplateTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/Template/ValueOfTemplateTest.php b/tests/Template/ValueOfTemplateTest.php
index 62d3a9d2c..2d5247436 100644
--- a/tests/Template/ValueOfTemplateTest.php
+++ b/tests/Template/ValueOfTemplateTest.php
@@ -14,7 +14,7 @@ class ValueOfTemplateTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -75,7 +75,7 @@ class ValueOfTemplateTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/ThisOutTest.php b/tests/ThisOutTest.php
index 87aecf2d9..b36527715 100644
--- a/tests/ThisOutTest.php
+++ b/tests/ThisOutTest.php
@@ -9,7 +9,7 @@ class ThisOutTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
diff --git a/tests/ToStringTest.php b/tests/ToStringTest.php
index 2c14e072c..0171b2493 100644
--- a/tests/ToStringTest.php
+++ b/tests/ToStringTest.php
@@ -11,7 +11,7 @@ class ToStringTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -211,7 +211,7 @@ class ToStringTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -444,7 +444,7 @@ class ToStringTest extends TestCase
                     interface S {
                         public function __toString(): string;
                     }
-                    /** @return array{string} */
+                    /** @return strict-array{string} */
                     function f(S $s): array {
                         return [$s];
                     }
@@ -456,7 +456,7 @@ class ToStringTest extends TestCase
                     interface S {
                         public function __toString(): string;
                     }
-                    /** @return array{0:string} */
+                    /** @return strict-array{0:string} */
                     function f(S $s): array {
                         return [$s];
                     }
diff --git a/tests/TraceTest.php b/tests/TraceTest.php
index b7aea4ac9..50c463885 100644
--- a/tests/TraceTest.php
+++ b/tests/TraceTest.php
@@ -9,7 +9,7 @@ class TraceTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/TraitTest.php b/tests/TraitTest.php
index e747dd7ee..a4fa27e9e 100644
--- a/tests/TraitTest.php
+++ b/tests/TraitTest.php
@@ -13,7 +13,7 @@ class TraitTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -1000,7 +1000,7 @@ class TraitTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/Traits/InvalidCodeAnalysisTestTrait.php b/tests/Traits/InvalidCodeAnalysisTestTrait.php
index d139f74c9..4a90850d0 100644
--- a/tests/Traits/InvalidCodeAnalysisTestTrait.php
+++ b/tests/Traits/InvalidCodeAnalysisTestTrait.php
@@ -19,7 +19,7 @@ use const PHP_VERSION;
 trait InvalidCodeAnalysisTestTrait
 {
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     * @return iterable<string,strict-array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
      */
     abstract public function providerInvalidCodeParse(): iterable;
 
diff --git a/tests/Traits/ValidCodeAnalysisTestTrait.php b/tests/Traits/ValidCodeAnalysisTestTrait.php
index 37a38dc5d..8ea328513 100644
--- a/tests/Traits/ValidCodeAnalysisTestTrait.php
+++ b/tests/Traits/ValidCodeAnalysisTestTrait.php
@@ -18,7 +18,7 @@ use const PHP_VERSION;
 trait ValidCodeAnalysisTestTrait
 {
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
+     * @return iterable<string,strict-array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
      */
     abstract public function providerValidCodeParse(): iterable;
 
@@ -27,14 +27,14 @@ trait ValidCodeAnalysisTestTrait
      *
      * @param string $code
      * @param array<string, string> $assertions
-     * @param list<string> $error_levels
+     * @param list<string> $ignored_issues
      *
      * @small
      */
     public function testValidCode(
         $code,
         $assertions = [],
-        $error_levels = [],
+        $ignored_issues = [],
         string $php_version = '7.3'
     ): void {
         $test_name = $this->getTestName();
@@ -50,11 +50,8 @@ trait ValidCodeAnalysisTestTrait
             $this->markTestSkipped('Skipped due to a bug.');
         }
 
-        foreach ($error_levels as $error_level) {
-            $issue_name = $error_level;
-            $error_level = Config::REPORT_SUPPRESS;
-
-            Config::getInstance()->setCustomErrorLevel($issue_name, $error_level);
+        foreach ($ignored_issues as $issue_name) {
+            Config::getInstance()->setCustomErrorLevel($issue_name, Config::REPORT_SUPPRESS);
         }
 
         if (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN') {
diff --git a/tests/TryCatchTest.php b/tests/TryCatchTest.php
index b8fa7a47e..de74cceb8 100644
--- a/tests/TryCatchTest.php
+++ b/tests/TryCatchTest.php
@@ -11,7 +11,7 @@ class TryCatchTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -495,7 +495,7 @@ class TryCatchTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/TypeAnnotationTest.php b/tests/TypeAnnotationTest.php
index ffae930bd..118125335 100644
--- a/tests/TypeAnnotationTest.php
+++ b/tests/TypeAnnotationTest.php
@@ -11,7 +11,7 @@ class TypeAnnotationTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -157,7 +157,7 @@ class TypeAnnotationTest extends TestCase
                     }
 
                     /**
-                      * @psalm-type _A=array{elt:int}
+                      * @psalm-type _A=strict-array{elt:int}
                       * @param _A $p
                       * @return _A
                       */
@@ -171,7 +171,7 @@ class TypeAnnotationTest extends TestCase
                 'code' => '<?php
                     namespace Bar;
 
-                    /** @psalm-type PhoneType = array{phone: string} */
+                    /** @psalm-type PhoneType = strict-array{phone: string} */
                     class Phone {
                         /** @psalm-return PhoneType */
                         public function toArray(): array {
@@ -179,7 +179,7 @@ class TypeAnnotationTest extends TestCase
                         }
                     }
 
-                    /** @psalm-type NameType = array{name: string} */
+                    /** @psalm-type NameType = strict-array{name: string} */
                     class Name {
                         /** @psalm-return NameType */
                         function toArray(): array {
@@ -207,7 +207,7 @@ class TypeAnnotationTest extends TestCase
                 'code' => '<?php
                     namespace Bar;
 
-                    /** @psalm-type PhoneType = array{phone: string} */
+                    /** @psalm-type PhoneType = strict-array{phone: string} */
                     class Phone {
                         /** @psalm-return PhoneType */
                         public function toArray(): array {
@@ -229,7 +229,7 @@ class TypeAnnotationTest extends TestCase
                 'code' => '<?php
                     namespace Bar;
 
-                    /** @psalm-type PhoneType = array{phone: string} */
+                    /** @psalm-type PhoneType = strict-array{phone: string} */
                     class Phone {
                         /** @psalm-return PhoneType */
                         public function toArray(): array {
@@ -250,7 +250,7 @@ class TypeAnnotationTest extends TestCase
             'classTypeAliasFromExternalNamespace' => [
                 'code' => '<?php
                 namespace Foo {
-                    /** @psalm-type PhoneType = array{phone: string} */
+                    /** @psalm-type PhoneType = strict-array{phone: string} */
                     class Phone {
                         /** @psalm-return PhoneType */
                         public function toArray(): array {
@@ -311,7 +311,7 @@ class TypeAnnotationTest extends TestCase
             ],
             'usedInVarForForeach' => [
                 'code' => '<?php
-                /** @psalm-type _B=array{p1:string} */
+                /** @psalm-type _B=strict-array{p1:string} */
                 function e(array $a): void
                 {
                     /** @var _B $elt */
@@ -597,7 +597,7 @@ class TypeAnnotationTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -621,7 +621,7 @@ class TypeAnnotationTest extends TestCase
                      * @psalm-type aType null|"a"|"b"|"c"|"d"
                      */
 
-                    /** @psalm-return array{0:bool,1:aType} */
+                    /** @psalm-return strict-array{0:bool,1:aType} */
                     function f(): array {
                         return [(bool)rand(0,1), rand(0,1) ? "z" : null];
                     }',
@@ -631,7 +631,7 @@ class TypeAnnotationTest extends TestCase
                 'code' => '<?php
                     namespace Barrr;
 
-                    /** @psalm-type PhoneType = array{phone: string} */
+                    /** @psalm-type PhoneType = strict-array{phone: string} */
                     class Phone {
                         /** @psalm-return PhoneType */
                         public function toArray(): array {
@@ -639,7 +639,7 @@ class TypeAnnotationTest extends TestCase
                         }
                     }
 
-                    /** @psalm-type NameType = array{name: string} */
+                    /** @psalm-type NameType = strict-array{name: string} */
                     class Name {
                         /** @psalm-return NameType */
                         function toArray(): array {
@@ -731,7 +731,7 @@ class TypeAnnotationTest extends TestCase
                     namespace Barrr;
 
                     /**
-                     * @psalm-type _C=array{c:_CC}
+                     * @psalm-type _C=strict-array{c:_CC}
                      * @psalm-type _CC=float
                      */
                     class A {
@@ -747,11 +747,11 @@ class TypeAnnotationTest extends TestCase
                     namespace A\B;
 
                     /**
-                     * @psalm-type _A=array{
+                     * @psalm-type _A=strict-array{
                      *      id:int
                      * }
                      *
-                     * @psalm-type _B=array{
+                     * @psalm-type _B=strict-array{
                      *      id:int,
                      *      something:int
                      * }
@@ -781,7 +781,7 @@ class TypeAnnotationTest extends TestCase
             'noCrashWithSelfReferencingType' => [
                 'code' => '<?php
                     /**
-                     * @psalm-type SomeType = array{
+                     * @psalm-type SomeType = strict-array{
                      *     parent?: SomeType,
                      *     foo?: int,
                      * }
diff --git a/tests/TypeCombinationTest.php b/tests/TypeCombinationTest.php
index 5f656d9c8..fa99499bc 100644
--- a/tests/TypeCombinationTest.php
+++ b/tests/TypeCombinationTest.php
@@ -36,7 +36,7 @@ class TypeCombinationTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -91,7 +91,7 @@ class TypeCombinationTest extends TestCase
     }
 
     /**
-     * @return array<string,array{string,non-empty-list<string>}>
+     * @return array<string,strict-array{string,non-empty-list<string>}>
      */
     public function providerTestValidTypeCombination(): array
     {
@@ -357,66 +357,66 @@ class TypeCombinationTest extends TestCase
                 ],
             ],
             'combineObjectType1' => [
-                'array{a?: int, b?: string}',
+                'strict-array{a?: int, b?: string}',
                 [
-                    'array{a: int}',
-                    'array{b: string}',
+                    'strict-array{a: int}',
+                    'strict-array{b: string}',
                 ],
             ],
             'combineObjectType2' => [
-                'array{a: int|string, b?: string}',
+                'strict-array{a: int|string, b?: string}',
                 [
-                    'array{a: int}',
-                    'array{a: string,b: string}',
+                    'strict-array{a: int}',
+                    'strict-array{a: string,b: string}',
                 ],
             ],
             'combineObjectTypeWithIntKeyedArray' => [
                 "array<'a'|int, int|string>",
                 [
-                    'array{a: int}',
+                    'strict-array{a: int}',
                     'array<int, string>',
                 ],
             ],
             'combineNestedObjectTypeWithTKeyedArrayIntKeyedArray' => [
-                "array{a: array<'a'|int, int|string>}",
+                "strict-array{a: array<'a'|int, int|string>}",
                 [
-                    'array{a: array{a: int}}',
-                    'array{a: array<int, string>}',
+                    'strict-array{a: strict-array{a: int}}',
+                    'strict-array{a: array<int, string>}',
                 ],
             ],
             'combineIntKeyedObjectTypeWithNestedIntKeyedArray' => [
                 "array<int, array<'a'|int, int|string>>",
                 [
-                    'array<int, array{a:int}>',
+                    'array<int, strict-array{a:int}>',
                     'array<int, array<int, string>>',
                 ],
             ],
             'combineNestedObjectTypeWithNestedIntKeyedArray' => [
                 "array<'a'|int, array<'a'|int, int|string>>",
                 [
-                    'array{a: array{a: int}}',
+                    'strict-array{a: strict-array{a: int}}',
                     'array<int, array<int, string>>',
                 ],
             ],
             'combinePossiblyUndefinedKeys' => [
-                'array{a: bool, b?: mixed, d?: mixed}',
+                'strict-array{a: bool, b?: mixed, d?: mixed}',
                 [
-                    'array{a: false, b: mixed}',
-                    'array{a: true, d: mixed}',
-                    'array{a: true, d: mixed}',
+                    'strict-array{a: false, b: mixed}',
+                    'strict-array{a: true, d: mixed}',
+                    'strict-array{a: true, d: mixed}',
                 ],
             ],
             'combinePossiblyUndefinedKeysAndString' => [
-                'array{a: string, b?: int}|string',
+                'strict-array{a: string, b?: int}|string',
                 [
-                    'array{a: string, b?: int}',
+                    'strict-array{a: string, b?: int}',
                     'string',
                 ],
             ],
             'combineMixedArrayWithTKeyedArray' => [
                 'array<array-key, mixed>',
                 [
-                    'array{a: int}',
+                    'strict-array{a: int}',
                     'array',
                 ],
             ],
@@ -466,7 +466,7 @@ class TypeCombinationTest extends TestCase
                 "array<'a'|'b'|'c', 1|2|3>",
                 [
                     'array<"a"|"b"|"c", 1|2|3>',
-                    'array{a: 1|2, b: 2|3, c: 1|3}',
+                    'strict-array{a: 1|2, b: 2|3, c: 1|3}',
                 ],
             ],
             'combineClosures' => [
@@ -584,7 +584,7 @@ class TypeCombinationTest extends TestCase
             'combineCallableArrayAndArray' => [
                 'array<array-key, mixed>',
                 [
-                    'callable-array{class-string, string}',
+                    'callable-strict-array{class-string, string}',
                     'array',
                 ],
             ],
@@ -598,14 +598,14 @@ class TypeCombinationTest extends TestCase
             'combineTKeyedArrayAndArray' => [
                 'array<array-key, mixed>',
                 [
-                    'array{hello: int}',
+                    'strict-array{hello: int}',
                     'array<array-key, mixed>',
                 ],
             ],
             'combineTKeyedArrayAndNestedArray' => [
                 'array<array-key, mixed>',
                 [
-                    'array{hello: array{goodbye: int}}',
+                    'strict-array{hello: strict-array{goodbye: int}}',
                     'array<array-key, mixed>',
                 ],
             ],
@@ -624,10 +624,10 @@ class TypeCombinationTest extends TestCase
                 ],
             ],
             'combineNonEmptyListWithTKeyedArrayList' => [
-                'array{0: null|string}<int, string>',
+                'list{null|string}<int, string>',
                 [
                     'non-empty-list<string>',
-                    'array{null}'
+                    'strict-array{null}'
                 ],
             ],
             'combineZeroAndPositiveInt' => [
@@ -701,7 +701,7 @@ class TypeCombinationTest extends TestCase
                 'array<int, int>',
                 [
                     'non-empty-array<int, int>',
-                    'array{0?:int}',
+                    'strict-array{0?:int}',
                 ]
             ],
             'combineNonEmptyStringAndLiteral' => [
diff --git a/tests/TypeComparatorTest.php b/tests/TypeComparatorTest.php
index 6833c3b86..992f3e3f8 100644
--- a/tests/TypeComparatorTest.php
+++ b/tests/TypeComparatorTest.php
@@ -54,7 +54,7 @@ class TypeComparatorTest extends TestCase
     }
 
     /**
-     * @return array<array{string}>
+     * @return array<strict-array{string}>
      */
     public function getAllBasicTypes(): array
     {
@@ -78,8 +78,15 @@ class TypeComparatorTest extends TestCase
             [
                 'open-resource' => true, // unverifiable
                 'non-empty-countable' => true, // bit weird, maybe a bug?
+            ],
+            [
+                'strict-array' => true, // Requires a shape
+                'strict-list' => true, // Requires a shape
             ]
         );
+        $basic_types['strict-array{test: 123}'] = true;
+        $basic_types['strict-list{123}'] = true;
+
         return array_map(
             fn($type) => [$type],
             array_keys($basic_types)
@@ -104,7 +111,7 @@ class TypeComparatorTest extends TestCase
     }
 
     /**
-     * @return array<array{string, string}>
+     * @return array<strict-array{string, string}>
      */
     public function getAllowedChildTypes(): array
     {
@@ -122,11 +129,11 @@ class TypeComparatorTest extends TestCase
                 'array<never, never>',
             ],
             'arrayOptionalKeyed1AcceptsEmptyArray' => [
-                'array{foo?: string}',
+                'strict-array{foo?: string}',
                 'array<never, never>',
             ],
             'arrayOptionalKeyed2AcceptsEmptyArray' => [
-                'array{foo?: string}&array<string, mixed>',
+                'strict-array{foo?: string}&array<string, mixed>',
                 'array<never, never>',
             ],
             'Lowercase-stringAndCallable-string' => [
diff --git a/tests/TypeParseTest.php b/tests/TypeParseTest.php
index b6fdb3e0b..6865b4f9d 100644
--- a/tests/TypeParseTest.php
+++ b/tests/TypeParseTest.php
@@ -190,40 +190,40 @@ class TypeParseTest extends TestCase
 
     public function testIntersectionOfTKeyedArray(): void
     {
-        $this->assertSame('array{a: int, b: int}', (string) Type::parseString('array{a: int}&array{b: int}'));
+        $this->assertSame('strict-array{a: int, b: int}', (string) Type::parseString('strict-array{a: int}&strict-array{b: int}'));
     }
 
     public function testIntersectionOfTwoDifferentArrays(): void
     {
-        $this->assertSame('array{a: int}<string, string>', Type::parseString('array{a: int}&array<string, string>')->getId());
+        $this->assertSame('array{a: int}<string, string>', Type::parseString('strict-array{a: int}&array<string, string>')->getId());
     }
 
     public function testIntersectionOfTwoDifferentArraysReversed(): void
     {
-        $this->assertSame('array{a: int}<string, string>', Type::parseString('array<string, string>&array{a: int}')->getId());
+        $this->assertSame('array{a: int}<string, string>', Type::parseString('array<string, string>&strict-array{a: int}')->getId());
     }
 
     public function testIntersectionOfTKeyedArrayWithMergedProperties(): void
     {
-        $this->assertSame('array{a: int}', (string) Type::parseString('array{a: int}&array{a: mixed}'));
+        $this->assertSame('strict-array{a: int}', (string) Type::parseString('strict-array{a: int}&strict-array{a: mixed}'));
     }
 
     public function testIntersectionOfTKeyedArrayWithPossiblyUndefinedMergedProperties(): void
     {
-        $this->assertSame('array{a: int}', (string) Type::parseString('array{a: int}&array{a?: int}'));
+        $this->assertSame('strict-array{a: int}', (string) Type::parseString('strict-array{a: int}&strict-array{a?: int}'));
     }
 
 
     public function testIntersectionOfIntranges(): void
     {
-        $this->assertSame('array{a: int<3, 4>}', (string) Type::parseString('array{a: int<2, 4>}&array{a: int<3, 6>}'));
-        $this->assertSame('array{a: 4}', Type::parseString('array{a: 4}&array{a: int<3, 6>}')->getId(true));
+        $this->assertSame('strict-array{a: int<3, 4>}', (string) Type::parseString('strict-array{a: int<2, 4>}&strict-array{a: int<3, 6>}'));
+        $this->assertSame('strict-array{a: 4}', Type::parseString('strict-array{a: 4}&strict-array{a: int<3, 6>}')->getId(true));
     }
 
     public function testIntersectionOfTKeyedArrayWithConflictingProperties(): void
     {
         $this->expectException(TypeParseTreeException::class);
-        Type::parseString('array{a: string}&array{a: int}');
+        Type::parseString('strict-array{a: string}&strict-array{a: int}');
     }
 
     public function testIntersectionOfTwoRegularArrays(): void
@@ -234,25 +234,25 @@ class TypeParseTest extends TestCase
 
     public function testUnionOfIntersectionOfTKeyedArray(): void
     {
-        $this->assertSame('array{a: int|string, b?: int}', (string) Type::parseString('array{a: int}|array{a: string}&array{b: int}'));
-        $this->assertSame('array{a: int|string, b?: int}', (string) Type::parseString('array{b: int}&array{a: string}|array{a: int}'));
+        $this->assertSame('strict-array{a: int|string, b?: int}', (string) Type::parseString('strict-array{a: int}|strict-array{a: string}&strict-array{b: int}'));
+        $this->assertSame('strict-array{a: int|string, b?: int}', (string) Type::parseString('strict-array{b: int}&strict-array{a: string}|strict-array{a: int}'));
     }
 
     public function testIntersectionOfUnionOfTKeyedArray(): void
     {
         $this->expectException(TypeParseTreeException::class);
-        Type::parseString('array{a: int}&array{a: string}|array{b: int}');
+        Type::parseString('strict-array{a: int}&strict-array{a: string}|strict-array{b: int}');
     }
 
     public function testIntersectionOfTKeyedArrayAndObject(): void
     {
         $this->expectException(TypeParseTreeException::class);
-        Type::parseString('array{a: int}&T1');
+        Type::parseString('strict-array{a: int}&T1');
     }
 
     public function testIterableContainingTKeyedArray(): void
     {
-        $this->assertSame('iterable<string, array{int}>', Type::parseString('iterable<string, array{int}>')->getId());
+        $this->assertSame('iterable<string, strict-list{int}>', Type::parseString('iterable<string, strict-array{int}>')->getId());
     }
 
     public function testPhpDocSimpleArray(): void
@@ -278,8 +278,8 @@ class TypeParseTest extends TestCase
     public function testPhpDocTKeyedArray(): void
     {
         $this->assertSame(
-            'array<array-key, array{b: bool, d: string}>',
-            (string) Type::parseString('array{b: bool, d: string}[]')
+            'array<array-key, strict-array{b: bool, d: string}>',
+            (string) Type::parseString('strict-array{b: bool, d: string}[]')
         );
     }
 
@@ -327,41 +327,41 @@ class TypeParseTest extends TestCase
 
     public function testTKeyedArrayWithSimpleArgs(): void
     {
-        $this->assertSame('array{a: int, b: string}', (string) Type::parseString('array{a: int, b: string}'));
+        $this->assertSame('strict-array{a: int, b: string}', (string) Type::parseString('strict-array{a: int, b: string}'));
     }
 
     public function testTKeyedArrayWithSpace(): void
     {
-        $this->assertSame('array{\'a \': int, \'b  \': string}', (string) Type::parseString('array{\'a \': int, \'b  \': string}'));
+        $this->assertSame('strict-array{\'a \': int, \'b  \': string}', (string) Type::parseString('strict-array{\'a \': int, \'b  \': string}'));
     }
 
     public function testTKeyedArrayWithQuotedKeys(): void
     {
-        $this->assertSame('array{\'\\"\': int, \'\\\'\': string}', (string) Type::parseString('array{\'"\': int, \'\\\'\': string}'));
-        $this->assertSame('array{\'\\"\': int, \'\\\'\': string}', (string) Type::parseString('array{"\\"": int, "\\\'": string}'));
+        $this->assertSame('strict-array{\'\\"\': int, \'\\\'\': string}', (string) Type::parseString('strict-array{\'"\': int, \'\\\'\': string}'));
+        $this->assertSame('strict-array{\'\\"\': int, \'\\\'\': string}', (string) Type::parseString('strict-array{"\\"": int, "\\\'": string}'));
     }
 
     public function testTKeyedArrayWithClassConstantKey(): void
     {
         $this->expectException(TypeParseTreeException::class);
-        Type::parseString('array{self::FOO: string}');
+        Type::parseString('strict-array{self::FOO: string}');
     }
 
     public function testTKeyedArrayWithQuotedClassConstantKey(): void
     {
-        $this->assertSame('array{\'self::FOO\': string}', (string) Type::parseString('array{"self::FOO": string}'));
+        $this->assertSame('strict-array{\'self::FOO\': string}', (string) Type::parseString('strict-array{"self::FOO": string}'));
     }
 
     public function testTKeyedArrayWithoutClosingBracket(): void
     {
         $this->expectException(TypeParseTreeException::class);
-        Type::parseString('array{a: int, b: string');
+        Type::parseString('strict-array{a: int, b: string');
     }
 
     public function testTKeyedArrayInType(): void
     {
         $this->expectException(TypeParseTreeException::class);
-        Type::parseString('array{a:[]}');
+        Type::parseString('strict-array{a:[]}');
     }
 
     public function testObjectWithSimpleArgs(): void
@@ -377,45 +377,45 @@ class TypeParseTest extends TestCase
     public function testTKeyedArrayWithUnionArgs(): void
     {
         $this->assertSame(
-            'array{a: int|string, b: string}',
-            (string) Type::parseString('array{a: int|string, b: string}')
+            'strict-array{a: int|string, b: string}',
+            (string) Type::parseString('strict-array{a: int|string, b: string}')
         );
     }
 
     public function testTKeyedArrayWithGenericArgs(): void
     {
         $this->assertSame(
-            'array{a: array<int, int|string>, b: string}',
-            (string) Type::parseString('array{a: array<int, string|int>, b: string}')
+            'strict-array{a: array<int, int|string>, b: string}',
+            (string) Type::parseString('strict-array{a: array<int, string|int>, b: string}')
         );
     }
 
     public function testTKeyedArrayWithIntKeysAndUnionArgs(): void
     {
         $this->assertSame(
-            'array{null|stdClass}',
-            (string)Type::parseString('array{stdClass|null}')
+            'strict-list{null|stdClass}',
+            (string)Type::parseString('strict-list{stdClass|null}')
         );
     }
 
     public function testTKeyedArrayWithIntKeysAndGenericArgs(): void
     {
         $this->assertSame(
-            'array{array<array-key, mixed>}',
-            (string)Type::parseString('array{array}')
+            'strict-list{array<array-key, mixed>}',
+            (string)Type::parseString('strict-array{array}')
         );
 
         $this->assertSame(
-            'array{array<int, string>}',
-            (string)Type::parseString('array{array<int, string>}')
+            'strict-list{array<int, string>}',
+            (string)Type::parseString('strict-array{array<int, string>}')
         );
     }
 
     public function testTKeyedArrayOptional(): void
     {
         $this->assertSame(
-            'array{a: int, b?: int}',
-            (string)Type::parseString('array{a: int, b?: int}')
+            'strict-array{a: int, b?: int}',
+            (string)Type::parseString('strict-array{a: int, b?: int}')
         );
     }
 
@@ -530,8 +530,8 @@ class TypeParseTest extends TestCase
     public function testConditionalTypeWithTKeyedArray(): void
     {
         $this->assertSame(
-            '(T is array{a: string} ? string : int)',
-            (string) Type::parseString('(T is array{a: string} ? string : int)', null, ['T' => ['' => Type::getArray()]])
+            '(T is strict-array{a: string} ? string : int)',
+            (string) Type::parseString('(T is strict-array{a: string} ? string : int)', null, ['T' => ['' => Type::getArray()]])
         );
     }
 
@@ -812,7 +812,7 @@ class TypeParseTest extends TestCase
 
     public function testVeryLargeType(): void
     {
-        $very_large_type = 'array{a: Closure():(array<array-key, mixed>|null), b?: Closure():array<array-key, mixed>, c?: Closure():array<array-key, mixed>, d?: Closure():array<array-key, mixed>, e?: Closure():(array{f: null|string, g: null|string, h: null|string, i: string, j: mixed, k: mixed, l: mixed, m: mixed, n: bool, o?: array{0: string}}|null), p?: Closure():(array{f: null|string, g: null|string, h: null|string, i: string, j: mixed, k: mixed, l: mixed, m: mixed, n: bool, o?: array{0: string}}|null), q: string, r?: Closure():(array<array-key, mixed>|null), s: array<array-key, mixed>}|null';
+        $very_large_type = 'null|strict-array{a: Closure():(array<array-key, mixed>|null), b?: Closure():array<array-key, mixed>, c?: Closure():array<array-key, mixed>, d?: Closure():array<array-key, mixed>, e?: Closure():(null|strict-array{f: null|string, g: null|string, h: null|string, i: string, j: mixed, k: mixed, l: mixed, m: mixed, n: bool, o?: strict-array{0: string}}), p?: Closure():(null|strict-array{f: null|string, g: null|string, h: null|string, i: string, j: mixed, k: mixed, l: mixed, m: mixed, n: bool, o?: strict-array{0: string}}), q: string, r?: Closure():(array<array-key, mixed>|null), s: array<array-key, mixed>}';
 
         $this->assertSame(
             $very_large_type,
@@ -912,7 +912,7 @@ class TypeParseTest extends TestCase
     {
         $this->assertSame(
             'array<never, never>',
-            (string)Type::parseString('array{}')
+            (string)Type::parseString('strict-array{}')
         );
     }
 
diff --git a/tests/TypeReconciliation/ArrayKeyExistsTest.php b/tests/TypeReconciliation/ArrayKeyExistsTest.php
index 6ec62630b..6b4ab09c8 100644
--- a/tests/TypeReconciliation/ArrayKeyExistsTest.php
+++ b/tests/TypeReconciliation/ArrayKeyExistsTest.php
@@ -14,7 +14,7 @@ class ArrayKeyExistsTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -178,7 +178,7 @@ class ArrayKeyExistsTest extends TestCase
                         public const F = "key";
                     }
 
-                    /** @param array{key?: string} $a */
+                    /** @param strict-array{key?: string} $a */
                     function one(array $a): void {
                         if (array_key_exists(Foo::F, $a)) {
                             echo $a[Foo::F];
@@ -279,7 +279,7 @@ class ArrayKeyExistsTest extends TestCase
                     {
                     }
                     /**
-                     * @param array{0?: string, test?: string, pony?: string} $params
+                     * @param strict-array{0?: string, test?: string, pony?: string} $params
                      * @return string|null
                      */
                     function a(array $params = [])
@@ -326,7 +326,7 @@ class ArrayKeyExistsTest extends TestCase
             'arrayKeyExistsTwoVars' => [
                 'code' => '<?php
                     /**
-                     * @param array{a: string, b: string, c?: string} $info
+                     * @param strict-array{a: string, b: string, c?: string} $info
                      */
                     function getReason(array $info, string $key, string $value): bool {
                         if (array_key_exists($key, $info) && $info[$key] === $value) {
@@ -410,8 +410,8 @@ class ArrayKeyExistsTest extends TestCase
             ],
             'arrayKeyExistsComplex2' => [
                 'code' => '<?php
-                            /** @var array{
-                             *			address_components: list<array{
+                            /** @var strict-array{
+                             *			address_components: list<strict-array{
                              *				long_name: string,
                              *				short_name: string,
                              *				types: list<("accounting"|"administrative_area_level_1"|"administrative_area_level_2"|"administrative_area_level_3"|
@@ -426,12 +426,12 @@ class ArrayKeyExistsTest extends TestCase
                              *		"transit_station"|"travel_agency"|"university"|"ward"|"zoo")>
                              *			}>,
                              *			formatted_address: string,
-                             *			geometry: array{
-                             *				location: array{ lat: float, lng: float },
+                             *			geometry: strict-array{
+                             *				location: strict-array{ lat: float, lng: float },
                              *				location_type: string,
-                             *				viewport: array{
-                             *					northeast: array{ lat: float, lng: float },
-                             *					southwest: array{ lat: float, lng: float }
+                             *				viewport: strict-array{
+                             *					northeast: strict-array{ lat: float, lng: float },
+                             *					southwest: strict-array{ lat: float, lng: float }
                              *				}
                              *			},
                              *			partial_match: bool,
@@ -461,7 +461,7 @@ class ArrayKeyExistsTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -495,7 +495,7 @@ class ArrayKeyExistsTest extends TestCase
             'dontCreateWeirdString' => [
                 'code' => '<?php
                     /**
-                     * @psalm-param array{inner:string} $options
+                     * @psalm-param strict-array{inner:string} $options
                      */
                     function go(array $options): void {
                         if (!array_key_exists(\'size\', $options)) {
diff --git a/tests/TypeReconciliation/AssignmentInConditionalTest.php b/tests/TypeReconciliation/AssignmentInConditionalTest.php
index e95a3839e..f589ec80d 100644
--- a/tests/TypeReconciliation/AssignmentInConditionalTest.php
+++ b/tests/TypeReconciliation/AssignmentInConditionalTest.php
@@ -12,7 +12,7 @@ class AssignmentInConditionalTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -459,7 +459,7 @@ class AssignmentInConditionalTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/TypeReconciliation/ConditionalTest.php b/tests/TypeReconciliation/ConditionalTest.php
index d5a320d9b..50d5b319e 100644
--- a/tests/TypeReconciliation/ConditionalTest.php
+++ b/tests/TypeReconciliation/ConditionalTest.php
@@ -12,7 +12,7 @@ class ConditionalTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -21,7 +21,7 @@ class ConditionalTest extends TestCase
                 'code' => '<?php
                     $dummy = ["test" => 123];
 
-                    /** @var array{test: ?int} */
+                    /** @var strict-array{test: ?int} */
                     $a = ["test" => null];
 
                     if ($a["test"] === null) {
@@ -538,7 +538,7 @@ class ConditionalTest extends TestCase
                     }
 
                     /**
-                     * @param array{field:string,otherField:string} $array
+                     * @param strict-array{field:string,otherField:string} $array
                      */
                     function has_mix_of_fields($array) : void {
                         print_field($array);
@@ -652,7 +652,7 @@ class ConditionalTest extends TestCase
             ],
             'isArrayOnArrayKeyOffset' => [
                 'code' => '<?php
-                    /** @var array{s:array<mixed, array<int, string>|string>} */
+                    /** @var strict-array{s:array<mixed, array<int, string>|string>} */
                     $doc = [];
 
                     if (!is_array($doc["s"]["t"])) {
@@ -1101,8 +1101,8 @@ class ConditionalTest extends TestCase
             'dontRewriteNullableArrayAfterEmptyCheck' => [
                 'code' => '<?php
                     /**
-                     * @param array{x:int,y:int}|null $start_pos
-                     * @return array{x:int,y:int}|null
+                     * @param strict-array{x:int,y:int}|null $start_pos
+                     * @return strict-array{x:int,y:int}|null
                      */
                     function foo(?array $start_pos) : ?array {
                         if ($start_pos) {}
@@ -1419,7 +1419,7 @@ class ConditionalTest extends TestCase
             'assertCheckOnNonZeroArrayOffset' => [
                 'code' => '<?php
                     /**
-                     * @param array{string,array|null} $a
+                     * @param strict-array{string,array|null} $a
                      * @return string
                      */
                     function f(array $a) {
@@ -2934,7 +2934,7 @@ class ConditionalTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -3000,7 +3000,7 @@ class ConditionalTest extends TestCase
             'lessSpecificArrayFields' => [
                 'code' => '<?php
                     /**
-                     * @param array{field:string, otherField:string} $array
+                     * @param strict-array{field:string, otherField:string} $array
                      */
                     function print_field($array) : void {
                         echo $array["field"] . " " . $array["otherField"];
diff --git a/tests/TypeReconciliation/EmptyTest.php b/tests/TypeReconciliation/EmptyTest.php
index 66fed87a3..4dae0e22b 100644
--- a/tests/TypeReconciliation/EmptyTest.php
+++ b/tests/TypeReconciliation/EmptyTest.php
@@ -12,7 +12,7 @@ class EmptyTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -325,7 +325,7 @@ class EmptyTest extends TestCase
             'doubleEmptyCheckOnTKeyedArray' => [
                 'code' => '<?php
                     /**
-                     * @param array{a: array, b: array} $arr
+                     * @param strict-array{a: array, b: array} $arr
                      */
                     function foo(array $arr) : void {
                         if (empty($arr["a"]) && empty($arr["b"])) {}
@@ -383,7 +383,7 @@ class EmptyTest extends TestCase
             'reconcileNonEmptyArrayKey' => [
                 'code' => '<?php
                     /**
-                     * @param array{a?: string, b: string} $arr
+                     * @param strict-array{a?: string, b: string} $arr
                      */
                     function createFromString(array $arr): void
                     {
@@ -451,7 +451,7 @@ class EmptyTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -486,7 +486,7 @@ class EmptyTest extends TestCase
             ],
             'preventEmptyCreatingArray' => [
                 'code' => '<?php
-                    /** @return array{a:mixed} */
+                    /** @return strict-array{a:mixed} */
                     function foo(array $r) {
                         if (!empty($r["a"])) {}
                         return $r;
@@ -495,7 +495,7 @@ class EmptyTest extends TestCase
             ],
             'preventEmptyEquivalentCreatingArray' => [
                 'code' => '<?php
-                    /** @return array{a:mixed} */
+                    /** @return strict-array{a:mixed} */
                     function foo(array $r) {
                         if (isset($r["a"]) && $r["a"]) {}
                         return $r;
diff --git a/tests/TypeReconciliation/InArrayTest.php b/tests/TypeReconciliation/InArrayTest.php
index 4e3427c87..718354c7d 100644
--- a/tests/TypeReconciliation/InArrayTest.php
+++ b/tests/TypeReconciliation/InArrayTest.php
@@ -14,7 +14,7 @@ class InArrayTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -123,7 +123,7 @@ class InArrayTest extends TestCase
                         return $x;
                     }',
                 'assertions' => [],
-                'error_level' => ['RedundantConditionGivenDocblockType', 'DocblockTypeContradiction'],
+                'ignored_issues' => ['RedundantConditionGivenDocblockType', 'DocblockTypeContradiction'],
             ],
             'assertNegatedInArrayOfNotIntersectingTypeReturnsOriginalType' => [
                 'code' => '<?php
@@ -140,7 +140,7 @@ class InArrayTest extends TestCase
                         throw new \Exception();
                     }',
                 'assertions' => [],
-                'error_level' => ['RedundantConditionGivenDocblockType'],
+                'ignored_issues' => ['RedundantConditionGivenDocblockType'],
             ],
             'assertAgainstListOfLiteralsAndScalarUnion' => [
                 'code' => '<?php
@@ -232,7 +232,7 @@ class InArrayTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/TypeReconciliation/IssetTest.php b/tests/TypeReconciliation/IssetTest.php
index 95bc2ccee..814c1b10d 100644
--- a/tests/TypeReconciliation/IssetTest.php
+++ b/tests/TypeReconciliation/IssetTest.php
@@ -12,7 +12,7 @@ class IssetTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -289,8 +289,8 @@ class IssetTest extends TestCase
             'returnArrayWithDefinedKeys' => [
                 'code' => '<?php
                     /**
-                     * @param array{bar?: int, foo: int|string} $arr
-                     * @return array{bar: int, foo: string}|null
+                     * @param strict-array{bar?: int, foo: int|string} $arr
+                     * @return strict-array{bar: int, foo: string}|null
                      */
                     function foo(array $arr) : ?array {
                         if (!isset($arr["bar"])) {
@@ -611,8 +611,8 @@ class IssetTest extends TestCase
             'issetOnNestedObjectlikeOneLevel' => [
                 'code' => '<?php
                     /**
-                     * @param array{a:array} $array
-                     * @return array{a:array{b:mixed}}
+                     * @param strict-array{a:array} $array
+                     * @return strict-array{a:array{b:mixed}}
                      * @throw \LogicException
                      */
                     function level3($array) {
@@ -1033,7 +1033,7 @@ class IssetTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -1125,7 +1125,7 @@ class IssetTest extends TestCase
             'accessAfterIssetCheckOnFalsableArray' => [
                 'code' => '<?php
                     /**
-                     * @return array{b?: string}|false
+                     * @return strict-array{b?: string}|false
                      */
                     function returnPossiblyFalseArray() {
                         return rand(0, 1) ? false : (rand(0, 1) ? ["b" => "hello"] : []);
diff --git a/tests/TypeReconciliation/ReconcilerTest.php b/tests/TypeReconciliation/ReconcilerTest.php
index 4f86dbbc9..0f910f8d6 100644
--- a/tests/TypeReconciliation/ReconcilerTest.php
+++ b/tests/TypeReconciliation/ReconcilerTest.php
@@ -106,7 +106,7 @@ class ReconcilerTest extends TestCase
     }
 
     /**
-     * @return array<string,array{string,Assertion,string}>
+     * @return array<string,strict-array{string,Assertion,string}>
      */
     public function providerTestReconcilation(): array
     {
@@ -175,7 +175,7 @@ class ReconcilerTest extends TestCase
             'classAssertionOnClassInterfaceUnion' => ['SomeClass|SomeClass&SomeInterface', new IsType(new TNamedObject('SomeClass')), 'SomeClass|SomeInterface'],
             'stringToNumericStringWithInt' => ['numeric-string', new IsLooselyEqual(new TInt()), 'string'],
             'stringToNumericStringWithFloat' => ['numeric-string', new IsLooselyEqual(new TFloat()), 'string'],
-            'filterKeyedArrayWithIterable' => ['array{some: string}',new IsType(new TIterable([Type::getMixed(), Type::getString()])), 'array{some: mixed}'],
+            'filterKeyedArrayWithIterable' => ['strict-array{some: string}',new IsType(new TIterable([Type::getMixed(), Type::getString()])), 'strict-array{some: mixed}'],
             'SimpleXMLElementNotAlwaysTruthy' => ['SimpleXMLElement', new Truthy(), 'SimpleXMLElement'],
             'SimpleXMLElementNotAlwaysTruthy2' => ['SimpleXMLElement', new Falsy(), 'SimpleXMLElement'],
             'SimpleXMLIteratorNotAlwaysTruthy' => ['SimpleXMLIterator', new Truthy(), 'SimpleXMLIterator'],
@@ -185,7 +185,7 @@ class ReconcilerTest extends TestCase
     }
 
     /**
-     * @return array<string,array{string,string}>
+     * @return array<string,strict-array{string,string}>
      */
     public function providerTestTypeIsContainedBy(): array
     {
@@ -200,12 +200,12 @@ class ReconcilerTest extends TestCase
             'unionContainsWithstring' => ['string', 'string|false'],
             'unionContainsWithFalse' => ['false', 'string|false'],
             'objectLikeTypeWithPossiblyUndefinedToGeneric' => [
-                'array{0: array{a: string}, 1: array{c: string, e: string}}',
+                'strict-array{0: strict-array{a: string}, 1: strict-array{c: string, e: string}}',
                 'array<int, array<string, string>>',
             ],
             'objectLikeTypeWithPossiblyUndefinedToEmpty' => [
                 'array<never, never>',
-                'array{a?: string, b?: string}',
+                'strict-array{a?: string, b?: string}',
             ],
             'literalNumericStringInt' => [
                 '"0"',
@@ -256,7 +256,7 @@ class ReconcilerTest extends TestCase
     }
 
     /**
-     * @return array<non-empty-string,array{Assertion,string}>
+     * @return array<non-empty-string,strict-array{Assertion,string}>
      */
     public function constantAssertions(): array
     {
diff --git a/tests/TypeReconciliation/RedundantConditionTest.php b/tests/TypeReconciliation/RedundantConditionTest.php
index 1038e354c..72e43f547 100644
--- a/tests/TypeReconciliation/RedundantConditionTest.php
+++ b/tests/TypeReconciliation/RedundantConditionTest.php
@@ -14,7 +14,7 @@ class RedundantConditionTest extends TestCase
     use InvalidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -337,7 +337,7 @@ class RedundantConditionTest extends TestCase
                     $a = getStrings();
 
                     if (is_string($a[0]) && strlen($a[0]) > 3) {}',
-                'assignments' => [],
+                'assertions' => [],
                 'ignored_issues' => [],
             ],
             'nullToMixedWithNullCheckWithIntKey' => [
@@ -350,7 +350,7 @@ class RedundantConditionTest extends TestCase
                     $a = getStrings();
 
                     if (is_string($a[0]) && strlen($a[0]) > 3) {}',
-                'assignments' => [],
+                'assertions' => [],
                 'ignored_issues' => [],
             ],
             'replaceFalseTypeWithTrueConditionalOnMixedEquality' => [
@@ -368,7 +368,7 @@ class RedundantConditionTest extends TestCase
 
                         if ($a === false) {}
                     }',
-                'assignments' => [],
+                'assertions' => [],
                 'ignored_issues' => ['MixedAssignment', 'MissingReturnType', 'MixedArrayAccess'],
             ],
             'nullCoalescePossiblyUndefined' => [
@@ -381,7 +381,7 @@ class RedundantConditionTest extends TestCase
                     $option = $options["option"] ?? false;
 
                     if ($option) {}',
-                'assignments' => [],
+                'assertions' => [],
                 'ignored_issues' => ['MixedAssignment', 'MixedArrayAccess'],
             ],
             'allowIntValueCheckAfterComparisonDueToOverflow' => [
@@ -894,7 +894,7 @@ class RedundantConditionTest extends TestCase
             'secondFalsyTwiceWithChange' => [
                 'code' => '<?php
                     /**
-                     * @param array{a?:int,b?:string} $p
+                     * @param strict-array{a?:int,b?:string} $p
                      */
                     function f(array $p) : void {
                         if (!$p) {
@@ -910,7 +910,7 @@ class RedundantConditionTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -1517,7 +1517,7 @@ class RedundantConditionTest extends TestCase
             'secondFalsyTwiceWithoutChange' => [
                 'code' => '<?php
                     /**
-                     * @param array{a?:int,b?:string} $p
+                     * @param strict-array{a?:int,b?:string} $p
                      */
                     function f(array $p) : void {
                         if (!$p) {
@@ -1530,7 +1530,7 @@ class RedundantConditionTest extends TestCase
             'secondFalsyTwiceWithoutChangeWithElse' => [
                 'code' => '<?php
                     /**
-                     * @param array{a?:int,b?:string} $p
+                     * @param strict-array{a?:int,b?:string} $p
                      */
                     function f(array $p) : void {
                         if (!$p) {
diff --git a/tests/TypeReconciliation/ScopeTest.php b/tests/TypeReconciliation/ScopeTest.php
index 6719546b3..c8cc2ed7e 100644
--- a/tests/TypeReconciliation/ScopeTest.php
+++ b/tests/TypeReconciliation/ScopeTest.php
@@ -14,7 +14,7 @@ class ScopeTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -215,7 +215,7 @@ class ScopeTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/TypeReconciliation/TypeAlgebraTest.php b/tests/TypeReconciliation/TypeAlgebraTest.php
index c3cae9837..b5e0a31e1 100644
--- a/tests/TypeReconciliation/TypeAlgebraTest.php
+++ b/tests/TypeReconciliation/TypeAlgebraTest.php
@@ -12,7 +12,7 @@ class TypeAlgebraTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -1218,7 +1218,7 @@ class TypeAlgebraTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/TypeReconciliation/TypeTest.php b/tests/TypeReconciliation/TypeTest.php
index e200dc8fe..6f3cbe565 100644
--- a/tests/TypeReconciliation/TypeTest.php
+++ b/tests/TypeReconciliation/TypeTest.php
@@ -14,11 +14,117 @@ class TypeTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
         return [
+            'sealArray' => [
+                'code' => '<?php
+                    /** @var array */
+                    $a = [];
+
+                    assert(isset($a["a"]));
+                    assert(count($a) === 1);
+                    ',
+                'assertions' => [
+                    '$a===' => 'strict-array{a: mixed}'
+                ]
+            ],
+            'sealedArrayCount' => [
+                'code' => '<?php
+                    $a = random_int(0,1) ? [] : [0, 1];
+
+                    $b = null;
+                    if (count($a) === 2) {
+                        $b = $a;
+                    }',
+                'assertions' => [
+                    '$a===' => 'strict-list{0?: 0, 1?: 1}',
+                    '$b===' => 'null|strict-list{0, 1}'
+                ]
+            ],
+            'sealedArrayMagic' => [
+                'code' => '<?php
+
+                /** @var strict-array{invoice?: string, utd?: "utd", cancel_agreement?: "test", installment?: "test"} */
+                $b = [];
+
+
+                $buttons = [];
+                foreach ($b as $text) {
+                    $buttons[] = $text;
+                }
+                if (count($buttons) === 0) {
+                    echo "Zero";
+                }
+
+
+                /** @var ?string */
+                $test = null;
+                $urls = array_filter([$test]);
+
+                $mainUrlSet = false;
+                foreach ($urls as $_) {
+                    if (!$mainUrlSet) {
+                        $mainUrlSet = true;
+                    }
+                }
+                if (!$mainUrlSet) {
+                    echo "SKIP";
+                }
+
+
+                /**
+                 * @param string|list<bool|strict-array{0:string, 1:string}> $time
+                 */
+                function mapTime($time): void
+                {
+                    $atime = is_array($time) ? $time : [];
+                    if ($time === "24h") {
+                        return;
+                    }
+
+                    for ($day = 0; $day < 7; ++$day) {
+                        if (!array_key_exists($day, $atime) || !is_array($atime[$day])) {
+                            continue;
+                        }
+
+                        $dayWh = $atime[$day];
+                        array_pop($dayWh);
+                    }
+                }',
+                'assertions' => [
+                    '$buttons===' => 'list<string>',
+                    '$urls===' => 'strict-list{0?: non-falsy-string}',
+                    '$mainUrlSet===' => 'bool',
+                ]
+            ],
+            'validSealedArrayAssertions' => [
+                'code' => '<?php
+                    /** @var strict-array{a: string, b: string, c?: string} */
+                    $a = [];
+
+                    if (count($a) > 2) {
+                        echo "Have C!";
+                    }
+
+                    if (count($a) < 3) {
+                        echo "Do not have C!";
+                    }
+                ',
+            ],
+            'validSealedArrayAssertions2' => [
+                'code' => '<?php
+                    /** @var strict-array{a: string, b: string, c?: string} */
+                    $a = [];
+
+                    assert(count($a) > 2);
+                ',
+                'assertions' => [
+                    '$a===' => 'strict-array{a: string, b: string, c: string}',
+                ]
+            ],
             'instanceOfInterface' => [
                 'code' => '<?php
                     interface Supplier {
@@ -1148,7 +1254,7 @@ class TypeTest extends TestCase
                     }
 
                     /**
-                     * @param array{0:string, 1: string} $input
+                     * @param strict-array{0:string, 1: string} $input
                      */
                     function consume($input): void{}'
             ],
@@ -1209,7 +1315,7 @@ class TypeTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     * @return iterable<string,strict-array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -1570,6 +1676,60 @@ class TypeTest extends TestCase
                     ',
                 'error_message' => 'InvalidReturnStatement',
             ],
+            'invalidSealedArrayAssertion1' => [
+                'code' => '<?php
+                    /** @var strict-array{a: string, b: string, c?: string} */
+                    $a = [];
+
+                    if (count($a) > 1) {
+                    }',
+                'error_message' => 'RedundantConditionGivenDocblockType'
+            ],
+            'invalidSealedArrayAssertion2' => [
+                'code' => '<?php
+                    /** @var strict-array{a: string, b: string, c?: string} */
+                    $a = [];
+
+                    if (count($a) > 3) {
+                    }',
+                'error_message' => 'DocblockTypeContradiction'
+            ],
+            'invalidSealedArrayAssertion3' => [
+                'code' => '<?php
+                    /** @var strict-array{a: string, b: string, c?: string} */
+                    $a = [];
+
+                    if (count($a) > 4) {
+                    }',
+                'error_message' => 'DocblockTypeContradiction'
+            ],
+            'invalidSealedArrayAssertion4' => [
+                'code' => '<?php
+                    /** @var strict-array{a: string, b: string, c?: string} */
+                    $a = [];
+
+                    if (count($a) < 1) {
+                    }',
+                'error_message' => 'RedundantConditionGivenDocblockType'
+            ],
+            'invalidSealedArrayAssertion5' => [
+                'code' => '<?php
+                    /** @var strict-array{a: string, b: string, c?: string} */
+                    $a = [];
+
+                    if (count($a) < 2) {
+                    }',
+                'error_message' => 'DocblockTypeContradiction'
+            ],
+            'invalidSealedArrayAssertion6' => [
+                'code' => '<?php
+                    /** @var strict-array{a: string, b: string, c?: string} */
+                    $a = [];
+
+                    if (count($a) < 4) {
+                    }',
+                'error_message' => 'RedundantConditionGivenDocblockType'
+            ],
             'intersectionTypeClassCheckAfterInstanceof' => [
                 'code' => '<?php
                     /**
diff --git a/tests/TypeReconciliation/ValueTest.php b/tests/TypeReconciliation/ValueTest.php
index 60f81a65c..5fd981e3a 100644
--- a/tests/TypeReconciliation/ValueTest.php
+++ b/tests/TypeReconciliation/ValueTest.php
@@ -35,7 +35,7 @@ class ValueTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -569,7 +569,7 @@ class ValueTest extends TestCase
                 'code' => '<?php
                     class Foo {
                         /**
-                         * @var array{from:bool, to:bool}
+                         * @var strict-array{from:bool, to:bool}
                          */
                         protected $things = ["from" => false, "to" => false];
 
@@ -589,7 +589,7 @@ class ValueTest extends TestCase
                 'code' => '<?php
                     class Foo {
                         /**
-                         * @var array{from:bool, to:bool}
+                         * @var strict-array{from:bool, to:bool}
                          */
                         protected $things = ["from" => false, "to" => false];
 
@@ -802,7 +802,7 @@ class ValueTest extends TestCase
             'returnFromUnionLiteral' => [
                 'code' => '<?php
                     /**
-                     * @return array{"a1", "a2"}
+                     * @return strict-array{"a1", "a2"}
                      */
                     function getSupportedConsts() {
                         return ["a1", "a2"];
@@ -822,7 +822,7 @@ class ValueTest extends TestCase
             'returnFromUnionLiteralNegated' => [
                 'code' => '<?php
                     /**
-                     * @return array{"a1", "a2"}
+                     * @return strict-array{"a1", "a2"}
                      */
                     function getSupportedConsts() {
                         return ["a1", "a2"];
@@ -921,7 +921,7 @@ class ValueTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
diff --git a/tests/UnresolvableIncludeTest.php b/tests/UnresolvableIncludeTest.php
index 1f1ec2da1..3eb2cf0ef 100644
--- a/tests/UnresolvableIncludeTest.php
+++ b/tests/UnresolvableIncludeTest.php
@@ -22,7 +22,7 @@ class UnresolvableIncludeTest extends TestCase
     }
 
     /**
-     * @return array<string,array{code:string,expectedExceptionLine:int}>
+     * @return array<string,strict-array{code:string,expectedExceptionLine:int}>
      */
     public function providerUnresolvableInclude(): array
     {
@@ -51,7 +51,7 @@ class UnresolvableIncludeTest extends TestCase
     }
 
     /**
-     * @return array<string,array{code:string}>
+     * @return array<string,strict-array{code:string}>
      */
     public function providerNoUnresolvableInclude(): array
     {
diff --git a/tests/UnusedCodeTest.php b/tests/UnusedCodeTest.php
index 9484452be..8e5e2892e 100644
--- a/tests/UnusedCodeTest.php
+++ b/tests/UnusedCodeTest.php
@@ -45,10 +45,10 @@ class UnusedCodeTest extends TestCase
      * @dataProvider providerValidCodeParse
      *
      * @param string $code
-     * @param array<string> $error_levels
+     * @param array<string> $ignored_issues
      *
      */
-    public function testValidCode($code, array $error_levels = []): void
+    public function testValidCode($code, array $ignored_issues = []): void
     {
         $test_name = $this->getTestName();
         if (strpos($test_name, 'SKIPPED-') !== false) {
@@ -64,7 +64,7 @@ class UnusedCodeTest extends TestCase
 
         $this->project_analyzer->setPhpVersion('8.0', 'tests');
 
-        foreach ($error_levels as $error_level) {
+        foreach ($ignored_issues as $error_level) {
             $this->project_analyzer->getCodebase()->config->setCustomErrorLevel($error_level, Config::REPORT_SUPPRESS);
         }
 
@@ -80,10 +80,10 @@ class UnusedCodeTest extends TestCase
      *
      * @param string $code
      * @param string $error_message
-     * @param array<string> $error_levels
+     * @param array<string> $ignored_issues
      *
      */
-    public function testInvalidCode($code, $error_message, $error_levels = []): void
+    public function testInvalidCode($code, $error_message, $ignored_issues = []): void
     {
         if (strpos($this->getTestName(), 'SKIPPED-') !== false) {
             $this->markTestSkipped();
@@ -94,7 +94,7 @@ class UnusedCodeTest extends TestCase
 
         $file_path = self::$src_dir_path . 'somefile.php';
 
-        foreach ($error_levels as $error_level) {
+        foreach ($ignored_issues as $error_level) {
             $this->project_analyzer->getCodebase()->config->setCustomErrorLevel($error_level, Config::REPORT_SUPPRESS);
         }
 
@@ -175,7 +175,7 @@ class UnusedCodeTest extends TestCase
     }
 
     /**
-     * @return array<string, array{code:string}>
+     * @return array<string, strict-array{code:string}>
      */
     public function providerValidCodeParse(): array
     {
@@ -1211,7 +1211,7 @@ class UnusedCodeTest extends TestCase
     }
 
     /**
-     * @return array<string,array{code:string,error_message:string,ignored_issues?:list<string>}>
+     * @return array<string,strict-array{code:string,error_message:string,ignored_issues?:list<string>}>
      */
     public function providerInvalidCodeParse(): array
     {
diff --git a/tests/UnusedVariableTest.php b/tests/UnusedVariableTest.php
index 6bc30bfd3..f6b2c5276 100644
--- a/tests/UnusedVariableTest.php
+++ b/tests/UnusedVariableTest.php
@@ -42,10 +42,10 @@ class UnusedVariableTest extends TestCase
      * @dataProvider providerValidCodeParse
      *
      * @param string $code
-     * @param array<string> $error_levels
+     * @param array<string> $ignored_issues
      *
      */
-    public function testValidCode($code, array $error_levels = [], string $php_version = '7.4'): void
+    public function testValidCode($code, array $ignored_issues = [], string $php_version = '7.4'): void
     {
         $test_name = $this->getTestName();
         if (strpos($test_name, 'SKIPPED-') !== false) {
@@ -61,7 +61,7 @@ class UnusedVariableTest extends TestCase
             $code
         );
 
-        foreach ($error_levels as $error_level) {
+        foreach ($ignored_issues as $error_level) {
             $this->project_analyzer->getCodebase()->config->setCustomErrorLevel($error_level, Config::REPORT_SUPPRESS);
         }
 
@@ -73,10 +73,10 @@ class UnusedVariableTest extends TestCase
      *
      * @param string $code
      * @param string $error_message
-     * @param array<string> $error_levels
+     * @param array<string> $ignored_issues
      *
      */
-    public function testInvalidCode($code, $error_message, $error_levels = []): void
+    public function testInvalidCode($code, $error_message, $ignored_issues = []): void
     {
         if (strpos($this->getTestName(), 'SKIPPED-') !== false) {
             $this->markTestSkipped();
@@ -89,7 +89,7 @@ class UnusedVariableTest extends TestCase
 
         $file_path = self::$src_dir_path . 'somefile.php';
 
-        foreach ($error_levels as $error_level) {
+        foreach ($ignored_issues as $error_level) {
             $this->project_analyzer->getCodebase()->config->setCustomErrorLevel($error_level, Config::REPORT_SUPPRESS);
         }
 
@@ -102,7 +102,7 @@ class UnusedVariableTest extends TestCase
     }
 
     /**
-     * @return array<string, array{code:string,ignored_issues?:list<string>,php_version?:string}>
+     * @return array<string, strict-array{code:string,ignored_issues?:list<string>,php_version?:string}>
      */
     public function providerValidCodeParse(): array
     {
@@ -744,7 +744,7 @@ class UnusedVariableTest extends TestCase
             'arrayVarAssignmentInFunctionAndReturned' => [
                 'code' => '<?php
                     /**
-                     * @param array{string} $arr
+                     * @param strict-array{string} $arr
                      */
                     function far(array $arr): string {
                         [$a] = $arr;
@@ -755,7 +755,7 @@ class UnusedVariableTest extends TestCase
             'arrayUnpackInForeach' => [
                 'code' => '<?php
                     /**
-                     * @param list<array{string, string}> $arr
+                     * @param list<strict-array{string, string}> $arr
                      */
                     function far(array $arr): void {
                         foreach ($arr as [$a, $b]) {
@@ -767,7 +767,6 @@ class UnusedVariableTest extends TestCase
             'arraySubAppend' => [
                 'code' => '<?php
                     $rules = [0, 1, 2];
-                    
                     $report = ["runs" => []];
                     foreach ($rules as $rule) {
                         $report["runs"][] = $rule;
@@ -2412,7 +2411,7 @@ class UnusedVariableTest extends TestCase
                             }
                         }
                     }',
-                'error_levels' => [],
+                'ignored_issues' => [],
                 'php_version' => '8.0',
             ],
             'concatWithUnknownProperty' => [
@@ -2528,10 +2527,6 @@ class UnusedVariableTest extends TestCase
                     $b = 2;
                     echo $a;
                 ',
-                'assertions' => [
-                    '$b===' => '2',
-                    '$a===' => '2',
-                ],
             ],
             'referenceUsedAfterVariableReassignment' => [
                 'code' => '<?php
@@ -2621,7 +2616,7 @@ class UnusedVariableTest extends TestCase
     }
 
     /**
-     * @return array<string,array{code:string,error_message:string}>
+     * @return array<string,strict-array{code:string,error_message:string}>
      */
     public function providerInvalidCodeParse(): array
     {
@@ -3595,7 +3590,7 @@ class UnusedVariableTest extends TestCase
                         $arr = [$a];
                         takesArrayOfString($arr);
                     }',
-                'error_message' => 'MixedArgumentTypeCoercion - src' . DIRECTORY_SEPARATOR . 'somefile.php:12:44 - Argument 1 of takesArrayOfString expects array<array-key, string>, but parent type array{mixed} provided. Consider improving the type at src' . DIRECTORY_SEPARATOR . 'somefile.php:10:41'
+                'error_message' => 'MixedArgumentTypeCoercion - src' . DIRECTORY_SEPARATOR . 'somefile.php:12:44 - Argument 1 of takesArrayOfString expects array<array-key, string>, but parent type strict-list{mixed} provided. Consider improving the type at src' . DIRECTORY_SEPARATOR . 'somefile.php:10:41'
             ],
             'warnAboutUnusedVariableInTryReassignedInCatch' => [
                 'code' => '<?php
diff --git a/tests/ValueOfTest.php b/tests/ValueOfTest.php
index a117c1c85..d70fd7134 100644
--- a/tests/ValueOfTest.php
+++ b/tests/ValueOfTest.php
@@ -13,7 +13,7 @@ class ValueOfTest extends TestCase
     use ValidCodeAnalysisTestTrait;
 
     /**
-     * @return iterable<string,array{code:string,assertions?:array<string,string>,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerValidCodeParse(): iterable
     {
@@ -114,7 +114,7 @@ class ValueOfTest extends TestCase
             'acceptLiteralIntInValueOfUnionLiteralInts' => [
                 'code' => '<?php
                     /**
-                     * @return value-of<list<0|1|2>|array{0: 3, 1: 4}>
+                     * @return value-of<list<0|1|2>|strict-array{0: 3, 1: 4}>
                      */
                     function getValue(int $i) {
                         if ($i >= 0 && $i <= 4) {
@@ -213,7 +213,7 @@ class ValueOfTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code:string,error_message:string,ignored_issues?:list<string>,php_version?:string}>
+     *
      */
     public function providerInvalidCodeParse(): iterable
     {
@@ -261,7 +261,7 @@ class ValueOfTest extends TestCase
             'noOtherStringAllowedForValueOfKeyedArray' => [
                 'code' => '<?php
                     /**
-                     * @return value-of<array{a: "foo", b: "bar"}>
+                     * @return value-of<strict-array{a: "foo", b: "bar"}>
                      */
                     function getValue() {
                         return "adams";
@@ -272,7 +272,7 @@ class ValueOfTest extends TestCase
             'noOtherIntAllowedInValueOfUnionLiteralInts' => [
                 'code' => '<?php
                     /**
-                     * @return value-of<list<0|1|2>|array{0: 3, 1: 4}>
+                     * @return value-of<list<0|1|2>|strict-array{0: 3, 1: 4}>
                      */
                     function getValue() {
                         return 5;
diff --git a/tests/VariadicTest.php b/tests/VariadicTest.php
index ab3b38328..2b1b6c087 100644
--- a/tests/VariadicTest.php
+++ b/tests/VariadicTest.php
@@ -71,7 +71,7 @@ class VariadicTest extends TestCase
     }
 
     /**
-     * @return iterable<string,array{code: string}>
+     * @return iterable<string,strict-array{code: string}>
      */
     public function providerValidCodeParse(): iterable
     {
