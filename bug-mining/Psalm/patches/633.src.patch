diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/Fetch/PropertyFetchAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/Fetch/PropertyFetchAnalyzer.php
index 907f3972b..9b2c589dd 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/Fetch/PropertyFetchAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/Fetch/PropertyFetchAnalyzer.php
@@ -916,22 +916,54 @@ class PropertyFetchAnalyzer
             $calling_class_storage->template_types ?: []
         );
 
+        $extended_types = $calling_class_storage->template_type_extends;
+
         if ($template_types) {
-            $reversed_class_template_types = array_reverse(array_keys($template_types));
+            if ($calling_class_storage->template_types) {
+                foreach ($lhs_type_part->type_params as $param_offset => $lhs_param_type) {
+                    $i = -1;
+
+                    foreach ($calling_class_storage->template_types as $calling_param_name => $_) {
+                        $i++;
+
+                        if ($i === $param_offset) {
+                            $template_types[$calling_param_name][$calling_class_storage->name] = [
+                                $lhs_param_type,
+                                0
+                            ];
+                            break;
+                        }
+                    }
+                }
+            }
 
-            $provided_type_param_count = count($lhs_type_part->type_params);
+            foreach ($template_types as $type_name => $_) {
+                if (isset($extended_types[$declaring_class_storage->name][$type_name])) {
+                    $mapped_type = $extended_types[$declaring_class_storage->name][$type_name];
 
-            foreach ($reversed_class_template_types as $i => $type_name) {
-                if (isset($lhs_type_part->type_params[$provided_type_param_count - 1 - $i])) {
-                    $template_types[$type_name][$declaring_class_storage->name] = [
-                        $lhs_type_part->type_params[$provided_type_param_count - 1 - $i],
-                        0
-                    ];
-                } else {
-                    $template_types[$type_name][$declaring_class_storage->name] = [
-                        Type::getMixed(),
-                        0
-                    ];
+                    foreach ($mapped_type->getAtomicTypes() as $mapped_type_atomic) {
+                        if (!$mapped_type_atomic instanceof Type\Atomic\TTemplateParam) {
+                            continue;
+                        }
+
+                        $param_name = $mapped_type_atomic->param_name;
+
+                        $position = false;
+
+                        if (isset($calling_class_storage->template_types[$param_name])) {
+                            $position = \array_search(
+                                $param_name,
+                                array_keys($calling_class_storage->template_types)
+                            );
+                        }
+
+                        if ($position !== false && isset($lhs_type_part->type_params[$position])) {
+                            $template_types[$type_name][$declaring_class_storage->name] = [
+                                $lhs_type_part->type_params[$position],
+                                0
+                            ];
+                        }
+                    }
                 }
             }
 
diff --git a/tests/Template/ClassTemplateExtendsTest.php b/tests/Template/ClassTemplateExtendsTest.php
index cbf2fc2d9..d0c778920 100644
--- a/tests/Template/ClassTemplateExtendsTest.php
+++ b/tests/Template/ClassTemplateExtendsTest.php
@@ -3679,6 +3679,144 @@ class ClassTemplateExtendsTest extends TestCase
                     /** @extends BaseRepository<TeacherViewData, TeacherModel> */
                     class TeacherRepository extends BaseRepository {}'
             ],
+            'templateInheritedPropertyCorrectly' => [
+                '<?php
+                    /**
+                     * @template TKey1
+                     * @template TValue1
+                     */
+                    class Pair
+                    {
+                        /** @psalm-var TKey1 */
+                        public $one;
+
+                        /** @psalm-var TValue1 */
+                        public $two;
+
+                        /**
+                         * @psalm-param TKey1 $key
+                         * @psalm-param TValue1 $value
+                         */
+                        public function __construct($key, $value) {
+                            $this->one = $key;
+                            $this->two = $value;
+                        }
+                    }
+
+                    /**
+                     * @template TValue2
+                     * @extends Pair<string, TValue2>
+                     */
+                    class StringKeyedPair extends Pair {
+                        /**
+                         * @param TValue2 $value
+                         */
+                        public function __construct(string $key, $value) {
+                            parent::__construct($key, $value);
+                        }
+                    }
+
+                    $pair = new StringKeyedPair("somekey", 250);
+                    $a = $pair->two;
+                    $b = $pair->one;',
+                [
+                    '$pair' => 'StringKeyedPair<int>',
+                    '$a' => 'int',
+                    '$b' => 'string',
+                ]
+            ],
+            'templateInheritedPropertySameName' => [
+                '<?php
+                    /**
+                     * @template TKey
+                     * @template TValue
+                     */
+                    class Pair
+                    {
+                        /** @psalm-var TKey */
+                        public $one;
+
+                        /** @psalm-var TValue */
+                        public $two;
+
+                        /**
+                         * @psalm-param TKey $key
+                         * @psalm-param TValue $value
+                         */
+                        public function __construct($key, $value) {
+                            $this->one = $key;
+                            $this->two = $value;
+                        }
+                    }
+
+                    /**
+                     * @template TValue
+                     * @extends Pair<string, TValue>
+                     */
+                    class StringKeyedPair extends Pair {
+                        /**
+                         * @param TValue $value
+                         */
+                        public function __construct(string $key, $value) {
+                            parent::__construct($key, $value);
+                        }
+                    }
+
+                    $pair = new StringKeyedPair("somekey", 250);
+                    $a = $pair->two;
+                    $b = $pair->one;',
+                [
+                    '$pair' => 'StringKeyedPair<int>',
+                    '$a' => 'int',
+                    '$b' => 'string',
+                ]
+            ],
+            'templateInheritedPropertySameNameFlipped' => [
+                '<?php
+                    /**
+                     * @template TKey
+                     * @template TValue
+                     */
+                    class Pair
+                    {
+                        /** @psalm-var TKey */
+                        public $one;
+
+                        /** @psalm-var TValue */
+                        public $two;
+
+                        /**
+                         * @psalm-param TKey $key
+                         * @psalm-param TValue $value
+                         */
+                        public function __construct($key, $value) {
+                            $this->one = $key;
+                            $this->two = $value;
+                        }
+                    }
+
+                    /**
+                     * @template TValue
+                     * @extends Pair<TValue, string>
+                     */
+                    class StringKeyedPair extends Pair {
+                        /**
+                         * @param TValue $value
+                         */
+                        public function __construct(string $key, $value) {
+                            parent::__construct($value, $key);
+                        }
+                    }
+
+                    $pair = new StringKeyedPair("somekey", 250);
+                    $a = $pair->one;
+                    $b = $pair->two;',
+                [
+                    '$pair' => 'StringKeyedPair<int>',
+                    '$a' => 'int',
+                    '$b' => 'string',
+                ]
+            ]
         ];
     }
 
