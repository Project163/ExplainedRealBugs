diff --git a/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayFilterReturnTypeProvider.php b/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayFilterReturnTypeProvider.php
index 1e053f805..9e36437ef 100644
--- a/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayFilterReturnTypeProvider.php
+++ b/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayFilterReturnTypeProvider.php
@@ -130,6 +130,10 @@ class ArrayFilterReturnTypeProvider implements \Psalm\Plugin\Hook\FunctionReturn
             ]);
         }
 
+        if (!$inner_type->getTypes()) {
+            return Type::getEmptyArray();
+        }
+
         return new Type\Union([
             new Type\Atomic\TArray([
                 $key_type,
diff --git a/tests/FunctionCallTest.php b/tests/FunctionCallTest.php
index 278d80e3c..29dfa1167 100644
--- a/tests/FunctionCallTest.php
+++ b/tests/FunctionCallTest.php
@@ -81,6 +81,20 @@ class FunctionCallTest extends TestCase
                 '<?php
                     $foo = array_filter(["hello ", " "], "trim");',
             ],
+            'arrayFilterAllowNull' => [
+                '<?php
+                    function foo() : array {
+                        return array_filter(
+                            array_map(
+                                /** @return null */
+                                function (int $arg) {
+                                    return null;
+                                },
+                                [1, 2, 3]
+                            )
+                        );
+                    }',
+            ],
             'typedArrayWithDefault' => [
                 '<?php
                     class A {}
