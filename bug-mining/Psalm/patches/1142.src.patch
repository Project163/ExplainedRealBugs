diff --git a/src/Psalm/Internal/Analyzer/ScopeAnalyzer.php b/src/Psalm/Internal/Analyzer/ScopeAnalyzer.php
index 30fd07d3c..d469857fc 100644
--- a/src/Psalm/Internal/Analyzer/ScopeAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/ScopeAnalyzer.php
@@ -323,16 +323,21 @@ class ScopeAnalyzer
                     }
                 }
 
-                if ($has_default_terminator || isset($stmt->allMatched)) {
-                    $all_case_actions = array_filter(
-                        $all_case_actions,
-                        function ($action) {
-                            return $action !== self::ACTION_NONE;
-                        }
-                    );
+                $all_case_actions = array_filter(
+                    $all_case_actions,
+                    function ($action) {
+                        return $action !== self::ACTION_NONE;
+                    }
+                );
 
+                if ($has_default_terminator || isset($stmt->allMatched)) {
                     return array_values(array_unique(array_merge($control_actions, $all_case_actions)));
                 }
+
+                $control_actions = array_merge(
+                    $control_actions,
+                    $all_case_actions
+                );
             }
 
             if ($stmt instanceof PhpParser\Node\Stmt\Do_
diff --git a/tests/SwitchTypeTest.php b/tests/SwitchTypeTest.php
index 319c80e23..c8e6872c7 100644
--- a/tests/SwitchTypeTest.php
+++ b/tests/SwitchTypeTest.php
@@ -1057,6 +1057,20 @@ class SwitchTypeTest extends TestCase
                         }
                     }'
             ],
+            'nonTotalSwitchStillSometimesExits' => [
+                '<?php
+                    function takesAnInt(string $str): ?int{
+                        switch ($str) {
+                            case "a":
+                                return 5;
+
+                            case "b":
+                                return null;
+                        }
+
+                        throw new Exception();
+                    }'
+            ],
         ];
     }
 
