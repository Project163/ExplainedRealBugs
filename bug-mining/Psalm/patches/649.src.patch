diff --git a/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php
index 727063ecc..4e4386fb1 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php
@@ -735,6 +735,10 @@ class ForeachAnalyzer
                         $statements_analyzer->addSuppressedIssues(['PossiblyInvalidMethodCall']);
                     }
 
+                    if (!in_array('PossiblyUndefinedMethod', $suppressed_issues, true)) {
+                        $statements_analyzer->addSuppressedIssues(['PossiblyUndefinedMethod']);
+                    }
+
                     \Psalm\Internal\Analyzer\Statements\Expression\Call\MethodCallAnalyzer::analyze(
                         $statements_analyzer,
                         $fake_method_call,
@@ -745,6 +749,10 @@ class ForeachAnalyzer
                         $statements_analyzer->removeSuppressedIssues(['PossiblyInvalidMethodCall']);
                     }
 
+                    if (!in_array('PossiblyUndefinedMethod', $suppressed_issues, true)) {
+                        $statements_analyzer->removeSuppressedIssues(['PossiblyUndefinedMethod']);
+                    }
+
                     $iterator_class_type = $statements_analyzer->node_data->getType($fake_method_call) ?: null;
 
                     $statements_analyzer->node_data = $old_data_provider;
diff --git a/tests/GeneratorTest.php b/tests/GeneratorTest.php
index d49c96b64..d5967f405 100644
--- a/tests/GeneratorTest.php
+++ b/tests/GeneratorTest.php
@@ -223,6 +223,14 @@ class GeneratorTest extends TestCase
                         return 5;
                     }'
             ],
+            'iteratorUnion' => [
+                '<?php
+                    /** @return Iterator|IteratorAggregate */
+                    function getIteratorOrAggregate() {
+                        yield 2;
+                    }
+                    echo json_encode(iterator_to_array(getIteratorOrAggregate()));'
+            ],
         ];
     }
 
