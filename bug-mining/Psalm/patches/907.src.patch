diff --git a/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayPopReturnTypeProvider.php b/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayPopReturnTypeProvider.php
index 9358bf551..b785e05b9 100644
--- a/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayPopReturnTypeProvider.php
+++ b/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayPopReturnTypeProvider.php
@@ -33,6 +33,7 @@ class ArrayPopReturnTypeProvider implements \Psalm\Plugin\Hook\FunctionReturnTyp
         $first_arg_array = $first_arg
             && ($first_arg_type = $statements_source->node_data->getType($first_arg))
             && $first_arg_type->hasType('array')
+            && !$first_arg_type->hasMixed()
             && ($array_atomic_type = $first_arg_type->getAtomicTypes()['array'])
             && ($array_atomic_type instanceof Type\Atomic\TArray
                 || $array_atomic_type instanceof Type\Atomic\TKeyedArray
diff --git a/tests/ArrayFunctionCallTest.php b/tests/ArrayFunctionCallTest.php
index 339c37905..7560f6400 100644
--- a/tests/ArrayFunctionCallTest.php
+++ b/tests/ArrayFunctionCallTest.php
@@ -1847,6 +1847,17 @@ class ArrayFunctionCallTest extends TestCase
                     $list = array_filter($list);
                     if (!empty($list)) {}'
             ],
+            'arrayShiftOnMixedOrEmptyArray' => [
+                '<?php
+                    /**
+                     * @param mixed|array<empty, empty> $lengths
+                     */
+                    function doStuff($lengths): void {
+                        /** @psalm-suppress MixedArgument, MixedAssignment */
+                        $length = array_shift($lengths);
+                        if ($length !== null) {}
+                    }'
+            ],
         ];
     }
 
