diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/AssertionFinder.php b/src/Psalm/Internal/Analyzer/Statements/Expression/AssertionFinder.php
index d17d5c3dc..0c32886ba 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/AssertionFinder.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/AssertionFinder.php
@@ -3733,12 +3733,25 @@ class AssertionFinder
                     || $atomic_type instanceof Type\Atomic\TKeyedArray
                 ) {
                     if ($atomic_type instanceof Type\Atomic\TKeyedArray) {
+                        $key_possibly_undefined = false;
+
+                        foreach ($atomic_type->properties as $property_type) {
+                            if ($property_type->possibly_undefined) {
+                                $key_possibly_undefined = true;
+                                break;
+                            }
+                        }
+
                         $key_type = $atomic_type->getGenericKeyType();
+
+                        if ($key_possibly_undefined) {
+                            $key_type->possibly_undefined = true;
+                        }
                     } else {
                         $key_type = $atomic_type->type_params[0];
                     }
 
-                    if ($key_type->allStringLiterals()) {
+                    if ($key_type->allStringLiterals() && !$key_type->possibly_undefined) {
                         foreach ($key_type->getLiteralStrings() as $array_literal_type) {
                             $literal_assertions[] = '=' . $array_literal_type->getId();
                         }
diff --git a/tests/TypeReconciliation/ArrayKeyExistsTest.php b/tests/TypeReconciliation/ArrayKeyExistsTest.php
index 7bbc8efbb..0268ea081 100644
--- a/tests/TypeReconciliation/ArrayKeyExistsTest.php
+++ b/tests/TypeReconciliation/ArrayKeyExistsTest.php
@@ -299,6 +299,19 @@ class ArrayKeyExistsTest extends \Psalm\Tests\TestCase
                     'MixedArgument',
                 ],
             ],
+            'arrayKeyExistsTwoVars' => [
+                '<?php
+                    /**
+                     * @param array{a: string, b: string, c?: string} $info
+                     */
+                    function getReason(array $info, string $key, string $value): bool {
+                        if (array_key_exists($key, $info) && $info[$key] === $value) {
+                            return true;
+                        }
+
+                        return false;
+                    }'
+            ],
         ];
     }
 
