diff --git a/scoper.inc.php b/scoper.inc.php
index f28d63437..babadda96 100644
--- a/scoper.inc.php
+++ b/scoper.inc.php
@@ -25,22 +25,11 @@ return [
                 $contents
             );
         },
-        function ($filePath, $prefix, $contents) {
-            if ($filePath === 'src/Psalm/Config.php') {
-                return str_replace(
-                    [$prefix . '\Composer\Autoload\ClassLoader', '\'Psalm\\\\Issue\\\\\''],
-                    ['Composer\Autoload\ClassLoader', '\'' . $prefix . '\\\\Psalm\\\\Issue\\\\\''],
-                    $contents
-                );
-            }
-
-            return $contents;
-        },
         function ($filePath, $prefix, $contents) {
             if (strpos($filePath, 'src/Psalm') === 0) {
                 return str_replace(
-                    [' \\Psalm\\', ' \\PhpParser\\'],
-                    [' \\' . $prefix . '\\Psalm\\', ' \\' . $prefix . '\\PhpParser\\'],
+                    [' \\Psalm\\Internal\\', ' \\PhpParser\\'],
+                    [' \\' . $prefix . '\\Psalm\\Internal\\', ' \\' . $prefix . '\\PhpParser\\'],
                     $contents
                 );
             }
@@ -69,28 +58,6 @@ return [
 
             return $contents;
         },
-        function ($filePath, $prefix, $contents) {
-            if ($filePath === 'src/Psalm/Internal/Analyzer/Statements/Expression/Call/MethodCallAnalyzer.php') {
-                return str_replace(
-                    'case \'Psalm\\\\',
-                    'case \'' . $prefix . '\\\\Psalm\\\\',
-                    $contents
-                );
-            }
-
-            return $contents;
-        },
-        function ($filePath, $prefix, $contents) {
-            if ($filePath === 'src/Psalm/Type.php') {
-                return str_replace(
-                    'get_class($type) === \'Psalm\\\\',
-                    'get_class($type) === \'' . $prefix . '\\\\Psalm\\\\',
-                    $contents
-                );
-            }
-
-            return $contents;
-        },
         function ($filePath, $prefix, $contents) {
             if ($filePath === 'src/psalm.php') {
                 return str_replace(
@@ -103,9 +70,9 @@ return [
             return $contents;
         },
         function ($filePath, $prefix, $contents) {
-            $ret = str_replace(
-                $prefix . '\Psalm\Plugin\\',
-                'Psalm\Plugin\\',
+            $ret = preg_replace(
+                '/' . $prefix . '\\\\Psalm\\\\(?=!Internal)/',
+                'Psalm\\',
                 $contents
             );
             return $ret;
@@ -113,7 +80,7 @@ return [
     ],
     'whitelist' => [
         \Composer\Autoload\ClassLoader::class,
-        'Psalm\Plugin\*',
+        'Psalm\\*',
     ],
     'files-whitelist' => [
         'src/Psalm/Internal/PropertyMap.php',
