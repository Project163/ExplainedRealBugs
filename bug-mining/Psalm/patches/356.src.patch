diff --git a/src/Psalm/Internal/Stubs/CoreGenericFunctions.php b/src/Psalm/Internal/Stubs/CoreGenericFunctions.php
index d707277df..6586a4741 100644
--- a/src/Psalm/Internal/Stubs/CoreGenericFunctions.php
+++ b/src/Psalm/Internal/Stubs/CoreGenericFunctions.php
@@ -166,6 +166,19 @@ function usort(array &$arr, callable $callback): bool
 {
 }
 
+/**
+ * @template TKey
+ * @template T
+ *
+ * @param array<TKey,T> $arr
+ * @param callable(T,T):int $callback
+ * @param-out array<TKey,T> $arr
+ * @psalm-pure
+ */
+function uasort(array &$arr, callable $callback): bool
+{
+}
+
 /**
  * @psalm-template T
  *
diff --git a/tests/FunctionCallTest.php b/tests/FunctionCallTest.php
index 4a22b8069..f3f13ed82 100644
--- a/tests/FunctionCallTest.php
+++ b/tests/FunctionCallTest.php
@@ -550,18 +550,15 @@ class FunctionCallTest extends TestCase
             ],
             'uasort' => [
                 '<?php
+                    $manifest = ["a" => 1, "b" => 2];
                     uasort(
-                      $manifest,
-                      function ($a, $b) {
-                        return strcmp($a["parent"],$b["parent"]);
-                      }
+                        $manifest,
+                        function (int $a, int $b) {
+                            return $a > $b ? 1 : -1;
+                        }
                     );',
-                'assertions' => [],
-                'error_levels' => [
-                    'MixedArrayAccess',
-                    'MixedArgument',
-                    'MissingClosureParamType',
-                    'MissingClosureReturnType',
+                'assertions' => [
+                    '$manifest' => 'array<string, int>'
                 ],
             ],
             'byRefAfterCallable' => [
