diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/AssertionFinder.php b/src/Psalm/Internal/Analyzer/Statements/Expression/AssertionFinder.php
index 67190cd5e..a8a426afe 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/AssertionFinder.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/AssertionFinder.php
@@ -2248,6 +2248,24 @@ class AssertionFinder
 
         if ($if_true_assertions) {
             foreach ($if_true_assertions as $assertion) {
+                $assertion = clone $assertion;
+
+                foreach ($assertion->rule as $i => $and_rules) {
+                    foreach ($and_rules as $j => $rule) {
+                        if (strpos($rule, 'scalar-class-constant(') === 0) {
+                            $codebase = $source->getCodebase();
+
+                            $assertion->rule[$i][$j] = \Psalm\Internal\Type\TypeExpander::expandUnion(
+                                $codebase,
+                                Type::parseString(substr($rule, 22, -1)),
+                                null,
+                                null,
+                                null
+                            )->getId();
+                        }
+                    }
+                }
+
                 if (is_int($assertion->var_id) && isset($expr->args[$assertion->var_id])) {
                     if ($assertion->var_id === 0) {
                         $var_name = $first_var_name;
@@ -2296,6 +2314,24 @@ class AssertionFinder
             $negated_prefix = !$negate ? '!' : '';
 
             foreach ($if_false_assertions as $assertion) {
+                $assertion = clone $assertion;
+
+                foreach ($assertion->rule as $i => $and_rules) {
+                    foreach ($and_rules as $j => $rule) {
+                        if (strpos($rule, 'scalar-class-constant(') === 0) {
+                            $codebase = $source->getCodebase();
+
+                            $assertion->rule[$i][$j] = \Psalm\Internal\Type\TypeExpander::expandUnion(
+                                $codebase,
+                                Type::parseString(substr($rule, 22, -1)),
+                                null,
+                                null,
+                                null
+                            )->getId();
+                        }
+                    }
+                }
+
                 if (is_int($assertion->var_id) && isset($expr->args[$assertion->var_id])) {
                     if ($assertion->var_id === 0) {
                         $var_name = $first_var_name;
diff --git a/src/Psalm/Internal/PhpVisitor/ReflectorVisitor.php b/src/Psalm/Internal/PhpVisitor/ReflectorVisitor.php
index f4de388a3..e78d66c48 100644
--- a/src/Psalm/Internal/PhpVisitor/ReflectorVisitor.php
+++ b/src/Psalm/Internal/PhpVisitor/ReflectorVisitor.php
@@ -2422,7 +2422,8 @@ class ReflectorVisitor extends PhpParser\NodeVisitorAbstract implements PhpParse
                 $assertion_type_parts = $this->getAssertionParts(
                     $storage,
                     $assertion['type'],
-                    $stmt
+                    $stmt,
+                    $class_storage && !$class_storage->is_trait ? $class_storage->name : null
                 );
 
                 if (!$assertion_type_parts) {
@@ -2453,7 +2454,8 @@ class ReflectorVisitor extends PhpParser\NodeVisitorAbstract implements PhpParse
                 $assertion_type_parts = $this->getAssertionParts(
                     $storage,
                     $assertion['type'],
-                    $stmt
+                    $stmt,
+                    $class_storage && !$class_storage->is_trait ? $class_storage->name : null
                 );
 
                 if (!$assertion_type_parts) {
@@ -2484,7 +2486,8 @@ class ReflectorVisitor extends PhpParser\NodeVisitorAbstract implements PhpParse
                 $assertion_type_parts = $this->getAssertionParts(
                     $storage,
                     $assertion['type'],
-                    $stmt
+                    $stmt,
+                    $class_storage && !$class_storage->is_trait ? $class_storage->name : null
                 );
 
                 if (!$assertion_type_parts) {
@@ -2971,7 +2974,8 @@ class ReflectorVisitor extends PhpParser\NodeVisitorAbstract implements PhpParse
     private function getAssertionParts(
         FunctionLikeStorage $storage,
         string $assertion_type,
-        PhpParser\Node\FunctionLike $stmt
+        PhpParser\Node\FunctionLike $stmt,
+        ?string $self_fqcln
     ) : ?array {
         $prefix = '';
 
@@ -3001,7 +3005,7 @@ class ReflectorVisitor extends PhpParser\NodeVisitorAbstract implements PhpParse
                     $this->aliases,
                     $this->function_template_types + $class_template_types,
                     $this->type_aliases,
-                    null,
+                    $self_fqcln,
                     null,
                     true
                 )
diff --git a/tests/AssertAnnotationTest.php b/tests/AssertAnnotationTest.php
index 85a61a2b1..82f6958d7 100644
--- a/tests/AssertAnnotationTest.php
+++ b/tests/AssertAnnotationTest.php
@@ -1238,6 +1238,32 @@ class AssertAnnotationTest extends TestCase
                         return substr($a, 0, 1) . substr($b, 0, 1);
                     }'
             ],
+            'convertConstStringType' => [
+                '<?php
+                    class A {
+                        const T1  = 1;
+                        const T2 = 2;
+
+                        /**
+                         * @param self::T* $t
+                         */
+                        public static function bar(int $t):void {}
+
+                        /**
+                         * @psalm-assert-if-true self::T* $t
+                         */
+                        public static function isValid(int $t): bool {
+                            return in_array($t, [self::T1, self::T2], true);
+                        }
+                    }
+
+
+                    function takesA(int $a) : void {
+                        if (A::isValid($a)) {
+                            A::bar($a);
+                        }
+                    }'
+            ],
         ];
     }
 
