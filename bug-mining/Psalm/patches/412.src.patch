diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php
index 3fa0bc84d..6fcb4e852 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php
@@ -210,6 +210,8 @@ class CallAnalyzer
                     }
                 }
 
+                $old_calling_function_id = $context->calling_function_id;
+
                 if ($fq_class_name === $source->getFQCLN()) {
                     $class_analyzer->getMethodMutations(strtolower($method_name), $context);
                 } else {
@@ -226,6 +228,8 @@ class CallAnalyzer
                     $context->self = $old_self;
                 }
 
+                $context->calling_function_id = $old_calling_function_id;
+
                 foreach ($local_vars_in_scope as $var => $type) {
                     $context->vars_in_scope[$var] = $type;
                 }
diff --git a/tests/ImmutableAnnotationTest.php b/tests/ImmutableAnnotationTest.php
index 85cbed5a0..eb7423170 100644
--- a/tests/ImmutableAnnotationTest.php
+++ b/tests/ImmutableAnnotationTest.php
@@ -278,6 +278,25 @@ class ImmutableAnnotationTest extends TestCase
                         takesString($dto->getError());
                     }'
             ],
+            'allowConstructorPrivateUnusedMethods' => [
+                '<?php
+                    /**
+                     * @psalm-immutable
+                     */
+                    class PaymentShared
+                    {
+                        /** @var int */
+                        private $commission;
+
+                        public function __construct()
+                        {
+                            $this->test();
+                            $this->commission = 1;
+                        }
+
+                        private function test(): void {}
+                    }'
+            ],
         ];
     }
 
