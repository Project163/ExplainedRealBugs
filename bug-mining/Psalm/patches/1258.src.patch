diff --git a/psalm-baseline.xml b/psalm-baseline.xml
index 69c518581..702c0718b 100644
--- a/psalm-baseline.xml
+++ b/psalm-baseline.xml
@@ -446,9 +446,6 @@
   </file>
   <file src="src/Psalm/Type/Atomic.php">
     <ImpureMethodCall>
-      <code>classExtendsOrImplements</code>
-      <code>classExtendsOrImplements</code>
-      <code>classExtendsOrImplements</code>
       <code>classOrInterfaceExists</code>
       <code>classOrInterfaceExists</code>
       <code>classOrInterfaceExists</code>
diff --git a/src/Psalm/Codebase.php b/src/Psalm/Codebase.php
index 56a9aab5d..c56145a17 100644
--- a/src/Psalm/Codebase.php
+++ b/src/Psalm/Codebase.php
@@ -699,6 +699,7 @@ final class Codebase
         );
     }
 
+    /** @psalm-mutation-free */
     public function classExtendsOrImplements(string $fq_class_name, string $possible_parent): bool
     {
         return $this->classlikes->classExtends($fq_class_name, $possible_parent)
diff --git a/src/Psalm/Config.php b/src/Psalm/Config.php
index e84a134f3..32ff16ea8 100644
--- a/src/Psalm/Config.php
+++ b/src/Psalm/Config.php
@@ -42,7 +42,6 @@ use Psalm\Progress\Progress;
 use Psalm\Progress\VoidProgress;
 use RuntimeException;
 use SimpleXMLElement;
-use SimpleXMLIterator;
 use Symfony\Component\Filesystem\Path;
 use Throwable;
 use UnexpectedValueException;
@@ -728,8 +727,6 @@ class Config
         $this->eventDispatcher = new EventDispatcher();
         $this->universal_object_crates = [
             strtolower(stdClass::class),
-            strtolower(SimpleXMLElement::class),
-            strtolower(SimpleXMLIterator::class),
         ];
     }
 
@@ -1030,7 +1027,6 @@ class Config
 
     /**
      * @param non-empty-string $file_contents
-     * @psalm-suppress MixedMethodCall
      * @psalm-suppress MixedAssignment
      * @psalm-suppress MixedArgument
      * @psalm-suppress MixedPropertyFetch
@@ -1161,12 +1157,13 @@ class Config
         }
 
         if (isset($config_xml['autoloader'])) {
-            $autoloader_path = $config->base_dir . DIRECTORY_SEPARATOR . $config_xml['autoloader'];
+            $autoloader = (string) $config_xml['autoloader'];
+            $autoloader_path = $config->base_dir . DIRECTORY_SEPARATOR . $autoloader;
 
             if (!file_exists($autoloader_path)) {
                 // in here for legacy reasons where people put absolute paths but psalm resolved it relative
-                if ($config_xml['autoloader']->__toString()[0] === '/') {
-                    $autoloader_path = $config_xml['autoloader']->__toString();
+                if ($autoloader[0] === '/') {
+                    $autoloader_path = $autoloader;
                 }
 
                 if (!file_exists($autoloader_path)) {
@@ -1312,7 +1309,7 @@ class Config
             );
         }
 
-        if (isset($config_xml->fileExtensions)) {
+        if (isset($config_xml->fileExtensions->extension)) {
             $config->file_extensions = [];
 
             $config->loadFileExtensions($config_xml->fileExtensions->extension);
@@ -1336,7 +1333,6 @@ class Config
 
         if (isset($config_xml->ignoreExceptions)) {
             if (isset($config_xml->ignoreExceptions->class)) {
-                /** @var SimpleXMLElement $exception_class */
                 foreach ($config_xml->ignoreExceptions->class as $exception_class) {
                     $exception_name = (string) $exception_class['name'];
                     $global_attribute_text = (string) $exception_class['onlyGlobalScope'];
@@ -1347,7 +1343,6 @@ class Config
                 }
             }
             if (isset($config_xml->ignoreExceptions->classAndDescendants)) {
-                /** @var SimpleXMLElement $exception_class */
                 foreach ($config_xml->ignoreExceptions->classAndDescendants as $exception_class) {
                     $exception_name = (string) $exception_class['name'];
                     $global_attribute_text = (string) $exception_class['onlyGlobalScope'];
@@ -1401,7 +1396,6 @@ class Config
         // this plugin loading system borrows heavily from etsy/phan
         if (isset($config_xml->plugins)) {
             if (isset($config_xml->plugins->plugin)) {
-                /** @var SimpleXMLElement $plugin */
                 foreach ($config_xml->plugins->plugin as $plugin) {
                     $plugin_file_name = (string) $plugin['filename'];
 
@@ -1413,7 +1407,6 @@ class Config
                 }
             }
             if (isset($config_xml->plugins->pluginClass)) {
-                /** @var SimpleXMLElement $plugin */
                 foreach ($config_xml->plugins->pluginClass as $plugin) {
                     $plugin_class_name = $plugin['class'];
                     // any child elements are used as plugin configuration
@@ -1429,21 +1422,23 @@ class Config
 
         if (isset($config_xml->issueHandlers)) {
             foreach ($config_xml->issueHandlers as $issue_handlers) {
-                /** @var SimpleXMLElement $issue_handler */
-                foreach ($issue_handlers->children() as $key => $issue_handler) {
-                    if ($key === 'PluginIssue') {
-                        $custom_class_name = (string) $issue_handler['name'];
-                        /** @var string $key */
-                        $config->issue_handlers[$custom_class_name] = IssueHandler::loadFromXMLElement(
-                            $issue_handler,
-                            $base_dir,
-                        );
-                    } else {
-                        /** @var string $key */
-                        $config->issue_handlers[$key] = IssueHandler::loadFromXMLElement(
-                            $issue_handler,
-                            $base_dir,
-                        );
+                $issue_handler_children = $issue_handlers->children();
+                if ($issue_handler_children) {
+                    foreach ($issue_handler_children as $key => $issue_handler) {
+                        if ($key === 'PluginIssue') {
+                            $custom_class_name = (string)$issue_handler['name'];
+                            /** @var string $key */
+                            $config->issue_handlers[$custom_class_name] = IssueHandler::loadFromXMLElement(
+                                $issue_handler,
+                                $base_dir,
+                            );
+                        } else {
+                            /** @var string $key */
+                            $config->issue_handlers[$key] = IssueHandler::loadFromXMLElement(
+                                $issue_handler,
+                                $base_dir,
+                            );
+                        }
                     }
                 }
             }
diff --git a/src/Psalm/Config/FileFilter.php b/src/Psalm/Config/FileFilter.php
index 6e51d0887..8ca440947 100644
--- a/src/Psalm/Config/FileFilter.php
+++ b/src/Psalm/Config/FileFilter.php
@@ -389,7 +389,6 @@ class FileFilter
 
         if ($e->directory) {
             $config['directory'] = [];
-            /** @var SimpleXMLElement $directory */
             foreach ($e->directory as $directory) {
                 $config['directory'][] = [
                     'name' => (string) $directory['name'],
@@ -402,7 +401,6 @@ class FileFilter
 
         if ($e->file) {
             $config['file'] = [];
-            /** @var SimpleXMLElement $file */
             foreach ($e->file as $file) {
                 $config['file'][]['name'] = (string) $file['name'];
             }
@@ -410,7 +408,6 @@ class FileFilter
 
         if ($e->referencedClass) {
             $config['referencedClass'] = [];
-            /** @var SimpleXMLElement $referenced_class */
             foreach ($e->referencedClass as $referenced_class) {
                 $config['referencedClass'][]['name'] = strtolower((string)$referenced_class['name']);
             }
@@ -418,7 +415,6 @@ class FileFilter
 
         if ($e->referencedMethod) {
             $config['referencedMethod'] = [];
-            /** @var SimpleXMLElement $referenced_method */
             foreach ($e->referencedMethod as $referenced_method) {
                 $config['referencedMethod'][]['name'] = (string)$referenced_method['name'];
             }
@@ -426,7 +422,6 @@ class FileFilter
 
         if ($e->referencedFunction) {
             $config['referencedFunction'] = [];
-            /** @var SimpleXMLElement $referenced_function */
             foreach ($e->referencedFunction as $referenced_function) {
                 $config['referencedFunction'][]['name'] = strtolower((string)$referenced_function['name']);
             }
@@ -434,7 +429,6 @@ class FileFilter
 
         if ($e->referencedProperty) {
             $config['referencedProperty'] = [];
-            /** @var SimpleXMLElement $referenced_property */
             foreach ($e->referencedProperty as $referenced_property) {
                 $config['referencedProperty'][]['name'] = strtolower((string)$referenced_property['name']);
             }
@@ -442,7 +436,6 @@ class FileFilter
 
         if ($e->referencedConstant) {
             $config['referencedConstant'] = [];
-            /** @var SimpleXMLElement $referenced_constant */
             foreach ($e->referencedConstant as $referenced_constant) {
                 $config['referencedConstant'][]['name'] = strtolower((string)$referenced_constant['name']);
             }
@@ -450,8 +443,6 @@ class FileFilter
 
         if ($e->referencedVariable) {
             $config['referencedVariable'] = [];
-
-            /** @var SimpleXMLElement $referenced_variable */
             foreach ($e->referencedVariable as $referenced_variable) {
                 $config['referencedVariable'][]['name'] = strtolower((string)$referenced_variable['name']);
             }
diff --git a/src/Psalm/Config/IssueHandler.php b/src/Psalm/Config/IssueHandler.php
index 258b16d9b..48791659e 100644
--- a/src/Psalm/Config/IssueHandler.php
+++ b/src/Psalm/Config/IssueHandler.php
@@ -38,9 +38,10 @@ final class IssueHandler
             }
         }
 
-        /** @var SimpleXMLElement $error_level */
-        foreach ($e->errorLevel as $error_level) {
-            $handler->custom_levels[] = ErrorLevelFileFilter::loadFromXMLElement($error_level, $base_dir, true);
+        if (isset($e->errorLevel)) {
+            foreach ($e->errorLevel as $error_level) {
+                $handler->custom_levels[] = ErrorLevelFileFilter::loadFromXMLElement($error_level, $base_dir, true);
+            }
         }
 
         return $handler;
diff --git a/src/Psalm/Config/ProjectFileFilter.php b/src/Psalm/Config/ProjectFileFilter.php
index 8513f98ff..0395e227a 100644
--- a/src/Psalm/Config/ProjectFileFilter.php
+++ b/src/Psalm/Config/ProjectFileFilter.php
@@ -28,7 +28,6 @@ final class ProjectFileFilter extends FileFilter
                 throw new ConfigException('Cannot nest ignoreFiles inside itself');
             }
 
-            /** @var SimpleXMLElement $e->ignoreFiles */
             $filter->file_filter = static::loadFromXMLElement($e->ignoreFiles, $base_dir, false);
         }
 
diff --git a/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php
index bb55c91f7..905dc3d8a 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php
@@ -755,20 +755,6 @@ class ForeachAnalyzer
 
             $has_valid_iterator = true;
 
-            if ($iterator_atomic_type instanceof TNamedObject
-                && strtolower($iterator_atomic_type->value) === 'simplexmlelement'
-            ) {
-                $value_type = Type::combineUnionTypes(
-                    $value_type,
-                    new Union([$iterator_atomic_type]),
-                );
-
-                $key_type = Type::combineUnionTypes(
-                    $key_type,
-                    Type::getString(),
-                );
-            }
-
             if ($iterator_atomic_type instanceof TIterable
                 || (strtolower($iterator_atomic_type->value) === 'traversable'
                     || $codebase->classImplements(
diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/Fetch/ArrayFetchAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/Fetch/ArrayFetchAnalyzer.php
index 2567ca86a..5e30eb502 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/Fetch/ArrayFetchAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/Fetch/ArrayFetchAnalyzer.php
@@ -1737,8 +1737,10 @@ class ArrayFetchAnalyzer
         ?Union &$array_access_type,
         bool &$has_array_access
     ): void {
-        if (strtolower($type->value) === 'simplexmlelement') {
-            $call_array_access_type = new Union([new TNamedObject('SimpleXMLElement')]);
+        if (strtolower($type->value) === 'simplexmlelement'
+            || $statements_analyzer->getCodebase()->classExtendsOrImplements($type->value, 'SimpleXMLElement')
+        ) {
+            $call_array_access_type = new Union([new TNull(), new TNamedObject('SimpleXMLElement')]);
         } elseif (strtolower($type->value) === 'domnodelist' && $stmt->dim) {
             $old_data_provider = $statements_analyzer->node_data;
 
diff --git a/src/Psalm/Internal/Codebase/ClassLikes.php b/src/Psalm/Internal/Codebase/ClassLikes.php
index 15953d987..a7045a43a 100644
--- a/src/Psalm/Internal/Codebase/ClassLikes.php
+++ b/src/Psalm/Internal/Codebase/ClassLikes.php
@@ -597,6 +597,7 @@ class ClassLikes
     /**
      * Determine whether or not a class extends a parent
      *
+     * @psalm-mutation-free
      * @throws UnpopulatedClasslikeException when called on unpopulated class
      * @throws InvalidArgumentException when class does not exist
      */
@@ -620,6 +621,8 @@ class ClassLikes
 
     /**
      * Check whether a class implements an interface
+     *
+     * @psalm-mutation-free
      */
     public function classImplements(string $fq_class_name, string $interface): bool
     {
diff --git a/src/Psalm/Internal/Provider/MethodReturnTypeProvider.php b/src/Psalm/Internal/Provider/MethodReturnTypeProvider.php
index cd06f4a8a..bba8d8672 100644
--- a/src/Psalm/Internal/Provider/MethodReturnTypeProvider.php
+++ b/src/Psalm/Internal/Provider/MethodReturnTypeProvider.php
@@ -11,7 +11,6 @@ use Psalm\Internal\Provider\ReturnTypeProvider\DateTimeModifyReturnTypeProvider;
 use Psalm\Internal\Provider\ReturnTypeProvider\DomNodeAppendChild;
 use Psalm\Internal\Provider\ReturnTypeProvider\ImagickPixelColorReturnTypeProvider;
 use Psalm\Internal\Provider\ReturnTypeProvider\PdoStatementReturnTypeProvider;
-use Psalm\Internal\Provider\ReturnTypeProvider\SimpleXmlElementAsXml;
 use Psalm\Plugin\EventHandler\Event\MethodReturnTypeProviderEvent;
 use Psalm\Plugin\EventHandler\MethodReturnTypeProviderInterface;
 use Psalm\StatementsSource;
@@ -39,7 +38,6 @@ class MethodReturnTypeProvider
 
         $this->registerClass(DomNodeAppendChild::class);
         $this->registerClass(ImagickPixelColorReturnTypeProvider::class);
-        $this->registerClass(SimpleXmlElementAsXml::class);
         $this->registerClass(PdoStatementReturnTypeProvider::class);
         $this->registerClass(ClosureFromCallableReturnTypeProvider::class);
         $this->registerClass(DateTimeModifyReturnTypeProvider::class);
diff --git a/src/Psalm/Internal/Provider/ReturnTypeProvider/SimpleXmlElementAsXml.php b/src/Psalm/Internal/Provider/ReturnTypeProvider/SimpleXmlElementAsXml.php
deleted file mode 100644
index 612ebdb84..000000000
--- a/src/Psalm/Internal/Provider/ReturnTypeProvider/SimpleXmlElementAsXml.php
+++ /dev/null
@@ -1,34 +0,0 @@
-<?php
-
-namespace Psalm\Internal\Provider\ReturnTypeProvider;
-
-use Psalm\Plugin\EventHandler\Event\MethodReturnTypeProviderEvent;
-use Psalm\Plugin\EventHandler\MethodReturnTypeProviderInterface;
-use Psalm\Type;
-use Psalm\Type\Union;
-
-use function count;
-
-/**
- * @internal
- */
-class SimpleXmlElementAsXml implements MethodReturnTypeProviderInterface
-{
-    public static function getClassLikeNames(): array
-    {
-        return ['SimpleXMLElement'];
-    }
-
-    public static function getMethodReturnType(MethodReturnTypeProviderEvent $event): ?Union
-    {
-        $call_args = $event->getCallArgs();
-        $method_name_lowercase = $event->getMethodNameLowercase();
-        if ($method_name_lowercase === 'asxml'
-            && !count($call_args)
-        ) {
-            return Type::parseString('string|false');
-        }
-
-        return null;
-    }
-}
diff --git a/src/Psalm/Type/Atomic.php b/src/Psalm/Type/Atomic.php
index 5eacc03f5..d54d1a6e3 100644
--- a/src/Psalm/Type/Atomic.php
+++ b/src/Psalm/Type/Atomic.php
@@ -323,7 +323,7 @@ abstract class Atomic implements TypeNode
                 return $analysis_php_version_id !== null ? new TNamedObject($value) : new TScalar();
 
             case 'null':
-                if ($analysis_php_version_id === null || $analysis_php_version_id >= 8_00_00) {
+                if ($analysis_php_version_id === null || $analysis_php_version_id >= 7_00_00) {
                     return new TNull();
                 }
 
diff --git a/stubs/extensions/simplexml.phpstub b/stubs/extensions/simplexml.phpstub
index 5c2fb2f57..7f0bfa214 100644
--- a/stubs/extensions/simplexml.phpstub
+++ b/stubs/extensions/simplexml.phpstub
@@ -25,6 +25,7 @@ function simplexml_import_dom(SimpleXMLElement|DOMNode $node, ?string $class_nam
 
 /**
  * @implements Traversable<string, SimpleXMLElement>
+ * @psalm-no-seal-properties
  */
 class SimpleXMLElement implements Traversable, Countable
 {
@@ -63,6 +64,8 @@ class SimpleXMLElement implements Traversable, Countable
     public function __toString(): string {}
 
     public function count(): int {}
+
+    public function __get(string $name): SimpleXMLElement|SimpleXMLIterator|null {}
 }
 
 /**
diff --git a/tests/ArrayAccessTest.php b/tests/ArrayAccessTest.php
index 01da42eb9..d216ca739 100644
--- a/tests/ArrayAccessTest.php
+++ b/tests/ArrayAccessTest.php
@@ -1013,7 +1013,7 @@ class ArrayAccessTest extends TestCase
             ],
             'simpleXmlArrayFetch' => [
                 'code' => '<?php
-                    function foo(SimpleXMLElement $s) : SimpleXMLElement {
+                    function foo(SimpleXMLElement $s) : ?SimpleXMLElement {
                         return $s["a"];
                     }',
             ],
diff --git a/tests/PropertyTypeTest.php b/tests/PropertyTypeTest.php
index 5d75810bd..0fbd78699 100644
--- a/tests/PropertyTypeTest.php
+++ b/tests/PropertyTypeTest.php
@@ -1375,18 +1375,23 @@ class PropertyTypeTest extends TestCase
                     /** @psalm-suppress UndefinedPropertyFetch */
                     if ($a->bar === null && rand(0, 1)) {}',
             ],
-            'setPropertiesOfSpecialObjects' => [
+            'setPropertiesOfStdClass' => [
                 'code' => '<?php
                     $a = new stdClass();
-                    $a->b = "c";
-
-                    $d = new SimpleXMLElement("<person><child role=\"son\"></child></person>");
-                    $d->e = "f";',
+                    $a->b = "c";',
                 'assertions' => [
                     '$a' => 'stdClass',
                     '$a->b' => 'string',
-                    '$d' => 'SimpleXMLElement',
-                    '$d->e' => 'mixed',
+                ],
+            ],
+            'getPropertiesOfSimpleXmlElement' => [
+                'code' => '<?php
+                    $a = new SimpleXMLElement("<person><child role=\"son\"></child></person>");
+                    $b = $a->b;',
+                'assertions' => [
+                    '$a' => 'SimpleXMLElement',
+                    '$a->b' => 'SimpleXMLElement|null',
+                    '$b' => 'SimpleXMLElement|null',
                 ],
             ],
             'allowLessSpecificReturnTypeForOverriddenMethod' => [
@@ -3820,6 +3825,22 @@ class PropertyTypeTest extends TestCase
                 ',
                 'error_message' => 'UndefinedPropertyAssignment',
             ],
+            'setPropertiesOfSimpleXMLElement1' => [
+                'code' => '<?php
+                    $a = new SimpleXMLElement("<person><child role=\"son\"></child></person>");
+                    $a->b = "c";
+                ',
+                'error_message' => 'UndefinedPropertyAssignment',
+            ],
+            'setPropertiesOfSimpleXMLElement2' => [
+                'code' => '<?php
+                    $a = new SimpleXMLElement("<person><child role=\"son\"></child></person>");
+                    if (isset($a->b)) {
+                        $a->b = "c";
+                    }
+                ',
+                'error_message' => 'UndefinedPropertyAssignment',
+            ],
         ];
     }
 }
diff --git a/tests/TypeReconciliation/ConditionalTest.php b/tests/TypeReconciliation/ConditionalTest.php
index bee97444c..6b246d276 100644
--- a/tests/TypeReconciliation/ConditionalTest.php
+++ b/tests/TypeReconciliation/ConditionalTest.php
@@ -2817,7 +2817,6 @@ class ConditionalTest extends TestCase
                     $lilstring = "";
 
                     $n = new SimpleXMLElement($lilstring);
-                    /** @psalm-suppress MixedAssignment */
                     $n = $n->b;
 
                     if (!$n instanceof SimpleXMLElement) {
@@ -2905,7 +2904,11 @@ class ConditionalTest extends TestCase
                     $lilstring = "";
 
                     $n = new SimpleXMLElement($lilstring);
-                    $n = $n->children();
+                    $n = $n->b;
+
+                    if (!$n instanceof SimpleXMLIterator) {
+                        return;
+                    }
 
                     if (!$n) {
                         echo "false";
