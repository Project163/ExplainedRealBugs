diff --git a/src/Psalm/Internal/Type/TypeExpander.php b/src/Psalm/Internal/Type/TypeExpander.php
index 7873ebe21..f6b145d50 100644
--- a/src/Psalm/Internal/Type/TypeExpander.php
+++ b/src/Psalm/Internal/Type/TypeExpander.php
@@ -188,6 +188,10 @@ class TypeExpander
                 $return_type->fq_classlike_name = $self_class;
             }
 
+            if ($return_type->fq_classlike_name === 'static' && $self_class) {
+                $return_type->fq_classlike_name = is_string($static_class_type) ? $static_class_type : $self_class;
+            }
+
             if ($evaluate_class_constants && $codebase->classOrInterfaceOrEnumExists($return_type->fq_classlike_name)) {
                 if (strtolower($return_type->const_name) === 'class') {
                     return new Type\Atomic\TLiteralClassString($return_type->fq_classlike_name);
diff --git a/tests/ConstantTest.php b/tests/ConstantTest.php
index db9c75896..ab591669c 100644
--- a/tests/ConstantTest.php
+++ b/tests/ConstantTest.php
@@ -1033,7 +1033,19 @@ class ConstantTest extends TestCase
                     '$dir===' => 'non-empty-string',
                     '$file===' => 'non-empty-string',
                 ]
-            ]
+            ],
+            'noCrashWithStaticInDocblock' => [
+                '<?php
+                    class Test {
+                        const CONST1 = 1;
+
+                        public function test(): void
+                        {
+                            /** @var static::CONST1 */
+                            $a = static::CONST1;
+                        }
+                    }'
+            ],
         ];
     }
 
