diff --git a/src/Psalm/Internal/Analyzer/TypeAnalyzer.php b/src/Psalm/Internal/Analyzer/TypeAnalyzer.php
index 006171f32..c4277e8e7 100644
--- a/src/Psalm/Internal/Analyzer/TypeAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/TypeAnalyzer.php
@@ -1776,10 +1776,11 @@ class TypeAnalyzer
                 } elseif (!$input_type_part instanceof TIterable
                     && !$container_param->hasTemplate()
                     && !$input_param->hasTemplate()
-                    && !$input_param->hasLiteralValue()
-                    && !$input_param->hasEmptyArray()
                 ) {
-                    if ($input_param->had_template) {
+                    if ($input_param->had_template
+                        || $input_param->hasEmptyArray()
+                        || $input_param->hasLiteralValue()
+                    ) {
                         if (!$atomic_comparison_result->replacement_atomic_type) {
                             $atomic_comparison_result->replacement_atomic_type = clone $input_type_part;
                         }
diff --git a/tests/Template/ClassTemplateTest.php b/tests/Template/ClassTemplateTest.php
index 3b50f2ef5..8524218b3 100644
--- a/tests/Template/ClassTemplateTest.php
+++ b/tests/Template/ClassTemplateTest.php
@@ -2057,6 +2057,41 @@ class ClassTemplateTest extends TestCase
                     function expectsShape($_): void {}',
                 'error_message' => 'MixedArgumentTypeCoercion'
             ],
+            'coerceEmptyArrayToGeneral' => [
+                '<?php
+                    /** @template T */
+                    class Foo
+                    {
+                        /** @param \Closure(string):T $closure */
+                        public function __construct($closure) {}
+                    }
+
+                    class Bar
+                    {
+                      /** @var Foo<array> */
+                      private $FooArray;
+
+                      public function __construct()
+                      {
+                          $this->FooArray = new Foo(function(string $s): array {
+                              /** @psalm-suppress MixedAssignment */
+                              $json = \json_decode($s, true);
+
+                              if (! \is_array($json)) {
+                                  return [];
+                              }
+
+                              return $json;
+                          });
+
+                          takesEmpty($this->FooArray);
+                        }
+                    }
+
+                    /** @param Foo<array<empty, empty>> $_ */
+                    function takesEmpty($_): void {}',
+                'error_message' => 'MixedArgumentTypeCoercion'
+            ],
         ];
     }
 }
