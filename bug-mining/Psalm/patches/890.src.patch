diff --git a/src/Psalm/Internal/Analyzer/FunctionLike/ReturnTypeCollector.php b/src/Psalm/Internal/Analyzer/FunctionLike/ReturnTypeCollector.php
index 364409013..ee9aa4902 100644
--- a/src/Psalm/Internal/Analyzer/FunctionLike/ReturnTypeCollector.php
+++ b/src/Psalm/Internal/Analyzer/FunctionLike/ReturnTypeCollector.php
@@ -31,15 +31,12 @@ class ReturnTypeCollector
 
         foreach ($stmts as $stmt) {
             if ($stmt instanceof PhpParser\Node\Stmt\Return_) {
-                if ($stmt->expr instanceof PhpParser\Node\Expr\Yield_ ||
-                    $stmt->expr instanceof PhpParser\Node\Expr\YieldFrom) {
-                    $yield_types = array_merge($yield_types, self::getYieldTypeFromExpression($stmt->expr, $nodes));
-                }
-
                 if (!$stmt->expr) {
                     $return_types[] = Type::getVoid();
                 } elseif ($stmt_type = $nodes->getType($stmt)) {
                     $return_types[] = $stmt_type;
+
+                    $yield_types = array_merge($yield_types, self::getYieldTypeFromExpression($stmt->expr, $nodes));
                 } else {
                     $return_types[] = Type::getMixed();
                 }
@@ -54,36 +51,20 @@ class ReturnTypeCollector
                 break;
             }
 
-            if ($stmt instanceof PhpParser\Node\Stmt\Expression
-                && ($stmt->expr instanceof PhpParser\Node\Expr\Yield_
-                    || $stmt->expr instanceof PhpParser\Node\Expr\YieldFrom)
-            ) {
-                $yield_types = array_merge($yield_types, self::getYieldTypeFromExpression($stmt->expr, $nodes));
-            } elseif ($stmt instanceof PhpParser\Node\Expr\Yield_
-                || $stmt instanceof PhpParser\Node\Expr\YieldFrom
-            ) {
-                $yield_types = array_merge($yield_types, self::getYieldTypeFromExpression($stmt, $nodes));
-            } elseif ($stmt instanceof PhpParser\Node\Stmt\Expression
-                && $stmt->expr instanceof PhpParser\Node\Expr\Assign
-            ) {
-                $return_types = array_merge(
-                    $return_types,
-                    self::getReturnTypes(
-                        $codebase,
-                        $nodes,
-                        [$stmt->expr->expr],
-                        $yield_types
-                    )
-                );
-            } elseif ($stmt instanceof PhpParser\Node\Stmt\Expression
-                && ($stmt->expr instanceof PhpParser\Node\Expr\MethodCall
-                    || $stmt->expr instanceof PhpParser\Node\Expr\FuncCall
-                    || $stmt->expr instanceof PhpParser\Node\Expr\StaticCall
-                )
-            ) {
-                foreach ($stmt->expr->args as $arg) {
-                    $yield_types = array_merge($yield_types, self::getYieldTypeFromExpression($arg->value, $nodes));
+            if ($stmt instanceof PhpParser\Node\Stmt\Expression) {
+                if ($stmt->expr instanceof PhpParser\Node\Expr\Assign) {
+                    $return_types = array_merge(
+                        $return_types,
+                        self::getReturnTypes(
+                            $codebase,
+                            $nodes,
+                            [$stmt->expr->expr],
+                            $yield_types
+                        )
+                    );
                 }
+
+                $yield_types = array_merge($yield_types, self::getYieldTypeFromExpression($stmt->expr, $nodes));
             } elseif ($stmt instanceof PhpParser\Node\Stmt\If_) {
                 $return_types = array_merge(
                     $return_types,
@@ -316,6 +297,17 @@ class ReturnTypeCollector
             );
         } elseif ($stmt instanceof PhpParser\Node\Expr\Assign) {
             return self::getYieldTypeFromExpression($stmt->expr, $nodes);
+        } elseif ($stmt instanceof PhpParser\Node\Expr\MethodCall
+            || $stmt instanceof PhpParser\Node\Expr\FuncCall
+            || $stmt instanceof PhpParser\Node\Expr\StaticCall
+        ) {
+            $yield_types = [];
+
+            foreach ($stmt->args as $arg) {
+                $yield_types = array_merge($yield_types, self::getYieldTypeFromExpression($arg->value, $nodes));
+            }
+
+            return $yield_types;
         }
 
         return [];
diff --git a/tests/Template/ClassTemplateExtendsTest.php b/tests/Template/ClassTemplateExtendsTest.php
index 8c2ee1c8a..d4dd29090 100644
--- a/tests/Template/ClassTemplateExtendsTest.php
+++ b/tests/Template/ClassTemplateExtendsTest.php
@@ -4468,6 +4468,43 @@ class ClassTemplateExtendsTest extends TestCase
 
                     new BTestCase(new BMock());'
             ],
+            'yieldTemplated' => [
+                '<?php
+                    /**
+                     * @template-covariant TValue
+                     * @psalm-yield TValue
+                     */
+                    interface Promise {}
+
+                    /**
+                     * @template-covariant TValue
+                     * @template-implements Promise<TValue>
+                     */
+                    class Success implements Promise {
+                        /**
+                         * @psalm-param TValue $value
+                         */
+                        public function __construct($value) {}
+                    }
+
+                    /**
+                     * @psalm-return Generator<mixed, mixed, mixed, int>
+                     */
+                    function a(): Generator {
+                        return b(yield c());
+                    }
+
+                    function b(string $baz): int {
+                        return intval($baz);
+                    }
+
+                    /**
+                     * @psalm-return Promise<string>
+                     */
+                    function c(): Promise {
+                        return new Success("a");
+                    }'
+            ],
         ];
     }
 
