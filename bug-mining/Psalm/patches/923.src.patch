diff --git a/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php
index 8a4af61cf..b8a0449d0 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Block/ForeachAnalyzer.php
@@ -787,12 +787,18 @@ class ForeachAnalyzer
                         $statements_analyzer->addSuppressedIssues(['PossiblyUndefinedMethod']);
                     }
 
+                    $was_inside_call = $context->inside_call;
+
+                    $context->inside_call = true;
+
                     \Psalm\Internal\Analyzer\Statements\Expression\Call\MethodCallAnalyzer::analyze(
                         $statements_analyzer,
                         $fake_method_call,
                         $context
                     );
 
+                    $context->inside_call = $was_inside_call;
+
                     if (!in_array('PossiblyInvalidMethodCall', $suppressed_issues, true)) {
                         $statements_analyzer->removeSuppressedIssues(['PossiblyInvalidMethodCall']);
                     }
diff --git a/tests/UnusedVariableTest.php b/tests/UnusedVariableTest.php
index 02c4c3750..4266dbb2d 100644
--- a/tests/UnusedVariableTest.php
+++ b/tests/UnusedVariableTest.php
@@ -2203,6 +2203,27 @@ class UnusedVariableTest extends TestCase
                         return fn() => $e->getMessage();
                     }'
             ],
+            'useImmutableGetIteratorInForeach' => [
+                '<?php
+                    /**
+                     * @psalm-immutable
+                     */
+                    class A implements IteratorAggregate
+                    {
+                        /**
+                         * @return Iterator<int>
+                         */
+                        public function getIterator() {
+                            yield from [1, 2, 3];
+                        }
+                    }
+
+                    $a = new A();
+
+                    foreach ($a as $v) {
+                        echo $v;
+                    }'
+            ],
         ];
     }
 
