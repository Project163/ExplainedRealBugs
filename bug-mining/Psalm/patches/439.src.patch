diff --git a/src/Psalm/Internal/Codebase/ClassLikes.php b/src/Psalm/Internal/Codebase/ClassLikes.php
index c0cb23193..f0c45490a 100644
--- a/src/Psalm/Internal/Codebase/ClassLikes.php
+++ b/src/Psalm/Internal/Codebase/ClassLikes.php
@@ -1624,6 +1624,8 @@ class ClassLikes
                 return new Type\Atomic\TArray([Type::getEmpty(), Type::getEmpty()]);
             }
 
+            $is_list = true;
+
             foreach ($c->entries as $i => $entry) {
                 if ($entry->key) {
                     $key_type = $this->resolveConstantType(
@@ -1631,6 +1633,12 @@ class ClassLikes
                         $statements_analyzer,
                         $visited_constant_ids + [$c_id => true]
                     );
+
+                    if (!$key_type instanceof Type\Atomic\TLiteralInt
+                        || $key_type->value !== $i
+                    ) {
+                        $is_list = false;
+                    }
                 } else {
                     $key_type = new Type\Atomic\TLiteralInt($i);
                 }
@@ -1652,7 +1660,11 @@ class ClassLikes
                 $properties[$key_value] = $value_type;
             }
 
-            return new Type\Atomic\ObjectLike($properties);
+            $objectlike = new Type\Atomic\ObjectLike($properties);
+
+            $objectlike->is_list = $is_list;
+
+            return $objectlike;
         }
 
         if ($c instanceof UnresolvedConstant\ClassConstant) {
diff --git a/tests/ConstantTest.php b/tests/ConstantTest.php
index c83d71ae0..738550898 100644
--- a/tests/ConstantTest.php
+++ b/tests/ConstantTest.php
@@ -461,13 +461,26 @@ class ConstantTest extends TestCase
             ],
             'resolveConstArrayAsList' => [
                 '<?php
-                    class Test {
-                        public const VALUES = [
+                    class Test1 {
+                        const VALUES = [
                             "all",
                             "own"
                         ];
                     }
 
+                    class Credentials {
+                        const ALL  = "all";
+                        const OWN  = "own";
+                        const NONE = "none";
+                    }
+
+                    class Test2 {
+                        const VALUES = [
+                            Credentials::ALL,
+                            Credentials::OWN
+                        ];
+                    }
+
                     /**
                      * @psalm-param list<"all"|"own"|"mine"> $value
                      */
@@ -475,7 +488,8 @@ class ConstantTest extends TestCase
                         print_r($value);
                     }
 
-                    test(Test::VALUES);'
+                    test(Test1::VALUES);
+                    test(Test2::VALUES);'
             ],
             'resolveConstantFetchViaFunction' => [
                 '<?php
