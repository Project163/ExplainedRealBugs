diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php
index d77e9823e..3527b6ca2 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php
@@ -1400,6 +1400,7 @@ class CallAnalyzer
 
             if (self::checkArrayFunctionArgumentsMatch(
                 $statements_analyzer,
+                $context,
                 $args,
                 $method_id,
                 $context->check_functions
@@ -2025,6 +2026,7 @@ class CallAnalyzer
      */
     protected static function checkArrayFunctionArgumentsMatch(
         StatementsAnalyzer $statements_analyzer,
+        Context $context,
         array $args,
         $method_id,
         bool $check_functions
@@ -2081,6 +2083,7 @@ class CallAnalyzer
             foreach ($closure_arg_type->getAtomicTypes() as $closure_type) {
                 self::checkArrayFunctionClosureType(
                     $statements_analyzer,
+                    $context,
                     $method_id,
                     $closure_type,
                     $closure_arg,
@@ -2103,6 +2106,7 @@ class CallAnalyzer
      */
     private static function checkArrayFunctionClosureType(
         StatementsAnalyzer $statements_analyzer,
+        Context $context,
         $method_id,
         Type\Atomic $closure_type,
         PhpParser\Node\Arg $closure_arg,
@@ -2239,6 +2243,7 @@ class CallAnalyzer
 
             self::checkArrayFunctionClosureTypeArgs(
                 $statements_analyzer,
+                $context,
                 $method_id,
                 $closure_type,
                 $closure_arg,
@@ -2260,6 +2265,7 @@ class CallAnalyzer
      */
     private static function checkArrayFunctionClosureTypeArgs(
         StatementsAnalyzer $statements_analyzer,
+        Context $context,
         $method_id,
         Type\Atomic $closure_type,
         PhpParser\Node\Arg $closure_arg,
@@ -2324,9 +2330,8 @@ class CallAnalyzer
 
         $i = 0;
 
-        foreach ($closure_params as $closure_param) {
+        foreach ($closure_params as $i => $closure_param) {
             if (!isset($array_arg_types[$i])) {
-                ++$i;
                 continue;
             }
 
@@ -2335,17 +2340,45 @@ class CallAnalyzer
             $input_type = $array_arg_type->type_params[1];
 
             if ($input_type->hasMixed()) {
-                ++$i;
                 continue;
             }
 
             $closure_param_type = $closure_param->type;
 
             if (!$closure_param_type) {
-                ++$i;
                 continue;
             }
 
+            if ($method_id === 'array_map'
+                && $i === 0
+                && $closure_type->return_type
+                && $closure_param_type->hasTemplate()
+            ) {
+                $template_result = new \Psalm\Internal\Type\TemplateResult(
+                    [],
+                    []
+                );
+
+                foreach ($closure_param_type->getTemplateTypes() as $template_type) {
+                    $template_result->template_types[$template_type->param_name] = [
+                        ($template_type->defining_class) => [$template_type->as]
+                    ];
+                }
+
+                $closure_param_type = UnionTemplateHandler::replaceTemplateTypesWithStandins(
+                    $closure_param_type,
+                    $template_result,
+                    $codebase,
+                    $input_type,
+                    $context->self,
+                    $context->calling_function_id
+                );
+
+                $closure_type->return_type->replaceTemplateTypesWithArgTypes(
+                    $template_result->generic_params
+                );
+            }
+
             $union_comparison_results = new \Psalm\Internal\Analyzer\TypeComparisonResult();
 
             $type_match_found = TypeAnalyzer::isContainedBy(
@@ -2429,8 +2462,6 @@ class CallAnalyzer
                     // fall through
                 }
             }
-
-            ++$i;
         }
     }
 
diff --git a/tests/Template/FunctionTemplateTest.php b/tests/Template/FunctionTemplateTest.php
index d3ab3e197..6f2834fff 100644
--- a/tests/Template/FunctionTemplateTest.php
+++ b/tests/Template/FunctionTemplateTest.php
@@ -892,6 +892,32 @@ class FunctionTemplateTest extends TestCase
                         return $collection;
                     }'
             ],
+            'callableInference' => [
+                '<?php
+                    class Foo {}
+                    class FooChild extends Foo {}
+                    class Bar {}
+
+                    /**
+                     * @psalm-template ThingType of Foo
+                     * @psalm-param ThingType $t
+                     * @return ThingType|Bar
+                     */
+                    function from_other(Foo $t) {
+                        if  (rand(0, 1)) {
+                            return new Bar();
+                        }
+                        return $t;
+                    }
+
+                    /**
+                     * @param list<FooChild> $a
+                     * @return list<Bar|FooChild>
+                     */
+                    function baz(array $a) {
+                        return array_map("from_other", $a);
+                    }'
+            ],
         ];
     }
 
