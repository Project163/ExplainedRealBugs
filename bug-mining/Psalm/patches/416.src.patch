diff --git a/src/Psalm/Internal/Analyzer/TypeAnalyzer.php b/src/Psalm/Internal/Analyzer/TypeAnalyzer.php
index fe6cc4689..edccb97f3 100644
--- a/src/Psalm/Internal/Analyzer/TypeAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/TypeAnalyzer.php
@@ -1885,7 +1885,10 @@ class TypeAnalyzer
                 $container_class_storage = null;
             }
 
-            if ($input_type_part->value !== $container_type_part->value && $input_class_storage) {
+            if ($input_type_part->value !== $container_type_part->value
+                && $input_class_storage
+                && !$container_type_part->remapped_params
+            ) {
                 $input_template_types = $input_class_storage->template_types;
                 $i = 0;
 
@@ -1946,6 +1949,7 @@ class TypeAnalyzer
                             }
 
                             if ($new_input_param) {
+                                $new_input_param = clone $new_input_param;
                                 $new_input_param->replaceTemplateTypesWithArgTypes(
                                     $replacement_templates
                                 );
diff --git a/src/Psalm/Type/Atomic/GenericTrait.php b/src/Psalm/Type/Atomic/GenericTrait.php
index 5ad49d423..dd2c899f9 100644
--- a/src/Psalm/Type/Atomic/GenericTrait.php
+++ b/src/Psalm/Type/Atomic/GenericTrait.php
@@ -217,6 +217,10 @@ trait GenericTrait
             $type_param->replaceTemplateTypesWithArgTypes($template_types, $codebase);
         }
 
+        if ($this instanceof TGenericObject) {
+            $this->remapped_params = true;
+        }
+
         if ($this instanceof TGenericObject || $this instanceof TIterable) {
             $this->replaceIntersectionTemplateTypesWithArgTypes($template_types, $codebase);
         }
diff --git a/src/Psalm/Type/Atomic/TGenericObject.php b/src/Psalm/Type/Atomic/TGenericObject.php
index df5bb4592..48a870b17 100644
--- a/src/Psalm/Type/Atomic/TGenericObject.php
+++ b/src/Psalm/Type/Atomic/TGenericObject.php
@@ -10,6 +10,9 @@ class TGenericObject extends TNamedObject
 {
     use GenericTrait;
 
+    /** @var bool if the parameters have been remapped to another class */
+    public $remapped_params = false;
+
     /**
      * @param string                            $value the name of the object
      * @param non-empty-list<\Psalm\Type\Union>     $type_params
diff --git a/tests/Template/ClassTemplateExtendsTest.php b/tests/Template/ClassTemplateExtendsTest.php
index 69ff3b192..582073309 100644
--- a/tests/Template/ClassTemplateExtendsTest.php
+++ b/tests/Template/ClassTemplateExtendsTest.php
@@ -2717,6 +2717,29 @@ class ClassTemplateExtendsTest extends TestCase
                         }
                     }'
             ],
+            'extendWithArrayTemplate' => [
+                '<?php
+                    /**
+                     * @template T1
+                     */
+                    interface C {
+                        /**
+                         * @psalm-return C<array<int, T1>>
+                         */
+                        public function zip(): C;
+                    }
+
+                    /**
+                     * @template T2
+                     * @extends C<T2>
+                     */
+                    interface AC extends C {
+                        /**
+                         * @psalm-return AC<array<int, T2>>
+                         */
+                        public function zip(): C;
+                    }',
+            ],
         ];
     }
 
