diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/Call/ArrayFunctionArgumentsAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/Call/ArrayFunctionArgumentsAnalyzer.php
index 840484f9b..a0b8e7e6c 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/Call/ArrayFunctionArgumentsAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/Call/ArrayFunctionArgumentsAnalyzer.php
@@ -508,19 +508,19 @@ class ArrayFunctionArgumentsAnalyzer
                             \array_shift($array_properties);
 
                             if (!$array_properties) {
-                                $array_properties = [
-                                    $array_atomic_type->previous_value_type
-                                        ? clone $array_atomic_type->previous_value_type
-                                        : Type::getMixed()
-                                ];
+                                $array_atomic_type = new Type\Atomic\TList(
+                                    $array_atomic_type->previous_value_type ?: Type::getMixed()
+                                );
 
-                                $array_properties[0]->possibly_undefined = true;
+                                $array_type->addType($array_atomic_type);
+                            } else {
+                                $array_atomic_type->properties = $array_properties;
                             }
-
-                            $array_atomic_type->properties = $array_properties;
                         }
 
-                        $array_atomic_type = $array_atomic_type->getGenericArrayType();
+                        if ($array_atomic_type instanceof ObjectLike) {
+                            $array_atomic_type = $array_atomic_type->getGenericArrayType();
+                        }
                     }
 
                     if ($array_atomic_type instanceof TNonEmptyArray) {
diff --git a/src/Psalm/Type/Atomic/ObjectLike.php b/src/Psalm/Type/Atomic/ObjectLike.php
index bd6393b50..1cd499f47 100644
--- a/src/Psalm/Type/Atomic/ObjectLike.php
+++ b/src/Psalm/Type/Atomic/ObjectLike.php
@@ -297,7 +297,6 @@ class ObjectLike extends \Psalm\Type\Atomic
 
         if ($this->previous_value_type || $has_defined_keys) {
             $array_type = new TNonEmptyArray([$key_type, $value_type]);
-            $array_type->count = count($this->properties);
         } else {
             $array_type = new TArray([$key_type, $value_type]);
         }
diff --git a/tests/ArrayFunctionCallTest.php b/tests/ArrayFunctionCallTest.php
index 23df7d825..ff629ead2 100644
--- a/tests/ArrayFunctionCallTest.php
+++ b/tests/ArrayFunctionCallTest.php
@@ -1510,6 +1510,19 @@ class ArrayFunctionCallTest extends TestCase
                         return array_map([$m, "map"], $strings);
                     }'
             ],
+            'arrayShiftComplexArray' => [
+                '<?php
+                    /**
+                     * @param list<string> $slugParts
+                     */
+                    function foo(array $slugParts) : void {
+                        if (!$slugParts) {
+                            $slugParts = [""];
+                        }
+                        array_shift($slugParts);
+                        if (!empty($slugParts)) {}
+                    }'
+            ],
         ];
     }
 
