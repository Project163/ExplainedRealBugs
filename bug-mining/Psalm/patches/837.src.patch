diff --git a/src/Psalm/Context.php b/src/Psalm/Context.php
index a24690422..08e10c4ba 100644
--- a/src/Psalm/Context.php
+++ b/src/Psalm/Context.php
@@ -687,17 +687,11 @@ class Context
             $statements_analyzer
         );
 
-        $vars_to_remove = [];
-
         foreach ($this->vars_in_scope as $var_id => $_) {
             if (preg_match('/' . preg_quote($remove_var_id, '/') . '[\]\[\-]/', $var_id)) {
-                $vars_to_remove[] = $var_id;
+                unset($this->vars_in_scope[$var_id]);
             }
         }
-
-        foreach ($vars_to_remove as $var_id) {
-            unset($this->vars_in_scope[$var_id]);
-        }
     }
 
     /**
diff --git a/src/Psalm/Type/Reconciler.php b/src/Psalm/Type/Reconciler.php
index 1d5d046b3..2de47d9c0 100644
--- a/src/Psalm/Type/Reconciler.php
+++ b/src/Psalm/Type/Reconciler.php
@@ -345,6 +345,16 @@ class Reconciler
                         $changed_var_ids,
                         $result_type
                     );
+                } else {
+                    foreach ($existing_types as $new_key => $_) {
+                        if ($new_key === $key) {
+                            continue;
+                        }
+
+                        if (preg_match('/' . preg_quote($key, '/') . '[\]\[\-]/', $new_key)) {
+                            unset($existing_types[$new_key]);
+                        }
+                    }
                 }
             } elseif (!$has_negation && !$has_falsyish && !$has_isset) {
                 $changed_var_ids[$key] = true;
diff --git a/tests/PropertyTypeTest.php b/tests/PropertyTypeTest.php
index ad4349553..4b457e131 100644
--- a/tests/PropertyTypeTest.php
+++ b/tests/PropertyTypeTest.php
@@ -2041,6 +2041,24 @@ class PropertyTypeTest extends TestCase
                         }
                     }'
             ],
+            'dontMemoizePropertyTypeAfterRootVarAssertion' => [
+                '<?php
+                    class A {
+                        public string $i = "";
+                    }
+
+                    class B {
+                        public int $i = 0;
+                    }
+
+                    /** @param A|B $o */
+                    function takesAorB(object $o) : void {
+                        echo $o->i;
+                        if ($o instanceof A) {
+                            echo strlen($o->i);
+                        }
+                    }'
+            ],
         ];
     }
 
