diff --git a/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php b/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php
index 023676b1b..047de11c2 100644
--- a/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php
@@ -460,6 +460,13 @@ class StatementsAnalyzer extends SourceAnalyzer
                         $var_comment,
                         $context
                     );
+
+                    if ($var_comment->var_id === '$this'
+                        && $var_comment->type
+                        && $codebase->classExists((string)$var_comment->type)
+                    ) {
+                        $statements_analyzer->setFQCLN((string)$var_comment->type);
+                    }
                 }
             }
         } else {
diff --git a/tests/TypeReconciliation/ScopeTest.php b/tests/TypeReconciliation/ScopeTest.php
index d18eaee0e..ce7f02290 100644
--- a/tests/TypeReconciliation/ScopeTest.php
+++ b/tests/TypeReconciliation/ScopeTest.php
@@ -192,6 +192,20 @@ class ScopeTest extends \Psalm\Tests\TestCase
                 ?>
                 <h1><?= $this->getMessage() ?></h1>',
             ],
+            'psalmVarThisInTemplate' => [
+                '<?php
+                    $e = new Exception(); // necessary to trick Psalm’s scanner for test
+                    /** @var Exception $this */
+                ?>
+                <h1><?= $this->getMessage() ?></h1>',
+            ],
+            'psalmVarThisAbsoluteClassInTemplate' => [
+                '<?php
+                    $e = new Exception(); // necessary to trick Psalm’s scanner for test
+                    /** @var \Exception $this */
+                ?>
+                <h1><?= $this->getMessage() ?></h1>',
+            ],
         ];
     }
 
