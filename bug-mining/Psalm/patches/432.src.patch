diff --git a/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php b/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
index 95bd93276..ec27d435d 100644
--- a/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
@@ -592,7 +592,10 @@ abstract class FunctionLikeAnalyzer extends SourceAnalyzer
             );
 
             if ($closure_return_types) {
-                $closure_return_type = new Type\Union($closure_return_types);
+                $closure_return_type = \Psalm\Internal\Type\TypeCombination::combineTypes(
+                    $closure_return_types,
+                    $codebase
+                );
 
                 if (($storage->return_type === $storage->signature_return_type)
                     && (!$storage->return_type
diff --git a/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayMapReturnTypeProvider.php b/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayMapReturnTypeProvider.php
index ead50f45e..8679ec996 100644
--- a/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayMapReturnTypeProvider.php
+++ b/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayMapReturnTypeProvider.php
@@ -90,6 +90,7 @@ class ArrayMapReturnTypeProvider implements \Psalm\Plugin\Hook\FunctionReturnTyp
 
             if ($closure_types = $function_call_type->getClosureTypes()) {
                 $closure_atomic_type = \reset($closure_types);
+
                 $closure_return_type = $closure_atomic_type->return_type ?: Type::getMixed();
 
                 if ($closure_return_type->isVoid()) {
diff --git a/tests/FunctionCallTest.php b/tests/FunctionCallTest.php
index 1cefde30b..f63f37a7a 100644
--- a/tests/FunctionCallTest.php
+++ b/tests/FunctionCallTest.php
@@ -2429,6 +2429,31 @@ class FunctionCallTest extends TestCase
                         return array_filter([$ofThisInteger]);
                     }'
             ],
+            'arrayMapWithEmptyArrayReturn' => [
+                '<?php
+                    /**
+                     * @param array<array<string>> $elements
+                     * @return list<string>
+                     */
+                    function resolvePossibleFilePaths($elements) : array
+                    {
+                        return array_values(
+                            array_filter(
+                                array_merge(
+                                    ...array_map(
+                                        function (array $element) : array {
+                                            if (rand(0,1) == 1) {
+                                                return [];
+                                            }
+                                            return $element;
+                                        },
+                                        $elements
+                                    )
+                                )
+                            )
+                        );
+                    }'
+            ]
         ];
     }
 
