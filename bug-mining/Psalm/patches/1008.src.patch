diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php
index 2d5ca44d8..ba01c50b1 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php
@@ -187,18 +187,25 @@ class CallAnalyzer
                 $local_vars_in_scope = [];
                 $local_vars_possibly_in_scope = [];
 
-                foreach ($context->vars_in_scope as $var => $_) {
-                    if (strpos($var, '$this->') !== 0 && $var !== '$this') {
-                        $local_vars_in_scope[$var] = $context->vars_in_scope[$var];
-                    }
-                }
+                foreach ($context->vars_in_scope as $var_id => $type) {
+                    if (strpos($var_id, '$this->') === 0) {
+                        if ($type->initialized) {
+                            $local_vars_in_scope[$var_id] = $context->vars_in_scope[$var_id];
+
+                            if (isset($context->vars_possibly_in_scope[$var_id])) {
+                                $local_vars_possibly_in_scope[$var_id] = $context->vars_possibly_in_scope[$var_id];
+                            }
 
-                foreach ($context->vars_possibly_in_scope as $var => $_) {
-                    if (strpos($var, '$this->') !== 0 && $var !== '$this') {
-                        $local_vars_possibly_in_scope[$var] = $context->vars_possibly_in_scope[$var];
+                            unset($context->vars_in_scope[$var_id]);
+                            unset($context->vars_possibly_in_scope[$var_id]);
+                        }
+                    } elseif ($var_id !== '$this') {
+                        $local_vars_in_scope[$var_id] = $context->vars_in_scope[$var_id];
                     }
                 }
 
+                $local_vars_possibly_in_scope = $context->vars_possibly_in_scope;
+
                 $old_calling_method_id = $context->calling_method_id;
 
                 if ($fq_class_name === $source->getFQCLN()) {
diff --git a/tests/PropertyTypeTest.php b/tests/PropertyTypeTest.php
index d9ab5bdae..7b75cbc37 100644
--- a/tests/PropertyTypeTest.php
+++ b/tests/PropertyTypeTest.php
@@ -2203,6 +2203,28 @@ class PropertyTypeTest extends TestCase
                         echo $i->foo;
                     }'
             ],
+            'noRedundantCastWhenCheckingProperties' => [
+                '<?php
+                    class Foo
+                    {
+                        public array $map;
+
+                        public function __construct()
+                        {
+                            $this->map = [];
+                            $this->map["test"] = "test";
+
+                            $this->useMap();
+                        }
+
+                        public function useMap(): void
+                        {
+                            $keys = array_keys($this->map);
+                            $key = reset($keys);
+                            echo (string) $key;
+                        }
+                    }'
+            ],
         ];
     }
 
