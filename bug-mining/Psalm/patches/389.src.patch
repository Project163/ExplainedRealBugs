diff --git a/src/Psalm/Internal/Analyzer/ProjectAnalyzer.php b/src/Psalm/Internal/Analyzer/ProjectAnalyzer.php
index 9ef6eef55..1f3bff497 100644
--- a/src/Psalm/Internal/Analyzer/ProjectAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/ProjectAnalyzer.php
@@ -542,7 +542,7 @@ class ProjectAnalyzer
         $this->codebase->classlikes->consolidateAnalyzedData(
             $this->codebase->methods,
             $this->progress,
-            $this->codebase->collect_references
+            !!$this->codebase->find_unused_code
         );
     }
 
diff --git a/src/Psalm/Internal/Codebase/ClassLikes.php b/src/Psalm/Internal/Codebase/ClassLikes.php
index c9ef41612..2b09cc29d 100644
--- a/src/Psalm/Internal/Codebase/ClassLikes.php
+++ b/src/Psalm/Internal/Codebase/ClassLikes.php
@@ -727,7 +727,7 @@ class ClassLikes
     /**
      * @return void
      */
-    public function consolidateAnalyzedData(Methods $methods, ?Progress $progress, bool $check_references)
+    public function consolidateAnalyzedData(Methods $methods, ?Progress $progress, bool $find_unused_code)
     {
         if ($progress === null) {
             $progress = new VoidProgress();
@@ -746,7 +746,7 @@ class ClassLikes
                 && $this->config->isInProjectDirs($classlike_storage->location->file_path)
                 && !$classlike_storage->is_trait
             ) {
-                if ($check_references) {
+                if ($find_unused_code) {
                     if (!$this->file_reference_provider->isClassReferenced($fq_class_name_lc)) {
                         if (IssueBuffer::accepts(
                             new UnusedClass(
