diff --git a/src/Psalm/Internal/Codebase/ClassLikes.php b/src/Psalm/Internal/Codebase/ClassLikes.php
index 3b664dc0c..9853866f5 100644
--- a/src/Psalm/Internal/Codebase/ClassLikes.php
+++ b/src/Psalm/Internal/Codebase/ClassLikes.php
@@ -702,7 +702,12 @@ class ClassLikes
      */
     public function getUnAliasedName(string $alias_name)
     {
-        return $this->classlike_aliases[strtolower($alias_name)] ?? $alias_name;
+        $alias_name_lc = strtolower($alias_name);
+        if (isset($this->existing_classlikes_lc[$alias_name_lc])) {
+            return $alias_name;
+        }
+
+        return $this->classlike_aliases[$alias_name_lc] ?? $alias_name;
     }
 
     /**
diff --git a/tests/ClassTest.php b/tests/ClassTest.php
index d3edca79a..dd7a61ee2 100644
--- a/tests/ClassTest.php
+++ b/tests/ClassTest.php
@@ -642,6 +642,21 @@ class ClassTest extends TestCase
                     class Bar implements Foo {}',
                 'error_message' => 'UndefinedInterface',
             ],
+            'classAliasAlreadyDefinedClass' => [
+                '<?php
+                    class A {}
+
+                    class B {}
+
+                    if (false) {
+                        class_alias(A::class, B::class);
+                    }
+
+                    function foo(A $a, B $b) : void {
+                        if ($a === $b) {}
+                    }',
+                'error_message' => 'TypeDoesNotContainType',
+            ],
         ];
     }
 }
