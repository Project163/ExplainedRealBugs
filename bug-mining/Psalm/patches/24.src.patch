diff --git a/src/Psalm/Internal/Analyzer/ProjectAnalyzer.php b/src/Psalm/Internal/Analyzer/ProjectAnalyzer.php
index 7ddf664bc..a29fae7b2 100644
--- a/src/Psalm/Internal/Analyzer/ProjectAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/ProjectAnalyzer.php
@@ -808,10 +808,6 @@ class ProjectAnalyzer
     ) {
         list($fq_class_name) = explode('::', $original_method_id);
 
-        $file_analyzer = $this->getFileAnalyzerForClassLike($fq_class_name);
-
-        $file_analyzer->setRootFilePath($root_file_path, $root_file_name);
-
         $appearing_method_id = $this->codebase->methods->getAppearingMethodId($original_method_id);
 
         if (!$appearing_method_id) {
@@ -827,6 +823,10 @@ class ProjectAnalyzer
             return;
         }
 
+        $file_analyzer = $this->getFileAnalyzerForClassLike($fq_class_name);
+
+        $file_analyzer->setRootFilePath($root_file_path, $root_file_name);
+
         if (strtolower($appearing_fq_class_name) !== strtolower($fq_class_name)) {
             $file_analyzer = $this->getFileAnalyzerForClassLike($appearing_fq_class_name);
         }
diff --git a/tests/PropertyTypeTest.php b/tests/PropertyTypeTest.php
index 2c8275c47..7a91a551c 100644
--- a/tests/PropertyTypeTest.php
+++ b/tests/PropertyTypeTest.php
@@ -1547,6 +1547,20 @@ class PropertyTypeTest extends TestCase
 
                     class Concrete extends Base {}'
             ],
+            'preventCrashWhenCallingInternalMethodInPropertyInitialisationChecks' => [
+                '<?php
+                    class Foo extends \RuntimeException {
+                        /** @var array */
+                        protected $serializableTrace;
+
+                        public function __construct() {
+                            parent::__construct("hello", 0);
+                            $this->serializableTrace = $this->getTrace();
+                        }
+                    }
+
+                    class Bar extends Foo {}',
+            ],
         ];
     }
 
