diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/AssignmentAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/AssignmentAnalyzer.php
index 138a4e453..47ed2d18f 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/AssignmentAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/AssignmentAnalyzer.php
@@ -892,6 +892,7 @@ class AssignmentAnalyzer
         $stmt_var_type = $stmt_var_type ? clone $stmt_var_type: null;
 
         $stmt_expr_type = $statements_analyzer->node_data->getType($stmt->expr);
+        $result_type = null;
 
         if ($stmt instanceof PhpParser\Node\Expr\AssignOp\Plus
             || $stmt instanceof PhpParser\Node\Expr\AssignOp\Minus
@@ -969,6 +970,16 @@ class AssignmentAnalyzer
             }
         }
 
+        if ($stmt->var instanceof PhpParser\Node\Expr\ArrayDimFetch) {
+            ArrayAssignmentAnalyzer::analyze(
+                $statements_analyzer,
+                $stmt->var,
+                $context,
+                null,
+                $result_type ?: Type::getEmpty()
+            );
+        }
+
         if ($stmt instanceof PhpParser\Node\Expr\AssignOp\Coalesce) {
             $old_data_provider = $statements_analyzer->node_data;
 
diff --git a/tests/TypeReconciliation/TypeTest.php b/tests/TypeReconciliation/TypeTest.php
index 7b9a883ed..6af576e1f 100644
--- a/tests/TypeReconciliation/TypeTest.php
+++ b/tests/TypeReconciliation/TypeTest.php
@@ -992,6 +992,16 @@ class TypeTest extends \Psalm\Tests\TestCase
                     test(true);
                     test(false);',
             ],
+            'assignOpUpdateArray' => [
+                '<?php
+                    $optgroup = ["a" => ""];
+
+                    if (rand(0, 1)) {
+                        $optgroup["a"] .= "v";
+                    }
+
+                    if ($optgroup["a"] !== "") {}'
+            ],
         ];
     }
 
