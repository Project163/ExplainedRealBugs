diff --git a/src/Psalm/Internal/Analyzer/Statements/Block/IfAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Block/IfAnalyzer.php
index 03a5f4e8f..c8fd542c7 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Block/IfAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Block/IfAnalyzer.php
@@ -286,7 +286,7 @@ class IfAnalyzer
                     $changed_var_ids,
                     $cond_referenced_var_ids,
                     $statements_analyzer,
-                    [],
+                    $statements_analyzer->getTemplateTypeMap() ?: [],
                     $if_context->inside_loop,
                     $context->check_variables
                         ? new CodeLocation(
@@ -333,7 +333,7 @@ class IfAnalyzer
                 $changed_var_ids,
                 $stmt->else || $stmt->elseifs ? $cond_referenced_var_ids : [],
                 $statements_analyzer,
-                [],
+                $statements_analyzer->getTemplateTypeMap() ?: [],
                 $context->inside_loop,
                 $context->check_variables
                     ? new CodeLocation(
@@ -691,7 +691,7 @@ class IfAnalyzer
                     $changed_var_ids,
                     [],
                     $statements_analyzer,
-                    [],
+                    $statements_analyzer->getTemplateTypeMap() ?: [],
                     $outer_context->inside_loop,
                     new CodeLocation(
                         $statements_analyzer->getSource(),
@@ -1022,7 +1022,7 @@ class IfAnalyzer
                 $changed_var_ids,
                 $new_referenced_var_ids,
                 $statements_analyzer,
-                [],
+                $statements_analyzer->getTemplateTypeMap() ?: [],
                 $elseif_context->inside_loop,
                 new CodeLocation(
                     $statements_analyzer->getSource(),
@@ -1205,7 +1205,7 @@ class IfAnalyzer
                     $changed_var_ids,
                     [],
                     $statements_analyzer,
-                    [],
+                    $statements_analyzer->getTemplateTypeMap() ?: [],
                     $elseif_context->inside_loop,
                     new CodeLocation($statements_analyzer->getSource(), $elseif, $outer_context->include_location)
                 );
diff --git a/tests/Template/FunctionClassStringTemplateTest.php b/tests/Template/FunctionClassStringTemplateTest.php
index fa8f2fafd..243c54544 100644
--- a/tests/Template/FunctionClassStringTemplateTest.php
+++ b/tests/Template/FunctionClassStringTemplateTest.php
@@ -550,7 +550,7 @@ class FunctionClassStringTemplateTest extends TestCase
                         throw new RuntimeException();
                     }',
             ],
-            'instanceofTemplatedClassString' => [
+            'instanceofTemplatedClassStringOnMixed' => [
                 '<?php
                     interface Foo {}
 
@@ -565,6 +565,23 @@ class FunctionClassStringTemplateTest extends TestCase
                             return $foo;
                         }
 
+                        throw new \Exception();
+                    }',
+            ],
+            'instanceofTemplatedClassStringOnObjectType' => [
+                '<?php
+                    interface Foo {}
+
+                    /**
+                     * @template T as Foo
+                     * @param class-string<T> $fooClass
+                     * @return T
+                     */
+                    function get($fooClass, Foo $foo) {
+                        if ($foo instanceof $fooClass) {
+                            return $foo;
+                        }
+
                         throw new \Exception();
                     }',
             ],
