diff --git a/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php b/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
index db6e974f3..ac9328479 100644
--- a/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
@@ -964,6 +964,19 @@ abstract class FunctionLikeAnalyzer extends SourceAnalyzer
                 continue;
             }
 
+            $did_match_param = false;
+
+            foreach ($this->function->params as $param) {
+                if ($param->var->getAttribute('endFilePos') === $original_location->raw_file_end) {
+                    $did_match_param = true;
+                    break;
+                }
+            }
+
+            if (!$did_match_param) {
+                continue;
+            }
+
             if (!($storage instanceof MethodStorage)
                 || !$storage->cased_name
                 || $storage->visibility === ClassLikeAnalyzer::VISIBILITY_PRIVATE
@@ -1658,7 +1671,7 @@ abstract class FunctionLikeAnalyzer extends SourceAnalyzer
 
         return $this->getClosureId();
     }
-    
+
     public function getFunctionLikeStorage(?StatementsAnalyzer $statements_analyzer = null): FunctionLikeStorage
     {
         $codebase = $this->codebase;
diff --git a/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php b/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php
index 752d0841a..e2989f81b 100644
--- a/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php
@@ -123,7 +123,7 @@ class StatementsAnalyzer extends SourceAnalyzer implements StatementsSource
 
     /** @var \Psalm\Internal\Provider\NodeDataProvider */
     public $node_data;
-    
+
     public function __construct(SourceAnalyzer $source, \Psalm\Internal\Provider\NodeDataProvider $node_data)
     {
         $this->source = $source;
@@ -676,9 +676,18 @@ class StatementsAnalyzer extends SourceAnalyzer implements StatementsSource
                 continue;
             }
 
-            if ((!$function_storage
-                || !array_key_exists(substr($var_id, 1), $function_storage->param_lookup))
-                && !isset($this->byref_uses[$var_id])
+            if ($function_storage) {
+                $param_index = \array_search(substr($var_id, 1), array_keys($function_storage->param_lookup));
+                if ($param_index !== false) {
+                    $param = $function_storage->params[$param_index];
+
+                    if ($param->location && $original_location->raw_file_end === $param->location->raw_file_end) {
+                        continue;
+                    }
+                }
+            }
+
+            if (!isset($this->byref_uses[$var_id])
                 && !VariableFetchAnalyzer::isSuperGlobal($var_id)
             ) {
                 $issue = new UnusedVariable(
diff --git a/tests/UnusedVariableTest.php b/tests/UnusedVariableTest.php
index 308002e3c..547b11c75 100644
--- a/tests/UnusedVariableTest.php
+++ b/tests/UnusedVariableTest.php
@@ -28,7 +28,7 @@ class UnusedVariableTest extends TestCase
             )
         );
 
-        $this->project_analyzer->setPhpVersion('7.3');
+        $this->project_analyzer->setPhpVersion('7.4');
         $this->project_analyzer->getCodebase()->reportUnusedVariables();
     }
 
@@ -2211,6 +2211,32 @@ class UnusedVariableTest extends TestCase
                     }',
                 'error_message' => 'UnnecessaryVarAnnotation',
             ],
+            'arrowFunctionUnusedVariable' => [
+                '<?php
+                    function f(callable $c): void {
+                        $c(22);
+                    }
+
+                    f(
+                        fn(int $p)
+                            =>
+                            ++$p
+                    );',
+                'error_message' => 'UnusedVariable',
+            ],
+            'arrowFunctionUnusedParam' => [
+                '<?php
+                    function f(callable $c): void {
+                        $c(22);
+                    }
+
+                    f(
+                        fn(int $p)
+                            =>
+                            0
+                    );',
+                'error_message' => 'UnusedClosureParam',
+            ],
         ];
     }
 }
