diff --git a/src/Psalm/Internal/Analyzer/FunctionLike/ReturnTypeAnalyzer.php b/src/Psalm/Internal/Analyzer/FunctionLike/ReturnTypeAnalyzer.php
index caeaa7fb1..6cd319274 100644
--- a/src/Psalm/Internal/Analyzer/FunctionLike/ReturnTypeAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/FunctionLike/ReturnTypeAnalyzer.php
@@ -689,13 +689,26 @@ class ReturnTypeAnalyzer
             $parent_class
         );
 
-        if ($classlike_storage && $classlike_storage->template_types && $context->self) {
-            $generic_params = [];
-            $fleshed_out_return_type->replaceTemplateTypesWithStandins(
-                $classlike_storage->template_types,
-                $generic_params,
-                $codebase
+        if ($classlike_storage && $context->self && $function->name) {
+            $class_template_params = MethodCallAnalyzer::getClassTemplateParams(
+                $codebase,
+                $classlike_storage,
+                $context->self,
+                strtolower($function->name->name),
+                new Type\Atomic\TNamedObject($context->self),
+                '$this'
             );
+
+            $class_template_params = $class_template_params ?: $classlike_storage->template_types;
+
+            if ($class_template_params) {
+                $generic_params = [];
+                $fleshed_out_return_type->replaceTemplateTypesWithStandins(
+                    $class_template_params,
+                    $generic_params,
+                    $codebase
+                );
+            }
         }
 
         if (!TypeAnalyzer::isContainedBy(
diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/Call/MethodCallAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/Call/MethodCallAnalyzer.php
index 3761e29ac..10851c46f 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/Call/MethodCallAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/Call/MethodCallAnalyzer.php
@@ -1267,7 +1267,8 @@ class MethodCallAnalyzer extends \Psalm\Internal\Analyzer\Statements\Expression\
             && $method_name
             && !empty($class_storage->overridden_method_ids[$method_name])
             && isset($class_storage->methods[$method_name])
-            && !isset($class_storage->methods[$method_name]->return_type)
+            && (!isset($class_storage->methods[$method_name]->return_type)
+                || $class_storage->methods[$method_name]->inherited_return_type)
         ) {
             foreach ($class_storage->overridden_method_ids[$method_name] as $overridden_method_id) {
                 $overridden_storage = $codebase->methods->getStorage($overridden_method_id);
diff --git a/src/Psalm/Internal/Codebase/Populator.php b/src/Psalm/Internal/Codebase/Populator.php
index 30530c649..1bbb04390 100644
--- a/src/Psalm/Internal/Codebase/Populator.php
+++ b/src/Psalm/Internal/Codebase/Populator.php
@@ -310,11 +310,13 @@ class Populator
                             ) {
                                 if ($declaring_method_storage->signature_return_type) {
                                     $method_storage->return_type = $declaring_method_storage->return_type;
+                                    $method_storage->inherited_return_type = true;
                                 } elseif (TypeAnalyzer::isSimplyContainedBy(
                                     $declaring_method_storage->return_type,
                                     $method_storage->signature_return_type
                                 )) {
                                     $method_storage->return_type = $declaring_method_storage->return_type;
+                                    $method_storage->inherited_return_type = true;
                                 }
                             }
                         }
@@ -756,6 +758,7 @@ class Populator
                                     !== $interface_method_storage->signature_return_type
                             ) {
                                 $method_storage->return_type = $interface_method_storage->return_type;
+                                $method_storage->inherited_return_type = true;
                             }
                         }
                     }
diff --git a/src/Psalm/Storage/MethodStorage.php b/src/Psalm/Storage/MethodStorage.php
index fe378aa23..e1ad62efc 100644
--- a/src/Psalm/Storage/MethodStorage.php
+++ b/src/Psalm/Storage/MethodStorage.php
@@ -50,6 +50,11 @@ class MethodStorage extends FunctionLikeStorage
      */
     public $inheritdoc = false;
 
+    /**
+     * @var bool
+     */
+    public $inherited_return_type = false;
+
     /**
      * @var string
      */
diff --git a/tests/Template/TemplateExtendsTest.php b/tests/Template/TemplateExtendsTest.php
index d3e632a59..ac9c66287 100644
--- a/tests/Template/TemplateExtendsTest.php
+++ b/tests/Template/TemplateExtendsTest.php
@@ -1904,6 +1904,39 @@ class TemplateExtendsTest extends TestCase
                         }
                     }',
             ],
+            'keyOfArrayInheritance' => [
+                '<?php
+                    /**
+                     * @template DATA as array<string, int|string>
+                     */
+                    abstract class Foo {
+                        /**
+                         * @var DATA
+                         */
+                        protected $data;
+
+                        /**
+                         * @param DATA $data
+                         */
+                        public function __construct(array $data) {
+                            $this->data = $data;
+                        }
+
+                        /**
+                         * @return key-of<DATA>
+                         */
+                        abstract public static function getIdProperty() : string;
+                    }
+
+                    /**
+                     * @template-extends Foo<array{id:int, name:string}>
+                     */
+                    class FooChild extends Foo {
+                        public static function getIdProperty() : string {
+                            return "id";
+                        }
+                    }'
+            ],
         ];
     }
 
