diff --git a/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayFilterReturnTypeProvider.php b/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayFilterReturnTypeProvider.php
index 15e006802..85a30b12e 100644
--- a/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayFilterReturnTypeProvider.php
+++ b/src/Psalm/Internal/Provider/ReturnTypeProvider/ArrayFilterReturnTypeProvider.php
@@ -152,7 +152,8 @@ class ArrayFilterReturnTypeProvider implements \Psalm\Plugin\Hook\FunctionReturn
                 }
             }
 
-            if ($second_arg_value instanceof PhpParser\Node\Expr\Closure
+            if (($second_arg_value instanceof PhpParser\Node\Expr\Closure
+                    || $second_arg_value instanceof PhpParser\Node\Expr\ArrowFunction)
                 && ($second_arg_type = $statements_source->node_data->getType($second_arg_value))
                 && ($closure_types = $second_arg_type->getClosureTypes())
             ) {
@@ -171,9 +172,9 @@ class ArrayFilterReturnTypeProvider implements \Psalm\Plugin\Hook\FunctionReturn
                     return Type::getArray();
                 }
 
-                if (count($second_arg_value->stmts) === 1 && count($second_arg_value->params)) {
+                if (count($second_arg_value->getStmts()) === 1 && count($second_arg_value->params)) {
                     $first_param = $second_arg_value->params[0];
-                    $stmt = $second_arg_value->stmts[0];
+                    $stmt = $second_arg_value->getStmts()[0];
 
                     if ($first_param->variadic === false
                         && $first_param->var instanceof PhpParser\Node\Expr\Variable
diff --git a/tests/FunctionCallTest.php b/tests/FunctionCallTest.php
index f63f37a7a..5e27ac603 100644
--- a/tests/FunctionCallTest.php
+++ b/tests/FunctionCallTest.php
@@ -2453,7 +2453,28 @@ class FunctionCallTest extends TestCase
                             )
                         );
                     }'
-            ]
+            ],
+            'arrayFilterArrowFunction' => [
+                '<?php
+                    class A {}
+                    class B {}
+
+                    $a = \array_filter(
+                        [new A(), new B()],
+                        function($x) {
+                            return $x instanceof B;
+                        }
+                    );
+
+                    $b = \array_filter(
+                        [new A(), new B()],
+                        fn($x) => $x instanceof B
+                    );',
+                'assertions' => [
+                    '$a' => 'array<int, B>',
+                    '$b' => 'array<int, B>',
+                ],
+            ],
         ];
     }
 
