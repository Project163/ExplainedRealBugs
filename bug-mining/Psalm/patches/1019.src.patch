diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/YieldAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/YieldAnalyzer.php
index 5613655f3..fa26f38fb 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/YieldAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/YieldAnalyzer.php
@@ -142,6 +142,10 @@ class YieldAnalyzer
 
         foreach ($expression_type->getAtomicTypes() as $expression_atomic_type) {
             if ($expression_atomic_type instanceof Type\Atomic\TNamedObject) {
+                if (!$codebase->classlikes->classOrInterfaceExists($expression_atomic_type->value)) {
+                    continue;
+                }
+
                 $classlike_storage = $codebase->classlike_storage_provider->get($expression_atomic_type->value);
 
                 if ($classlike_storage->yield) {
diff --git a/tests/GeneratorTest.php b/tests/GeneratorTest.php
index 813839f9b..0f7909b3a 100644
--- a/tests/GeneratorTest.php
+++ b/tests/GeneratorTest.php
@@ -252,6 +252,24 @@ class GeneratorTest extends TestCase
                     }
                     echo json_encode(iterator_to_array(getIteratorOrAggregate()));'
             ],
+            'yieldNonExistentClass' => [
+                '<?php
+                    class T {
+                        private const FACTORIES = [
+                            ClassNotExisting::class,
+                        ];
+
+                        function f() : Generator {
+                            foreach (self::FACTORIES as $f) {
+                                if (class_exists($f)) {
+                                    yield new $f();
+                                }
+                            }
+                        }
+                    }',
+                [],
+                ['UndefinedClass']
+            ],
         ];
     }
 
