diff --git a/src/Psalm/Internal/Codebase/Scanner.php b/src/Psalm/Internal/Codebase/Scanner.php
index ff582a2fe..86181db3d 100644
--- a/src/Psalm/Internal/Codebase/Scanner.php
+++ b/src/Psalm/Internal/Codebase/Scanner.php
@@ -280,6 +280,7 @@ class Scanner
      * @param  string|null  $referencing_file_path
      * @param  bool $analyze_too
      * @param  bool $store_failure
+     * @param  array<string, mixed> $phantom_classes
      *
      * @return void
      */
@@ -287,7 +288,8 @@ class Scanner
         $fq_classlike_name,
         $referencing_file_path = null,
         $analyze_too = false,
-        $store_failure = true
+        $store_failure = true,
+        array $phantom_classes = []
     ) {
         if ($fq_classlike_name[0] === '\\') {
             $fq_classlike_name = substr($fq_classlike_name, 1);
@@ -325,7 +327,7 @@ class Scanner
                     $property_type->queueClassLikesForScanning(
                         $this->codebase,
                         null,
-                        [$fq_classlike_name_lc => true]
+                        $phantom_classes + [$fq_classlike_name_lc => true]
                     );
                 }
             }
diff --git a/src/Psalm/Internal/PropertyMap.php b/src/Psalm/Internal/PropertyMap.php
index a35a1a18d..3652789e0 100644
--- a/src/Psalm/Internal/PropertyMap.php
+++ b/src/Psalm/Internal/PropertyMap.php
@@ -268,7 +268,7 @@ return [
     'domelement' => [
         'schemaTypeInfo' => 'bool',
         'tagName' => 'string',
-        'attributes' => 'DOMNamedNodeMap',
+        'attributes' => 'DOMNamedNodeMap<DOMAttr>',
     ],
     'tidynode' => [
         'value' => 'string',
diff --git a/src/Psalm/Internal/Stubs/CoreGenericClasses.php b/src/Psalm/Internal/Stubs/CoreGenericClasses.php
index 322f06fa9..9dd437be4 100644
--- a/src/Psalm/Internal/Stubs/CoreGenericClasses.php
+++ b/src/Psalm/Internal/Stubs/CoreGenericClasses.php
@@ -946,6 +946,32 @@ class DOMNodeList implements Traversable, Countable {
     public function item($index) {}
 }
 
+/**
+ * @template-covariant TNode as DOMNode
+ * @template-implements Traversable<string, TNode>
+ */
+class DOMNamedNodeMap implements Traversable, Countable {
+    /**
+     * @var int
+     */
+    public $length;
+
+    /**
+     * @return TNode|null
+     */
+    public function getNamedItem(string $name): ?DOMNode {}
+
+    /**
+     * @return TNode|null
+     */
+    public function getNamedItemNS(string $namespaceURI, string $localName): ?DOMNode {}
+
+    /**
+     * @return TNode|null
+     */
+    public function item(int $index): ?DOMNode {}
+}
+
 /**
  * The SplDoublyLinkedList class provides the main functionalities of a doubly linked list.
  * @link https://php.net/manual/en/class.spldoublylinkedlist.php
diff --git a/src/Psalm/Type/Atomic.php b/src/Psalm/Type/Atomic.php
index d26b9a1cc..cc5818897 100644
--- a/src/Psalm/Type/Atomic.php
+++ b/src/Psalm/Type/Atomic.php
@@ -458,7 +458,8 @@ abstract class Atomic
                     $this->value,
                     $file_storage ? $file_storage->file_path : null,
                     false,
-                    !$this->from_docblock
+                    !$this->from_docblock,
+                    $phantom_classes
                 );
 
                 if ($file_storage) {
@@ -487,7 +488,8 @@ abstract class Atomic
                 $this->fq_classlike_name,
                 $file_storage ? $file_storage->file_path : null,
                 false,
-                !$this->from_docblock
+                !$this->from_docblock,
+                $phantom_classes
             );
             if ($file_storage) {
                 $file_storage->referenced_classlikes[strtolower($this->fq_classlike_name)] = $this->fq_classlike_name;
@@ -500,7 +502,8 @@ abstract class Atomic
                     $this->as,
                     $file_storage ? $file_storage->file_path : null,
                     false,
-                    !$this->from_docblock
+                    !$this->from_docblock,
+                    $phantom_classes
                 );
                 if ($file_storage) {
                     $file_storage->referenced_classlikes[strtolower($this->as)] = $this->as;
@@ -521,7 +524,8 @@ abstract class Atomic
                 $this->value,
                 $file_storage ? $file_storage->file_path : null,
                 false,
-                !$this->from_docblock
+                !$this->from_docblock,
+                $phantom_classes
             );
             if ($file_storage) {
                 $file_storage->referenced_classlikes[strtolower($this->value)] = $this->value;
diff --git a/tests/PropertyTypeTest.php b/tests/PropertyTypeTest.php
index 0118dbdec..4ed5c2825 100644
--- a/tests/PropertyTypeTest.php
+++ b/tests/PropertyTypeTest.php
@@ -344,6 +344,12 @@ class PropertyTypeTest extends TestCase
                         echo $e->attributes->length;
                     }',
             ],
+            'genericTypeFromPropertyMap' => [
+                '<?php
+                    function foo(DOMElement $e) : ?DOMAttr {
+                        return $e->attributes->item(0);
+                    }'
+            ],
             'goodArrayProperties' => [
                 '<?php
                     interface I1 {}
