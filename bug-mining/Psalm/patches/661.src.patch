diff --git a/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php b/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
index 20f44752d..b07a1c337 100644
--- a/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
@@ -613,6 +613,14 @@ abstract class FunctionLikeAnalyzer extends SourceAnalyzer
                     $codebase
                 );
 
+                $closure_yield_type = $closure_yield_types
+                    ? \Psalm\Internal\Type\TypeCombination::combineTypes($closure_yield_types)
+                    : null;
+
+                if ($closure_yield_type) {
+                    $closure_return_type = $closure_yield_type;
+                }
+
                 if (($storage->return_type === $storage->signature_return_type)
                     && (!$storage->return_type
                         || $storage->return_type->hasMixed()
diff --git a/tests/ClosureTest.php b/tests/ClosureTest.php
index 05f931e2a..f8e318b40 100644
--- a/tests/ClosureTest.php
+++ b/tests/ClosureTest.php
@@ -471,6 +471,17 @@ class ClosureTest extends TestCase
                         );
                     }'
             ],
+            'inferGeneratorReturnType' => [
+                '<?php
+                    function accept(Generator $gen): void {}
+
+                    accept(
+                        (function() {
+                            yield;
+                            return 42;
+                        })()
+                    );'
+            ],
         ];
     }
 
