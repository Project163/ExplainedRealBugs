diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php
index 76d4d9e36..ab399a37b 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php
@@ -430,7 +430,9 @@ class CallAnalyzer
                         return false;
                     }
 
-                    continue;
+                    if ($arg->value instanceof PhpParser\Node\Expr\Variable) {
+                        continue;
+                    }
                 }
 
                 $toggled_class_exists = false;
diff --git a/tests/UnusedVariableTest.php b/tests/UnusedVariableTest.php
index 38a415815..a2f731bdb 100644
--- a/tests/UnusedVariableTest.php
+++ b/tests/UnusedVariableTest.php
@@ -1408,6 +1408,21 @@ class UnusedVariableTest extends TestCase
                         }
                     }'
             ],
+            'passedByRefArrayOffset' => [
+                '<?php
+                    $a = [
+                        "a" => [1],
+                        "b" => [2]
+                    ];
+
+                    foreach (["a"] as $e){
+                        takes_ref($a[$e]);
+                    }
+
+                    function takes_ref(array &$p): void {
+                        echo implode(",", $p);
+                    }'
+            ],
         ];
     }
 
