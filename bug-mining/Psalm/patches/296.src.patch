diff --git a/src/Psalm/Internal/Analyzer/ClosureAnalyzer.php b/src/Psalm/Internal/Analyzer/ClosureAnalyzer.php
index 1b36fe767..472d79b9e 100644
--- a/src/Psalm/Internal/Analyzer/ClosureAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/ClosureAnalyzer.php
@@ -10,7 +10,7 @@ class ClosureAnalyzer extends FunctionLikeAnalyzer
     {
         $codebase = $source->getCodebase();
 
-        $function_id = $source->getFilePath()
+        $function_id = strtolower($source->getFilePath())
             . ':' . $function->getLine()
             . ':' . (int)$function->getAttribute('startFilePos')
             . ':-:closure';
diff --git a/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php b/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
index 5397b618d..e4ecb815a 100644
--- a/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
@@ -1380,7 +1380,7 @@ abstract class FunctionLikeAnalyzer extends SourceAnalyzer implements Statements
             return ($namespace ? strtolower($namespace) . '\\' : '') . strtolower($this->function->name->name);
         }
 
-        return $this->getFilePath()
+        return strtolower($this->getFilePath())
             . ':' . $this->function->getLine()
             . ':' . (int)$this->function->getAttribute('startFilePos')
             . ':-:closure';
diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php
index bab2b134c..43b84f141 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/CallAnalyzer.php
@@ -485,7 +485,7 @@ class CallAnalyzer
 
                     $template_result->generic_params = $replace_template_result->generic_params;
 
-                    $closure_id = $statements_analyzer->getFilePath()
+                    $closure_id = strtolower($statements_analyzer->getFilePath())
                         . ':' . $arg->value->getLine()
                         . ':' . (int)$arg->value->getAttribute('startFilePos')
                         . ':-:closure';
diff --git a/src/Psalm/Internal/Visitor/ReflectorVisitor.php b/src/Psalm/Internal/Visitor/ReflectorVisitor.php
index 6a4d9befe..78203e69e 100644
--- a/src/Psalm/Internal/Visitor/ReflectorVisitor.php
+++ b/src/Psalm/Internal/Visitor/ReflectorVisitor.php
@@ -1701,7 +1701,7 @@ class ReflectorVisitor extends PhpParser\NodeVisitorAbstract implements PhpParse
                 $storage->visibility = ClassLikeAnalyzer::VISIBILITY_PUBLIC;
             }
         } else {
-            $function_id = $cased_function_id = $this->file_path
+            $function_id = $cased_function_id = strtolower($this->file_path)
                 . ':' . $stmt->getLine()
                 . ':' . (int) $stmt->getAttribute('startFilePos') . ':-:closure';
 
