diff --git a/src/Psalm/Internal/FileManipulation/FunctionDocblockManipulator.php b/src/Psalm/Internal/FileManipulation/FunctionDocblockManipulator.php
index 4807defa8..fe434eb70 100644
--- a/src/Psalm/Internal/FileManipulation/FunctionDocblockManipulator.php
+++ b/src/Psalm/Internal/FileManipulation/FunctionDocblockManipulator.php
@@ -243,7 +243,7 @@ class FunctionDocblockManipulator
      */
     public function setReturnType($php_type, $new_type, $phpdoc_type, $is_php_compatible, $description)
     {
-        $new_type = str_replace(['<mixed, mixed>', '<array-key, mixed>', '<empty, empty>'], '', $new_type);
+        $new_type = str_replace(['<mixed, mixed>', '<array-key, mixed>'], '', $new_type);
 
         $this->new_php_return_type = $php_type;
         $this->new_phpdoc_return_type = $phpdoc_type;
diff --git a/src/Psalm/Type/Atomic/GenericTrait.php b/src/Psalm/Type/Atomic/GenericTrait.php
index eb7c7177c..747a4960f 100644
--- a/src/Psalm/Type/Atomic/GenericTrait.php
+++ b/src/Psalm/Type/Atomic/GenericTrait.php
@@ -73,7 +73,7 @@ trait GenericTrait
 
             $value_type = $this->type_params[1];
 
-            if ($value_type->isMixed()) {
+            if ($value_type->isMixed() || $value_type->isEmpty()) {
                 return $base_value;
             }
 
diff --git a/tests/FileManipulation/ReturnTypeManipulationTest.php b/tests/FileManipulation/ReturnTypeManipulationTest.php
index c894e459e..48aaedce4 100644
--- a/tests/FileManipulation/ReturnTypeManipulationTest.php
+++ b/tests/FileManipulation/ReturnTypeManipulationTest.php
@@ -1208,6 +1208,25 @@ class ReturnTypeManipulationTest extends FileManipulationTest
                 false,
                 false,
             ],
+            'noEmptyArrayAnnotation' => [
+                '<?php
+                    function foo() {
+                        return [];
+                    }',
+                '<?php
+                    /**
+                     * @return array
+                     *
+                     * @psalm-return array<empty, empty>
+                     */
+                    function foo(): array {
+                        return [];
+                    }',
+                '7.3',
+                ['MissingReturnType'],
+                false,
+            ],
+
         ];
     }
 }
