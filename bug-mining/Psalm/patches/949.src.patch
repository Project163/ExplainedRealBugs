diff --git a/src/Psalm/Internal/PhpVisitor/Reflector/ExpressionScanner.php b/src/Psalm/Internal/PhpVisitor/Reflector/ExpressionScanner.php
index 3eaa57c61..528b95aa8 100644
--- a/src/Psalm/Internal/PhpVisitor/Reflector/ExpressionScanner.php
+++ b/src/Psalm/Internal/PhpVisitor/Reflector/ExpressionScanner.php
@@ -150,7 +150,7 @@ class ExpressionScanner
                     }
 
                     if (($codebase->register_stub_files || $codebase->register_autoload_files)
-                        && !\defined($const_name)
+                        && (!\defined($const_name) || $const_type->isMixed())
                     ) {
                         $codebase->addGlobalConstantType($const_name, $const_type);
                     }
diff --git a/tests/StubTest.php b/tests/StubTest.php
index bb76f35bd..1a0fecd9e 100644
--- a/tests/StubTest.php
+++ b/tests/StubTest.php
@@ -510,6 +510,7 @@ class StubTest extends TestCase
         $this->addFile(
             $file_path,
             '<?php
+                /** @psalm-suppress MixedArgument */
                 echo CODE_DIR;'
         );
 
