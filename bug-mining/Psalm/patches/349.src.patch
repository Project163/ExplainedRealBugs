diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/AssignmentAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/AssignmentAnalyzer.php
index 241f22cdb..4e68b734f 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/AssignmentAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/AssignmentAnalyzer.php
@@ -277,6 +277,10 @@ class AssignmentAnalyzer
         }
 
         if ($array_var_id && isset($context->vars_in_scope[$array_var_id])) {
+            if ($context->vars_in_scope[$array_var_id]->by_ref) {
+                $assign_value_type->by_ref = true;
+            }
+
             // removes dependennt vars from $context
             $context->removeDescendents(
                 $array_var_id,
@@ -419,7 +423,7 @@ class AssignmentAnalyzer
                 );
             }
 
-            if (isset($context->byref_constraints[$var_id])) {
+            if (isset($context->byref_constraints[$var_id]) || $assign_value_type->by_ref) {
                 $statements_analyzer->registerVariableUses([$location->getHash() => $location]);
             }
         } elseif ($assign_var instanceof PhpParser\Node\Expr\List_
@@ -1025,6 +1029,8 @@ class AssignmentAnalyzer
             return false;
         }
 
+        $assignment_type->by_ref = true;
+
         $lhs_var_id = ExpressionAnalyzer::getVarId(
             $stmt->var,
             $statements_analyzer->getFQCLN(),
diff --git a/tests/UnusedVariableTest.php b/tests/UnusedVariableTest.php
index 314890e4a..f1da8695b 100644
--- a/tests/UnusedVariableTest.php
+++ b/tests/UnusedVariableTest.php
@@ -1317,6 +1317,16 @@ class UnusedVariableTest extends TestCase
                         echo gettype($k);
                     }'
             ],
+            'byRefVariableAfterAssignment' => [
+                '<?php
+                    class A {
+                        public string $value = "";
+                        public function writeByRef(string $value): void {
+                            $update =& $this->value;
+                            $update = $value;
+                        }
+                    }'
+            ],
         ];
     }
 
