diff --git a/src/Psalm/Internal/Analyzer/ProjectAnalyzer.php b/src/Psalm/Internal/Analyzer/ProjectAnalyzer.php
index 54882bf02..2cb7788e2 100644
--- a/src/Psalm/Internal/Analyzer/ProjectAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/ProjectAnalyzer.php
@@ -761,6 +761,12 @@ class ProjectAnalyzer
                 $potential_file_path = $this->config->getPotentialComposerFilePathForClassLike($destination);
 
                 if ($potential_file_path && !file_exists($potential_file_path)) {
+                    $containing_dir = dirname($potential_file_path);
+
+                    if (!file_exists($containing_dir)) {
+                        mkdir($containing_dir, 0777, true);
+                    }
+
                     rename($source_class_storage->location->file_path, $potential_file_path);
                 }
             }
