diff --git a/src/Psalm/Internal/Type/AssertionReconciler.php b/src/Psalm/Internal/Type/AssertionReconciler.php
index c385a0c0c..cebf3d6cf 100644
--- a/src/Psalm/Internal/Type/AssertionReconciler.php
+++ b/src/Psalm/Internal/Type/AssertionReconciler.php
@@ -748,6 +748,8 @@ class AssertionReconciler extends \Psalm\Type\Reconciler
 
                         $has_param_match = true;
 
+                        $new_param_id = $new_param->getId();
+
                         $new_param = self::filterTypeWithAnother(
                             $codebase,
                             $existing_param,
@@ -768,7 +770,7 @@ class AssertionReconciler extends \Psalm\Type\Reconciler
                         $existing_type->bustCache();
 
                         if ($has_param_match
-                            && $existing_type_part->type_params[$i]->getId() !== $new_param->getId()
+                            && $existing_type_part->type_params[$i]->getId() !== $new_param_id
                         ) {
                             /** @psalm-suppress PropertyTypeCoercion */
                             $existing_type_part->type_params[$i] = $new_param;
diff --git a/tests/AssertAnnotationTest.php b/tests/AssertAnnotationTest.php
index d3e8c96d4..18b2ff2df 100644
--- a/tests/AssertAnnotationTest.php
+++ b/tests/AssertAnnotationTest.php
@@ -1487,6 +1487,28 @@ class AssertAnnotationTest extends TestCase
                         }
                     }',
             ],
+            'assertTemplatedIterable' => [
+                '<?php
+                    class Foo{}
+
+                    /**
+                     * @param array<Foo> $foos
+                     * @return array<Foo>
+                     */
+                    function foo(array $foos) : array {
+                        allIsInstanceOf($foos, Foo::class);
+                        return $foos;
+                    }
+
+                    /**
+                     * @template ExpectedType of object
+                     *
+                     * @param mixed $value
+                     * @param class-string<ExpectedType> $class
+                     * @psalm-assert iterable<ExpectedType> $value
+                     */
+                    function allIsInstanceOf($value, $class): void {}'
+            ],
         ];
     }
 
