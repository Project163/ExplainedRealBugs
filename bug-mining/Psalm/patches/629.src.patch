diff --git a/src/Psalm/Internal/Type/SimpleAssertionReconciler.php b/src/Psalm/Internal/Type/SimpleAssertionReconciler.php
index bb6c83130..267e934f8 100644
--- a/src/Psalm/Internal/Type/SimpleAssertionReconciler.php
+++ b/src/Psalm/Internal/Type/SimpleAssertionReconciler.php
@@ -690,6 +690,18 @@ class SimpleAssertionReconciler extends \Psalm\Type\Reconciler
                 $did_remove_type = true;
             } elseif ($type instanceof TTemplateParam) {
                 if ($type->as->hasInt() || $type->as->hasMixed()) {
+                    $type = clone $type;
+
+                    $type->as = self::reconcileInt(
+                        $type->as,
+                        null,
+                        null,
+                        $suppressed_issues,
+                        $failed_reconciliation,
+                        $is_equality,
+                        $is_strict_equality
+                    );
+
                     $int_types[] = $type;
                 }
 
@@ -755,6 +767,17 @@ class SimpleAssertionReconciler extends \Psalm\Type\Reconciler
                 $did_remove_type = true;
             } elseif ($type instanceof TTemplateParam) {
                 if ($type->as->hasBool() || $type->as->hasMixed()) {
+                    $type = clone $type;
+
+                    $type->as = self::reconcileBool(
+                        $type->as,
+                        null,
+                        null,
+                        $suppressed_issues,
+                        $failed_reconciliation,
+                        $is_equality
+                    );
+
                     $bool_types[] = $type;
                 }
 
@@ -815,7 +838,18 @@ class SimpleAssertionReconciler extends \Psalm\Type\Reconciler
             if ($type instanceof Scalar) {
                 $scalar_types[] = $type;
             } elseif ($type instanceof TTemplateParam) {
-                if ($type->as->hasScalarType() || $type->as->hasMixed()) {
+                if ($type->as->hasScalar() || $type->as->hasMixed()) {
+                    $type = clone $type;
+
+                    $type->as = self::reconcileScalar(
+                        $type->as,
+                        null,
+                        null,
+                        $suppressed_issues,
+                        $failed_reconciliation,
+                        $is_equality
+                    );
+
                     $scalar_types[] = $type;
                 }
 
@@ -893,7 +927,21 @@ class SimpleAssertionReconciler extends \Psalm\Type\Reconciler
                 $numeric_types[] = new TInt();
                 $numeric_types[] = new TNumericString();
             } elseif ($type instanceof TTemplateParam) {
-                $numeric_types[] = $type;
+                if ($type->as->hasNumeric() || $type->as->hasMixed()) {
+                    $type = clone $type;
+
+                    $type->as = self::reconcileNumeric(
+                        $type->as,
+                        null,
+                        null,
+                        $suppressed_issues,
+                        $failed_reconciliation,
+                        $is_equality
+                    );
+
+                    $numeric_types[] = $type;
+                }
+
                 $did_remove_type = true;
             } else {
                 $did_remove_type = true;
@@ -960,10 +1008,24 @@ class SimpleAssertionReconciler extends \Psalm\Type\Reconciler
                 $type->as = Type::getObject();
                 $object_types[] = $type;
                 $did_remove_type = true;
-            } elseif ($type instanceof TTemplateParam
-                && $type->as->hasObject()
-            ) {
-                $object_types[] = $type;
+            } elseif ($type instanceof TTemplateParam) {
+                if ($type->as->hasObject() || $type->as->hasMixed()) {
+                    $type = clone $type;
+
+                    $type->as = self::reconcileObject(
+                        $type->as,
+                        null,
+                        null,
+                        $suppressed_issues,
+                        $failed_reconciliation,
+                        $is_equality,
+                        $is_strict_equality
+                    );
+
+                    $object_types[] = $type;
+                }
+
+                $did_remove_type = true;
             } else {
                 $did_remove_type = true;
             }
diff --git a/src/Psalm/Internal/Type/SimpleNegatedAssertionReconciler.php b/src/Psalm/Internal/Type/SimpleNegatedAssertionReconciler.php
index d2a8d9e46..17f1ba62b 100644
--- a/src/Psalm/Internal/Type/SimpleNegatedAssertionReconciler.php
+++ b/src/Psalm/Internal/Type/SimpleNegatedAssertionReconciler.php
@@ -385,13 +385,16 @@ class SimpleNegatedAssertionReconciler extends Reconciler
 
         foreach ($existing_var_type->getAtomicTypes() as $type) {
             if ($type instanceof TTemplateParam) {
-                if ($type->as->hasType('null') && !$type->as->isNull()) {
-                    $type->as->removeType('null');
-
-                    $did_remove_type = true;
+                $type->as = self::reconcileNull(
+                    $type->as,
+                    null,
+                    null,
+                    $suppressed_issues,
+                    $failed_reconciliation,
+                    $is_equality
+                );
 
-                    $existing_var_type->bustCache();
-                }
+                $existing_var_type->bustCache();
             }
         }
 
@@ -675,11 +678,29 @@ class SimpleNegatedAssertionReconciler extends Reconciler
 
         foreach ($existing_var_type->getAtomicTypes() as $type) {
             if ($type instanceof TTemplateParam) {
-                if (!$type->as->hasScalar() || $is_equality) {
+                if (!$is_equality && !$type->as->isMixed()) {
+                    $template_did_fail = 0;
+
+                    $type = clone $type;
+
+                    $type->as = self::reconcileScalar(
+                        $type->as,
+                        null,
+                        null,
+                        $suppressed_issues,
+                        $template_did_fail,
+                        $is_equality
+                    );
+
+                    $did_remove_type = true;
+
+                    if (!$template_did_fail) {
+                        $non_scalar_types[] = $type;
+                    }
+                } else {
+                    $did_remove_type = true;
                     $non_scalar_types[] = $type;
                 }
-
-                $did_remove_type = true;
             } elseif (!($type instanceof Scalar)) {
                 $non_scalar_types[] = $type;
             } else {
@@ -740,11 +761,29 @@ class SimpleNegatedAssertionReconciler extends Reconciler
 
         foreach ($existing_var_type->getAtomicTypes() as $type) {
             if ($type instanceof TTemplateParam) {
-                if (!$type->as->hasObject() || $is_equality) {
+                if (!$is_equality && !$type->as->isMixed()) {
+                    $template_did_fail = 0;
+
+                    $type = clone $type;
+
+                    $type->as = self::reconcileObject(
+                        $type->as,
+                        null,
+                        null,
+                        $suppressed_issues,
+                        $template_did_fail,
+                        $is_equality
+                    );
+
+                    $did_remove_type = true;
+
+                    if (!$template_did_fail) {
+                        $non_object_types[] = $type;
+                    }
+                } else {
+                    $did_remove_type = true;
                     $non_object_types[] = $type;
                 }
-
-                $did_remove_type = true;
             } elseif ($type instanceof TCallable) {
                 $non_object_types[] = new Atomic\TCallableArray([
                     Type::getArrayKey(),
@@ -813,11 +852,27 @@ class SimpleNegatedAssertionReconciler extends Reconciler
 
         foreach ($existing_var_type->getAtomicTypes() as $type) {
             if ($type instanceof TTemplateParam) {
-                if (!$type->as->hasNumeric() || $is_equality) {
-                    if ($type->as->hasMixed()) {
-                        $did_remove_type = true;
-                    }
+                if (!$is_equality && !$type->as->isMixed()) {
+                    $template_did_fail = 0;
+
+                    $type = clone $type;
+
+                    $type->as = self::reconcileNumeric(
+                        $type->as,
+                        null,
+                        null,
+                        $suppressed_issues,
+                        $template_did_fail,
+                        $is_equality
+                    );
+
+                    $did_remove_type = true;
 
+                    if (!$template_did_fail) {
+                        $non_numeric_types[] = $type;
+                    }
+                } else {
+                    $did_remove_type = true;
                     $non_numeric_types[] = $type;
                 }
             } elseif ($type instanceof TArrayKey) {
@@ -883,11 +938,27 @@ class SimpleNegatedAssertionReconciler extends Reconciler
 
         foreach ($existing_var_type->getAtomicTypes() as $type) {
             if ($type instanceof TTemplateParam) {
-                if (!$type->as->hasInt() || $is_equality) {
-                    if ($type->as->hasMixed()) {
-                        $did_remove_type = true;
-                    }
+                if (!$is_equality && !$type->as->isMixed()) {
+                    $template_did_fail = 0;
+
+                    $type = clone $type;
+
+                    $type->as = self::reconcileInt(
+                        $type->as,
+                        null,
+                        null,
+                        $suppressed_issues,
+                        $template_did_fail,
+                        $is_equality
+                    );
+
+                    $did_remove_type = true;
 
+                    if (!$template_did_fail) {
+                        $non_int_types[] = $type;
+                    }
+                } else {
+                    $did_remove_type = true;
                     $non_int_types[] = $type;
                 }
             } elseif ($type instanceof TArrayKey) {
@@ -960,11 +1031,27 @@ class SimpleNegatedAssertionReconciler extends Reconciler
 
         foreach ($existing_var_type->getAtomicTypes() as $type) {
             if ($type instanceof TTemplateParam) {
-                if (!$type->as->hasFloat() || $is_equality) {
-                    if ($type->as->hasMixed()) {
-                        $did_remove_type = true;
-                    }
+                if (!$is_equality && !$type->as->isMixed()) {
+                    $template_did_fail = 0;
+
+                    $type = clone $type;
+
+                    $type->as = self::reconcileFloat(
+                        $type->as,
+                        null,
+                        null,
+                        $suppressed_issues,
+                        $template_did_fail,
+                        $is_equality
+                    );
+
+                    $did_remove_type = true;
 
+                    if (!$template_did_fail) {
+                        $non_float_types[] = $type;
+                    }
+                } else {
+                    $did_remove_type = true;
                     $non_float_types[] = $type;
                 }
             } elseif ($type instanceof TScalar) {
@@ -1032,11 +1119,27 @@ class SimpleNegatedAssertionReconciler extends Reconciler
 
         foreach ($existing_var_type->getAtomicTypes() as $type) {
             if ($type instanceof TTemplateParam) {
-                if (!$type->as->hasString() || $is_equality) {
-                    if ($type->as->hasMixed()) {
-                        $did_remove_type = true;
-                    }
+                if (!$is_equality && !$type->as->isMixed()) {
+                    $template_did_fail = 0;
+
+                    $type = clone $type;
+
+                    $type->as = self::reconcileString(
+                        $type->as,
+                        null,
+                        null,
+                        $suppressed_issues,
+                        $template_did_fail,
+                        $is_equality
+                    );
+
+                    $did_remove_type = true;
 
+                    if (!$template_did_fail) {
+                        $non_string_types[] = $type;
+                    }
+                } else {
+                    $did_remove_type = true;
                     $non_string_types[] = $type;
                 }
             } elseif ($type instanceof TArrayKey) {
@@ -1117,11 +1220,27 @@ class SimpleNegatedAssertionReconciler extends Reconciler
 
         foreach ($existing_var_type->getAtomicTypes() as $type) {
             if ($type instanceof TTemplateParam) {
-                if (!$type->as->hasArray() || $is_equality) {
-                    if ($type->as->hasMixed()) {
-                        $did_remove_type = true;
-                    }
+                if (!$is_equality && !$type->as->isMixed()) {
+                    $template_did_fail = 0;
+
+                    $type = clone $type;
+
+                    $type->as = self::reconcileArray(
+                        $type->as,
+                        null,
+                        null,
+                        $suppressed_issues,
+                        $template_did_fail,
+                        $is_equality
+                    );
+
+                    $did_remove_type = true;
 
+                    if (!$template_did_fail) {
+                        $non_array_types[] = $type;
+                    }
+                } else {
+                    $did_remove_type = true;
                     $non_array_types[] = $type;
                 }
             } elseif ($type instanceof TCallable) {
diff --git a/tests/Template/ConditionalReturnTypeTest.php b/tests/Template/ConditionalReturnTypeTest.php
index a5a17e963..82baf6fb2 100644
--- a/tests/Template/ConditionalReturnTypeTest.php
+++ b/tests/Template/ConditionalReturnTypeTest.php
@@ -336,6 +336,22 @@ class ConditionalReturnTypeTest extends TestCase
                     '$b' => 'A',
                 ]
             ],
+            'isTemplateArrayCheck' => [
+                '<?php
+                    /**
+                     * @param string|array $pv_var
+                     *
+                     * @psalm-return ($pv_var is array ? array : string)
+                     */
+                    function test($pv_var) {
+                        $return = $pv_var;
+                        if(!is_array($pv_var)) {
+                            $return = utf8_encode($pv_var);
+                        }
+
+                        return $return;
+                    }'
+            ],
         ];
     }
 }
