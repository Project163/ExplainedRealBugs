diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/IncDecExpressionAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/IncDecExpressionAnalyzer.php
index ae045a7d9..482c3319c 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/IncDecExpressionAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/IncDecExpressionAnalyzer.php
@@ -88,11 +88,15 @@ class IncDecExpressionAnalyzer
                     $location = new CodeLocation($statements_analyzer, $stmt->var);
                     $context->assigned_var_ids[$var_id] = true;
                     $context->possibly_assigned_var_ids[$var_id] = true;
-                    $statements_analyzer->registerVariableAssignment(
-                        $var_id,
-                        $location
-                    );
-                    $context->unreferenced_vars[$var_id] = [$location->getHash() => $location];
+
+                    if (!$context->inside_isset || !$context->inside_loop) {
+                        $statements_analyzer->registerVariableAssignment(
+                            $var_id,
+                            $location
+                        );
+
+                        $context->unreferenced_vars[$var_id] = [$location->getHash() => $location];
+                    }
                 }
 
                 // removes dependent vars from $context
diff --git a/tests/UnusedCodeTest.php b/tests/UnusedCodeTest.php
index 5618e56b1..77b000c69 100644
--- a/tests/UnusedCodeTest.php
+++ b/tests/UnusedCodeTest.php
@@ -719,6 +719,23 @@ class UnusedCodeTest extends TestCase
                     $methodRef = "\A::b";
                     $methodRef();',
             ],
+            'doArrayIncrement' => [
+                '<?php
+                    /**
+                     * @param list<int> $keys
+                     * @param int $key
+                     */
+                    function error2(array $keys, int $key): int
+                    {
+                        if ($key === 1) {}
+
+                        do {
+                            $nextKey = $keys[++$key] ?? null;
+                        } while ($nextKey === null);
+
+                        return $nextKey;
+                    }'
+            ],
         ];
     }
 
