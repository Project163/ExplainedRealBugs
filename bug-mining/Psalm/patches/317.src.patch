diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/Assignment/ArrayAssignmentAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/Assignment/ArrayAssignmentAnalyzer.php
index b83bdbdbb..aeee4c109 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/Assignment/ArrayAssignmentAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/Assignment/ArrayAssignmentAnalyzer.php
@@ -279,6 +279,21 @@ class ArrayAssignmentAnalyzer
 
             if ($child_stmt->var->inferredType->hasMixed()) {
                 $full_var_id = false;
+
+                while ($child_stmts) {
+                    $child_stmt = array_shift($child_stmts);
+
+                    if ($child_stmt->dim) {
+                        if (ExpressionAnalyzer::analyze(
+                            $statements_analyzer,
+                            $child_stmt->dim,
+                            $context
+                        ) === false) {
+                            return false;
+                        }
+                    }
+                }
+
                 break;
             }
         }
diff --git a/tests/UnusedVariableTest.php b/tests/UnusedVariableTest.php
index f9e1ab373..4e2fe5007 100644
--- a/tests/UnusedVariableTest.php
+++ b/tests/UnusedVariableTest.php
@@ -1251,6 +1251,26 @@ class UnusedVariableTest extends TestCase
 
                     echo $a;'
             ],
+            'unusedForeach' => [
+                '<?php
+                    /**
+                     * @param array<int, string> $test
+                     */
+                    function foo(array $test) : void {
+                        foreach($test as $key => $_testValue) {
+                            echo $key;
+                        }
+                    }'
+            ],
+            'usedAfterMixedVariableAssignment' => [
+                '<?php
+                    function foo(array $arr): array {
+                        $c = "c";
+                        /** @psalm-suppress MixedArrayAssignment */
+                        $arr["a"]["b"][$c] = 1;
+                        return $arr;
+                    }',
+            ]
         ];
     }
 
