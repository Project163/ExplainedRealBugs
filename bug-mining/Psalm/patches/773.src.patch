diff --git a/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php b/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
index 9bf173d29..dd6614862 100644
--- a/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/FunctionLikeAnalyzer.php
@@ -324,11 +324,10 @@ abstract class FunctionLikeAnalyzer extends SourceAnalyzer
                 $context->calling_method_id = strtolower((string) $method_id);
             }
         } elseif ($this->function instanceof Function_) {
-            $cased_method_id = $this->function->name->name;
+            $function_name = $this->function->name->name;
             $namespace_prefix = $this->getNamespace();
-            $context->calling_function_id = strtolower(
-                ($namespace_prefix !== null ? $namespace_prefix . '\\' : '') . $cased_method_id
-            );
+            $cased_method_id = ($namespace_prefix !== null ? $namespace_prefix . '\\' : '') . $function_name;
+            $context->calling_function_id = strtolower($cased_method_id);
         } else { // Closure
             if ($storage->return_type) {
                 $closure_return_type = \Psalm\Internal\Type\TypeExpander::expandUnion(
diff --git a/tests/TaintTest.php b/tests/TaintTest.php
index 4440c35a9..d4b21e34a 100644
--- a/tests/TaintTest.php
+++ b/tests/TaintTest.php
@@ -1856,4 +1856,26 @@ class TaintTest extends TestCase
 
         $this->analyzeFile('somefile.php', new Context());
     }
+
+    public function testNamespacedFunction() : void
+    {
+        $this->expectException(\Psalm\Exception\CodeException::class);
+        $this->expectExceptionMessage('TaintedInput');
+
+        $this->project_analyzer->trackTaintedInputs();
+
+        $this->addFile(
+            'somefile.php',
+            '<?php
+                namespace ns;
+
+                function identity(string $s) : string {
+                    return $s;
+                }
+
+                echo identity($_GET[\'userinput\']);'
+        );
+
+        $this->analyzeFile('somefile.php', new Context());
+    }
 }
