diff --git a/src/Psalm/Internal/Codebase/Populator.php b/src/Psalm/Internal/Codebase/Populator.php
index adb690db3..f0d849c53 100644
--- a/src/Psalm/Internal/Codebase/Populator.php
+++ b/src/Psalm/Internal/Codebase/Populator.php
@@ -117,6 +117,12 @@ class Populator
                 }
             }
 
+            foreach ($class_storage->dependent_classlikes as $dependent_classlike_name => $_) {
+                $dependee_storage = $this->classlike_storage_provider->get($dependent_classlike_name);
+
+                $class_storage->dependent_classlikes += $dependee_storage->dependent_classlikes;
+            }
+
             if ($class_storage->aliases) {
                 foreach ($class_storage->public_class_constant_nodes as $const_name => $node) {
                     $const_type = \Psalm\Internal\Analyzer\StatementsAnalyzer::getSimpleType(
diff --git a/tests/StubTest.php b/tests/StubTest.php
index 9a784ba3c..c530dac4f 100644
--- a/tests/StubTest.php
+++ b/tests/StubTest.php
@@ -929,7 +929,7 @@ class StubTest extends TestCase
      */
     public function testStubFileWithTemplatedClassDefinitionAndMagicMethodOverride()
     {
-        $this->markTestSkipped('Currently broken');
+        //$this->markTestSkipped('Currently broken');
         $this->project_analyzer = $this->getProjectAnalyzerWithConfig(
             TestConfig::loadFromXML(
                 dirname(__DIR__),
diff --git a/tests/fixtures/stubs/templated_class.php b/tests/fixtures/stubs/templated_class.php
index 2c9c079f8..8ba3e510c 100644
--- a/tests/fixtures/stubs/templated_class.php
+++ b/tests/fixtures/stubs/templated_class.php
@@ -10,3 +10,5 @@ class A {
      */
     public function find($id, $lockMode = null, $lockVersion = null) {}
 }
+
+
