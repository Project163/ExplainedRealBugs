diff --git a/src/Psalm/Internal/PhpVisitor/ReflectorVisitor.php b/src/Psalm/Internal/PhpVisitor/ReflectorVisitor.php
index 76eb16e02..c9665ea34 100644
--- a/src/Psalm/Internal/PhpVisitor/ReflectorVisitor.php
+++ b/src/Psalm/Internal/PhpVisitor/ReflectorVisitor.php
@@ -330,7 +330,9 @@ class ReflectorVisitor extends PhpParser\NodeVisitorAbstract implements PhpParse
 
             $this->registerFunctionLike($node);
 
-            if ($node instanceof PhpParser\Node\Expr\Closure) {
+            if ($node instanceof PhpParser\Node\Expr\Closure
+                || $node instanceof PhpParser\Node\Expr\ArrowFunction
+            ) {
                 $this->codebase->scanner->queueClassLikeForScanning('Closure');
             }
 
diff --git a/tests/ClosureTest.php b/tests/ClosureTest.php
index e749a00a2..93ac54938 100644
--- a/tests/ClosureTest.php
+++ b/tests/ClosureTest.php
@@ -837,6 +837,18 @@ class ClosureTest extends TestCase
                     }',
                 'error_message' => 'MixedReturnStatement'
             ],
+            'noCrashWhenComparingIllegitimateCallable' => [
+                '<?php
+                    class C {}
+
+                    function foo() : C {
+                        return fn (int $i) => "";
+                    }',
+                'error_message' => 'InvalidReturnStatement',
+                [],
+                [],
+                '7.4',
+            ],
         ];
     }
 }
