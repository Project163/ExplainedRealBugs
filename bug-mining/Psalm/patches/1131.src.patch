diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/Call/ArgumentAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/Call/ArgumentAnalyzer.php
index 7ce91b3f0..dc5889815 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/Call/ArgumentAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/Call/ArgumentAnalyzer.php
@@ -288,7 +288,8 @@ class ArgumentAnalyzer
                 $statements_analyzer,
                 $arg_value_type,
                 $argument_offset,
-                $context->self ?: 'fn-' . $context->calling_function_id
+                $context->self,
+                $context->calling_function_id ?: $context->calling_method_id
             );
 
             $arg_type = TemplateStandinTypeReplacer::replace(
@@ -298,7 +299,8 @@ class ArgumentAnalyzer
                 $statements_analyzer,
                 $arg_value_type,
                 $argument_offset,
-                $context->self ?: 'fn-' . $context->calling_function_id
+                $context->self,
+                $context->calling_function_id ?: $context->calling_method_id
             );
         }
 
diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/Call/ArgumentsAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/Call/ArgumentsAnalyzer.php
index b0aff5df3..346c5c009 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/Call/ArgumentsAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/Call/ArgumentsAnalyzer.php
@@ -263,7 +263,8 @@ class ArgumentsAnalyzer
             $statements_analyzer,
             $existing_type,
             $argument_offset,
-            'fn-' . ($context->calling_method_id ?: $context->calling_function_id)
+            $context->self,
+            $context->calling_method_id ?: $context->calling_function_id
         );
 
         if ($replace_template_result->upper_bounds) {
@@ -346,7 +347,7 @@ class ArgumentsAnalyzer
             null,
             null,
             null,
-            'fn-' . ($context->calling_method_id ?: $context->calling_function_id)
+            $context->calling_method_id ?: $context->calling_function_id
         );
 
         TemplateInferredTypeReplacer::replace(
@@ -981,7 +982,8 @@ class ArgumentsAnalyzer
                         $statements_analyzer,
                         $statements_analyzer->node_data->getType($arg->value),
                         $argument_offset,
-                        'fn-' . ($context->calling_method_id ?: $context->calling_function_id)
+                        $context->self,
+                        $context->calling_method_id ?: $context->calling_function_id
                     );
 
                     if ($template_result->upper_bounds) {
@@ -1005,7 +1007,8 @@ class ArgumentsAnalyzer
                         $statements_analyzer,
                         $statements_analyzer->node_data->getType($arg->value),
                         $argument_offset,
-                        'fn-' . ($context->calling_method_id ?: $context->calling_function_id)
+                        $context->self,
+                        $context->calling_method_id ?: $context->calling_function_id
                     );
 
                     if ($template_result->upper_bounds) {
diff --git a/tests/Template/FunctionTemplateTest.php b/tests/Template/FunctionTemplateTest.php
index 73e7305c5..1e1633d79 100644
--- a/tests/Template/FunctionTemplateTest.php
+++ b/tests/Template/FunctionTemplateTest.php
@@ -2126,6 +2126,27 @@ class FunctionTemplateTest extends TestCase
                     }',
                 'error_message' => 'InvalidReturnStatement'
             ],
+            'catchIssueInTemplatedFunctionInsideClass' => [
+                '<?php
+                    /**
+                     * @template T
+                     */
+                    interface Container {
+                        /** @param T $value */
+                        public function take($value): void;
+                    }
+
+                    class Foo {
+                        /**
+                         * @template T
+                         * @param Container<T> $c
+                         */
+                        function jsonFromEntityCollection(Container $c): void {
+                            $c->take("foo");
+                        }
+                    }',
+                'error_message' => 'InvalidArgument',
+            ],
         ];
     }
 }
