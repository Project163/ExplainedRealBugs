diff --git a/src/Psalm/Internal/Analyzer/Statements/Block/WhileAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Block/WhileAnalyzer.php
index 9a3207595..0cc72dc26 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Block/WhileAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Block/WhileAnalyzer.php
@@ -4,6 +4,7 @@ namespace Psalm\Internal\Analyzer\Statements\Block;
 use PhpParser;
 use Psalm\Internal\Analyzer\ScopeAnalyzer;
 use Psalm\Internal\Analyzer\StatementsAnalyzer;
+use Psalm\Internal\Analyzer\Statements\ExpressionAnalyzer;
 use Psalm\Context;
 use Psalm\Internal\Scope\LoopScope;
 use Psalm\Type;
@@ -146,6 +147,30 @@ class WhileAnalyzer
         );
 
         if ($context->collect_references) {
+            $suppressed_issues = $statements_analyzer->getSuppressedIssues();
+
+            if (!in_array('RedundantCondition', $suppressed_issues, true)) {
+                $statements_analyzer->addSuppressedIssues(['RedundantCondition']);
+            }
+            if (!in_array('RedundantConditionGivenDocblockType', $suppressed_issues, true)) {
+                $statements_analyzer->addSuppressedIssues(['RedundantConditionGivenDocblockType']);
+            }
+            if (!in_array('TypeDoesNotContainType', $suppressed_issues, true)) {
+                $statements_analyzer->addSuppressedIssues(['TypeDoesNotContainType']);
+            }
+
+            ExpressionAnalyzer::analyze($statements_analyzer, $stmt->cond, $while_context);
+
+            if (!in_array('RedundantCondition', $suppressed_issues, true)) {
+                $statements_analyzer->removeSuppressedIssues(['RedundantCondition']);
+            }
+            if (!in_array('RedundantConditionGivenDocblockType', $suppressed_issues, true)) {
+                $statements_analyzer->removeSuppressedIssues(['RedundantConditionGivenDocblockType']);
+            }
+            if (!in_array('TypeDoesNotContainType', $suppressed_issues, true)) {
+                $statements_analyzer->removeSuppressedIssues(['TypeDoesNotContainType']);
+            }
+
             $context->unreferenced_vars = $while_context->unreferenced_vars;
         }
 
diff --git a/src/Psalm/Internal/Analyzer/Statements/Expression/AssignmentAnalyzer.php b/src/Psalm/Internal/Analyzer/Statements/Expression/AssignmentAnalyzer.php
index 1f0603017..c81a72802 100644
--- a/src/Psalm/Internal/Analyzer/Statements/Expression/AssignmentAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/Statements/Expression/AssignmentAnalyzer.php
@@ -163,6 +163,10 @@ class AssignmentAnalyzer
             }
         }
 
+        if ($array_var_id) {
+            unset($context->referenced_var_ids[$array_var_id]);
+        }
+
         if ($assign_value) {
             if ($var_id && $assign_value instanceof PhpParser\Node\Expr\Closure) {
                 foreach ($assign_value->uses as $closure_use) {
diff --git a/tests/UnusedVariableTest.php b/tests/UnusedVariableTest.php
index ccd237cb8..35921a9fb 100644
--- a/tests/UnusedVariableTest.php
+++ b/tests/UnusedVariableTest.php
@@ -987,6 +987,21 @@ class UnusedVariableTest extends TestCase
                         \fclose($stream);
                     }',
             ],
+            'varUsedInloop' => [
+                '<?php
+                    class A {
+                        public static function getA() : ?A {
+                            return rand(0, 1) ? new A : null;
+                        }
+                    }
+
+                    function foo(?A $a) : void {
+                        while ($a) {
+                            echo get_class($a);
+                            $a = A::getA();
+                        }
+                    }'
+            ],
         ];
     }
 
@@ -1638,6 +1653,19 @@ class UnusedVariableTest extends TestCase
                     }',
                 'error_message' => 'UnusedVariable',
             ],
+            'detectUnusedSecondAssignmentBeforeTry' => [
+                '<?php
+                    $a = [1, 2, 3];
+                    echo($a[0]);
+                    $a = [4, 5, 6];
+
+                    try {
+                      // something
+                    } catch (\Throwable $t) {
+                      // something else
+                    }',
+                'error_message' => 'UnusedVariable',
+            ],
         ];
     }
 }
