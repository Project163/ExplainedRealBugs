diff --git a/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php b/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php
index 92f826278..2a6d1fd99 100644
--- a/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php
+++ b/src/Psalm/Internal/Analyzer/StatementsAnalyzer.php
@@ -774,6 +774,8 @@ class StatementsAnalyzer extends SourceAnalyzer implements StatementsSource
                                         : $this->getGlobalType($var_id);
 
                                 $context->vars_possibly_in_scope[$var_id] = true;
+
+                                $context->byref_constraints[$var_id] = new \Psalm\Internal\ReferenceConstraint();
                             }
                         }
                     }
diff --git a/tests/UnusedVariableTest.php b/tests/UnusedVariableTest.php
index 6523c191e..4e4b18bb2 100644
--- a/tests/UnusedVariableTest.php
+++ b/tests/UnusedVariableTest.php
@@ -544,6 +544,7 @@ class UnusedVariableTest extends TestCase
                     function example() : void {
                         global $a;
                         echo $a;
+                        $a = "hello";
                     }
                     example();',
             ],
