diff --git a/fontbox/src/main/java/org/apache/fontbox/cmap/CMapParser.java b/fontbox/src/main/java/org/apache/fontbox/cmap/CMapParser.java
index 20d2c614e9..f8c7983e2f 100644
--- a/fontbox/src/main/java/org/apache/fontbox/cmap/CMapParser.java
+++ b/fontbox/src/main/java/org/apache/fontbox/cmap/CMapParser.java
@@ -165,10 +165,10 @@ public class CMapParser
                         Object nextToken = parseNextToken( cmapStream );
                         List<byte[]> array = null;
                         byte[] tokenBytes = null;
-                        if( nextToken instanceof List )
+                        if( nextToken instanceof List<?> )
                         {
-                            array = (List)nextToken;
-                            tokenBytes = (byte[])array.get( 0 );
+                            array = (List<byte[]>)nextToken;
+                            tokenBytes = array.get( 0 );
                         }
                         else
                         {
@@ -487,7 +487,7 @@ public class CMapParser
     {
         byte[] bytes = new byte[2];
         bytes[1] = (byte)(value % 256);
-        bytes[0] = (byte)(value & 0x00 >> 8);
+        bytes[0] = (byte)(value / 256);
         return bytes;
     }
 
diff --git a/fontbox/src/test/java/org/apache/fontbox/cmap/TestCMapParser.java b/fontbox/src/test/java/org/apache/fontbox/cmap/TestCMapParser.java
new file mode 100644
index 0000000000..874fa4b144
--- /dev/null
+++ b/fontbox/src/test/java/org/apache/fontbox/cmap/TestCMapParser.java
@@ -0,0 +1,54 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.fontbox.cmap;
+
+import java.io.File;
+import java.io.FileInputStream;
+import java.io.IOException;
+
+import junit.framework.TestCase;
+
+/**
+ * This will test the CMapParser implementation.
+ *
+ * @version $Revision$
+ */
+public class TestCMapParser extends TestCase 
+{
+
+    /**
+     * Check whether the parser and the resulting mapping is working correct.
+     * @throws IOException If something went wrong
+     */
+    public void testLookup() throws IOException
+    {
+        final String resourceDir= "src/test/resources/cmap"; 
+        File inDir = new File(resourceDir);
+        
+        CMapParser parser = new CMapParser();
+        CMap cMap = parser.parse( resourceDir, new FileInputStream(new File(inDir,"CMapTest")));
+        
+        byte[] bytes1 = {0,65};
+        assertTrue("A".equals(cMap.lookup(bytes1, 0, 2)));
+
+        byte[] bytes2 = {1,24};
+        String str2 = "\u0118";
+        assertTrue(str2.equals(cMap.lookup(bytes2, 0, 2)));
+
+    }
+
+}
diff --git a/fontbox/src/test/resources/cmap/CMapTest b/fontbox/src/test/resources/cmap/CMapTest
new file mode 100644
index 0000000000..0292b4f32f
--- /dev/null
+++ b/fontbox/src/test/resources/cmap/CMapTest
@@ -0,0 +1,33 @@
+%% Licensed to the Apache Software Foundation (ASF) under one or more
+%% contributor license agreements.  See the NOTICE file distributed with
+%% this work for additional information regarding copyright ownership.
+%% The ASF licenses this file to You under the Apache License, Version 2.0
+%% (the "License"); you may not use this file except in compliance with
+%% the License.  You may obtain a copy of the License at
+%% 
+%%       http://www.apache.org/licenses/LICENSE-2.0
+%%
+%% Unless required by applicable law or agreed to in writing, software
+%% distributed under the License is distributed on an "AS IS" BASIS,
+%% WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+%% See the License for the specific language governing permissions and
+%% limitations under the License.
+%%
+%% This file isn't a valid CMap file, but it contains everything what
+%% is needed to test the CMapParser
+%%
+%%EndComments
+
+1 begincodespacerange
+  <0000> <02FF>
+endcodespacerange
+
+3 begincidrange
+<0000> <00ff> 0
+<0100> <01ff> 256
+<0200> <02ff> 512
+
+endcmap
+
+%%EndResource
+%%EOF
