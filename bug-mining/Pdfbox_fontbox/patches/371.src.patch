diff --git a/fontbox/src/main/java/org/apache/fontbox/ttf/CmapSubtable.java b/fontbox/src/main/java/org/apache/fontbox/ttf/CmapSubtable.java
index 12ee5d4dc3..4ee991e235 100644
--- a/fontbox/src/main/java/org/apache/fontbox/ttf/CmapSubtable.java
+++ b/fontbox/src/main/java/org/apache/fontbox/ttf/CmapSubtable.java
@@ -635,7 +635,7 @@ public class CmapSubtable implements CmapLookup
 
     private int getCharCode(int gid)
     {
-        if (gid < 0 || gid >= glyphIdToCharacterCode.length)
+        if (gid < 0 || glyphIdToCharacterCode == null || gid >= glyphIdToCharacterCode.length)
         {
             return -1;
         }
