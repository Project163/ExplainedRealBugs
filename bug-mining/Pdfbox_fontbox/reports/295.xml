<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:50:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4811] Glyphs getting lost when rendering</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4811</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I missed a rendering change (sorry) in the linked PDF.js issue that happened in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4810&quot; title=&quot;Improve CodespaceRange to be in line with the spec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4810&quot;&gt;&lt;del&gt;PDFBOX-4810&lt;/del&gt;&lt;/a&gt; but it is not a regression, rather a difference in displaying a bad input due to having different data.&lt;/p&gt;

&lt;p&gt;The CMap has these ranges:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
4 begincodespacerange
&amp;lt;00&amp;gt;&amp;lt;7f&amp;gt;
&amp;lt;c080&amp;gt;&amp;lt;dfbf&amp;gt;
&amp;lt;e08080&amp;gt;&amp;lt;efbfbf&amp;gt;
&amp;lt;f0808080&amp;gt;&amp;lt;f7bfbfbf&amp;gt;
endcodespacerange
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The content stream has segments like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(Check\340up Date:2020/ 3/ 4  11:46) Tj
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;0340 is 0xE0. The current code at CMap.readCode() reads bytes until a range fits, and this means it reads 4 bytes until it noticed that this has failed. After the failure it doesn&apos;t reposition. So this is displayed as &quot;Check &#183;Date&quot; instead of &quot;Check &amp;#45;up Date&quot;, i.e. input is lost. The &quot;&#183;&quot; is the default glyph.&lt;/p&gt;

&lt;p&gt;The solution is to remember the position and to reposition there. I&apos;m using mark() and reset() which, surprisingly, works both when loading in memory and when loading with temp file.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13298117">PDFBOX-4811</key>
            <summary>Glyphs getting lost when rendering</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Apr 2020 20:07:43 +0000</created>
                <updated>Mon, 15 Jun 2020 04:54:19 +0000</updated>
                            <resolved>Tue, 14 Apr 2020 04:41:25 +0000</resolved>
                                    <version>2.0.19</version>
                                    <fixVersion>2.0.20</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17082635" author="jira-bot" created="Mon, 13 Apr 2020 20:14:37 +0000"  >&lt;p&gt;Commit 1876461 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1876461&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1876461&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4811&quot; title=&quot;Glyphs getting lost when rendering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4811&quot;&gt;&lt;del&gt;PDFBOX-4811&lt;/del&gt;&lt;/a&gt;: reposition after first read byte if didn&apos;t get a match after having read many&lt;/p&gt;</comment>
                            <comment id="17082636" author="jira-bot" created="Mon, 13 Apr 2020 20:14:41 +0000"  >&lt;p&gt;Commit 1876462 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1876462&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1876462&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4811&quot; title=&quot;Glyphs getting lost when rendering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4811&quot;&gt;&lt;del&gt;PDFBOX-4811&lt;/del&gt;&lt;/a&gt;: reposition after first read byte if didn&apos;t get a match after having read many&lt;/p&gt;</comment>
                            <comment id="17082637" author="jira-bot" created="Mon, 13 Apr 2020 20:14:44 +0000"  >&lt;p&gt;Commit 1876463 from Tilman Hausherr in branch &apos;pdfbox/branches/issue45&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1876463&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1876463&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4811&quot; title=&quot;Glyphs getting lost when rendering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4811&quot;&gt;&lt;del&gt;PDFBOX-4811&lt;/del&gt;&lt;/a&gt;: reposition after first read byte if didn&apos;t get a match after having read many&lt;/p&gt;</comment>
                            <comment id="17082820" author="tilman" created="Tue, 14 Apr 2020 04:31:44 +0000"  >&lt;p&gt;The change isn&apos;t enough to reproduce Adobe Reader. On that one I get a clean &quot;-&quot;. The solution is to return the minimal code that was read.&lt;/p&gt;</comment>
                            <comment id="17082822" author="jira-bot" created="Tue, 14 Apr 2020 04:36:10 +0000"  >&lt;p&gt;Commit 1876472 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1876472&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1876472&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4811&quot; title=&quot;Glyphs getting lost when rendering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4811&quot;&gt;&lt;del&gt;PDFBOX-4811&lt;/del&gt;&lt;/a&gt;: return what was read instead of 0 to reproduce Adobe Reader behavior&lt;/p&gt;</comment>
                            <comment id="17082823" author="jira-bot" created="Tue, 14 Apr 2020 04:36:14 +0000"  >&lt;p&gt;Commit 1876473 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1876473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1876473&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4811&quot; title=&quot;Glyphs getting lost when rendering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4811&quot;&gt;&lt;del&gt;PDFBOX-4811&lt;/del&gt;&lt;/a&gt;: return what was read instead of 0 to reproduce Adobe Reader behavior&lt;/p&gt;</comment>
                            <comment id="17082824" author="jira-bot" created="Tue, 14 Apr 2020 04:36:19 +0000"  >&lt;p&gt;Commit 1876474 from Tilman Hausherr in branch &apos;pdfbox/branches/issue45&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1876474&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1876474&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4811&quot; title=&quot;Glyphs getting lost when rendering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4811&quot;&gt;&lt;del&gt;PDFBOX-4811&lt;/del&gt;&lt;/a&gt;: return what was read instead of 0 to reproduce Adobe Reader behavior&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12999852" name="PDFJS-11768.pdf-1-after.png" size="118341" author="tilman" created="Tue, 14 Apr 2020 04:37:02 +0000"/>
                            <attachment id="12999824" name="PDFJS-11768.pdf-1-before.png" size="115231" author="tilman" created="Mon, 13 Apr 2020 20:14:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/mozilla/pdf.js/issues/11768]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 30 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0dl68:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>