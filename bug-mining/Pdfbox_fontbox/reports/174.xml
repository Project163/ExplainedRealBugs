<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:49:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3144] NullPointerException in TTFSubsetter</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3144</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;An NPE happens in &quot;public void TTFSubsetter.add(int unicode)&quot; because the &quot;unicodeCmap&quot; member is null.&lt;br/&gt;
This might be, because the passed &quot;ttf&quot; member is based on a &quot;MemoryTTFDataStream&quot; and has only 38 glyphs (so it might already be a subset). The available tables of the TTF are only: &lt;span class=&quot;error&quot;&gt;&amp;#91;fpgm, head, cvt , glyf, loca, gasp, hmtx, prep, hhea, maxp&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;The variables of the underyling font are:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;	PDType0Font  (id=58)	
	afmStandard14	&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;	
	avgFontWidth	0.0	
	cMap	CMap  -&amp;gt; Identity-H
	cMapUCS2	&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;	
	descendantFont	PDCIDFontType2  (id=155)	
	dict	COSDictionary  -&amp;gt; COSDictionary{(COSName{Type}:COSName{Font}) (COSName{BaseFont}:COSName{AAAMSE+OpenSans-Bold}) (COSName{Subtype}:COSName{Type0}) (COSName{Encoding}:COSName{Identity-H}) (COSName{DescendantFonts}:COSArray{[COSDictionary{(COSName{Type}:COSName{Font}) (COSName{Subtype}:COSName{CIDFontType2}) (COSName{BaseFont}:COSName{AAAMSE+OpenSans-Bold}) (COSName{CIDSystemInfo}:COSDictionary{(COSName{Registry}:COSString{Adobe}) (COSName{Ordering}:COSString{Identity}) (COSName{Supplement}:COSInt{0}) }) (COSName{FontDescriptor}:COSDictionary{(COSName{Type}:COSName{FontDescriptor}) (COSName{FontName}:COSName{AAAMSE+OpenSans-Bold}) (COSName{Flags}:COSInt{4}) (COSName{FontWeight}:COSFloat{700.0}) (COSName{ItalicAngle}:COSFloat{0.0}) (COSName{FontBBox}:COSArray{[COSFloat{-619.1406}, COSFloat{-292.96875}, COSFloat{1318.8477}, COSFloat{1068.8477}]}) (COSName{Ascent}:COSFloat{1068.8477}) (COSName{Descent}:COSFloat{-292.96875}) (COSName{CapHeight}:COSFloat{713.8672}) (COSName{XHeight}:COSFloat{545.89844}) (COSName{StemV}:COSFloat{251.93846}) (COSName{FontFile2}:COSStream{(COSName{Filter}:COSName{FlateDecode}) (COSName{Length}:COSInt{5625}) (COSName{Length1}:COSInt{8036}) }) (COSName{CIDSet}:COSStream{(COSName{Filter}:COSName{FlateDecode}) (COSName{Length}:COSInt{20}) }) }) (COSName{W}:COSArray{[COSInt{3}, COSArray{[COSInt{260}]}, COSInt{68}, COSArray{[COSInt{604}, COSInt{633}, COSInt{514}, COSInt{633}, COSInt{591}]}, COSInt{74}, COSArray{[COSInt{565}, COSInt{657}, COSInt{305}]}, COSInt{15}, COSArray{[COSInt{290}]}, COSInt{79}, COSArray{[COSInt{305}]}, COSInt{16}, COSArray{[COSInt{322}]}, COSInt{80}, COSArray{[COSInt{982}]}, COSInt{17}, COSArray{[COSInt{285}]}, COSInt{81}, COSArray{[COSInt{657}, COSInt{619}]}, COSInt{19}, COSArray{[COSInt{571}]}, COSInt{83}, COSArray{[COSInt{633}]}, COSInt{20}, COSArray{[COSInt{571}]}, COSInt{85}, COSArray{[COSInt{454}, COSInt{497}, COSInt{434}, COSInt{657}]}, COSInt{27}, COSArray{[COSInt{571}, COSInt{571}, COSInt{285}]}, COSInt{93}, COSArray{[COSInt{488}]}, COSInt{36}, COSArray{[COSInt{690}, COSInt{672}]}, COSInt{40}, COSArray{[COSInt{560}]}, COSInt{48}, COSArray{[COSInt{943}, COSInt{813}]}, COSInt{53}, COSArray{[COSInt{660}, COSInt{551}, COSInt{579}, COSInt{756}]}, COSInt{61}, COSArray{[COSInt{579}]}]}) (COSName{CIDToGIDMap}:COSStream{(COSName{Filter}:COSName{FlateDecode}) (COSName{Length}:COSInt{84}) (COSName{Length1}:COSInt{188}) }) }]}) (COSName{ToUnicode}:COSStream{(COSName{Filter}:COSName{FlateDecode}) (COSName{Length}:COSInt{324}) }) }
	embedder	PDCIDFontType2Embedder 
	fontDescriptor	&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;	
	fontWidthOfSpace	-1.0	
	isCMapPredefined	&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;	
	isDescendantCJK	&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;	
	noUnicode	HashSet&amp;lt;E&amp;gt;  -&amp;gt; empty
	toUnicodeCMap	&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;	
	widths	&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I will try to find a minimum example on how to reproduce this. Currently it is only reproducible as part of a bigger package :|&lt;/p&gt;</description>
                <environment>Version 2.0.0-RC2</environment>
        <key id="12917280">PDFBOX-3144</key>
            <summary>NullPointerException in TTFSubsetter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jahewson">John Hewson</assignee>
                                    <reporter username="phax">Philip Helger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2015 15:41:48 +0000</created>
                <updated>Thu, 17 Mar 2016 19:08:22 +0000</updated>
                            <resolved>Wed, 2 Dec 2015 17:09:53 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15034068" author="jahewson" created="Tue, 1 Dec 2015 17:00:59 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The available tables of the TTF are only: &lt;span class=&quot;error&quot;&gt;&amp;#91;fpgm, head, cvt , glyf, loca, gasp, hmtx, prep, hhea, maxp&amp;#93;&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There&apos;s your problem. Without a &quot;cmap&quot; table, PDFBox can&apos;t use the font.&lt;/p&gt;</comment>
                            <comment id="15034072" author="jahewson" created="Tue, 1 Dec 2015 17:03:54 +0000"  >&lt;p&gt;Can you post the stack trace of the NullPointerException?&lt;/p&gt;</comment>
                            <comment id="15035510" author="phax" created="Wed, 2 Dec 2015 09:09:35 +0000"  >&lt;p&gt;Here is the stacktrace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.NullPointerException
  at org.apache.fontbox.ttf.TTFSubsetter.add(TTFSubsetter.java:106)
  at org.apache.fontbox.ttf.TTFSubsetter.addAll(TTFSubsetter.java:123)
  at org.apache.pdfbox.pdmodel.font.TrueTypeEmbedder.subset(TrueTypeEmbedder.java:295)
  at org.apache.pdfbox.pdmodel.font.PDType0Font.subset(PDType0Font.java:162)
  at org.apache.pdfbox.pdmodel.PDDocument.save(PDDocument.java:1102)
  at com..... (my code)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15035787" author="phax" created="Wed, 2 Dec 2015 13:34:17 +0000"  >&lt;p&gt;The problem was, that I loaded a TTF font that was assigned to a dummy PDDocument, because at the time of loading the target PDDocument was not available. I change my code so that the loading of the font happens at the target PDDocument and than it was working as expected....&lt;/p&gt;</comment>
                            <comment id="15036148" author="jira-bot" created="Wed, 2 Dec 2015 17:09:11 +0000"  >&lt;p&gt;Commit 1717659 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jahewson&quot; class=&quot;user-hover&quot; rel=&quot;jahewson&quot;&gt;jahewson&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1717659&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1717659&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3144&quot; title=&quot;NullPointerException in TTFSubsetter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3144&quot;&gt;&lt;del&gt;PDFBOX-3144&lt;/del&gt;&lt;/a&gt;: throw exception if font to embed has no cmap&lt;/p&gt;</comment>
                            <comment id="15036151" author="jahewson" created="Wed, 2 Dec 2015 17:09:53 +0000"  >&lt;p&gt;Ok, I&apos;ve added some code to avoid the NPE in the future.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 50 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p4dj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>