<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:51:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5904] Fontbox OpenTypeFont should use isPostScript() internally, not isPostScript</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5904</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;OpenTypeFont&apos;s isPostScript()&#160;is defined as:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isPostScript()
&#160; &#160; {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; isPostScript || tables.containsKey(CFFTable.TAG) || tables.containsKey(&lt;span class=&quot;code-quote&quot;&gt;&quot;CFF2&quot;&lt;/span&gt;);
&#160; &#160; } &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;See: &lt;a href=&quot;https://github.com/apache/pdfbox/blob/trunk/fontbox/src/main/java/org/apache/fontbox/ttf/OpenTypeFont.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/pdfbox/blob/trunk/fontbox/src/main/java/org/apache/fontbox/ttf/OpenTypeFont.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So it checks for the presence of key tables (CFF, CFF2).&lt;/p&gt;

&lt;p&gt;However, the getters in the class only checks the private variable isPostScript, not the method.&lt;/p&gt;

&lt;p&gt;This causes buggy font files with the wrong version tag but with a CFF table to throw exceptions.&#160;&lt;/p&gt;

&lt;p&gt;To fix: replace the internall references&#160; to isPostScript by calls to isPostScript().&#160;&lt;/p&gt;

&lt;p&gt;Workaround: crack open the module and create a custom class in the same package and have it call setVersion(Float.intBitsToFloat(0x4F54F4F4)), but that kind of sucks.&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13599320">PDFBOX-5904</key>
            <summary>Fontbox OpenTypeFont should use isPostScript() internally, not isPostScript</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="jxtps">Jxtps</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Nov 2024 01:25:34 +0000</created>
                <updated>Sat, 7 Dec 2024 06:53:24 +0000</updated>
                                            <version>3.0.3 PDFBox</version>
                                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17900709" author="tilman" created="Sun, 24 Nov 2024 16:40:17 +0000"  >&lt;p&gt;Which ones? getCFF(), getGlyph(), getPath() ?&lt;/p&gt;</comment>
                            <comment id="17900786" author="lehmi" created="Mon, 25 Nov 2024 06:33:33 +0000"  >&lt;p&gt;I guess it is a simply name clash. We should find a better name for the private variable.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxtps&quot; class=&quot;user-hover&quot; rel=&quot;jxtps&quot;&gt;jxtps&lt;/a&gt; Can you give an example how you get those buggy font files? What are you doing?&lt;/p&gt;</comment>
                            <comment id="17901852" author="jira-bot" created="Fri, 29 Nov 2024 06:41:58 +0000"  >&lt;p&gt;Commit 1922214 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1922214&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1922214&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5904&quot; title=&quot;Fontbox OpenTypeFont should use isPostScript() internally, not isPostScript&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5904&quot;&gt;PDFBOX-5904&lt;/a&gt;: rename member variable to be more clear&lt;/p&gt;</comment>
                            <comment id="17901853" author="jira-bot" created="Fri, 29 Nov 2024 06:42:13 +0000"  >&lt;p&gt;Commit 1922215 from lehmi@apache.org in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1922215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1922215&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5904&quot; title=&quot;Fontbox OpenTypeFont should use isPostScript() internally, not isPostScript&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5904&quot;&gt;PDFBOX-5904&lt;/a&gt;: rename member variable to be more clear&lt;/p&gt;</comment>
                            <comment id="17901858" author="lehmi" created="Fri, 29 Nov 2024 06:52:55 +0000"  >&lt;p&gt;I&apos;ve renamed the member variable to avoid misunderstandings. &lt;/p&gt;</comment>
                            <comment id="17902009" author="jxtps" created="Sat, 30 Nov 2024 05:06:33 +0000"  >&lt;p&gt;There seems to be some confusion, sorry for not having been more clear. Right now, getCFF() is implemented as:&#160;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; CFFTable getCFF() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
&#160; &#160; {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!hasPostScriptTag)
&#160; &#160; &#160; &#160; {
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UnsupportedOperationException(&lt;span class=&quot;code-quote&quot;&gt;&quot;TTF fonts &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not have a CFF table&quot;&lt;/span&gt;);
&#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (CFFTable) getTable(CFFTable.TAG);
&#160; &#160; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This should be:&#160;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; CFFTable getCFF() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
&#160; &#160; {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!isPostscript())
&#160; &#160; &#160; &#160; {
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UnsupportedOperationException(&lt;span class=&quot;code-quote&quot;&gt;&quot;TTF fonts &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not have a CFF table&quot;&lt;/span&gt;);
&#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (CFFTable) getTable(CFFTable.TAG);
&#160; &#160; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Analogously in getGlyph(), and getPath(). &lt;/p&gt;

&lt;p&gt;This came from a font file I encountered in the wild, but I&apos;m unfortunately not at liberty to share the file itself. It&apos;s fairly easy to simulate - just overwrite OTTO with 1.0 (though that will of course require updating the checksums...)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17903206" author="lehmi" created="Thu, 5 Dec 2024 07:18:23 +0000"  >&lt;p&gt;I&apos;m still hesitant to simply change the code without a sample.&lt;/p&gt;

&lt;p&gt;So, what exactly is your use case? &lt;/p&gt;

&lt;p&gt;Do you have a pdf containing a malformed font? &lt;/p&gt;

&lt;p&gt;Or do you have a malformed font file, and if so what are you trying to do? &lt;/p&gt;

&lt;p&gt;Where do you get those buggy font files you mentioned in the description?&lt;/p&gt;</comment>
                            <comment id="17903258" author="mkl" created="Thu, 5 Dec 2024 08:48:56 +0000"  >&lt;p&gt;Or from a different perspective: If the font files actually are buggy, exceptions indeed should be thrown, shouldn&apos;t they?&lt;/p&gt;</comment>
                            <comment id="17903801" author="jxtps" created="Sat, 7 Dec 2024 06:52:50 +0000"  >&lt;p&gt;The class as currently implemented is inconsistent. isPostscript() doesn&apos;t just look at the OTTO version (hasPostScriptTag), it also checks for the presence of the tables. This means that I as a user of the class can query isPostscript(), get true for a non-OTTO file, and then get an exception even though there is a CFF table in the file. That seems... weird. &lt;/p&gt;

&lt;p&gt;So the perspective I&apos;m coming from is &quot;hey, these two very related concepts are being used in a way that makes the class inconsistent, here&apos;s how to make it consistent&quot;. &lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1sng0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>