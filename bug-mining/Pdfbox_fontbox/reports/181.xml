<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:49:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3120] ArrayIndexOutOfBoundsException in CodespaceRange.isPartialMatch / CMap is invalid</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3120</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.ArrayIndexOutOfBoundsException: 1
    org.apache.fontbox.cmap.CodespaceRange.isPartialMatch(CodespaceRange.java:129)
    org.apache.fontbox.cmap.CMap.readCode(CMap.java:133)
    org.apache.pdfbox.pdmodel.font.PDType0Font.readCode(PDType0Font.java:454)
    org.apache.pdfbox.contentstream.PDFStreamEngine.showText(PDFStreamEngine.java:677)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12914563">PDFBOX-3120</key>
            <summary>ArrayIndexOutOfBoundsException in CodespaceRange.isPartialMatch / CMap is invalid</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Nov 2015 17:54:11 +0000</created>
                <updated>Thu, 17 Mar 2016 19:07:15 +0000</updated>
                            <resolved>Wed, 20 Jan 2016 17:21:22 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15014033" author="jira-bot" created="Thu, 19 Nov 2015 17:58:31 +0000"  >&lt;p&gt;Commit 1715227 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1715227&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1715227&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3120&quot; title=&quot;ArrayIndexOutOfBoundsException in CodespaceRange.isPartialMatch / CMap is invalid&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3120&quot;&gt;&lt;del&gt;PDFBOX-3120&lt;/del&gt;&lt;/a&gt;: avoid ArrayIndexOutOfBoundsException&lt;/p&gt;</comment>
                            <comment id="15014036" author="tilman" created="Thu, 19 Nov 2015 17:59:27 +0000"  >&lt;p&gt;The last fix removes the unchecked exception, but rendering doesn&apos;t work:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.io.IOException: CMap is invalid
        at org.apache.fontbox.cmap.CMap.readCode(CMap.java:166)
        at org.apache.pdfbox.pdmodel.font.PDType0Font.readCode(PDType0Font.java:454)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15107150" author="phax" created="Tue, 19 Jan 2016 18:34:42 +0000"  >&lt;p&gt;Is this maybe related to the changes made to &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3151&quot; title=&quot;getStringWidth is terribly slow (and resulting document is invalid)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3151&quot;&gt;&lt;del&gt;PDFBOX-3151&lt;/del&gt;&lt;/a&gt;???&lt;/p&gt;</comment>
                            <comment id="15107175" author="jira-bot" created="Tue, 19 Jan 2016 18:48:43 +0000"  >&lt;p&gt;Commit 1725590 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1725590&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1725590&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3120&quot; title=&quot;ArrayIndexOutOfBoundsException in CodespaceRange.isPartialMatch / CMap is invalid&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3120&quot;&gt;&lt;del&gt;PDFBOX-3120&lt;/del&gt;&lt;/a&gt;: fixed codespace range matching algorithm&lt;/p&gt;</comment>
                            <comment id="15107182" author="lehmi" created="Tue, 19 Jan 2016 18:50:59 +0000"  >&lt;p&gt;I&apos;ve fixed the codespace range algorithm (only fully matches are valid) and now everything works fine.&lt;/p&gt;</comment>
                            <comment id="15107185" author="lehmi" created="Tue, 19 Jan 2016 18:51:53 +0000"  >&lt;p&gt;No, the codespace range matching algorithm was the issue.&lt;/p&gt;</comment>
                            <comment id="15107298" author="tilman" created="Tue, 19 Jan 2016 19:50:47 +0000"  >&lt;p&gt;The file from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2950&quot; title=&quot;Chinese font substitution issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2950&quot;&gt;&lt;del&gt;PDFBOX-2950&lt;/del&gt;&lt;/a&gt;.pdf and &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2563&quot; title=&quot;[PATCH] Use cmap for Type0/TTF fallback&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2563&quot;&gt;&lt;del&gt;PDFBOX-2563&lt;/del&gt;&lt;/a&gt;.pdf fails, the chinese or japanese glyphs do no longer appear.&lt;/p&gt;</comment>
                            <comment id="15107459" author="lehmi" created="Tue, 19 Jan 2016 21:22:28 +0000"  >&lt;p&gt;Thanks for the pointer. I&apos;ve ran some first tests and can confirm the issue with the second pdf. The first one seems to be a font mapping issue. I&apos;ve got the same incomplete results with both versions (before/after my latest changes).&lt;br/&gt;
Still investigating&lt;/p&gt;</comment>
                            <comment id="15107502" author="tilman" created="Tue, 19 Jan 2016 21:36:59 +0000"  >&lt;p&gt;To be sure, I reverted the two changes and the files render properly. Maybe the effect is different on my system (W7) and yours?&lt;/p&gt;</comment>
                            <comment id="15108102" author="lehmi" created="Wed, 20 Jan 2016 06:29:29 +0000"  >&lt;p&gt;Yes, it seems related to the OS (Fedora linux) or better to the installed fonts. I&apos;m going to concentrate on the second pdf first.&lt;/p&gt;</comment>
                            <comment id="15108415" author="jira-bot" created="Wed, 20 Jan 2016 11:46:35 +0000"  >&lt;p&gt;Commit 1725703 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1725703&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1725703&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3120&quot; title=&quot;ArrayIndexOutOfBoundsException in CodespaceRange.isPartialMatch / CMap is invalid&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3120&quot;&gt;&lt;del&gt;PDFBOX-3120&lt;/del&gt;&lt;/a&gt;: fixed if clause&lt;/p&gt;</comment>
                            <comment id="15108419" author="lehmi" created="Wed, 20 Jan 2016 11:51:41 +0000"  >&lt;p&gt;I&apos;ve fixed the regression and now both pdfs are working again (on W7). I&apos;ve to doublecheck the first one on linux when I&apos;m back home.&lt;/p&gt;</comment>
                            <comment id="15108487" author="tilman" created="Wed, 20 Jan 2016 13:03:45 +0000"  >&lt;p&gt;Yes it works fine on W7, thanks.&lt;/p&gt;</comment>
                            <comment id="15108899" author="jira-bot" created="Wed, 20 Jan 2016 16:54:33 +0000"  >&lt;p&gt;Commit 1725754 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1725754&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1725754&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3120&quot; title=&quot;ArrayIndexOutOfBoundsException in CodespaceRange.isPartialMatch / CMap is invalid&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3120&quot;&gt;&lt;del&gt;PDFBOX-3120&lt;/del&gt;&lt;/a&gt;: fixed code formatting&lt;/p&gt;</comment>
                            <comment id="15108979" author="lehmi" created="Wed, 20 Jan 2016 17:21:22 +0000"  >&lt;p&gt;The file from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2950&quot; title=&quot;Chinese font substitution issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2950&quot;&gt;&lt;del&gt;PDFBOX-2950&lt;/del&gt;&lt;/a&gt; still doesn&apos;t work on fedora, but that issue isn&apos;t related to this one. It looks like a font mapping issue.&lt;br/&gt;
Set to resolved&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12773294" name="PDFBOX-3120-127166-p5.pdf" size="6890" author="tilman" created="Thu, 19 Nov 2015 17:56:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 43 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2onmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>