<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:51:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5961] IllegalArgumentException: Not a valid Unicode code point: 0xE28496</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5961</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;IllegalArgumentException: Not a valid Unicode code point: 0xE28496
    java.base/java.lang.String.valueOfCodePoint(String.java:3345)
    java.base/java.lang.Character.toString(Character.java:8053)
    org.apache.pdfbox.pdmodel.font.PDType0Font.toUnicode(PDType0Font.java:548)
    org.apache.pdfbox.pdmodel.font.PDFont.toUnicode(PDFont.java:450)
    org.apache.pdfbox.text.LegacyPDFStreamEngine.showGlyph(LegacyPDFStreamEngine.java:279)
    org.apache.pdfbox.debugger.pagepane.DebugTextOverlay$DebugTextStripper.showGlyph(DebugTextOverlay.java:209)
    org.apache.pdfbox.contentstream.PDFStreamEngine.showText(PDFStreamEngine.java:792)
    org.apache.pdfbox.contentstream.PDFStreamEngine.showTextString(PDFStreamEngine.java:651)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The problems are somehow related to the /ToUnicode stream at &lt;tt&gt;Root/Pages/Kids/&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;/Resources/Font/F3/ToUnicode&lt;/tt&gt;. This is a different bug than &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5960&quot; title=&quot;diameter symbol missing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5960&quot;&gt;PDFBOX-5960&lt;/a&gt; and not the problem that is in PDF.js 19527. I played around a bit supporting 3 byte codes (memo for me: version before 21.2 12:20) but it&apos;s still the same exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13609355">PDFBOX-5961</key>
            <summary>IllegalArgumentException: Not a valid Unicode code point: 0xE28496</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Feb 2025 12:05:14 +0000</created>
                <updated>Thu, 24 Apr 2025 18:37:51 +0000</updated>
                            <resolved>Sun, 23 Feb 2025 09:36:06 +0000</resolved>
                                    <version>2.0.33</version>
                    <version>3.0.4 PDFBox</version>
                    <version>4.0.0</version>
                                    <fixVersion>2.0.34</fixVersion>
                    <fixVersion>3.0.5 PDFBox</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17929153" author="jira-bot" created="Fri, 21 Feb 2025 12:35:25 +0000"  >&lt;p&gt;Commit 1923961 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1923961&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1923961&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5961&quot; title=&quot;IllegalArgumentException: Not a valid Unicode code point: 0xE28496&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5961&quot;&gt;&lt;del&gt;PDFBOX-5961&lt;/del&gt;&lt;/a&gt;: cast to use correct method&lt;/p&gt;</comment>
                            <comment id="17929154" author="tilman" created="Fri, 21 Feb 2025 12:42:23 +0000"  >&lt;p&gt;It turns out that this is because &lt;tt&gt;Character.toString()&lt;/tt&gt; has a new overload in jdk11, so I add the cast so it&apos;s using the old one. We could also catch the exception instead.&lt;/p&gt;</comment>
                            <comment id="17929160" author="tilman" created="Fri, 21 Feb 2025 13:07:16 +0000"  >&lt;p&gt;The problematic number is the number sign, but as UTF8. But the PDF specification mentions &quot;It shall use the beginbfchar, endbfchar, beginbfrange, and endbfrange operators to define the mapping from character codes to Unicode character sequences expressed in UTF-16BE encoding.&quot;&lt;br/&gt;
However Adobe Reader is able to extract it.&lt;/p&gt;</comment>
                            <comment id="17929167" author="mkl" created="Fri, 21 Feb 2025 14:07:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;The problematic number is the number sign, but as UTF8. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Could you explain in detail? I had a quick look at the ToUnicode map, and here &quot;&#8470;&quot; (U+2116) is mapped to as UTF-16 in a bfrange entry:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;E28480&amp;gt; &amp;lt;E284BF&amp;gt; &amp;lt;2100&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17929170" author="tilman" created="Fri, 21 Feb 2025 14:34:12 +0000"  >&lt;p&gt;Hmm, I guess there&apos;s a bug in my &quot;support 3 bytes&quot; code change in CMap.java (not committed). What I meant is that I entered E2 84 96 (from the exception) in google and found that it&apos;s the UTF8 for the number sign.&lt;/p&gt;</comment>
                            <comment id="17929186" author="tilman" created="Fri, 21 Feb 2025 15:59:28 +0000"  >&lt;p&gt;Indeed, there was a bug in the code, a call to &lt;tt&gt;return toUnicode(code, 2)&lt;/tt&gt; instead of whatever length is needed. Fixing this brings a proper extraction of the &quot;&#8470;&quot; and &lt;tt&gt;Character.toString()&lt;/tt&gt; is no longer reached. However there are also 4 bytes codes in that file so I&apos;ll try to fix that as well.&lt;/p&gt;</comment>
                            <comment id="17929225" author="tilman" created="Fri, 21 Feb 2025 18:28:38 +0000"  >&lt;p&gt;No improvements (not surprising, when doing debug output it was only the &#8470; that had more than 2 bytes). Also no changes in my own text extraction test files. We&apos;ll see in the &quot;big&quot; regression tests if there&apos;s anything new. I&apos;ll commit for the trunk during the weekend and then wait a bit before committing for the other versions.&lt;/p&gt;</comment>
                            <comment id="17929321" author="jira-bot" created="Sat, 22 Feb 2025 08:46:07 +0000"  >&lt;p&gt;Commit 1923977 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1923977&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1923977&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5961&quot; title=&quot;IllegalArgumentException: Not a valid Unicode code point: 0xE28496&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5961&quot;&gt;&lt;del&gt;PDFBOX-5961&lt;/del&gt;&lt;/a&gt;: support 3 / 4 byte input values&lt;/p&gt;</comment>
                            <comment id="17929322" author="tilman" created="Sat, 22 Feb 2025 08:49:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; why the different maps &lt;tt&gt;charToUnicodeOneByte&lt;/tt&gt; / &lt;tt&gt;charToUnicodeTwoBytes&lt;/tt&gt;? I don&apos;t see any advantage except in &lt;tt&gt;CMap.useCmap()&lt;/tt&gt; where it will be slightly faster because one doesn&apos;t have to check the value of the key like now done in the additional code. Or did I miss something?&lt;/p&gt;</comment>
                            <comment id="17929339" author="lehmi" created="Sat, 22 Feb 2025 10:56:05 +0000"  >&lt;p&gt;We don&apos;t store the origin byte values but convert them into integer values. Doing so the origin length of the byte values gets lost. According to &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4749&quot; title=&quot;Text Extraction leads to weird result - toUnicodeCMap is &amp;#39;AdHoc-UCS&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4749&quot;&gt;&lt;del&gt;PDFBOX-4749&lt;/del&gt;&lt;/a&gt; it is important to know the length at least in some corner cases. On the other hand I wrote in that ticket that we should consider to refactor the (too early?!?) conversion of the byte value(s) to an integer.&lt;/p&gt;</comment>
                            <comment id="17929418" author="jira-bot" created="Sun, 23 Feb 2025 05:40:06 +0000"  >&lt;p&gt;Commit 1923992 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1923992&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1923992&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5961&quot; title=&quot;IllegalArgumentException: Not a valid Unicode code point: 0xE28496&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5961&quot;&gt;&lt;del&gt;PDFBOX-5961&lt;/del&gt;&lt;/a&gt;: support 3 / 4 byte input values&lt;/p&gt;</comment>
                            <comment id="17929419" author="jira-bot" created="Sun, 23 Feb 2025 05:40:10 +0000"  >&lt;p&gt;Commit 1923993 from Tilman Hausherr in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1923993&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1923993&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5961&quot; title=&quot;IllegalArgumentException: Not a valid Unicode code point: 0xE28496&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5961&quot;&gt;&lt;del&gt;PDFBOX-5961&lt;/del&gt;&lt;/a&gt;: support 3 / 4 byte input values&lt;/p&gt;</comment>
                            <comment id="17929438" author="jira-bot" created="Sun, 23 Feb 2025 08:39:49 +0000"  >&lt;p&gt;Commit 1923998 from Tilman Hausherr in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1923998&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1923998&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5961&quot; title=&quot;IllegalArgumentException: Not a valid Unicode code point: 0xE28496&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5961&quot;&gt;&lt;del&gt;PDFBOX-5961&lt;/del&gt;&lt;/a&gt;: refactor&lt;/p&gt;</comment>
                            <comment id="17929439" author="jira-bot" created="Sun, 23 Feb 2025 08:40:05 +0000"  >&lt;p&gt;Commit 1923999 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1923999&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1923999&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5961&quot; title=&quot;IllegalArgumentException: Not a valid Unicode code point: 0xE28496&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5961&quot;&gt;&lt;del&gt;PDFBOX-5961&lt;/del&gt;&lt;/a&gt;: refactor&lt;/p&gt;</comment>
                            <comment id="17929444" author="tilman" created="Sun, 23 Feb 2025 09:36:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; ok, I won&apos;t touch that.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkl&quot; class=&quot;user-hover&quot; rel=&quot;mkl&quot;&gt;mkl&lt;/a&gt; thanks for the help.&lt;/p&gt;</comment>
                            <comment id="17929610" author="tilman" created="Mon, 24 Feb 2025 08:29:08 +0000"  >&lt;p&gt;I ran the regression tests and the differences are math symbols, we get a few more than before.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13074908" name="PDFJS-19527.pdf" size="38681" author="tilman" created="Fri, 21 Feb 2025 12:07:27 +0000"/>
                            <attachment id="13074946" name="reports_pdfbox_3.0.4_vs_3.0.5_1.tar.xz" size="1279596" author="tilman" created="Mon, 24 Feb 2025 08:27:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ud28:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>