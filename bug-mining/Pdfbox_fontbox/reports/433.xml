<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:51:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5987] Can&apos;t render some Type1C fonts.</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5987</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;This PDF seems to have a font rendering issue in PDFBox.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;ve used both Poppler and Chrome to view the PDF, and it renders correctly. Stepping through the code on the first character, I see that we have a rendering list with commands that end in&lt;/p&gt;

&lt;p&gt;&#160;-40 41 DIV -41 21 DIV CLOSEPATH ENDCHAR&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This is not correct if you look at the byte sequence that ends in&lt;/p&gt;

&lt;p&gt;12 98 -89 12 12 -117 8 14&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Could be interpreted as&lt;/p&gt;

&lt;p&gt;-127 -41 28 -127 -127 0 RRCURVETO ENDCHAR&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So perhaps there is an off-by-one error somewhere or something?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13615213">PDFBOX-5987</key>
            <summary>Can&apos;t render some Type1C fonts.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="kalaspuffar">Daniel Persson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Apr 2025 13:23:11 +0000</created>
                <updated>Thu, 24 Apr 2025 18:37:52 +0000</updated>
                            <resolved>Tue, 15 Apr 2025 15:37:36 +0000</resolved>
                                    <version>2.0.33</version>
                    <version>3.0.4 PDFBox</version>
                                    <fixVersion>2.0.34</fixVersion>
                    <fixVersion>3.0.5 PDFBox</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                    <component>FontBox</component>
                    <component>Rendering</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17944391" author="tilman" created="Mon, 14 Apr 2025 15:32:43 +0000"  >&lt;p&gt;Something goes wrong converting from type2 to type1:&lt;/p&gt;

&lt;p&gt;type2Sequence: &lt;span class=&quot;error&quot;&gt;&amp;#91;618, 1979, 7, DIV|, HMOVETO|, -57, 35, DIV|, 0, -41, 36, DIV|, 22, 27, DIV|, -13, 20, DIV|, 96, 59, DIV|, RRCURVETO|, -8125, 32, DIV|, 27019, 40, DIV|, RLINETO|, -49, 43, DIV|, 83, 30, DIV|, 42, 43, DIV|, 65, 47, DIV|, 235, 76, DIV|, 0, RRCURVETO|, 1626, 37, DIV|, HLINETO|, 55, 26, DIV|, 0, 65, 47, DIV|, -40, 41, DIV|, 13, 20, DIV|, -41, 21, DIV|, RRCURVETO|, 5501, 43, DIV|, -6475, 19, DIV|, RLINETO|, 2207, 40, DIV|, -6835, 46, DIV|, 5809, 166, DIV|, -97, 548, 37, DIV|, -1453, 32, DIV|, RRCURVETO|, 42, 43, DIV|, HLINETO|, 201, 19, DIV|, 6829, 197, DIV|, 1187, 34, DIV|, 97, 2903, 49, DIV|, 9719, 61, DIV|, RRCURVETO|, 2948, 23, DIV|, 341, RLINETO|, 28, 43, DIV|, 34, 19, DIV|, 56, 43, DIV|, 17, 19, DIV|, 41, 21, DIV|, 0, RRCURVETO|, 1375, 32, DIV|, HLINETO|, 126, 43, DIV|, 0, 40, 41, DIV|, -56, 43, DIV|, -40, 41, DIV|, -125, 48, DIV|, RRCURVETO|, -8387, 33, DIV|, -21623, 32, DIV|, RLINETO|, -28, 43, DIV|, -96, 59, DIV|, -18, 17, DIV|, -22, 27, DIV|, -41, 28, DIV|, 0, RRCURVETO|, ENDCHAR|&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;type1Sequence: &lt;span class=&quot;error&quot;&gt;&amp;#91;618, 1979, 7, DIV|, HMOVETO|, -57, 35, DIV|, 0, -41, 36, DIV|, 22, 27, DIV|, -13, 20, DIV|, 96, 59, DIV|, -8125, 32, DIV|, 27019, 40, DIV|, -49, 43, DIV|, 83, 30, DIV|, 42, 43, DIV|, 65, 47, DIV|, 235, 76, DIV|, 1626, 37, DIV|, 55, 26, DIV|, 0, 65, 47, DIV|, -40, 41, DIV|, 13, 20, DIV|, -41, 21, DIV|, 5501, 43, DIV|, -6475, 19, DIV|, 2207, 40, DIV|, -6835, 46, DIV|, 5809, 166, DIV|, -97, 548, 37, DIV|, -1453, 32, DIV|, 42, 43, DIV|, 201, 19, DIV|, 6829, 197, DIV|, 1187, 34, DIV|, 97, 2903, 49, DIV|, 9719, 61, DIV|, 2948, 23, DIV|, 28, 43, DIV|, 34, 19, DIV|, 56, 43, DIV|, 17, 19, DIV|, 41, 21, DIV|, 1375, 32, DIV|, 126, 43, DIV|, 0, 40, 41, DIV|, -56, 43, DIV|, -40, 41, DIV|, -125, 48, DIV|, -8387, 33, DIV|, -21623, 32, DIV|, -28, 43, DIV|, -96, 59, DIV|, -18, 17, DIV|, -22, 27, DIV|, -41, 28, DIV|, CLOSEPATH|, ENDCHAR|&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17944403" author="tilman" created="Mon, 14 Apr 2025 16:13:09 +0000"  >&lt;p&gt;I had a look at the vanishing RRCURVETO. During conversion it has an empty number list and our current code does nothing. I suspect that the command can also get its arguments from a stack, so these would be the results of the previous DIV commands (and an isolated 0). There&apos;s a similar problem with HLINETO. I changed the code for that and now the &quot;V&quot; displays properly. However the initial file doesn&apos;t, there&apos;s more to do, here&apos;s how it looks &#128514;&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13075998/13075998_screenshot-1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="17944444" author="tilman" created="Mon, 14 Apr 2025 19:18:24 +0000"  >&lt;p&gt;The first strategy didn&apos;t work because addAlternatingCurve and addCurve do a switch between two numbers that may not be known at the time of calling. I tried a different solution, preproccessing the sequence to replace all &quot;DIV&quot; operations with their results and that worked immediately. However this is not a general solution. The best would probably be to get rid of the converter and do a full implementation of the type 2 charstring renderer. (Which would produce a lot of double code and possibly be useless if no font in the wild would use the extra features)&lt;/p&gt;</comment>
                            <comment id="17944456" author="kalaspuffar" created="Mon, 14 Apr 2025 20:28:01 +0000"  >&lt;p&gt;Hi Tilman.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Not sure how often this is used in the wild. But we have switched over to use PDFBox rendering more in our systems from Poppler and the last week I had at least 7 cases from different newspapers / magazines that had the issue. So there is definiatly PDFs produced with this issue.&#160; So if we find a solution, I can checkout that commit / branch and try it with more cases to verify.&lt;/p&gt;

&lt;p&gt;Best regards&lt;/p&gt;

&lt;p&gt;Daniel&lt;/p&gt;</comment>
                            <comment id="17944548" author="tilman" created="Tue, 15 Apr 2025 03:20:09 +0000"  >&lt;p&gt;new debug output:&lt;/p&gt;

&lt;p&gt;type2Sequence: &lt;span class=&quot;error&quot;&gt;&amp;#91;618, 1979, 7, DIV|, HMOVETO|, -57, 35, DIV|, 0, -41, 36, DIV|, 22, 27, DIV|, -13, 20, DIV|, 96, 59, DIV|, RRCURVETO|, -8125, 32, DIV|, 27019, 40, DIV|, RLINETO|, -49, 43, DIV|, 83, 30, DIV|, 42, 43, DIV|, 65, 47, DIV|, 235, 76, DIV|, 0, RRCURVETO|, 1626, 37, DIV|, HLINETO|, 55, 26, DIV|, 0, 65, 47, DIV|, -40, 41, DIV|, 13, 20, DIV|, -41, 21, DIV|, RRCURVETO|, 5501, 43, DIV|, -6475, 19, DIV|, RLINETO|, 2207, 40, DIV|, -6835, 46, DIV|, 5809, 166, DIV|, -97, 548, 37, DIV|, -1453, 32, DIV|, RRCURVETO|, 42, 43, DIV|, HLINETO|, 201, 19, DIV|, 6829, 197, DIV|, 1187, 34, DIV|, 97, 2903, 49, DIV|, 9719, 61, DIV|, RRCURVETO|, 2948, 23, DIV|, 341, RLINETO|, 28, 43, DIV|, 34, 19, DIV|, 56, 43, DIV|, 17, 19, DIV|, 41, 21, DIV|, 0, RRCURVETO|, 1375, 32, DIV|, HLINETO|, 126, 43, DIV|, 0, 40, 41, DIV|, -56, 43, DIV|, -40, 41, DIV|, -125, 48, DIV|, RRCURVETO|, -8387, 33, DIV|, -21623, 32, DIV|, RLINETO|, -28, 43, DIV|, -96, 59, DIV|, -18, 17, DIV|, -22, 27, DIV|, -41, 28, DIV|, 0, RRCURVETO|, ENDCHAR|&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;type1Sequence: &lt;span class=&quot;error&quot;&gt;&amp;#91;0, 618.0, HSBW|, 282.7143, HMOVETO|, -1.6285714, 0, -1.1388888, 0.8148148, -0.65, 1.6271186, RRCURVETO|, -253.90625, 675.475, RLINETO|, -1.1395348, 2.7666667, 0.9767442, 1.3829787, 3.0921052, 0, RRCURVETO|, 43.945946, HLINETO|, 2.1153846, 0, 1.3829787, -0.9756098, 0.65, -1.9523809, RRCURVETO|, 127.93023, -340.78946, RLINETO|, 55.175, -148.58696, 34.993977, -97, 14.810811, -45.40625, RRCURVETO|, 0.9767442, HLINETO|, 10.578947, 34.664974, 34.911766, 97, 59.2449, 159.32787, RRCURVETO|, 128.17392, 341, RLINETO|, 0.6511628, 1.7894737, 1.3023256, 0.8947368, 1.9523809, 0, RRCURVETO|, 42.96875, HLINETO|, 2.9302325, 0, 0.9756098, -1.3023256, -0.9756098, -2.6041667, RRCURVETO|, -254.15152, -675.71875, RLINETO|, -0.6511628, -1.6271186, -1.0588236, -0.8148148, -1.4642857, 0, RRCURVETO|, CLOSEPATH|, ENDCHAR|&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17944550" author="jira-bot" created="Tue, 15 Apr 2025 03:22:33 +0000"  >&lt;p&gt;Commit 1925086 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1925086&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1925086&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5987&quot; title=&quot;Can&amp;#39;t render some Type1C fonts.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5987&quot;&gt;&lt;del&gt;PDFBOX-5987&lt;/del&gt;&lt;/a&gt;: preprocess DIV commands&lt;/p&gt;</comment>
                            <comment id="17944554" author="tilman" created="Tue, 15 Apr 2025 03:37:32 +0000"  >&lt;p&gt;Please try with a snapshot build of the trunk:&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/4.0.0-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/4.0.0-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and tell whether it works with the other files.&lt;/p&gt;

&lt;p&gt;The special thing with the font file is that instead of using integer coordinates, it uses float numbers by dividing 2 integers. I assume that no other file I have does this because yours is the only file where rendering is improved.&lt;/p&gt;</comment>
                            <comment id="17944652" author="jira-bot" created="Tue, 15 Apr 2025 08:31:56 +0000"  >&lt;p&gt;Commit 1925090 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1925090&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1925090&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5987&quot; title=&quot;Can&amp;#39;t render some Type1C fonts.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5987&quot;&gt;&lt;del&gt;PDFBOX-5987&lt;/del&gt;&lt;/a&gt;: add comment, refactor, avoid Sonar warning&lt;/p&gt;</comment>
                            <comment id="17944722" author="kalaspuffar" created="Tue, 15 Apr 2025 13:50:23 +0000"  >&lt;p&gt;I&apos;ve now ran the fix against all the issues reported to me. I also ran our normal test batches without finding any issues.&lt;/p&gt;

&lt;p&gt;Sadly I could not cherry-pick your fix into the 3.0 branch.&lt;/p&gt;

&lt;p&gt;------------------------------------&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.14.0:compile (default-compile) on project fontbox: Compilation failure&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/danielp/github/pdfbox/fontbox/src/main/java/org/apache/fontbox/cff/Type2CharString.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;90,53&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &#160; symbol: &#160; variable DIV&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &#160; location: class org.apache.fontbox.cff.CharStringCommand&lt;/p&gt;

&lt;p&gt;------------------------------------&lt;/p&gt;

&lt;p&gt;So I ran the tests against trunk. But I would approve this fix for now.&lt;/p&gt;</comment>
                            <comment id="17944757" author="jira-bot" created="Tue, 15 Apr 2025 14:58:59 +0000"  >&lt;p&gt;Commit 1925095 from Tilman Hausherr in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1925095&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1925095&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5987&quot; title=&quot;Can&amp;#39;t render some Type1C fonts.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5987&quot;&gt;&lt;del&gt;PDFBOX-5987&lt;/del&gt;&lt;/a&gt;: preprocess DIV commands&lt;/p&gt;</comment>
                            <comment id="17944764" author="jira-bot" created="Tue, 15 Apr 2025 15:15:10 +0000"  >&lt;p&gt;Commit 1925096 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1925096&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1925096&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5987&quot; title=&quot;Can&amp;#39;t render some Type1C fonts.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5987&quot;&gt;&lt;del&gt;PDFBOX-5987&lt;/del&gt;&lt;/a&gt;: preprocess DIV commands&lt;/p&gt;</comment>
                            <comment id="17944771" author="tilman" created="Tue, 15 Apr 2025 15:37:36 +0000"  >&lt;p&gt;Thanks for the feedback. Yeah it was a bit tricky for 3.0, even more in 2.0. Which also shows that the refactorings made sense &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13075996" name="PDFBOX-5987.cff" size="33147" author="tilman" created="Mon, 14 Apr 2025 13:41:37 +0000"/>
                            <attachment id="13075995" name="PDFBOX-5987_reduced.pdf" size="19623" author="tilman" created="Mon, 14 Apr 2025 13:41:37 +0000"/>
                            <attachment id="13075994" name="font-issue.pdf" size="162754" author="kalaspuffar" created="Mon, 14 Apr 2025 13:06:45 +0000"/>
                            <attachment id="13075998" name="screenshot-1.png" size="36896" author="tilman" created="Mon, 14 Apr 2025 16:12:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            29 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1vcs0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>