<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:50:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4580] PDFTextStripper::getText() lead to OutOfMemoryError: Java heap space</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4580</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I just discovered a memory issue (Java heap space) that happen only if we try to use stripper.getText(pdfFile) on a pdf that has missing incorporated fonts (like the one in attachment).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;To replicate the issue you can use this snippet with the pdf file in attachment:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.pdfbox.pdmodel.PDDocument;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.pdfbox.text.PDFTextStripper;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.InputStream;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;OutOfMemoryExample {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {

        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;(InputStream docStream = &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread().getContextClassLoader().getResource(&lt;span class=&quot;code-quote&quot;&gt;&quot;ceh.pdf&quot;&lt;/span&gt;).openStream();
            PDDocument cd = PDDocument.load(docStream)){

            PDFTextStripper stripper = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFTextStripper();
            
            &lt;span class=&quot;code-comment&quot;&gt;// OutOfMemory here
&lt;/span&gt;            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;  pdfText = stripper.getText(cd);

            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(pdfText);
        }

    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13241476">PDFBOX-4580</key>
            <summary>PDFTextStripper::getText() lead to OutOfMemoryError: Java heap space</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="Readonly">Guilhermo</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Jun 2019 13:24:25 +0000</created>
                <updated>Tue, 30 Jun 2020 06:13:41 +0000</updated>
                            <resolved>Wed, 26 Jun 2019 17:33:01 +0000</resolved>
                                    <version>2.0.15</version>
                                    <fixVersion>2.0.17</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16872944" author="lehmi" created="Wed, 26 Jun 2019 05:44:59 +0000"  >&lt;p&gt;Thanaks for the report, this is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4489&quot; title=&quot;Memory issue on org.apache.fontbox.ttf.GlyphSubstitutionTable.readLangSysTable(GlyphSubstitutionTable.java:147)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4489&quot;&gt;&lt;del&gt;PDFBOX-4489&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;2.0.16 most likely will be released by the end of the week&lt;/p&gt;</comment>
                            <comment id="16872993" author="tilman" created="Wed, 26 Jun 2019 06:41:14 +0000"  >&lt;p&gt;Using the trunk, with -Xmx1g I also get an OOM, with -Xmx2g I get&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.IllegalArgumentException: The expected SubstFormat for LigatureSubstitutionTable is 1
    org.apache.fontbox.ttf.GlyphSubstitutionTable.readLigatureSubstitutionSubtable(GlyphSubstitutionTable.java:326)
    org.apache.fontbox.ttf.GlyphSubstitutionTable.readLookupTable(GlyphSubstitutionTable.java:277)
    org.apache.fontbox.ttf.GlyphSubstitutionTable.readLookupList(GlyphSubstitutionTable.java:239)
    org.apache.fontbox.ttf.GlyphSubstitutionTable.read(GlyphSubstitutionTable.java:103)
    org.apache.fontbox.ttf.TrueTypeFont.readTable(TrueTypeFont.java:377)
    org.apache.fontbox.ttf.TTFParser.parseTables(TTFParser.java:173)
    org.apache.fontbox.ttf.TTFParser.parse(TTFParser.java:150)
    org.apache.fontbox.ttf.TTFParser.parse(TTFParser.java:106)
    org.apache.pdfbox.pdmodel.font.PDTrueTypeFont.&amp;lt;init&amp;gt;(PDTrueTypeFont.java:108)
    org.apache.pdfbox.pdmodel.font.PDFontFactory.createFont(PDFontFactory.java:89)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But it works fine with -Xmx1g with 2.0.16.&lt;/p&gt;</comment>
                            <comment id="16873464" author="tilman" created="Wed, 26 Jun 2019 16:00:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; do you mind if I fix these? The OOM is also because of trash data in another table, and can be detected similarly to the bug in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4489&quot; title=&quot;Memory issue on org.apache.fontbox.ttf.GlyphSubstitutionTable.readLangSysTable(GlyphSubstitutionTable.java:147)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4489&quot;&gt;&lt;del&gt;PDFBOX-4489&lt;/del&gt;&lt;/a&gt;. The IllegalArgumentException is just the &quot;wrong&quot; exception.&lt;/p&gt;</comment>
                            <comment id="16873484" author="lehmi" created="Wed, 26 Jun 2019 16:20:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Please, proceed&lt;/p&gt;</comment>
                            <comment id="16873494" author="jira-bot" created="Wed, 26 Jun 2019 16:26:16 +0000"  >&lt;p&gt;Commit 1862157 from Tilman Hausherr in branch &apos;pdfbox/branches/issue4569&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862157&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862157&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4580&quot; title=&quot;PDFTextStripper::getText() lead to OutOfMemoryError: Java heap space&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4580&quot;&gt;&lt;del&gt;PDFBOX-4580&lt;/del&gt;&lt;/a&gt;: use IOException instead of IllegalArgumentException&lt;/p&gt;</comment>
                            <comment id="16873495" author="jira-bot" created="Wed, 26 Jun 2019 16:26:20 +0000"  >&lt;p&gt;Commit 1862158 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862158&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862158&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4580&quot; title=&quot;PDFTextStripper::getText() lead to OutOfMemoryError: Java heap space&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4580&quot;&gt;&lt;del&gt;PDFBOX-4580&lt;/del&gt;&lt;/a&gt;: use IOException instead of IllegalArgumentException&lt;/p&gt;</comment>
                            <comment id="16873496" author="jira-bot" created="Wed, 26 Jun 2019 16:26:25 +0000"  >&lt;p&gt;Commit 1862159 from Tilman Hausherr in branch &apos;pdfbox/branches/issue45&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862159&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862159&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4580&quot; title=&quot;PDFTextStripper::getText() lead to OutOfMemoryError: Java heap space&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4580&quot;&gt;&lt;del&gt;PDFBOX-4580&lt;/del&gt;&lt;/a&gt;: use IOException instead of IllegalArgumentException&lt;/p&gt;</comment>
                            <comment id="16873497" author="jira-bot" created="Wed, 26 Jun 2019 16:26:30 +0000"  >&lt;p&gt;Commit 1862160 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862160&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862160&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4580&quot; title=&quot;PDFTextStripper::getText() lead to OutOfMemoryError: Java heap space&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4580&quot;&gt;&lt;del&gt;PDFBOX-4580&lt;/del&gt;&lt;/a&gt;: use IOException instead of IllegalArgumentException&lt;/p&gt;</comment>
                            <comment id="16873543" author="jira-bot" created="Wed, 26 Jun 2019 17:30:30 +0000"  >&lt;p&gt;Commit 1862170 from Tilman Hausherr in branch &apos;pdfbox/branches/issue4569&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862170&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862170&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4580&quot; title=&quot;PDFTextStripper::getText() lead to OutOfMemoryError: Java heap space&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4580&quot;&gt;&lt;del&gt;PDFBOX-4580&lt;/del&gt;&lt;/a&gt;: check order of FeatureRecord array in the hope to detect corrupt table&lt;/p&gt;</comment>
                            <comment id="16873544" author="jira-bot" created="Wed, 26 Jun 2019 17:30:35 +0000"  >&lt;p&gt;Commit 1862171 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862171&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862171&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4580&quot; title=&quot;PDFTextStripper::getText() lead to OutOfMemoryError: Java heap space&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4580&quot;&gt;&lt;del&gt;PDFBOX-4580&lt;/del&gt;&lt;/a&gt;: check order of FeatureRecord array in the hope to detect corrupt table&lt;/p&gt;</comment>
                            <comment id="16873545" author="jira-bot" created="Wed, 26 Jun 2019 17:30:40 +0000"  >&lt;p&gt;Commit 1862172 from Tilman Hausherr in branch &apos;pdfbox/branches/issue45&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862172&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4580&quot; title=&quot;PDFTextStripper::getText() lead to OutOfMemoryError: Java heap space&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4580&quot;&gt;&lt;del&gt;PDFBOX-4580&lt;/del&gt;&lt;/a&gt;: check order of FeatureRecord array in the hope to detect corrupt table&lt;/p&gt;</comment>
                            <comment id="16873546" author="jira-bot" created="Wed, 26 Jun 2019 17:30:45 +0000"  >&lt;p&gt;Commit 1862173 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1862173&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1862173&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4580&quot; title=&quot;PDFTextStripper::getText() lead to OutOfMemoryError: Java heap space&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4580&quot;&gt;&lt;del&gt;PDFBOX-4580&lt;/del&gt;&lt;/a&gt;: check order of FeatureRecord array in the hope to detect corrupt table&lt;/p&gt;</comment>
                            <comment id="16873550" author="tilman" created="Wed, 26 Jun 2019 17:32:43 +0000"  >&lt;p&gt;Done. Unlike the other test, I check for &quot;&amp;gt;&quot; instead of &quot;&amp;gt;=&quot; because there were identical tags. Several files in our test set got a &quot;hit&quot;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310361">
                    <name>Blocked</name>
                                                                <inwardlinks description="Blocked">
                                        <issuelink>
            <issuekey id="13222519">PDFBOX-4489</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12972859" name="ceh.pdf" size="351617" author="Readonly" created="Tue, 25 Jun 2019 13:08:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 20 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z042yg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>