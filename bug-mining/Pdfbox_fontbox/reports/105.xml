<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:49:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-2215] NPE in PDTrueTypeFont.makeFontDescriptor</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-2215</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I get an NPE with the attached file:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.NullPointerException
	at org.apache.pdfbox.pdmodel.font.PDTrueTypeFont.makeFontDescriptor(PDTrueTypeFont.java:337)
	at org.apache.pdfbox.pdmodel.font.PDTrueTypeFont.getFontDescriptor(PDTrueTypeFont.java:150)
	at org.apache.pdfbox.pdmodel.font.PDFont.getFontHeight(PDFont.java:350)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12728002">PDFBOX-2215</key>
            <summary>NPE in PDTrueTypeFont.makeFontDescriptor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jahewson">John Hewson</assignee>
                                    <reporter username="tilman">Tilman Hausherr</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Jul 2014 18:02:05 +0000</created>
                <updated>Thu, 17 Mar 2016 19:06:58 +0000</updated>
                            <resolved>Tue, 5 Aug 2014 20:08:26 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>PDModel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14085254" author="jira-bot" created="Mon, 4 Aug 2014 20:35:48 +0000"  >&lt;p&gt;Commit 1615776 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jahewson&quot; class=&quot;user-hover&quot; rel=&quot;jahewson&quot;&gt;jahewson&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1615776&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1615776&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2215&quot; title=&quot;NPE in PDTrueTypeFont.makeFontDescriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2215&quot;&gt;&lt;del&gt;PDFBOX-2215&lt;/del&gt;&lt;/a&gt;: Use Unicode cmap rather than Windows cmap&lt;/p&gt;</comment>
                            <comment id="14085304" author="tilman" created="Mon, 4 Aug 2014 21:21:32 +0000"  >&lt;p&gt;Sorry, but the exception is now a different one on page 3:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.IllegalArgumentException: ttf: no suitable cmap
        at org.apache.pdfbox.pdmodel.font.PDTrueTypeFont.makeFontDescriptor(PDTrueTypeFont.java:296)
        at org.apache.pdfbox.pdmodel.font.PDTrueTypeFont.getFontDescriptor(PDTrueTypeFont.java:150)
        at org.apache.pdfbox.pdmodel.font.PDFont.getFontHeight(PDFont.java:350)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14085453" author="jahewson" created="Mon, 4 Aug 2014 22:59:59 +0000"  >&lt;p&gt;I don&apos;t get that exception, the entire file renders fine for me?&lt;/p&gt;</comment>
                            <comment id="14085462" author="jira-bot" created="Mon, 4 Aug 2014 23:06:34 +0000"  >&lt;p&gt;Commit 1615823 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jahewson&quot; class=&quot;user-hover&quot; rel=&quot;jahewson&quot;&gt;jahewson&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1615823&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1615823&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2215&quot; title=&quot;NPE in PDTrueTypeFont.makeFontDescriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2215&quot;&gt;&lt;del&gt;PDFBOX-2215&lt;/del&gt;&lt;/a&gt;: Improved error message&lt;/p&gt;</comment>
                            <comment id="14085463" author="jahewson" created="Mon, 4 Aug 2014 23:07:34 +0000"  >&lt;p&gt;I&apos;ve added some more detail to the error message in the trunk, see what it says.&lt;/p&gt;</comment>
                            <comment id="14086000" author="tilman" created="Tue, 5 Aug 2014 08:31:39 +0000"  >&lt;p&gt;I get this on p. 3, and I used a clean version from svn:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.IllegalArgumentException: ttf:
no suitable cmap &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; font &lt;span class=&quot;code-quote&quot;&gt;&apos;Symbol&apos;&lt;/span&gt;, found: [{1 0}, {3 0}]
        at org.apache.pdfbox.pdmodel.font.PDTrueTypeFont.makeFontDescriptor(PDTrueTypeFont.java:297)
        at org.apache.pdfbox.pdmodel.font.PDTrueTypeFont.getFontDescriptor(PDTrueTypeFont.java:151)
        at org.apache.pdfbox.pdmodel.font.PDFont.getFontHeight(PDFont.java:350)
        at org.apache.pdfbox.util.PDFStreamEngine.processText(PDFStreamEngine.java:431)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The PDFToImage cmd line app doesn&apos;t recover from that.&lt;/p&gt;</comment>
                            <comment id="14086634" author="jahewson" created="Tue, 5 Aug 2014 19:23:06 +0000"  >&lt;p&gt;It works for me but makeFontDescriptor is called when a font is loaded from the local system, so it seems that our local systems are providing different TTF files for &quot;Symbol&quot;, I&apos;m on OS X 10.9.3. From the extra information in the exception message I can compare the cmaps in our respective fonts:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Tilman: [{1 0}, {3 0}] = (Macintosh, Roman), (Windows, Symbol)
  John: [{0 3}, {1 0}] = (Unicode, BMP), (Macintosh, Roman)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The old code was looking for a (Windows, Unicode) cmap, while the new code is looking for a (Unicode, Full/BMP) cmap. Neither will work on your system with this font, because it only has a (Windows, Symbol) cmap. I&apos;ve added some code to the trunk so that PDFBox will look for the following cmaps in order: Unicode/Full, Unicode/BMP, Windows/Unicode, Windows/Symbol.&lt;/p&gt;

&lt;p&gt;Microsoft&apos;s &lt;a href=&quot;http://www.microsoft.com/typography/otspec/recom.htm&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Recommendations for OpenType Fonts&lt;/a&gt; says that &quot;Symbol&quot; encoding actually means &quot;Unicode, non-standard character set&quot;, so this seems ok, because we want a Unicode cmap.&lt;/p&gt;</comment>
                            <comment id="14086639" author="jira-bot" created="Tue, 5 Aug 2014 19:26:09 +0000"  >&lt;p&gt;Commit 1615983 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jahewson&quot; class=&quot;user-hover&quot; rel=&quot;jahewson&quot;&gt;jahewson&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1615983&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1615983&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2215&quot; title=&quot;NPE in PDTrueTypeFont.makeFontDescriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2215&quot;&gt;&lt;del&gt;PDFBOX-2215&lt;/del&gt;&lt;/a&gt;: Search for symbol cmap too, in priority order&lt;/p&gt;</comment>
                            <comment id="14086680" author="tilman" created="Tue, 5 Aug 2014 20:08:26 +0000"  >&lt;p&gt;That fixed it, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12656310" name="PDFBOX-2215-027073.pdf" size="519752" author="tilman" created="Thu, 17 Jul 2014 18:03:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>406107</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 15 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xvvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>406127</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>