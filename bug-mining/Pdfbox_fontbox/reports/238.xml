<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:50:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3806] Nullpointer exception in getLeftSideBearing</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3806</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;While processing todays batch of data we got a Nullpointer exception in getLeftSideBearing. Sadly I can&apos;t give you the PDF.&lt;/p&gt;

&lt;p&gt;```&lt;br/&gt;
    public int getLeftSideBearing(int gid) &lt;/p&gt;
{
        return gid &amp;lt; this.numHMetrics?this.leftSideBearing[gid]:this.nonHorizontalLeftSideBearing[gid - this.numHMetrics];
    }
&lt;p&gt;```&lt;/p&gt;

&lt;p&gt;In this function there could be a case where nonHorizontalLeftSideBearing is null and you still ask for a GID in larger or equal to numHMetrics.&lt;/p&gt;

&lt;p&gt;First time I see this issue and so far only 4 characters in one PDF has this issue so not critical.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13074409">PDFBOX-3806</key>
            <summary>Nullpointer exception in getLeftSideBearing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="kalaspuffar">Daniel Persson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 May 2017 06:47:35 +0000</created>
                <updated>Fri, 21 Jul 2017 04:40:14 +0000</updated>
                            <resolved>Fri, 26 May 2017 12:40:32 +0000</resolved>
                                    <version>2.0.6</version>
                                    <fixVersion>2.0.7</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16023658" author="tilman" created="Wed, 24 May 2017 20:46:09 +0000"  >&lt;p&gt;Could you extract the extract the font from the PDF file with PDFDebugger and attach it here, also post the complete stack trace? And why is the code you posted not the source code, did you modify something? I&apos;m wondering what&apos;s going on.&lt;/p&gt;</comment>
                            <comment id="16025845" author="kalaspuffar" created="Fri, 26 May 2017 05:49:46 +0000"  >&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
        at org.apache.fontbox.ttf.HorizontalMetricsTable.getLeftSideBearing(HorizontalMetricsTable.java:122)&lt;br/&gt;
        at org.apache.fontbox.ttf.GlyphTable.getGlyphData(GlyphTable.java:195)&lt;br/&gt;
        at org.apache.fontbox.ttf.GlyphTable.getGlyph(GlyphTable.java:176)&lt;br/&gt;
        at org.apache.pdfbox.pdmodel.font.PDTrueTypeFont.getPath(PDTrueTypeFont.java:447)&lt;br/&gt;
        at org.apache.pdfbox.debugger.fontencodingpane.SimpleFont.getGlyphs(SimpleFont.java:72)&lt;br/&gt;
        at org.apache.pdfbox.debugger.fontencodingpane.SimpleFont.&amp;lt;init&amp;gt;(SimpleFont.java:44)&lt;br/&gt;
        at org.apache.pdfbox.debugger.fontencodingpane.FontEncodingPaneController.&amp;lt;init&amp;gt;(FontEncodingPaneController.java:89)&lt;br/&gt;
        at org.apache.pdfbox.debugger.PDFDebugger.showFont(PDFDebugger.java:1069)&lt;br/&gt;
        at org.apache.pdfbox.debugger.PDFDebugger.jTree1ValueChanged(PDFDebugger.java:801)&lt;br/&gt;
        at org.apache.pdfbox.debugger.PDFDebugger.access$200(PDFDebugger.java:118)&lt;br/&gt;
        at org.apache.pdfbox.debugger.PDFDebugger$3.valueChanged(PDFDebugger.java:330)&lt;br/&gt;
        at javax.swing.JTree.fireValueChanged(JTree.java:2927)&lt;br/&gt;
        at javax.swing.JTree$TreeSelectionRedirector.valueChanged(JTree.java:3391)&lt;br/&gt;
        at javax.swing.tree.DefaultTreeSelectionModel.fireValueChanged(DefaultTreeSelectionModel.java:635)&lt;br/&gt;
        at javax.swing.tree.DefaultTreeSelectionModel.notifyPathChange(DefaultTreeSelectionModel.java:1093)&lt;br/&gt;
        at javax.swing.tree.DefaultTreeSelectionModel.setSelectionPaths(DefaultTreeSelectionModel.java:294)&lt;br/&gt;
        at javax.swing.tree.DefaultTreeSelectionModel.setSelectionPath(DefaultTreeSelectionModel.java:188)&lt;br/&gt;
        at javax.swing.JTree.setSelectionPath(JTree.java:1634)&lt;br/&gt;
        at javax.swing.plaf.basic.BasicTreeUI.selectPathForEvent(BasicTreeUI.java:2393)&lt;br/&gt;
        at javax.swing.plaf.basic.BasicTreeUI$Handler.handleSelection(BasicTreeUI.java:3609)&lt;br/&gt;
        at javax.swing.plaf.basic.BasicTreeUI$Handler.mousePressed(BasicTreeUI.java:3548)&lt;br/&gt;
        at java.awt.Component.processMouseEvent(Component.java:6530)&lt;br/&gt;
        at javax.swing.JComponent.processMouseEvent(JComponent.java:3324)&lt;br/&gt;
        at java.awt.Component.processEvent(Component.java:6298)&lt;br/&gt;
        at java.awt.Container.processEvent(Container.java:2236)&lt;br/&gt;
        at java.awt.Component.dispatchEventImpl(Component.java:4889)&lt;br/&gt;
        at java.awt.Container.dispatchEventImpl(Container.java:2294)&lt;br/&gt;
        at java.awt.Component.dispatchEvent(Component.java:4711)&lt;br/&gt;
        at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4888)&lt;br/&gt;
        at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4522)&lt;br/&gt;
        at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4466)&lt;br/&gt;
        at java.awt.Container.dispatchEventImpl(Container.java:2280)&lt;br/&gt;
        at java.awt.Window.dispatchEventImpl(Window.java:2746)&lt;br/&gt;
        at java.awt.Component.dispatchEvent(Component.java:4711)&lt;br/&gt;
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)&lt;br/&gt;
        at java.awt.EventQueue.access$500(EventQueue.java:97)&lt;br/&gt;
        at java.awt.EventQueue$3.run(EventQueue.java:709)&lt;br/&gt;
        at java.awt.EventQueue$3.run(EventQueue.java:703)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)&lt;br/&gt;
        at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)&lt;br/&gt;
        at java.awt.EventQueue$4.run(EventQueue.java:731)&lt;br/&gt;
        at java.awt.EventQueue$4.run(EventQueue.java:729)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)&lt;br/&gt;
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)&lt;br/&gt;
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)&lt;br/&gt;
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)&lt;br/&gt;
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)&lt;br/&gt;
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)&lt;br/&gt;
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)&lt;br/&gt;
        at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)&lt;/p&gt;</comment>
                            <comment id="16025846" author="kalaspuffar" created="Fri, 26 May 2017 05:50:47 +0000"  >&lt;p&gt;When it comes to the code seems like I cut from the disassembled code in IntelliJ.&lt;/p&gt;

&lt;p&gt;    public int getLeftSideBearing(int gid)&lt;br/&gt;
    {&lt;br/&gt;
        if (gid &amp;lt; numHMetrics)&lt;/p&gt;
        {
            return leftSideBearing[gid];
        }
&lt;p&gt;        else&lt;/p&gt;
        {
            return nonHorizontalLeftSideBearing[gid - numHMetrics];
        }
&lt;p&gt;   }&lt;/p&gt;</comment>
                            <comment id="16026026" author="tilman" created="Fri, 26 May 2017 08:58:37 +0000"  >&lt;p&gt;Thanks for the file. The font is incorrect that the second table (&quot;leftSideBearing&quot;) was missing, although it should have had 2 entries (numGlyphs 9 minus 7 from the first table):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;leftSideBearing 	FWord[ ] 	Here the advanceWidth is assumed to be the same as the advanceWidth for the last entry above. The number of entries in this array is derived from numGlyphs (from &#8216;maxp&#8217; table) minus numberOfHMetrics. This generally is used with a run of monospaced glyphs (e.g., Kanji fonts or Courier fonts). Only one run is allowed and it must be at the end. This allows a monospaced font to vary the left side bearing values for each glyph. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;So I&apos;ll change the code to move &lt;tt&gt;if (bytesRead &amp;lt; getLength())&lt;/tt&gt; down to make sure that the table is always created. Its entries will be 0, obviously.&lt;/p&gt;</comment>
                            <comment id="16026029" author="jira-bot" created="Fri, 26 May 2017 09:02:08 +0000"  >&lt;p&gt;Commit 1796260 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1796260&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1796260&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3806&quot; title=&quot;Nullpointer exception in getLeftSideBearing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3806&quot;&gt;&lt;del&gt;PDFBOX-3806&lt;/del&gt;&lt;/a&gt;: always create nonHorizontalLeftSideBearing table in correct size, even if no bytes are left to read&lt;/p&gt;</comment>
                            <comment id="16026030" author="jira-bot" created="Fri, 26 May 2017 09:02:13 +0000"  >&lt;p&gt;Commit 1796261 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1796261&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1796261&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3806&quot; title=&quot;Nullpointer exception in getLeftSideBearing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3806&quot;&gt;&lt;del&gt;PDFBOX-3806&lt;/del&gt;&lt;/a&gt;: always create nonHorizontalLeftSideBearing table in correct size, even if no bytes are left to read&lt;/p&gt;</comment>
                            <comment id="16026056" author="tilman" created="Fri, 26 May 2017 09:26:53 +0000"  >&lt;p&gt;Please test with a snapshot&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.7-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.7-SNAPSHOT/&lt;/a&gt;&lt;br/&gt;
and confirm that it works now.&lt;/p&gt;</comment>
                            <comment id="16026203" author="kalaspuffar" created="Fri, 26 May 2017 12:16:47 +0000"  >&lt;p&gt;I&apos;ve tested with our application with installed trunk (3.0.0-SNAPSHOT), pdfbox-app (2.0.7-SNAPSHOT) and pdfbox-debugger (2.0.7 SNAPSHOT).&lt;/p&gt;

&lt;p&gt;Don&apos;t see any errors.&lt;/p&gt;

&lt;p&gt;Best regards&lt;br/&gt;
Daniel&lt;/p&gt;</comment>
                            <comment id="16026225" author="tilman" created="Fri, 26 May 2017 12:40:32 +0000"  >&lt;p&gt;Thanks for the feedback!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12870004" name="font.raw" size="4993" author="kalaspuffar" created="Fri, 26 May 2017 05:51:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fe27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>