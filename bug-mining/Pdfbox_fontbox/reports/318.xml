<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:50:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5123] OS2WindowsMetricsTable &quot;version&quot; variable confused with OpenType specification version</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5123</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;OS2WindowsMetricsTable contains the following code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    /**
     * This will read the required data from the stream.
     * 
     * @param ttf The font that is being read.
     * @param data The stream to read the data from.
     * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException If there is an error reading the data.
     */
    @Override
    void read(TrueTypeFont ttf, TTFDataStream data) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
    {
        version = data.readUnsignedShort();
        averageCharWidth = data.readSignedShort();
        weightClass = data.readUnsignedShort();
        widthClass = data.readUnsignedShort();
        fsType = data.readSignedShort();
        subscriptXSize = data.readSignedShort();
        subscriptYSize = data.readSignedShort();
        subscriptXOffset = data.readSignedShort();
        subscriptYOffset = data.readSignedShort();
        superscriptXSize = data.readSignedShort();
        superscriptYSize = data.readSignedShort();
        superscriptXOffset = data.readSignedShort();
        superscriptYOffset = data.readSignedShort();
        strikeoutSize = data.readSignedShort();
        strikeoutPosition = data.readSignedShort();
        familyClass = data.readSignedShort();
        panose = data.read(10);
        unicodeRange1 = data.readUnsignedInt();
        unicodeRange2 = data.readUnsignedInt();
        unicodeRange3 = data.readUnsignedInt();
        unicodeRange4 = data.readUnsignedInt();
        achVendId = data.readString(4);
        fsSelection = data.readUnsignedShort();
        firstCharIndex = data.readUnsignedShort();
        lastCharIndex = data.readUnsignedShort();
        typoAscender = data.readSignedShort();
        typoDescender = data.readSignedShort();
        typoLineGap = data.readSignedShort();
        winAscent = data.readUnsignedShort();
        winDescent = data.readUnsignedShort();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (version &amp;gt;= 1)
        {
            codePageRange1 = data.readUnsignedInt();
            codePageRange2 = data.readUnsignedInt();
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (version &amp;gt;= 1.2)
        {
            sxHeight = data.readSignedShort();
            sCapHeight = data.readSignedShort();
            usDefaultChar = data.readUnsignedShort();
            usBreakChar = data.readUnsignedShort();
            usMaxContext = data.readUnsignedShort();
        }
        initialized = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here, &quot;version&quot; is an integer, local to this class, which is supposed to represent the version number of the metrics table itself (not the whole font). In the case of the first font in the attached PDF, this has a value of 3. (Note that this PDF is itself buggy, declaring a table version of 3 for what&apos;s clearly a version 0 table, but that&apos;s &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5124&quot; title=&quot;Improperly declared OS2WindowsMetricsTable version (v0 table declard as v3) in embedded font stops parsing with EOFException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5124&quot;&gt;&lt;del&gt;PDFBOX-5124&lt;/del&gt;&lt;/a&gt;.)&lt;/p&gt;

&lt;p&gt;However, at the end of the code, this is seemingly confused with the font version number, and is compared against the float value 1.2. Java allows comparison between int and float, so no compile-time error or warning is raised.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13363066">PDFBOX-5123</key>
            <summary>OS2WindowsMetricsTable &quot;version&quot; variable confused with OpenType specification version</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="Googulator">G&#225;bor Stefanik</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Mar 2021 17:47:51 +0000</created>
                <updated>Fri, 19 Mar 2021 15:42:04 +0000</updated>
                            <resolved>Wed, 10 Mar 2021 18:12:02 +0000</resolved>
                                    <version>2.0.22</version>
                                    <fixVersion>2.0.23</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17297646" author="tilman" created="Mon, 8 Mar 2021 18:58:27 +0000"  >&lt;p&gt;The 1.2 should be 2, correct?&lt;br/&gt;
&lt;a href=&quot;https://docs.microsoft.com/en-us/typography/opentype/spec/os2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.microsoft.com/en-us/typography/opentype/spec/os2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17297695" author="googulator" created="Mon, 8 Mar 2021 20:48:16 +0000"  >&lt;p&gt;Yes, versions 1, 2 and 5 are the ones that introduce new fields. (5 seems to be unsupported in PDFBox.)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Also related to &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5124&quot; title=&quot;Improperly declared OS2WindowsMetricsTable version (v0 table declard as v3) in embedded font stops parsing with EOFException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5124&quot;&gt;&lt;del&gt;PDFBOX-5124&lt;/del&gt;&lt;/a&gt;, as warned in that specification, there is actually an early variant of version 0 in circulation, &quot;version -1&quot; if you wish, that ends at usLastCharIndex (so 5 fields shorter than the canonical version 0). So, it would be wise to also treat those 5 fields as optional.&lt;/p&gt;</comment>
                            <comment id="17298516" author="jira-bot" created="Wed, 10 Mar 2021 03:57:42 +0000"  >&lt;p&gt;Commit 1887405 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1887405&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1887405&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5123&quot; title=&quot;OS2WindowsMetricsTable &amp;quot;version&amp;quot; variable confused with OpenType specification version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5123&quot;&gt;&lt;del&gt;PDFBOX-5123&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5124&quot; title=&quot;Improperly declared OS2WindowsMetricsTable version (v0 table declard as v3) in embedded font stops parsing with EOFException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5124&quot;&gt;&lt;del&gt;PDFBOX-5124&lt;/del&gt;&lt;/a&gt;: gracefully recover from EOF&lt;/p&gt;</comment>
                            <comment id="17298518" author="jira-bot" created="Wed, 10 Mar 2021 03:57:46 +0000"  >&lt;p&gt;Commit 1887406 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1887406&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1887406&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5123&quot; title=&quot;OS2WindowsMetricsTable &amp;quot;version&amp;quot; variable confused with OpenType specification version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5123&quot;&gt;&lt;del&gt;PDFBOX-5123&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5124&quot; title=&quot;Improperly declared OS2WindowsMetricsTable version (v0 table declard as v3) in embedded font stops parsing with EOFException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5124&quot;&gt;&lt;del&gt;PDFBOX-5124&lt;/del&gt;&lt;/a&gt;: gracefully recover from EOF&lt;/p&gt;</comment>
                            <comment id="17298956" author="jira-bot" created="Wed, 10 Mar 2021 16:43:48 +0000"  >&lt;p&gt;Commit 1887444 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1887444&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1887444&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5123&quot; title=&quot;OS2WindowsMetricsTable &amp;quot;version&amp;quot; variable confused with OpenType specification version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5123&quot;&gt;&lt;del&gt;PDFBOX-5123&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5124&quot; title=&quot;Improperly declared OS2WindowsMetricsTable version (v0 table declard as v3) in embedded font stops parsing with EOFException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5124&quot;&gt;&lt;del&gt;PDFBOX-5124&lt;/del&gt;&lt;/a&gt;: gracefully recover from EOF in legacy version 0 segment&lt;/p&gt;</comment>
                            <comment id="17298958" author="jira-bot" created="Wed, 10 Mar 2021 16:43:52 +0000"  >&lt;p&gt;Commit 1887445 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1887445&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1887445&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5123&quot; title=&quot;OS2WindowsMetricsTable &amp;quot;version&amp;quot; variable confused with OpenType specification version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5123&quot;&gt;&lt;del&gt;PDFBOX-5123&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5124&quot; title=&quot;Improperly declared OS2WindowsMetricsTable version (v0 table declard as v3) in embedded font stops parsing with EOFException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5124&quot;&gt;&lt;del&gt;PDFBOX-5124&lt;/del&gt;&lt;/a&gt;: gracefully recover from EOF in legacy version 0 segment&lt;/p&gt;</comment>
                            <comment id="17299033" author="tilman" created="Wed, 10 Mar 2021 18:12:02 +0000"  >&lt;p&gt;We&apos;re done here. Thanks for the report!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13021885" name="SZAMLA-20190417-20190012706-ININET-BroadBitHungary-11646-HUF.pdf" size="30046" author="Googulator" created="Mon, 8 Mar 2021 17:34:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 35 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0of5s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>