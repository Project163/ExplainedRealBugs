<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:50:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3725] Problem with Type1 font parser</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3725</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;the parser uses &quot;readSimpleDict&quot; to parse the Metrics.&lt;br/&gt;
This allows&lt;br/&gt;
/Metrics 100 dict dup begin ....... end def&lt;br/&gt;
but not&lt;br/&gt;
/Metrics 100 dict def Metrics begin ..... end&lt;br/&gt;
This variant seems to work in most other pdf tools, however&lt;/p&gt;</description>
                <environment>linux</environment>
        <key id="13057614">PDFBOX-3725</key>
            <summary>Problem with Type1 font parser</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="musicman">Wolfgang Hamann</reporter>
                        <labels>
                            <label>type1</label>
                            <label>type1font</label>
                    </labels>
                <created>Mon, 20 Mar 2017 18:04:32 +0000</created>
                <updated>Wed, 3 May 2017 20:05:29 +0000</updated>
                                            <version>2.0.5</version>
                                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15933462" author="musicman" created="Mon, 20 Mar 2017 20:18:15 +0000"  >&lt;p&gt;this font  file has the character outlines unencrypted. It is also used for the pdf&lt;/p&gt;</comment>
                            <comment id="15933602" author="tilman" created="Mon, 20 Mar 2017 21:29:50 +0000"  >&lt;p&gt;I tested with a few tools... most can display the file correctly, some can&apos;t. Those who can do so probably because they use a font library for all type 1 fonts, not just those allowed for PDF - here&apos;s an excerpt from the Adobe Type 1 Font Format:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The PostScript language commands used in a Type 1 font program&lt;br/&gt;
must conform to a much stricter syntax than do&lt;br/&gt;
&#8220;normal&#8221; PostScript language programs.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I made a small change in the file so that the Metrics part could be read, and then the error was in the BBox segment.&lt;/p&gt;</comment>
                            <comment id="15933624" author="tilman" created="Mon, 20 Mar 2017 21:37:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://www.pdf-online.com/osa/validate.aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.pdf-online.com/osa/validate.aspx&lt;/a&gt;&lt;br/&gt;
doesn&apos;t like your file&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The embedded font program &apos;Keycap&apos; cannot be read.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Is this a file you created yourself?&lt;/p&gt;</comment>
                            <comment id="15934078" author="musicman" created="Tue, 21 Mar 2017 04:31:01 +0000"  >&lt;p&gt;yes it is my font, and my pdf writer as well.&lt;br/&gt;
I am currently working on making ten years of business documents PDF/A compliant, and I would rather have a documented modification of these files than recreating them. So far my retrofit action pleases acrobat, but not verapdf (which relies on pdfbox)&lt;/p&gt;</comment>
                            <comment id="15934117" author="tilman" created="Tue, 21 Mar 2017 05:28:36 +0000"  >&lt;p&gt;Yes one version of veraPDF uses a modified version of PDFBox. Another one (which I haven&apos;t tested) uses their own parser.&lt;/p&gt;

&lt;p&gt;However being able to view a file in Adobe doesn&apos;t mean it is PDF/A compliant. Even the blue bar (which you don&apos;t have) doesn&apos;t mean it is PDF/A compliant. You need a validator. The one I used yesterday (from PDF-Tools) has existed for a long time, and we&apos;ve used it as &quot;gold standard&quot; to improve our own validator (PDFBox preflight).&lt;/p&gt;

&lt;p&gt;In other words: even if we&apos;d somehow be able to parse your alleged type 1 font, this wouldn&apos;t make your file PDF/A compliant. You&apos;d may have to convince every validator manufacturer that their validator is incorrect.&lt;/p&gt;</comment>
                            <comment id="15934934" author="musicman" created="Tue, 21 Mar 2017 17:23:42 +0000"  >&lt;p&gt;Hi, I recall having a &quot;nice&quot; time creating that software, about 20 years ago... The T1 spec  seems to written with the assumption that a font will be processed by an actual interpreter, and that parts of the file may be read by a simple parser, to extract info about the font. It specifically mentions&lt;br/&gt;
some restrictions to interoperate with good ol&apos; Type Manager. &lt;br/&gt;
Consequently there are many ways to produce valid font code. Looking over pdfbox, it obviously tries to handle the Adobe style but also handles a few other styles that developers have encountered. Does it handle them right?&lt;br/&gt;
Readine Type1parser from the top, it expects&lt;br/&gt;
COUNT dict&lt;br/&gt;
followed by an optional dup (which would push the new fontdict on the stack)&lt;br/&gt;
and looks for values until it sees the&lt;br/&gt;
currentdict end&lt;br/&gt;
sequence, which also pushes the new fontdict. It is likely that a font with the &quot;dup&quot; near the top would not use the &quot;currentdict&quot; and thus run into an exception. Now, if the font designer were adding both codes but not compensating with an extra pop, the code would be incorrect PS - it might work in a PDF-only viewer but not in ghostscript. Should a validator accept a font that leaves trash on the stack?&lt;/p&gt;

&lt;p&gt;I dont think there is anywhere in T1 or PDF specs mandating the use of&lt;br/&gt;
/NAME COUNT dict dup begin ..... end def&lt;br/&gt;
instead of&lt;br/&gt;
/NAME COUNT dict def NAME begin ... end&lt;br/&gt;
This affects the Private dict and its contents as well. So, should a validator accept or refuse the pattern?&lt;/p&gt;

&lt;p&gt;I have had a look at various old fonts today, and found a few more variations that I would consider valid (even some that defien RD and friends within userdict - a set of fonts donated b ghostscript by Bitstream)&lt;br/&gt;
I cound not find any fonts declaring the BBox array besides mine ... I believe it was documented in an earlier version of the Type1 spec but its withdrawal not mentioned in the changes list.&lt;/p&gt;

&lt;p&gt;Best regards &lt;/p&gt;</comment>
                            <comment id="15934991" author="tilman" created="Tue, 21 Mar 2017 18:00:16 +0000"  >&lt;p&gt;Except for the BBox thing and the message by the PDF Tools validator, I haven&apos;t found a clear proof that your font file is &quot;wrong&quot;. I suspect that the author of our type1 parser took existing type 1 files and looked how they are structured. Obviously, we can&apos;t write a Postscript interpreter.&lt;/p&gt;

&lt;p&gt;The easiest for us would be that you create a patch... the second best would be that you tell the structure. Or create some conversion tool.&lt;/p&gt;</comment>
                            <comment id="15943103" author="musicman" created="Mon, 27 Mar 2017 11:41:23 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;this is a small patch, with a few comments added&lt;/p&gt;</comment>
                            <comment id="15943546" author="tilman" created="Mon, 27 Mar 2017 16:18:26 +0000"  >&lt;p&gt;Should this patch solve the problem with your file? Because it doesn&apos;t for me. Or does it apply to some other file that you didn&apos;t share?&lt;/p&gt;</comment>
                            <comment id="15943897" author="musicman" created="Mon, 27 Mar 2017 19:24:15 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I have made a few changes to my file to make it work with the current version of pdfbox, so I can try some other tool which relies on pdfbox too.&lt;br/&gt;
Specifically, I have removed that BBox array, which probably was required only by a very ancient version of postscript, but is still accepted by viewers (I tried acrobat reader, ghostscript, and xpdf)&lt;br/&gt;
I am currently trying to understand a different problem, and will maybe add a new case.&lt;/p&gt;
</comment>
                            <comment id="15945466" author="tilman" created="Tue, 28 Mar 2017 16:19:33 +0000"  >&lt;p&gt;Could you please attach a file that is improved by your change?&lt;/p&gt;</comment>
                            <comment id="15949792" author="musicman" created="Thu, 30 Mar 2017 20:47:31 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;this file corresponds to the changes in the patch. It is not the file I had in the first place (which would need a few more changes)&lt;br/&gt;
I want to point out that the patch allows more input variants but does not implement stricter checking ... with probably any verifier built on &quot;how typical files look&quot; it will be possible to prodice a file that validates but does not work in acrobat, ghostscript etc.&lt;/p&gt;

&lt;p&gt;Regards&lt;br/&gt;
Wolfgang&lt;/p&gt;</comment>
                            <comment id="15951160" author="jira-bot" created="Fri, 31 Mar 2017 15:45:42 +0000"  >&lt;p&gt;Commit 1789706 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1789706&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1789706&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3725&quot; title=&quot;Problem with Type1 font parser&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3725&quot;&gt;PDFBOX-3725&lt;/a&gt;: improve parser as suggested by Wolfgang Hamann&lt;/p&gt;</comment>
                            <comment id="15951161" author="jira-bot" created="Fri, 31 Mar 2017 15:45:47 +0000"  >&lt;p&gt;Commit 1789707 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1789707&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1789707&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3725&quot; title=&quot;Problem with Type1 font parser&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3725&quot;&gt;PDFBOX-3725&lt;/a&gt;: improve parser as suggested by Wolfgang Hamann&lt;/p&gt;</comment>
                            <comment id="15951196" author="tilman" created="Fri, 31 Mar 2017 16:11:42 +0000"  >&lt;p&gt;Thank you; I used almost all of your diff with minor formatting changes; I deleted your comment &quot;if present, the &quot;currentdict&quot; is not required&quot; because either it didn&apos;t have code related to it, or it applied to another code segment. I also included the &quot;noaccess&quot; changes despite not needed for your test file, I just take your word for it that it is important for other files &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Do you have more change wishes re type1 fonts? If yes lets do it in this issue.&lt;/p&gt;

&lt;p&gt;If you want to do some quality control on the generated PDFs after changes, i.e. that your PDF files are improving, have a look at TestPDFToImage.java, his will show any differences in rendering.&lt;/p&gt;</comment>
                            <comment id="15995544" author="tilman" created="Wed, 3 May 2017 20:05:29 +0000"  >&lt;p&gt;Removed target as this is a long term issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12859626" name="ft70.ps" size="2907" author="musicman" created="Mon, 20 Mar 2017 20:18:15 +0000"/>
                            <attachment id="12859627" name="kcap.pdf" size="4529" author="musicman" created="Mon, 20 Mar 2017 20:18:15 +0000"/>
                            <attachment id="12861329" name="mini2.pdf" size="99761" author="musicman" created="Thu, 30 Mar 2017 20:47:31 +0000"/>
                            <attachment id="12860648" name="t1p.tmp" size="3450" author="musicman" created="Mon, 27 Mar 2017 11:41:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 28 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3cj4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>