<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:50:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3395] Throwing exception when PDF has unused empty fonts embedded.</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3395</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;I was trying to follow up on the issues in our system and found that some PDF files threw ERRORs. These PDFs are produced by a publishing system and that system seems to add fonts when you change to them and add them even though they are never used. Or only space is used. Then they add this font with an empty glyf table. This results in that errors are thrown on files that are fine.&lt;/p&gt;

&lt;p&gt;Line 310 in TTFParser removes empty glyf tables.&lt;br/&gt;
        // skip tables with zero length&lt;br/&gt;
        if (table.getLength() == 0)&lt;/p&gt;
        {
            return null;
        }
&lt;p&gt;        return table;&lt;/p&gt;

&lt;p&gt;Line 215 of TTFParser throws exception when glyf table is missing.&lt;br/&gt;
            if (font.getGlyph() == null)&lt;/p&gt;
            {
                throw new IOException(&quot;glyf is mandatory&quot;);
            }</description>
                <environment></environment>
        <key id="12982310">PDFBOX-3395</key>
            <summary>Throwing exception when PDF has unused empty fonts embedded.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="kalaspuffar">Daniel Persson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jun 2016 12:23:36 +0000</created>
                <updated>Sat, 25 Mar 2017 18:12:41 +0000</updated>
                            <resolved>Wed, 13 Jul 2016 20:03:10 +0000</resolved>
                                    <version>2.0.1</version>
                    <version>2.0.2</version>
                    <version>2.0.3</version>
                                    <fixVersion>2.0.3</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15369142" author="tilman" created="Sat, 9 Jul 2016 15:36:58 +0000"  >&lt;p&gt;Please attach a sample file.&lt;/p&gt;</comment>
                            <comment id="15374381" author="tilman" created="Wed, 13 Jul 2016 05:36:19 +0000"  >&lt;p&gt;The file does not fail to render, it displays an error and another font is used. The alternative would be to log a warning (or less) and return an empty path.&lt;/p&gt;</comment>
                            <comment id="15374385" author="kalaspuffar" created="Wed, 13 Jul 2016 05:40:48 +0000"  >&lt;p&gt;Correct, that&apos;s why I logged this as a minor wish issue. Our logging framework alerts us on errors and this isn&apos;t one so waking up to a false positive isn&apos;t preferable.&lt;/p&gt;</comment>
                            <comment id="15374390" author="kalaspuffar" created="Wed, 13 Jul 2016 05:45:00 +0000"  >&lt;p&gt;Then again the specification doesn&apos;t say that a glyph table require any glyphs. So why should an empty generate a warning. A missing table, yes that is an error....&lt;/p&gt;</comment>
                            <comment id="15375357" author="jira-bot" created="Wed, 13 Jul 2016 17:05:14 +0000"  >&lt;p&gt;Commit 1752459 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1752459&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1752459&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3395&quot; title=&quot;Throwing exception when PDF has unused empty fonts embedded.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3395&quot;&gt;&lt;del&gt;PDFBOX-3395&lt;/del&gt;&lt;/a&gt;: allow missing glyf table&lt;/p&gt;</comment>
                            <comment id="15375358" author="jira-bot" created="Wed, 13 Jul 2016 17:05:27 +0000"  >&lt;p&gt;Commit 1752460 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1752460&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1752460&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3395&quot; title=&quot;Throwing exception when PDF has unused empty fonts embedded.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3395&quot;&gt;&lt;del&gt;PDFBOX-3395&lt;/del&gt;&lt;/a&gt;: allow missing glyf table&lt;/p&gt;</comment>
                            <comment id="15375371" author="jahewson" created="Wed, 13 Jul 2016 17:15:13 +0000"  >&lt;p&gt;I&apos;m not sure about this fix. Isn&apos;t the problem that our parser is treating an empty  glyph table as being missing, when in fact it is present, it&apos;s just empty. This fix seems to be propagating the parsing problem so that other logic has to handle a null glyph table, but it seems like the parser should actually just be producing an empty (but not null) glyph table?&lt;/p&gt;

&lt;p&gt;That would make the exception correct - glyf must be present. Instead the parser should tolerate it being empty and not parse it as null. Because it&apos;s not actually missing.&lt;/p&gt;</comment>
                            <comment id="15375379" author="kalaspuffar" created="Wed, 13 Jul 2016 17:19:39 +0000"  >&lt;p&gt;True, if you read the glyph table you&apos;ll get an empty one. The problem is the line that generally skips tables of lenght 0 in the parser. Seems a bit odd. If the font have defined a table then the empty one should be a valid table right?&lt;/p&gt;</comment>
                            <comment id="15375394" author="tilman" created="Wed, 13 Jul 2016 17:27:21 +0000"  >&lt;p&gt;1) that would be more complicated 2) in theory, the glyf table might also be missing. But I&apos;ll make a test to see what happens.&lt;/p&gt;</comment>
                            <comment id="15375419" author="jira-bot" created="Wed, 13 Jul 2016 17:46:58 +0000"  >&lt;p&gt;Commit 1752472 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1752472&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1752472&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3395&quot; title=&quot;Throwing exception when PDF has unused empty fonts embedded.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3395&quot;&gt;&lt;del&gt;PDFBOX-3395&lt;/del&gt;&lt;/a&gt;: revert last change and allow empty glyf table instead&lt;/p&gt;</comment>
                            <comment id="15375424" author="jira-bot" created="Wed, 13 Jul 2016 17:48:21 +0000"  >&lt;p&gt;Commit 1752474 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1752474&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1752474&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3395&quot; title=&quot;Throwing exception when PDF has unused empty fonts embedded.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3395&quot;&gt;&lt;del&gt;PDFBOX-3395&lt;/del&gt;&lt;/a&gt;: forgot to restore exception&lt;/p&gt;</comment>
                            <comment id="15375428" author="jira-bot" created="Wed, 13 Jul 2016 17:50:47 +0000"  >&lt;p&gt;Commit 1752475 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1752475&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1752475&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3395&quot; title=&quot;Throwing exception when PDF has unused empty fonts embedded.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3395&quot;&gt;&lt;del&gt;PDFBOX-3395&lt;/del&gt;&lt;/a&gt;: revert last change and allow empty glyf table instead&lt;/p&gt;</comment>
                            <comment id="15375440" author="tilman" created="Wed, 13 Jul 2016 17:56:26 +0000"  >&lt;p&gt;Ok, the new solution is better, only a single code line had to be changed.&lt;/p&gt;</comment>
                            <comment id="15375639" author="kalaspuffar" created="Wed, 13 Jul 2016 20:01:49 +0000"  >&lt;p&gt;Ran some of my test cases and the errors are gone. Now I only have warnings for missing Unicode mappings which are unrelated to this issue.&lt;/p&gt;</comment>
                            <comment id="15375641" author="tilman" created="Wed, 13 Jul 2016 20:03:10 +0000"  >&lt;p&gt;Thanks for the feedback!&lt;/p&gt;</comment>
                            <comment id="15375966" author="jahewson" created="Wed, 13 Jul 2016 23:07:56 +0000"  >&lt;p&gt;Excellent.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13003905">PDFBOX-3488</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 18 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zywv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>