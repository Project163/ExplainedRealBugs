<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:51:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5713] PfbParser fails to parse PFB font with multiple binary records.</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5713</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;ul&gt;
	&lt;li&gt;The attached PFB font can be opened in FontForge but PfbParser in fontbox fails to read it.&lt;/li&gt;
	&lt;li&gt;The problem is that fontbox assumes there are three records (ascii, binary, ascii) in the PFB file but the binary part is split into multiple shorter chunks (i.e. ascii, binary, ..., binary, ascii).&lt;/li&gt;
	&lt;li&gt;I didn&apos;t find that this is forbidden and according to FontForge behavior it seems to be valid.&lt;/li&gt;
	&lt;li&gt;The fix seems to be easy, it is probably sufficient to concatenate the binary records together in PfbParser and the result will work correctly.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13557308">PDFBOX-5713</key>
            <summary>PfbParser fails to parse PFB font with multiple binary records.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="jaromirdobry@kadel.cz">Jarom&#237;r Dobr&#253;</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Nov 2023 11:43:12 +0000</created>
                <updated>Thu, 30 Nov 2023 21:19:25 +0000</updated>
                            <resolved>Thu, 23 Nov 2023 04:44:06 +0000</resolved>
                                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.31</fixVersion>
                    <fixVersion>3.0.1 PDFBox</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17784404" author="JIRAUSER283200" created="Thu, 9 Nov 2023 11:52:36 +0000"  >&lt;p&gt;&#160;I also added PDF file with this font embedded in an invalid way - see &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2607&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PDFBOX-2607&lt;/a&gt;. If embedded correctly, this bug won&apos;t matter, PfbParser seems to be used only for incorrectly embedded PFB fonts.&lt;/p&gt;</comment>
                            <comment id="17784406" author="JIRAUSER283200" created="Thu, 9 Nov 2023 11:53:47 +0000"  >&lt;p&gt;And also note that PDFBox seems to work fine (but doesn&apos;t) if you have these fonts installed in the system font directory (there is a fallback for &quot;damaged fonts&quot;).&lt;/p&gt;</comment>
                            <comment id="17785167" author="tilman" created="Sat, 11 Nov 2023 12:09:31 +0000"  >&lt;p&gt;Do you have a specification of the PFB format? I can&apos;t find any. All I found is&lt;br/&gt;
&lt;a href=&quot;https://microsoft.public.win32.programmer.gdi.narkive.com/FMY0fUgG/font-file-specification-pfm-pfb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://microsoft.public.win32.programmer.gdi.narkive.com/FMY0fUgG/font-file-specification-pfm-pfb&lt;/a&gt;&lt;br/&gt;
which mentioned a no longer existing HP site that I tried in the wayback machine and it didn&apos;t work because of some javascript.&lt;/p&gt;</comment>
                            <comment id="17785195" author="lehmi" created="Sat, 11 Nov 2023 17:42:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; I guess I&apos;ve found something in the depths of my files ...  &lt;span class=&quot;error&quot;&gt;&amp;#91;^T1_SPEC.pdf&amp;#93;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="17785198" author="tilman" created="Sat, 11 Nov 2023 18:14:15 +0000"  >&lt;p&gt;Yes that one I have too, but it doesn&apos;t describe the PFB format, which is the first 6 bytes, and some bytes later. The T1 specification mentions only one binary and one ascii part.&lt;br/&gt;
I&apos;m wondering whether we should bother at all, this PDF is rendered and extracted properly despite that the (illegally embedded) font fails.&lt;br/&gt;
Also Adobe has discontinued type 1 font support for authoring.&lt;br/&gt;
&lt;a href=&quot;https://helpx.adobe.com/fonts/kb/postscript-type-1-fonts-end-of-support.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://helpx.adobe.com/fonts/kb/postscript-type-1-fonts-end-of-support.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17785276" author="lehmi" created="Sun, 12 Nov 2023 11:05:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; my bad, I just had a look at the title of the document and didn&apos;t look at the details. However, I guess I&apos;ve found something else  &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13064348/13064348_5040.Download_Fonts.pdf&quot; title=&quot;5040.Download_Fonts.pdf attached to PDFBOX-5713&quot;&gt;5040.Download_Fonts.pdf&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;  chapter 3.3 describes the format and it looks like the whole header thing in our parser is wrong&lt;/p&gt;</comment>
                            <comment id="17785279" author="tilman" created="Sun, 12 Nov 2023 11:26:12 +0000"  >&lt;p&gt;Thanks, yes, &quot;IBM PC format&quot; does look like the real thing although &quot;PFB&quot; is never mentioned.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jaromirdobry%40kadel.cz&quot; class=&quot;user-hover&quot; rel=&quot;jaromirdobry@kadel.cz&quot;&gt;jaromirdobry@kadel.cz&lt;/a&gt; can you modify your code so that it doesn&apos;t use the PFB_RECORDS array at all, and just checks that it&apos;s one of the markers that is mentioned? (I wonder whether &quot;3&quot; is used at all)&lt;/p&gt;</comment>
                            <comment id="17785280" author="lehmi" created="Sun, 12 Nov 2023 11:33:18 +0000"  >&lt;p&gt;The attached file follows the spec, it starts with an ASCII section, followed by a binary section and closed by another ASCII section. The whole file ends with the EOF-marker 0x80 0x03. I&apos;ve examined some of my local pfb fonts and they are looking exactly the same&lt;/p&gt;</comment>
                            <comment id="17785281" author="tilman" created="Sun, 12 Nov 2023 11:49:44 +0000"  >&lt;p&gt;Actually the file has 9 binary sections, but you&apos;re right, it does have the EOF marker (which the current code doesn&apos;t mention).&lt;/p&gt;

&lt;p&gt;type: 1, size: 5959&lt;br/&gt;
type: 2, size: 131066&lt;br/&gt;
type: 2, size: 131066&lt;br/&gt;
type: 2, size: 131066&lt;br/&gt;
type: 2, size: 131066&lt;br/&gt;
type: 2, size: 131066&lt;br/&gt;
type: 2, size: 131066&lt;br/&gt;
type: 2, size: 131066&lt;br/&gt;
type: 2, size: 131066&lt;br/&gt;
type: 2, size: 7562&lt;br/&gt;
type: 1, size: 532&lt;/p&gt;

&lt;p&gt;In theory the ascii and binary segments could be mixed, so there would be even more to do.&lt;/p&gt;</comment>
                            <comment id="17785283" author="lehmi" created="Sun, 12 Nov 2023 12:00:59 +0000"  >&lt;p&gt;Ups, interesting, I just scrolled over the binary segment to the end and found the ASCII segment including the EOF-marker. According the spec this is valid&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;There can be any number of segments in the file; lengths can be odd numbers,&lt;br/&gt;
and there can be several sequential segments of the same type&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We have to collect all those segments and combine them as segment1 ASCII and segment2 binary&lt;/p&gt;</comment>
                            <comment id="17785805" author="JIRAUSER283200" created="Tue, 14 Nov 2023 08:55:09 +0000"  >&lt;p&gt;Thank you for the PFB specification. I can make following fix:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Accept ascii segments (public) followed by binary ones (encrypted) and then possibly the trailer ascii and EOF.&lt;/li&gt;
	&lt;li&gt;The parser will combine the ascii segments into segment1 and all binary segments into segment2 the rest will be thrown away (as it already is now).&lt;/li&gt;
	&lt;li&gt;All other mixtures will result in an IOException (Incorrect record type - maybe better message about this being an unsupported font format rather than invalid).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I hope this will work practically for all the fonts and will not break any other functionality of fontbox.&lt;/p&gt;

&lt;p&gt;EDIT: Looking at the changes in *.diff file, I&apos;ve found that this is probably what exactly I&apos;ve already sent...&lt;/p&gt;</comment>
                            <comment id="17785808" author="JIRAUSER283200" created="Tue, 14 Nov 2023 09:02:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Do you think that we need to remove PFB_RECORDS array? If you want to accept this fix, it just allows repeating the records. The original idea of having their required order in PFB_RECORDS seems still good to me. Otherwise the code will be more complicated.&lt;/p&gt;</comment>
                            <comment id="17785815" author="JIRAUSER283200" created="Tue, 14 Nov 2023 09:24:47 +0000"  >&lt;p&gt;I also realized that I can make a much smaller change to do the same: &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13064386/13064386_PDFBOX-5713_minimal.diff&quot; title=&quot;PDFBOX-5713_minimal.diff attached to PDFBOX-5713&quot;&gt;PDFBOX-5713_minimal.diff&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17786029" author="tilman" created="Tue, 14 Nov 2023 18:51:22 +0000"  >&lt;p&gt;IMHO the PFB_RECORDS should be removed. The segments can be in any order. Modifying the loop variable within the loop is considered a no-no by Sonar. So this should be collected into two byte arrays, or byte output streams. This will be slower but it isn&apos;t important because these fonts are not used much.&lt;/p&gt;</comment>
                            <comment id="17786249" author="JIRAUSER283200" created="Wed, 15 Nov 2023 09:00:58 +0000"  >&lt;p&gt;&amp;gt;&amp;gt; IMHO the PFB_RECORDS should be removed.&lt;br/&gt;
I think it&apos;s a bit more complicated, read further...&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;The segments can be in any order.&lt;br/&gt;
&amp;gt;&amp;gt;So this should be collected into two byte arrays, or byte output streams.&lt;br/&gt;
Yes, they can be in any order but it doesn&apos;t mean that you can collect all ascii and all binary segments separately without keeping this order. The specification says that you should convert the binary segments to hex-streams and send them to the printer. If you want to take this literally, the only think you can do is to follow these instructions, therefore create PFA and parse it.&lt;br/&gt;
Or the other possibility is to admit that you will not support everything possible and hope that nobody will do such weird things.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;Modifying the loop variable within the loop is considered a no-no by Sonar.&lt;br/&gt;
Ok, is a while loop better for you?&lt;/p&gt;</comment>
                            <comment id="17786426" author="lehmi" created="Wed, 15 Nov 2023 16:29:27 +0000"  >&lt;p&gt;&lt;tt&gt;org.apache.fontbox.pfb.PfbParser&lt;/tt&gt; simply divides the file to be parsed in two segments, one for the ascii and one for the binary part. The parser doesn&apos;t perform any decryption. This is done in &lt;tt&gt;org.apache.fontbox.type1.Type1Parser&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17786604" author="tilman" created="Thu, 16 Nov 2023 04:06:26 +0000"  >&lt;p&gt;Your file IS one of these &quot;weird things&quot; &#128514; But I don&apos;t mind if we support the specification fully, it doesn&apos;t seem difficult.&lt;/p&gt;

&lt;p&gt;As Andreas said, we don&apos;t send anything to the printer. We just have these two segments and each one is parsed.&lt;/p&gt;

&lt;p&gt;Re the loop, the whole logic is just weird, i.e. going back because the variable doesn&apos;t match, instead of just doing what it says, i.e. collecting in one or the other segment.&lt;/p&gt;</comment>
                            <comment id="17786649" author="JIRAUSER283200" created="Thu, 16 Nov 2023 07:59:34 +0000"  >&lt;p&gt;Yes, my file is one of those weird things, unfortunately I haven&apos;t made it myself.&lt;/p&gt;

&lt;p&gt;If you want to support the specification fully, you should also support some weirder things like wrapping a whole PFA file in a single ASCII segment (see &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13064449/13064449_pfa_wrapped.pfb&quot; title=&quot;pfa_wrapped.pfb attached to PDFBOX-5713&quot;&gt;pfa_wrapped.pfb&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;). Collecting the ascii and binary segments separately doesn&apos;t solve the problem because PFB specification doesn&apos;t care about what is a text part of the font file and what is the encrypted part. Maybe you can imagine even weirder things but I don&apos;t think that it is required for now...&lt;/p&gt;

&lt;p&gt;Moreover if you collect ascii and binary segments separately without taking care of their order, PfbParser may sometimes pass without any exception and return an incorrect result for this font (Type1Parser expects the text part to be segment1 and encrypted part to be segment2). I think this is much worse than just saying that you do not support these kind of fonts.&lt;/p&gt;

&lt;p&gt;This is the reason why I am suggesting only slight improvement of the constraints on the input of PfbParser. Trying to support everything may be impractically difficult and I don&apos;t think that there is an actual font that will need it.&lt;/p&gt;</comment>
                            <comment id="17787056" author="tilman" created="Fri, 17 Nov 2023 06:56:33 +0000"  >&lt;p&gt;That file looks like what would be transferred to the printer, so that isn&apos;t a .PFB file at all IMHO.&lt;br/&gt;
I&apos;ll try to make an implementation myself this weekend for what I had in mind when I wrote &quot;into two byte arrays&quot;.&lt;/p&gt;</comment>
                            <comment id="17787476" author="jira-bot" created="Sat, 18 Nov 2023 11:53:43 +0000"  >&lt;p&gt;Commit 1913915 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1913915&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1913915&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5713&quot; title=&quot;PfbParser fails to parse PFB font with multiple binary records.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5713&quot;&gt;&lt;del&gt;PDFBOX-5713&lt;/del&gt;&lt;/a&gt;: rewritten parser to accept more than 3 segments and rearrange them as ASCII-BINARY-ASCII, as described in &quot;3.3 IBM PC Format&quot; of Adobe Technical Note #5040&lt;/p&gt;</comment>
                            <comment id="17787479" author="tilman" created="Sat, 18 Nov 2023 12:02:44 +0000"  >&lt;p&gt;Here&apos;s my attempt at this, which turned out to be different to what I had in mind yesterday, because I hadn&apos;t looked at the methods of the class. The class needs the ability to return the font in full, and the ability to return all ASCII segments as one (without the final one) and all BINARY segments as one.&lt;/p&gt;</comment>
                            <comment id="17787480" author="jira-bot" created="Sat, 18 Nov 2023 12:41:52 +0000"  >&lt;p&gt;Commit 1913922 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1913922&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1913922&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5713&quot; title=&quot;PfbParser fails to parse PFB font with multiple binary records.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5713&quot;&gt;&lt;del&gt;PDFBOX-5713&lt;/del&gt;&lt;/a&gt;: load test file&lt;/p&gt;</comment>
                            <comment id="17787483" author="jira-bot" created="Sat, 18 Nov 2023 12:42:46 +0000"  >&lt;p&gt;Commit 1913923 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1913923&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1913923&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5713&quot; title=&quot;PfbParser fails to parse PFB font with multiple binary records.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5713&quot;&gt;&lt;del&gt;PDFBOX-5713&lt;/del&gt;&lt;/a&gt;: add test&lt;/p&gt;</comment>
                            <comment id="17787486" author="jira-bot" created="Sat, 18 Nov 2023 13:03:37 +0000"  >&lt;p&gt;Commit 1913926 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1913926&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1913926&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5713&quot; title=&quot;PfbParser fails to parse PFB font with multiple binary records.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5713&quot;&gt;&lt;del&gt;PDFBOX-5713&lt;/del&gt;&lt;/a&gt;: fix checksum&lt;/p&gt;</comment>
                            <comment id="17787889" author="JIRAUSER283200" created="Mon, 20 Nov 2023 09:00:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; At least please add check that the segments are in the order expected in PFB file (ASCII segments first, then binary). Otherwise you will corrupt the font in case they weren&apos;t (I am almost sure that this won&apos;t happen but just to be on the safer side).&lt;br/&gt;
Regarding the file I posted. It is certainly some kind of abuse of the PFB specification but if you read the specification of the IBM PC format carefully, this will pass (almost - I probably forgotten the EOF marker but it doesn&apos;t matter here).&lt;/p&gt;</comment>
                            <comment id="17788247" author="tilman" created="Tue, 21 Nov 2023 04:31:41 +0000"  >&lt;p&gt;Do you mean it would fail with a file that has binary segments first? I don&apos;t see how...&lt;/p&gt;

&lt;p&gt;Re the &quot;wrapped&quot; file, that one fails shows a bug that the parse fails when the EOF marker is missing. But if I fix that it would still fail because it has no char strings dictionary. That one is expected in the decoded binary segment. Which starts with eexec but in your file this is in the ascii segment. Our code allows hex content but expects this in the binary segment.&lt;/p&gt;</comment>
                            <comment id="17788248" author="jira-bot" created="Tue, 21 Nov 2023 04:33:11 +0000"  >&lt;p&gt;Commit 1913999 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1913999&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1913999&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5713&quot; title=&quot;PfbParser fails to parse PFB font with multiple binary records.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5713&quot;&gt;&lt;del&gt;PDFBOX-5713&lt;/del&gt;&lt;/a&gt;: catch missing EOF marker&lt;/p&gt;</comment>
                            <comment id="17788330" author="JIRAUSER283200" created="Tue, 21 Nov 2023 09:14:14 +0000"  >&lt;p&gt;Yes, it should fail if the binary segment is first because it is against the IBM PC format. It says that the binary part should be converted to hex ascii and sent to printer. But the type1 font should start with &quot;%!FontType1&quot;, not with some binary data in hex form - they should be placed after &quot;eexec&quot;. The order of the segments is important here and if you ignore it, you will parse an invalid font without noticing (or maybe worse, parse some weird but valid font with incorrect result - I can&apos;t imagine it now but I cannot exclude this possibility and it is easier just to check it).&lt;br/&gt;
At the other side, it is absolutely ok to reject the wrapped PFA because it is not in the expected format. I used it here just to illustrate how IBM PC format allows weird things by definition. Also thank you for allowing the missing EOF marker. I think that there are fonts with EOF missing.&lt;/p&gt;</comment>
                            <comment id="17788502" author="tilman" created="Tue, 21 Nov 2023 18:29:38 +0000"  >&lt;p&gt;We&apos;re not sending our font to the printer. We draw the curves ourself.&lt;/p&gt;

&lt;p&gt;The &quot;new&quot; parser rearranges the segments if a binary comes first.&lt;/p&gt;</comment>
                            <comment id="17788508" author="jira-bot" created="Tue, 21 Nov 2023 18:47:25 +0000"  >&lt;p&gt;Commit 1914019 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1914019&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1914019&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5713&quot; title=&quot;PfbParser fails to parse PFB font with multiple binary records.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5713&quot;&gt;&lt;del&gt;PDFBOX-5713&lt;/del&gt;&lt;/a&gt;: avoid NPE if .notdef isn&apos;t set&lt;/p&gt;</comment>
                            <comment id="17788509" author="jira-bot" created="Tue, 21 Nov 2023 18:48:12 +0000"  >&lt;p&gt;Commit 1914020 from Tilman Hausherr in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1914020&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1914020&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5713&quot; title=&quot;PfbParser fails to parse PFB font with multiple binary records.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5713&quot;&gt;&lt;del&gt;PDFBOX-5713&lt;/del&gt;&lt;/a&gt;: avoid NPE if .notdef isn&apos;t set&lt;/p&gt;</comment>
                            <comment id="17788510" author="jira-bot" created="Tue, 21 Nov 2023 18:48:57 +0000"  >&lt;p&gt;Commit 1914021 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1914021&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1914021&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5713&quot; title=&quot;PfbParser fails to parse PFB font with multiple binary records.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5713&quot;&gt;&lt;del&gt;PDFBOX-5713&lt;/del&gt;&lt;/a&gt;: avoid NPE if .notdef isn&apos;t set&lt;/p&gt;</comment>
                            <comment id="17788972" author="jira-bot" created="Thu, 23 Nov 2023 04:32:48 +0000"  >&lt;p&gt;Commit 1914058 from Tilman Hausherr in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1914058&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1914058&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5713&quot; title=&quot;PfbParser fails to parse PFB font with multiple binary records.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5713&quot;&gt;&lt;del&gt;PDFBOX-5713&lt;/del&gt;&lt;/a&gt;: rewritten parser to accept more than 3 segments and rearrange them as ASCII-BINARY-ASCII, as described in &quot;3.3 IBM PC Format&quot; of Adobe Technical Note #5040&lt;/p&gt;</comment>
                            <comment id="17788973" author="jira-bot" created="Thu, 23 Nov 2023 04:32:53 +0000"  >&lt;p&gt;Commit 1914059 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1914059&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1914059&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5713&quot; title=&quot;PfbParser fails to parse PFB font with multiple binary records.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5713&quot;&gt;&lt;del&gt;PDFBOX-5713&lt;/del&gt;&lt;/a&gt;: rewritten parser to accept more than 3 segments and rearrange them as ASCII-BINARY-ASCII, as described in &quot;3.3 IBM PC Format&quot; of Adobe Technical Note #5040&lt;/p&gt;</comment>
                            <comment id="17788975" author="jira-bot" created="Thu, 23 Nov 2023 04:41:34 +0000"  >&lt;p&gt;Commit 1914060 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1914060&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1914060&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5713&quot; title=&quot;PfbParser fails to parse PFB font with multiple binary records.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5713&quot;&gt;&lt;del&gt;PDFBOX-5713&lt;/del&gt;&lt;/a&gt;: Sonar fix&lt;/p&gt;</comment>
                            <comment id="17788976" author="jira-bot" created="Thu, 23 Nov 2023 04:41:54 +0000"  >&lt;p&gt;Commit 1914061 from Tilman Hausherr in branch &apos;pdfbox/branches/3.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1914061&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1914061&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5713&quot; title=&quot;PfbParser fails to parse PFB font with multiple binary records.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5713&quot;&gt;&lt;del&gt;PDFBOX-5713&lt;/del&gt;&lt;/a&gt;: Sonar fix&lt;/p&gt;</comment>
                            <comment id="17788977" author="jira-bot" created="Thu, 23 Nov 2023 04:42:10 +0000"  >&lt;p&gt;Commit 1914062 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1914062&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1914062&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5713&quot; title=&quot;PfbParser fails to parse PFB font with multiple binary records.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5713&quot;&gt;&lt;del&gt;PDFBOX-5713&lt;/del&gt;&lt;/a&gt;: Sonar fix&lt;/p&gt;</comment>
                            <comment id="17788978" author="jira-bot" created="Thu, 23 Nov 2023 04:42:23 +0000"  >&lt;p&gt;Commit 1914063 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1914063&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1914063&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5713&quot; title=&quot;PfbParser fails to parse PFB font with multiple binary records.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5713&quot;&gt;&lt;del&gt;PDFBOX-5713&lt;/del&gt;&lt;/a&gt;: Sonar fix&lt;/p&gt;</comment>
                            <comment id="17791504" author="JIRAUSER283200" created="Thu, 30 Nov 2023 08:50:52 +0000"  >&lt;p&gt;Ok, I supposed that Type1 fonts should behave the same way as when they are sent to the printer but it seems that you have different opinion. Ok &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13064348" name="5040.Download_Fonts.pdf" size="90054" author="lehmi" created="Sun, 12 Nov 2023 11:02:44 +0000"/>
                            <attachment id="13064282" name="DejaVuSerifCondensed.pfb" size="1062649" author="jaromirdobry@kadel.cz" created="Thu, 9 Nov 2023 11:36:41 +0000"/>
                            <attachment id="13064285" name="PDFBOX-5713.diff" size="3500" author="jaromirdobry@kadel.cz" created="Thu, 9 Nov 2023 12:24:36 +0000"/>
                            <attachment id="13064386" name="PDFBOX-5713_minimal.diff" size="2396" author="jaromirdobry@kadel.cz" created="Tue, 14 Nov 2023 09:22:52 +0000"/>
                            <attachment id="13064449" name="pfa_wrapped.pfb" size="2100828" author="jaromirdobry@kadel.cz" created="Thu, 16 Nov 2023 07:55:47 +0000"/>
                            <attachment id="13064281" name="type1_embedded.pdf" size="1068625" author="jaromirdobry@kadel.cz" created="Thu, 9 Nov 2023 11:36:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1lhtc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>