<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:51:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5843] There is an exception when getting embedded font, is it compatible?</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5843</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description></description>
                <environment></environment>
        <key id="13583156">PDFBOX-5843</key>
            <summary>There is an exception when getting embedded font, is it compatible?</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="lycheng">liu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Jun 2024 07:22:49 +0000</created>
                <updated>Wed, 24 Jul 2024 16:02:06 +0000</updated>
                            <resolved>Wed, 19 Jun 2024 17:07:39 +0000</resolved>
                                    <version>2.0.31</version>
                    <version>3.0.2 PDFBox</version>
                                    <fixVersion>2.0.32</fixVersion>
                    <fixVersion>3.0.3 PDFBox</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17856190" author="JIRAUSER297279" created="Wed, 19 Jun 2024 07:23:46 +0000"  >&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13069604/13069604_screenshot-1.png&quot; height=&quot;239&quot; width=&quot;442&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17856213" author="tilman" created="Wed, 19 Jun 2024 08:27:04 +0000"  >&lt;p&gt;The private dict is needed. I tried without and hit an NPE and I see it&apos;s needed for the charstrings. Maybe the font is corrupt, &lt;/p&gt;

&lt;p&gt;I then tried to hard code to use the font SourceHanSansSC-Normal.otf that I found on the internet but that one rendered different glyphs than with firefox. I didn&apos;t find a SourceHanSansSC-Normal-Identity-H font except on a chinese website with lots of popups.&lt;/p&gt;</comment>
                            <comment id="17856218" author="tilman" created="Wed, 19 Jun 2024 08:45:34 +0000"  >&lt;p&gt;I&apos;m wondering whether something is wrong on our side. The fdindex contains many empty entries. When I tried to skip these, I got this rendering:&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13069606/13069606_screenshot-2.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="17856220" author="JIRAUSER297279" created="Wed, 19 Jun 2024 08:51:18 +0000"  >&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13069607/13069607_image-2024-06-19-16-49-40-186.png&quot; height=&quot;125&quot; width=&quot;273&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;I tryed wps, adobe, and google and they all seem to be normal.&lt;/p&gt;</comment>
                            <comment id="17856283" author="tilman" created="Wed, 19 Jun 2024 14:14:26 +0000"  >&lt;p&gt;Lets assume that the font is correct. I fixed the bug locally that empty entries now get skipped in CFFParser.java, by adding &lt;tt&gt;if (bytes.length == 0) continue;&lt;/tt&gt; after &lt;tt&gt;for (byte[] bytes : fdIndex)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;My first thought was that something goes wrong with the offsets because there is more than one fdindex entry. But I haven&apos;t been able to prove this.&lt;/p&gt;

&lt;p&gt;I also tried to install FontForge but it doesn&apos;t show anything.&lt;/p&gt;

&lt;p&gt;readIndexData char strings:&lt;br/&gt;
code 9987 len 153 at offset 298684&lt;br/&gt;
code 12431 len 245 at offset 301280&lt;br/&gt;
code 14225 len 135 at offset 303318&lt;/p&gt;

&lt;p&gt;for code 9987 (which has this &quot;over the top&quot; path) I checked that offset and length make sense, all the other bytes before/after are 0x0e, which is ENDCHAR&lt;/p&gt;

&lt;p&gt;type2 charstring:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;-79, 67, 592, 63, HSTEM|, 164, 64, 388, 66, VSTEM|, 453, 414, RMOVETO|, -29, -122, -48, -120, -64, -78, 17, -9, 28, -18, 13, -10, 62, 84, 54, 127, 33, 132, RRCURVETO|, 242, 1, RMOVETO|, 56, -106, 52, -142, 17, -92, 63, 22, RCURVELINE|, -17, 92, -52, 139, -59, 106, RRCURVETO|, -353, 414, RMOVETO|, -33, -149, -57, -145, -74, -94, 16, -10, 26, -22, 12, -11, 36, 49, 33, 60, 29, 68, RRCURVETO|, 160, -575, HLINETO|, -13, -5, -4, -12, -14, -43, -1, 2, -49, VHCURVETO|, 10, -19, 11, 9342, 8, 21, 39, VVCURVETO|, 575, 200, VLINETO|, -9, -53, -10, -55, -7, -37, 57, -11, RCURVELINE|, 13, 53, 18, 86, 13, 72, -46, -55, -419, HLINETO|, 21, 56, 18, 60, 14, 60, RRCURVETO|, -265, 16, -102&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;converted to type1 sequence:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;0, 1000.0, HSBW|, 453, 414, RMOVETO|, -29, -122, -48, -120, -64, -78, RRCURVETO|, 17, -9, 28, -18, 13, -10, RRCURVETO|, 62, 84, 54, 127, 33, 132, RRCURVETO|, CLOSEPATH|, 242, 1, RMOVETO|, 56, -106, 52, -142, 17, -92, RRCURVETO|, 63, 22, RLINETO|, -17, 92, -52, 139, -59, 106, RRCURVETO|, CLOSEPATH|, -353, 414, RMOVETO|, -33, -149, -57, -145, -74, -94, RRCURVETO|, 16, -10, 26, -22, 12, -11, RRCURVETO|, 36, 49, 33, 60, 29, 68, RRCURVETO|, 160, HLINETO|, -575, VLINETO|, 0, -13, -5, -4, -12, 0, RRCURVETO|, -14, 0, -43, -1, -49, 2, RRCURVETO|, 0, 10, -19, 11, 0, 9342, RRCURVETO|, 575, VLINETO|, 200, HLINETO|, -9, -53, -10, -55, -7, -37, RRCURVETO|, 57, -11, RLINETO|, 13, HLINETO|, 53, VLINETO|, 18, HLINETO|, 86, VLINETO|, 13, HLINETO|, 72, VLINETO|, -46, HLINETO|, -55, VLINETO|, -419, HLINETO|, 21, 56, 18, 60, 14, 60, RRCURVETO|&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;The many negative values are a &quot;zone of interest&quot;.&lt;/p&gt;</comment>
                            <comment id="17856289" author="tilman" created="Wed, 19 Jun 2024 14:41:53 +0000"  >&lt;p&gt;It turns out to be completely different. I ran a 2.0.1 source code build with the change and hit an ArrayOutofBoundsException in CFFCIDFont.getLocalSubrIndex(). That means we can&apos;t just skip empty entries. Now I get this:&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13069617/13069617_screenshot-3.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;br/&gt;
I&apos;ll investigate some more but it seems promising.&lt;/p&gt;</comment>
                            <comment id="17856317" author="tilman" created="Wed, 19 Jun 2024 17:07:20 +0000"  >&lt;p&gt;Fixed in 1918445, 1918446, 1918447, 1918448, 1918449, 1918450 (svn2jira is down). Thanks for the report!&lt;/p&gt;</comment>
                            <comment id="17856364" author="JIRAUSER297279" created="Thu, 20 Jun 2024 01:24:48 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;so cool !&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13069603" name="123.pdf" size="195798" author="lycheng" created="Wed, 19 Jun 2024 07:22:39 +0000"/>
                            <attachment id="13069607" name="image-2024-06-19-16-49-40-186.png" size="52311" author="lycheng" created="Wed, 19 Jun 2024 08:49:41 +0000"/>
                            <attachment id="13069604" name="screenshot-1.png" size="222685" author="lycheng" created="Wed, 19 Jun 2024 07:23:28 +0000"/>
                            <attachment id="13069606" name="screenshot-2.png" size="15821" author="tilman" created="Wed, 19 Jun 2024 08:45:32 +0000"/>
                            <attachment id="13069617" name="screenshot-3.png" size="7291" author="tilman" created="Wed, 19 Jun 2024 14:41:22 +0000"/>
                            <attachment id="13069615" name="xxx.cff" size="354763" author="tilman" created="Wed, 19 Jun 2024 14:03:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 20 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1pvy0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>