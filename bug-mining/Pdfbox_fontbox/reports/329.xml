<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:50:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-5281] Error rendering png from PDF - Error at Type1Parser parseBinary for Type 1 Font</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-5281</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;When I try to convert a pdf page using&#160; &quot;pdfRenderer.renderImageWithDPI&quot; to a png image using pdfbox version 2.0.23 I get the following error. The pdf is a customer specific one, I can&apos;t share the original file here.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Error&#160; [PDType1Font] Can&apos;t read the embedded Type1 font
AAAAAB+NimbusMonoPS-Regular_00
java.io.IOException: Found Token[kind=NAME, text=readonly] but expected def
at org.apache.fontbox.type1.Type1Parser.read(Type1Parser.java:867)
at org.apache.fontbox.type1.Type1Parser.parseBinary(Type1Parser.java:610)
at org.apache.fontbox.type1.Type1Parser.parse(Type1Parser.java:64)
at org.apache.fontbox.type1.Type1Font.createWithSegments(Type1Font.java:85)
at org.apache.pdfbox.pdmodel.font.PDType1Font.&amp;lt;init&amp;gt;(PDType1Font.java:263)
at
org.apache.pdfbox.pdmodel.font.PDFontFactory.createFont(PDFontFactory.java:76)
at org.apache.pdfbox.pdmodel.PDResources.getFont(PDResources.java:146)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Using the PDFDebugger to have access to the FontFile of the page throwing the error, &quot;Save the Stream as PFB&quot;, and using the&#160; t1utils t1disasm to obtain the readable equivalent of the binary private dictionary, which contains:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/Private 10 dict dup begin
/RD {string currentfile exch readstring pop} readonly def &#160; &#8592;
/ND {noaccess def} readonly def
/NP {noaccess put} readonly def
/MinFeature {16 16} readonly def
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And following the trace in PDFBox I can see it blowing up at &quot;Type1Parser&quot; in the &quot;parseBinary&quot; method at line 602 they have the check for &quot;&quot;RD&quot;.equals(key)&quot;, where key is &quot;readonly&quot; and the last check from that list &quot;read(Token.NAME, &quot;def&quot;);&quot; has to be def, and because the key is &quot;readonly&quot; it throws the error, even if it makes it pass &quot;RD&quot; it will have the same results when parsing the contents for &quot;ND&quot; and &quot;NP&quot;.&lt;/p&gt;

&lt;p&gt;I have seen most of the Type 1 Font files have &quot;executeonly&quot; instead of &quot;readonly&quot; in the /Private dict section, even this same file if I convert it first to PS and back to PDF, extracting the font again I can see that the instructions for RD, ND, and NP are rearranged to be &quot;executeonly&quot; using Mac Preview or GS ps2pdf., and the PNG is generated without issue using the PDFRenderer, I don&apos;t see a way to do this step programmatically at the moment.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
dup /Private 20 dict dup begin
/-| {string currentfile exch readstring pop} executeonly def&#160; &#160; &#8592;
/|- {noaccess def} executeonly def
/| {noaccess put} executeonly def
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;From the Type 1 Font Spec, they don&apos;t provide a must follow receipt on what instructions can be appended after RD, ND, or NP, they state: &quot;The RD, NP, and ND functions must be implemented by PostScript language procedures&quot; , If we take a look to the PostScript Language Reference Manual:&lt;/p&gt;

&lt;p&gt;&lt;cite&gt;readonly: When an object is read-only, its value cannot be modified by PostScript operators (an invalidaccess error will result), but it can still be read by operators or executed by the PostScript interpreter.&lt;/cite&gt;&lt;/p&gt;

&lt;p&gt;&lt;cite&gt;executeonly: When an object is execute-only, its value cannot be read or modified explicitly by PostScript operators (an invalidaccess error will result), but it can still be executed by the PostScript interpreter&#8212;for example, by invoking it with exec&lt;/cite&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Both &quot;readonly&quot; and &quot;executeonly&quot; allows the instructions to be executed.&lt;/p&gt;

&lt;p&gt;Suggestion:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Would it be possible to add an optional &quot;readMaybe(Token.NAME, &quot;readonly&quot;);&quot;&#160; to the &quot;parseBinary&quot; RD, &quot;ND&quot;, and &quot;NP&quot; keywords similar to how it was done at&#160; &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2202&quot; title=&quot;java.io.IOException: Found Token[kind=NAME, text=readonly] but expected def&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2202&quot;&gt;&lt;del&gt;PDFBOX-2202&lt;/del&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment>Component: Type1Parser&lt;br/&gt;
Environment: Java 8</environment>
        <key id="13402297">PDFBOX-5281</key>
            <summary>Error rendering png from PDF - Error at Type1Parser parseBinary for Type 1 Font</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="Sadu">Fernando</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Sep 2021 18:58:35 +0000</created>
                <updated>Fri, 17 Dec 2021 06:50:06 +0000</updated>
                            <resolved>Wed, 22 Sep 2021 16:29:36 +0000</resolved>
                                    <version>2.0.23</version>
                                    <fixVersion>2.0.25</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17418383" author="jira-bot" created="Wed, 22 Sep 2021 02:40:54 +0000"  >&lt;p&gt;Commit 1893502 from Tilman Hausherr in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1893502&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1893502&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5281&quot; title=&quot;Error rendering png from PDF - Error at Type1Parser parseBinary for Type 1 Font&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5281&quot;&gt;&lt;del&gt;PDFBOX-5281&lt;/del&gt;&lt;/a&gt;: allow readonly too, as suggested by Fernando Sadu&lt;/p&gt;</comment>
                            <comment id="17418384" author="jira-bot" created="Wed, 22 Sep 2021 02:40:57 +0000"  >&lt;p&gt;Commit 1893503 from Tilman Hausherr in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1893503&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1893503&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-5281&quot; title=&quot;Error rendering png from PDF - Error at Type1Parser parseBinary for Type 1 Font&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-5281&quot;&gt;&lt;del&gt;PDFBOX-5281&lt;/del&gt;&lt;/a&gt;: allow readonly too, as suggested by Fernando Sadu&lt;/p&gt;</comment>
                            <comment id="17418393" author="tilman" created="Wed, 22 Sep 2021 03:35:07 +0000"  >&lt;p&gt;Please try with a snapshot:&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.25-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.25-SNAPSHOT/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-debugger/2.0.25-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-debugger/2.0.25-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17418572" author="sadu" created="Wed, 22 Sep 2021 12:43:01 +0000"  >&lt;p&gt;Thanks for the quick response&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt;, much appreciated.&#160;&lt;/p&gt;

&lt;p&gt;It works now with the pdfbox-app snapshot, one thing I noticed is that it&apos;s missing ToUnicode mapping. In my case I only need the png but still I wonder why the unicode mapping is missing.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13034029/13034029_orig.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;When converting to PS from the original and back to pdf, ToUnicode is available in the Font, though the unicode mapping is incorrect as it doesn&apos;t correspond to the glyphs, it might be something wrong with the original pdf. Anyway I&apos;m not seeing this problem with other pdfs.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13034030/13034030_origps.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17418701" author="tilman" created="Wed, 22 Sep 2021 16:29:22 +0000"  >&lt;p&gt;This may be on purpose, to make text extraction more difficult. It happens quite often. PDF is a terrible format. Thanks for the feedback!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13034029" name="orig.png" size="170019" author="Sadu" created="Wed, 22 Sep 2021 12:39:50 +0000"/>
                            <attachment id="13034030" name="origps.png" size="102773" author="Sadu" created="Wed, 22 Sep 2021 12:41:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 7 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0v460:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>