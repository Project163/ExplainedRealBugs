<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:50:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-4661] Regression No Unicode mapping with Identity-H font</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-4661</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;In v2.0.16 or v2.0.17 running the following code. The expected output is obtained in v2.0.15 and earlier.&lt;/p&gt;

&lt;p&gt;PDFTextStripper stripper = new PDFTextStripper();&lt;br/&gt;
 PDDocument doc = PDDocument.load(new File(&quot;KR1020067006547.pdf&quot;));&lt;br/&gt;
 stripper.getText(doc);&lt;/p&gt;

&lt;p&gt;results in errors like the following and missing characters&lt;/p&gt;

&lt;p&gt;Sep 27, 2019 11:49:37 AM org.apache.pdfbox.pdmodel.font.PDType0Font toUnicode&lt;br/&gt;
WARNING: No Unicode mapping for CID+17679 (17679) in font LHXXBJ+&#185;&#217;&#197;&#193;-Identity-H&lt;br/&gt;
Sep 27, 2019 11:49:37 AM org.apache.pdfbox.pdmodel.font.PDType0Font toUnicode&lt;br/&gt;
WARNING: No Unicode mapping for CID+16131 (16131) in font LHXXBJ+&#185;&#217;&#197;&#193;-Identity-H&lt;br/&gt;
Sep 27, 2019 11:49:37 AM org.apache.pdfbox.pdmodel.font.PDType0Font toUnicode&lt;br/&gt;
WARNING: No Unicode mapping for CID+14802 (14802) in font LHXXBJ+&#185;&#217;&#197;&#193;-Identity-H&lt;/p&gt;

&lt;p&gt;This change is likely related to &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4549&quot; title=&quot;No Unicode mapping&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4549&quot;&gt;&lt;del&gt;PDFBOX-4549&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13259240">PDFBOX-4661</key>
            <summary>Regression No Unicode mapping with Identity-H font</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="dan2097">Daniel Lowe</reporter>
                        <labels>
                            <label>regression</label>
                    </labels>
                <created>Fri, 27 Sep 2019 11:10:33 +0000</created>
                <updated>Wed, 22 Dec 2021 19:37:09 +0000</updated>
                            <resolved>Sun, 13 Oct 2019 13:58:07 +0000</resolved>
                                    <version>2.0.16</version>
                    <version>2.0.17</version>
                                    <fixVersion>2.0.18</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16939960" author="tilman" created="Sat, 28 Sep 2019 11:17:50 +0000"  >&lt;p&gt;Very close - rather &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4550&quot; title=&quot;Poor performance with corrupt ToUnicode stream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4550&quot;&gt;&lt;del&gt;PDFBOX-4550&lt;/del&gt;&lt;/a&gt; or related issues, the ToUnicode stream has this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;38ff&amp;gt;&amp;lt;39ff&amp;gt;&amp;lt;c6a9&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;That is more than 255. PDFBox thinks this is a corrupt stream and aborts.&lt;/p&gt;</comment>
                            <comment id="16940055" author="lehmi" created="Sat, 28 Sep 2019 15:50:20 +0000"  >&lt;p&gt;The stream is corrupt. Maybe we should simply be more lenient and allow 256 instead of 255. Most of the toUnicode streams consist of bfranges addressing 256 values&lt;/p&gt;</comment>
                            <comment id="16940103" author="tilman" created="Sat, 28 Sep 2019 17:02:54 +0000"  >&lt;p&gt;I agree, maybe the developers of that PDF creating software simply confused 256 and 255.&lt;/p&gt;</comment>
                            <comment id="16940450" author="jira-bot" created="Sun, 29 Sep 2019 15:10:09 +0000"  >&lt;p&gt;Commit 1867724 from lehmi@apache.org in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1867724&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1867724&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4661&quot; title=&quot;Regression No Unicode mapping with Identity-H font&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4661&quot;&gt;&lt;del&gt;PDFBOX-4661&lt;/del&gt;&lt;/a&gt;: support a maximum of 256 values to be more lenient&lt;/p&gt;</comment>
                            <comment id="16940451" author="jira-bot" created="Sun, 29 Sep 2019 15:11:39 +0000"  >&lt;p&gt;Commit 1867725 from lehmi@apache.org in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1867725&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1867725&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4661&quot; title=&quot;Regression No Unicode mapping with Identity-H font&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4661&quot;&gt;&lt;del&gt;PDFBOX-4661&lt;/del&gt;&lt;/a&gt;: support a maximum of 256 values to be more lenient&lt;/p&gt;</comment>
                            <comment id="16940452" author="jira-bot" created="Sun, 29 Sep 2019 15:11:59 +0000"  >&lt;p&gt;Commit 1867726 from lehmi@apache.org in branch &apos;pdfbox/branches/issue45&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1867726&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1867726&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4661&quot; title=&quot;Regression No Unicode mapping with Identity-H font&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4661&quot;&gt;&lt;del&gt;PDFBOX-4661&lt;/del&gt;&lt;/a&gt;: support a maximum of 256 values to be more lenient&lt;/p&gt;</comment>
                            <comment id="16940453" author="jira-bot" created="Sun, 29 Sep 2019 15:12:19 +0000"  >&lt;p&gt;Commit 1867727 from lehmi@apache.org in branch &apos;pdfbox/branches/issue4569&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1867727&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1867727&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-4661&quot; title=&quot;Regression No Unicode mapping with Identity-H font&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-4661&quot;&gt;&lt;del&gt;PDFBOX-4661&lt;/del&gt;&lt;/a&gt;: support a maximum of 256 values to be more lenient&lt;/p&gt;</comment>
                            <comment id="16940454" author="lehmi" created="Sun, 29 Sep 2019 15:14:54 +0000"  >&lt;p&gt;I&apos;ve increased the maximum number of values from 255 to 256 to support those who are confused about the correct maximum value&lt;/p&gt;</comment>
                            <comment id="16940933" author="mkl" created="Mon, 30 Sep 2019 12:49:14 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;38ff&amp;gt;&amp;lt;39ff&amp;gt;&amp;lt;c6a9&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Actually this range is not even allowed to be 255 bytes long, merely a length of 86 is allowed.&lt;/p&gt;
&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;ISO 32000-1, section 9.10.3 ToUnicode CMaps&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;&#160; &#160;&lt;em&gt;n&lt;/em&gt; &lt;b&gt;beginbfrange&lt;/b&gt;&lt;br/&gt;
&#160; &#160;&lt;em&gt;srcCode1 srcCode2 dstString&lt;/em&gt;&lt;br/&gt;
&#160; &#160;&lt;b&gt;endbfrange&lt;/b&gt;&lt;/p&gt;

&lt;p&gt; In this case, the last byte of the string shall be incremented for each consecutive code in the source code range.&lt;br/&gt;
 When defining ranges of this type, the value of the last byte in the string shall be less than or equal to 255 &#8722; (&lt;em&gt;srcCode2&lt;/em&gt; &#8722; &lt;em&gt;srcCode1&lt;/em&gt;). This ensures that the last byte of the string shall not be incremented past 255; otherwise, the result of mapping is undefined.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;d propose following the effect outlined in the spec, beyond the index for which the last byte of the string would be incremented past 255, the mapping should be undefined.&lt;/p&gt;</comment>
                            <comment id="16950088" author="lehmi" created="Sat, 12 Oct 2019 16:39:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkl&quot; class=&quot;user-hover&quot; rel=&quot;mkl&quot;&gt;mkl&lt;/a&gt; Thanks for the proposal, sounds very reasonable&lt;/p&gt;</comment>
                            <comment id="16950308" author="tilman" created="Sun, 13 Oct 2019 12:26:40 +0000"  >&lt;p&gt;The latest change (that hasn&apos;t appeared on the web) brings a regression in the extraction of the file from &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2257&quot; title=&quot;Arabic vowel marks displaced when reading from PDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-2257&quot;&gt;TIKA-2257&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Org: [position: 1, size: 1, lines: [ &#1575;&#1604;&#1614;&#1593;&#1614;&#1585;&#1576;&#1616;&#1740;&#1617;&#1614;&#1577;]]&lt;br/&gt;
New: [position: 1, size: 1, lines: [ &#1575;&#1604;&#1614;&#1593;&#1614;&#1585;&#1576;&#1616;#&#1617;&#1614;&#1577;]]&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="16950315" author="tilman" created="Sun, 13 Oct 2019 13:09:35 +0000"  >&lt;p&gt;Works now!&lt;/p&gt;</comment>
                            <comment id="16950320" author="lehmi" created="Sun, 13 Oct 2019 13:11:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; Thanks for the pointer. Fortunately the given pdf contains a corner case which didn&apos;t work.&lt;/p&gt;

&lt;p&gt;BTW: I&apos;ve contacted infra about the broken svn2jira integration. Maybe it&apos;s related to the latest svn update. No answer so far&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13354837">PDFBOX-5090</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13418906">PDFBOX-5350</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12981543" name="KR1020067006547.pdf" size="135305" author="dan2097" created="Fri, 27 Sep 2019 10:54:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z072xk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>