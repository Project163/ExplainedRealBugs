<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:50:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3379] PDType0Font Subsetting Monospace DejaVuSansMono</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3379</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Hi,&lt;br/&gt;
we came across the problem that the monospace font dejaVuSansMono has problems with spaces in strings if they are rendered in a pdf  and a PDFType0Font is used for subsetting. If a space is placed within the strings the letters from every word are placed overlapping each other, see attached files. Seems that the advancedWidth array int the HorizontalMetricsTable contains a wrong, very low value as 3rd entry after subsetting the font. We compared it with a second monospace font, and it worked there. The difference between the two fonts is that the dejaVu Mono only contains 4 advanceWidth entries  and the second one contains an entry for every glyph. This second font was VeraMono.ttf . The fonts are loaded via PDType0Font.load(doc, fontfile).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12977532">PDFBOX-3379</key>
            <summary>PDType0Font Subsetting Monospace DejaVuSansMono</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tilman">Tilman Hausherr</assignee>
                                    <reporter username="maifi">Christian Maierhofer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Jun 2016 08:33:29 +0000</created>
                <updated>Sat, 25 Mar 2017 18:13:26 +0000</updated>
                            <resolved>Mon, 13 Jun 2016 16:44:07 +0000</resolved>
                                    <version>2.0.2</version>
                    <version>2.0.3</version>
                    <version>3.0.0 PDFBox</version>
                                    <fixVersion>2.0.3</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15325847" author="tilman" created="Sat, 11 Jun 2016 13:04:41 +0000"  >&lt;p&gt;Seems I broke something when I fixed &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3319&quot; title=&quot;Chinese character overlap other chinese character&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3319&quot;&gt;&lt;del&gt;PDFBOX-3319&lt;/del&gt;&lt;/a&gt;, because it works when I revert that change.&lt;/p&gt;

&lt;p&gt;memo for me:&lt;/p&gt;

&lt;p&gt;old (good for this case):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;AdvancedWidth: [1233, 0, 1233, 1233]
AdvancedWidth: [1233, 1233]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;current (bad):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;AdvancedWidth: [1233, 0, 1233, 1233]
AdvancedWidth: [1233, 1233, 37]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15325912" author="tilman" created="Sat, 11 Jun 2016 15:34:00 +0000"  >&lt;p&gt;glyphIds in the set: [0, 3, 36, 37]&lt;/p&gt;

&lt;p&gt;number of metrics: 4&lt;/p&gt;

&lt;p&gt;the current code increments &lt;tt&gt;hmetrics&lt;/tt&gt; and adds &lt;tt&gt;3&lt;/tt&gt; (number of metrics - 1) to the set. The mistake is that 3 was already part of the set, so there was no need to change anything. (3 is the last GID and its metrics are used for itself and all bigger GIDs.&lt;/p&gt;</comment>
                            <comment id="15325944" author="jira-bot" created="Sat, 11 Jun 2016 16:33:43 +0000"  >&lt;p&gt;Commit 1747910 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1747910&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1747910&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3379&quot; title=&quot;PDType0Font Subsetting Monospace DejaVuSansMono&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3379&quot;&gt;&lt;del&gt;PDFBOX-3379&lt;/del&gt;&lt;/a&gt;: correct handling of partially monospaced fonts, increase hmetrics only when last gid wasn&apos;t already part of the set&lt;/p&gt;</comment>
                            <comment id="15325945" author="jira-bot" created="Sat, 11 Jun 2016 16:34:41 +0000"  >&lt;p&gt;Commit 1747911 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1747911&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1747911&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3379&quot; title=&quot;PDType0Font Subsetting Monospace DejaVuSansMono&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3379&quot;&gt;&lt;del&gt;PDFBOX-3379&lt;/del&gt;&lt;/a&gt;: correct handling of partially monospaced fonts, increase hmetrics only when last gid wasn&apos;t already part of the set&lt;/p&gt;</comment>
                            <comment id="15325946" author="tilman" created="Sat, 11 Jun 2016 16:35:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wolfgang.glas%40ev-i.at&quot; class=&quot;user-hover&quot; rel=&quot;wolfgang.glas@ev-i.at&quot;&gt;wolfgang.glas@ev-i.at&lt;/a&gt; maybe the change is also relevant to your project.&lt;/p&gt;</comment>
                            <comment id="15326420" author="tilman" created="Sun, 12 Jun 2016 12:34:03 +0000"  >&lt;p&gt;There is another problem, related to the test by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=huazhong&quot; class=&quot;user-hover&quot; rel=&quot;huazhong&quot;&gt;huazhong&lt;/a&gt;. &quot;&#20013;&quot; is not positioned correctly. I suspect that leftSideBearing is not correct in some cases. The &quot;max glyph&quot; is used to have the width in the table, which is used for all higher glyphs. However the leftsidebearing is used of that (moost of the time) phantom glyph, instead of the leftsidebearing of the lowest existing glyph that is =&amp;gt; maxgid.&lt;/p&gt;</comment>
                            <comment id="15327655" author="jira-bot" created="Mon, 13 Jun 2016 16:06:12 +0000"  >&lt;p&gt;Commit 1748272 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1748272&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1748272&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3379&quot; title=&quot;PDType0Font Subsetting Monospace DejaVuSansMono&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3379&quot;&gt;&lt;del&gt;PDFBOX-3379&lt;/del&gt;&lt;/a&gt;: correct handling of partially monospaced fonts: first glyphid larger than maxgid needs width of maxgid but own lsb&lt;/p&gt;</comment>
                            <comment id="15327657" author="jira-bot" created="Mon, 13 Jun 2016 16:07:43 +0000"  >&lt;p&gt;Commit 1748274 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1748274&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1748274&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3379&quot; title=&quot;PDType0Font Subsetting Monospace DejaVuSansMono&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3379&quot;&gt;&lt;del&gt;PDFBOX-3379&lt;/del&gt;&lt;/a&gt;: correct handling of partially monospaced fonts: first glyphid larger than maxgid needs width of maxgid but own lsb&lt;/p&gt;</comment>
                            <comment id="15327663" author="jira-bot" created="Mon, 13 Jun 2016 16:09:40 +0000"  >&lt;p&gt;Commit 1748275 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1748275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1748275&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3379&quot; title=&quot;PDType0Font Subsetting Monospace DejaVuSansMono&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3379&quot;&gt;&lt;del&gt;PDFBOX-3379&lt;/del&gt;&lt;/a&gt;: remove file form wrong package&lt;/p&gt;</comment>
                            <comment id="15327665" author="jira-bot" created="Mon, 13 Jun 2016 16:13:44 +0000"  >&lt;p&gt;Commit 1748277 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1748277&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1748277&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3379&quot; title=&quot;PDType0Font Subsetting Monospace DejaVuSansMono&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3379&quot;&gt;&lt;del&gt;PDFBOX-3379&lt;/del&gt;&lt;/a&gt;: oops, restore&lt;/p&gt;</comment>
                            <comment id="15327668" author="jira-bot" created="Mon, 13 Jun 2016 16:15:18 +0000"  >&lt;p&gt;Commit 1748278 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1748278&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1748278&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3379&quot; title=&quot;PDType0Font Subsetting Monospace DejaVuSansMono&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3379&quot;&gt;&lt;del&gt;PDFBOX-3379&lt;/del&gt;&lt;/a&gt;: correct handling of partially monospaced fonts: first glyphid larger than maxgid needs width of maxgid but own lsb&lt;/p&gt;</comment>
                            <comment id="15327722" author="tilman" created="Mon, 13 Jun 2016 16:44:07 +0000"  >&lt;p&gt;Snapshot will be available soon at&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.3-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/2.0.3-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15329798" author="jira-bot" created="Tue, 14 Jun 2016 16:23:55 +0000"  >&lt;p&gt;Commit 1748436 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1748436&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1748436&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2854&quot; title=&quot;TTFSubsetter NoSuchElementException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2854&quot;&gt;&lt;del&gt;PDFBOX-2854&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3379&quot; title=&quot;PDType0Font Subsetting Monospace DejaVuSansMono&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3379&quot;&gt;&lt;del&gt;PDFBOX-3379&lt;/del&gt;&lt;/a&gt;: add test&lt;/p&gt;</comment>
                            <comment id="15329812" author="tilman" created="Tue, 14 Jun 2016 16:31:07 +0000"  >&lt;p&gt;The two new tests fail with the old code.&lt;/p&gt;</comment>
                            <comment id="15329822" author="jira-bot" created="Tue, 14 Jun 2016 16:33:59 +0000"  >&lt;p&gt;Commit 1748441 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1748441&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1748441&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2854&quot; title=&quot;TTFSubsetter NoSuchElementException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2854&quot;&gt;&lt;del&gt;PDFBOX-2854&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3379&quot; title=&quot;PDType0Font Subsetting Monospace DejaVuSansMono&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3379&quot;&gt;&lt;del&gt;PDFBOX-3379&lt;/del&gt;&lt;/a&gt;: add test&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12959537">PDFBOX-3319</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12809395" name="DejaVuSansMono.ttf" size="317336" author="maifi" created="Fri, 10 Jun 2016 08:37:28 +0000"/>
                            <attachment id="12809701" name="PDFBOX-3379-chinese-bad.pdf" size="10926" author="tilman" created="Sun, 12 Jun 2016 12:34:31 +0000"/>
                            <attachment id="12809700" name="PDFBOX-3379-chinese-good.pdf" size="10875" author="tilman" created="Sun, 12 Jun 2016 12:34:31 +0000"/>
                            <attachment id="12809883" name="PDFBOX-3379-solved.pdf" size="10948" author="tilman" created="Mon, 13 Jun 2016 16:42:11 +0000"/>
                            <attachment id="12809884" name="PDFBox3379.java" size="1695" author="tilman" created="Mon, 13 Jun 2016 16:42:11 +0000"/>
                            <attachment id="12809394" name="TTFFontTestPDFBox2.java" size="1502" author="maifi" created="Fri, 10 Jun 2016 08:36:55 +0000"/>
                            <attachment id="12809396" name="VeraMono.ttf" size="49224" author="maifi" created="Fri, 10 Jun 2016 08:37:28 +0000"/>
                            <attachment id="12809393" name="doTest.pdf" size="9070" author="maifi" created="Fri, 10 Jun 2016 08:34:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2z9wv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>