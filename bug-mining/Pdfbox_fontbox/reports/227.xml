<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:50:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-3579] Giant glyphs when rendering embedded fonts</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-3579</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I try to generate an image out of the attatched pdf. PDFViewer like &quot;Acrobat Reader&quot; or the Ubuntu &quot;Document Viewer&quot; are able to display the PDF in a correct way. PDFBox is a little bit confused about the font.&lt;/p&gt;

&lt;p&gt;Checked with the latest relase version:&lt;/p&gt;

&lt;p&gt;java -jar pdfbox-app-2.0.3.jar PDFToImage 978-3-86764-721-2_t2.pdf&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13021724">PDFBOX-3579</key>
            <summary>Giant glyphs when rendering embedded fonts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="floerke@doctronic.de">Holger Floerke</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Nov 2016 10:05:21 +0000</created>
                <updated>Sat, 25 Mar 2017 18:12:40 +0000</updated>
                            <resolved>Sun, 26 Feb 2017 14:43:04 +0000</resolved>
                                    <version>2.0.3</version>
                                    <fixVersion>2.0.5</fixVersion>
                    <fixVersion>3.0.0 PDFBox</fixVersion>
                                    <component>FontBox</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15853246" author="lehmi" created="Sun, 5 Feb 2017 15:12:55 +0000"  >&lt;p&gt;I guess I&apos;ve found the reason for the described issue, the fontmatrix of the font. The given font provides a font matrix in the top dictionary and different one in the private dictionary. Those have to be multiplied and everything is ok. According to the docs this approach shall be limited to synthetic fonts but it seems to be needed in the given case as well.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a patch to fix the issue, but there are still 2 things to do:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I didn&apos;t implement a full multiply, I&apos;ve just multplied the scaling factors of the matrices&lt;/li&gt;
	&lt;li&gt;the quality of the scaling is &quot;suboptimal&quot;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15853258" author="tilman" created="Sun, 5 Feb 2017 15:51:29 +0000"  >&lt;p&gt;no regressions&lt;/p&gt;</comment>
                            <comment id="15862888" author="jira-bot" created="Sun, 12 Feb 2017 17:32:33 +0000"  >&lt;p&gt;Commit 1782684 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1782684&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1782684&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3579&quot; title=&quot;Giant glyphs when rendering embedded fonts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3579&quot;&gt;&lt;del&gt;PDFBOX-3579&lt;/del&gt;&lt;/a&gt;: concatenate font matrix from top dictionary with font matrix from private dictionary to get the right scaling&lt;/p&gt;</comment>
                            <comment id="15862889" author="jira-bot" created="Sun, 12 Feb 2017 17:34:34 +0000"  >&lt;p&gt;Commit 1782685 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1782685&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1782685&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3579&quot; title=&quot;Giant glyphs when rendering embedded fonts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3579&quot;&gt;&lt;del&gt;PDFBOX-3579&lt;/del&gt;&lt;/a&gt;: concatenate font matrix from top dictionary with font matrix from private dictionary to get the right scaling&lt;/p&gt;</comment>
                            <comment id="15862892" author="lehmi" created="Sun, 12 Feb 2017 17:41:53 +0000"  >&lt;p&gt;I&apos;ve committed an improved version of the first patch. The scaling issue is solved now. &lt;br/&gt;
But there is another issue with the glyphs of some of the fonts (e.g. page 1, font R384, Garamond). It seems like the glyphs are rotated a little bit. The uppercase &quot;W&quot; is the most suitable example to demonstrate the effect. It&apos;s not an issue with the processing of the content stream as the glyph itself is rendered strange already. Just have a look at the font overview using PDFDebugger. I&apos;ve extracted the font in question and font forge renders the glyph as expected. Any ideas?&lt;/p&gt;</comment>
                            <comment id="15862903" author="tilman" created="Sun, 12 Feb 2017 18:30:25 +0000"  >&lt;p&gt;Here&apos;s a reduced version of the file. IMHO there&apos;s something wrong with the glyph path, and whatever it is, it was already in version 2.0.0.&lt;/p&gt;</comment>
                            <comment id="15863991" author="tilman" created="Mon, 13 Feb 2017 17:07:21 +0000"  >&lt;p&gt;Here&apos;s another, this one is easier to understand - the whole shape looks OK, except that the path ends at the wrong position. Because of that there is an extra line by closepath. I looked at the glyph with fontforge and there all numbers (one has to check &quot;postscript&quot; and &quot;positions&quot; in the &quot;number points&quot; submenu) differ, very slightly at the beginning but it gets more and more. In fontforge the numbers have a fractional component, in PDFBox they don&apos;t. I have no idea where the fractional component comes from. What&apos;s also weird is that the arrow (near 51.20 1239) goes in the wrong direction.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;rlineTo 51,000000 1261,000000
rrcurveTo 69,000000 1266,000000 89,000000 1272,000000 111,000000 1278,000000
rrcurveTo 144,000000 1288,000000 193,000000 1304,000000 258,000000 1325,000000
rlineTo 305,000000 1325,000000
rrcurveTo 305,000000 1292,000000 305,000000 1273,000000 305,000000 1268,000000
rrcurveTo 305,000000 720,000000 303,000000 393,000000 300,000000 287,000000
rrcurveTo 300,000000 224,000000 300,000000 190,000000 300,000000 186,000000
rrcurveTo 300,000000 111,000000 302,000000 69,000000 307,000000 60,000000
rrcurveTo 314,000000 47,000000 338,000000 38,000000 378,000000 33,000000
rrcurveTo 418,000000 28,000000 441,000000 23,000000 448,000000 18,000000
rrcurveTo 453,000000 15,000000 455,000000 10,000000 455,000000 3,000000
rrcurveTo 454,000000 -5,000000 452,000000 -11,000000 448,000000 -15,000000
rrcurveTo 444,000000 -19,000000 438,000000 -21,000000 429,000000 -21,000000
rrcurveTo 424,000000 -21,000000 388,000000 -20,000000 322,000000 -18,000000
rlineTo 190,000000 -14,000000
rlineTo 21,000000 -23,000000
rrcurveTo 10,000000 -24,000000 1,000000 -22,000000 -5,000000 -18,000000
rrcurveTo -10,000000 -15,000000 -13,000000 -11,000000 -13,000000 -5,000000
rrcurveTo -13,000000 2,000000 -11,000000 7,000000 -7,000000 10,000000
rrcurveTo -3,000000 13,000000 21,000000 18,000000 64,000000 25,000000
rrcurveTo 107,000000 32,000000 132,000000 38,000000 138,000000 42,000000
rrcurveTo 144,000000 46,000000 148,000000 57,000000 150,000000 74,000000
rrcurveTo 152,000000 98,000000 153,000000 165,000000 153,000000 276,000000
rlineTo 152,000000 506,000000
rlineTo 155,000000 744,000000
rlineTo 153,000000 982,000000
rlineTo 156,000000 1099,000000
rrcurveTo 156,000000 1122,000000 152,000000 1138,000000 144,000000 1148,000000
rrcurveTo 136,000000 1158,000000 120,000000 1168,000000 96,000000 1178,000000
rrcurveTo 60,000000 1192,000000 35,000000 1202,000000 21,000000 1208,000000
closepath
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15884769" author="jira-bot" created="Sun, 26 Feb 2017 14:38:52 +0000"  >&lt;p&gt;Commit 1784450 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/branches/2.0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1784450&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1784450&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3579&quot; title=&quot;Giant glyphs when rendering embedded fonts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3579&quot;&gt;&lt;del&gt;PDFBOX-3579&lt;/del&gt;&lt;/a&gt;: use fraction value instead of ignoring it&lt;/p&gt;</comment>
                            <comment id="15884772" author="jira-bot" created="Sun, 26 Feb 2017 14:40:41 +0000"  >&lt;p&gt;Commit 1784451 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;lehmi&lt;/a&gt; in branch &apos;pdfbox/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1784451&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1784451&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-3579&quot; title=&quot;Giant glyphs when rendering embedded fonts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-3579&quot;&gt;&lt;del&gt;PDFBOX-3579&lt;/del&gt;&lt;/a&gt;: use fraction value instead of ignoring it&lt;/p&gt;</comment>
                            <comment id="15884774" author="lehmi" created="Sun, 26 Feb 2017 14:43:04 +0000"  >&lt;p&gt;I&apos;ve finally found the missing piece. A type2 font supports 16-bit signed&lt;br/&gt;
integers with 16bits of fraction and pdfbox ignored those fraction values. After taking them into account everything looks fine.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12839538" name="978-3-86764-721-2_t2.pdf" size="380348" author="floerke@doctronic.de" created="Fri, 18 Nov 2016 10:06:20 +0000"/>
                            <attachment id="12839539" name="978-3-86764-721-2_t21.jpg" size="280812" author="floerke@doctronic.de" created="Fri, 18 Nov 2016 10:06:20 +0000"/>
                            <attachment id="12852261" name="PDFBOX-3579-reduced.pdf" size="87774" author="tilman" created="Sun, 12 Feb 2017 18:30:25 +0000"/>
                            <attachment id="12852376" name="PDFBOX-3579-reduced2.pdf" size="87773" author="tilman" created="Mon, 13 Feb 2017 17:07:21 +0000"/>
                            <attachment id="12851084" name="PDFBOX-3579_FontMatrix_patch.txt" size="2488" author="lehmi" created="Sun, 5 Feb 2017 15:12:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36hzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>