<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:48:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PDFBOX-62] Incorrect (zero) character widths returned in some docs</title>
                <link>https://issues.apache.org/jira/browse/PDFBOX-62</link>
                <project id="12310760" key="PDFBOX">PDFBox</project>
                    <description>&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;imported from SourceForge&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;a href=&quot;http://sourceforge.net/tracker/index.php?group_id=78314&amp;amp;atid=552832&amp;amp;aid=1216674&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sourceforge.net/tracker/index.php?group_id=78314&amp;amp;atid=552832&amp;amp;aid=1216674&lt;/a&gt;&lt;br/&gt;
Originally submitted by tamirhassan on 2005-06-07 13:42.&lt;/p&gt;

&lt;p&gt;For certain PDF documents (such as the one attached) &lt;br/&gt;
the character/string widths (as obtained e.g. by the &lt;br/&gt;
PDFont.getStringWidth method) are not returned &lt;br/&gt;
correctly, i.e. they appear to be correct for punctuation &lt;br/&gt;
characters but are zero for alphanumeric characters.  &lt;/p&gt;

&lt;p&gt;It seems as if these alphanumeric characters are NOT &lt;br/&gt;
within PDFont.firstChar and PDFont.lastChar in the &lt;br/&gt;
Type 1 font.  The method therefore attempts to obtain &lt;br/&gt;
the font widths from the AFM (font metric) file, but fails &lt;br/&gt;
(silently) with a &apos;resource is null&apos; logline message.&lt;/p&gt;

&lt;p&gt;(Note that this problem doesn&apos;t seem to occur with Type &lt;br/&gt;
1 fonts in other documents.)&lt;/p&gt;

&lt;p&gt;A more detailed discussion regarding this issue can be &lt;br/&gt;
found in this link:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://sourceforge.net/forum/forum.php?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sourceforge.net/forum/forum.php?&lt;/a&gt;&lt;br/&gt;
thread_id=1260349&amp;amp;forum_id=267205&lt;/p&gt;

&lt;p&gt;Thanks in advance for any help that can be obtained,&lt;/p&gt;

&lt;p&gt;Tam&lt;/p&gt;</description>
                <environment></environment>
        <key id="12391096">PDFBOX-62</key>
            <summary>Incorrect (zero) character widths returned in some docs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lehmi">Andreas Lehmk&#252;hler</assignee>
                                    <reporter username="-1">None</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jun 2005 20:42:00 +0000</created>
                <updated>Sun, 22 Jun 2014 14:34:54 +0000</updated>
                            <resolved>Thu, 5 Jun 2014 21:35:37 +0000</resolved>
                                    <version>1.8.5</version>
                    <version>2.0.0</version>
                                    <fixVersion>1.8.6</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Rendering</component>
                    <component>Text extraction</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="12771652" author="tamirhassan" created="Thu, 29 Oct 2009 22:09:54 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;It&apos;s been a good few years since I made this bug report, and can&apos;t remember which document I had submitted at the time (but the attachment doesn&apos;t seem to have survived the transition to Apache).  This problem has now reccurred on another document, which I have attached here, and I think I have now found a fix for this problem, but am not 100% sure exactly what the reason is.&lt;/p&gt;

&lt;p&gt;Basically, the problematic text in the attached document has the font &apos;TimesNewRoman&apos;, which does not seem to have any metric information associated with it in the PDF file.  I don&apos;t know if this file conforms to specification, but all PDF readers seem to cope with it.&lt;/p&gt;

&lt;p&gt;The standard font in PDF is called &apos;Times-Roman&apos;, and the metrics for this font are provided within PDFBox and are not required to be present in the PDF file.  The Windows copycat typeface, Times New Roman, is designed around identical metrics as the Adobe PostScript version.  However, because the font name is given as TimesNewRoman and not Times-Roman, these metrics are not automatically found by PDFBox and therefore null.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure what&apos;s the proper way to fix this, but I have simply added the following lines to the static declarations at the beginning of PDFont.java:&lt;/p&gt;

&lt;p&gt;(existing lines)&lt;br/&gt;
        afmResources.put( COSName.getPDFName( &quot;Times-Bold&quot; ), &quot;Resources/afm/Times-Bold.afm&quot; );&lt;br/&gt;
        afmResources.put( COSName.getPDFName( &quot;Times-BoldItalic&quot; ), &quot;Resources/afm/Times-BoldItalic.afm&quot; );&lt;br/&gt;
        afmResources.put( COSName.getPDFName( &quot;Times-Italic&quot; ), &quot;Resources/afm/Times-Italic.afm&quot; );&lt;br/&gt;
        afmResources.put( COSName.getPDFName( &quot;Times-Roman&quot; ), &quot;Resources/afm/Times-Roman.afm&quot; );&lt;br/&gt;
        afmResources.put( COSName.getPDFName( &quot;ZapfDingbats&quot; ), &quot;Resources/afm/ZapfDingbats.afm&quot; );&lt;/p&gt;

&lt;p&gt;(new lines)        &lt;br/&gt;
        afmResources.put( COSName.getPDFName( &quot;TimesNewRoman,Bold&quot; ), &quot;Resources/afm/Times-Bold.afm&quot; );&lt;br/&gt;
        afmResources.put( COSName.getPDFName( &quot;TimesNewRoman,BoldItalic&quot; ), &quot;Resources/afm/Times-BoldItalic.afm&quot; );&lt;br/&gt;
        afmResources.put( COSName.getPDFName( &quot;TimesNewRoman,Italic&quot; ), &quot;Resources/afm/Times-Italic.afm&quot; );&lt;br/&gt;
        afmResources.put( COSName.getPDFName( &quot;TimesNewRoman&quot; ), &quot;Resources/afm/Times-Roman.afm&quot; );&lt;/p&gt;

&lt;p&gt;Now, the metrics of Times-Roman will also be used for the geometrically identical TimesNewRoman, if no other metrics are provided.&lt;/p&gt;

&lt;p&gt;If anyone else has this problem, I propose this as a quick solution.  The same should also be done for the Arial (and other Windows copycat) typefaces.  But it would be nice to have a fix or at least suggestion from someone who knows more about the specifics of typefaces in PDF about the right way to solve this problem.&lt;/p&gt;

&lt;p&gt;HTH,&lt;br/&gt;
Tamir&lt;/p&gt;</comment>
                            <comment id="12786414" author="lehmi" created="Sat, 5 Dec 2009 14:30:27 +0000"  >&lt;p&gt;Thanks for your report. As I can&apos;t reproduce the described behaviour, I&apos;d like to know which version you are using? Am I right that it is an older one like 0.7.x? The current trunk version produces an other error, because of some issue with the embedded truetype font:&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.pdfbox.pdmodel.font.PDTrueTypeFont.drawString(PDTrueTypeFont.java:333)&lt;br/&gt;
	at org.apache.pdfbox.pdfviewer.PageDrawer.processTextPosition(PageDrawer.java:174)&lt;br/&gt;
	at org.apache.pdfbox.util.PDFStreamEngine.processEncodedText(PDFStreamEngine.java:463)&lt;br/&gt;
	at org.apache.pdfbox.util.operator.ShowText.process(ShowText.java:50)&lt;br/&gt;
	at org.apache.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:516)&lt;br/&gt;
	at org.apache.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:229)&lt;br/&gt;
	at org.apache.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:188)&lt;br/&gt;
	at org.apache.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:99)&lt;br/&gt;
	at org.apache.pdfbox.pdfviewer.PDFPagePanel.paint(PDFPagePanel.java:76)&lt;/p&gt;</comment>
                            <comment id="13286014" author="benroot" created="Wed, 30 May 2012 20:36:22 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I have just downloaded pdfbox-app-1.7.0.jar and began to use it in my application. I encountered a similar zero character width problem. I loaded the file that Tamir attached (5542.pdf) using the following code snippet and found that the printed document had a number of zero width characters which appear as points where multiple characters overwrite each other.&lt;/p&gt;

&lt;p&gt;Begin Code&lt;/p&gt;

&lt;p&gt;        final PDDocument loaded = PDDocument.load(new File(&quot;/Users/ben/Desktop/5542.pdf&quot;));&lt;br/&gt;
        loaded.silentPrint();&lt;/p&gt;

&lt;p&gt;End Code&lt;/p&gt;

&lt;p&gt;Thanks for any light you can shed on this!&lt;/p&gt;

&lt;p&gt;Best,&lt;br/&gt;
Ben&lt;/p&gt;</comment>
                            <comment id="13975491" author="tilman" created="Mon, 21 Apr 2014 09:15:10 +0000"  >&lt;p&gt;I tried the workaround by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tamirhassan&quot; class=&quot;user-hover&quot; rel=&quot;tamirhassan&quot;&gt;tamirhassan&lt;/a&gt; but it doesn&apos;t work, or doesn&apos;t work anymore. The reason is that the fonts with zero width are truetype, but the workaround applies to type1 fonts.&lt;/p&gt;</comment>
                            <comment id="13975552" author="tilman" created="Mon, 21 Apr 2014 12:57:00 +0000"  >&lt;p&gt;From the specification:&lt;br/&gt;
====&lt;br/&gt;
&quot;A TrueType font dictionary can contain the same entries as a Type 1 font dictionary (Table 5.8 on page 413)&quot;&lt;/p&gt;

&lt;p&gt;FirstChar, LastChar, Widths and FontDescriptor are &quot;Required except for the standard 14 fonts&quot;.&lt;/p&gt;

&lt;p&gt;&quot;These fonts, or their font metrics and suitable substitution fonts, must be available to the consumer application. The character sets and encodings for these fonts are listed in Appendix D. The Adobe font metrics (AFM) files for the standard 14 fonts are available from the ASN Web site (see the Bibliography). For more information on font metrics, see Adobe Technical Note #5004, Adobe Font Metrics File Format Specification.&quot;&lt;br/&gt;
====&lt;/p&gt;

&lt;p&gt;By stretching this somewhat, I&apos;d say that TT fonts named like standard 14 fonts are also to be handled like standard 14 fonts, when the metrics are missing.&lt;/p&gt;

&lt;p&gt;Therefore I implemented PDTrueTypeFont.getAFM() based on the code found in PDType1Font and now both files (the one from here and the one from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2006&quot; title=&quot;Glyphs rendered at the same spot&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2006&quot;&gt;&lt;del&gt;PDFBOX-2006&lt;/del&gt;&lt;/a&gt;) render.&lt;/p&gt;

&lt;p&gt;I am attaching a diff and two properly rendered files for review. I won&apos;t commit it right now, I&apos;d like to get feedback first; if I do commit it, I would create a separate class to move the (now double) AFM code there.&lt;/p&gt;</comment>
                            <comment id="13975741" author="lehmi" created="Mon, 21 Apr 2014 17:23:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; No a bad idea, but as we use some external ttf fonts as substitution for the missing one, we should use their width values as well. I&apos;m working on that.&lt;/p&gt;</comment>
                            <comment id="13982343" author="lehmi" created="Sun, 27 Apr 2014 14:38:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; I guess you extended your font mapping, didn&apos;t you? Which fonts did you use to get those results? &lt;/p&gt;

&lt;p&gt;My results are better than the origin ones but my widths are a little bit bigger and some of the text is misplaced.&lt;/p&gt;</comment>
                            <comment id="13982356" author="tilman" created="Sun, 27 Apr 2014 15:26:55 +0000"  >&lt;p&gt;Yes, I forgot to test my changes against a &quot;pure&quot; version; this is the current content of the &quot;PDFBox_External_Fonts.properties&quot; file. Also, don&apos;t forget &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1800&quot; title=&quot;Bundled Arial fonts are broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1800&quot;&gt;&lt;del&gt;PDFBOX-1800&lt;/del&gt;&lt;/a&gt;, the built-in Arial font doesn&apos;t work properly.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;#Arial-BoldItalicMT=org/apache/pdfbox/resources/ttf/Arial-BoldItalicMT.ttf
#Arial-BoldMT=org/apache/pdfbox/resources/ttf/Arial-BoldMT.ttf
#ArialMT=org/apache/pdfbox/resources/ttf/ArialMT.ttf
Arial-BoldItalicMT=c:/Windows/Fonts/ARIALBI.TTF
Arial-BoldMT=c:/Windows/Fonts/ARIALBD.TTF
ArialMT=C:/Windows/Fonts/ARIAL.TTF
#UNKNOWN_FONT=org/apache/pdfbox/resources/ttf/ArialMT.ttf
UNKNOWN_FONT=C:/Windows/Fonts/ARIAL.TTF
Arial=C:/Windows/Fonts/ARIAL.TTF
Arial,Bold=c:/Windows/Fonts/ARIALBD.TTF
Arial,BoldItalic=c:/Windows/Fonts/ARIALBI.TTF
ArialNarrow=C:/Windows/Fonts/ARIALN.TTF
ArialNarrow,Bold=C:/Windows/Fonts/ARIALNB.TTF
Symbol=C:/Windows/Fonts/SYMBOL.TTF
Arial-ItalicMT=C:/Windows/Fonts/ARIALI.TTF
TimesNewRomanPSMT=C:/Windows/Fonts/TIMES.TTF
TimesNewRoman=C:/Windows/Fonts/times.ttf
TimesNewRoman,Bold=C:/Windows/Fonts/timesbd.ttf
TimesNewRoman,Italic=C:/Windows/Fonts/timesi.ttf
CenturyGothic=C:/Windows/Fonts/gothic.ttf
TrebuchetMS=C:/Windows/Fonts/verdana.ttf
TrebuchetMS-Bold=C:/Windows/Fonts/verdanab.ttf
Verdana=C:/Windows/Fonts/verdana.ttf
Verdana-Bold=C:/Windows/Fonts/verdanab.ttf
Verdana-Italic=C:/Windows/Fonts/verdanai.ttf
Verdana-BoldItalic=C:/Windows/Fonts/verdanaz.ttf
LucidaConsole=C:/Windows/Fonts/lucon.ttf
Tahoma=C:/Windows/Fonts/tahoma.ttf
TahomaBold=C:/Windows/Fonts/tahomabd.ttf
TimesNewRomanPS-BoldMT=C:/Windows/Fonts/TIMESBD.TTF
TimesNewRomanPS-ItalicMT=C:/Windows/Fonts/TIMESI.TTF
BookmanOldStyle=C:/Windows/Fonts/BOOKOS.TTF
BookmanOldStyle-Bold=C:/Windows/Fonts/BOOKOSB.TTF
CourierNewPSMT=C:/Windows/Fonts/cour.TTF
Courier-Bold=C:/Windows/Fonts/courbd.TTF
Verdana-BoldItalic=C:/Windows/Fonts/verdanaz.TTF
BookmanOldStyle-Italic=C:/Windows/Fonts/BOOKOSI.TTF
TimesNewRomanPS-BoldItalicMT=C:/Windows/Fonts/timesbi.ttf
TimesNewRoman,Bold=c:/Windows/Fonts/TIMESBD.TTF
TimesNewRoman,BoldItalic=c:/Windows/Fonts/TIMESBI.TTF
Arial-Black=c:/Windows/Fonts/ariblk.ttf
PalatinoLinotype-Roman=c:/Windows/Fonts/pala.ttf
PalatinoLinotype-Bold=c:/Windows/Fonts/palab.ttf
PalatinoLinotype-Italic=c:/Windows/Fonts/palai.ttf
PalatinoLinotype-BoldItalic=c:/Windows/Fonts/palabi.ttf
ArialUnicodeMS=c:/Windows/Fonts/ARIALUNI.TTF

# PDFBOX-870
CHelveticaCondensed=C:/Windows/Fonts/ARIALN.TTF
CBHelveticaCondensedBold=C:/Windows/Fonts/ARIALNB.TTF
#BHelveticaBold=c:/Windows/Fonts/ARIALBD.TTF
#IHelveticaOblique=C:/Windows/Fonts/ARIAL.TTF

BHelveticaBold=C:/Windows/Fonts/timesbd.ttf
IHelveticaOblique=C:/Windows/Fonts/timesi.ttf
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13982460" author="maristaran" created="Sun, 27 Apr 2014 20:44:16 +0000"  >&lt;p&gt;Maybe related to &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1755&quot; title=&quot;Wrong widthOfSpace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1755&quot;&gt;&lt;del&gt;PDFBOX-1755&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13982464" author="lehmi" created="Sun, 27 Apr 2014 20:52:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;tilman&lt;/a&gt; My solution works fine after using windows fonts instead of the dejavu fonts included in fedora. I&apos;ll try to find out why those fonts are different before committing my code.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maristaran&quot; class=&quot;user-hover&quot; rel=&quot;maristaran&quot;&gt;maristaran&lt;/a&gt; No, this issue isn&apos;t related to &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1755&quot; title=&quot;Wrong widthOfSpace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1755&quot;&gt;&lt;del&gt;PDFBOX-1755&lt;/del&gt;&lt;/a&gt;. The given pdf hasn&apos;t any font included and no width values are provided, so that we have to calculate them on our own. My solution tries to extract those values from the font which is used for rendering.&lt;/p&gt;</comment>
                            <comment id="13988645" author="tilman" created="Sat, 3 May 2014 10:59:33 +0000"  >&lt;p&gt;Updated patch to handle the file from &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2053&quot; title=&quot;Issue with PDFBox position reading&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2053&quot;&gt;&lt;del&gt;PDFBOX-2053&lt;/del&gt;&lt;/a&gt;, it maps missing Arial withs to Helvetica AFM files.&lt;/p&gt;</comment>
                            <comment id="13990540" author="chupacabras" created="Tue, 6 May 2014 11:12:16 +0000"  >&lt;p&gt;I made 2 quick fixes for this (actually it is for &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2059&quot; title=&quot;Characters are not positioned properly (due to wrong width&amp;amp;height of chars)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2059&quot;&gt;&lt;del&gt;PDFBOX-2059&lt;/del&gt;&lt;/a&gt;). Both are for PDTrueTypeFont. I don&apos;t know whether it is useful or you already have some other plans for this bug.&lt;/p&gt;

&lt;p&gt;1. added getFontWidth() where I calculate widths from TTF font. Right now you are relying only on &quot;widths&quot; defined within PDF&lt;br/&gt;
2. modified getExternalFontFile2() so I am looking for system fonts too. Right now you are using only fonts defined in PDFBox_External_Fonts.properties&lt;/p&gt;

&lt;p&gt;It works, but take it just for inspiration. It should be moved do PDFont (I guess) and make it more robust.&lt;/p&gt;</comment>
                            <comment id="13990542" author="chupacabras" created="Tue, 6 May 2014 11:13:03 +0000"  >&lt;p&gt;Just let me know if it is useful somehow &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13990633" author="tilman" created="Tue, 6 May 2014 13:27:28 +0000"  >&lt;p&gt;You are using sun.* classes, this is risky because these might change between JDKs.&lt;/p&gt;</comment>
                            <comment id="13990699" author="chupacabras" created="Tue, 6 May 2014 14:47:54 +0000"  >&lt;p&gt;Yes, I am aware of that.&lt;br/&gt;
However I think it is better than nothing. It works on current JDK.&lt;/p&gt;

&lt;p&gt;It is possible to replace those used &quot;sun.*&quot; classes by own implementation of &quot;system font look-up&quot;. That would be quite easy.&lt;/p&gt;</comment>
                            <comment id="13991590" author="lehmi" created="Wed, 7 May 2014 06:15:48 +0000"  >&lt;p&gt;Thanks Juraj, I&apos;m following the same approach to calculate the width, but mine already looks a little bit more mature. It supports the correct encoding/mapping, monospaced fonts and I know where these magic factor comes from (it&apos;s 1000/unitsPerEm , a value which can be found in the head table) &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;We have to see what to do with the fonts, first of all I&apos;d like to add the calculation part.&lt;/p&gt;</comment>
                            <comment id="14017092" author="lehmi" created="Tue, 3 Jun 2014 20:23:51 +0000"  >&lt;p&gt;As a starter I&apos;ve added some convenience methods to the TrueTypeFont class in the trunk &lt;a href=&quot;http://svn.apache.org/r1599786&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1599786&lt;/a&gt; i&lt;/p&gt;</comment>
                            <comment id="14018951" author="lehmi" created="Thu, 5 Jun 2014 16:50:22 +0000"  >&lt;p&gt;Starting with revision  &lt;a href=&quot;http://svn.apache.org/r1600697&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1600697&lt;/a&gt; PDFont remembers if a font doesn&apos;t provide any widths and doesn&apos;t try to retrieve those values anymore.&lt;/p&gt;</comment>
                            <comment id="14019273" author="lehmi" created="Thu, 5 Jun 2014 21:01:17 +0000"  >&lt;p&gt;The missing width values are now extracted from the true type font directly. I&apos;ve added the changes in revision &lt;a href=&quot;http://svn.apache.org/r1600761&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1600761&lt;/a&gt; to the trunk.&lt;br/&gt;
I&apos;m going to merge the changes to the 1.8 branch soon.&lt;/p&gt;

&lt;p&gt;I had to double some of the code from TTFGlyph2D as I hadn&apos;t any idea where to put the code. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14019312" author="lehmi" created="Thu, 5 Jun 2014 21:35:37 +0000"  >&lt;p&gt;I&apos;ve ported the changes to the 1.8 branch and added them in revisions &lt;a href=&quot;http://svn.apache.org/r1600771&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1600771&lt;/a&gt; and &lt;a href=&quot;http://svn.apache.org/r1600772&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1600772&lt;/a&gt;. In addition to the changes made to the trunk I had to merge some others to the branch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;adding some constants to CMAPTable&lt;/li&gt;
	&lt;li&gt;adding the class MacOSRomanEncoding&lt;/li&gt;
	&lt;li&gt;adding 2 methods to the class Encoding&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14019345" author="tilman" created="Thu, 5 Jun 2014 22:10:34 +0000"  >&lt;p&gt;The change works for several files with the width problem, but not for the one of &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2053&quot; title=&quot;Issue with PDFBox position reading&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2053&quot;&gt;&lt;del&gt;PDFBOX-2053&lt;/del&gt;&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14019652" author="lehmi" created="Fri, 6 Jun 2014 07:49:22 +0000"  >&lt;p&gt;Thanks for the pointer. It&apos;s maybe an issue with the font mapping, I&apos;ll have a deeper look later. &lt;/p&gt;</comment>
                            <comment id="14019797" author="tilman" created="Fri, 6 Jun 2014 12:23:57 +0000"  >&lt;p&gt;Maybe, maybe not: one one hand, I remember I had to modify my temporary solution for that file by adding a mapping for Arial, on the other hand, changing the 2nd line of getFontWidth() to &quot;if (width &amp;lt;= 0)&quot; instead of &quot;if (width &amp;lt; 0)&quot; also brings a correct rendering.&lt;/p&gt;</comment>
                            <comment id="14020826" author="lehmi" created="Sat, 7 Jun 2014 15:10:25 +0000"  >&lt;p&gt;I&apos;ve fixed the issue with &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2053&quot; title=&quot;Issue with PDFBox position reading&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2053&quot;&gt;&lt;del&gt;PDFBOX-2053&lt;/del&gt;&lt;/a&gt; as proposed in revisions &lt;a href=&quot;http://svn.apache.org/r1601124&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1601124&lt;/a&gt; (trunk) and &lt;a href=&quot;http://svn.apache.org/r1601125&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1601125&lt;/a&gt; (1.8 branch)&lt;/p&gt;</comment>
                            <comment id="14032005" author="tilman" created="Sun, 15 Jun 2014 19:42:26 +0000"  >&lt;p&gt;This research paper mentioned this bug (not by name) in 2011 &lt;br/&gt;
&lt;a href=&quot;http://www.iaeng.org/publication/IMECS2011/IMECS2011_pp283-286.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.iaeng.org/publication/IMECS2011/IMECS2011_pp283-286.pdf&lt;/a&gt;&lt;br/&gt;
on page 3 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12535630">PDFBOX-1192</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12704345">PDFBOX-2006</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12711910">PDFBOX-2053</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12712278">PDFBOX-2059</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12459313">PDFBOX-663</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12663031">PDFBOX-1689</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12423629" name="5542.pdf" size="81795" author="tamirhassan" created="Thu, 29 Oct 2009 22:11:13 +0000"/>
                            <attachment id="12643551" name="PDFBOX-2059_PDTrueTypeFont.diff" size="4943" author="chupacabras" created="Tue, 6 May 2014 11:13:03 +0000"/>
                            <attachment id="12643192" name="PDTrueTypeFont.diff" size="6573" author="tilman" created="Sat, 3 May 2014 10:59:33 +0000"/>
                            <attachment id="12641059" name="pdfbox-2006-zerowidth.pdf-1.png" size="113601" author="tilman" created="Mon, 21 Apr 2014 12:56:04 +0000"/>
                            <attachment id="12641058" name="pdfbox-62-zerowidth.pdf-1.png" size="252360" author="tilman" created="Mon, 21 Apr 2014 12:56:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84867</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1dwmv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>289384</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>