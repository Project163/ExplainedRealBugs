diff --git a/system/libraries/Profiler.php b/system/libraries/Profiler.php
index e7d88b665..8dca22174 100644
--- a/system/libraries/Profiler.php
+++ b/system/libraries/Profiler.php
@@ -182,7 +182,7 @@ class CI_Profiler {
 		{
 			$output .= '<fieldset style="border:1px solid #0000FF;padding:6px 10px 10px 10px;margin:20px 0 20px 0;background-color:#eee">';
 			$output .= "\n";
-			$output .= '<legend style="color:#0000FF;">&nbsp;&nbsp;'.$this->CI->lang->line('profiler_database').':&nbsp; '.$db->database.'&nbsp;&nbsp;&nbsp;'.$this->CI->lang->line('profiler_queries').': '.count($this->CI->db->queries).'&nbsp;&nbsp;&nbsp;</legend>';
+			$output .= '<legend style="color:#0000FF;">&nbsp;&nbsp;'.$this->CI->lang->line('profiler_database').':&nbsp; '.$db->database.'&nbsp;&nbsp;&nbsp;'.$this->CI->lang->line('profiler_queries').': '.count($db->queries).'&nbsp;&nbsp;&nbsp;</legend>';
 			$output .= "\n";
 			$output .= "\n\n<table style='width:100%;'>\n";
 
diff --git a/user_guide/changelog.html b/user_guide/changelog.html
index 786b90269..0b060da22 100644
--- a/user_guide/changelog.html
+++ b/user_guide/changelog.html
@@ -198,6 +198,7 @@ Hg Tag: </p>
 	<li>Added a log message in core/output if the cache directory config value was not found.</li>
 	<li>Fixed a bug where multiple libraries could not be loaded by passing an array to load-&gt;library()</li>
 	<li>Fixed a bug in the html helper where too much white space was rendered between the src and alt tags in the img() function.</li>
+	<li>Fixed a bug in the profilers _compile_queries() function.</li>
 </ul>
 
 <h2>Version 1.7.2</h2>
