{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4884","repository_url":"https://api.github.com/repos/bcit-ci/CodeIgniter","labels_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4884/labels{/name}","comments_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4884/comments","events_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4884/events","html_url":"https://github.com/bcit-ci/CodeIgniter/issues/4884","id":185821928,"node_id":"MDU6SXNzdWUxODU4MjE5Mjg=","number":4884,"title":"SQL Error on Where Statement when Using Query Builder Class","user":{"login":"imbagila","id":16681344,"node_id":"MDQ6VXNlcjE2NjgxMzQ0","avatar_url":"https://avatars.githubusercontent.com/u/16681344?v=4","gravatar_id":"","url":"https://api.github.com/users/imbagila","html_url":"https://github.com/imbagila","followers_url":"https://api.github.com/users/imbagila/followers","following_url":"https://api.github.com/users/imbagila/following{/other_user}","gists_url":"https://api.github.com/users/imbagila/gists{/gist_id}","starred_url":"https://api.github.com/users/imbagila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imbagila/subscriptions","organizations_url":"https://api.github.com/users/imbagila/orgs","repos_url":"https://api.github.com/users/imbagila/repos","events_url":"https://api.github.com/users/imbagila/events{/privacy}","received_events_url":"https://api.github.com/users/imbagila/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":140924,"node_id":"MDU6TGFiZWwxNDA5MjQ=","url":"https://api.github.com/repos/bcit-ci/CodeIgniter/labels/Bug","name":"Bug","color":"eb2420","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/milestones/13","html_url":"https://github.com/bcit-ci/CodeIgniter/milestone/13","labels_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/milestones/13/labels","id":2089974,"node_id":"MDk6TWlsZXN0b25lMjA4OTk3NA==","number":13,"title":"3.1.2","description":"","creator":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":5,"state":"closed","created_at":"2016-10-24T17:01:10Z","updated_at":"2016-10-31T07:34:42Z","due_on":null,"closed_at":"2016-10-31T07:34:42Z"},"comments":2,"created_at":"2016-10-28T02:01:28Z","updated_at":"2016-10-28T09:51:26Z","closed_at":"2016-10-28T09:51:26Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"First of all I'm sorry for my bad English and I'm new in github so is gonna be long and probably bad post here.\n\nSo first I use this code to show the number of rows :\n\n```\n// Query\n$this->db->select();\n$this->db->from('tb_bosp, tb_siswa, tb_kelas');\n$this->db->where('tb_bosp.nis = tb_siswa.nis');\n$this->db->where('tb_siswa.id_kelas = tb_kelas.id_kelas');\n$this->db->where('id_thn_ajar', $thn_ajar);\n$this->db->where('tingkat', $tingkat);\n$this->db->where('bulan_bosp', date('m'));\n\n// Get query\n$query = $this->db->get();\n\n// Return query\nreturn $query->num_rows();\n```\n\n(`$thn_ajar` and `$tingkat` value is on parameter function)\n\nAnd then I got this error :\n\n> Error Number: 1064\n> \n> You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '`NULL` AND `tb_siswa`.`id_kelas` = `tb_kelas`.`id_kelas` AND `id_thn_ajar` = '1'' at line 3\n> \n> SELECT \\* FROM `tb_bosp`, `tb_siswa`, `tb_kelas` WHERE `tb_bosp`.`nis` = `tb_siswa`.`n IS NOT` `NULL` AND `tb_siswa`.`id_kelas` = `tb_kelas`.`id_kelas` AND `id_thn_ajar` = '1' AND `tingkat` = 'X' AND `bulan_bosp` = '10'\n> \n> Filename: E:/Program Files/xampp/htdocs/akua/codeigniter/database/DB_driver.php\n> \n> Line Number: 691\n\nAfter that I go to CodeIgniter system folder and open this file :\nLocation : `my_project_folder/codeigniter/database/DB_driver.php`\n( I was changed my system folder name to codeigniter)\n\nI try to remove this and it works (no error showing) :\n\n```\n682. elseif (preg_match('/\\s*(!?=|<>|IS(?:\\s+NOT)?)\\s*$/i', $k, $match, PREG_OFFSET_CAPTURE))\n683. {\n684.    $k = substr($k, 0, $match[0][1]).($match[1][0] === '=' ? ' IS NULL' : ' IS NOT NULL');\n685. }\n```\n\nBut I undo that instead because when I remove that codes I realize that is gonna be error in future on my project. So the last option I should change my model code into this, and it works :\n\n```\n// Query\n$query =    'SELECT * ';\n$query .=   'FROM tb_bosp, tb_siswa, tb_kelas ';\n$query .=   'WHERE tb_bosp.nis = tb_siswa.nis ';\n$query .=   'AND tb_siswa.id_kelas = tb_kelas.id_kelas ';\n$query .=   'AND id_thn_ajar = \"' . $thn_ajar . '\" ';\n$query .=   'AND tingkat = \"' . $tingkat . '\" ';\n$query .=   'AND bulan_bosp = \"' . date('m') . '\"';\n\n// Get query\n$query = $this->db->query($query);\n\n// Return query\nreturn $query->num_rows();\n```\n\nNote : Error showing because this code : `$this->db->where('tb_bosp.nis = tb_siswa.nis');`\nThis is a bug or just my code is wrong?\n","closed_by":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4884/timeline","performed_via_github_app":null,"state_reason":"completed"}