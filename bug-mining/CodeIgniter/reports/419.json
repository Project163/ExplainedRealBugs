{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4173","repository_url":"https://api.github.com/repos/bcit-ci/CodeIgniter","labels_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4173/labels{/name}","comments_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4173/comments","events_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4173/events","html_url":"https://github.com/bcit-ci/CodeIgniter/issues/4173","id":111642133,"node_id":"MDU6SXNzdWUxMTE2NDIxMzM=","number":4173,"title":"Error with composite keys created in DBForge","user":{"login":"irobotham","id":6844623,"node_id":"MDQ6VXNlcjY4NDQ2MjM=","avatar_url":"https://avatars.githubusercontent.com/u/6844623?v=4","gravatar_id":"","url":"https://api.github.com/users/irobotham","html_url":"https://github.com/irobotham","followers_url":"https://api.github.com/users/irobotham/followers","following_url":"https://api.github.com/users/irobotham/following{/other_user}","gists_url":"https://api.github.com/users/irobotham/gists{/gist_id}","starred_url":"https://api.github.com/users/irobotham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/irobotham/subscriptions","organizations_url":"https://api.github.com/users/irobotham/orgs","repos_url":"https://api.github.com/users/irobotham/repos","events_url":"https://api.github.com/users/irobotham/events{/privacy}","received_events_url":"https://api.github.com/users/irobotham/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":140924,"node_id":"MDU6TGFiZWwxNDA5MjQ=","url":"https://api.github.com/repos/bcit-ci/CodeIgniter/labels/Bug","name":"Bug","color":"eb2420","default":false,"description":null},{"id":247789555,"node_id":"MDU6TGFiZWwyNDc3ODk1NTU=","url":"https://api.github.com/repos/bcit-ci/CodeIgniter/labels/Regression","name":"Regression","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/milestones/7","html_url":"https://github.com/bcit-ci/CodeIgniter/milestone/7","labels_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/milestones/7/labels","id":1345058,"node_id":"MDk6TWlsZXN0b25lMTM0NTA1OA==","number":7,"title":"3.0.3","description":"","creator":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":6,"state":"closed","created_at":"2015-10-08T16:29:33Z","updated_at":"2015-11-03T09:51:20Z","due_on":null,"closed_at":"2015-11-03T09:51:20Z"},"comments":1,"created_at":"2015-10-15T15:27:01Z","updated_at":"2015-10-19T10:17:01Z","closed_at":"2015-10-19T10:17:00Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"A bug fix in 3.0.1 means that it is not possible to create composite keys as the behaviour for passing in an array now creates multiple individual keys rather than one key across a number of columns.\n\nThe change was introduced via https://github.com/bcit-ci/CodeIgniter/pull/3968 but this changes behaviour originally added in https://github.com/bcit-ci/CodeIgniter/commit/75f405b64ec0dff23bcaf73c9bc805b3804f2863\n\nThe documentation states \"Multiple column non-primary keys must be sent as an array.\" and gives the example:\n\n``` php\n$this->dbforge->add_key(array('blog_name', 'blog_label'));\n// gives KEY `blog_name_blog_label` (`blog_name`, `blog_label`)\n```\n\nAs I see it, there are a couple of options:\n1. Keep the fix and update the documentation to state that composite keys are not supported.\n2. Revert the fix and update the documentation to advise users who want to create multiple keys to just make multiple add_key() calls\n3. Introduce a new method to handle a use case - I suggest either add_keys() or add_composite_key() to provide the expected behaviour.\n","closed_by":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4173/timeline","performed_via_github_app":null,"state_reason":"completed"}