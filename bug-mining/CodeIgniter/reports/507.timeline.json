[{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/comments/371983385","html_url":"https://github.com/bcit-ci/CodeIgniter/issues/5435#issuecomment-371983385","issue_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/5435","id":371983385,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MTk4MzM4NQ==","user":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-10T00:27:18Z","updated_at":"2018-03-10T00:27:18Z","body":"You're onto something as `limit_used` is never reset, indeed.\r\n\r\nBut almost nothing else makes sense ...\r\n\r\n1. While not technically impossible (with certain limitations), we don't support extension of any of the database classes, so ... How? And why should we consider this as valid anything at all?\r\n2. Even if we did support DB extensions, why is that a precondition for your bug report? It doesn't seem to me like it should be related at all?\r\n3. What does \"one-less fields\" mean exactly? There's no expected vs actual results presented.\r\n4. `query()` is to be directly used for raw SQL queries, while `_reset_select()` is an internal method to provision a reset of Query Builder conditions (and `$limit_used` is only relevant with QB) - no link between the two.\r\n5. \"I hope it's already fixed in future release.\" - if you hope it's already fixed, you can easily check if it is with a simple search.\r\n\r\nThat last one is just a nitpicky remark, but please do clarify on the rest.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/comments/371983385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/comments/372002212","html_url":"https://github.com/bcit-ci/CodeIgniter/issues/5435#issuecomment-372002212","issue_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/5435","id":372002212,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MjAwMjIxMg==","user":{"login":"NaldoRay","id":10150984,"node_id":"MDQ6VXNlcjEwMTUwOTg0","avatar_url":"https://avatars.githubusercontent.com/u/10150984?v=4","gravatar_id":"","url":"https://api.github.com/users/NaldoRay","html_url":"https://github.com/NaldoRay","followers_url":"https://api.github.com/users/NaldoRay/followers","following_url":"https://api.github.com/users/NaldoRay/following{/other_user}","gists_url":"https://api.github.com/users/NaldoRay/gists{/gist_id}","starred_url":"https://api.github.com/users/NaldoRay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NaldoRay/subscriptions","organizations_url":"https://api.github.com/users/NaldoRay/orgs","repos_url":"https://api.github.com/users/NaldoRay/repos","events_url":"https://api.github.com/users/NaldoRay/events{/privacy}","received_events_url":"https://api.github.com/users/NaldoRay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-10T04:39:18Z","updated_at":"2018-03-10T04:44:29Z","body":"Sorry for wasting your time because I didn't make it clear.\r\n\r\n1. I'm doing it by extending the `CI_Loader` class and overriding the `database()` method to load my extension or the original if not found.\r\n2. a. `$limit_used` in `CI_DB_oci8_result` is initialized with the same value of `CI_DB_oci8_driver`'s `$limit_used`.\r\n    b.  Because `_reset_select()` is a protected method from `CI_DB_oci8_driver`, so to my knowledge, to call it we need to either modify the database class or extend it. I'm doing the latter because it's \"cleaner\" and I've already extended it for another purpose.\r\n3. Ahh, my bad. One-less fields means exactly that. The fields returned by `field_data` is missing one i.e. the last field.\r\nThis is only an example (json-encoded). I don't have access to Oracle database right now.\r\nExpected:\r\n```\r\n[\r\n\t{\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"NUMBER\",\r\n\t\t\"max_length\": 32\r\n\t},\r\n\t{\r\n\t\t\"name\": \"name\",\r\n\t\t\"type\": \"VARCHAR2\",\r\n\t\t\"max_length\": 100\r\n\t},\r\n\t{\r\n\t\t\"name\": \"price\",\r\n\t\t\"type\": \"NUMBER\",\r\n\t\t\"max_length\": 12\r\n\t}\r\n]\r\n```\r\nActual (missing `price` field):\r\n```\r\n[\r\n\t{\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"NUMBER\",\r\n\t\t\"max_length\": 32\r\n\t},\r\n\t{\r\n\t\t\"name\": \"name\",\r\n\t\t\"type\": \"VARCHAR2\",\r\n\t\t\"max_length\": 100\r\n\t}\r\n]\r\n```\r\n\r\n4. Very true. That's why I override the `_reset_select()` in `CI_DB_oci8_driver`, because `$limit_used` is used only by oci8 driver and result. \r\n5. I was not really expecting it to be fixed to be honest. Because this's a special use case for me. \r\nWhat I hoped was only so this could help anyone who faces similar issue. \r\nI think it's just my habit to write it like that. Sorry if it was disturbing you.\r\n\r\nI feel dumb, after writing the answer to no. 4.\r\nI can just override the `_reset_select()` in my extension class so I don't need to modify the database class at all. \r\nI guess I'm too exhausted yesterday after spending hours to fix the problem. Sorry about that.\r\n\r\nThank you for your time.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/comments/372002212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"NaldoRay","id":10150984,"node_id":"MDQ6VXNlcjEwMTUwOTg0","avatar_url":"https://avatars.githubusercontent.com/u/10150984?v=4","gravatar_id":"","url":"https://api.github.com/users/NaldoRay","html_url":"https://github.com/NaldoRay","followers_url":"https://api.github.com/users/NaldoRay/followers","following_url":"https://api.github.com/users/NaldoRay/following{/other_user}","gists_url":"https://api.github.com/users/NaldoRay/gists{/gist_id}","starred_url":"https://api.github.com/users/NaldoRay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NaldoRay/subscriptions","organizations_url":"https://api.github.com/users/NaldoRay/orgs","repos_url":"https://api.github.com/users/NaldoRay/repos","events_url":"https://api.github.com/users/NaldoRay/events{/privacy}","received_events_url":"https://api.github.com/users/NaldoRay/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1514488139,"node_id":"MDExOkNsb3NlZEV2ZW50MTUxNDQ4ODEzOQ==","url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/events/1514488139","actor":{"login":"NaldoRay","id":10150984,"node_id":"MDQ6VXNlcjEwMTUwOTg0","avatar_url":"https://avatars.githubusercontent.com/u/10150984?v=4","gravatar_id":"","url":"https://api.github.com/users/NaldoRay","html_url":"https://github.com/NaldoRay","followers_url":"https://api.github.com/users/NaldoRay/followers","following_url":"https://api.github.com/users/NaldoRay/following{/other_user}","gists_url":"https://api.github.com/users/NaldoRay/gists{/gist_id}","starred_url":"https://api.github.com/users/NaldoRay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NaldoRay/subscriptions","organizations_url":"https://api.github.com/users/NaldoRay/orgs","repos_url":"https://api.github.com/users/NaldoRay/repos","events_url":"https://api.github.com/users/NaldoRay/events{/privacy}","received_events_url":"https://api.github.com/users/NaldoRay/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2018-03-10T04:39:18Z","state_reason":null,"performed_via_github_app":null},{"id":1523411165,"node_id":"MDEyOkxhYmVsZWRFdmVudDE1MjM0MTExNjU=","url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/events/1523411165","actor":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-03-15T14:24:56Z","label":{"name":"Bug","color":"eb2420"},"performed_via_github_app":null},{"id":1523411262,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDE1MjM0MTEyNjI=","url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/events/1523411262","actor":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2018-03-15T14:24:58Z","milestone":{"title":"3.1.8"},"performed_via_github_app":null},{"id":1523411593,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE1MjM0MTE1OTM=","url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/events/1523411593","actor":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6efd42ebafceda967d1d8def06ee412d3c1f382b","commit_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/commits/6efd42ebafceda967d1d8def06ee412d3c1f382b","created_at":"2018-03-15T14:25:06Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/comments/373395301","html_url":"https://github.com/bcit-ci/CodeIgniter/issues/5435#issuecomment-373395301","issue_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/5435","id":373395301,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MzM5NTMwMQ==","user":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-15T14:29:53Z","updated_at":"2018-03-15T14:29:53Z","body":"I had already said that you're onto something with this ... it's a legitimate bug; pushed the fix.\r\n\r\nThe points I listed were for clarification because you made the whole thing quite confusing. 3 is what I really needed info for, while the rest have literally no connection to the issue - they may be the circumstances under which you found the issue, but then become noise that needs to be separated out while figuring what's actually going on.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/comments/373395301/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false}}]