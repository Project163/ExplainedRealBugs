{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/3085","repository_url":"https://api.github.com/repos/bcit-ci/CodeIgniter","labels_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/3085/labels{/name}","comments_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/3085/comments","events_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/3085/events","html_url":"https://github.com/bcit-ci/CodeIgniter/issues/3085","id":35153989,"node_id":"MDU6SXNzdWUzNTE1Mzk4OQ==","number":3085,"title":"Case: A helper function and form validation rule with the same name","user":{"login":"ivantcholakov","id":1438104,"node_id":"MDQ6VXNlcjE0MzgxMDQ=","avatar_url":"https://avatars.githubusercontent.com/u/1438104?v=4","gravatar_id":"","url":"https://api.github.com/users/ivantcholakov","html_url":"https://github.com/ivantcholakov","followers_url":"https://api.github.com/users/ivantcholakov/followers","following_url":"https://api.github.com/users/ivantcholakov/following{/other_user}","gists_url":"https://api.github.com/users/ivantcholakov/gists{/gist_id}","starred_url":"https://api.github.com/users/ivantcholakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivantcholakov/subscriptions","organizations_url":"https://api.github.com/users/ivantcholakov/orgs","repos_url":"https://api.github.com/users/ivantcholakov/repos","events_url":"https://api.github.com/users/ivantcholakov/events{/privacy}","received_events_url":"https://api.github.com/users/ivantcholakov/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2014-06-06T15:10:45Z","updated_at":"2014-06-07T10:11:56Z","closed_at":"2014-06-07T09:23:03Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I decided to support the deprecated helper function valid_email($email) further, so I could be able to tweak it in the future.\nFor avoiding code duplication my custom form validation and email libraries use this helper function. This is not important, just the picture.\n\nThis is the case I faced:\n\nWhen the email helper is loaded and in my controller I use the form validation rule \"valid_email\" the following error is shown on intentionaly invalid email entered:\n\n```\nA PHP Error was encountered\nSeverity: Notice\nMessage: Undefined variable: line\nFilename: libraries/Form_validation.php\nLine Number: 825\n```\n\nThe correspondent error message does not show, at least validation prevents storing wrong email addresses.\n\nAs a dirty workaround in Form_validation library I touched the line 795:\n\n```\nif ( ! is_callable($rule))\n```\n\nIt became:\n\n```\n// Modified by Ivan Tcholakov, 06-JUN-2014.\n//if ( ! is_callable($rule))\nif ( ! is_callable($rule) || method_exists($this, $rule))\n//\n```\n\nI think, there really is a bug that others might see. Briefly - if there is a defined function that has the same name as the name of a built-in validation rule (method), error appears on form validation against this rule.\n\nI can not make a pull request with a production-ready fix, code is complex there.\n","closed_by":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/3085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/3085/timeline","performed_via_github_app":null,"state_reason":"completed"}