{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/5050","repository_url":"https://api.github.com/repos/bcit-ci/CodeIgniter","labels_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/5050/labels{/name}","comments_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/5050/comments","events_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/5050/events","html_url":"https://github.com/bcit-ci/CodeIgniter/issues/5050","id":213609500,"node_id":"MDU6SXNzdWUyMTM2MDk1MDA=","number":5050,"title":"Undefined property: CI_DB_pdo_odbc_driver::$db in subdrivers/pdo_odbc_driver.php on line 171","user":{"login":"ourmandave","id":19296688,"node_id":"MDQ6VXNlcjE5Mjk2Njg4","avatar_url":"https://avatars.githubusercontent.com/u/19296688?v=4","gravatar_id":"","url":"https://api.github.com/users/ourmandave","html_url":"https://github.com/ourmandave","followers_url":"https://api.github.com/users/ourmandave/followers","following_url":"https://api.github.com/users/ourmandave/following{/other_user}","gists_url":"https://api.github.com/users/ourmandave/gists{/gist_id}","starred_url":"https://api.github.com/users/ourmandave/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ourmandave/subscriptions","organizations_url":"https://api.github.com/users/ourmandave/orgs","repos_url":"https://api.github.com/users/ourmandave/repos","events_url":"https://api.github.com/users/ourmandave/events{/privacy}","received_events_url":"https://api.github.com/users/ourmandave/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/milestones/15","html_url":"https://github.com/bcit-ci/CodeIgniter/milestone/15","labels_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/milestones/15/labels","id":2240315,"node_id":"MDk6TWlsZXN0b25lMjI0MDMxNQ==","number":15,"title":"3.1.4","description":"","creator":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":12,"state":"closed","created_at":"2017-01-10T10:21:12Z","updated_at":"2017-03-28T14:31:58Z","due_on":null,"closed_at":"2017-03-28T14:31:58Z"},"comments":1,"created_at":"2017-03-12T14:52:56Z","updated_at":"2017-03-14T16:43:55Z","closed_at":"2017-03-14T16:43:50Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Server:\r\nCI 3.1.3\r\nphp 5.6.30\r\ncentos 7\r\n\r\nUsing PDO through freetds odbc dsn to connect to sql server express on win10.\r\n\r\nUsing function `$this->db->escape()` throws Undefined property error.\r\n\r\nOriginal line in 171 in subdrivers/pdo_odbc_driver.php\r\n\r\n`$this->db->display_error('db_unsupported_feature');`\r\n\r\nI took out the `->db` and it works.\r\n\r\n`$this->display_error('db_unsupported_feature');`\r\n\r\nDisplays: \r\n\r\nA Database Error Occurred\r\nUnsupported feature of the database platform you are using.\r\nFilename: models/Ex_system_model.php\r\nLine Number: 64\r\n\r\nThis is line 64 in Ex_system_model.php\r\n ` $sql = \"SELECT ProductID, ProductNo, ProductName from Products where ProductName = \" . $this->db->escape($name) . \" order by ProductNo\";`\r\n\r\n(If I don't use `$this->db->escape($name)` the query works.)\r\n\r\nThe database.php config is:\r\n\r\n`$active_group = 'default';\r\n$query_builder = TRUE;\r\n\r\n$db['default'] = array(\r\n\t'dsn'\t=> 'odbc:myExapp',\r\n\t'hostname' => '',\r\n\t'username' => 'myUsername',  <-- changed to protect innocent\r\n\t'password' => 'myPassword',\r\n\t'database' => '',\r\n\t'dbdriver' => 'pdo',\r\n\t'dbprefix' => '',\r\n\t'pconnect' => FALSE,\r\n\t'db_debug' => (ENVIRONMENT !== 'production'),  <-- currently 'development'\r\n\t'cache_on' => FALSE,\r\n\t'cachedir' => '',\r\n\t'char_set' => 'utf8',\r\n\t'dbcollat' => 'utf8_general_ci',\r\n\t'swap_pre' => '',\r\n\t'encrypt' => FALSE,\r\n\t'compress' => FALSE,\r\n\t'stricton' => FALSE,\r\n\t'failover' => array(),\r\n\t'save_queries' => TRUE\r\n);`\r\n\r\n","closed_by":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/5050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/5050/timeline","performed_via_github_app":null,"state_reason":"completed"}