{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/103","repository_url":"https://api.github.com/repos/bcit-ci/CodeIgniter","labels_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/103/labels{/name}","comments_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/103/comments","events_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/103/events","html_url":"https://github.com/bcit-ci/CodeIgniter/issues/103","id":1442151,"node_id":"MDU6SXNzdWUxNDQyMTUx","number":103,"title":"Unexpected generated SQL when using Mysql REPLACE function with AR","user":{"login":"bitbucket-import","id":991171,"node_id":"MDQ6VXNlcjk5MTE3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/991171?v=4","gravatar_id":"","url":"https://api.github.com/users/bitbucket-import","html_url":"https://github.com/bitbucket-import","followers_url":"https://api.github.com/users/bitbucket-import/followers","following_url":"https://api.github.com/users/bitbucket-import/following{/other_user}","gists_url":"https://api.github.com/users/bitbucket-import/gists{/gist_id}","starred_url":"https://api.github.com/users/bitbucket-import/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bitbucket-import/subscriptions","organizations_url":"https://api.github.com/users/bitbucket-import/orgs","repos_url":"https://api.github.com/users/bitbucket-import/repos","events_url":"https://api.github.com/users/bitbucket-import/events{/privacy}","received_events_url":"https://api.github.com/users/bitbucket-import/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2011-08-19T14:47:04Z","updated_at":"2012-05-24T19:15:38Z","closed_at":"2012-05-24T19:15:38Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Example code:\n{{{\n# !php\n\n$this->db->select(\"REPLACE(total_price_with_vat,'.',',') total_price\",FALSE);\n\n}}}\n\nExpected result would be that dot (.) is replaced with comma (,). But due to way that select method builds the sql, it will add extra space after comma and the result is \"15, 50\" instead of \"15,50\" for example.\n\nThe extra space is added in *_system/database/DB_active_rec.php *_ method: _compile_select():\n\n{{{\n# !php\n\n// Line 1721\n$sql .= implode(', ', $this->ar_select);\n\n}}}\n\nOffcourse filtering is usually done with PHP, but this came across when developing a new library which you can define the filtering straight with mysql.\n","closed_by":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/103/timeline","performed_via_github_app":null,"state_reason":"completed"}