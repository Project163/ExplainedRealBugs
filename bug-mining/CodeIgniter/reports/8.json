{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/31","repository_url":"https://api.github.com/repos/bcit-ci/CodeIgniter","labels_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/31/labels{/name}","comments_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/31/comments","events_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/31/events","html_url":"https://github.com/bcit-ci/CodeIgniter/issues/31","id":1441525,"node_id":"MDU6SXNzdWUxNDQxNTI1","number":31,"title":"Cache.php#save behavior depending on the adapter method","user":{"login":"bitbucket-import","id":991171,"node_id":"MDQ6VXNlcjk5MTE3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/991171?v=4","gravatar_id":"","url":"https://api.github.com/users/bitbucket-import","html_url":"https://github.com/bitbucket-import","followers_url":"https://api.github.com/users/bitbucket-import/followers","following_url":"https://api.github.com/users/bitbucket-import/following{/other_user}","gists_url":"https://api.github.com/users/bitbucket-import/gists{/gist_id}","starred_url":"https://api.github.com/users/bitbucket-import/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bitbucket-import/subscriptions","organizations_url":"https://api.github.com/users/bitbucket-import/orgs","repos_url":"https://api.github.com/users/bitbucket-import/repos","events_url":"https://api.github.com/users/bitbucket-import/events{/privacy}","received_events_url":"https://api.github.com/users/bitbucket-import/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2011-08-19T14:39:33Z","updated_at":"2011-08-21T20:44:34Z","closed_at":"2011-08-21T20:44:34Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi,\n\nAdapter currently available (dummy, file, apc, memcached) of, file, apc on, save method, but the behavior of the data to be overwritten, memcached on, not over, they become new additions.\n\nMaybe, but I think a small mistake, such as implementing a fundamentally different behavior using the same interface, so I think that is wrong, memcached think is right even if the override.\n\nMemcache:: add instead the following Memcache:: set method that I think is right.\nhttp://www.php.net/manual/en/memcache.set.php\n\n=== system/libraries/Cache/drivers/Cache_file.php ===\n{{{\n# !php\n\n```\npublic function save($id, $data, $ttl = 60)\n{       \n    $contents = array(\n            'time'      => time(),\n            'ttl'       => $ttl,            \n            'data'      => $data\n        );\n\n    if (write_file($this->_cache_path.$id, serialize($contents)))\n    {\n        @chmod($this->_cache_path.$id, 0777);\n        return TRUE;            \n    }\n\n    return FALSE;\n}\n```\n\n}}}\n\n=== system/libraries/Cache/drivers/Cache_apc.php ===\n{{{\n# !php\n\n```\npublic function save($id, $data, $ttl = 60)\n{\n    return apc_store($id, array($data, time(), $ttl), $ttl);\n}\n```\n\n}}}\n\n=== system/libraries/Cache/drivers/Cache_memcached.php ===\n{{{\n# !php\n\n```\npublic function save($id, $data, $ttl = 60)\n{\n    return $this->_memcached->add($id, array($data, time(), $ttl), $ttl);\n}\n```\n\n}}}\n","closed_by":{"login":"gaker","id":42440,"node_id":"MDQ6VXNlcjQyNDQw","avatar_url":"https://avatars.githubusercontent.com/u/42440?v=4","gravatar_id":"","url":"https://api.github.com/users/gaker","html_url":"https://github.com/gaker","followers_url":"https://api.github.com/users/gaker/followers","following_url":"https://api.github.com/users/gaker/following{/other_user}","gists_url":"https://api.github.com/users/gaker/gists{/gist_id}","starred_url":"https://api.github.com/users/gaker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaker/subscriptions","organizations_url":"https://api.github.com/users/gaker/orgs","repos_url":"https://api.github.com/users/gaker/repos","events_url":"https://api.github.com/users/gaker/events{/privacy}","received_events_url":"https://api.github.com/users/gaker/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/31/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/31/timeline","performed_via_github_app":null,"state_reason":"completed"}