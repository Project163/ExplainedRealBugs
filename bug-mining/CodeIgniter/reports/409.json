{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4093","repository_url":"https://api.github.com/repos/bcit-ci/CodeIgniter","labels_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4093/labels{/name}","comments_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4093/comments","events_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4093/events","html_url":"https://github.com/bcit-ci/CodeIgniter/issues/4093","id":104224855,"node_id":"MDU6SXNzdWUxMDQyMjQ4NTU=","number":4093,"title":"Database protection adding whitespace to query containing \" and \"","user":{"login":"Oatsy","id":9891119,"node_id":"MDQ6VXNlcjk4OTExMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9891119?v=4","gravatar_id":"","url":"https://api.github.com/users/Oatsy","html_url":"https://github.com/Oatsy","followers_url":"https://api.github.com/users/Oatsy/followers","following_url":"https://api.github.com/users/Oatsy/following{/other_user}","gists_url":"https://api.github.com/users/Oatsy/gists{/gist_id}","starred_url":"https://api.github.com/users/Oatsy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Oatsy/subscriptions","organizations_url":"https://api.github.com/users/Oatsy/orgs","repos_url":"https://api.github.com/users/Oatsy/repos","events_url":"https://api.github.com/users/Oatsy/events{/privacy}","received_events_url":"https://api.github.com/users/Oatsy/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":140924,"node_id":"MDU6TGFiZWwxNDA5MjQ=","url":"https://api.github.com/repos/bcit-ci/CodeIgniter/labels/Bug","name":"Bug","color":"eb2420","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/milestones/5","html_url":"https://github.com/bcit-ci/CodeIgniter/milestone/5","labels_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/milestones/5/labels","id":1254988,"node_id":"MDk6TWlsZXN0b25lMTI1NDk4OA==","number":5,"title":"3.0.2","description":"","creator":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":22,"state":"closed","created_at":"2015-08-14T10:53:51Z","updated_at":"2015-10-08T16:29:56Z","due_on":"2015-10-07T07:00:00Z","closed_at":"2015-10-08T16:29:24Z"},"comments":0,"created_at":"2015-09-01T09:27:34Z","updated_at":"2015-09-01T10:52:05Z","closed_at":"2015-09-01T10:52:05Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi, I hope I submit this correctly, first time submitting an issue :)\n\nI recently found that when I tried to make a query using active record as follows, the Database library would add an additional space after the \" and \" (without the \"), \n\nThe following is an example of the query code I ran (Confirmed I am running CI 3.0.1\n\n![image](https://cloud.githubusercontent.com/assets/9891119/9600519/d896aa84-50de-11e5-9662-9e110abc64df.png)\n\nAnd the result in the CI Log shows \n\n![image](https://cloud.githubusercontent.com/assets/9891119/9600564/19e895a6-50df-11e5-9d31-05045201e9f3.png)\n\nI can get around it in this case by bypassing the protection with the query \n$this->db->where(\"path = '$path'\",NULL, false);\nand this works without problems.  As this $path variable contains data that has already been sanitized, I am not too worried, but the bug did cause me a couple of hours of time, and probally should be fixed at some stage.\n\nI had a quick look through the code, but I am nowhere near confident enough to fix it\n\nEdit : I can confirm this happens on $this->db->like() as well. \n","closed_by":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/4093/timeline","performed_via_github_app":null,"state_reason":"completed"}