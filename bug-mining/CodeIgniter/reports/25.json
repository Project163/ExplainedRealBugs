{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/225","repository_url":"https://api.github.com/repos/bcit-ci/CodeIgniter","labels_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/225/labels{/name}","comments_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/225/comments","events_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/225/events","html_url":"https://github.com/bcit-ci/CodeIgniter/issues/225","id":1451977,"node_id":"MDU6SXNzdWUxNDUxOTc3","number":225,"title":"Sparks dir assumed to be a sibling of index.php","user":{"login":"pdokas","id":190134,"node_id":"MDQ6VXNlcjE5MDEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/190134?v=4","gravatar_id":"","url":"https://api.github.com/users/pdokas","html_url":"https://github.com/pdokas","followers_url":"https://api.github.com/users/pdokas/followers","following_url":"https://api.github.com/users/pdokas/following{/other_user}","gists_url":"https://api.github.com/users/pdokas/gists{/gist_id}","starred_url":"https://api.github.com/users/pdokas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pdokas/subscriptions","organizations_url":"https://api.github.com/users/pdokas/orgs","repos_url":"https://api.github.com/users/pdokas/repos","events_url":"https://api.github.com/users/pdokas/events{/privacy}","received_events_url":"https://api.github.com/users/pdokas/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2011-08-21T05:21:16Z","updated_at":"2014-10-06T17:38:47Z","closed_at":"2014-01-08T21:11:05Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Background\n\nFrom the [Sparks installation guide](http://getsparks.org/install):\n\n> 1 Via the shell, navigate to the root of your CodeIgniter application\n> 2 Copy and paste the following into the command line:\n\nFrom the [CodeIgniter installation guide](http://codeigniter.com/user_guide/installation/index.html):\n\n> For the best security, both the system and any application folders should be placed above web root so that they are not directly accessible via a browser. By default, .htaccess files are included in each folder to help prevent direct access, but it is best to remove them from public access entirely in case the web server configuration changes or doesn't abide by the .htaccess.\n## The problem\n\nFor the same reason you would move your application and system directories outside of your web root (making necessary updates to index.php) it would be wise to likewise move sparks/ out of the web root.\n\nHowever, you cannot do this due to the following line from MY_Loader.php provided in the Sparks package:\n\n``` php\ndefine('SPARKPATH', 'sparks/');\n```\n\nWhen MY_Loader.php runs, getcwd() reports that PHP is working in the web root. Thus, if you have followed the best practices outlined in the CodeIgniter installation guide and apply them to sparks you'll wind up with incorrect path assumptions inside the sparks loader logic.\n## Desired Fix\n\nThe sparks directory should be able to be located outside of the web root to not expose implementation details. The `$application_folder` global could be used to discover where non-user facing components have been installed.\n","closed_by":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/225/timeline","performed_via_github_app":null,"state_reason":"completed"}