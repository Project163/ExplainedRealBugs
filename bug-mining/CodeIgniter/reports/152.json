{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/1644","repository_url":"https://api.github.com/repos/bcit-ci/CodeIgniter","labels_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/1644/labels{/name}","comments_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/1644/comments","events_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/1644/events","html_url":"https://github.com/bcit-ci/CodeIgniter/issues/1644","id":5774482,"node_id":"MDU6SXNzdWU1Nzc0NDgy","number":1644,"title":"add text/plain in the csv array in the mimes.php file","user":{"login":"kanhaic","id":1856476,"node_id":"MDQ6VXNlcjE4NTY0NzY=","avatar_url":"https://avatars.githubusercontent.com/u/1856476?v=4","gravatar_id":"","url":"https://api.github.com/users/kanhaic","html_url":"https://github.com/kanhaic","followers_url":"https://api.github.com/users/kanhaic/followers","following_url":"https://api.github.com/users/kanhaic/following{/other_user}","gists_url":"https://api.github.com/users/kanhaic/gists{/gist_id}","starred_url":"https://api.github.com/users/kanhaic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kanhaic/subscriptions","organizations_url":"https://api.github.com/users/kanhaic/orgs","repos_url":"https://api.github.com/users/kanhaic/repos","events_url":"https://api.github.com/users/kanhaic/events{/privacy}","received_events_url":"https://api.github.com/users/kanhaic/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2012-07-23T08:51:57Z","updated_at":"2016-04-20T06:12:45Z","closed_at":"2012-07-23T13:55:52Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"when trying to upload a csv file using CI file uploader class we get an error that the file type you are trying to upload is not allowed. \n\n``` php\n$config['upload_path'] = \"./uploads/\";\n$config['allowed_types'] = 'csv|txt';\n$config['overwrite'] = TRUE;\n$this->load->library('upload', $config);\n$this->upload->do_upload('file');\n```\n\nhttp://codeigniter.com/forums/viewthread/204725/P15/#1019166\n\n---\n\nI did some debugging and found that in the is_allowed_filetype function in line 624 for a csv file the $this->file_type returns text/plain where as when I check in the $_FILES[“file”][“type”] it returns text/csv\n\nI added the text/plain in the csv array in the application/config/mime.php file and it started working,\n\nThere are two possible solutions \n1. Find out why there is this difference in these two and fix it (this feels the correct way to solve this)\n2. just add text/plain in the csv array in mimes.php file (this seems the easy way, not sure if this is correct).\n\nI could file a bug and suggest that we should add the text/plain in the csv array anyway in the next build.\n\nKanhai Chhgani\n","closed_by":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/1644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/1644/timeline","performed_via_github_app":null,"state_reason":"completed"}