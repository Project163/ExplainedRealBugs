{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/191","repository_url":"https://api.github.com/repos/bcit-ci/CodeIgniter","labels_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/191/labels{/name}","comments_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/191/comments","events_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/191/events","html_url":"https://github.com/bcit-ci/CodeIgniter/issues/191","id":1442507,"node_id":"MDU6SXNzdWUxNDQyNTA3","number":191,"title":"database schema ignored from dsn string","user":{"login":"bitbucket-import","id":991171,"node_id":"MDQ6VXNlcjk5MTE3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/991171?v=4","gravatar_id":"","url":"https://api.github.com/users/bitbucket-import","html_url":"https://github.com/bitbucket-import","followers_url":"https://api.github.com/users/bitbucket-import/followers","following_url":"https://api.github.com/users/bitbucket-import/following{/other_user}","gists_url":"https://api.github.com/users/bitbucket-import/gists{/gist_id}","starred_url":"https://api.github.com/users/bitbucket-import/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bitbucket-import/subscriptions","organizations_url":"https://api.github.com/users/bitbucket-import/orgs","repos_url":"https://api.github.com/users/bitbucket-import/repos","events_url":"https://api.github.com/users/bitbucket-import/events{/privacy}","received_events_url":"https://api.github.com/users/bitbucket-import/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2011-08-19T14:50:49Z","updated_at":"2012-10-24T18:48:22Z","closed_at":"2012-10-24T18:48:22Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When trying to connect to a database with a dsn, as shown below, the dbname parameter from the dsn is ignored if a previous connection have been issued. Example\n\n$this->load->database('test'); //with default database name 'Administration'\n//... random stuff that will return a dsn to another host...\n$this->db->close();\n\n$this->load->database('mysqli://user@pass:host/dbname');\n$sql=\"insert into table(id,value) VALUES(1,'test'); //just an example...\n\nThe sql will fail with an error message 'Administration.table does not exist' This error is triggered because the connection does not swith to the new 'dbname' schema that is specified in the dsn parameter, and the old one is reused.\n\nIf a fist connection is not performed, all works as expected and the sql command will be executed against dbname.table\n","closed_by":{"login":"narfbg","id":1058011,"node_id":"MDQ6VXNlcjEwNTgwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1058011?v=4","gravatar_id":"","url":"https://api.github.com/users/narfbg","html_url":"https://github.com/narfbg","followers_url":"https://api.github.com/users/narfbg/followers","following_url":"https://api.github.com/users/narfbg/following{/other_user}","gists_url":"https://api.github.com/users/narfbg/gists{/gist_id}","starred_url":"https://api.github.com/users/narfbg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narfbg/subscriptions","organizations_url":"https://api.github.com/users/narfbg/orgs","repos_url":"https://api.github.com/users/narfbg/repos","events_url":"https://api.github.com/users/narfbg/events{/privacy}","received_events_url":"https://api.github.com/users/narfbg/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bcit-ci/CodeIgniter/issues/191/timeline","performed_via_github_app":null,"state_reason":"completed"}