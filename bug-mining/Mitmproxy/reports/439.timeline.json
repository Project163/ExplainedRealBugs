[{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1140803338","html_url":"https://github.com/mitmproxy/mitmproxy/issues/5383#issuecomment-1140803338","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5383","id":1140803338,"node_id":"IC_kwDOAAfumM5D_0cK","user":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-30T07:31:34Z","updated_at":"2022-05-30T07:31:34Z","body":"My first intuition is that this is not HTTP or in violation of HTTP. The second one is a SOAP body, which does not require HTTP, but is commonly sent over HTTP. The client seems to behave like this one https://stackoverflow.com/questions/42840563/how-to-handle-a-soap-xml-request-without-a-http-header-in-c\r\n\r\nSo they seem to just send XML without any HTTP headers. I'm not sure if mitmproxy can do anything about that, you can look into `--raw-tcp`","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1140803338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1141661193","html_url":"https://github.com/mitmproxy/mitmproxy/issues/5383#issuecomment-1141661193","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5383","id":1141661193,"node_id":"IC_kwDOAAfumM5EDF4J","user":{"login":"kendrickluong","id":13299791,"node_id":"MDQ6VXNlcjEzMjk5Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/13299791?v=4","gravatar_id":"","url":"https://api.github.com/users/kendrickluong","html_url":"https://github.com/kendrickluong","followers_url":"https://api.github.com/users/kendrickluong/followers","following_url":"https://api.github.com/users/kendrickluong/following{/other_user}","gists_url":"https://api.github.com/users/kendrickluong/gists{/gist_id}","starred_url":"https://api.github.com/users/kendrickluong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kendrickluong/subscriptions","organizations_url":"https://api.github.com/users/kendrickluong/orgs","repos_url":"https://api.github.com/users/kendrickluong/repos","events_url":"https://api.github.com/users/kendrickluong/events{/privacy}","received_events_url":"https://api.github.com/users/kendrickluong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T04:41:02Z","updated_at":"2022-05-31T04:41:02Z","body":"Ahh i see, looks like it. \r\n\r\nI'm currently running version 8.1.0 with flags --flow-detail 0 and --set stream_large_bodies=1, --rawtcp is already on by default though?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1141661193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kendrickluong","id":13299791,"node_id":"MDQ6VXNlcjEzMjk5Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/13299791?v=4","gravatar_id":"","url":"https://api.github.com/users/kendrickluong","html_url":"https://github.com/kendrickluong","followers_url":"https://api.github.com/users/kendrickluong/followers","following_url":"https://api.github.com/users/kendrickluong/following{/other_user}","gists_url":"https://api.github.com/users/kendrickluong/gists{/gist_id}","starred_url":"https://api.github.com/users/kendrickluong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kendrickluong/subscriptions","organizations_url":"https://api.github.com/users/kendrickluong/orgs","repos_url":"https://api.github.com/users/kendrickluong/repos","events_url":"https://api.github.com/users/kendrickluong/events{/privacy}","received_events_url":"https://api.github.com/users/kendrickluong/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1141757013","html_url":"https://github.com/mitmproxy/mitmproxy/issues/5383#issuecomment-1141757013","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5383","id":1141757013,"node_id":"IC_kwDOAAfumM5EDdRV","user":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T07:19:19Z","updated_at":"2022-05-31T07:19:19Z","body":"> --rawtcp is already on by default though?\r\n\r\nhttps://docs.mitmproxy.org/stable/concepts-protocols/#generic-tcp-proxy\r\n\r\n> Users can explicitly opt into generic TCP proxying by setting the [tcp_hosts option](https://docs.mitmproxy.org/stable/concepts-options/).","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1141757013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1149260907","html_url":"https://github.com/mitmproxy/mitmproxy/issues/5383#issuecomment-1149260907","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5383","id":1149260907,"node_id":"IC_kwDOAAfumM5EgFRr","user":{"login":"kendrickluong","id":13299791,"node_id":"MDQ6VXNlcjEzMjk5Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/13299791?v=4","gravatar_id":"","url":"https://api.github.com/users/kendrickluong","html_url":"https://github.com/kendrickluong","followers_url":"https://api.github.com/users/kendrickluong/followers","following_url":"https://api.github.com/users/kendrickluong/following{/other_user}","gists_url":"https://api.github.com/users/kendrickluong/gists{/gist_id}","starred_url":"https://api.github.com/users/kendrickluong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kendrickluong/subscriptions","organizations_url":"https://api.github.com/users/kendrickluong/orgs","repos_url":"https://api.github.com/users/kendrickluong/repos","events_url":"https://api.github.com/users/kendrickluong/events{/privacy}","received_events_url":"https://api.github.com/users/kendrickluong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T23:14:29Z","updated_at":"2022-06-07T23:14:29Z","body":"Unfortunately i still get the same behaviour even with the --tcp-hosts option","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1149260907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kendrickluong","id":13299791,"node_id":"MDQ6VXNlcjEzMjk5Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/13299791?v=4","gravatar_id":"","url":"https://api.github.com/users/kendrickluong","html_url":"https://github.com/kendrickluong","followers_url":"https://api.github.com/users/kendrickluong/followers","following_url":"https://api.github.com/users/kendrickluong/following{/other_user}","gists_url":"https://api.github.com/users/kendrickluong/gists{/gist_id}","starred_url":"https://api.github.com/users/kendrickluong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kendrickluong/subscriptions","organizations_url":"https://api.github.com/users/kendrickluong/orgs","repos_url":"https://api.github.com/users/kendrickluong/repos","events_url":"https://api.github.com/users/kendrickluong/events{/privacy}","received_events_url":"https://api.github.com/users/kendrickluong/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1149555467","html_url":"https://github.com/mitmproxy/mitmproxy/issues/5383#issuecomment-1149555467","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5383","id":1149555467,"node_id":"IC_kwDOAAfumM5EhNML","user":{"login":"daMatz","id":9104870,"node_id":"MDQ6VXNlcjkxMDQ4NzA=","avatar_url":"https://avatars.githubusercontent.com/u/9104870?v=4","gravatar_id":"","url":"https://api.github.com/users/daMatz","html_url":"https://github.com/daMatz","followers_url":"https://api.github.com/users/daMatz/followers","following_url":"https://api.github.com/users/daMatz/following{/other_user}","gists_url":"https://api.github.com/users/daMatz/gists{/gist_id}","starred_url":"https://api.github.com/users/daMatz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daMatz/subscriptions","organizations_url":"https://api.github.com/users/daMatz/orgs","repos_url":"https://api.github.com/users/daMatz/repos","events_url":"https://api.github.com/users/daMatz/events{/privacy}","received_events_url":"https://api.github.com/users/daMatz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T07:20:42Z","updated_at":"2022-06-08T07:42:07Z","body":"Running into a similar error, but with non-xml data:\r\n\r\n```\r\nMITM: 192.168.0.1:XXXXX: mitmproxy has crashed!\r\nTraceback (most recent call last):\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/server.py\", line 290, in server_event\r\n    for command in layer_commands:\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 144, in handle_event\r\n    command = command_generator.send(send)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 255, in handle_event\r\n    yield from self._handle(event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 144, in handle_event\r\n    command = command_generator.send(send)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/tunnel.py\", line 90, in _handle_event\r\n    yield from self.event_to_child(event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/tls.py\", line 365, in event_to_child\r\n    yield from super().event_to_child(event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/tunnel.py\", line 109, in event_to_child\r\n    for command in self.child_layer.handle_event(event):\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 144, in handle_event\r\n    command = command_generator.send(send)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/tunnel.py\", line 75, in _handle_event\r\n    yield from self.receive_data(event.data)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/tls.py\", line 299, in receive_data\r\n    yield from self.event_to_child(\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/tunnel.py\", line 109, in event_to_child\r\n    for command in self.child_layer.handle_event(event):\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 144, in handle_event\r\n    command = command_generator.send(send)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 754, in _handle_event\r\n    yield from self.event_to_child(handler, event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 775, in event_to_child\r\n    yield from self.event_to_child(stream, command.event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 763, in event_to_child\r\n    for command in child.handle_event(event):\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 144, in handle_event\r\n    command = command_generator.send(send)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 136, in _handle_event\r\n    yield from self.client_state(event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/utils.py\", line 23, in _check_event_type\r\n    raise AssertionError(\r\nAssertionError: Unexpected event type at HttpStream.state_wait_for_request_headers: Expected RequestHeaders, got RequestData(stream_id=7, data=b'\\x00\\x00\\x00\\x00\\x00').\r\n```\r\n\r\nRunning mitmproxy 8.0.0 with @Prinzhorn [workaround](https://github.com/mitmproxy/mitmproxy/issues/4469#issuecomment-786508647) enabled (no particular flags).\r\n\r\nMaybe also related to https://github.com/mitmproxy/mitmproxy/issues/4870?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1149555467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"daMatz","id":9104870,"node_id":"MDQ6VXNlcjkxMDQ4NzA=","avatar_url":"https://avatars.githubusercontent.com/u/9104870?v=4","gravatar_id":"","url":"https://api.github.com/users/daMatz","html_url":"https://github.com/daMatz","followers_url":"https://api.github.com/users/daMatz/followers","following_url":"https://api.github.com/users/daMatz/following{/other_user}","gists_url":"https://api.github.com/users/daMatz/gists{/gist_id}","starred_url":"https://api.github.com/users/daMatz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daMatz/subscriptions","organizations_url":"https://api.github.com/users/daMatz/orgs","repos_url":"https://api.github.com/users/daMatz/repos","events_url":"https://api.github.com/users/daMatz/events{/privacy}","received_events_url":"https://api.github.com/users/daMatz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6767214434,"node_id":"MEE_lADOAAfumM5KoKtWzwAAAAGTW39i","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/6767214434","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-06-08T07:20:42Z","performed_via_github_app":null},{"id":6767214442,"node_id":"SE_lADOAAfumM5KoKtWzwAAAAGTW39q","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/6767214442","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-06-08T07:20:43Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1153644681","html_url":"https://github.com/mitmproxy/mitmproxy/issues/5383#issuecomment-1153644681","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5383","id":1153644681,"node_id":"IC_kwDOAAfumM5EwziJ","user":{"login":"daMatz","id":9104870,"node_id":"MDQ6VXNlcjkxMDQ4NzA=","avatar_url":"https://avatars.githubusercontent.com/u/9104870?v=4","gravatar_id":"","url":"https://api.github.com/users/daMatz","html_url":"https://github.com/daMatz","followers_url":"https://api.github.com/users/daMatz/followers","following_url":"https://api.github.com/users/daMatz/following{/other_user}","gists_url":"https://api.github.com/users/daMatz/gists{/gist_id}","starred_url":"https://api.github.com/users/daMatz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daMatz/subscriptions","organizations_url":"https://api.github.com/users/daMatz/orgs","repos_url":"https://api.github.com/users/daMatz/repos","events_url":"https://api.github.com/users/daMatz/events{/privacy}","received_events_url":"https://api.github.com/users/daMatz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T08:43:52Z","updated_at":"2022-06-13T08:43:52Z","body":"If it helps, here is some additional code from the script I am using which leads to the errors:\r\n\r\n```\r\ndef chunk(data: bytes) -> Union[bytes, Iterable[bytes]]:\r\n    ctx.log.info(f\"Chunking\")\r\n    return data\r\n\r\ndef responseheaders(flow: http.HTTPFlow) -> None:\r\n        if flow.response.headers.get('content-type', '').startswith('application/grpc') or flow.response.headers.get('content-type', '').startswith('text/event-stream'):\r\n            flow.response.stream = chunk\r\n        \r\ndef requestheaders(flow: http.HTTPFlow) -> None:\r\n        if \"somestring\" in flow.request.path:\r\n            ctx.log.info(f\"Activating streaming for request\")\r\n            flow.request.stream = True\r\n```\r\n\r\nFor me the error is happening several times in a row (seems like for every second streaming packet from stream_id=5 until stream_id=125):\r\n\r\n```\r\nMITM: 192.168.0.1:XXXXX: mitmproxy has crashed!\r\nTraceback (most recent call last):\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/server.py\", line 290, in server_event\r\n    for command in layer_commands:\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 168, in handle_event\r\n    command = next(command_generator)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 255, in handle_event\r\n    yield from self._handle(event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 168, in handle_event\r\n    command = next(command_generator)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/tunnel.py\", line 90, in _handle_event\r\n    yield from self.event_to_child(event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/tls.py\", line 365, in event_to_child\r\n    yield from super().event_to_child(event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/tunnel.py\", line 109, in event_to_child\r\n    for command in self.child_layer.handle_event(event):\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 168, in handle_event\r\n    command = next(command_generator)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/tunnel.py\", line 90, in _handle_event\r\n    yield from self.event_to_child(event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/tunnel.py\", line 109, in event_to_child\r\n    for command in self.child_layer.handle_event(event):\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 168, in handle_event\r\n    command = next(command_generator)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 713, in _handle_event\r\n    yield from self.event_to_child(stream, event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 782, in event_to_child\r\n    yield from self.register_connection(command)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 877, in register_connection\r\n    yield from self.event_to_child(stream, GetHttpConnectionCompleted(cmd, reply))\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 763, in event_to_child\r\n    for command in child.handle_event(event):\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 129, in handle_event\r\n    yield from self.__continue(event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 227, in __continue\r\n    yield from self.__process(command_generator)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 183, in __process\r\n    command = command_generator.send(send)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 136, in _handle_event\r\n    yield from self.client_state(event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/utils.py\", line 23, in _check_event_type\r\n    raise AssertionError(\r\nAssertionError: Unexpected event type at HttpStream.state_wait_for_request_headers: Expected RequestHeaders, got RequestData(stream_id=5, data=b'\\x01\\x00\\x00\\x00\\x17').\r\n\r\n192.168.0.1:XXXXX: mitmproxy has crashed!\r\nTraceback (most recent call last):\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/server.py\", line 290, in server_event\r\n    for command in layer_commands:\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 168, in handle_event\r\n    command = next(command_generator)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 255, in handle_event\r\n    yield from self._handle(event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 168, in handle_event\r\n    command = next(command_generator)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/tunnel.py\", line 90, in _handle_event\r\n    yield from self.event_to_child(event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/tls.py\", line 365, in event_to_child\r\n    yield from super().event_to_child(event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/tunnel.py\", line 109, in event_to_child\r\n    for command in self.child_layer.handle_event(event):\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 168, in handle_event\r\n    command = next(command_generator)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/tunnel.py\", line 90, in _handle_event\r\n    yield from self.event_to_child(event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/tunnel.py\", line 109, in event_to_child\r\n    for command in self.child_layer.handle_event(event):\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 168, in handle_event\r\n    command = next(command_generator)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 713, in _handle_event\r\n    yield from self.event_to_child(stream, event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 780, in event_to_child\r\n    yield from self.get_connection(command)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 809, in get_connection\r\n    yield from self.event_to_child(stream,\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 763, in event_to_child\r\n    for command in child.handle_event(event):\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 129, in handle_event\r\n    yield from self.__continue(event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 227, in __continue\r\n    yield from self.__process(command_generator)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layer.py\", line 183, in __process\r\n    command = command_generator.send(send)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 136, in _handle_event\r\n    yield from self.client_state(event)\r\n  File \"/home/mitmproxyuser/.local/lib/python3.8/site-packages/mitmproxy/proxy/utils.py\", line 23, in _check_event_type\r\n    raise AssertionError(\r\nAssertionError: Unexpected event type at HttpStream.state_wait_for_request_headers: Expected RequestHeaders, got RequestData(stream_id=7, data=b'\\x01\\x00\\x00\\x00\\x17').\r\n```\r\n\r\nCurrently trying to reproduce it on a testing environment.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1153644681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"daMatz","id":9104870,"node_id":"MDQ6VXNlcjkxMDQ4NzA=","avatar_url":"https://avatars.githubusercontent.com/u/9104870?v=4","gravatar_id":"","url":"https://api.github.com/users/daMatz","html_url":"https://github.com/daMatz","followers_url":"https://api.github.com/users/daMatz/followers","following_url":"https://api.github.com/users/daMatz/following{/other_user}","gists_url":"https://api.github.com/users/daMatz/gists{/gist_id}","starred_url":"https://api.github.com/users/daMatz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daMatz/subscriptions","organizations_url":"https://api.github.com/users/daMatz/orgs","repos_url":"https://api.github.com/users/daMatz/repos","events_url":"https://api.github.com/users/daMatz/events{/privacy}","received_events_url":"https://api.github.com/users/daMatz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1153647447","html_url":"https://github.com/mitmproxy/mitmproxy/issues/5383#issuecomment-1153647447","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5383","id":1153647447,"node_id":"IC_kwDOAAfumM5Ew0NX","user":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T08:46:43Z","updated_at":"2022-06-13T08:46:43Z","body":"A simple self-contained repro would be helpful, alternatively a log with `-vvv --set proxy_debug`.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1153647447/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1154893128","html_url":"https://github.com/mitmproxy/mitmproxy/issues/5383#issuecomment-1154893128","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5383","id":1154893128,"node_id":"IC_kwDOAAfumM5E1kVI","user":{"login":"daMatz","id":9104870,"node_id":"MDQ6VXNlcjkxMDQ4NzA=","avatar_url":"https://avatars.githubusercontent.com/u/9104870?v=4","gravatar_id":"","url":"https://api.github.com/users/daMatz","html_url":"https://github.com/daMatz","followers_url":"https://api.github.com/users/daMatz/followers","following_url":"https://api.github.com/users/daMatz/following{/other_user}","gists_url":"https://api.github.com/users/daMatz/gists{/gist_id}","starred_url":"https://api.github.com/users/daMatz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daMatz/subscriptions","organizations_url":"https://api.github.com/users/daMatz/orgs","repos_url":"https://api.github.com/users/daMatz/repos","events_url":"https://api.github.com/users/daMatz/events{/privacy}","received_events_url":"https://api.github.com/users/daMatz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T08:44:39Z","updated_at":"2022-06-14T08:44:39Z","body":"@mhils unfortunately I wasn't able to reproduce the issue.\r\nAs soon as I am able to or have additional logs, I will update the issue.\r\n\r\n@kendrickluong are you able to provide the requested logs?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1154893128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"daMatz","id":9104870,"node_id":"MDQ6VXNlcjkxMDQ4NzA=","avatar_url":"https://avatars.githubusercontent.com/u/9104870?v=4","gravatar_id":"","url":"https://api.github.com/users/daMatz","html_url":"https://github.com/daMatz","followers_url":"https://api.github.com/users/daMatz/followers","following_url":"https://api.github.com/users/daMatz/following{/other_user}","gists_url":"https://api.github.com/users/daMatz/gists{/gist_id}","starred_url":"https://api.github.com/users/daMatz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daMatz/subscriptions","organizations_url":"https://api.github.com/users/daMatz/orgs","repos_url":"https://api.github.com/users/daMatz/repos","events_url":"https://api.github.com/users/daMatz/events{/privacy}","received_events_url":"https://api.github.com/users/daMatz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6802295124,"node_id":"MEE_lADOAAfumM5KoKtWzwAAAAGVcslU","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/6802295124","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-06-14T08:44:39Z","performed_via_github_app":null},{"id":6802295129,"node_id":"SE_lADOAAfumM5KoKtWzwAAAAGVcslZ","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/6802295129","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-06-14T08:44:39Z","performed_via_github_app":null},{"id":6802295141,"node_id":"MEE_lADOAAfumM5KoKtWzwAAAAGVcsll","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/6802295141","actor":{"login":"kendrickluong","id":13299791,"node_id":"MDQ6VXNlcjEzMjk5Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/13299791?v=4","gravatar_id":"","url":"https://api.github.com/users/kendrickluong","html_url":"https://github.com/kendrickluong","followers_url":"https://api.github.com/users/kendrickluong/followers","following_url":"https://api.github.com/users/kendrickluong/following{/other_user}","gists_url":"https://api.github.com/users/kendrickluong/gists{/gist_id}","starred_url":"https://api.github.com/users/kendrickluong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kendrickluong/subscriptions","organizations_url":"https://api.github.com/users/kendrickluong/orgs","repos_url":"https://api.github.com/users/kendrickluong/repos","events_url":"https://api.github.com/users/kendrickluong/events{/privacy}","received_events_url":"https://api.github.com/users/kendrickluong/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-06-14T08:44:40Z","performed_via_github_app":null},{"id":6802295148,"node_id":"SE_lADOAAfumM5KoKtWzwAAAAGVcsls","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/6802295148","actor":{"login":"kendrickluong","id":13299791,"node_id":"MDQ6VXNlcjEzMjk5Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/13299791?v=4","gravatar_id":"","url":"https://api.github.com/users/kendrickluong","html_url":"https://github.com/kendrickluong","followers_url":"https://api.github.com/users/kendrickluong/followers","following_url":"https://api.github.com/users/kendrickluong/following{/other_user}","gists_url":"https://api.github.com/users/kendrickluong/gists{/gist_id}","starred_url":"https://api.github.com/users/kendrickluong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kendrickluong/subscriptions","organizations_url":"https://api.github.com/users/kendrickluong/orgs","repos_url":"https://api.github.com/users/kendrickluong/repos","events_url":"https://api.github.com/users/kendrickluong/events{/privacy}","received_events_url":"https://api.github.com/users/kendrickluong/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-06-14T08:44:40Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1155766529","html_url":"https://github.com/mitmproxy/mitmproxy/issues/5383#issuecomment-1155766529","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5383","id":1155766529,"node_id":"IC_kwDOAAfumM5E45kB","user":{"login":"kendrickluong","id":13299791,"node_id":"MDQ6VXNlcjEzMjk5Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/13299791?v=4","gravatar_id":"","url":"https://api.github.com/users/kendrickluong","html_url":"https://github.com/kendrickluong","followers_url":"https://api.github.com/users/kendrickluong/followers","following_url":"https://api.github.com/users/kendrickluong/following{/other_user}","gists_url":"https://api.github.com/users/kendrickluong/gists{/gist_id}","starred_url":"https://api.github.com/users/kendrickluong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kendrickluong/subscriptions","organizations_url":"https://api.github.com/users/kendrickluong/orgs","repos_url":"https://api.github.com/users/kendrickluong/repos","events_url":"https://api.github.com/users/kendrickluong/events{/privacy}","received_events_url":"https://api.github.com/users/kendrickluong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T22:20:00Z","updated_at":"2022-06-14T22:21:19Z","body":"I've run this with -vvv and --set proxy_debug\r\n\r\n```\r\nclient:56474: client connect\r\nclient:56474:   >> Start({})\r\nclient:56474:   << NextLayerHook(data=NextLayer:None)\r\nclient:56474:   >! DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56474:   >> Reply(NextLayerHook(data=NextLayer:HttpProxy()), None)\r\nclient:56474:   [nextlayer] HttpProxy()\r\nclient:56474:   >> Start({})\r\nclient:56474:     >> Start({})\r\nclient:56474:   !> DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56474:   >> DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56474:     >> DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56474:     << NextLayerHook(data=NextLayer:None)\r\nclient:56474:   << NextLayerHook(data=NextLayer:None)\r\nclient:56474:   << NextLayerHook(data=NextLayer:None)\r\nclient:56474:   >> Reply(NextLayerHook(data=NextLayer:HttpLayer(regular, conns: 1)), None)\r\nclient:56474:     >> Reply(NextLayerHook(data=NextLayer:HttpLayer(regular, conns: 1)), None)\r\nclient:56474:     [nextlayer] HttpLayer(regular, conns: 1)\r\nclient:56474:     >> Start({})\r\nclient:56474:       >> Start({})\r\nclient:56474:     >> DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56474:       >> DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56474:       << Receive(RequestHeaders(stream_id=1, request=Request(CONNECT clients2.google.com:443), end_stream=True, replay_flow=None))\r\nclient:56474:       >> Start({})\r\nclient:56474:       >> RequestHeaders(stream_id=1, request=Request(CONNECT clients2.google.com:443), end_stream=True, replay_flow=None)\r\nclient:56474:       << HttpConnectHook(flow=<HTTPFlow\r\n        request = Request(CONNECT clients2.google.com:443)\r\n        client_conn = Client(client:56474, state=open)\r\n        server_conn = Server(<no address>, state=closed)>)\r\nclient:56474:     << HttpConnectHook(flow=<HTTPFlow\r\nclient:56474:     << HttpConnectHook(flow=<HTTPFlow\r\nclient:56474:   << HttpConnectHook(flow=<HTTPFlow\r\nclient:56474:   >> Reply(HttpConnectHook(flow=<HTTPFlow\r\n    request = Request(CONNECT clients2.google.com:443)\r\n    client_conn = Client(client:56474, state=open)\r\n    server_conn = Server(<no address>, state=closed)>), None)\r\nclient:56474:     >> Reply(HttpConnectHook(flow=<HTTPFlow\r\nclient:56474:       >> Reply(HttpConnectHook(flow=<HTTPFlow\r\nclient:56474:       << OpenConnection({'connection': Server({'id': '…c1dad9', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\nclient:56474:     << OpenConnection({'connection': Server({'id': '…c1dad9', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\nclient:56474:   << OpenConnection({'connection': Server({'id': '…c1dad9', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\n[BLOCK] mode=https server=clients2.google.com client=client\r\nclient:56474: server connection to clients2.google.com:443 killed before connect: error\r\nclient:56474:   >> Reply(OpenConnection({'connection': Server({'id': '…c1dad9', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56474:     >> Reply(OpenConnection({'connection': Server({'id': '…c1dad9', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56474:       >> Reply(OpenConnection({'connection': Server({'id': '…c1dad9', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56474:       << HttpResponseHook(flow=<HTTPFlow\r\n        request = Request(CONNECT clients2.google.com:443)\r\n        response = Response(502, unknown content type, 67b)\r\n        client_conn = Client(client:56474, state=open)\r\n        server_conn = Server(clients2.google.com:443, state=closed)>)\r\nclient:56474:     << HttpResponseHook(flow=<HTTPFlow\r\nclient:56474:   << HttpResponseHook(flow=<HTTPFlow\r\nclient:56474: CONNECT clients2.google.com:443\r\n    Host: clients2.google.com:443\r\n << 502 Bad Gateway 67b\r\n    content-length: 67\r\nclient:56474:   >> Reply(HttpResponseHook(flow=<HTTPFlow\r\n    request = Request(CONNECT clients2.google.com:443)\r\n    response = Response(502, unknown content type, 67b)\r\n    client_conn = Client(client:56474, state=open)\r\n    server_conn = Server(clients2.google.com:443, state=closed)>), None)\r\nclient:56474:     >> Reply(HttpResponseHook(flow=<HTTPFlow\r\nclient:56474:       >> Reply(HttpResponseHook(flow=<HTTPFlow\r\nclient:56474:       << Send(ResponseHeaders(stream_id=1, response=Response(502, unknown content type, 67b), end_stream=False))\r\nclient:56474:       >> ResponseHeaders(stream_id=1, response=Response(502, unknown content type, 67b), end_stream=False)\r\nclient:56474:       << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 67\\r\\n\\r\\n')\r\nclient:56474:     << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 67\\r\\n\\r\\n')\r\nclient:56474:   << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 67\\r\\n\\r\\n')\r\nclient:56474:       << Send(ResponseData(stream_id=1, data=b'Cannot connect to clients2.google.com:443: Connection killed: error'))\r\nclient:56474:       >> ResponseData(stream_id=1, data=b'Cannot connect to clients2.google.com:443: Connection killed: error')\r\nclient:56474:       << SendData(client, b'Cannot connect to clients2.google.com:443: Connection killed: error')\r\nclient:56474:     << SendData(client, b'Cannot connect to clients2.google.com:443: Connection killed: error')\r\nclient:56474:   << SendData(client, b'Cannot connect to clients2.google.com:443: Connection killed: error')\r\nclient:56475: client connect\r\nclient:56475:   >> Start({})\r\nclient:56475:   << NextLayerHook(data=NextLayer:None)\r\nclient:56475:   >> Reply(NextLayerHook(data=NextLayer:HttpProxy()), None)\r\nclient:56475:   [nextlayer] HttpProxy()\r\nclient:56475:   >> Start({})\r\nclient:56475:     >> Start({})\r\nclient:56475:   >> DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56475:     >> DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56475:     << NextLayerHook(data=NextLayer:None)\r\nclient:56475:   << NextLayerHook(data=NextLayer:None)\r\nclient:56475:   >> Reply(NextLayerHook(data=NextLayer:HttpLayer(regular, conns: 1)), None)\r\nclient:56475:     >> Reply(NextLayerHook(data=NextLayer:HttpLayer(regular, conns: 1)), None)\r\nclient:56475:     [nextlayer] HttpLayer(regular, conns: 1)\r\nclient:56475:     >> Start({})\r\nclient:56475:       >> Start({})\r\nclient:56475:     >> DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56475:       >> DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56475:       << Receive(RequestHeaders(stream_id=1, request=Request(CONNECT clients2.google.com:443), end_stream=True, replay_flow=None))\r\nclient:56475:       >> Start({})\r\nclient:56475:       >> RequestHeaders(stream_id=1, request=Request(CONNECT clients2.google.com:443), end_stream=True, replay_flow=None)\r\nclient:56475:       << HttpConnectHook(flow=<HTTPFlow\r\n        request = Request(CONNECT clients2.google.com:443)\r\n        client_conn = Client(client:56475, state=open)\r\n        server_conn = Server(<no address>, state=closed)>)\r\nclient:56475:     << HttpConnectHook(flow=<HTTPFlow\r\nclient:56475:     << HttpConnectHook(flow=<HTTPFlow\r\nclient:56475:   << HttpConnectHook(flow=<HTTPFlow\r\nclient:56475:   >> Reply(HttpConnectHook(flow=<HTTPFlow\r\n    request = Request(CONNECT clients2.google.com:443)\r\n    client_conn = Client(client:56475, state=open)\r\n    server_conn = Server(<no address>, state=closed)>), None)\r\nclient:56475:     >> Reply(HttpConnectHook(flow=<HTTPFlow\r\nclient:56475:       >> Reply(HttpConnectHook(flow=<HTTPFlow\r\nclient:56475:       << OpenConnection({'connection': Server({'id': '…bdc23b', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\nclient:56475:     << OpenConnection({'connection': Server({'id': '…bdc23b', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\nclient:56475:   << OpenConnection({'connection': Server({'id': '…bdc23b', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\n[BLOCK] mode=https server=clients2.google.com client=client\r\nclient:56475: server connection to clients2.google.com:443 killed before connect: error\r\nclient:56475:   >> Reply(OpenConnection({'connection': Server({'id': '…bdc23b', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56475:     >> Reply(OpenConnection({'connection': Server({'id': '…bdc23b', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56475:       >> Reply(OpenConnection({'connection': Server({'id': '…bdc23b', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56475:       << HttpResponseHook(flow=<HTTPFlow\r\n        request = Request(CONNECT clients2.google.com:443)\r\n        response = Response(502, unknown content type, 67b)\r\n        client_conn = Client(client:56475, state=open)\r\n        server_conn = Server(clients2.google.com:443, state=closed)>)\r\nclient:56475:     << HttpResponseHook(flow=<HTTPFlow\r\nclient:56475:   << HttpResponseHook(flow=<HTTPFlow\r\nclient:56475: CONNECT clients2.google.com:443\r\n    Host: clients2.google.com:443\r\n << 502 Bad Gateway 67b\r\n    content-length: 67\r\nclient:56475:   >> Reply(HttpResponseHook(flow=<HTTPFlow\r\n    request = Request(CONNECT clients2.google.com:443)\r\n    response = Response(502, unknown content type, 67b)\r\n    client_conn = Client(client:56475, state=open)\r\n    server_conn = Server(clients2.google.com:443, state=closed)>), None)\r\nclient:56475:     >> Reply(HttpResponseHook(flow=<HTTPFlow\r\nclient:56475:       >> Reply(HttpResponseHook(flow=<HTTPFlow\r\nclient:56475:       << Send(ResponseHeaders(stream_id=1, response=Response(502, unknown content type, 67b), end_stream=False))\r\nclient:56475:       >> ResponseHeaders(stream_id=1, response=Response(502, unknown content type, 67b), end_stream=False)\r\nclient:56475:       << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 67\\r\\n\\r\\n')\r\nclient:56475:     << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 67\\r\\n\\r\\n')\r\nclient:56475:   << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 67\\r\\n\\r\\n')\r\nclient:56475:       << Send(ResponseData(stream_id=1, data=b'Cannot connect to clients2.google.com:443: Connection killed: error'))\r\nclient:56475:       >> ResponseData(stream_id=1, data=b'Cannot connect to clients2.google.com:443: Connection killed: error')\r\nclient:56475:       << SendData(client, b'Cannot connect to clients2.google.com:443: Connection killed: error')\r\nclient:56475:     << SendData(client, b'Cannot connect to clients2.google.com:443: Connection killed: error')\r\nclient:56475:   << SendData(client, b'Cannot connect to clients2.google.com:443: Connection killed: error')\r\nclient:56475:   >> ConnectionClosed(connection=Client({'id': '…edeb2c', 'peername': ('client', 56475), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247235.757635, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56475:     >> ConnectionClosed(connection=Client({'id': '…edeb2c', 'peername': ('client', 56475), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247235.757635, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56475:       >> ConnectionClosed(connection=Client({'id': '…edeb2c', 'peername': ('client', 56475), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247235.757635, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56475:       << CloseConnection({'connection': Client({'id': '…edeb2c', 'peername': ('client', 56475), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247235.757635, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': False})\r\nclient:56475:     << CloseConnection({'connection': Client({'id': '…edeb2c', 'peername': ('client', 56475), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247235.757635, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': F…\r\nclient:56475:   << CloseConnection({'connection': Client({'id': '…edeb2c', 'peername': ('client', 56475), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247235.757635, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': F…\r\nclient:56475:       << Receive(RequestProtocolError(stream_id=1, message='Client disconnected.', code=499))\r\nclient:56475:       >> RequestProtocolError(stream_id=1, message='Client disconnected.', code=499)\r\nclient:56475:       << DropStream(stream_id=1)\r\nclient:56475: client disconnect\r\nclient:56475: closing transports...\r\nclient:56475: transports closed!\r\nclient:56474:   >> ConnectionClosed(connection=Client({'id': '…646032', 'peername': ('client', 56474), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247235.6537173, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56474:     >> ConnectionClosed(connection=Client({'id': '…646032', 'peername': ('client', 56474), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247235.6537173, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56474:       >> ConnectionClosed(connection=Client({'id': '…646032', 'peername': ('client', 56474), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247235.6537173, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56474:       << CloseConnection({'connection': Client({'id': '…646032', 'peername': ('client', 56474), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247235.6537173, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': False})\r\nclient:56474:     << CloseConnection({'connection': Client({'id': '…646032', 'peername': ('client', 56474), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247235.6537173, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': …\r\nclient:56474:   << CloseConnection({'connection': Client({'id': '…646032', 'peername': ('client', 56474), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247235.6537173, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': …\r\nclient:56474:       << Receive(RequestProtocolError(stream_id=1, message='Client disconnected.', code=499))\r\nclient:56474:       >> RequestProtocolError(stream_id=1, message='Client disconnected.', code=499)\r\nclient:56474:       << DropStream(stream_id=1)\r\nclient:56474: client disconnect\r\nclient:56474: closing transports...\r\nclient:56474: transports closed!\r\nclient:56493: client connect\r\nclient:56493:   >> Start({})\r\nclient:56493:   << NextLayerHook(data=NextLayer:None)\r\nclient:56493:   >> Reply(NextLayerHook(data=NextLayer:HttpProxy()), None)\r\nclient:56493:   [nextlayer] HttpProxy()\r\nclient:56493:   >> Start({})\r\nclient:56493:     >> Start({})\r\nclient:56493:   >> DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56493:     >> DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56493:     << NextLayerHook(data=NextLayer:None)\r\nclient:56493:   << NextLayerHook(data=NextLayer:None)\r\nclient:56493:   >> Reply(NextLayerHook(data=NextLayer:HttpLayer(regular, conns: 1)), None)\r\nclient:56493:     >> Reply(NextLayerHook(data=NextLayer:HttpLayer(regular, conns: 1)), None)\r\nclient:56493:     [nextlayer] HttpLayer(regular, conns: 1)\r\nclient:56493:     >> Start({})\r\nclient:56493:       >> Start({})\r\nclient:56493:     >> DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56493:       >> DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56493:       << Receive(RequestHeaders(stream_id=1, request=Request(CONNECT clients2.google.com:443), end_stream=True, replay_flow=None))\r\nclient:56493:       >> Start({})\r\nclient:56493:       >> RequestHeaders(stream_id=1, request=Request(CONNECT clients2.google.com:443), end_stream=True, replay_flow=None)\r\nclient:56493:       << HttpConnectHook(flow=<HTTPFlow\r\n        request = Request(CONNECT clients2.google.com:443)\r\n        client_conn = Client(client:56493, state=open)\r\n        server_conn = Server(<no address>, state=closed)>)\r\nclient:56493:     << HttpConnectHook(flow=<HTTPFlow\r\nclient:56493:     << HttpConnectHook(flow=<HTTPFlow\r\nclient:56493:   << HttpConnectHook(flow=<HTTPFlow\r\nclient:56493:   >> Reply(HttpConnectHook(flow=<HTTPFlow\r\n    request = Request(CONNECT clients2.google.com:443)\r\n    client_conn = Client(client:56493, state=open)\r\n    server_conn = Server(<no address>, state=closed)>), None)\r\nclient:56493:     >> Reply(HttpConnectHook(flow=<HTTPFlow\r\nclient:56493:       >> Reply(HttpConnectHook(flow=<HTTPFlow\r\nclient:56493:       << OpenConnection({'connection': Server({'id': '…b1d56d', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\nclient:56493:     << OpenConnection({'connection': Server({'id': '…b1d56d', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\nclient:56493:   << OpenConnection({'connection': Server({'id': '…b1d56d', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\nclient:56493: server connection to clients2.google.com:443 killed before connect: error\r\nclient:56493:   >> Reply(OpenConnection({'connection': Server({'id': '…b1d56d', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56493:     >> Reply(OpenConnection({'connection': Server({'id': '…b1d56d', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56493:       >> Reply(OpenConnection({'connection': Server({'id': '…b1d56d', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56493:       << HttpResponseHook(flow=<HTTPFlow\r\n        request = Request(CONNECT clients2.google.com:443)\r\n        response = Response(502, unknown content type, 67b)\r\n        client_conn = Client(client:56493, state=open)\r\n        server_conn = Server(clients2.google.com:443, state=closed)>)\r\nclient:56493:     << HttpResponseHook(flow=<HTTPFlow\r\nclient:56493:   << HttpResponseHook(flow=<HTTPFlow\r\nclient:56493: CONNECT clients2.google.com:443\r\n    Host: clients2.google.com:443\r\n << 502 Bad Gateway 67b\r\n    content-length: 67\r\nclient:56493:   >> Reply(HttpResponseHook(flow=<HTTPFlow\r\n    request = Request(CONNECT clients2.google.com:443)\r\n    response = Response(502, unknown content type, 67b)\r\n    client_conn = Client(client:56493, state=open)\r\n    server_conn = Server(clients2.google.com:443, state=closed)>), None)\r\nclient:56493:     >> Reply(HttpResponseHook(flow=<HTTPFlow\r\nclient:56493:       >> Reply(HttpResponseHook(flow=<HTTPFlow\r\nclient:56493:       << Send(ResponseHeaders(stream_id=1, response=Response(502, unknown content type, 67b), end_stream=False))\r\nclient:56493:       >> ResponseHeaders(stream_id=1, response=Response(502, unknown content type, 67b), end_stream=False)\r\nclient:56493:       << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 67\\r\\n\\r\\n')\r\nclient:56493:     << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 67\\r\\n\\r\\n')\r\nclient:56493:   << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 67\\r\\n\\r\\n')\r\nclient:56493:       << Send(ResponseData(stream_id=1, data=b'Cannot connect to clients2.google.com:443: Connection killed: error'))\r\nclient:56493:       >> ResponseData(stream_id=1, data=b'Cannot connect to clients2.google.com:443: Connection killed: error')\r\nclient:56493:       << SendData(client, b'Cannot connect to clients2.google.com:443: Connection killed: error')\r\nclient:56493:     << SendData(client, b'Cannot connect to clients2.google.com:443: Connection killed: error')\r\nclient:56493:   << SendData(client, b'Cannot connect to clients2.google.com:443: Connection killed: error')\r\nclient:56494: client connect\r\nclient:56494:   >> Start({})\r\nclient:56494:   << NextLayerHook(data=NextLayer:None)\r\nclient:56494:   >> Reply(NextLayerHook(data=NextLayer:HttpProxy()), None)\r\nclient:56494:   [nextlayer] HttpProxy()\r\nclient:56494:   >> Start({})\r\nclient:56494:     >> Start({})\r\nclient:56494:   >> DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56494:     >> DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56494:     << NextLayerHook(data=NextLayer:None)\r\nclient:56494:   << NextLayerHook(data=NextLayer:None)\r\nclient:56494:   >> Reply(NextLayerHook(data=NextLayer:HttpLayer(regular, conns: 1)), None)\r\nclient:56494:     >> Reply(NextLayerHook(data=NextLayer:HttpLayer(regular, conns: 1)), None)\r\nclient:56494:     [nextlayer] HttpLayer(regular, conns: 1)\r\nclient:56494:     >> Start({})\r\nclient:56494:       >> Start({})\r\nclient:56494:     >> DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56494:       >> DataReceived(client, b'CONNECT clients2.google.com:443 HTTP/1.1\\r\\nHost: clients2.google.com:443\\r\\n\\r\\n')\r\nclient:56494:       << Receive(RequestHeaders(stream_id=1, request=Request(CONNECT clients2.google.com:443), end_stream=True, replay_flow=None))\r\nclient:56494:       >> Start({})\r\nclient:56494:       >> RequestHeaders(stream_id=1, request=Request(CONNECT clients2.google.com:443), end_stream=True, replay_flow=None)\r\nclient:56494:       << HttpConnectHook(flow=<HTTPFlow\r\n        request = Request(CONNECT clients2.google.com:443)\r\n        client_conn = Client(client:56494, state=open)\r\n        server_conn = Server(<no address>, state=closed)>)\r\nclient:56494:     << HttpConnectHook(flow=<HTTPFlow\r\nclient:56494:     << HttpConnectHook(flow=<HTTPFlow\r\nclient:56494:   << HttpConnectHook(flow=<HTTPFlow\r\nclient:56494:   >> Reply(HttpConnectHook(flow=<HTTPFlow\r\n    request = Request(CONNECT clients2.google.com:443)\r\n    client_conn = Client(client:56494, state=open)\r\n    server_conn = Server(<no address>, state=closed)>), None)\r\nclient:56494:     >> Reply(HttpConnectHook(flow=<HTTPFlow\r\nclient:56494:       >> Reply(HttpConnectHook(flow=<HTTPFlow\r\nclient:56494:       << OpenConnection({'connection': Server({'id': '…d3e98c', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\nclient:56494:     << OpenConnection({'connection': Server({'id': '…d3e98c', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\nclient:56494:   << OpenConnection({'connection': Server({'id': '…d3e98c', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\nclient:56494: server connection to clients2.google.com:443 killed before connect: error\r\nclient:56494:   >> Reply(OpenConnection({'connection': Server({'id': '…d3e98c', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56494:     >> Reply(OpenConnection({'connection': Server({'id': '…d3e98c', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56494:       >> Reply(OpenConnection({'connection': Server({'id': '…d3e98c', 'address': ('clients2.google.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56494:       << HttpResponseHook(flow=<HTTPFlow\r\n        request = Request(CONNECT clients2.google.com:443)\r\n        response = Response(502, unknown content type, 67b)\r\n        client_conn = Client(client:56494, state=open)\r\n        server_conn = Server(clients2.google.com:443, state=closed)>)\r\nclient:56494:     << HttpResponseHook(flow=<HTTPFlow\r\nclient:56494:   << HttpResponseHook(flow=<HTTPFlow\r\nclient:56494: CONNECT clients2.google.com:443\r\n    Host: clients2.google.com:443\r\n << 502 Bad Gateway 67b\r\n    content-length: 67\r\nclient:56494:   >> Reply(HttpResponseHook(flow=<HTTPFlow\r\n    request = Request(CONNECT clients2.google.com:443)\r\n    response = Response(502, unknown content type, 67b)\r\n    client_conn = Client(client:56494, state=open)\r\n    server_conn = Server(clients2.google.com:443, state=closed)>), None)\r\nclient:56494:     >> Reply(HttpResponseHook(flow=<HTTPFlow\r\nclient:56494:       >> Reply(HttpResponseHook(flow=<HTTPFlow\r\nclient:56494:       << Send(ResponseHeaders(stream_id=1, response=Response(502, unknown content type, 67b), end_stream=False))\r\nclient:56494:       >> ResponseHeaders(stream_id=1, response=Response(502, unknown content type, 67b), end_stream=False)\r\nclient:56494:       << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 67\\r\\n\\r\\n')\r\nclient:56494:     << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 67\\r\\n\\r\\n')\r\nclient:56494:   << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 67\\r\\n\\r\\n')\r\nclient:56494:       << Send(ResponseData(stream_id=1, data=b'Cannot connect to clients2.google.com:443: Connection killed: error'))\r\nclient:56494:       >> ResponseData(stream_id=1, data=b'Cannot connect to clients2.google.com:443: Connection killed: error')\r\nclient:56494:       << SendData(client, b'Cannot connect to clients2.google.com:443: Connection killed: error')\r\nclient:56494:     << SendData(client, b'Cannot connect to clients2.google.com:443: Connection killed: error')\r\nclient:56494:   << SendData(client, b'Cannot connect to clients2.google.com:443: Connection killed: error')\r\nclient:56494:   >> ConnectionClosed(connection=Client({'id': '…567683', 'peername': ('client', 56494), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247236.174028, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56494:     >> ConnectionClosed(connection=Client({'id': '…567683', 'peername': ('client', 56494), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247236.174028, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56494:       >> ConnectionClosed(connection=Client({'id': '…567683', 'peername': ('client', 56494), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247236.174028, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56494:       << CloseConnection({'connection': Client({'id': '…567683', 'peername': ('client', 56494), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247236.174028, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': False})\r\nclient:56494:     << CloseConnection({'connection': Client({'id': '…567683', 'peername': ('client', 56494), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247236.174028, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': F…\r\nclient:56494:   << CloseConnection({'connection': Client({'id': '…567683', 'peername': ('client', 56494), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247236.174028, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': F…\r\nclient:56494:       << Receive(RequestProtocolError(stream_id=1, message='Client disconnected.', code=499))\r\nclient:56494:       >> RequestProtocolError(stream_id=1, message='Client disconnected.', code=499)\r\nclient:56494:       << DropStream(stream_id=1)\r\nclient:56494: client disconnect\r\nclient:56494: closing transports...\r\nclient:56494: transports closed!\r\nclient:56493:   >> ConnectionClosed(connection=Client({'id': '…da9b52', 'peername': ('client', 56493), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247236.089301, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56493:     >> ConnectionClosed(connection=Client({'id': '…da9b52', 'peername': ('client', 56493), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247236.089301, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56493:       >> ConnectionClosed(connection=Client({'id': '…da9b52', 'peername': ('client', 56493), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247236.089301, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56493:       << CloseConnection({'connection': Client({'id': '…da9b52', 'peername': ('client', 56493), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247236.089301, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': False})\r\nclient:56493:     << CloseConnection({'connection': Client({'id': '…da9b52', 'peername': ('client', 56493), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247236.089301, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': F…\r\nclient:56493:   << CloseConnection({'connection': Client({'id': '…da9b52', 'peername': ('client', 56493), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247236.089301, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': F…\r\nclient:56493:       << Receive(RequestProtocolError(stream_id=1, message='Client disconnected.', code=499))\r\nclient:56493:       >> RequestProtocolError(stream_id=1, message='Client disconnected.', code=499)\r\nclient:56493:       << DropStream(stream_id=1)\r\nclient:56493: client disconnect\r\nclient:56493: closing transports...\r\nclient:56493: transports closed!\r\nclient:56510: client connect\r\nclient:56510:   >> Start({})\r\nclient:56510:   << NextLayerHook(data=NextLayer:None)\r\nclient:56510:   >! DataReceived(client, b'CONNECT update.googleapis.com:443 HTTP/1.1\\r\\nHost: update.googleapis.com:443\\r\\n\\r\\n')\r\nclient:56510:   >> Reply(NextLayerHook(data=NextLayer:HttpProxy()), None)\r\nclient:56510:   [nextlayer] HttpProxy()\r\nclient:56510:   >> Start({})\r\nclient:56510:     >> Start({})\r\nclient:56510:   !> DataReceived(client, b'CONNECT update.googleapis.com:443 HTTP/1.1\\r\\nHost: update.googleapis.com:443\\r\\n\\r\\n')\r\nclient:56510:   >> DataReceived(client, b'CONNECT update.googleapis.com:443 HTTP/1.1\\r\\nHost: update.googleapis.com:443\\r\\n\\r\\n')\r\nclient:56510:     >> DataReceived(client, b'CONNECT update.googleapis.com:443 HTTP/1.1\\r\\nHost: update.googleapis.com:443\\r\\n\\r\\n')\r\nclient:56510:     << NextLayerHook(data=NextLayer:None)\r\nclient:56510:   << NextLayerHook(data=NextLayer:None)\r\nclient:56510:   << NextLayerHook(data=NextLayer:None)\r\nclient:56510:   >> Reply(NextLayerHook(data=NextLayer:HttpLayer(regular, conns: 1)), None)\r\nclient:56510:     >> Reply(NextLayerHook(data=NextLayer:HttpLayer(regular, conns: 1)), None)\r\nclient:56510:     [nextlayer] HttpLayer(regular, conns: 1)\r\nclient:56510:     >> Start({})\r\nclient:56510:       >> Start({})\r\nclient:56510:     >> DataReceived(client, b'CONNECT update.googleapis.com:443 HTTP/1.1\\r\\nHost: update.googleapis.com:443\\r\\n\\r\\n')\r\nclient:56510:       >> DataReceived(client, b'CONNECT update.googleapis.com:443 HTTP/1.1\\r\\nHost: update.googleapis.com:443\\r\\n\\r\\n')\r\nclient:56510:       << Receive(RequestHeaders(stream_id=1, request=Request(CONNECT update.googleapis.com:443), end_stream=True, replay_flow=None))\r\nclient:56510:       >> Start({})\r\nclient:56510:       >> RequestHeaders(stream_id=1, request=Request(CONNECT update.googleapis.com:443), end_stream=True, replay_flow=None)\r\nclient:56510:       << HttpConnectHook(flow=<HTTPFlow\r\n        request = Request(CONNECT update.googleapis.com:443)\r\n        client_conn = Client(client:56510, state=open)\r\n        server_conn = Server(<no address>, state=closed)>)\r\nclient:56510:     << HttpConnectHook(flow=<HTTPFlow\r\nclient:56510:     << HttpConnectHook(flow=<HTTPFlow\r\nclient:56510:   << HttpConnectHook(flow=<HTTPFlow\r\nclient:56510:   >> Reply(HttpConnectHook(flow=<HTTPFlow\r\n    request = Request(CONNECT update.googleapis.com:443)\r\n    client_conn = Client(client:56510, state=open)\r\n    server_conn = Server(<no address>, state=closed)>), None)\r\nclient:56510:     >> Reply(HttpConnectHook(flow=<HTTPFlow\r\nclient:56510:       >> Reply(HttpConnectHook(flow=<HTTPFlow\r\nclient:56510:       << OpenConnection({'connection': Server({'id': '…1e8bc7', 'address': ('update.googleapis.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\nclient:56510:     << OpenConnection({'connection': Server({'id': '…1e8bc7', 'address': ('update.googleapis.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\nclient:56510:   << OpenConnection({'connection': Server({'id': '…1e8bc7', 'address': ('update.googleapis.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\n[BLOCK] mode=https server=update.googleapis.com client=client\r\nclient:56510: server connection to update.googleapis.com:443 killed before connect: error\r\nclient:56510:   >> Reply(OpenConnection({'connection': Server({'id': '…1e8bc7', 'address': ('update.googleapis.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56510:     >> Reply(OpenConnection({'connection': Server({'id': '…1e8bc7', 'address': ('update.googleapis.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56510:       >> Reply(OpenConnection({'connection': Server({'id': '…1e8bc7', 'address': ('update.googleapis.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56510:       << HttpResponseHook(flow=<HTTPFlow\r\n        request = Request(CONNECT update.googleapis.com:443)\r\n        response = Response(502, unknown content type, 69b)\r\n        client_conn = Client(client:56510, state=open)\r\n        server_conn = Server(update.googleapis.com:443, state=closed)>)\r\nclient:56510:     << HttpResponseHook(flow=<HTTPFlow\r\nclient:56510:   << HttpResponseHook(flow=<HTTPFlow\r\nclient:56510: CONNECT update.googleapis.com:443\r\n    Host: update.googleapis.com:443\r\n << 502 Bad Gateway 69b\r\n    content-length: 69\r\nclient:56510:   >> Reply(HttpResponseHook(flow=<HTTPFlow\r\n    request = Request(CONNECT update.googleapis.com:443)\r\n    response = Response(502, unknown content type, 69b)\r\n    client_conn = Client(client:56510, state=open)\r\n    server_conn = Server(update.googleapis.com:443, state=closed)>), None)\r\nclient:56510:     >> Reply(HttpResponseHook(flow=<HTTPFlow\r\nclient:56510:       >> Reply(HttpResponseHook(flow=<HTTPFlow\r\nclient:56510:       << Send(ResponseHeaders(stream_id=1, response=Response(502, unknown content type, 69b), end_stream=False))\r\nclient:56510:       >> ResponseHeaders(stream_id=1, response=Response(502, unknown content type, 69b), end_stream=False)\r\nclient:56510:       << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 69\\r\\n\\r\\n')\r\nclient:56510:     << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 69\\r\\n\\r\\n')\r\nclient:56510:   << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 69\\r\\n\\r\\n')\r\nclient:56510:       << Send(ResponseData(stream_id=1, data=b'Cannot connect to update.googleapis.com:443: Connection killed: error'))\r\nclient:56510:       >> ResponseData(stream_id=1, data=b'Cannot connect to update.googleapis.com:443: Connection killed: error')\r\nclient:56510:       << SendData(client, b'Cannot connect to update.googleapis.com:443: Connection killed: error')\r\nclient:56510:     << SendData(client, b'Cannot connect to update.googleapis.com:443: Connection killed: error')\r\nclient:56510:   << SendData(client, b'Cannot connect to update.googleapis.com:443: Connection killed: error')\r\nclient:56510:   >> ConnectionClosed(connection=Client({'id': '…ae0b42', 'peername': ('client', 56510), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247267.976523, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56510:     >> ConnectionClosed(connection=Client({'id': '…ae0b42', 'peername': ('client', 56510), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247267.976523, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56510:       >> ConnectionClosed(connection=Client({'id': '…ae0b42', 'peername': ('client', 56510), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247267.976523, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56510:       << CloseConnection({'connection': Client({'id': '…ae0b42', 'peername': ('client', 56510), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247267.976523, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': False})\r\nclient:56510:     << CloseConnection({'connection': Client({'id': '…ae0b42', 'peername': ('client', 56510), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247267.976523, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': F…\r\nclient:56510:   << CloseConnection({'connection': Client({'id': '…ae0b42', 'peername': ('client', 56510), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247267.976523, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': F…\r\nclient:56510:       << Receive(RequestProtocolError(stream_id=1, message='Client disconnected.', code=499))\r\nclient:56510:       >> RequestProtocolError(stream_id=1, message='Client disconnected.', code=499)\r\nclient:56510:       << DropStream(stream_id=1)\r\nclient:56510: client disconnect\r\nclient:56510: closing transports...\r\nclient:56510: transports closed!\r\nclient:56519: client connect\r\nclient:56519:   >> Start({})\r\nclient:56519:   << NextLayerHook(data=NextLayer:None)\r\nclient:56519:   >! DataReceived(client, b'CONNECT update.googleapis.com:443 HTTP/1.1\\r\\nHost: update.googleapis.com:443\\r\\n\\r\\n')\r\nclient:56519:   >> Reply(NextLayerHook(data=NextLayer:HttpProxy()), None)\r\nclient:56519:   [nextlayer] HttpProxy()\r\nclient:56519:   >> Start({})\r\nclient:56519:     >> Start({})\r\nclient:56519:   !> DataReceived(client, b'CONNECT update.googleapis.com:443 HTTP/1.1\\r\\nHost: update.googleapis.com:443\\r\\n\\r\\n')\r\nclient:56519:   >> DataReceived(client, b'CONNECT update.googleapis.com:443 HTTP/1.1\\r\\nHost: update.googleapis.com:443\\r\\n\\r\\n')\r\nclient:56519:     >> DataReceived(client, b'CONNECT update.googleapis.com:443 HTTP/1.1\\r\\nHost: update.googleapis.com:443\\r\\n\\r\\n')\r\nclient:56519:     << NextLayerHook(data=NextLayer:None)\r\nclient:56519:   << NextLayerHook(data=NextLayer:None)\r\nclient:56519:   << NextLayerHook(data=NextLayer:None)\r\nclient:56519:   >> Reply(NextLayerHook(data=NextLayer:HttpLayer(regular, conns: 1)), None)\r\nclient:56519:     >> Reply(NextLayerHook(data=NextLayer:HttpLayer(regular, conns: 1)), None)\r\nclient:56519:     [nextlayer] HttpLayer(regular, conns: 1)\r\nclient:56519:     >> Start({})\r\nclient:56519:       >> Start({})\r\nclient:56519:     >> DataReceived(client, b'CONNECT update.googleapis.com:443 HTTP/1.1\\r\\nHost: update.googleapis.com:443\\r\\n\\r\\n')\r\nclient:56519:       >> DataReceived(client, b'CONNECT update.googleapis.com:443 HTTP/1.1\\r\\nHost: update.googleapis.com:443\\r\\n\\r\\n')\r\nclient:56519:       << Receive(RequestHeaders(stream_id=1, request=Request(CONNECT update.googleapis.com:443), end_stream=True, replay_flow=None))\r\nclient:56519:       >> Start({})\r\nclient:56519:       >> RequestHeaders(stream_id=1, request=Request(CONNECT update.googleapis.com:443), end_stream=True, replay_flow=None)\r\nclient:56519:       << HttpConnectHook(flow=<HTTPFlow\r\n        request = Request(CONNECT update.googleapis.com:443)\r\n        client_conn = Client(client:56519, state=open)\r\n        server_conn = Server(<no address>, state=closed)>)\r\nclient:56519:     << HttpConnectHook(flow=<HTTPFlow\r\nclient:56519:     << HttpConnectHook(flow=<HTTPFlow\r\nclient:56519:   << HttpConnectHook(flow=<HTTPFlow\r\nclient:56519:   >> Reply(HttpConnectHook(flow=<HTTPFlow\r\n    request = Request(CONNECT update.googleapis.com:443)\r\n    client_conn = Client(client:56519, state=open)\r\n    server_conn = Server(<no address>, state=closed)>), None)\r\nclient:56519:     >> Reply(HttpConnectHook(flow=<HTTPFlow\r\nclient:56519:       >> Reply(HttpConnectHook(flow=<HTTPFlow\r\nclient:56519:       << OpenConnection({'connection': Server({'id': '…0203da', 'address': ('update.googleapis.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\nclient:56519:     << OpenConnection({'connection': Server({'id': '…0203da', 'address': ('update.googleapis.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\nclient:56519:   << OpenConnection({'connection': Server({'id': '…0203da', 'address': ('update.googleapis.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\n[BLOCK] mode=https server=update.googleapis.com client=client\r\nclient:56519: server connection to update.googleapis.com:443 killed before connect: error\r\nclient:56519:   >> Reply(OpenConnection({'connection': Server({'id': '…0203da', 'address': ('update.googleapis.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56519:     >> Reply(OpenConnection({'connection': Server({'id': '…0203da', 'address': ('update.googleapis.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56519:       >> Reply(OpenConnection({'connection': Server({'id': '…0203da', 'address': ('update.googleapis.com', 443), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56519:       << HttpResponseHook(flow=<HTTPFlow\r\n        request = Request(CONNECT update.googleapis.com:443)\r\n        response = Response(502, unknown content type, 69b)\r\n        client_conn = Client(client:56519, state=open)\r\n        server_conn = Server(update.googleapis.com:443, state=closed)>)\r\nclient:56519:     << HttpResponseHook(flow=<HTTPFlow\r\nclient:56519:   << HttpResponseHook(flow=<HTTPFlow\r\nclient:56519: CONNECT update.googleapis.com:443\r\n    Host: update.googleapis.com:443\r\n << 502 Bad Gateway 69b\r\n    content-length: 69\r\nclient:56519:   >> Reply(HttpResponseHook(flow=<HTTPFlow\r\n    request = Request(CONNECT update.googleapis.com:443)\r\n    response = Response(502, unknown content type, 69b)\r\n    client_conn = Client(client:56519, state=open)\r\n    server_conn = Server(update.googleapis.com:443, state=closed)>), None)\r\nclient:56519:     >> Reply(HttpResponseHook(flow=<HTTPFlow\r\nclient:56519:       >> Reply(HttpResponseHook(flow=<HTTPFlow\r\nclient:56519:       << Send(ResponseHeaders(stream_id=1, response=Response(502, unknown content type, 69b), end_stream=False))\r\nclient:56519:       >> ResponseHeaders(stream_id=1, response=Response(502, unknown content type, 69b), end_stream=False)\r\nclient:56519:       << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 69\\r\\n\\r\\n')\r\nclient:56519:     << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 69\\r\\n\\r\\n')\r\nclient:56519:   << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\ncontent-length: 69\\r\\n\\r\\n')\r\nclient:56519:       << Send(ResponseData(stream_id=1, data=b'Cannot connect to update.googleapis.com:443: Connection killed: error'))\r\nclient:56519:       >> ResponseData(stream_id=1, data=b'Cannot connect to update.googleapis.com:443: Connection killed: error')\r\nclient:56519:       << SendData(client, b'Cannot connect to update.googleapis.com:443: Connection killed: error')\r\nclient:56519:     << SendData(client, b'Cannot connect to update.googleapis.com:443: Connection killed: error')\r\nclient:56519:   << SendData(client, b'Cannot connect to update.googleapis.com:443: Connection killed: error')\r\nclient:56519:   >> ConnectionClosed(connection=Client({'id': '…a8f850', 'peername': ('client', 56519), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247276.206816, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56519:     >> ConnectionClosed(connection=Client({'id': '…a8f850', 'peername': ('client', 56519), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247276.206816, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56519:       >> ConnectionClosed(connection=Client({'id': '…a8f850', 'peername': ('client', 56519), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247276.206816, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}))\r\nclient:56519:       << CloseConnection({'connection': Client({'id': '…a8f850', 'peername': ('client', 56519), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247276.206816, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': False})\r\nclient:56519:     << CloseConnection({'connection': Client({'id': '…a8f850', 'peername': ('client', 56519), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247276.206816, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': F…\r\nclient:56519:   << CloseConnection({'connection': Client({'id': '…a8f850', 'peername': ('client', 56519), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247276.206816, 'state': <ConnectionState.CAN_WRITE: 2>, 'transport_protocol': 'tcp'}), 'half_close': F…\r\nclient:56519:       << Receive(RequestProtocolError(stream_id=1, message='Client disconnected.', code=499))\r\nclient:56519:       >> RequestProtocolError(stream_id=1, message='Client disconnected.', code=499)\r\nclient:56519:       << DropStream(stream_id=1)\r\nclient:56519: client disconnect\r\nclient:56519: closing transports...\r\nclient:56519: transports closed!\r\nclient:56525: client connect\r\nclient:56525:   >> Start({})\r\nclient:56525:   << NextLayerHook(data=NextLayer:None)\r\nclient:56525:   >! DataReceived(client, b'POST http://update.googleapis.com/service/update2?cup2key=11:wxmttcgP9iRANi9a-4WYiWFLnsryrfX5Aeuh_Arsw-I&cup2hreq=7f0ce376b49efa8e11d035b9a948cea00c89101116cc63425ac80cde33ee5eb3 HTTP/1.1\\r\\nCache-Control: no-cache\\r\\nProxy-Connection: Keep-Alive\\r\\nPragma: no-cache\\r\\nUser-Agent: Google Update/1.3.36.131;winhttp;cup-ecdsa\\r\\nX-Old-UID: cnt=0\\r\\nX-Goog-Update-AppId: {430FD4D0-B729-4F61-AA34-91526481799D},{8A69D345-D564-463C-AFF1-A69D9E530F96}\\r\\nX-Goog-Update-Updater: Omaha-1.3.36.…\r\nclient:56525:   >> Reply(NextLayerHook(data=NextLayer:HttpProxy()), None)\r\nclient:56525:   [nextlayer] HttpProxy()\r\nclient:56525:   >> Start({})\r\nclient:56525:     >> Start({})\r\nclient:56525:   !> DataReceived(client, b'POST http://update.googleapis.com/service/update2?cup2key=11:wxmttcgP9iRANi9a-4WYiWFLnsryrfX5Aeuh_Arsw-I&cup2hreq=7f0ce376b49efa8e11d035b9a948cea00c89101116cc63425ac80cde33ee5eb3 HTTP/1.1\\r\\nCache-Control: no-cache\\r\\nProxy-Connection: Keep-Alive\\r\\nPragma: no-cache\\r\\nUser-Agent: Google Update/1.3.36.131;winhttp;cup-ecdsa\\r\\nX-Old-UID: cnt=0\\r\\nX-Goog-Update-AppId: {430FD4D0-B729-4F61-AA34-91526481799D},{8A69D345-D564-463C-AFF1-A69D9E530F96}\\r\\nX-Goog-Update-Updater: Omaha-1.3.36.…\r\nclient:56525:   >> DataReceived(client, b'POST http://update.googleapis.com/service/update2?cup2key=11:wxmttcgP9iRANi9a-4WYiWFLnsryrfX5Aeuh_Arsw-I&cup2hreq=7f0ce376b49efa8e11d035b9a948cea00c89101116cc63425ac80cde33ee5eb3 HTTP/1.1\\r\\nCache-Control: no-cache\\r\\nProxy-Connection: Keep-Alive\\r\\nPragma: no-cache\\r\\nUser-Agent: Google Update/1.3.36.131;winhttp;cup-ecdsa\\r\\nX-Old-UID: cnt=0\\r\\nX-Goog-Update-AppId: {430FD4D0-B729-4F61-AA34-91526481799D},{8A69D345-D564-463C-AFF1-A69D9E530F96}\\r\\nX-Goog-Update-Updater: Omaha-1.3.36.…\r\nclient:56525:     >> DataReceived(client, b'POST http://update.googleapis.com/service/update2?cup2key=11:wxmttcgP9iRANi9a-4WYiWFLnsryrfX5Aeuh_Arsw-I&cup2hreq=7f0ce376b49efa8e11d035b9a948cea00c89101116cc63425ac80cde33ee5eb3 HTTP/1.1\\r\\nCache-Control: no-cache\\r\\nProxy-Connec…\r\nclient:56525:     << NextLayerHook(data=NextLayer:None)\r\nclient:56525:   << NextLayerHook(data=NextLayer:None)\r\nclient:56525:   << NextLayerHook(data=NextLayer:None)\r\nclient:56525:   >> Reply(NextLayerHook(data=NextLayer:HttpLayer(regular, conns: 1)), None)\r\nclient:56525:     >> Reply(NextLayerHook(data=NextLayer:HttpLayer(regular, conns: 1)), None)\r\nclient:56525:     [nextlayer] HttpLayer(regular, conns: 1)\r\nclient:56525:     >> Start({})\r\nclient:56525:       >> Start({})\r\nclient:56525:     >> DataReceived(client, b'POST http://update.googleapis.com/service/update2?cup2key=11:wxmttcgP9iRANi9a-4WYiWFLnsryrfX5Aeuh_Arsw-I&cup2hreq=7f0ce376b49efa8e11d035b9a948cea00c89101116cc63425ac80cde33ee5eb3 HTTP/1.1\\r\\nCache-Control: no-cache\\r\\nProxy-Connection: Keep-Alive\\r\\nPragma: no-cache\\r\\nUser-Agent: Google Update/1.3.36.131;winhttp;cup-ecdsa\\r\\nX-Old-UID: cnt=0\\r\\nX-Goog-Update-AppId: {430FD4D0-B729-4F61-AA34-91526481799D},{8A69D345-D564-463C-AFF1-A69D9E530F96}\\r\\nX-Goog-Update-Updater: Omaha-1.3.36.…\r\nclient:56525:       >> DataReceived(client, b'POST http://update.googleapis.com/service/update2?cup2key=11:wxmttcgP9iRANi9a-4WYiWFLnsryrfX5Aeuh_Arsw-I&cup2hreq=7f0ce376b49efa8e11d035b9a948cea00c89101116cc63425ac80cde33ee5eb3 HTTP/1.1\\r\\nCache-Control: no-cache\\r\\nProxy-Connec…\r\nclient:56525:       << Receive(RequestHeaders(stream_id=1, request=Request(POST update.googleapis.com:80/service/update2?cup2key=11:wxmttcgP9iRANi9a-4WYiWFLnsryrfX5Aeuh_Arsw-I&cup2hreq=7f0ce376b49efa8e11d035b9a948cea00c89101116cc63425ac80cde33ee5eb3), end_stream=False, replay_flow=None))\r\nclient:56525:       >> Start({})\r\nclient:56525:       >> RequestHeaders(stream_id=1, request=Request(POST update.googleapis.com:80/service/update2?cup2key=11:wxmttcgP9iRANi9a-4WYiWFLnsryrfX5Aeuh_Arsw-I&cup2hreq=7f0ce376b49efa8e11d035b9a948cea00c89101116cc63425ac80cde33ee5eb3), end_stream=False, replay_flow=None)\r\nclient:56525:       << HttpRequestHeadersHook(flow=<HTTPFlow\r\n        request = Request(POST update.googleapis.com:80/service/update2?cup2key=11:wxmttcgP9iRANi9a-4WYiWFLnsryrfX5Aeuh_Arsw-I&cup2hreq=7f0ce376b49efa8e11d035b9a948cea00c89101116cc63425ac80cde33ee5eb3)\r\n        client_conn = Client(client:56525, state=open)\r\n        server_conn = Server(<no address>, state=closed)>)\r\nclient:56525:     << HttpRequestHeadersHook(flow=<HTTPFlow\r\nclient:56525:     << HttpRequestHeadersHook(flow=<HTTPFlow\r\nclient:56525:   << HttpRequestHeadersHook(flow=<HTTPFlow\r\nclient:56525:       << Receive(RequestData(stream_id=1, data=b'<?xml version=\"1.0\" encoding=\"UTF-8\"?><request protocol=\"3.0\" updater=\"Omaha\" updaterversion=\"1.3.36.131\" shell_version=\"1.3.33.23\" ismachine=\"1\" sessionid=\"{C1CD9357-04FD-463F-B7B2-90F1C4196088}\" installsource=\"core\" requestid=\"{4186A5BB-E2A7-4DAD-A6C0-F9B466FD9BE2}\" dedup=\"cr\" domainjoined=\"1\"><hw physmemory=\"16\" sse=\"1\" sse2=\"1\" sse3=\"1\" ssse3=\"1\" sse41=\"1\" sse42=\"1\" avx=\"1\"/><os platform=\"win\" version=\"10.0.17763.2803\" sp=\"\" arch=\"x64\"/><app appid=\"{430FD4D0-B7…\r\nclient:56525:       >! RequestData(stream_id=1, data=b'<?xml version=\"1.0\" encoding=\"UTF-8\"?><request protocol=\"3.0\" updater=\"Omaha\" updaterversion=\"1.3.36.131\" shell_version=\"1.3.33.23\" ismachine=\"1\" sessionid=\"{C1CD9357-04FD-463F-B7B2-90F1C4196088}\" installsource=\"core\" requestid=\"{4186A5BB-E2A7-4DAD-A6C0-F9B466FD9BE2}\" dedup=\"cr\" domainjoined=\"1\"><hw physmemory=\"16\" sse=\"1\" sse2=\"1\" sse3=\"1\" ssse3=\"1\" sse41=\"1\" sse42=\"1\" avx=\"1\"/><os platform=\"win\" version=\"10.0.17763.2803\" sp=\"\" arch=\"x64\"/><app appid=\"{430FD4D0-B729-4F61-…\r\nclient:56525:       << Receive(RequestEndOfMessage(stream_id=1))\r\nclient:56525:       >! RequestEndOfMessage(stream_id=1)\r\nclient:56525:   >> Reply(HttpRequestHeadersHook(flow=<HTTPFlow\r\n    request = Request(POST update.googleapis.com:80/service/update2?cup2key=11:wxmttcgP9iRANi9a-4WYiWFLnsryrfX5Aeuh_Arsw-I&cup2hreq=7f0ce376b49efa8e11d035b9a948cea00c89101116cc63425ac80cde33ee5eb3)\r\n    client_conn = Client(client:56525, state=open)\r\n    server_conn = Server(<no address>, state=closed)>), None)\r\nclient:56525:     >> Reply(HttpRequestHeadersHook(flow=<HTTPFlow\r\nclient:56525:       >> Reply(HttpRequestHeadersHook(flow=<HTTPFlow\r\nclient:56525:       << GetHttpConnection(address=('update.googleapis.com', 80), tls=False, via=None)\r\nclient:56525:       >> Start({})\r\nclient:56525:       << OpenConnection({'connection': Server({'id': '…2be78f', 'address': ('update.googleapis.com', 80), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\nclient:56525:     << OpenConnection({'connection': Server({'id': '…2be78f', 'address': ('update.googleapis.com', 80), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\nclient:56525:   << OpenConnection({'connection': Server({'id': '…2be78f', 'address': ('update.googleapis.com', 80), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})})\r\nclient:56525: server connection to update.googleapis.com:80 killed before connect: error\r\nclient:56525:   >> Reply(OpenConnection({'connection': Server({'id': '…2be78f', 'address': ('update.googleapis.com', 80), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56525:     >> Reply(OpenConnection({'connection': Server({'id': '…2be78f', 'address': ('update.googleapis.com', 80), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56525:       >> Reply(OpenConnection({'connection': Server({'id': '…2be78f', 'address': ('update.googleapis.com', 80), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'})}), 'Connection killed: error')\r\nclient:56525:       << RegisterHttpConnection(connection=Server({'id': '…2be78f', 'address': ('update.googleapis.com', 80), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'error': 'error'}), err='Connection killed: error')\r\nclient:56525:       >> GetHttpConnectionCompleted(command=GetHttpConnection(address=('update.googleapis.com', 80), tls=False, via=None), reply=(None, 'Connection killed: error'))\r\nclient:56525:       << Send(ResponseProtocolError(stream_id=1, message='Connection killed: error', code=502))\r\nclient:56525:       >> ResponseProtocolError(stream_id=1, message='Connection killed: error', code=502)\r\nclient:56525:       << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\nServer: mitmproxy 8.1.0\\r\\nConnection: close\\r\\nContent-Type: text/html\\r\\ncontent-length: 144\\r\\n\\r\\n<html>\\n<head>\\n    <title>502 Bad Gateway</title>\\n</head>\\n<body>\\n    <h1>502 Bad Gateway</h1>\\n    <p>Connection killed: error</p>\\n</body>\\n</html>')\r\nclient:56525:     << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\nServer: mitmproxy 8.1.0\\r\\nConnection: close\\r\\nContent-Type: text/html\\r\\ncontent-length: 144\\r\\n\\r\\n<html>\\n<head>\\n    <title>502 Bad Gateway</title>\\n</head>\\n<body>\\n    <h1>502 Bad Gateway</h1>\\n    <…\r\nclient:56525:   << SendData(client, b'HTTP/1.1 502 Bad Gateway\\r\\nServer: mitmproxy 8.1.0\\r\\nConnection: close\\r\\nContent-Type: text/html\\r\\ncontent-length: 144\\r\\n\\r\\n<html>\\n<head>\\n    <title>502 Bad Gateway</title>\\n</head>\\n<body>\\n    <h1>502 Bad Gateway</h1>\\n    <…\r\nclient:56525:       << CloseConnection({'connection': Client({'id': '…943818', 'peername': ('client', 56525), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247276.2769399, 'state': <ConnectionState.OPEN: 3>, 'transport_protocol': 'tcp'}), 'half_close': False})\r\nclient:56525:     << CloseConnection({'connection': Client({'id': '…943818', 'peername': ('client', 56525), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247276.2769399, 'state': <ConnectionState.OPEN: 3>, 'transport_protocol': 'tcp'}), 'half_close': False…\r\nclient:56525:   << CloseConnection({'connection': Client({'id': '…943818', 'peername': ('client', 56525), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247276.2769399, 'state': <ConnectionState.OPEN: 3>, 'transport_protocol': 'tcp'}), 'half_close': False…\r\nclient:56525:       << DropStream(stream_id=1)\r\nclient:56525:       !> RequestData(stream_id=1, data=b'<?xml version=\"1.0\" encoding=\"UTF-8\"?><request protocol=\"3.0\" updater=\"Omaha\" updaterversion=\"1.3.36.131\" shell_version=\"1.3.33.23\" ismachine=\"1\" sessionid=\"{C1CD9357-04FD-463F-B7B2-90F1C4196088}\" installsource=\"core\" requestid=\"{4186A5BB-E2A7-4DAD-A6C0-F9B466FD9BE2}\" dedup=\"cr\" domainjoined=\"1\"><hw physmemory=\"16\" sse=\"1\" sse2=\"1\" sse3=\"1\" ssse3=\"1\" sse41=\"1\" sse42=\"1\" avx=\"1\"/><os platform=\"win\" version=\"10.0.17763.2803\" sp=\"\" arch=\"x64\"/><app appid=\"{430FD4D0-B729-4F61-…\r\nclient:56525: mitmproxy has crashed!\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.9/site-packages/mitmproxy/proxy/server.py\", line 325, in server_event\r\n    for command in layer_commands:\r\n  File \"/usr/local/lib/python3.9/site-packages/mitmproxy/proxy/layer.py\", line 167, in handle_event\r\n    command = next(command_generator)\r\n  File \"/usr/local/lib/python3.9/site-packages/mitmproxy/proxy/layer.py\", line 256, in handle_event\r\n    yield from self._handle(event)\r\n  File \"/usr/local/lib/python3.9/site-packages/mitmproxy/proxy/layer.py\", line 167, in handle_event\r\n    command = next(command_generator)\r\n  File \"/usr/local/lib/python3.9/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 846, in _handle_event\r\n    yield from self.event_to_child(stream, event)\r\n  File \"/usr/local/lib/python3.9/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 927, in event_to_child\r\n    yield from self.register_connection(command)\r\n  File \"/usr/local/lib/python3.9/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 1036, in register_connection\r\n    yield from self.event_to_child(\r\n  File \"/usr/local/lib/python3.9/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 899, in event_to_child\r\n    for command in child.handle_event(event):\r\n  File \"/usr/local/lib/python3.9/site-packages/mitmproxy/proxy/layer.py\", line 128, in handle_event\r\n    yield from self.__continue(event)\r\n  File \"/usr/local/lib/python3.9/site-packages/mitmproxy/proxy/layer.py\", line 226, in __continue\r\n    yield from self.__process(command_generator)\r\n  File \"/usr/local/lib/python3.9/site-packages/mitmproxy/proxy/layer.py\", line 182, in __process\r\n    command = command_generator.send(send)\r\n  File \"/usr/local/lib/python3.9/site-packages/mitmproxy/proxy/layers/http/__init__.py\", line 162, in _handle_event\r\n    yield from self.client_state(event)\r\n  File \"/usr/local/lib/python3.9/site-packages/mitmproxy/proxy/utils.py\", line 26, in _check_event_type\r\n    raise AssertionError(\r\nAssertionError: Unexpected event type at HttpStream.state_wait_for_request_headers: Expected RequestHeaders, got RequestData(stream_id=1, data=b'<?xml version=\"1.0\" encoding=\"UTF-8\"?><request protocol=\"3.0\" updater=\"Omaha\" updaterversion=\"1.3.36.131\" shell_version=\"1.3.33.23\" ismachine=\"1\" sessionid=\"{C1CD9357-04FD-463F-B7B2-90F1C4196088}\" installsource=\"core\" requestid=\"{4186A5BB-E2A7-4DAD-A6C0-F9B466FD9BE2}\" dedup=\"cr\" domainjoined=\"1\"><hw physmemory=\"16\" sse=\"1\" sse2=\"1\" sse3=\"1\" ssse3=\"1\" sse41=\"1\" sse42=\"1\" avx=\"1\"/><os platform=\"win\" version=\"10.0.17763.2803\" sp=\"\" arch=\"x64\"/><app appid=\"{430FD4D0-B729-4F61-AA34-91526481799D}\" version=\"1.3.36.131\" nextversion=\"\" lang=\"\" brand=\"GCEA\" client=\"\" installage=\"998\" installdate=\"5173\" iid=\"{4483C1D3-863E-BA71-E13F-8450247137E9}\" cohort=\"1:9co:\" cohortname=\"Everyone Else\"><updatecheck/><ping r=\"469\" rd=\"5174\" ping_freshness=\"{FB60B66D-C186-4DD3-8959-D7279452561E}\"/></app><app appid=\"{8A69D345-D564-463C-AFF1-A69D9E530F96}\" version=\"101.0.4951.67\" nextversion=\"\" ap=\"x64-stable-statsdef_0\" lang=\"\" brand=\"GCEA\" client=\"\" installage=\"998\" installdate=\"5173\" iid=\"{4483C1D3-863E-BA71-E13F-8450247137E9}\"><updatecheck/><ping active=\"1\" a=\"469\" r=\"469\" ad=\"5174\" rd=\"5174\" ping_freshness=\"{AB2C297F-F06C-42F2-A2C0-C9A97365DDA7}\"/></app></request>').\r\n\r\nclient:56525:   >> ConnectionClosed(connection=Client({'id': '…943818', 'peername': ('client', 56525), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247276.2769399, 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'}))\r\nclient:56525:     >> ConnectionClosed(connection=Client({'id': '…943818', 'peername': ('client', 56525), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247276.2769399, 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'}))\r\nclient:56525:       >> ConnectionClosed(connection=Client({'id': '…943818', 'peername': ('client', 56525), 'sockname': ('proxy', 3128), 'timestamp_start': 1655247276.2769399, 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'}))\r\nclient:56525:       << Receive(RequestProtocolError(stream_id=1, message='Client disconnected.', code=499))\r\nclient:56525: client disconnect\r\nclient:56525: closing transports...\r\nclient:56525: transports closed!\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1155766529/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kendrickluong","id":13299791,"node_id":"MDQ6VXNlcjEzMjk5Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/13299791?v=4","gravatar_id":"","url":"https://api.github.com/users/kendrickluong","html_url":"https://github.com/kendrickluong","followers_url":"https://api.github.com/users/kendrickluong/followers","following_url":"https://api.github.com/users/kendrickluong/following{/other_user}","gists_url":"https://api.github.com/users/kendrickluong/gists{/gist_id}","starred_url":"https://api.github.com/users/kendrickluong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kendrickluong/subscriptions","organizations_url":"https://api.github.com/users/kendrickluong/orgs","repos_url":"https://api.github.com/users/kendrickluong/repos","events_url":"https://api.github.com/users/kendrickluong/events{/privacy}","received_events_url":"https://api.github.com/users/kendrickluong/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1164036943","html_url":"https://github.com/mitmproxy/mitmproxy/issues/5383#issuecomment-1164036943","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5383","id":1164036943,"node_id":"IC_kwDOAAfumM5FYctP","user":{"login":"daMatz","id":9104870,"node_id":"MDQ6VXNlcjkxMDQ4NzA=","avatar_url":"https://avatars.githubusercontent.com/u/9104870?v=4","gravatar_id":"","url":"https://api.github.com/users/daMatz","html_url":"https://github.com/daMatz","followers_url":"https://api.github.com/users/daMatz/followers","following_url":"https://api.github.com/users/daMatz/following{/other_user}","gists_url":"https://api.github.com/users/daMatz/gists{/gist_id}","starred_url":"https://api.github.com/users/daMatz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daMatz/subscriptions","organizations_url":"https://api.github.com/users/daMatz/orgs","repos_url":"https://api.github.com/users/daMatz/repos","events_url":"https://api.github.com/users/daMatz/events{/privacy}","received_events_url":"https://api.github.com/users/daMatz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-23T07:10:30Z","updated_at":"2022-06-23T07:10:30Z","body":"@kendrickluong did you make progress on this front 🙂?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1164036943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"daMatz","id":9104870,"node_id":"MDQ6VXNlcjkxMDQ4NzA=","avatar_url":"https://avatars.githubusercontent.com/u/9104870?v=4","gravatar_id":"","url":"https://api.github.com/users/daMatz","html_url":"https://github.com/daMatz","followers_url":"https://api.github.com/users/daMatz/followers","following_url":"https://api.github.com/users/daMatz/following{/other_user}","gists_url":"https://api.github.com/users/daMatz/gists{/gist_id}","starred_url":"https://api.github.com/users/daMatz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daMatz/subscriptions","organizations_url":"https://api.github.com/users/daMatz/orgs","repos_url":"https://api.github.com/users/daMatz/repos","events_url":"https://api.github.com/users/daMatz/events{/privacy}","received_events_url":"https://api.github.com/users/daMatz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6863615723,"node_id":"MEE_lADOAAfumM5KoKtWzwAAAAGZGnbr","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/6863615723","actor":{"login":"kendrickluong","id":13299791,"node_id":"MDQ6VXNlcjEzMjk5Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/13299791?v=4","gravatar_id":"","url":"https://api.github.com/users/kendrickluong","html_url":"https://github.com/kendrickluong","followers_url":"https://api.github.com/users/kendrickluong/followers","following_url":"https://api.github.com/users/kendrickluong/following{/other_user}","gists_url":"https://api.github.com/users/kendrickluong/gists{/gist_id}","starred_url":"https://api.github.com/users/kendrickluong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kendrickluong/subscriptions","organizations_url":"https://api.github.com/users/kendrickluong/orgs","repos_url":"https://api.github.com/users/kendrickluong/repos","events_url":"https://api.github.com/users/kendrickluong/events{/privacy}","received_events_url":"https://api.github.com/users/kendrickluong/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-06-23T07:10:30Z","performed_via_github_app":null},{"id":6863615728,"node_id":"SE_lADOAAfumM5KoKtWzwAAAAGZGnbw","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/6863615728","actor":{"login":"kendrickluong","id":13299791,"node_id":"MDQ6VXNlcjEzMjk5Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/13299791?v=4","gravatar_id":"","url":"https://api.github.com/users/kendrickluong","html_url":"https://github.com/kendrickluong","followers_url":"https://api.github.com/users/kendrickluong/followers","following_url":"https://api.github.com/users/kendrickluong/following{/other_user}","gists_url":"https://api.github.com/users/kendrickluong/gists{/gist_id}","starred_url":"https://api.github.com/users/kendrickluong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kendrickluong/subscriptions","organizations_url":"https://api.github.com/users/kendrickluong/orgs","repos_url":"https://api.github.com/users/kendrickluong/repos","events_url":"https://api.github.com/users/kendrickluong/events{/privacy}","received_events_url":"https://api.github.com/users/kendrickluong/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-06-23T07:10:30Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1166685346","html_url":"https://github.com/mitmproxy/mitmproxy/issues/5383#issuecomment-1166685346","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5383","id":1166685346,"node_id":"IC_kwDOAAfumM5FijSi","user":{"login":"kendrickluong","id":13299791,"node_id":"MDQ6VXNlcjEzMjk5Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/13299791?v=4","gravatar_id":"","url":"https://api.github.com/users/kendrickluong","html_url":"https://github.com/kendrickluong","followers_url":"https://api.github.com/users/kendrickluong/followers","following_url":"https://api.github.com/users/kendrickluong/following{/other_user}","gists_url":"https://api.github.com/users/kendrickluong/gists{/gist_id}","starred_url":"https://api.github.com/users/kendrickluong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kendrickluong/subscriptions","organizations_url":"https://api.github.com/users/kendrickluong/orgs","repos_url":"https://api.github.com/users/kendrickluong/repos","events_url":"https://api.github.com/users/kendrickluong/events{/privacy}","received_events_url":"https://api.github.com/users/kendrickluong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-26T23:58:41Z","updated_at":"2022-06-26T23:58:41Z","body":"Nup haven't made any progress, was there any other logs i can get that would help?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1166685346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kendrickluong","id":13299791,"node_id":"MDQ6VXNlcjEzMjk5Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/13299791?v=4","gravatar_id":"","url":"https://api.github.com/users/kendrickluong","html_url":"https://github.com/kendrickluong","followers_url":"https://api.github.com/users/kendrickluong/followers","following_url":"https://api.github.com/users/kendrickluong/following{/other_user}","gists_url":"https://api.github.com/users/kendrickluong/gists{/gist_id}","starred_url":"https://api.github.com/users/kendrickluong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kendrickluong/subscriptions","organizations_url":"https://api.github.com/users/kendrickluong/orgs","repos_url":"https://api.github.com/users/kendrickluong/repos","events_url":"https://api.github.com/users/kendrickluong/events{/privacy}","received_events_url":"https://api.github.com/users/kendrickluong/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6894280996,"node_id":"REFE_lADOAAfumM5KoKtWzwAAAAGa7mEk","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/6894280996","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3a2b02b420c6fba2b90568fc3e4081cf1ccb2739","commit_url":"https://api.github.com/repos/mitmproxy/mitmproxy/commits/3a2b02b420c6fba2b90568fc3e4081cf1ccb2739","created_at":"2022-06-28T13:54:11Z","performed_via_github_app":null},{"id":6894335707,"node_id":"CE_lADOAAfumM5KoKtWzwAAAAGa7zbb","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/6894335707","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"3a2b02b420c6fba2b90568fc3e4081cf1ccb2739","commit_url":"https://api.github.com/repos/mitmproxy/mitmproxy/commits/3a2b02b420c6fba2b90568fc3e4081cf1ccb2739","created_at":"2022-06-28T14:00:06Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1173187511","html_url":"https://github.com/mitmproxy/mitmproxy/issues/5383#issuecomment-1173187511","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5383","id":1173187511,"node_id":"IC_kwDOAAfumM5F7Wu3","user":{"login":"kendrickluong","id":13299791,"node_id":"MDQ6VXNlcjEzMjk5Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/13299791?v=4","gravatar_id":"","url":"https://api.github.com/users/kendrickluong","html_url":"https://github.com/kendrickluong","followers_url":"https://api.github.com/users/kendrickluong/followers","following_url":"https://api.github.com/users/kendrickluong/following{/other_user}","gists_url":"https://api.github.com/users/kendrickluong/gists{/gist_id}","starred_url":"https://api.github.com/users/kendrickluong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kendrickluong/subscriptions","organizations_url":"https://api.github.com/users/kendrickluong/orgs","repos_url":"https://api.github.com/users/kendrickluong/repos","events_url":"https://api.github.com/users/kendrickluong/events{/privacy}","received_events_url":"https://api.github.com/users/kendrickluong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-03T23:03:04Z","updated_at":"2022-07-03T23:03:04Z","body":"Awesome, changes working well for me!\r\nThanks","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1173187511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kendrickluong","id":13299791,"node_id":"MDQ6VXNlcjEzMjk5Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/13299791?v=4","gravatar_id":"","url":"https://api.github.com/users/kendrickluong","html_url":"https://github.com/kendrickluong","followers_url":"https://api.github.com/users/kendrickluong/followers","following_url":"https://api.github.com/users/kendrickluong/following{/other_user}","gists_url":"https://api.github.com/users/kendrickluong/gists{/gist_id}","starred_url":"https://api.github.com/users/kendrickluong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kendrickluong/subscriptions","organizations_url":"https://api.github.com/users/kendrickluong/orgs","repos_url":"https://api.github.com/users/kendrickluong/repos","events_url":"https://api.github.com/users/kendrickluong/events{/privacy}","received_events_url":"https://api.github.com/users/kendrickluong/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1180039329","html_url":"https://github.com/mitmproxy/mitmproxy/issues/5383#issuecomment-1180039329","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5383","id":1180039329,"node_id":"IC_kwDOAAfumM5GVfih","user":{"login":"daMatz","id":9104870,"node_id":"MDQ6VXNlcjkxMDQ4NzA=","avatar_url":"https://avatars.githubusercontent.com/u/9104870?v=4","gravatar_id":"","url":"https://api.github.com/users/daMatz","html_url":"https://github.com/daMatz","followers_url":"https://api.github.com/users/daMatz/followers","following_url":"https://api.github.com/users/daMatz/following{/other_user}","gists_url":"https://api.github.com/users/daMatz/gists{/gist_id}","starred_url":"https://api.github.com/users/daMatz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daMatz/subscriptions","organizations_url":"https://api.github.com/users/daMatz/orgs","repos_url":"https://api.github.com/users/daMatz/repos","events_url":"https://api.github.com/users/daMatz/events{/privacy}","received_events_url":"https://api.github.com/users/daMatz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-11T07:03:23Z","updated_at":"2022-07-11T07:03:23Z","body":"Great, same for me so far. Thank you 🙌 ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1180039329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"daMatz","id":9104870,"node_id":"MDQ6VXNlcjkxMDQ4NzA=","avatar_url":"https://avatars.githubusercontent.com/u/9104870?v=4","gravatar_id":"","url":"https://api.github.com/users/daMatz","html_url":"https://github.com/daMatz","followers_url":"https://api.github.com/users/daMatz/followers","following_url":"https://api.github.com/users/daMatz/following{/other_user}","gists_url":"https://api.github.com/users/daMatz/gists{/gist_id}","starred_url":"https://api.github.com/users/daMatz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daMatz/subscriptions","organizations_url":"https://api.github.com/users/daMatz/orgs","repos_url":"https://api.github.com/users/daMatz/repos","events_url":"https://api.github.com/users/daMatz/events{/privacy}","received_events_url":"https://api.github.com/users/daMatz/received_events","type":"User","user_view_type":"public","site_admin":false}}]