[{"id":4502978945,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ1MDI5Nzg5NDU=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4502978945","actor":{"login":"johndoe422","id":30309651,"node_id":"MDQ6VXNlcjMwMzA5NjUx","avatar_url":"https://avatars.githubusercontent.com/u/30309651?v=4","gravatar_id":"","url":"https://api.github.com/users/johndoe422","html_url":"https://github.com/johndoe422","followers_url":"https://api.github.com/users/johndoe422/followers","following_url":"https://api.github.com/users/johndoe422/following{/other_user}","gists_url":"https://api.github.com/users/johndoe422/gists{/gist_id}","starred_url":"https://api.github.com/users/johndoe422/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johndoe422/subscriptions","organizations_url":"https://api.github.com/users/johndoe422/orgs","repos_url":"https://api.github.com/users/johndoe422/repos","events_url":"https://api.github.com/users/johndoe422/events{/privacy}","received_events_url":"https://api.github.com/users/johndoe422/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-03-24T16:23:48Z","label":{"name":"kind/triage","color":"006b75"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/806003064","html_url":"https://github.com/mitmproxy/mitmproxy/issues/4525#issuecomment-806003064","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4525","id":806003064,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNjAwMzA2NA==","user":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-24T17:08:58Z","updated_at":"2021-03-24T17:08:58Z","body":"Thanks for raising this! This is an issue if you are running mitmproxy with a custom cert passphrase passed via the command line on a system where an adversary may be able to access the process table. To avoid this, you can specify cert_passphrase in `config.yaml` (https://docs.mitmproxy.org/stable/concepts-options/) or use an unencrypted certificate.\r\n\r\nWhat alternative do you suggest? Rewriting the command line args increases complexity while not solving the issue but only making it slightly harder to exploit. Passing secrets as environment variables introduces its own set of issues. The only realistic options I can think of are:\r\n\r\n 1. We can change the option to read a file containing the password, but that's really quite cumbersome and brings up the question why you don't decrypt the certificate in the first place. It also works really badly for people who use `config.yaml`.\r\n 2. We can add a note in the option description.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/806003064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/806055140","html_url":"https://github.com/mitmproxy/mitmproxy/issues/4525#issuecomment-806055140","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4525","id":806055140,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNjA1NTE0MA==","user":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-24T18:22:32Z","updated_at":"2021-03-25T07:31:00Z","body":"I don't know how easily this could be done with the mitmproxy architecture and it's most likely not worth the effort for the gains, but couldn't mitmproxy ask for the password? So if the argument is given it will say \"Please enter passphrase:\" and only actually start after that.\r\n\r\n> This is a security issue in my opinion. Some programs effectively hide such sensitive inputs that are given as command-line arguments. They do this by rewriting the command line args in an obfuscated manner and by rerunning the program by itself. In this way, the sensitive data that came along via command-line arguments will be visible for a split second, but that is still better than making them always visible as long as the program is running.\r\n\r\nWhat about `.bash_history` or an equivalent? In your (hypothetical) server scenario, does the malicious user has permissions to see _other users'_ processes but cannot read other users files? I'm honestly not sure how this is handled in Linux.\r\n\r\nEdit:\r\n\r\n> will be visible for a split second\r\n\r\nThis sounds an awful lot like security by obscurity because it _feels_ more secure to a human. Can you link to some sources? I'm legit curious if and how this is actually done in the wild and what the threat model looks like.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/806055140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4525791499,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ1MjU3OTE0OTk=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4525791499","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8ffcee43547853a8ef2598cc6fbd160ad79634e7","commit_url":"https://api.github.com/repos/mhils/mitmproxy/commits/8ffcee43547853a8ef2598cc6fbd160ad79634e7","created_at":"2021-03-30T07:47:28Z","performed_via_github_app":null},{"id":4525831557,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ1MjU4MzE1NTc=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4525831557","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"77a536edd29195e94b375f553aaaadb3f0867ea5","commit_url":"https://api.github.com/repos/mhils/mitmproxy/commits/77a536edd29195e94b375f553aaaadb3f0867ea5","created_at":"2021-03-30T07:55:24Z","performed_via_github_app":null},{"id":4525871713,"node_id":"MDExOkNsb3NlZEV2ZW50NDUyNTg3MTcxMw==","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4525871713","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"77a536edd29195e94b375f553aaaadb3f0867ea5","commit_url":"https://api.github.com/repos/mitmproxy/mitmproxy/commits/77a536edd29195e94b375f553aaaadb3f0867ea5","created_at":"2021-03-30T08:02:39Z","state_reason":null,"performed_via_github_app":null},{"id":4525871729,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ1MjU4NzE3Mjk=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4525871729","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0e8dd730bce7b77abd4f78cf5e86f93adae0db93","commit_url":"https://api.github.com/repos/mitmproxy/mitmproxy/commits/0e8dd730bce7b77abd4f78cf5e86f93adae0db93","created_at":"2021-03-30T08:02:39Z","performed_via_github_app":null}]