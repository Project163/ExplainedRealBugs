[{"id":9325816656,"node_id":"LE_lADOAAfumM5mvLlSzwAAAAIr3KtQ","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/9325816656","actor":{"login":"jciaffi","id":62593000,"node_id":"MDQ6VXNlcjYyNTkzMDAw","avatar_url":"https://avatars.githubusercontent.com/u/62593000?v=4","gravatar_id":"","url":"https://api.github.com/users/jciaffi","html_url":"https://github.com/jciaffi","followers_url":"https://api.github.com/users/jciaffi/followers","following_url":"https://api.github.com/users/jciaffi/following{/other_user}","gists_url":"https://api.github.com/users/jciaffi/gists{/gist_id}","starred_url":"https://api.github.com/users/jciaffi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jciaffi/subscriptions","organizations_url":"https://api.github.com/users/jciaffi/orgs","repos_url":"https://api.github.com/users/jciaffi/repos","events_url":"https://api.github.com/users/jciaffi/events{/privacy}","received_events_url":"https://api.github.com/users/jciaffi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-05-24T10:13:14Z","label":{"name":"kind/triage","color":"006b75"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1560841614","html_url":"https://github.com/mitmproxy/mitmproxy/issues/6143#issuecomment-1560841614","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/6143","id":1560841614,"node_id":"IC_kwDOAAfumM5dCI2O","user":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-24T10:15:16Z","updated_at":"2023-05-24T10:15:16Z","body":"Can you reproduce this on the main branch?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1560841614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1560971050","html_url":"https://github.com/mitmproxy/mitmproxy/issues/6143#issuecomment-1560971050","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/6143","id":1560971050,"node_id":"IC_kwDOAAfumM5dCocq","user":{"login":"jciaffi","id":62593000,"node_id":"MDQ6VXNlcjYyNTkzMDAw","avatar_url":"https://avatars.githubusercontent.com/u/62593000?v=4","gravatar_id":"","url":"https://api.github.com/users/jciaffi","html_url":"https://github.com/jciaffi","followers_url":"https://api.github.com/users/jciaffi/followers","following_url":"https://api.github.com/users/jciaffi/following{/other_user}","gists_url":"https://api.github.com/users/jciaffi/gists{/gist_id}","starred_url":"https://api.github.com/users/jciaffi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jciaffi/subscriptions","organizations_url":"https://api.github.com/users/jciaffi/orgs","repos_url":"https://api.github.com/users/jciaffi/repos","events_url":"https://api.github.com/users/jciaffi/events{/privacy}","received_events_url":"https://api.github.com/users/jciaffi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-24T11:47:30Z","updated_at":"2023-05-24T11:47:30Z","body":"Yes I can reproduce it on the main branch.\r\nI forgot an important fact : problem happens only one out of two times. Page loads correctly in the browser, but when I reload it fails. Or I click on a link, it fails but when I reload it loads correctly.\r\nThank you.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1560971050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jciaffi","id":62593000,"node_id":"MDQ6VXNlcjYyNTkzMDAw","avatar_url":"https://avatars.githubusercontent.com/u/62593000?v=4","gravatar_id":"","url":"https://api.github.com/users/jciaffi","html_url":"https://github.com/jciaffi","followers_url":"https://api.github.com/users/jciaffi/followers","following_url":"https://api.github.com/users/jciaffi/following{/other_user}","gists_url":"https://api.github.com/users/jciaffi/gists{/gist_id}","starred_url":"https://api.github.com/users/jciaffi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jciaffi/subscriptions","organizations_url":"https://api.github.com/users/jciaffi/orgs","repos_url":"https://api.github.com/users/jciaffi/repos","events_url":"https://api.github.com/users/jciaffi/events{/privacy}","received_events_url":"https://api.github.com/users/jciaffi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1566182926","html_url":"https://github.com/mitmproxy/mitmproxy/issues/6143#issuecomment-1566182926","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/6143","id":1566182926,"node_id":"IC_kwDOAAfumM5dWg4O","user":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-28T15:56:31Z","updated_at":"2023-05-28T15:56:31Z","body":"Thanks, that was the missing bit! Here's a simplified reproducer:\r\n```\r\n$ mitmdump --mode reverse:https://www.chimieparistech.psl.eu@8081 --set proxy_debug -vvv\r\n$ curl https://localhost:8081/robots.txt https://localhost:8081/robots.txt -kq --rate 6/m\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1566182926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9362508533,"node_id":"UNLE_lADOAAfumM5mvLlSzwAAAAIuDIr1","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/9362508533","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2023-05-28T15:56:40Z","label":{"name":"kind/triage","color":"006b75"},"performed_via_github_app":null},{"id":9362508534,"node_id":"LE_lADOAAfumM5mvLlSzwAAAAIuDIr2","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/9362508534","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-05-28T15:56:40Z","label":{"name":"kind/bug","color":"d93f0b"},"performed_via_github_app":null},{"id":9362508536,"node_id":"LE_lADOAAfumM5mvLlSzwAAAAIuDIr4","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/9362508536","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-05-28T15:56:40Z","label":{"name":"area/protocols","color":"fef2c0"},"performed_via_github_app":null},{"id":9362508537,"node_id":"LE_lADOAAfumM5mvLlSzwAAAAIuDIr5","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/9362508537","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-05-28T15:56:40Z","label":{"name":"prio/high","color":"B3193B"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1566184984","html_url":"https://github.com/mitmproxy/mitmproxy/issues/6143#issuecomment-1566184984","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/6143","id":1566184984,"node_id":"IC_kwDOAAfumM5dWhYY","user":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-28T16:04:52Z","updated_at":"2023-05-28T16:04:52Z","body":"The problem is in this snippet here - not sure yet what's the best way to fix it:\r\nhttps://github.com/mitmproxy/mitmproxy/blob/ab9429e3f6f831290f2a104a25b084f3f25b6452/mitmproxy/proxy/layers/http/__init__.py#L1040-L1046","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1566184984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9362598859,"node_id":"REFE_lADOAAfumM5mvLlSzwAAAAIuDevL","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/9362598859","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d7d394f1319f124acd6f6a7472a5e4f6aee942b8","commit_url":"https://api.github.com/repos/mhils/mitmproxy/commits/d7d394f1319f124acd6f6a7472a5e4f6aee942b8","created_at":"2023-05-28T16:28:30Z","performed_via_github_app":null},{"actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-28T16:28:44Z","updated_at":"2023-05-28T16:28:44Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/6148","repository_url":"https://api.github.com/repos/mitmproxy/mitmproxy","labels_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/6148/labels{/name}","comments_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/6148/comments","events_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/6148/events","html_url":"https://github.com/mitmproxy/mitmproxy/pull/6148","id":1729554202,"node_id":"PR_kwDOAAfumM5RiucJ","number":6148,"title":"Re-use SNI in reverse proxy mode if the original connection was torn down","user":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-05-28T16:28:44Z","updated_at":"2023-05-28T16:35:35Z","closed_at":"2023-05-28T16:35:34Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":519832,"node_id":"MDEwOlJlcG9zaXRvcnk1MTk4MzI=","name":"mitmproxy","full_name":"mitmproxy/mitmproxy","private":false,"owner":{"login":"mitmproxy","id":4652787,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ2NTI3ODc=","avatar_url":"https://avatars.githubusercontent.com/u/4652787?v=4","gravatar_id":"","url":"https://api.github.com/users/mitmproxy","html_url":"https://github.com/mitmproxy","followers_url":"https://api.github.com/users/mitmproxy/followers","following_url":"https://api.github.com/users/mitmproxy/following{/other_user}","gists_url":"https://api.github.com/users/mitmproxy/gists{/gist_id}","starred_url":"https://api.github.com/users/mitmproxy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitmproxy/subscriptions","organizations_url":"https://api.github.com/users/mitmproxy/orgs","repos_url":"https://api.github.com/users/mitmproxy/repos","events_url":"https://api.github.com/users/mitmproxy/events{/privacy}","received_events_url":"https://api.github.com/users/mitmproxy/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/mitmproxy/mitmproxy","description":"An interactive TLS-capable intercepting HTTP proxy for penetration testers and software developers.","fork":false,"url":"https://api.github.com/repos/mitmproxy/mitmproxy","forks_url":"https://api.github.com/repos/mitmproxy/mitmproxy/forks","keys_url":"https://api.github.com/repos/mitmproxy/mitmproxy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mitmproxy/mitmproxy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mitmproxy/mitmproxy/teams","hooks_url":"https://api.github.com/repos/mitmproxy/mitmproxy/hooks","issue_events_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events{/number}","events_url":"https://api.github.com/repos/mitmproxy/mitmproxy/events","assignees_url":"https://api.github.com/repos/mitmproxy/mitmproxy/assignees{/user}","branches_url":"https://api.github.com/repos/mitmproxy/mitmproxy/branches{/branch}","tags_url":"https://api.github.com/repos/mitmproxy/mitmproxy/tags","blobs_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/refs{/sha}","trees_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mitmproxy/mitmproxy/statuses/{sha}","languages_url":"https://api.github.com/repos/mitmproxy/mitmproxy/languages","stargazers_url":"https://api.github.com/repos/mitmproxy/mitmproxy/stargazers","contributors_url":"https://api.github.com/repos/mitmproxy/mitmproxy/contributors","subscribers_url":"https://api.github.com/repos/mitmproxy/mitmproxy/subscribers","subscription_url":"https://api.github.com/repos/mitmproxy/mitmproxy/subscription","commits_url":"https://api.github.com/repos/mitmproxy/mitmproxy/commits{/sha}","git_commits_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/commits{/sha}","comments_url":"https://api.github.com/repos/mitmproxy/mitmproxy/comments{/number}","issue_comment_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments{/number}","contents_url":"https://api.github.com/repos/mitmproxy/mitmproxy/contents/{+path}","compare_url":"https://api.github.com/repos/mitmproxy/mitmproxy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mitmproxy/mitmproxy/merges","archive_url":"https://api.github.com/repos/mitmproxy/mitmproxy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mitmproxy/mitmproxy/downloads","issues_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues{/number}","pulls_url":"https://api.github.com/repos/mitmproxy/mitmproxy/pulls{/number}","milestones_url":"https://api.github.com/repos/mitmproxy/mitmproxy/milestones{/number}","notifications_url":"https://api.github.com/repos/mitmproxy/mitmproxy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mitmproxy/mitmproxy/labels{/name}","releases_url":"https://api.github.com/repos/mitmproxy/mitmproxy/releases{/id}","deployments_url":"https://api.github.com/repos/mitmproxy/mitmproxy/deployments","created_at":"2010-02-16T04:10:13Z","updated_at":"2025-11-09T17:55:49Z","pushed_at":"2025-11-09T14:36:54Z","git_url":"git://github.com/mitmproxy/mitmproxy.git","ssh_url":"git@github.com:mitmproxy/mitmproxy.git","clone_url":"https://github.com/mitmproxy/mitmproxy.git","svn_url":"https://github.com/mitmproxy/mitmproxy","homepage":"https://mitmproxy.org","size":67124,"stargazers_count":41160,"watchers_count":41160,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":4359,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":387,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["debugging","http","http2","man-in-the-middle","mitmproxy","proxy","python","security","ssl","tls","websocket"],"visibility":"public","forks":4359,"open_issues":387,"watchers":41160,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/pulls/6148","html_url":"https://github.com/mitmproxy/mitmproxy/pull/6148","diff_url":"https://github.com/mitmproxy/mitmproxy/pull/6148.diff","patch_url":"https://github.com/mitmproxy/mitmproxy/pull/6148.patch","merged_at":"2023-05-28T16:35:34Z"},"body":"fix #6143","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/6148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/6148/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":9362612722,"node_id":"CE_lADOAAfumM5mvLlSzwAAAAIuDiHy","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/9362612722","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2023-05-28T16:35:36Z","state_reason":null,"performed_via_github_app":null},{"id":9362612739,"node_id":"REFE_lADOAAfumM5mvLlSzwAAAAIuDiID","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/9362612739","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e0e46f453ce46a7c9cd30650ae4e394fc73a7dbb","commit_url":"https://api.github.com/repos/mitmproxy/mitmproxy/commits/e0e46f453ce46a7c9cd30650ae4e394fc73a7dbb","created_at":"2023-05-28T16:35:37Z","performed_via_github_app":null},{"id":9984394350,"node_id":"REFE_lADOAAfumM5mvLlSzwAAAAJTHcRu","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/9984394350","actor":{"login":"lasting-yang","id":13957779,"node_id":"MDQ6VXNlcjEzOTU3Nzc5","avatar_url":"https://avatars.githubusercontent.com/u/13957779?v=4","gravatar_id":"","url":"https://api.github.com/users/lasting-yang","html_url":"https://github.com/lasting-yang","followers_url":"https://api.github.com/users/lasting-yang/followers","following_url":"https://api.github.com/users/lasting-yang/following{/other_user}","gists_url":"https://api.github.com/users/lasting-yang/gists{/gist_id}","starred_url":"https://api.github.com/users/lasting-yang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lasting-yang/subscriptions","organizations_url":"https://api.github.com/users/lasting-yang/orgs","repos_url":"https://api.github.com/users/lasting-yang/repos","events_url":"https://api.github.com/users/lasting-yang/events{/privacy}","received_events_url":"https://api.github.com/users/lasting-yang/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"71baf18c0731f27c7879b3a9228ef35207216adc","commit_url":"https://api.github.com/repos/lasting-yang/mitmproxy/commits/71baf18c0731f27c7879b3a9228ef35207216adc","created_at":"2023-08-02T07:11:34Z","performed_via_github_app":null},{"actor":{"login":"deliciouslytyped","id":47436522,"node_id":"MDQ6VXNlcjQ3NDM2NTIy","avatar_url":"https://avatars.githubusercontent.com/u/47436522?v=4","gravatar_id":"","url":"https://api.github.com/users/deliciouslytyped","html_url":"https://github.com/deliciouslytyped","followers_url":"https://api.github.com/users/deliciouslytyped/followers","following_url":"https://api.github.com/users/deliciouslytyped/following{/other_user}","gists_url":"https://api.github.com/users/deliciouslytyped/gists{/gist_id}","starred_url":"https://api.github.com/users/deliciouslytyped/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deliciouslytyped/subscriptions","organizations_url":"https://api.github.com/users/deliciouslytyped/orgs","repos_url":"https://api.github.com/users/deliciouslytyped/repos","events_url":"https://api.github.com/users/deliciouslytyped/events{/privacy}","received_events_url":"https://api.github.com/users/deliciouslytyped/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-04T19:53:19Z","updated_at":"2025-02-04T19:53:19Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/7534","repository_url":"https://api.github.com/repos/mitmproxy/mitmproxy","labels_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/7534/labels{/name}","comments_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/7534/comments","events_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/7534/events","html_url":"https://github.com/mitmproxy/mitmproxy/issues/7534","id":2831160233,"node_id":"I_kwDOAAfumM6owBOp","number":7534,"title":"Make users aware of `keep_host_header` in broken reverse proxy setups","user":{"login":"deliciouslytyped","id":47436522,"node_id":"MDQ6VXNlcjQ3NDM2NTIy","avatar_url":"https://avatars.githubusercontent.com/u/47436522?v=4","gravatar_id":"","url":"https://api.github.com/users/deliciouslytyped","html_url":"https://github.com/deliciouslytyped","followers_url":"https://api.github.com/users/deliciouslytyped/followers","following_url":"https://api.github.com/users/deliciouslytyped/following{/other_user}","gists_url":"https://api.github.com/users/deliciouslytyped/gists{/gist_id}","starred_url":"https://api.github.com/users/deliciouslytyped/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deliciouslytyped/subscriptions","organizations_url":"https://api.github.com/users/deliciouslytyped/orgs","repos_url":"https://api.github.com/users/deliciouslytyped/repos","events_url":"https://api.github.com/users/deliciouslytyped/events{/privacy}","received_events_url":"https://api.github.com/users/deliciouslytyped/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":174959532,"node_id":"MDU6TGFiZWwxNzQ5NTk1MzI=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/labels/help%20wanted","name":"help wanted","color":"fbca04","default":true,"description":null},{"id":429899720,"node_id":"MDU6TGFiZWw0Mjk4OTk3MjA=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/labels/area/addons","name":"area/addons","color":"fef2c0","default":false,"description":null},{"id":943316112,"node_id":"MDU6TGFiZWw5NDMzMTYxMTI=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/labels/kind/ux","name":"kind/ux","color":"0e8a16","default":false,"description":"User experience improvements"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2025-02-04T19:53:18Z","updated_at":"2025-02-04T23:52:27Z","closed_at":"2025-02-04T23:14:29Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":519832,"node_id":"MDEwOlJlcG9zaXRvcnk1MTk4MzI=","name":"mitmproxy","full_name":"mitmproxy/mitmproxy","private":false,"owner":{"login":"mitmproxy","id":4652787,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ2NTI3ODc=","avatar_url":"https://avatars.githubusercontent.com/u/4652787?v=4","gravatar_id":"","url":"https://api.github.com/users/mitmproxy","html_url":"https://github.com/mitmproxy","followers_url":"https://api.github.com/users/mitmproxy/followers","following_url":"https://api.github.com/users/mitmproxy/following{/other_user}","gists_url":"https://api.github.com/users/mitmproxy/gists{/gist_id}","starred_url":"https://api.github.com/users/mitmproxy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitmproxy/subscriptions","organizations_url":"https://api.github.com/users/mitmproxy/orgs","repos_url":"https://api.github.com/users/mitmproxy/repos","events_url":"https://api.github.com/users/mitmproxy/events{/privacy}","received_events_url":"https://api.github.com/users/mitmproxy/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/mitmproxy/mitmproxy","description":"An interactive TLS-capable intercepting HTTP proxy for penetration testers and software developers.","fork":false,"url":"https://api.github.com/repos/mitmproxy/mitmproxy","forks_url":"https://api.github.com/repos/mitmproxy/mitmproxy/forks","keys_url":"https://api.github.com/repos/mitmproxy/mitmproxy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mitmproxy/mitmproxy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mitmproxy/mitmproxy/teams","hooks_url":"https://api.github.com/repos/mitmproxy/mitmproxy/hooks","issue_events_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events{/number}","events_url":"https://api.github.com/repos/mitmproxy/mitmproxy/events","assignees_url":"https://api.github.com/repos/mitmproxy/mitmproxy/assignees{/user}","branches_url":"https://api.github.com/repos/mitmproxy/mitmproxy/branches{/branch}","tags_url":"https://api.github.com/repos/mitmproxy/mitmproxy/tags","blobs_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/refs{/sha}","trees_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mitmproxy/mitmproxy/statuses/{sha}","languages_url":"https://api.github.com/repos/mitmproxy/mitmproxy/languages","stargazers_url":"https://api.github.com/repos/mitmproxy/mitmproxy/stargazers","contributors_url":"https://api.github.com/repos/mitmproxy/mitmproxy/contributors","subscribers_url":"https://api.github.com/repos/mitmproxy/mitmproxy/subscribers","subscription_url":"https://api.github.com/repos/mitmproxy/mitmproxy/subscription","commits_url":"https://api.github.com/repos/mitmproxy/mitmproxy/commits{/sha}","git_commits_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/commits{/sha}","comments_url":"https://api.github.com/repos/mitmproxy/mitmproxy/comments{/number}","issue_comment_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments{/number}","contents_url":"https://api.github.com/repos/mitmproxy/mitmproxy/contents/{+path}","compare_url":"https://api.github.com/repos/mitmproxy/mitmproxy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mitmproxy/mitmproxy/merges","archive_url":"https://api.github.com/repos/mitmproxy/mitmproxy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mitmproxy/mitmproxy/downloads","issues_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues{/number}","pulls_url":"https://api.github.com/repos/mitmproxy/mitmproxy/pulls{/number}","milestones_url":"https://api.github.com/repos/mitmproxy/mitmproxy/milestones{/number}","notifications_url":"https://api.github.com/repos/mitmproxy/mitmproxy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mitmproxy/mitmproxy/labels{/name}","releases_url":"https://api.github.com/repos/mitmproxy/mitmproxy/releases{/id}","deployments_url":"https://api.github.com/repos/mitmproxy/mitmproxy/deployments","created_at":"2010-02-16T04:10:13Z","updated_at":"2025-11-09T17:55:49Z","pushed_at":"2025-11-09T14:36:54Z","git_url":"git://github.com/mitmproxy/mitmproxy.git","ssh_url":"git@github.com:mitmproxy/mitmproxy.git","clone_url":"https://github.com/mitmproxy/mitmproxy.git","svn_url":"https://github.com/mitmproxy/mitmproxy","homepage":"https://mitmproxy.org","size":67124,"stargazers_count":41160,"watchers_count":41160,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":4359,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":387,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["debugging","http","http2","man-in-the-middle","mitmproxy","proxy","python","security","ssl","tls","websocket"],"visibility":"public","forks":4359,"open_issues":387,"watchers":41160,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"#### Problem Description\nMitmproxy appears to use the wrong SNI when reverse proxying, leading to the TLS server not being able to determine the vhost/certificate to use. This is just what I run into, I haven't isolated the issue. I'm not sure if this is special curl behavior or mitmproxy is behaving incorrectly.\n\nThis can be a problem if using something like Caddy for TLS, and the curl client will give an error like `curl: (35) OpenSSL/3.0.13: error:0A000438:SSL routines::tlsv1 alert internal error` (the `tlsv1 alert internal error` is what seems to come from Caddy) (looks like `OpenSSL Error([('SSL routines', '', 'tlsv1 alert internal error')])  ` in mitmproxy)) if the Caddy server doesn't have a TLS certificate for the given SNI (because the SNI is wrong).\n\nThe only related issue I found so far is #6143 / #6148, but that's already in 10.0.0 and I'm running 11.0.2.\nThe symptoms seem to be very similar.\n\n#### Steps to reproduce the behavior:\nThis will reproduce the behavior, not the error.\n\n1. start a tls/http server; `ncat -v -k -l --ssl localhost 7777 -v -c 'printf \"HTTP/1.1 200 pls\\n\\nfoo\\n\"'`\n2. start mitmproxy; `mitmproxy -k --mode reverse:localhost:7777 -p 7776`\n3. start termshark to capture packets; `termshark -i lo \"port 7776 or port 7777\"`. \n4. make a request; `curl -v -k https://asdf:7777 --connect-to asdf:7777:localhost:7776 -H \"X-mytime: $(date)\"`\n\nIn this repro the request will complete successfully (albeit I dont know if this is strictly correct HTTP, but it's beside the point), but the packet capture will show:\n```\n 7      0.001968562      127.0.0.1     127.0.0.1     TLSv1     583        Client Hello (SNI=asdf)\n[+] Transmission Control Protocol, Src Port: 45158, Dst Port: 7776, Seq: 1, Ack: 1, Len: 517\n...\n 9      0.003887673      127.0.0.1     127.0.0.1     TLSv1.2   397        Client Hello (SNI=localhost)\n[+] Transmission Control Protocol, Src Port: 36468, Dst Port: 7777, Seq: 1, Ack: 1, Len: 331\n```\n\\- showing that\n1. curl connects to mitmproxy running on port 7776 with sni of asdf\n2. mitmproxy connects to the ncat server on port 7777 with sni of localhost\n\nHere's debug output of the beginning, I hope containing and showing the problem:\n```\n[nix-shell:~]# mitmdump --set proxy_debug -k --mode reverse:localhost:7777 -p 7776 -v\n[20:45:00.515] Initializing UDP server ...\n[20:45:00.515] UDP server listening on 0.0.0.0:7776 ...\n[20:45:00.516] UDP server successfully initialized.\n[20:45:00.516] Initializing UDP server ..\n[20:45:00.516] UDP server listening on [::]:7776 ...\n[20:45:00.517] UDP server successfully initialized.\n[20:45:00.517] reverse proxy to localhost:7777 listening at *:7776.\n[20:45:01.904][127.0.0.1:40786] client connect\n[20:45:01.904][127.0.0.1:40786]   >> Start({})\n[20:45:01.904][127.0.0.1:40786]   << OpenConnection({'connection': Server({'id': '…dee39b', 'address': ('localhost', 7777), 'sni': 'localhost'})})                                                                 [20:45:01.905][127.0.0.1:40786]   >! DataReceived(client, b\"\\x16\\x03\\x01\\x02\\x00\\x01\\x00\\x01\\xfc\\x03\\x03\\x0f^\\xba\\xec?...\\x00\")                \n[20:45:01.906][127.0.0.1:40786] server connect localhost:7777 (127.0.0.1:7777)\n[20:45:01.906][127.0.0.1:40786]   >> Reply(OpenConnection({'connection': Server({'id': '…dee39b', 'address': ('localhost', 7777), 'peername': ('127.0.0.1', 7777), 'sockname': ('127.0.0.1', 38496), 'state': <ConnectionState.OPEN: 3>, 'sni': 'localhost', 'timestamp_start': 1738698301.9051046, 'timestamp_tcp_setup': 1738698301.9065278})}), None)\n[20:45:01.906][127.0.0.1:40786]     >> Start({})\n[20:45:01.907][127.0.0.1:40786]   !> DataReceived(client, b\"\\x16\\...\\x00\")\n[20:45:01.907][127.0.0.1:40786]     >> DataReceived(client, b\"\\x16\\...x00\")\n[20:45:01.907][127.0.0.1:40786]     << NextLayerHook(data=NextLayer:None)\n[20:45:01.907][127.0.0.1:40786]   << NextLayerHook(data=NextLayer:None)\n[20:45:01.908][127.0.0.1:40786]   >> Reply(NextLayerHook(data=NextLayer:ServerTLSLayer(inactive 'localhost' None)), None)\n[20:45:01.908][127.0.0.1:40786]     >> Reply(NextLayerHook(data=NextLayer:ServerTLSLayer(inactive 'localhost' None)), None)\n[20:45:01.908][127.0.0.1:40786]     [nextlayer] ServerTLSLayer(inactive 'localhost' None)\n[20:45:01.908][127.0.0.1:40786]     >> Start({})\n[20:45:01.908][127.0.0.1:40786]       >> Start({})\n[20:45:01.908][127.0.0.1:40786]     >> DataReceived(client, b\"\\x16.…\n[20:45:01.909][127.0.0.1:40786]       << TlsClienthelloHook(data=ClientHelloData(context=Context(\n        Client({'id': '…1da7db', 'address': None, 'peername': ('127.0.0.1', 40786), 'sockname': ('127.0.0.1', 7776), 'state': <ConnectionState.OPEN: 3>, 'tls': True, 'alpn_offers': [b'h2', b'http/1.1'], 'sni': 'asdf', 'timestamp_start': 1738698301.9039338, 'proxy_mode': ProxyMode.parse('reverse:localhost:7777')}),\n        Server({'id': '…dee39b', 'address': ('localhost', 7777), 'peername': ('127.0.0.1', 7777), 'sockname': ('127.0.0.1', 38496), 'state': <ConnectionState.OPEN: 3>, 'tls': True, 'sni': 'localhost', 'timestamp_start': 1738698301.9051046, 'timestamp_tcp_setup': 1738698301.9065278}),\n        layers=[[ReverseProxy(state: handle_event), ServerTLSLayer(closed 'localhost' None), ClientTLSLayer(establishing 'asdf' None), HttpLayer(transparent, conns: 0)]]\n      ), client_hello=ClientHello(sni: asdf, alpn_protocols: [b'h2', b'http/1.1']), ignore_connection=False, establish_server_tls_first=False))\n```\n\n#### System Information\n```\nmitmproxy --version\nMitmproxy: 11.0.2\nPython:    3.12.8\nOpenSSL:   OpenSSL 3.3.2 3 Sep 2024\nPlatform:  Linux-6.8.4-3-pve-x86_64-with-glibc2.40\n```\n","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/7534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/7534/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]