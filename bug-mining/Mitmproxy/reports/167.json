{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/1096","repository_url":"https://api.github.com/repos/mitmproxy/mitmproxy","labels_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/1096/labels{/name}","comments_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/1096/comments","events_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/1096/events","html_url":"https://github.com/mitmproxy/mitmproxy/issues/1096","id":150852504,"node_id":"MDU6SXNzdWUxNTA4NTI1MDQ=","number":1096,"title":"deleting cookies (stickycookies) does not work","user":{"login":"StevenVanAcker","id":2060446,"node_id":"MDQ6VXNlcjIwNjA0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2060446?v=4","gravatar_id":"","url":"https://api.github.com/users/StevenVanAcker","html_url":"https://github.com/StevenVanAcker","followers_url":"https://api.github.com/users/StevenVanAcker/followers","following_url":"https://api.github.com/users/StevenVanAcker/following{/other_user}","gists_url":"https://api.github.com/users/StevenVanAcker/gists{/gist_id}","starred_url":"https://api.github.com/users/StevenVanAcker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/StevenVanAcker/subscriptions","organizations_url":"https://api.github.com/users/StevenVanAcker/orgs","repos_url":"https://api.github.com/users/StevenVanAcker/repos","events_url":"https://api.github.com/users/StevenVanAcker/events{/privacy}","received_events_url":"https://api.github.com/users/StevenVanAcker/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":79336502,"node_id":"MDU6TGFiZWw3OTMzNjUwMg==","url":"https://api.github.com/repos/mitmproxy/mitmproxy/labels/kind/bug","name":"kind/bug","color":"d93f0b","default":false,"description":null},{"id":174959532,"node_id":"MDU6TGFiZWwxNzQ5NTk1MzI=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/labels/help%20wanted","name":"help wanted","color":"fbca04","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dufferzafar","id":1449512,"node_id":"MDQ6VXNlcjE0NDk1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1449512?v=4","gravatar_id":"","url":"https://api.github.com/users/dufferzafar","html_url":"https://github.com/dufferzafar","followers_url":"https://api.github.com/users/dufferzafar/followers","following_url":"https://api.github.com/users/dufferzafar/following{/other_user}","gists_url":"https://api.github.com/users/dufferzafar/gists{/gist_id}","starred_url":"https://api.github.com/users/dufferzafar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dufferzafar/subscriptions","organizations_url":"https://api.github.com/users/dufferzafar/orgs","repos_url":"https://api.github.com/users/dufferzafar/repos","events_url":"https://api.github.com/users/dufferzafar/events{/privacy}","received_events_url":"https://api.github.com/users/dufferzafar/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"dufferzafar","id":1449512,"node_id":"MDQ6VXNlcjE0NDk1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1449512?v=4","gravatar_id":"","url":"https://api.github.com/users/dufferzafar","html_url":"https://github.com/dufferzafar","followers_url":"https://api.github.com/users/dufferzafar/followers","following_url":"https://api.github.com/users/dufferzafar/following{/other_user}","gists_url":"https://api.github.com/users/dufferzafar/gists{/gist_id}","starred_url":"https://api.github.com/users/dufferzafar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dufferzafar/subscriptions","organizations_url":"https://api.github.com/users/dufferzafar/orgs","repos_url":"https://api.github.com/users/dufferzafar/repos","events_url":"https://api.github.com/users/dufferzafar/events{/privacy}","received_events_url":"https://api.github.com/users/dufferzafar/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/milestones/13","html_url":"https://github.com/mitmproxy/mitmproxy/milestone/13","labels_url":"https://api.github.com/repos/mitmproxy/mitmproxy/milestones/13/labels","id":1869702,"node_id":"MDk6TWlsZXN0b25lMTg2OTcwMg==","number":13,"title":"gsoc-core-features","description":"GSoC Core Features, being handled by @dufferzafar.\r\n\r\n","creator":{"login":"dufferzafar","id":1449512,"node_id":"MDQ6VXNlcjE0NDk1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1449512?v=4","gravatar_id":"","url":"https://api.github.com/users/dufferzafar","html_url":"https://github.com/dufferzafar","followers_url":"https://api.github.com/users/dufferzafar/followers","following_url":"https://api.github.com/users/dufferzafar/following{/other_user}","gists_url":"https://api.github.com/users/dufferzafar/gists{/gist_id}","starred_url":"https://api.github.com/users/dufferzafar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dufferzafar/subscriptions","organizations_url":"https://api.github.com/users/dufferzafar/orgs","repos_url":"https://api.github.com/users/dufferzafar/repos","events_url":"https://api.github.com/users/dufferzafar/events{/privacy}","received_events_url":"https://api.github.com/users/dufferzafar/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":14,"state":"closed","created_at":"2016-07-07T11:06:39Z","updated_at":"2020-10-16T16:54:26Z","due_on":"2016-08-30T07:00:00Z","closed_at":"2016-09-04T23:33:03Z"},"comments":5,"created_at":"2016-04-25T13:11:13Z","updated_at":"2016-07-09T20:20:49Z","closed_at":"2016-07-09T20:20:45Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"##### Steps to reproduce the problem:\n1. start mitmdump with stickycookies: mitmdump -t \".\" and point a browser through it\n2. visit https://httpbin.org/cookies/set?aaa=1 to set a cookie\n3. visit https://httpbin.org/cookies/delete?aaa= to delete the cookie\n4. visit https://httpbin.org/cookies to display the cookies\n##### What is the expected behavior?\n\nThe expected behavior, according to RFC 6265, is that the cookie is deleted\n##### What went wrong?\n\nThe cookie is not deleted\n##### Any other comments?\n\nThe cookie library used by mitmproxy is Cookie.py from python, which is woefully outdated.\nIt implements RFC 2109 from 1997 and does not (yet?) support RFC 6265 from 2011.\n\nRFC 6265 standardises both \"expires\" and \"max-age\" attributes which can be used\nfor expiration control of cookies. A cookie can be deleted by setting \"expires\" to a date in the past,\nor \"max-age\" to 0.\n\nA more up-to-date cookie library is probably beneficial here. I'm not sure if there are any\nspecial reasons for depending on Cookie.py?\nIs it better to attempt to fix cookie.py, or switch mitmproxy to another cookie library?\n\n---\n\nMitmproxy Version: latest\nOperating System:\n","closed_by":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/1096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/1096/timeline","performed_via_github_app":null,"state_reason":"completed"}