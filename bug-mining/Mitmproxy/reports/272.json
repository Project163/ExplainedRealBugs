{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/2664","repository_url":"https://api.github.com/repos/mitmproxy/mitmproxy","labels_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/2664/labels{/name}","comments_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/2664/comments","events_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/2664/events","html_url":"https://github.com/mitmproxy/mitmproxy/issues/2664","id":281368886,"node_id":"MDU6SXNzdWUyODEzNjg4ODY=","number":2664,"title":"Test failure with IPv6","user":{"login":"Kriechi","id":114300,"node_id":"MDQ6VXNlcjExNDMwMA==","avatar_url":"https://avatars.githubusercontent.com/u/114300?v=4","gravatar_id":"","url":"https://api.github.com/users/Kriechi","html_url":"https://github.com/Kriechi","followers_url":"https://api.github.com/users/Kriechi/followers","following_url":"https://api.github.com/users/Kriechi/following{/other_user}","gists_url":"https://api.github.com/users/Kriechi/gists{/gist_id}","starred_url":"https://api.github.com/users/Kriechi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kriechi/subscriptions","organizations_url":"https://api.github.com/users/Kriechi/orgs","repos_url":"https://api.github.com/users/Kriechi/repos","events_url":"https://api.github.com/users/Kriechi/events{/privacy}","received_events_url":"https://api.github.com/users/Kriechi/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":329157517,"node_id":"MDU6TGFiZWwzMjkxNTc1MTc=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/labels/os/macos","name":"os/macos","color":"eeeeee","default":false,"description":""},{"id":429901139,"node_id":"MDU6TGFiZWw0Mjk5MDExMzk=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/labels/area/tests","name":"area/tests","color":"fef2c0","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-12-12T12:37:22Z","updated_at":"2017-12-13T12:50:47Z","closed_at":"2017-12-13T12:50:47Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I'm getting this test failure on my macOS 10.13.2 system with the latest git-master branch:\r\n\r\n```\r\nself = <test.mitmproxy.net.test_tcp.TestServerBind object at 0x113612240>\r\n\r\n    def test_bind(self):\r\n        \"\"\" Test to bind to a given random port. Try again if the random port turned out to be blocked. \"\"\"\r\n        for i in range(20):\r\n            random_port = random.randrange(1024, 65535)\r\n            try:\r\n                c = tcp.TCPClient(\r\n                    (\"127.0.0.1\", self.port), source_address=(\r\n                        \"127.0.0.1\", random_port))\r\n                with c.connect():\r\n>                   assert c.rfile.readline() == str((\"127.0.0.1\", random_port)).encode()\r\nE                   assert b\"('::ffff:12... 32413, 0, 0)\" == b\"('127.0.0.1', 32413)\"\r\nE                     At index 2 diff: 58 != 49\r\nE                     Left contains more items, first extra item: 32\r\nE                     Use -v to get the full diff\r\n\r\ntest/mitmproxy/net/test_tcp.py:110: AssertionError\r\n```\r\n\r\nTravisCI doesn't show this error. I cleaned & recreated my whole environment - no improvement.","closed_by":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/2664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/2664/timeline","performed_via_github_app":null,"state_reason":"completed"}