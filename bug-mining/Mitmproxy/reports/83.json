{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/479","repository_url":"https://api.github.com/repos/mitmproxy/mitmproxy","labels_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/479/labels{/name}","comments_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/479/comments","events_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/479/events","html_url":"https://github.com/mitmproxy/mitmproxy/issues/479","id":58159490,"node_id":"MDU6SXNzdWU1ODE1OTQ5MA==","number":479,"title":"Problem forwarding iOS SSL requests?","user":{"login":"mkonecny","id":813453,"node_id":"MDQ6VXNlcjgxMzQ1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/813453?v=4","gravatar_id":"","url":"https://api.github.com/users/mkonecny","html_url":"https://github.com/mkonecny","followers_url":"https://api.github.com/users/mkonecny/followers","following_url":"https://api.github.com/users/mkonecny/following{/other_user}","gists_url":"https://api.github.com/users/mkonecny/gists{/gist_id}","starred_url":"https://api.github.com/users/mkonecny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkonecny/subscriptions","organizations_url":"https://api.github.com/users/mkonecny/orgs","repos_url":"https://api.github.com/users/mkonecny/repos","events_url":"https://api.github.com/users/mkonecny/events{/privacy}","received_events_url":"https://api.github.com/users/mkonecny/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":79336502,"node_id":"MDU6TGFiZWw3OTMzNjUwMg==","url":"https://api.github.com/repos/mitmproxy/mitmproxy/labels/kind/bug","name":"kind/bug","color":"d93f0b","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2015-02-19T02:14:56Z","updated_at":"2015-02-27T08:19:28Z","closed_at":"2015-02-27T08:18:05Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Having a really strange issue. We have an app written for both Android and iOS.\n\nI set mitmproxy to listen on port 443, and forward all requests to our nginx server on port 80. The following command is used:\n\n`sudo mitmproxy -R https2http://localhost:80/ -p 443 --cert cert.pem`\n\nAndroid requests are forwarded just fine. They are simple POST/GET requests. The equivalent requests in iOS do not work if mitmproxy is in the middle - and work fine otherwise.\n\nHere is what I see:\na) in mitmproxy, the request is red, with reason\n`HttpError(\"Invalid server response: '<head><title>400 Bad Request</title></head>\\\\r\\\\n'\",)`\nb) in nginx access.log, I see random hex values where I would normally see the HTTP verb and path. Example:\n\n```\n127.0.0.1 - - [19/Feb/2015:02:03:46 +0000] \"\\x16\\x03\\x01\\x01L\\x01\\x00\\x01H\\x03\\x03\\x88#\\xCE\\x0F?\\xD1\\xC9\\xBF\\x8C\\x0C:|*\\x92{-\\x96\\x92\\x8CM*\\xA2\\xF7)o\\xBF\\x9Cl\\xDB\\x953\\xDA\\x00\\x00\\x92\\xC00\\xC0,\\xC0(\\xC0$\\xC0\\x14\\xC0\" 400 166 \"-\" \"-\"\n```\n\nAny hints on where I should start poking around?\n","closed_by":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/479/timeline","performed_via_github_app":null,"state_reason":"completed"}