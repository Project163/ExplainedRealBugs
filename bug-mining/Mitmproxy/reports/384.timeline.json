[{"id":4383764843,"node_id":"MDEyOkxhYmVsZWRFdmVudDQzODM3NjQ4NDM=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4383764843","actor":{"login":"KORraNpl","id":1622190,"node_id":"MDQ6VXNlcjE2MjIxOTA=","avatar_url":"https://avatars.githubusercontent.com/u/1622190?v=4","gravatar_id":"","url":"https://api.github.com/users/KORraNpl","html_url":"https://github.com/KORraNpl","followers_url":"https://api.github.com/users/KORraNpl/followers","following_url":"https://api.github.com/users/KORraNpl/following{/other_user}","gists_url":"https://api.github.com/users/KORraNpl/gists{/gist_id}","starred_url":"https://api.github.com/users/KORraNpl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KORraNpl/subscriptions","organizations_url":"https://api.github.com/users/KORraNpl/orgs","repos_url":"https://api.github.com/users/KORraNpl/repos","events_url":"https://api.github.com/users/KORraNpl/events{/privacy}","received_events_url":"https://api.github.com/users/KORraNpl/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-02-26T21:10:04Z","label":{"name":"kind/triage","color":"006b75"},"performed_via_github_app":null},{"id":4383773135,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50NDM4Mzc3MzEzNQ==","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4383773135","actor":{"login":"KORraNpl","id":1622190,"node_id":"MDQ6VXNlcjE2MjIxOTA=","avatar_url":"https://avatars.githubusercontent.com/u/1622190?v=4","gravatar_id":"","url":"https://api.github.com/users/KORraNpl","html_url":"https://github.com/KORraNpl","followers_url":"https://api.github.com/users/KORraNpl/followers","following_url":"https://api.github.com/users/KORraNpl/following{/other_user}","gists_url":"https://api.github.com/users/KORraNpl/gists{/gist_id}","starred_url":"https://api.github.com/users/KORraNpl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KORraNpl/subscriptions","organizations_url":"https://api.github.com/users/KORraNpl/orgs","repos_url":"https://api.github.com/users/KORraNpl/repos","events_url":"https://api.github.com/users/KORraNpl/events{/privacy}","received_events_url":"https://api.github.com/users/KORraNpl/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2021-02-26T21:12:45Z","rename":{"from":"All HTTP/2 requests are streamed if proxy started with --set stream_large_bodies - \"content missing\"","to":"All HTTP/2 requests are streamed if proxy is started with --set stream_large_bodies - \"content missing\""},"performed_via_github_app":null},{"id":4384715940,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50NDM4NDcxNTk0MA==","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4384715940","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2021-02-27T07:45:38Z","label":{"name":"kind/triage","color":"006b75"},"performed_via_github_app":null},{"id":4384715941,"node_id":"MDEyOkxhYmVsZWRFdmVudDQzODQ3MTU5NDE=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4384715941","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-02-27T07:45:39Z","label":{"name":"area/core","color":"fef2c0"},"performed_via_github_app":null},{"id":4384715943,"node_id":"MDEyOkxhYmVsZWRFdmVudDQzODQ3MTU5NDM=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4384715943","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-02-27T07:45:39Z","label":{"name":"kind/bug","color":"d93f0b"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/787031225","html_url":"https://github.com/mitmproxy/mitmproxy/issues/4470#issuecomment-787031225","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4470","id":787031225,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NzAzMTIyNQ==","user":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-27T07:46:04Z","updated_at":"2021-02-27T07:46:23Z","body":"Thanks for the clear reproduction steps!\r\n\r\nI can reproduce this with 6.0.2 and also with the latest master.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/787031225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/787031771","html_url":"https://github.com/mitmproxy/mitmproxy/issues/4470#issuecomment-787031771","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4470","id":787031771,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NzAzMTc3MQ==","user":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-27T07:51:40Z","updated_at":"2021-02-27T07:59:36Z","body":"This returns -1\r\n\r\nhttps://github.com/mitmproxy/mitmproxy/blob/4bd7b6c4eadeaca712f63e0e73f20bcf6aadbffb/mitmproxy/addons/streambodies.py#L34-L36\r\n\r\nI'm not too familiar with the code but I'll look into it. Since the package is explicitly called `http1` I wonder if it works with http2 or if it's just a helper in the wrong package.\r\n\r\nFor some reason the `content-length` header is completely missing in `response.headers`.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/787031771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4384741756,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQzODQ3NDE3NTY=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4384741756","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"146d0e77baf9a95003d64fb300090cfd964ffd3c","commit_url":"https://api.github.com/repos/Prinzhorn/mitmproxy/commits/146d0e77baf9a95003d64fb300090cfd964ffd3c","created_at":"2021-02-27T08:21:15Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/787036433","html_url":"https://github.com/mitmproxy/mitmproxy/issues/4470#issuecomment-787036433","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4470","id":787036433,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NzAzNjQzMw==","user":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-27T08:31:33Z","updated_at":"2021-02-27T08:31:33Z","body":"Neat, so it looks like the `stream_large_bodies` addon has always been broken, but with HTTP/2 it has become way more common to omit the `content-length` header. I think I've fixed it.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/787036433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/787042216","html_url":"https://github.com/mitmproxy/mitmproxy/issues/4470#issuecomment-787042216","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4470","id":787042216,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NzA0MjIxNg==","user":{"login":"KORraNpl","id":1622190,"node_id":"MDQ6VXNlcjE2MjIxOTA=","avatar_url":"https://avatars.githubusercontent.com/u/1622190?v=4","gravatar_id":"","url":"https://api.github.com/users/KORraNpl","html_url":"https://github.com/KORraNpl","followers_url":"https://api.github.com/users/KORraNpl/followers","following_url":"https://api.github.com/users/KORraNpl/following{/other_user}","gists_url":"https://api.github.com/users/KORraNpl/gists{/gist_id}","starred_url":"https://api.github.com/users/KORraNpl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KORraNpl/subscriptions","organizations_url":"https://api.github.com/users/KORraNpl/orgs","repos_url":"https://api.github.com/users/KORraNpl/repos","events_url":"https://api.github.com/users/KORraNpl/events{/privacy}","received_events_url":"https://api.github.com/users/KORraNpl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-27T09:18:26Z","updated_at":"2021-02-27T09:18:26Z","body":"@Prinzhorn Good catch! Seems like `content-length` is [optional in HTTP/2](https://bz.apache.org/bugzilla/show_bug.cgi?id=63009), but also in older versions. But the weird thing is:\r\n`curl -x 127.0.0.1:8080 -L https://www.google.com --http1.1 1>/dev/null`\r\ndoes not return `content-length` too, but the response is not streamed by mitmproxy.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/787042216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"KORraNpl","id":1622190,"node_id":"MDQ6VXNlcjE2MjIxOTA=","avatar_url":"https://avatars.githubusercontent.com/u/1622190?v=4","gravatar_id":"","url":"https://api.github.com/users/KORraNpl","html_url":"https://github.com/KORraNpl","followers_url":"https://api.github.com/users/KORraNpl/followers","following_url":"https://api.github.com/users/KORraNpl/following{/other_user}","gists_url":"https://api.github.com/users/KORraNpl/gists{/gist_id}","starred_url":"https://api.github.com/users/KORraNpl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KORraNpl/subscriptions","organizations_url":"https://api.github.com/users/KORraNpl/orgs","repos_url":"https://api.github.com/users/KORraNpl/repos","events_url":"https://api.github.com/users/KORraNpl/events{/privacy}","received_events_url":"https://api.github.com/users/KORraNpl/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4384785753,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDM4NDc4NTc1Mw==","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4384785753","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-02-27T09:18:26Z","performed_via_github_app":null},{"id":4384785755,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQzODQ3ODU3NTU=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4384785755","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-02-27T09:18:26Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/787045081","html_url":"https://github.com/mitmproxy/mitmproxy/issues/4470#issuecomment-787045081","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4470","id":787045081,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NzA0NTA4MQ==","user":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-27T09:45:25Z","updated_at":"2021-02-27T09:47:12Z","body":"It's using `Transfer-Encoding:  chunked`, this case is already handled https://github.com/mitmproxy/mitmproxy/blob/4bd7b6c4eadeaca712f63e0e73f20bcf6aadbffb/mitmproxy/net/http/http1/read.py#L78-L79\r\n\r\nWell, this should be `-1` too I guess :thinking: ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/787045081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/787046945","html_url":"https://github.com/mitmproxy/mitmproxy/issues/4470#issuecomment-787046945","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4470","id":787046945,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NzA0Njk0NQ==","user":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-27T09:55:30Z","updated_at":"2021-02-27T09:55:30Z","body":"@Prinzhorn: \r\n\r\nhttps://github.com/mitmproxy/mitmproxy/blob/4bd7b6c4eadeaca712f63e0e73f20bcf6aadbffb/mitmproxy/net/http/http1/read.py#L50-L54\r\n\r\nI'm on the run, but here are my TL;DR thoughts:\r\n\r\n - streaming if unknown annoys some people (see this issue)\r\n - not streaming if unknown often breaks the whole purpose of streaming (live video is more often than not chunked)\r\n\r\nWhat we could do instead: Check [here](https://github.com/mitmproxy/mitmproxy/blob/4bd7b6c4eadeaca712f63e0e73f20bcf6aadbffb/mitmproxy/proxy/layers/http/__init__.py#L239) if we exceeded max_body_size, and start streaming if so.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/787046945/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4384817931,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDM4NDgxNzkzMQ==","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4384817931","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-02-27T09:55:30Z","performed_via_github_app":null},{"id":4384817934,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQzODQ4MTc5MzQ=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4384817934","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-02-27T09:55:30Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/787507339","html_url":"https://github.com/mitmproxy/mitmproxy/issues/4470#issuecomment-787507339","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4470","id":787507339,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NzUwNzMzOQ==","user":{"login":"r00t-","id":2834981,"node_id":"MDQ6VXNlcjI4MzQ5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/2834981?v=4","gravatar_id":"","url":"https://api.github.com/users/r00t-","html_url":"https://github.com/r00t-","followers_url":"https://api.github.com/users/r00t-/followers","following_url":"https://api.github.com/users/r00t-/following{/other_user}","gists_url":"https://api.github.com/users/r00t-/gists{/gist_id}","starred_url":"https://api.github.com/users/r00t-/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r00t-/subscriptions","organizations_url":"https://api.github.com/users/r00t-/orgs","repos_url":"https://api.github.com/users/r00t-/repos","events_url":"https://api.github.com/users/r00t-/events{/privacy}","received_events_url":"https://api.github.com/users/r00t-/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-28T19:23:33Z","updated_at":"2021-02-28T19:23:33Z","body":"i'm also opposed to mitmproxy ever dynamically _not_ logging data while it's in use - it should not lose data unexpectedly.\r\ni would suggest to reject/cancel requests if they are/become too large, that leaves the user with a warning at least.\r\ni actually tried to patch this in before, but with little luck due to lacking python skills. maybe i'll try again, thanks for the pointer into the code.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/787507339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"r00t-","id":2834981,"node_id":"MDQ6VXNlcjI4MzQ5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/2834981?v=4","gravatar_id":"","url":"https://api.github.com/users/r00t-","html_url":"https://github.com/r00t-","followers_url":"https://api.github.com/users/r00t-/followers","following_url":"https://api.github.com/users/r00t-/following{/other_user}","gists_url":"https://api.github.com/users/r00t-/gists{/gist_id}","starred_url":"https://api.github.com/users/r00t-/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r00t-/subscriptions","organizations_url":"https://api.github.com/users/r00t-/orgs","repos_url":"https://api.github.com/users/r00t-/repos","events_url":"https://api.github.com/users/r00t-/events{/privacy}","received_events_url":"https://api.github.com/users/r00t-/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/788744522","html_url":"https://github.com/mitmproxy/mitmproxy/issues/4470#issuecomment-788744522","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4470","id":788744522,"node_id":"MDEyOklzc3VlQ29tbWVudDc4ODc0NDUyMg==","user":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T09:02:00Z","updated_at":"2021-03-02T09:02:00Z","body":"> it should not lose data unexpectedly.\r\n\r\nI'm in the same boat regarding that. I don't want data to get lost unexpectedly.\r\n\r\n>    not streaming if unknown often breaks the whole purpose of streaming (live video is more often than not chunked)\r\n\r\nMaybe streaming chunked responses could be a separate option/addon `stream_chunked_responses`? But I guess this depends entirely on the use-case and people can always write their own two line addon to enable streaming for chunked responses.\r\n\r\n> What we could do instead: Check [here](https://github.com/mitmproxy/mitmproxy/blob/4bd7b6c4eadeaca712f63e0e73f20bcf6aadbffb/mitmproxy/proxy/layers/http/__init__.py#L239) if we exceeded max_body_size, and start streaming if so.\r\n\r\nThat sounds reasonable. Is this something that could theoretically be exposed to addons or would `stream_large_bodies` then need to be moved into the core? In either case we only need to look at `request_body_buf` size if `content-length` is missing.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/788744522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Prinzhorn","id":679144,"node_id":"MDQ6VXNlcjY3OTE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/679144?v=4","gravatar_id":"","url":"https://api.github.com/users/Prinzhorn","html_url":"https://github.com/Prinzhorn","followers_url":"https://api.github.com/users/Prinzhorn/followers","following_url":"https://api.github.com/users/Prinzhorn/following{/other_user}","gists_url":"https://api.github.com/users/Prinzhorn/gists{/gist_id}","starred_url":"https://api.github.com/users/Prinzhorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Prinzhorn/subscriptions","organizations_url":"https://api.github.com/users/Prinzhorn/orgs","repos_url":"https://api.github.com/users/Prinzhorn/repos","events_url":"https://api.github.com/users/Prinzhorn/events{/privacy}","received_events_url":"https://api.github.com/users/Prinzhorn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"r00t-","id":2834981,"node_id":"MDQ6VXNlcjI4MzQ5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/2834981?v=4","gravatar_id":"","url":"https://api.github.com/users/r00t-","html_url":"https://github.com/r00t-","followers_url":"https://api.github.com/users/r00t-/followers","following_url":"https://api.github.com/users/r00t-/following{/other_user}","gists_url":"https://api.github.com/users/r00t-/gists{/gist_id}","starred_url":"https://api.github.com/users/r00t-/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r00t-/subscriptions","organizations_url":"https://api.github.com/users/r00t-/orgs","repos_url":"https://api.github.com/users/r00t-/repos","events_url":"https://api.github.com/users/r00t-/events{/privacy}","received_events_url":"https://api.github.com/users/r00t-/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T13:37:46Z","updated_at":"2021-03-02T13:37:46Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4456","repository_url":"https://api.github.com/repos/mitmproxy/mitmproxy","labels_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4456/labels{/name}","comments_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4456/comments","events_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4456/events","html_url":"https://github.com/mitmproxy/mitmproxy/issues/4456","id":809819075,"node_id":"MDU6SXNzdWU4MDk4MTkwNzU=","number":4456,"title":"mitmdump memory usage is always constantly growing","user":{"login":"r00t-","id":2834981,"node_id":"MDQ6VXNlcjI4MzQ5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/2834981?v=4","gravatar_id":"","url":"https://api.github.com/users/r00t-","html_url":"https://github.com/r00t-","followers_url":"https://api.github.com/users/r00t-/followers","following_url":"https://api.github.com/users/r00t-/following{/other_user}","gists_url":"https://api.github.com/users/r00t-/gists{/gist_id}","starred_url":"https://api.github.com/users/r00t-/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r00t-/subscriptions","organizations_url":"https://api.github.com/users/r00t-/orgs","repos_url":"https://api.github.com/users/r00t-/repos","events_url":"https://api.github.com/users/r00t-/events{/privacy}","received_events_url":"https://api.github.com/users/r00t-/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":466930397,"node_id":"MDU6TGFiZWw0NjY5MzAzOTc=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/labels/kind/triage","name":"kind/triage","color":"006b75","default":false,"description":"Unclassified issues"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":33,"created_at":"2021-02-17T03:23:06Z","updated_at":"2022-05-15T16:01:31Z","closed_at":"2022-04-25T10:52:45Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":519832,"node_id":"MDEwOlJlcG9zaXRvcnk1MTk4MzI=","name":"mitmproxy","full_name":"mitmproxy/mitmproxy","private":false,"owner":{"login":"mitmproxy","id":4652787,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ2NTI3ODc=","avatar_url":"https://avatars.githubusercontent.com/u/4652787?v=4","gravatar_id":"","url":"https://api.github.com/users/mitmproxy","html_url":"https://github.com/mitmproxy","followers_url":"https://api.github.com/users/mitmproxy/followers","following_url":"https://api.github.com/users/mitmproxy/following{/other_user}","gists_url":"https://api.github.com/users/mitmproxy/gists{/gist_id}","starred_url":"https://api.github.com/users/mitmproxy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitmproxy/subscriptions","organizations_url":"https://api.github.com/users/mitmproxy/orgs","repos_url":"https://api.github.com/users/mitmproxy/repos","events_url":"https://api.github.com/users/mitmproxy/events{/privacy}","received_events_url":"https://api.github.com/users/mitmproxy/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/mitmproxy/mitmproxy","description":"An interactive TLS-capable intercepting HTTP proxy for penetration testers and software developers.","fork":false,"url":"https://api.github.com/repos/mitmproxy/mitmproxy","forks_url":"https://api.github.com/repos/mitmproxy/mitmproxy/forks","keys_url":"https://api.github.com/repos/mitmproxy/mitmproxy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mitmproxy/mitmproxy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mitmproxy/mitmproxy/teams","hooks_url":"https://api.github.com/repos/mitmproxy/mitmproxy/hooks","issue_events_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events{/number}","events_url":"https://api.github.com/repos/mitmproxy/mitmproxy/events","assignees_url":"https://api.github.com/repos/mitmproxy/mitmproxy/assignees{/user}","branches_url":"https://api.github.com/repos/mitmproxy/mitmproxy/branches{/branch}","tags_url":"https://api.github.com/repos/mitmproxy/mitmproxy/tags","blobs_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/refs{/sha}","trees_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mitmproxy/mitmproxy/statuses/{sha}","languages_url":"https://api.github.com/repos/mitmproxy/mitmproxy/languages","stargazers_url":"https://api.github.com/repos/mitmproxy/mitmproxy/stargazers","contributors_url":"https://api.github.com/repos/mitmproxy/mitmproxy/contributors","subscribers_url":"https://api.github.com/repos/mitmproxy/mitmproxy/subscribers","subscription_url":"https://api.github.com/repos/mitmproxy/mitmproxy/subscription","commits_url":"https://api.github.com/repos/mitmproxy/mitmproxy/commits{/sha}","git_commits_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/commits{/sha}","comments_url":"https://api.github.com/repos/mitmproxy/mitmproxy/comments{/number}","issue_comment_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments{/number}","contents_url":"https://api.github.com/repos/mitmproxy/mitmproxy/contents/{+path}","compare_url":"https://api.github.com/repos/mitmproxy/mitmproxy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mitmproxy/mitmproxy/merges","archive_url":"https://api.github.com/repos/mitmproxy/mitmproxy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mitmproxy/mitmproxy/downloads","issues_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues{/number}","pulls_url":"https://api.github.com/repos/mitmproxy/mitmproxy/pulls{/number}","milestones_url":"https://api.github.com/repos/mitmproxy/mitmproxy/milestones{/number}","notifications_url":"https://api.github.com/repos/mitmproxy/mitmproxy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mitmproxy/mitmproxy/labels{/name}","releases_url":"https://api.github.com/repos/mitmproxy/mitmproxy/releases{/id}","deployments_url":"https://api.github.com/repos/mitmproxy/mitmproxy/deployments","created_at":"2010-02-16T04:10:13Z","updated_at":"2025-11-09T17:55:49Z","pushed_at":"2025-11-09T14:36:54Z","git_url":"git://github.com/mitmproxy/mitmproxy.git","ssh_url":"git@github.com:mitmproxy/mitmproxy.git","clone_url":"https://github.com/mitmproxy/mitmproxy.git","svn_url":"https://github.com/mitmproxy/mitmproxy","homepage":"https://mitmproxy.org","size":67124,"stargazers_count":41160,"watchers_count":41160,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":4359,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":387,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["debugging","http","http2","man-in-the-middle","mitmproxy","proxy","python","security","ssl","tls","websocket"],"visibility":"public","forks":4359,"open_issues":387,"watchers":41160,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"(orignally mentioned in #4451 , but i don't think it's related to the issue discussed there and should get a separate ticket)\r\n\r\n#### Problem Description\r\ni use mitmdump for interactive browsing a lot.\r\nthat is, i run an mitmdump instance continuously, and use it from multiple browsers on multiple computers.\r\n\r\ni find that mitmdump's memory usage constantly grows,\r\nit *appears* as if it allocates memory for any request/response data it processes and then never frees it.\r\nnote that i would _expect_ this behaviour from mitmproxy running interactively, as it displays all the data in the UI,\r\nbut mitmdump should have no reason to keep flows in memory after writing them out.\r\n\r\nhere's a typical mitmdump memory usage graph out of my monitoring stack:\r\n![mitmdump_rss](https://user-images.githubusercontent.com/2834981/108147170-b9efb380-70ce-11eb-8389-89997a72cb5b.png)\r\n\r\nmitmdump memory usage appears as a sawtooth pattern, rising until it's terminated.\r\nthe growth rate is currently typically around 500mb/hour, it was less in the past, when it got through a whole day with under 2gb,\r\nand is higher than the rate of data actually dumped (under 1gb/day). \r\nin this graph mitmdump is manually terminated a few times, because of debugging #4451, and by a daily restart at midnight.\r\n(i also run a script that terminates it if it exceeds 3gb, to avoid it taking down my system.)\r\n\r\nsome very rare phases of non-growth (as seen in the graph above) are very unlikely related to zero traffic - thanks to websites constantly loading stuff in the background nowadays, and many browsers and tabs, it's unlikely that traffic is ever zero.\r\n\r\ni see some _extremely_ rare occurences (at most once a week) of larger amounts of memory being allocated and freed again, in the expected pattern of allocating it to handle a request, and freeing it again after the request is finished.\r\n\r\n#### Steps to reproduce the behavior:\r\n1. run mitmdump for a longer period and use it, possibly with multiple browsers with a large number of tabs open  \r\n2. observe memory usage\r\n\r\n#### System Information\r\ni think it has been the case ever since i started using mitmproxy, the above graph is of current git master. (running with `--set proxy_debug -vvv`, but it doesn't make a difference to the behaviour.)","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4456/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4456/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/792294946","html_url":"https://github.com/mitmproxy/mitmproxy/issues/4470#issuecomment-792294946","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4470","id":792294946,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MjI5NDk0Ng==","user":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-07T15:16:11Z","updated_at":"2021-03-07T15:16:11Z","body":"> That sounds reasonable. Is this something that could theoretically be exposed to addons or would stream_large_bodies then need to be moved into the core?\r\n\r\nThis would mean we'd move it to the core, but that's ok - there is lots of streaming logic in the proxy core anyways, the option isn't adding much here. :-) I'd be happy to accept a PR! ðŸ˜ƒ Here's a rough description of what needs to be done:\r\n\r\n1. Move [the option definition](https://github.com/mitmproxy/mitmproxy/blob/42a1345daf015b345f29e976434c29f4c84175df/mitmproxy/addons/streambodies.py#L13-L28) into `addons/proxyserver.py`. We should keep the validation done by `configure` around, which makes mitmproxy not accept invalid values for `stream_large_bodies`. But we don't need to have a max_size property on the Proxyserver addon. Calling `human.parse_size` on demand is very cheap as it's cached.\r\n2. `rm addons/streambodies.py` (and remove reference in `addons/__init__.py`)\r\n3. Replicate existing functionality: Set the `stream` request property based on `stream_large_bodies` [here](https://github.com/mitmproxy/mitmproxy/blob/42a1345daf015b345f29e976434c29f4c84175df/mitmproxy/proxy/layers/http/__init__.py#L191), treat an unknown content length as \"don't stream\".\r\n4. Add the funcionality to start streaming chunked data once we exceed a certain size: Check [here](https://github.com/mitmproxy/mitmproxy/blob/42a1345daf015b345f29e976434c29f4c84175df/mitmproxy/proxy/layers/http/__init__.py#L239) if `request_body_buf > stream_large_bodies`. If so, switch to streaming by calling `start_request_stream` and transmitting the existing buffer.\r\n5. Write tests. See [here](https://github.com/mitmproxy/mitmproxy/blob/93de96a720a60365117ef41f0801e8cff7ac06bd/test/mitmproxy/proxy/layers/http/test_http.py#L269-L295) for a similar test. You can set options in tests [like this](https://github.com/mitmproxy/mitmproxy/blob/93de96a720a60365117ef41f0801e8cff7ac06bd/test/mitmproxy/proxy/layers/http/test_http.py#L238).\r\n6. Submit a PR for feedback.\r\n7. Repeat 4-5 for responses streaming. ðŸš€ \r\n\r\nAs always, don't hesistate to reach out if you are stuck somewhere ðŸ˜ƒ ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/792294946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4418142751,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ0MTgxNDI3NTE=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4418142751","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-03-07T15:16:20Z","label":{"name":"help wanted","color":"fbca04"},"performed_via_github_app":null},{"id":4418142816,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50NDQxODE0MjgxNg==","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4418142816","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2021-03-07T15:16:25Z","label":{"name":"kind/bug","color":"d93f0b"},"performed_via_github_app":null},{"id":4418142817,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ0MTgxNDI4MTc=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4418142817","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-03-07T15:16:25Z","label":{"name":"kind/feature","color":"207de5"},"performed_via_github_app":null},{"id":4418499078,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ0MTg0OTkwNzg=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4418499078","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1e793ced24ecc4b584f72bfaa66e8e463ccfb80d","commit_url":"https://api.github.com/repos/mhils/mitmproxy/commits/1e793ced24ecc4b584f72bfaa66e8e463ccfb80d","created_at":"2021-03-07T21:16:34Z","performed_via_github_app":null},{"id":4881417104,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQ0ODgxNDE3MTA0","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4881417104","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2021-06-12T16:01:35Z","assignee":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":4881462636,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ4ODE0NjI2MzY=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4881462636","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ca6e148a116e62d1f97b250ba6e6d05289d64f03","commit_url":"https://api.github.com/repos/mhils/mitmproxy/commits/ca6e148a116e62d1f97b250ba6e6d05289d64f03","created_at":"2021-06-12T16:51:36Z","performed_via_github_app":null},{"actor":{"login":"KORraNpl","id":1622190,"node_id":"MDQ6VXNlcjE2MjIxOTA=","avatar_url":"https://avatars.githubusercontent.com/u/1622190?v=4","gravatar_id":"","url":"https://api.github.com/users/KORraNpl","html_url":"https://github.com/KORraNpl","followers_url":"https://api.github.com/users/KORraNpl/followers","following_url":"https://api.github.com/users/KORraNpl/following{/other_user}","gists_url":"https://api.github.com/users/KORraNpl/gists{/gist_id}","starred_url":"https://api.github.com/users/KORraNpl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KORraNpl/subscriptions","organizations_url":"https://api.github.com/users/KORraNpl/orgs","repos_url":"https://api.github.com/users/KORraNpl/repos","events_url":"https://api.github.com/users/KORraNpl/events{/privacy}","received_events_url":"https://api.github.com/users/KORraNpl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-13T10:17:09Z","updated_at":"2021-06-13T10:17:09Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4627","repository_url":"https://api.github.com/repos/mitmproxy/mitmproxy","labels_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4627/labels{/name}","comments_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4627/comments","events_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4627/events","html_url":"https://github.com/mitmproxy/mitmproxy/issues/4627","id":914729676,"node_id":"MDU6SXNzdWU5MTQ3Mjk2NzY=","number":4627,"title":"HTTP/1.1 also have a problem about \"Request content missing.\"","user":{"login":"Chellane","id":29483859,"node_id":"MDQ6VXNlcjI5NDgzODU5","avatar_url":"https://avatars.githubusercontent.com/u/29483859?v=4","gravatar_id":"","url":"https://api.github.com/users/Chellane","html_url":"https://github.com/Chellane","followers_url":"https://api.github.com/users/Chellane/followers","following_url":"https://api.github.com/users/Chellane/following{/other_user}","gists_url":"https://api.github.com/users/Chellane/gists{/gist_id}","starred_url":"https://api.github.com/users/Chellane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Chellane/subscriptions","organizations_url":"https://api.github.com/users/Chellane/orgs","repos_url":"https://api.github.com/users/Chellane/repos","events_url":"https://api.github.com/users/Chellane/events{/privacy}","received_events_url":"https://api.github.com/users/Chellane/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":466930397,"node_id":"MDU6TGFiZWw0NjY5MzAzOTc=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/labels/kind/triage","name":"kind/triage","color":"006b75","default":false,"description":"Unclassified issues"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-06-08T09:57:23Z","updated_at":"2021-06-13T14:45:16Z","closed_at":"2021-06-13T14:45:15Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":519832,"node_id":"MDEwOlJlcG9zaXRvcnk1MTk4MzI=","name":"mitmproxy","full_name":"mitmproxy/mitmproxy","private":false,"owner":{"login":"mitmproxy","id":4652787,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ2NTI3ODc=","avatar_url":"https://avatars.githubusercontent.com/u/4652787?v=4","gravatar_id":"","url":"https://api.github.com/users/mitmproxy","html_url":"https://github.com/mitmproxy","followers_url":"https://api.github.com/users/mitmproxy/followers","following_url":"https://api.github.com/users/mitmproxy/following{/other_user}","gists_url":"https://api.github.com/users/mitmproxy/gists{/gist_id}","starred_url":"https://api.github.com/users/mitmproxy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitmproxy/subscriptions","organizations_url":"https://api.github.com/users/mitmproxy/orgs","repos_url":"https://api.github.com/users/mitmproxy/repos","events_url":"https://api.github.com/users/mitmproxy/events{/privacy}","received_events_url":"https://api.github.com/users/mitmproxy/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/mitmproxy/mitmproxy","description":"An interactive TLS-capable intercepting HTTP proxy for penetration testers and software developers.","fork":false,"url":"https://api.github.com/repos/mitmproxy/mitmproxy","forks_url":"https://api.github.com/repos/mitmproxy/mitmproxy/forks","keys_url":"https://api.github.com/repos/mitmproxy/mitmproxy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mitmproxy/mitmproxy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mitmproxy/mitmproxy/teams","hooks_url":"https://api.github.com/repos/mitmproxy/mitmproxy/hooks","issue_events_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events{/number}","events_url":"https://api.github.com/repos/mitmproxy/mitmproxy/events","assignees_url":"https://api.github.com/repos/mitmproxy/mitmproxy/assignees{/user}","branches_url":"https://api.github.com/repos/mitmproxy/mitmproxy/branches{/branch}","tags_url":"https://api.github.com/repos/mitmproxy/mitmproxy/tags","blobs_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/refs{/sha}","trees_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mitmproxy/mitmproxy/statuses/{sha}","languages_url":"https://api.github.com/repos/mitmproxy/mitmproxy/languages","stargazers_url":"https://api.github.com/repos/mitmproxy/mitmproxy/stargazers","contributors_url":"https://api.github.com/repos/mitmproxy/mitmproxy/contributors","subscribers_url":"https://api.github.com/repos/mitmproxy/mitmproxy/subscribers","subscription_url":"https://api.github.com/repos/mitmproxy/mitmproxy/subscription","commits_url":"https://api.github.com/repos/mitmproxy/mitmproxy/commits{/sha}","git_commits_url":"https://api.github.com/repos/mitmproxy/mitmproxy/git/commits{/sha}","comments_url":"https://api.github.com/repos/mitmproxy/mitmproxy/comments{/number}","issue_comment_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments{/number}","contents_url":"https://api.github.com/repos/mitmproxy/mitmproxy/contents/{+path}","compare_url":"https://api.github.com/repos/mitmproxy/mitmproxy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mitmproxy/mitmproxy/merges","archive_url":"https://api.github.com/repos/mitmproxy/mitmproxy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mitmproxy/mitmproxy/downloads","issues_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues{/number}","pulls_url":"https://api.github.com/repos/mitmproxy/mitmproxy/pulls{/number}","milestones_url":"https://api.github.com/repos/mitmproxy/mitmproxy/milestones{/number}","notifications_url":"https://api.github.com/repos/mitmproxy/mitmproxy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mitmproxy/mitmproxy/labels{/name}","releases_url":"https://api.github.com/repos/mitmproxy/mitmproxy/releases{/id}","deployments_url":"https://api.github.com/repos/mitmproxy/mitmproxy/deployments","created_at":"2010-02-16T04:10:13Z","updated_at":"2025-11-09T17:55:49Z","pushed_at":"2025-11-09T14:36:54Z","git_url":"git://github.com/mitmproxy/mitmproxy.git","ssh_url":"git@github.com:mitmproxy/mitmproxy.git","clone_url":"https://github.com/mitmproxy/mitmproxy.git","svn_url":"https://github.com/mitmproxy/mitmproxy","homepage":"https://mitmproxy.org","size":67124,"stargazers_count":41160,"watchers_count":41160,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":4359,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":387,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["debugging","http","http2","man-in-the-middle","mitmproxy","proxy","python","security","ssl","tls","websocket"],"visibility":"public","forks":4359,"open_issues":387,"watchers":41160,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"#### Problem Description\r\nI user mitmweb to catch flows, and then some request of flows display \"Request content missing.\"\r\nNowï¼ŒI find that, when content-length=0, the flow display \"Request content missing.\"\r\n#### System Information\r\nMitmproxy: 6.0.2\r\nPython:    3.9.1\r\nOpenSSL:   OpenSSL 1.1.1i  8 Dec 2020\r\nPlatform:  Windows-10-10.0.19041-SP0\r\n\r\n","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4627/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":4882311129,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ4ODIzMTExMjk=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4882311129","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"199670cad44a6a24af0c65d719cb575e054a886a","commit_url":"https://api.github.com/repos/mhils/mitmproxy/commits/199670cad44a6a24af0c65d719cb575e054a886a","created_at":"2021-06-13T13:56:40Z","performed_via_github_app":null},{"id":4882352691,"node_id":"MDExOkNsb3NlZEV2ZW50NDg4MjM1MjY5MQ==","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/4882352691","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"199670cad44a6a24af0c65d719cb575e054a886a","commit_url":"https://api.github.com/repos/mitmproxy/mitmproxy/commits/199670cad44a6a24af0c65d719cb575e054a886a","created_at":"2021-06-13T14:39:21Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/860222499","html_url":"https://github.com/mitmproxy/mitmproxy/issues/4470#issuecomment-860222499","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/4470","id":860222499,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDIyMjQ5OQ==","user":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-13T14:44:46Z","updated_at":"2021-06-13T14:44:46Z","body":"I've just fixed this, thanks again! For `Transfer-Encoding: chunked` requests without `Content-Length` header, mitmproxy now buffers the message until the `stream_large_bodies` limit is hit, at which point it will transition to streaming. I think this is the best compromise we can make for message bodies of unknown length. ðŸ˜ƒ ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/860222499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false}}]