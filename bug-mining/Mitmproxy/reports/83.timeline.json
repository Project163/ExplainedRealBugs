[{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/74988649","html_url":"https://github.com/mitmproxy/mitmproxy/issues/479#issuecomment-74988649","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/479","id":74988649,"node_id":"MDEyOklzc3VlQ29tbWVudDc0OTg4NjQ5","user":{"login":"mkonecny","id":813453,"node_id":"MDQ6VXNlcjgxMzQ1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/813453?v=4","gravatar_id":"","url":"https://api.github.com/users/mkonecny","html_url":"https://github.com/mkonecny","followers_url":"https://api.github.com/users/mkonecny/followers","following_url":"https://api.github.com/users/mkonecny/following{/other_user}","gists_url":"https://api.github.com/users/mkonecny/gists{/gist_id}","starred_url":"https://api.github.com/users/mkonecny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkonecny/subscriptions","organizations_url":"https://api.github.com/users/mkonecny/orgs","repos_url":"https://api.github.com/users/mkonecny/repos","events_url":"https://api.github.com/users/mkonecny/events{/privacy}","received_events_url":"https://api.github.com/users/mkonecny/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-02-19T02:17:39Z","updated_at":"2015-02-19T02:17:39Z","body":"One additional note. I am able to get it working if I use\n\n`sudo mitmproxy -R https://localhost:444/ -p 443 --cert cert.pem` \n\nThat is, I don't \"translate\" the request from https to http.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/74988649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mkonecny","id":813453,"node_id":"MDQ6VXNlcjgxMzQ1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/813453?v=4","gravatar_id":"","url":"https://api.github.com/users/mkonecny","html_url":"https://github.com/mkonecny","followers_url":"https://api.github.com/users/mkonecny/followers","following_url":"https://api.github.com/users/mkonecny/following{/other_user}","gists_url":"https://api.github.com/users/mkonecny/gists{/gist_id}","starred_url":"https://api.github.com/users/mkonecny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkonecny/subscriptions","organizations_url":"https://api.github.com/users/mkonecny/orgs","repos_url":"https://api.github.com/users/mkonecny/repos","events_url":"https://api.github.com/users/mkonecny/events{/privacy}","received_events_url":"https://api.github.com/users/mkonecny/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/74989422","html_url":"https://github.com/mitmproxy/mitmproxy/issues/479#issuecomment-74989422","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/479","id":74989422,"node_id":"MDEyOklzc3VlQ29tbWVudDc0OTg5NDIy","user":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-02-19T02:27:24Z","updated_at":"2015-02-19T02:27:24Z","body":"Hm, I have no good idea yet why this could be happening. Could you post the output of `mitmdump -dd -vvv [+ your other parameters]` for a failing request?\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/74989422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":238132178,"node_id":"MDEyOkxhYmVsZWRFdmVudDIzODEzMjE3OA==","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/238132178","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2015-02-19T02:27:27Z","label":{"name":"bug","color":"f7c6c7"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/74995156","html_url":"https://github.com/mitmproxy/mitmproxy/issues/479#issuecomment-74995156","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/479","id":74995156,"node_id":"MDEyOklzc3VlQ29tbWVudDc0OTk1MTU2","user":{"login":"mkonecny","id":813453,"node_id":"MDQ6VXNlcjgxMzQ1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/813453?v=4","gravatar_id":"","url":"https://api.github.com/users/mkonecny","html_url":"https://github.com/mkonecny","followers_url":"https://api.github.com/users/mkonecny/followers","following_url":"https://api.github.com/users/mkonecny/following{/other_user}","gists_url":"https://api.github.com/users/mkonecny/gists{/gist_id}","starred_url":"https://api.github.com/users/mkonecny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkonecny/subscriptions","organizations_url":"https://api.github.com/users/mkonecny/orgs","repos_url":"https://api.github.com/users/mkonecny/repos","events_url":"https://api.github.com/users/mkonecny/events{/privacy}","received_events_url":"https://api.github.com/users/mkonecny/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-02-19T03:47:19Z","updated_at":"2015-02-19T03:50:16Z","body":"Interestingly enough, Android and curl no longer work as well - this leads me to believe I may be doing something wrong?\n\n`sudo mitmdump -dd -vvv -R https2http://localhost:80 -p 443 --cert cert.pem`\n\n```\nx.x.x.x:59346: clientconnect\nx.x.x.x:59346: Set new server address: localhost:80\nx.x.x.x:59346: serverconnect\n  -> localhost:80\nx.x.x.x:59346: Establish SSL\n  -> with client\nx.x.x.x:59346: SNI received: api-dev.example.com\nx.x.x.x:59346: (server reconnect follows)\nx.x.x.x:59346: serverdisconnect\n  -> localhost:80\nx.x.x.x:59346: Set new server address: localhost:80\nx.x.x.x:59346: serverconnect\n  -> localhost:80\nx.x.x.x:59346: Establish SSL\n  -> with server (sni: api-dev.example.com)\nx.x.x.x:59346: Error in handle_sni:\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.7/dist-packages/libmproxy/proxy/server.py\", line 288, in handle_sni\n    self.server_reconnect(sni)  # reconnect to upstream server with SNI\n  File \"/usr/local/lib/python2.7/dist-packages/libmproxy/proxy/server.py\", line 241, in server_reconnect\n    self.establish_ssl(server=True, sni=sni)\n  File \"/usr/local/lib/python2.7/dist-packages/libmproxy/proxy/server.py\", line 202, in establish_ssl\n    raise e\nProxyError: NetLibError(\"SSL handshake error: Error([('SSL routines', 'SSL23_GET_SERVER_HELLO', 'unknown protocol')],)\",)\n\nx.x.x.x:59346: request\n  -> GET / HTTP/1.1\nx.x.x.x:59346: HttpError(\"Invalid server response: '<head><title>400 Bad Request</title></head>\\\\r\\\\n'\",)\nx.x.x.x GET http://localhost/\n    User-Agent: curl/7.38.0\n    Host: api-dev.example.com\n    Accept: */*\n\n << HttpError(\"Invalid server response: '<head><title>400 Bad Request</title></head>\\\\r\\\\n'\",)\n\n\nx.x.x.x:59346: clientdisconnect\nx.x.x.x:59346: serverdisconnect\n  -> localhost:80\n```\n\nCorresponding entry in nginx log:\n\n```\n127.0.0.1 - - [19/Feb/2015:03:38:20 +0000] \"\\x16\\x03\\x01\\x01K\\x01\\x00\\x01G\\x03\\x03\\xC6 \\x80j\\xE2[\\x0B\\x90\\xAAF\\xBA\\x94\\x02\\x22_\\xE8\\xE59\\xEA\\x96Oit\\xB8)\\xFB\\xA3W\\xB5\\xA8xK\\x00\\x00\\x92\\xC00\\xC0,\\xC0(\\xC0$\\xC0\\x14\\xC0\" 400 166 \"-\" \"-\"\n```\n\nFrom the same terminal I run mitmproxy, if I do `curl http://localhost` it works perfectly fine.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/74995156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mkonecny","id":813453,"node_id":"MDQ6VXNlcjgxMzQ1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/813453?v=4","gravatar_id":"","url":"https://api.github.com/users/mkonecny","html_url":"https://github.com/mkonecny","followers_url":"https://api.github.com/users/mkonecny/followers","following_url":"https://api.github.com/users/mkonecny/following{/other_user}","gists_url":"https://api.github.com/users/mkonecny/gists{/gist_id}","starred_url":"https://api.github.com/users/mkonecny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkonecny/subscriptions","organizations_url":"https://api.github.com/users/mkonecny/orgs","repos_url":"https://api.github.com/users/mkonecny/repos","events_url":"https://api.github.com/users/mkonecny/events{/privacy}","received_events_url":"https://api.github.com/users/mkonecny/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/75180014","html_url":"https://github.com/mitmproxy/mitmproxy/issues/479#issuecomment-75180014","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/479","id":75180014,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MTgwMDE0","user":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-02-20T02:30:12Z","updated_at":"2015-02-20T02:30:12Z","body":"Thanks for the quick feedback - the log is definitely very helpful. We'll fix that for the next patch release, but it may take a while before I have some spare time.\n\nCheers,\nMax\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/75180014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":243114723,"node_id":"MDExOkNsb3NlZEV2ZW50MjQzMTE0NzIz","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/243114723","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"81a274eb51ea7552667a872f0b6db1aeca9315b3","commit_url":"https://api.github.com/repos/mitmproxy/mitmproxy/commits/81a274eb51ea7552667a872f0b6db1aeca9315b3","created_at":"2015-02-27T08:18:05Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/76354477","html_url":"https://github.com/mitmproxy/mitmproxy/issues/479#issuecomment-76354477","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/479","id":76354477,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MzU0NDc3","user":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-02-27T08:19:28Z","updated_at":"2015-02-27T08:19:28Z","body":"Hi Martin,\n\nthanks again for the good report - I just commited a fix for the issue you were seeing. You can either install our development version for now or wait for the next release. :-)\n\nCheers,\nMax\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/76354477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false}}]