{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5198","repository_url":"https://api.github.com/repos/mitmproxy/mitmproxy","labels_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5198/labels{/name}","comments_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5198/comments","events_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5198/events","html_url":"https://github.com/mitmproxy/mitmproxy/issues/5198","id":1174889566,"node_id":"I_kwDOAAfumM5GB2Re","number":5198,"title":"[mitmweb] mitmproxy has crashed when scroll down the page","user":{"login":"sanlengjingvv","id":6478615,"node_id":"MDQ6VXNlcjY0Nzg2MTU=","avatar_url":"https://avatars.githubusercontent.com/u/6478615?v=4","gravatar_id":"","url":"https://api.github.com/users/sanlengjingvv","html_url":"https://github.com/sanlengjingvv","followers_url":"https://api.github.com/users/sanlengjingvv/followers","following_url":"https://api.github.com/users/sanlengjingvv/following{/other_user}","gists_url":"https://api.github.com/users/sanlengjingvv/gists{/gist_id}","starred_url":"https://api.github.com/users/sanlengjingvv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sanlengjingvv/subscriptions","organizations_url":"https://api.github.com/users/sanlengjingvv/orgs","repos_url":"https://api.github.com/users/sanlengjingvv/repos","events_url":"https://api.github.com/users/sanlengjingvv/events{/privacy}","received_events_url":"https://api.github.com/users/sanlengjingvv/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":466930397,"node_id":"MDU6TGFiZWw0NjY5MzAzOTc=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/labels/kind/triage","name":"kind/triage","color":"006b75","default":false,"description":"Unclassified issues"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-21T04:56:31Z","updated_at":"2022-09-09T15:27:44Z","closed_at":"2022-09-09T15:27:44Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### Problem Description\r\nMay be related to websocket.\r\n\r\nError message show on page\r\n```\r\nError: Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.\r\n    at checkForNestedUpdates (http://127.0.0.1:8081/static/app.js:19477:25)\r\n    at scheduleUpdateOnFiber (http://127.0.0.1:8081/static/app.js:18176:13)\r\n    at Object.enqueueSetState (http://127.0.0.1:8081/static/app.js:11577:15)\r\n    at _a.Component14.setState (http://127.0.0.1:8081/static/app.js:349:26)\r\n    at _a.onViewportUpdate (http://127.0.0.1:8081/static/app.js:48134:14)\r\n    at _a.componentDidUpdate (http://127.0.0.1:8081/static/app.js:48100:12)\r\n    at _a.componentDidUpdate (http://127.0.0.1:8081/static/app.js:48002:43)\r\n    at commitLifeCycles (http://127.0.0.1:8081/static/app.js:17400:32)\r\n    at commitLayoutEffects (http://127.0.0.1:8081/static/app.js:19200:17)\r\n    at HTMLUnknownElement.callCallback (http://127.0.0.1:8081/static/app.js:5588:24)\r\n\r\nComponent Stack:\r\n    at AutoScrollWrapper (http://127.0.0.1:8081/static/app.js:47990:55)\r\n    at ConnectFunction (http://127.0.0.1:8081/static/app.js:40488:50)\r\n    at div\r\n    at MainView (http://127.0.0.1:8081/static/app.js:48178:26)\r\n    at div\r\n    at ProxyAppMain (http://127.0.0.1:8081/static/app.js:50253:7)\r\n    at ConnectFunction (http://127.0.0.1:8081/static/app.js:40488:50)\r\n    at Provider (http://127.0.0.1:8081/static/app.js:40280:23)\r\n```\r\n\r\nError message show on chrome dev tools console\r\n```\r\nreact-dom.development.js:23803 Uncaught Error: Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.\r\n    at checkForNestedUpdates (react-dom.development.js:23803:15)\r\n    at scheduleUpdateOnFiber (react-dom.development.js:21835:3)\r\n    at Object.enqueueSetState (react-dom.development.js:12467:5)\r\n    at _a.Component14.setState (react.development.js:365:16)\r\n    at _a.onViewportUpdate (FlowTable.jsx:88:18)\r\n    at _a.componentDidUpdate (FlowTable.jsx:42:14)\r\n    at _a.componentDidUpdate (AutoScroll.tsx:23:43)\r\n    at commitLifeCycles (react-dom.development.js:20684:24)\r\n    at commitLayoutEffects (react-dom.development.js:23426:7)\r\n    at HTMLUnknownElement.callCallback (react-dom.development.js:3945:14)\r\n\r\nreact-dom.development.js:20085 The above error occurred in the <FlowTable> component:\r\n\r\n    at AutoScrollWrapper (http://127.0.0.1:8081/static/app.js:47990:55)\r\n    at ConnectFunction (http://127.0.0.1:8081/static/app.js:40488:50)\r\n    at div\r\n    at MainView (http://127.0.0.1:8081/static/app.js:48178:26)\r\n    at div\r\n    at ProxyAppMain (http://127.0.0.1:8081/static/app.js:50253:7)\r\n    at ConnectFunction (http://127.0.0.1:8081/static/app.js:40488:50)\r\n    at Provider (http://127.0.0.1:8081/static/app.js:40280:23)\r\n\r\nReact will try to recreate this component tree from scratch using the error boundary you provided, ProxyAppMain.\r\n\r\nreact-dom.development.js:4452 Uncaught Error: Unable to find node on an unmounted component.\r\n    at findCurrentFiberUsingSlowPath (react-dom.development.js:4452:13)\r\n    at findCurrentHostFiber (react-dom.development.js:4465:23)\r\n    at findHostInstanceWithWarning (react-dom.development.js:25389:21)\r\n    at Object.findDOMNode (react-dom.development.js:26067:12)\r\n    at _a.onViewportUpdate (FlowTable.jsx:77:35)\r\n```\r\n\r\n#### Steps to reproduce the behavior:\r\n1. Start mitmweb \r\n2. Proxy an app with websocket\r\n3. Wait a while and scroll down the mitmweb page\r\n\r\n#### System Information\r\n> Mitmproxy: 9.0.0.dev (+274, commit 01d6795)\r\nPython:    3.8.10\r\nOpenSSL:   OpenSSL 1.1.1m  14 Dec 2021\r\nPlatform:  macOS-10.16-x86_64-i386-64bit\r\n","closed_by":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5198/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5198/timeline","performed_via_github_app":null,"state_reason":"completed"}