[{"id":6600709960,"node_id":"LE_lADOAAfumM5Jku_azwAAAAGJbtdI","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/6600709960","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-05-12T18:55:25Z","label":{"name":"kind/triage","color":"006b75"},"performed_via_github_app":null},{"id":6600710678,"node_id":"UNLE_lADOAAfumM5Jku_azwAAAAGJbtoW","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/6600710678","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2022-05-12T18:55:34Z","label":{"name":"kind/triage","color":"006b75"},"performed_via_github_app":null},{"id":6600710681,"node_id":"LE_lADOAAfumM5Jku_azwAAAAGJbtoZ","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/6600710681","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-05-12T18:55:34Z","label":{"name":"kind/bug","color":"d93f0b"},"performed_via_github_app":null},{"id":6600710683,"node_id":"LE_lADOAAfumM5Jku_azwAAAAGJbtob","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/6600710683","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-05-12T18:55:34Z","label":{"name":"area/protocols","color":"fef2c0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1127015151","html_url":"https://github.com/mitmproxy/mitmproxy/issues/5343#issuecomment-1127015151","issue_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5343","id":1127015151,"node_id":"IC_kwDOAAfumM5DLOLv","user":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-15T20:04:32Z","updated_at":"2022-05-15T20:04:44Z","body":"Another one in https://github.com/mitmproxy/mitmproxy/runs/6442413613:\r\n\r\n```python\r\nE           AssertionError: Playbook mismatch!\r\nE             >> Start({})\r\nE             << SendData(client, b'\\x00\\x00*\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x10\\x00\\x00\\x02\\x00\\x00\\x00\\x00\\x00\\x04\\x00\\x00\\xff\\xff\\x00\\x05\\x00\\x00@\\x00\\x00\\x08\\x00\\x00\\x00\\x00\\x00\\x03\\x00\\x00\\x00d\\x00\\x06\\x00\\x01\\x00\\x00')\r\nE             >> DataReceived(client, b'PRI * HTTP/2.0\\r\\n\\r\\nSM\\r\\n\\r\\n')\r\nE             >> DataReceived(client, b'\\x00\\x00\\x00\\x04\\x01\\x00\\x00\\x00\\x00')\r\nE             >> DataReceived(client, b'\\x00\\x00\\r\\x01\\x04\\x00\\x00\\x00\\x01\\x82\\x86\\x84A\\x88/\\x91\\xd3]\\x05\\\\\\x87\\xa7')\r\nE             << HttpRequestHeadersHook(flow=<HTTPFlow\r\n\r\nE                  request = Request(GET example.com:80/)\r\n\r\nE                  error = peer closed connection\r\n\r\nE                  client_conn = Client(client:1234, state=open, alpn=h2)\r\n\r\nE                  server_conn = Server(example.com:80, state=closed, alpn=h2)>)\r\nE             >> Reply(HttpRequestHeadersHook(flow=<HTTPFlow\r\n\r\nE                  request = Request(GET example.com:80/)\r\n\r\nE                  error = peer closed connection\r\n\r\nE                  client_conn = Client(client:1234, state=open, alpn=h2)\r\n\r\nE                  server_conn = Server(example.com:80, state=closed, alpn=h2)>), None)\r\nE             << OpenConnection({'connection': Server({'id': '…75c3d4', 'address': ('example.com', 80), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'alpn': b'h2', 'timestamp_start': 1624544785, 'timestamp_end': 1624544787})})\r\nE             >> Reply(OpenConnection({'connection': Server({'id': '…75c3d4', 'address': ('example.com', 80), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'alpn': b'h2', 'timestamp_start': 1624544785, 'timestamp_end': 1624544787})}), None)\r\nE           - << Log('Streaming request to example.com.', 'info')\r\nE           + << SendData(server, b'PRI * HTTP/2.0\\r\\n\\r\\nSM\\r\\n\\r\\n\\x00\\x00*\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x10\\x00\\x00\\x02\\x00\\x00\\x00\\x00\\x00\\x04\\x00\\x00\\xff\\xff\\x00\\x05\\x00\\x00@\\x00\\x00\\x08\\x00\\x00\\x00\\x00\\x00\\x03\\x00\\x00\\x00d\\x00\\x06\\x00\\x01\\x00\\x00\\x00\\x00\\r\\x01\\x04\\x00\\x00\\x00\\x01\\x82\\x86\\x84A\\x88/\\x91\\xd3]\\x05\\\\\\x87\\xa7')\r\nE             << Log('Streaming request to example.com.', 'info')\r\nE             >> ConnectionClosed(connection=Server({'id': '…75c3d4', 'address': ('example.com', 80), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'alpn': b'h2', 'timestamp_start': 1624544785, 'timestamp_end': 1624544787}))\r\nE             << CloseConnection({'connection': Server({'id': '…75c3d4', 'address': ('example.com', 80), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp', 'alpn': b'h2', 'timestamp_start': 1624544785, 'timestamp_end': 1624544787}), 'half_close': False})\r\nE             << HttpErrorHook(flow=<HTTPFlow\r\n\r\nE                  request = Request(GET example.com:80/)\r\n\r\nE                  error = peer closed connection\r\n\r\nE                  client_conn = Client(client:1234, state=open, alpn=h2)\r\n\r\nE                  server_conn = Server(example.com:80, state=closed, alpn=h2)>)\r\nE             >> Reply(HttpErrorHook(flow=<HTTPFlow\r\n\r\nE                  request = Request(GET example.com:80/)\r\n\r\nE                  error = peer closed connection\r\n\r\nE                  client_conn = Client(client:1234, state=open, alpn=h2)\r\n\r\nE                  server_conn = Server(example.com:80, state=closed, alpn=h2)>), None)\r\nE           ==== asserted until here ====\r\nE             << SendData(client, b'\\x00\\x00\\x1d\\x01\\x04\\x00\\x00\\x00\\x01H\\x82l\\x02v\\x8e\\xa4\\xc9\\xa6\\xbb\\x0f\\xe7\\xd2\\x8f\\xae\\x05\\xc0\\xbc\\x85\\xef_\\x87I|\\xa5\\x89\\xd3M\\x1f\\x00\\x00\\x8e\\x00\\x01\\x00\\x00\\x00\\x01<html>\\n<head>\\n    <title>502 Bad Gateway</title>\\n</head>\\n<body>\\n    <h1>502 Bad Gateway</h1>\\n    <p>peer closed connection</p>\\n</body>\\n</html>')\r\nE             >> DataReceived(client, b'\\x00\\x00\\x03\\x00\\x01\\x00\\x00\\x00\\x01foo')\r\nE           + << Traceback (most recent call last):\r\nE                  File \"/home/runner/work/mitmproxy/mitmproxy/mitmproxy/proxy/layers/http/__init__.py\", line 911, in event_to_child\r\nE                    stream = self.streams[command.event.stream_id]\r\nE                KeyError: 1\r\nE           \r\nE                During handling of the above exception, another exception occurred:\r\nE           \r\nE                Traceback (most recent call last):\r\nE                  File \"/home/runner/work/mitmproxy/mitmproxy/test/mitmproxy/proxy/tutils.py\", line 206, in __bool__\r\nE                    for cmd in self.layer.handle_event(x):\r\nE                  File \"/home/runner/work/mitmproxy/mitmproxy/mitmproxy/proxy/layer.py\", line 143, in handle_event\r\nE                    command = command_generator.send(send)\r\nE                  File \"/home/runner/work/mitmproxy/mitmproxy/mitmproxy/proxy/layers/http/__init__.py\", line 890, in _handle_event\r\nE                    yield from self.event_to_child(handler, event)\r\nE                  File \"/home/runner/work/mitmproxy/mitmproxy/mitmproxy/proxy/layers/http/__init__.py\", line 914, in event_to_child\r\nE                    assert isinstance(\r\nE                AssertionError\r\n\r\ntest/mitmproxy/proxy/tutils.py:277: AssertionError\r\n---------------------------------- Hypothesis ----------------------------------\r\nFalsifying example: test_fuzz_cancel(\r\n    stream_request=True, stream_response=False, data=data(...),\r\n)\r\nDraw 1: ('data_req', DataReceived(client, b'\\x00\\x00\\r\\x01\\x04\\x00\\x00\\x00\\x01\\x82\\x86\\x84A\\x88/\\x91\\xd3]\\x05\\\\\\x87\\xa7'))\r\nDraw 2: ('reply_hook_req_headers', reply({'args': (), 'to': HttpRequestHeadersHook(flow=Placeholder:<HTTPFlow\r\n  request = Request(GET example.com:80/)\r\n  client_conn = Client(client:1234, state=open, alpn=h2)\r\n  server_conn = Server(<no address>, state=closed)>), 'side_effect': <function _test_cancel.<locals>.maybe_stream at 0x7f35d4734040>}))\r\nDraw 3: ('reply_openconn', reply({'args': (None,), 'to': OpenConnection({'connection': Placeholder:Server({'id': '…75c3d4', 'address': ('example.com', 80), 'state': <ConnectionState.CLOSED: 0>, 'transport_protocol': 'tcp'})}), 'side_effect': <function make_h2 at 0x7f35d5c13b80>}))\r\nDraw 4: ('err_server_disc', ConnectionClosed(connection=Placeholder:Server({'id': '…75c3d4', 'address': ('example.com', 80), 'state': <ConnectionState.OPEN: 3>, 'transport_protocol': 'tcp', 'alpn': b'h2', 'timestamp_start': 1624544785})))\r\nDraw 5: ('reply_hook_error', reply({'args': (), 'to': HttpErrorHook(flow=Placeholder:<HTTPFlow\r\n  request = Request(GET example.com:80/)\r\n  error = peer closed connection\r\n  client_conn = Client(client:1234, state=open, alpn=h2)\r\n  server_conn = Server(example.com:80, state=closed, alpn=h2)>), 'side_effect': <function reply.<lambda> at 0x7f35d5f469d0>}))\r\nDraw 6: ('data_reqbody', DataReceived(client, b'\\x00\\x00\\x03\\x00\\x01\\x00\\x00\\x00\\x01foo'))\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/comments/1127015151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6611789224,"node_id":"REFE_lADOAAfumM5Jku_azwAAAAGKF-Wo","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/6611789224","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ef457a071cb69c1632163262934910455535bbb7","commit_url":"https://api.github.com/repos/mhils/mitmproxy/commits/ef457a071cb69c1632163262934910455535bbb7","created_at":"2022-05-15T20:12:42Z","performed_via_github_app":null},{"id":6611796812,"node_id":"CE_lADOAAfumM5Jku_azwAAAAGKGANM","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/6611796812","actor":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"4a2ca7563108d2256909309c770feb0c5b481397","commit_url":"https://api.github.com/repos/mitmproxy/mitmproxy/commits/4a2ca7563108d2256909309c770feb0c5b481397","created_at":"2022-05-15T20:18:33Z","state_reason":null,"performed_via_github_app":null},{"id":12015388512,"node_id":"REFE_lADOAAfumM5Jku_azwAAAALMLEdg","url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/events/12015388512","actor":{"login":"readloud","id":67372333,"node_id":"MDQ6VXNlcjY3MzcyMzMz","avatar_url":"https://avatars.githubusercontent.com/u/67372333?v=4","gravatar_id":"","url":"https://api.github.com/users/readloud","html_url":"https://github.com/readloud","followers_url":"https://api.github.com/users/readloud/followers","following_url":"https://api.github.com/users/readloud/following{/other_user}","gists_url":"https://api.github.com/users/readloud/gists{/gist_id}","starred_url":"https://api.github.com/users/readloud/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/readloud/subscriptions","organizations_url":"https://api.github.com/users/readloud/orgs","repos_url":"https://api.github.com/users/readloud/repos","events_url":"https://api.github.com/users/readloud/events{/privacy}","received_events_url":"https://api.github.com/users/readloud/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4a2ca7563108d2256909309c770feb0c5b481397","commit_url":"https://api.github.com/repos/readloud/mitmproxy/commits/4a2ca7563108d2256909309c770feb0c5b481397","created_at":"2024-03-05T15:05:40Z","performed_via_github_app":null}]