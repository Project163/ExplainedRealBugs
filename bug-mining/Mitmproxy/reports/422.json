{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5054","repository_url":"https://api.github.com/repos/mitmproxy/mitmproxy","labels_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5054/labels{/name}","comments_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5054/comments","events_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5054/events","html_url":"https://github.com/mitmproxy/mitmproxy/issues/5054","id":1101974189,"node_id":"I_kwDOAAfumM5Brsqt","number":5054,"title":"response.refresh() gives OSError on Windows","user":{"login":"kimberlythegeek","id":18633586,"node_id":"MDQ6VXNlcjE4NjMzNTg2","avatar_url":"https://avatars.githubusercontent.com/u/18633586?v=4","gravatar_id":"","url":"https://api.github.com/users/kimberlythegeek","html_url":"https://github.com/kimberlythegeek","followers_url":"https://api.github.com/users/kimberlythegeek/followers","following_url":"https://api.github.com/users/kimberlythegeek/following{/other_user}","gists_url":"https://api.github.com/users/kimberlythegeek/gists{/gist_id}","starred_url":"https://api.github.com/users/kimberlythegeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimberlythegeek/subscriptions","organizations_url":"https://api.github.com/users/kimberlythegeek/orgs","repos_url":"https://api.github.com/users/kimberlythegeek/repos","events_url":"https://api.github.com/users/kimberlythegeek/events{/privacy}","received_events_url":"https://api.github.com/users/kimberlythegeek/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":79336502,"node_id":"MDU6TGFiZWw3OTMzNjUwMg==","url":"https://api.github.com/repos/mitmproxy/mitmproxy/labels/kind/bug","name":"kind/bug","color":"d93f0b","default":false,"description":null},{"id":429899720,"node_id":"MDU6TGFiZWw0Mjk4OTk3MjA=","url":"https://api.github.com/repos/mitmproxy/mitmproxy/labels/area/addons","name":"area/addons","color":"fef2c0","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2022-01-13T15:59:41Z","updated_at":"2022-01-18T22:32:38Z","closed_at":"2022-01-18T22:32:38Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"```\r\nNavigating to secondary url:https://www.bing.com/search?q=barack+obama+quotes\r\nNavigating to url https://www.bing.com/search?q=barack+obama+quotes iteration 25\r\nAddon error: Traceback (most recent call last):'\r\nError: b'  File \"C:\\\\Users\\\\task_1641995085\\\\build\\\\venv\\\\lib\\\\site-packages\\\\mozproxy\\\\backends\\\\mitm\\\\scripts\\\\alt-serverplayback.py\", line 250, in request'\r\nError: b'    response.refresh()'\r\nError: b'  File \"mitmproxy\\\\http.py\", line 1188, in refresh'\r\nError: b'  File \"email\\\\utils.py\", line 147, in formatdate'\r\nError: b'OSError: [Errno 22] Invalid argument'\r\n```\r\nThis error only occurs on windows. I have been able to run mitmproxy from source with our test harness, and added log statements to output the parameters being passed to `formatdate`. I've verified in a python terminal that the parameters are valid.\r\n\r\nThis did not occur until we updated from mitmproxy 5.1.1 to 7.0.4. I've checked the source code for the previous versions, and though the code has been moved around, there is no difference in the calls being made in `response.refresh()`\r\n","closed_by":{"login":"mhils","id":1019198,"node_id":"MDQ6VXNlcjEwMTkxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1019198?v=4","gravatar_id":"","url":"https://api.github.com/users/mhils","html_url":"https://github.com/mhils","followers_url":"https://api.github.com/users/mhils/followers","following_url":"https://api.github.com/users/mhils/following{/other_user}","gists_url":"https://api.github.com/users/mhils/gists{/gist_id}","starred_url":"https://api.github.com/users/mhils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhils/subscriptions","organizations_url":"https://api.github.com/users/mhils/orgs","repos_url":"https://api.github.com/users/mhils/repos","events_url":"https://api.github.com/users/mhils/events{/privacy}","received_events_url":"https://api.github.com/users/mhils/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mitmproxy/mitmproxy/issues/5054/timeline","performed_via_github_app":null,"state_reason":"completed"}