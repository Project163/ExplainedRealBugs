diff --git a/CHANGELOG.md b/CHANGELOG.md
index 6b3a73a5a..4d66c35dd 100644
--- a/CHANGELOG.md
+++ b/CHANGELOG.md
@@ -41,6 +41,8 @@
   ([#5562](https://github.com/mitmproxy/mitmproxy/pull/5562), @decathorpe, @mhils)
 * Fix mitmweb not properly opening a browser and being stuck on some Linux.
   ([#5522](https://github.com/mitmproxy/mitmproxy/issues/5522), @Prinzhorn)
+* Fix race condition when updating mitmweb WebSocket connections that are closing.
+  ([#5405](https://github.com/mitmproxy/mitmproxy/issues/5405), @mhils)
 
 
 ## 28 June 2022: mitmproxy 8.1.1
diff --git a/mitmproxy/tools/web/app.py b/mitmproxy/tools/web/app.py
index 66868abb6..5c6b1fbdf 100644
--- a/mitmproxy/tools/web/app.py
+++ b/mitmproxy/tools/web/app.py
@@ -280,7 +280,7 @@ class WebSocketEventBroadcaster(tornado.websocket.WebSocketHandler):
         self.connections.add(self)
 
     def on_close(self):
-        self.connections.remove(self)
+        self.connections.discard(self)
 
     @classmethod
     def broadcast(cls, **kwargs):
@@ -288,12 +288,16 @@ class WebSocketEventBroadcaster(tornado.websocket.WebSocketHandler):
             "utf8", "surrogateescape"
         )
 
+        errored = []
         for conn in cls.connections:
             try:
                 if not conn.ws_connection.is_closing():
                     conn.write_message(message)
             except Exception:  # pragma: no cover
-                logging.error("Error sending message", exc_info=True)
+                logging.debug("Error sending WebSocket message.", exc_info=True)
+                errored.append(conn)  # workaround for https://github.com/tornadoweb/tornado/issues/2958
+        for conn in errored:
+            cls.connections.remove(conn)
 
 
 class ClientConnection(WebSocketEventBroadcaster):
