diff --git a/mitmproxy/proxy/mode_servers.py b/mitmproxy/proxy/mode_servers.py
index ca00d4389..b3ee87271 100644
--- a/mitmproxy/proxy/mode_servers.py
+++ b/mitmproxy/proxy/mode_servers.py
@@ -308,6 +308,7 @@ class WireGuardServerInstance(ServerInstance[mode_specs.WireGuardMode]):
 
         try:
             if not conf_path.exists():
+                conf_path.parent.mkdir(parents=True, exist_ok=True)
                 conf_path.write_text(json.dumps({
                     "server_key": wg.genkey(),
                     "client_key": wg.genkey(),
