diff --git a/CHANGELOG.md b/CHANGELOG.md
index f5a8f3ca8..5d140fe62 100644
--- a/CHANGELOG.md
+++ b/CHANGELOG.md
@@ -21,6 +21,8 @@
   ([#6666](https://github.com/mitmproxy/mitmproxy/pull/6666), @manselmi)
 * Add `content_view_lines_cutoff` option to mitmdump
   ([#6692](https://github.com/mitmproxy/mitmproxy/pull/6692), @errorxyz)
+* Allow runtime modifications of HTTP flow filters for server replays
+  ([#6695](https://github.com/mitmproxy/mitmproxy/pull/6695), @errorxyz)
 
 
 ## 21 January 2024: mitmproxy 10.2.2
diff --git a/mitmproxy/addons/serverplayback.py b/mitmproxy/addons/serverplayback.py
index 077eade37..c5b13b1a2 100644
--- a/mitmproxy/addons/serverplayback.py
+++ b/mitmproxy/addons/serverplayback.py
@@ -16,6 +16,15 @@ from mitmproxy import io
 
 logger = logging.getLogger(__name__)
 
+HASH_OPTIONS = [
+    "server_replay_ignore_content",
+    "server_replay_ignore_host",
+    "server_replay_ignore_params",
+    "server_replay_ignore_payload_params",
+    "server_replay_ignore_port",
+    "server_replay_use_headers",
+]
+
 
 class ServerPlayback:
     flowmap: dict[Hashable, list[http.HTTPFlow]]
@@ -255,6 +264,16 @@ class ServerPlayback:
             except exceptions.FlowReadException as e:
                 raise exceptions.OptionsError(str(e))
             self.load_flows(flows)
+        if any(option in updated for option in HASH_OPTIONS):
+            self.recompute_hashes()
+
+    def recompute_hashes(self) -> None:
+        """
+        Rebuild flowmap if the hashing method has changed during execution,
+        see https://github.com/mitmproxy/mitmproxy/issues/4506
+        """
+        flows = [flow for lst in self.flowmap.values() for flow in lst]
+        self.load_flows(flows)
 
     def request(self, f: http.HTTPFlow) -> None:
         if self.flowmap:
diff --git a/test/mitmproxy/addons/test_serverplayback.py b/test/mitmproxy/addons/test_serverplayback.py
index aa3a2178d..7ae12c2ee 100644
--- a/test/mitmproxy/addons/test_serverplayback.py
+++ b/test/mitmproxy/addons/test_serverplayback.py
@@ -325,6 +325,24 @@ def test_ignore_payload_params():
     thash(r, r2, multipart_setter)
 
 
+def test_runtime_modify_params():
+    s = serverplayback.ServerPlayback()
+    with taddons.context(s) as tctx:
+        r = tflow.tflow(resp=True)
+        r.request.path = "/test?param1=1"
+        r2 = tflow.tflow(resp=True)
+        r2.request.path = "/test"
+
+        s.load_flows([r])
+        hash = next(iter(s.flowmap.keys()))
+
+        tctx.configure(s, server_replay_ignore_params=["param1"])
+        hash_mod = next(iter(s.flowmap.keys()))
+
+        assert hash != hash_mod
+        assert hash_mod == s._hash(r2)
+
+
 def test_server_playback_full():
     s = serverplayback.ServerPlayback()
     with taddons.context(s) as tctx:
