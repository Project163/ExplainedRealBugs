diff --git a/contrib/codegen/src/database.rs b/contrib/codegen/src/database.rs
index 2ef24d66..2ef9ccd3 100644
--- a/contrib/codegen/src/database.rs
+++ b/contrib/codegen/src/database.rs
@@ -91,7 +91,7 @@ pub fn database_attr(attr: TokenStream, input: TokenStream) -> Result<TokenStrea
 
                 ::rocket::fairing::AdHoc::on_attach(#fairing_name, |rocket| {
                     let pool = #databases::database_config(#name, rocket.config())
-                        .map(#connection_type::pool);
+                        .map(<#connection_type>::pool);
 
                     match pool {
                         Ok(Ok(p)) => Ok(rocket.manage(#pool_type(p))),
@@ -130,6 +130,13 @@ pub fn database_attr(attr: TokenStream, input: TokenStream) -> Result<TokenStrea
             }
         }
 
+        impl ::std::ops::DerefMut for #request_guard_type {
+            #[inline(always)]
+            fn deref_mut(&mut self) -> &mut Self::Target {
+                &mut self.0
+            }
+        }
+
         impl<'a, 'r> #request::FromRequest<'a, 'r> for #request_guard_type {
             type Error = ();
 
