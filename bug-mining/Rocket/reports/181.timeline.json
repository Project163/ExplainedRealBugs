[{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/860294636","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-860294636","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":860294636,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDI5NDYzNg==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-14T00:25:23Z","updated_at":"2021-06-14T00:26:16Z","body":"I generally agree. This is something I wanted to address before 0.5 but haven't gotten to yet. However, neither of your proposals are tenable. The first has coherence issues, while the second has no precedence in Rust or Rocket and thus likely unintuitive.\r\n\r\nNevertheless, your approach is more difficult than it needs to be. If you're just wrapping a type that already implements `FromForm`, you can just call the implementation directly. Assuming your `FromStr::Error` type implements `Into<Error>`, this is as simple as:\r\n\r\n```rust\r\n#[rocket::async_trait]\r\nimpl<'r> FromFormField<'r> for Token<'r> {\r\n    fn from_value(field: ValueField<'r>) -> form::Result<'r, Self> {\r\n        Ok(<&str>::from_value(field)?.parse()?)\r\n    }\r\n\r\n    async fn from_data(field: DataField<'r, '_>) -> form::Result<'r, Self> {\r\n        Ok(<&str>::from_data(field).await?.parse()?)\r\n    }\r\n}\r\n```\r\n\r\nWhat I would like to support is the following, which effectively expands to the above except with a custom validation error message:\r\n\r\n```rust\r\n#[derive(FromForm)]\r\n#[field(validate = with(Token::from_str, \"Invalid token string.\")]\r\nstruct Token<'r>(&'r str);\r\n```\r\n\r\nI'm curious what your `InstanceAccess<'i,Id>` looks like, exactly, however. Ideally this derive would support the vast majority of \"wrapping\"-like use-cases. Can you post the complete `struct` definition and 0.4 `FromFormValue` implementation?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/860294636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/860295542","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-860295542","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":860295542,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDI5NTU0Mg==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-14T00:29:48Z","updated_at":"2021-06-14T00:29:48Z","body":"I also want to point out that I _would_ eventually like to remove the need for both `from_value` and `from_data`, opting instead for a single `from_field`. The reason this doesn't happen today is because this would result in boxing for _every single_ field parse, which is rather unfortunate. This would also let you easily override the data limit for something like `&str`:\r\n\r\n```rust\r\nimpl<'r> FromFormField<'r> for Token<'r> {\r\n    async fn from_field(field: Field<'r>) -> form::Result<'r, Self> {\r\n        let string = field.into_local_str(\"some/limit/name\").await?;\r\n        Ok(string.parse()?)\r\n    }\r\n}\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/860295542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/860610289","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-860610289","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":860610289,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDYxMDI4OQ==","user":{"login":"ijackson","id":2090772,"node_id":"MDQ6VXNlcjIwOTA3NzI=","avatar_url":"https://avatars.githubusercontent.com/u/2090772?v=4","gravatar_id":"","url":"https://api.github.com/users/ijackson","html_url":"https://github.com/ijackson","followers_url":"https://api.github.com/users/ijackson/followers","following_url":"https://api.github.com/users/ijackson/following{/other_user}","gists_url":"https://api.github.com/users/ijackson/gists{/gist_id}","starred_url":"https://api.github.com/users/ijackson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijackson/subscriptions","organizations_url":"https://api.github.com/users/ijackson/orgs","repos_url":"https://api.github.com/users/ijackson/repos","events_url":"https://api.github.com/users/ijackson/events{/privacy}","received_events_url":"https://api.github.com/users/ijackson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-14T11:26:47Z","updated_at":"2021-06-14T11:26:47Z","body":"> I generally agree. This is something I wanted to address before 0.5 but haven't gotten to yet.\r\n\r\nThanks for looking at this.  Taking your comments out of order:\r\n\r\n> I'm curious what your `InstanceAccess<'i,Id>` looks like, exactly, however. Ideally this derive would support the vast majority of \"wrapping\"-like use-cases. Can you post the complete `struct` definition and 0.4 `FromFormValue` implementation?\r\n\r\nSure.  Hold onto your hat!\r\n\r\n```\r\n#[derive(Clone,Debug)]\r\npub struct InstanceAccess<'i, Id> {\r\n  pub raw_token: &'i RawTokenVal,\r\n  pub i: InstanceAccessDetails<Id>,\r\n}\r\n\r\nimpl<Id> InstanceAccessDetails<Id>\r\n  where Id: AccessId, OnlineError: From<Id::Error>\r\n{\r\n  #[throws(OnlineError)]\r\n  pub fn from_token(token: &RawTokenVal) -> InstanceAccessDetails<Id> { /* complex lookup */ }\r\n}\r\n\r\n#[derive(Hash,Ord,PartialOrd,Eq,PartialEq,Serialize)]\r\n#[repr(transparent)]\r\npub struct RawTokenVal(str);\r\n\r\nimpl RawTokenVal {\r\n  pub fn from_str(s: &str) -> &RawTokenVal { /* trivial */ }\r\n}\r\n\r\nimpl<'r, Id> FromFormValue<'r> for InstanceAccess<'r, Id>\r\n  where Id: AccessId, OnlineError: From<Id::Error>\r\n{\r\n  type Error = OnlineErrorResponse;\r\n  #[throws(OnlineErrorResponse)]\r\n  fn from_form_value(param: &'r RawStr) -> Self {\r\n    let token = RawTokenVal::from_str(param.as_str());\r\n    let i = InstanceAccessDetails::from_token(token)?;\r\n    InstanceAccess { raw_token: token, i }\r\n  }\r\n}\r\n\r\n#[derive(Error,Debug)]\r\n#[error(\"{0}\")]\r\npub struct OnlineErrorResponse(#[from] OnlineError);\r\n\r\nimpl From<&OnlineErrorResponse> for rocket::http::Status { ... }\r\n```\r\n\r\nHere `#[throws]` is from fehler and the attributes on\r\n`OnlineErrorResponse` are from thiserror.\r\n\r\n\r\n>  However, neither of your proposals are tenable. The first has coherence issues,\r\n\r\nI'm confused.  Is this about my suggestion \"Have the default from_data read the data to a string\" ?  I don't think this raises any coherence issues.  Perhaps I wasn't sufficiently clear.  I'm suggesting something like this\r\n\r\n```\r\n    /// Parse a value of `T` from a form data field.\r\n    ///\r\n-   /// The default implementation returns an error of\r\n-   /// [`DataField::unexpected()`].\r\n+   /// The default implementation reads up to 512 bytes, converts\r\n+   /// them to UTF-8, and calls `from_value`.  This is suitable for\r\n+   /// types with a short string representation.  For longer types,\r\n+   /// override this method.\r\n    async fn from_data(field: DataField<'v, '_>) -> Result<'v, Self> {\r\n-       Err(field.unexpected())?\r\n+       ... field.data.peek() ... field.data.peek_complete() ...\r\n+       ... from_utf8 ...\r\n+       ... Self::from_value(...)\r\n    }\r\n```\r\n\r\nI think this default impl wouldn't need to know anything about the actual type of T and I don't think it raises any trait coherence issues.\r\n\r\nMy alternative suggestion would be a macro which provides this implementation.  That is less legible but more flexibile; it would be possible to specify a custom data limit, box for when the limit was more than `peek` provides, etc.\r\n\r\n> What I would like to support is the following, which effectively expands to the above except with a custom validation error message:\r\n> \r\n> ```rust\r\n> #[derive(FromForm)]\r\n> #[field(validate = with(Token::from_str, \"Invalid token string.\")]\r\n> struct Token<'r>(&'r str);\r\n> ```\r\n\r\nI think this would be good but I think changing the provided `from_data` to one which uses `peek` and `from_value` would be good too.  And the latter is quite easy :-).  I think it achieves most of the benefit of your `from_field` plan.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/860610289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ijackson","id":2090772,"node_id":"MDQ6VXNlcjIwOTA3NzI=","avatar_url":"https://avatars.githubusercontent.com/u/2090772?v=4","gravatar_id":"","url":"https://api.github.com/users/ijackson","html_url":"https://github.com/ijackson","followers_url":"https://api.github.com/users/ijackson/followers","following_url":"https://api.github.com/users/ijackson/following{/other_user}","gists_url":"https://api.github.com/users/ijackson/gists{/gist_id}","starred_url":"https://api.github.com/users/ijackson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijackson/subscriptions","organizations_url":"https://api.github.com/users/ijackson/orgs","repos_url":"https://api.github.com/users/ijackson/repos","events_url":"https://api.github.com/users/ijackson/events{/privacy}","received_events_url":"https://api.github.com/users/ijackson/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/860722249","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-860722249","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":860722249,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDcyMjI0OQ==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-14T14:18:09Z","updated_at":"2021-06-14T14:18:09Z","body":"> I'm confused. Is this about my suggestion \"Have the default from_data read the data to a string\" ? I don't think this raises any coherence issues. Perhaps I wasn't sufficiently clear. I'm suggesting something like this\r\n\r\nSorry, I misunderstood what you were suggesting. The biggest issue here is that we have no idea what data limit to use. `peek()` reads at most 512 bytes. This may be more or less than the current maximum of a data field. I think this would be far too confusing even if it would be convenient.\r\n\r\n> I think this would be good but I think changing the provided `from_data` to one which uses `peek` and `from_value` would be good too. And the latter is quite easy :-). I think it achieves most of the benefit of your `from_field` plan.\r\n\r\nNote that the derive already exists. It needs minor extensions to be able to support that exact syntax. If you implemented `FromStr` (or anything `&str` -> `Token`), your use case would fit the solution, assuming you don't need a special data limit.\r\n\r\n> My alternative suggestion would be a macro which provides this implementation. That is less legible but more flexibile; it would be possible to specify a custom data limit, box for when the limit was more than `peek` provides, etc.\r\n\r\nThe `#[derive(FromForm)]` _is_ this macro.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/860722249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/860903421","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-860903421","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":860903421,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDkwMzQyMQ==","user":{"login":"ijackson","id":2090772,"node_id":"MDQ6VXNlcjIwOTA3NzI=","avatar_url":"https://avatars.githubusercontent.com/u/2090772?v=4","gravatar_id":"","url":"https://api.github.com/users/ijackson","html_url":"https://github.com/ijackson","followers_url":"https://api.github.com/users/ijackson/followers","following_url":"https://api.github.com/users/ijackson/following{/other_user}","gists_url":"https://api.github.com/users/ijackson/gists{/gist_id}","starred_url":"https://api.github.com/users/ijackson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijackson/subscriptions","organizations_url":"https://api.github.com/users/ijackson/orgs","repos_url":"https://api.github.com/users/ijackson/repos","events_url":"https://api.github.com/users/ijackson/events{/privacy}","received_events_url":"https://api.github.com/users/ijackson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-14T18:34:58Z","updated_at":"2021-06-14T18:34:58Z","body":"Thanks for your comments.  I think I need to go away and look at this again, especially at `#[derive(FromForm)]`.  I will do that and report back, probably after a few days.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/860903421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ijackson","id":2090772,"node_id":"MDQ6VXNlcjIwOTA3NzI=","avatar_url":"https://avatars.githubusercontent.com/u/2090772?v=4","gravatar_id":"","url":"https://api.github.com/users/ijackson","html_url":"https://github.com/ijackson","followers_url":"https://api.github.com/users/ijackson/followers","following_url":"https://api.github.com/users/ijackson/following{/other_user}","gists_url":"https://api.github.com/users/ijackson/gists{/gist_id}","starred_url":"https://api.github.com/users/ijackson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijackson/subscriptions","organizations_url":"https://api.github.com/users/ijackson/orgs","repos_url":"https://api.github.com/users/ijackson/repos","events_url":"https://api.github.com/users/ijackson/events{/privacy}","received_events_url":"https://api.github.com/users/ijackson/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/861933484","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-861933484","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":861933484,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MTkzMzQ4NA==","user":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-16T01:08:47Z","updated_at":"2021-06-16T01:08:47Z","body":"another motivating example to somehow handle Display / FromStr is (mongodb) bson::ObjectId.\r\n\r\ndue to previous rocket Form limitations i use custom wrapper type `Qs<T>` that serializes types using serde_qs & implements FromFormField + FromData.\r\nit's serde compatible so i can use `serde_with` crate like this:\r\n\r\n```\r\n#[derive(Serialize, Deserialize, Debug, Default)]\r\npub struct Filter {\r\n    #[serde(default, with = \"As::<Option<DisplayFromStr>>\")]\r\n    id_user: Option<ObjectId>,\r\n}\r\n\r\n#[get(\"/ticket/listing?<filter>\")]\r\npub async fn listing(\r\n    filter: Option<Qs<crate::ticket::listing::Filter>>,\r\n) -> AllResult {\r\n    let mut filter = filter.map(|f| f.into_inner()).unwrap_or_default();\r\n\r\n```\r\n\r\nor\r\n\r\n```\r\n#[get(\"/history/ticket?<ticket_id>\")]\r\npub async fn ticket(ticket_id: Qs<ObjectId>) -> AllResult {\r\n    let ticket_id = ticket_id.into_inner();\r\n\r\n```\r\n\r\nin an ideal world i would like to use first example with rocket's `#[derive(FromForm)]` & get rid of `into_inner` in second exaple - serialization strategy could be encoded in url.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/861933484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/861996511","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-861996511","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":861996511,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MTk5NjUxMQ==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-16T02:52:32Z","updated_at":"2021-06-16T02:54:54Z","body":"> due to previous rocket Form limitations i use custom wrapper type `Qs<T>` that serializes types using serde_qs & implements FromFormField + FromData.\r\n\r\nThis is a bad idea. Which limitations are you referring to? As far as I can tell, Rocket's form support is a superset of `serde_qs`. In fact, I haven't found more flexible or robust form support anyway.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/861996511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/862002987","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-862002987","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":862002987,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MjAwMjk4Nw==","user":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-16T03:08:20Z","updated_at":"2021-06-16T03:08:20Z","body":"> Rocket's form support is a superset of serde_qs\r\n\r\nyes, now it is (minus (de)serialization helpers?) & i'm looking to port from that abomination :). project from ~year ago; i needed nested forms in containers, easy handling of ObjectId & custom DateTime (de)serialization from/to string date was welcomed bonus.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/862002987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/862165613","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-862165613","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":862165613,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MjE2NTYxMw==","user":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-16T08:32:07Z","updated_at":"2021-06-16T08:32:07Z","body":"looking through source code, these are attributes/helpers i use:\r\n```\r\n    #[serde(default, with = \"As::<Option<DisplayFromStr>>\")]\r\n    id_user: Option<ObjectId>,\r\n    #[serde(default, with = \"datetime_dmy_opt\")] // should rewrite it using composable serde_with\r\n    tfrom: Option<DateTime<Utc>>,\r\n    #[serde(skip)]\r\n    data: FilterData,\r\n```\r\n\r\n`skip` is useful to store & reuse data between validation and rendering for example for selectbox with items stored in db","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/862165613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/868758126","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-868758126","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":868758126,"node_id":"MDEyOklzc3VlQ29tbWVudDg2ODc1ODEyNg==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-25T18:34:19Z","updated_at":"2021-06-25T18:35:26Z","body":"> looking through source code, these are attributes/helpers i use:\r\n> \r\n> ```\r\n>     #[serde(default, with = \"As::<Option<DisplayFromStr>>\")]\r\n>     id_user: Option<ObjectId>,\r\n>     #[serde(default, with = \"datetime_dmy_opt\")] // should rewrite it using composable serde_with\r\n>     tfrom: Option<DateTime<Utc>>,\r\n>     #[serde(skip)]\r\n>     data: FilterData,\r\n> ```\r\n> \r\n> `skip` is useful to store & reuse data between validation and rendering for example for selectbox with items stored in db\r\n\r\nDefaults are built into Rocket's form handling. Your `ObjectId` would just need to implement (likely derive) `FromForm` or `FromFormValue`.\r\n\r\nThere's direct support for `time::DateTime` as well. No need for an attribute.\r\n\r\nThere's no skipping, but if the value implements `default`, it'll just work. You'd still need to implement `FromForm`, perhaps by always throwing an error to prevent submission of the field. But I'm curious if you need it with the existence of `Context` and `Contextual`. Can you elaborate?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/868758126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/868806918","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-868806918","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":868806918,"node_id":"MDEyOklzc3VlQ29tbWVudDg2ODgwNjkxOA==","user":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-25T20:08:23Z","updated_at":"2021-06-25T20:08:23Z","body":"> Your ObjectId would just need to implement (likely derive) FromForm or FromFormValue.\r\n\r\nsadly it's in third party `bson` (mongodb) crate.\r\n\r\n> There's direct support for time::DateTime as well. No need for an attribute.\r\n\r\nlooks like it's not possible to use custom format, but i can live with that.\r\n\r\n> But I'm curious if you need it with the existence of Context and Contextual. \r\n\r\nlooking at the [example](https://github.com/SergioBenitez/Rocket/tree/master/examples/forms) mentioned in documentation, i'm not sure how it will help. more complete example:\r\n\r\n```rust\r\n#[derive(Serialize, Deserialize, Debug, Default)]\r\npub struct Filter {\r\n    #[serde(default, with = \"As::<Option<DisplayFromStr>>\")]\r\n    id_user: Option<ObjectId>,\r\n    ...\r\n \r\n    #[serde(skip)]\r\n    data: FilterData,\r\n}\r\n\r\n#[derive(Debug, Default)]\r\nstruct FilterData {\r\n    users: Vec<(ObjectId, String)>,\r\n    ...\r\n\r\n    doc: Document,\r\n}\r\n\r\n\r\nimpl Filter {\r\n    async fn init_and_validate(&mut self, me: ME, owner: &str, st: &AllState) -> Result<()> {\r\n        self.data.users = st.users.get4selectbox(me, owner).await;\r\n        if let Some(id_user) = self.id_user.as_ref() {\r\n            self.data.users.iter().find(|u| u.0 == *id_user).context(\"invalid id_user\")?;\r\n            self.data.doc.insert(\"id_user\", id_user);\r\n        }\r\n        ...\r\n\r\n        Ok(())\r\n    }\r\n\r\n    fn render<'b>(&self, uri: String, tmpl: &mut TemplateBuffer<'b>) {\r\n        tmpl << html! {\r\n            form(action=uri, method=\"POST\") {\r\n                div(class=\"form-row align-items-center justify-content-center\") {\r\n                    div(class=\"col-auto\") {\r\n                        select(name=\"id_user\", class=\"form-control\") {\r\n                            option(value=\"\") : \"User...\";\r\n                            @ for (id, login) in self.data.users.iter() {\r\n                                option(value=id.to_string(), selected?=self.id_user.contains(id)) : login;\r\n                            }\r\n                        }\r\n                    }\r\n                    ...\r\n                    div(class=\"col-auto\") {\r\n                        button(type=\"submit\", class=\"btn btn-primary\") : \"Filter\";\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }\r\n```\r\n\r\n=> `filter.init_and_validate` loads and stores active users in `filter.data.users`, validates selected `id_user` & generates `filter.data.doc` (mongodb `Document`) that i than pass to my monstrous `Grid` component. `filter.data.users` are than used again in `form.render`. i'm using it more like component than POD - probably not as intended, but it's nicely encapsulated.\r\n\r\n```rust\r\n#[get(\"/ticket/listing?<grid_state>&<filter>\")]\r\npub async fn listing(\r\n    st: &State<AllState>,\r\n    user: User,\r\n    grid_state: Option<Qs<GridState<crate::mongo::ObjectId>>>,\r\n    filter: Option<Qs<crate::ticket::listing::Filter>>,\r\n    flash: Option<FlashMessage<'_>>,\r\n) -> AllResult {\r\n    let mut filter = filter.map(|f| f.into_inner()).unwrap_or_default();\r\n    filter.init_and_validate(user.me, &user.owner, &st).await?;\r\n    let grid = Grid::new(\r\n        |state| uri!(listing(Some(state), Some(&filter))).to_string(),\r\n        MongoModel { collection: st.get_owner_db(&user.owner).collection(\"ticket\"), filter: filter.data.doc.clone() },\r\n    ...\r\n    render_with_filter(\r\n        \"Tickets\",\r\n        flash,\r\n        &user,\r\n        html! {\r\n            |tmpl| {\r\n                filter.render(uri!(listing_filter(Some(GridState { page: 0, sort, action: None }))).to_string(), tmpl);\r\n            }\r\n        },\r\n        html! {\r\n            : grid;\r\n            : format!(\"{:#?}\", filter.data.doc);\r\n        },\r\n    )\r\n}\r\n```\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/868806918/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/869073502","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-869073502","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":869073502,"node_id":"MDEyOklzc3VlQ29tbWVudDg2OTA3MzUwMg==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-26T23:27:27Z","updated_at":"2021-06-26T23:27:27Z","body":"> > Your ObjectId would just need to implement (likely derive) FromForm or FromFormValue.\n> \n> \n> \n> sadly it's in third party `bson` (mongodb) crate.\n\nIf it implements Deserialize, you can use a field of `Json<ObjectId>` to deserialize from a JSON representation. \n\n\n> > There's direct support for time::DateTime as well. No need for an attribute.\n> \n> \n> \n> looks like it's not possible to use custom format, but i can live with that.\n\nThere is only one set of standard formats for HTTP forms. That is what we support. \n\nAs for `FilterData`, I can't say I follow exactly what you're doing with it, but at a glance, it doesn't seem like there's a reason why it's a field of the form structure. This seems like concerns aren't being properly separated. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/869073502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/869221050","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-869221050","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":869221050,"node_id":"MDEyOklzc3VlQ29tbWVudDg2OTIyMTA1MA==","user":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-27T20:41:50Z","updated_at":"2021-06-27T20:41:50Z","body":">  This seems like concerns aren't being properly separated.\r\n\r\nfrom the POD de/serialization point of view it's true, but if you count in validation (& possibly rendering), than it is reasonable to expect that form should somehow store (valid) selectbox values. however, i can pass that data around, it's just tedious.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/869221050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/869384288","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-869384288","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":869384288,"node_id":"MDEyOklzc3VlQ29tbWVudDg2OTM4NDI4OA==","user":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-28T06:07:23Z","updated_at":"2021-06-28T06:07:23Z","body":"> If it implements Deserialize, you can use a field of Json<ObjectId> to deserialize from a JSON representation.\r\n\r\nthank you, `Json` looks great :). aside from some issues around my generic `Grid` component (\r\n```implementation of `FromForm` is not general enough\\n`Tid` must implement `FromForm<'_>`\\n...but it actually implements `FromForm<'__f>```?), it looks like that the only thing i will need  is `impl UriDisplay` for `Json` & `Date`.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/869384288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/869412342","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-869412342","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":869412342,"node_id":"MDEyOklzc3VlQ29tbWVudDg2OTQxMjM0Mg==","user":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-28T06:58:21Z","updated_at":"2021-06-28T06:58:21Z","body":"it looks like the problem with lifetimes is in DeserializeOwned? ( + it would be great if `Json` could have `#[derive(Clone)]`.)\r\n\r\nminimal example:\r\n\r\n```rust\r\nuse serde::{de::DeserializeOwned, Deserialize, Serialize};\r\nuse rocket::{\r\n    form::{Form, FromForm},\r\n    response::Redirect,\r\n    serde::json::Json,\r\n};\r\n\r\n#[derive(Deserialize, Serialize, Clone)]\r\nstruct Id;\r\n\r\n// #[derive(UriDisplayQuery, Clone)]\r\n#[derive(FromForm, Debug)]\r\npub struct Generic<Tid>\r\nwhere\r\n    Tid: DeserializeOwned + Serialize + Clone,\r\n{\r\n    // t: Option<Date>,\r\n    id: Json<Tid>,\r\n}\r\n\r\n#[post(\"/test_form\", data = \"<filter>\")]\r\npub async fn test_form<'r>(filter: Form<Generic<Id>>) -> Redirect {\r\n    // Redirect::to(uri!(test_query(Some(filter.into_inner()))))\r\n    todo!()\r\n}\r\n\r\n#[get(\"/test_query?<filter>\")]\r\npub async fn test_query(filter: Option<Generic<Id>>) -> String {\r\n    todo!()\r\n}\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/869412342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4953065809,"node_id":"MDExOkNsb3NlZEV2ZW50NDk1MzA2NTgwOQ==","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/4953065809","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"793f4217129c513aaa65fc0d00851af5250cfdde","commit_url":"https://api.github.com/repos/rwf2/Rocket/commits/793f4217129c513aaa65fc0d00851af5250cfdde","created_at":"2021-06-29T11:56:34Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/870531121","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-870531121","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":870531121,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MDUzMTEyMQ==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-29T11:58:38Z","updated_at":"2021-06-29T11:58:38Z","body":"@univerz The derive didn't really support type generics, but it does now. This should just work:\r\n\r\n```rust\r\n#[derive(FromForm, UriDisplayQuery, Clone, Debug)]\r\npub struct Generic<Tid> {\r\n    id: Json<Tid>,\r\n}\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/870531121/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4953077071,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDk1MzA3NzA3MQ==","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/4953077071","actor":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-06-29T11:58:39Z","performed_via_github_app":null},{"id":4953077074,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ5NTMwNzcwNzQ=","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/4953077074","actor":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-06-29T11:58:39Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/871120781","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-871120781","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":871120781,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MTEyMDc4MQ==","user":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-30T06:03:38Z","updated_at":"2021-06-30T06:03:38Z","body":"thank you @SergioBenitez! getting really close :).\r\n\r\nif you uncomment line with `Redirect` == generate url, you will see that rocket is forcing `UriDisplay` on `Id`. i have noticed commit where you implemented:\r\n\r\n`impl<T: fmt::UriDisplay<fmt::Query>> fmt::UriDisplay<fmt::Query> for Json<T> {`\r\n\r\nbut for `Json<T>` to work as workaround wrapper around serde (de)serializable types, i'll need:\r\n\r\n`impl<T: Serialize> fmt::UriDisplay<fmt::Query> for Json<T> {`\r\n\r\nbut there is something else going on around `FromUriParam`, i'm not sure what to do. i have expanded example to include `Json<Id>` as simplified parameter:\r\n\r\n```rust\r\n#[derive(Deserialize, Serialize, Clone)]\r\npub struct Id;\r\n\r\n#[derive(UriDisplayQuery, Clone, FromForm, Debug)]\r\npub struct Generic<Tid: Serialize> {\r\n    t: Option<Date>,\r\n    id: Json<Tid>,\r\n}\r\n\r\n#[post(\"/test_form\", data = \"<filter>\")]\r\npub async fn test_form<'r>(filter: Form<Generic<Id>>) -> Redirect {\r\n    Redirect::to(uri!(test_query(Some(filter.into_inner()), Id)))\r\n}\r\n\r\n#[get(\"/test_query?<filter>&<id>\")]\r\npub async fn test_query(filter: Option<Generic<Id>>, id: Json<Id>) -> String {\r\n    todo!()\r\n}\r\n```\r\n\r\n& comparing with my `Qs` hack, it looks like i need `impl<T: Serialize> FromUriParam<Query, T> for Json<T>` (+ for `&T` & `Json<T>` for ergonomics). with that `Json<Id`> works, but it's not enough for `Option<Generic<Id>>` (but works for Generic without type parameter & `id: Json<Id>`).\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/871120781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4957429909,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDk1NzQyOTkwOQ==","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/4957429909","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-06-30T06:03:38Z","performed_via_github_app":null},{"id":4957429913,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ5NTc0Mjk5MTM=","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/4957429913","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-06-30T06:03:39Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/871123348","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-871123348","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":871123348,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MTEyMzM0OA==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-30T06:08:59Z","updated_at":"2021-06-30T06:08:59Z","body":"> but for `Json<T>` to work as workaround wrapper around serde (de)serializable types, i'll need:\r\n> \r\n> `impl<T: Serialize> fmt::UriDisplay<fmt::Query> for Json<T> {`\r\n\r\nThis isn't possible. `T` _must_ implement `fmt::UriDisplay<fmt::Query>`. Implementing `UriDisplay<Query>` isn't necessary for implementing `FromForm`. There is no workaround and there will never be. If you need to, you should implement `UriDisplay<Query>` for your wrapper type manually.\r\n\r\n> but there is something else going on around `FromUriParam`, i'm not sure what to do. i have expanded example to include `Json<Id>` as simplified parameter:\r\n\r\nPlease see the docs. Specifically, https://api.rocket.rs/v0.5-rc/rocket/http/uri/fmt/trait.FromUriParam.html and https://api.rocket.rs/v0.5-rc/rocket/http/uri/fmt/trait.UriDisplay.html. The error message you're getting is an unfortunate message that rustc emits.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/871123348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/871249812","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-871249812","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":871249812,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MTI0OTgxMg==","user":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-30T09:38:04Z","updated_at":"2021-06-30T09:38:04Z","body":"> This isn't possible. \r\n\r\nhmm, this part actually works & i have tested it (together with `FromUriParam`).\r\n\r\nin `form::FromFormField<'v> for Json<T>` rocket expects `T` serialized as json string & `UriDisplay` looks like a place where the symetric serialization should be done for `T` when using `Json` as query parameter. otherwise rocket generates invalid url like `\"/test_query?filter.f=foo\"` when `\"/test_query?filter=%7B%22f%22:%22foo%22%7D\"` is expected.\r\n\r\n```rust\r\n#[derive(UriDisplayQuery, Serialize, Deserialize, Debug)]\r\npub struct F {\r\n    f: String,\r\n}\r\n#[get(\"/test_query?<filter>\")]\r\npub async fn test_query(filter: Json<F>) -> () {\r\n    dbg!((filter, uri!(test_query(F { f: \"foo\".to_string() })).to_string()));\r\n}\r\n```\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/871249812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/871352151","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-871352151","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":871352151,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MTM1MjE1MQ==","user":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-30T12:16:12Z","updated_at":"2021-06-30T12:16:12Z","body":"> If you need to, you should implement UriDisplay<Query> for your wrapper type manually.\r\n\r\nto clarify, i'm trying to use `Json<T>` as the wrapper that would work everywhere & for every datatype that derives serde, when it's not possible or a good idea to derive Rockets custom (de)serialization traits.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/871352151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/871405797","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-871405797","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":871405797,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MTQwNTc5Nw==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-30T13:29:33Z","updated_at":"2021-06-30T13:29:33Z","body":"> in `form::FromFormField<'v> for Json<T>` rocket expects `T` serialized as json string & `UriDisplay` looks like a place where the symetric serialization should be done for `T` when using `Json` as query parameter. otherwise rocket generates invalid url like `\"/test_query?filter.f=foo\"` when `\"/test_query?filter=%7B%22f%22:%22foo%22%7D\"` is expected.\r\n\r\nYou're absolutely right! I'll be pushing a fix shortly.\r\n\r\n> to clarify, i'm trying to use `Json<T>` as the wrapper that would work everywhere & for every datatype that derives serde, when it's not possible or a good idea to derive Rockets custom (de)serialization traits.\r\n\r\nI just want to note that you should only use `Json<T>` in this way sparingly as it comes at a (relatively) rather high cost in all directions. For instance, the `UriDisplay` implementation indeed has to first serialize into JSON (an allocation), then percent encode (another allocation), and then write out the string.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/871405797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/872027473","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-872027473","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":872027473,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MjAyNzQ3Mw==","user":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-01T08:12:10Z","updated_at":"2021-07-01T14:38:06Z","body":"> I'll be pushing a fix shortly.\r\n\r\nthanky you :). i have noticed some relevant commits, is it expected to work? if yes, could you please try this slightly expanded previous example?\r\n\r\n```rust\r\nuse rocket::{\r\n    form::{Form, FromForm},\r\n    serde::json::Json,\r\n};\r\nuse serde::{Deserialize, Serialize};\r\nuse time::Date;\r\n\r\n#[derive(Deserialize, Serialize, Clone, Debug)]\r\npub struct Id;\r\n\r\n#[derive(UriDisplayQuery, Clone, FromForm, Debug)]\r\npub struct Generic<Tid> {\r\n    t: Option<Date>,\r\n    id: Json<Tid>,\r\n}\r\n\r\n#[post(\"/test_form\", data = \"<filter>\")]\r\npub async fn test_form<'r>(filter: Form<Generic<Id>>) -> () {\r\n    let filter = Some(filter.into_inner());\r\n    uri!(test_query(filter, Json(Id)));\r\n    uri!(test_query(filter, Id));\r\n    uri!(test_query(filter, &Id));\r\n}\r\n\r\n#[get(\"/test_query?<filter>&<id>\")]\r\npub async fn test_query(filter: Option<Generic<Id>>, id: Json<Id>) -> String {\r\n    todo!()\r\n}\r\n```\r\n\r\n(rocket rev = \"416f42b\")\r\n```\r\nerror: invalid type bounds: expected `,`\r\n  --> allnet/src/ticket/listing.rs:39:5\r\n   |\r\n39 |     id: Json<Tid>,\r\n   |     ^^^^^^^^^^^^^\r\n```\r\n\r\n\\+ `FromUriParam` errors - for `Json<Id>` it's simple, but error for `Generic` is what puzzled me a few comments back.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/872027473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/872253348","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-872253348","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":872253348,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MjI1MzM0OA==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-01T13:35:20Z","updated_at":"2021-07-01T13:35:20Z","body":"> thanky you :). i have noticed some relevant commits, is it expected to work? if yes, could you please try this slightly expanded previous example?\r\n\r\nNo, but now it is.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/872253348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/872307397","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-872307397","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":872307397,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MjMwNzM5Nw==","user":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-01T14:44:36Z","updated_at":"2021-07-01T14:44:36Z","body":"> now it is.\r\n\r\nwow, i was really worried about that problem with Generic.\r\n\r\nbut there is still one missing piece for `Json<T>`. inspired with code for `Option<T>` i have implemented something like this for my qs wrapper, probably it's possibel to write it better:\r\n\r\n\r\n```rust\r\nimpl<T: Serialize> uri::fmt::FromUriParam<uri::fmt::Query, Json<T>> for Json<T> {\r\n    type Target = Json<T>;\r\n\r\n    #[inline(always)]\r\n    fn from_uri_param(param: Json<T>) -> Self::Target {\r\n        param\r\n    }\r\n}\r\n\r\nimpl<T: Serialize> uri::fmt::FromUriParam<uri::fmt::Query, T> for Json<T> {\r\n    type Target = Json<T>;\r\n\r\n    #[inline(always)]\r\n    fn from_uri_param(param: T) -> Self::Target {\r\n        Json(param)\r\n    }\r\n}\r\n\r\nimpl<'a, T: Serialize> uri::fmt::FromUriParam<uri::fmt::Query, &'a T> for Json<T> {\r\n    type Target = Json<&'a T>;\r\n\r\n    #[inline(always)]\r\n    fn from_uri_param(param: &'a T) -> Self::Target {\r\n        Json(&param)\r\n    }\r\n}\r\n```\r\n\r\nwith that my example & probably all other code will work.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/872307397/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/872504020","html_url":"https://github.com/rwf2/Rocket/issues/1695#issuecomment-872504020","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1695","id":872504020,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MjUwNDAyMA==","user":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-01T19:43:57Z","updated_at":"2021-07-01T19:43:57Z","body":"porting going well, but i have just found one small difference in deserialization - for type `s: Option<String>` & data `s=` (== empty value in selectbox), rocket decodes `Some(\"\")`, but serde_qs `None`. i understand rocket's point of view, but `None` behaviour is somewhat nicer - there is no need to check for emptyness & when later used in url as query parameter, serialization can be skipped","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/872504020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"univerz","id":1024741,"node_id":"MDQ6VXNlcjEwMjQ3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1024741?v=4","gravatar_id":"","url":"https://api.github.com/users/univerz","html_url":"https://github.com/univerz","followers_url":"https://api.github.com/users/univerz/followers","following_url":"https://api.github.com/users/univerz/following{/other_user}","gists_url":"https://api.github.com/users/univerz/gists{/gist_id}","starred_url":"https://api.github.com/users/univerz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/univerz/subscriptions","organizations_url":"https://api.github.com/users/univerz/orgs","repos_url":"https://api.github.com/users/univerz/repos","events_url":"https://api.github.com/users/univerz/events{/privacy}","received_events_url":"https://api.github.com/users/univerz/received_events","type":"User","user_view_type":"public","site_admin":false}}]