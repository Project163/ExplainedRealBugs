{"url":"https://api.github.com/repos/rwf2/Rocket/issues/1263","repository_url":"https://api.github.com/repos/rwf2/Rocket","labels_url":"https://api.github.com/repos/rwf2/Rocket/issues/1263/labels{/name}","comments_url":"https://api.github.com/repos/rwf2/Rocket/issues/1263/comments","events_url":"https://api.github.com/repos/rwf2/Rocket/issues/1263/events","html_url":"https://github.com/rwf2/Rocket/issues/1263","id":591061461,"node_id":"MDU6SXNzdWU1OTEwNjE0NjE=","number":1263,"title":"Wrong flash message when name is numeric","user":{"login":"ThibaudDauce","id":1770543,"node_id":"MDQ6VXNlcjE3NzA1NDM=","avatar_url":"https://avatars.githubusercontent.com/u/1770543?v=4","gravatar_id":"","url":"https://api.github.com/users/ThibaudDauce","html_url":"https://github.com/ThibaudDauce","followers_url":"https://api.github.com/users/ThibaudDauce/followers","following_url":"https://api.github.com/users/ThibaudDauce/following{/other_user}","gists_url":"https://api.github.com/users/ThibaudDauce/gists{/gist_id}","starred_url":"https://api.github.com/users/ThibaudDauce/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThibaudDauce/subscriptions","organizations_url":"https://api.github.com/users/ThibaudDauce/orgs","repos_url":"https://api.github.com/users/ThibaudDauce/repos","events_url":"https://api.github.com/users/ThibaudDauce/events{/privacy}","received_events_url":"https://api.github.com/users/ThibaudDauce/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":343542064,"node_id":"MDU6TGFiZWwzNDM1NDIwNjQ=","url":"https://api.github.com/repos/rwf2/Rocket/labels/bug","name":"bug","color":"B60205","default":true,"description":"Deviation from the specification or expected behavior"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-03-31T12:19:31Z","updated_at":"2020-05-17T01:20:25Z","closed_at":"2020-05-17T01:20:25Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi,\r\n\r\nI'm using Rocket v0.4.4. My code is available in https://gitlab.com/thibauddauce/youtube-rust-rocket/-/commit/ae858382ac3b85b51fa9c77d04febffe73829f43.\r\n\r\nWhen I set the flash name as an integer, the flash message is split in the following request.\r\n\r\n```rust\r\n#[get(\"/create_flash\")]\r\nfn create_flash() -> Flash<Redirect> {\r\n    let id = 1;\r\n\r\n    let flash = Flash::new(Redirect::to(\"/show_flash\"), id.to_string(), \"Some very long text\");\r\n\r\n    dbg!(&flash);\r\n\r\n    flash\r\n}\r\n\r\n#[get(\"/show_flash\")]\r\nfn show_flash(flash: Option<FlashMessage>) {\r\n    let flash_content = flash.unwrap();\r\n\r\n    dbg!(flash_content.name());\r\n    dbg!(flash_content.msg());\r\n}\r\n``` \r\n\r\nThe result:\r\n\r\n```\r\nGET /create_flash text/html:\r\n    => Matched: GET /create_flash (create_flash)\r\n[src/main.rs:77] &flash = Flash {\r\n    name: \"1\",\r\n    message: \"Some really long text\",\r\n    consumed: false,\r\n    inner: Redirect(\r\n        Status {\r\n            code: 303,\r\n            reason: \"See Other\",\r\n        },\r\n        Some(\r\n            Origin(\r\n                Origin {\r\n                    source: Some(\r\n                        \"/show_flash\",\r\n                    ),\r\n                    path: (\r\n                        0,\r\n                        11,\r\n                    ),\r\n                    query: None,\r\n                    segment_count: [uninitialized storage],\r\n                },\r\n            ),\r\n        ),\r\n    ),\r\n}\r\n    => Outcome: Success\r\n    => Response succeeded.\r\nGET /show_flash text/html:\r\n    => Matched: GET /show_flash (show_flash)\r\n[src/main.rs:86] flash_content.name() = \"Some really\"\r\n[src/main.rs:87] flash_content.msg() = \" long text\"\r\n    => Outcome: Success\r\n    => Response succeeded.\r\n```\r\n\r\nIf the flash message is shorter like \"Some text\", the flash is not set.\r\n\r\n```\r\nGET /create_flash text/html:\r\n    => Matched: GET /create_flash (create_flash)\r\n[src/main.rs:77] &flash = Flash {\r\n    name: \"1\",\r\n    message: \"Some text\",\r\n…\r\n}\r\n    => Outcome: Success\r\n    => Response succeeded.\r\nGET /show_flash text/html:\r\n    => Matched: GET /show_flash (show_flash)\r\nthread '<unnamed>' panicked at 'called `Option::unwrap()` on a `None` value', src/main.rs:84:25\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n```\r\n\r\nIf the name is `9` the split happen later:\r\n```\r\nGET /create_flash text/html:\r\n    => Matched: GET /create_flash (create_flash)\r\n[src/main.rs:77] &flash = Flash {\r\n    name: \"9\",\r\n    message: \"Some really really really long text Some really really really long text\",\r\n…\r\n}\r\n    => Outcome: Success\r\n    => Response succeeded.\r\nGET /show_flash text/html:\r\n    => Matched: GET /show_flash (show_flash)\r\n[src/main.rs:86] flash_content.name() = \"Some really really \"\r\n[src/main.rs:87] flash_content.msg() = \"really long text Some really really really long text\"\r\n    => Outcome: Success\r\n    => Response succeeded.\r\n```\r\n\r\nIf the name is `10` the flash is not set:\r\n```\r\nGET /create_flash text/html:\r\n    => Matched: GET /create_flash (create_flash)\r\n[src/main.rs:77] &flash = Flash {\r\n    name: \"10\",\r\n    message: \"Some really really really long text Some really really really long text\",\r\n…\r\n    => Outcome: Success\r\n    => Response succeeded.\r\nGET /show_flash text/html:\r\n    => Matched: GET /show_flash (show_flash)\r\nthread '<unnamed>' panicked at 'called `Option::unwrap()` on a `None` value', src/main.rs:84:25\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n```\r\n\r\nIf the name is \"1a\" (not numeric) the split is even weirder:\r\n```\r\nGET /create_flash text/html:\r\n    => Matched: GET /create_flash (create_flash)\r\n[src/main.rs:75] &flash = Flash {\r\n    name: \"1a\",\r\n    message: \"Some really really really long text Some really really really long text\",\r\n…\r\n}\r\n    => Outcome: Success\r\n    => Response succeeded.\r\nGET /show_flash text/html:\r\n    => Matched: GET /show_flash (show_flash)\r\n[src/main.rs:84] flash_content.name() = \"aSome really really r\"\r\n[src/main.rs:85] flash_content.msg() = \"eally long text Some really really really long text\"\r\n    => Outcome: Success\r\n    => Response succeeded.\r\n```\r\n\r\nI really don't understand the problem. Don't hesitate if you need me to do additional checks.\r\n\r\nMy real problem is that I have multiple forms on my page, and I want to associate an ID to my flash message to show the message near the corresponding form. I don't know how to do that in Rocket. I thought using the `name` part to store the ID but it's not working :-D\r\n","closed_by":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/1263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rwf2/Rocket/issues/1263/timeline","performed_via_github_app":null,"state_reason":"completed"}