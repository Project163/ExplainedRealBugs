{"url":"https://api.github.com/repos/rwf2/Rocket/issues/2670","repository_url":"https://api.github.com/repos/rwf2/Rocket","labels_url":"https://api.github.com/repos/rwf2/Rocket/issues/2670/labels{/name}","comments_url":"https://api.github.com/repos/rwf2/Rocket/issues/2670/comments","events_url":"https://api.github.com/repos/rwf2/Rocket/issues/2670/events","html_url":"https://github.com/rwf2/Rocket/issues/2670","id":2034436414,"node_id":"I_kwDOAzqMt855Qwk-","number":2670,"title":"Build fails with rustc<=1.68.2","user":{"login":"H1rono","id":54711422,"node_id":"MDQ6VXNlcjU0NzExNDIy","avatar_url":"https://avatars.githubusercontent.com/u/54711422?v=4","gravatar_id":"","url":"https://api.github.com/users/H1rono","html_url":"https://github.com/H1rono","followers_url":"https://api.github.com/users/H1rono/followers","following_url":"https://api.github.com/users/H1rono/following{/other_user}","gists_url":"https://api.github.com/users/H1rono/gists{/gist_id}","starred_url":"https://api.github.com/users/H1rono/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/H1rono/subscriptions","organizations_url":"https://api.github.com/users/H1rono/orgs","repos_url":"https://api.github.com/users/H1rono/repos","events_url":"https://api.github.com/users/H1rono/events{/privacy}","received_events_url":"https://api.github.com/users/H1rono/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":567172509,"node_id":"MDU6TGFiZWw1NjcxNzI1MDk=","url":"https://api.github.com/repos/rwf2/Rocket/labels/upstream","name":"upstream","color":"cfd3d7","default":false,"description":"An unresolvable issue: an upstream dependency bug"},{"id":758541123,"node_id":"MDU6TGFiZWw3NTg1NDExMjM=","url":"https://api.github.com/repos/rwf2/Rocket/labels/deficiency","name":"deficiency","color":"D93F0B","default":false,"description":"Something doesn't work as well as it could"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-12-10T16:18:34Z","updated_at":"2023-12-14T01:55:40Z","closed_at":"2023-12-14T01:55:40Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Rocket Version\n\n0.5.0\n\n### Operating System\n\nmacOS 14.1.2, ubuntu-latest in GitHub Actions\n\n### Rust Toolchain Version\n\nrustc 1.68.2 (9eb3afe9e 2023-03-27)\n\n### What happened?\n\nWith rustc version <=1.68.2, compilation fails [like this CI failure](https://github.com/H1rono/rocket-sandbox/actions/runs/7158845779/job/19491411434).\n\n### Test Case\n\n```rust\n// just include `rocket = \"0.5.0\"` in Cargo.toml\r\nfn main() {\r\n    println!(\"Hello, world!\")\r\n}\n```\n\n\n### Log Output\n\n```shell\nerror[E0061]: this function takes 1 argument but 0 arguments were supplied\r\n  --> /Users/kh/.cargo/registry/src/github.com-1ecc6299db9ec823/rocket-0.5.0/src/server.rs:76:5\r\n   |\r\n76 |     debug!(\"Received request: {:#?}\", hyp_req);\r\n   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ an argument of type `UnsafeArg` is missing\r\n   |\r\nnote: associated function defined here\r\n  --> /Users/kh/.cargo/registry/src/github.com-1ecc6299db9ec823/yansi-1.0.0-rc.1/src/paint.rs:56:8\r\n   |\r\n56 |     fn new(self) -> Painted<Self> where Self: Sized {\r\n   |        ^^^\r\n   = note: this error originates in the macro `$crate::__private_api::format_args` which comes from the expansion of the macro `debug` (in Nightly builds, run with -Z macro-backtrace for more info)\r\nhelp: provide the argument\r\n  --> /Users/kh/.cargo/registry/src/github.com-1ecc6299db9ec823/log-0.4.20/src/macros.rs:51:62\r\n   |\r\n51 |                 $crate::__private_api::format_args!($($arg)+)(/* UnsafeArg */),\r\n   |                                                              +++++++++++++++++\r\n\r\nerror[E0308]: mismatched types\r\n  --> /Users/kh/.cargo/registry/src/github.com-1ecc6299db9ec823/rocket-0.5.0/src/server.rs:76:5\r\n   |\r\n76 |     debug!(\"Received request: {:#?}\", hyp_req);\r\n   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected struct `UnsafeArg`, found struct `Painted`\r\n   |\r\n   = note: expected struct `UnsafeArg`\r\n              found struct `Painted<UnsafeArg>`\r\n   = note: this error originates in the macro `$crate::__private_api::format_args` which comes from the expansion of the macro `debug` (in Nightly builds, run with -Z macro-backtrace for more info)\r\n\r\nerror[E0061]: this function takes 1 argument but 0 arguments were supplied\r\n   --> /Users/kh/.cargo/registry/src/github.com-1ecc6299db9ec823/rocket-0.5.0/src/server.rs:163:9\r\n    |\r\n163 |         debug!(\"sending response: {:#?}\", hyp_response);\r\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ an argument of type `UnsafeArg` is missing\r\n    |\r\nnote: associated function defined here\r\n   --> /Users/kh/.cargo/registry/src/github.com-1ecc6299db9ec823/yansi-1.0.0-rc.1/src/paint.rs:56:8\r\n    |\r\n56  |     fn new(self) -> Painted<Self> where Self: Sized {\r\n    |        ^^^\r\n    = note: this error originates in the macro `$crate::__private_api::format_args` which comes from the expansion of the macro `debug` (in Nightly builds, run with -Z macro-backtrace for more info)\r\nhelp: provide the argument\r\n   --> |/Users/kh/.cargo/registry/src/github.com-1ecc6299db9ec823/log-0.4.20/src/macros.rs:51:62\r\n    |\r\n51  |                 $crate::__private_api::format_args!($($arg)+)(/* UnsafeArg */),\r\n    |                                                              +++++++++++++++++\r\n\r\nerror[E0308]: mismatched types\r\n   --> /Users/kh/.cargo/registry/src/github.com-1ecc6299db9ec823/rocket-0.5.0/src/server.rs:163:9\r\n    |\r\n163 |         debug!(\"sending response: {:#?}\", hyp_response);\r\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected struct `UnsafeArg`, found struct `Painted`\r\n    |\r\n    = note: expected struct `UnsafeArg`\r\n               found struct `Painted<UnsafeArg>`\r\n    = note: this error originates in the macro `$crate::__private_api::format_args` which comes from the expansion of the macro `debug` (in Nightly builds, run with -Z macro-backtrace for more info)\r\n\r\nSome errors have detailed explanations: E0061, E0308.\r\nFor more information about an error, try `rustc --explain E0061`.\r\nerror: could not compile `rocket` due to 4 previous errors\n```\n\n\n### Additional Context\n\nI guessed that some changes in 1.69.0 introduced this bug, so I digged [1.69.0 changes](https://releases.rs/docs/1.69.0/) but couldn't find any obvious one. :cry\n\n### System Checks\n\n- [X] My bug report relates to functionality.\n- [X] I have tested against the latest Rocket release or a recent git commit.\n- [X] I have tested against the latest stable `rustc` toolchain.\n- [X] I was unable to find this issue previously reported.","closed_by":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/2670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rwf2/Rocket/issues/2670/timeline","performed_via_github_app":null,"state_reason":"completed"}