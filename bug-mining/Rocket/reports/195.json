{"url":"https://api.github.com/repos/rwf2/Rocket/issues/2030","repository_url":"https://api.github.com/repos/rwf2/Rocket","labels_url":"https://api.github.com/repos/rwf2/Rocket/issues/2030/labels{/name}","comments_url":"https://api.github.com/repos/rwf2/Rocket/issues/2030/comments","events_url":"https://api.github.com/repos/rwf2/Rocket/issues/2030/events","html_url":"https://github.com/rwf2/Rocket/issues/2030","id":1084986663,"node_id":"I_kwDOAzqMt85Aq5Un","number":2030,"title":"Make HTTP/2 optional","user":{"login":"andreymal","id":3236464,"node_id":"MDQ6VXNlcjMyMzY0NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/3236464?v=4","gravatar_id":"","url":"https://api.github.com/users/andreymal","html_url":"https://github.com/andreymal","followers_url":"https://api.github.com/users/andreymal/followers","following_url":"https://api.github.com/users/andreymal/following{/other_user}","gists_url":"https://api.github.com/users/andreymal/gists{/gist_id}","starred_url":"https://api.github.com/users/andreymal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreymal/subscriptions","organizations_url":"https://api.github.com/users/andreymal/orgs","repos_url":"https://api.github.com/users/andreymal/repos","events_url":"https://api.github.com/users/andreymal/events{/privacy}","received_events_url":"https://api.github.com/users/andreymal/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":442158672,"node_id":"MDU6TGFiZWw0NDIxNTg2NzI=","url":"https://api.github.com/repos/rwf2/Rocket/labels/accepted","name":"accepted","color":"0E8A16","default":false,"description":"An accepted request or suggestion"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-12-20T16:33:14Z","updated_at":"2022-03-08T23:24:31Z","closed_at":"2022-03-08T23:24:31Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"HTTP/2 support is actually useless in some real-world cases, primarily when a web application is behind a proxy server like nginx (which uses HTTP/1.0 for proxying). Moreover, `h2` is one of the biggest crates in the resulting hello-world binary (~220-240 KiB according to \"cargo bloat --release\"). I would be happy if I could significantly reduce the size of the binary by disabling the feature that I never plan to use.\r\n\r\nIf I understand the code correctly, Rocket doesn't use `h2` directly but just has few configuration lines ([1](https://github.com/SergioBenitez/Rocket/blob/7ffe3a73601aabdfe3190a809e660538acd5bdce/core/lib/src/server.rs#L462), [2](https://github.com/SergioBenitez/Rocket/blob/7ffe3a73601aabdfe3190a809e660538acd5bdce/core/http/src/tls/listener.rs#L73)), so I hope it's easy to implement.\r\n\r\nSee also related PR in warp: https://github.com/seanmonstar/warp/pull/836\r\n\r\nUPD: also, axum has http2 feature disabed by default https://github.com/tokio-rs/axum/blob/axum-v0.4.3/axum/Cargo.toml#L16","closed_by":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/2030/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rwf2/Rocket/issues/2030/timeline","performed_via_github_app":null,"state_reason":"completed"}