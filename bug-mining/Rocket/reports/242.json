{"url":"https://api.github.com/repos/rwf2/Rocket/issues/2617","repository_url":"https://api.github.com/repos/rwf2/Rocket","labels_url":"https://api.github.com/repos/rwf2/Rocket/issues/2617/labels{/name}","comments_url":"https://api.github.com/repos/rwf2/Rocket/issues/2617/comments","events_url":"https://api.github.com/repos/rwf2/Rocket/issues/2617/events","html_url":"https://github.com/rwf2/Rocket/issues/2617","id":1904768702,"node_id":"I_kwDOAzqMt85xiHa-","number":2617,"title":"Bugs in negated `in` expressions","user":{"login":"gorosgobe","id":26676483,"node_id":"MDQ6VXNlcjI2Njc2NDgz","avatar_url":"https://avatars.githubusercontent.com/u/26676483?v=4","gravatar_id":"","url":"https://api.github.com/users/gorosgobe","html_url":"https://github.com/gorosgobe","followers_url":"https://api.github.com/users/gorosgobe/followers","following_url":"https://api.github.com/users/gorosgobe/following{/other_user}","gists_url":"https://api.github.com/users/gorosgobe/gists{/gist_id}","starred_url":"https://api.github.com/users/gorosgobe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gorosgobe/subscriptions","organizations_url":"https://api.github.com/users/gorosgobe/orgs","repos_url":"https://api.github.com/users/gorosgobe/repos","events_url":"https://api.github.com/users/gorosgobe/events{/privacy}","received_events_url":"https://api.github.com/users/gorosgobe/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":343542068,"node_id":"MDU6TGFiZWwzNDM1NDIwNjg=","url":"https://api.github.com/repos/rwf2/Rocket/labels/enhancement","name":"enhancement","color":"5319E7","default":true,"description":"A minor feature request"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-09-20T11:17:30Z","updated_at":"2023-09-20T20:56:47Z","closed_at":"2023-09-20T20:56:47Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Description**\r\n\r\n`in` and `instanceof` expressions in JS\r\n```js\r\na in obj;\r\na instanceof C;\r\n```\r\ncan be negated by grouping them and applying the `!` operator, i.e.\r\n\r\n```js\r\n!(a in obj);\r\n!(a instanceof C);\r\n```\r\n\r\nApplying the `!` operator incorrectly (on the LHS operand) leads to bugs:\r\n```js\r\n!a in obj; // will evaluate to false, unless obj has a \"true\" or \"false\" key\r\n!a instanceof C; // will evaluate to false, unless C overrides instanceof with a @@hasInstance method\r\n```\r\nFor more information, please see these [MDN docs](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof#not_an_instanceof) and [the no-unsafe-negation recommended Eslint rule](https://eslint.org/docs/latest/rules/no-unsafe-negation).\r\n\r\nI have found several potentially problematic instances of the above bugs in your codebase:\r\nhttps://github.com/SergioBenitez/Rocket/blob/26a3f00f82b6ddec2bbdb3ecb0c29d6ff0da7472/examples/chat/static/script.js#L97\r\n\r\n","closed_by":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/2617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rwf2/Rocket/issues/2617/timeline","performed_via_github_app":null,"state_reason":"completed"}