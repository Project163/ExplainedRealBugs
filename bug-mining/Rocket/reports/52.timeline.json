[{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/349567601","html_url":"https://github.com/rwf2/Rocket/issues/494#issuecomment-349567601","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/494","id":349567601,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTU2NzYwMQ==","user":{"login":"dtolnay","id":1940490,"node_id":"MDQ6VXNlcjE5NDA0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/1940490?v=4","gravatar_id":"","url":"https://api.github.com/users/dtolnay","html_url":"https://github.com/dtolnay","followers_url":"https://api.github.com/users/dtolnay/followers","following_url":"https://api.github.com/users/dtolnay/following{/other_user}","gists_url":"https://api.github.com/users/dtolnay/gists{/gist_id}","starred_url":"https://api.github.com/users/dtolnay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtolnay/subscriptions","organizations_url":"https://api.github.com/users/dtolnay/orgs","repos_url":"https://api.github.com/users/dtolnay/repos","events_url":"https://api.github.com/users/dtolnay/events{/privacy}","received_events_url":"https://api.github.com/users/dtolnay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T08:20:34Z","updated_at":"2017-12-06T08:20:34Z","body":"Same thing for these transmutes, which all assume `#[repr(C)]`.\r\n\r\n- `UncasedStr::into_uncased`\r\n- `Uncased::into_boxed_uncased`\r\n- `<&RawStr as From<&str>>::from`","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/349567601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dtolnay","id":1940490,"node_id":"MDQ6VXNlcjE5NDA0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/1940490?v=4","gravatar_id":"","url":"https://api.github.com/users/dtolnay","html_url":"https://github.com/dtolnay","followers_url":"https://api.github.com/users/dtolnay/followers","following_url":"https://api.github.com/users/dtolnay/following{/other_user}","gists_url":"https://api.github.com/users/dtolnay/gists{/gist_id}","starred_url":"https://api.github.com/users/dtolnay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtolnay/subscriptions","organizations_url":"https://api.github.com/users/dtolnay/orgs","repos_url":"https://api.github.com/users/dtolnay/repos","events_url":"https://api.github.com/users/dtolnay/events{/privacy}","received_events_url":"https://api.github.com/users/dtolnay/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/349660160","html_url":"https://github.com/rwf2/Rocket/issues/494#issuecomment-349660160","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/494","id":349660160,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTY2MDE2MA==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T14:44:52Z","updated_at":"2017-12-06T14:44:52Z","body":"@dtolnay Is there definitive documentation about this? If the layout isn't guaranteed to be the same, why does Rust allow the `*const str as *const UncasedStr` cast?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/349660160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1374914846,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTM3NDkxNDg0Ng==","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1374914846","actor":{"login":"dtolnay","id":1940490,"node_id":"MDQ6VXNlcjE5NDA0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/1940490?v=4","gravatar_id":"","url":"https://api.github.com/users/dtolnay","html_url":"https://github.com/dtolnay","followers_url":"https://api.github.com/users/dtolnay/followers","following_url":"https://api.github.com/users/dtolnay/following{/other_user}","gists_url":"https://api.github.com/users/dtolnay/gists{/gist_id}","starred_url":"https://api.github.com/users/dtolnay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtolnay/subscriptions","organizations_url":"https://api.github.com/users/dtolnay/orgs","repos_url":"https://api.github.com/users/dtolnay/repos","events_url":"https://api.github.com/users/dtolnay/events{/privacy}","received_events_url":"https://api.github.com/users/dtolnay/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-12-06T14:44:52Z","performed_via_github_app":null},{"id":1374914847,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDEzNzQ5MTQ4NDc=","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1374914847","actor":{"login":"dtolnay","id":1940490,"node_id":"MDQ6VXNlcjE5NDA0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/1940490?v=4","gravatar_id":"","url":"https://api.github.com/users/dtolnay","html_url":"https://github.com/dtolnay","followers_url":"https://api.github.com/users/dtolnay/followers","following_url":"https://api.github.com/users/dtolnay/following{/other_user}","gists_url":"https://api.github.com/users/dtolnay/gists{/gist_id}","starred_url":"https://api.github.com/users/dtolnay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtolnay/subscriptions","organizations_url":"https://api.github.com/users/dtolnay/orgs","repos_url":"https://api.github.com/users/dtolnay/repos","events_url":"https://api.github.com/users/dtolnay/events{/privacy}","received_events_url":"https://api.github.com/users/dtolnay/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-12-06T14:44:52Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/349684846","html_url":"https://github.com/rwf2/Rocket/issues/494#issuecomment-349684846","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/494","id":349684846,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTY4NDg0Ng==","user":{"login":"dtolnay","id":1940490,"node_id":"MDQ6VXNlcjE5NDA0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/1940490?v=4","gravatar_id":"","url":"https://api.github.com/users/dtolnay","html_url":"https://github.com/dtolnay","followers_url":"https://api.github.com/users/dtolnay/followers","following_url":"https://api.github.com/users/dtolnay/following{/other_user}","gists_url":"https://api.github.com/users/dtolnay/gists{/gist_id}","starred_url":"https://api.github.com/users/dtolnay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtolnay/subscriptions","organizations_url":"https://api.github.com/users/dtolnay/orgs","repos_url":"https://api.github.com/users/dtolnay/repos","events_url":"https://api.github.com/users/dtolnay/events{/privacy}","received_events_url":"https://api.github.com/users/dtolnay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T16:02:46Z","updated_at":"2017-12-06T16:02:46Z","body":"I believe nomicon's [*Alternative representations*](https://doc.rust-lang.org/nomicon/other-reprs.html) is definitive.\r\n\r\n> `#[repr(C)]` is also necessary to soundly do more elaborate tricks with data layout such as reinterpreting values as a different type.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/349684846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dtolnay","id":1940490,"node_id":"MDQ6VXNlcjE5NDA0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/1940490?v=4","gravatar_id":"","url":"https://api.github.com/users/dtolnay","html_url":"https://github.com/dtolnay","followers_url":"https://api.github.com/users/dtolnay/followers","following_url":"https://api.github.com/users/dtolnay/following{/other_user}","gists_url":"https://api.github.com/users/dtolnay/gists{/gist_id}","starred_url":"https://api.github.com/users/dtolnay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtolnay/subscriptions","organizations_url":"https://api.github.com/users/dtolnay/orgs","repos_url":"https://api.github.com/users/dtolnay/repos","events_url":"https://api.github.com/users/dtolnay/events{/privacy}","received_events_url":"https://api.github.com/users/dtolnay/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/349687407","html_url":"https://github.com/rwf2/Rocket/issues/494#issuecomment-349687407","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/494","id":349687407,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTY4NzQwNw==","user":{"login":"dtolnay","id":1940490,"node_id":"MDQ6VXNlcjE5NDA0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/1940490?v=4","gravatar_id":"","url":"https://api.github.com/users/dtolnay","html_url":"https://github.com/dtolnay","followers_url":"https://api.github.com/users/dtolnay/followers","following_url":"https://api.github.com/users/dtolnay/following{/other_user}","gists_url":"https://api.github.com/users/dtolnay/gists{/gist_id}","starred_url":"https://api.github.com/users/dtolnay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtolnay/subscriptions","organizations_url":"https://api.github.com/users/dtolnay/orgs","repos_url":"https://api.github.com/users/dtolnay/repos","events_url":"https://api.github.com/users/dtolnay/events{/privacy}","received_events_url":"https://api.github.com/users/dtolnay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T16:09:50Z","updated_at":"2017-12-06T16:09:50Z","body":"Pointer casting is allowed across types that have a different layout but dereferencing the pointer is normally undefined.\r\n\r\n```rust\r\n// Does not have the same layout as str.\r\nstruct Sergio {\r\n    repr: char,\r\n}\r\n\r\nfn main() {\r\n    let p: *const str = \"C\";\r\n    println!(\"{:p}\", p as *const Sergio);\r\n}\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/349687407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dtolnay","id":1940490,"node_id":"MDQ6VXNlcjE5NDA0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/1940490?v=4","gravatar_id":"","url":"https://api.github.com/users/dtolnay","html_url":"https://github.com/dtolnay","followers_url":"https://api.github.com/users/dtolnay/followers","following_url":"https://api.github.com/users/dtolnay/following{/other_user}","gists_url":"https://api.github.com/users/dtolnay/gists{/gist_id}","starred_url":"https://api.github.com/users/dtolnay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtolnay/subscriptions","organizations_url":"https://api.github.com/users/dtolnay/orgs","repos_url":"https://api.github.com/users/dtolnay/repos","events_url":"https://api.github.com/users/dtolnay/events{/privacy}","received_events_url":"https://api.github.com/users/dtolnay/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/349689951","html_url":"https://github.com/rwf2/Rocket/issues/494#issuecomment-349689951","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/494","id":349689951,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTY4OTk1MQ==","user":{"login":"tesaguri","id":16436551,"node_id":"MDQ6VXNlcjE2NDM2NTUx","avatar_url":"https://avatars.githubusercontent.com/u/16436551?v=4","gravatar_id":"","url":"https://api.github.com/users/tesaguri","html_url":"https://github.com/tesaguri","followers_url":"https://api.github.com/users/tesaguri/followers","following_url":"https://api.github.com/users/tesaguri/following{/other_user}","gists_url":"https://api.github.com/users/tesaguri/gists{/gist_id}","starred_url":"https://api.github.com/users/tesaguri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tesaguri/subscriptions","organizations_url":"https://api.github.com/users/tesaguri/orgs","repos_url":"https://api.github.com/users/tesaguri/repos","events_url":"https://api.github.com/users/tesaguri/events{/privacy}","received_events_url":"https://api.github.com/users/tesaguri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T16:17:08Z","updated_at":"2017-12-06T16:39:11Z","body":"FYI, [`transmute::<T, U>`] requires `T` and `U` to have the same size, which is more strict than pointer casting.\r\n\r\n```rust\r\nstruct Sergio {\r\n    repr: char,\r\n}\r\n\r\nfn main() {\r\n    let p = \"C\";\r\n    unsafe {\r\n        println!(\"{:p}\", std::mem::transmute::<&str, &Sergio>(p)); // error[E0512]: transmute called with types of different sizes\r\n    }\r\n}\r\n```\r\n\r\n[`transmute::<T, U>`]: https://doc.rust-lang.org/std/mem/fn.transmute.html","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/349689951/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tesaguri","id":16436551,"node_id":"MDQ6VXNlcjE2NDM2NTUx","avatar_url":"https://avatars.githubusercontent.com/u/16436551?v=4","gravatar_id":"","url":"https://api.github.com/users/tesaguri","html_url":"https://github.com/tesaguri","followers_url":"https://api.github.com/users/tesaguri/followers","following_url":"https://api.github.com/users/tesaguri/following{/other_user}","gists_url":"https://api.github.com/users/tesaguri/gists{/gist_id}","starred_url":"https://api.github.com/users/tesaguri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tesaguri/subscriptions","organizations_url":"https://api.github.com/users/tesaguri/orgs","repos_url":"https://api.github.com/users/tesaguri/repos","events_url":"https://api.github.com/users/tesaguri/events{/privacy}","received_events_url":"https://api.github.com/users/tesaguri/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/351619409","html_url":"https://github.com/rwf2/Rocket/issues/494#issuecomment-351619409","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/494","id":351619409,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTYxOTQwOQ==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-14T06:18:07Z","updated_at":"2017-12-14T06:18:07Z","body":"@dtolnay, @dmizuk Isn't the `transmute` in `<&RawStr as From<&str>>::from` okay given that `transmute` checks that the size of its two type parameters are identical?\r\n\r\nLooking at the std. library, it doesn't seem like `#[repr(C)]` is used in similar situations. I'm not even sure what `#[repr(C)]` would mean on DSTs like `struct S(str)`.\r\n\r\nIn any case, here are the set of changes I have planned:\r\n\r\n```diff\r\n--- a/lib/src/http/uncased.rs\r\n+++ b/lib/src/http/uncased.rs\r\n@@ -36,7 +36,7 @@ impl UncasedStr {\r\n     /// ```\r\n     #[inline(always)]\r\n     pub fn new(string: &str) -> &UncasedStr {\r\n-        unsafe { &*(string as *const str as *const UncasedStr) }\r\n+        unsafe { ::std::mem::transmute(string) }\r\n     }\r\n\r\n     /// Returns `self` as an `&str`.\r\n@@ -69,7 +69,7 @@ impl UncasedStr {\r\n     #[inline(always)]\r\n     pub fn into_uncased(self: Box<UncasedStr>) -> Uncased<'static> {\r\n         unsafe {\r\n-            let raw_str = Box::into_raw(self) as *mut str;\r\n+            let raw_str: *mut str = ::std::mem::transmute(Box::into_raw(self));\r\n             Uncased::from(Box::from_raw(raw_str).into_string())\r\n         }\r\n     }\r\n@@ -203,8 +203,9 @@ impl<'s> Uncased<'s> {\r\n     #[inline(always)]\r\n     pub fn into_boxed_uncased(self) -> Box<UncasedStr> {\r\n         unsafe {\r\n-            let raw_str = Box::into_raw(self.string.into_owned().into_boxed_str());\r\n-            Box::from_raw(raw_str as *mut UncasedStr)\r\n+            let box_str = self.string.into_owned().into_boxed_str();\r\n+            let raw: *mut UncasedStr = ::std::mem::transmute(Box::into_raw(box_str));\r\n+            Box::from_raw(raw)\r\n         }\r\n     }\r\n```\r\n\r\nDo these resolve the issue?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/351619409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1387061707,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTM4NzA2MTcwNw==","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1387061707","actor":{"login":"dtolnay","id":1940490,"node_id":"MDQ6VXNlcjE5NDA0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/1940490?v=4","gravatar_id":"","url":"https://api.github.com/users/dtolnay","html_url":"https://github.com/dtolnay","followers_url":"https://api.github.com/users/dtolnay/followers","following_url":"https://api.github.com/users/dtolnay/following{/other_user}","gists_url":"https://api.github.com/users/dtolnay/gists{/gist_id}","starred_url":"https://api.github.com/users/dtolnay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtolnay/subscriptions","organizations_url":"https://api.github.com/users/dtolnay/orgs","repos_url":"https://api.github.com/users/dtolnay/repos","events_url":"https://api.github.com/users/dtolnay/events{/privacy}","received_events_url":"https://api.github.com/users/dtolnay/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-12-14T06:18:07Z","performed_via_github_app":null},{"id":1387061708,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDEzODcwNjE3MDg=","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1387061708","actor":{"login":"dtolnay","id":1940490,"node_id":"MDQ6VXNlcjE5NDA0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/1940490?v=4","gravatar_id":"","url":"https://api.github.com/users/dtolnay","html_url":"https://github.com/dtolnay","followers_url":"https://api.github.com/users/dtolnay/followers","following_url":"https://api.github.com/users/dtolnay/following{/other_user}","gists_url":"https://api.github.com/users/dtolnay/gists{/gist_id}","starred_url":"https://api.github.com/users/dtolnay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtolnay/subscriptions","organizations_url":"https://api.github.com/users/dtolnay/orgs","repos_url":"https://api.github.com/users/dtolnay/repos","events_url":"https://api.github.com/users/dtolnay/events{/privacy}","received_events_url":"https://api.github.com/users/dtolnay/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-12-14T06:18:07Z","performed_via_github_app":null},{"id":1387061710,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTM4NzA2MTcxMA==","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1387061710","actor":{"login":"tesaguri","id":16436551,"node_id":"MDQ6VXNlcjE2NDM2NTUx","avatar_url":"https://avatars.githubusercontent.com/u/16436551?v=4","gravatar_id":"","url":"https://api.github.com/users/tesaguri","html_url":"https://github.com/tesaguri","followers_url":"https://api.github.com/users/tesaguri/followers","following_url":"https://api.github.com/users/tesaguri/following{/other_user}","gists_url":"https://api.github.com/users/tesaguri/gists{/gist_id}","starred_url":"https://api.github.com/users/tesaguri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tesaguri/subscriptions","organizations_url":"https://api.github.com/users/tesaguri/orgs","repos_url":"https://api.github.com/users/tesaguri/repos","events_url":"https://api.github.com/users/tesaguri/events{/privacy}","received_events_url":"https://api.github.com/users/tesaguri/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-12-14T06:18:07Z","performed_via_github_app":null},{"id":1387061711,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDEzODcwNjE3MTE=","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1387061711","actor":{"login":"tesaguri","id":16436551,"node_id":"MDQ6VXNlcjE2NDM2NTUx","avatar_url":"https://avatars.githubusercontent.com/u/16436551?v=4","gravatar_id":"","url":"https://api.github.com/users/tesaguri","html_url":"https://github.com/tesaguri","followers_url":"https://api.github.com/users/tesaguri/followers","following_url":"https://api.github.com/users/tesaguri/following{/other_user}","gists_url":"https://api.github.com/users/tesaguri/gists{/gist_id}","starred_url":"https://api.github.com/users/tesaguri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tesaguri/subscriptions","organizations_url":"https://api.github.com/users/tesaguri/orgs","repos_url":"https://api.github.com/users/tesaguri/repos","events_url":"https://api.github.com/users/tesaguri/events{/privacy}","received_events_url":"https://api.github.com/users/tesaguri/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-12-14T06:18:07Z","performed_via_github_app":null},{"id":1387062535,"node_id":"MDEyOkxhYmVsZWRFdmVudDEzODcwNjI1MzU=","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1387062535","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-12-14T06:18:59Z","label":{"name":"triage","color":"f9d0c4"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/351621682","html_url":"https://github.com/rwf2/Rocket/issues/494#issuecomment-351621682","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/494","id":351621682,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTYyMTY4Mg==","user":{"login":"dtolnay","id":1940490,"node_id":"MDQ6VXNlcjE5NDA0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/1940490?v=4","gravatar_id":"","url":"https://api.github.com/users/dtolnay","html_url":"https://github.com/dtolnay","followers_url":"https://api.github.com/users/dtolnay/followers","following_url":"https://api.github.com/users/dtolnay/following{/other_user}","gists_url":"https://api.github.com/users/dtolnay/gists{/gist_id}","starred_url":"https://api.github.com/users/dtolnay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtolnay/subscriptions","organizations_url":"https://api.github.com/users/dtolnay/orgs","repos_url":"https://api.github.com/users/dtolnay/repos","events_url":"https://api.github.com/users/dtolnay/events{/privacy}","received_events_url":"https://api.github.com/users/dtolnay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-14T06:34:10Z","updated_at":"2017-12-14T06:34:10Z","body":"> Isn't the `transmute` in `<&RawStr as From<&str>>::from` okay given that `transmute` checks that the size of its two type parameters are identical?\r\n\r\nThe transmute checks that `&RawStr` and `&str` are the same number of bytes, but does not check that `RawStr` and `str` have the same representation, which is not guaranteed. So I believe that is still undefined behavior.\r\n\r\n> Looking at the std. library, it doesn't seem like `#[repr(C)]` is used in similar situations.\r\n\r\nMy understanding is that the standard library is not beholden to the same soundness considerations that other libraries are. If the compiler makes a change that changes the layout of `struct RawStr(str)`, they would just fix all the transmutes in the standard library in the same release. But in crates that same change would cause memory unsafety.\r\n\r\n> I'm not even sure what `#[repr(C)]` would mean on DSTs like `struct S(str)`.\r\n\r\nI believe that is well defined. `S` will be guaranteed to have the same memory representation as `str`.\r\n\r\nNote that without `#[repr(transparent)]` it may still not be ABI compatible for the purpose of FFI, but that is not required here. It wouldn't be sound to declare an `extern fn` with argument `&str` and implement it in a different compilation unit with a function that takes `&MyStr` or vice versa. That is being tracked in https://github.com/rust-lang/rust/issues/43036.\r\n\r\n> Do these resolve the issue?\r\n\r\nDon't think so. Transmute vs pointer cast is a matter of preference I think, but whether the behavior is well defined is the same. I think the fix is adding `#[repr(C)]` to any newtype wrappers that are involved in transmute / pointer casting.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/351621682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dtolnay","id":1940490,"node_id":"MDQ6VXNlcjE5NDA0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/1940490?v=4","gravatar_id":"","url":"https://api.github.com/users/dtolnay","html_url":"https://github.com/dtolnay","followers_url":"https://api.github.com/users/dtolnay/followers","following_url":"https://api.github.com/users/dtolnay/following{/other_user}","gists_url":"https://api.github.com/users/dtolnay/gists{/gist_id}","starred_url":"https://api.github.com/users/dtolnay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtolnay/subscriptions","organizations_url":"https://api.github.com/users/dtolnay/orgs","repos_url":"https://api.github.com/users/dtolnay/repos","events_url":"https://api.github.com/users/dtolnay/events{/privacy}","received_events_url":"https://api.github.com/users/dtolnay/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/351624587","html_url":"https://github.com/rwf2/Rocket/issues/494#issuecomment-351624587","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/494","id":351624587,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTYyNDU4Nw==","user":{"login":"dtolnay","id":1940490,"node_id":"MDQ6VXNlcjE5NDA0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/1940490?v=4","gravatar_id":"","url":"https://api.github.com/users/dtolnay","html_url":"https://github.com/dtolnay","followers_url":"https://api.github.com/users/dtolnay/followers","following_url":"https://api.github.com/users/dtolnay/following{/other_user}","gists_url":"https://api.github.com/users/dtolnay/gists{/gist_id}","starred_url":"https://api.github.com/users/dtolnay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtolnay/subscriptions","organizations_url":"https://api.github.com/users/dtolnay/orgs","repos_url":"https://api.github.com/users/dtolnay/repos","events_url":"https://api.github.com/users/dtolnay/events{/privacy}","received_events_url":"https://api.github.com/users/dtolnay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-14T06:53:22Z","updated_at":"2017-12-14T06:53:22Z","body":"For example I think it would be legal for a target to use a layout like this, to support better debugging or to compile for JVM or some other VM or any other reason. Here `T` and `Newtype<T>` may have different alignment requirements and casting `*const T` to `*const Newtype<T>` is not meaningful.\r\n\r\n```rust\r\nstruct Newtype<T>(T);\r\n```\r\n\r\n```\r\n Newtype<T>                 Typeinfo\r\n+----------+          +------------------+\r\n| typeinfo | -------> | name = \"Newtype\" |\r\n+----------+          +------------------+\r\n| T        |          | ...              |\r\n+----------+          +------------------+\r\n```\r\n\r\nBut with `#[repr(C)] struct Newtype<T>(T)` the target would be required to use the same memory layout for `T` and `Newtype<T>`.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/351624587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dtolnay","id":1940490,"node_id":"MDQ6VXNlcjE5NDA0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/1940490?v=4","gravatar_id":"","url":"https://api.github.com/users/dtolnay","html_url":"https://github.com/dtolnay","followers_url":"https://api.github.com/users/dtolnay/followers","following_url":"https://api.github.com/users/dtolnay/following{/other_user}","gists_url":"https://api.github.com/users/dtolnay/gists{/gist_id}","starred_url":"https://api.github.com/users/dtolnay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtolnay/subscriptions","organizations_url":"https://api.github.com/users/dtolnay/orgs","repos_url":"https://api.github.com/users/dtolnay/repos","events_url":"https://api.github.com/users/dtolnay/events{/privacy}","received_events_url":"https://api.github.com/users/dtolnay/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1387481233,"node_id":"MDExOkNsb3NlZEV2ZW50MTM4NzQ4MTIzMw==","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1387481233","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"5922eb50b47fdcc1a1c140d53c0ce56e747690b8","commit_url":"https://api.github.com/repos/rwf2/Rocket/commits/5922eb50b47fdcc1a1c140d53c0ce56e747690b8","created_at":"2017-12-14T11:21:16Z","state_reason":null,"performed_via_github_app":null},{"id":1387566458,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDEzODc1NjY0NTg=","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1387566458","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6460be62c31d0413cbcaea8ed7856632b6167ac0","commit_url":"https://api.github.com/repos/rwf2/Rocket/commits/6460be62c31d0413cbcaea8ed7856632b6167ac0","created_at":"2017-12-14T12:19:56Z","performed_via_github_app":null},{"actor":{"login":"lo48576","id":1246590,"node_id":"MDQ6VXNlcjEyNDY1OTA=","avatar_url":"https://avatars.githubusercontent.com/u/1246590?v=4","gravatar_id":"","url":"https://api.github.com/users/lo48576","html_url":"https://github.com/lo48576","followers_url":"https://api.github.com/users/lo48576/followers","following_url":"https://api.github.com/users/lo48576/following{/other_user}","gists_url":"https://api.github.com/users/lo48576/gists{/gist_id}","starred_url":"https://api.github.com/users/lo48576/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lo48576/subscriptions","organizations_url":"https://api.github.com/users/lo48576/orgs","repos_url":"https://api.github.com/users/lo48576/repos","events_url":"https://api.github.com/users/lo48576/events{/privacy}","received_events_url":"https://api.github.com/users/lo48576/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-26T10:39:51Z","updated_at":"2017-12-26T10:39:51Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/udoprog/relative-path/issues/2","repository_url":"https://api.github.com/repos/udoprog/relative-path","labels_url":"https://api.github.com/repos/udoprog/relative-path/issues/2/labels{/name}","comments_url":"https://api.github.com/repos/udoprog/relative-path/issues/2/comments","events_url":"https://api.github.com/repos/udoprog/relative-path/issues/2/events","html_url":"https://github.com/udoprog/relative-path/issues/2","id":284535202,"node_id":"MDU6SXNzdWUyODQ1MzUyMDI=","number":2,"title":"Require `#[repr(C)]` for `RelativePath`","user":{"login":"lo48576","id":1246590,"node_id":"MDQ6VXNlcjEyNDY1OTA=","avatar_url":"https://avatars.githubusercontent.com/u/1246590?v=4","gravatar_id":"","url":"https://api.github.com/users/lo48576","html_url":"https://github.com/lo48576","followers_url":"https://api.github.com/users/lo48576/followers","following_url":"https://api.github.com/users/lo48576/following{/other_user}","gists_url":"https://api.github.com/users/lo48576/gists{/gist_id}","starred_url":"https://api.github.com/users/lo48576/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lo48576/subscriptions","organizations_url":"https://api.github.com/users/lo48576/orgs","repos_url":"https://api.github.com/users/lo48576/repos","events_url":"https://api.github.com/users/lo48576/events{/privacy}","received_events_url":"https://api.github.com/users/lo48576/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":740722346,"node_id":"MDU6TGFiZWw3NDA3MjIzNDY=","url":"https://api.github.com/repos/udoprog/relative-path/labels/bug","name":"bug","color":"ee0701","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-12-26T10:39:51Z","updated_at":"2019-10-10T12:46:15Z","closed_at":"2019-10-10T12:46:15Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":109530168,"node_id":"MDEwOlJlcG9zaXRvcnkxMDk1MzAxNjg=","name":"relative-path","full_name":"udoprog/relative-path","private":false,"owner":{"login":"udoprog","id":111092,"node_id":"MDQ6VXNlcjExMTA5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/111092?v=4","gravatar_id":"","url":"https://api.github.com/users/udoprog","html_url":"https://github.com/udoprog","followers_url":"https://api.github.com/users/udoprog/followers","following_url":"https://api.github.com/users/udoprog/following{/other_user}","gists_url":"https://api.github.com/users/udoprog/gists{/gist_id}","starred_url":"https://api.github.com/users/udoprog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/udoprog/subscriptions","organizations_url":"https://api.github.com/users/udoprog/orgs","repos_url":"https://api.github.com/users/udoprog/repos","events_url":"https://api.github.com/users/udoprog/events{/privacy}","received_events_url":"https://api.github.com/users/udoprog/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/udoprog/relative-path","description":"Portable relative UTF-8 paths for Rust.","fork":false,"url":"https://api.github.com/repos/udoprog/relative-path","forks_url":"https://api.github.com/repos/udoprog/relative-path/forks","keys_url":"https://api.github.com/repos/udoprog/relative-path/keys{/key_id}","collaborators_url":"https://api.github.com/repos/udoprog/relative-path/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/udoprog/relative-path/teams","hooks_url":"https://api.github.com/repos/udoprog/relative-path/hooks","issue_events_url":"https://api.github.com/repos/udoprog/relative-path/issues/events{/number}","events_url":"https://api.github.com/repos/udoprog/relative-path/events","assignees_url":"https://api.github.com/repos/udoprog/relative-path/assignees{/user}","branches_url":"https://api.github.com/repos/udoprog/relative-path/branches{/branch}","tags_url":"https://api.github.com/repos/udoprog/relative-path/tags","blobs_url":"https://api.github.com/repos/udoprog/relative-path/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/udoprog/relative-path/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/udoprog/relative-path/git/refs{/sha}","trees_url":"https://api.github.com/repos/udoprog/relative-path/git/trees{/sha}","statuses_url":"https://api.github.com/repos/udoprog/relative-path/statuses/{sha}","languages_url":"https://api.github.com/repos/udoprog/relative-path/languages","stargazers_url":"https://api.github.com/repos/udoprog/relative-path/stargazers","contributors_url":"https://api.github.com/repos/udoprog/relative-path/contributors","subscribers_url":"https://api.github.com/repos/udoprog/relative-path/subscribers","subscription_url":"https://api.github.com/repos/udoprog/relative-path/subscription","commits_url":"https://api.github.com/repos/udoprog/relative-path/commits{/sha}","git_commits_url":"https://api.github.com/repos/udoprog/relative-path/git/commits{/sha}","comments_url":"https://api.github.com/repos/udoprog/relative-path/comments{/number}","issue_comment_url":"https://api.github.com/repos/udoprog/relative-path/issues/comments{/number}","contents_url":"https://api.github.com/repos/udoprog/relative-path/contents/{+path}","compare_url":"https://api.github.com/repos/udoprog/relative-path/compare/{base}...{head}","merges_url":"https://api.github.com/repos/udoprog/relative-path/merges","archive_url":"https://api.github.com/repos/udoprog/relative-path/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/udoprog/relative-path/downloads","issues_url":"https://api.github.com/repos/udoprog/relative-path/issues{/number}","pulls_url":"https://api.github.com/repos/udoprog/relative-path/pulls{/number}","milestones_url":"https://api.github.com/repos/udoprog/relative-path/milestones{/number}","notifications_url":"https://api.github.com/repos/udoprog/relative-path/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/udoprog/relative-path/labels{/name}","releases_url":"https://api.github.com/repos/udoprog/relative-path/releases{/id}","deployments_url":"https://api.github.com/repos/udoprog/relative-path/deployments","created_at":"2017-11-04T21:05:30Z","updated_at":"2025-11-01T01:44:05Z","pushed_at":"2025-08-11T19:15:31Z","git_url":"git://github.com/udoprog/relative-path.git","ssh_url":"git@github.com:udoprog/relative-path.git","clone_url":"https://github.com/udoprog/relative-path.git","svn_url":"https://github.com/udoprog/relative-path","homepage":"","size":247,"stargazers_count":104,"watchers_count":104,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":14,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["path","portable","rust-lang"],"visibility":"public","forks":14,"open_issues":2,"watchers":104,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I heard that the code such as below is unsound (lead to undefined behaviour):\r\n\r\nhttps://github.com/udoprog/relative-path/blob/49d76f3aac512d1212c2a253f3f7264224edf88b/src/lib.rs#L271-L280\r\n\r\n`RelativePath` type should have `#[repr(C)]` (stable) or `#[repr(transparent)]` ([unstable](https://github.com/rust-lang/rust/issues/43036)) to be safe.\r\n\r\nThis is because Rust doesn't guarantee that `str` and `RelativePath` have the same internal representations (and it will be guaranteed by `#[repr(C)]`).\r\n\r\nFor detail:\r\n\r\n  * [OpaqueTypedefUnsized::from_* are unsound 路 Issue #1 路 lo48576/opaque_typedef](https://github.com/lo48576/opaque_typedef/issues/1)\r\n  * [UncasedStr::new is undefined behavior 路 Issue #494 路 SergioBenitez/Rocket](https://github.com/SergioBenitez/Rocket/issues/494)","reactions":{"url":"https://api.github.com/repos/udoprog/relative-path/issues/2/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/udoprog/relative-path/issues/2/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":13766681562,"node_id":"REFE_lADOAzqMt84Qq0enzwAAAAM0juPa","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/13766681562","actor":{"login":"Eijebong","id":3650385,"node_id":"MDQ6VXNlcjM2NTAzODU=","avatar_url":"https://avatars.githubusercontent.com/u/3650385?v=4","gravatar_id":"","url":"https://api.github.com/users/Eijebong","html_url":"https://github.com/Eijebong","followers_url":"https://api.github.com/users/Eijebong/followers","following_url":"https://api.github.com/users/Eijebong/following{/other_user}","gists_url":"https://api.github.com/users/Eijebong/gists{/gist_id}","starred_url":"https://api.github.com/users/Eijebong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Eijebong/subscriptions","organizations_url":"https://api.github.com/users/Eijebong/orgs","repos_url":"https://api.github.com/users/Eijebong/repos","events_url":"https://api.github.com/users/Eijebong/events{/privacy}","received_events_url":"https://api.github.com/users/Eijebong/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"5922eb50b47fdcc1a1c140d53c0ce56e747690b8","commit_url":"https://api.github.com/repos/Eijebong/Rocket/commits/5922eb50b47fdcc1a1c140d53c0ce56e747690b8","created_at":"2024-08-05T16:10:34Z","performed_via_github_app":null}]