{"url":"https://api.github.com/repos/rwf2/Rocket/issues/265","repository_url":"https://api.github.com/repos/rwf2/Rocket","labels_url":"https://api.github.com/repos/rwf2/Rocket/issues/265/labels{/name}","comments_url":"https://api.github.com/repos/rwf2/Rocket/issues/265/comments","events_url":"https://api.github.com/repos/rwf2/Rocket/issues/265/events","html_url":"https://github.com/rwf2/Rocket/issues/265","id":222245669,"node_id":"MDU6SXNzdWUyMjIyNDU2Njk=","number":265,"title":"Query string and struct with single field named `v` -> Error: expected &str, found enum `std::option::Option`","user":{"login":"rofrol","id":28787,"node_id":"MDQ6VXNlcjI4Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/28787?v=4","gravatar_id":"","url":"https://api.github.com/users/rofrol","html_url":"https://github.com/rofrol","followers_url":"https://api.github.com/users/rofrol/followers","following_url":"https://api.github.com/users/rofrol/following{/other_user}","gists_url":"https://api.github.com/users/rofrol/gists{/gist_id}","starred_url":"https://api.github.com/users/rofrol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rofrol/subscriptions","organizations_url":"https://api.github.com/users/rofrol/orgs","repos_url":"https://api.github.com/users/rofrol/repos","events_url":"https://api.github.com/users/rofrol/events{/privacy}","received_events_url":"https://api.github.com/users/rofrol/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":343542064,"node_id":"MDU6TGFiZWwzNDM1NDIwNjQ=","url":"https://api.github.com/repos/rwf2/Rocket/labels/bug","name":"bug","color":"B60205","default":true,"description":"Deviation from the specification or expected behavior"},{"id":442158672,"node_id":"MDU6TGFiZWw0NDIxNTg2NzI=","url":"https://api.github.com/repos/rwf2/Rocket/labels/accepted","name":"accepted","color":"0E8A16","default":false,"description":"An accepted request or suggestion"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-04-17T22:09:51Z","updated_at":"2017-04-18T06:15:07Z","closed_at":"2017-04-17T23:14:07Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"  1. The version of Rocket you're using. Ensure it's the latest, if possible.\r\n0.2.5\r\n  2. A brief description of the bug that includes:\r\n    * The nature of the bug.\r\n    * When the bug occurs.\r\n      When struct has one and only one field named `v`.\r\n    * What you expected vs. what actually happened.\r\n       It compiles vs error.\r\n  3. How you discovered the bug. Short test cases are especially useful.\r\n\r\nCode:\r\n\r\n```rust\r\n#![feature(plugin, custom_derive)]\r\n#![plugin(rocket_codegen)]\r\n\r\nextern crate rocket;\r\n\r\n#[macro_use]\r\nextern crate rocket_contrib;\r\n\r\nuse rocket_contrib::{JSON, Value};\r\n\r\n#[derive(FromForm)]\r\nstruct Person<'r> {\r\n    v: &'r str,\r\n}\r\n\r\n#[get(\"/file?<person>\")]\r\nfn styles_with_query(person: Person) -> String {\r\n    format!(\"Hello {}!\", person.v)\r\n}\r\n\r\n#[error(404)]\r\nfn not_found() -> JSON<Value> {\r\n    JSON(json!({\r\n        \"status\": \"error\",\r\n        \"reason\": \"Resource was not found.\"\r\n    }))\r\n}\r\n\r\nfn main() {\r\n    rocket::ignite()\r\n        .mount(\"/\", routes![styles_with_query])\r\n        .catch(errors![not_found])\r\n        .launch();\r\n}\r\n```\r\nRunning:\r\n```shell\r\n$ rustup install nightly-2017-04-16\r\n$ rustup override set nightly-2017-04-16\r\n$ cargo build\r\n   Compiling bug v0.1.0 (file:///C:/projects/rust/rocket-bug)\r\nerror[E0308]: match arms have incompatible types\r\n  --> src\\main.rs:11:10\r\n   |\r\n11 | #[derive(FromForm)]\r\n   |          ^^^^^^^^ expected &str, found enum `std::option::Option`\r\n   |\r\n   = note: expected type `&str`\r\n              found type `std::option::Option<_>`\r\nnote: match arm with an incompatible type\r\n  --> src\\main.rs:11:10\r\n   |\r\n11 | #[derive(FromForm)]\r\n   |          ^^^^^^^^\r\n\r\nerror: aborting due to previous error\r\n\r\nerror: Could not compile `rocket-bug`.\r\n\r\nTo learn more, run the command again with --verbose.\r\n```\r\n  4. Ideas, if any, about what Rocket is doing incorrectly.\r\n   It works if field has any other name than `v`.\r\n","closed_by":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rwf2/Rocket/issues/265/timeline","performed_via_github_app":null,"state_reason":"completed"}