[{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/304345322","html_url":"https://github.com/rwf2/Rocket/issues/299#issuecomment-304345322","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/299","id":304345322,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDM0NTMyMg==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-26T17:41:18Z","updated_at":"2017-05-26T17:41:18Z","body":"This is interesting. I would be quite surprised if this has something to do with Rocket.\r\n\r\nHave you tried simply spawning `cmd` in a loop, without any web framework? Just a standalone application. Something like:\r\n\r\n```rust\r\nfn main() {\r\n    for i in 0..100000 {\r\n        let out = Command::new(\"cmd\").args(&[\"/C\", \"echo hello\"]).output().unwrap();\r\n        println!(\"Iteration {}: {}\", i, out);\r\n    }\r\n}\r\n```\r\n\r\nIf this eventually results in the same issue, then we can rule out Rocket.\r\n\r\nRocket and rouille use different underlying HTTP libraries. Namely, Rocket uses Hyper and rouille uses tiny_http. It's possible, though I still think highly unlikely, that something in Hyper is causing this issue. Have you tried the same experiment with bare-bones Hyper?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/304345322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/304452644","html_url":"https://github.com/rwf2/Rocket/issues/299#issuecomment-304452644","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/299","id":304452644,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDQ1MjY0NA==","user":{"login":"guangie88","id":557766,"node_id":"MDQ6VXNlcjU1Nzc2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/557766?v=4","gravatar_id":"","url":"https://api.github.com/users/guangie88","html_url":"https://github.com/guangie88","followers_url":"https://api.github.com/users/guangie88/followers","following_url":"https://api.github.com/users/guangie88/following{/other_user}","gists_url":"https://api.github.com/users/guangie88/gists{/gist_id}","starred_url":"https://api.github.com/users/guangie88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guangie88/subscriptions","organizations_url":"https://api.github.com/users/guangie88/orgs","repos_url":"https://api.github.com/users/guangie88/repos","events_url":"https://api.github.com/users/guangie88/events{/privacy}","received_events_url":"https://api.github.com/users/guangie88/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-27T13:49:25Z","updated_at":"2017-05-27T13:49:25Z","body":"Thanks for the reply! I have tried the cmd spawning example, and it works fine even up to 100000 iterations.\r\n\r\nI have also tried out the experiments on both Hyper and tiny_http HTTP servers, as you have pointed out about the different underlying HTTP libraries that were used. Since Rocket is based on Hyper, I was initially expecting the issue to surface in the Hyper HTTP server set-up. However, the Hyper set-up printed the correct output without issue. The tiny_http set-up also printed the correct output.\r\n\r\nOut of curiosity, I have also tried out Rocket with manual routing (based on the latest git commit `a4292ba666fa60448e575b600d69f131795da080`), but unfortunately it still exhibits the same issue as seen in the macro-based routing set-up (which was tested on Rocket 0.2.6 and 0.2.7).\r\n\r\nAs mentioned, all the set-ups are done in Windows 7 only, since the issue only appears in Windows 7 execution. Are there any other notable differences between the HTTP server done on Rocket and on bare-bones Hyper, or any other suggestions that you might have in mind?\r\n\r\nThe section below contains the set-up output for demonstration, as well as the links to the various set-ups.\r\n\r\n# Output of other HTTP frameworks\r\nNormal output.\r\n```\r\n...\r\n#30: Output { status: ExitStatus(ExitStatus(0)), stdout: \"hello\\r\\n\", stderr: \"\" }\r\n#31: Output { status: ExitStatus(ExitStatus(0)), stdout: \"hello\\r\\n\", stderr: \"\" }\r\n#32: Output { status: ExitStatus(ExitStatus(0)), stdout: \"hello\\r\\n\", stderr: \"\" }\r\n#33: Output { status: ExitStatus(ExitStatus(0)), stdout: \"hello\\r\\n\", stderr: \"\" }\r\n#34: Output { status: ExitStatus(ExitStatus(0)), stdout: \"hello\\r\\n\", stderr: \"\" }\r\n#35: Output { status: ExitStatus(ExitStatus(0)), stdout: \"hello\\r\\n\", stderr: \"\" }\r\n...\r\n```\r\n\r\n# Output of Rocket (both for macro-based routing and manual routing)\r\nLine 33 starts to output incorrectly, happens consistently on Windows 7 x64. The output is taken directly after the HTTP server executes the cmd.\r\n```\r\n...\r\n#30: Output { status: ExitStatus(ExitStatus(0)), stdout: \"hello\\r\\n\", stderr: \"\" }\r\n#31: Output { status: ExitStatus(ExitStatus(0)), stdout: \"hello\\r\\n\", stderr: \"\" }\r\n#32: Output { status: ExitStatus(ExitStatus(0)), stdout: \"hello\\r\\n\", stderr: \"\" }\r\n#33: Output { status: ExitStatus(ExitStatus(3221225794)), stdout: \"\", stderr: \"\" }\r\n#34: Output { status: ExitStatus(ExitStatus(3221225794)), stdout: \"\", stderr: \"\" }\r\n#35: Output { status: ExitStatus(ExitStatus(3221225794)), stdout: \"\", stderr: \"\" }\r\n...\r\n```\r\nApplication error pop-up when executing from lines 33 and onwards.\r\n\r\n![cmd-error](https://cloud.githubusercontent.com/assets/557766/26521858/c5fac2a8-4325-11e7-9435-1ddf3a88d021.png)\r\n\r\n# Set-Up links\r\n\r\n## Hyper\r\n[https://github.com/guangie88/hyper_cmd](https://github.com/guangie88/hyper_cmd)\r\n\r\n## tiny_http\r\n[https://github.com/guangie88/tiny_http_cmd](https://github.com/guangie88/tiny_http_cmd)\r\n\r\n## Rocket with manual routing\r\n[https://github.com/guangie88/rocket_manual_route_cmd](https://github.com/guangie88/rocket_manual_route_cmd)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/304452644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"guangie88","id":557766,"node_id":"MDQ6VXNlcjU1Nzc2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/557766?v=4","gravatar_id":"","url":"https://api.github.com/users/guangie88","html_url":"https://github.com/guangie88","followers_url":"https://api.github.com/users/guangie88/followers","following_url":"https://api.github.com/users/guangie88/following{/other_user}","gists_url":"https://api.github.com/users/guangie88/gists{/gist_id}","starred_url":"https://api.github.com/users/guangie88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guangie88/subscriptions","organizations_url":"https://api.github.com/users/guangie88/orgs","repos_url":"https://api.github.com/users/guangie88/repos","events_url":"https://api.github.com/users/guangie88/events{/privacy}","received_events_url":"https://api.github.com/users/guangie88/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/304470531","html_url":"https://github.com/rwf2/Rocket/issues/299#issuecomment-304470531","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/299","id":304470531,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDQ3MDUzMQ==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-27T19:03:47Z","updated_at":"2017-05-27T19:03:47Z","body":"That's really surprising. Okay! :)\n\nCan you try using Rocket from master? You should be able to just point your Cargo.toml to the github repository for both `rocket` and `rocket_codegen`.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/304470531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/304487488","html_url":"https://github.com/rwf2/Rocket/issues/299#issuecomment-304487488","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/299","id":304487488,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDQ4NzQ4OA==","user":{"login":"guangie88","id":557766,"node_id":"MDQ6VXNlcjU1Nzc2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/557766?v=4","gravatar_id":"","url":"https://api.github.com/users/guangie88","html_url":"https://github.com/guangie88","followers_url":"https://api.github.com/users/guangie88/followers","following_url":"https://api.github.com/users/guangie88/following{/other_user}","gists_url":"https://api.github.com/users/guangie88/gists{/gist_id}","starred_url":"https://api.github.com/users/guangie88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guangie88/subscriptions","organizations_url":"https://api.github.com/users/guangie88/orgs","repos_url":"https://api.github.com/users/guangie88/repos","events_url":"https://api.github.com/users/guangie88/events{/privacy}","received_events_url":"https://api.github.com/users/guangie88/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-28T01:48:08Z","updated_at":"2017-05-28T01:48:08Z","body":"`rocket_manual_route_cmd` was already using the Rocket repository git master branch, and I have changed the original `rocket_cmd_bug` which uses the macro-based routing to also use the git master branch.\r\n\r\nThe issue is still present unfortunately, with Line 33 and onwards printing the incorrect output.\r\n\r\nThanks for your help!\r\n\r\nLinks:\r\n[https://github.com/guangie88/rocket_cmd_bug](https://github.com/guangie88/rocket_cmd_bug)\r\n[https://github.com/guangie88/rocket_manual_route_cmd](https://github.com/guangie88/rocket_manual_route_cmd)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/304487488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"guangie88","id":557766,"node_id":"MDQ6VXNlcjU1Nzc2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/557766?v=4","gravatar_id":"","url":"https://api.github.com/users/guangie88","html_url":"https://github.com/guangie88","followers_url":"https://api.github.com/users/guangie88/followers","following_url":"https://api.github.com/users/guangie88/following{/other_user}","gists_url":"https://api.github.com/users/guangie88/gists{/gist_id}","starred_url":"https://api.github.com/users/guangie88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guangie88/subscriptions","organizations_url":"https://api.github.com/users/guangie88/orgs","repos_url":"https://api.github.com/users/guangie88/repos","events_url":"https://api.github.com/users/guangie88/events{/privacy}","received_events_url":"https://api.github.com/users/guangie88/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1101919877,"node_id":"MDEyOkxhYmVsZWRFdmVudDExMDE5MTk4Nzc=","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1101919877","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-05-30T09:04:43Z","label":{"name":"triage","color":"f9d0c4"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/305364829","html_url":"https://github.com/rwf2/Rocket/issues/299#issuecomment-305364829","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/299","id":305364829,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTM2NDgyOQ==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-01T01:39:35Z","updated_at":"2017-06-01T01:45:32Z","body":"I've spent a bit of time, and intend to spend more, investigating and eventually resolving this issue. Thus far, I've noted the following:\r\n\r\n  * I've reproduced the issue on Windows 7 SP1 with Visual C++ Build Tools 2015.\r\n  * I've confirmed that the issue does not occur with the hot-loop I posted above.\r\n  * The issue _may_ be caused by [desktop heap](https://blogs.msdn.microsoft.com/ntdebugging/2007/01/04/desktop-heap-overview/) exhaustion.\r\n\r\nThe lattermost point is what I found after doing a bit of research online. It coincides [with your investigation](https://support.microsoft.com/en-us/help/2701373/-0xc0000142-or--1073741502-stop-error-when-many-powershell-scripts-call-the-console.write-method-or-when-you-try-to-start-many-console-applications-on-a-powershell-console-in-windows-7-or-in-windows-server-2008-r2) in the initial forum post. If this is indeed the case, it should be possible to implement the workaround in Microsoft's hotfix.\r\n\r\nIf this workaround resolves the issue, then we can begin to think about why (or if?) Rocket is not freeing the resources used by the handler. That being said, a bit of heap profiling and resource monitoring should reveal whether Rocket is freeing resources appropriately, suggesting whether the workaround will have any impact or not.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/305364829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1107207581,"node_id":"MDExOkNsb3NlZEV2ZW50MTEwNzIwNzU4MQ==","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1107207581","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"a6c4d053ade99bc396961e52ce7f3e53536e206f","commit_url":"https://api.github.com/repos/rwf2/Rocket/commits/a6c4d053ade99bc396961e52ce7f3e53536e206f","created_at":"2017-06-02T05:13:15Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/305692992","html_url":"https://github.com/rwf2/Rocket/issues/299#issuecomment-305692992","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/299","id":305692992,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTY5Mjk5Mg==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-02T05:26:33Z","updated_at":"2017-06-02T05:26:33Z","body":"Hoorah! After some more triage, I was able to determine that the cause of the issue was Rocket's use of the `term-painter` library. Under the hood, `term-painter` uses the `term` library to colorize terminal output. On Windows, `term` uses the win32 console API to colorize output. This means that a win32 console API call was being made every time a new color or style was printed to the console. At some point, something (I'm not sure just _what_ yet) goes wrong as a result of this, and `exec`ing any program thereafter fails.\r\n\r\nCommit https://github.com/SergioBenitez/Rocket/commit/a6c4d053ade99bc396961e52ce7f3e53536e206f switches Rocket to [`yansi`](https://github.com/SergioBenitez/yansi) for output coloring. The crate only implements ANSI coloring, so no win32 API calls will be made on Windows. This may sound like a drawback; in reality, Rocket's use of `term-painter` was not appropriate, and so switching will bear no real loss and result in increased correctness.\r\n\r\n@guangie88 I look forward to your confirmation that this resolves your issue. :)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/305692992/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1107215854,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTEwNzIxNTg1NA==","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1107215854","actor":{"login":"guangie88","id":557766,"node_id":"MDQ6VXNlcjU1Nzc2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/557766?v=4","gravatar_id":"","url":"https://api.github.com/users/guangie88","html_url":"https://github.com/guangie88","followers_url":"https://api.github.com/users/guangie88/followers","following_url":"https://api.github.com/users/guangie88/following{/other_user}","gists_url":"https://api.github.com/users/guangie88/gists{/gist_id}","starred_url":"https://api.github.com/users/guangie88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guangie88/subscriptions","organizations_url":"https://api.github.com/users/guangie88/orgs","repos_url":"https://api.github.com/users/guangie88/repos","events_url":"https://api.github.com/users/guangie88/events{/privacy}","received_events_url":"https://api.github.com/users/guangie88/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-06-02T05:26:33Z","performed_via_github_app":null},{"id":1107215855,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDExMDcyMTU4NTU=","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1107215855","actor":{"login":"guangie88","id":557766,"node_id":"MDQ6VXNlcjU1Nzc2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/557766?v=4","gravatar_id":"","url":"https://api.github.com/users/guangie88","html_url":"https://github.com/guangie88","followers_url":"https://api.github.com/users/guangie88/followers","following_url":"https://api.github.com/users/guangie88/following{/other_user}","gists_url":"https://api.github.com/users/guangie88/gists{/gist_id}","starred_url":"https://api.github.com/users/guangie88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guangie88/subscriptions","organizations_url":"https://api.github.com/users/guangie88/orgs","repos_url":"https://api.github.com/users/guangie88/repos","events_url":"https://api.github.com/users/guangie88/events{/privacy}","received_events_url":"https://api.github.com/users/guangie88/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-06-02T05:26:33Z","performed_via_github_app":null},{"id":1107216315,"node_id":"MDEyOkxhYmVsZWRFdmVudDExMDcyMTYzMTU=","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1107216315","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-06-02T05:27:12Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":1107216316,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50MTEwNzIxNjMxNg==","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1107216316","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2017-06-02T05:27:12Z","label":{"name":"triage","color":"f9d0c4"},"performed_via_github_app":null},{"id":1107216356,"node_id":"MDEyOkxhYmVsZWRFdmVudDExMDcyMTYzNTY=","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1107216356","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-06-02T05:27:17Z","label":{"name":"upstream","color":"0052cc"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/305767649","html_url":"https://github.com/rwf2/Rocket/issues/299#issuecomment-305767649","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/299","id":305767649,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTc2NzY0OQ==","user":{"login":"guangie88","id":557766,"node_id":"MDQ6VXNlcjU1Nzc2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/557766?v=4","gravatar_id":"","url":"https://api.github.com/users/guangie88","html_url":"https://github.com/guangie88","followers_url":"https://api.github.com/users/guangie88/followers","following_url":"https://api.github.com/users/guangie88/following{/other_user}","gists_url":"https://api.github.com/users/guangie88/gists{/gist_id}","starred_url":"https://api.github.com/users/guangie88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guangie88/subscriptions","organizations_url":"https://api.github.com/users/guangie88/orgs","repos_url":"https://api.github.com/users/guangie88/repos","events_url":"https://api.github.com/users/guangie88/events{/privacy}","received_events_url":"https://api.github.com/users/guangie88/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-02T12:04:26Z","updated_at":"2017-06-02T12:04:26Z","body":"@SergioBenitez Yes the latest commit [`a6c4d05`](https://github.com/SergioBenitez/Rocket/commit/a6c4d053ade99bc396961e52ce7f3e53536e206f) has resolved the issue, thank you for your help! Works also for `x86_64-pc-windows-gnu`, which previously had the same issue.\r\n\r\nNow there is no reason not to use Rocket for any Rust based HTTP server! :smile: On a side note, I see that [`yansi`](https://github.com/SergioBenitez/yansi) is also part of your work, keep up with all the good works! :+1:\r\n\r\nIf you happen to eventually find out the underlying issue about `term-painter` (which strangely only seems to affect Windows 7 / Windows Server 2008), I would be curious to know if you don't mind sharing.\r\n\r\nThanks again! :smiley:\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/305767649/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"guangie88","id":557766,"node_id":"MDQ6VXNlcjU1Nzc2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/557766?v=4","gravatar_id":"","url":"https://api.github.com/users/guangie88","html_url":"https://github.com/guangie88","followers_url":"https://api.github.com/users/guangie88/followers","following_url":"https://api.github.com/users/guangie88/following{/other_user}","gists_url":"https://api.github.com/users/guangie88/gists{/gist_id}","starred_url":"https://api.github.com/users/guangie88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guangie88/subscriptions","organizations_url":"https://api.github.com/users/guangie88/orgs","repos_url":"https://api.github.com/users/guangie88/repos","events_url":"https://api.github.com/users/guangie88/events{/privacy}","received_events_url":"https://api.github.com/users/guangie88/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1107681607,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTEwNzY4MTYwNw==","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1107681607","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-06-02T12:04:26Z","performed_via_github_app":null},{"id":1107681609,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDExMDc2ODE2MDk=","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1107681609","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-06-02T12:04:26Z","performed_via_github_app":null},{"id":13766681208,"node_id":"REFE_lADOAzqMt84NyfwEzwAAAAM0juJ4","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/13766681208","actor":{"login":"Eijebong","id":3650385,"node_id":"MDQ6VXNlcjM2NTAzODU=","avatar_url":"https://avatars.githubusercontent.com/u/3650385?v=4","gravatar_id":"","url":"https://api.github.com/users/Eijebong","html_url":"https://github.com/Eijebong","followers_url":"https://api.github.com/users/Eijebong/followers","following_url":"https://api.github.com/users/Eijebong/following{/other_user}","gists_url":"https://api.github.com/users/Eijebong/gists{/gist_id}","starred_url":"https://api.github.com/users/Eijebong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Eijebong/subscriptions","organizations_url":"https://api.github.com/users/Eijebong/orgs","repos_url":"https://api.github.com/users/Eijebong/repos","events_url":"https://api.github.com/users/Eijebong/events{/privacy}","received_events_url":"https://api.github.com/users/Eijebong/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a6c4d053ade99bc396961e52ce7f3e53536e206f","commit_url":"https://api.github.com/repos/Eijebong/Rocket/commits/a6c4d053ade99bc396961e52ce7f3e53536e206f","created_at":"2024-08-05T16:10:33Z","performed_via_github_app":null}]