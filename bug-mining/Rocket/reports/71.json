{"url":"https://api.github.com/repos/rwf2/Rocket/issues/576","repository_url":"https://api.github.com/repos/rwf2/Rocket","labels_url":"https://api.github.com/repos/rwf2/Rocket/issues/576/labels{/name}","comments_url":"https://api.github.com/repos/rwf2/Rocket/issues/576/comments","events_url":"https://api.github.com/repos/rwf2/Rocket/issues/576/events","html_url":"https://github.com/rwf2/Rocket/issues/576","id":300525211,"node_id":"MDU6SXNzdWUzMDA1MjUyMTE=","number":576,"title":"Get a config option from Rocket.toml","user":{"login":"olegantonyan","id":2301579,"node_id":"MDQ6VXNlcjIzMDE1Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/2301579?v=4","gravatar_id":"","url":"https://api.github.com/users/olegantonyan","html_url":"https://github.com/olegantonyan","followers_url":"https://api.github.com/users/olegantonyan/followers","following_url":"https://api.github.com/users/olegantonyan/following{/other_user}","gists_url":"https://api.github.com/users/olegantonyan/gists{/gist_id}","starred_url":"https://api.github.com/users/olegantonyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olegantonyan/subscriptions","organizations_url":"https://api.github.com/users/olegantonyan/orgs","repos_url":"https://api.github.com/users/olegantonyan/repos","events_url":"https://api.github.com/users/olegantonyan/events{/privacy}","received_events_url":"https://api.github.com/users/olegantonyan/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":343542075,"node_id":"MDU6TGFiZWwzNDM1NDIwNzU=","url":"https://api.github.com/repos/rwf2/Rocket/labels/question","name":"question","color":"D61CBC","default":true,"description":"A question (converts to discussion)"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-02-27T07:51:22Z","updated_at":"2020-06-28T21:53:17Z","closed_at":"2018-07-02T22:22:55Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I want to get `assets_dir` from `Rocket.toml`. This issue https://github.com/SergioBenitez/Rocket/issues/173 kind of has answer,  I just don't understand how to use it\r\n\r\nHere is my code:\r\n```\r\n#![feature(plugin)]\r\n#![plugin(rocket_codegen)]\r\n\r\nextern crate rocket;\r\nextern crate rocket_contrib;\r\n\r\nuse rocket_contrib::Template;\r\nuse rocket::response::NamedFile;\r\nuse rocket::config;\r\n\r\nuse std::collections::HashMap;\r\nuse std::path::{Path, PathBuf};\r\n\r\n#[get(\"/\")]\r\npub fn index() -> Template {\r\n    let mut context = HashMap::new();\r\n    context.insert(\"name\", \"Rust\");\r\n    Template::render(\"index\", &context)\r\n}\r\n\r\n#[get(\"/<asset..>\")]\r\nfn assets(asset: PathBuf) -> Option<NamedFile> {\r\n    let assets_dir = config::active().map(|config| {\r\n\t    let dir = config.get_str(\"assets_dir\").unwrap();\r\n        config.root().join(dir).to_string_lossy().into_owned()\r\n\t}).unwrap();\r\n    println!(\"{}\", assets_dir);\r\n\r\n    NamedFile::open(Path::new(assets_dir).join(asset)).ok()\r\n}\r\n\r\nfn rocket() -> rocket::Rocket {\r\n    rocket::ignite()\r\n        .mount(\"/\", routes![index, assets])\r\n        .attach(Template::fairing())\r\n}\r\n\r\nfn main() {\r\n    rocket().launch();\r\n}\r\n```\r\nAnd this is a compile error:\r\n```\r\nerror[E0425]: cannot find function `active` in module `config`\r\n  --> src/main.rs:25:30\r\n   |\r\n25 |     let assets_dir = config::active().map(|config| {\r\n   |                              ^^^^^^ not found in `config`\r\n```\r\n\r\nIt's suggested in #173 to do it this way:\r\n```\r\nlet rocket = rocket::ignite();\r\n\r\nlet config = /* your init here */;\r\n\r\nrocket.mount(...)\r\n    .manage(config)\r\n    .launch()\r\n```\r\nBut is there a concrete example? I don't understand what `/* your init here */` should look like to get the actual config form Rocket.toml.\r\nMaybe this is something obvious everyone understand without documentation. If it is, please, give me an advise what book to read to get this.\r\n\r\nrocket 0.3.6\r\nrustc 1.26.0-nightly (322d7f7b9 2018-02-25)\r\ncargo 0.26.0-nightly (1d6dfea44 2018-01-26)\r\n","closed_by":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rwf2/Rocket/issues/576/timeline","performed_via_github_app":null,"state_reason":"completed"}