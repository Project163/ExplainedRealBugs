{"url":"https://api.github.com/repos/rwf2/Rocket/issues/2750","repository_url":"https://api.github.com/repos/rwf2/Rocket","labels_url":"https://api.github.com/repos/rwf2/Rocket/issues/2750/labels{/name}","comments_url":"https://api.github.com/repos/rwf2/Rocket/issues/2750/comments","events_url":"https://api.github.com/repos/rwf2/Rocket/issues/2750/events","html_url":"https://github.com/rwf2/Rocket/issues/2750","id":2184969278,"node_id":"I_kwDOAzqMt86CO_w-","number":2750,"title":"Redirection to a route which takes a vector parameter results in an error","user":{"login":"Unei95","id":19711897,"node_id":"MDQ6VXNlcjE5NzExODk3","avatar_url":"https://avatars.githubusercontent.com/u/19711897?v=4","gravatar_id":"","url":"https://api.github.com/users/Unei95","html_url":"https://github.com/Unei95","followers_url":"https://api.github.com/users/Unei95/followers","following_url":"https://api.github.com/users/Unei95/following{/other_user}","gists_url":"https://api.github.com/users/Unei95/gists{/gist_id}","starred_url":"https://api.github.com/users/Unei95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Unei95/subscriptions","organizations_url":"https://api.github.com/users/Unei95/orgs","repos_url":"https://api.github.com/users/Unei95/repos","events_url":"https://api.github.com/users/Unei95/events{/privacy}","received_events_url":"https://api.github.com/users/Unei95/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":758541123,"node_id":"MDU6TGFiZWw3NTg1NDExMjM=","url":"https://api.github.com/repos/rwf2/Rocket/labels/deficiency","name":"deficiency","color":"D93F0B","default":false,"description":"Something doesn't work as well as it could"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-03-13T22:03:49Z","updated_at":"2024-03-14T22:26:10Z","closed_at":"2024-03-14T22:26:10Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Rocket Version\n\n0.5.0\n\n### Operating System\n\nNixOS 23.11\n\n### Rust Toolchain Version\n\nrustc 1.76.0\n\n### What happened?\n\nRedirecting to a route which takes a vector parameter throws the following error:\r\n```\r\nerror[E0277]: the trait bound `Vec<i32>: FromUriParam<rocket::http::uri::fmt::Query, _>` is not satisfied\r\n  --> src/main.rs:18:31\r\n   |\r\n18 |     Redirect::to(uri!(test(1, numbers)))\r\n   |                               ^^^^^^^ the trait `FromUriParam<rocket::http::uri::fmt::Query, _>` is not implemented for `Vec<i32>`\r\n   |\r\n   = help: the following other types implement trait `FromUriParam<P, T>`:\r\n             <bool as FromUriParam<P, bool>>\r\n             <bool as FromUriParam<P, &'x bool>>\r\n             <bool as FromUriParam<P, &'x mut bool>>\r\n             <isize as FromUriParam<P, isize>>\r\n             <isize as FromUriParam<P, &'x isize>>\r\n             <isize as FromUriParam<P, &'x mut isize>>\r\n             <i8 as FromUriParam<P, i8>>\r\n             <i8 as FromUriParam<P, &'x i8>>\r\n           and 149 others\r\n   = note: this error originates in the macro `rocket::rocket_internal_uri` which comes from the expansion of the macro `uri` (in Nightly builds, run with -Z macro-backtrace for more info)\r\n```\r\n\r\nAccording to the [Documentation](https://api.rocket.rs/v0.4/rocket/http/uri/trait.FromUriParam#implementing) one should only implement the trait `FromUriParam` if you intend to provide arguments which differ from the parameters in the given function.\r\n\r\nAfter seeking help in the Matrix room I was asked to open an issue regarding this.\n\n### Test Case\n\n```rust\nuse rocket::{response::Redirect, Build, Rocket};\r\n\r\n#[macro_use] extern crate rocket;\r\n\r\n#[get(\"/get?<values>\")]\r\nfn get(values: Vec<i32>) -> String {\r\n    \"hello from get-endpoint.\".into()\r\n}\r\n\r\n#[get(\"/redirect\")]\r\nfn redirect() -> Redirect {\r\n    let values: Vec<i32> = vec!(1,2,3);\r\n    Redirect::to(uri!(get(values)))\r\n}\r\n\r\n#[launch]\r\nfn rocket() -> Rocket<Build> {\r\n    rocket::build().mount(\"/\", routes![get, redirect])\r\n}\r\n\r\n#[cfg(test)]\r\nmod test {\r\n    use super::rocket;\r\n    use rocket::local::blocking::Client;\r\n    use rocket::http::Status;\r\n\r\n    #[test]\r\n    fn hello_world() {\r\n        let client = Client::tracked(rocket()).expect(\"valid rocket instance\");\r\n        let mut response = client.get(uri!(super::redirect)).dispatch();\r\n        assert_eq!(response.status(), Status::SeeOther);\r\n    }\r\n}\n```\n\n\n### Log Output\n\n```shell\nROCKET_LOG_LEVEL=debug cargo test\r\n   Compiling rocket-test v0.1.0 (/tmp/rocket-test)\r\nerror[E0277]: the trait bound `Vec<i32>: FromUriParam<rocket::http::uri::fmt::Query, _>` is not satisfied\r\n  --> src/main.rs:13:27\r\n   |\r\n13 |     Redirect::to(uri!(get(values)))\r\n   |                           ^^^^^^ the trait `FromUriParam<rocket::http::uri::fmt::Query, _>` is not implemented for `Vec<i32>`\r\n   |\r\n   = help: the following other types implement trait `FromUriParam<P, T>`:\r\n             <bool as FromUriParam<P, bool>>\r\n             <bool as FromUriParam<P, &'x bool>>\r\n             <bool as FromUriParam<P, &'x mut bool>>\r\n             <isize as FromUriParam<P, isize>>\r\n             <isize as FromUriParam<P, &'x isize>>\r\n             <isize as FromUriParam<P, &'x mut isize>>\r\n             <i8 as FromUriParam<P, i8>>\r\n             <i8 as FromUriParam<P, &'x i8>>\r\n           and 149 others\r\n   = note: this error originates in the macro `rocket::rocket_internal_uri` which comes from the expansion of the macro `uri` (in Nightly builds, run with -Z macro-backtrace for more info)\r\n\r\nFor more information about this error, try `rustc --explain E0277`.\r\nerror: could not compile `rocket-test` (bin \"rocket-test\" test) due to previous error\n```\n\n\n### Additional Context\n\n_No response_\n\n### System Checks\n\n- [x] My bug report relates to functionality.\n- [X] I have tested against the latest Rocket release or a recent git commit.\n- [X] I have tested against the latest stable `rustc` toolchain.\n- [X] I was unable to find this issue previously reported.","closed_by":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/2750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rwf2/Rocket/issues/2750/timeline","performed_via_github_app":null,"state_reason":"completed"}