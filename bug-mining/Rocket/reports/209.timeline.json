[{"id":5247337075,"node_id":"LE_lADOAzqMt846z9y6zwAAAAE4xAJz","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/5247337075","actor":{"login":"blackghost1987","id":2356991,"node_id":"MDQ6VXNlcjIzNTY5OTE=","avatar_url":"https://avatars.githubusercontent.com/u/2356991?v=4","gravatar_id":"","url":"https://api.github.com/users/blackghost1987","html_url":"https://github.com/blackghost1987","followers_url":"https://api.github.com/users/blackghost1987/followers","following_url":"https://api.github.com/users/blackghost1987/following{/other_user}","gists_url":"https://api.github.com/users/blackghost1987/gists{/gist_id}","starred_url":"https://api.github.com/users/blackghost1987/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blackghost1987/subscriptions","organizations_url":"https://api.github.com/users/blackghost1987/orgs","repos_url":"https://api.github.com/users/blackghost1987/repos","events_url":"https://api.github.com/users/blackghost1987/events{/privacy}","received_events_url":"https://api.github.com/users/blackghost1987/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-09-02T13:06:43Z","label":{"name":"request","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/915070595","html_url":"https://github.com/rwf2/Rocket/issues/1881#issuecomment-915070595","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1881","id":915070595,"node_id":"IC_kwDOAzqMt842it6D","user":{"login":"zeroflaw","id":37941815,"node_id":"MDQ6VXNlcjM3OTQxODE1","avatar_url":"https://avatars.githubusercontent.com/u/37941815?v=4","gravatar_id":"","url":"https://api.github.com/users/zeroflaw","html_url":"https://github.com/zeroflaw","followers_url":"https://api.github.com/users/zeroflaw/followers","following_url":"https://api.github.com/users/zeroflaw/following{/other_user}","gists_url":"https://api.github.com/users/zeroflaw/gists{/gist_id}","starred_url":"https://api.github.com/users/zeroflaw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zeroflaw/subscriptions","organizations_url":"https://api.github.com/users/zeroflaw/orgs","repos_url":"https://api.github.com/users/zeroflaw/repos","events_url":"https://api.github.com/users/zeroflaw/events{/privacy}","received_events_url":"https://api.github.com/users/zeroflaw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T09:25:21Z","updated_at":"2021-09-08T09:25:21Z","body":"I needed to get to the tokio runtime before rocket did its thing, so I expanded the macros to see what it was doing, and you could do something like this. \r\n\r\n```\r\nfn main() {\r\n    // FIXME: The `workers` value won't reflect swaps of `Rocket` in attach\r\n    // fairings with different config values, or values from non-Rocket configs.\r\n    // See tokio-rs/tokio#3329 for a necessary solution in `tokio`.\r\n    rocket::tokio::runtime::Builder::new_multi_thread()\r\n        .worker_threads(Config::from(Config::figment()).workers)\r\n        // NOTE: graceful shutdown depends on the \"rocket-worker\" prefix.\r\n        .thread_name(\"rocket-worker-thread\")\r\n        .enable_all()\r\n        .build()\r\n        .expect(\"create tokio runtime\")\r\n        .block_on(async move {\r\n            let _ = rocket::build().mount(\"/hello\", routes![hello])\r\n            .launch()\r\n            .await;\r\n        })\r\n}\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/915070595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zeroflaw","id":37941815,"node_id":"MDQ6VXNlcjM3OTQxODE1","avatar_url":"https://avatars.githubusercontent.com/u/37941815?v=4","gravatar_id":"","url":"https://api.github.com/users/zeroflaw","html_url":"https://github.com/zeroflaw","followers_url":"https://api.github.com/users/zeroflaw/followers","following_url":"https://api.github.com/users/zeroflaw/following{/other_user}","gists_url":"https://api.github.com/users/zeroflaw/gists{/gist_id}","starred_url":"https://api.github.com/users/zeroflaw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zeroflaw/subscriptions","organizations_url":"https://api.github.com/users/zeroflaw/orgs","repos_url":"https://api.github.com/users/zeroflaw/repos","events_url":"https://api.github.com/users/zeroflaw/events{/privacy}","received_events_url":"https://api.github.com/users/zeroflaw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/915396562","html_url":"https://github.com/rwf2/Rocket/issues/1881#issuecomment-915396562","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1881","id":915396562,"node_id":"IC_kwDOAzqMt842j9fS","user":{"login":"blackghost1987","id":2356991,"node_id":"MDQ6VXNlcjIzNTY5OTE=","avatar_url":"https://avatars.githubusercontent.com/u/2356991?v=4","gravatar_id":"","url":"https://api.github.com/users/blackghost1987","html_url":"https://github.com/blackghost1987","followers_url":"https://api.github.com/users/blackghost1987/followers","following_url":"https://api.github.com/users/blackghost1987/following{/other_user}","gists_url":"https://api.github.com/users/blackghost1987/gists{/gist_id}","starred_url":"https://api.github.com/users/blackghost1987/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blackghost1987/subscriptions","organizations_url":"https://api.github.com/users/blackghost1987/orgs","repos_url":"https://api.github.com/users/blackghost1987/repos","events_url":"https://api.github.com/users/blackghost1987/events{/privacy}","received_events_url":"https://api.github.com/users/blackghost1987/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T16:41:48Z","updated_at":"2021-09-08T16:41:48Z","body":"@zeroflaw thx, this is a valid workaround. Unfortunately that's the kind of stuff I meant by \"creating a custom Tokio runtime and calling build/ignite/launch\", which I still think is not an ergonomic way to start Rocket. It would be much better if Rocket could create and handle it's own runtime, in an encapsulated fashion.\r\nAlso when I tried this \"hack\" to use the \"rocket-worker\" prefix for the thread name in my custom runtime, I still had some issues with graceful shutdown not working properly, or at least it gave some mean warnings... :(","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/915396562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"blackghost1987","id":2356991,"node_id":"MDQ6VXNlcjIzNTY5OTE=","avatar_url":"https://avatars.githubusercontent.com/u/2356991?v=4","gravatar_id":"","url":"https://api.github.com/users/blackghost1987","html_url":"https://github.com/blackghost1987","followers_url":"https://api.github.com/users/blackghost1987/followers","following_url":"https://api.github.com/users/blackghost1987/following{/other_user}","gists_url":"https://api.github.com/users/blackghost1987/gists{/gist_id}","starred_url":"https://api.github.com/users/blackghost1987/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blackghost1987/subscriptions","organizations_url":"https://api.github.com/users/blackghost1987/orgs","repos_url":"https://api.github.com/users/blackghost1987/repos","events_url":"https://api.github.com/users/blackghost1987/events{/privacy}","received_events_url":"https://api.github.com/users/blackghost1987/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5273541076,"node_id":"MEE_lADOAzqMt846z9y6zwAAAAE6U9nU","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/5273541076","actor":{"login":"zeroflaw","id":37941815,"node_id":"MDQ6VXNlcjM3OTQxODE1","avatar_url":"https://avatars.githubusercontent.com/u/37941815?v=4","gravatar_id":"","url":"https://api.github.com/users/zeroflaw","html_url":"https://github.com/zeroflaw","followers_url":"https://api.github.com/users/zeroflaw/followers","following_url":"https://api.github.com/users/zeroflaw/following{/other_user}","gists_url":"https://api.github.com/users/zeroflaw/gists{/gist_id}","starred_url":"https://api.github.com/users/zeroflaw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zeroflaw/subscriptions","organizations_url":"https://api.github.com/users/zeroflaw/orgs","repos_url":"https://api.github.com/users/zeroflaw/repos","events_url":"https://api.github.com/users/zeroflaw/events{/privacy}","received_events_url":"https://api.github.com/users/zeroflaw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-09-08T16:41:48Z","performed_via_github_app":null},{"id":5273541080,"node_id":"SE_lADOAzqMt846z9y6zwAAAAE6U9nY","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/5273541080","actor":{"login":"zeroflaw","id":37941815,"node_id":"MDQ6VXNlcjM3OTQxODE1","avatar_url":"https://avatars.githubusercontent.com/u/37941815?v=4","gravatar_id":"","url":"https://api.github.com/users/zeroflaw","html_url":"https://github.com/zeroflaw","followers_url":"https://api.github.com/users/zeroflaw/followers","following_url":"https://api.github.com/users/zeroflaw/following{/other_user}","gists_url":"https://api.github.com/users/zeroflaw/gists{/gist_id}","starred_url":"https://api.github.com/users/zeroflaw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zeroflaw/subscriptions","organizations_url":"https://api.github.com/users/zeroflaw/orgs","repos_url":"https://api.github.com/users/zeroflaw/repos","events_url":"https://api.github.com/users/zeroflaw/events{/privacy}","received_events_url":"https://api.github.com/users/zeroflaw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-09-08T16:41:48Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/916297900","html_url":"https://github.com/rwf2/Rocket/issues/1881#issuecomment-916297900","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1881","id":916297900,"node_id":"IC_kwDOAzqMt842nZis","user":{"login":"the10thWiz","id":16281943,"node_id":"MDQ6VXNlcjE2MjgxOTQz","avatar_url":"https://avatars.githubusercontent.com/u/16281943?v=4","gravatar_id":"","url":"https://api.github.com/users/the10thWiz","html_url":"https://github.com/the10thWiz","followers_url":"https://api.github.com/users/the10thWiz/followers","following_url":"https://api.github.com/users/the10thWiz/following{/other_user}","gists_url":"https://api.github.com/users/the10thWiz/gists{/gist_id}","starred_url":"https://api.github.com/users/the10thWiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/the10thWiz/subscriptions","organizations_url":"https://api.github.com/users/the10thWiz/orgs","repos_url":"https://api.github.com/users/the10thWiz/repos","events_url":"https://api.github.com/users/the10thWiz/events{/privacy}","received_events_url":"https://api.github.com/users/the10thWiz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T17:31:56Z","updated_at":"2021-09-09T17:31:56Z","body":"> Note: These changes would still make it impossible to do anything with the ignited Rocket instance from the outside, so Shutdown from the spawning thread would still be impossible (because it requires ignition, which requires a runtime), but I hope this will be easy to solve later.\r\n\r\nI agree that this is something to solve separately. A simple solution might be creating an async `mpsc` channel, which is used to communicate between async and sync code. This could be used to pass information, events, and even shutdown notifications between async and sync code. Trivially, it could be used to shutdown Rocket from outside (by passing the message to a function running inside the runtime), but it could also be used to share events, e.g. to send configuration values between the application and the HTTP front end.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/916297900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"the10thWiz","id":16281943,"node_id":"MDQ6VXNlcjE2MjgxOTQz","avatar_url":"https://avatars.githubusercontent.com/u/16281943?v=4","gravatar_id":"","url":"https://api.github.com/users/the10thWiz","html_url":"https://github.com/the10thWiz","followers_url":"https://api.github.com/users/the10thWiz/followers","following_url":"https://api.github.com/users/the10thWiz/following{/other_user}","gists_url":"https://api.github.com/users/the10thWiz/gists{/gist_id}","starred_url":"https://api.github.com/users/the10thWiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/the10thWiz/subscriptions","organizations_url":"https://api.github.com/users/the10thWiz/orgs","repos_url":"https://api.github.com/users/the10thWiz/repos","events_url":"https://api.github.com/users/the10thWiz/events{/privacy}","received_events_url":"https://api.github.com/users/the10thWiz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6545427213,"node_id":"MIE_lADOAzqMt846z9y6zwAAAAGGI0sN","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/6545427213","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2022-05-04T01:52:40Z","milestone":{"title":"0.5.0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/1117670154","html_url":"https://github.com/rwf2/Rocket/issues/1881#issuecomment-1117670154","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1881","id":1117670154,"node_id":"IC_kwDOAzqMt85CnksK","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-04T18:30:18Z","updated_at":"2022-05-04T18:31:39Z","body":"I fail to see why `#[rocket::main]` is not sufficient, as illustrated in @jebrosen's comment https://github.com/SergioBenitez/Rocket/discussions/1880#discussioncomment-1268465. Why can't you do all of the synchronous work inside the async main? Nothing will go wrong, you'll simply block the worker while the synchronous code is being executed, which is what you would do anyway if you weren't using an async runtime. Or if you don't want to block, use `spawn_blocking()` or `thread::spawn()`, the latter as illustrated in https://github.com/SergioBenitez/Rocket/discussions/1880#discussioncomment-1268465.\r\n\r\nTo be clear, the downside here is that you start an async runtime when you might not need it, but the performance cost is likely negligible when compared to other things your application is doing. If this can be demonstrated to not be the case, I'm happy to consider alternatives then. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/1117670154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6550823819,"node_id":"MEE_lADOAzqMt846z9y6zwAAAAGGdaOL","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/6550823819","actor":{"login":"jebrosen","id":7102588,"node_id":"MDQ6VXNlcjcxMDI1ODg=","avatar_url":"https://avatars.githubusercontent.com/u/7102588?v=4","gravatar_id":"","url":"https://api.github.com/users/jebrosen","html_url":"https://github.com/jebrosen","followers_url":"https://api.github.com/users/jebrosen/followers","following_url":"https://api.github.com/users/jebrosen/following{/other_user}","gists_url":"https://api.github.com/users/jebrosen/gists{/gist_id}","starred_url":"https://api.github.com/users/jebrosen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jebrosen/subscriptions","organizations_url":"https://api.github.com/users/jebrosen/orgs","repos_url":"https://api.github.com/users/jebrosen/repos","events_url":"https://api.github.com/users/jebrosen/events{/privacy}","received_events_url":"https://api.github.com/users/jebrosen/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-04T18:30:19Z","performed_via_github_app":null},{"id":6550823822,"node_id":"SE_lADOAzqMt846z9y6zwAAAAGGdaOO","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/6550823822","actor":{"login":"jebrosen","id":7102588,"node_id":"MDQ6VXNlcjcxMDI1ODg=","avatar_url":"https://avatars.githubusercontent.com/u/7102588?v=4","gravatar_id":"","url":"https://api.github.com/users/jebrosen","html_url":"https://github.com/jebrosen","followers_url":"https://api.github.com/users/jebrosen/followers","following_url":"https://api.github.com/users/jebrosen/following{/other_user}","gists_url":"https://api.github.com/users/jebrosen/gists{/gist_id}","starred_url":"https://api.github.com/users/jebrosen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jebrosen/subscriptions","organizations_url":"https://api.github.com/users/jebrosen/orgs","repos_url":"https://api.github.com/users/jebrosen/repos","events_url":"https://api.github.com/users/jebrosen/events{/privacy}","received_events_url":"https://api.github.com/users/jebrosen/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-04T18:30:19Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/1117997174","html_url":"https://github.com/rwf2/Rocket/issues/1881#issuecomment-1117997174","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1881","id":1117997174,"node_id":"IC_kwDOAzqMt85Co0h2","user":{"login":"AdmiralNemo","id":988596,"node_id":"MDQ6VXNlcjk4ODU5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/988596?v=4","gravatar_id":"","url":"https://api.github.com/users/AdmiralNemo","html_url":"https://github.com/AdmiralNemo","followers_url":"https://api.github.com/users/AdmiralNemo/followers","following_url":"https://api.github.com/users/AdmiralNemo/following{/other_user}","gists_url":"https://api.github.com/users/AdmiralNemo/gists{/gist_id}","starred_url":"https://api.github.com/users/AdmiralNemo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AdmiralNemo/subscriptions","organizations_url":"https://api.github.com/users/AdmiralNemo/orgs","repos_url":"https://api.github.com/users/AdmiralNemo/repos","events_url":"https://api.github.com/users/AdmiralNemo/events{/privacy}","received_events_url":"https://api.github.com/users/AdmiralNemo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-04T22:37:02Z","updated_at":"2022-05-04T22:37:02Z","body":"@SergioBenitez I would like to see this feature because my application consists of multiple processes, each launched from the same executable with different arguments.  One of those processes is a Rocket web server, while another is a different server that _also_ manages its own Tokio runtime.\r\n\r\nI have been able to work around this limitation so far by putting the `#[launch]` in a submodule as described in the issue description, so it's actually not that big of a deal to me; I just wanted to offer my use case.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/1117997174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AdmiralNemo","id":988596,"node_id":"MDQ6VXNlcjk4ODU5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/988596?v=4","gravatar_id":"","url":"https://api.github.com/users/AdmiralNemo","html_url":"https://github.com/AdmiralNemo","followers_url":"https://api.github.com/users/AdmiralNemo/followers","following_url":"https://api.github.com/users/AdmiralNemo/following{/other_user}","gists_url":"https://api.github.com/users/AdmiralNemo/gists{/gist_id}","starred_url":"https://api.github.com/users/AdmiralNemo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AdmiralNemo/subscriptions","organizations_url":"https://api.github.com/users/AdmiralNemo/orgs","repos_url":"https://api.github.com/users/AdmiralNemo/repos","events_url":"https://api.github.com/users/AdmiralNemo/events{/privacy}","received_events_url":"https://api.github.com/users/AdmiralNemo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6552835674,"node_id":"MEE_lADOAzqMt846z9y6zwAAAAGGlFZa","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/6552835674","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-04T22:37:03Z","performed_via_github_app":null},{"id":6552835678,"node_id":"SE_lADOAzqMt846z9y6zwAAAAGGlFZe","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/6552835678","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-04T22:37:03Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/1118664450","html_url":"https://github.com/rwf2/Rocket/issues/1881#issuecomment-1118664450","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1881","id":1118664450,"node_id":"IC_kwDOAzqMt85CrXcC","user":{"login":"the10thWiz","id":16281943,"node_id":"MDQ6VXNlcjE2MjgxOTQz","avatar_url":"https://avatars.githubusercontent.com/u/16281943?v=4","gravatar_id":"","url":"https://api.github.com/users/the10thWiz","html_url":"https://github.com/the10thWiz","followers_url":"https://api.github.com/users/the10thWiz/followers","following_url":"https://api.github.com/users/the10thWiz/following{/other_user}","gists_url":"https://api.github.com/users/the10thWiz/gists{/gist_id}","starred_url":"https://api.github.com/users/the10thWiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/the10thWiz/subscriptions","organizations_url":"https://api.github.com/users/the10thWiz/orgs","repos_url":"https://api.github.com/users/the10thWiz/repos","events_url":"https://api.github.com/users/the10thWiz/events{/privacy}","received_events_url":"https://api.github.com/users/the10thWiz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-05T15:01:53Z","updated_at":"2022-05-05T15:01:53Z","body":"I've been thinking about this, and the simple solution might be just allowing the `#[rocket::main]` or `#[launch]` functions to have arguments. In this case, they are not renamed or marked with `#[main]`, since they cannot be the main function, but instead they must be called (as a blocking function). Constructing the rocket instance outside of the runtime then becomes trivial (although I don't know how well this works), but more importantly, configuration, and sync mpsc channels can be created and passed in.\r\n\r\nThe major downside here is creating good error messages when a user is trying to use the macros as main, and add parameters without realizing it's an issue. Right now, we can just output that the main or launch functions can't have parameters, but this would prevent us from doing that. We could add an options, i.e. `#[rocket::main(non_main)]`, which changes the behavior, but this feels unintuitive. I especially don't like the idea of `main(non_main)`, since it's a contradiction.\r\n\r\nAt this point, I don't think the extra work is worthwhile here. Passing extra parameters into Rocket isn't a common enough use case for us to make it work, especially not yet. If the runtime setup and creation becomes more stable, I think this may be worthwhile, but I don't see that happening.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/1118664450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"the10thWiz","id":16281943,"node_id":"MDQ6VXNlcjE2MjgxOTQz","avatar_url":"https://avatars.githubusercontent.com/u/16281943?v=4","gravatar_id":"","url":"https://api.github.com/users/the10thWiz","html_url":"https://github.com/the10thWiz","followers_url":"https://api.github.com/users/the10thWiz/followers","following_url":"https://api.github.com/users/the10thWiz/following{/other_user}","gists_url":"https://api.github.com/users/the10thWiz/gists{/gist_id}","starred_url":"https://api.github.com/users/the10thWiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/the10thWiz/subscriptions","organizations_url":"https://api.github.com/users/the10thWiz/orgs","repos_url":"https://api.github.com/users/the10thWiz/repos","events_url":"https://api.github.com/users/the10thWiz/events{/privacy}","received_events_url":"https://api.github.com/users/the10thWiz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/1118671214","html_url":"https://github.com/rwf2/Rocket/issues/1881#issuecomment-1118671214","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1881","id":1118671214,"node_id":"IC_kwDOAzqMt85CrZFu","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-05T15:07:16Z","updated_at":"2022-05-05T15:07:16Z","body":"Thanks for the commentary, @the10thWiz; valuable as always. My thinking here is that it would suffice to have a rocket::execute function, or similar, that takes a `Rocket<P>`, starts a runtime, blocks on the server, and returns when the server shuts down. What do you think?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/1118671214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6557333540,"node_id":"MEE_lADOAzqMt846z9y6zwAAAAGG2Pgk","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/6557333540","actor":{"login":"the10thWiz","id":16281943,"node_id":"MDQ6VXNlcjE2MjgxOTQz","avatar_url":"https://avatars.githubusercontent.com/u/16281943?v=4","gravatar_id":"","url":"https://api.github.com/users/the10thWiz","html_url":"https://github.com/the10thWiz","followers_url":"https://api.github.com/users/the10thWiz/followers","following_url":"https://api.github.com/users/the10thWiz/following{/other_user}","gists_url":"https://api.github.com/users/the10thWiz/gists{/gist_id}","starred_url":"https://api.github.com/users/the10thWiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/the10thWiz/subscriptions","organizations_url":"https://api.github.com/users/the10thWiz/orgs","repos_url":"https://api.github.com/users/the10thWiz/repos","events_url":"https://api.github.com/users/the10thWiz/events{/privacy}","received_events_url":"https://api.github.com/users/the10thWiz/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-05T15:07:16Z","performed_via_github_app":null},{"id":6557333545,"node_id":"SE_lADOAzqMt846z9y6zwAAAAGG2Pgp","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/6557333545","actor":{"login":"the10thWiz","id":16281943,"node_id":"MDQ6VXNlcjE2MjgxOTQz","avatar_url":"https://avatars.githubusercontent.com/u/16281943?v=4","gravatar_id":"","url":"https://api.github.com/users/the10thWiz","html_url":"https://github.com/the10thWiz","followers_url":"https://api.github.com/users/the10thWiz/followers","following_url":"https://api.github.com/users/the10thWiz/following{/other_user}","gists_url":"https://api.github.com/users/the10thWiz/gists{/gist_id}","starred_url":"https://api.github.com/users/the10thWiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/the10thWiz/subscriptions","organizations_url":"https://api.github.com/users/the10thWiz/orgs","repos_url":"https://api.github.com/users/the10thWiz/repos","events_url":"https://api.github.com/users/the10thWiz/events{/privacy}","received_events_url":"https://api.github.com/users/the10thWiz/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-05T15:07:16Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/1118721699","html_url":"https://github.com/rwf2/Rocket/issues/1881#issuecomment-1118721699","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/1881","id":1118721699,"node_id":"IC_kwDOAzqMt85Crlaj","user":{"login":"blackghost1987","id":2356991,"node_id":"MDQ6VXNlcjIzNTY5OTE=","avatar_url":"https://avatars.githubusercontent.com/u/2356991?v=4","gravatar_id":"","url":"https://api.github.com/users/blackghost1987","html_url":"https://github.com/blackghost1987","followers_url":"https://api.github.com/users/blackghost1987/followers","following_url":"https://api.github.com/users/blackghost1987/following{/other_user}","gists_url":"https://api.github.com/users/blackghost1987/gists{/gist_id}","starred_url":"https://api.github.com/users/blackghost1987/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blackghost1987/subscriptions","organizations_url":"https://api.github.com/users/blackghost1987/orgs","repos_url":"https://api.github.com/users/blackghost1987/repos","events_url":"https://api.github.com/users/blackghost1987/events{/privacy}","received_events_url":"https://api.github.com/users/blackghost1987/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-05T15:44:13Z","updated_at":"2022-05-05T15:44:13Z","body":"> Thanks for the commentary, @the10thWiz; valuable as always. My thinking here is that it would suffice to have a rocket::execute function, or similar, that takes a `Rocket<P>`, starts a runtime, blocks on the server, and returns when the server shuts down. What do you think?\r\n\r\nThis sounds like a perfect solution for my usecase, and it doesn't even require any macro \"magic\" üëç \r\n\r\nAlthough your original comment was totally right, I could use an async main without actually launching Rocket, with a minimal overhead. The only reason I didn't do that is to separate Rocket related code from the other parts of the application, so not really a functional thing, more like code quality. But that's also doable by using `#[launch]` in a submodule, even if that solution is kinda unintuitive.\r\n\r\nThe proposed `rocket::execute()` would make this all possible without exposing the runtime (or building it manually), while it is also a bit more intuitive in my opinion. I like the approach of using the macros for the \"usual\" way OR using a function if something different is needed.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/1118721699/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"blackghost1987","id":2356991,"node_id":"MDQ6VXNlcjIzNTY5OTE=","avatar_url":"https://avatars.githubusercontent.com/u/2356991?v=4","gravatar_id":"","url":"https://api.github.com/users/blackghost1987","html_url":"https://github.com/blackghost1987","followers_url":"https://api.github.com/users/blackghost1987/followers","following_url":"https://api.github.com/users/blackghost1987/following{/other_user}","gists_url":"https://api.github.com/users/blackghost1987/gists{/gist_id}","starred_url":"https://api.github.com/users/blackghost1987/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blackghost1987/subscriptions","organizations_url":"https://api.github.com/users/blackghost1987/orgs","repos_url":"https://api.github.com/users/blackghost1987/repos","events_url":"https://api.github.com/users/blackghost1987/events{/privacy}","received_events_url":"https://api.github.com/users/blackghost1987/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6557631900,"node_id":"MEE_lADOAzqMt846z9y6zwAAAAGG3YWc","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/6557631900","actor":{"login":"the10thWiz","id":16281943,"node_id":"MDQ6VXNlcjE2MjgxOTQz","avatar_url":"https://avatars.githubusercontent.com/u/16281943?v=4","gravatar_id":"","url":"https://api.github.com/users/the10thWiz","html_url":"https://github.com/the10thWiz","followers_url":"https://api.github.com/users/the10thWiz/followers","following_url":"https://api.github.com/users/the10thWiz/following{/other_user}","gists_url":"https://api.github.com/users/the10thWiz/gists{/gist_id}","starred_url":"https://api.github.com/users/the10thWiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/the10thWiz/subscriptions","organizations_url":"https://api.github.com/users/the10thWiz/orgs","repos_url":"https://api.github.com/users/the10thWiz/repos","events_url":"https://api.github.com/users/the10thWiz/events{/privacy}","received_events_url":"https://api.github.com/users/the10thWiz/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-05T15:44:13Z","performed_via_github_app":null},{"id":6557631910,"node_id":"SE_lADOAzqMt846z9y6zwAAAAGG3YWm","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/6557631910","actor":{"login":"the10thWiz","id":16281943,"node_id":"MDQ6VXNlcjE2MjgxOTQz","avatar_url":"https://avatars.githubusercontent.com/u/16281943?v=4","gravatar_id":"","url":"https://api.github.com/users/the10thWiz","html_url":"https://github.com/the10thWiz","followers_url":"https://api.github.com/users/the10thWiz/followers","following_url":"https://api.github.com/users/the10thWiz/following{/other_user}","gists_url":"https://api.github.com/users/the10thWiz/gists{/gist_id}","starred_url":"https://api.github.com/users/the10thWiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/the10thWiz/subscriptions","organizations_url":"https://api.github.com/users/the10thWiz/orgs","repos_url":"https://api.github.com/users/the10thWiz/repos","events_url":"https://api.github.com/users/the10thWiz/events{/privacy}","received_events_url":"https://api.github.com/users/the10thWiz/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-05T15:44:14Z","performed_via_github_app":null},{"id":6567889599,"node_id":"CE_lADOAzqMt846z9y6zwAAAAGHegq_","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/6567889599","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"46c441ad8be35074ac786a8d285a61f4496ce191","commit_url":"https://api.github.com/repos/rwf2/Rocket/commits/46c441ad8be35074ac786a8d285a61f4496ce191","created_at":"2022-05-07T20:56:03Z","state_reason":null,"performed_via_github_app":null},{"id":11603836633,"node_id":"REFE_lADOAzqMt846z9y6zwAAAAKzpH7Z","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/11603836633","actor":{"login":"pull[bot]","id":39814207,"node_id":"MDM6Qm90Mzk4MTQyMDc=","avatar_url":"https://avatars.githubusercontent.com/in/12910?v=4","gravatar_id":"","url":"https://api.github.com/users/pull%5Bbot%5D","html_url":"https://github.com/apps/pull","followers_url":"https://api.github.com/users/pull%5Bbot%5D/followers","following_url":"https://api.github.com/users/pull%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/pull%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/pull%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pull%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/pull%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/pull%5Bbot%5D/repos","events_url":"https://api.github.com/users/pull%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/pull%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"46c441ad8be35074ac786a8d285a61f4496ce191","commit_url":"https://api.github.com/repos/Necmttn/Rocket/commits/46c441ad8be35074ac786a8d285a61f4496ce191","created_at":"2024-01-26T01:03:08Z","performed_via_github_app":null}]