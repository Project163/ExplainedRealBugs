[{"id":904476134,"node_id":"MDEyOkxhYmVsZWRFdmVudDkwNDQ3NjEzNA==","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/904476134","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2016-12-24T03:21:11Z","label":{"name":"request","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/269090910","html_url":"https://github.com/rwf2/Rocket/issues/33#issuecomment-269090910","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/33","id":269090910,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTA5MDkxMA==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-24T16:30:34Z","updated_at":"2016-12-24T16:30:34Z","body":"Unless otherwise stated, everything is streaming in Rocket by default, not just `Stream`. If you'd like, you can implement server sent events via [Responder](https://api.rocket.rs/rocket/response/trait.Responder.html). You'd need to create a new `Read` type that does the appropriate thing. Of course, that `Responder` will block while sending events, a side effect of Rocket being synchronous. This will eventually stop being the case.\r\n\r\nOn a more fundamental level: why would someone use server-sent events instead of web sockets? I think seeing some kind of native support for web sockets would be nice, and it would be even nicer if that supplanted the need for server-sent events.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/269090910/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/273205596","html_url":"https://github.com/rwf2/Rocket/issues/33#issuecomment-273205596","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/33","id":273205596,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MzIwNTU5Ng==","user":{"login":"valpackett","id":208340,"node_id":"MDQ6VXNlcjIwODM0MA==","avatar_url":"https://avatars.githubusercontent.com/u/208340?v=4","gravatar_id":"","url":"https://api.github.com/users/valpackett","html_url":"https://github.com/valpackett","followers_url":"https://api.github.com/users/valpackett/followers","following_url":"https://api.github.com/users/valpackett/following{/other_user}","gists_url":"https://api.github.com/users/valpackett/gists{/gist_id}","starred_url":"https://api.github.com/users/valpackett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/valpackett/subscriptions","organizations_url":"https://api.github.com/users/valpackett/orgs","repos_url":"https://api.github.com/users/valpackett/repos","events_url":"https://api.github.com/users/valpackett/events{/privacy}","received_events_url":"https://api.github.com/users/valpackett/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-17T15:43:03Z","updated_at":"2017-01-17T15:43:03Z","body":"> why would someone use server-sent events instead of web sockets\r\n\r\nBecause if you only need unidirectional (server to browser) notifications, why set up the more complex WebSocket protocol? Okay, I know WS is not actually complex, but still. SSE just *feels* lighter.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/273205596/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"valpackett","id":208340,"node_id":"MDQ6VXNlcjIwODM0MA==","avatar_url":"https://avatars.githubusercontent.com/u/208340?v=4","gravatar_id":"","url":"https://api.github.com/users/valpackett","html_url":"https://github.com/valpackett","followers_url":"https://api.github.com/users/valpackett/followers","following_url":"https://api.github.com/users/valpackett/following{/other_user}","gists_url":"https://api.github.com/users/valpackett/gists{/gist_id}","starred_url":"https://api.github.com/users/valpackett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/valpackett/subscriptions","organizations_url":"https://api.github.com/users/valpackett/orgs","repos_url":"https://api.github.com/users/valpackett/repos","events_url":"https://api.github.com/users/valpackett/events{/privacy}","received_events_url":"https://api.github.com/users/valpackett/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/273347035","html_url":"https://github.com/rwf2/Rocket/issues/33#issuecomment-273347035","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/33","id":273347035,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MzM0NzAzNQ==","user":{"login":"bradleybeddoes","id":86558,"node_id":"MDQ6VXNlcjg2NTU4","avatar_url":"https://avatars.githubusercontent.com/u/86558?v=4","gravatar_id":"","url":"https://api.github.com/users/bradleybeddoes","html_url":"https://github.com/bradleybeddoes","followers_url":"https://api.github.com/users/bradleybeddoes/followers","following_url":"https://api.github.com/users/bradleybeddoes/following{/other_user}","gists_url":"https://api.github.com/users/bradleybeddoes/gists{/gist_id}","starred_url":"https://api.github.com/users/bradleybeddoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bradleybeddoes/subscriptions","organizations_url":"https://api.github.com/users/bradleybeddoes/orgs","repos_url":"https://api.github.com/users/bradleybeddoes/repos","events_url":"https://api.github.com/users/bradleybeddoes/events{/privacy}","received_events_url":"https://api.github.com/users/bradleybeddoes/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-18T00:38:07Z","updated_at":"2017-01-18T00:38:07Z","body":"+1 on the native support for web sockets within Rocket","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/273347035/reactions","total_count":12,"+1":12,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bradleybeddoes","id":86558,"node_id":"MDQ6VXNlcjg2NTU4","avatar_url":"https://avatars.githubusercontent.com/u/86558?v=4","gravatar_id":"","url":"https://api.github.com/users/bradleybeddoes","html_url":"https://github.com/bradleybeddoes","followers_url":"https://api.github.com/users/bradleybeddoes/followers","following_url":"https://api.github.com/users/bradleybeddoes/following{/other_user}","gists_url":"https://api.github.com/users/bradleybeddoes/gists{/gist_id}","starred_url":"https://api.github.com/users/bradleybeddoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bradleybeddoes/subscriptions","organizations_url":"https://api.github.com/users/bradleybeddoes/orgs","repos_url":"https://api.github.com/users/bradleybeddoes/repos","events_url":"https://api.github.com/users/bradleybeddoes/events{/privacy}","received_events_url":"https://api.github.com/users/bradleybeddoes/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/275894072","html_url":"https://github.com/rwf2/Rocket/issues/33#issuecomment-275894072","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/33","id":275894072,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTg5NDA3Mg==","user":{"login":"greglearns","id":4944698,"node_id":"MDQ6VXNlcjQ5NDQ2OTg=","avatar_url":"https://avatars.githubusercontent.com/u/4944698?v=4","gravatar_id":"","url":"https://api.github.com/users/greglearns","html_url":"https://github.com/greglearns","followers_url":"https://api.github.com/users/greglearns/followers","following_url":"https://api.github.com/users/greglearns/following{/other_user}","gists_url":"https://api.github.com/users/greglearns/gists{/gist_id}","starred_url":"https://api.github.com/users/greglearns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greglearns/subscriptions","organizations_url":"https://api.github.com/users/greglearns/orgs","repos_url":"https://api.github.com/users/greglearns/repos","events_url":"https://api.github.com/users/greglearns/events{/privacy}","received_events_url":"https://api.github.com/users/greglearns/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-29T04:59:35Z","updated_at":"2017-01-29T04:59:35Z","body":"@SergioBenitez There are a number of differences between Server Send Events (SSE) and WebSockets (WS) -- definitely worth reading up on. They both have value for their specific use-cases. SSE has some great features, and WS has some problem that only become apparent once you investigate them. For example, WS don't currently work with AWS ELBs unless the ELB is in PROXY-mode, which removes a lot of the benefit of an ELB! Also, the security model for WS is different than standard HTTP, which complicates securely implementing WS. WS need an UPGRADE on the HTTP protocol to work, whereas SSE does not. There are a number of other advantages to SSE (easy to implement, browsers automatically reconnect if they become disconnected, ... more ... more), and are good for when you don't have to have the bi-directional capabilities or super-low-latency of WS. I would definitely vote +1 for SSE support in Rocket (which, I'm still loving!)\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/275894072/reactions","total_count":19,"+1":19,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"greglearns","id":4944698,"node_id":"MDQ6VXNlcjQ5NDQ2OTg=","avatar_url":"https://avatars.githubusercontent.com/u/4944698?v=4","gravatar_id":"","url":"https://api.github.com/users/greglearns","html_url":"https://github.com/greglearns","followers_url":"https://api.github.com/users/greglearns/followers","following_url":"https://api.github.com/users/greglearns/following{/other_user}","gists_url":"https://api.github.com/users/greglearns/gists{/gist_id}","starred_url":"https://api.github.com/users/greglearns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greglearns/subscriptions","organizations_url":"https://api.github.com/users/greglearns/orgs","repos_url":"https://api.github.com/users/greglearns/repos","events_url":"https://api.github.com/users/greglearns/events{/privacy}","received_events_url":"https://api.github.com/users/greglearns/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":940455699,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTQwNDU1Njk5","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/940455699","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-01-29T04:59:35Z","performed_via_github_app":null},{"id":940455700,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDk0MDQ1NTcwMA==","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/940455700","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-01-29T04:59:35Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/287262738","html_url":"https://github.com/rwf2/Rocket/issues/33#issuecomment-287262738","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/33","id":287262738,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzI2MjczOA==","user":{"login":"sporto","id":1005498,"node_id":"MDQ6VXNlcjEwMDU0OTg=","avatar_url":"https://avatars.githubusercontent.com/u/1005498?v=4","gravatar_id":"","url":"https://api.github.com/users/sporto","html_url":"https://github.com/sporto","followers_url":"https://api.github.com/users/sporto/followers","following_url":"https://api.github.com/users/sporto/following{/other_user}","gists_url":"https://api.github.com/users/sporto/gists{/gist_id}","starred_url":"https://api.github.com/users/sporto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sporto/subscriptions","organizations_url":"https://api.github.com/users/sporto/orgs","repos_url":"https://api.github.com/users/sporto/repos","events_url":"https://api.github.com/users/sporto/events{/privacy}","received_events_url":"https://api.github.com/users/sporto/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-17T04:15:56Z","updated_at":"2017-03-17T04:15:56Z","body":"This would be great. I tried to make my own implementation using a Responder but my rust knowledge is not there yet. I would love to see an example of how to do SSE in Rocket.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/287262738/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sporto","id":1005498,"node_id":"MDQ6VXNlcjEwMDU0OTg=","avatar_url":"https://avatars.githubusercontent.com/u/1005498?v=4","gravatar_id":"","url":"https://api.github.com/users/sporto","html_url":"https://github.com/sporto","followers_url":"https://api.github.com/users/sporto/followers","following_url":"https://api.github.com/users/sporto/following{/other_user}","gists_url":"https://api.github.com/users/sporto/gists{/gist_id}","starred_url":"https://api.github.com/users/sporto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sporto/subscriptions","organizations_url":"https://api.github.com/users/sporto/orgs","repos_url":"https://api.github.com/users/sporto/repos","events_url":"https://api.github.com/users/sporto/events{/privacy}","received_events_url":"https://api.github.com/users/sporto/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/293845159","html_url":"https://github.com/rwf2/Rocket/issues/33#issuecomment-293845159","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/33","id":293845159,"node_id":"MDEyOklzc3VlQ29tbWVudDI5Mzg0NTE1OQ==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-13T09:53:36Z","updated_at":"2017-04-13T09:53:36Z","body":"I believe Rocket should be able to handle Server Sent Events. It's likely that the implementation would reside in `contrib`, but `core` should make such an implementation as simple as possible. That being said, the current synchronous architecture isn't amenable to SSE. As a result, I'm slating this for a later milestone. Nonetheless, I am committed to seeing this in Rocket.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/293845159/reactions","total_count":13,"+1":0,"-1":0,"laugh":0,"hooray":13,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1041609740,"node_id":"MDEyOkxhYmVsZWRFdmVudDEwNDE2MDk3NDA=","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1041609740","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-04-13T09:53:40Z","label":{"name":"accepted","color":"0e8a16"},"performed_via_github_app":null},{"id":1041609895,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDEwNDE2MDk4OTU=","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/1041609895","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2017-04-13T09:53:47Z","milestone":{"title":"0.8.0"},"performed_via_github_app":null},{"actor":{"login":"belst","id":1449312,"node_id":"MDQ6VXNlcjE0NDkzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/1449312?v=4","gravatar_id":"","url":"https://api.github.com/users/belst","html_url":"https://github.com/belst","followers_url":"https://api.github.com/users/belst/followers","following_url":"https://api.github.com/users/belst/following{/other_user}","gists_url":"https://api.github.com/users/belst/gists{/gist_id}","starred_url":"https://api.github.com/users/belst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/belst/subscriptions","organizations_url":"https://api.github.com/users/belst/orgs","repos_url":"https://api.github.com/users/belst/repos","events_url":"https://api.github.com/users/belst/events{/privacy}","received_events_url":"https://api.github.com/users/belst/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-03T12:55:51Z","updated_at":"2017-10-03T12:55:51Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/448","repository_url":"https://api.github.com/repos/rwf2/Rocket","labels_url":"https://api.github.com/repos/rwf2/Rocket/issues/448/labels{/name}","comments_url":"https://api.github.com/repos/rwf2/Rocket/issues/448/comments","events_url":"https://api.github.com/repos/rwf2/Rocket/issues/448/events","html_url":"https://github.com/rwf2/Rocket/issues/448","id":262413912,"node_id":"MDU6SXNzdWUyNjI0MTM5MTI=","number":448,"title":"Websockets on Rocket?","user":{"login":"catroot","id":10930458,"node_id":"MDQ6VXNlcjEwOTMwNDU4","avatar_url":"https://avatars.githubusercontent.com/u/10930458?v=4","gravatar_id":"","url":"https://api.github.com/users/catroot","html_url":"https://github.com/catroot","followers_url":"https://api.github.com/users/catroot/followers","following_url":"https://api.github.com/users/catroot/following{/other_user}","gists_url":"https://api.github.com/users/catroot/gists{/gist_id}","starred_url":"https://api.github.com/users/catroot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/catroot/subscriptions","organizations_url":"https://api.github.com/users/catroot/orgs","repos_url":"https://api.github.com/users/catroot/repos","events_url":"https://api.github.com/users/catroot/events{/privacy}","received_events_url":"https://api.github.com/users/catroot/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":343542067,"node_id":"MDU6TGFiZWwzNDM1NDIwNjc=","url":"https://api.github.com/repos/rwf2/Rocket/labels/duplicate","name":"duplicate","color":"cfd3d7","default":true,"description":"This issue or pull request already exists"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-10-03T12:47:29Z","updated_at":"2017-10-03T15:12:37Z","closed_at":"2017-10-03T15:11:54Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54168759,"node_id":"MDEwOlJlcG9zaXRvcnk1NDE2ODc1OQ==","name":"Rocket","full_name":"rwf2/Rocket","private":false,"owner":{"login":"rwf2","id":106361765,"node_id":"O_kgDOBlbzpQ","avatar_url":"https://avatars.githubusercontent.com/u/106361765?v=4","gravatar_id":"","url":"https://api.github.com/users/rwf2","html_url":"https://github.com/rwf2","followers_url":"https://api.github.com/users/rwf2/followers","following_url":"https://api.github.com/users/rwf2/following{/other_user}","gists_url":"https://api.github.com/users/rwf2/gists{/gist_id}","starred_url":"https://api.github.com/users/rwf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rwf2/subscriptions","organizations_url":"https://api.github.com/users/rwf2/orgs","repos_url":"https://api.github.com/users/rwf2/repos","events_url":"https://api.github.com/users/rwf2/events{/privacy}","received_events_url":"https://api.github.com/users/rwf2/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rwf2/Rocket","description":"A web framework for Rust.","fork":false,"url":"https://api.github.com/repos/rwf2/Rocket","forks_url":"https://api.github.com/repos/rwf2/Rocket/forks","keys_url":"https://api.github.com/repos/rwf2/Rocket/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rwf2/Rocket/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rwf2/Rocket/teams","hooks_url":"https://api.github.com/repos/rwf2/Rocket/hooks","issue_events_url":"https://api.github.com/repos/rwf2/Rocket/issues/events{/number}","events_url":"https://api.github.com/repos/rwf2/Rocket/events","assignees_url":"https://api.github.com/repos/rwf2/Rocket/assignees{/user}","branches_url":"https://api.github.com/repos/rwf2/Rocket/branches{/branch}","tags_url":"https://api.github.com/repos/rwf2/Rocket/tags","blobs_url":"https://api.github.com/repos/rwf2/Rocket/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rwf2/Rocket/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rwf2/Rocket/git/refs{/sha}","trees_url":"https://api.github.com/repos/rwf2/Rocket/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rwf2/Rocket/statuses/{sha}","languages_url":"https://api.github.com/repos/rwf2/Rocket/languages","stargazers_url":"https://api.github.com/repos/rwf2/Rocket/stargazers","contributors_url":"https://api.github.com/repos/rwf2/Rocket/contributors","subscribers_url":"https://api.github.com/repos/rwf2/Rocket/subscribers","subscription_url":"https://api.github.com/repos/rwf2/Rocket/subscription","commits_url":"https://api.github.com/repos/rwf2/Rocket/commits{/sha}","git_commits_url":"https://api.github.com/repos/rwf2/Rocket/git/commits{/sha}","comments_url":"https://api.github.com/repos/rwf2/Rocket/comments{/number}","issue_comment_url":"https://api.github.com/repos/rwf2/Rocket/issues/comments{/number}","contents_url":"https://api.github.com/repos/rwf2/Rocket/contents/{+path}","compare_url":"https://api.github.com/repos/rwf2/Rocket/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rwf2/Rocket/merges","archive_url":"https://api.github.com/repos/rwf2/Rocket/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rwf2/Rocket/downloads","issues_url":"https://api.github.com/repos/rwf2/Rocket/issues{/number}","pulls_url":"https://api.github.com/repos/rwf2/Rocket/pulls{/number}","milestones_url":"https://api.github.com/repos/rwf2/Rocket/milestones{/number}","notifications_url":"https://api.github.com/repos/rwf2/Rocket/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rwf2/Rocket/labels{/name}","releases_url":"https://api.github.com/repos/rwf2/Rocket/releases{/id}","deployments_url":"https://api.github.com/repos/rwf2/Rocket/deployments","created_at":"2016-03-18T02:50:18Z","updated_at":"2025-11-09T18:27:08Z","pushed_at":"2025-10-01T04:53:46Z","git_url":"git://github.com/rwf2/Rocket.git","ssh_url":"git@github.com:rwf2/Rocket.git","clone_url":"https://github.com/rwf2/Rocket.git","svn_url":"https://github.com/rwf2/Rocket","homepage":"https://rocket.rs","size":8445,"stargazers_count":25480,"watchers_count":25480,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":1614,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":84,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["framework","rocket","rust","web","web-development","web-framework"],"visibility":"public","forks":1614,"open_issues":84,"watchers":25480,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hello!\r\nIs there possible to upgrade http connection with Rocket to handle websockets?\r\nSimilar to routings like\r\n#[get(\"/\")]\r\nbut with\r\n#[ws(\"/\")]\r\n\r\nThis will be very handy","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rwf2/Rocket/issues/448/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/351047975","html_url":"https://github.com/rwf2/Rocket/issues/33#issuecomment-351047975","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/33","id":351047975,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTA0Nzk3NQ==","user":{"login":"gfriloux","id":534397,"node_id":"MDQ6VXNlcjUzNDM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/534397?v=4","gravatar_id":"","url":"https://api.github.com/users/gfriloux","html_url":"https://github.com/gfriloux","followers_url":"https://api.github.com/users/gfriloux/followers","following_url":"https://api.github.com/users/gfriloux/following{/other_user}","gists_url":"https://api.github.com/users/gfriloux/gists{/gist_id}","starred_url":"https://api.github.com/users/gfriloux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gfriloux/subscriptions","organizations_url":"https://api.github.com/users/gfriloux/orgs","repos_url":"https://api.github.com/users/gfriloux/repos","events_url":"https://api.github.com/users/gfriloux/events{/privacy}","received_events_url":"https://api.github.com/users/gfriloux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-12T13:15:41Z","updated_at":"2017-12-12T13:36:33Z","body":"Hello, i am having (almost) the same need.\r\n\r\nAs i am a complete beginner with rust (im trying to see how hard it would be to port an existing project from C to Rust), but i still have been able to come up with this code : \r\nhttps://gist.github.com/gfriloux/5f82c702e445fdc4b447586bb6721dbd\r\n\r\nWhat it does is simply read on a unix pipe.\r\nIf i only return a File structure from the `pending` function, rocket.rs will only read the pipe **once** and return this result to the HTTP client (so it wont be a \"stream\" or a chunked answer).\r\n\r\nSo i create a PipeLoop structure, implement `Responder` and `Read` for it, and each read call will be blocking.\r\nThis allows any other app to write into the pipe as it has things to write, and rocket.rs to be aware of it.\r\n\r\nStill, there is a thing that doesnt work properlly : rocket.rs will bufferise on its side.\r\nIt seems to wait for around 16KB of data to start sending the first bytes.\r\n\r\nFor example, if my pipe is `/tmp/testfifo`, i have to do this : \r\n```\r\n# echo \"toto\" >/tmp/testfifo\r\n# perl -E 'say \"=\" x 8000' >/tmp/testfifo\r\n# perl -E 'say \"=\" x 8000' >/tmp/testfifo\r\n```\r\nOnly to receive \"toto\" on the client side.\r\n\r\nThis is where i begin to not know what to do.\r\nI am reading rocket's source code, trying to find an answer, but if you know the last bits needed to get it working, it would be awesome.\r\n\r\nI'd like to come up with a workaround before v0.8.0 (having a long running thread isn't a problem in my case).","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/351047975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gfriloux","id":534397,"node_id":"MDQ6VXNlcjUzNDM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/534397?v=4","gravatar_id":"","url":"https://api.github.com/users/gfriloux","html_url":"https://github.com/gfriloux","followers_url":"https://api.github.com/users/gfriloux/followers","following_url":"https://api.github.com/users/gfriloux/following{/other_user}","gists_url":"https://api.github.com/users/gfriloux/gists{/gist_id}","starred_url":"https://api.github.com/users/gfriloux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gfriloux/subscriptions","organizations_url":"https://api.github.com/users/gfriloux/orgs","repos_url":"https://api.github.com/users/gfriloux/repos","events_url":"https://api.github.com/users/gfriloux/events{/privacy}","received_events_url":"https://api.github.com/users/gfriloux/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/351066479","html_url":"https://github.com/rwf2/Rocket/issues/33#issuecomment-351066479","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/33","id":351066479,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTA2NjQ3OQ==","user":{"login":"gfriloux","id":534397,"node_id":"MDQ6VXNlcjUzNDM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/534397?v=4","gravatar_id":"","url":"https://api.github.com/users/gfriloux","html_url":"https://github.com/gfriloux","followers_url":"https://api.github.com/users/gfriloux/followers","following_url":"https://api.github.com/users/gfriloux/following{/other_user}","gists_url":"https://api.github.com/users/gfriloux/gists{/gist_id}","starred_url":"https://api.github.com/users/gfriloux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gfriloux/subscriptions","organizations_url":"https://api.github.com/users/gfriloux/orgs","repos_url":"https://api.github.com/users/gfriloux/repos","events_url":"https://api.github.com/users/gfriloux/events{/privacy}","received_events_url":"https://api.github.com/users/gfriloux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-12T14:26:52Z","updated_at":"2017-12-12T14:26:52Z","body":"Using `chunked_body()` (with a size of 5 bytes for example) will trigger a lot of `read()` calls into my PipeLoop structure, but it won't send anything until i pile thousands of chars.\r\n\r\nThis makes me believe (i am not yet able to determine it) that hyper will bufferize on its side.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/351066479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gfriloux","id":534397,"node_id":"MDQ6VXNlcjUzNDM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/534397?v=4","gravatar_id":"","url":"https://api.github.com/users/gfriloux","html_url":"https://github.com/gfriloux","followers_url":"https://api.github.com/users/gfriloux/followers","following_url":"https://api.github.com/users/gfriloux/following{/other_user}","gists_url":"https://api.github.com/users/gfriloux/gists{/gist_id}","starred_url":"https://api.github.com/users/gfriloux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gfriloux/subscriptions","organizations_url":"https://api.github.com/users/gfriloux/orgs","repos_url":"https://api.github.com/users/gfriloux/repos","events_url":"https://api.github.com/users/gfriloux/events{/privacy}","received_events_url":"https://api.github.com/users/gfriloux/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/351073314","html_url":"https://github.com/rwf2/Rocket/issues/33#issuecomment-351073314","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/33","id":351073314,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTA3MzMxNA==","user":{"login":"gfriloux","id":534397,"node_id":"MDQ6VXNlcjUzNDM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/534397?v=4","gravatar_id":"","url":"https://api.github.com/users/gfriloux","html_url":"https://github.com/gfriloux","followers_url":"https://api.github.com/users/gfriloux/followers","following_url":"https://api.github.com/users/gfriloux/following{/other_user}","gists_url":"https://api.github.com/users/gfriloux/gists{/gist_id}","starred_url":"https://api.github.com/users/gfriloux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gfriloux/subscriptions","organizations_url":"https://api.github.com/users/gfriloux/orgs","repos_url":"https://api.github.com/users/gfriloux/repos","events_url":"https://api.github.com/users/gfriloux/events{/privacy}","received_events_url":"https://api.github.com/users/gfriloux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-12T14:50:05Z","updated_at":"2017-12-12T14:50:05Z","body":"Using `Stream` instead of writing my own `Responder` makes the code more simple, but gives the same result.\r\n\r\nHere is a code example : https://gist.github.com/gfriloux/c8846afed6d2bfceffd13fc5375bced3","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/351073314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gfriloux","id":534397,"node_id":"MDQ6VXNlcjUzNDM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/534397?v=4","gravatar_id":"","url":"https://api.github.com/users/gfriloux","html_url":"https://github.com/gfriloux","followers_url":"https://api.github.com/users/gfriloux/followers","following_url":"https://api.github.com/users/gfriloux/following{/other_user}","gists_url":"https://api.github.com/users/gfriloux/gists{/gist_id}","starred_url":"https://api.github.com/users/gfriloux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gfriloux/subscriptions","organizations_url":"https://api.github.com/users/gfriloux/orgs","repos_url":"https://api.github.com/users/gfriloux/repos","events_url":"https://api.github.com/users/gfriloux/events{/privacy}","received_events_url":"https://api.github.com/users/gfriloux/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/351080881","html_url":"https://github.com/rwf2/Rocket/issues/33#issuecomment-351080881","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/33","id":351080881,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTA4MDg4MQ==","user":{"login":"gfriloux","id":534397,"node_id":"MDQ6VXNlcjUzNDM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/534397?v=4","gravatar_id":"","url":"https://api.github.com/users/gfriloux","html_url":"https://github.com/gfriloux","followers_url":"https://api.github.com/users/gfriloux/followers","following_url":"https://api.github.com/users/gfriloux/following{/other_user}","gists_url":"https://api.github.com/users/gfriloux/gists{/gist_id}","starred_url":"https://api.github.com/users/gfriloux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gfriloux/subscriptions","organizations_url":"https://api.github.com/users/gfriloux/orgs","repos_url":"https://api.github.com/users/gfriloux/repos","events_url":"https://api.github.com/users/gfriloux/events{/privacy}","received_events_url":"https://api.github.com/users/gfriloux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-12T15:14:27Z","updated_at":"2017-12-12T15:15:15Z","body":"I dont know where its blocking (my low rust knowledge doesnt help) but i assume it should not wait to have the buffer filled to send data.\r\n\r\nData should be sent either immediately or after a very short window.\r\nThis would unblock this issue the time you implement SSE inside rocket.rs.\r\n\r\nComparing to C functions, `write()` or `send()` won't block data until a fixed amount of data is given.\r\nYou can send 1 byte without any problem, it won't delay it indefinitly, waiting for more data.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/351080881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gfriloux","id":534397,"node_id":"MDQ6VXNlcjUzNDM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/534397?v=4","gravatar_id":"","url":"https://api.github.com/users/gfriloux","html_url":"https://github.com/gfriloux","followers_url":"https://api.github.com/users/gfriloux/followers","following_url":"https://api.github.com/users/gfriloux/following{/other_user}","gists_url":"https://api.github.com/users/gfriloux/gists{/gist_id}","starred_url":"https://api.github.com/users/gfriloux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gfriloux/subscriptions","organizations_url":"https://api.github.com/users/gfriloux/orgs","repos_url":"https://api.github.com/users/gfriloux/repos","events_url":"https://api.github.com/users/gfriloux/events{/privacy}","received_events_url":"https://api.github.com/users/gfriloux/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/352020339","html_url":"https://github.com/rwf2/Rocket/issues/33#issuecomment-352020339","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/33","id":352020339,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjAyMDMzOQ==","user":{"login":"gfriloux","id":534397,"node_id":"MDQ6VXNlcjUzNDM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/534397?v=4","gravatar_id":"","url":"https://api.github.com/users/gfriloux","html_url":"https://github.com/gfriloux","followers_url":"https://api.github.com/users/gfriloux/followers","following_url":"https://api.github.com/users/gfriloux/following{/other_user}","gists_url":"https://api.github.com/users/gfriloux/gists{/gist_id}","starred_url":"https://api.github.com/users/gfriloux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gfriloux/subscriptions","organizations_url":"https://api.github.com/users/gfriloux/orgs","repos_url":"https://api.github.com/users/gfriloux/repos","events_url":"https://api.github.com/users/gfriloux/events{/privacy}","received_events_url":"https://api.github.com/users/gfriloux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-15T14:34:32Z","updated_at":"2017-12-15T14:34:32Z","body":"Ok, after spending some days on other stuff, im back at this.\r\nThe problem isnt in rocket.rs itself.\r\n\r\nsetting logs at debug level, i can see that hyper writes the data, but the HTTP client doesnt get it : \r\n```\r\n--> /root/.cargo/registry/src/github.com-1ecc6299db9ec823/hyper-0.10.13/src/server/response.rs:220\r\nwrite 10 bytes\r\nchunked write, size = 10\r\n```\r\n\r\nYou need to write a bunch of data for it to be received by the HTTP client (it wont even send the HTTP headers, in some cases).\r\nAs i had doubts about curl, i directly went with telnet, and the same problem occurs.\r\nMy first hint is that hyper is missing a few flushes.\r\n\r\nSo i will stop reporting here this behavior.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/352020339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gfriloux","id":534397,"node_id":"MDQ6VXNlcjUzNDM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/534397?v=4","gravatar_id":"","url":"https://api.github.com/users/gfriloux","html_url":"https://github.com/gfriloux","followers_url":"https://api.github.com/users/gfriloux/followers","following_url":"https://api.github.com/users/gfriloux/following{/other_user}","gists_url":"https://api.github.com/users/gfriloux/gists{/gist_id}","starred_url":"https://api.github.com/users/gfriloux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gfriloux/subscriptions","organizations_url":"https://api.github.com/users/gfriloux/orgs","repos_url":"https://api.github.com/users/gfriloux/repos","events_url":"https://api.github.com/users/gfriloux/events{/privacy}","received_events_url":"https://api.github.com/users/gfriloux/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/352058927","html_url":"https://github.com/rwf2/Rocket/issues/33#issuecomment-352058927","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/33","id":352058927,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjA1ODkyNw==","user":{"login":"gfriloux","id":534397,"node_id":"MDQ6VXNlcjUzNDM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/534397?v=4","gravatar_id":"","url":"https://api.github.com/users/gfriloux","html_url":"https://github.com/gfriloux","followers_url":"https://api.github.com/users/gfriloux/followers","following_url":"https://api.github.com/users/gfriloux/following{/other_user}","gists_url":"https://api.github.com/users/gfriloux/gists{/gist_id}","starred_url":"https://api.github.com/users/gfriloux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gfriloux/subscriptions","organizations_url":"https://api.github.com/users/gfriloux/orgs","repos_url":"https://api.github.com/users/gfriloux/repos","events_url":"https://api.github.com/users/gfriloux/events{/privacy}","received_events_url":"https://api.github.com/users/gfriloux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-15T17:07:15Z","updated_at":"2017-12-15T17:08:43Z","body":"Ok, I managed to patch version 0.10.13 of hyper to force flush sockets.\r\nI know i said i would stop posting here, but this may help more people than me.\r\nThis enables to do streaming \"properly\", so SSE and that kind of stuff.\r\nLatest Hyper versions does use flush, but rocket.rs can't build with latest hyper due to various changes.\r\n\r\nBasically, for hyper 0.10.13, edit `src/server/response.rs` and you need to have : \r\n```\r\n217 impl<'a> Write for Response<'a, Streaming> {\r\n218     #[inline]\r\n219     fn write(&mut self, msg: &[u8]) -> io::Result<usize> {\r\n220         debug!(\"write {:?} bytes\", msg.len());\r\n221         let r = self.body.write(msg);\r\n222         self.body.flush();\r\n223         r\r\n224     }\r\n```\r\nThis will properlly flush the socket and make it possible to send only a few bytes.\r\nThe sample codes i pasted above will then work perfectly well.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/352058927/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gfriloux","id":534397,"node_id":"MDQ6VXNlcjUzNDM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/534397?v=4","gravatar_id":"","url":"https://api.github.com/users/gfriloux","html_url":"https://github.com/gfriloux","followers_url":"https://api.github.com/users/gfriloux/followers","following_url":"https://api.github.com/users/gfriloux/following{/other_user}","gists_url":"https://api.github.com/users/gfriloux/gists{/gist_id}","starred_url":"https://api.github.com/users/gfriloux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gfriloux/subscriptions","organizations_url":"https://api.github.com/users/gfriloux/orgs","repos_url":"https://api.github.com/users/gfriloux/repos","events_url":"https://api.github.com/users/gfriloux/events{/privacy}","received_events_url":"https://api.github.com/users/gfriloux/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"gfriloux","id":534397,"node_id":"MDQ6VXNlcjUzNDM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/534397?v=4","gravatar_id":"","url":"https://api.github.com/users/gfriloux","html_url":"https://github.com/gfriloux","followers_url":"https://api.github.com/users/gfriloux/followers","following_url":"https://api.github.com/users/gfriloux/following{/other_user}","gists_url":"https://api.github.com/users/gfriloux/gists{/gist_id}","starred_url":"https://api.github.com/users/gfriloux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gfriloux/subscriptions","organizations_url":"https://api.github.com/users/gfriloux/orgs","repos_url":"https://api.github.com/users/gfriloux/repos","events_url":"https://api.github.com/users/gfriloux/events{/privacy}","received_events_url":"https://api.github.com/users/gfriloux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T15:29:42Z","updated_at":"2017-12-19T15:29:42Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/509","repository_url":"https://api.github.com/repos/rwf2/Rocket","labels_url":"https://api.github.com/repos/rwf2/Rocket/issues/509/labels{/name}","comments_url":"https://api.github.com/repos/rwf2/Rocket/issues/509/comments","events_url":"https://api.github.com/repos/rwf2/Rocket/issues/509/events","html_url":"https://github.com/rwf2/Rocket/issues/509","id":283270763,"node_id":"MDU6SXNzdWUyODMyNzA3NjM=","number":509,"title":"Why forcing to completely fill an internal buffer when reading data, before doing network I/O ?","user":{"login":"gfriloux","id":534397,"node_id":"MDQ6VXNlcjUzNDM5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/534397?v=4","gravatar_id":"","url":"https://api.github.com/users/gfriloux","html_url":"https://github.com/gfriloux","followers_url":"https://api.github.com/users/gfriloux/followers","following_url":"https://api.github.com/users/gfriloux/following{/other_user}","gists_url":"https://api.github.com/users/gfriloux/gists{/gist_id}","starred_url":"https://api.github.com/users/gfriloux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gfriloux/subscriptions","organizations_url":"https://api.github.com/users/gfriloux/orgs","repos_url":"https://api.github.com/users/gfriloux/repos","events_url":"https://api.github.com/users/gfriloux/events{/privacy}","received_events_url":"https://api.github.com/users/gfriloux/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":343542075,"node_id":"MDU6TGFiZWwzNDM1NDIwNzU=","url":"https://api.github.com/repos/rwf2/Rocket/labels/question","name":"question","color":"D61CBC","default":true,"description":"A question (converts to discussion)"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-12-19T15:29:42Z","updated_at":"2019-05-16T06:43:14Z","closed_at":"2019-05-16T02:47:57Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54168759,"node_id":"MDEwOlJlcG9zaXRvcnk1NDE2ODc1OQ==","name":"Rocket","full_name":"rwf2/Rocket","private":false,"owner":{"login":"rwf2","id":106361765,"node_id":"O_kgDOBlbzpQ","avatar_url":"https://avatars.githubusercontent.com/u/106361765?v=4","gravatar_id":"","url":"https://api.github.com/users/rwf2","html_url":"https://github.com/rwf2","followers_url":"https://api.github.com/users/rwf2/followers","following_url":"https://api.github.com/users/rwf2/following{/other_user}","gists_url":"https://api.github.com/users/rwf2/gists{/gist_id}","starred_url":"https://api.github.com/users/rwf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rwf2/subscriptions","organizations_url":"https://api.github.com/users/rwf2/orgs","repos_url":"https://api.github.com/users/rwf2/repos","events_url":"https://api.github.com/users/rwf2/events{/privacy}","received_events_url":"https://api.github.com/users/rwf2/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rwf2/Rocket","description":"A web framework for Rust.","fork":false,"url":"https://api.github.com/repos/rwf2/Rocket","forks_url":"https://api.github.com/repos/rwf2/Rocket/forks","keys_url":"https://api.github.com/repos/rwf2/Rocket/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rwf2/Rocket/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rwf2/Rocket/teams","hooks_url":"https://api.github.com/repos/rwf2/Rocket/hooks","issue_events_url":"https://api.github.com/repos/rwf2/Rocket/issues/events{/number}","events_url":"https://api.github.com/repos/rwf2/Rocket/events","assignees_url":"https://api.github.com/repos/rwf2/Rocket/assignees{/user}","branches_url":"https://api.github.com/repos/rwf2/Rocket/branches{/branch}","tags_url":"https://api.github.com/repos/rwf2/Rocket/tags","blobs_url":"https://api.github.com/repos/rwf2/Rocket/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rwf2/Rocket/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rwf2/Rocket/git/refs{/sha}","trees_url":"https://api.github.com/repos/rwf2/Rocket/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rwf2/Rocket/statuses/{sha}","languages_url":"https://api.github.com/repos/rwf2/Rocket/languages","stargazers_url":"https://api.github.com/repos/rwf2/Rocket/stargazers","contributors_url":"https://api.github.com/repos/rwf2/Rocket/contributors","subscribers_url":"https://api.github.com/repos/rwf2/Rocket/subscribers","subscription_url":"https://api.github.com/repos/rwf2/Rocket/subscription","commits_url":"https://api.github.com/repos/rwf2/Rocket/commits{/sha}","git_commits_url":"https://api.github.com/repos/rwf2/Rocket/git/commits{/sha}","comments_url":"https://api.github.com/repos/rwf2/Rocket/comments{/number}","issue_comment_url":"https://api.github.com/repos/rwf2/Rocket/issues/comments{/number}","contents_url":"https://api.github.com/repos/rwf2/Rocket/contents/{+path}","compare_url":"https://api.github.com/repos/rwf2/Rocket/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rwf2/Rocket/merges","archive_url":"https://api.github.com/repos/rwf2/Rocket/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rwf2/Rocket/downloads","issues_url":"https://api.github.com/repos/rwf2/Rocket/issues{/number}","pulls_url":"https://api.github.com/repos/rwf2/Rocket/pulls{/number}","milestones_url":"https://api.github.com/repos/rwf2/Rocket/milestones{/number}","notifications_url":"https://api.github.com/repos/rwf2/Rocket/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rwf2/Rocket/labels{/name}","releases_url":"https://api.github.com/repos/rwf2/Rocket/releases{/id}","deployments_url":"https://api.github.com/repos/rwf2/Rocket/deployments","created_at":"2016-03-18T02:50:18Z","updated_at":"2025-11-09T18:27:08Z","pushed_at":"2025-10-01T04:53:46Z","git_url":"git://github.com/rwf2/Rocket.git","ssh_url":"git@github.com:rwf2/Rocket.git","clone_url":"https://github.com/rwf2/Rocket.git","svn_url":"https://github.com/rwf2/Rocket","homepage":"https://rocket.rs","size":8445,"stargazers_count":25480,"watchers_count":25480,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":1614,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":84,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["framework","rocket","rust","web","web-development","web-framework"],"visibility":"public","forks":1614,"open_issues":84,"watchers":25480,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hello, i am looking at : https://github.com/SergioBenitez/Rocket/blob/a9c66c9426bec57ee958480ae4aa3d789f20488f/lib/src/rocket.rs#L162\r\n\r\nI am trying to understand why it has been needed to use this internal read_max() implementation instead of standard read().\r\nIf understand it correctly, a read() call will read at most n bytes if you pass a buffer whose length is n bytes.\r\nIf it reads less, it means : \r\n1. you've reach end of file.\r\n2. your app received a signal, which stopped your blocking operation.\r\n\r\nSignals arent supposed to happen often (it's supposed to be rare). If it unblocks your read, its only so we can execute a function that is called when receiving a signal.\r\nIf you've reach end of file, read_max() doesnt add anything.\r\n\r\nSo, i dont get where its adding benefits, while i see a problem in this implementation, in my use case : it will prevent from doing streaming that manipulates small bytes and delay (as of intentionnaly setting a specific delay before sending of additional data).\r\nThis will also be a problem for SSE (#33).\r\n\r\nIn this kind of code : https://gist.github.com/gfriloux/003af62ba722a8a52009d938898123d0\r\nApp could manage the length of buffer it wants to return using the Read impl.\r\nI believe (i can be wrong, but i want to learn) this is enough, as it is also the App that will deal with signals.\r\n\r\nCan you explain me what isssue this read_max() function solves in this code i've link ?","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/509/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rwf2/Rocket/issues/509/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"codesections","id":35405463,"node_id":"MDQ6VXNlcjM1NDA1NDYz","avatar_url":"https://avatars.githubusercontent.com/u/35405463?v=4","gravatar_id":"","url":"https://api.github.com/users/codesections","html_url":"https://github.com/codesections","followers_url":"https://api.github.com/users/codesections/followers","following_url":"https://api.github.com/users/codesections/following{/other_user}","gists_url":"https://api.github.com/users/codesections/gists{/gist_id}","starred_url":"https://api.github.com/users/codesections/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codesections/subscriptions","organizations_url":"https://api.github.com/users/codesections/orgs","repos_url":"https://api.github.com/users/codesections/repos","events_url":"https://api.github.com/users/codesections/events{/privacy}","received_events_url":"https://api.github.com/users/codesections/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-18T12:51:32Z","updated_at":"2019-04-18T12:51:32Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/mastodon/flodgatt/issues/5","repository_url":"https://api.github.com/repos/mastodon/flodgatt","labels_url":"https://api.github.com/repos/mastodon/flodgatt/issues/5/labels{/name}","comments_url":"https://api.github.com/repos/mastodon/flodgatt/issues/5/comments","events_url":"https://api.github.com/repos/mastodon/flodgatt/issues/5/events","html_url":"https://github.com/mastodon/flodgatt/issues/5","id":434754344,"node_id":"MDU6SXNzdWU0MzQ3NTQzNDQ=","number":5,"title":"Consider migrating to Rocket.rs","user":{"login":"codesections","id":35405463,"node_id":"MDQ6VXNlcjM1NDA1NDYz","avatar_url":"https://avatars.githubusercontent.com/u/35405463?v=4","gravatar_id":"","url":"https://api.github.com/users/codesections","html_url":"https://github.com/codesections","followers_url":"https://api.github.com/users/codesections/followers","following_url":"https://api.github.com/users/codesections/following{/other_user}","gists_url":"https://api.github.com/users/codesections/gists{/gist_id}","starred_url":"https://api.github.com/users/codesections/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codesections/subscriptions","organizations_url":"https://api.github.com/users/codesections/orgs","repos_url":"https://api.github.com/users/codesections/repos","events_url":"https://api.github.com/users/codesections/events{/privacy}","received_events_url":"https://api.github.com/users/codesections/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-04-18T12:51:32Z","updated_at":"2019-07-09T17:21:01Z","closed_at":"2019-07-09T17:21:01Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":169712053,"node_id":"MDEwOlJlcG9zaXRvcnkxNjk3MTIwNTM=","name":"flodgatt","full_name":"mastodon/flodgatt","private":false,"owner":{"login":"mastodon","id":24979032,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTc5MDMy","avatar_url":"https://avatars.githubusercontent.com/u/24979032?v=4","gravatar_id":"","url":"https://api.github.com/users/mastodon","html_url":"https://github.com/mastodon","followers_url":"https://api.github.com/users/mastodon/followers","following_url":"https://api.github.com/users/mastodon/following{/other_user}","gists_url":"https://api.github.com/users/mastodon/gists{/gist_id}","starred_url":"https://api.github.com/users/mastodon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mastodon/subscriptions","organizations_url":"https://api.github.com/users/mastodon/orgs","repos_url":"https://api.github.com/users/mastodon/repos","events_url":"https://api.github.com/users/mastodon/events{/privacy}","received_events_url":"https://api.github.com/users/mastodon/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/mastodon/flodgatt","description":"A blazingly fast drop-in replacement for the Mastodon streaming API server","fork":false,"url":"https://api.github.com/repos/mastodon/flodgatt","forks_url":"https://api.github.com/repos/mastodon/flodgatt/forks","keys_url":"https://api.github.com/repos/mastodon/flodgatt/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mastodon/flodgatt/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mastodon/flodgatt/teams","hooks_url":"https://api.github.com/repos/mastodon/flodgatt/hooks","issue_events_url":"https://api.github.com/repos/mastodon/flodgatt/issues/events{/number}","events_url":"https://api.github.com/repos/mastodon/flodgatt/events","assignees_url":"https://api.github.com/repos/mastodon/flodgatt/assignees{/user}","branches_url":"https://api.github.com/repos/mastodon/flodgatt/branches{/branch}","tags_url":"https://api.github.com/repos/mastodon/flodgatt/tags","blobs_url":"https://api.github.com/repos/mastodon/flodgatt/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mastodon/flodgatt/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mastodon/flodgatt/git/refs{/sha}","trees_url":"https://api.github.com/repos/mastodon/flodgatt/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mastodon/flodgatt/statuses/{sha}","languages_url":"https://api.github.com/repos/mastodon/flodgatt/languages","stargazers_url":"https://api.github.com/repos/mastodon/flodgatt/stargazers","contributors_url":"https://api.github.com/repos/mastodon/flodgatt/contributors","subscribers_url":"https://api.github.com/repos/mastodon/flodgatt/subscribers","subscription_url":"https://api.github.com/repos/mastodon/flodgatt/subscription","commits_url":"https://api.github.com/repos/mastodon/flodgatt/commits{/sha}","git_commits_url":"https://api.github.com/repos/mastodon/flodgatt/git/commits{/sha}","comments_url":"https://api.github.com/repos/mastodon/flodgatt/comments{/number}","issue_comment_url":"https://api.github.com/repos/mastodon/flodgatt/issues/comments{/number}","contents_url":"https://api.github.com/repos/mastodon/flodgatt/contents/{+path}","compare_url":"https://api.github.com/repos/mastodon/flodgatt/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mastodon/flodgatt/merges","archive_url":"https://api.github.com/repos/mastodon/flodgatt/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mastodon/flodgatt/downloads","issues_url":"https://api.github.com/repos/mastodon/flodgatt/issues{/number}","pulls_url":"https://api.github.com/repos/mastodon/flodgatt/pulls{/number}","milestones_url":"https://api.github.com/repos/mastodon/flodgatt/milestones{/number}","notifications_url":"https://api.github.com/repos/mastodon/flodgatt/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mastodon/flodgatt/labels{/name}","releases_url":"https://api.github.com/repos/mastodon/flodgatt/releases{/id}","deployments_url":"https://api.github.com/repos/mastodon/flodgatt/deployments","created_at":"2019-02-08T09:35:26Z","updated_at":"2024-11-05T00:39:33Z","pushed_at":"2020-05-07T20:44:03Z","git_url":"git://github.com/mastodon/flodgatt.git","ssh_url":"git@github.com:mastodon/flodgatt.git","clone_url":"https://github.com/mastodon/flodgatt.git","svn_url":"https://github.com/mastodon/flodgatt","homepage":"","size":796,"stargazers_count":86,"watchers_count":86,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":8,"mirror_url":null,"archived":true,"disabled":false,"open_issues_count":11,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["mastodon","rust"],"visibility":"public","forks":8,"open_issues":11,"watchers":86,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"As @sphinxc0re mentioned in #4, we could consider migrating the codebase to [SergioBenitez/Rocket](https://github.com/SergioBenitez/Rocket).  This would have several advantages:\r\n\r\n* Popular Rust web framework\r\n* Potentially more familiar syntax for developers familiar with other languages/frameworks\r\n* On path to running on stable Rust\r\n* Uses latest libraries (e.g., `futures` 0.3.x)\r\n* Will use `async`/`await` once they land\r\n\r\nIt would also have several cons:\r\n* Not yet running on stable Rust\r\n* Slower (at least last time I looked into the mater)\r\n* No built-in support for Server Sent Events (but see [Support for Server Sent Events  Issue #33  SergioBenitez/Rocket](https://github.com/SergioBenitez/Rocket/issues/33))\r\n* Less functional code (this is a personal preference, but I just really like the way Rocket handles its code flowthe idea of using filters is very functional and strikes me as very clean)\r\n* Requires refactoring/rewriting existing code.\r\n\r\nOverall, I have a strong preference for staying on stable Rust for an app that will run in production.  So I currently plan to stick with Warp.  But I'm certainly open to changing my mind if anyone convincingly argues in favor of Rocket (or a different framework).  I'm also open to revisiting the issue if/when Rocket lands on stable Rust.","reactions":{"url":"https://api.github.com/repos/mastodon/flodgatt/issues/5/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mastodon/flodgatt/issues/5/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/515671293","html_url":"https://github.com/rwf2/Rocket/issues/33#issuecomment-515671293","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/33","id":515671293,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTY3MTI5Mw==","user":{"login":"killkrt","id":4274153,"node_id":"MDQ6VXNlcjQyNzQxNTM=","avatar_url":"https://avatars.githubusercontent.com/u/4274153?v=4","gravatar_id":"","url":"https://api.github.com/users/killkrt","html_url":"https://github.com/killkrt","followers_url":"https://api.github.com/users/killkrt/followers","following_url":"https://api.github.com/users/killkrt/following{/other_user}","gists_url":"https://api.github.com/users/killkrt/gists{/gist_id}","starred_url":"https://api.github.com/users/killkrt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/killkrt/subscriptions","organizations_url":"https://api.github.com/users/killkrt/orgs","repos_url":"https://api.github.com/users/killkrt/repos","events_url":"https://api.github.com/users/killkrt/events{/privacy}","received_events_url":"https://api.github.com/users/killkrt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-27T09:46:02Z","updated_at":"2019-07-27T09:46:02Z","body":"In my opinion it would be great to have an example that shows how to currently implement a simple SSE or websocket solution using the current API (I guess using Stream in some way).","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/515671293/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"killkrt","id":4274153,"node_id":"MDQ6VXNlcjQyNzQxNTM=","avatar_url":"https://avatars.githubusercontent.com/u/4274153?v=4","gravatar_id":"","url":"https://api.github.com/users/killkrt","html_url":"https://github.com/killkrt","followers_url":"https://api.github.com/users/killkrt/followers","following_url":"https://api.github.com/users/killkrt/following{/other_user}","gists_url":"https://api.github.com/users/killkrt/gists{/gist_id}","starred_url":"https://api.github.com/users/killkrt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/killkrt/subscriptions","organizations_url":"https://api.github.com/users/killkrt/orgs","repos_url":"https://api.github.com/users/killkrt/repos","events_url":"https://api.github.com/users/killkrt/events{/privacy}","received_events_url":"https://api.github.com/users/killkrt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/522280505","html_url":"https://github.com/rwf2/Rocket/issues/33#issuecomment-522280505","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/33","id":522280505,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjI4MDUwNQ==","user":{"login":"jebrosen","id":7102588,"node_id":"MDQ6VXNlcjcxMDI1ODg=","avatar_url":"https://avatars.githubusercontent.com/u/7102588?v=4","gravatar_id":"","url":"https://api.github.com/users/jebrosen","html_url":"https://github.com/jebrosen","followers_url":"https://api.github.com/users/jebrosen/followers","following_url":"https://api.github.com/users/jebrosen/following{/other_user}","gists_url":"https://api.github.com/users/jebrosen/gists{/gist_id}","starred_url":"https://api.github.com/users/jebrosen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jebrosen/subscriptions","organizations_url":"https://api.github.com/users/jebrosen/orgs","repos_url":"https://api.github.com/users/jebrosen/repos","events_url":"https://api.github.com/users/jebrosen/events{/privacy}","received_events_url":"https://api.github.com/users/jebrosen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-18T00:32:01Z","updated_at":"2019-08-18T00:32:01Z","body":"The problem with an example of SSE in the current API is related to this point:\r\n\r\n> Of course, that Responder will block while sending events, a side effect of Rocket being synchronous\r\n\r\n\"will block\" has the serious consequence that the maximum number of clients with open SSE channels is bounded by the number of worker threads, at which point the server will \"hang\" until those clients disconnect. If I'm reading https://github.com/SergioBenitez/Rocket/issues/33#issuecomment-352058927 correctly, then hyper also needs modifications for SSE to work correctly.\r\n\r\n#1065 will make doing this not-dangerous - open `Response` channels \"waiting\" on the server to push data will no longer prevent new incoming requests from being processed. And #1066 will make SSE easier to implement by eliminating the need to implement some kind of custom `Read` type.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/522280505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jebrosen","id":7102588,"node_id":"MDQ6VXNlcjcxMDI1ODg=","avatar_url":"https://avatars.githubusercontent.com/u/7102588?v=4","gravatar_id":"","url":"https://api.github.com/users/jebrosen","html_url":"https://github.com/jebrosen","followers_url":"https://api.github.com/users/jebrosen/followers","following_url":"https://api.github.com/users/jebrosen/following{/other_user}","gists_url":"https://api.github.com/users/jebrosen/gists{/gist_id}","starred_url":"https://api.github.com/users/jebrosen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jebrosen/subscriptions","organizations_url":"https://api.github.com/users/jebrosen/orgs","repos_url":"https://api.github.com/users/jebrosen/repos","events_url":"https://api.github.com/users/jebrosen/events{/privacy}","received_events_url":"https://api.github.com/users/jebrosen/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"ijackson","id":2090772,"node_id":"MDQ6VXNlcjIwOTA3NzI=","avatar_url":"https://avatars.githubusercontent.com/u/2090772?v=4","gravatar_id":"","url":"https://api.github.com/users/ijackson","html_url":"https://github.com/ijackson","followers_url":"https://api.github.com/users/ijackson/followers","following_url":"https://api.github.com/users/ijackson/following{/other_user}","gists_url":"https://api.github.com/users/ijackson/gists{/gist_id}","starred_url":"https://api.github.com/users/ijackson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijackson/subscriptions","organizations_url":"https://api.github.com/users/ijackson/orgs","repos_url":"https://api.github.com/users/ijackson/repos","events_url":"https://api.github.com/users/ijackson/events{/privacy}","received_events_url":"https://api.github.com/users/ijackson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-05T01:00:49Z","updated_at":"2020-07-05T01:00:49Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/1365","repository_url":"https://api.github.com/repos/rwf2/Rocket","labels_url":"https://api.github.com/repos/rwf2/Rocket/issues/1365/labels{/name}","comments_url":"https://api.github.com/repos/rwf2/Rocket/issues/1365/comments","events_url":"https://api.github.com/repos/rwf2/Rocket/issues/1365/events","html_url":"https://github.com/rwf2/Rocket/pull/1365","id":650979536,"node_id":"MDExOlB1bGxSZXF1ZXN0NDQ0MzQzODY0","number":1365,"title":"SSE for Rocket 0.4.x","user":{"login":"ijackson","id":2090772,"node_id":"MDQ6VXNlcjIwOTA3NzI=","avatar_url":"https://avatars.githubusercontent.com/u/2090772?v=4","gravatar_id":"","url":"https://api.github.com/users/ijackson","html_url":"https://github.com/ijackson","followers_url":"https://api.github.com/users/ijackson/followers","following_url":"https://api.github.com/users/ijackson/following{/other_user}","gists_url":"https://api.github.com/users/ijackson/gists{/gist_id}","starred_url":"https://api.github.com/users/ijackson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijackson/subscriptions","organizations_url":"https://api.github.com/users/ijackson/orgs","repos_url":"https://api.github.com/users/ijackson/repos","events_url":"https://api.github.com/users/ijackson/events{/privacy}","received_events_url":"https://api.github.com/users/ijackson/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":763868037,"node_id":"MDU6TGFiZWw3NjM4NjgwMzc=","url":"https://api.github.com/repos/rwf2/Rocket/labels/pr:%20merged","name":"pr: merged","color":"5319E7","default":false,"description":"This pull request was merged manually."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":18,"created_at":"2020-07-05T01:00:49Z","updated_at":"2020-10-30T11:45:58Z","closed_at":"2020-10-30T06:58:32Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":54168759,"node_id":"MDEwOlJlcG9zaXRvcnk1NDE2ODc1OQ==","name":"Rocket","full_name":"rwf2/Rocket","private":false,"owner":{"login":"rwf2","id":106361765,"node_id":"O_kgDOBlbzpQ","avatar_url":"https://avatars.githubusercontent.com/u/106361765?v=4","gravatar_id":"","url":"https://api.github.com/users/rwf2","html_url":"https://github.com/rwf2","followers_url":"https://api.github.com/users/rwf2/followers","following_url":"https://api.github.com/users/rwf2/following{/other_user}","gists_url":"https://api.github.com/users/rwf2/gists{/gist_id}","starred_url":"https://api.github.com/users/rwf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rwf2/subscriptions","organizations_url":"https://api.github.com/users/rwf2/orgs","repos_url":"https://api.github.com/users/rwf2/repos","events_url":"https://api.github.com/users/rwf2/events{/privacy}","received_events_url":"https://api.github.com/users/rwf2/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rwf2/Rocket","description":"A web framework for Rust.","fork":false,"url":"https://api.github.com/repos/rwf2/Rocket","forks_url":"https://api.github.com/repos/rwf2/Rocket/forks","keys_url":"https://api.github.com/repos/rwf2/Rocket/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rwf2/Rocket/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rwf2/Rocket/teams","hooks_url":"https://api.github.com/repos/rwf2/Rocket/hooks","issue_events_url":"https://api.github.com/repos/rwf2/Rocket/issues/events{/number}","events_url":"https://api.github.com/repos/rwf2/Rocket/events","assignees_url":"https://api.github.com/repos/rwf2/Rocket/assignees{/user}","branches_url":"https://api.github.com/repos/rwf2/Rocket/branches{/branch}","tags_url":"https://api.github.com/repos/rwf2/Rocket/tags","blobs_url":"https://api.github.com/repos/rwf2/Rocket/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rwf2/Rocket/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rwf2/Rocket/git/refs{/sha}","trees_url":"https://api.github.com/repos/rwf2/Rocket/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rwf2/Rocket/statuses/{sha}","languages_url":"https://api.github.com/repos/rwf2/Rocket/languages","stargazers_url":"https://api.github.com/repos/rwf2/Rocket/stargazers","contributors_url":"https://api.github.com/repos/rwf2/Rocket/contributors","subscribers_url":"https://api.github.com/repos/rwf2/Rocket/subscribers","subscription_url":"https://api.github.com/repos/rwf2/Rocket/subscription","commits_url":"https://api.github.com/repos/rwf2/Rocket/commits{/sha}","git_commits_url":"https://api.github.com/repos/rwf2/Rocket/git/commits{/sha}","comments_url":"https://api.github.com/repos/rwf2/Rocket/comments{/number}","issue_comment_url":"https://api.github.com/repos/rwf2/Rocket/issues/comments{/number}","contents_url":"https://api.github.com/repos/rwf2/Rocket/contents/{+path}","compare_url":"https://api.github.com/repos/rwf2/Rocket/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rwf2/Rocket/merges","archive_url":"https://api.github.com/repos/rwf2/Rocket/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rwf2/Rocket/downloads","issues_url":"https://api.github.com/repos/rwf2/Rocket/issues{/number}","pulls_url":"https://api.github.com/repos/rwf2/Rocket/pulls{/number}","milestones_url":"https://api.github.com/repos/rwf2/Rocket/milestones{/number}","notifications_url":"https://api.github.com/repos/rwf2/Rocket/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rwf2/Rocket/labels{/name}","releases_url":"https://api.github.com/repos/rwf2/Rocket/releases{/id}","deployments_url":"https://api.github.com/repos/rwf2/Rocket/deployments","created_at":"2016-03-18T02:50:18Z","updated_at":"2025-11-09T18:27:08Z","pushed_at":"2025-10-01T04:53:46Z","git_url":"git://github.com/rwf2/Rocket.git","ssh_url":"git@github.com:rwf2/Rocket.git","clone_url":"https://github.com/rwf2/Rocket.git","svn_url":"https://github.com/rwf2/Rocket","homepage":"https://rocket.rs","size":8445,"stargazers_count":25480,"watchers_count":25480,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":1614,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":84,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["framework","rocket","rust","web","web-development","web-framework"],"visibility":"public","forks":1614,"open_issues":84,"watchers":25480,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rwf2/Rocket/pulls/1365","html_url":"https://github.com/rwf2/Rocket/pull/1365","diff_url":"https://github.com/rwf2/Rocket/pull/1365.diff","patch_url":"https://github.com/rwf2/Rocket/pull/1365.patch","merged_at":null},"body":"Hi.  I'm writing a Rocket application which uses JS SSE.  I had some difficulties getting my events to get through in a timely fashion.  After some investigation, I came up with this MR.\r\n\r\nWith this MR, I am able to use SSE with Rocket as expected.  I implement a Read which blocks and dribbles out data as needed.  (I think I will need to increase my thread pool size and I will probably have to do the multiple-domains-SSE trick to avoid the SSE connection limit bug.)\r\n\r\nPlease see the commit message of the 2nd commit for lots of discussion about my API design strategy.  The API is certainly not as pretty as it might be in some alternative universe, but I think it's about as good as we're going to get for this one.  At least it doesn't get in the way of 'normal' use of Rocket.\r\n\r\nTo save you digging it out of the github UI here it is:\r\n\r\n```\r\nStream: Provide a way to flush chunks, to support SSE\r\n\r\nProblem:\r\n\r\nTo support Server-Side Events (SSE, aka JS EventSource) it is\r\nnecessary for the server to keep open an HTTP request and dribble out\r\ndata (the event stream) as it is generated.\r\n\r\nCurrently, Rocket handles this poorly.  It likes to fill in complete\r\nchunks.  Also there is no way to force a flush of the underlying\r\nstream: in particular, there is a BufWriter underneath hyper.  hyper\r\nwould honour a flush request, but there is no way to send one.\r\n\r\nOptions:\r\n\r\nIdeally the code which is producing the data would be able to\r\nexplicitly designate when a flush should occur.  Certainly it would\r\nnot be acceptable to flush all the time for all readers.\r\n\r\n1. Invent a new kind of Body (UnbufferedChunked) which translates the\r\ndata from each Read::read() call into a single call to the stream\r\nwrite, and which always flushes.  This would be a seriously invasive\r\nchange.  And it would mean that SSE systems with fast event streams\r\nmight work poorly.\r\n\r\n2. Invent a new kind of Body which doesn't use Read at all, and\r\ninstead has a more sophisticated API.  This would be super-invasive\r\nand heavyweight.\r\n\r\n3. Find a way to encode the necessary information in the Read trait\r\nprotocol.\r\n\r\nChosen solution:\r\n\r\nIt turns out that option 3 is quite easy.  The read() call can return\r\nan io::Error.  There are at least some errors that clearly ought not\r\nto occur here.  An obvious one is ErrorKind::WouldBlock.\r\n\r\nRocket expects the reader to block.  WouldBlock is only applicable to\r\nnonblocking objects.  And indeed the reader will generally want to\r\nreturn it (once) when it is about to block.\r\n\r\nWe have the Stream treat io::Error with ErrorKind::WouldBlock, from\r\nits reader, as a request to flush.  There are two effects: we stop\r\ntrying to accumulate a full chunk, and we issue a flush call to the\r\nunderlying writer (which, eventually, makes it all the way down into\r\nhyper and BufWriter).\r\n\r\nImplementation:\r\n\r\nWe provide a method ReadExt::read_max_wfs which is like read_max but\r\nwhich handles the WouldBlock case specially.  It tells its caller\r\nwhether a flush was wanted.\r\n\r\nThis is implemented by adding a new code to read_max_internal.  with a\r\nboolean to control it.  This seemed better than inventing a trait or\r\nsomething.  (The other read_max call site is reading http headers in\r\ndata.rs, and I think it wants to tread WouldBlock as an error.)\r\n\r\nRisks and downsides:\r\n\r\nObviously this ad-hoc extension to the Read protocol is not\r\nparticularly pretty.  At least, people who aren't doing SSE (or\r\nsimilar) won't need it and can ignore it.\r\n\r\nIf for some reason the data source is actually nonblocking, this new\r\narrangement would spin, rather than calling the situation a fatal\r\nerror.  This possibility seems fairly remote, in production settings\r\nat least.  To migitate this it might be possible for the loop in\r\nRocket::issue_response to bomb out if it notices it is sending lots of\r\nconsecutive empty chunks.\r\n\r\nIt is possible that async Rocket will want to take a different\r\napproach entirely.  But it will definitely need to solve this problem\r\nsomehow, and naively it seems like the obvious transformation to eg\r\nthe Tokio read trait would have the same API limitation and admit the\r\nsame solution.  (Having a flush occur every time the body stream\r\nfuture returns Pending would not be good for performance, I think.)\r\n```\r\n\r\nBackground and references:\r\n\r\nI found these issues already:\r\n * #1066 _(async) Add a Write-like interface for responses_: I guess this may obviate the need for the approach I have taken in 0.4.  I'll leave you to think about that :-).\r\n * #33 _Support for Server Sent Events_.  I think this MR would fix #33 for 0.4.  I haven't looked at 0.5 at all but it seems likely that a similar approach would be possible.\r\n * #90 _Native WebSocket support_.  Well that's a good idea, but not closely related.  I thougt I should mention it because WebSockets are an alternative way to solve some of the problems that SSE addresses.\r\n \r\nPS: Thanks for Rocket.  This is my 2nd Rocket application so consider yourselves appreciated :-).","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/1365/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rwf2/Rocket/issues/1365/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/653829239","html_url":"https://github.com/rwf2/Rocket/issues/33#issuecomment-653829239","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/33","id":653829239,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzgyOTIzOQ==","user":{"login":"ijackson","id":2090772,"node_id":"MDQ6VXNlcjIwOTA3NzI=","avatar_url":"https://avatars.githubusercontent.com/u/2090772?v=4","gravatar_id":"","url":"https://api.github.com/users/ijackson","html_url":"https://github.com/ijackson","followers_url":"https://api.github.com/users/ijackson/followers","following_url":"https://api.github.com/users/ijackson/following{/other_user}","gists_url":"https://api.github.com/users/ijackson/gists{/gist_id}","starred_url":"https://api.github.com/users/ijackson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijackson/subscriptions","organizations_url":"https://api.github.com/users/ijackson/orgs","repos_url":"https://api.github.com/users/ijackson/repos","events_url":"https://api.github.com/users/ijackson/events{/privacy}","received_events_url":"https://api.github.com/users/ijackson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-05T01:10:37Z","updated_at":"2020-07-05T01:10:37Z","body":"I think my MR #1365 would satisfy this request for Rocket 0.4.x.\r\n\r\nHaving read the discussion, I wanted to respond to a few points:\r\n\r\n> \"will block\" has the serious consequence that the maximum number of clients with open SSE channels is bounded by the number of worker threads\r\n\r\nYes.  Depending on the application, it will be necessary to significantly increase the number of worker threads (and hope the system doesn't overload or get DOS'd).  Also there is a browser limitation, see https://developer.mozilla.org/en-US/docs/Web/API/EventSource for which traditional workaround is to make the SSE requests to a wildcard domain with a randomly-chosen leafname, or similar (the client maximum connections limit  being per domain, not per IP address).\r\n \r\n> Ok, I managed to patch version 0.10.13 of hyper to force flush sockets.\r\n\r\nI don't think that change is necessary (everything works for me with hyper 0.10.16) or desirable.  If rocket can be persuaded to complete a chunk, and issue a flush call, hyper seems to do the right things.\r\n\r\n> In my opinion it would be great to have an example that shows how to currently implement a simple SSE\r\n\r\nI have code that could easily become such a thing if my MR #1365 is accepted.  If there is interest I could produce a suitable git branch.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/653829239/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ijackson","id":2090772,"node_id":"MDQ6VXNlcjIwOTA3NzI=","avatar_url":"https://avatars.githubusercontent.com/u/2090772?v=4","gravatar_id":"","url":"https://api.github.com/users/ijackson","html_url":"https://github.com/ijackson","followers_url":"https://api.github.com/users/ijackson/followers","following_url":"https://api.github.com/users/ijackson/following{/other_user}","gists_url":"https://api.github.com/users/ijackson/gists{/gist_id}","starred_url":"https://api.github.com/users/ijackson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijackson/subscriptions","organizations_url":"https://api.github.com/users/ijackson/orgs","repos_url":"https://api.github.com/users/ijackson/repos","events_url":"https://api.github.com/users/ijackson/events{/privacy}","received_events_url":"https://api.github.com/users/ijackson/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3627909690,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50MzYyNzkwOTY5MA==","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/3627909690","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2020-08-06T08:09:39Z","milestone":{"title":"0.8.0"},"performed_via_github_app":null},{"id":3627909693,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDM2Mjc5MDk2OTM=","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/3627909693","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2020-08-06T08:09:39Z","milestone":{"title":"0.5.0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/669780777","html_url":"https://github.com/rwf2/Rocket/issues/33#issuecomment-669780777","issue_url":"https://api.github.com/repos/rwf2/Rocket/issues/33","id":669780777,"node_id":"MDEyOklzc3VlQ29tbWVudDY2OTc4MDc3Nw==","user":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-06T08:09:48Z","updated_at":"2020-08-06T08:09:48Z","body":"Pushing this up to `0.5`.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/comments/669780777/reactions","total_count":14,"+1":0,"-1":0,"laugh":0,"hooray":14,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-15T18:34:43Z","updated_at":"2020-09-15T18:34:43Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/1424","repository_url":"https://api.github.com/repos/rwf2/Rocket","labels_url":"https://api.github.com/repos/rwf2/Rocket/issues/1424/labels{/name}","comments_url":"https://api.github.com/repos/rwf2/Rocket/issues/1424/comments","events_url":"https://api.github.com/repos/rwf2/Rocket/issues/1424/events","html_url":"https://github.com/rwf2/Rocket/issues/1424","id":693114203,"node_id":"MDU6SXNzdWU2OTMxMTQyMDM=","number":1424,"title":"How to stream a large JSON response?","user":{"login":"fabienbellanger","id":6704005,"node_id":"MDQ6VXNlcjY3MDQwMDU=","avatar_url":"https://avatars.githubusercontent.com/u/6704005?v=4","gravatar_id":"","url":"https://api.github.com/users/fabienbellanger","html_url":"https://github.com/fabienbellanger","followers_url":"https://api.github.com/users/fabienbellanger/followers","following_url":"https://api.github.com/users/fabienbellanger/following{/other_user}","gists_url":"https://api.github.com/users/fabienbellanger/gists{/gist_id}","starred_url":"https://api.github.com/users/fabienbellanger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fabienbellanger/subscriptions","organizations_url":"https://api.github.com/users/fabienbellanger/orgs","repos_url":"https://api.github.com/users/fabienbellanger/repos","events_url":"https://api.github.com/users/fabienbellanger/events{/privacy}","received_events_url":"https://api.github.com/users/fabienbellanger/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":343542075,"node_id":"MDU6TGFiZWwzNDM1NDIwNzU=","url":"https://api.github.com/repos/rwf2/Rocket/labels/question","name":"question","color":"D61CBC","default":true,"description":"A question (converts to discussion)"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2020-09-04T12:26:58Z","updated_at":"2020-09-15T18:34:43Z","closed_at":"2020-09-15T18:34:43Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54168759,"node_id":"MDEwOlJlcG9zaXRvcnk1NDE2ODc1OQ==","name":"Rocket","full_name":"rwf2/Rocket","private":false,"owner":{"login":"rwf2","id":106361765,"node_id":"O_kgDOBlbzpQ","avatar_url":"https://avatars.githubusercontent.com/u/106361765?v=4","gravatar_id":"","url":"https://api.github.com/users/rwf2","html_url":"https://github.com/rwf2","followers_url":"https://api.github.com/users/rwf2/followers","following_url":"https://api.github.com/users/rwf2/following{/other_user}","gists_url":"https://api.github.com/users/rwf2/gists{/gist_id}","starred_url":"https://api.github.com/users/rwf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rwf2/subscriptions","organizations_url":"https://api.github.com/users/rwf2/orgs","repos_url":"https://api.github.com/users/rwf2/repos","events_url":"https://api.github.com/users/rwf2/events{/privacy}","received_events_url":"https://api.github.com/users/rwf2/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rwf2/Rocket","description":"A web framework for Rust.","fork":false,"url":"https://api.github.com/repos/rwf2/Rocket","forks_url":"https://api.github.com/repos/rwf2/Rocket/forks","keys_url":"https://api.github.com/repos/rwf2/Rocket/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rwf2/Rocket/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rwf2/Rocket/teams","hooks_url":"https://api.github.com/repos/rwf2/Rocket/hooks","issue_events_url":"https://api.github.com/repos/rwf2/Rocket/issues/events{/number}","events_url":"https://api.github.com/repos/rwf2/Rocket/events","assignees_url":"https://api.github.com/repos/rwf2/Rocket/assignees{/user}","branches_url":"https://api.github.com/repos/rwf2/Rocket/branches{/branch}","tags_url":"https://api.github.com/repos/rwf2/Rocket/tags","blobs_url":"https://api.github.com/repos/rwf2/Rocket/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rwf2/Rocket/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rwf2/Rocket/git/refs{/sha}","trees_url":"https://api.github.com/repos/rwf2/Rocket/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rwf2/Rocket/statuses/{sha}","languages_url":"https://api.github.com/repos/rwf2/Rocket/languages","stargazers_url":"https://api.github.com/repos/rwf2/Rocket/stargazers","contributors_url":"https://api.github.com/repos/rwf2/Rocket/contributors","subscribers_url":"https://api.github.com/repos/rwf2/Rocket/subscribers","subscription_url":"https://api.github.com/repos/rwf2/Rocket/subscription","commits_url":"https://api.github.com/repos/rwf2/Rocket/commits{/sha}","git_commits_url":"https://api.github.com/repos/rwf2/Rocket/git/commits{/sha}","comments_url":"https://api.github.com/repos/rwf2/Rocket/comments{/number}","issue_comment_url":"https://api.github.com/repos/rwf2/Rocket/issues/comments{/number}","contents_url":"https://api.github.com/repos/rwf2/Rocket/contents/{+path}","compare_url":"https://api.github.com/repos/rwf2/Rocket/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rwf2/Rocket/merges","archive_url":"https://api.github.com/repos/rwf2/Rocket/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rwf2/Rocket/downloads","issues_url":"https://api.github.com/repos/rwf2/Rocket/issues{/number}","pulls_url":"https://api.github.com/repos/rwf2/Rocket/pulls{/number}","milestones_url":"https://api.github.com/repos/rwf2/Rocket/milestones{/number}","notifications_url":"https://api.github.com/repos/rwf2/Rocket/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rwf2/Rocket/labels{/name}","releases_url":"https://api.github.com/repos/rwf2/Rocket/releases{/id}","deployments_url":"https://api.github.com/repos/rwf2/Rocket/deployments","created_at":"2016-03-18T02:50:18Z","updated_at":"2025-11-09T18:27:08Z","pushed_at":"2025-10-01T04:53:46Z","git_url":"git://github.com/rwf2/Rocket.git","ssh_url":"git@github.com:rwf2/Rocket.git","clone_url":"https://github.com/rwf2/Rocket.git","svn_url":"https://github.com/rwf2/Rocket","homepage":"https://rocket.rs","size":8445,"stargazers_count":25480,"watchers_count":25480,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":1614,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":84,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["framework","rocket","rust","web","web-development","web-framework"],"visibility":"public","forks":1614,"open_issues":84,"watchers":25480,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hello,\r\n\r\nRocket version : **0.4.5**\r\n\r\nI'm new with Rust and Rocket, so sorry if my question sounds stupid.\r\n\r\nI'm used to stream large JSON with Golang and Echo like this:\r\n\r\n```go\r\npackage main\r\n\r\nimport (\r\n\t\"net/http\"\r\n\t\r\n\t\"github.com/labstack/echo/v4\"\r\n)\r\n\r\nfunc main() {\r\n\te := echo.New()\r\n\te.GET(\"/\", func(c echo.Context) error {\r\n        resp := c.Response()\r\n        resp.WriteHeader(http.StatusOK)\r\n\r\n        if _, err := io.WriteString(resp, \"[\"); err != nil {\r\n            return err\r\n        }\r\n        enc := json.NewEncoder(resp)\r\n        for i := 0; i < 100000; i++ {\r\n            if i > 0 {\r\n                if _, err := io.WriteString(resp, \",\"); err != nil {\r\n                    return err\r\n                }\r\n            }\r\n            user := User{\r\n                Username:  \"My username_\" + strconv.Itoa(i),\r\n                Password:  \"gjgjghjggjhg7884erhkhjb;lljjkbhjvftxe!hjjkhkljkbhft\",\r\n                Lastname:  \"A looooong lastname\",\r\n                Firstname: \"A looooong firstname\",\r\n            }\r\n            if err := enc.Encode(user); err != nil {\r\n                return err\r\n            }\r\n        }\r\n        if _, err := io.WriteString(resp, \"]\"); err != nil {\r\n            return err\r\n        }\r\n\r\n        return nil\r\n    })\r\n\te.Logger.Fatal(e.Start(\":1323\"))\r\n}\r\n```\r\n\r\nI read the [streaming](https://rocket.rs/v0.4/guide/requests/#streamin) section in Rocket documentation, but i definitely do not see how to do with a JSON.\r\n\r\nHow can i do this with Rocket?\r\n\r\nThanks\r\n","reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/1424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rwf2/Rocket/issues/1424/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":4099744615,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQwOTk3NDQ2MTU=","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/4099744615","actor":{"login":"dominikks","id":38784600,"node_id":"MDQ6VXNlcjM4Nzg0NjAw","avatar_url":"https://avatars.githubusercontent.com/u/38784600?v=4","gravatar_id":"","url":"https://api.github.com/users/dominikks","html_url":"https://github.com/dominikks","followers_url":"https://api.github.com/users/dominikks/followers","following_url":"https://api.github.com/users/dominikks/following{/other_user}","gists_url":"https://api.github.com/users/dominikks/gists{/gist_id}","starred_url":"https://api.github.com/users/dominikks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dominikks/subscriptions","organizations_url":"https://api.github.com/users/dominikks/orgs","repos_url":"https://api.github.com/users/dominikks/repos","events_url":"https://api.github.com/users/dominikks/events{/privacy}","received_events_url":"https://api.github.com/users/dominikks/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-12-11T10:41:59Z","performed_via_github_app":null},{"id":4177663997,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxNzc2NjM5OTc=","url":"https://api.github.com/repos/rwf2/Rocket/issues/events/4177663997","actor":{"login":"DusterTheFirst","id":14093962,"node_id":"MDQ6VXNlcjE0MDkzOTYy","avatar_url":"https://avatars.githubusercontent.com/u/14093962?v=4","gravatar_id":"","url":"https://api.github.com/users/DusterTheFirst","html_url":"https://github.com/DusterTheFirst","followers_url":"https://api.github.com/users/DusterTheFirst/followers","following_url":"https://api.github.com/users/DusterTheFirst/following{/other_user}","gists_url":"https://api.github.com/users/DusterTheFirst/gists{/gist_id}","starred_url":"https://api.github.com/users/DusterTheFirst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DusterTheFirst/subscriptions","organizations_url":"https://api.github.com/users/DusterTheFirst/orgs","repos_url":"https://api.github.com/users/DusterTheFirst/repos","events_url":"https://api.github.com/users/DusterTheFirst/events{/privacy}","received_events_url":"https://api.github.com/users/DusterTheFirst/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-07T00:36:47Z","performed_via_github_app":null}]