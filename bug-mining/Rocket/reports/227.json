{"url":"https://api.github.com/repos/rwf2/Rocket/issues/2366","repository_url":"https://api.github.com/repos/rwf2/Rocket","labels_url":"https://api.github.com/repos/rwf2/Rocket/issues/2366/labels{/name}","comments_url":"https://api.github.com/repos/rwf2/Rocket/issues/2366/comments","events_url":"https://api.github.com/repos/rwf2/Rocket/issues/2366/events","html_url":"https://github.com/rwf2/Rocket/issues/2366","id":1408550331,"node_id":"I_kwDOAzqMt85T9MW7","number":2366,"title":"Implement `serde::Serialize` for `rocket::http::Status``","user":{"login":"Scripter17","id":25886989,"node_id":"MDQ6VXNlcjI1ODg2OTg5","avatar_url":"https://avatars.githubusercontent.com/u/25886989?v=4","gravatar_id":"","url":"https://api.github.com/users/Scripter17","html_url":"https://github.com/Scripter17","followers_url":"https://api.github.com/users/Scripter17/followers","following_url":"https://api.github.com/users/Scripter17/following{/other_user}","gists_url":"https://api.github.com/users/Scripter17/gists{/gist_id}","starred_url":"https://api.github.com/users/Scripter17/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Scripter17/subscriptions","organizations_url":"https://api.github.com/users/Scripter17/orgs","repos_url":"https://api.github.com/users/Scripter17/repos","events_url":"https://api.github.com/users/Scripter17/events{/privacy}","received_events_url":"https://api.github.com/users/Scripter17/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":442152232,"node_id":"MDU6TGFiZWw0NDIxNTIyMzI=","url":"https://api.github.com/repos/rwf2/Rocket/labels/request","name":"request","color":"5319E7","default":false,"description":"Request for new functionality"},{"id":442158672,"node_id":"MDU6TGFiZWw0NDIxNTg2NzI=","url":"https://api.github.com/repos/rwf2/Rocket/labels/accepted","name":"accepted","color":"0E8A16","default":false,"description":"An accepted request or suggestion"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-10-13T23:50:08Z","updated_at":"2023-03-27T02:21:52Z","closed_at":"2023-03-27T02:21:52Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Is your feature request motivated by a concrete problem? Please describe.**\r\n\r\nMy website has an API that, for the sake of making it easier for users to parse, returns the HTTP status in the response JSON (as well as the response code). I'd like the enum variants to have a `code: rocket::http::Status` in them, but that conflicts with `#[derive(Serialize)]`\r\n\r\n**Why this feature can't or shouldn't live outside of Rocket**\r\n\r\nAs far as I'm aware, it's impossible for me to do this outside of modifying rocket's source code on my machine.\r\n\r\nThe only alternative is to, well\r\n\r\n```Rust\r\nuse serde::ser::{Serialize, SerializeStruct, Serializer};\r\nuse rocket::http::Status;\r\n\r\nenum ApiResult {\r\n    Error{code: Status},\r\n    // ...\r\n}\r\n\r\nimpl Serialize for ApiResult {\r\n    fn serialize<S>(&self, serializer: S) -> Result<S::Ok, S::Error> where S: Serializer, {\r\n        match *self {\r\n            ApiResult::Error{ref code, ..} => {\r\n                let mut state = serializer.serialize_struct(\"Error\", 1)?;\r\n                state.serialize_field(\"code\", &code.code)?;\r\n                state.end()\r\n            },\r\n            // ...\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nWhich is just not practical to scale up, especially given how small of a feature it is\r\n\r\n**Ideal Solution**\r\n\r\nIdeally `rocket::http::Status` would be serialized as a `u16`. So `enum ApiResult{Error: {code: Status}}` would look like `{\"code\": 404}` to the client\r\n\r\n**Alternatives Considered**\r\n\r\nThere's a chance that someone else would want `Status::NotFound` to serialize to `{\"code\": 404, \"reason\": \"Not Found\"}`, but I think a `404` is more than enough here","closed_by":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/2366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rwf2/Rocket/issues/2366/timeline","performed_via_github_app":null,"state_reason":"completed"}