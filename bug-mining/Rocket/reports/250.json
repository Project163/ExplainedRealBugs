{"url":"https://api.github.com/repos/rwf2/Rocket/issues/2649","repository_url":"https://api.github.com/repos/rwf2/Rocket","labels_url":"https://api.github.com/repos/rwf2/Rocket/issues/2649/labels{/name}","comments_url":"https://api.github.com/repos/rwf2/Rocket/issues/2649/comments","events_url":"https://api.github.com/repos/rwf2/Rocket/issues/2649/events","html_url":"https://github.com/rwf2/Rocket/issues/2649","id":2006909070,"node_id":"I_kwDOAzqMt853nwCO","number":2649,"title":"Force enable color output","user":{"login":"levkk","id":9561483,"node_id":"MDQ6VXNlcjk1NjE0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/9561483?v=4","gravatar_id":"","url":"https://api.github.com/users/levkk","html_url":"https://github.com/levkk","followers_url":"https://api.github.com/users/levkk/followers","following_url":"https://api.github.com/users/levkk/following{/other_user}","gists_url":"https://api.github.com/users/levkk/gists{/gist_id}","starred_url":"https://api.github.com/users/levkk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/levkk/subscriptions","organizations_url":"https://api.github.com/users/levkk/orgs","repos_url":"https://api.github.com/users/levkk/repos","events_url":"https://api.github.com/users/levkk/events{/privacy}","received_events_url":"https://api.github.com/users/levkk/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":343542070,"node_id":"MDU6TGFiZWwzNDM1NDIwNzA=","url":"https://api.github.com/repos/rwf2/Rocket/labels/help%20wanted","name":"help wanted","color":"008672","default":true,"description":"Contributions to this issue are needed"},{"id":442152232,"node_id":"MDU6TGFiZWw0NDIxNTIyMzI=","url":"https://api.github.com/repos/rwf2/Rocket/labels/request","name":"request","color":"5319E7","default":false,"description":"Request for new functionality"},{"id":442158672,"node_id":"MDU6TGFiZWw0NDIxNTg2NzI=","url":"https://api.github.com/repos/rwf2/Rocket/labels/accepted","name":"accepted","color":"0E8A16","default":false,"description":"An accepted request or suggestion"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rwf2/Rocket/milestones/6","html_url":"https://github.com/rwf2/Rocket/milestone/6","labels_url":"https://api.github.com/repos/rwf2/Rocket/milestones/6/labels","id":2224310,"node_id":"MDk6TWlsZXN0b25lMjIyNDMxMA==","number":6,"title":"0.6.0","description":"","creator":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":11,"closed_issues":18,"state":"open","created_at":"2017-01-03T03:17:51Z","updated_at":"2024-08-24T10:40:35Z","due_on":null,"closed_at":null},"comments":2,"created_at":"2023-11-22T18:35:24Z","updated_at":"2023-12-19T00:44:30Z","closed_at":"2023-12-19T00:44:30Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Is your feature request motivated by a concrete problem? Please describe.**\r\n\r\nWhen running Rocket in local development under an orchestrator like Foreman (together with other apps), the color output gets disabled because subprocesses spawned by Foreman are not real shells (no TTY). The colored output is still desired (it looks nice and helps readability), so we would like to enable it and bypass the TTY check.\r\n\r\n**Why this feature can't or shouldn't live outside of Rocket**\r\n\r\nRocket controls its color output. Faking a TTY in Foreman and friends is not obvious, e.g. requires using a fake shell like `tty` in [Python](https://stackoverflow.com/questions/56835373/python-subprocess-realtime-print-with-colors-and-save-stdout). \r\n\r\n**Ideal Solution**\r\n\r\nMake `cli_colors` an `Option<bool>`. If specified, `true` will always enable color output, `false` will always disable it, and `None` will default to `true` and the current TTY check.\r\n\r\n**Alternatives Considered**\r\n\r\nPatching Foreman/Honcho to support color output, but this quickly became a game of cat and mouse with TTY. Can't patch every single subprocess spawner out there, and this issue is not exclusive to Foreman.\r\n\r\n**Additional Context**\r\n\r\nHappy to contribute a PR, although I'm a bit lost in the Deserializer implementation in Figment for `Option<bool>`. Currently Figment tests aren't compiling in `master`, so a bit of a lift to get started.\r\n","closed_by":{"login":"SergioBenitez","id":1480321,"node_id":"MDQ6VXNlcjE0ODAzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1480321?v=4","gravatar_id":"","url":"https://api.github.com/users/SergioBenitez","html_url":"https://github.com/SergioBenitez","followers_url":"https://api.github.com/users/SergioBenitez/followers","following_url":"https://api.github.com/users/SergioBenitez/following{/other_user}","gists_url":"https://api.github.com/users/SergioBenitez/gists{/gist_id}","starred_url":"https://api.github.com/users/SergioBenitez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergioBenitez/subscriptions","organizations_url":"https://api.github.com/users/SergioBenitez/orgs","repos_url":"https://api.github.com/users/SergioBenitez/repos","events_url":"https://api.github.com/users/SergioBenitez/events{/privacy}","received_events_url":"https://api.github.com/users/SergioBenitez/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rwf2/Rocket/issues/2649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rwf2/Rocket/issues/2649/timeline","performed_via_github_app":null,"state_reason":"completed"}