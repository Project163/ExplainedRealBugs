[{"url":"https://api.github.com/repos/FasterXML/jackson-core/issues/comments/236697108","html_url":"https://github.com/FasterXML/jackson-core/issues/307#issuecomment-236697108","issue_url":"https://api.github.com/repos/FasterXML/jackson-core/issues/307","id":236697108,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNjY5NzEwOA==","user":{"login":"mtnaseef","id":11181930,"node_id":"MDQ6VXNlcjExMTgxOTMw","avatar_url":"https://avatars.githubusercontent.com/u/11181930?v=4","gravatar_id":"","url":"https://api.github.com/users/mtnaseef","html_url":"https://github.com/mtnaseef","followers_url":"https://api.github.com/users/mtnaseef/followers","following_url":"https://api.github.com/users/mtnaseef/following{/other_user}","gists_url":"https://api.github.com/users/mtnaseef/gists{/gist_id}","starred_url":"https://api.github.com/users/mtnaseef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtnaseef/subscriptions","organizations_url":"https://api.github.com/users/mtnaseef/orgs","repos_url":"https://api.github.com/users/mtnaseef/repos","events_url":"https://api.github.com/users/mtnaseef/events{/privacy}","received_events_url":"https://api.github.com/users/mtnaseef/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-01T20:27:14Z","updated_at":"2016-08-01T20:27:14Z","body":"I don't see a way to attach a file, so here's BadMsg.java in pastebin: http://pastebin.com/4PjDiMP1\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-core/issues/comments/236697108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mtnaseef","id":11181930,"node_id":"MDQ6VXNlcjExMTgxOTMw","avatar_url":"https://avatars.githubusercontent.com/u/11181930?v=4","gravatar_id":"","url":"https://api.github.com/users/mtnaseef","html_url":"https://github.com/mtnaseef","followers_url":"https://api.github.com/users/mtnaseef/followers","following_url":"https://api.github.com/users/mtnaseef/following{/other_user}","gists_url":"https://api.github.com/users/mtnaseef/gists{/gist_id}","starred_url":"https://api.github.com/users/mtnaseef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtnaseef/subscriptions","organizations_url":"https://api.github.com/users/mtnaseef/orgs","repos_url":"https://api.github.com/users/mtnaseef/repos","events_url":"https://api.github.com/users/mtnaseef/events{/privacy}","received_events_url":"https://api.github.com/users/mtnaseef/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-core/issues/comments/239078162","html_url":"https://github.com/FasterXML/jackson-core/issues/307#issuecomment-239078162","issue_url":"https://api.github.com/repos/FasterXML/jackson-core/issues/307","id":239078162,"node_id":"MDEyOklzc3VlQ29tbWVudDIzOTA3ODE2Mg==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-11T05:43:50Z","updated_at":"2016-08-11T05:43:50Z","body":"Thank you for reporting this, I am investigating it now.\n\nIt's bit of a nasty problem, caused by segmented nature of processing; if surrogate pair is located at boundary of segment buffer exception is thrown. So need to figure out a way to handle this case.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-core/issues/comments/239078162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-11T05:44:54Z","updated_at":"2016-08-11T05:44:54Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-core/issues/223","repository_url":"https://api.github.com/repos/FasterXML/jackson-core","labels_url":"https://api.github.com/repos/FasterXML/jackson-core/issues/223/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-core/issues/223/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-core/issues/223/events","html_url":"https://github.com/FasterXML/jackson-core/issues/223","id":110880547,"node_id":"MDU6SXNzdWUxMTA4ODA1NDc=","number":223,"title":"`UTF8JsonGenerator` writes supplementary characters as a surrogate pair -- should use 4-byte encoding","user":{"login":"ianroberts","id":428107,"node_id":"MDQ6VXNlcjQyODEwNw==","avatar_url":"https://avatars.githubusercontent.com/u/428107?v=4","gravatar_id":"","url":"https://api.github.com/users/ianroberts","html_url":"https://github.com/ianroberts","followers_url":"https://api.github.com/users/ianroberts/followers","following_url":"https://api.github.com/users/ianroberts/following{/other_user}","gists_url":"https://api.github.com/users/ianroberts/gists{/gist_id}","starred_url":"https://api.github.com/users/ianroberts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ianroberts/subscriptions","organizations_url":"https://api.github.com/users/ianroberts/orgs","repos_url":"https://api.github.com/users/ianroberts/repos","events_url":"https://api.github.com/users/ianroberts/events{/privacy}","received_events_url":"https://api.github.com/users/ianroberts/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-core/milestones/79","html_url":"https://github.com/FasterXML/jackson-core/milestone/79","labels_url":"https://api.github.com/repos/FasterXML/jackson-core/milestones/79/labels","id":10834123,"node_id":"MI_kwDOAC5a084ApVDL","number":79,"title":"2.18.0","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":10,"state":"open","created_at":"2024-04-18T00:40:30Z","updated_at":"2024-12-04T18:21:20Z","due_on":null,"closed_at":null},"comments":19,"created_at":"2015-10-11T20:20:48Z","updated_at":"2024-12-04T18:21:20Z","closed_at":"2024-12-04T18:21:20Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3037907,"node_id":"MDEwOlJlcG9zaXRvcnkzMDM3OTA3","name":"jackson-core","full_name":"FasterXML/jackson-core","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-core","description":"Core part of Jackson that defines Streaming API as well as basic shared abstractions","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-core","forks_url":"https://api.github.com/repos/FasterXML/jackson-core/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-core/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-core/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-core/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-core/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-core/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-core/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-core/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-core/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-core/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-core/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-core/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-core/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-core/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-core/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-core/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-core/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-core/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-core/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-core/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-core/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-core/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-core/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-core/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-core/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-core/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-core/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-core/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-core/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-core/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-core/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-core/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-core/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-core/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-core/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-core/deployments","created_at":"2011-12-23T02:00:51Z","updated_at":"2025-11-07T22:08:37Z","pushed_at":"2025-11-07T22:08:31Z","git_url":"git://github.com/FasterXML/jackson-core.git","ssh_url":"git@github.com:FasterXML/jackson-core.git","clone_url":"https://github.com/FasterXML/jackson-core.git","svn_url":"https://github.com/FasterXML/jackson-core","homepage":"","size":27088,"stargazers_count":2331,"watchers_count":2331,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":820,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":27,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","json"],"visibility":"public","forks":820,"open_issues":27,"watchers":2331,"default_branch":"3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"When outputting a string value containing a supplementary Unicode code point, UTF8JsonGenerator is encoding the supplementary character as a pair of `\\uNNNN` escapes representing the two halves of the surrogate pair that would denote the code point in UTF-16 instead of using the correct multi-byte UTF-8 encoding of the character.  The following Groovy script demonstrates the behaviour:\n\n```\n@Grab(group='com.fasterxml.jackson.core', module='jackson-core', version='2.6.2')\nimport com.fasterxml.jackson.core.JsonFactory\n\ndef factory = new JsonFactory()\ndef bytes1 = new ByteArrayOutputStream()\ndef gen1 = factory.createGenerator(bytes1) // UTF8JsonGenerator\ngen1.writeStartObject()\ngen1.writeStringField(\"test\", new String(Character.toChars(0x1F602)))\ngen1.writeEndObject()\ngen1.close()\nSystem.out.write(bytes1.toByteArray())\nprintln \"\"\n// prints {\"test\":\"\\uD83D\\uDE02\"}\n\n\ndef bytes2 = new ByteArrayOutputStream()\nnew OutputStreamWriter(bytes2, \"UTF-8\").withWriter { w ->\n  def gen2 = factory.createGenerator(w) // WriterBasedJsonGenerator\n  gen2.writeStartObject()\n  gen2.writeStringField(\"test\", new String(Character.toChars(0x1F602)))\n  gen2.writeEndObject()\n  gen2.close()\n}\nSystem.out.write(bytes2.toByteArray())\nprintln \"\"\n// prints {\"test\":\"ðŸ˜‚\"}\n```\n\nWhen generating to a Writer rather than an OutputStream (and letting Java handle the UTF-8 byte conversion) the supplementary character U+1F602 is encoded as the correct UTF-8 four byte sequence `f0 9f 98 82`.\n","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-core/issues/223/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-core/issues/223/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":760862263,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDc2MDg2MjI2Mw==","url":"https://api.github.com/repos/FasterXML/jackson-core/issues/events/760862263","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"554f8db0f940b2a53f974852a2af194739d65200","commit_url":"https://api.github.com/repos/FasterXML/jackson-core/commits/554f8db0f940b2a53f974852a2af194739d65200","created_at":"2016-08-19T06:10:10Z","performed_via_github_app":null},{"id":760862920,"node_id":"MDExOkNsb3NlZEV2ZW50NzYwODYyOTIw","url":"https://api.github.com/repos/FasterXML/jackson-core/issues/events/760862920","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"554f8db0f940b2a53f974852a2af194739d65200","commit_url":"https://api.github.com/repos/FasterXML/jackson-core/commits/554f8db0f940b2a53f974852a2af194739d65200","created_at":"2016-08-19T06:11:13Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"kjmrknsn","id":31149688,"node_id":"MDQ6VXNlcjMxMTQ5Njg4","avatar_url":"https://avatars.githubusercontent.com/u/31149688?v=4","gravatar_id":"","url":"https://api.github.com/users/kjmrknsn","html_url":"https://github.com/kjmrknsn","followers_url":"https://api.github.com/users/kjmrknsn/followers","following_url":"https://api.github.com/users/kjmrknsn/following{/other_user}","gists_url":"https://api.github.com/users/kjmrknsn/gists{/gist_id}","starred_url":"https://api.github.com/users/kjmrknsn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kjmrknsn/subscriptions","organizations_url":"https://api.github.com/users/kjmrknsn/orgs","repos_url":"https://api.github.com/users/kjmrknsn/repos","events_url":"https://api.github.com/users/kjmrknsn/events{/privacy}","received_events_url":"https://api.github.com/users/kjmrknsn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T14:15:39Z","updated_at":"2017-11-17T14:15:39Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/apache/incubator-livy/issues/64","repository_url":"https://api.github.com/repos/apache/incubator-livy","labels_url":"https://api.github.com/repos/apache/incubator-livy/issues/64/labels{/name}","comments_url":"https://api.github.com/repos/apache/incubator-livy/issues/64/comments","events_url":"https://api.github.com/repos/apache/incubator-livy/issues/64/events","html_url":"https://github.com/apache/incubator-livy/pull/64","id":274877971,"node_id":"MDExOlB1bGxSZXF1ZXN0MTUzMzA3MzMw","number":64,"title":"[LIVY-416] Upgrade the version of Jackson from 2.4.4 to 2.9.2","user":{"login":"kjmrknsn","id":31149688,"node_id":"MDQ6VXNlcjMxMTQ5Njg4","avatar_url":"https://avatars.githubusercontent.com/u/31149688?v=4","gravatar_id":"","url":"https://api.github.com/users/kjmrknsn","html_url":"https://github.com/kjmrknsn","followers_url":"https://api.github.com/users/kjmrknsn/followers","following_url":"https://api.github.com/users/kjmrknsn/following{/other_user}","gists_url":"https://api.github.com/users/kjmrknsn/gists{/gist_id}","starred_url":"https://api.github.com/users/kjmrknsn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kjmrknsn/subscriptions","organizations_url":"https://api.github.com/users/kjmrknsn/orgs","repos_url":"https://api.github.com/users/kjmrknsn/repos","events_url":"https://api.github.com/users/kjmrknsn/events{/privacy}","received_events_url":"https://api.github.com/users/kjmrknsn/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2017-11-17T14:15:39Z","updated_at":"2017-11-29T04:26:31Z","closed_at":"2017-11-23T14:36:59Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":95343930,"node_id":"MDEwOlJlcG9zaXRvcnk5NTM0MzkzMA==","name":"incubator-livy","full_name":"apache/incubator-livy","private":false,"owner":{"login":"apache","id":47359,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ3MzU5","avatar_url":"https://avatars.githubusercontent.com/u/47359?v=4","gravatar_id":"","url":"https://api.github.com/users/apache","html_url":"https://github.com/apache","followers_url":"https://api.github.com/users/apache/followers","following_url":"https://api.github.com/users/apache/following{/other_user}","gists_url":"https://api.github.com/users/apache/gists{/gist_id}","starred_url":"https://api.github.com/users/apache/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apache/subscriptions","organizations_url":"https://api.github.com/users/apache/orgs","repos_url":"https://api.github.com/users/apache/repos","events_url":"https://api.github.com/users/apache/events{/privacy}","received_events_url":"https://api.github.com/users/apache/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/apache/incubator-livy","description":"Apache Livy is an open source REST interface for interacting with Apache Spark from anywhere.","fork":false,"url":"https://api.github.com/repos/apache/incubator-livy","forks_url":"https://api.github.com/repos/apache/incubator-livy/forks","keys_url":"https://api.github.com/repos/apache/incubator-livy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/apache/incubator-livy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/apache/incubator-livy/teams","hooks_url":"https://api.github.com/repos/apache/incubator-livy/hooks","issue_events_url":"https://api.github.com/repos/apache/incubator-livy/issues/events{/number}","events_url":"https://api.github.com/repos/apache/incubator-livy/events","assignees_url":"https://api.github.com/repos/apache/incubator-livy/assignees{/user}","branches_url":"https://api.github.com/repos/apache/incubator-livy/branches{/branch}","tags_url":"https://api.github.com/repos/apache/incubator-livy/tags","blobs_url":"https://api.github.com/repos/apache/incubator-livy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/apache/incubator-livy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/apache/incubator-livy/git/refs{/sha}","trees_url":"https://api.github.com/repos/apache/incubator-livy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/apache/incubator-livy/statuses/{sha}","languages_url":"https://api.github.com/repos/apache/incubator-livy/languages","stargazers_url":"https://api.github.com/repos/apache/incubator-livy/stargazers","contributors_url":"https://api.github.com/repos/apache/incubator-livy/contributors","subscribers_url":"https://api.github.com/repos/apache/incubator-livy/subscribers","subscription_url":"https://api.github.com/repos/apache/incubator-livy/subscription","commits_url":"https://api.github.com/repos/apache/incubator-livy/commits{/sha}","git_commits_url":"https://api.github.com/repos/apache/incubator-livy/git/commits{/sha}","comments_url":"https://api.github.com/repos/apache/incubator-livy/comments{/number}","issue_comment_url":"https://api.github.com/repos/apache/incubator-livy/issues/comments{/number}","contents_url":"https://api.github.com/repos/apache/incubator-livy/contents/{+path}","compare_url":"https://api.github.com/repos/apache/incubator-livy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/apache/incubator-livy/merges","archive_url":"https://api.github.com/repos/apache/incubator-livy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/apache/incubator-livy/downloads","issues_url":"https://api.github.com/repos/apache/incubator-livy/issues{/number}","pulls_url":"https://api.github.com/repos/apache/incubator-livy/pulls{/number}","milestones_url":"https://api.github.com/repos/apache/incubator-livy/milestones{/number}","notifications_url":"https://api.github.com/repos/apache/incubator-livy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/apache/incubator-livy/labels{/name}","releases_url":"https://api.github.com/repos/apache/incubator-livy/releases{/id}","deployments_url":"https://api.github.com/repos/apache/incubator-livy/deployments","created_at":"2017-06-25T07:00:09Z","updated_at":"2025-11-03T18:36:51Z","pushed_at":"2025-11-06T21:21:57Z","git_url":"git://github.com/apache/incubator-livy.git","ssh_url":"git@github.com:apache/incubator-livy.git","clone_url":"https://github.com/apache/incubator-livy.git","svn_url":"https://github.com/apache/incubator-livy","homepage":"https://livy.apache.org/","size":3722,"stargazers_count":931,"watchers_count":931,"language":"Scala","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":614,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":115,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["apachelivy","bigdata","livy","spark"],"visibility":"public","forks":614,"open_issues":115,"watchers":931,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/apache/incubator-livy/pulls/64","html_url":"https://github.com/apache/incubator-livy/pull/64","diff_url":"https://github.com/apache/incubator-livy/pull/64.diff","patch_url":"https://github.com/apache/incubator-livy/pull/64.patch","merged_at":null},"body":"## What changes were proposed in this pull request?\r\n\r\nhttps://issues.apache.org/jira/browse/LIVY-416\r\n\r\n`com.fasterxml.jackson.core.JsonGenerationException` is sometimes thrown. The full stack trace is show on [JsonGenerationException.txt](https://github.com/apache/incubator-livy/files/1482566/JsonGenerationException.txt).\r\n\r\nThis is because of the Jackson's bug (https://github.com/FasterXML/jackson-core/issues/307) which was fixed at Jackson 2.7.7.\r\n\r\nTo fix this issue, the version of Jackson should be updated from 2.4.4 to the latest one (2.9.2).\r\n\r\nIn addition, `com.google.guava:guava:15.0` was added to the dependencies because it was removed from the dependencies of `com.fasterxml.jackson.module:jackson-module-scala_{2.10,2.11}:2.9.2`.\r\n\r\n* [com.fasterxml.jackson.module:jackson-module-scala_2.10:2.4.4](https://mvnrepository.com/artifact/com.fasterxml.jackson.module/jackson-module-scala_2.10/2.4.4)\r\n* [com.fasterxml.jackson.module:jackson-module-scala_2.11:2.4.4](https://mvnrepository.com/artifact/com.fasterxml.jackson.module/jackson-module-scala_2.11/2.4.4)\r\n* [com.fasterxml.jackson.module:jackson-module-scala_2.10:2.9.2](https://mvnrepository.com/artifact/com.fasterxml.jackson.module/jackson-module-scala_2.10/2.9.2)\r\n* [com.fasterxml.jackson.module:jackson-module-scala_2.11:2.9.2](https://mvnrepository.com/artifact/com.fasterxml.jackson.module/jackson-module-scala_2.11/2.9.2)\r\n\r\n## How was this patch tested?\r\nBy executing `mvn clean package`.","reactions":{"url":"https://api.github.com/repos/apache/incubator-livy/issues/64/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/apache/incubator-livy/issues/64/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":1355264259,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDEzNTUyNjQyNTk=","url":"https://api.github.com/repos/FasterXML/jackson-core/issues/events/1355264259","actor":{"login":"hubot","id":480938,"node_id":"MDQ6VXNlcjQ4MDkzOA==","avatar_url":"https://avatars.githubusercontent.com/u/480938?v=4","gravatar_id":"","url":"https://api.github.com/users/hubot","html_url":"https://github.com/hubot","followers_url":"https://api.github.com/users/hubot/followers","following_url":"https://api.github.com/users/hubot/following{/other_user}","gists_url":"https://api.github.com/users/hubot/gists{/gist_id}","starred_url":"https://api.github.com/users/hubot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hubot/subscriptions","organizations_url":"https://api.github.com/users/hubot/orgs","repos_url":"https://api.github.com/users/hubot/repos","events_url":"https://api.github.com/users/hubot/events{/privacy}","received_events_url":"https://api.github.com/users/hubot/received_events","type":"User","user_view_type":"public","site_admin":true},"event":"referenced","commit_id":"1f59e102b65c1c18775fe9d286d22b9228497807","commit_url":"https://api.github.com/repos/apache/incubator-livy/commits/1f59e102b65c1c18775fe9d286d22b9228497807","created_at":"2017-11-23T06:43:28Z","performed_via_github_app":null},{"actor":{"login":"cxzl25","id":3898450,"node_id":"MDQ6VXNlcjM4OTg0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/3898450?v=4","gravatar_id":"","url":"https://api.github.com/users/cxzl25","html_url":"https://github.com/cxzl25","followers_url":"https://api.github.com/users/cxzl25/followers","following_url":"https://api.github.com/users/cxzl25/following{/other_user}","gists_url":"https://api.github.com/users/cxzl25/gists{/gist_id}","starred_url":"https://api.github.com/users/cxzl25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cxzl25/subscriptions","organizations_url":"https://api.github.com/users/cxzl25/orgs","repos_url":"https://api.github.com/users/cxzl25/repos","events_url":"https://api.github.com/users/cxzl25/events{/privacy}","received_events_url":"https://api.github.com/users/cxzl25/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-05T15:46:45Z","updated_at":"2018-03-05T15:46:45Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/apache/spark/issues/20738","repository_url":"https://api.github.com/repos/apache/spark","labels_url":"https://api.github.com/repos/apache/spark/issues/20738/labels{/name}","comments_url":"https://api.github.com/repos/apache/spark/issues/20738/comments","events_url":"https://api.github.com/repos/apache/spark/issues/20738/events","html_url":"https://github.com/apache/spark/pull/20738","id":302350790,"node_id":"MDExOlB1bGxSZXF1ZXN0MTcyOTA0NTk5","number":20738,"title":"[SPARK-23603][SQL]When the length of the json is in a range,get_json_object will result in missing tail data","user":{"login":"cxzl25","id":3898450,"node_id":"MDQ6VXNlcjM4OTg0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/3898450?v=4","gravatar_id":"","url":"https://api.github.com/users/cxzl25","html_url":"https://github.com/cxzl25","followers_url":"https://api.github.com/users/cxzl25/followers","following_url":"https://api.github.com/users/cxzl25/following{/other_user}","gists_url":"https://api.github.com/users/cxzl25/gists{/gist_id}","starred_url":"https://api.github.com/users/cxzl25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cxzl25/subscriptions","organizations_url":"https://api.github.com/users/cxzl25/orgs","repos_url":"https://api.github.com/users/cxzl25/repos","events_url":"https://api.github.com/users/cxzl25/events{/privacy}","received_events_url":"https://api.github.com/users/cxzl25/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-03-05T15:46:45Z","updated_at":"2018-06-28T03:11:58Z","closed_at":"2018-06-28T03:11:58Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":17165658,"node_id":"MDEwOlJlcG9zaXRvcnkxNzE2NTY1OA==","name":"spark","full_name":"apache/spark","private":false,"owner":{"login":"apache","id":47359,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ3MzU5","avatar_url":"https://avatars.githubusercontent.com/u/47359?v=4","gravatar_id":"","url":"https://api.github.com/users/apache","html_url":"https://github.com/apache","followers_url":"https://api.github.com/users/apache/followers","following_url":"https://api.github.com/users/apache/following{/other_user}","gists_url":"https://api.github.com/users/apache/gists{/gist_id}","starred_url":"https://api.github.com/users/apache/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apache/subscriptions","organizations_url":"https://api.github.com/users/apache/orgs","repos_url":"https://api.github.com/users/apache/repos","events_url":"https://api.github.com/users/apache/events{/privacy}","received_events_url":"https://api.github.com/users/apache/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/apache/spark","description":"Apache Spark - A unified analytics engine for large-scale data processing","fork":false,"url":"https://api.github.com/repos/apache/spark","forks_url":"https://api.github.com/repos/apache/spark/forks","keys_url":"https://api.github.com/repos/apache/spark/keys{/key_id}","collaborators_url":"https://api.github.com/repos/apache/spark/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/apache/spark/teams","hooks_url":"https://api.github.com/repos/apache/spark/hooks","issue_events_url":"https://api.github.com/repos/apache/spark/issues/events{/number}","events_url":"https://api.github.com/repos/apache/spark/events","assignees_url":"https://api.github.com/repos/apache/spark/assignees{/user}","branches_url":"https://api.github.com/repos/apache/spark/branches{/branch}","tags_url":"https://api.github.com/repos/apache/spark/tags","blobs_url":"https://api.github.com/repos/apache/spark/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/apache/spark/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/apache/spark/git/refs{/sha}","trees_url":"https://api.github.com/repos/apache/spark/git/trees{/sha}","statuses_url":"https://api.github.com/repos/apache/spark/statuses/{sha}","languages_url":"https://api.github.com/repos/apache/spark/languages","stargazers_url":"https://api.github.com/repos/apache/spark/stargazers","contributors_url":"https://api.github.com/repos/apache/spark/contributors","subscribers_url":"https://api.github.com/repos/apache/spark/subscribers","subscription_url":"https://api.github.com/repos/apache/spark/subscription","commits_url":"https://api.github.com/repos/apache/spark/commits{/sha}","git_commits_url":"https://api.github.com/repos/apache/spark/git/commits{/sha}","comments_url":"https://api.github.com/repos/apache/spark/comments{/number}","issue_comment_url":"https://api.github.com/repos/apache/spark/issues/comments{/number}","contents_url":"https://api.github.com/repos/apache/spark/contents/{+path}","compare_url":"https://api.github.com/repos/apache/spark/compare/{base}...{head}","merges_url":"https://api.github.com/repos/apache/spark/merges","archive_url":"https://api.github.com/repos/apache/spark/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/apache/spark/downloads","issues_url":"https://api.github.com/repos/apache/spark/issues{/number}","pulls_url":"https://api.github.com/repos/apache/spark/pulls{/number}","milestones_url":"https://api.github.com/repos/apache/spark/milestones{/number}","notifications_url":"https://api.github.com/repos/apache/spark/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/apache/spark/labels{/name}","releases_url":"https://api.github.com/repos/apache/spark/releases{/id}","deployments_url":"https://api.github.com/repos/apache/spark/deployments","created_at":"2014-02-25T08:00:08Z","updated_at":"2025-11-08T18:16:09Z","pushed_at":"2025-11-08T15:54:37Z","git_url":"git://github.com/apache/spark.git","ssh_url":"git@github.com:apache/spark.git","clone_url":"https://github.com/apache/spark.git","svn_url":"https://github.com/apache/spark","homepage":"https://spark.apache.org/","size":522422,"stargazers_count":42263,"watchers_count":42263,"language":"Scala","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":false,"forks_count":28926,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":201,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["big-data","java","jdbc","python","r","scala","spark","sql"],"visibility":"public","forks":28926,"open_issues":201,"watchers":42263,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/apache/spark/pulls/20738","html_url":"https://github.com/apache/spark/pull/20738","diff_url":"https://github.com/apache/spark/pull/20738.diff","patch_url":"https://github.com/apache/spark/pull/20738.patch","merged_at":null},"body":"## What changes were proposed in this pull request?\r\n\r\nBump jackson from 2.6.7&2.6.7.1 to 2.7.7\r\nJackson(>=2.7.7) fixes the possibility of missing tail data when the length of the value is in a range\r\n[https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.7.7](https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.7.7)\r\n[https://github.com/FasterXML/jackson-core/issues/30](https://github.com/FasterXML/jackson-core/issues/307)\r\n\r\nspark-shell:\r\n```\r\nval value = \"x\" * 3000\r\nval json = s\"\"\"{\"big\": \"$value\"}\"\"\"\r\nspark.sql(\"select length(get_json_object(\\'\"+json+\"\\','$.big'))\" ).collect\r\nres0: Array[org.apache.spark.sql.Row] = Array([2991])\r\n```\r\nexpect result : 3000 \r\nactual  result : 2991\r\n \r\n## How was this patch tested?\r\norg.apache.spark.sql.catalyst.expressions.JsonExpressionsSuite\r\ntest(\"some big value\")\r\n","reactions":{"url":"https://api.github.com/repos/apache/spark/issues/20738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/apache/spark/issues/20738/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"cxzl25","id":3898450,"node_id":"MDQ6VXNlcjM4OTg0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/3898450?v=4","gravatar_id":"","url":"https://api.github.com/users/cxzl25","html_url":"https://github.com/cxzl25","followers_url":"https://api.github.com/users/cxzl25/followers","following_url":"https://api.github.com/users/cxzl25/following{/other_user}","gists_url":"https://api.github.com/users/cxzl25/gists{/gist_id}","starred_url":"https://api.github.com/users/cxzl25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cxzl25/subscriptions","organizations_url":"https://api.github.com/users/cxzl25/orgs","repos_url":"https://api.github.com/users/cxzl25/repos","events_url":"https://api.github.com/users/cxzl25/events{/privacy}","received_events_url":"https://api.github.com/users/cxzl25/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-05T15:48:17Z","updated_at":"2018-03-05T15:48:17Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/apache/spark/issues/20739","repository_url":"https://api.github.com/repos/apache/spark","labels_url":"https://api.github.com/repos/apache/spark/issues/20739/labels{/name}","comments_url":"https://api.github.com/repos/apache/spark/issues/20739/comments","events_url":"https://api.github.com/repos/apache/spark/issues/20739/events","html_url":"https://github.com/apache/spark/pull/20739","id":302351443,"node_id":"MDExOlB1bGxSZXF1ZXN0MTcyOTA1MDc5","number":20739,"title":"[SPARK-23603][SQL]When the length of the json is in a range,get_json_object will result in missing tail data","user":{"login":"cxzl25","id":3898450,"node_id":"MDQ6VXNlcjM4OTg0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/3898450?v=4","gravatar_id":"","url":"https://api.github.com/users/cxzl25","html_url":"https://github.com/cxzl25","followers_url":"https://api.github.com/users/cxzl25/followers","following_url":"https://api.github.com/users/cxzl25/following{/other_user}","gists_url":"https://api.github.com/users/cxzl25/gists{/gist_id}","starred_url":"https://api.github.com/users/cxzl25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cxzl25/subscriptions","organizations_url":"https://api.github.com/users/cxzl25/orgs","repos_url":"https://api.github.com/users/cxzl25/repos","events_url":"https://api.github.com/users/cxzl25/events{/privacy}","received_events_url":"https://api.github.com/users/cxzl25/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-03-05T15:48:17Z","updated_at":"2019-05-10T09:14:33Z","closed_at":"2018-06-28T03:12:27Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":17165658,"node_id":"MDEwOlJlcG9zaXRvcnkxNzE2NTY1OA==","name":"spark","full_name":"apache/spark","private":false,"owner":{"login":"apache","id":47359,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ3MzU5","avatar_url":"https://avatars.githubusercontent.com/u/47359?v=4","gravatar_id":"","url":"https://api.github.com/users/apache","html_url":"https://github.com/apache","followers_url":"https://api.github.com/users/apache/followers","following_url":"https://api.github.com/users/apache/following{/other_user}","gists_url":"https://api.github.com/users/apache/gists{/gist_id}","starred_url":"https://api.github.com/users/apache/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apache/subscriptions","organizations_url":"https://api.github.com/users/apache/orgs","repos_url":"https://api.github.com/users/apache/repos","events_url":"https://api.github.com/users/apache/events{/privacy}","received_events_url":"https://api.github.com/users/apache/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/apache/spark","description":"Apache Spark - A unified analytics engine for large-scale data processing","fork":false,"url":"https://api.github.com/repos/apache/spark","forks_url":"https://api.github.com/repos/apache/spark/forks","keys_url":"https://api.github.com/repos/apache/spark/keys{/key_id}","collaborators_url":"https://api.github.com/repos/apache/spark/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/apache/spark/teams","hooks_url":"https://api.github.com/repos/apache/spark/hooks","issue_events_url":"https://api.github.com/repos/apache/spark/issues/events{/number}","events_url":"https://api.github.com/repos/apache/spark/events","assignees_url":"https://api.github.com/repos/apache/spark/assignees{/user}","branches_url":"https://api.github.com/repos/apache/spark/branches{/branch}","tags_url":"https://api.github.com/repos/apache/spark/tags","blobs_url":"https://api.github.com/repos/apache/spark/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/apache/spark/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/apache/spark/git/refs{/sha}","trees_url":"https://api.github.com/repos/apache/spark/git/trees{/sha}","statuses_url":"https://api.github.com/repos/apache/spark/statuses/{sha}","languages_url":"https://api.github.com/repos/apache/spark/languages","stargazers_url":"https://api.github.com/repos/apache/spark/stargazers","contributors_url":"https://api.github.com/repos/apache/spark/contributors","subscribers_url":"https://api.github.com/repos/apache/spark/subscribers","subscription_url":"https://api.github.com/repos/apache/spark/subscription","commits_url":"https://api.github.com/repos/apache/spark/commits{/sha}","git_commits_url":"https://api.github.com/repos/apache/spark/git/commits{/sha}","comments_url":"https://api.github.com/repos/apache/spark/comments{/number}","issue_comment_url":"https://api.github.com/repos/apache/spark/issues/comments{/number}","contents_url":"https://api.github.com/repos/apache/spark/contents/{+path}","compare_url":"https://api.github.com/repos/apache/spark/compare/{base}...{head}","merges_url":"https://api.github.com/repos/apache/spark/merges","archive_url":"https://api.github.com/repos/apache/spark/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/apache/spark/downloads","issues_url":"https://api.github.com/repos/apache/spark/issues{/number}","pulls_url":"https://api.github.com/repos/apache/spark/pulls{/number}","milestones_url":"https://api.github.com/repos/apache/spark/milestones{/number}","notifications_url":"https://api.github.com/repos/apache/spark/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/apache/spark/labels{/name}","releases_url":"https://api.github.com/repos/apache/spark/releases{/id}","deployments_url":"https://api.github.com/repos/apache/spark/deployments","created_at":"2014-02-25T08:00:08Z","updated_at":"2025-11-08T18:16:09Z","pushed_at":"2025-11-08T15:54:37Z","git_url":"git://github.com/apache/spark.git","ssh_url":"git@github.com:apache/spark.git","clone_url":"https://github.com/apache/spark.git","svn_url":"https://github.com/apache/spark","homepage":"https://spark.apache.org/","size":522422,"stargazers_count":42263,"watchers_count":42263,"language":"Scala","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":false,"forks_count":28926,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":201,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["big-data","java","jdbc","python","r","scala","spark","sql"],"visibility":"public","forks":28926,"open_issues":201,"watchers":42263,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/apache/spark/pulls/20739","html_url":"https://github.com/apache/spark/pull/20739","diff_url":"https://github.com/apache/spark/pull/20739.diff","patch_url":"https://github.com/apache/spark/pull/20739.patch","merged_at":null},"body":"## What changes were proposed in this pull request?\r\nReplace writeRaw(char[] text, int offset, int len) with writeRaw(String text)\r\nAlthough using writeRaw(String text) will lose some performance\r\n\r\nspark-shell:\r\n```\r\nval value = \"x\" * 3000\r\nval json = s\"\"\"{\"big\": \"$value\"}\"\"\"\r\nspark.sql(\"select length(get_json_object(\\'\"+json+\"\\','$.big'))\" ).collect\r\nres0: Array[org.apache.spark.sql.Row] = Array([2991])\r\n```\r\nexpect result : 3000 \r\nactual  result : 2991\r\n\r\n> public abstract void writeRaw(char[] text,int offset,int len) throws IOException\r\nMethod that will force generator to copy input text verbatim with no modifications (including that no escaping is done and no separators are added even if context [array, object] would otherwise require such). If such separators are desired, use writeRawValue(String) instead.\r\n\r\n> public abstract void writeRaw(String text) throws IOException\r\nMethod that will force generator to copy input text verbatim with no modifications (including that no escaping is done and no separators are added even if context [array, object] would otherwise require such). If such separators are desired, use writeRawValue(String) instead.\r\n\r\nJackson(>=2.7.7) fixes the possibility of missing tail data when the length of the value is in a range\r\n[https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.7.7](https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.7.7)\r\n[https://github.com/FasterXML/jackson-core/issues/30](https://github.com/FasterXML/jackson-core/issues/307)\r\n\r\n\r\n## How was this patch tested?\r\norg.apache.spark.sql.catalyst.expressions.JsonExpressionsSuite\r\ntest(\"some big value\")\r\n","reactions":{"url":"https://api.github.com/repos/apache/spark/issues/20739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/apache/spark/issues/20739/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"cxzl25","id":3898450,"node_id":"MDQ6VXNlcjM4OTg0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/3898450?v=4","gravatar_id":"","url":"https://api.github.com/users/cxzl25","html_url":"https://github.com/cxzl25","followers_url":"https://api.github.com/users/cxzl25/followers","following_url":"https://api.github.com/users/cxzl25/following{/other_user}","gists_url":"https://api.github.com/users/cxzl25/gists{/gist_id}","starred_url":"https://api.github.com/users/cxzl25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cxzl25/subscriptions","organizations_url":"https://api.github.com/users/cxzl25/orgs","repos_url":"https://api.github.com/users/cxzl25/repos","events_url":"https://api.github.com/users/cxzl25/events{/privacy}","received_events_url":"https://api.github.com/users/cxzl25/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-22T07:28:59Z","updated_at":"2018-06-22T07:28:59Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/apache/spark/issues/21596","repository_url":"https://api.github.com/repos/apache/spark","labels_url":"https://api.github.com/repos/apache/spark/issues/21596/labels{/name}","comments_url":"https://api.github.com/repos/apache/spark/issues/21596/comments","events_url":"https://api.github.com/repos/apache/spark/issues/21596/events","html_url":"https://github.com/apache/spark/pull/21596","id":333980181,"node_id":"MDExOlB1bGxSZXF1ZXN0MTk2MDYzNDg0","number":21596,"title":"[SPARK-24601] Update Jackson to 2.9.6","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":116,"created_at":"2018-06-20T08:46:22Z","updated_at":"2018-11-05T21:19:59Z","closed_at":"2018-10-05T08:44:31Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":17165658,"node_id":"MDEwOlJlcG9zaXRvcnkxNzE2NTY1OA==","name":"spark","full_name":"apache/spark","private":false,"owner":{"login":"apache","id":47359,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ3MzU5","avatar_url":"https://avatars.githubusercontent.com/u/47359?v=4","gravatar_id":"","url":"https://api.github.com/users/apache","html_url":"https://github.com/apache","followers_url":"https://api.github.com/users/apache/followers","following_url":"https://api.github.com/users/apache/following{/other_user}","gists_url":"https://api.github.com/users/apache/gists{/gist_id}","starred_url":"https://api.github.com/users/apache/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apache/subscriptions","organizations_url":"https://api.github.com/users/apache/orgs","repos_url":"https://api.github.com/users/apache/repos","events_url":"https://api.github.com/users/apache/events{/privacy}","received_events_url":"https://api.github.com/users/apache/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/apache/spark","description":"Apache Spark - A unified analytics engine for large-scale data processing","fork":false,"url":"https://api.github.com/repos/apache/spark","forks_url":"https://api.github.com/repos/apache/spark/forks","keys_url":"https://api.github.com/repos/apache/spark/keys{/key_id}","collaborators_url":"https://api.github.com/repos/apache/spark/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/apache/spark/teams","hooks_url":"https://api.github.com/repos/apache/spark/hooks","issue_events_url":"https://api.github.com/repos/apache/spark/issues/events{/number}","events_url":"https://api.github.com/repos/apache/spark/events","assignees_url":"https://api.github.com/repos/apache/spark/assignees{/user}","branches_url":"https://api.github.com/repos/apache/spark/branches{/branch}","tags_url":"https://api.github.com/repos/apache/spark/tags","blobs_url":"https://api.github.com/repos/apache/spark/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/apache/spark/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/apache/spark/git/refs{/sha}","trees_url":"https://api.github.com/repos/apache/spark/git/trees{/sha}","statuses_url":"https://api.github.com/repos/apache/spark/statuses/{sha}","languages_url":"https://api.github.com/repos/apache/spark/languages","stargazers_url":"https://api.github.com/repos/apache/spark/stargazers","contributors_url":"https://api.github.com/repos/apache/spark/contributors","subscribers_url":"https://api.github.com/repos/apache/spark/subscribers","subscription_url":"https://api.github.com/repos/apache/spark/subscription","commits_url":"https://api.github.com/repos/apache/spark/commits{/sha}","git_commits_url":"https://api.github.com/repos/apache/spark/git/commits{/sha}","comments_url":"https://api.github.com/repos/apache/spark/comments{/number}","issue_comment_url":"https://api.github.com/repos/apache/spark/issues/comments{/number}","contents_url":"https://api.github.com/repos/apache/spark/contents/{+path}","compare_url":"https://api.github.com/repos/apache/spark/compare/{base}...{head}","merges_url":"https://api.github.com/repos/apache/spark/merges","archive_url":"https://api.github.com/repos/apache/spark/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/apache/spark/downloads","issues_url":"https://api.github.com/repos/apache/spark/issues{/number}","pulls_url":"https://api.github.com/repos/apache/spark/pulls{/number}","milestones_url":"https://api.github.com/repos/apache/spark/milestones{/number}","notifications_url":"https://api.github.com/repos/apache/spark/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/apache/spark/labels{/name}","releases_url":"https://api.github.com/repos/apache/spark/releases{/id}","deployments_url":"https://api.github.com/repos/apache/spark/deployments","created_at":"2014-02-25T08:00:08Z","updated_at":"2025-11-08T18:16:09Z","pushed_at":"2025-11-08T15:54:37Z","git_url":"git://github.com/apache/spark.git","ssh_url":"git@github.com:apache/spark.git","clone_url":"https://github.com/apache/spark.git","svn_url":"https://github.com/apache/spark","homepage":"https://spark.apache.org/","size":522422,"stargazers_count":42263,"watchers_count":42263,"language":"Scala","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":false,"forks_count":28926,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":201,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["big-data","java","jdbc","python","r","scala","spark","sql"],"visibility":"public","forks":28926,"open_issues":201,"watchers":42263,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/apache/spark/pulls/21596","html_url":"https://github.com/apache/spark/pull/21596","diff_url":"https://github.com/apache/spark/pull/21596.diff","patch_url":"https://github.com/apache/spark/pull/21596.patch","merged_at":null},"body":"Hi all,\r\n\r\nJackson is incompatible with upstream versions, therefore bump the Jackson version to a more recent one. I bumped into some issues with Azure CosmosDB that is using a more recent version of Jackson. This can be fixed by adding exclusions and then it works without any issues. So no breaking changes in the API's.\r\n\r\nI would also consider bumping the version of Jackson in Spark. I would suggest to keep up to date with the dependencies, since in the future this issue will pop up more frequently.\r\n\r\nJira: https://issues.apache.org/jira/projects/SPARK/issues/SPARK-24601\r\n\r\n## What changes were proposed in this pull request?\r\n\r\nBump Jackson to 2.9.6\r\n\r\n## How was this patch tested?\r\n\r\nCompiled and tested it locally to see if anything broke.\r\n\r\nPlease review http://spark.apache.org/contributing.html before opening a pull request.\r\n","reactions":{"url":"https://api.github.com/repos/apache/spark/issues/21596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/apache/spark/issues/21596/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]