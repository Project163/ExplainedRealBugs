{"url":"https://api.github.com/repos/FasterXML/jackson-core/issues/1274","repository_url":"https://api.github.com/repos/FasterXML/jackson-core","labels_url":"https://api.github.com/repos/FasterXML/jackson-core/issues/1274/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-core/issues/1274/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-core/issues/1274/events","html_url":"https://github.com/FasterXML/jackson-core/issues/1274","id":2263716622,"node_id":"I_kwDOAC5a086G7ZMO","number":1274,"title":"`NUL`-corrupted keys, values on JSON serialization","user":{"login":"jaredstehler","id":2022218,"node_id":"MDQ6VXNlcjIwMjIyMTg=","avatar_url":"https://avatars.githubusercontent.com/u/2022218?v=4","gravatar_id":"","url":"https://api.github.com/users/jaredstehler","html_url":"https://github.com/jaredstehler","followers_url":"https://api.github.com/users/jaredstehler/followers","following_url":"https://api.github.com/users/jaredstehler/following{/other_user}","gists_url":"https://api.github.com/users/jaredstehler/gists{/gist_id}","starred_url":"https://api.github.com/users/jaredstehler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaredstehler/subscriptions","organizations_url":"https://api.github.com/users/jaredstehler/orgs","repos_url":"https://api.github.com/users/jaredstehler/repos","events_url":"https://api.github.com/users/jaredstehler/events{/privacy}","received_events_url":"https://api.github.com/users/jaredstehler/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-core/milestones/79","html_url":"https://github.com/FasterXML/jackson-core/milestone/79","labels_url":"https://api.github.com/repos/FasterXML/jackson-core/milestones/79/labels","id":10834123,"node_id":"MI_kwDOAC5a084ApVDL","number":79,"title":"2.18.0","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":10,"state":"open","created_at":"2024-04-18T00:40:30Z","updated_at":"2024-12-04T18:21:20Z","due_on":null,"closed_at":null},"comments":6,"created_at":"2024-04-25T14:17:00Z","updated_at":"2024-06-10T01:14:39Z","closed_at":"2024-06-10T01:13:08Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"First posted in discussions: https://github.com/FasterXML/jackson/discussions/215\r\n\r\nJackson version: `2.12.6`\r\n\r\nWe have observed sporadic instances of serialized JSON messages containing corrupted keys and/or values (correct length, but some amount of string suffix is replaced with `NUL` (`0`) bytes).\r\n\r\nFrom our metrics, it seemed to recur every 2-4 days on average. We have swapped in a fork of `jackson-core` with fields marked as `volatile` in `SerializedString` (https://github.com/HubSpot/jackson-core/commit/4d3bd2db409468e275ca4c7c471b523c5d1c18d9) and have not seen the issue in > 10 days now.\r\n\r\nEven though we saw this once or twice a while back on JDK 17, it seems to have been exacerbated with JDK 21. We are also running on ARM64 instances, which could have some behavior contributing here.\r\n\r\nI have not been able to reproduce this in isolation, unfortunately. Happy to help provide any additional information. We are working on an upgrade to jackson `2.18` but I see those fields are unchanged in that branch as well.","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-core/issues/1274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-core/issues/1274/timeline","performed_via_github_app":null,"state_reason":"completed"}