diff --git a/release-notes/VERSION b/release-notes/VERSION
index 14043185..5a83c274 100644
--- a/release-notes/VERSION
+++ b/release-notes/VERSION
@@ -19,4 +19,5 @@ JSON library.
 
 #402: Remove dataformat-auto-detection functionality
 #408: Rename `JsonFactory` as `TokenStreamFactory`, split JSON-specific into `JsonFactory`
-
+#410: Add `ObjectWriteContext` abstraction for databind to pass config, state to
+  `JsonGenerator` on construction
diff --git a/src/main/java/com/fasterxml/jackson/core/FormatFeature.java b/src/main/java/com/fasterxml/jackson/core/FormatFeature.java
index e775e4ce..dda9104d 100644
--- a/src/main/java/com/fasterxml/jackson/core/FormatFeature.java
+++ b/src/main/java/com/fasterxml/jackson/core/FormatFeature.java
@@ -5,13 +5,6 @@ package com.fasterxml.jackson.core;
  * Interface used since Java Enums can not extend classes or other Enums, but
  * they can implement interfaces; and as such we may be able to use limited
  * amount of generic functionality.
- *<p>
- * Note that this type is only implemented by non-JSON formats:
- * types {@link JsonParser.Feature} and {@link JsonGenerator.Feature} do NOT
- * implement it. This is to make it easier to avoid ambiguity with method
- * calls.
- * 
- * @since 2.6 (to be fully used in 2.7 and beyond)
  */
 public interface FormatFeature
 {
diff --git a/src/main/java/com/fasterxml/jackson/core/JsonFactory.java b/src/main/java/com/fasterxml/jackson/core/JsonFactory.java
index f99c068a..43810220 100644
--- a/src/main/java/com/fasterxml/jackson/core/JsonFactory.java
+++ b/src/main/java/com/fasterxml/jackson/core/JsonFactory.java
@@ -37,7 +37,7 @@ public class JsonFactory
      */
     public final static String FORMAT_NAME_JSON = "JSON";
 
-    private final static SerializableString DEFAULT_ROOT_VALUE_SEPARATOR = DefaultPrettyPrinter.DEFAULT_ROOT_VALUE_SEPARATOR;
+    public final static SerializableString DEFAULT_ROOT_VALUE_SEPARATOR = DefaultPrettyPrinter.DEFAULT_ROOT_VALUE_SEPARATOR;
 
     /*
     /**********************************************************
@@ -109,12 +109,8 @@ public class JsonFactory
         _inputDecorator = src._inputDecorator;
         _outputDecorator = src._outputDecorator;
         _rootValueSeparator = src._rootValueSeparator;
-        
-        // 27-Apr-2013, tatu: How about symbol table; should we try to
-        //   reuse shared symbol tables? Could be more efficient that way;
-        //   although can slightly add to concurrency overhead.
     }
-    
+
     /**
      * Method for constructing a new {@link JsonFactory} that has
      * the same settings as this instance, but is otherwise
@@ -161,7 +157,7 @@ public class JsonFactory
 
     @Override
     public boolean canParseAsync() {
-        // 31-May-2017, tatu: Jackson 2.9 does support async parsing for JSON
+        // Jackson 2.9 and later do support async parsing for JSON
         return true;
     }
 
@@ -270,7 +266,6 @@ public class JsonFactory
 
     @Override
     protected JsonParser _createParser(InputStream in, IOContext ctxt) throws IOException {
-        // As per [JACKSON-259], may want to fully disable canonicalization:
         return new ByteSourceJsonBootstrapper(ctxt, in).constructParser(_parserFeatures,
                 _objectCodec, _byteSymbolCanonicalizer, _rootCharSymbols, _factoryFeatures);
     }
@@ -314,31 +309,33 @@ public class JsonFactory
      */
 
     @Override
-    protected JsonGenerator _createGenerator(Writer out, IOContext ctxt) throws IOException
+    protected JsonGenerator _createGenerator(ObjectWriteContext writeCtxt,
+            Writer out, IOContext ctxt) throws IOException
     {
-        WriterBasedJsonGenerator gen = new WriterBasedJsonGenerator(ctxt,
-                _generatorFeatures, _objectCodec, out);
-        if (_characterEscapes != null) {
-            gen.setCharacterEscapes(_characterEscapes);
-        }
-        SerializableString rootSep = _rootValueSeparator;
-        if (rootSep != DEFAULT_ROOT_VALUE_SEPARATOR) {
-            gen.setRootValueSeparator(rootSep);
+        SerializableString rootSep = writeCtxt.getRootValueSeparator(_rootValueSeparator);
+        CharacterEscapes charEsc = writeCtxt.getCharacterEscapes();
+        if (charEsc == null) {
+            charEsc = _characterEscapes;
         }
-        return gen;
+        // NOTE: JSON generator does not use schema; has no format-specific features
+        return new WriterBasedJsonGenerator(ctxt,
+                writeCtxt.getGeneratorFeatures(_generatorFeatures), _objectCodec, out,
+                rootSep, charEsc, writeCtxt.getPrettyPrinter());
     }
 
     @Override
-    protected JsonGenerator _createUTF8Generator(OutputStream out, IOContext ctxt) throws IOException {
-        UTF8JsonGenerator gen = new UTF8JsonGenerator(ctxt,
-                _generatorFeatures, _objectCodec, out);
-        if (_characterEscapes != null) {
-            gen.setCharacterEscapes(_characterEscapes);
-        }
-        SerializableString rootSep = _rootValueSeparator;
-        if (rootSep != DEFAULT_ROOT_VALUE_SEPARATOR) {
-            gen.setRootValueSeparator(rootSep);
+    protected JsonGenerator _createUTF8Generator(ObjectWriteContext writeCtxt,
+            OutputStream out, IOContext ctxt) throws IOException
+    {
+        SerializableString rootSep = writeCtxt.getRootValueSeparator(_rootValueSeparator);
+        CharacterEscapes charEsc = writeCtxt.getCharacterEscapes();
+        if (charEsc == null) {
+            charEsc = _characterEscapes;
         }
-        return gen;
+        // NOTE: JSON generator does not use schema; has no format-specific features
+
+        return new UTF8JsonGenerator(ctxt,
+                writeCtxt.getGeneratorFeatures(_generatorFeatures), _objectCodec, out,
+                rootSep, charEsc, writeCtxt.getPrettyPrinter());
     }
 }
diff --git a/src/main/java/com/fasterxml/jackson/core/JsonGenerator.java b/src/main/java/com/fasterxml/jackson/core/JsonGenerator.java
index 673b087e..2588f7a0 100644
--- a/src/main/java/com/fasterxml/jackson/core/JsonGenerator.java
+++ b/src/main/java/com/fasterxml/jackson/core/JsonGenerator.java
@@ -126,8 +126,6 @@ public abstract class JsonGenerator
          *<p>
          * Feature is disabled by default, so default output mode is used; this generally
          * depends on how {@link BigDecimal} has been created.
-         * 
-         * @since 2.3
          */
         WRITE_BIGDECIMAL_AS_PLAIN(false),
         
@@ -167,8 +165,6 @@ public abstract class JsonGenerator
          * mode.
          *<p>
          * Feature is disabled by default.
-         *
-         * @since Xxx
          */
 //        ESCAPE_UTF8_SURROGATES(false),
         
@@ -186,8 +182,6 @@ public abstract class JsonGenerator
          * due to having to store and check additional information.
          *<p>
          * Feature is disabled by default.
-         * 
-         * @since 2.3
          */
         STRICT_DUPLICATE_DETECTION(false),
         
@@ -208,8 +202,6 @@ public abstract class JsonGenerator
          * Feature is disabled by default, meaning that if the underlying data format
          * requires knowledge of all properties to output, attempts to write an unknown
          * property will result in a {@link JsonProcessingException}
-         *
-         * @since 2.5
          */
         IGNORE_UNKNOWN(false),
         ;
@@ -239,27 +231,11 @@ public abstract class JsonGenerator
 
         public boolean enabledByDefault() { return _defaultState; }
 
-        /**
-         * @since 2.3
-         */
         public boolean enabledIn(int flags) { return (flags & _mask) != 0; }
 
         public int getMask() { return _mask; }
     }
 
-    /*
-    /**********************************************************
-    /* Configuration
-    /**********************************************************
-     */
-
-    /**
-     * Object that handles pretty-printing (usually additional
-     * white space to make results more human-readable) during
-     * output. If null, no pretty-printing is done.
-     */
-    protected PrettyPrinter _cfgPrettyPrinter;
-
     /*
     /**********************************************************
     /* Construction, initialization
@@ -335,74 +311,18 @@ public abstract class JsonGenerator
      * 
      * @return Bit mask that defines current states of all standard {@link JsonGenerator.Feature}s.
      */
-    public abstract int getFeatureMask();
-
-    /**
-     * Bulk set method for (re)setting states of all standard {@link Feature}s
-     * 
-     * @param values Bitmask that defines which {@link Feature}s are enabled
-     *    and which disabled
-     *
-     * @return This parser object, to allow chaining of calls
-     *
-     * @deprecated Since 2.7, use {@link #overrideStdFeatures(int, int)} instead -- remove from 2.9
-     */
-    @Deprecated
-    public abstract JsonGenerator setFeatureMask(int values);
-
-    /**
-     * Bulk set method for (re)setting states of features specified by <code>mask</code>.
-     * Functionally equivalent to
-     *<code>
-     *    int oldState = getFeatureMask();
-     *    int newState = (oldState &amp; ~mask) | (values &amp; mask);
-     *    setFeatureMask(newState);
-     *</code>
-     * but preferred as this lets caller more efficiently specify actual changes made.
-     * 
-     * @param values Bit mask of set/clear state for features to change
-     * @param mask Bit mask of features to change
-     */
-    public JsonGenerator overrideStdFeatures(int values, int mask) {
-        int oldState = getFeatureMask();
-        int newState = (oldState & ~mask) | (values & mask);
-        return setFeatureMask(newState);
-    }
+    public abstract int getGeneratorFeatures();
 
     /**
      * Bulk access method for getting state of all {@link FormatFeature}s, format-specific
      * on/off configuration settings.
      * 
      * @return Bit mask that defines current states of all standard {@link FormatFeature}s.
-     * 
-     * @since 2.6
      */
     public int getFormatFeatures() {
         return 0;
     }
-    
-    /**
-     * Bulk set method for (re)setting states of {@link FormatFeature}s,
-     * by specifying values (set / clear) along with a mask, to determine
-     * which features to change, if any.
-     *<p>
-     * Default implementation will simply throw an exception to indicate that
-     * the generator implementation does not support any {@link FormatFeature}s.
-     * 
-     * @param values Bit mask of set/clear state for features to change
-     * @param mask Bit mask of features to change
-     * 
-     * @since 2.6
-     */
-    public JsonGenerator overrideFormatFeatures(int values, int mask) {
-        throw new IllegalArgumentException("No FormatFeatures defined for generator of type "+getClass().getName());
-        /*
-        int oldState = getFeatureMask();
-        int newState = (oldState & ~mask) | (values & mask);
-        return setFeatureMask(newState);
-        */
-    }
-    
+
     /*
     /**********************************************************
     /* Public API, Schema configuration
@@ -432,8 +352,6 @@ public abstract class JsonGenerator
     /**
      * Method for accessing Schema that this parser uses, if any.
      * Default implementation returns null.
-     *
-     * @since 2.1
      */
     public FormatSchema getSchema() { return null; }
 
@@ -455,18 +373,15 @@ public abstract class JsonGenerator
      * @return Generator itself (this), to allow chaining
      */
     public JsonGenerator setPrettyPrinter(PrettyPrinter pp) {
-        _cfgPrettyPrinter = pp;
-        return this;
+        return _reportUnsupportedOperation();
     }
 
     /**
      * Accessor for checking whether this generator has a configured
      * {@link PrettyPrinter}; returns it if so, null if none configured.
-     * 
-     * @since 2.1
      */
     public PrettyPrinter getPrettyPrinter() {
-        return _cfgPrettyPrinter;
+        return null;
     }
     
     /**
@@ -516,11 +431,13 @@ public abstract class JsonGenerator
     public int getHighestEscapedChar() { return 0; }
 
     /**
-     * Method for accessing custom escapes factory uses for {@link JsonGenerator}s
+     * Method for accessing custom escapes generator uses for {@link JsonGenerator}s
      * it creates.
      */
     public CharacterEscapes getCharacterEscapes() { return null; }
 
+    // 04-Oct-2017, tatu: Would like to remove this method, but alas JSONP-support
+    //    does require it...
     /**
      * Method for defining custom escapes factory uses for {@link JsonGenerator}s
      * it creates.
@@ -529,27 +446,12 @@ public abstract class JsonGenerator
      */
     public JsonGenerator setCharacterEscapes(CharacterEscapes esc) { return this; }
 
-    /**
-     * Method that allows overriding String used for separating root-level
-     * JSON values (default is single space character)
-     *<p>
-     * Default implementation throws {@link UnsupportedOperationException}.
-     * 
-     * @param sep Separator to use, if any; null means that no separator is
-     *   automatically added
-     * 
-     * @since 2.1
-     */
-    public JsonGenerator setRootValueSeparator(SerializableString sep) {
-        throw new UnsupportedOperationException();
-    }
-
     /*
     /**********************************************************
     /* Public API, output state access
     /**********************************************************
      */
-    
+
     /**
      * Method that can be used to get access to object that is used
      * as target for generated output; this is usually either
@@ -1951,19 +1853,16 @@ public abstract class JsonGenerator
      * Note that sub-classes may override this method to add more detail
      * or use a {@link JsonGenerationException} sub-class.
      */
-    protected void _reportError(String msg) throws JsonGenerationException {
+    protected <T> T  _reportError(String msg) throws JsonGenerationException {
         throw new JsonGenerationException(msg, this);
     }
 
-    protected final void _throwInternal() { VersionUtil.throwInternal(); }
+    protected void _throwInternal() { VersionUtil.throwInternal(); }
 
-    protected void _reportUnsupportedOperation() {
+    protected <T> T _reportUnsupportedOperation() {
         throw new UnsupportedOperationException("Operation not supported by generator of type "+getClass().getName());
     }
 
-    /**
-     * @since 2.8
-     */
     protected final void _verifyOffsets(int arrayLength, int offset, int length)
     {
         if ((offset < 0) || (offset + length) > arrayLength) {
diff --git a/src/main/java/com/fasterxml/jackson/core/ObjectCodec.java b/src/main/java/com/fasterxml/jackson/core/ObjectCodec.java
index c6def888..ad2c5a90 100644
--- a/src/main/java/com/fasterxml/jackson/core/ObjectCodec.java
+++ b/src/main/java/com/fasterxml/jackson/core/ObjectCodec.java
@@ -21,6 +21,7 @@ import com.fasterxml.jackson.core.type.TypeReference;
  * defined in the "jackson-databind".
  */
 public abstract class ObjectCodec
+//@Deprecated // since 3.0 -- or possibly removed in 3.0?
     extends TreeCodec
     implements Versioned
 {
diff --git a/src/main/java/com/fasterxml/jackson/core/ObjectReadContext.java b/src/main/java/com/fasterxml/jackson/core/ObjectReadContext.java
new file mode 100644
index 00000000..256cc8c8
--- /dev/null
+++ b/src/main/java/com/fasterxml/jackson/core/ObjectReadContext.java
@@ -0,0 +1,13 @@
+package com.fasterxml.jackson.core;
+
+/**
+ * Defines API for accessing configuration and state exposed by
+ * higher level databind
+ * functionality during read (token stream  to Object deserialization) process.
+ * Access is mostly needed during construction of
+ * {@link JsonParser} instances by {@link TokenStreamFactory}.
+ *
+ * @since 3.0
+ */
+public interface ObjectReadContext {
+}
diff --git a/src/main/java/com/fasterxml/jackson/core/ObjectWriteContext.java b/src/main/java/com/fasterxml/jackson/core/ObjectWriteContext.java
new file mode 100644
index 00000000..0af0e462
--- /dev/null
+++ b/src/main/java/com/fasterxml/jackson/core/ObjectWriteContext.java
@@ -0,0 +1,59 @@
+package com.fasterxml.jackson.core;
+
+import com.fasterxml.jackson.core.io.CharacterEscapes;
+
+/**
+ * Defines API for accessing configuration and state exposed by
+ * higher level databind
+ * functionality during write (Object to token stream serialization) process.
+ * Access is mostly needed during construction of
+ * {@link JsonGenerator} instances by {@link TokenStreamFactory}.
+ *
+ * @since 3.0
+ */
+public interface ObjectWriteContext
+{
+    public static ObjectWriteContext empty() {
+        return Base.EMPTY_CONTEXT;
+    }
+
+    public FormatSchema getSchema();
+
+    public CharacterEscapes getCharacterEscapes();
+    public PrettyPrinter getPrettyPrinter();
+    public SerializableString getRootValueSeparator(SerializableString defaultSeparator);
+
+    public int getGeneratorFeatures(int defaults);
+    public int getFormatWriteFeatures(int defaults);
+
+    /**
+     * Default no-op implementation.
+     */
+    public static class Base implements ObjectWriteContext {
+        protected static ObjectWriteContext EMPTY_CONTEXT = new Base();
+
+        @Override
+        public FormatSchema getSchema() { return null; }
+
+        @Override
+        public CharacterEscapes getCharacterEscapes() { return null; }
+
+        @Override
+        public PrettyPrinter getPrettyPrinter() { return null; }
+
+        @Override
+        public SerializableString getRootValueSeparator(SerializableString defaultSeparator) {
+            return defaultSeparator;
+        }
+
+        @Override
+        public int getGeneratorFeatures(int defaults) {
+            return defaults;
+        }
+
+        @Override
+        public int getFormatWriteFeatures(int defaults) {
+            return defaults;
+        }
+    }
+}
diff --git a/src/main/java/com/fasterxml/jackson/core/TokenStreamFactory.java b/src/main/java/com/fasterxml/jackson/core/TokenStreamFactory.java
index 471d2a13..60e4e252 100644
--- a/src/main/java/com/fasterxml/jackson/core/TokenStreamFactory.java
+++ b/src/main/java/com/fasterxml/jackson/core/TokenStreamFactory.java
@@ -27,10 +27,15 @@ import com.fasterxml.jackson.core.util.BufferRecycler;
  *
  * @since 3.0 (refactored out of {@link JsonFactory})
  */
-@SuppressWarnings("resource")
 public abstract class TokenStreamFactory
     implements Versioned
 {
+    /**
+     * Shareable stateles "empty" {@link ObjectWriteContext} Object, passed in
+     * cases where caller had not passed actual context -- "null object" of sort.
+     */
+    public final static ObjectWriteContext EMPTY_WRITE_CONTEXT = new ObjectWriteContext.Base();
+
     /*
     /**********************************************************
     /* Helper types
@@ -655,10 +660,116 @@ public abstract class TokenStreamFactory
 
     /*
     /**********************************************************
-    /* Generator factories
+    /* Generator factories with databind context (3.0)
     /**********************************************************
      */
 
+    /**
+     * Method for constructing generator that writes contents
+     * using specified {@link OutputStream}.
+     * Textual encoding used will be UTF-8, where applicable.
+     *<p>
+     * Underlying stream <b>is NOT owned</b> by the generator constructed,
+     * so that generator will NOT close the output stream when
+     * {@link JsonGenerator#close} is called (unless auto-closing
+     * feature,
+     * {@link com.fasterxml.jackson.core.JsonGenerator.Feature#AUTO_CLOSE_TARGET}
+     * is enabled).
+     * Using application needs to close it explicitly if this is the case.
+     *
+     * @param writeCtxt Object-binding context where applicable; used for providing contextual
+     *    configuration
+     * @param out OutputStream to use for writing JSON content
+     *
+     * @since 3.0
+     */
+    public JsonGenerator createGenerator(ObjectWriteContext writeCtxt, OutputStream out)
+        throws IOException {
+        return createGenerator(writeCtxt, out, JsonEncoding.UTF8);
+    }
+
+    /**
+     * Method for constructing generator that writes contents
+     * using specified {@link OutputStream} with specified textual encoding
+     * (if applicable).
+     *<p>
+     * Underlying stream <b>is NOT owned</b> by the generator constructed,
+     * so that generator will NOT close the output stream when
+     * {@link JsonGenerator#close} is called (unless auto-closing
+     * feature,
+     * {@link com.fasterxml.jackson.core.JsonGenerator.Feature#AUTO_CLOSE_TARGET}
+     * is enabled).
+     * Using application needs to close it explicitly if this is the case.
+     *
+     * @param writeCtxt Object-binding context where applicable; used for providing contextual
+     *    configuration
+     * @param out OutputStream to use for writing JSON content
+     *
+     * @since 3.0
+     */
+    public abstract JsonGenerator createGenerator(ObjectWriteContext writeCtxt,
+            OutputStream out, JsonEncoding enc)
+        throws IOException;
+
+    /**
+     * Method for constructing generator that writes contents
+     * using specified {@link Writer}.
+     * Textual encoding used will be UTF-8, where applicable.
+     *<p>
+     * Underlying stream <b>is NOT owned</b> by the generator constructed,
+     * so that generator will NOT close the Reader when
+     * {@link JsonGenerator#close} is called (unless auto-closing
+     * feature,
+     * {@link com.fasterxml.jackson.core.JsonGenerator.Feature#AUTO_CLOSE_TARGET} is enabled).
+     * Using application needs to close it explicitly.
+     *
+     * @param writeCtxt Object-binding context where applicable; used for providing contextual
+     *    configuration
+     * @param w Writer to use for writing JSON content 
+     *
+     * @since 3.0
+     */
+    public abstract JsonGenerator createGenerator(ObjectWriteContext writeCtxt, Writer w)
+        throws IOException;
+
+    /**
+     * Method for constructing generator that writes contents
+     * to specified file, overwriting contents it might have (or creating
+     * it if such file does not yet exist).
+     *<p>
+     * Underlying stream <b>is owned</b> by the generator constructed,
+     * i.e. generator will handle closing of file when
+     * {@link JsonGenerator#close} is called.
+     *
+     * @since 3.0
+     *
+     * @param writeCtxt Object-binding context where applicable; used for providing contextual
+     *    configuration
+     * @param f File to write contents to
+     */
+    public abstract JsonGenerator createGenerator(ObjectWriteContext writeCtxt, File f,
+            JsonEncoding enc)
+        throws IOException;
+
+    /**
+     * Method for constructing generator that writes content into specified {@link DataOutput},
+     * using UTF-8 encoding (with formats where encoding is user-configurable).
+     *
+     * @param writeCtxt Object-binding context where applicable; used for providing contextual
+     *    configuration
+     *
+     * @since 3.0
+     */
+    public JsonGenerator createGenerator(ObjectWriteContext writeCtxt, DataOutput out) throws IOException {
+        return createGenerator(writeCtxt, _createDataOutputWrapper(out));
+    }
+    
+    /*
+    /**********************************************************
+    /* Generator factories
+    /**********************************************************
+     */
+    
     /**
      * Method for constructing JSON generator for writing JSON content
      * using specified output stream.
@@ -777,7 +888,16 @@ public abstract class TokenStreamFactory
      * context object.
      */
     protected IOContext _createContext(Object srcRef, boolean resourceManaged) {
-        return new IOContext(_getBufferRecycler(), srcRef, resourceManaged);
+        return new IOContext(_getBufferRecycler(), srcRef, resourceManaged, null);
+    }
+
+    /**
+     * Overridable factory method that actually instantiates desired
+     * context object.
+     */
+    protected IOContext _createContext(Object srcRef, boolean resourceManaged,
+            JsonEncoding enc) {
+        return new IOContext(_getBufferRecycler(), srcRef, resourceManaged, enc);
     }
 
     protected OutputStream _createDataOutputWrapper(DataOutput out) {
diff --git a/src/main/java/com/fasterxml/jackson/core/base/BinaryTSFactory.java b/src/main/java/com/fasterxml/jackson/core/base/BinaryTSFactory.java
index 68501e16..b4cb6596 100644
--- a/src/main/java/com/fasterxml/jackson/core/base/BinaryTSFactory.java
+++ b/src/main/java/com/fasterxml/jackson/core/base/BinaryTSFactory.java
@@ -75,21 +75,9 @@ public abstract class BinaryTSFactory extends DecorableTSFactory
         return _nonByteSource();
     }
 
-    @Override
-    public JsonParser createParser(byte[] data) throws IOException {
-        IOContext ctxt = _createContext(data, true);
-        if (_inputDecorator != null) {
-            InputStream in = _inputDecorator.decorate(ctxt, data, 0, data.length);
-            if (in != null) {
-                return _createParser(in, ctxt);
-            }
-        }
-        return _createParser(data, 0, data.length, ctxt);
-    }
-
     @Override
     public JsonParser createParser(byte[] data, int offset, int len) throws IOException {
-        IOContext ctxt = _createContext(data, true);
+        IOContext ctxt = _createContext(data, true, null);
         if (_inputDecorator != null) {
             InputStream in = _inputDecorator.decorate(ctxt, data, offset, len);
             if (in != null) {
@@ -128,7 +116,8 @@ public abstract class BinaryTSFactory extends DecorableTSFactory
      */
 
     @Override
-    public JsonGenerator createGenerator(OutputStream out, JsonEncoding enc)
+    public JsonGenerator createGenerator(ObjectWriteContext writeCtxt,
+            OutputStream out, JsonEncoding enc)
         throws IOException
     {
         // false -> we won't manage the stream unless explicitly directed to
@@ -138,12 +127,14 @@ public abstract class BinaryTSFactory extends DecorableTSFactory
     }
 
     @Override
-    public JsonGenerator createGenerator(Writer w) throws IOException {
+    public JsonGenerator createGenerator(ObjectWriteContext writeCtxt,
+            Writer w) throws IOException {
         return _nonByteTarget();
     }
 
     @Override
-    public JsonGenerator createGenerator(File f, JsonEncoding enc) throws IOException
+    public JsonGenerator createGenerator(ObjectWriteContext writeCtxt,
+            File f, JsonEncoding enc) throws IOException
     {
         OutputStream out = new FileOutputStream(f);
         // true -> yes, we have to manage the stream since we created it
diff --git a/src/main/java/com/fasterxml/jackson/core/base/GeneratorBase.java b/src/main/java/com/fasterxml/jackson/core/base/GeneratorBase.java
index 097db8ef..877b50a3 100644
--- a/src/main/java/com/fasterxml/jackson/core/base/GeneratorBase.java
+++ b/src/main/java/com/fasterxml/jackson/core/base/GeneratorBase.java
@@ -106,9 +106,6 @@ public abstract class GeneratorBase extends JsonGenerator
         _cfgNumbersAsStrings = Feature.WRITE_NUMBERS_AS_STRINGS.enabledIn(features);
     }
 
-    /**
-     * @since 2.5
-     */
     protected GeneratorBase(int features, ObjectCodec codec, JsonWriteContext ctxt) {
         super();
         _features = features;
@@ -142,7 +139,7 @@ public abstract class GeneratorBase extends JsonGenerator
 
 
     @Override public final boolean isEnabled(Feature f) { return (_features & f.getMask()) != 0; }
-    @Override public int getFeatureMask() { return _features; }
+    @Override public int getGeneratorFeatures() { return _features; }
 
     //public JsonGenerator configure(Feature f, boolean state) { }
 
@@ -181,29 +178,6 @@ public abstract class GeneratorBase extends JsonGenerator
         return this;
     }
 
-    @Override
-    @Deprecated
-    public JsonGenerator setFeatureMask(int newMask) {
-        int changed = newMask ^ _features;
-        _features = newMask;
-        if (changed != 0) {
-            _checkStdFeatureChanges(newMask, changed);
-        }
-        return this;
-    }
-
-    @Override // since 2.7
-    public JsonGenerator overrideStdFeatures(int values, int mask) {
-        int oldState = _features;
-        int newState = (oldState & ~mask) | (values & mask);
-        int changed = oldState ^ newState;
-        if (changed != 0) {
-            _features = newState;
-            _checkStdFeatureChanges(newState, changed);
-        }
-        return this;
-    }
-
     /**
      * Helper method called to verify changes to standard features.
      *
@@ -258,11 +232,6 @@ public abstract class GeneratorBase extends JsonGenerator
     /**********************************************************
      */
 
-    /**
-     * Note: type was co-variant until Jackson 2.7; reverted back to
-     * base type in 2.8 to allow for overriding by subtypes that use
-     * custom context type.
-     */
     @Override public JsonStreamContext getOutputContext() { return _writeContext; }
 
     /*
@@ -276,7 +245,7 @@ public abstract class GeneratorBase extends JsonGenerator
     //public void writeStartObject() throws IOException
     //public void writeEndObject() throws IOException
 
-    @Override // since 2.8
+    @Override
     public void writeStartObject(Object forValue) throws IOException
     {
         writeStartObject();
diff --git a/src/main/java/com/fasterxml/jackson/core/base/TextualTSFactory.java b/src/main/java/com/fasterxml/jackson/core/base/TextualTSFactory.java
index 1f1e9788..df737758 100644
--- a/src/main/java/com/fasterxml/jackson/core/base/TextualTSFactory.java
+++ b/src/main/java/com/fasterxml/jackson/core/base/TextualTSFactory.java
@@ -60,10 +60,10 @@ public abstract class TextualTSFactory extends DecorableTSFactory
      * recyclable intermediate buffer.
      */
     public boolean canUseCharArrays() { return true; }
-    
+
     /*
     /**********************************************************
-    /* Factory methods: parsers
+    /* Factory methods: parsers, with context
     /**********************************************************
      */
 
@@ -71,16 +71,14 @@ public abstract class TextualTSFactory extends DecorableTSFactory
     public JsonParser createParser(File f) throws IOException {
         // true, since we create InputStream from File
         IOContext ctxt = _createContext(f, true);
-        InputStream in = new FileInputStream(f);
-        return _createParser(_decorate(in, ctxt), ctxt);
+        return _createParser(_decorate(new FileInputStream(f), ctxt), ctxt);
     }
 
     @Override
     public JsonParser createParser(URL url) throws IOException {
         // true, since we create InputStream from URL
         IOContext ctxt = _createContext(url, true);
-        InputStream in = _optimizedStreamFromURL(url);
-        return _createParser(_decorate(in, ctxt), ctxt);
+        return _createParser(_decorate(_optimizedStreamFromURL(url), ctxt), ctxt);
     }
 
     @Override
@@ -96,18 +94,6 @@ public abstract class TextualTSFactory extends DecorableTSFactory
         return _createParser(_decorate(r, ctxt), ctxt);
     }
 
-    @Override
-    public JsonParser createParser(byte[] data) throws IOException {
-        IOContext ctxt = _createContext(data, true);
-        if (_inputDecorator != null) {
-            InputStream in = _inputDecorator.decorate(ctxt, data, 0, data.length);
-            if (in != null) {
-                return _createParser(in, ctxt);
-            }
-        }
-        return _createParser(data, 0, data.length, ctxt);
-    }
-
     @Override
     public JsonParser createParser(byte[] data, int offset, int len) throws IOException {
         IOContext ctxt = _createContext(data, true);
@@ -173,19 +159,21 @@ public abstract class TextualTSFactory extends DecorableTSFactory
         throws IOException
     {
         // false -> we won't manage the stream unless explicitly directed to
-        IOContext ctxt = _createContext(out, false);
-        ctxt.setEncoding(enc);
+        IOContext ctxt = _createContext(out, false).setEncoding(enc);
         if (enc == JsonEncoding.UTF8) {
-            return _createUTF8Generator(_decorate(out, ctxt), ctxt);
+            return _createUTF8Generator(EMPTY_WRITE_CONTEXT,
+                    _decorate(out, ctxt), ctxt);
         }
         Writer w = _createWriter(out, enc, ctxt);
-        return _createGenerator(_decorate(w, ctxt), ctxt);
+        return _createGenerator(EMPTY_WRITE_CONTEXT,
+                _decorate(w, ctxt), ctxt);
     }
 
     @Override
     public JsonGenerator createGenerator(Writer w) throws IOException {
         IOContext ctxt = _createContext(w, false);
-        return _createGenerator(_decorate(w, ctxt), ctxt);
+        return _createGenerator(EMPTY_WRITE_CONTEXT,
+                _decorate(w, ctxt), ctxt);
     }
 
     @Override
@@ -193,15 +181,56 @@ public abstract class TextualTSFactory extends DecorableTSFactory
     {
         OutputStream out = new FileOutputStream(f);
         // true -> yes, we have to manage the stream since we created it
-        IOContext ctxt = _createContext(out, true);
-        ctxt.setEncoding(enc);
+        IOContext ctxt = _createContext(f, true).setEncoding(enc);
         if (enc == JsonEncoding.UTF8) {
-            return _createUTF8Generator(_decorate(out, ctxt), ctxt);
+            return _createUTF8Generator(EMPTY_WRITE_CONTEXT,
+                    _decorate(out, ctxt), ctxt);
         }
-        Writer w = _createWriter(out, enc, ctxt);
-        return _createGenerator(_decorate(w, ctxt), ctxt);
-    }    
+        return _createGenerator(EMPTY_WRITE_CONTEXT,
+                _decorate(_createWriter(out, enc, ctxt), ctxt), ctxt);
+    }
 
+    @Override
+    public JsonGenerator createGenerator(ObjectWriteContext writeCtxt,
+            OutputStream out, JsonEncoding enc)
+        throws IOException
+    {
+        // false -> we won't manage the stream unless explicitly directed to
+        IOContext ctxt = _createContext(out, false, enc);
+        if (enc == JsonEncoding.UTF8) {
+            return _createUTF8Generator(writeCtxt, _decorate(out, ctxt), ctxt);
+        }
+        return _createGenerator(writeCtxt,
+                _decorate(_createWriter(out, enc, ctxt), ctxt), ctxt);
+    }
+
+    @Override
+    public JsonGenerator createGenerator(ObjectWriteContext writeCtxt, Writer w)
+        throws IOException
+    {
+        IOContext ctxt = _createContext(w, false);
+        return _createGenerator(writeCtxt, _decorate(w, ctxt), ctxt);
+    }
+
+    @Override
+    public JsonGenerator createGenerator(ObjectWriteContext writeCtxt,
+            File f, JsonEncoding enc)
+        throws IOException
+    {
+        OutputStream out = new FileOutputStream(f);
+        IOContext ctxt = _createContext(f, true, enc);
+        if (enc == JsonEncoding.UTF8) {
+            return _createUTF8Generator(writeCtxt, _decorate(out, ctxt), ctxt);
+        }
+        return _createGenerator(writeCtxt, _decorate(_createWriter(out, enc, ctxt), ctxt), ctxt);
+    }
+
+    /*
+    /**********************************************************
+    /* Factory methods: abstract, for sub-classes to implement
+    /**********************************************************
+     */
+    
     /**
      * Overridable factory method that actually instantiates generator for
      * given {@link Writer} and context object.
@@ -212,7 +241,8 @@ public abstract class TextualTSFactory extends DecorableTSFactory
      * interface from sub-class perspective, although not a public
      * method available to users of factory implementations.
      */
-    protected abstract JsonGenerator _createGenerator(Writer out, IOContext ctxt) throws IOException;
+    protected abstract JsonGenerator _createGenerator(ObjectWriteContext writeCtxt,
+            Writer out, IOContext ioCtxt) throws IOException;
 
     /**
      * Overridable factory method that actually instantiates generator for
@@ -224,9 +254,11 @@ public abstract class TextualTSFactory extends DecorableTSFactory
      * interface from sub-class perspective, although not a public
      * method available to users of factory implementations.
      */
-    protected abstract JsonGenerator _createUTF8Generator(OutputStream out, IOContext ctxt) throws IOException;
+    protected abstract JsonGenerator _createUTF8Generator(ObjectWriteContext writeCtxt,
+            OutputStream out, IOContext ctxt) throws IOException;
 
-    protected Writer _createWriter(OutputStream out, JsonEncoding enc, IOContext ctxt) throws IOException
+    protected Writer _createWriter(OutputStream out, JsonEncoding enc, IOContext ctxt)
+        throws IOException
     {
         // note: this should not get called any more (caller checks, dispatches)
         if (enc == JsonEncoding.UTF8) { // We have optimized writer for UTF-8
diff --git a/src/main/java/com/fasterxml/jackson/core/io/IOContext.java b/src/main/java/com/fasterxml/jackson/core/io/IOContext.java
index 9fd0488b..b22ddfd8 100644
--- a/src/main/java/com/fasterxml/jackson/core/io/IOContext.java
+++ b/src/main/java/com/fasterxml/jackson/core/io/IOContext.java
@@ -105,18 +105,23 @@ public class IOContext
         _managedResource = managedResource;
     }
 
-    public void setEncoding(JsonEncoding enc) {
-        _encoding = enc;
-    }
-
     /**
-     * @since 1.6
+     * @since 3.0
      */
-    public IOContext withEncoding(JsonEncoding enc) {
+    public IOContext(BufferRecycler br, Object sourceRef, boolean managedResource,
+            JsonEncoding enc)
+    {
+        _bufferRecycler = br;
+        _sourceRef = sourceRef;
+        _managedResource = managedResource;
         _encoding = enc;
-        return this;
     }
     
+    public IOContext setEncoding(JsonEncoding enc) {
+        _encoding = enc;
+        return this;
+    }
+
     /*
     /**********************************************************
     /* Public API, accessors
diff --git a/src/main/java/com/fasterxml/jackson/core/json/JsonGeneratorImpl.java b/src/main/java/com/fasterxml/jackson/core/json/JsonGeneratorImpl.java
index ac9e87f5..77cfe42e 100644
--- a/src/main/java/com/fasterxml/jackson/core/json/JsonGeneratorImpl.java
+++ b/src/main/java/com/fasterxml/jackson/core/json/JsonGeneratorImpl.java
@@ -7,14 +7,11 @@ import com.fasterxml.jackson.core.base.GeneratorBase;
 import com.fasterxml.jackson.core.io.CharTypes;
 import com.fasterxml.jackson.core.io.CharacterEscapes;
 import com.fasterxml.jackson.core.io.IOContext;
-import com.fasterxml.jackson.core.util.DefaultPrettyPrinter;
 import com.fasterxml.jackson.core.util.VersionUtil;
 
 /**
  * Intermediate base class shared by JSON-backed generators
  * like {@link UTF8JsonGenerator} and {@link WriterBasedJsonGenerator}.
- * 
- * @since 2.1
  */
 public abstract class JsonGeneratorImpl extends GeneratorBase
 {
@@ -67,6 +64,9 @@ public abstract class JsonGeneratorImpl extends GeneratorBase
      * Definition of custom character escapes to use for generators created
      * by this factory, if any. If null, standard data format specific
      * escapes are used.
+     *<p>
+     * NOTE: although typically set during construction (in constructor),
+     * can not be made final in 3.0 due to some edge use cases (JSONP support).
      */
     protected CharacterEscapes _characterEscapes;
     
@@ -78,27 +78,30 @@ public abstract class JsonGeneratorImpl extends GeneratorBase
 
     /**
      * Separator to use, if any, between root-level values.
-     * 
-     * @since 2.1
      */
-    protected SerializableString _rootValueSeparator
-        = DefaultPrettyPrinter.DEFAULT_ROOT_VALUE_SEPARATOR;
+    protected final SerializableString _rootValueSeparator;
 
     /**
      * Flag that is set if quoting is not to be added around
      * JSON Object property names.
-     *
-     * @since 2.7
      */
     protected boolean _cfgUnqNames;
 
+    /**
+     * Object that handles pretty-printing (usually additional
+     * white space to make results more human-readable) during
+     * output. If null, no pretty-printing is done.
+     */
+    protected PrettyPrinter _cfgPrettyPrinter;
+
     /*
     /**********************************************************
     /* Life-cycle
     /**********************************************************
      */
 
-    public JsonGeneratorImpl(IOContext ctxt, int features, ObjectCodec codec)
+    public JsonGeneratorImpl(IOContext ctxt, int features, ObjectCodec codec,
+            SerializableString rvs, CharacterEscapes charEsc, PrettyPrinter pp)
     {
         super(features, codec);
         _ioContext = ctxt;
@@ -107,6 +110,12 @@ public abstract class JsonGeneratorImpl extends GeneratorBase
             _maximumNonEscapedChar = 127;
         }
         _cfgUnqNames = !Feature.QUOTE_FIELD_NAMES.enabledIn(features);
+        _rootValueSeparator = rvs;
+
+        _cfgPrettyPrinter = pp;
+        // 03-Oct-2017, tatu: Not clean (shouldn't call non-static methods from ctor),
+        //    but for now best way to avoid code duplication
+        setCharacterEscapes(charEsc);
     }
 
     /*
@@ -181,13 +190,18 @@ public abstract class JsonGeneratorImpl extends GeneratorBase
     public CharacterEscapes getCharacterEscapes() {
         return _characterEscapes;
     }
-    
+
     @Override
-    public JsonGenerator setRootValueSeparator(SerializableString sep) {
-        _rootValueSeparator = sep;
+    public JsonGenerator setPrettyPrinter(PrettyPrinter pp) {
+        _cfgPrettyPrinter = pp;
         return this;
     }
 
+    @Override
+    public PrettyPrinter getPrettyPrinter() {
+        return _cfgPrettyPrinter;
+    }
+    
     /*
     /**********************************************************
     /* Partial API
diff --git a/src/main/java/com/fasterxml/jackson/core/json/UTF8JsonGenerator.java b/src/main/java/com/fasterxml/jackson/core/json/UTF8JsonGenerator.java
index 568a518c..d1ee5a5a 100644
--- a/src/main/java/com/fasterxml/jackson/core/json/UTF8JsonGenerator.java
+++ b/src/main/java/com/fasterxml/jackson/core/json/UTF8JsonGenerator.java
@@ -114,18 +114,17 @@ public class UTF8JsonGenerator
      */
 
     public UTF8JsonGenerator(IOContext ctxt, int features, ObjectCodec codec,
-            OutputStream out)
+            OutputStream out,
+            SerializableString rootValueSep, CharacterEscapes charEsc, PrettyPrinter pp)
     {
-        super(ctxt, features, codec);
+        super(ctxt, features, codec, rootValueSep, charEsc, pp);
         _outputStream = out;
         _bufferRecyclable = true;
         _outputBuffer = ctxt.allocWriteEncodingBuffer();
         _outputEnd = _outputBuffer.length;
-
-        /* To be exact, each char can take up to 6 bytes when escaped (Unicode
-         * escape with backslash, 'u' and 4 hex digits); but to avoid fluctuation,
-         * we will actually round down to only do up to 1/8 number of chars
-         */
+        // To be exact, each char can take up to 6 bytes when escaped (Unicode
+        // escape with backslash, 'u' and 4 hex digits); but to avoid fluctuation,
+        // we will actually round down to only do up to 1/8 number of chars
         _outputMaxContiguous = _outputEnd >> 3;
         _charBuffer = ctxt.allocConcatBuffer();
         _charBufferLength = _charBuffer.length;
@@ -135,13 +134,13 @@ public class UTF8JsonGenerator
             setHighestNonEscapedChar(127);
         }
     }
-    
+
     public UTF8JsonGenerator(IOContext ctxt, int features, ObjectCodec codec,
             OutputStream out,
+            SerializableString rootValueSep, CharacterEscapes charEsc, PrettyPrinter pp,
             byte[] outputBuffer, int outputOffset, boolean bufferRecyclable)
     {
-        
-        super(ctxt, features, codec);
+        super(ctxt, features, codec, rootValueSep, charEsc, pp);
         _outputStream = out;
         _bufferRecyclable = bufferRecyclable;
         _outputTail = outputOffset;
diff --git a/src/main/java/com/fasterxml/jackson/core/json/WriterBasedJsonGenerator.java b/src/main/java/com/fasterxml/jackson/core/json/WriterBasedJsonGenerator.java
index ebf782af..b4b7f230 100644
--- a/src/main/java/com/fasterxml/jackson/core/json/WriterBasedJsonGenerator.java
+++ b/src/main/java/com/fasterxml/jackson/core/json/WriterBasedJsonGenerator.java
@@ -32,8 +32,6 @@ public class WriterBasedJsonGenerator
     /**
      * Character used for quoting JSON Object property names
      * and String values.
-     *
-     * @since 2.8
      */
     protected char _quoteChar = '"'; // TODO: make configurable
 
@@ -81,8 +79,6 @@ public class WriterBasedJsonGenerator
     /**
      * Intermediate buffer in which characters of a String are copied
      * before being encoded.
-     *
-     * @since 2.9
      */
     protected char[] _charBuffer;
 
@@ -93,9 +89,11 @@ public class WriterBasedJsonGenerator
      */
 
     public WriterBasedJsonGenerator(IOContext ctxt, int features,
-            ObjectCodec codec, Writer w)
+            ObjectCodec codec, Writer w,
+            SerializableString rootValueSep, CharacterEscapes charEsc,
+            PrettyPrinter pp)
     {
-        super(ctxt, features, codec);
+        super(ctxt, features, codec, rootValueSep, charEsc, pp);
         _writer = w;
         _outputBuffer = ctxt.allocConcatBuffer();
         _outputEnd = _outputBuffer.length;
diff --git a/src/main/java/com/fasterxml/jackson/core/util/JsonGeneratorDelegate.java b/src/main/java/com/fasterxml/jackson/core/util/JsonGeneratorDelegate.java
index fc89c425..432e103d 100644
--- a/src/main/java/com/fasterxml/jackson/core/util/JsonGeneratorDelegate.java
+++ b/src/main/java/com/fasterxml/jackson/core/util/JsonGeneratorDelegate.java
@@ -126,26 +126,7 @@ public class JsonGeneratorDelegate extends JsonGenerator
     //public final JsonGenerator configure(Feature f, boolean state)
 
     @Override
-    public int getFeatureMask() { return delegate.getFeatureMask(); }
-
-    @Override
-    @Deprecated
-    public JsonGenerator setFeatureMask(int mask) {
-        delegate.setFeatureMask(mask);
-        return this;
-    }    
-
-    @Override
-    public JsonGenerator overrideStdFeatures(int values, int mask) {
-        delegate.overrideStdFeatures(values, mask);
-        return this;
-    }
-
-    @Override
-    public JsonGenerator overrideFormatFeatures(int values, int mask) {
-        delegate.overrideFormatFeatures(values, mask);
-        return this;
-    }
+    public int getGeneratorFeatures() { return delegate.getGeneratorFeatures(); }
 
     /*
     /**********************************************************
@@ -176,14 +157,6 @@ public class JsonGeneratorDelegate extends JsonGenerator
     @Override
     public CharacterEscapes getCharacterEscapes() {  return delegate.getCharacterEscapes(); }
 
-    @Override
-    public JsonGenerator setCharacterEscapes(CharacterEscapes esc) { delegate.setCharacterEscapes(esc);
-        return this; }
-
-    @Override
-    public JsonGenerator setRootValueSeparator(SerializableString sep) { delegate.setRootValueSeparator(sep);
-        return this; }
-
     /*
     /**********************************************************
     /* Public API, write methods, structural
diff --git a/src/main/java/com/fasterxml/jackson/core/JsonpCharacterEscapes.java b/src/main/java/com/fasterxml/jackson/core/util/JsonpCharacterEscapes.java
similarity index 93%
rename from src/main/java/com/fasterxml/jackson/core/JsonpCharacterEscapes.java
rename to src/main/java/com/fasterxml/jackson/core/util/JsonpCharacterEscapes.java
index 282bb428..a552b5b5 100644
--- a/src/main/java/com/fasterxml/jackson/core/JsonpCharacterEscapes.java
+++ b/src/main/java/com/fasterxml/jackson/core/util/JsonpCharacterEscapes.java
@@ -1,5 +1,6 @@
-package com.fasterxml.jackson.core;
+package com.fasterxml.jackson.core.util;
 
+import com.fasterxml.jackson.core.SerializableString;
 import com.fasterxml.jackson.core.io.CharacterEscapes;
 import com.fasterxml.jackson.core.io.SerializedString;
 
@@ -9,8 +10,6 @@ import com.fasterxml.jackson.core.io.SerializedString;
  * escaped otherwise), which are apparently considered linefeeds as
  * per newer Javascript specifications, and consequently problematic
  * when using JSONP (see https://en.wikipedia.org/wiki/JSONP).
- *
- * @since 2.8
  */
 public class JsonpCharacterEscapes extends CharacterEscapes
 {
diff --git a/src/test/java/com/fasterxml/jackson/core/JsonpCharacterEscapesTest.java b/src/test/java/com/fasterxml/jackson/core/JsonpCharacterEscapesTest.java
index 1e70fe41..bd078590 100644
--- a/src/test/java/com/fasterxml/jackson/core/JsonpCharacterEscapesTest.java
+++ b/src/test/java/com/fasterxml/jackson/core/JsonpCharacterEscapesTest.java
@@ -1,6 +1,8 @@
 package com.fasterxml.jackson.core;
 
 import com.fasterxml.jackson.core.io.SerializedString;
+import com.fasterxml.jackson.core.util.JsonpCharacterEscapes;
+
 import org.junit.Test;
 
 import static org.junit.Assert.assertEquals;
diff --git a/src/test/java/com/fasterxml/jackson/core/TestVersions.java b/src/test/java/com/fasterxml/jackson/core/TestVersions.java
index 865be6f1..7f50ad8c 100644
--- a/src/test/java/com/fasterxml/jackson/core/TestVersions.java
+++ b/src/test/java/com/fasterxml/jackson/core/TestVersions.java
@@ -17,9 +17,10 @@ public class TestVersions extends com.fasterxml.jackson.core.BaseTest
                 CharsToNameCanonicalizer.createRoot());
         assertVersion(jp.version());
         jp.close();
-        JsonGenerator jgen = new WriterBasedJsonGenerator(getIOContext(), 0, null, null);
-        assertVersion(jgen.version());
-        jgen.close();
+        JsonGenerator jg = new WriterBasedJsonGenerator(getIOContext(), 0, null, null,
+                JsonFactory.DEFAULT_ROOT_VALUE_SEPARATOR, null, null);
+        assertVersion(jg.version());
+        jg.close();
     }
 
     public void testMisc() {
diff --git a/src/test/java/com/fasterxml/jackson/core/json/GeneratorFeaturesTest.java b/src/test/java/com/fasterxml/jackson/core/json/GeneratorFeaturesTest.java
index 20bdff42..a693460d 100644
--- a/src/test/java/com/fasterxml/jackson/core/json/GeneratorFeaturesTest.java
+++ b/src/test/java/com/fasterxml/jackson/core/json/GeneratorFeaturesTest.java
@@ -30,24 +30,6 @@ public class GeneratorFeaturesTest
         g.close();
     }
 
-    @SuppressWarnings("deprecation")
-    public void testConfigOverrides() throws IOException
-    {
-        // but also allow overide
-        JsonGenerator g = JSON_F.createGenerator(new StringWriter());
-        int mask = JsonGenerator.Feature.WRITE_NUMBERS_AS_STRINGS.getMask()
-                | JsonGenerator.Feature.WRITE_BIGDECIMAL_AS_PLAIN.getMask();
-        g.overrideStdFeatures(mask, mask);
-        assertTrue(g.isEnabled(JsonGenerator.Feature.WRITE_NUMBERS_AS_STRINGS));
-        assertTrue(g.isEnabled(JsonGenerator.Feature.WRITE_BIGDECIMAL_AS_PLAIN));
-
-        // and for now, also test straight override
-        g.setFeatureMask(0);
-        assertFalse(g.isEnabled(JsonGenerator.Feature.WRITE_NUMBERS_AS_STRINGS));
-        assertFalse(g.isEnabled(JsonGenerator.Feature.WRITE_BIGDECIMAL_AS_PLAIN));
-        g.close();
-    }
-
     public void testFieldNameQuoting() throws IOException
     {
         JsonFactory f = new JsonFactory();
diff --git a/src/test/java/com/fasterxml/jackson/core/json/TestCustomEscaping.java b/src/test/java/com/fasterxml/jackson/core/json/TestCustomEscaping.java
index 7188be77..4c8cfb40 100644
--- a/src/test/java/com/fasterxml/jackson/core/json/TestCustomEscaping.java
+++ b/src/test/java/com/fasterxml/jackson/core/json/TestCustomEscaping.java
@@ -5,6 +5,7 @@ import java.io.*;
 import com.fasterxml.jackson.core.*;
 import com.fasterxml.jackson.core.io.CharacterEscapes;
 import com.fasterxml.jackson.core.io.SerializedString;
+import com.fasterxml.jackson.core.util.JsonpCharacterEscapes;
 
 public class TestCustomEscaping extends com.fasterxml.jackson.core.BaseTest
 {
diff --git a/src/test/java/com/fasterxml/jackson/core/json/TestUtf8Generator.java b/src/test/java/com/fasterxml/jackson/core/json/TestUtf8Generator.java
index 50752b20..7d1f31c3 100644
--- a/src/test/java/com/fasterxml/jackson/core/json/TestUtf8Generator.java
+++ b/src/test/java/com/fasterxml/jackson/core/json/TestUtf8Generator.java
@@ -20,7 +20,9 @@ public class TestUtf8Generator extends BaseTest
     {
         ByteArrayOutputStream bytes = new ByteArrayOutputStream();
         IOContext ioc = new IOContext(new BufferRecycler(), bytes, true);
-        JsonGenerator gen = new UTF8JsonGenerator(ioc, 0, null, bytes);
+        JsonGenerator gen = new UTF8JsonGenerator(ioc, 0, null, bytes,
+                JsonFactory.DEFAULT_ROOT_VALUE_SEPARATOR, null, null);
+                
         String str = "Natuurlijk is alles gelukt en weer een tevreden klant\uD83D\uDE04";
         int length = 4000 - 38;
 
