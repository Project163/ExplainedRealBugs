diff --git a/sql/hive-thriftserver/src/test/scala/org/apache/spark/sql/hive/thriftserver/HiveSessionImplSuite.scala b/sql/hive-thriftserver/src/test/scala/org/apache/spark/sql/hive/thriftserver/HiveSessionImplSuite.scala
index 05d540d782e..afca4b49b3b 100644
--- a/sql/hive-thriftserver/src/test/scala/org/apache/spark/sql/hive/thriftserver/HiveSessionImplSuite.scala
+++ b/sql/hive-thriftserver/src/test/scala/org/apache/spark/sql/hive/thriftserver/HiveSessionImplSuite.scala
@@ -34,6 +34,11 @@ class HiveSessionImplSuite extends SparkFunSuite {
   override def beforeAll() {
     super.beforeAll()
 
+    // mock the instance first - we observed weird classloader issue on creating mock, so
+    // would like to avoid any cases classloader gets switched
+    val sessionManager = mock(classOf[SessionManager])
+    operationManager = mock(classOf[OperationManager])
+
     session = new HiveSessionImpl(
       ThriftserverShimUtils.testedProtocolVersions.head,
       "",
@@ -41,9 +46,7 @@ class HiveSessionImplSuite extends SparkFunSuite {
       new HiveConf(),
       ""
     )
-    val sessionManager = mock(classOf[SessionManager])
     session.setSessionManager(sessionManager)
-    operationManager = mock(classOf[OperationManager])
     session.setOperationManager(operationManager)
     when(operationManager.newGetCatalogsOperation(session)).thenAnswer(
       (_: InvocationOnMock) => {
