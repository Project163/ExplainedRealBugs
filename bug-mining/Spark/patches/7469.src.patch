diff --git a/launcher/src/main/java/org/apache/spark/launcher/SparkSubmitCommandBuilder.java b/launcher/src/main/java/org/apache/spark/launcher/SparkSubmitCommandBuilder.java
index 43e7f8debe1..d6ed1e3a353 100644
--- a/launcher/src/main/java/org/apache/spark/launcher/SparkSubmitCommandBuilder.java
+++ b/launcher/src/main/java/org/apache/spark/launcher/SparkSubmitCommandBuilder.java
@@ -404,12 +404,17 @@ class SparkSubmitCommandBuilder extends AbstractCommandBuilder {
   }
 
   private String findExamplesAppJar() {
-    for (String exampleJar : findExamplesJars()) {
-      if (new File(exampleJar).getName().startsWith("spark-examples")) {
-        return exampleJar;
+    boolean isTesting = "1".equals(getenv("SPARK_TESTING"));
+    if (isTesting) {
+      return SparkLauncher.NO_RESOURCE;
+    } else {
+      for (String exampleJar : findExamplesJars()) {
+        if (new File(exampleJar).getName().startsWith("spark-examples")) {
+          return exampleJar;
+        }
       }
+      throw new IllegalStateException("Failed to find examples' main app jar.");
     }
-    throw new IllegalStateException("Failed to find examples' main app jar.");
   }
 
   private List<String> findExamplesJars() {
diff --git a/launcher/src/test/java/org/apache/spark/launcher/SparkSubmitCommandBuilderSuite.java b/launcher/src/test/java/org/apache/spark/launcher/SparkSubmitCommandBuilderSuite.java
index 6cd089e256b..07a9dae1256 100644
--- a/launcher/src/test/java/org/apache/spark/launcher/SparkSubmitCommandBuilderSuite.java
+++ b/launcher/src/test/java/org/apache/spark/launcher/SparkSubmitCommandBuilderSuite.java
@@ -259,8 +259,8 @@ public class SparkSubmitCommandBuilderSuite extends BaseSuite {
             findArgValue(cmd, parser.CLASS));
     assertEquals("cluster", findArgValue(cmd, parser.DEPLOY_MODE));
     String primaryResource = cmd.get(cmd.size() - 2);
-    assertTrue(new File(primaryResource).getName().startsWith("spark-examples"));
-    assertFalse(cmd.contains(SparkLauncher.NO_RESOURCE));
+    assertTrue(primaryResource.equals(SparkLauncher.NO_RESOURCE)
+            || new File(primaryResource).getName().startsWith("spark-examples"));
   }
 
   @Test(expected = IllegalArgumentException.class)
