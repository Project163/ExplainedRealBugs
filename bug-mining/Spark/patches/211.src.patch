diff --git a/core/src/main/scala/org/apache/spark/util/Utils.scala b/core/src/main/scala/org/apache/spark/util/Utils.scala
index 79f314c8dd3..2c934a4bac5 100644
--- a/core/src/main/scala/org/apache/spark/util/Utils.scala
+++ b/core/src/main/scala/org/apache/spark/util/Utils.scala
@@ -31,7 +31,6 @@ import scala.reflect.ClassTag
 import scala.util.Try
 
 import com.google.common.io.Files
-import org.apache.commons.lang.SystemUtils
 import com.google.common.util.concurrent.ThreadFactoryBuilder
 import org.apache.hadoop.fs.{FileSystem, FileUtil, Path}
 import org.json4s._
@@ -50,7 +49,7 @@ private[spark] object Utils extends Logging {
   val random = new Random()
 
   def sparkBin(sparkHome: String, which: String): File = {
-    val suffix = if (SystemUtils.IS_OS_WINDOWS) ".cmd" else ""
+    val suffix = if (isWindows) ".cmd" else ""
     new File(sparkHome + File.separator + "bin", which + suffix)
   }
 
@@ -614,7 +613,7 @@ private[spark] object Utils extends Logging {
    */
   def isSymlink(file: File): Boolean = {
     if (file == null) throw new NullPointerException("File must not be null")
-    if (SystemUtils.IS_OS_WINDOWS) return false
+    if (isWindows) return false
     val fileInCanonicalDir = if (file.getParent() == null) {
       file
     } else {
@@ -1018,7 +1017,7 @@ private[spark] object Utils extends Logging {
       throw new IOException("Destination must be relative")
     }
     var cmdSuffix = ""
-    val linkCmd = if (SystemUtils.IS_OS_WINDOWS) {
+    val linkCmd = if (isWindows) {
       // refer to http://technet.microsoft.com/en-us/library/cc771254.aspx
       cmdSuffix = " /s /e /k /h /y /i"
       "cmd /c xcopy "
@@ -1062,6 +1061,12 @@ private[spark] object Utils extends Logging {
     getHadoopFileSystem(new URI(path))
   }
 
+  /**
+   * return true if this is Windows.
+   */
+  def isWindows = Option(System.getProperty("os.name")).
+    map(_.startsWith("Windows")).getOrElse(false)
+
   /**
    * Indicates whether Spark is currently running unit tests.
    */
