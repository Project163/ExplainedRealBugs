diff --git a/repl/src/main/scala/org/apache/spark/repl/Main.scala b/repl/src/main/scala/org/apache/spark/repl/Main.scala
index 8548801266b..4ed3bd51d75 100644
--- a/repl/src/main/scala/org/apache/spark/repl/Main.scala
+++ b/repl/src/main/scala/org/apache/spark/repl/Main.scala
@@ -57,7 +57,9 @@ object Main extends Logging {
 
   def main(args: Array[String]): Unit = {
     isShellSession = true
-    doMain(args, new SparkILoop)
+    val settings = new GenericRunnerSettings(scalaOptionError)
+    settings.processArguments(args.toList, true)
+    doMain(args, new SparkILoop(settings))
   }
 
   // Visible for testing
diff --git a/repl/src/main/scala/org/apache/spark/repl/SparkILoop.scala b/repl/src/main/scala/org/apache/spark/repl/SparkILoop.scala
index f49e8adcc74..01a09344343 100644
--- a/repl/src/main/scala/org/apache/spark/repl/SparkILoop.scala
+++ b/repl/src/main/scala/org/apache/spark/repl/SparkILoop.scala
@@ -31,9 +31,15 @@ import scala.util.Properties.{javaVersion, javaVmName, versionString}
 /**
  *  A Spark-specific interactive shell.
  */
-class SparkILoop(in0: BufferedReader, out: PrintWriter)
-  extends ILoop(ShellConfig(new GenericRunnerSettings(_ => ())), in0, out) {
-  def this() = this(null, new PrintWriter(Console.out, true))
+class SparkILoop(config: ShellConfig, in0: BufferedReader, out: PrintWriter)
+  extends ILoop(config, in0, out) {
+  def this(in0: BufferedReader, out: PrintWriter) = this(
+    ShellConfig(new GenericRunnerSettings(_ => ())), in0, out)
+
+  def this(settings: Settings) = this(ShellConfig(settings), null,
+    new PrintWriter(Console.out, true))
+
+  def this() = this(new GenericRunnerSettings(_ => ()))
 
   val initializationCommands: Seq[String] = Seq(
     """
