diff --git a/make-distribution.sh b/make-distribution.sh
index c05dcd89d90..dc8aa56a2e9 100755
--- a/make-distribution.sh
+++ b/make-distribution.sh
@@ -43,8 +43,9 @@
 FWDIR="$(cd `dirname $0`; pwd)"
 DISTDIR="$FWDIR/dist"
 
-VERSION=$(mvn help:evaluate -Dexpression=project.version | grep -v "INFO" | tail -n 1)
-if [ $? == -1 ] ;then
+set -o pipefail
+VERSION=$(mvn help:evaluate -Dexpression=project.version 2>/dev/null | grep -v "INFO" | tail -n 1)
+if [ $? != 0 ]; then
     echo -e "You need Maven installed to build Spark."
     echo -e "Download Maven from https://maven.apache.org."
     exit -1;
