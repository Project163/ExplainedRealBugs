diff --git a/sql/core/src/test/scala/org/apache/spark/sql/SparkSessionBuilderSuite.scala b/sql/core/src/test/scala/org/apache/spark/sql/SparkSessionBuilderSuite.scala
index 8c622bad15d..9d4e57093c0 100644
--- a/sql/core/src/test/scala/org/apache/spark/sql/SparkSessionBuilderSuite.scala
+++ b/sql/core/src/test/scala/org/apache/spark/sql/SparkSessionBuilderSuite.scala
@@ -473,15 +473,14 @@ class SparkSessionBuilderSuite extends SparkFunSuite with BeforeAndAfterEach wit
     }
   }
 
-  test("SPARK-33944: Create a working SparkSession with a broken FileSystem") {
+  test("SPARK-34558: Create a working SparkSession with a broken FileSystem") {
     val msg = "Cannot qualify the warehouse path, leaving it unqualified"
     val logAppender = new LogAppender(msg)
     withLogAppender(logAppender) {
       val session =
         SparkSession.builder()
           .master("local")
-          .config(WAREHOUSE_PATH.key, "my_dir")
-          .config("fs.file.impl", "non.existing.class")
+          .config(WAREHOUSE_PATH.key, "unknown:///mydir")
           .getOrCreate()
       session.sql("SELECT 1").collect()
     }
