<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:28:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-37556] Deser void class fail with Java serialization</title>
                <link>https://issues.apache.org/jira/browse/SPARK-37556</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Spark code contains Java void type cannot be serialized with JavaSerializer. For example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Serializable {
  &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; k = &lt;span class=&quot;code-object&quot;&gt;Void&lt;/span&gt;.TYPE;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Spark will throw error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.&lt;span class=&quot;code-object&quot;&gt;Void&lt;/span&gt;; local &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;name incompatible with stream &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;name &lt;span class=&quot;code-quote&quot;&gt;&quot;void&quot;&lt;/span&gt;
	at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:703)
	at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1940)
	at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1806)
	at java.io.ObjectInputStream.readClass(ObjectInputStream.java:1771)
        ......
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;All other primitive type works. The reason is when &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-8730&quot; title=&quot;Deser primitive class with Java serialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-8730&quot;&gt;&lt;del&gt;SPARK-8730&lt;/del&gt;&lt;/a&gt; try to fix the primitive type deserialization, it introduces the &lt;a href=&quot;https://github.com/apache/spark/blob/v3.2.0/core/src/main/scala/org/apache/spark/serializer/JavaSerializer.scala#L80&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;following code&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; object JavaDeserializationStream {
  val primitiveMappings = Map[&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;[_]](
    &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;&quot;&lt;/span&gt; -&amp;gt; classOf[&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;&quot;&lt;/span&gt; -&amp;gt; classOf[&lt;span class=&quot;code-object&quot;&gt;Byte&lt;/span&gt;],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;&quot;&lt;/span&gt; -&amp;gt; classOf[Char],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt;&quot;&lt;/span&gt; -&amp;gt; classOf[&lt;span class=&quot;code-object&quot;&gt;Short&lt;/span&gt;],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&quot;&lt;/span&gt; -&amp;gt; classOf[Int],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&quot;&lt;/span&gt; -&amp;gt; classOf[&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;&quot;&lt;/span&gt; -&amp;gt; classOf[&lt;span class=&quot;code-object&quot;&gt;Float&lt;/span&gt;],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;&quot;&lt;/span&gt; -&amp;gt; classOf[&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;void&quot;&lt;/span&gt; -&amp;gt; classOf[&lt;span class=&quot;code-object&quot;&gt;Void&lt;/span&gt;]
  )
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However, classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;Void&amp;#93;&lt;/span&gt; is not the equivalence of other types. It&apos;s point to Void.class not Void.Type. The equivalence for void should be classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;Unit&amp;#93;&lt;/span&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
scala&amp;gt; classOf[&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;]
val res0: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;[&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;] = &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;

scala&amp;gt; classOf[&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;]
val res1: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;[&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;] = &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;

scala&amp;gt; classOf[&lt;span class=&quot;code-object&quot;&gt;Byte&lt;/span&gt;]
val res2: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;[&lt;span class=&quot;code-object&quot;&gt;Byte&lt;/span&gt;] = &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;

scala&amp;gt; classOf[&lt;span class=&quot;code-object&quot;&gt;Void&lt;/span&gt;]
val res3: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;[&lt;span class=&quot;code-object&quot;&gt;Void&lt;/span&gt;] = &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;java.lang.&lt;span class=&quot;code-object&quot;&gt;Void&lt;/span&gt;  &amp;lt;--- &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is wrong

scala&amp;gt; classOf[Unit]
val res4: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;[Unit] = void &amp;lt;---- &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is right
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13415500">SPARK-37556</key>
            <summary>Deser void class fail with Java serialization</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Dec 2021 06:40:31 +0000</created>
                <updated>Tue, 7 Dec 2021 15:31:54 +0000</updated>
                            <resolved>Tue, 7 Dec 2021 15:31:54 +0000</resolved>
                                    <version>3.2.0</version>
                                    <fixVersion>3.1.3</fixVersion>
                    <fixVersion>3.0.4</fixVersion>
                    <fixVersion>3.2.1</fixVersion>
                    <fixVersion>3.3.0</fixVersion>
                                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17453803" author="apachespark" created="Mon, 6 Dec 2021 06:44:13 +0000"  >&lt;p&gt;User &apos;daijyc&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/34816&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/34816&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17453804" author="apachespark" created="Mon, 6 Dec 2021 06:44:42 +0000"  >&lt;p&gt;User &apos;daijyc&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/34816&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/34816&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17454714" author="srowen" created="Tue, 7 Dec 2021 15:31:54 +0000"  >&lt;p&gt;Issue resolved by pull request 34816&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/34816&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/34816&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0xdfc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12350369">3.3.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>