<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:33:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-10901] spark.yarn.user.classpath.first doesn&apos;t work</title>
                <link>https://issues.apache.org/jira/browse/SPARK-10901</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;spark.yarn.user.classpath.first doesn&apos;t properly add the app jar to the system class path first.  It has some logic there that i believe works for local files but running on yarn using distributed cache to distribute the app jar doesn&apos;t put _&lt;em&gt;app&lt;/em&gt;_.jar into the classpath at all.&lt;/p&gt;

&lt;p&gt;This is a break in backwards compatibility.&lt;/p&gt;

&lt;p&gt;Note that in this case the user is trying to use different version of kryo (which used to work in spark 1.2) and the new configs for this: spark.&lt;/p&gt;
{driver, executor}
&lt;p&gt;.userClassPathFirst don&apos;t allow this as it errors out with:&lt;/p&gt;

&lt;p&gt;User class threw exception: java.lang.LinkageError: loader constraint violation: loader (instance of org/apache/spark/util/ChildFirstURLClassLoader) previously initiated loading for a different type with name &quot;com/esotericsoftware/kryo/Kryo&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12901924">SPARK-10901</key>
            <summary>spark.yarn.user.classpath.first doesn&apos;t work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tgraves">Thomas Graves</assignee>
                                    <reporter username="tgraves">Thomas Graves</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Oct 2015 15:51:03 +0000</created>
                <updated>Tue, 6 Oct 2015 17:30:38 +0000</updated>
                            <resolved>Tue, 6 Oct 2015 17:30:38 +0000</resolved>
                                    <version>1.5.1</version>
                                    <fixVersion>1.5.2</fixVersion>
                    <fixVersion>1.6.0</fixVersion>
                                    <component>YARN</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14940092" author="vanzin" created="Thu, 1 Oct 2015 17:21:56 +0000"  >&lt;p&gt;As a potential workaround, he can add his app jar (or the kryo jar) to &lt;tt&gt;spark.(executor,driver).extraClassPath&lt;/tt&gt;. If he distributes the jars with the application (using &lt;tt&gt;--jars&lt;/tt&gt; in cluster mode or &lt;tt&gt;spark.yarn.dist.files&lt;/tt&gt; in client mode), just add the jar names without any path and they should be prepended to the app&apos;s classpath.&lt;/p&gt;</comment>
                            <comment id="14940192" author="apachespark" created="Thu, 1 Oct 2015 18:32:03 +0000"  >&lt;p&gt;User &apos;tgravescs&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/8959&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/8959&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14940264" author="tgraves" created="Thu, 1 Oct 2015 19:17:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vanzin&quot; class=&quot;user-hover&quot; rel=&quot;vanzin&quot;&gt;vanzin&lt;/a&gt; thanks for the suggestion.  Did you work on the new user class path stuff at all?  Wondering if you might have ideas why that didn&apos;t work.  It looks like its loading both versions.&lt;/p&gt;</comment>
                            <comment id="14940289" author="vanzin" created="Thu, 1 Oct 2015 19:38:38 +0000"  >&lt;p&gt;Yes I did. I&apos;d have to look more closely for why `userClassPathFirst` is not working for this case, nothing pops up at the moment.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 7 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mi8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>