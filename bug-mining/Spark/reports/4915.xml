<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:53:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-20935] A daemon thread, &quot;BatchedWriteAheadLog Writer&quot;, left behind after terminating StreamingContext.</title>
                <link>https://issues.apache.org/jira/browse/SPARK-20935</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;With batched write ahead log on by default in driver (&lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-11731&quot; title=&quot;Enable batching on Driver WriteAheadLog by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-11731&quot;&gt;&lt;del&gt;SPARK-11731&lt;/del&gt;&lt;/a&gt;), if there is no receiver based &lt;tt&gt;InputDStream&lt;/tt&gt;, the &quot;BatchedWriteAheadLog Writer&quot; thread created by &lt;tt&gt;BatchedWriteAheadLog&lt;/tt&gt; never get shutdown. &lt;/p&gt;

&lt;p&gt;The root cause is due to &lt;a href=&quot;https://github.com/apache/spark/blob/master/streaming/src/main/scala/org/apache/spark/streaming/scheduler/ReceiverTracker.scala#L168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/blob/master/streaming/src/main/scala/org/apache/spark/streaming/scheduler/ReceiverTracker.scala#L168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;that it never call &lt;tt&gt;ReceivedBlockTracker.stop()&lt;/tt&gt; (which in turn call &lt;tt&gt;BatchedWriteAheadLog.close()&lt;/tt&gt;) if there is no receiver based input.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13076122">SPARK-20935</key>
            <summary>A daemon thread, &quot;BatchedWriteAheadLog Writer&quot;, left behind after terminating StreamingContext.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gurwls223">Hyukjin Kwon</assignee>
                                    <reporter username="chtyim">Terence Yim</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 May 2017 08:14:08 +0000</created>
                <updated>Mon, 12 Dec 2022 18:10:56 +0000</updated>
                            <resolved>Sun, 11 Jun 2017 08:55:24 +0000</resolved>
                                    <version>1.6.3</version>
                    <version>2.1.1</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>DStreams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16030879" author="srowen" created="Wed, 31 May 2017 09:18:19 +0000"  >&lt;p&gt;CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tdas&quot; class=&quot;user-hover&quot; rel=&quot;tdas&quot;&gt;tdas&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hyukjin.kwon&quot; class=&quot;user-hover&quot; rel=&quot;hyukjin.kwon&quot;&gt;hyukjin.kwon&lt;/a&gt; who touched this code. It does look like it must be stop()-ed in all cases, because it&apos;s started in the constructor.  Seems OK to propose a PR, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chtyim&quot; class=&quot;user-hover&quot; rel=&quot;chtyim&quot;&gt;chtyim&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16034035" author="gurwls223" created="Fri, 2 Jun 2017 02:03:26 +0000"  >&lt;p&gt;Thanks for pinging me. Could we just always stop() &lt;tt&gt;ReceivedBlockTracker&lt;/tt&gt; and require &lt;tt&gt;WriteAheadLog.close()&lt;/tt&gt; to be idempotent and make its implementations as so? I could propose a PR if it sounds okay instead.&lt;/p&gt;</comment>
                            <comment id="16038549" author="srowen" created="Tue, 6 Jun 2017 10:19:47 +0000"  >&lt;p&gt;Sounds OK to me &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hyukjin.kwon&quot; class=&quot;user-hover&quot; rel=&quot;hyukjin.kwon&quot;&gt;hyukjin.kwon&lt;/a&gt; if you&apos;re up for it&lt;/p&gt;</comment>
                            <comment id="16040176" author="apachespark" created="Wed, 7 Jun 2017 05:02:02 +0000"  >&lt;p&gt;User &apos;HyukjinKwon&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/18224&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/18224&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16045874" author="srowen" created="Sun, 11 Jun 2017 08:55:24 +0000"  >&lt;p&gt;Issue resolved by pull request 18224&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/18224&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/18224&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fomv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>