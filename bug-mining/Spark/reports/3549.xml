<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:43:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-15315] CSV datasource writes garbage  for complex  types instead of rasing error. </title>
                <link>https://issues.apache.org/jira/browse/SPARK-15315</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Complex types support does not seem to exist yet for csv writer.  Error should be raised instead of writing garbage into the files. &lt;/p&gt;

&lt;p&gt;Read throw error java.lang.RuntimeException: Unsupported type: map &lt;/p&gt;

&lt;p&gt;Repro:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Seq((1, Map(&lt;span class=&quot;code-quote&quot;&gt;&quot;Tesla&quot;&lt;/span&gt; -&amp;gt; 3))).toDF(&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;cars&quot;&lt;/span&gt;).write.csv(&lt;span class=&quot;code-quote&quot;&gt;&quot;/tmp/output&quot;&lt;/span&gt;)

cat part-r-00007-f684166f-ac28-48a1-99dc-1bb2c2ef1164.csv
1,org.apache.spark.sql.catalyst.expressions.UnsafeMapData@6d10824e

Seq((1, Array(&lt;span class=&quot;code-quote&quot;&gt;&quot;Tesla&quot;&lt;/span&gt;))).toDF(&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;cars&quot;&lt;/span&gt;).write.mode(&lt;span class=&quot;code-quote&quot;&gt;&quot;overwrite&quot;&lt;/span&gt;).csv(&lt;span class=&quot;code-quote&quot;&gt;&quot;/tmp/output&quot;&lt;/span&gt;)

cat part-r-00007-5bc39b53-25b6-4802-a98d-ec0cbd0e189a.csv 
1,org.apache.spark.sql.catalyst.expressions.UnsafeArrayData@a7e180b5


scala&amp;gt; Seq((1, &lt;span class=&quot;code-quote&quot;&gt;&quot;Tesla&quot;&lt;/span&gt;)).toDF(&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;).select(struct(&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;)).write.mode(&lt;span class=&quot;code-quote&quot;&gt;&quot;overwrite&quot;&lt;/span&gt;).csv(&lt;span class=&quot;code-quote&quot;&gt;&quot;/tmp/output&quot;&lt;/span&gt;)

cat part-r-00007-e0c688e1-e04d-4fa0-baf9-31183871ef6d.csv 
&lt;span class=&quot;code-quote&quot;&gt;&quot;[0,1,1800000005,616c736554]&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12969609">SPARK-15315</key>
            <summary>CSV datasource writes garbage  for complex  types instead of rasing error. </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tsuresh">Suresh Thalamati</assignee>
                                    <reporter username="tsuresh">Suresh Thalamati</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 May 2016 19:21:06 +0000</created>
                <updated>Thu, 26 May 2016 02:03:55 +0000</updated>
                            <resolved>Tue, 24 May 2016 00:15:38 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15283042" author="tsuresh" created="Fri, 13 May 2016 19:21:54 +0000"  >&lt;p&gt;I am working on submitting PR for this issue , will submit soon. &lt;/p&gt;</comment>
                            <comment id="15283051" author="apachespark" created="Fri, 13 May 2016 19:35:03 +0000"  >&lt;p&gt;User &apos;sureshthalamati&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/13105&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/13105&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15297398" author="cloud_fan" created="Tue, 24 May 2016 00:15:38 +0000"  >&lt;p&gt;Issue resolved by pull request 13105&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/13105&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/13105&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15297489" author="proflin" created="Tue, 24 May 2016 01:31:37 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cloud_fan&quot; class=&quot;user-hover&quot; rel=&quot;cloud_fan&quot;&gt;cloud_fan&lt;/a&gt;, maybe as a credit we should assign this to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tsuresh&quot; class=&quot;user-hover&quot; rel=&quot;tsuresh&quot;&gt;tsuresh&lt;/a&gt;, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xy5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>