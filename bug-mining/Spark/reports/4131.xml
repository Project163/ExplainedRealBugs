<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:48:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-17819] Specified database in JDBC URL is ignored when connecting to thriftserver</title>
                <link>https://issues.apache.org/jira/browse/SPARK-17819</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Filing this based on a email thread with Reynold Xin. From the &lt;a href=&quot;http://spark.apache.org/docs/latest/sql-programming-guide.html#running-the-thrift-jdbcodbc-server&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;docs&lt;/a&gt;, the JDBC connection URL to the thriftserver looks like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;beeline&amp;gt; !connect jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//&amp;lt;host&amp;gt;:&amp;lt;port&amp;gt;/&amp;lt;database&amp;gt;?hive.server2.transport.mode=http;hive.server2.thrift.http.path=&amp;lt;http_endpoint&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, anything specified in &amp;lt;database&amp;gt; results in being put in default schema. I&apos;m running these with -e commands, but the shell shows the same behavior.&lt;/p&gt;

&lt;p&gt;In 2.0.1, I created a table foo in schema spark_jira:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[558|18:01:20] ~/Documents/spark/spark$ bin/beeline -u jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10006/spark_jira -n hive -e &lt;span class=&quot;code-quote&quot;&gt;&quot;show tables&quot;&lt;/span&gt;
&lt;/span&gt;Connecting to jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10006/spark_jira
&lt;/span&gt;16/10/06 18:01:28 INFO jdbc.Utils: Supplied authorities: localhost:10006
16/10/06 18:01:28 INFO jdbc.Utils: Resolved authority: localhost:10006
16/10/06 18:01:28 INFO jdbc.HiveConnection: Will &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; to open client transport with JDBC Uri: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10006/spark_jira
&lt;/span&gt;Connected to: Spark SQL (version 2.0.1)
Driver: Hive JDBC (version 1.2.1.spark2)
Transaction isolation: TRANSACTION_REPEATABLE_READ
+------------+--------------+--+
| tableName  | isTemporary  |
+------------+--------------+--+
+------------+--------------+--+
No rows selected (0.558 seconds)
Beeline version 1.2.1.spark2 by Apache Hive
Closing: 0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10006/spark_jira
&lt;/span&gt;[559|18:01:30] ~/Documents/spark/spark$ bin/beeline -u jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10006/spark_jira -n hive -e &lt;span class=&quot;code-quote&quot;&gt;&quot;show tables in spark_jira&quot;&lt;/span&gt;
&lt;/span&gt;Connecting to jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10006/spark_jira
&lt;/span&gt;16/10/06 18:01:34 INFO jdbc.Utils: Supplied authorities: localhost:10006
16/10/06 18:01:34 INFO jdbc.Utils: Resolved authority: localhost:10006
16/10/06 18:01:34 INFO jdbc.HiveConnection: Will &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; to open client transport with JDBC Uri: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10006/spark_jira
&lt;/span&gt;Connected to: Spark SQL (version 2.0.1)
Driver: Hive JDBC (version 1.2.1.spark2)
Transaction isolation: TRANSACTION_REPEATABLE_READ
+------------+--------------+--+
| tableName  | isTemporary  |
+------------+--------------+--+
| foo        | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
+------------+--------------+--+
1 row selected (0.664 seconds)
Beeline version 1.2.1.spark2 by Apache Hive
Closing: 0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10006/spark_jira&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I also see this in Spark 1.6.2:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[555|18:13:32] ~/Documents/spark/spark16$ bin/beeline -u jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10005/spark_jira -n hive -e &lt;span class=&quot;code-quote&quot;&gt;&quot;show tables&quot;&lt;/span&gt;
&lt;/span&gt;Connecting to jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10005/spark_jira
&lt;/span&gt;16/10/06 18:13:37 INFO jdbc.Utils: Supplied authorities: localhost:10005
16/10/06 18:13:37 INFO jdbc.Utils: Resolved authority: localhost:10005
16/10/06 18:13:37 INFO jdbc.HiveConnection: Will &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; to open client transport with JDBC Uri: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10005/spark_jira
&lt;/span&gt;Connected to: Spark SQL (version 1.6.2)
Driver: Hive JDBC (version 1.2.1.spark2)
Transaction isolation: TRANSACTION_REPEATABLE_READ
+--------------+--------------+--+
|  tableName   | isTemporary  |
+--------------+--------------+--+
| all_types    | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| order_items  | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| orders       | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| users        | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
+--------------+--------------+--+
4 rows selected (0.653 seconds)
Beeline version 1.2.1.spark2 by Apache Hive
Closing: 0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10005/spark_jira
&lt;/span&gt;[556|18:13:39] ~/Documents/spark/spark16$ bin/beeline -u jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10005/spark_jira -n hive -e &lt;span class=&quot;code-quote&quot;&gt;&quot;show tables in spark_jira&quot;&lt;/span&gt;
&lt;/span&gt;Connecting to jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10005/spark_jira
&lt;/span&gt;16/10/06 18:13:45 INFO jdbc.Utils: Supplied authorities: localhost:10005
16/10/06 18:13:45 INFO jdbc.Utils: Resolved authority: localhost:10005
16/10/06 18:13:45 INFO jdbc.HiveConnection: Will &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; to open client transport with JDBC Uri: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10005/spark_jira
&lt;/span&gt;Connected to: Spark SQL (version 1.6.2)
Driver: Hive JDBC (version 1.2.1.spark2)
Transaction isolation: TRANSACTION_REPEATABLE_READ
+------------+--------------+--+
| tableName  | isTemporary  |
+------------+--------------+--+
| foo        | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
+------------+--------------+--+
1 row selected (0.633 seconds)
Beeline version 1.2.1.spark2 by Apache Hive
Closing: 0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10005/spark_jira&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This appeared to work back in Spark 1.4.1:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[560|18:17:19] ~/Documents/spark/spark14$ bin/beeline -u jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:11001/imdb -n hive -e &lt;span class=&quot;code-quote&quot;&gt;&quot;show tables&quot;&lt;/span&gt;
&lt;/span&gt;scan complete in 2ms
Connecting to jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:11001/imdb
&lt;/span&gt;Connected to: Spark SQL (version 1.4.1)
Driver: Spark Project Core (version 1.4.1)
Transaction isolation: TRANSACTION_REPEATABLE_READ
+------------------+--------------+
|    tableName     | isTemporary  |
+------------------+--------------+
| aka_name         | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| aka_title        | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| cast_info        | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| char_name        | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| company_name     | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| complete_cast    | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| foo              | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| keyword          | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| movie_companies  | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| movie_info       | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| movie_keyword    | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| movie_link       | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| name             | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| person_info      | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| title            | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
+------------------+--------------+
15 rows selected (0.519 seconds)
Beeline version 1.4.1 by Apache Hive
Closing: 0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:11001/imdb
&lt;/span&gt;[561|18:17:36] ~/Documents/spark/spark14$ bin/beeline -u jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:11001/imdb -n hive -e &lt;span class=&quot;code-quote&quot;&gt;&quot;show tables in imdb&quot;&lt;/span&gt;
&lt;/span&gt;scan complete in 1ms
Connecting to jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:11001/imdb
&lt;/span&gt;Connected to: Spark SQL (version 1.4.1)
Driver: Spark Project Core (version 1.4.1)
Transaction isolation: TRANSACTION_REPEATABLE_READ
+------------------+--------------+
|    tableName     | isTemporary  |
+------------------+--------------+
| aka_name         | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| aka_title        | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| cast_info        | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| char_name        | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| company_name     | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| complete_cast    | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| foo              | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| keyword          | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| movie_companies  | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| movie_info       | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| movie_keyword    | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| movie_link       | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| name             | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| person_info      | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
| title            | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
+------------------+--------------+
15 rows selected (0.509 seconds)
Beeline version 1.4.1 by Apache Hive
Closing: 0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:11001/imdb
&lt;/span&gt;[562|18:17:43] ~/Documents/spark/spark14$ bin/beeline -u jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:11001/imdb -n hive -e &lt;span class=&quot;code-quote&quot;&gt;&quot;show tables in &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;
&lt;/span&gt;scan complete in 2ms
Connecting to jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:11001/imdb
&lt;/span&gt;Connected to: Spark SQL (version 1.4.1)
Driver: Spark Project Core (version 1.4.1)
Transaction isolation: TRANSACTION_REPEATABLE_READ
+------------+--------------+
| tableName  | isTemporary  |
+------------+--------------+
| foo        | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;        |
+------------+--------------+
1 row selected (0.511 seconds)
Beeline version 1.4.1 by Apache Hive
Closing: 0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:11001/imdb&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13010338">SPARK-17819</key>
            <summary>Specified database in JDBC URL is ignored when connecting to thriftserver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dongjoon">Dongjoon Hyun</assignee>
                                    <reporter username="tnemet">Todd Nemet</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Oct 2016 01:22:46 +0000</created>
                <updated>Mon, 26 Dec 2016 20:31:58 +0000</updated>
                            <resolved>Mon, 17 Oct 2016 03:16:08 +0000</resolved>
                                    <version>1.6.2</version>
                    <version>2.0.0</version>
                    <version>2.0.1</version>
                                    <fixVersion>2.0.2</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15556450" author="dongjoon" created="Fri, 7 Oct 2016 22:31:51 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tnemet&quot; class=&quot;user-hover&quot; rel=&quot;tnemet&quot;&gt;tnemet&lt;/a&gt;.&lt;br/&gt;
I&apos;m working on this and make a PR for this today.&lt;/p&gt;</comment>
                            <comment id="15556857" author="apachespark" created="Sat, 8 Oct 2016 01:15:05 +0000"  >&lt;p&gt;User &apos;dongjoon-hyun&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/15399&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/15399&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15581049" author="dongjoon" created="Mon, 17 Oct 2016 03:11:58 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rxin&quot; class=&quot;user-hover&quot; rel=&quot;rxin&quot;&gt;rxin&lt;/a&gt;.&lt;br/&gt;
Could you review the PR? In fact, it was an addition of 3 lines.&lt;/p&gt;</comment>
                            <comment id="15581130" author="apachespark" created="Mon, 17 Oct 2016 03:59:05 +0000"  >&lt;p&gt;User &apos;dongjoon-hyun&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/15507&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/15507&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13030569">SPARK-19000</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34jw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>