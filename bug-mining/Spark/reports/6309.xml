<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:04:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-24894] Invalid DNS name due to hostname truncation </title>
                <link>https://issues.apache.org/jira/browse/SPARK-24894</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;The truncation for hostname happening&#160;here&#160;&lt;a href=&quot;https://github.com/apache/spark/blob/5ff1b9ba1983d5601add62aef64a3e87d07050eb/resource-managers/kubernetes/core/src/main/scala/org/apache/spark/deploy/k8s/features/BasicExecutorFeatureStep.scala#L77&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/blob/5ff1b9ba1983d5601add62aef64a3e87d07050eb/resource-managers/kubernetes/core/src/main/scala/org/apache/spark/deploy/k8s/features/BasicExecutorFeatureStep.scala#L77&lt;/a&gt;&#160; is a problematic and can lead to DNS names starting with &quot;-&quot;.&#160;&lt;/p&gt;

&lt;p&gt;Originally filled&#160;here :&#160;&lt;a href=&quot;https://github.com/GoogleCloudPlatform/spark-on-k8s-operator/issues/229&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/GoogleCloudPlatform/spark-on-k8s-operator/issues/229&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;```&lt;br/&gt;
&lt;tt&gt;2018-07-23 21:21:42 ERROR Utils:91 - Uncaught exception in thread kubernetes-pod-allocator io.fabric8.kubernetes.client.KubernetesClientException: Failure executing: POST at: &lt;a href=&quot;https://kubernetes.default.svc/api/v1/namespaces/default/pods&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://kubernetes.default.svc/api/v1/namespaces/default/pods&lt;/a&gt;. Message: Pod &quot;user-archetypes-all-weekly-1532380861251850404-1532380862321-exec-9&quot; is invalid: spec.hostname: Invalid value: &quot;&lt;del&gt;archetypes-all-weekly-1532380861251850404-1532380862321-exec-9&quot;: a DNS-1123 label must consist of lower case alphanumeric characters or &apos;&lt;/del&gt;&apos;, and must start and end with an alphanumeric character (e.g. &apos;my-name&apos;, or &apos;123-abc&apos;, regex used for validation is &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;a-z0-9&amp;#93;&lt;/span&gt;(&lt;span class=&quot;error&quot;&gt;&amp;#91;-a-z0-9&amp;#93;&lt;/span&gt;&lt;b&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;a-z0-9&amp;#93;&lt;/span&gt;)?&apos;). Received status: Status(apiVersion=v1, code=422, details=StatusDetails(causes=[StatusCause(field=spec.hostname, message=Invalid value: &quot;&lt;del&gt;archetypes-all-weekly-1532380861251850404-1532380862321-exec-9&quot;: a DNS-1123 label must consist of lower case alphanumeric characters or &apos;&lt;/del&gt;&apos;, and must start and end with an alphanumeric character (e.g. &apos;my-name&apos;, or &apos;123-abc&apos;, regex used for validation is &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;a-z0-9&amp;#93;&lt;/span&gt;(&lt;span class=&quot;error&quot;&gt;&amp;#91;-a-z0-9&amp;#93;&lt;/span&gt;&lt;/b&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;a-z0-9&amp;#93;&lt;/span&gt;)?&apos;), reason=FieldValueInvalid, additionalProperties={})], group=null, kind=Pod, name=user-archetypes-all-weekly-1532380861251850404-1532380862321-exec-9, retryAfterSeconds=null, uid=null, additionalProperties={}), kind=Status, message=Pod &quot;user-archetypes-all-weekly-1532380861251850404-1532380862321-exec-9&quot; is invalid: spec.hostname: Invalid value: &quot;&lt;del&gt;archetypes-all-weekly-1532380861251850404-1532380862321-exec-9&quot;: a DNS-1123 label must consist of lower case alphanumeric characters or &apos;&lt;/del&gt;&apos;, and must start and end with an alphanumeric character (e.g. &apos;my-name&apos;, or &apos;123-abc&apos;, regex used for validation is &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;a-z0-9&amp;#93;&lt;/span&gt;(&lt;span class=&quot;error&quot;&gt;&amp;#91;-a-z0-9&amp;#93;&lt;/span&gt;*&lt;span class=&quot;error&quot;&gt;&amp;#91;a-z0-9&amp;#93;&lt;/span&gt;)?&apos;), metadata=ListMeta(resourceVersion=null, selfLink=null, additionalProperties={}), reason=Invalid, status=Failure, additionalProperties={}). at io.fabric8.kubernetes.client.dsl.base.OperationSupport.requestFailure(OperationSupport.java:470) at io.fabric8.kubernetes.client.dsl.base.OperationSupport.assertResponseCode(OperationSupport.java:409) at io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleResponse(OperationSupport.java:379) at io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleResponse(OperationSupport.java:343) at io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleCreate(OperationSupport.java:226) at io.fabric8.kubernetes.client.dsl.base.BaseOperation.handleCreate(BaseOperation.java:769) at io.fabric8.kubernetes.client.dsl.base.BaseOperation.create(BaseOperation.java:356) at org.apache.spark.scheduler.cluster.k8s.KubernetesClusterSchedulerBackend$$anon$1$$anonfun$3$$anonfun$apply$3.apply(KubernetesClusterSchedulerBackend.scala:140) at org.apache.spark.scheduler.cluster.k8s.KubernetesClusterSchedulerBackend$$anon$1$$anonfun$3$$anonfun$apply$3.apply(KubernetesClusterSchedulerBackend.scala:140) at org.apache.spark.util.Utils$.tryLog(Utils.scala:1922) at org.apache.spark.scheduler.cluster.k8s.KubernetesClusterSchedulerBackend$$anon$1$$anonfun$3.apply(KubernetesClusterSchedulerBackend.scala:139) at org.apache.spark.scheduler.cluster.k8s.KubernetesClusterSchedulerBackend$$anon$1$$anonfun$3.apply(KubernetesClusterSchedulerBackend.scala:138) at scala.collection.MapLike$MappedValues$$anonfun$foreach$3.apply(MapLike.scala:245) at scala.collection.MapLike$MappedValues$$anonfun$foreach$3.apply(MapLike.scala:245) at scala.collection.TraversableLike$WithFilter$$anonfun$foreach$1.apply(TraversableLike.scala:733) at scala.collection.mutable.HashMap$$anonfun$foreach$1.apply(HashMap.scala:99) at scala.collection.mutable.HashMap$$anonfun$foreach$1.apply(HashMap.scala:99) at scala.collection.mutable.HashTable$class.foreachEntry(HashTable.scala:230) at scala.collection.mutable.HashMap.foreachEntry(HashMap.scala:40) at scala.collection.mutable.HashMap.foreach(HashMap.scala:99) at scala.collection.TraversableLike$WithFilter.foreach(TraversableLike.scala:732) at scala.collection.MapLike$MappedValues.foreach(MapLike.scala:245) at scala.collection.TraversableLike$class.map(TraversableLike.scala:234) at scala.collection.AbstractTraversable.map(Traversable.scala:104) at org.apache.spark.scheduler.cluster.k8s.KubernetesClusterSchedulerBackend$$anon$1.run(KubernetesClusterSchedulerBackend.scala:145) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748)&lt;/tt&gt;&lt;br/&gt;
```&lt;/p&gt;</description>
                <environment></environment>
        <key id="13173948">SPARK-24894</key>
            <summary>Invalid DNS name due to hostname truncation </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vanzin">Marcelo Masiero Vanzin</assignee>
                                    <reporter username="dharmesh.kakadia">Dharmesh Kakadia</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Jul 2018 22:53:59 +0000</created>
                <updated>Sun, 17 May 2020 18:23:55 +0000</updated>
                            <resolved>Tue, 19 Feb 2019 23:20:40 +0000</resolved>
                                    <version>2.3.1</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>Kubernetes</component>
                    <component>Spark Core</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16554602" author="liyinan926" created="Tue, 24 Jul 2018 18:01:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mcheah&quot; class=&quot;user-hover&quot; rel=&quot;mcheah&quot;&gt;mcheah&lt;/a&gt;. We need to make sure the truncation leads to a valid hostname.&lt;/p&gt;</comment>
                            <comment id="17039580" author="thi.nguyen" created="Wed, 19 Feb 2020 00:16:11 +0000"  >&lt;p&gt;Why is Fix Version 3.0.0? This looks like a bug fix to me, so should&apos;ve been in a patch version?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3w75j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>