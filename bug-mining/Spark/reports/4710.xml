<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:52:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-19641] JSON schema inference in DROPMALFORMED mode produces incorrect schema</title>
                <link>https://issues.apache.org/jira/browse/SPARK-19641</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;In &lt;tt&gt;DROPMALFORMED&lt;/tt&gt; mode the inferred schema may incorrectly contain no columns. This occurs when one document contains a valid JSON value (such as a string or number) and the other documents contain objects or arrays.&lt;/p&gt;

&lt;p&gt;When the default case in &lt;tt&gt;JsonInferSchema.compatibleRootType&lt;/tt&gt; is reached when merging a &lt;tt&gt;StringType&lt;/tt&gt; and a &lt;tt&gt;StructType&lt;/tt&gt; the resulting type will be a &lt;tt&gt;StringType&lt;/tt&gt;, which is then discarded because a &lt;tt&gt;StructType&lt;/tt&gt; is expected.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13043826">SPARK-19641</key>
            <summary>JSON schema inference in DROPMALFORMED mode produces incorrect schema</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gurwls223">Hyukjin Kwon</assignee>
                                    <reporter username="NathanHowell">Nathan Howell</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Feb 2017 01:39:26 +0000</created>
                <updated>Mon, 12 Dec 2022 18:11:06 +0000</updated>
                            <resolved>Mon, 3 Apr 2017 09:45:36 +0000</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15871152" author="maropu" created="Fri, 17 Feb 2017 04:26:05 +0000"  >&lt;p&gt;Could you show us a simple query to reproduce this? cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hyukjin.kwon&quot; class=&quot;user-hover&quot; rel=&quot;hyukjin.kwon&quot;&gt;hyukjin.kwon&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15871196" author="gurwls223" created="Fri, 17 Feb 2017 05:22:56 +0000"  >&lt;p&gt;Ah, thanks for cc&apos;ing me. I happened to see the related comment. I will leave them here just in case anyone is curious.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/spark/pull/16386#issuecomment-280525182&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/16386#issuecomment-280525182&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/NathanHowell/spark/commit/e233fd03346a73b3b447fa4c24f3b12c8b2e53ae&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/NathanHowell/spark/commit/e233fd03346a73b3b447fa4c24f3b12c8b2e53ae&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15871202" author="maropu" created="Fri, 17 Feb 2017 05:26:53 +0000"  >&lt;p&gt;okay, thanks!&lt;/p&gt;</comment>
                            <comment id="15939530" author="gurwls223" created="Fri, 24 Mar 2017 01:23:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=NathanHowell&quot; class=&quot;user-hover&quot; rel=&quot;NathanHowell&quot;&gt;NathanHowell&lt;/a&gt;, I just happened to revisit this. Are you going to open a PR with the change?&lt;/p&gt;</comment>
                            <comment id="15939547" author="nathanhowell" created="Fri, 24 Mar 2017 01:40:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hyukjin.kwon&quot; class=&quot;user-hover&quot; rel=&quot;hyukjin.kwon&quot;&gt;hyukjin.kwon&lt;/a&gt;, I&apos;m super busy through next Tuesday. I can get it open it before then but probably won&apos;t have time to do any work on it until later in the week. Are you trying to get this in before the 2.2 branch?&lt;/p&gt;</comment>
                            <comment id="15939570" author="gurwls223" created="Fri, 24 Mar 2017 02:13:34 +0000"  >&lt;p&gt;Not sure, just IMHO, it sounds not super urgent one because schema inference is not recommended in the production up to my knowledge. I think it is fine to take your time &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;Otherwise, I am willing to pick up your commit and open a PR which should credit to you if you want.&lt;/p&gt;</comment>
                            <comment id="15939572" author="nathanhowell" created="Fri, 24 Mar 2017 02:15:44 +0000"  >&lt;p&gt;Please pick it up if you have cycles and want to take it over, otherwise I&apos;ll get to it later next week. Thanks!&lt;/p&gt;</comment>
                            <comment id="15950368" author="apachespark" created="Fri, 31 Mar 2017 05:54:03 +0000"  >&lt;p&gt;User &apos;HyukjinKwon&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/17492&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/17492&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15953203" author="cloud_fan" created="Mon, 3 Apr 2017 09:45:36 +0000"  >&lt;p&gt;Issue resolved by pull request 17492&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/17492&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/17492&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3a7lj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12338275">2.2.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>