<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:04:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-26103] OutOfMemory error with large query plans</title>
                <link>https://issues.apache.org/jira/browse/SPARK-26103</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Large query plans can cause OutOfMemory errors in the Spark driver.&lt;/p&gt;

&lt;p&gt;We are creating data frames that are not extremely large but contain lots of nested joins.&#160; These plans execute efficiently because of caching and partitioning, but the text version of the query plans generated can be hundreds of megabytes.&#160; Running&#160;many of these in parallel causes our driver process to fail.&lt;/p&gt;

&lt;p&gt;{{{{Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space at java.util.Arrays.copyOfRange(Arrays.java:2694) at java.lang.String.&amp;lt;init&amp;gt;(String.java:203) at java.lang.StringBuilder.toString(StringBuilder.java:405) at scala.StringContext.standardInterpolator(StringContext.scala:125) at scala.StringContext.s(StringContext.scala:90) at org.apache.spark.sql.execution.QueryExecution.toString(QueryExecution.scala:70) at org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:52) at org.apache.spark.sql.execution.datasources.InsertIntoHadoopFsRelation.run(InsertIntoHadoopFsRelation.scala:108) }}}}&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;A similar error is reported in &lt;a href=&quot;https://stackoverflow.com/questions/38307258/out-of-memory-error-when-writing-out-spark-dataframes-to-parquet-format&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/38307258/out-of-memory-error-when-writing-out-spark-dataframes-to-parquet-format&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Code exists to truncate the string if the number of output columns is larger than 25, but not if the rest of the query plan is huge.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Amazon EMR 5.19&lt;/p&gt;

&lt;p&gt;1 c5.4xlarge master instance&lt;/p&gt;

&lt;p&gt;1 c5.4xlarge core instance&lt;/p&gt;

&lt;p&gt;2 c5.4xlarge task instances&lt;/p&gt;</environment>
        <key id="13199107">SPARK-26103</key>
            <summary>OutOfMemory error with large query plans</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="DaveDeCaprio">Dave DeCaprio</assignee>
                                    <reporter username="DaveDeCaprio">Dave DeCaprio</reporter>
                        <labels>
                    </labels>
                <created>Sat, 17 Nov 2018 20:07:48 +0000</created>
                <updated>Wed, 11 Sep 2019 01:13:13 +0000</updated>
                            <resolved>Wed, 13 Mar 2019 16:59:11 +0000</resolved>
                                    <version>2.3.0</version>
                    <version>2.3.1</version>
                    <version>2.3.2</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16690815" author="apachespark" created="Sun, 18 Nov 2018 06:39:28 +0000"  >&lt;p&gt;User &apos;DaveDeCaprio&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/23076&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/23076&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16699239" author="vanzin" created="Mon, 26 Nov 2018 16:31:31 +0000"  >&lt;p&gt;The proposed patch would probably also fix &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-25380&quot; title=&quot;Generated plans occupy over 50% of Spark driver memory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-25380&quot;&gt;&lt;del&gt;SPARK-25380&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16702213" author="apachespark" created="Wed, 28 Nov 2018 18:06:09 +0000"  >&lt;p&gt;User &apos;DaveDeCaprio&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/23169&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/23169&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16702219" author="apachespark" created="Wed, 28 Nov 2018 18:07:12 +0000"  >&lt;p&gt;User &apos;DaveDeCaprio&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/23169&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/23169&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16769723" author="toopt4" created="Fri, 15 Feb 2019 20:54:01 +0000"  >&lt;p&gt;please merge&lt;/p&gt;</comment>
                            <comment id="16791885" author="vanzin" created="Wed, 13 Mar 2019 16:59:11 +0000"  >&lt;p&gt;Issue resolved by pull request 23169&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/23169&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/23169&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13183818">SPARK-25380</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 35 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00m5k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>