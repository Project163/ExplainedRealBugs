<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:23:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-4687] SparkContext#addFile doesn&apos;t keep file folder information</title>
                <link>https://issues.apache.org/jira/browse/SPARK-4687</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Files added with SparkContext#addFile are loaded with Utils#fetchFile before a task starts. However, Utils#fetchFile puts all files under the Spart root on the worker node. We should have an option to keep the folder information. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12758801">SPARK-4687</key>
            <summary>SparkContext#addFile doesn&apos;t keep file folder information</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sandyr">Sandy Ryza</assignee>
                                    <reporter username="jxiang">Jimmy Xiang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Dec 2014 01:11:13 +0000</created>
                <updated>Wed, 4 Mar 2015 20:43:16 +0000</updated>
                            <resolved>Thu, 5 Feb 2015 18:16:33 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14230873" author="xuefuz" created="Tue, 2 Dec 2014 02:40:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;jxiang&lt;/a&gt;, alternatively, would a new method, SparkContext.addFolder(), better fit to this use case?&lt;/p&gt;

&lt;p&gt;CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sandyr&quot; class=&quot;user-hover&quot; rel=&quot;sandyr&quot;&gt;sandyr&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rxin&quot; class=&quot;user-hover&quot; rel=&quot;rxin&quot;&gt;rxin&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14230901" author="jxiang" created="Tue, 2 Dec 2014 03:07:18 +0000"  >&lt;p&gt;If it can add files under the folder recursively, it will be great.&lt;/p&gt;</comment>
                            <comment id="14233385" author="sandyr" created="Wed, 3 Dec 2014 19:21:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pwendell&quot; class=&quot;user-hover&quot; rel=&quot;pwendell&quot;&gt;pwendell&lt;/a&gt;, do you think this is a reasonable API addition?  If so, I&apos;ll try and add it.&lt;/p&gt;</comment>
                            <comment id="14241961" author="apachespark" created="Thu, 11 Dec 2014 01:18:56 +0000"  >&lt;p&gt;User &apos;sryza&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/3670&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/3670&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14241974" author="pwendell" created="Thu, 11 Dec 2014 01:33:44 +0000"  >&lt;p&gt;I commented a bit on the JIRA after seeing this. Instead of having this can Hive just add individual files with a prefix denoting what the folder is? Maintaining addFile has been nontrivial (we found a lot of corner cases over time) so it would be good to understand what the alternative is for Hive.&lt;/p&gt;</comment>
                            <comment id="14242055" author="sandyr" created="Thu, 11 Dec 2014 03:02:28 +0000"  >&lt;p&gt;I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;xuefuz&lt;/a&gt; can probably motivate this better, but from what I understand, the main use case is Hive&apos;s map joins and map bucket joins, in which a smaller table needs to be distributed to every node.  The smaller table typically resides in HDFS, and is the output of a separate job.  For map joins, the smaller table is composed of a bunch of files in a single folder.  For map bucket joins, the smaller table is composed of a single folder with a bunch of bucket folders underneath, each containing a set of data files.  At the very least, doing the prefixing would require a bunch of extra FS operations to rename all the subfiles.  Though that might make them difficult to read from other Hive implementations?&lt;/p&gt;

&lt;p&gt;Another totally separate situation I encountered a while ago where this kind of thing would have been useful was calling &lt;a href=&quot;http://ctakes.apache.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ctakes.apache.org/&lt;/a&gt; in a distributed fashion.  Calling into it requires letting it load a bunch of files from a particular directory structure.  We ultimately had to go with a workaround that required installing the directory on every node.&lt;/p&gt;

&lt;p&gt;Beyond the issues I outlined in my patch, are there particular edge cases you&apos;re worried about where we wouldn&apos;t be able to copy the behavior from addFile?&lt;/p&gt;</comment>
                            <comment id="14242086" author="xuefuz" created="Thu, 11 Dec 2014 03:49:47 +0000"  >&lt;p&gt;I concur with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sandyr&quot; class=&quot;user-hover&quot; rel=&quot;sandyr&quot;&gt;sandyr&lt;/a&gt;&apos;s account for the need of addFolder() as it helps any Spark application from doing the same thing over and over again, possibly in a less performant way. Folder is such an natural, indispensible to some extent, extension to file in any system that deals with bits on at storage level. I&apos;d also contend that being hard to get it right shouldn&apos;t prevent us from trying and perfecting it on the way if we believe functionally it&apos;s right thing to add.&lt;/p&gt;</comment>
                            <comment id="14265416" author="pwendell" created="Tue, 6 Jan 2015 00:37:24 +0000"  >&lt;p&gt;I spent some more time looking at this and talking with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sandyr&quot; class=&quot;user-hover&quot; rel=&quot;sandyr&quot;&gt;sandyr&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joshrosen&quot; class=&quot;user-hover&quot; rel=&quot;joshrosen&quot;&gt;joshrosen&lt;/a&gt;. I think having some limited version of this is fine given that, from what I can tell, this is pretty difficult to implement outside of Spark. I am going to post further comments on the JIRA.&lt;/p&gt;</comment>
                            <comment id="14307684" author="joshrosen" created="Thu, 5 Feb 2015 18:16:33 +0000"  >&lt;p&gt;Issue resolved by pull request 3670&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/3670&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/3670&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12779210">SPARK-6144</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12754976">HIVE-8851</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12735276">SPARK-3145</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22y67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>