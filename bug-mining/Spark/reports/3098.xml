<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:38:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-13153] PySpark ML persistence failed when handle no default value parameter</title>
                <link>https://issues.apache.org/jira/browse/SPARK-13153</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;This defect find when implement task spark-13033. When add below code to doctest. &lt;br/&gt;
It looks like _transfer_params_from_java did not consider the params which do not have default value and we should handle them. &lt;/p&gt;

&lt;p&gt;    &amp;gt;&amp;gt;&amp;gt; import os, tempfile&lt;br/&gt;
    &amp;gt;&amp;gt;&amp;gt; path = tempfile.mkdtemp()&lt;br/&gt;
    &amp;gt;&amp;gt;&amp;gt; aftsr_path = path + &quot;/aftsr&quot;&lt;br/&gt;
    &amp;gt;&amp;gt;&amp;gt; aftsr.save(aftsr_path)&lt;br/&gt;
    &amp;gt;&amp;gt;&amp;gt; aftsr2 = AFTSurvivalRegression.load(aftsr_path)&lt;/p&gt;


&lt;p&gt;Exception detail.&lt;br/&gt;
ir2 = IsotonicRegression.load(ir_path)&lt;br/&gt;
Exception raised:&lt;br/&gt;
Traceback (most recent call last):&lt;br/&gt;
File &quot;C:\Python27\lib\doctest.py&quot;, line 1289, in run&lt;br/&gt;
compileflags, 1) in test.globs&lt;br/&gt;
File &quot;&amp;lt;doctest __main.IsotonicRegression&lt;span class=&quot;error&quot;&gt;&amp;#91;11&amp;#93;&lt;/span&gt;&amp;gt;&quot;, line 1, in&lt;br/&gt;
ir2 = IsotonicRegression.load(ir_path)&lt;br/&gt;
File &quot;C:\aWorkFolder\spark\spark-1.6.0-bin-hadoop2.6\spark-1.6.0-bin-hadoop2.6\python\lib\pyspark.zip\pyspark\ml\util.py&quot;, line 194, in load&lt;br/&gt;
return cls.read().load(path)&lt;br/&gt;
File &quot;C:\aWorkFolder\spark\spark-1.6.0-bin-hadoop2.6\spark-1.6.0-bin-hadoop2.6\python\lib\pyspark.zip\pyspark\ml\util.py&quot;, line 148, in load&lt;br/&gt;
instance.transfer_params_from_java()&lt;br/&gt;
File &quot;C:\aWorkFolder\spark\spark-1.6.0-bin-hadoop2.6\spark-1.6.0-bin-hadoop2.6\python\lib\pyspark.zip\pyspark\ml\wrapper.py&quot;, line 82, in tran&lt;br/&gt;
fer_params_from_java&lt;br/&gt;
value = _java2py(sc, self._java_obj.getOrDefault(java_param))&lt;br/&gt;
File &quot;C:\aWorkFolder\spark\spark-1.6.0-bin-hadoop2.6\spark-1.6.0-bin-hadoop2.6\python\lib\py4j-0.9-src.zip\py4j\java_gateway.py&quot;, line 813, in&lt;br/&gt;
_call&lt;br/&gt;
answer, self.gateway_client, self.target_id, self.name)&lt;br/&gt;
File &quot;C:\aWorkFolder\spark\spark-1.6.0-bin-hadoop2.6\spark-1.6.0-bin-hadoop2.6\python\lib\pyspark.zip\pyspark\sql\utils.py&quot;, line 45, in deco&lt;br/&gt;
return f(a, *kw)&lt;br/&gt;
File &quot;C:\aWorkFolder\spark\spark-1.6.0-bin-hadoop2.6\spark-1.6.0-bin-hadoop2.6\python\lib\py4j-0.9-src.zip\py4j\protocol.py&quot;, line 308, in get_&lt;br/&gt;
eturn_value&lt;br/&gt;
format(target_id, &quot;.&quot;, name), value)&lt;br/&gt;
Py4JJavaError: An error occurred while calling o351.getOrDefault.&lt;br/&gt;
: java.util.NoSuchElementException: Failed to find a default value for weightCol&lt;br/&gt;
at org.apache.spark.ml.param.Params$$anonfun$getOrDefault$2.apply(params.scala:647)&lt;br/&gt;
at org.apache.spark.ml.param.Params$$anonfun$getOrDefault$2.apply(params.scala:647)&lt;br/&gt;
at scala.Option.getOrElse(Option.scala:120)&lt;br/&gt;
at org.apache.spark.ml.param.Params$class.getOrDefault(params.scala:646)&lt;br/&gt;
at org.apache.spark.ml.PipelineStage.getOrDefault(Pipeline.scala:43)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:483)&lt;br/&gt;
at py4j.reflection.MethodInvoker.invoke(MethodInvoker.java:231)&lt;br/&gt;
at py4j.reflection.ReflectionEngine.invoke(ReflectionEngine.java:381)&lt;br/&gt;
at py4j.Gateway.invoke(Gateway.java:259)&lt;br/&gt;
at py4j.commands.AbstractCommand.invokeMethod(AbstractCommand.java:133)&lt;br/&gt;
at py4j.commands.CallCommand.execute(CallCommand.java:79)&lt;br/&gt;
at py4j.GatewayConnection.run(GatewayConnection.java:209)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:745)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12936227">SPARK-13153</key>
            <summary>PySpark ML persistence failed when handle no default value parameter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tommy_cug">Wenpei Yu</assignee>
                                    <reporter username="tommy_cug">Wenpei Yu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Feb 2016 02:32:55 +0000</created>
                <updated>Fri, 12 Feb 2016 02:39:17 +0000</updated>
                            <resolved>Fri, 12 Feb 2016 02:39:17 +0000</resolved>
                                                    <fixVersion>1.6.1</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>ML</component>
                    <component>PySpark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15129681" author="apachespark" created="Wed, 3 Feb 2016 03:00:09 +0000"  >&lt;p&gt;User &apos;Wenpei&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/11043&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11043&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15143919" author="mengxr" created="Fri, 12 Feb 2016 02:39:17 +0000"  >&lt;p&gt;Issue resolved by pull request 11043&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/11043&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11043&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12934357">SPARK-13033</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311024" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13033</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 40 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sc5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311620" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Shepherd</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>yanboliang</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12334009">1.6.1</customfieldvalue>
    <customfieldvalue id="12329449">2.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>