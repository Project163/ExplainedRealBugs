<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:46:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-51606] After exiting the remote local connect shell, the SparkConnectServer will not terminate.</title>
                <link>https://issues.apache.org/jira/browse/SPARK-51606</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
bin/spark-shell --remote local
WARNING: Using incubator modules: jdk.incubator.vector
Using Spark&apos;s &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; log4j profile: org/apache/spark/log4j2-defaults.properties
25/03/26 15:43:55 INFO SparkSession: Spark Connect server started with the log file: /Users/yangjie01/Tools/spark-4.1.0-SNAPSHOT-bin-3.4.1/logs/spark-cb51ad74-00e1-4567-9746-3dc9a7888ecb-org.apache.spark.sql.connect.service.SparkConnectServer-1-local.out
25/03/26 15:43:56 INFO BaseAllocator: Debug mode disabled. Enable with the VM option -Darrow.memory.debug.allocator=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;.
25/03/26 15:43:56 INFO DefaultAllocationManagerOption: allocation manager type not specified, using netty as the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; type
25/03/26 15:43:56 INFO CheckAllocator: Using DefaultAllocationManager at memory/netty/DefaultAllocationManagerFactory.class
Welcome to
&#160; &#160; &#160; ____&#160; &#160; &#160; &#160; &#160; &#160; &#160; __
&#160;&#160; &#160; / __/__&#160; ___ _____/ /__
&#160; &#160; _\ \/ _ \/ _ `/ __/&#160; &apos;_/
&#160;&#160; /___/ .__/\_,_/_/ /_/\_\ &#160; version 4.1.0-SNAPSHOT
&#160; &#160; &#160; /_/


Type in expressions to have them evaluated.
Spark connect server version 4.1.0-SNAPSHOT.
Spark session available as &lt;span class=&quot;code-quote&quot;&gt;&apos;spark&apos;&lt;/span&gt;.
&#160; &#160;
scala&amp;gt; exit 
Bye!
25/03/26 15:44:00 INFO ShutdownHookManager: Shutdown hook called
25/03/26 15:44:00 INFO ShutdownHookManager: Deleting directory /&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/folders/j2/cfn7w6795538n_416_27rkqm0000gn/T/spark-ad8dfdf4-cf2b-413f-a9e3-d6e310dff1ea


bin/spark-shell --remote local
WARNING: Using incubator modules: jdk.incubator.vector
Using Spark&apos;s &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; log4j profile: org/apache/spark/log4j2-defaults.properties
25/03/26 15:44:04 INFO SparkSession: Spark Connect server started with the log file: /Users/yangjie01/Tools/spark-4.1.0-SNAPSHOT-bin-3.4.1/logs/spark-a7b9a1dc-1e16-4e0e-b7c1-8f957d730df3-org.apache.spark.sql.connect.service.SparkConnectServer-1-local.out
25/03/26 15:44:05 INFO BaseAllocator: Debug mode disabled. Enable with the VM option -Darrow.memory.debug.allocator=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;.
25/03/26 15:44:05 INFO DefaultAllocationManagerOption: allocation manager type not specified, using netty as the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; type
25/03/26 15:44:05 INFO CheckAllocator: Using DefaultAllocationManager at memory/netty/DefaultAllocationManagerFactory.class
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.spark.SparkException: org.sparkproject.io.grpc.StatusRuntimeException: UNAUTHENTICATED: Invalid authentication token
	at org.apache.spark.sql.connect.client.GrpcExceptionConverter.toThrowable(GrpcExceptionConverter.scala:162)
	at org.apache.spark.sql.connect.client.GrpcExceptionConverter.convert(GrpcExceptionConverter.scala:61)
	at org.apache.spark.sql.connect.client.CustomSparkConnectBlockingStub.analyzePlan(CustomSparkConnectBlockingStub.scala:75)
	at org.apache.spark.sql.connect.client.SparkConnectClient.analyze(SparkConnectClient.scala:110)
	at org.apache.spark.sql.connect.client.SparkConnectClient.analyze(SparkConnectClient.scala:256)
	at org.apache.spark.sql.connect.client.SparkConnectClient.analyze(SparkConnectClient.scala:227)
	at org.apache.spark.sql.connect.SparkSession.version$lzycompute(SparkSession.scala:92)
	at org.apache.spark.sql.connect.SparkSession.version(SparkSession.scala:91)
	at org.apache.spark.sql.application.ConnectRepl$$anon$1.&amp;lt;init&amp;gt;(ConnectRepl.scala:106)
	at org.apache.spark.sql.application.ConnectRepl$.$anonfun$doMain$1(ConnectRepl.scala:105)
	at org.apache.spark.sql.connect.SparkSession$.withLocalConnectServer(SparkSession.scala:824)
	at org.apache.spark.sql.application.ConnectRepl$.doMain(ConnectRepl.scala:67)
	at org.apache.spark.sql.application.ConnectRepl$.main(ConnectRepl.scala:57)
	at org.apache.spark.sql.application.ConnectRepl.main(ConnectRepl.scala)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.apache.spark.deploy.JavaMainApplication.start(SparkApplication.scala:52)
	at org.apache.spark.deploy.SparkSubmit.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:1027)
	at org.apache.spark.deploy.SparkSubmit.doRunMain$1(SparkSubmit.scala:204)
	at org.apache.spark.deploy.SparkSubmit.submit(SparkSubmit.scala:227)
	at org.apache.spark.deploy.SparkSubmit.doSubmit(SparkSubmit.scala:96)
	at org.apache.spark.deploy.SparkSubmit$$anon$2.doSubmit(SparkSubmit.scala:1132)
	at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:1141)
	at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)
25/03/26 15:44:05 INFO ShutdownHookManager: Shutdown hook called
25/03/26 15:44:05 INFO ShutdownHookManager: Deleting directory /&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/folders/j2/cfn7w6795538n_416_27rkqm0000gn/T/spark-17717972-4070-43c7-b306-a060de27a16e 


jps
12611 SparkSubmit

ps -ef | grep 12611 &#160; &#160; &#160; &#160; &#160; &#160;
&#160; 501 12611 &#160; &#160; 1 &#160; 0&#160; 3:43&#19979;&#21320; ttys002&#160; &#160; 0:04.77 /Users/yangjie01/Tools/zulu17/bin/java -cp hive-jackson/*:/Users/yangjie01/Tools/spark-4.1.0-SNAPSHOT-bin-3.4.1/conf/:/Users/yangjie01/Tools/spark-4.1.0-SNAPSHOT-bin-3.4.1/jars/slf4j-api-2.0.17.jar:/Users/yangjie01/Tools/spark-4.1.0-SNAPSHOT-bin-3.4.1/jars/* -Dscala.usejavacp=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Xmx1g -XX:+IgnoreUnrecognizedVMOptions --add-modules=jdk.incubator.vector --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/sun.security.action=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=java.security.jgss/sun.security.krb5=ALL-UNNAMED -Djdk.reflect.useDirectMethodHandle=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; -Dio.netty.tryReflectionSetAccessible=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; --enable-&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;-access=ALL-UNNAMED -Dderby.connection.requireAuthentication=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; org.apache.spark.deploy.SparkSubmit --master local --conf spark.app.submitTime=1742975034128 --conf spark.sql.artifact.isolation.alwaysApplyClassloader=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; --conf spark.app.name=Spark shell --conf spark.sql.artifact.isolation.enabled=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; --conf spark.submit.deployMode=client --conf spark.ui.showConsoleProgress=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; --&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.spark.sql.connect.service.SparkConnectServer --name Spark Connect server spark-internal&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13613131">SPARK-51606</key>
            <summary>After exiting the remote local connect shell, the SparkConnectServer will not terminate.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gurwls223">Hyukjin Kwon</assignee>
                                    <reporter username="LuciferYang">Yang Jie</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 26 Mar 2025 07:45:15 +0000</created>
                <updated>Fri, 28 Mar 2025 03:42:08 +0000</updated>
                            <resolved>Fri, 28 Mar 2025 03:41:46 +0000</resolved>
                                    <version>4.1.0</version>
                    <version>4.0.0</version>
                                    <fixVersion>4.0.0</fixVersion>
                                    <component>Connect</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17938496" author="luciferyang" created="Wed, 26 Mar 2025 08:09:19 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gurwls223&quot; class=&quot;user-hover&quot; rel=&quot;gurwls223&quot;&gt;gurwls223&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17938500" author="gurwls223" created="Wed, 26 Mar 2025 08:11:33 +0000"  >&lt;p&gt;thanks. Will take a look.&lt;/p&gt;</comment>
                            <comment id="17939122" author="luciferyang" created="Fri, 28 Mar 2025 03:41:46 +0000"  >&lt;p&gt;Issue resolved by pull request 50438&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/50438&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/50438&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1uzy8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>