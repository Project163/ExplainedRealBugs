<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:00:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-24755] Executor loss can cause task to not be resubmitted</title>
                <link>https://issues.apache.org/jira/browse/SPARK-24755</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;As part of &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-22074&quot; title=&quot;Task killed by other attempt task should not be resubmitted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-22074&quot;&gt;&lt;del&gt;SPARK-22074&lt;/del&gt;&lt;/a&gt;, when an executor is lost, TSM.executorLost currently checks for &quot;if (successful(index) &amp;amp;&amp;amp; !killedByOtherAttempt(index))&quot; to decide if task needs to be resubmitted for partition.&lt;/p&gt;

&lt;p&gt;Consider following:&lt;/p&gt;

&lt;p&gt;For partition P1, tasks T1 and T2 are running on exec-1 and exec-2 respectively (one of them being speculative task)&lt;/p&gt;

&lt;p&gt;T1 finishes successfully first.&lt;/p&gt;

&lt;p&gt;This results in setting &quot;killedByOtherAttempt(P1) = true&quot; due to running T2.&lt;br/&gt;
We also end up killing task T2.&lt;/p&gt;

&lt;p&gt;Now, exec-1 if/when goes MIA.&lt;br/&gt;
executorLost will no longer schedule task for P1 - since killedByOtherAttempt(P1) == true; even though P1 was hosted on T1 and there is no other copy of P1 around (T2 was killed when T1 succeeded).&lt;/p&gt;


&lt;p&gt;I noticed this bug as part of reviewing PR# 21653 for &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-13343&quot; title=&quot;speculative tasks that didn&amp;#39;t commit shouldn&amp;#39;t be marked as success&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-13343&quot;&gt;&lt;del&gt;SPARK-13343&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Essentially, &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-22074&quot; title=&quot;Task killed by other attempt task should not be resubmitted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-22074&quot;&gt;&lt;del&gt;SPARK-22074&lt;/del&gt;&lt;/a&gt; causes a regression (which I dont usually observe due to shuffle service, sigh) - and as such the fix is broken IMO.&lt;/p&gt;

&lt;p&gt;I dont have a PR handy for this, so if anyone wants to pick it up, please do feel free !&lt;br/&gt;
+CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=XuanYuan&quot; class=&quot;user-hover&quot; rel=&quot;XuanYuan&quot;&gt;XuanYuan&lt;/a&gt; who fixed &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-22074&quot; title=&quot;Task killed by other attempt task should not be resubmitted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-22074&quot;&gt;&lt;del&gt;SPARK-22074&lt;/del&gt;&lt;/a&gt; initially.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13170625">SPARK-24755</key>
            <summary>Executor loss can cause task to not be resubmitted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hthuynh2">Hieu Tri Huynh</assignee>
                                    <reporter username="mridulm80">Mridul Muralidharan</reporter>
                        <labels>
                    </labels>
                <created>Sat, 7 Jul 2018 07:30:45 +0000</created>
                <updated>Thu, 19 Jul 2018 14:53:53 +0000</updated>
                            <resolved>Thu, 19 Jul 2018 14:53:46 +0000</resolved>
                                    <version>2.3.0</version>
                                    <fixVersion>2.3.3</fixVersion>
                    <fixVersion>2.4.0</fixVersion>
                                    <component>Spark Core</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16535956" author="hthuynh2" created="Sun, 8 Jul 2018 01:51:06 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mridulm80&quot; class=&quot;user-hover&quot; rel=&quot;mridulm80&quot;&gt;mridulm80&lt;/a&gt;, since fixing this might affect my change in PR# 21653 for &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-13343&quot; title=&quot;speculative tasks that didn&amp;#39;t commit shouldn&amp;#39;t be marked as success&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-13343&quot;&gt;&lt;del&gt;SPARK-13343&lt;/del&gt;&lt;/a&gt;, if you and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=XuanYuan&quot; class=&quot;user-hover&quot; rel=&quot;XuanYuan&quot;&gt;XuanYuan&lt;/a&gt; don&apos;t mind, I can take&#160;this.&#160;&lt;/p&gt;</comment>
                            <comment id="16536016" author="mridulm80" created="Sun, 8 Jul 2018 07:43:09 +0000"  >&lt;p&gt;Go for it - thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hthuynh2&quot; class=&quot;user-hover&quot; rel=&quot;hthuynh2&quot;&gt;hthuynh2&lt;/a&gt; !&lt;/p&gt;</comment>
                            <comment id="16536107" author="xuanyuan" created="Sun, 8 Jul 2018 13:20:37 +0000"  >&lt;p&gt;No problem, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hthuynh2&quot; class=&quot;user-hover&quot; rel=&quot;hthuynh2&quot;&gt;hthuynh2&lt;/a&gt;.&lt;br/&gt;
Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mridulm80&quot; class=&quot;user-hover&quot; rel=&quot;mridulm80&quot;&gt;mridulm80&lt;/a&gt; for letting me know, I&apos;ll also watch this jira.&lt;/p&gt;</comment>
                            <comment id="16536371" author="apachespark" created="Sun, 8 Jul 2018 18:44:04 +0000"  >&lt;p&gt;User &apos;hthuynh2&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/21729&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/21729&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 19 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vmxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>