<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:25:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-6737] OutputCommitCoordinator.authorizedCommittersByStage map out of memory</title>
                <link>https://issues.apache.org/jira/browse/SPARK-6737</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;I am using spark streaming(1.3.1)  as a long time running service and out of memory after running for 7 days. &lt;/p&gt;

&lt;p&gt;I found that the field authorizedCommittersByStage in OutputCommitCoordinator class cause the OOM. &lt;br/&gt;
authorizedCommittersByStage is a map, key is StageId, value is Map&lt;span class=&quot;error&quot;&gt;&amp;#91;PartitionId, TaskAttemptId&amp;#93;&lt;/span&gt;. The OutputCommitCoordinator class has a method stageEnd which will remove stageId from authorizedCommittersByStage. But the method stageEnd is never called by DAGSchedule. And it cause the authorizedCommittersByStage&apos;s stage info never be cleaned, which cause OOM.&lt;/p&gt;

&lt;p&gt;It happens in my spark streaming program(1.3.1), I am not sure if it will appear in other spark components and other spark version.&lt;/p&gt;</description>
                <environment>&lt;p&gt;spark 1.3.1&lt;/p&gt;</environment>
        <key id="12818844">SPARK-6737</key>
            <summary>OutputCommitCoordinator.authorizedCommittersByStage map out of memory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="joshrosen">Josh Rosen</assignee>
                                    <reporter username="litao1990">Tao Li</reporter>
                        <labels>
                            <label>Bug</label>
                            <label>Core</label>
                            <label>DAGScheduler</label>
                            <label>OOM</label>
                            <label>Streaming</label>
                    </labels>
                <created>Tue, 7 Apr 2015 08:48:34 +0000</created>
                <updated>Tue, 7 Apr 2015 23:28:00 +0000</updated>
                            <resolved>Tue, 7 Apr 2015 23:28:00 +0000</resolved>
                                    <version>1.3.0</version>
                    <version>1.3.1</version>
                                    <fixVersion>1.3.1</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>DStreams</component>
                    <component>Scheduler</component>
                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14483562" author="joshrosen" created="Tue, 7 Apr 2015 17:27:02 +0000"  >&lt;p&gt;This bug is present in Spark 1.3+.  The problem lies in the interaction between DAGScheduler and OutputCommitCoordinator.  DAGScheduler only informs the OutputCommitCoordinator of stage completion for one of the less-common paths in which stages are marked as completed, whereas we should be calling it for every stage completion event.&lt;/p&gt;

&lt;p&gt;This should be pretty easy to fix with a patch to the DAGScheduler, so I&apos;ll work on putting one together shortly.&lt;/p&gt;</comment>
                            <comment id="14483609" author="apachespark" created="Tue, 7 Apr 2015 17:49:01 +0000"  >&lt;p&gt;User &apos;JoshRosen&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/5397&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/5397&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14484328" author="joshrosen" created="Tue, 7 Apr 2015 23:28:00 +0000"  >&lt;p&gt;Issue resolved by pull request 5397&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/5397&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/5397&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cw7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>