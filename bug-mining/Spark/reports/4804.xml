<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:53:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-20546] spark-class gets syntax error in posix mode</title>
                <link>https://issues.apache.org/jira/browse/SPARK-20546</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;spark-class gets the following error when running in posix mode:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;spark-class: line 78: syntax error near unexpected token `&amp;lt;&apos;
spark-class: line 78: `done &amp;lt; &amp;lt;(build_command &lt;span class=&quot;code-quote&quot;&gt;&quot;$@&quot;&lt;/span&gt;)&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
It appears to be complaining about the process substitution: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CMD=()
&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; IFS= read -d &apos;&apos; -r ARG; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
  CMD+=(&lt;span class=&quot;code-quote&quot;&gt;&quot;$ARG&quot;&lt;/span&gt;)
done &amp;lt; &amp;lt;(build_command &lt;span class=&quot;code-quote&quot;&gt;&quot;$@&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
This can be reproduced by first turning on allexport then posix mode:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;set -a -o posix &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;then run something like spark-shell which calls spark-class.&lt;/p&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
The simplest fix is probably to always turn off posix mode in spark-class before the while loop.
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
This was previously reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-8417&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;SPARK-8417&lt;/a&gt; which closed with cannot reproduce. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13068233">SPARK-20546</key>
            <summary>spark-class gets syntax error in posix mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jyu0">Jessie Yu</assignee>
                                    <reporter username="jyu0">Jessie Yu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 May 2017 20:45:39 +0000</created>
                <updated>Thu, 11 May 2017 20:01:41 +0000</updated>
                            <resolved>Fri, 5 May 2017 10:37:26 +0000</resolved>
                                    <version>2.0.2</version>
                                    <fixVersion>2.1.2</fixVersion>
                    <fixVersion>2.2.0</fixVersion>
                                    <component>Deploy</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15991678" author="srowen" created="Mon, 1 May 2017 22:24:11 +0000"  >&lt;p&gt;Are there downsides to turning off posix mode?&lt;br/&gt;
It seems reasonable if it makes this case work and doesn&apos;t affect other behavior.&lt;/p&gt;</comment>
                            <comment id="15992886" author="jyu0" created="Tue, 2 May 2017 13:27:52 +0000"  >&lt;p&gt;Given the current code relies on posix mode being off, turning it off explicitly shouldn&apos;t affect other behavior, especially since the change is confined to just the spark-class subshell. &lt;/p&gt;</comment>
                            <comment id="15994464" author="srowen" created="Wed, 3 May 2017 08:26:52 +0000"  >&lt;p&gt;Ok, seems fine to confine it to just this script with a comment about the reason. &lt;/p&gt;</comment>
                            <comment id="15995999" author="apachespark" created="Thu, 4 May 2017 01:12:03 +0000"  >&lt;p&gt;User &apos;jyu00&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/17852&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/17852&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15998058" author="srowen" created="Fri, 5 May 2017 10:37:26 +0000"  >&lt;p&gt;Issue resolved by pull request 17852&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/17852&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/17852&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ec0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>