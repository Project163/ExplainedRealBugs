<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:19:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-4037] NPE in JDBC server when calling SET</title>
                <link>https://issues.apache.org/jira/browse/SPARK-4037</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;SET spark.sql.shuffle.partitions=10;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;14/10/21 18:00:47 ERROR server.SparkSQLOperationManager: Error executing query:
java.lang.NullPointerException
	at org.apache.spark.sql.hive.HiveContext.runHive(HiveContext.scala:309)
	at org.apache.spark.sql.hive.HiveContext.runSqlHive(HiveContext.scala:272)
	at org.apache.spark.sql.hive.HiveContext.setConf(HiveContext.scala:244)
	at org.apache.spark.sql.execution.SetCommand.sideEffectResult$lzycompute(commands.scala:64)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12749579">SPARK-4037</key>
            <summary>NPE in JDBC server when calling SET</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lian cheng">Cheng Lian</assignee>
                                    <reporter username="marmbrus">Michael Armbrust</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Oct 2014 18:31:03 +0000</created>
                <updated>Fri, 12 Dec 2014 12:46:54 +0000</updated>
                            <resolved>Sat, 1 Nov 2014 22:03:25 +0000</resolved>
                                                    <fixVersion>1.2.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14179305" author="lian cheng" created="Tue, 21 Oct 2014 23:26:05 +0000"  >&lt;p&gt;This is a regression of &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-2814&quot; title=&quot;HiveThriftServer throws NPE when executing native commands&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-2814&quot;&gt;&lt;del&gt;SPARK-2814&lt;/del&gt;&lt;/a&gt;, added in &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-3729&quot; title=&quot;Null-pointer when constructing a HiveContext when settings are present&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-3729&quot;&gt;&lt;del&gt;SPARK-3729&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;One solution is let HiveContext always reuse SessionState started within the same thread, if there&apos;s none, create a new one. In this way, we don&apos;t need to override the SessionState field in HiveThriftServer2, thus eliminate this issue.&lt;/p&gt;</comment>
                            <comment id="14179598" author="lian cheng" created="Wed, 22 Oct 2014 05:18:16 +0000"  >&lt;p&gt;I think we can safely remove the global singleton SessionState created in HiveThriftServer2, and replace it with the SessionState field instance in HiveContext.&lt;/p&gt;

&lt;p&gt;The current global singleton SessionState design dates back to Shark (SharkContext.sessionState). This basically breaks session isolation in Shark, and later HiveThriftServer2 because all connections/sessions share a single SessionState instance. For example, switching current database in one connection also affects other concurrent connections (&lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-3552&quot; title=&quot;Thrift server doesn&amp;#39;t reset current database for each connection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-3552&quot;&gt;&lt;del&gt;SPARK-3552&lt;/del&gt;&lt;/a&gt;). Fixing this properly requires major refactoring of HiveContext. Considering 1.2.0 release is approaching, and Hive support will probably be rewritten against the newly introduced external data source API, I&apos;d like to fix this specific SessionState initialization issue for Spark 1.2.0 release, and leave multi-user support to a later release.&lt;/p&gt;</comment>
                            <comment id="14179651" author="apachespark" created="Wed, 22 Oct 2014 06:52:46 +0000"  >&lt;p&gt;User &apos;liancheng&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/2887&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/2887&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14193515" author="marmbrus" created="Sat, 1 Nov 2014 22:03:25 +0000"  >&lt;p&gt;Issue resolved by pull request 2887&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/2887&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/2887&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12750892">SPARK-4103</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12747919">SPARK-3939</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12744752">SPARK-3729</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12731607">SPARK-2814</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 3 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21exb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327369">1.2.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>