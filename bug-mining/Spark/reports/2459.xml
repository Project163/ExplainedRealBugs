<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:32:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-9793] PySpark DenseVector, SparseVector should override __eq__ and __hash__</title>
                <link>https://issues.apache.org/jira/browse/SPARK-9793</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-9750&quot; title=&quot;SparseMatrix should override equals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-9750&quot;&gt;&lt;del&gt;SPARK-9750&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
PySpark DenseVector and SparseVector do not override the equality operator properly.  They should use semantics, not representation, for comparison.  (This is what Scala currently does.)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12853940">SPARK-9793</key>
            <summary>PySpark DenseVector, SparseVector should override __eq__ and __hash__</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yanboliang">Yanbo Liang</assignee>
                                    <reporter username="josephkb">Joseph K. Bradley</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Aug 2015 19:14:45 +0000</created>
                <updated>Tue, 15 Sep 2015 04:37:52 +0000</updated>
                            <resolved>Tue, 15 Sep 2015 04:37:52 +0000</resolved>
                                    <version>1.5.0</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>ML</component>
                    <component>PySpark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14693594" author="yanboliang" created="Wed, 12 Aug 2015 14:35:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=josephkb&quot; class=&quot;user-hover&quot; rel=&quot;josephkb&quot;&gt;josephkb&lt;/a&gt; I think we can override the &quot;Vector._&lt;em&gt;eq&lt;/em&gt;_&quot; of Python like what Vector.equals() of Scala does, then it can compare DenseVector with SparseVector. If this make sense, I can submit a patch tomorrow. &lt;/p&gt;</comment>
                            <comment id="14693781" author="josephkb" created="Wed, 12 Aug 2015 16:35:20 +0000"  >&lt;p&gt;I agree, we can.  However, we should be careful to make sure the &lt;tt&gt;_&lt;em&gt;hash&lt;/em&gt;_&lt;/tt&gt; method matches the semantics: &lt;a href=&quot;https://docs.python.org/2/reference/datamodel.html#object.__hash__&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.python.org/2/reference/datamodel.html#object.__hash__&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14695326" author="apachespark" created="Thu, 13 Aug 2015 14:56:03 +0000"  >&lt;p&gt;User &apos;yanboliang&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/8166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/8166&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14695415" author="yanboliang" created="Thu, 13 Aug 2015 15:54:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=josephkb&quot; class=&quot;user-hover&quot; rel=&quot;josephkb&quot;&gt;josephkb&lt;/a&gt; PySpark vector currently did not implement _&lt;em&gt;hash&lt;/em&gt;_ , so I opend &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-9940&quot; title=&quot;PySpark DenseVector, SparseVector implement __hash__ method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-9940&quot;&gt;&lt;del&gt;SPARK-9940&lt;/del&gt;&lt;/a&gt; to track that issue. Let this JIRA to track _&lt;em&gt;eq&lt;/em&gt;_ issue. &lt;/p&gt;</comment>
                            <comment id="14695723" author="josephkb" created="Thu, 13 Aug 2015 18:22:23 +0000"  >&lt;p&gt;Discussed with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mengxr&quot; class=&quot;user-hover&quot; rel=&quot;mengxr&quot;&gt;mengxr&lt;/a&gt;: We&apos;re going to revert &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-9750&quot; title=&quot;SparseMatrix should override equals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-9750&quot;&gt;&lt;del&gt;SPARK-9750&lt;/del&gt;&lt;/a&gt; for 1.5 and put it in 1.6 instead.&lt;/p&gt;</comment>
                            <comment id="14696115" author="josephkb" created="Thu, 13 Aug 2015 23:06:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yanboliang&quot; class=&quot;user-hover&quot; rel=&quot;yanboliang&quot;&gt;yanboliang&lt;/a&gt;  This is not an urgent issue, but we should probably fix eq and hash in the same PR (for each language / type).  Could you please combine this with &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-9940&quot; title=&quot;PySpark DenseVector, SparseVector implement __hash__ method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-9940&quot;&gt;&lt;del&gt;SPARK-9940&lt;/del&gt;&lt;/a&gt; and likewise merge your PRs for them?  Thank you!&lt;/p&gt;</comment>
                            <comment id="14698190" author="yanboliang" created="Sat, 15 Aug 2015 09:01:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=josephkb&quot; class=&quot;user-hover&quot; rel=&quot;josephkb&quot;&gt;josephkb&lt;/a&gt; I have combined this with &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-9940&quot; title=&quot;PySpark DenseVector, SparseVector implement __hash__ method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-9940&quot;&gt;&lt;del&gt;SPARK-9940&lt;/del&gt;&lt;/a&gt; and merged the two PRs.&lt;br/&gt;
The new PR makes PySpark Vector semantic equality and hash uses first 16 entries like what Scala does.&lt;br/&gt;
It can fix the issues that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mengxr&quot; class=&quot;user-hover&quot; rel=&quot;mengxr&quot;&gt;mengxr&lt;/a&gt;&apos;s list at &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-9750&quot; title=&quot;SparseMatrix should override equals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-9750&quot;&gt;&lt;del&gt;SPARK-9750&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Python
	&lt;ul&gt;
		&lt;li&gt;DenseVector: Semantic eq but only with `DenseVector`. Default hash. -&amp;gt; bug&lt;/li&gt;
		&lt;li&gt;SparseVector: Semantic eq but wrong (only with `SparseVector` and not handling explicit zeros). Default hash. -&amp;gt; bug&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14744811" author="mengxr" created="Tue, 15 Sep 2015 04:37:52 +0000"  >&lt;p&gt;Issue resolved by pull request 8166&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/8166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/8166&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                                                <inwardlinks description="Is contained by">
                                        <issuelink>
            <issuekey id="12855992">SPARK-9953</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12845558">SPARK-9098</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12853050">SPARK-9750</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12845558">SPARK-9098</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12855997">SPARK-9954</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ijtz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311620" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Shepherd</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>mengxr</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12333083">1.6.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>