<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:04:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-26851] CachedRDDBuilder only partially implements double-checked locking</title>
                <link>https://issues.apache.org/jira/browse/SPARK-26851</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;In CachedRDDBuilder, &lt;tt&gt;cachedColumnBuffers&lt;/tt&gt; uses double-checked locking to lazily initialize &lt;tt&gt;_cachedColumnBuffers&lt;/tt&gt;. Also, clearCache uses double-checked locking to likely avoid synchronization when &lt;tt&gt;_cachedColumnBuffers&lt;/tt&gt; is still null.&lt;/p&gt;

&lt;p&gt;However, the resource (in this case, &lt;tt&gt;_cachedColumnBuffers&lt;/tt&gt;) is not declared as volatile, which could cause some visibility problems, particularly in &lt;tt&gt;clearCache&lt;/tt&gt;, which may see null reference when actually there is an RDD.&lt;/p&gt;

&lt;p&gt;From Java Concurrency in Practice by Brian Goetz et al:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Subsequent changes in the JMM (Java 5.0 and later) have enabled DCL to work if resource is made volatile, and the performance impact of this is small since volatile reads are usually only slightly more expensive than nonvolatile reads.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;There are comments in other documentation that volatile is not needed if the resource&#160;is immutable. While an RDD is immutable from a Spark user&apos;s point of view, it may not be from a JVM&apos;s point of view, since not all internal fields are final.&lt;/p&gt;

&lt;p&gt;I&apos;ve marked this as minor since the race conditions are highly unlikely.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13214695">SPARK-26851</key>
            <summary>CachedRDDBuilder only partially implements double-checked locking</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bersprockets">Bruce Robbins</assignee>
                                    <reporter username="bersprockets">Bruce Robbins</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Feb 2019 18:52:35 +0000</created>
                <updated>Fri, 22 Feb 2019 06:29:21 +0000</updated>
                            <resolved>Thu, 14 Feb 2019 06:58:20 +0000</resolved>
                                    <version>2.4.0</version>
                    <version>3.0.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16763818" author="bersprockets" created="Fri, 8 Feb 2019 18:56:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maropu&quot; class=&quot;user-hover&quot; rel=&quot;maropu&quot;&gt;maropu&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cloud_fan&quot; class=&quot;user-hover&quot; rel=&quot;cloud_fan&quot;&gt;cloud_fan&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I will let this Jira marinate for a little while, since I might have missed something (misunderstanding of the code, improvements in the JMM since initial introduction). I will make a PR if needed, but I don&apos;t want to use up 4 hours of Jenkins resources for a nonsense PR.&lt;/p&gt;</comment>
                            <comment id="16767924" author="cloud_fan" created="Thu, 14 Feb 2019 06:58:20 +0000"  >&lt;p&gt;Issue resolved by pull request 23768&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/23768&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/23768&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0sy8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>