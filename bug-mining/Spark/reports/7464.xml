<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:19:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-32715] Broadcast block pieces may memory leak</title>
                <link>https://issues.apache.org/jira/browse/SPARK-32715</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;We use Spark thrift-server as a long-running service. A bad query submitted a heavy BroadcastNestLoopJoin operation and made driver full GC. We killed the bad query but we found the driver&apos;s memory usage was still high and full GCs had very frequency. By investigating with GC dump and log, we found the broadcast may memory leak.&lt;/p&gt;

&lt;p&gt;2020-08-19T18:54:02.824-0700: [Full GC (Allocation Failure) 2020-08-19T18:54:02.824-0700: [Class Histogram (before full gc):&lt;br/&gt;
116G-&amp;gt;112G(170G), 184.9121920 secs]&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Eden: 32.0M(7616.0M)-&amp;gt;0.0B(8704.0M) Survivors: 1088.0M-&amp;gt;0.0B Heap: 116.4G(170.0G)-&amp;gt;112.9G(170.0G)&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;Metaspace: 177285K-&amp;gt;177270K(182272K)&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;num #instances #bytes class name&lt;br/&gt;
----------------------------------------------&lt;br/&gt;
1: 676531691 72035438432 [B&lt;br/&gt;
2: 676502528 32472121344 org.apache.spark.sql.catalyst.expressions.UnsafeRow&lt;br/&gt;
3: 99551 12018117568 [Ljava.lang.Object;&lt;br/&gt;
4: 26570 4349629040 [I&lt;br/&gt;
5: 6 3264536688 [Lorg.apache.spark.sql.catalyst.InternalRow;&lt;br/&gt;
6: 1708819 256299456 [C&lt;br/&gt;
7: 2338 179615208 [J&lt;br/&gt;
8: 1703669 54517408 java.lang.String&lt;br/&gt;
9: 103860 34896960 org.apache.spark.status.TaskDataWrapper&lt;br/&gt;
10: 177396 25545024 java.net.URI&lt;br/&gt;
...&lt;/p&gt;</description>
                <environment></environment>
        <key id="13324830">SPARK-32715</key>
            <summary>Broadcast block pieces may memory leak</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cltlfcjin">Lantao Jin</assignee>
                                    <reporter username="cltlfcjin">Lantao Jin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Aug 2020 11:58:06 +0000</created>
                <updated>Tue, 15 Sep 2020 01:27:07 +0000</updated>
                            <resolved>Tue, 15 Sep 2020 01:27:07 +0000</resolved>
                                    <version>2.4.6</version>
                    <version>3.0.0</version>
                    <version>3.1.0</version>
                                    <fixVersion>2.4.8</fixVersion>
                    <fixVersion>3.0.2</fixVersion>
                    <fixVersion>3.1.0</fixVersion>
                                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17185824" author="apachespark" created="Thu, 27 Aug 2020 12:33:19 +0000"  >&lt;p&gt;User &apos;LantaoJin&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/29558&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/29558&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17185825" author="apachespark" created="Thu, 27 Aug 2020 12:34:40 +0000"  >&lt;p&gt;User &apos;LantaoJin&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/29558&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/29558&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17195800" author="dongjoon" created="Tue, 15 Sep 2020 01:27:07 +0000"  >&lt;p&gt;Issue resolved by pull request 29558&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/29558&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/29558&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0i4uo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>