<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:50:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-19059] Unable to retrieve data from a parquet table whose name starts with underscore</title>
                <link>https://issues.apache.org/jira/browse/SPARK-19059</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;It looks like there is some bug introduced in Spark 2.1.0 preventing to read data from a parquet table (hive support is enabled) whose name starts with underscore. CREATE and INSERT statements on the same table instead seems to work as expected.&lt;/p&gt;

&lt;p&gt;The problem can be reproduced from spark-shell through the following steps:&lt;br/&gt;
1) Create a table with some values&lt;br/&gt;
scala&amp;gt; spark.sql(&quot;CREATE TABLE `_a`(i INT) USING parquet&quot;).show&lt;br/&gt;
scala&amp;gt; spark.sql(&quot;INSERT INTO `_a` VALUES (1), (2), (3)&quot;).show&lt;/p&gt;

&lt;p&gt;2) Select data from the just created and filled table --&amp;gt; no results&lt;br/&gt;
scala&amp;gt; spark.sql(&quot;SELECT * FROM `_a`&quot;).show&lt;br/&gt;
&lt;ins&gt;---&lt;/ins&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  i&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;ins&gt;---&lt;/ins&gt;&lt;br/&gt;
&lt;ins&gt;---&lt;/ins&gt;&lt;/p&gt;

&lt;p&gt;3) rename the table so that the prefixing underscore disappears&lt;br/&gt;
scala&amp;gt; spark.sql(&quot;ALTER TABLE `_a` RENAME TO `a`&quot;).show&lt;/p&gt;

&lt;p&gt;4) select data from the just renamed table --&amp;gt; results are shown&lt;br/&gt;
scala&amp;gt; spark.sql(&quot;SELECT * FROM `a`&quot;).show&lt;br/&gt;
&lt;ins&gt;---&lt;/ins&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  i&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;ins&gt;---&lt;/ins&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  3&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;ins&gt;---&lt;/ins&gt;&lt;/p&gt;


</description>
                <environment></environment>
        <key id="13031670">SPARK-19059</key>
            <summary>Unable to retrieve data from a parquet table whose name starts with underscore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jayadevan.m">Jayadevan M</assignee>
                                    <reporter username="gbloisi">Giambattista</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Jan 2017 14:34:01 +0000</created>
                <updated>Thu, 19 Jan 2017 12:21:30 +0000</updated>
                            <resolved>Thu, 19 Jan 2017 12:21:30 +0000</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15796213" author="remonk" created="Tue, 3 Jan 2017 21:20:37 +0000"  >&lt;p&gt;I was not able to reproduce it&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;spark-2.1.0-bin-hadoop2.7$ bin/spark-shell 
Setting &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; log level to &lt;span class=&quot;code-quote&quot;&gt;&quot;WARN&quot;&lt;/span&gt;.
To adjust logging level use sc.setLogLevel(newLevel).
17/01/03 13:10:45 WARN NativeCodeLoader: Unable to load &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;-hadoop library &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; your platform... using builtin-java classes where applicable
17/01/03 13:10:46 WARN SparkContext: Use an existing SparkContext, some configuration may not take effect.
Spark context Web UI available at http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:4040
&lt;/span&gt;Spark context available as &lt;span class=&quot;code-quote&quot;&gt;&apos;sc&apos;&lt;/span&gt; (master = local[*], app id = local-1483477846511).
Spark session available as &lt;span class=&quot;code-quote&quot;&gt;&apos;spark&apos;&lt;/span&gt;.
Welcome to
      ____              __
     / __/__  ___ _____/ /__
    _\ \/ _ \/ _ `/ __/  &apos;_/
   /___/ .__/\_,_/_/ /_/\_\   version 2.0.0
      /_/
         
Using Scala version 2.11.8 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_66)
Type in expressions to have them evaluated.
Type :help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; more information.

scala&amp;gt; spark.sql(&lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE TABLE `_a`(i INT) USING parquet&quot;&lt;/span&gt;).show
17/01/03 13:11:20 WARN ObjectStore: Version information not found in metastore. hive.metastore.schema.verification is not enabled so recording the schema version 1.2.0
17/01/03 13:11:21 WARN ObjectStore: Failed to get database &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;, returning NoSuchObjectException
17/01/03 13:11:23 WARN HiveMetaStore: Location: file:/$HOME/Downloads/spark-2.1.0-bin-hadoop2.7/spark-warehouse/_a specified &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; non-external table:_a
++
||
++
++


scala&amp;gt; spark.sql(&lt;span class=&quot;code-quote&quot;&gt;&quot;INSERT INTO `_a` VALUES (1), (2), (3)&quot;&lt;/span&gt;).show
SLF4J: Failed to load class &lt;span class=&quot;code-quote&quot;&gt;&quot;org.slf4j.impl.StaticLoggerBinder&quot;&lt;/span&gt;.
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http:&lt;span class=&quot;code-comment&quot;&gt;//www.slf4j.org/codes.html#StaticLoggerBinder &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; further details.
&lt;/span&gt;++
||
++
++


scala&amp;gt; spark.sql(&lt;span class=&quot;code-quote&quot;&gt;&quot;SELECT * FROM `_a`&quot;&lt;/span&gt;).show
+---+
|  i|
+---+
|  1|
|  2|
|  3|
+&#8212;+

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15796248" author="gbloisi" created="Tue, 3 Jan 2017 21:33:32 +0000"  >&lt;p&gt;I&apos;m using version 2.1.0 and I suspect it is a regression introduced with the changes in metadata caching.&lt;/p&gt;</comment>
                            <comment id="15796253" author="gbloisi" created="Tue, 3 Jan 2017 21:35:38 +0000"  >&lt;p&gt;Please note your environment is printing version 2.0.0 even though the command line prompt seems located in 2.1.0 folder &lt;/p&gt;</comment>
                            <comment id="15796394" author="remonk" created="Tue, 3 Jan 2017 22:27:26 +0000"  >&lt;p&gt;My apologies, yes, I had my SPARK_HOME set to a different path/version when I ran that test.  I&#8217;m able to reproduce that issue.&lt;/p&gt;</comment>
                            <comment id="15828559" author="thomastechs" created="Wed, 18 Jan 2017 18:57:50 +0000"  >&lt;p&gt;Me and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jayadevan.m&quot; class=&quot;user-hover&quot; rel=&quot;jayadevan.m&quot;&gt;jayadevan.m&lt;/a&gt; working on it.&lt;/p&gt;</comment>
                            <comment id="15828574" author="apachespark" created="Wed, 18 Jan 2017 19:03:02 +0000"  >&lt;p&gt;User &apos;jayadevanmurali&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/16635&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/16635&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15828593" author="jayadevan.m" created="Wed, 18 Jan 2017 19:12:30 +0000"  >&lt;p&gt;@uncleGen @Eric Liang @cloud-fan&lt;/p&gt;

&lt;p&gt;Could you please review this PR&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i387db:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>