<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:33:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-43541] Incorrect column resolution on FULL OUTER JOIN with USING</title>
                <link>https://issues.apache.org/jira/browse/SPARK-43541</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;This was tested on Spark 3.3.2 and Spark 3.4.0.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Causes [UNRESOLVED_COLUMN.WITH_SUGGESTION] A column or function parameter with name `aws_dbr_a`.`key` cannot be resolved. Did you mean one of the following? [`key`].; line 4, pos 7
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;FULL OUTER JOIN with USING and/or the WHERE seems relevant since I can get the query to work with any of these modifications. &lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# -- FULL OUTER JOIN
                   WITH
                   aws_dbr_a AS (select key from values (&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;) t(key)),
                   gcp_pro_b AS (select key from values (&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;) t(key))
                   SELECT aws_dbr_a.key
                   FROM aws_dbr_a
                   FULL OUTER JOIN gcp_pro_b USING (key)
                   WHERE aws_dbr_a.key NOT LIKE &lt;span class=&quot;code-quote&quot;&gt;&apos;spark.clusterUsageTags.%&apos;&lt;/span&gt;;
[UNRESOLVED_COLUMN.WITH_SUGGESTION] A column or function parameter with name `aws_dbr_a`.`key` cannot be resolved. Did you mean one of the following? [`key`].; line 4 pos 7
# -- INNER JOIN
                   WITH
                   aws_dbr_a AS (select key from values (&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;) t(key)),
                   gcp_pro_b AS (select key from values (&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;) t(key))
                   SELECT aws_dbr_a.key
                   FROM aws_dbr_a
                   JOIN gcp_pro_b USING (key)
                   WHERE aws_dbr_a.key NOT LIKE &lt;span class=&quot;code-quote&quot;&gt;&apos;spark.clusterUsageTags.%&apos;&lt;/span&gt;;
+-----+
| key |
|-----|
| a   |
+-----+
1 row in set
Time: 0.507s
# -- NO Filter
                   WITH
                   aws_dbr_a AS (select key from values (&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;) t(key)),
                   gcp_pro_b AS (select key from values (&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;) t(key))
                   SELECT aws_dbr_a.key
                   FROM aws_dbr_a
                   FULL OUTER JOIN gcp_pro_b USING (key);
+-----+
| key |
|-----|
| a   |
+-----+
1 row in set
Time: 1.021s
# -- ON instead of USING
                   WITH
                   aws_dbr_a AS (select key from values (&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;) t(key)),
                   gcp_pro_b AS (select key from values (&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;) t(key))
                   SELECT aws_dbr_a.key
                   FROM aws_dbr_a
                   FULL OUTER JOIN gcp_pro_b ON aws_dbr_a.key = gcp_pro_b.key
                   WHERE aws_dbr_a.key NOT LIKE &lt;span class=&quot;code-quote&quot;&gt;&apos;spark.clusterUsageTags.%&apos;&lt;/span&gt;;
+-----+
| key |
|-----|
| a   |
+-----+
1 row in set
Time: 0.514s
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13536613">SPARK-43541</key>
            <summary>Incorrect column resolution on FULL OUTER JOIN with USING</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="maxgekk">Max Gekk</assignee>
                                    <reporter username="maxgekk">Max Gekk</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 May 2023 19:48:23 +0000</created>
                <updated>Fri, 19 May 2023 00:25:37 +0000</updated>
                            <resolved>Thu, 18 May 2023 18:13:31 +0000</resolved>
                                    <version>3.3.2</version>
                    <version>3.4.0</version>
                                    <fixVersion>3.3.3</fixVersion>
                    <fixVersion>3.4.1</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17723994" author="maxgekk" created="Thu, 18 May 2023 18:13:31 +0000"  >&lt;p&gt;Issue resolved by pull request 41204&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/41204&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/41204&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17724047" author="dongjoon" created="Thu, 18 May 2023 22:11:39 +0000"  >&lt;p&gt;This is backported to branch-3.4 via &lt;a href=&quot;https://github.com/apache/spark/pull/41220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/41220&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17724062" author="dongjoon" created="Fri, 19 May 2023 00:25:37 +0000"  >&lt;p&gt;This is backported to branch-3.3 via &lt;a href=&quot;https://github.com/apache/spark/pull/41221&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/41221&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 25 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1hyoo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>