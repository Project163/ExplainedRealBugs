<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:32:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-41989] PYARROW_IGNORE_TIMEZONE warning can break application logging setup</title>
                <link>https://issues.apache.org/jira/browse/SPARK-41989</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;in &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;python/pyspark/pandas/__init__.py&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;  there is currently a warning when &lt;tt&gt;PYARROW_IGNORE_TIMEZONE&lt;/tt&gt; env var is not set (&lt;a href=&quot;https://github.com/apache/spark/blob/187c4a9c66758e973633c5c309b551b1d9094e6e/python/pyspark/pandas/__init__.py#L44-L59):&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/blob/187c4a9c66758e973633c5c309b551b1d9094e6e/python/pyspark/pandas/__init__.py#L44-L59):&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-python&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; logging

    logging.warning(
        &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;PYARROW_IGNORE_TIMEZONE&apos;&lt;/span&gt; environment variable was &lt;span class=&quot;code-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;set&lt;/span&gt;. It &lt;span class=&quot;code-keyword&quot;&gt;is&lt;/span&gt; required to &quot;&lt;/span&gt;...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;tt&gt;logging.warning()&lt;/tt&gt; call  will silently do a &lt;tt&gt;logging.basicConfig()&lt;/tt&gt; call (at least in python 3.9, which I tried).&lt;br/&gt;
(FYI: Something like &lt;tt&gt;logging.getLogger(...).warning()&lt;/tt&gt; would not do this silent call)&lt;/p&gt;


&lt;p&gt;This has the following very hard to figure out side-effect:&lt;br/&gt;
importing `pyspark.pandas` (directly or indirectly somewhere)  might break your logging setup (if PYARROW_IGNORE_TIMEZONE is not set).&lt;/p&gt;

&lt;p&gt;Very basic  example (assuming PYARROW_IGNORE_TIMEZONE is not set):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-python&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; logging
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; pyspark.pandas

logging.basicConfig(level=logging.DEBUG)

logger = logging.getLogger(&lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;)
logger.warning(&lt;span class=&quot;code-quote&quot;&gt;&quot;I warn you&quot;&lt;/span&gt;)
logger.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;I debug you&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Will only produce the warning, not the debug line.&lt;br/&gt;
By removing the &lt;tt&gt;import pyspark.pandas&lt;/tt&gt;, the debug line is produced&lt;/p&gt;</description>
                <environment>&lt;p&gt;python 3.9 env with pyspark installed&lt;/p&gt;</environment>
        <key id="13517649">SPARK-41989</key>
            <summary>PYARROW_IGNORE_TIMEZONE warning can break application logging setup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="soxofaan">Stefaan Lippens</assignee>
                                    <reporter username="soxofaan">Stefaan Lippens</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Jan 2023 15:53:28 +0000</created>
                <updated>Thu, 12 Jan 2023 09:26:02 +0000</updated>
                            <resolved>Thu, 12 Jan 2023 09:24:40 +0000</resolved>
                                    <version>3.2.3</version>
                                    <fixVersion>3.2.4</fixVersion>
                    <fixVersion>3.3.2</fixVersion>
                    <fixVersion>3.4.0</fixVersion>
                                    <component>PySpark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17675631" author="soxofaan" created="Wed, 11 Jan 2023 15:59:06 +0000"  >&lt;p&gt;I would propose to change &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-python&quot;&gt;
    logging.warning(
        &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;PYARROW_IGNORE_TIMEZONE&apos;&lt;/span&gt; environment variable was &lt;span class=&quot;code-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;set&lt;/span&gt;. It &lt;span class=&quot;code-keyword&quot;&gt;is&lt;/span&gt; required to &quot;&lt;/span&gt;...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-python&quot;&gt;
    logger = logging.getLogger(&lt;span class=&quot;code-object&quot;&gt;__name__&lt;/span&gt;)
    logger.warning(
        &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;PYARROW_IGNORE_TIMEZONE&apos;&lt;/span&gt; environment variable was &lt;span class=&quot;code-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;set&lt;/span&gt;. It &lt;span class=&quot;code-keyword&quot;&gt;is&lt;/span&gt; required to &quot;&lt;/span&gt;...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which has the added benefit that users can trace back this warning to the module that triggered it &lt;/p&gt;</comment>
                            <comment id="17675636" author="soxofaan" created="Wed, 11 Jan 2023 16:08:33 +0000"  >&lt;p&gt;I just tried and could reproduce this problem as well with pyspark 3.3.1 on python 3.11&lt;/p&gt;</comment>
                            <comment id="17675645" author="apachespark" created="Wed, 11 Jan 2023 16:28:28 +0000"  >&lt;p&gt;User &apos;soxofaan&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/39516&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/39516&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17675890" author="gurwls223" created="Thu, 12 Jan 2023 09:24:40 +0000"  >&lt;p&gt;Issue resolved by pull request 39516&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/39516&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/39516&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1eq8g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>