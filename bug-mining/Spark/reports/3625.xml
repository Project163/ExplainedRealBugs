<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:44:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-15652] Missing org.apache.spark.launcher.SparkAppHandle.Listener notification if SparkSubmit JVM shutsdown</title>
                <link>https://issues.apache.org/jira/browse/SPARK-15652</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;h6&gt;&lt;a name=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h6&gt;
&lt;p&gt;In case SparkSubmit JVM goes down even before sending the job complete notification; the &lt;em&gt;org.apache.spark.launcher.SparkAppHandle.Listener&lt;/em&gt; will not receive any notification which may lead to the client using SparkLauncher hang indefinitely.&lt;/p&gt;
&lt;h6&gt;&lt;a name=&quot;RootCause&quot;&gt;&lt;/a&gt;Root Cause&lt;/h6&gt;
&lt;p&gt;No proper exception handling at org.apache.spark.launcher.LauncherConnection#run when an EOFException is encountered while reading over Socket Stream. Mostly EOFException will be thrown at the suggested point(&lt;em&gt;org.apache.spark.launcher.LauncherConnection.run(LauncherConnection.java:58)&lt;/em&gt;) if the SparkSubmit JVM is shutdown. &lt;br/&gt;
Probably, it was assumed that SparkSubmit JVM can shut down only with normal healthy completion but, there could be scenarios where this is not the case:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;OS kill the SparkSubmit process using OOM Killer.&lt;/li&gt;
	&lt;li&gt;Exception while SparkSubmit submits the job, even before it starts monitoring the application. This can happen if SparkLauncher is not configured properly. There might be no exception handling in org.apache.spark.deploy.yarn.Client#submitApplication(), which may lead to any exception/throwable at this point lead to shutting down of JVM without proper finalisation&lt;/li&gt;
&lt;/ol&gt;


&lt;h6&gt;&lt;a name=&quot;PossibleSolutions&quot;&gt;&lt;/a&gt;Possible Solutions&lt;/h6&gt;
&lt;ol&gt;
	&lt;li&gt;In case of EOFException or any other exception notify the listeners that job has failed&lt;/li&gt;
	&lt;li&gt;Better exception handling on the SparkSubmit JVM side (though this may not resolve the problem completely)&lt;/li&gt;
&lt;/ol&gt;

</description>
                <environment></environment>
        <key id="12973975">SPARK-15652</key>
            <summary>Missing org.apache.spark.launcher.SparkAppHandle.Listener notification if SparkSubmit JVM shutsdown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="subrotosanyal">Subroto Sanyal</assignee>
                                    <reporter username="subrotosanyal">Subroto Sanyal</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 May 2016 13:20:52 +0000</created>
                <updated>Tue, 7 Jun 2016 15:44:34 +0000</updated>
                            <resolved>Mon, 6 Jun 2016 23:06:18 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15306642" author="subrotosanyal" created="Mon, 30 May 2016 13:23:51 +0000"  >&lt;p&gt;Attaching a unit test to show the hanging behaviour of SparkLauncher client.&lt;/p&gt;</comment>
                            <comment id="15306655" author="srowen" created="Mon, 30 May 2016 13:32:36 +0000"  >&lt;p&gt;You attached a JAR file. If you have a fix or code change it needs to be a PR.&lt;/p&gt;</comment>
                            <comment id="15306675" author="subrotosanyal" created="Mon, 30 May 2016 13:42:56 +0000"  >&lt;p&gt;the jar only contains a test-case to reproduce the problem.&lt;/p&gt;</comment>
                            <comment id="15306693" author="srowen" created="Mon, 30 May 2016 14:04:53 +0000"  >&lt;p&gt;It doesn&apos;t do any good though &amp;#8211; source code would&lt;/p&gt;</comment>
                            <comment id="15306762" author="subrotosanyal" created="Mon, 30 May 2016 15:28:38 +0000"  >&lt;p&gt;the jar contains the source code as well.&lt;/p&gt;</comment>
                            <comment id="15307594" author="srowen" created="Tue, 31 May 2016 11:28:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=subrotosanyal&quot; class=&quot;user-hover&quot; rel=&quot;subrotosanyal&quot;&gt;subrotosanyal&lt;/a&gt; please read &lt;a href=&quot;https://cwiki.apache.org/confluence/display/SPARK/Contributing+to+Spark&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/SPARK/Contributing+to+Spark&lt;/a&gt;  We don&apos;t use JIRA patches&lt;/p&gt;</comment>
                            <comment id="15313971" author="subrotosanyal" created="Fri, 3 Jun 2016 11:06:17 +0000"  >&lt;p&gt;PR : &lt;a href=&quot;https://github.com/apache/spark/pull/13497&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/13497&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15314267" author="apachespark" created="Fri, 3 Jun 2016 15:18:04 +0000"  >&lt;p&gt;User &apos;subrotosanyal&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/13497&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/13497&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15318683" author="subrotosanyal" created="Tue, 7 Jun 2016 15:31:46 +0000"  >&lt;p&gt;hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vanzin&quot; class=&quot;user-hover&quot; rel=&quot;vanzin&quot;&gt;vanzin&lt;/a&gt;&lt;br/&gt;
Can this be merged to 1.6 branch?&lt;/p&gt;</comment>
                            <comment id="15318711" author="vanzin" created="Tue, 7 Jun 2016 15:44:34 +0000"  >&lt;p&gt;I&apos;m a little worried about that because it touches a public API, even though it&apos;s just adding something that shouldn&apos;t cause issues. I also haven&apos;t seen much activity towards a new 1.6 point release... let me think about it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12807091" name="SPARK-15652-1.patch" size="9309" author="subrotosanyal" created="Tue, 31 May 2016 09:15:09 +0000"/>
                            <attachment id="12806976" name="spark-launcher-client-hang.jar" size="8745" author="subrotosanyal" created="Mon, 30 May 2016 13:23:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yp2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>