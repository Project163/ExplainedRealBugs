<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:09:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-30325] markPartitionCompleted cause task status inconsistent</title>
                <link>https://issues.apache.org/jira/browse/SPARK-30325</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;h3&gt;&lt;a name=&quot;Cornercase&quot;&gt;&lt;/a&gt;Corner case&lt;/h3&gt;

&lt;p&gt;The bugs occurs in the coren case as follows:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The stage occurs for fetchFailed and some task hasn&apos;t finished, scheduler will resubmit a new stage as retry with those unfinished tasks.&lt;/li&gt;
	&lt;li&gt;The unfinished task in origin stage finished and the same task on the new retry stage hasn&apos;t finished, it will mark the task partition on the new retry stage as succesuful.  &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12989314/12989314_image-2019-12-21-17-11-38-565.png&quot; height=&quot;154&quot; width=&quot;427&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;The executor running those &apos;successful task&apos; crashed, it cause taskSetManager run executorLost to rescheduler the task on the executor, here will cause copiesRunning decreate 1 twice, beause those &apos;successful task&apos; are not finished, the variable copiesRunning will decreate to -1 as result. &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12989315/12989315_image-2019-12-21-17-15-51-512.png&quot; height=&quot;340&quot; width=&quot;437&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12989316/12989316_image-2019-12-21-17-16-40-998.png&quot; height=&quot;139&quot; width=&quot;398&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;&apos;dequeueTaskFromList&apos; will use copiesRunning equal 0 as reschedule basis when rescheduler tasks, and now it is -1, can&apos;t to reschedule, and the app will hung forever. &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12989317/12989317_image-2019-12-21-17-17-42-244.png&quot; height=&quot;282&quot; width=&quot;366&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="13275858">SPARK-30325</key>
            <summary>markPartitionCompleted cause task status inconsistent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="haiyangyu">haiyangyu</assignee>
                                    <reporter username="yuhaiyang">haiyangyu</reporter>
                        <labels>
                    </labels>
                <created>Sat, 21 Dec 2019 09:08:04 +0000</created>
                <updated>Fri, 17 Jan 2020 07:15:37 +0000</updated>
                            <resolved>Tue, 14 Jan 2020 12:01:21 +0000</resolved>
                                    <version>2.4.0</version>
                    <version>2.4.1</version>
                    <version>2.4.2</version>
                    <version>2.4.3</version>
                    <version>2.4.4</version>
                                    <fixVersion>2.4.5</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17001661" author="yuhaiyang" created="Sat, 21 Dec 2019 10:05:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/spark/pull/26975&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/26975&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17015032" author="cloud_fan" created="Tue, 14 Jan 2020 12:01:22 +0000"  >&lt;p&gt;Issue resolved by pull request 26975&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/26975&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/26975&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17017758" author="dongjoon" created="Fri, 17 Jan 2020 07:14:42 +0000"  >&lt;p&gt;Hi, All.&lt;br/&gt;
Since there is no UT, it&apos;s difficult to validate. According to the commit history, this bug seems to exist with &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-24755&quot; title=&quot;Executor loss can cause task to not be resubmitted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-24755&quot;&gt;&lt;del&gt;SPARK-24755&lt;/del&gt;&lt;/a&gt; and before it. Could you update `Affects Version/s:` more if it does? For example, 2.3.4 and 2.2.3?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12989314" name="image-2019-12-21-17-11-38-565.png" size="297557" author="yuhaiyang" created="Sat, 21 Dec 2019 09:11:40 +0000"/>
                            <attachment id="12989315" name="image-2019-12-21-17-15-51-512.png" size="1159218" author="yuhaiyang" created="Sat, 21 Dec 2019 09:15:55 +0000"/>
                            <attachment id="12989316" name="image-2019-12-21-17-16-40-998.png" size="251271" author="yuhaiyang" created="Sat, 21 Dec 2019 09:16:43 +0000"/>
                            <attachment id="12989317" name="image-2019-12-21-17-17-42-244.png" size="547095" author="yuhaiyang" created="Sat, 21 Dec 2019 09:17:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z09wm0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>