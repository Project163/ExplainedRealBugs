<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:58:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-23394] Storage info&apos;s Cached Partitions doesn&apos;t consider the replications (but sc.getRDDStorageInfo does)</title>
                <link>https://issues.apache.org/jira/browse/SPARK-23394</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Start spark as:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
$ bin/spark-shell --master &lt;span class=&quot;code-object&quot;&gt;local&lt;/span&gt;-cluster[2,1,1024]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-scala&quot;&gt;
scala&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.spark.storage.StorageLevel._
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.spark.storage.StorageLevel._

scala&amp;gt; sc.parallelize((1 to 100), 10).persist(MEMORY_AND_DISK_2).count
res0: Long = 100                                                                

scala&amp;gt; sc.getRDDStorageInfo(0).numCachedPartitions
res1: Int = 20
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;h2&gt;&lt;a name=&quot;CachedPartitions&quot;&gt;&lt;/a&gt;Cached Partitions &lt;/h2&gt;

&lt;p&gt;On the UI at the Storage tab Cached Partitions is 10:&lt;/p&gt;

&lt;p&gt; &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12910206/12910206_Storage_Tab.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; .&lt;/p&gt;

&lt;h2&gt;&lt;a name=&quot;Fulltab&quot;&gt;&lt;/a&gt;Full tab&lt;/h2&gt;

&lt;p&gt;Moreover the replicated partitions was also listed on the old 2.2.1 like:&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12910204/12910204_Spark_2.2.1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;

&lt;p&gt;But now it is like:&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12910205/12910205_Spark_2.4.0-SNAPSHOT.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="13137820">SPARK-23394</key>
            <summary>Storage info&apos;s Cached Partitions doesn&apos;t consider the replications (but sc.getRDDStorageInfo does)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="attilapiros">Attila Zsolt Piros</assignee>
                                    <reporter username="attilapiros">Attila Zsolt Piros</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Feb 2018 10:23:04 +0000</created>
                <updated>Fri, 23 Feb 2018 06:33:50 +0000</updated>
                            <resolved>Wed, 14 Feb 2018 14:46:40 +0000</resolved>
                                    <version>2.3.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                    <fixVersion>2.4.0</fixVersion>
                                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16360593" author="mgaido" created="Mon, 12 Feb 2018 11:04:20 +0000"  >&lt;p&gt;I think this is not an issue. `numCachedPartitions ` is 20 because each partition is cached twice (it has 2 replicas). I think it is not a bug, but maybe we can improve names/docs about it. But since `RDDInfo` is a developer API, I think it is not needed.&lt;/p&gt;</comment>
                            <comment id="16360757" author="vanzin" created="Mon, 12 Feb 2018 13:36:06 +0000"  >&lt;p&gt;I talked to Attila offline, and to me it seems like the new UI is more correct. There are only 10 cached partitions, each one replicated to 2 executors; the table also reflects that (whereas   the old UI shows the same block twice). The only potential adjustment here would be to show the executor addresses instead of the executor IDs.&lt;/p&gt;

&lt;p&gt;In the context of what lead us here (&lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-20659&quot; title=&quot;Remove StorageStatus, or make it private.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-20659&quot;&gt;&lt;del&gt;SPARK-20659&lt;/del&gt;&lt;/a&gt; / &lt;a href=&quot;https://github.com/apache/spark/pull/20546#discussion_r167070392&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/20546#discussion_r167070392&lt;/a&gt;), I think that we should fix the tests that rely on the old code returning the total count including replication, so that they work with the new code that returns more accurate information.&lt;/p&gt;</comment>
                            <comment id="16361347" author="apachespark" created="Mon, 12 Feb 2018 19:45:04 +0000"  >&lt;p&gt;User &apos;attilapiros&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/20589&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/20589&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16364167" author="vanzin" created="Wed, 14 Feb 2018 14:46:40 +0000"  >&lt;p&gt;Issue resolved by pull request 20589&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/20589&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/20589&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12910204" name="Spark_2.2.1.png" size="292715" author="attilapiros" created="Mon, 12 Feb 2018 12:50:45 +0000"/>
                            <attachment id="12910205" name="Spark_2.4.0-SNAPSHOT.png" size="185876" author="attilapiros" created="Mon, 12 Feb 2018 12:50:46 +0000"/>
                            <attachment id="12910206" name="Storage_Tab.png" size="29906" author="attilapiros" created="Mon, 12 Feb 2018 12:51:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3q2bj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>