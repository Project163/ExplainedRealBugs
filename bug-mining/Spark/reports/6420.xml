<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:04:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-27403] Fix `updateTableStats` to update table stats always with new stats or None</title>
                <link>https://issues.apache.org/jira/browse/SPARK-27403</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;system shall update the table stats automatically if user set&#160;spark.sql.statistics.size.autoUpdate.enabled as true, currently this property is not having any significance even if it is enabled or disabled. This feature is similar to Hives auto-gather feature where&#160;statistics are automatically computed by default if this feature is enabled.&lt;/p&gt;

&lt;p&gt;Reference:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/StatsDev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/StatsDev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Reproducing steps:&lt;/p&gt;

&lt;p&gt;scala&amp;gt; spark.sql(&quot;create table table1 (name string,age int) stored as parquet&quot;)&lt;/p&gt;

&lt;p&gt;scala&amp;gt; spark.sql(&quot;insert into table1 select &apos;a&apos;,29&quot;)&lt;br/&gt;
 res2: org.apache.spark.sql.DataFrame = []&lt;/p&gt;

&lt;p&gt;scala&amp;gt; spark.sql(&quot;desc extended table1&quot;).show(false)&lt;br/&gt;
 &lt;ins&gt;------------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;---------------------------------------------------------&lt;del&gt;++&lt;/del&gt;------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;col_name&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;data_type&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;comment&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;&lt;ins&gt;------------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;---------------------------------------------------------&lt;del&gt;++&lt;/del&gt;------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;name&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;string&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;null&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;age&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;null&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;ol&gt;
	&lt;li&gt;Detailed Table Information&lt;/li&gt;
&lt;/ol&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Database&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;default&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Table&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;table1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Owner&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Administrator&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Created Time&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Sun Apr 07 23:41:56 IST 2019&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Last Access&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Thu Jan 01 05:30:00 IST 1970&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Created By&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Spark 2.4.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Type&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;MANAGED&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Provider&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;hive&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Table Properties&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;transient_lastDdlTime=1554660716&amp;#93;&lt;/span&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Location&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;file:/D:/spark-2.4.1-bin-hadoop2.7/bin/spark-warehouse/table1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Serde Library&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;InputFormat&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OutputFormat&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Storage Properties&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;serialization.format=1&amp;#93;&lt;/span&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Partition Provider&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Catalog&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;&lt;ins&gt;------------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;---------------------------------------------------------&lt;del&gt;++&lt;/del&gt;------&lt;/p&gt;</description>
                <environment></environment>
        <key id="13226575">SPARK-27403</key>
            <summary>Fix `updateTableStats` to update table stats always with new stats or None</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="S71955">Sujith Chacko</assignee>
                                    <reporter username="S71955">Sujith Chacko</reporter>
                        <labels>
                    </labels>
                <created>Sun, 7 Apr 2019 18:19:57 +0000</created>
                <updated>Wed, 17 Apr 2019 16:26:30 +0000</updated>
                            <resolved>Thu, 11 Apr 2019 15:55:07 +0000</resolved>
                                    <version>2.3.0</version>
                    <version>2.3.1</version>
                    <version>2.3.2</version>
                    <version>2.3.3</version>
                    <version>2.4.0</version>
                    <version>2.4.1</version>
                                    <fixVersion>2.4.2</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16811940" author="s71955" created="Sun, 7 Apr 2019 18:30:29 +0000"  >&lt;p&gt;if user set&#160;spark.sql.statistics.size.autoUpdate.enabled as true, then system shall calculate the table size and record the same in metastore,&#160;&lt;/p&gt;

&lt;p&gt;On describe command the statistics shall be displayed&lt;/p&gt;

&lt;p&gt;I will analyze further and raise a PR for handling the issue. please let me know for any suggestions. thanks&lt;/p&gt;</comment>
                            <comment id="16811959" author="dongjoon" created="Sun, 7 Apr 2019 20:22:23 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=S71955&quot; class=&quot;user-hover&quot; rel=&quot;S71955&quot;&gt;S71955&lt;/a&gt;. Could you check Spark 2.3.x behavior and update the affected versions? The existing code lands at 2.3.0 by &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-21237&quot; title=&quot;Invalidate stats once table data is changed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-21237&quot;&gt;&lt;del&gt;SPARK-21237&lt;/del&gt;&lt;/a&gt; .&lt;/p&gt;</comment>
                            <comment id="16812095" author="s71955" created="Mon, 8 Apr 2019 04:27:53 +0000"  >&lt;p&gt;This has impact in the previous version also, will update the JIRA&lt;/p&gt;</comment>
                            <comment id="16815531" author="dongjoon" created="Thu, 11 Apr 2019 15:55:07 +0000"  >&lt;p&gt;This is resolved via &lt;a href=&quot;https://github.com/apache/spark/pull/24315&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/24315&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 31 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01jb4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>