<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:17:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-32130] Spark 3.0 json load performance is unacceptable in comparison of Spark 2.4</title>
                <link>https://issues.apache.org/jira/browse/SPARK-32130</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;We are planning to move to Spark 3 but the read performance of our json files is unacceptable. Following is the performance numbers when compared to Spark 2.4&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
 Spark 2.4&lt;/p&gt;

&lt;p&gt;scala&amp;gt; spark.time(spark.read.json(&quot;/data/20200528&quot;))&lt;br/&gt;
 Time taken: &lt;font color=&quot;#ff0000&quot;&gt;19691 ms&lt;/font&gt;&lt;br/&gt;
 res61: org.apache.spark.sql.DataFrame = &lt;span class=&quot;error&quot;&gt;&amp;#91;created: bigint, id: string ... 5 more fields&amp;#93;&lt;/span&gt;&lt;br/&gt;
 scala&amp;gt; spark.time(res61.count())&lt;br/&gt;
 Time taken: &lt;font color=&quot;#0000ff&quot;&gt;7113 ms&lt;/font&gt;&lt;br/&gt;
 res64: Long = 2605349&lt;br/&gt;
 Spark 3.0&lt;br/&gt;
 scala&amp;gt; spark.time(spark.read.json(&quot;/data/20200528&quot;))&lt;br/&gt;
 20/06/29 08:06:53 WARN package: Truncated the string representation of a plan since it was too large. This behavior can be adjusted by setting &apos;spark.sql.debug.maxToStringFields&apos;.&lt;br/&gt;
 Time taken: &lt;font color=&quot;#ff0000&quot;&gt;849652 ms&lt;/font&gt;&lt;br/&gt;
 res0: org.apache.spark.sql.DataFrame = &lt;span class=&quot;error&quot;&gt;&amp;#91;created: bigint, id: string ... 5 more fields&amp;#93;&lt;/span&gt;&lt;br/&gt;
 scala&amp;gt; spark.time(res0.count())&lt;br/&gt;
 Time taken: &lt;font color=&quot;#0000ff&quot;&gt;8201 ms&lt;/font&gt;&lt;br/&gt;
 res2: Long = 2605349&lt;br/&gt;
 &#160;&lt;br/&gt;
 &#160;&lt;br/&gt;
 I am attaching a sample data (please delete is once you are able to reproduce the issue) that is much smaller than the actual size but the performance comparison can still be verified.&lt;/p&gt;

&lt;p&gt;The sample tar contains bunch of json.gz files, each line of the file is self contained json doc as shown below&lt;/p&gt;

&lt;p&gt;To reproduce the issue please untar the attachment - it will have multiple .json.gz files whose contents will look similar to following&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;font color=&quot;#0000ff&quot;&gt;{&quot;id&quot;:&quot;954e7819e91a11e981f60050569979b6&quot;,&quot;created&quot;:1570463599492,&quot;properties&quot;:\{&quot;WANAccessType&quot;:&quot;2&quot;,&quot;deviceClassifiers&quot;:[&quot;ARRIS HNC IGD&quot;,&quot;Annex F Gateway&quot;,&quot;Supports.Collect.Optimized.Workflow&quot;,&quot;Fast.Inform&quot;,&quot;Supports.TR98.Traceroute&quot;,&quot;InternetGatewayDevice:1.4&quot;,&quot;Motorola.ServiceType.IP&quot;,&quot;Supports Arris FastPath Speed Test&quot;,&quot;Arris.NVG468MQ.9.3.0h0&quot;,&quot;Wireless.Common.IGD.DualRadio&quot;,&quot;001E46.NVG468MQ.Is.WANIP&quot;,&quot;Device.Supports.HNC&quot;,&quot;Device.Type.RG&quot;,&quot;[Arris.NVG4xx.Missing.CA|http://arris.nvg4xx.missing.ca/]&quot;,&quot;Supports.TR98.IPPing&quot;,&quot;Arris.NVG468MQ.9.3.0+&quot;,&quot;Wireless&quot;,&quot;ARRIS HNC IGD EUROPA&quot;,&quot;Arris.NVG.Wireless&quot;,&quot;WLAN.Radios.Action.Common.TR098&quot;,&quot;VoiceService:1.0&quot;,&quot;ConnecticutDeviceTypes&quot;,&quot;Device.Supports.SpeedTest&quot;,&quot;Motorola.Device.Supports.VoIP&quot;,&quot;Arris.NVG468MQ&quot;,&quot;Motorola.device&quot;,&quot;CaptivePortal:1&quot;,&quot;Arris.NVG4xx&quot;,&quot;All.TR069.RG.Devices&quot;,&quot;TraceRoute:1&quot;,&quot;Arris.NVG4xx.9.3.0+&quot;,&quot;datamodel.igd&quot;,&quot;Arris.NVG4xxQ&quot;,&quot;IPPing:1&quot;,&quot;Device.ServiceType.IP&quot;,&quot;001E46.NVG468MQ.Is.WANEth&quot;,&quot;Arris.NVG468MQ.9.2.4+&quot;,&quot;broken.device.no.notification&quot;],&quot;deviceType&quot;:&quot;IGD&quot;,&quot;firstInform&quot;:&quot;1570463619543&quot;,&quot;groups&quot;:[&quot;Self-Service Diagnostics&quot;,&quot;SLF-SRVC_DGNSTCS000&quot;,&quot;TCW - NVG4xx - First Contact&quot;],&quot;hardwareVersion&quot;:&quot;NVG468MQ_0200240031004E&quot;,&quot;hncEnable&quot;:&quot;0&quot;,&quot;lastBoot&quot;:&quot;1587765844155&quot;,&quot;lastInform&quot;:&quot;1590624062260&quot;,&quot;lastPeriodic&quot;:&quot;1590624062260&quot;,&quot;manufacturerName&quot;:&quot;Motorola&quot;,&quot;modelName&quot;:&quot;NVG468MQ&quot;,&quot;productClass&quot;:&quot;NVG468MQ&quot;,&quot;protocolVersion&quot;:&quot;cwmp10&quot;,&quot;provisioningCode&quot;:&quot;&quot;,&quot;softwareVersion&quot;:&quot;9.3.0h0d55&quot;,&quot;tags&quot;:[&quot;default&quot;],&quot;timeZone&quot;:&quot;EST+5EDT,M3.2.0/2,M11.1.0/2&quot;,&quot;wan&quot;:\{&quot;ethDuplexMode&quot;:&quot;Full&quot;,&quot;ethSyncBitRate&quot;:&quot;1000&quot;},&quot;wifi&quot;:&lt;a href=&quot;file://{&amp;quot;0&amp;quot;:{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;Frontier3136&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;1&amp;quot;://{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Guest3136&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;2&amp;quot;://{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Frontier3136_D2&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;3&amp;quot;://{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Frontier3136_D3&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;4&amp;quot;://{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;Frontier3136_5G&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;5&amp;quot;://{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Guest3136_5G&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;6&amp;quot;://{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;Frontier3136_5G-TV&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;0&quot;},&amp;quot;7&amp;quot;://{&amp;quot;Enable&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;SSID&amp;quot;:&amp;quot;Frontier3136_5G_D2&amp;quot;,&amp;quot;SSIDAdvertisementEnabled&amp;quot;:&amp;quot;1&amp;quot;}}&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;\\{&quot;0&quot;:{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;Frontier3136&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;1&quot;:\\{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Guest3136&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;2&quot;:\\{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Frontier3136_D2&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;3&quot;:\\{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Frontier3136_D3&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;4&quot;:\\{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;Frontier3136_5G&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;5&quot;:\\{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Guest3136_5G&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;6&quot;:\\{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;Frontier3136_5G-TV&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;0&quot;},&quot;7&quot;:\\{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Frontier3136_5G_D2&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;}}&lt;/a&gt;},&quot;ts&quot;:1590624062260}&lt;/font&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;font color=&quot;#741b47&quot;&gt;{&quot;id&quot;:&quot;bf0448736d09e2e677ea383ef857d5bc&quot;,&quot;created&quot;:1517843609967,&quot;properties&quot;:\{&quot;WANAccessType&quot;:&quot;2&quot;,&quot;arrisNvgDbCheck&quot;:&quot;1:success&quot;,&quot;deviceClassifiers&quot;:[&quot;ARRIS HNC IGD&quot;,&quot;Annex F Gateway&quot;,&quot;Supports.Collect.Optimized.Workflow&quot;,&quot;Fast.Inform&quot;,&quot;InternetGatewayDevice:1.4&quot;,&quot;Supports.TR98.Traceroute&quot;,&quot;Supports Arris FastPath Speed Test&quot;,&quot;Motorola.ServiceType.IP&quot;,&quot;Arris.NVG468MQ.9.3.0h0&quot;,&quot;Wireless.Common.IGD.DualRadio&quot;,&quot;001E46.NVG468MQ.Is.WANIP&quot;,&quot;Device.Supports.HNC&quot;,&quot;Device.Type.RG&quot;,&quot;[Arris.NVG4xx.Missing.CA|http://arris.nvg4xx.missing.ca/]&quot;,&quot;Supports.TR98.IPPing&quot;,&quot;Arris.NVG468MQ.9.3.0+&quot;,&quot;Wireless&quot;,&quot;ARRIS HNC IGD EUROPA&quot;,&quot;Arris.NVG.Wireless&quot;,&quot;VoiceService:1.0&quot;,&quot;WLAN.Radios.Action.Common.TR098&quot;,&quot;ConnecticutDeviceTypes&quot;,&quot;Device.Supports.SpeedTest&quot;,&quot;Motorola.Device.Supports.VoIP&quot;,&quot;Arris.NVG468MQ&quot;,&quot;Motorola.device&quot;,&quot;CaptivePortal:1&quot;,&quot;Arris.NVG4xx&quot;,&quot;All.TR069.RG.Devices&quot;,&quot;TraceRoute:1&quot;,&quot;Arris.NVG4xx.9.3.0+&quot;,&quot;datamodel.igd&quot;,&quot;Arris.NVG4xxQ&quot;,&quot;IPPing:1&quot;,&quot;Device.ServiceType.IP&quot;,&quot;001E46.NVG468MQ.Is.WANEth&quot;,&quot;Arris.NVG468MQ.9.2.4+&quot;,&quot;broken.device.no.notification&quot;],&quot;deviceType&quot;:&quot;IGD&quot;,&quot;firstInform&quot;:&quot;1517843629132&quot;,&quot;groups&quot;:[&quot;Total Control&quot;,&quot;GPON_100M_100M&quot;,&quot;Self-Service Diagnostics&quot;,&quot;HSI&quot;,&quot;SLF-SRVC_DGNSTCS000&quot;,&quot;HS002&quot;,&quot;TTL_CNTRL000&quot;,&quot;GPN_100M_100M001&quot;],&quot;hardwareVersion&quot;:&quot;NVG468MQ_0200240031004E&quot;,&quot;hncEnable&quot;:&quot;0&quot;,&quot;lastBoot&quot;:&quot;1590196375084&quot;,&quot;lastInform&quot;:&quot;1590624060253&quot;,&quot;lastPeriodic&quot;:&quot;1590624060253&quot;,&quot;manufacturerName&quot;:&quot;Motorola&quot;,&quot;modelName&quot;:&quot;NVG468MQ&quot;,&quot;productClass&quot;:&quot;NVG468MQ&quot;,&quot;protocolVersion&quot;:&quot;cwmp10&quot;,&quot;provisioningCode&quot;:&quot;&quot;,&quot;softwareVersion&quot;:&quot;9.3.0h0d55&quot;,&quot;tags&quot;:[&quot;default&quot;],&quot;timeZone&quot;:&quot;EST+5EDT,M3.2.0/2,M11.1.0/2&quot;,&quot;wan&quot;:\{&quot;ethDuplexMode&quot;:&quot;Full&quot;,&quot;ethSyncBitRate&quot;:&quot;1000&quot;},&quot;wifi&quot;:&lt;a href=&quot;file://{&amp;quot;0&amp;quot;:{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;NE-TB12-GOAT-2G&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;1&amp;quot;://{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;TP-Link_extender_2.4GHz&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;2&amp;quot;://{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Frontier5360_D2&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;3&amp;quot;://{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Frontier5360_D3&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;4&amp;quot;://{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;NE-TB12-GOAT-5G&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;5&amp;quot;://{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Guest5360_5G&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;6&amp;quot;://{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;Frontier5360_5G-TV&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;0&quot;},&amp;quot;7&amp;quot;://{&amp;quot;Enable&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;SSID&amp;quot;:&amp;quot;Frontier5360_5G_D2&amp;quot;,&amp;quot;SSIDAdvertisementEnabled&amp;quot;:&amp;quot;1&amp;quot;}}&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;\\{&quot;0&quot;:{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;NE-TB12-GOAT-2G&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;1&quot;:\\{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;TP-Link_extender_2.4GHz&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;2&quot;:\\{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Frontier5360_D2&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;3&quot;:\\{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Frontier5360_D3&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;4&quot;:\\{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;NE-TB12-GOAT-5G&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;5&quot;:\\{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Guest5360_5G&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;6&quot;:\\{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;Frontier5360_5G-TV&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;0&quot;},&quot;7&quot;:\\{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Frontier5360_5G_D2&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;}}&lt;/a&gt;},&quot;ts&quot;:1590624060253}&lt;/font&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;font color=&quot;#0000ff&quot;&gt;{&quot;id&quot;:&quot;1512b1b8526211e9acf100505699063c&quot;,&quot;created&quot;:1553891682535,&quot;properties&quot;:\{&quot;WANAccessType&quot;:&quot;2&quot;,&quot;arrisNvgDbCheck&quot;:&quot;1:success&quot;,&quot;deviceClassifiers&quot;:[&quot;ARRIS HNC IGD&quot;,&quot;Annex F Gateway&quot;,&quot;Supports.Collect.Optimized.Workflow&quot;,&quot;Fast.Inform&quot;,&quot;InternetGatewayDevice:1.4&quot;,&quot;Supports.TR98.Traceroute&quot;,&quot;Motorola.ServiceType.IP&quot;,&quot;Supports Arris FastPath Speed Test&quot;,&quot;Arris.NVG468MQ.9.3.0h0&quot;,&quot;Wireless.Common.IGD.DualRadio&quot;,&quot;001E46.NVG468MQ.Is.WANIP&quot;,&quot;Device.Supports.HNC&quot;,&quot;[Arris.NVG4xx.Missing.CA|http://arris.nvg4xx.missing.ca/]&quot;,&quot;Device.Type.RG&quot;,&quot;Supports.TR98.IPPing&quot;,&quot;Arris.NVG468MQ.9.3.0+&quot;,&quot;Wireless&quot;,&quot;ARRIS HNC IGD EUROPA&quot;,&quot;Arris.NVG.Wireless&quot;,&quot;WLAN.Radios.Action.Common.TR098&quot;,&quot;VoiceService:1.0&quot;,&quot;ConnecticutDeviceTypes&quot;,&quot;Device.Supports.SpeedTest&quot;,&quot;Motorola.Device.Supports.VoIP&quot;,&quot;Arris.NVG468MQ&quot;,&quot;Motorola.device&quot;,&quot;Arris.NVG4xx&quot;,&quot;CaptivePortal:1&quot;,&quot;All.TR069.RG.Devices&quot;,&quot;TraceRoute:1&quot;,&quot;Arris.NVG4xx.9.3.0+&quot;,&quot;datamodel.igd&quot;,&quot;Arris.NVG4xxQ&quot;,&quot;IPPing:1&quot;,&quot;Device.ServiceType.IP&quot;,&quot;001E46.NVG468MQ.Is.WANEth&quot;,&quot;Arris.NVG468MQ.9.2.4+&quot;,&quot;broken.device.no.notification&quot;],&quot;deviceType&quot;:&quot;IGD&quot;,&quot;firstInform&quot;:&quot;1553891708717&quot;,&quot;groups&quot;:[&quot;Total Control&quot;,&quot;HSI&quot;,&quot;Self-Service Diagnostics&quot;,&quot;SLF-SRVC_DGNSTCS000&quot;,&quot;HS004&quot;,&quot;TTL_CNTRL000&quot;,&quot;TCW - NVG4xx - First Contact&quot;,&quot;GPON_200M_200M&quot;,&quot;TCW Enabled&quot;,&quot;GPN_200M_200M000&quot;],&quot;hardwareVersion&quot;:&quot;NVG468MQ_0200240031004E&quot;,&quot;hncEnable&quot;:&quot;1&quot;,&quot;lastBoot&quot;:&quot;1590537703734&quot;,&quot;lastInform&quot;:&quot;1590624061415&quot;,&quot;lastPeriodic&quot;:&quot;1590624061415&quot;,&quot;manufacturerName&quot;:&quot;Motorola&quot;,&quot;modelName&quot;:&quot;NVG468MQ&quot;,&quot;productClass&quot;:&quot;NVG468MQ&quot;,&quot;protocolVersion&quot;:&quot;cwmp10&quot;,&quot;provisioningCode&quot;:&quot;&quot;,&quot;softwareVersion&quot;:&quot;9.3.0h0d55&quot;,&quot;tags&quot;:[&quot;default&quot;],&quot;timeZone&quot;:&quot;EST+5EDT,M3.2.0/2,M11.1.0/2&quot;,&quot;wan&quot;:\{&quot;ethDuplexMode&quot;:&quot;Full&quot;,&quot;ethSyncBitRate&quot;:&quot;1000&quot;},&quot;wifi&quot;:&lt;a href=&quot;file://{&amp;quot;0&amp;quot;:{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;Frontier7968&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;1&amp;quot;://{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Guest7968&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;2&amp;quot;://{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Frontier7968_D2&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;3&amp;quot;://{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Frontier7968_D3&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;4&amp;quot;://{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;Frontier7968&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;5&amp;quot;://{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Guest7968_5G&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&amp;quot;6&amp;quot;://{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;Frontier7968_5G-TV&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;0&quot;},&amp;quot;7&amp;quot;://{&amp;quot;Enable&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;SSID&amp;quot;:&amp;quot;Frontier7968_5G_D2&amp;quot;,&amp;quot;SSIDAdvertisementEnabled&amp;quot;:&amp;quot;1&amp;quot;}}&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;\\{&quot;0&quot;:{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;Frontier7968&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;1&quot;:\\{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Guest7968&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;2&quot;:\\{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Frontier7968_D2&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;3&quot;:\\{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Frontier7968_D3&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;4&quot;:\\{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;Frontier7968&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;5&quot;:\\{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Guest7968_5G&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;},&quot;6&quot;:\\{&quot;Enable&quot;:&quot;1&quot;,&quot;SSID&quot;:&quot;Frontier7968_5G-TV&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;0&quot;},&quot;7&quot;:\\{&quot;Enable&quot;:&quot;0&quot;,&quot;SSID&quot;:&quot;Frontier7968_5G_D2&quot;,&quot;SSIDAdvertisementEnabled&quot;:&quot;1&quot;}}&lt;/a&gt;},&quot;ts&quot;:1590624061415}&lt;/font&gt;&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment>&lt;p&gt;20/06/29 07:52:19 WARN Utils: Your hostname, sanjeevs-MacBook-Pro-2.local resolves to a loopback address: 127.0.0.1; using 10.0.0.8 instead (on interface en0)&lt;br/&gt;
20/06/29 07:52:19 WARN Utils: Set SPARK_LOCAL_IP if you need to bind to another address&lt;br/&gt;
20/06/29 07:52:19 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable&lt;br/&gt;
Using Spark&apos;s default log4j profile: org/apache/spark/log4j-defaults.properties&lt;br/&gt;
Setting default log level to &quot;WARN&quot;.&lt;br/&gt;
To adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).&lt;br/&gt;
20/06/29 07:52:26 WARN Utils: Service &apos;SparkUI&apos; could not bind on port 4040. Attempting port 4041.&lt;br/&gt;
Spark context Web UI available at &lt;a href=&quot;http://10.0.0.8:4041&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://10.0.0.8:4041&lt;/a&gt;&lt;br/&gt;
Spark context available as &apos;sc&apos; (master = local&lt;span class=&quot;error&quot;&gt;&amp;#91;*&amp;#93;&lt;/span&gt;, app id = local-1593442346864).&lt;br/&gt;
Spark session available as &apos;spark&apos;.&lt;br/&gt;
Welcome to&lt;br/&gt;
 ____ __&lt;br/&gt;
 / _&lt;em&gt;/&lt;/em&gt;_ ___ ____&lt;em&gt;/ /&lt;/em&gt;_&lt;br/&gt;
 &lt;em&gt;\ \/ _ \/ _ `/ __/ &apos;&lt;/em&gt;/&lt;br/&gt;
 /__&lt;em&gt;/ .&lt;/em&gt;&lt;em&gt;/&amp;#95;,&lt;/em&gt;/&lt;em&gt;/ /&lt;/em&gt;/&amp;#95;\ version 3.0.0&lt;br/&gt;
 /_/&lt;/p&gt;

&lt;p&gt;Using Scala version 2.12.10 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_251)&lt;br/&gt;
Type in expressions to have them evaluated.&lt;br/&gt;
Type :help for more information.&lt;/p&gt;</environment>
        <key id="13314087">SPARK-32130</key>
            <summary>Spark 3.0 json load performance is unacceptable in comparison of Spark 2.4</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="maxgekk">Max Gekk</assignee>
                                    <reporter username="lotus2you">Sanjeev Mishra</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Jun 2020 15:53:43 +0000</created>
                <updated>Mon, 12 Dec 2022 18:10:59 +0000</updated>
                            <resolved>Wed, 1 Jul 2020 22:47:36 +0000</resolved>
                                    <version>3.0.0</version>
                                    <fixVersion>3.0.1</fixVersion>
                    <fixVersion>3.1.0</fixVersion>
                                    <component>Input/Output</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>13</watches>
                                                                                                                <comments>
                            <comment id="17148393" author="jinxintang" created="Tue, 30 Jun 2020 07:38:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lotus2you&quot; class=&quot;user-hover&quot; rel=&quot;lotus2you&quot;&gt;lotus2you&lt;/a&gt;&#160;Thank you for your feedback.&lt;/p&gt;

&lt;p&gt;This is mainly due to lots of time is used to infer `Timestamp` json datatype becuse of&#160; exception happens.&lt;/p&gt;

&lt;p&gt;Please try use `.option(&quot;inferTimestamp&quot;, false)` as `spark.read.option(&quot;inferTimestamp&quot;, false).json(&quot;...&quot;)` or specify json schema.&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maxgekk&quot; class=&quot;user-hover&quot; rel=&quot;maxgekk&quot;&gt;maxgekk&lt;/a&gt;&#160;FYI.&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-26246&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SPARK-26246&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17148416" author="kabhwan" created="Tue, 30 Jun 2020 08:16:13 +0000"  >&lt;p&gt;I&apos;ve feeling that &quot;opt-in&quot; approach is correct as it brings performance hit by default. Might be better to disable by default in Spark 3.0.1?&lt;/p&gt;</comment>
                            <comment id="17148459" author="gourav.sengupta" created="Tue, 30 Jun 2020 09:01:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JinxinTang&quot; class=&quot;user-hover&quot; rel=&quot;JinxinTang&quot;&gt;JinxinTang&lt;/a&gt;&#160;and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lotus2you&quot; class=&quot;user-hover&quot; rel=&quot;lotus2you&quot;&gt;lotus2you&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think that it is only the first time that the time taken by SPARK 3.x is more, and in the subsequent times, its less, as the schema would have already been determined. Setting the inferTimestamp to be False does not improve the performance as well.&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13006732/13006732_SPARK+32130+-+replication+and+findings.ipynb&quot; title=&quot;SPARK 32130 - replication and findings.ipynb attached to SPARK-32130&quot;&gt;SPARK 32130 - replication and findings.ipynb&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13006732/13006732_SPARK+32130+-+replication+and+findings.ipynb&quot; title=&quot;SPARK 32130 - replication and findings.ipynb attached to SPARK-32130&quot;&gt;SPARK 32130 - replication and findings.ipynb&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Note book with details and full reproducibility is attached.&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kabhwan&quot; class=&quot;user-hover&quot; rel=&quot;kabhwan&quot;&gt;kabhwan&lt;/a&gt;&#160;it might be of use to consult the entire community by writing to the user group if we are changing the default behaviour. Because it might affect a lot of production code.&lt;/p&gt;</comment>
                            <comment id="17148501" author="jinxintang" created="Tue, 30 Jun 2020 10:18:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gourav.sengupta&quot; class=&quot;user-hover&quot; rel=&quot;gourav.sengupta&quot;&gt;gourav.sengupta&lt;/a&gt;&#160;Nice notebook, is seems the row count() is&#160;33447 instead of 11. it can be explained because 3s different is due to jvm warm up if record count is 11 instead of&#160;33447.&lt;/p&gt;</comment>
                            <comment id="17148546" author="kabhwan" created="Tue, 30 Jun 2020 11:12:38 +0000"  >&lt;p&gt;For me it&apos;s reproduced consistently. Please make sure you run the query in spark-shell with default setting of Spark 2.4.5 vs Spark 3.0.0. To remove any variant, don&apos;t add &quot;multiLine&quot; option.&lt;/p&gt;

&lt;p&gt;spark.time(spark.read.json(&quot;datadir&quot;).count())&lt;/p&gt;

&lt;p&gt;Spark 2.4.5: 3215ms&lt;br/&gt;
Spark 3.0.0: 13317ms&lt;/p&gt;

&lt;p&gt;adding `.option(&quot;inferTimestamp&quot;, &quot;false&quot;)` before .json leads the elapsed time closer - 4716 ms - still have a difference.&lt;/p&gt;</comment>
                            <comment id="17148559" author="kabhwan" created="Tue, 30 Jun 2020 11:28:42 +0000"  >&lt;p&gt;So anyone can just reproduce via running spark-shell on Spark 3.0.0 and run the query, and shut down, and rerun spark-shell, and run another query.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
spark.time(spark.read.option(&lt;span class=&quot;code-quote&quot;&gt;&quot;inferTimestamp&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;).json(&lt;span class=&quot;code-quote&quot;&gt;&quot;datadir&quot;&lt;/span&gt;).count())
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
spark.time(spark.read.option(&lt;span class=&quot;code-quote&quot;&gt;&quot;inferTimestamp&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;).json(&lt;span class=&quot;code-quote&quot;&gt;&quot;datadir&quot;&lt;/span&gt;).count())
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;it might be of use to consult the entire community by writing to the user group if we are changing the default behaviour. Because it might affect a lot of production code.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The default behavior was changed in Spark 3.0.0 - I agree it&apos;s bad user experience to make it back and forth, but if it contributes the performance silently, IMHO the option should be ideally turned off by default so that end users will turn on by their own intention.&lt;/p&gt;</comment>
                            <comment id="17148570" author="kabhwan" created="Tue, 30 Jun 2020 11:45:57 +0000"  >&lt;p&gt;Looks like we already saw the difference but we missed to consider the performance regression. &lt;/p&gt;

&lt;p&gt;Please look at the table in PR description of &lt;a href=&quot;https://github.com/apache/spark/pull/23653&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/23653&lt;/a&gt;.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;inferTimestamp=default (true) &amp;amp; prefersDecimal=default (false) took 6.1 minutes&lt;/li&gt;
	&lt;li&gt;inferTimestamp=false &amp;amp; prefersDecimal=default (false) took 49 seconds&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The difference simply came from inferTimestamp and it was noticeable.&lt;/p&gt;</comment>
                            <comment id="17148663" author="lotus2you" created="Tue, 30 Jun 2020 13:18:07 +0000"  >&lt;p&gt;I tried to load entire dataset using above suggestions and time did come close but Spark 2.4 still beats Spark 3 by ~3+ sec (may be in acceptable range but question is why?). I would definitely agree above comment that if the default behavior is changed the community MUST be notified otherwise it is a huge time waste for all. Here are the various results&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Spark 2.4&lt;/b&gt;&#160;&lt;/p&gt;

&lt;p&gt;spark.time(spark.read.&lt;font color=&quot;#0747a6&quot;&gt;option(&quot;inferTimestamp&quot;,&quot;false&quot;)&lt;/font&gt;.json(&quot;/data/20200528/&quot;).count)&lt;br/&gt;
 Time taken: &lt;font color=&quot;#ff0000&quot;&gt;29706 ms&lt;/font&gt;&lt;br/&gt;
 res0: Long = 2605349&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;spark.time(spark.read.&lt;font color=&quot;#0747a6&quot;&gt;option(&quot;inferTimestamp&quot;,&quot;false&quot;).option(&quot;prefersDecimal&quot;,&quot;false&quot;&lt;/font&gt;).json(&quot;/data/20200528/&quot;).count)&lt;br/&gt;
 Time taken: &lt;font color=&quot;#de350b&quot;&gt;31431 ms&lt;/font&gt;&lt;br/&gt;
 res0: Long = 2605349&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Spark 3.0&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;spark.time(spark.read.&lt;font color=&quot;#0747a6&quot;&gt;option(&quot;inferTimestamp&quot;,&quot;false&quot;&lt;/font&gt;).json(&quot;/data/20200528/&quot;).count)&lt;br/&gt;
 Time taken: &lt;font color=&quot;#de350b&quot;&gt;32826 ms&lt;/font&gt;&lt;br/&gt;
 res0: Long = 2605349&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;spark.time(spark.read.&lt;font color=&quot;#0747a6&quot;&gt;option(&quot;inferTimestamp&quot;,&quot;false&quot;).option(&quot;prefersDecimal&quot;,&quot;false&quot;&lt;/font&gt;).json(&quot;/data/20200528/&quot;).count)&lt;br/&gt;
 Time taken: &lt;font color=&quot;#de350b&quot;&gt;34011 ms&lt;/font&gt;&lt;br/&gt;
 res0: Long = 2605349&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#de350b&quot;&gt;&lt;b&gt;Note:&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Make sure &lt;font color=&quot;#de350b&quot;&gt;you never turn on prefersDecimal to true&lt;/font&gt; even when inferTimestamp is false, it again takes huge amount of time.&lt;/li&gt;
	&lt;li&gt;Spark 3.0 + JDK 11 is slower than Spark 3.0 + JDK 8 by almost 6 sec.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17148936" author="srowen" created="Tue, 30 Jun 2020 20:12:13 +0000"  >&lt;p&gt;So, is the issue that it&apos;s trying and failing to parse millions of things as timestamps, as part of schema inference, and almost all of that is wasted because they&apos;re not timestamps? is it possible to make the type inference for timestamps fail way faster on inputs that are obviously not dates (e.g. don&apos;t start with a number?) &lt;/p&gt;</comment>
                            <comment id="17149019" author="kabhwan" created="Wed, 1 Jul 2020 00:17:57 +0000"  >&lt;p&gt;There might be some tricks to make type inference for timestamps fail faster, but that would depend on the value and will be same (even worse for adding overhead on applying tricks) for worst case. Unless the performance becomes on par or similar on every cases, turning it on by default doesn&apos;t seem to be ideal.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dongjoon&quot; class=&quot;user-hover&quot; rel=&quot;dongjoon&quot;&gt;dongjoon&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cloud_fan&quot; class=&quot;user-hover&quot; rel=&quot;cloud_fan&quot;&gt;cloud_fan&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hyukjin.kwon&quot; class=&quot;user-hover&quot; rel=&quot;hyukjin.kwon&quot;&gt;hyukjin.kwon&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maxgekk&quot; class=&quot;user-hover&quot; rel=&quot;maxgekk&quot;&gt;maxgekk&lt;/a&gt; Could we please revisit this?&lt;/p&gt;</comment>
                            <comment id="17149225" author="cloud_fan" created="Wed, 1 Jul 2020 09:01:00 +0000"  >&lt;p&gt;Even in Spark 2.4, the type inference takes much more time than the actual execution. It&apos;s always recommended to specify the schema manually to skip schema inference in production workloads.&lt;/p&gt;

&lt;p&gt;Speaking of type inference, in general it&apos;s better to infer the type more accurately. But given the perf regression is huge, I think we can disable this feature by default. We can still investigate the fail-fast approach. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maxgekk&quot; class=&quot;user-hover&quot; rel=&quot;maxgekk&quot;&gt;maxgekk&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17149235" author="maxgekk" created="Wed, 1 Jul 2020 09:21:04 +0000"  >&lt;p&gt;I would like to propose:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Add the SQL config&#160;spark.sql.legacy.json.inferTimestamps.enabled with false by default. The will control timestamp inference in JSON globally.&lt;/li&gt;
	&lt;li&gt;Keep&#160;inferTimestamps as an JSON option (because it has been already released) and set it to false by default.&lt;/li&gt;
	&lt;li&gt;If the JSON option&#160;inferTimestamps is set to any value, it overrides the SQL config.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;If you are ok with the changes, I will open an PR for master and branch-3.0. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Samwel&quot; class=&quot;user-hover&quot; rel=&quot;Samwel&quot;&gt;Samwel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hyukjin.kwon&quot; class=&quot;user-hover&quot; rel=&quot;hyukjin.kwon&quot;&gt;hyukjin.kwon&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17149246" author="cloud_fan" created="Wed, 1 Jul 2020 09:36:56 +0000"  >&lt;p&gt;I&apos;m not sure about 1. It&apos;s good to have but not necessary to fix this perf regression. You can open a PR against master branch to add it as a new feature though.&lt;/p&gt;</comment>
                            <comment id="17149263" author="samwel" created="Wed, 1 Jul 2020 10:01:47 +0000"  >&lt;p&gt;+1 to what &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cloud_fan&quot; class=&quot;user-hover&quot; rel=&quot;cloud_fan&quot;&gt;cloud_fan&lt;/a&gt; said. We should just keep the default hardcoded to &quot;false&quot; for 3.0, and then add the config to 3.1. We won&apos;t be able to flip it any time soon anyway, so there&apos;s no rush to add it.&lt;/p&gt;</comment>
                            <comment id="17149334" author="gurwls223" created="Wed, 1 Jul 2020 11:16:20 +0000"  >&lt;p&gt;Yeah, we can disable it back by default considering the performance diff is huge.&lt;/p&gt;</comment>
                            <comment id="17149347" author="apachespark" created="Wed, 1 Jul 2020 11:38:09 +0000"  >&lt;p&gt;User &apos;MaxGekk&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/28966&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/28966&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17149348" author="apachespark" created="Wed, 1 Jul 2020 11:38:55 +0000"  >&lt;p&gt;User &apos;MaxGekk&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/28966&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/28966&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17149728" author="dongjoon" created="Wed, 1 Jul 2020 22:47:36 +0000"  >&lt;p&gt;Issue resolved by pull request 28966&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/28966&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/28966&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17150565" author="apachespark" created="Thu, 2 Jul 2020 20:22:42 +0000"  >&lt;p&gt;User &apos;MaxGekk&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/28981&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/28981&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17150566" author="apachespark" created="Thu, 2 Jul 2020 20:23:28 +0000"  >&lt;p&gt;User &apos;MaxGekk&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/28981&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/28981&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13201891">SPARK-26246</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13006732" name="SPARK 32130 - replication and findings.ipynb" size="1671953" author="gourav.sengupta" created="Tue, 30 Jun 2020 09:01:53 +0000"/>
                            <attachment id="13006676" name="small-anon.tar" size="3880960" author="lotus2you" created="Mon, 29 Jun 2020 15:55:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 19 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0gawo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12347862">3.0.1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>