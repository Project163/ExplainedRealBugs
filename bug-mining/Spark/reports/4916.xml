<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:53:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-13933] hadoop-2.7 profile&apos;s curator version should be 2.7.1</title>
                <link>https://issues.apache.org/jira/browse/SPARK-13933</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;This is pretty minor, more due diligence than any binary compatibility.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;the &lt;tt&gt;hadoop-2.7&lt;/tt&gt; profile declares the curator version to be 2.6.0&lt;/li&gt;
	&lt;li&gt;the actual hadoop-2.7.1 dependency is of curator 2.7.1; this came from &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11492&quot; title=&quot;Bump up curator version to 2.7.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11492&quot;&gt;&lt;del&gt;HADOOP-11492&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;For consistency, the profile can/should be changed. However, note that as well as some incompatibilities defined in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11492&quot; title=&quot;Bump up curator version to 2.7.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11492&quot;&gt;&lt;del&gt;HADOOP-11492&lt;/del&gt;&lt;/a&gt;; the version  of Guava that curator asserts a need for is 15.x. &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11612&quot; title=&quot;Workaround for Curator&amp;#39;s ChildReaper requiring Guava 15+&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11612&quot;&gt;&lt;del&gt;HADOOP-11612&lt;/del&gt;&lt;/a&gt; showed what needed to be done to address compatibility problems there; one of the Curator classes had to be forked to make compatible with guava 11+&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12950813">SPARK-13933</key>
            <summary>hadoop-2.7 profile&apos;s curator version should be 2.7.1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yumwang">Yuming Wang</assignee>
                                    <reporter username="stevel@apache.org">Steve Loughran</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Mar 2016 10:35:39 +0000</created>
                <updated>Sun, 11 Jun 2017 09:06:19 +0000</updated>
                            <resolved>Sun, 11 Jun 2017 09:05:58 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15197163" author="srowen" created="Wed, 16 Mar 2016 10:40:38 +0000"  >&lt;p&gt;The curator update itself seems fine but the Guava thing is unfortunate. So we&apos;d have to depend on a custom Guava build? Is there an actual problem to not updating the curator dep &amp;#8211; if they&apos;re API compatible it shouldn&apos;t matter really.&lt;/p&gt;</comment>
                            <comment id="15197206" author="stevel@apache.org" created="Wed, 16 Mar 2016 11:21:47 +0000"  >&lt;p&gt;No custom guava built. Hadoop dealt with the problem by&lt;/p&gt;

&lt;p&gt;-experimentally building curator with guava.version set to 11 to see what broke (me: &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11102&quot; title=&quot;Downgrade curator version to 2.4.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11102&quot;&gt;&lt;del&gt;HADOOP-11102&lt;/del&gt;&lt;/a&gt; )&lt;br/&gt;
-fixing the one needed operation by duplicating the code in hadoop code with it fixed to work with guava 11.&lt;/p&gt;

&lt;p&gt;There&apos;s no problem AFAIK; the reason for the hadoop update was to get some ZK fixes related to NN HA in. &lt;/p&gt;

&lt;p&gt;Even so, having a library that is known to be incompatible with a shared dependency is dangerous; I wasn&apos;t happy with the change going in without much discussion, and if &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11102&quot; title=&quot;Downgrade curator version to 2.4.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11102&quot;&gt;&lt;del&gt;HADOOP-11102&lt;/del&gt;&lt;/a&gt; hadn&apos;t reassured me about compatibility, I&apos;d have reverted things.&lt;/p&gt;


&lt;p&gt;The Hadoop change notes flag the API changes as: &lt;/p&gt;

&lt;hr /&gt;

&lt;ul&gt;
	&lt;li&gt;Binary incompatible change: &lt;tt&gt;org.apache.curator.utils.PathUtils.validatePath(String)&lt;/tt&gt; changed return types. Downstream users of this method will need to recompile.  &lt;b&gt;Not directly used in spark codebase&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Source incompatible change: &lt;tt&gt;org.apache.curator.framework.recipes.shared.SharedCountReader&lt;/tt&gt; added a method to its interface definition. Downstream users with custom implementations of this interface can continue without binary compatibility problems but will need to modify their source code to recompile.  &lt;b&gt;Not directly used in spark codebase&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;Source incompatible change: &lt;tt&gt;org.apache.curator.framework.recipes.shared.SharedValueReader&lt;/tt&gt; added a method to its interface definition. Downstream users with custom implementations of this interface can continue without binary compatibility problems but will need to modify their source code to recompile. &lt;b&gt;Not directly used in spark codebase&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;

&lt;p&gt;As none of them are directly used, there&apos;s no direct risk of things breaking if spark depended on 2.6 and someone ran it with 2.7.1. Tachyon-client does use curator; someone would need to see its versioning/compatibility there; it may already be on a later version.&lt;/p&gt;

&lt;p&gt;How about I just add a one-liner to the profile saying &quot;deliberately held back for guava reasons&quot;&lt;/p&gt;</comment>
                            <comment id="15197217" author="srowen" created="Wed, 16 Mar 2016 11:31:11 +0000"  >&lt;p&gt;Tachyon isn&apos;t used in the project anymore in 2.x anyway, so that much is safe for 2.x. It&apos;s probably fine.&lt;/p&gt;</comment>
                            <comment id="16043748" author="apachespark" created="Fri, 9 Jun 2017 00:56:03 +0000"  >&lt;p&gt;User &apos;wangyum&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/18247&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/18247&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16045875" author="srowen" created="Sun, 11 Jun 2017 09:05:58 +0000"  >&lt;p&gt;Issue resolved by pull request 18247&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/18247&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/18247&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13074816">SPARK-20884</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2urdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>