<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:22:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-1825] Windows Spark fails to work with Linux YARN</title>
                <link>https://issues.apache.org/jira/browse/SPARK-1825</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Windows Spark fails to work with Linux YARN.&lt;br/&gt;
This is a cross-platform problem.&lt;/p&gt;

&lt;p&gt;This error occurs when &apos;yarn-client&apos; mode is used.&lt;br/&gt;
(yarn-cluster/yarn-standalone mode was not tested.)&lt;/p&gt;

&lt;p&gt;On YARN side, Hadoop 2.4.0 resolved the issue as follows:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1824&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/YARN-1824&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But Spark YARN module does not incorporate the new YARN API yet, so problem persists for Spark.&lt;/p&gt;

&lt;p&gt;First, the following source files should be changed:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;/yarn/common/src/main/scala/org/apache/spark/deploy/yarn/ClientBase.scala&lt;/li&gt;
	&lt;li&gt;/yarn/common/src/main/scala/org/apache/spark/deploy/yarn/ExecutorRunnableUtil.scala&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Change is as follows:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Replace .$() to .$$()&lt;/li&gt;
	&lt;li&gt;Replace File.pathSeparator for Environment.CLASSPATH.name to ApplicationConstants.CLASS_PATH_SEPARATOR (import org.apache.hadoop.yarn.api.ApplicationConstants is required for this)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Unless the above are applied, launch_container.sh will contain invalid shell script statements(since they will contain Windows-specific separators), and job will fail.&lt;br/&gt;
Also, the following symptom should also be fixed (I could not find the relevant source code):&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;SPARK_HOME environment variable is copied straight to launch_container.sh. It should be changed to the path format for the server OS, or, the better, a separate environment variable or a configuration variable should be created.&lt;/li&gt;
	&lt;li&gt;&apos;%HADOOP_MAPRED_HOME%&apos; string still exists in launch_container.sh, after the above change is applied. maybe I missed a few lines.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;m not sure whether this is all, since I&apos;m new to both Spark and YARN.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12714098">SPARK-1825</key>
            <summary>Windows Spark fails to work with Linux YARN</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tsudukim">Masayoshi Tsuzuki</assignee>
                                    <reporter username="zeodtr">Taeyun Kim</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 May 2014 02:38:06 +0000</created>
                <updated>Mon, 2 Feb 2015 02:30:06 +0000</updated>
                            <resolved>Mon, 2 Feb 2015 02:30:05 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                                    <component>YARN</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>12</watches>
                                                                                                                <comments>
                            <comment id="14206382" author="angel2014" created="Tue, 11 Nov 2014 12:56:45 +0000"  >&lt;p&gt;Is it really necessary to change the file &quot;ExecutorRunnableUtil.scala&quot;?&lt;/p&gt;

&lt;p&gt;I&apos;d just changed the file &quot;ClientBase.scala&quot; and it (apparently) works for Spark 1.1.&lt;/p&gt;

&lt;p&gt;In order to make it work, you&apos;ll have to add the following configuration&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Program arguments: --master yarn-cluster&lt;/li&gt;
	&lt;li&gt;VM arguments: -Dspark.app-submission.cross-platform=true&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="14219490" author="angel2014" created="Thu, 20 Nov 2014 15:34:33 +0000"  >&lt;p&gt;I&apos;ve had the following problems to make Windows+Pyspark+YARN work properly:&lt;/p&gt;

&lt;p&gt;1. net.ScriptBasedMapping: Exception running /etc/hadoop/conf.cloudera.yarn/topology.py&lt;/p&gt;

&lt;p&gt;FIX? Comment the &quot;net.topology.script.file.name&quot; property configuration in the file core-site.xml.&lt;/p&gt;

&lt;p&gt;2. Error from python worker:&lt;br/&gt;
  /usr/bin/python: No module named pyspark&lt;br/&gt;
PYTHONPATH was:&lt;br/&gt;
  /yarn/nm/usercache/bigdata/filecache/63/spark-assembly-1.1.0-hadoop2.3.0-cdh5.0.1.jar&lt;/p&gt;

&lt;p&gt;FIX? Add the environment variable SPARK_YARN_USER_ENV to my client (Eclipse) launch configuration. Assign this value to the env var:&lt;/p&gt;

&lt;p&gt;PYTHONPATH=/opt/cloudera/parcels/CDH/lib/spark/python:/opt/cloudera/parcels/CDH/lib/spark/python/lib/py4j-0.8.2.1-src.zip	&lt;/p&gt;


&lt;p&gt;is there any way to do it simpler? am I doing something wrong?&lt;/p&gt;</comment>
                            <comment id="14268858" author="apachespark" created="Thu, 8 Jan 2015 05:47:15 +0000"  >&lt;p&gt;User &apos;tsudukim&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/3943&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/3943&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14268863" author="tsudukim" created="Thu, 8 Jan 2015 05:56:04 +0000"  >&lt;p&gt;It is necessary to use $$() to solve this problem but as discussed on PR #899 if we use $$() build for hadoop&amp;lt;2.4 will fail.&lt;br/&gt;
So PR #3943 uses reflection to avoid build failure for every version of hadoop.&lt;br/&gt;
Windows clilents works fine with Linux YARN cluetr only when we use hadoop 2.4+. But it doesn&apos;t work under hadoop&amp;lt;2.4 even after this patch.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12765939">SPARK-5164</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12759918">YARN-2929</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12680784" name="SPARK-1825.patch" size="4796" author="angel2014" created="Tue, 11 Nov 2014 12:56:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>392411</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vkun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>392596</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327642">1.3.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>