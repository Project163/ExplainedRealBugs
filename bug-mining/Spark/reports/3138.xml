<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:38:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-13117] WebUI should use the local ip not 0.0.0.0</title>
                <link>https://issues.apache.org/jira/browse/SPARK-13117</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;When SPARK_LOCAL_IP is set everything seems to correctly bind and use that IP except the WebUI.  The WebUI should use the SPARK_LOCAL_IP not always use 0.0.0.0&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/spark/blob/master/core/src/main/scala/org/apache/spark/ui/WebUI.scala#L137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/blob/master/core/src/main/scala/org/apache/spark/ui/WebUI.scala#L137&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12935728">SPARK-13117</key>
            <summary>WebUI should use the local ip not 0.0.0.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="devaraj">Devaraj Kavali</assignee>
                                    <reporter username="jeremiah">Jeremiah Jordan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Feb 2016 19:34:24 +0000</created>
                <updated>Tue, 14 Oct 2025 12:14:00 +0000</updated>
                            <resolved>Mon, 29 Aug 2016 09:10:39 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Web UI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="15126892" author="joshrosen" created="Mon, 1 Feb 2016 19:44:00 +0000"  >&lt;p&gt;Would you like to submit a patch for this?&lt;/p&gt;</comment>
                            <comment id="15137320" author="devaraj.k" created="Mon, 8 Feb 2016 17:43:53 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjordan&quot; class=&quot;user-hover&quot; rel=&quot;jjordan&quot;&gt;jjordan&lt;/a&gt; for reporting. I would like to provide PR if you are not planning to work on this. Please let me know, Thanks.&lt;/p&gt;</comment>
                            <comment id="15137353" author="JIRAUSER308715" created="Mon, 8 Feb 2016 17:57:15 +0000"  >&lt;p&gt;go for it.&lt;/p&gt;</comment>
                            <comment id="15138251" author="devaraj.k" created="Tue, 9 Feb 2016 02:30:08 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjordan&quot; class=&quot;user-hover&quot; rel=&quot;jjordan&quot;&gt;jjordan&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15138846" author="apachespark" created="Tue, 9 Feb 2016 12:11:04 +0000"  >&lt;p&gt;User &apos;devaraj-kavali&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/11133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15167139" author="srowen" created="Thu, 25 Feb 2016 12:18:54 +0000"  >&lt;p&gt;Issue resolved by pull request 11133&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/11133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15167731" author="zsxwing" created="Thu, 25 Feb 2016 19:42:49 +0000"  >&lt;p&gt;Just reverted this one because of &lt;a href=&quot;https://github.com/apache/spark/pull/11133#issuecomment-188937933&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11133#issuecomment-188937933&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15169070" author="srowen" created="Fri, 26 Feb 2016 14:13:43 +0000"  >&lt;p&gt;Backing up on this issue &amp;#8211; why would binding to 0.0.0.0 not bind to your desired address, actually? it means bind to everything right?&lt;/p&gt;</comment>
                            <comment id="15173214" author="jaypanicker" created="Tue, 1 Mar 2016 04:36:09 +0000"  >&lt;p&gt;On systems with multiple interfaces, ability to select the bind ip will be nice, instead of binding to all.&lt;/p&gt;

&lt;p&gt;Actually, the code has everything needed to do it, except one change.&lt;/p&gt;

&lt;p&gt;Relevant lines from spark-1.6.0/core/src/main/scala/org/apache/spark/ui/WebUI.scala:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
...
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; val publicHostName = Option(conf.getenv(&lt;span class=&quot;code-quote&quot;&gt;&quot;SPARK_PUBLIC_DNS&quot;&lt;/span&gt;)).getOrElse(localHostName)
...
..
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      serverInfo = Some(startJettyServer(&lt;span class=&quot;code-quote&quot;&gt;&quot;0.0.0.0&quot;&lt;/span&gt;, port, handlers, conf, name))
      logInfo(&lt;span class=&quot;code-quote&quot;&gt;&quot;Started %s at http:&lt;span class=&quot;code-comment&quot;&gt;//%s:%d&quot;&lt;/span&gt;.format(className, publicHostName, boundPort))
&lt;/span&gt;    } 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Note the &quot;0.0.0.0&quot;, even though publicHostName is available as a configuration option.&lt;/p&gt;

&lt;p&gt;Making the following  change and an export SPARK_PUBLIC_DNS=&amp;lt;desired.ip.address&amp;gt; in spark-config.sh solved the problem:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      serverInfo = Some(startJettyServer(publicHostName, port, handlers, conf, name))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15173218" author="devaraj.k" created="Tue, 1 Mar 2016 04:44:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jaypanicker&quot; class=&quot;user-hover&quot; rel=&quot;jaypanicker&quot;&gt;jaypanicker&lt;/a&gt;, the proposed PR does the same but there is a problem while accessing web UI using the localhost or 127.0.0.1. Please have look into this comment &lt;a href=&quot;https://github.com/apache/spark/pull/11133#issuecomment-188937933&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11133#issuecomment-188937933&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15173224" author="devaraj.k" created="Tue, 1 Mar 2016 04:53:48 +0000"  >&lt;p&gt;I think we can start the Jetty server with the default value as &quot;0.0.0.0&quot; and it can take effect of the configured value for SPARK_PUBLIC_DNS if it is configured. It would change only for the Web UI and doesn&apos;t impact any other things. Changes will be some thing like below,&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;protected val publicHostName = Option(conf.getenv(&lt;span class=&quot;code-quote&quot;&gt;&quot;SPARK_PUBLIC_DNS&quot;&lt;/span&gt;)).getOrElse(&lt;span class=&quot;code-quote&quot;&gt;&quot;0.0.0.0&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;try {
      serverInfo = Some(startJettyServer(publicHostName, port, sslOptions, handlers, conf, name))
      logInfo(&lt;span class=&quot;code-quote&quot;&gt;&quot;Started %s at http://%s:%d&quot;&lt;/span&gt;.format(className, publicHostName, boundPort))
    } catch {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srowen&quot; class=&quot;user-hover&quot; rel=&quot;srowen&quot;&gt;srowen&lt;/a&gt;, any suggestions? Thanks&lt;/p&gt;</comment>
                            <comment id="15173254" author="jaypanicker" created="Tue, 1 Mar 2016 05:31:04 +0000"  >
&lt;p&gt;Sorry, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj.k&quot; class=&quot;user-hover&quot; rel=&quot;devaraj.k&quot;&gt;devaraj.k&lt;/a&gt; , I did not check the full thread - ran into this issue and fixed it the way I mentioned.&lt;/p&gt;

&lt;p&gt;Now, digging a bit deeper:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; val publicHostName = Option(conf.getenv(&lt;span class=&quot;code-quote&quot;&gt;&quot;SPARK_PUBLIC_DNS&quot;&lt;/span&gt;)).getOrElse(localHostName)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and localHostName comes from:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; val localHostName = Utils.localHostNameForURI()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and localHostNameForURI is define as:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  def localHostNameForURI(): &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; = {
    customHostname.getOrElse(InetAddresses.toUriString(localIpAddress))
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ok.. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  def setCustomHostname(hostname: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) {
    &lt;span class=&quot;code-comment&quot;&gt;// DEBUG code
&lt;/span&gt;    Utils.checkHost(hostname)
    customHostname = Some(hostname)
  }    
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; lazy val localIpAddress: InetAddress = findLocalInetAddress()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And findLocalInetAddress does this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;val defaultIpOverride = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getenv(&lt;span class=&quot;code-quote&quot;&gt;&quot;SPARK_LOCAL_IP&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and among other things, also chages loopback IP to real IP... &lt;/p&gt;

&lt;p&gt;While  using &quot;0.0.0.0&quot;  instead of localHostName certainly fixes the loopback/localhost issue, it bypasses the sequence of steps above, so might have other side effects..?&lt;/p&gt;
</comment>
                            <comment id="15173511" author="JIRAUSER308715" created="Tue, 1 Mar 2016 09:50:55 +0000"  >&lt;p&gt;If you want minimal side effects to this then you can just:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;serverInfo = Some(startJettyServer(Option(conf.getenv(&lt;span class=&quot;code-quote&quot;&gt;&quot;SPARK_PUBLIC_DNS&quot;&lt;/span&gt;)).getOrElse(&lt;span class=&quot;code-quote&quot;&gt;&quot;0.0.0.0&quot;&lt;/span&gt;), port, handlers, conf, name))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15177571" author="apachespark" created="Thu, 3 Mar 2016 09:47:04 +0000"  >&lt;p&gt;User &apos;devaraj-kavali&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/11490&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11490&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15184759" author="srowen" created="Tue, 8 Mar 2016 10:48:46 +0000"  >&lt;p&gt;Issue resolved by pull request 11490&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/11490&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11490&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15444942" author="jlewandowski" created="Mon, 29 Aug 2016 06:13:10 +0000"  >&lt;p&gt;The provided solution is wrong because it is inconsistent with the rest of Spark. &lt;/p&gt;

&lt;p&gt;In every other place, when we want to refer to bind address, we should use &lt;tt&gt;Utils.localHostname&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/spark/blob/branch-2.0/core/src/main/scala/org/apache/spark/util/Utils.scala#L895&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/blob/branch-2.0/core/src/main/scala/org/apache/spark/util/Utils.scala#L895&lt;/a&gt;) so that when people want to set it programmatically they are able to do that (&lt;a href=&quot;https://github.com/apache/spark/blob/branch-2.0/core/src/main/scala/org/apache/spark/util/Utils.scala#L886&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/blob/branch-2.0/core/src/main/scala/org/apache/spark/util/Utils.scala#L886&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Another issue is that people do not always want to bind WebUI to the same interface as Spark internal communication. &lt;/p&gt;

&lt;p&gt;I think there should be another environment variable for binding web interface with fallback to &lt;tt&gt;Utils.localHostname&lt;/tt&gt;.&lt;/p&gt;
</comment>
                            <comment id="15445324" author="srowen" created="Mon, 29 Aug 2016 09:10:41 +0000"  >&lt;p&gt;OK, but you seem to be proposing a different change, to make this separately configurable. Let&apos;s not reopen this. Before it was not configurable at all.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12930305">SPARK-12827</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 12 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s93z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>