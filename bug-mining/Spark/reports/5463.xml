<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:58:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-21996] Streaming ignores files with spaces in the file names</title>
                <link>https://issues.apache.org/jira/browse/SPARK-21996</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;I tried to stream text files from folder and noticed that files inside this folder with spaces in their names ignored and there are some warnings in the log:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;17/09/13 16:15:14 WARN InMemoryFileIndex: The directory file:/in/two%20two.txt was not found. Was it deleted very recently?
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I found that this happens due to duplicate file path URI encoding (I suppose) and the actual URI inside path objects looks like this &lt;tt&gt;&lt;a href=&quot;file:/in/two%2520two.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/in/two%2520two.txt&lt;/a&gt;&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;To reproduce this issue just place some text files with spaces in their names and execute some simple streaming code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/in
    /one.txt
    /two two.txt
    /three.txt
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;sparkSession.readStream.textFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;/in&quot;&lt;/span&gt;)
      .writeStream
      .option(&lt;span class=&quot;code-quote&quot;&gt;&quot;checkpointLocation&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;/checkpoint&quot;&lt;/span&gt;)
      .format(&lt;span class=&quot;code-quote&quot;&gt;&quot;text&quot;&lt;/span&gt;)
      .start(&lt;span class=&quot;code-quote&quot;&gt;&quot;/out&quot;&lt;/span&gt;)
      .awaitTermination()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The result will contain only content of files &lt;tt&gt;one.txt&lt;/tt&gt; and &lt;tt&gt;three.txt&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;openjdk version &quot;1.8.0_131&quot;&lt;br/&gt;
OpenJDK Runtime Environment (build 1.8.0_131-8u131-b11-2ubuntu1.17.04.3-b11)&lt;br/&gt;
OpenJDK 64-Bit Server VM (build 25.131-b11, mixed mode)&lt;/p&gt;</environment>
        <key id="13101975">SPARK-21996</key>
            <summary>Streaming ignores files with spaces in the file names</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xiayunsun">Xiayun Sun</assignee>
                                    <reporter username="isharamet">Ivan Sharamet</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Sep 2017 14:11:46 +0000</created>
                <updated>Thu, 18 Jan 2018 00:45:40 +0000</updated>
                            <resolved>Thu, 18 Jan 2018 00:43:11 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Structured Streaming</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16164711" author="srowen" created="Wed, 13 Sep 2017 14:16:37 +0000"  >&lt;p&gt;Your code doesn&apos;t show a path with a space. Are you sure the problem isn&apos;t that you&apos;re referring to a local dir in a distirbuted job?&lt;/p&gt;</comment>
                            <comment id="16164722" author="isharamet" created="Wed, 13 Sep 2017 14:24:38 +0000"  >&lt;p&gt;Hi Sean,&lt;/p&gt;

&lt;p&gt;As I wrote in the description this happens while reading from folder, which contains files with spaces in their names.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Ivan&lt;/p&gt;</comment>
                            <comment id="16164727" author="srowen" created="Wed, 13 Sep 2017 14:26:52 +0000"  >&lt;p&gt;/dir does not occur in your code snippet. I&apos;m questioning whether you&apos;re sure about the example. You are also apparently running a distributed job looking for a local driver file. That won&apos;t work.&lt;/p&gt;</comment>
                            <comment id="16164741" author="isharamet" created="Wed, 13 Sep 2017 14:38:31 +0000"  >&lt;p&gt;Sure, it&apos;s generic example: the folder names and locations don&apos;t matter, just provide your own.&lt;/p&gt;</comment>
                            <comment id="16164780" author="isharamet" created="Wed, 13 Sep 2017 14:59:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sowen&quot; class=&quot;user-hover&quot; rel=&quot;sowen&quot;&gt;sowen&lt;/a&gt;, I attached sample app to reproduce this issue. Sorry I didn&apos;t do it earlier.&lt;/p&gt;</comment>
                            <comment id="16167927" author="apachespark" created="Fri, 15 Sep 2017 14:22:04 +0000"  >&lt;p&gt;User &apos;xysun&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/19247&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/19247&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16167941" author="xiayunsun" created="Fri, 15 Sep 2017 14:29:43 +0000"  >&lt;p&gt;I can reproduce this issue for master branch, and found out it was from using &lt;tt&gt;.toString&lt;/tt&gt; instead of &lt;tt&gt;.getPath&lt;/tt&gt; to get the file path in string format. &lt;/p&gt;

&lt;p&gt;I pushed a PR to make it work for streaming. But there&apos;re other places in spark where we&apos;re using `.toString`. Not sure if it&apos;s a general concern. &lt;/p&gt;</comment>
                            <comment id="16329771" author="zsxwing" created="Thu, 18 Jan 2018 00:43:11 +0000"  >&lt;p&gt;Issue resolved by pull request 19247&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/19247&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/19247&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12886885" name="spark-streaming.zip" size="128133" author="isharamet" created="Wed, 13 Sep 2017 14:58:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3k0t3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>