<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:17:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-28067] Incorrect results in decimal aggregation with whole-stage code gen enabled</title>
                <link>https://issues.apache.org/jira/browse/SPARK-28067</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;The following test case involving a join followed by a sum aggregation&#160;returns the wrong answer for the sum:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
val df = Seq(
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 1),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 1),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2)).toDF(&lt;span class=&quot;code-quote&quot;&gt;&quot;decNum&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;intNum&quot;&lt;/span&gt;)
val df2 = df.withColumnRenamed(&lt;span class=&quot;code-quote&quot;&gt;&quot;decNum&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;decNum2&quot;&lt;/span&gt;).join(df, &lt;span class=&quot;code-quote&quot;&gt;&quot;intNum&quot;&lt;/span&gt;).agg(sum(&lt;span class=&quot;code-quote&quot;&gt;&quot;decNum&quot;&lt;/span&gt;))
scala&amp;gt; df2.show(40,&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
 ---------------------------------------

sum(decNum)
---------------------------------------

40000000000000000000.000000000000000000
---------------------------------------
&#160;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The result should be 1040000000000000000000.0000000000000000.&lt;/p&gt;

&lt;p&gt;It appears a partial sum is computed for each join key, as the result returned would be the answer for all rows matching&#160;intNum === 1.&lt;/p&gt;

&lt;p&gt;If only the rows with intNum === 2 are included, the answer given is null:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
scala&amp;gt; val df3 = df.filter($&lt;span class=&quot;code-quote&quot;&gt;&quot;intNum&quot;&lt;/span&gt; === lit(2))
 df3: org.apache.spark.sql.Dataset[org.apache.spark.sql.Row] = [decNum: decimal(38,18), intNum: &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;]
scala&amp;gt; val df4 = df3.withColumnRenamed(&lt;span class=&quot;code-quote&quot;&gt;&quot;decNum&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;decNum2&quot;&lt;/span&gt;).join(df3, &lt;span class=&quot;code-quote&quot;&gt;&quot;intNum&quot;&lt;/span&gt;).agg(sum(&lt;span class=&quot;code-quote&quot;&gt;&quot;decNum&quot;&lt;/span&gt;))
 df4: org.apache.spark.sql.DataFrame = [sum(decNum): decimal(38,18)]
scala&amp;gt; df4.show(40,&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
 -----------

sum(decNum)
-----------

&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
-----------
&#160;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The correct answer, 1000000000000000000000.0000000000000000, doesn&apos;t fit in the DataType picked for the result,&#160;decimal(38,18), so&#160;an overflow occurs, which Spark then converts to null.&lt;/p&gt;

&lt;p&gt;The first&#160;example, which&#160;doesn&apos;t filter out the&#160;intNum === 1 values should also return null, indicating overflow, but it doesn&apos;t.&#160; This may mislead the user to think a valid sum was computed.&lt;/p&gt;

&lt;p&gt;If whole-stage code gen is turned off:&lt;/p&gt;

&lt;p&gt;spark.conf.set(&quot;spark.sql.codegen.wholeStage&quot;, false)&lt;/p&gt;

&lt;p&gt;... incorrect results are not returned because the overflow&#160;is caught as an exception:&lt;/p&gt;

&lt;p&gt;java.lang.IllegalArgumentException: requirement failed: Decimal precision 39 exceeds max precision 38&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13239824">SPARK-28067</key>
            <summary>Incorrect results in decimal aggregation with whole-stage code gen enabled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ksunitha">Sunitha Kambhampati</assignee>
                                    <reporter username="msirek">Mark Sirek</reporter>
                        <labels>
                            <label>correctness</label>
                    </labels>
                <created>Sun, 16 Jun 2019 19:38:21 +0000</created>
                <updated>Mon, 12 Dec 2022 18:10:57 +0000</updated>
                            <resolved>Tue, 2 Jun 2020 11:31:07 +0000</resolved>
                                    <version>2.0.2</version>
                    <version>2.1.3</version>
                    <version>2.2.3</version>
                    <version>2.3.4</version>
                    <version>2.4.4</version>
                    <version>3.0.0</version>
                                    <fixVersion>3.1.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="16870293" author="mgaido" created="Sat, 22 Jun 2019 15:07:30 +0000"  >&lt;p&gt;I cannot reproduce on master. It always returns null with whole stage codegen enabled.&lt;/p&gt;</comment>
                            <comment id="16870438" author="msirek" created="Sun, 23 Jun 2019 05:19:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgaido&quot; class=&quot;user-hover&quot; rel=&quot;mgaido&quot;&gt;mgaido&lt;/a&gt; Here is the physical plan I&apos;m getting.&#160; Maybe yours is different?&#160; I tried on master this time...&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
msirek@skylake16:~/IdeaProjects/spark$ git status
On branch master
Your branch is up to date with &lt;span class=&quot;code-quote&quot;&gt;&apos;origin/master&apos;&lt;/span&gt;.
nothing to commit, working tree clean
msirek@skylake16:~/IdeaProjects/spark$ git log -5 --pretty=format:&lt;span class=&quot;code-quote&quot;&gt;&quot;%h%x09%an%x09%ad%x09%s&quot;&lt;/span&gt;
870f972dcc Yuming Wang Sat Jun 22 09:15:07 2019 -0700 [SPARK-28104][SQL] Implement Spark&apos;s own GetColumnsOperation
5ad1053f3e Bryan Cutler Sat Jun 22 11:20:35 2019 +0900 [SPARK-28128][PYTHON][SQL] Pandas Grouped UDFs skip empty partitions
113f8c8d13 HyukjinKwon Fri Jun 21 10:47:54 2019 -0700 [SPARK-28132][PYTHON] Update document type conversion &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Pandas UDFs (pyarrow 0.13.0, pandas 0.24.2, Python 3.7)
9b9d81b821 HyukjinKwon Fri Jun 21 10:27:18 2019 -0700 [SPARK-28131][PYTHON] Update document type conversion between Python data and SQL types in normal UDFs (Python 3.7)
54da3bbfb2 Yesheng Ma Thu Jun 20 19:45:59 2019 -0700 [SPARK-28127][SQL] Micro optimization on TreeNode&apos;s mapChildren method

msirek@skylake16:~/IdeaProjects/spark$ ./bin/spark-shell
SLF4J: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/home/msirek/IdeaProjects/spark/assembly/target/scala-2.12/jars/slf4j-log4j12-1.7.16.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/opt/cloudera/parcels/CDH-5.16.1-1.cdh5.16.1.p0.3/jars/slf4j-log4j12-1.7.5.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http:&lt;span class=&quot;code-comment&quot;&gt;//www.slf4j.org/codes.html#multiple_bindings &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; an explanation.
&lt;/span&gt;SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]
Setting &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; log level to &lt;span class=&quot;code-quote&quot;&gt;&quot;WARN&quot;&lt;/span&gt;.
To adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).
19/06/22 22:13:39 WARN util.Utils: Service &lt;span class=&quot;code-quote&quot;&gt;&apos;SparkUI&apos;&lt;/span&gt; could not bind on port 4040. Attempting port 4041.
Spark context Web UI available at http:&lt;span class=&quot;code-comment&quot;&gt;//skylake16.home.colo:4041
&lt;/span&gt;Spark context available as &lt;span class=&quot;code-quote&quot;&gt;&apos;sc&apos;&lt;/span&gt; (master = local[*], app id = local-1561266819220).
Spark session available as &lt;span class=&quot;code-quote&quot;&gt;&apos;spark&apos;&lt;/span&gt;.
Welcome to
 ____ __
 / __/__ ___ _____/ /__
 _\ \/ _ \/ _ `/ __/ &apos;_/
 /___/ .__/\_,_/_/ /_/\_\ version 3.0.0-SNAPSHOT
 /_/
 
Using Scala version 2.12.8 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_201)
Type in expressions to have them evaluated.
Type :help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; more information.
scala&amp;gt; val df = Seq(
 | (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 1),
 | (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 1),
 | (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 | (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 | (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 | (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 | (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 | (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 | (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 | (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 | (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 | (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2)).toDF(&lt;span class=&quot;code-quote&quot;&gt;&quot;decNum&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;intNum&quot;&lt;/span&gt;)
df: org.apache.spark.sql.DataFrame = [decNum: decimal(38,18), intNum: &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;]
scala&amp;gt; val df2 = df.withColumnRenamed(&lt;span class=&quot;code-quote&quot;&gt;&quot;decNum&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;decNum2&quot;&lt;/span&gt;).join(df, &lt;span class=&quot;code-quote&quot;&gt;&quot;intNum&quot;&lt;/span&gt;).agg(sum(&lt;span class=&quot;code-quote&quot;&gt;&quot;decNum&quot;&lt;/span&gt;))
df2: org.apache.spark.sql.DataFrame = [sum(decNum): decimal(38,18)]
scala&amp;gt; df2.explain
== Physical Plan ==
*(2) HashAggregate(keys=[], functions=[sum(decNum#14)])
+- Exchange SinglePartition
 +- *(1) HashAggregate(keys=[], functions=[partial_sum(decNum#14)])
 +- *(1) Project [decNum#14]
 +- *(1) BroadcastHashJoin [intNum#8], [intNum#15], Inner, BuildLeft
 :- BroadcastExchange HashedRelationBroadcastMode(List(&lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(input[0, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;] as bigint)))
 : +- LocalTableScan [intNum#8]
 +- LocalTableScan [decNum#14, intNum#15]
&#160;
scala&amp;gt; df2.show(40,&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
+---------------------------------------+
|sum(decNum) |
+---------------------------------------+
|40000000000000000000.000000000000000000|
+---------------------------------------+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16870880" author="mgaido" created="Mon, 24 Jun 2019 07:21:41 +0000"  >&lt;p&gt;No, it is the same. Are you sure about your configs?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
macmarco:spark mark9$ git log -5 --oneline
5ad1053f3e (HEAD, apache/master) [SPARK-28128][PYTHON][SQL] Pandas Grouped UDFs skip empty partitions
113f8c8d13 [SPARK-28132][PYTHON] Update document type conversion &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Pandas UDFs (pyarrow 0.13.0, pandas 0.24.2, Python 3.7)
9b9d81b821 [SPARK-28131][PYTHON] Update document type conversion between Python data and SQL types in normal UDFs (Python 3.7)
54da3bbfb2 [SPARK-28127][SQL] Micro optimization on TreeNode&apos;s mapChildren method
47f54b1ec7 [SPARK-28118][CORE] Add `spark.eventLog.compression.codec` configuration
macmarco:spark mark9$ ./bin/spark-shell 
19/06/24 09:17:58 WARN NativeCodeLoader: Unable to load &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;-hadoop library &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; your platform... using builtin-java classes where applicable
Using Spark&apos;s &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; log4j profile: org/apache/spark/log4j-defaults.properties
Setting &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; log level to &lt;span class=&quot;code-quote&quot;&gt;&quot;WARN&quot;&lt;/span&gt;.
To adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).
Spark context Web UI available at http:&lt;span class=&quot;code-comment&quot;&gt;//.....:4040
&lt;/span&gt;Spark context available as &lt;span class=&quot;code-quote&quot;&gt;&apos;sc&apos;&lt;/span&gt; (master = local[*], app id = local-1561360686725).
Spark session available as &lt;span class=&quot;code-quote&quot;&gt;&apos;spark&apos;&lt;/span&gt;.
Welcome to
      ____              __
     / __/__  ___ _____/ /__
    _\ \/ _ \/ _ `/ __/  &apos;_/
   /___/ .__/\_,_/_/ /_/\_\   version 3.0.0-SNAPSHOT
      /_/
         
Using Scala version 2.12.8 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_152)
Type in expressions to have them evaluated.
Type :help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; more information.

scala&amp;gt; val df = Seq(
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 1),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 1),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2)).toDF(&lt;span class=&quot;code-quote&quot;&gt;&quot;decNum&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;intNum&quot;&lt;/span&gt;)
df: org.apache.spark.sql.DataFrame = [decNum: decimal(38,18), intNum: &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;]

scala&amp;gt; val df2 = df.withColumnRenamed(&lt;span class=&quot;code-quote&quot;&gt;&quot;decNum&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;decNum2&quot;&lt;/span&gt;).join(df, &lt;span class=&quot;code-quote&quot;&gt;&quot;intNum&quot;&lt;/span&gt;).agg(sum(&lt;span class=&quot;code-quote&quot;&gt;&quot;decNum&quot;&lt;/span&gt;))
df2: org.apache.spark.sql.DataFrame = [sum(decNum): decimal(38,18)]

scala&amp;gt; df2.explain
== Physical Plan ==
*(2) HashAggregate(keys=[], functions=[sum(decNum#14)])
+- Exchange SinglePartition
   +- *(1) HashAggregate(keys=[], functions=[partial_sum(decNum#14)])
      +- *(1) Project [decNum#14]
         +- *(1) BroadcastHashJoin [intNum#8], [intNum#15], Inner, BuildLeft
            :- BroadcastExchange HashedRelationBroadcastMode(List(&lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(input[0, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;] as bigint)))
            :  +- LocalTableScan [intNum#8]
            +- LocalTableScan [decNum#14, intNum#15]



scala&amp;gt; df2.show(40,&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
+-----------+                                                                   
|sum(decNum)|
+-----------+
|&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;       |
+-----------+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16879735" author="msirek" created="Sat, 6 Jul 2019 18:37:37 +0000"  >&lt;p&gt;I tried the test on 4 different systems, all immediately after downloading Spark, and changing no settings, so they should all be the defaults.&#160; None of the tests return null.&#160; I&apos;m not sure which config settings I should change.&#160; I wouldn&apos;t think it&apos;s expected behavior for Spark to return an incorrect answer with a certain config setting, unless&#160;there&apos;s a setting which&#160;controls the hiding of overflows.&lt;/p&gt;</comment>
                            <comment id="16880700" author="mgaido" created="Mon, 8 Jul 2019 20:53:43 +0000"  >&lt;p&gt;I cannot reproduce in 2.4.0 either:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

spark-2.4.0-bin-hadoop2.7 xxx$ ./bin/spark-shell
2019-07-08 22:52:11 WARN  NativeCodeLoader:62 - Unable to load &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;-hadoop library &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; your platform... using builtin-java classes where applicable
Setting &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; log level to &lt;span class=&quot;code-quote&quot;&gt;&quot;WARN&quot;&lt;/span&gt;.
To adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).
Spark context Web UI available at http:&lt;span class=&quot;code-comment&quot;&gt;//xxx:4040
&lt;/span&gt;Spark context available as &lt;span class=&quot;code-quote&quot;&gt;&apos;sc&apos;&lt;/span&gt; (master = local[*], app id = local-1562619141279).
Spark session available as &lt;span class=&quot;code-quote&quot;&gt;&apos;spark&apos;&lt;/span&gt;.
Welcome to
      ____              __
     / __/__  ___ _____/ /__
    _\ \/ _ \/ _ `/ __/  &apos;_/
   /___/ .__/\_,_/_/ /_/\_\   version 2.4.0
      /_/
         
Using Scala version 2.11.12 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_152)
Type in expressions to have them evaluated.
Type :help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; more information.

scala&amp;gt; val df = Seq(
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 1),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 1),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
     |  (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2)).toDF(&lt;span class=&quot;code-quote&quot;&gt;&quot;decNum&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;intNum&quot;&lt;/span&gt;)
df: org.apache.spark.sql.DataFrame = [decNum: decimal(38,18), intNum: &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;]

scala&amp;gt; val df2 = df.withColumnRenamed(&lt;span class=&quot;code-quote&quot;&gt;&quot;decNum&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;decNum2&quot;&lt;/span&gt;).join(df, &lt;span class=&quot;code-quote&quot;&gt;&quot;intNum&quot;&lt;/span&gt;).agg(sum(&lt;span class=&quot;code-quote&quot;&gt;&quot;decNum&quot;&lt;/span&gt;))
df2: org.apache.spark.sql.DataFrame = [sum(decNum): decimal(38,18)]

scala&amp;gt; df2.show(40,&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
+-----------+
|sum(decNum)|
+-----------+
|&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;       |
+-----------+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17021471" author="dongjoon" created="Wed, 22 Jan 2020 20:23:21 +0000"  >&lt;p&gt;I reproduced this issue at 2.0.2, 2.1.3, 2.2.3, 2.3.4, 2.4.4, 3.0.0-preview2. As the description says, it give different results based on `spark.sql.codegen.wholeStage` value.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
scala&amp;gt; :paste
&lt;span class=&quot;code-comment&quot;&gt;// Entering paste mode (ctrl-D to finish)
&lt;/span&gt;
val df = Seq(
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 1),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 1),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2),
 (BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000000&quot;&lt;/span&gt;), 2)).toDF(&lt;span class=&quot;code-quote&quot;&gt;&quot;decNum&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;intNum&quot;&lt;/span&gt;)
val df2 = df.withColumnRenamed(&lt;span class=&quot;code-quote&quot;&gt;&quot;decNum&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;decNum2&quot;&lt;/span&gt;).join(df, &lt;span class=&quot;code-quote&quot;&gt;&quot;intNum&quot;&lt;/span&gt;).agg(sum(&lt;span class=&quot;code-quote&quot;&gt;&quot;decNum&quot;&lt;/span&gt;))
df2.show(40,&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)

&lt;span class=&quot;code-comment&quot;&gt;// Exiting paste mode, now interpreting.
&lt;/span&gt;
+---------------------------------------+
|sum(decNum)                            |
+---------------------------------------+
|40000000000000000000.000000000000000000|
+---------------------------------------+

df: org.apache.spark.sql.DataFrame = [decNum: decimal(38,18), intNum: &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;]
df2: org.apache.spark.sql.DataFrame = [sum(decNum): decimal(38,18)]

scala&amp;gt; spark.conf.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;spark.sql.codegen.wholeStage&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)

scala&amp;gt; df2.show(40,&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
20/01/22 20:18:10 ERROR Executor: Exception in task 1.0 in stage 4.0 (TID 20)
java.lang.IllegalArgumentException: requirement failed: Decimal precision 39 exceeds max precision 38
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17025117" author="javier_ivanov" created="Tue, 28 Jan 2020 13:50:25 +0000"  >&lt;p&gt;The expected result here should be an&#160;ArithmeticException for all cases of precision &amp;gt; DecimalType.MAX_PRECISION?&lt;/p&gt;</comment>
                            <comment id="17033344" author="gurwls223" created="Mon, 10 Feb 2020 02:48:19 +0000"  >&lt;p&gt;I am lowering the priority given that &lt;tt&gt;spark.sql.codegen.wholeStage&lt;/tt&gt; defaults to &lt;tt&gt;true&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17035286" author="javier_ivanov" created="Wed, 12 Feb 2020 11:16:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dongjoon&quot; class=&quot;user-hover&quot; rel=&quot;dongjoon&quot;&gt;dongjoon&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msirek&quot; class=&quot;user-hover&quot; rel=&quot;msirek&quot;&gt;msirek&lt;/a&gt; &#160;what should be the expected result here in both cases a null or ArithmeticException instead?&lt;/p&gt;</comment>
                            <comment id="17039403" author="ksunitha" created="Tue, 18 Feb 2020 19:42:55 +0000"  >&lt;p&gt;I looked into this issue and here are some of my notes.&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Issue:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Wrong results are returned for aggregate sum with decimals with whole stage codegen enabled&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Repro:&lt;/b&gt;&#160;&lt;/p&gt;

&lt;p&gt;Whole Stage codegen enabled -&amp;gt; Wrong results&lt;/p&gt;

&lt;p&gt;Whole Stage codegen disabled -&amp;gt; Returns exception Decimal precision 39 exceeds max precision 38&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Issues:&lt;/b&gt;&#160;&lt;/p&gt;

&lt;p&gt;1: Wrong results are returned which is bad&#160;&lt;/p&gt;

&lt;p&gt;2: Inconsistency between whole stage enabled and disabled.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Cause:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Sum does not take care of possibility of decimal overflow for the intermediate steps.&#160; ie the updateExpressions and mergeExpressions. &#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Some ways to fix this:&lt;/b&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;Approach 1:&lt;/ins&gt;&#160; Do not return wrong results for this scenario, throw exception like whole stage enabled.&#160; DB&#8217;s do similar, so there is precedence.&#160;&#160;&lt;/p&gt;

&lt;p&gt;Pros:&#160;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;No wrong results&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Consistent behavior between wholestage enabled and disabled&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;DB&#8217;s have similar existing behavior, there is precedence&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;Approach 2:&lt;/ins&gt;&#160;&lt;/p&gt;

&lt;p&gt;By default: Return null on overflow in the sum operation&lt;/p&gt;

&lt;p&gt;But if you set spark.sql.ansi.enabled to true, and then it will throw exception.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Pros:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Maybe ok for users who can tolerate sum to be null on overflow.&#160;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Consistent with the spark.sql.ansi.enabled behavior&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Cons:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;This will still keep inconsistency between codegen enabled and disabled.&#160;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;For those interested, there are some JIRA&#8217;s that were fixed for v3.0 which do the following:&#160;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-23179&quot; title=&quot;Support option to throw exception if overflow occurs during Decimal arithmetic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-23179&quot;&gt;&lt;del&gt;SPARK-23179&lt;/del&gt;&lt;/a&gt;, Throw null on overflow for decimal operations. &#160; This does not kick in for sum for the use case above.&#160;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-28224&quot; title=&quot;Check overflow in decimal Sum aggregate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-28224&quot;&gt;&lt;del&gt;SPARK-28224&lt;/del&gt;&lt;/a&gt;, that took care of decimal overflow for sum only partially for 2 values. &#160; If you add another row into the dataset, it will return wrong results&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;------&lt;/p&gt;

&lt;p&gt;That said, I think both Approach 1 and&#160; Approach 2 will resolve the wrong results which is bad. &#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Approach 1 is straightforward. &#160; But in the pr&#8217;s related to overflow, I think the preference is to have it under a spark.sql.ansi.enabled flag which defaults to false and return null on overflow.&#160;&lt;/p&gt;

&lt;p&gt;I think Approach 2 is not as straightforward.&#160; I have an implementation that will fix this.&#160;&lt;/p&gt;

&lt;p&gt;I can open 2 prs that implement each of the approach, and would like to get comments.&#160; I have run the sql, catalyst and hive tests and they all pass.&#160; &#160;&lt;/p&gt;

&lt;p&gt;Please let me&#160;know your comments. &#160; Thanks.&#160;&lt;/p&gt;

&lt;p&gt;&#160;cc&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dongjoon&quot; class=&quot;user-hover&quot; rel=&quot;dongjoon&quot;&gt;dongjoon&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=LI%2CXiao&quot; class=&quot;user-hover&quot; rel=&quot;LI,Xiao&quot;&gt;LI,Xiao&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cloud_fan&quot; class=&quot;user-hover&quot; rel=&quot;cloud_fan&quot;&gt;cloud_fan&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hyukjin.kwon&quot; class=&quot;user-hover&quot; rel=&quot;hyukjin.kwon&quot;&gt;hyukjin.kwon&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hvanhovell&quot; class=&quot;user-hover&quot; rel=&quot;hvanhovell&quot;&gt;hvanhovell&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=javier_ivanov&quot; class=&quot;user-hover&quot; rel=&quot;javier_ivanov&quot;&gt;javier_ivanov&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msirek&quot; class=&quot;user-hover&quot; rel=&quot;msirek&quot;&gt;msirek&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17039516" author="ksunitha" created="Tue, 18 Feb 2020 22:26:57 +0000"  >&lt;p&gt;I have submitted the two pr&apos;s for the two approaches I mention above in my comment.&#160;&lt;/p&gt;

&lt;p&gt;Approach 1: &#160;Throw exception instead of returning wrong results: &lt;a href=&quot;https://github.com/apache/spark/pull/27629&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/27629&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Approach 2:&lt;/p&gt;

&lt;p&gt;Return null on decimal overflow for aggregate sum when spark.sql.ansi.enabled=false, &#160;&lt;/p&gt;

&lt;p&gt;Throw exception on decimal overflow for aggregate sum when spark.sql.ansi.enabled =true.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/spark/pull/27627&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/27627&lt;/a&gt;&#160;(WIP)&lt;/p&gt;</comment>
                            <comment id="17123661" author="cloud_fan" created="Tue, 2 Jun 2020 11:31:08 +0000"  >&lt;p&gt;Issue resolved by pull request 27627&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/27627&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/27627&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17152867" author="apachespark" created="Tue, 7 Jul 2020 16:28:39 +0000"  >&lt;p&gt;User &apos;cloud-fan&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/29026&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/29026&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17209923" author="anuragmantri" created="Wed, 7 Oct 2020 23:33:36 +0000"  >&lt;p&gt;I just checked the issue exists in branch-2.4. Since this is a `correctness` issue, should we backport it to branch-2.4?&#160;&lt;br/&gt;
cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cloud_fan&quot; class=&quot;user-hover&quot; rel=&quot;cloud_fan&quot;&gt;cloud_fan&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dongjoon&quot; class=&quot;user-hover&quot; rel=&quot;dongjoon&quot;&gt;dongjoon&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17209936" author="dongjoon" created="Thu, 8 Oct 2020 00:00:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anuragmantri&quot; class=&quot;user-hover&quot; rel=&quot;anuragmantri&quot;&gt;anuragmantri&lt;/a&gt; For this one, this is not backported to 3.0.0, too.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 5 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z03ssw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>