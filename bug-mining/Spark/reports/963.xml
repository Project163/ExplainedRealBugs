<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:19:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-4185] JSON schema inference failed when dealing with type conflicts in arrays</title>
                <link>https://issues.apache.org/jira/browse/SPARK-4185</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;val sqlContext = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; org.apache.spark.sql.SQLContext(sparkContext)
val diverging = sparkContext.parallelize(List(&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;&quot;{&quot;&lt;/span&gt;branches&lt;span class=&quot;code-quote&quot;&gt;&quot;: [&quot;&lt;/span&gt;foo&lt;span class=&quot;code-quote&quot;&gt;&quot;]}&quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;, &quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;{&quot;&lt;/span&gt;branches&lt;span class=&quot;code-quote&quot;&gt;&quot;: [{&quot;&lt;/span&gt;foo&lt;span class=&quot;code-quote&quot;&gt;&quot;:42}]}&quot;&lt;/span&gt;&quot;&quot;))
sqlContext.jsonRDD(diverging)  &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; a MatchError&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The case is from &lt;a href=&quot;http://chapeau.freevariable.com/2014/10/fedmsg-and-spark.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://chapeau.freevariable.com/2014/10/fedmsg-and-spark.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12752216">SPARK-4185</key>
            <summary>JSON schema inference failed when dealing with type conflicts in arrays</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yhuai">Yin Huai</assignee>
                                    <reporter username="yhuai">Yin Huai</reporter>
                        <labels>
                    </labels>
                <created>Sat, 1 Nov 2014 18:40:58 +0000</created>
                <updated>Sun, 2 Nov 2014 23:47:21 +0000</updated>
                            <resolved>Sun, 2 Nov 2014 23:47:21 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14193491" author="willbenton" created="Sat, 1 Nov 2014 21:26:33 +0000"  >&lt;p&gt;I&apos;m actually not sure this is a bug!  My main concern in this case is that inferring any typing for this collection of objects makes it very difficult to write meaningful queries.  In the fedmsg case, the problem was that the source data overloaded the meaning of a field name, so I was able to preprocess the fields to do the renaming.  I was thinking that maybe a good solution might be to have Spark SQL automatically rename fields with conflicting types in different records (e.g. to &#8220;branches_1&#8221; and &#8220;branches_2&#8221; in this case).&lt;/p&gt;</comment>
                            <comment id="14193617" author="apachespark" created="Sun, 2 Nov 2014 00:28:07 +0000"  >&lt;p&gt;User &apos;yhuai&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/3056&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/3056&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14193620" author="yhuai" created="Sun, 2 Nov 2014 00:32:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=willbenton&quot; class=&quot;user-hover&quot; rel=&quot;willbenton&quot;&gt;willbenton&lt;/a&gt; yeah, agreed. We need to have a better story on handling this issue. Let me think about it more. &lt;/p&gt;

&lt;p&gt;How about we resolve this match error first and then have another JIRA for the improvement? So, this match error will not prevent users from querying other fields.&lt;/p&gt;</comment>
                            <comment id="14194098" author="marmbrus" created="Sun, 2 Nov 2014 23:47:21 +0000"  >&lt;p&gt;Issue resolved by pull request 3056&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/3056&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/3056&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21uxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>