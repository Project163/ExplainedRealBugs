<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:37:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-12982] SQLContext: temporary table registration does not accept valid identifier</title>
                <link>https://issues.apache.org/jira/browse/SPARK-12982</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;We have encountered very strange behavior of SparkSQL temporary table registration.&lt;br/&gt;
What identifiers for temporary table should be valid?&lt;br/&gt;
Alphanumerical + &apos;_&apos; with at least one non-digit?&lt;/p&gt;

&lt;p&gt;Valid identifiers:&lt;br/&gt;
df&lt;br/&gt;
674123a&lt;br/&gt;
674123_&lt;br/&gt;
a0e97c59_4445_479d_a7ef_d770e3874123&lt;br/&gt;
1ae97c59_4445_479d_a7ef_d770e3874123&lt;br/&gt;
Invalid identifier:&lt;br/&gt;
10e97c59_4445_479d_a7ef_d770e3874123&lt;/p&gt;

&lt;p&gt;Stack trace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;java.lang.RuntimeException: [1.1] failure: identifier expected

10e97c59_4445_479d_a7ef_d770e3874123
^
	at scala.sys.package$.error(package.scala:27)
	at org.apache.spark.sql.catalyst.SqlParser$.parseTableIdentifier(SqlParser.scala:58)
	at org.apache.spark.sql.SQLContext.table(SQLContext.scala:827)
	at org.apache.spark.sql.SQLContext.dropTempTable(SQLContext.scala:763)
	at SparkSqlContextTempTableIdentifier$.identifierCheck(SparkSqlContextTempTableIdentifier.scala:9)
	at SparkSqlContextTempTableIdentifier$.main(SparkSqlContextTempTableIdentifier.scala:42)
	at SparkSqlContextTempTableIdentifier.main(SparkSqlContextTempTableIdentifier.scala)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at sbt.Run.invokeMain(Run.scala:67)
	at sbt.Run.run0(Run.scala:61)
	at sbt.Run.sbt$Run$$execute$1(Run.scala:51)
	at sbt.Run$$anonfun$run$1.apply$mcV$sp(Run.scala:55)
	at sbt.Run$$anonfun$run$1.apply(Run.scala:55)
	at sbt.Run$$anonfun$run$1.apply(Run.scala:55)
	at sbt.Logger$$anon$4.apply(Logger.scala:85)
	at sbt.TrapExit$App.run(TrapExit.scala:248)
	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Code to reproduce this bug:&lt;br/&gt;
&lt;a href=&quot;https://github.com/grzegorz-chilkiewicz/SparkSqlContextTempTableIdentifier&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/grzegorz-chilkiewicz/SparkSqlContextTempTableIdentifier&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12933857">SPARK-12982</key>
            <summary>SQLContext: temporary table registration does not accept valid identifier</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10003">Resolved</resolution>
                                        <assignee username="jayadevan.m">Jayadevan M</assignee>
                                    <reporter username="grzegorz.chilkiewicz">Grzegorz Chilkiewicz</reporter>
                        <labels>
                            <label>sql</label>
                    </labels>
                <created>Mon, 25 Jan 2016 16:24:41 +0000</created>
                <updated>Thu, 11 Feb 2016 20:25:34 +0000</updated>
                            <resolved>Thu, 11 Feb 2016 20:25:34 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="15123023" author="jayadevan.m" created="Fri, 29 Jan 2016 06:04:30 +0000"  >&lt;p&gt;I tried replicate your scenario in spark 1.6.0. I can replicate this issue. I would like to work on this.&lt;/p&gt;</comment>
                            <comment id="15123248" author="thomastechs" created="Fri, 29 Jan 2016 09:30:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rxin&quot; class=&quot;user-hover&quot; rel=&quot;rxin&quot;&gt;rxin&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marmbrus&quot; class=&quot;user-hover&quot; rel=&quot;marmbrus&quot;&gt;marmbrus&lt;/a&gt;&lt;br/&gt;
Shall we add the validation at the temp table creation itself? what is your thought on this?&lt;/p&gt;</comment>
                            <comment id="15123266" author="grzegorz.chilkiewicz" created="Fri, 29 Jan 2016 09:44:39 +0000"  >&lt;p&gt;I haven&apos;t started work on this, You are &apos;free to go&apos; with it.&lt;br/&gt;
I had written some code to reproduce it (&lt;a href=&quot;https://github.com/grzegorz-chilkiewicz/SparkSqlContextTempTableIdentifier&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/grzegorz-chilkiewicz/SparkSqlContextTempTableIdentifier&lt;/a&gt;)&lt;br/&gt;
if You have problem with running it - let me know...&lt;/p&gt;</comment>
                            <comment id="15123287" author="rxin" created="Fri, 29 Jan 2016 09:57:13 +0000"  >&lt;p&gt;Is this still a problem on master?&lt;/p&gt;</comment>
                            <comment id="15123388" author="jayadevan.m" created="Fri, 29 Jan 2016 11:59:37 +0000"  >&lt;p&gt;yes, was able to replicate.&lt;/p&gt;</comment>
                            <comment id="15123403" author="thomastechs" created="Fri, 29 Jan 2016 12:07:34 +0000"  >&lt;p&gt; Need to make change in the SQLConext.scala, to incorporate the check, I think.&lt;/p&gt;</comment>
                            <comment id="15123406" author="apachespark" created="Fri, 29 Jan 2016 12:09:04 +0000"  >&lt;p&gt;User &apos;jayadevanmurali&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/10983&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/10983&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15130471" author="thomastechs" created="Wed, 3 Feb 2016 14:31:51 +0000"  >&lt;p&gt;Adding changes in the SQLContext.scala and testing in progress with DataFrameSuite.scala with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jayadevan.maymala%40ibsplc.com&quot; class=&quot;user-hover&quot; rel=&quot;jayadevan.maymala@ibsplc.com&quot;&gt;jayadevan.maymala@ibsplc.com&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15130478" author="thomastechs" created="Wed, 3 Feb 2016 14:34:08 +0000"  >&lt;p&gt;One main difference for this with the description of this bug is that the latest spark 2.0 code throws Analysis Exception with the NoViableAlt..message for the same scenario. But we hope it is fine, as the fix would hold good for spark 1.6 and spark2.0&lt;/p&gt;</comment>
                            <comment id="15130489" author="apachespark" created="Wed, 3 Feb 2016 14:39:08 +0000"  >&lt;p&gt;User &apos;jayadevanmurali&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/11051&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11051&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rxkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>