<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:15:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-2443] Reading from Partitioned Tables is Slow</title>
                <link>https://issues.apache.org/jira/browse/SPARK-2443</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Here are some numbers, all queries return ~20million:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;SELECT COUNT(*) FROM &amp;lt;non partitioned table&amp;gt;
5.496467726 s

SELECT COUNT(*) FROM &amp;lt;partitioned table stored in parquet&amp;gt;
50.266666947 s

SELECT COUNT(*) FROM &amp;lt;same table as previous but loaded with parquetFile instead of through hive&amp;gt;
2s
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12726720">SPARK-2443</key>
            <summary>Reading from Partitioned Tables is Slow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ConcreteVitamin">Zongheng Yang</assignee>
                                    <reporter username="marmbrus">Michael Armbrust</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Jul 2014 00:51:03 +0000</created>
                <updated>Wed, 16 Jul 2014 14:23:50 +0000</updated>
                            <resolved>Mon, 14 Jul 2014 20:23:57 +0000</resolved>
                                                    <fixVersion>1.0.2</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="14059722" author="concretevitamin" created="Sat, 12 Jul 2014 09:14:07 +0000"  >&lt;p&gt;I am able to reproduce this behavior locally: 2 million rows of key-val pairs stored as a text file (hence this issue is probably not parquet-specific), non-partitioned vs. partitioned into 1 part, and I have seen a more than 10x difference.&lt;/p&gt;

&lt;p&gt;In the non-partitioned case, this is the `inputRdd` in HiveTableScan:&lt;/p&gt;

&lt;p&gt;MapPartitionsRDD&lt;span class=&quot;error&quot;&gt;&amp;#91;15&amp;#93;&lt;/span&gt; at mapPartitions at TableReader.scala:102 (2 partitions)&lt;br/&gt;
  MappedRDD&lt;span class=&quot;error&quot;&gt;&amp;#91;14&amp;#93;&lt;/span&gt; at map at TableReader.scala:222 (2 partitions)&lt;br/&gt;
    HadoopRDD&lt;span class=&quot;error&quot;&gt;&amp;#91;13&amp;#93;&lt;/span&gt; at HadoopRDD at TableReader.scala:212 (2 partitions)&lt;/p&gt;

&lt;p&gt;In the partitioned case, there&apos;s an extra UnionRDD:&lt;/p&gt;

&lt;p&gt;UnionRDD&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; at UnionRDD at TableReader.scala:183 (2 partitions)&lt;br/&gt;
  MapPartitionsRDD&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; at mapPartitions at TableReader.scala:164 (2 partitions)&lt;br/&gt;
    MappedRDD&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; at map at TableReader.scala:222 (2 partitions)&lt;br/&gt;
      HadoopRDD&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; at HadoopRDD at TableReader.scala:212 (2 partitions)&lt;/p&gt;

&lt;p&gt;The times to make these two RDDs are about the same, and hence the difference in performance lies in the henceforth actual computations of them. Will investigate further.&lt;/p&gt;</comment>
                            <comment id="14059922" author="rxin" created="Sat, 12 Jul 2014 21:14:51 +0000"  >&lt;p&gt;Take a look at this pull request: &lt;a href=&quot;https://github.com/amplab/shark/pull/329&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/amplab/shark/pull/329&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14059960" author="concretevitamin" created="Sat, 12 Jul 2014 23:53:58 +0000"  >&lt;p&gt;Pull request: &lt;a href=&quot;https://github.com/apache/spark/pull/1390&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1390&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14060790" author="jerrylam" created="Mon, 14 Jul 2014 16:01:21 +0000"  >&lt;p&gt;I wonder if this fix can be easily merged into the current spark release (1.0.1)? We desperately need this fix to perform the benchmark. Thank you!&lt;/p&gt;</comment>
                            <comment id="14060894" author="marmbrus" created="Mon, 14 Jul 2014 17:27:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jerrylam&quot; class=&quot;user-hover&quot; rel=&quot;jerrylam&quot;&gt;jerrylam&lt;/a&gt; since Spark SQL is an Alpha component we have been pretty aggressive about back porting to the 1.0 branch.  This patch will likely be included in the 1.0.2 release if/when we make one.&lt;/p&gt;</comment>
                            <comment id="14061001" author="concretevitamin" created="Mon, 14 Jul 2014 18:37:15 +0000"  >&lt;p&gt;I opened a new PR: &lt;a href=&quot;https://github.com/apache/spark/pull/1408&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1408&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14063455" author="chutium" created="Wed, 16 Jul 2014 13:17:15 +0000"  >&lt;p&gt;Hi, how can you access parquet table using HiveContext / hql in spark? i tried to add parquet-hive jar or parquet-hive-bundle jar in driver-class-path and spark.executor.extraClassPath, but it doesn&apos;t work. CDH5.0.2, hive 0.12.0-cdh5&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="14063530" author="marmbrus" created="Wed, 16 Jul 2014 14:23:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chutium&quot; class=&quot;user-hover&quot; rel=&quot;chutium&quot;&gt;chutium&lt;/a&gt;, I would recommend using the native parquet interface if possible (explained in the programming guide: &lt;a href=&quot;http://spark.apache.org/docs/latest/sql-programming-guide.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://spark.apache.org/docs/latest/sql-programming-guide.html&lt;/a&gt;).  That said, others have reported success using the hive serde for parquet as well.&lt;/p&gt;

&lt;p&gt;Please ask future questions on the user mailing list and not JIRA: &lt;a href=&quot;https://spark.apache.org/community.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://spark.apache.org/community.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>404827</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xo67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>404865</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326686">1.1.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>