<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:43:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-49615] Feature transformers are case sensitive when unintented</title>
                <link>https://issues.apache.org/jira/browse/SPARK-49615</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Hi team,&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://spark.apache.org/docs/latest/ml-features&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://spark.apache.org/docs/latest/ml-features&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The feature transformers are case sensitive even though the configuration&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
spark.conf.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;spark.sql.caseSensitive&quot;&lt;/span&gt;)&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;is set to false. The user of all these transformers are forced to abide by case of the column in the dataframe&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 val data = List(Row(&lt;span class=&quot;code-quote&quot;&gt;&quot;the movie was great&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;positive&quot;&lt;/span&gt;, 10, &lt;span class=&quot;code-quote&quot;&gt;&quot;greatest of all time&quot;&lt;/span&gt;),
&#160; &#160; Row(&lt;span class=&quot;code-quote&quot;&gt;&quot;the movie was average&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;negative&quot;&lt;/span&gt;, 11, &lt;span class=&quot;code-quote&quot;&gt;&quot;just average things, average storyline&quot;&lt;/span&gt;),
&#160; &#160; Row(&lt;span class=&quot;code-quote&quot;&gt;&quot;movie was fun&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;positive&quot;&lt;/span&gt;, 2, &lt;span class=&quot;code-quote&quot;&gt;&quot;superb screen play&quot;&lt;/span&gt;))
&#160; val schema = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StructType()
&#160; &#160; .add(&lt;span class=&quot;code-quote&quot;&gt;&quot;comments&quot;&lt;/span&gt;, StringType, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
&#160; &#160; .add(&lt;span class=&quot;code-quote&quot;&gt;&quot;reviews&quot;&lt;/span&gt;, StringType, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
&#160; &#160; .add(&lt;span class=&quot;code-quote&quot;&gt;&quot;counts&quot;&lt;/span&gt;, IntegerType, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
&#160; &#160; .add(&lt;span class=&quot;code-quote&quot;&gt;&quot;Additional_COMMENTS&quot;&lt;/span&gt;, StringType, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
val df = spark.createDataFrame(data.asJava, schema)
&#160; val si = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringIndexer().setInputCol(&lt;span class=&quot;code-quote&quot;&gt;&quot;additional_comments&quot;&lt;/span&gt;).setOutputCol(&lt;span class=&quot;code-quote&quot;&gt;&quot;si_additional_comments&quot;&lt;/span&gt;)
&#160; si.fit(df).transform(df).show()&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above code fails with&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.spark.SparkException: Input column additional_comments does not exist.
&#160; &#160; at org.apache.spark.ml.feature.StringIndexerBase.$anonfun$validateAndTransformSchema$2(StringIndexer.scala:128)
&#160; &#160; at scala.collection.TraversableLike.$anonfun$flatMap$1(TraversableLike.scala:245)
&#160; &#160; at scala.collection.IndexedSeqOptimized.foreach(IndexedSeqOptimized.scala:36)
&#160; &#160; at scala.collection.IndexedSeqOptimized.foreach$(IndexedSeqOptimized.scala:33)
&#160; &#160; at scala.collection.mutable.ArrayOps$ofRef.foreach(ArrayOps.scala:198)
&#160; &#160; at scala.collection.TraversableLike.flatMap(TraversableLike.scala:245)
&#160; &#160; at scala.collection.TraversableLike.flatMap$(TraversableLike.scala:242)
&#160; &#160; at scala.collection.mutable.ArrayOps$ofRef.flatMap(ArrayOps.scala:198)
&#160; &#160; at org.apache.spark.ml.feature.StringIndexerBase.validateAndTransformSchema(StringIndexer.scala:123)
&#160; &#160; at org.apache.spark.ml.feature.StringIndexerBase.validateAndTransformSchema$(StringIndexer.scala:115)&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Which means that the column &quot;additional_comments&quot; needs to be provided in the same case as in the dataframe.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I think when the caseSensitive &#160;setting is set to false we should be able to use the naming in any case.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;


&lt;p&gt;Can someone please help to solve this bug for all transformers.?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13591935">SPARK-49615</key>
            <summary>Feature transformers are case sensitive when unintented</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="weichenxu123">Weichen Xu</assignee>
                                    <reporter username="chhavibansal">Chhavi Bansal</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 12 Sep 2024 12:30:42 +0000</created>
                <updated>Mon, 4 Nov 2024 21:41:16 +0000</updated>
                            <resolved>Mon, 4 Nov 2024 21:41:16 +0000</resolved>
                                    <version>3.4.3</version>
                                    <fixVersion>4.0.0</fixVersion>
                                    <component>ML</component>
                    <component>MLlib</component>
                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17888643" author="weichenxu123" created="Fri, 11 Oct 2024 13:02:18 +0000"  >&lt;p&gt;Issue resolved by pull request 48398&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/48398&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/48398&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17889001" author="JIRAUSER304338" created="Sun, 13 Oct 2024 15:19:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=weichenxu123&quot; class=&quot;user-hover&quot; rel=&quot;weichenxu123&quot;&gt;weichenxu123&lt;/a&gt; thank you for addressing the concern. i wanted to test these changes to be used for usecase, what version of scala should I use. my project is on 2.12. I tested the code, it fails for me&#160;&lt;/p&gt;

&lt;p&gt;the pom.xml looks like the below&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;scala.major-minor.version&amp;gt;2.12&amp;lt;/scala.major-minor.version&amp;gt;
&amp;lt;spark.version&amp;gt;3.3.2&amp;lt;/spark.version&amp;gt;
&amp;lt;hadoop.datalake.store.version&amp;gt;2.3.9&amp;lt;/hadoop.datalake.store.version&amp;gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17890345" author="weichenxu123" created="Thu, 17 Oct 2024 07:12:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chhavibansal&quot; class=&quot;user-hover&quot; rel=&quot;chhavibansal&quot;&gt;chhavibansal&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;You need to test against spark nightly build (&lt;a href=&quot;https://spark.apache.org/developer-tools.html)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://spark.apache.org/developer-tools.html)&lt;/a&gt; , or build spark master branch by yourself, or wait for next spark release.&lt;/p&gt;</comment>
                            <comment id="17895435" author="dongjoon" created="Mon, 4 Nov 2024 21:41:16 +0000"  >&lt;p&gt;Issue resolved by pull request 48747&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/48747&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/48747&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1re14:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>