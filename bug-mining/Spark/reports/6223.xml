<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:03:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-26501] Unexpected overriden of exitFn in SparkSubmitSuite</title>
                <link>https://issues.apache.org/jira/browse/SPARK-26501</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;When I run SparkSubmitSuite of spark2.3.2 in intellij IDE, I found that some tests cannot pass when I run them one by one, but they passed when the whole SparkSubmitSuite was run.&lt;/p&gt;

&lt;p&gt;Failed tests when ran seperately:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
test(&lt;span class=&quot;code-quote&quot;&gt;&quot;SPARK_CONF_DIR overrides spark-defaults.conf&quot;&lt;/span&gt;) {
  forConfDir(Map(&lt;span class=&quot;code-quote&quot;&gt;&quot;spark.executor.memory&quot;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;2.3g&quot;&lt;/span&gt;)) { path =&amp;gt;
    val unusedJar = TestUtils.createJarWithClasses(Seq.empty)
    val args = Seq(
      &lt;span class=&quot;code-quote&quot;&gt;&quot;--class&quot;&lt;/span&gt;, SimpleApplicationTest.getClass.getName.stripSuffix(&lt;span class=&quot;code-quote&quot;&gt;&quot;$&quot;&lt;/span&gt;),
      &lt;span class=&quot;code-quote&quot;&gt;&quot;--name&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;testApp&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;--master&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;local&quot;&lt;/span&gt;,
      unusedJar.toString)
    val appArgs = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SparkSubmitArguments(args, Map(&lt;span class=&quot;code-quote&quot;&gt;&quot;SPARK_CONF_DIR&quot;&lt;/span&gt; -&amp;gt; path))
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt;(appArgs.defaultPropertiesFile != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt;(appArgs.defaultPropertiesFile.startsWith(path))
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt;(appArgs.propertiesFile == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
    appArgs.executorMemory should be (&lt;span class=&quot;code-quote&quot;&gt;&quot;2.3g&quot;&lt;/span&gt;)
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Failure reason:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Error: Executor Memory cores must be a positive number
Run with --help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; usage help or --verbose &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; debug output
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;After carefully checked the code, I found the exitFn of SparkSubmit is overrided by front tests in testPrematrueExit call.&lt;/p&gt;

&lt;p&gt;Although the above test was fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-22941&quot; title=&quot;Allow SparkSubmit to throw exceptions instead of exiting / printing errors.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-22941&quot;&gt;&lt;del&gt;SPARK-22941&lt;/del&gt;&lt;/a&gt;, but the overriden of exitFn might cause other problems in the future.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13206907">SPARK-26501</key>
            <summary>Unexpected overriden of exitFn in SparkSubmitSuite</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="liupengcheng">liupengcheng</assignee>
                                    <reporter username="liupengcheng">liupengcheng</reporter>
                        <labels>
                    </labels>
                <created>Sat, 29 Dec 2018 07:42:37 +0000</created>
                <updated>Thu, 3 Jan 2019 16:28:23 +0000</updated>
                            <resolved>Thu, 3 Jan 2019 16:28:23 +0000</resolved>
                                    <version>2.3.2</version>
                    <version>2.4.0</version>
                                    <fixVersion>2.4.1</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>Deploy</component>
                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16730591" author="apachespark" created="Sat, 29 Dec 2018 07:55:39 +0000"  >&lt;p&gt;User &apos;liupc&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/23404&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/23404&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16733193" author="srowen" created="Thu, 3 Jan 2019 16:28:23 +0000"  >&lt;p&gt;Resolved by &lt;a href=&quot;https://github.com/apache/spark/pull/23404&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/23404&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|u00dxs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>