<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:57:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-20706] Spark-shell not overriding method/variable definition</title>
                <link>https://issues.apache.org/jira/browse/SPARK-20706</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>


&lt;p&gt;!screenshot-1.png!In the following example, the definition of myMethod is not correctly updated:&lt;/p&gt;

&lt;p&gt;------------------------------&lt;br/&gt;
def myMethod()  = &quot;first definition&quot;&lt;/p&gt;

&lt;p&gt;val tmp = myMethod(); val out = tmp&lt;/p&gt;

&lt;p&gt;println(out) // prints &quot;first definition&quot;&lt;/p&gt;

&lt;p&gt;def myMethod()  = &quot;second definition&quot; // override above myMethod&lt;/p&gt;

&lt;p&gt;val tmp = myMethod(); val out = tmp &lt;/p&gt;

&lt;p&gt;println(out) // should be &quot;second definition&quot; but is &quot;first definition&quot;&lt;br/&gt;
------------------------------&lt;/p&gt;


&lt;p&gt;I&apos;m using semicolon to force two statements to be compiled at the same time. It&apos;s also possible to reproduce the behavior using :paste&lt;/p&gt;

&lt;p&gt;So if I-redefine myMethod, the implementation seems not to be updated in this case. I figured out that the second-last statement (val out = tmp) causes this behavior, if this is moved in a separate block, the code works just fine.&lt;/p&gt;

&lt;p&gt;EDIT:&lt;/p&gt;

&lt;p&gt;The same behavior can be seen when declaring variables :&lt;/p&gt;

&lt;p&gt;------------------------------&lt;br/&gt;
val a = 1&lt;/p&gt;

&lt;p&gt;val b = a; val c = b;&lt;/p&gt;

&lt;p&gt;println(b) // prints &quot;1&quot;&lt;/p&gt;

&lt;p&gt;val a = 2 // override a&lt;/p&gt;

&lt;p&gt;val b = a; val c = b;&lt;/p&gt;

&lt;p&gt;println(b) // prints &quot;1&quot; instead of &quot;2&quot;&lt;br/&gt;
------------------------------&lt;/p&gt;

&lt;p&gt;Interestingly, if the second-last line &quot;val b = a; val c = b;&quot; is executed twice, then I get the expected result&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux, Scala 2.11.8&lt;/p&gt;</environment>
        <key id="13071055">SPARK-20706</key>
            <summary>Spark-shell not overriding method/variable definition</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetruska">Mark Petruska</assignee>
                                    <reporter username="raphsen">Raphael Roth</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 May 2017 06:53:53 +0000</created>
                <updated>Mon, 12 Dec 2022 18:10:32 +0000</updated>
                            <resolved>Wed, 6 Dec 2017 00:08:49 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>2.1.1</version>
                    <version>2.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Spark Shell</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16005985" author="assaf.mendelson" created="Thu, 11 May 2017 07:04:41 +0000"  >&lt;p&gt;Actually it seems like the use of &apos;;&apos; to do more than one command per line when reusing the val is causing it. For example:&lt;/p&gt;

&lt;p&gt;val tmp = myMethod(); println(tmp)&lt;br/&gt;
val tmp = myMethod(); tmp+&quot;bla&quot;&lt;/p&gt;

&lt;p&gt;also causes the issue but&lt;/p&gt;

&lt;p&gt;val tmp = myMeothd(); {}&lt;/p&gt;

&lt;p&gt;does not.&lt;/p&gt;</comment>
                            <comment id="16005986" author="assaf.mendelson" created="Thu, 11 May 2017 07:05:08 +0000"  >&lt;p&gt;I don&apos;t think the priority is right. This shouldn&apos;t be a major bug...&lt;/p&gt;</comment>
                            <comment id="16006078" author="raphsen" created="Thu, 11 May 2017 08:25:12 +0000"  >&lt;p&gt;Well I&apos;m using Spark-Notebook, there it&apos;s very anoying because it&apos;s quite common that cells are executed multiple times as you work on the code, and this bug causes the implementations not to be updated. I just added the semicolons to &quot;simulate&quot; the execution of a cell of code in Spark-Notebook. Is there another way to do it?&lt;/p&gt;</comment>
                            <comment id="16006085" author="raphsen" created="Thu, 11 May 2017 08:30:55 +0000"  >&lt;p&gt;You can also reproduce this bug using :paste instead of using semicolon &lt;/p&gt;</comment>
                            <comment id="16006139" author="srowen" created="Thu, 11 May 2017 09:28:16 +0000"  >&lt;p&gt;I think this is more of a Scala shell issue than anything, though I can&apos;t reproduce it in Scala 2.12 (don&apos;t have 2.11 handy). Yes, it&apos;s taking the value of tmp from when the block starts executing for some reason. As you say, it doesn&apos;t happen in &apos;normal&apos; code nor in compiled code, I&apos;m guessing, so don&apos;t know how significant this is.&lt;/p&gt;</comment>
                            <comment id="16007974" author="gurwls223" created="Fri, 12 May 2017 11:15:50 +0000"  >&lt;p&gt;(I can&apos;t reproduce this in Scala 2.11.6 too)&lt;/p&gt;</comment>
                            <comment id="16008010" author="raphsen" created="Fri, 12 May 2017 11:55:25 +0000"  >&lt;p&gt;also tested with scala console 2.11.8, this works fine. So I assume the bug is in spark-shell itself&lt;/p&gt;</comment>
                            <comment id="16077691" author="raphsen" created="Fri, 7 Jul 2017 06:36:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sowen&quot; class=&quot;user-hover&quot; rel=&quot;sowen&quot;&gt;sowen&lt;/a&gt; I think this is quite significant, because when working with spark-shell / spark-notebook one often works on methods (and derefore executing blocks of code multiple times). In our team we already last quite some time because of this bug.&lt;/p&gt;</comment>
                            <comment id="16276921" author="mpetruska" created="Mon, 4 Dec 2017 15:12:59 +0000"  >&lt;p&gt;This is a Scala repl bug, see: &lt;a href=&quot;https://github.com/scala/bug/issues/9740&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/scala/bug/issues/9740&lt;/a&gt;. The fix for this made it into Scala 2.11.9.&lt;br/&gt;
Basically it affects &quot;class-based&quot; Scala-shells, which is used in Spark-shell.&lt;br/&gt;
Creating the PR for the fix.&lt;/p&gt;</comment>
                            <comment id="16276948" author="apachespark" created="Mon, 4 Dec 2017 15:32:04 +0000"  >&lt;p&gt;User &apos;mpetruska&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/19879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/19879&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16279415" author="srowen" created="Wed, 6 Dec 2017 00:08:49 +0000"  >&lt;p&gt;Issue resolved by pull request 19879&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/19879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/19879&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12877237" name="screenshot-1.png" size="13377" author="raphsen" created="Fri, 14 Jul 2017 06:11:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3etef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>