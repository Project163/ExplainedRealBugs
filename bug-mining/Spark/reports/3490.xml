<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:42:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-14421] Kinesis deaggregation with PySpark</title>
                <link>https://issues.apache.org/jira/browse/SPARK-14421</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;I&apos;m creating this issue as a precaution...&lt;/p&gt;

&lt;p&gt;We have some preliminary evidence that indicates that KPL de-aggregation for Kinesis streams may not work in Spark 1.6.1.  Using the PySpark Kinesis Word Count example, we don&apos;t receive records when KPL is used to produce the data, with aggregation turned on, using masterUrl = local&lt;span class=&quot;error&quot;&gt;&amp;#91;16&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;At the same time, I noticed this thread:&lt;br/&gt;
&lt;a href=&quot;https://forums.aws.amazon.com/message.jspa?messageID=707122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://forums.aws.amazon.com/message.jspa?messageID=707122&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Following the instructions here:&lt;br/&gt;
&lt;a href=&quot;http://brianoneill.blogspot.com/2016/03/pyspark-on-amazon-emr-w-kinesis.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://brianoneill.blogspot.com/2016/03/pyspark-on-amazon-emr-w-kinesis.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The example will sometimes work.   When aggregation is disabled, it appears to always work.  I&apos;m going to dig a bit deeper, but thought you might have some pointers.&lt;/p&gt;</description>
                <environment>&lt;p&gt;PySpark w/ Kinesis word count example&lt;/p&gt;</environment>
        <key id="12956348">SPARK-14421</key>
            <summary>Kinesis deaggregation with PySpark</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bkotechguy">Brian O&apos;Neil</assignee>
                                    <reporter username="boneill42">Brian ONeill</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Apr 2016 01:17:13 +0000</created>
                <updated>Wed, 14 Feb 2024 10:10:31 +0000</updated>
                            <resolved>Thu, 12 May 2016 19:10:46 +0000</resolved>
                                    <version>1.6.1</version>
                                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15228351" author="boneill42" created="Wed, 6 Apr 2016 14:35:19 +0000"  >&lt;p&gt;Interesting observation here.  I uprev&apos;d the kinesis consumer library (which required a protobuf bump as well)  After that, the de-aggregation appeared to work. &lt;/p&gt;

&lt;p&gt;Spark 1.6.1 was using 1.4.0 of KCL.  That should have supported the de-aggregation, but under some circumstances it appeared not to work.&lt;/p&gt;

&lt;p&gt;I went to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &amp;lt;aws.kinesis.client.version&amp;gt;1.6.2&amp;lt;/aws.kinesis.client.version&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That required going to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &amp;lt;protobuf.version&amp;gt;2.6.1&amp;lt;/protobuf.version&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After making those two changes, I was able to consume data from a stream, whose data was aggregated by KPL version: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    compile (group:&lt;span class=&quot;code-quote&quot;&gt;&apos;com.amazonaws&apos;&lt;/span&gt;, name:&lt;span class=&quot;code-quote&quot;&gt;&apos;amazon-kinesis-producer&apos;&lt;/span&gt;, version:&lt;span class=&quot;code-quote&quot;&gt;&apos;0.10.2&apos;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15228752" author="apachespark" created="Wed, 6 Apr 2016 17:57:04 +0000"  >&lt;p&gt;User &apos;boneill42&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/12209&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/12209&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15280519" author="apachespark" created="Wed, 11 May 2016 17:56:04 +0000"  >&lt;p&gt;User &apos;boneill42&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/13054&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/13054&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15280524" author="boneill42" created="Wed, 11 May 2016 18:00:10 +0000"  >&lt;p&gt;Note, I uploaded a simple python file that can test this.  Simply needs this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;brianoneill@blu:~/pug-&amp;gt; cat ~/git/spark/dist/conf/spark-defaults.conf | grep -v \#
spark.driver.extraClassPath /Users/brianoneill/git/spark/external/kinesis-asl-assembly/target/spark-streaming-kinesis-asl-assembly_2.11-2.0.0-SNAPSHOT.jar
spark.executor.extraClassPath /Users/brianoneill/git/spark/external/kinesis-asl-assembly/target/spark-streaming-kinesis-asl-assembly_2.11-2.0.0-SNAPSHOT.jar
spark.master local[16]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And, then invoke with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;python dump.py myapp StreamWithAggregatedData https:&lt;span class=&quot;code-comment&quot;&gt;//kinesis.us-east-1.amazonaws.com us-east-1&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15281930" author="srowen" created="Thu, 12 May 2016 19:10:46 +0000"  >&lt;p&gt;Issue resolved by pull request 13054&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/13054&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/13054&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13568397">SPARK-47038</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12803467" name="dump.py" size="1152" author="boneill42" created="Wed, 11 May 2016 17:58:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vp2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>