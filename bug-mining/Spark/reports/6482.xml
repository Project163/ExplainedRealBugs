<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:05:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-26045] Error in the spark 2.4 release package with the spark-avro_2.11 depdency</title>
                <link>https://issues.apache.org/jira/browse/SPARK-26045</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Hello I have been problems with the last spark 2.4 release, the read avro file feature does not seem to be working, I have fixed it in local building the source code and updating the &lt;b&gt;avro-1.8.2.jar&lt;/b&gt;&#160;on the &lt;b&gt;$SPARK_HOME&lt;/b&gt;/jars/ dependencies.&lt;/p&gt;

&lt;p&gt;With the default spark 2.4 release when I try to read an avro file spark raise the following exception.&#160;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
spark-shell --packages org.apache.spark:spark-avro_2.11:2.4.0


scala&amp;gt; spark.read.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;avro&quot;&lt;/span&gt;).load(&lt;span class=&quot;code-quote&quot;&gt;&quot;file.avro&quot;&lt;/span&gt;)

java.lang.NoSuchMethodError: org.apache.avro.Schema.getLogicalType()Lorg/apache/avro/LogicalType;
at org.apache.spark.sql.avro.SchemaConverters$.toSqlTypeHelper(SchemaConverters.scala:51)
at org.apache.spark.sql.avro.SchemaConverters$.toSqlTypeHelper(SchemaConverters.scala:105
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Checksum:&#160; spark-2.4.0-bin-without-hadoop.tgz: 7670E29B 59EAE7A8 5DBC9350 085DD1E0 F056CA13 11365306 7A6A32E9 B607C68E A8DAA666 EF053350 008D0254 318B70FB DE8A8B97 6586CA19 D65BA2B3 FD7F919E&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;4.15.0-38-generic #41-Ubuntu SMP Wed Oct 10 10:59:38 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux&lt;/p&gt;</environment>
        <key id="13198160">SPARK-26045</key>
            <summary>Error in the spark 2.4 release package with the spark-avro_2.11 depdency</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srowen">Sean R. Owen</assignee>
                                    <reporter username="o.garcia">Oscar garc&#237;a </reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Nov 2018 21:38:50 +0000</created>
                <updated>Wed, 12 Jun 2019 18:17:16 +0000</updated>
                            <resolved>Thu, 23 May 2019 20:22:24 +0000</resolved>
                                    <version>2.4.0</version>
                                    <fixVersion>2.4.4</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>Build</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="7200">2h</timeoriginalestimate>
                            <timeestimate seconds="7200">2h</timeestimate>
                                        <comments>
                            <comment id="16689217" author="mgaido" created="Fri, 16 Nov 2018 09:47:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=o.garcia&quot; class=&quot;user-hover&quot; rel=&quot;o.garcia&quot;&gt;o.garcia&lt;/a&gt; can you please create a PR for this?&lt;/p&gt;</comment>
                            <comment id="16689641" author="srowen" created="Fri, 16 Nov 2018 16:36:25 +0000"  >&lt;p&gt;This looks like you are using a different version of Avro than Spark uses? I am not sure how Spark could compile with this but then fail in this way.&lt;/p&gt;</comment>
                            <comment id="16691101" author="o.garcia" created="Sun, 18 Nov 2018 21:41:35 +0000"  >&lt;p&gt;Following the 2.4 spark documentation, &lt;a href=&quot;https://spark.apache.org/docs/latest/sql-data-sources-avro.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://spark.apache.org/docs/latest/sql-data-sources-avro.html&lt;/a&gt;&#160;I am launching the spark-shell as follow &quot;&lt;b&gt;spark-shell --packages org.apache.spark:spark-avro_2.11:2.4.0&lt;/b&gt;&quot; and when i try to read an avro file spark.read.format(&quot;avro&quot;).load(path) this error is raised &lt;br/&gt;
java.lang.NoSuchMethodError: org.apache.avro.Schema.getLogicalType()Lorg/apache/avro/LogicalType;&lt;br/&gt;
 at org.apache.spark.sql.avro.SchemaConverters$.toSqlTypeHelper(SchemaConverters.scala:51)&lt;br/&gt;
 at org.apache.spark.sql.avro.SchemaConverters$.toSqlTypeHelper(SchemaConverters.scala:105)&lt;/p&gt;



&lt;p&gt;I am using the spark assembly without hadoop, and my hadoop local version is 3.0.3.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16765102" author="pushpendra.jaiswal90@gmail.com" created="Mon, 11 Feb 2019 16:02:16 +0000"  >&lt;p&gt;Its happening with spark 2.3.1 , spark 2.4.0 and hadoop 3.1.1 . Tried with avro-1.8.2&lt;/p&gt;</comment>
                            <comment id="16782508" author="srowen" created="Sat, 2 Mar 2019 20:15:48 +0000"  >&lt;p&gt;Avro is already on 1.8.2 in 2.4.0. I think the problem may be that you&apos;re adding a separate copy of Avro, which might end up in a different classloader. You wouldn&apos;t want to do this, in general, but certainly won&apos;t likely work with Spark 2.3, which was on Avro 1.7.7.&lt;/p&gt;

&lt;p&gt;Try without adding an avro jar, and make sure you don&apos;t have a different Avro dependency in your app or environment. If that&apos;s not it, my final guess is that something in hive-exec has a copy of avro. But then I am not sure how the tests would pass.&lt;/p&gt;</comment>
                            <comment id="16845784" author="renzmeister" created="Wed, 22 May 2019 11:24:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srowen&quot; class=&quot;user-hover&quot; rel=&quot;srowen&quot;&gt;srowen&lt;/a&gt; I think the issue here is that the Spark package without Hadoop (so spark-2.4.3-bin-without-hadoop.tgz) seems to be missing 2 files inside $SPARK_HOME/jars:&lt;/p&gt;

&lt;p&gt;avro-1.8.2.jar&lt;br/&gt;
avro-ipc-1.8.2.jar&lt;/p&gt;

&lt;p&gt;I got the same error &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=o.garcia&quot; class=&quot;user-hover&quot; rel=&quot;o.garcia&quot;&gt;o.garcia&lt;/a&gt;reported. I checked the spark-2.4.3-bin-hadoop2.7.tgz package and it does have the above 2 files. After copying these files into $SPARK_HOME/jars avro was working for me again.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16845832" author="srowen" created="Wed, 22 May 2019 12:32:24 +0000"  >&lt;p&gt;Yes this is consistent with the thread on dev@ yesterday. It&apos;s the &apos;without Hadoop&apos; build which means you&apos;re using Avro 1.7 from Hadoop. That won&apos;t work with the current Spark 2.4. I think the answer may be to decide to not let Avro be &apos;provided&apos; in this build, but I&apos;m not so sure about the Avro strategy here as there are many other complex compatibility issues with Parquet version too. The fact that people report it works by manually adding Avro 1.8 jars is positive though.&lt;/p&gt;</comment>
                            <comment id="16847028" author="dongjoon" created="Thu, 23 May 2019 20:22:24 +0000"  >&lt;p&gt;This is resolved via &lt;a href=&quot;https://github.com/apache/spark/pull/24680&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/24680&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 25 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00gbc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>