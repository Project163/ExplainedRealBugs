<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:16:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-2955] Test code fails to compile with &quot;mvn compile&quot; without &quot;install&quot; </title>
                <link>https://issues.apache.org/jira/browse/SPARK-2955</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;(This is the corrected follow-up to &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-2903&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SPARK-2903&lt;/a&gt; )&lt;/p&gt;

&lt;p&gt;Right now, &quot;mvn compile test-compile&quot; fails to compile Spark. (Don&apos;t worry; &quot;mvn package&quot; works, so this is not major.) The issue stems from test code in some modules depending on test code in other modules. That is perfectly fine and supported by Maven.&lt;/p&gt;

&lt;p&gt;It takes extra work to get this to work with scalatest, and this has been attempted: &lt;a href=&quot;https://github.com/apache/spark/blob/master/sql/catalyst/pom.xml#L86&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/blob/master/sql/catalyst/pom.xml#L86&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This formulation is not quite enough, since the SQL Core module&apos;s tests fail to compile for lack of finding test classes in SQL Catalyst, and likewise for most Streaming integration modules depending on core Streaming test code. Example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[error] /Users/srowen/Documents/spark/sql/core/src/test/scala/org/apache/spark/sql/QueryTest.scala:23: not found: type PlanTest
[error] &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;QueryTest &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; PlanTest {
[error]                         ^
[error] /Users/srowen/Documents/spark/sql/core/src/test/scala/org/apache/spark/sql/CachedTableSuite.scala:28: &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.spark.sql.test is not a value
[error]   test(&lt;span class=&quot;code-quote&quot;&gt;&quot;SPARK-1669: cacheTable should be idempotent&quot;&lt;/span&gt;) {
[error]   ^
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The issue I believe is that generation of a test-jar is bound here to the compile phase, but the test classes are not being compiled in this phase. It should bind to the test-compile phase.&lt;/p&gt;

&lt;p&gt;It works when executing &quot;mvn package&quot; or &quot;mvn install&quot; since test-jar artifacts are actually generated available through normal Maven mechanisms as each module is built. They are then found normally, regardless of scalatest configuration.&lt;/p&gt;

&lt;p&gt;It would be nice for a simple &quot;mvn compile test-compile&quot; to work since the test code is perfectly compilable given the Maven declarations.&lt;/p&gt;

&lt;p&gt;On the plus side, this change is low-risk as it only affects tests.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yhuai&quot; class=&quot;user-hover&quot; rel=&quot;yhuai&quot;&gt;yhuai&lt;/a&gt; made the original scalatest change and has glanced at this and thinks it makes sense.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12733121">SPARK-2955</key>
            <summary>Test code fails to compile with &quot;mvn compile&quot; without &quot;install&quot; </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srowen">Sean R. Owen</assignee>
                                    <reporter username="srowen">Sean R. Owen</reporter>
                        <labels>
                            <label>build</label>
                            <label>compile</label>
                            <label>scalatest</label>
                            <label>test</label>
                            <label>test-compile</label>
                    </labels>
                <created>Sun, 10 Aug 2014 20:02:32 +0000</created>
                <updated>Thu, 15 Jan 2015 09:08:38 +0000</updated>
                            <resolved>Fri, 15 Aug 2014 05:09:19 +0000</resolved>
                                    <version>1.0.2</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>Build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14092180" author="apachespark" created="Sun, 10 Aug 2014 20:07:09 +0000"  >&lt;p&gt;User &apos;srowen&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/1879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1879&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14098170" author="pwendell" created="Fri, 15 Aug 2014 05:09:19 +0000"  >&lt;p&gt;Issue resolved by pull request 1879&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/1879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1879&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411149</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 14 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1yqhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411141</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>