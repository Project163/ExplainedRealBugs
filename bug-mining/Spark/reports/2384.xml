<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:31:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-10182] GeneralizedLinearModel doesn&apos;t unpersist cached data</title>
                <link>https://issues.apache.org/jira/browse/SPARK-10182</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;The problem might be reproduced in spark-shell with following code snippet:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.spark.SparkContext
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.spark.mllib.classification.LogisticRegressionWithLBFGS
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.spark.mllib.linalg.Vectors
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.spark.mllib.regression.LabeledPoint

val samples = Seq[LabeledPoint](
  LabeledPoint(1.0, Vectors.dense(1.0, 0.0)),
  LabeledPoint(1.0, Vectors.dense(0.0, 1.0)),
  LabeledPoint(0.0, Vectors.dense(1.0, 1.0)),
  LabeledPoint(0.0, Vectors.dense(0.0, 0.0))
)

val rdd = sc.parallelize(samples)

&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (i &amp;lt;- 0 until 10) {
  val model = {
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LogisticRegressionWithLBFGS()
      .setNumClasses(2)
      .run(rdd)
      .clearThreshold()
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After code execution there are 10 &lt;tt&gt;MapPartitionsRDD&lt;/tt&gt; objects on &quot;Storage&quot; tab in Spark application UI.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12858287">SPARK-10182</key>
            <summary>GeneralizedLinearModel doesn&apos;t unpersist cached data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wildfire">Vyacheslav Baranov</assignee>
                                    <reporter username="wildfire">Vyacheslav Baranov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Aug 2015 12:45:02 +0000</created>
                <updated>Thu, 27 Aug 2015 17:58:16 +0000</updated>
                            <resolved>Thu, 27 Aug 2015 17:58:16 +0000</resolved>
                                    <version>1.4.1</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>MLlib</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14709359" author="srowen" created="Mon, 24 Aug 2015 14:20:46 +0000"  >&lt;p&gt;I can&apos;t reproduce this. I ran this in the spark-shell and saw no cached RDDs after. Can you try the latest to verify?&lt;/p&gt;</comment>
                            <comment id="14709367" author="wildfire" created="Mon, 24 Aug 2015 14:25:09 +0000"  >&lt;p&gt;Yes, please see screenshot attached: &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;http://piqqin.com/img/945dea5edcb132d9f7eac9969595c660.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Actually, I have a fix for this issue &amp;amp; I&apos;m preparing the pull request.&lt;/p&gt;</comment>
                            <comment id="14709370" author="srowen" created="Mon, 24 Aug 2015 14:27:41 +0000"  >&lt;p&gt;This is still vs 1.4.1; I&apos;m running master. It&apos;s important to narrow that much down. Especially if you&apos;re opening a PR vs master.&lt;/p&gt;</comment>
                            <comment id="14709373" author="apachespark" created="Mon, 24 Aug 2015 14:28:04 +0000"  >&lt;p&gt;User &apos;SlavikBaranov&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/8395&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/8395&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14709416" author="wildfire" created="Mon, 24 Aug 2015 15:01:26 +0000"  >&lt;p&gt;Sorry, it was wrong spark-shell. Behaviour in master is slightly different: It looks like RDDs are removed from cache on GC. I had to modify the code a bit to reproduce the issue:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.spark.SparkContext
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.spark.mllib.classification.LogisticRegressionWithLBFGS
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.spark.mllib.linalg.Vectors
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.spark.mllib.regression.LabeledPoint

&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (i &amp;lt;- 0 until 100) {
  val samples = Seq[LabeledPoint](
    LabeledPoint(1.0, Vectors.dense(1.0, 0.0)),
    LabeledPoint(1.0, Vectors.dense(0.0, 1.0)),
    LabeledPoint(0.0, Vectors.dense(1.0, 1.0)),
    LabeledPoint(0.0, Vectors.dense(0.0, 0.0))
  )

  val rdd = sc.parallelize(samples)

  val model = {
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LogisticRegressionWithLBFGS()
      .setNumClasses(2)
      .run(rdd)
      .clearThreshold()
  }

}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;http://piqqin.com/img/ea6c54a1bf414828a794ca6604436d78.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;The number of cached RDDs decreases over time. However, on real-size data when building cross-validated models this is real problem: useful pre-cached datasets are dropped from memory and replaced with these &lt;tt&gt;MapPartitionsRDD&lt;/tt&gt;&apos;s. With the fix I&apos;ve submitted behaviour is perfectly fine: only one RDD is cached at a time, so pre-cached data is untouched.&lt;/p&gt;</comment>
                            <comment id="14717177" author="srowen" created="Thu, 27 Aug 2015 17:58:16 +0000"  >&lt;p&gt;Issue resolved by pull request 8395&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/8395&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/8395&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ja8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12333083">1.6.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>