<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:48:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-16808] History Server main page does not honor APPLICATION_WEB_PROXY_BASE</title>
                <link>https://issues.apache.org/jira/browse/SPARK-16808</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;The root of the history server is rendered dynamically with javascript, and this doesn&apos;t honor APPLICATION_WEB_PROXY_BASE: &lt;a href=&quot;https://github.com/apache/spark/blob/master/core/src/main/resources/org/apache/spark/ui/static/historypage-template.html#L67&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/blob/master/core/src/main/resources/org/apache/spark/ui/static/historypage-template.html#L67&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Other links in the history server do honor it: &lt;a href=&quot;https://github.com/apache/spark/blob/master/core/src/main/scala/org/apache/spark/ui/UIUtils.scala#L146&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/blob/master/core/src/main/scala/org/apache/spark/ui/UIUtils.scala#L146&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This means the links on the history server root page are broken when deployed behind a proxy.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12993687">SPARK-16808</key>
            <summary>History Server main page does not honor APPLICATION_WEB_PROXY_BASE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vijoshi">Vinayak Joshi</assignee>
                                    <reporter username="mgummelt">Michael Gummelt</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jul 2016 23:09:53 +0000</created>
                <updated>Tue, 15 Nov 2016 21:10:00 +0000</updated>
                            <resolved>Wed, 9 Nov 2016 18:42:13 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.3</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15627706" author="vijoshi" created="Wed, 2 Nov 2016 04:44:15 +0000"  >&lt;p&gt;The same issue also affects the case where &quot;spark.ui.proxyBase&quot; is set and it does not get honored in HistoryServer 2.0. &lt;/p&gt;

&lt;p&gt;This is a regression in 2.0 from 1.6. &lt;/p&gt;

&lt;p&gt;In 2.0, the refactoring of HistoryPage.scala changed the History application listing to occur from an ajax call. The page listing is rendered using ui/static/historypage-template.html which does not take into account the &quot;spark.ui.proxyBase&quot; / APPLICATION_WEB_PROXYBASE when generating the links to the applications.&lt;/p&gt;

&lt;p&gt;The existing History Server test suite -spark/deploy/history/HistoryServerSuite.scala has an explicit test case to validate this scenario: &quot;relative links are prefixed with uiRoot (spark.ui.proxyBase)&quot;  - but this test case is broken too because the html it&apos;s receiving and validating no longer contains any application links (as noted earlier, they are now generated through a js ajax call etc which does not happen in this test) - so even though the test case passes, it&apos;s failing it&apos;s purpose. &lt;/p&gt;</comment>
                            <comment id="15628853" author="jantes" created="Wed, 2 Nov 2016 12:45:29 +0000"  >&lt;p&gt;One possible solution is in the /core/src/main/scala/org/apache/spark/deploy/history/HistoryServer.scala. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;[history] def getAttemptURI(appId: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, attemptId: Option[&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;]): &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; = {
    val attemptSuffix = attemptId.map { id =&amp;gt; s&lt;span class=&quot;code-quote&quot;&gt;&quot;/$id&quot;&lt;/span&gt; }.getOrElse(&quot;&quot;)
    UIUtils.prependBaseUri(s&lt;span class=&quot;code-quote&quot;&gt;&quot;${HistoryServer.UI_PATH_PREFIX}/${appId}${attemptSuffix}&quot;&lt;/span&gt;) 
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In the 1.6.x line of code the UIUtils.prependBaseUri was positioned where this method was called.  The rewrite removed it.  Fixing it here appears to be better semantically.&lt;/p&gt;</comment>
                            <comment id="15630168" author="apachespark" created="Wed, 2 Nov 2016 19:33:05 +0000"  >&lt;p&gt;User &apos;jantes&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/15739&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/15739&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15630935" author="apachespark" created="Wed, 2 Nov 2016 23:48:04 +0000"  >&lt;p&gt;User &apos;vijoshi&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/15742&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/15742&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15630940" author="vijoshi" created="Wed, 2 Nov 2016 23:49:37 +0000"  >&lt;p&gt;Added a pull request with my take at this issue as well.&lt;/p&gt;</comment>
                            <comment id="15658377" author="apachespark" created="Fri, 11 Nov 2016 22:36:04 +0000"  >&lt;p&gt;User &apos;vijoshi&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/15855&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/15855&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31p93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>