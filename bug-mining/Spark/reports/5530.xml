<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:58:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-21658] Adds the default None for value in na.replace in PySpark to match</title>
                <link>https://issues.apache.org/jira/browse/SPARK-21658</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Looks &lt;tt&gt;na.replace&lt;/tt&gt; missed the default value &lt;tt&gt;None&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Both docs says they are aliases &lt;br/&gt;
&lt;a href=&quot;http://spark.apache.org/docs/2.2.0/api/python/pyspark.sql.html#pyspark.sql.DataFrame.replace&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://spark.apache.org/docs/2.2.0/api/python/pyspark.sql.html#pyspark.sql.DataFrame.replace&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://spark.apache.org/docs/2.2.0/api/python/pyspark.sql.html#pyspark.sql.DataFrameNaFunctions.replace&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://spark.apache.org/docs/2.2.0/api/python/pyspark.sql.html#pyspark.sql.DataFrameNaFunctions.replace&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;but the default values looks different, which ends up with:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt;&amp;gt;&amp;gt; df = spark.createDataFrame([(&lt;span class=&quot;code-quote&quot;&gt;&apos;Alice&apos;&lt;/span&gt;, 10, 80.0)])
&amp;gt;&amp;gt;&amp;gt; df.replace({&lt;span class=&quot;code-quote&quot;&gt;&quot;Alice&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;}).first()
Row(_1=u&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;, _2=10, _3=80.0)
&amp;gt;&amp;gt;&amp;gt; df.na.replace({&lt;span class=&quot;code-quote&quot;&gt;&quot;Alice&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;}).first()
Traceback (most recent call last):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;stdin&amp;gt;&quot;&lt;/span&gt;, line 1, in &amp;lt;module&amp;gt;
TypeError: replace() takes at least 3 arguments (2 given)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To take the advantage of &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-19454&quot; title=&quot;Improve DataFrame.replace API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-19454&quot;&gt;&lt;del&gt;SPARK-19454&lt;/del&gt;&lt;/a&gt;, sounds we should match them.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13093007">SPARK-21658</key>
            <summary>Adds the default None for value in na.replace in PySpark to match</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="byakuinss">Chih Han Yu</assignee>
                                    <reporter username="gurwls223">Hyukjin Kwon</reporter>
                        <labels>
                            <label>Starter</label>
                    </labels>
                <created>Mon, 7 Aug 2017 20:30:11 +0000</created>
                <updated>Mon, 12 Dec 2022 18:11:11 +0000</updated>
                            <resolved>Sat, 3 Feb 2018 19:05:19 +0000</resolved>
                                    <version>2.2.0</version>
                                                    <component>PySpark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="16117718" author="viirya" created="Tue, 8 Aug 2017 02:00:50 +0000"  >&lt;p&gt;I will mentor a beginner to work on this. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hyukjin.kwon&quot; class=&quot;user-hover&quot; rel=&quot;hyukjin.kwon&quot;&gt;hyukjin.kwon&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="16118040" author="mgaido" created="Tue, 8 Aug 2017 08:31:19 +0000"  >&lt;p&gt;Though, the documentation points out that there is no default for the &lt;tt&gt;value&lt;/tt&gt; parameter in &lt;tt&gt;DataFrameNaFunctions&lt;/tt&gt;.&lt;br/&gt;
Anyway, if for you it is ok, I can work and fix this.&lt;/p&gt;</comment>
                            <comment id="16118044" author="viirya" created="Tue, 8 Aug 2017 08:34:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgaido&quot; class=&quot;user-hover&quot; rel=&quot;mgaido&quot;&gt;mgaido&lt;/a&gt; If you don&apos;t mind, I&apos;m mentoring a beginner to work on this.&lt;/p&gt;</comment>
                            <comment id="16118097" author="mgaido" created="Tue, 8 Aug 2017 09:24:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=viirya&quot; class=&quot;user-hover&quot; rel=&quot;viirya&quot;&gt;viirya&lt;/a&gt; ok, thanks.&lt;/p&gt;</comment>
                            <comment id="16118271" author="viirya" created="Tue, 8 Aug 2017 12:30:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgaido&quot; class=&quot;user-hover&quot; rel=&quot;mgaido&quot;&gt;mgaido&lt;/a&gt; Appreciate your understanding! Thanks.&lt;/p&gt;</comment>
                            <comment id="16125848" author="gurwls223" created="Mon, 14 Aug 2017 15:41:50 +0000"  >&lt;p&gt;Issue resolved by pull request 18895&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/18895&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/18895&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16125898" author="byakuinss" created="Mon, 14 Aug 2017 16:12:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hyukjin.kwon&quot; class=&quot;user-hover&quot; rel=&quot;hyukjin.kwon&quot;&gt;hyukjin.kwon&lt;/a&gt;&lt;br/&gt;
Hi, here is my JIRA account.&lt;/p&gt;</comment>
                            <comment id="16125906" author="gurwls223" created="Mon, 14 Aug 2017 16:17:42 +0000"  >&lt;p&gt;I can&apos;t assign this JIRA to this account ^, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=byakuinss&quot; class=&quot;user-hover&quot; rel=&quot;byakuinss&quot;&gt;byakuinss&lt;/a&gt;. Please set this if anyone is able.&lt;/p&gt;</comment>
                            <comment id="16150022" author="gurwls223" created="Fri, 1 Sep 2017 04:13:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jerryshao&quot; class=&quot;user-hover&quot; rel=&quot;jerryshao&quot;&gt;jerryshao&lt;/a&gt;, I think you are now able to add a user to &quot;Contributor&quot; role if I understood correctly. This, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=byakuinss&quot; class=&quot;user-hover&quot; rel=&quot;byakuinss&quot;&gt;byakuinss&lt;/a&gt; user fixed this issue by &lt;a href=&quot;https://github.com/apache/spark/pull/18895&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/18895&lt;/a&gt;. Do you mind if I ask to assign this JIRA to her please?&lt;/p&gt;</comment>
                            <comment id="16150059" author="jerryshao" created="Fri, 1 Sep 2017 05:25:52 +0000"  >&lt;p&gt;Done &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="16150091" author="viirya" created="Fri, 1 Sep 2017 06:10:44 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hyukjin.kwon&quot; class=&quot;user-hover&quot; rel=&quot;hyukjin.kwon&quot;&gt;hyukjin.kwon&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jerryshao&quot; class=&quot;user-hover&quot; rel=&quot;jerryshao&quot;&gt;jerryshao&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16350848" author="rxin" created="Fri, 2 Feb 2018 19:35:56 +0000"  >&lt;p&gt;Sorry but I object to this change.&#160;Why would we put null as the default replace value, in a function called replace? That seems very counterintuitive and error prone.&lt;/p&gt;

&lt;p&gt;I also left a comment in&#160;&lt;a href=&quot;https://github.com/apache/spark/pull/16793&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/16793&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16351196" author="gurwls223" created="Sat, 3 Feb 2018 02:12:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rxin&quot; class=&quot;user-hover&quot; rel=&quot;rxin&quot;&gt;rxin&lt;/a&gt;, this JIRA fixes the signature of an alias to match with the original..&lt;br/&gt;
Original fix was in &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-19454&quot; title=&quot;Improve DataFrame.replace API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-19454&quot;&gt;&lt;del&gt;SPARK-19454&lt;/del&gt;&lt;/a&gt; but that was got in 2.2.0.&lt;br/&gt;
Do you want to revert this alias change at least? I am fine with reverting this first and talk more if it worries you.&lt;/p&gt;</comment>
                            <comment id="16351260" author="rxin" created="Sat, 3 Feb 2018 05:51:58 +0000"  >&lt;p&gt;I&apos;d revert this one first. I&apos;d even consider the other one a bug and remove the default value. When&apos;s the last time you&apos;ve seen a function called replace with a default value of null/None?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16351305" author="smilegator" created="Sat, 3 Feb 2018 07:58:36 +0000"  >&lt;p&gt;Yes. We should revert this. It is risky. &lt;/p&gt;</comment>
                            <comment id="16351324" author="gurwls223" created="Sat, 3 Feb 2018 09:02:31 +0000"  >&lt;p&gt;I think the actual root cause is because we happen to allow a dictionary for &lt;tt&gt;to_replace&lt;/tt&gt; at the first place. Maybe, we can move the discussion for API and implementation details to &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-19454&quot; title=&quot;Improve DataFrame.replace API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-19454&quot;&gt;&lt;del&gt;SPARK-19454&lt;/del&gt;&lt;/a&gt; or &lt;a href=&quot;https://github.com/apache/spark/pull/16793&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/16793&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16351326" author="apachespark" created="Sat, 3 Feb 2018 09:05:04 +0000"  >&lt;p&gt;User &apos;byakuinss&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/18895&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/18895&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16351327" author="gurwls223" created="Sat, 3 Feb 2018 09:05:27 +0000"  >&lt;p&gt;I am going to revert this alias matching anyway considering we are close to 2.3.0 and the explicit objection, for now.&lt;/p&gt;</comment>
                            <comment id="16351331" author="apachespark" created="Sat, 3 Feb 2018 09:12:03 +0000"  >&lt;p&gt;User &apos;HyukjinKwon&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/20496&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/20496&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16351486" author="gurwls223" created="Sat, 3 Feb 2018 18:58:15 +0000"  >&lt;p&gt;This JIRA targeted to match the signature with its original to be more clear .. &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-23328&quot; title=&quot;Disallow default value None in na.replace/replace when &amp;#39;to_replace&amp;#39; is not a dictionary&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-23328&quot;&gt;&lt;del&gt;SPARK-23328&lt;/del&gt;&lt;/a&gt; contains this ..&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13136079">SPARK-23328</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 41 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3iihb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>