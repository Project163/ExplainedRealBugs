<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:18:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-3923] All Standalone Mode services time out with each other</title>
                <link>https://issues.apache.org/jira/browse/SPARK-3923</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;I&apos;m seeing an issue where it seems that components in Standalone Mode (Worker, Master, Driver, and Executor) all seem to time out with each other after around 1000 seconds. Here is an example log:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;14/10/13 06:43:55 INFO Master: Registering worker ip-10-0-147-189.us-west-2.compute.internal:38922 with 4 cores, 29.0 GB RAM
14/10/13 06:43:55 INFO Master: Registering worker ip-10-0-175-214.us-west-2.compute.internal:42918 with 4 cores, 59.0 GB RAM
14/10/13 06:43:56 INFO Master: Registering app Databricks Shell
14/10/13 06:43:56 INFO Master: Registered app Databricks Shell with ID app-20141013064356-0000

... precisely 1000 seconds later ...

14/10/13 07:00:35 WARN ReliableDeliverySupervisor: Association with remote system [akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//sparkWorker@ip-10-0-147-189.us-west-2.compute.internal:38922] has failed, address is now gated &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; [5000] ms. Reason is: [Disassociated].
&lt;/span&gt;14/10/13 07:00:35 INFO Master: akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//sparkWorker@ip-10-0-147-189.us-west-2.compute.internal:38922 got disassociated, removing it.
&lt;/span&gt;14/10/13 07:00:35 INFO LocalActorRef: Message [akka.remote.transport.ActorTransportAdapter$DisassociateUnderlying] from Actor[akka:&lt;span class=&quot;code-comment&quot;&gt;//sparkMaster/deadLetters] to Actor[akka://sparkMaster/system/transports/akkaprotocolmanager.tcp0/akkaProtocol-tcp%3A%2F%2FsparkMaster%4010.0.147.189%3A54956-1#1529980245] was not delivered. [2] dead letters encountered. This logging can be turned off or adjusted with configuration settings &lt;span class=&quot;code-quote&quot;&gt;&apos;akka.log-dead-letters&apos;&lt;/span&gt; and &lt;span class=&quot;code-quote&quot;&gt;&apos;akka.log-dead-letters-during-shutdown&apos;&lt;/span&gt;.
&lt;/span&gt;14/10/13 07:00:35 INFO Master: akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//sparkWorker@ip-10-0-175-214.us-west-2.compute.internal:42918 got disassociated, removing it.
&lt;/span&gt;14/10/13 07:00:35 INFO Master: Removing worker worker-20141013064354-ip-10-0-175-214.us-west-2.compute.internal-42918 on ip-10-0-175-214.us-west-2.compute.internal:42918
14/10/13 07:00:35 INFO Master: Telling app of lost executor: 1
14/10/13 07:00:35 INFO Master: akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//sparkWorker@ip-10-0-175-214.us-west-2.compute.internal:42918 got disassociated, removing it.
&lt;/span&gt;14/10/13 07:00:35 WARN ReliableDeliverySupervisor: Association with remote system [akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//sparkWorker@ip-10-0-175-214.us-west-2.compute.internal:42918] has failed, address is now gated &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; [5000] ms. Reason is: [Disassociated].
&lt;/span&gt;14/10/13 07:00:35 INFO LocalActorRef: Message [akka.remote.transport.ActorTransportAdapter$DisassociateUnderlying] from Actor[akka:&lt;span class=&quot;code-comment&quot;&gt;//sparkMaster/deadLetters] to Actor[akka://sparkMaster/system/transports/akkaprotocolmanager.tcp0/akkaProtocol-tcp%3A%2F%2FsparkMaster%4010.0.175.214%3A35958-2#314633324] was not delivered. [3] dead letters encountered. This logging can be turned off or adjusted with configuration settings &lt;span class=&quot;code-quote&quot;&gt;&apos;akka.log-dead-letters&apos;&lt;/span&gt; and &lt;span class=&quot;code-quote&quot;&gt;&apos;akka.log-dead-letters-during-shutdown&apos;&lt;/span&gt;.
&lt;/span&gt;14/10/13 07:00:35 INFO LocalActorRef: Message [akka.remote.transport.AssociationHandle$Disassociated] from Actor[akka:&lt;span class=&quot;code-comment&quot;&gt;//sparkMaster/deadLetters] to Actor[akka://sparkMaster/system/transports/akkaprotocolmanager.tcp0/akkaProtocol-tcp%3A%2F%2FsparkMaster%4010.0.175.214%3A35958-2#314633324] was not delivered. [4] dead letters encountered. This logging can be turned off or adjusted with configuration settings &lt;span class=&quot;code-quote&quot;&gt;&apos;akka.log-dead-letters&apos;&lt;/span&gt; and &lt;span class=&quot;code-quote&quot;&gt;&apos;akka.log-dead-letters-during-shutdown&apos;&lt;/span&gt;.
&lt;/span&gt;14/10/13 07:00:36 INFO ProtocolStateActor: No response from remote. Handshake timed out or transport failure detector triggered.
14/10/13 07:00:36 INFO Master: akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//sparkDriver@ip-10-0-175-215.us-west-2.compute.internal:58259 got disassociated, removing it.
&lt;/span&gt;14/10/13 07:00:36 INFO LocalActorRef: Message [akka.remote.transport.AssociationHandle$InboundPayload] from Actor[akka:&lt;span class=&quot;code-comment&quot;&gt;//sparkMaster/deadLetters] to Actor[akka://sparkMaster/system/transports/akkaprotocolmanager.tcp0/akkaProtocol-tcp%3A%2F%2FsparkMaster%4010.0.175.215%3A41987-3#1944377249] was not delivered. [5] dead letters encountered. This logging can be turned off or adjusted with configuration settings &lt;span class=&quot;code-quote&quot;&gt;&apos;akka.log-dead-letters&apos;&lt;/span&gt; and &lt;span class=&quot;code-quote&quot;&gt;&apos;akka.log-dead-letters-during-shutdown&apos;&lt;/span&gt;.
&lt;/span&gt;14/10/13 07:00:36 INFO Master: Removing app app-20141013064356-0000
14/10/13 07:00:36 WARN ReliableDeliverySupervisor: Association with remote system [akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//sparkDriver@ip-10-0-175-215.us-west-2.compute.internal:58259] has failed, address is now gated &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; [5000] ms. Reason is: [Disassociated].
&lt;/span&gt;14/10/13 07:00:36 INFO LocalActorRef: Message [akka.remote.transport.ActorTransportAdapter$DisassociateUnderlying] from Actor[akka:&lt;span class=&quot;code-comment&quot;&gt;//sparkMaster/deadLetters] to Actor[akka://sparkMaster/system/transports/akkaprotocolmanager.tcp0/akkaProtocol-tcp%3A%2F%2FsparkMaster%4010.0.175.215%3A41987-3#1944377249] was not delivered. [6] dead letters encountered. This logging can be turned off or adjusted with configuration settings &lt;span class=&quot;code-quote&quot;&gt;&apos;akka.log-dead-letters&apos;&lt;/span&gt; and &lt;span class=&quot;code-quote&quot;&gt;&apos;akka.log-dead-letters-during-shutdown&apos;&lt;/span&gt;.
&lt;/span&gt;14/10/13 07:00:36 INFO LocalActorRef: Message [akka.remote.transport.AssociationHandle$Disassociated] from Actor[akka:&lt;span class=&quot;code-comment&quot;&gt;//sparkMaster/deadLetters] to Actor[akka://sparkMaster/system/transports/akkaprotocolmanager.tcp0/akkaProtocol-tcp%3A%2F%2FsparkMaster%4010.0.175.215%3A41987-3#1944377249] was not delivered. [7] dead letters encountered. This logging can be turned off or adjusted with configuration settings &lt;span class=&quot;code-quote&quot;&gt;&apos;akka.log-dead-letters&apos;&lt;/span&gt; and &lt;span class=&quot;code-quote&quot;&gt;&apos;akka.log-dead-letters-during-shutdown&apos;&lt;/span&gt;.
&lt;/span&gt;14/10/13 07:00:36 INFO Master: akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//sparkDriver@ip-10-0-175-215.us-west-2.compute.internal:58259 got disassociated, removing it.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that the driver and master are living on the same machine, and there is no load to speak of at the time (so no GC). Also everything disconnecting exactly 1000 seconds after initial connection is pretty suspicious.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12747662">SPARK-3923</key>
            <summary>All Standalone Mode services time out with each other</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="adav">Aaron Davidson</assignee>
                                    <reporter username="ilikerps">Aaron Davidson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Oct 2014 07:29:49 +0000</created>
                <updated>Fri, 17 Oct 2014 01:58:48 +0000</updated>
                            <resolved>Fri, 17 Oct 2014 01:58:48 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>Deploy</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14169044" author="ilikerps" created="Mon, 13 Oct 2014 07:43:52 +0000"  >&lt;p&gt;I did a little digging hoping to find some post about this, no particular luck. I did find &lt;a href=&quot;https://groups.google.com/forum/#!topic/akka-user/X3xzpTCbEFs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this post&lt;/a&gt; which recommends using an interval time &amp;lt; pause, which we are not doing. This doesn&apos;t seem to explain the services all timing out after the heartbeat interval time (which is currently 1000 seconds), but may be good to know in the future.&lt;/p&gt;</comment>
                            <comment id="14169692" author="apachespark" created="Mon, 13 Oct 2014 18:21:40 +0000"  >&lt;p&gt;User &apos;aarondav&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/2784&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/2784&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14169901" author="huangjs" created="Mon, 13 Oct 2014 20:37:04 +0000"  >&lt;p&gt;I have similar problem in YARN-client mode. Setting spark.akka.heartbeat.interval to 100 fixes the problem.&lt;/p&gt;

&lt;p&gt;This is a critical bug.&lt;/p&gt;

&lt;p&gt;P.S.&lt;br/&gt;
One thing made me very confused during debuggin is the error message. The important one&lt;/p&gt;

&lt;p&gt;  WARN ReliableDeliverySupervisor: Association with remote system &lt;span class=&quot;error&quot;&gt;&amp;#91;akka.tcp://sparkDriver@xxx:50278&amp;#93;&lt;/span&gt; has failed, address is now gated for &lt;span class=&quot;error&quot;&gt;&amp;#91;5000&amp;#93;&lt;/span&gt; ms. Reason is: &lt;span class=&quot;error&quot;&gt;&amp;#91;Disassociated&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;is of Log Level WARN.&lt;/p&gt;


&lt;p&gt;Jianshi&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i213dr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327369">1.2.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>