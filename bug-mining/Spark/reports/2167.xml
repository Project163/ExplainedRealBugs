<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:29:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-6304] Checkpointing doesn&apos;t retain driver port</title>
                <link>https://issues.apache.org/jira/browse/SPARK-6304</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;In a check-pointed Streaming application running on a fixed driver port, the setting &quot;spark.driver.port&quot; is not loaded when recovering from a checkpoint.&lt;/p&gt;

&lt;p&gt;(The driver is then started on a random port.)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12781465">SPARK-6304</key>
            <summary>Checkpointing doesn&apos;t retain driver port</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jerryshao">Saisai Shao</assignee>
                                    <reporter username="msoutier">Marius Soutier</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Mar 2015 11:13:27 +0000</created>
                <updated>Thu, 16 Jul 2015 23:58:40 +0000</updated>
                            <resolved>Thu, 16 Jul 2015 23:58:40 +0000</resolved>
                                    <version>1.2.1</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>DStreams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14362907" author="jerryshao" created="Mon, 16 Mar 2015 08:01:10 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msoutier&quot; class=&quot;user-hover&quot; rel=&quot;msoutier&quot;&gt;msoutier&lt;/a&gt;, seldom user will set this &lt;tt&gt;spark.driver.port&lt;/tt&gt;, Spark itself will randomly choose a port and set it to SparkConf, so according to this, Spark Streaming will remove previously set port when recovering from checkpoint.&lt;/p&gt;

&lt;p&gt;Basically why &lt;tt&gt;spark.driver.port&lt;/tt&gt; need to be fixed? And potentially it needs to be fixed when &lt;tt&gt;spark.driver.*&lt;/tt&gt; is set by user.&lt;/p&gt;</comment>
                            <comment id="14362918" author="msoutier" created="Mon, 16 Mar 2015 08:11:20 +0000"  >&lt;p&gt;Simple, I&apos;m using `actorStream` and want to send data to it via remoting. For that I need to have a fixed port to send data to.&lt;/p&gt;

&lt;p&gt;As a workaround I&apos;m now starting a second ActorSystem, but it seems to have issues communicating with Spark&apos;s ActorSystem.&lt;/p&gt;</comment>
                            <comment id="14362925" author="jerryshao" created="Mon, 16 Mar 2015 08:23:51 +0000"  >&lt;p&gt;OK, got it. So are you going to fix this issue or just report a bug here?&lt;/p&gt;</comment>
                            <comment id="14362928" author="msoutier" created="Mon, 16 Mar 2015 08:28:04 +0000"  >&lt;p&gt;I&apos;m just reporting the bug. As you said, the code explicitly removes &quot;spark.driver.host&quot; and &quot;spark.driver.port&quot; when recovering from a checkpoint, so I first would like to understand why that is.&lt;/p&gt;

</comment>
                            <comment id="14362932" author="jerryshao" created="Mon, 16 Mar 2015 08:37:33 +0000"  >&lt;p&gt;As I said, normally user will not set these two configurations &lt;tt&gt;spark.driver.host&lt;/tt&gt; and &lt;tt&gt;spark.driver.port&lt;/tt&gt; to let SparkContext to set. SparkContext will internally choose driver&apos;s host name and random port for these two configurations, the reason to do so is to avoid port contention whey multiple driver running on the same machine. &lt;/p&gt;

&lt;p&gt;Spark Streaming takes this assumption to remove these two configurations when recovering from checkpoint file, to avoid port contention. Yes this is a bug for usage scenarios like yours.&lt;/p&gt;</comment>
                            <comment id="14363047" author="msoutier" created="Mon, 16 Mar 2015 10:42:17 +0000"  >&lt;p&gt;Yeah but if the user doesn&apos;t set the port, why remove it? When Spark deserializes the checkpoint, the port shouldn&apos;t be set by default, right?&lt;/p&gt;</comment>
                            <comment id="14364254" author="jerryshao" created="Tue, 17 Mar 2015 00:06:41 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=msoutier&quot; class=&quot;user-hover&quot; rel=&quot;msoutier&quot;&gt;msoutier&lt;/a&gt;, the reason to remove these two configurations, especially &quot;spark.driver.port&quot; is that: SparkContext itself will randomly choose a port and set it to configuration even user didn&apos;t set it, next time after application is recovered, previous configuration &quot;spark.driver.port&quot; need to remove and let SparkContext itself to randomly choose again and set into the SparkConf. So that&apos;s why checkpoint need to remove these two configurations.&lt;/p&gt;</comment>
                            <comment id="14364574" author="apachespark" created="Tue, 17 Mar 2015 05:05:26 +0000"  >&lt;p&gt;User &apos;jerryshao&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/5060&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/5060&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14364713" author="msoutier" created="Tue, 17 Mar 2015 07:34:54 +0000"  >&lt;p&gt;Got it, thanks. In my tests it was never set automatically, so this must be set at some later point.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26ol3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>