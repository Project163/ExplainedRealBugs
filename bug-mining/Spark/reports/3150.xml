<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:38:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-12313] getPartitionsByFilter doesnt handle predicates on all / multiple Partition Columns</title>
                <link>https://issues.apache.org/jira/browse/SPARK-12313</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;When enabled spark.sql.hive.metastorePartitionPruning, the getPartitionsByFilter is used&lt;/p&gt;

&lt;p&gt;For a table partitioned by p1 and p2, when triggered hc.sql(&quot;select col.... from tabl1 where p1=&apos;p1V&apos; and p2= &apos;p2V&apos; &quot;)&lt;/p&gt;

&lt;p&gt;The HiveShim identifies the Predicates and ConvertFilters returns p1=&apos;p1V&apos; and col2= &apos;p2V&apos; . The same is passed to the getPartitionsByFilter method as filter string.&lt;/p&gt;

&lt;p&gt;On these cases the partitions are not returned from Hive&apos;s getPartitionsByFilter method. As a result, for the sql, the number of returned rows is always zero. &lt;/p&gt;

&lt;p&gt;However, filter on a single column always works. Probalbly  it doesn&apos;t come through this route&lt;/p&gt;

&lt;p&gt;I&apos;m using Oracle for Metstore V0.13.1&lt;/p&gt;</description>
                <environment></environment>
        <key id="12921533">SPARK-12313</key>
            <summary>getPartitionsByFilter doesnt handle predicates on all / multiple Partition Columns</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="4">Incomplete</resolution>
                                        <assignee username="harshg">Harsh Gupta</assignee>
                                    <reporter username="Gobinathan SP">Gobinathan SP</reporter>
                        <labels>
                            <label>bulk-closed</label>
                    </labels>
                <created>Sun, 13 Dec 2015 22:39:14 +0000</created>
                <updated>Tue, 21 May 2019 04:32:56 +0000</updated>
                            <resolved>Tue, 21 May 2019 04:32:56 +0000</resolved>
                                    <version>1.5.1</version>
                                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15159642" author="apachespark" created="Tue, 23 Feb 2016 21:03:04 +0000"  >&lt;p&gt;User &apos;davies&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/11328&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11328&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15169421" author="davies" created="Fri, 26 Feb 2016 17:58:19 +0000"  >&lt;p&gt;Issue resolved by pull request 11328&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/11328&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11328&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15172492" author="irashid" created="Mon, 29 Feb 2016 19:55:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davies&quot; class=&quot;user-hover&quot; rel=&quot;davies&quot;&gt;davies&lt;/a&gt; I am pretty sure the change here was actually for &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-13213&quot; title=&quot;BroadcastNestedLoopJoin is very slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-13213&quot;&gt;&lt;del&gt;SPARK-13213&lt;/del&gt;&lt;/a&gt;, right?  Looks like a little typo in the commit msg.  I am reopening this ticket and  closing the other one, but please update if I&apos;m wrong.&lt;/p&gt;</comment>
                            <comment id="15172506" author="harshg" created="Mon, 29 Feb 2016 20:05:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=irashid&quot; class=&quot;user-hover&quot; rel=&quot;irashid&quot;&gt;irashid&lt;/a&gt; I concur .. this issue is different from what the changes have been pushed. Can I take this up ?&lt;/p&gt;</comment>
                            <comment id="15182221" author="harshg" created="Sun, 6 Mar 2016 16:35:37 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lian+cheng&quot; class=&quot;user-hover&quot; rel=&quot;lian cheng&quot;&gt;lian cheng&lt;/a&gt; . Should this issue occur even after your PR &lt;a href=&quot;https://github.com/apache/spark/pull/7492&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/7492&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="15185139" author="irashid" created="Tue, 8 Mar 2016 16:03:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=harshg&quot; class=&quot;user-hover&quot; rel=&quot;harshg&quot;&gt;harshg&lt;/a&gt;  I think the issue here is just from using Oracle metastore with lots of partitions &amp;#8211; that metastore has a limitation on the number of partitions with &lt;tt&gt;getPartitionsByFilter&lt;/tt&gt;.  That said, I&apos;m not sure what the right workaround is ...&lt;/p&gt;</comment>
                            <comment id="15187623" author="irashid" created="Wed, 9 Mar 2016 18:41:27 +0000"  >&lt;p&gt;There is another metastore api, &lt;tt&gt;getPartitions(..., partitionSpec)&lt;/tt&gt;, that we could use instead.  I haven&apos;t tested this out, but I hear that it works better when there are lots of partitions, and furthermore that is what hive itself uses more often.  However, it doesn&apos;t support &amp;lt; or &amp;gt; constraints, as near as I can tell, so we can&apos;t always use.&lt;/p&gt;

&lt;p&gt;I&apos;m just going to submit a PR that demonstrates how we would do this &amp;#8211; however I&apos;m really uncertain whether this is really the right thing to do here, its more just a proof of concept to gather input.&lt;/p&gt;</comment>
                            <comment id="15187645" author="apachespark" created="Wed, 9 Mar 2016 18:49:04 +0000"  >&lt;p&gt;User &apos;squito&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/11607&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11607&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pu2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>