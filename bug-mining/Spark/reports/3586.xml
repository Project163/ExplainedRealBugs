<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:43:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-15451] Spark PR builder should fail if code doesn&apos;t compile against JDK 7</title>
                <link>https://issues.apache.org/jira/browse/SPARK-15451</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;We need to compile certain parts of the build using jdk8, so that we test things like lambdas. But when possible, we should either compile using jdk7, or provide jdk7&apos;s rt.jar to javac. Otherwise it&apos;s way too easy to slip in jdk8-specific library calls.&lt;/p&gt;

&lt;p&gt;I&apos;ll take a look at fixing the maven / sbt files, but I&apos;m not sure how to update the PR builders since this will most probably require at least a new env variable (to say where jdk7 is).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12971602">SPARK-15451</key>
            <summary>Spark PR builder should fail if code doesn&apos;t compile against JDK 7</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vanzin">Marcelo Masiero Vanzin</assignee>
                                    <reporter username="vanzin">Marcelo Masiero Vanzin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 May 2016 18:28:59 +0000</created>
                <updated>Tue, 31 May 2016 23:55:41 +0000</updated>
                            <resolved>Tue, 31 May 2016 23:55:41 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Build</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15293951" author="luciano resende" created="Fri, 20 May 2016 18:43:37 +0000"  >&lt;p&gt;Should we actually have some sort of schedule builds (e.g. nightly builds) that can be used for these purposes (e.g. confirm JDK 7 still works, docker integration tests, etc) ? Otherwise, if we build each PR with both JDK 7 and JDK 8 it might be troublesome in terms of time.&lt;/p&gt;</comment>
                            <comment id="15293958" author="vanzin" created="Fri, 20 May 2016 18:49:21 +0000"  >&lt;p&gt;I&apos;m not suggesting building twice. I&apos;m suggesting building whatever needs to be compatible with jdk7 using jdk7 (or at least using jdk7&apos;s rt.jar).&lt;/p&gt;</comment>
                            <comment id="15294370" author="srowen" created="Fri, 20 May 2016 22:15:47 +0000"  >&lt;p&gt;That&apos;s fine with me, but so is just going ahead and requiring Java 8. That may be upon us if there&apos;s no objection to requiring it in 2.1.0, which means master would soon require it. Just saying don&apos;t go to a lot of trouble.&lt;/p&gt;</comment>
                            <comment id="15294426" author="vanzin" created="Fri, 20 May 2016 22:43:51 +0000"  >&lt;p&gt;I think there&apos;s still some value even if 2.1.0 switches to jdk8; it would help making sure backports don&apos;t break things, for example.&lt;/p&gt;

&lt;p&gt;I&apos;ll see whether there&apos;s something simple that we can do.&lt;/p&gt;</comment>
                            <comment id="15297544" author="apachespark" created="Tue, 24 May 2016 02:22:03 +0000"  >&lt;p&gt;User &apos;vanzin&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/13272&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/13272&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15308509" author="vanzin" created="Tue, 31 May 2016 20:05:29 +0000"  >&lt;p&gt;BTW, another thing this avoids is runtime errors like the following I just ran into:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: java.util.concurrent.ConcurrentHashMap.keySet()Ljava/util/concurrent/ConcurrentHashMap$KeySetView;
        at org.apache.spark.rpc.netty.Dispatcher.stop(Dispatcher.scala:176)
        at org.apache.spark.rpc.netty.NettyRpcEnv.cleanup(NettyRpcEnv.scala:291)
        at org.apache.spark.rpc.netty.NettyRpcEnv.shutdown(NettyRpcEnv.scala:269)
        at org.apache.spark.SparkEnv.stop(SparkEnv.scala:91)
        at org.apache.spark.SparkContext$$anonfun$stop$11.apply$mcV$sp(SparkContext.scala:1787)
        at org.apache.spark.util.Utils$.tryLogNonFatalError(Utils.scala:1219)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That&apos;s because when compiling against jdk8, the code links against a new interface that was added in jdk8 and doesn&apos;t exist in jdk7, even though the same code compiles fine against both versions. Compiling against the jdk7 libraries avoids the issue.&lt;/p&gt;</comment>
                            <comment id="15308703" author="srowen" created="Tue, 31 May 2016 21:48:54 +0000"  >&lt;p&gt;Yeah this has come up a few times in Spark &amp;#8211; there&apos;s a duplicate that I won&apos;t even bother to find and link here. Classic, weird cross compilation issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yag7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>