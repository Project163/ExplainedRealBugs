<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:17:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-3647] Shaded Guava patch causes access issues with package private classes</title>
                <link>https://issues.apache.org/jira/browse/SPARK-3647</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;The patch that introduced shading to Guava (&lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-2848&quot; title=&quot;Shade Guava in Spark deliverables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-2848&quot;&gt;&lt;del&gt;SPARK-2848&lt;/del&gt;&lt;/a&gt;) tried to maintain backwards compatibility in the Java API by not relocating the &quot;Optional&quot; class. That causes problems when that class references package private members in the Absent and Present classes, which are now in a different package:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; java.lang.IllegalAccessError: tried to access class org.spark-project.guava.common.base.Present from class com.google.common.base.Optional
	at com.google.common.base.Optional.of(Optional.java:86)
	at org.apache.spark.api.java.JavaUtils$.optionToOptional(JavaUtils.scala:25)
	at org.apache.spark.api.java.JavaSparkContext.getSparkHome(JavaSparkContext.scala:542)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12743329">SPARK-3647</key>
            <summary>Shaded Guava patch causes access issues with package private classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vanzin">Marcelo Masiero Vanzin</assignee>
                                    <reporter username="vanzin">Marcelo Masiero Vanzin</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Sep 2014 20:50:24 +0000</created>
                <updated>Tue, 11 Nov 2014 08:11:51 +0000</updated>
                            <resolved>Tue, 23 Sep 2014 20:42:46 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14143796" author="vanzin" created="Mon, 22 Sep 2014 20:51:39 +0000"  >&lt;p&gt;There are two options I see here:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;extend the hack to also not relocate the affected classes (Absent and Present should  be enough)&lt;/li&gt;
	&lt;li&gt;fork some code from Guava and modify it to avoid the issue.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ll go on a limb and say the first option is easier.&lt;/p&gt;</comment>
                            <comment id="14143968" author="apachespark" created="Mon, 22 Sep 2014 22:40:26 +0000"  >&lt;p&gt;User &apos;vanzin&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/2496&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/2496&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14145401" author="pwendell" created="Tue, 23 Sep 2014 20:42:46 +0000"  >&lt;p&gt;Fixed by Marcelo in this patch:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/spark/pull/2496&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/2496&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14206081" author="hammer" created="Tue, 11 Nov 2014 07:45:51 +0000"  >&lt;p&gt;Should this issue have a Fix version set?&lt;/p&gt;</comment>
                            <comment id="14206112" author="aash" created="Tue, 11 Nov 2014 08:11:42 +0000"  >&lt;p&gt;Based on poking at the git repo below I&apos;m marking with a fix version of 1.2.0 (the next release on branch-1.2)&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;aash@aash-mbp ~/git/spark$ git log origin/master | grep SPARK-3647
    [SPARK-3647] Add more exceptions to Guava relocation.
    Closes #2496 from vanzin/SPARK-3647 and squashes the following commits:
    84f58d7 [Marcelo Vanzin] [SPARK-3647] Add more exceptions to Guava relocation.
aash@aash-mbp ~/git/spark$ git log origin/branch-1.0 | grep SPARK-3647
aash@aash-mbp ~/git/spark$ git log origin/branch-1.1 | grep SPARK-3647
aash@aash-mbp ~/git/spark$ git log origin/branch-1.2 | grep SPARK-3647
    [SPARK-3647] Add more exceptions to Guava relocation.
    Closes #2496 from vanzin/SPARK-3647 and squashes the following commits:
    84f58d7 [Marcelo Vanzin] [SPARK-3647] Add more exceptions to Guava relocation.
aash@aash-mbp ~/git/spark$
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20cyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327369">1.2.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>