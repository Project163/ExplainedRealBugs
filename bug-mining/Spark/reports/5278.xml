<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:56:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-22437] jdbc write fails to set default mode</title>
                <link>https://issues.apache.org/jira/browse/SPARK-22437</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;With this bit of code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        df.write.jdbc(jdbc_url, table)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We see this error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
09:54:22 2017-11-03 09:54:19,985 INFO       File &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/spark220/python/lib/pyspark.zip/pyspark/sql/readwriter.py&quot;&lt;/span&gt;, line 820, in jdbc
09:54:22 2017-11-03 09:54:19,985 INFO       File &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/spark220/python/lib/py4j-0.10.4-src.zip/py4j/java_gateway.py&quot;&lt;/span&gt;, line 1133, in __call__
09:54:22 2017-11-03 09:54:19,986 INFO       File &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/spark220/python/lib/pyspark.zip/pyspark/sql/utils.py&quot;&lt;/span&gt;, line 63, in deco
09:54:22 2017-11-03 09:54:19,986 INFO       File &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/spark220/python/lib/py4j-0.10.4-src.zip/py4j/protocol.py&quot;&lt;/span&gt;, line 319, in get_return_value
09:54:22 2017-11-03 09:54:19,987 INFO     py4j.protocol.Py4JJavaError: An error occurred &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; calling o106.jdbc.
09:54:22 2017-11-03 09:54:19,987 INFO     : scala.MatchError: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
09:54:22 2017-11-03 09:54:19,987 INFO     	at org.apache.spark.sql.execution.datasources.jdbc.JdbcRelationProvider.createRelation(JdbcRelationProvider.scala:62)
09:54:22 2017-11-03 09:54:19,987 INFO     	at org.apache.spark.sql.execution.datasources.DataSource.write(DataSource.scala:472)
09:54:22 2017-11-03 09:54:19,987 INFO     	at org.apache.spark.sql.execution.datasources.SaveIntoDataSourceCommand.run(SaveIntoDataSourceCommand.scala:48)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This seems to be that &quot;mode&quot; isn&apos;t correctly picking up the &quot;error&quot; default as listed in &lt;a href=&quot;https://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.DataFrame&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.DataFrame&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Note that if it was erroring because of existing data it&apos;d say &quot;SaveMode: ErrorIfExists.&quot; as seen in ./sql/core/src/main/scala/org/apache/spark/sql/execution/datasources/jdbc/JdbcRelationProvider.scala).&lt;/p&gt;

&lt;p&gt;Changing our code to this worked:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        df.write.jdbc(jdbc_url, table, mode=&lt;span class=&quot;code-quote&quot;&gt;&apos;append&apos;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;python3&lt;/p&gt;</environment>
        <key id="13115892">SPARK-22437</key>
            <summary>jdbc write fails to set default mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgaido">Marco Gaido</assignee>
                                    <reporter username="abridgett">Adrian Bridgett</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Nov 2017 11:25:26 +0000</created>
                <updated>Mon, 12 Dec 2022 18:10:35 +0000</updated>
                            <resolved>Sat, 4 Nov 2017 08:03:05 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Java API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16237716" author="apachespark" created="Fri, 3 Nov 2017 15:10:04 +0000"  >&lt;p&gt;User &apos;mgaido91&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/19654&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/19654&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16237733" author="abridgett" created="Fri, 3 Nov 2017 15:15:57 +0000"  >&lt;p&gt;good grief that was fast!&lt;/p&gt;</comment>
                            <comment id="16238839" author="gurwls223" created="Sat, 4 Nov 2017 08:03:05 +0000"  >&lt;p&gt;Issue resolved by pull request 19654&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/19654&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/19654&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13145124">SPARK-23684</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mcvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>