<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:06:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-28375] Enforce idempotence on the PullupCorrelatedPredicates optimizer rule</title>
                <link>https://issues.apache.org/jira/browse/SPARK-28375</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;The current PullupCorrelatedPredicates implementation can accidentally remove predicates for multiple runs.&lt;/p&gt;

&lt;p&gt;For example, for the following logical plan, one more optimizer run can remove the predicate in the SubqueryExpresssion.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# Optimized
Project [a#0]
+- Filter a#0 IN (list#4 [(b#1 &amp;lt; d#3)])
   :  +- Project [c#2, d#3]
   :     +- LocalRelation &amp;lt;empty&amp;gt;, [c#2, d#3]
   +- LocalRelation &amp;lt;empty&amp;gt;, [a#0, b#1]

# &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt; optimized
Project [a#0]
+- Filter a#0 IN (list#4 [])
   :  +- Project [c#2, d#3]
   :     +- LocalRelation &amp;lt;empty&amp;gt;, [c#2, d#3]
   +- LocalRelation &amp;lt;empty&amp;gt;, [a#0, b#1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13244720">SPARK-28375</key>
            <summary>Enforce idempotence on the PullupCorrelatedPredicates optimizer rule</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkbiswal">Dilip Biswal</assignee>
                                    <reporter username="manifoldQAQ">Yesheng Ma</reporter>
                        <labels>
                            <label>correctness</label>
                    </labels>
                <created>Fri, 12 Jul 2019 22:50:53 +0000</created>
                <updated>Mon, 2 Mar 2020 21:31:18 +0000</updated>
                            <resolved>Tue, 30 Jul 2019 23:31:39 +0000</resolved>
                                    <version>2.2.0</version>
                    <version>2.3.0</version>
                    <version>2.4.0</version>
                    <version>3.0.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16884832" author="joshrosen" created="Mon, 15 Jul 2019 03:41:40 +0000"  >&lt;p&gt;Adding the &apos;correctness&apos; label so we remember to backport this fix to 2.4.x.&lt;/p&gt;</comment>
                            <comment id="16885450" author="smilegator" created="Mon, 15 Jul 2019 17:55:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joshrosen&quot; class=&quot;user-hover&quot; rel=&quot;joshrosen&quot;&gt;joshrosen&lt;/a&gt; The issue is only triggered if we run the rule more than once. Is it still a correctness issue?&lt;/p&gt;</comment>
                            <comment id="16885531" author="joshrosen" created="Mon, 15 Jul 2019 19:09:51 +0000"  >&lt;p&gt;I&apos;m not sure; is it possible to trigger double-optimization using Spark&apos;s public APIs? Or only via relying on private / internal APIs?&lt;/p&gt;</comment>
                            <comment id="16896617" author="smilegator" created="Tue, 30 Jul 2019 23:31:26 +0000"  >&lt;p&gt;This is possible, if users add the rule into postHocOptimizationBatches&lt;/p&gt;</comment>
                            <comment id="17023475" author="dongjoon" created="Sat, 25 Jan 2020 09:35:36 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joshrosen&quot; class=&quot;user-hover&quot; rel=&quot;joshrosen&quot;&gt;joshrosen&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smilegator&quot; class=&quot;user-hover&quot; rel=&quot;smilegator&quot;&gt;smilegator&lt;/a&gt;.&lt;br/&gt;
This is still has `correctness`. Do we need to backport this?&lt;/p&gt;</comment>
                            <comment id="17023695" author="maropu" created="Sun, 26 Jan 2020 00:23:25 +0000"  >&lt;p&gt;IMO PullupCorrelatedPredicates is in the catalyst package and the object seems to be internal. If so, I think its less worth backpoiting this to branch-2.4.&lt;/p&gt;</comment>
                            <comment id="17023700" author="dongjoon" created="Sun, 26 Jan 2020 01:25:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maropu&quot; class=&quot;user-hover&quot; rel=&quot;maropu&quot;&gt;maropu&lt;/a&gt;. So, this doesn&apos;t have any effect to user sides?&lt;/p&gt;</comment>
                            <comment id="17023701" author="maropu" created="Sun, 26 Jan 2020 01:28:31 +0000"  >&lt;p&gt;The same comment here, too: &lt;a href=&quot;https://github.com/apache/spark/pull/26173#issuecomment-578458400&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/26173#issuecomment-578458400&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17049667" author="dongjoon" created="Mon, 2 Mar 2020 21:31:18 +0000"  >&lt;p&gt;Although we don&apos;t backport this, I updated this issue type as `Bug` and updated the affected version due to `postHocOptimizationBatches`.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13247385">SPARK-28529</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04mug:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>