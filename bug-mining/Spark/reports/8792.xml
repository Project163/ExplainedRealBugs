<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:31:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-33782] Place spark.files, spark.jars and spark.files under the current working directory on the driver in K8S cluster mode</title>
                <link>https://issues.apache.org/jira/browse/SPARK-33782</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;In Yarn cluster modes, the passed files are able to be accessed in the current working directory. Looks like this is not the case in Kubernates cluset mode.&lt;/p&gt;

&lt;p&gt;By doing this, users can, for example, leverage PEX to manage Python dependences in Apache Spark:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
pex pyspark==3.0.1 pyarrow==0.15.1 pandas==0.25.3 -o myarchive.pex
PYSPARK_PYTHON=./myarchive.pex spark-submit --files myarchive.pex
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;See also &lt;a href=&quot;https://github.com/apache/spark/pull/30735/files#r540935585&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/30735/files#r540935585&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13345939">SPARK-33782</key>
            <summary>Place spark.files, spark.jars and spark.files under the current working directory on the driver in K8S cluster mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pralabhkumar">Pralabh Kumar</assignee>
                                    <reporter username="gurwls223">Hyukjin Kwon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Dec 2020 20:01:58 +0000</created>
                <updated>Sun, 23 Jul 2023 20:55:00 +0000</updated>
                            <resolved>Tue, 13 Dec 2022 05:19:03 +0000</resolved>
                                    <version>3.2.0</version>
                                    <fixVersion>3.4.0</fixVersion>
                                    <component>Kubernetes</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="17249485" author="gurwls223" created="Tue, 15 Dec 2020 05:21:29 +0000"  >&lt;p&gt;BTW, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tgraves&quot; class=&quot;user-hover&quot; rel=&quot;tgraves&quot;&gt;tgraves&lt;/a&gt;, I think I would likely take a look for this if no one takes a look but it will happen a bit later in the middle of Spark 3.2 dev.&lt;/p&gt;</comment>
                            <comment id="17414624" author="holdenk" created="Mon, 13 Sep 2021 22:27:01 +0000"  >&lt;p&gt;I think this missed the window for Spark 3.2, but I&apos;m happy to pick this up for 3.3&lt;/p&gt;</comment>
                            <comment id="17414645" author="gurwls223" created="Tue, 14 Sep 2021 00:10:58 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=holden&quot; class=&quot;user-hover&quot; rel=&quot;holden&quot;&gt;holden&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="17561109" author="douglasawh" created="Thu, 30 Jun 2022 16:31:28 +0000"  >&lt;p&gt;It looks like 3.3.0 is out. What is the status of this?&lt;/p&gt;</comment>
                            <comment id="17574314" author="pralabhkumar" created="Tue, 2 Aug 2022 16:22:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hyukjin.kwon&quot; class=&quot;user-hover&quot; rel=&quot;hyukjin.kwon&quot;&gt;hyukjin.kwon&lt;/a&gt; I would like to work on this . Please let me know if its ok&#160;&lt;/p&gt;</comment>
                            <comment id="17574448" author="gurwls223" created="Wed, 3 Aug 2022 02:17:32 +0000"  >&lt;p&gt;Please go for it!&lt;/p&gt;</comment>
                            <comment id="17575552" author="apachespark" created="Fri, 5 Aug 2022 04:17:18 +0000"  >&lt;p&gt;User &apos;pralabhkumar&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/37417&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/37417&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17575553" author="apachespark" created="Fri, 5 Aug 2022 04:18:07 +0000"  >&lt;p&gt;User &apos;pralabhkumar&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/37417&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/37417&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17603426" author="pralabhkumar" created="Tue, 13 Sep 2022 07:35:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dongjoon&quot; class=&quot;user-hover&quot; rel=&quot;dongjoon&quot;&gt;dongjoon&lt;/a&gt; Please review the PR .&#160;&lt;/p&gt;</comment>
                            <comment id="17615997" author="pralabhkumar" created="Tue, 11 Oct 2022 17:48:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hyukjin.kwon&quot; class=&quot;user-hover&quot; rel=&quot;hyukjin.kwon&quot;&gt;hyukjin.kwon&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Can u please help to review the PR . It would be of great help .&#160;&lt;/p&gt;</comment>
                            <comment id="17626417" author="pralabhkumar" created="Mon, 31 Oct 2022 06:20:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hyukjin.kwon&quot; class=&quot;user-hover&quot; rel=&quot;hyukjin.kwon&quot;&gt;hyukjin.kwon&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dongjoon&quot; class=&quot;user-hover&quot; rel=&quot;dongjoon&quot;&gt;dongjoon&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Please let me know, if this Jira is relevant . I have already created the PR and its been already reviewed by couple of PMC . Please help to get it reviewed if the Jira is relevant otherwise i&apos;ll close the PR&lt;/p&gt;</comment>
                            <comment id="17627743" author="JIRAUSER288949" created="Wed, 2 Nov 2022 14:33:45 +0000"  >&lt;p&gt;Will this fix repair the &lt;tt&gt;--jars&lt;/tt&gt; flag and will JARs be added automatically to the driver and executor class path when using &lt;tt&gt;spark.kubernetes.file.upload.path&lt;/tt&gt; / &lt;tt&gt;&lt;a href=&quot;file://&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://&lt;/a&gt;&lt;/tt&gt; URIs?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://spark.apache.org/docs/latest/running-on-kubernetes.html#dependency-management&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://spark.apache.org/docs/latest/running-on-kubernetes.html#dependency-management&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://spark.apache.org/docs/3.2.0/submitting-applications.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://spark.apache.org/docs/3.2.0/submitting-applications.html&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When using spark-submit, the application jar along with any jars included with the --jars option will be automatically transferred to the cluster. URLs supplied after --jars must be separated by commas. That list is included in the driver and executor classpaths. &lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="17742006" author="JIRAUSER296450" created="Tue, 11 Jul 2023 13:32:48 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pralabhkumar&quot; class=&quot;user-hover&quot; rel=&quot;pralabhkumar&quot;&gt;pralabhkumar&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;The latest update in the SparkSubmit.scala is causing the NoSuchFileException.&lt;br/&gt;
The below mentioned jar is present at the said location /opt/spark/work-dir/, but the Files.copy statement in the SparkSubmit.scala is causing the issue.&lt;br/&gt;
Can you please help to check what could be possible cause?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Files &#160;local:&lt;span class=&quot;code-comment&quot;&gt;///opt/spark/work-dir/sample.jar from /opt/spark/work-dir/sample.jar to /opt/spark/work-dir/./sample.jar
&lt;/span&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.nio.file.NoSuchFileException: /opt/spark/work-dir/sample.jar
&#160; &#160; &#160; &#160; at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
&#160; &#160; &#160; &#160; at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
&#160; &#160; &#160; &#160; at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
&#160; &#160; &#160; &#160; at sun.nio.fs.UnixCopyFile.copy(UnixCopyFile.java:526)
&#160; &#160; &#160; &#160; at sun.nio.fs.UnixFileSystemProvider.copy(UnixFileSystemProvider.java:253)
&#160; &#160; &#160; &#160; at java.nio.file.Files.copy(Files.java:1274)
&#160; &#160; &#160; &#160; at org.apache.spark.deploy.SparkSubmit.$anonfun$prepareSubmitEnvironment$14(SparkSubmit.scala:437)
&#160; &#160; &#160; &#160; at scala.collection.TraversableLike.$anonfun$map$1(TraversableLike.scala:286)
&#160; &#160; &#160; &#160; at scala.collection.mutable.ResizableArray.foreach(ResizableArray.scala:62)
&#160; &#160; &#160; &#160; at scala.collection.mutable.ResizableArray.foreach$(ResizableArray.scala:55)
&#160; &#160; &#160; &#160; at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:49)
&#160; &#160; &#160; &#160; at scala.collection.TraversableLike.map(TraversableLike.scala:286)
&#160; &#160; &#160; &#160; at scala.collection.TraversableLike.map$(TraversableLike.scala:279)
&#160; &#160; &#160; &#160; at scala.collection.AbstractTraversable.map(Traversable.scala:108)
&#160; &#160; &#160; &#160; at org.apache.spark.deploy.SparkSubmit.downloadResourcesToCurrentDirectory$1(SparkSubmit.scala:424)
&#160; &#160; &#160; &#160; at org.apache.spark.deploy.SparkSubmit.$anonfun$prepareSubmitEnvironment$17(SparkSubmit.scala:449)
&#160; &#160; &#160; &#160; at scala.Option.map(Option.scala:230)
&#160; &#160; &#160; &#160; at org.apache.spark.deploy.SparkSubmit.prepareSubmitEnvironment(SparkSubmit.scala:449)
&#160; &#160; &#160; &#160; at org.apache.spark.deploy.SparkSubmit.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:955)
&#160; &#160; &#160; &#160; at org.apache.spark.deploy.SparkSubmit.doRunMain$1(SparkSubmit.scala:192)
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17746127" author="JIRAUSER301476" created="Sun, 23 Jul 2023 20:55:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pratik.malani&quot; class=&quot;user-hover&quot; rel=&quot;pratik.malani&quot;&gt;pratik.malani&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I have a similar problem, and thus a question: Why doesn&apos;t your destination path contain the randomly named directory? it should be created inside the `KubernetesUtils.uploadFileUri` method.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13305276">SPARK-31726</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13536579">SPARK-43540</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0li00:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12351465">3.4.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>