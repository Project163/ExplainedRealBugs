<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:13:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-1661] the result of querying table created with RegexSerDe is all null</title>
                <link>https://issues.apache.org/jira/browse/SPARK-1661</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>
&lt;p&gt;the result of querying table created with RegexSerDe is all null&lt;/p&gt;







&lt;p&gt;when i query the table created with org.apache.hadoop.hive.contrib.serde2.RegexSerDe by shark,the columns in the result is all null&lt;br/&gt;
select * from access_log where logdate=&apos;2014-04-28&apos; limit 10;&lt;br/&gt;
OK&lt;br/&gt;
ip      host    time    method  request protocol        status  size    referer cookieuid       requesttime     session httpxrequestedwith      agent   upstreamresponsetime    logdate&lt;br/&gt;
NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    2014-04-28&lt;br/&gt;
NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    2014-04-28&lt;br/&gt;
NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    2014-04-28&lt;br/&gt;
NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    2014-04-28&lt;br/&gt;
NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    2014-04-28&lt;br/&gt;
NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    2014-04-28&lt;br/&gt;
NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    2014-04-28&lt;br/&gt;
NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    2014-04-28&lt;br/&gt;
NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    2014-04-28&lt;br/&gt;
NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    2014-04-28&lt;br/&gt;
Time taken: 4.362 seconds&lt;/p&gt;

&lt;p&gt;my regex is&lt;br/&gt;
 ^(&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;b&gt;) &lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;/b&gt; (&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;b&gt;) \\[(&lt;span class=&quot;error&quot;&gt;&amp;#91;^\]&amp;#93;&lt;/span&gt;&lt;/b&gt;)&lt;br class=&quot;atl-forced-newline&quot; /&gt;] \&quot;(&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;b&gt;) (&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;/b&gt;) (&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;b&gt;)\&quot; (&lt;del&gt;|&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;/b&gt;) (&lt;/del&gt;|&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;b&gt;) \&quot;(\.&amp;#43;&amp;#63;|&lt;del&gt;)\&quot; (&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;/b&gt;) (&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;b&gt;) (&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;/b&gt;) \&quot;(\.&amp;#43;&amp;#63;|&lt;/del&gt;)\&quot; \&quot;(\.&amp;#43;&amp;#63;|&lt;del&gt;)\&quot; \&quot;(\.&amp;#43;&amp;#63;|&lt;/del&gt;)\&quot;$&lt;/p&gt;

&lt;p&gt;nginx log example:&lt;br/&gt;
42.49.44.61 - www.xxxx.comm &lt;span class=&quot;error&quot;&gt;&amp;#91;20/Apr/2014:23:58:03 +0800&amp;#93;&lt;/span&gt; &quot;GET /xxxxx/296837 HTTP/1.1&quot; 200 3871 &quot;http://www.xxxxx.com/xxxxx/296837&quot; - 0.015 63hbb4om2cvtjs0f7d969n1uf4 &quot;com.xxxxx.browser&quot; &quot;Mozilla/5.0 (Linux; U; xxxxx 4.1.2; zh-cn; ZTE N919 Build/JZO54K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30&quot; &quot;0.015&quot;&lt;br/&gt;
111.121.176.149 - www.xxxx.comm &lt;span class=&quot;error&quot;&gt;&amp;#91;20/Apr/2014:23:58:03 +0800&amp;#93;&lt;/span&gt; &quot;GET /xxxxx/264904 HTTP/1.1&quot; 200 3827 &quot;http://m.baidu.com/s?from=2001a&amp;amp;bd_page_type=1&amp;amp;word=%E8%8E%B2%E8%97%95%E6%80%8E%E6%A0%B7%E5%8D%A4%E6%89%8D%E5%A5%BD%E5%90%83&quot; - 0.015 ft7tr4b06b23ub9lnugdf4gcq3 &quot;-&quot; &quot;Mozilla/5.0 (Linux; U; xxxxx 4.1.2; zh-CN; 8190Q Build/JZO54K) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 UCBrowser/9.5.2.394 U3/0.8.0 Mobile Safari/533.1&quot; &quot;0.015&quot;&lt;br/&gt;
222.209.97.169 - www.xxxx.comm &lt;span class=&quot;error&quot;&gt;&amp;#91;20/Apr/2014:23:58:04 +0800&amp;#93;&lt;/span&gt; &quot;GET / HTTP/1.1&quot; 200 3188 &quot;http://m.idea123.cn/food.html&quot; - 0.014 - &quot;-&quot; &quot;Lenovo S890/S100 Linux/3.0.13 xxxxx/4.0.3 Release/12.12.2011 Browser/AppleWebKit534.30 Profile/MIDP-2.0 Configuration/CLDC-1.1 Mobile Safari/534.30&quot; &quot;0.014&quot;&lt;br/&gt;
59.36.84.241 - www.xxxx.comm &lt;span class=&quot;error&quot;&gt;&amp;#91;20/Apr/2014:23:58:05 +0800&amp;#93;&lt;/span&gt; &quot;GET /app/xxxxx/topic/view.php?id=138555 HTTP/1.1&quot; 200 3151 &quot;&lt;del&gt;&quot; - 0.009 - &quot;&lt;/del&gt;&quot; &quot;Mozilla/5.0 (Linux; U; xxxxx 2.3.7; zh-cn; TD500 Build/GWK74) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30&quot; &quot;0.009&quot;&lt;br/&gt;
113.242.39.81 - www.xxxx.comm &lt;span class=&quot;error&quot;&gt;&amp;#91;20/Apr/2014:23:58:07 +0800&amp;#93;&lt;/span&gt; &quot;GET /xxxxx/419691 HTTP/1.1&quot; 200 4174 &quot;http://www.xxxx.comm/xxxxx/all/308?p=3&quot; - 0.013 1n579ukg1gho7i7mr3q8ic8j97 &quot;-&quot; &quot;Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_5_7; en-us) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Safari/530.17; 360browser(securitypay,securityinstalled); 360(xxxxx,uppayplugin); 360 Aphone Browser (5.3.1)&quot; &quot;0.013&quot;&lt;/p&gt;

&lt;p&gt;Very strange, I execute a query in Hive is normal. I really do not understand. . .  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
OK&lt;br/&gt;
ip      host    time    method  request protocol        status  size    referer cookieuid       requesttime     session httpxrequestedwith      agent   upstreamresponsetime    logdate&lt;br/&gt;
14.151.40.117   www.xxxx.com  10/Apr/2014:23:58:01 +0800      POST    /xxxx.jsp?appid=4&amp;amp;appkey=573bbd2fbd1a6bac082ff4727d952ba3&amp;amp;format=json&amp;amp;sessionid=1397145480&amp;amp;vc=24&amp;amp;vn=v3.5.1&amp;amp;loguid=&amp;amp;deviceid=0f607264fc6318a92b9e13c65db7cd3c%7C02C105A6-6DC8-43D5-879E-46AD603AC34E%7C2096145A-114C-4B6E-BE91-1AC740D9BD21&amp;amp;channel=appstore&amp;amp;method=Update.forceUpdate      HTTP/1.1        200     88      -  0.052    -       -       xxxxx xxxxx iPhone Client API 0.005   2014-04-11&lt;br/&gt;
112.91.89.149   www.xxxx.com  10/Apr/2014:23:58:02 +0800      POST    /xxxx.jsp?appid=2&amp;amp;appkey=9ef269eec4f7a9d07c73952d06b5413f&amp;amp;format=json&amp;amp;sessionid=1397141523139&amp;amp;vc=53&amp;amp;vn=3.5.2&amp;amp;loguid=2888069&amp;amp;deviceid=xxxxx354244055617944&amp;amp;uuid=c7d71164-bae7-4d51-8032-ec9cfafb5e7e&amp;amp;channel=default&amp;amp;method=Info.getinfoV3&amp;amp;virtual=O1wq33EpQ%2Fa%2B8NxjEsy57ZezKBefR85F4L%2BXPZlcSETtw5Fl%2FdQFuLuNUg4Co9zHJyw2jPJipOR3%0Acrc59PUeFvM5hU82AdDQGjIkXa%2FLMWtxuJYz6fJBHLxkQRPWUVCdpeENwrnYlvgAY6DqM9G%2Fh5g1%0AbZamnAgUMERY1iZzPLk%3D%0A HTTP/1.1        200     2008    xxxxx xxxxx xxxxx POST      -       0.033       -       -       Mozilla/5.0 (xxxxx) xxxxx/20100101 xxxxx/1.0.0       0.033   2014-04-11&lt;br/&gt;
113.133.68.221  www.xxxx.com  10/Apr/2014:23:58:02 +0800      POST    /xxxx.jsp?appid=2&amp;amp;appkey=9ef269eec4f7a9d07c73952d06b5413f&amp;amp;format=json&amp;amp;sessionid=1397145345830&amp;amp;vc=53&amp;amp;vn=3.5.2&amp;amp;loguid=4377880&amp;amp;deviceid=xxxxx355369055653422&amp;amp;uuid=546e07f7-6439-48d4-8d6d-e5dc0001e569&amp;amp;channel=91_v352&amp;amp;method=Ad.getAd_iMocha&amp;amp;virtual=       HTTP/1.1        200     88      xxxxx xxxxx xxxxx POST      -  0.127    -       -       Mozilla/5.0 (xxxxx) xxxxx/20100101 xxxxx/1.0.0       0.127   2014-04-11&lt;/p&gt;

&lt;p&gt;this is my HQL:&lt;br/&gt;
CREATE external TABLE access_log (&lt;br/&gt;
  ip STRING,&lt;br/&gt;
  host STRING,&lt;br/&gt;
  time STRING,&lt;br/&gt;
  method STRING,&lt;br/&gt;
  request STRING,&lt;br/&gt;
  protocol STRING,&lt;br/&gt;
  status STRING,&lt;br/&gt;
  size STRING,&lt;br/&gt;
  referer STRING,&lt;br/&gt;
  cookieuid STRING,&lt;br/&gt;
  requestTime STRING,&lt;br/&gt;
  session STRING,&lt;br/&gt;
  httpXRequestedWith STRING,&lt;br/&gt;
  agent STRING,&lt;br/&gt;
  upstreamResponseTime STRING&lt;br/&gt;
)&lt;br/&gt;
partitioned by (logdate string)&lt;br/&gt;
ROW FORMAT SERDE &apos;org.apache.hadoop.hive.contrib.serde2.RegexSerDe&apos;&lt;br/&gt;
WITH SERDEPROPERTIES  (&lt;br/&gt;
&quot;input.regex&quot; = &quot;^(&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;b&gt;) - (&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;/b&gt;) \\[(&lt;span class=&quot;error&quot;&gt;&amp;#91;^\]&amp;#93;&lt;/span&gt;&lt;b&gt;)&lt;br class=&quot;atl-forced-newline&quot; /&gt;] \&quot;(&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;/b&gt;) (&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;b&gt;) (&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;/b&gt;)\&quot; (&lt;del&gt;|&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;b&gt;) (&lt;/del&gt;|&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;/b&gt;) \&quot;(\.&amp;#43;&amp;#63;|&lt;del&gt;)\&quot; (&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;b&gt;) (&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;/b&gt;) (&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;*) \&quot;(\.&amp;#43;&amp;#63;|&lt;/del&gt;)\&quot; \&quot;(\.&amp;#43;&amp;#63;|&lt;del&gt;)\&quot; \&quot;(\.&amp;#43;&amp;#63;|&lt;/del&gt;)\&quot;$&quot;,&lt;br/&gt;
&quot;output.format.string&quot; = &quot;%1$s %2$s %3$s %4$s %5$s %6$s %7$s %8$s %9$s %10$s %11$s %12$s %13$s %14$s %15$s&quot;&lt;br/&gt;
)&lt;br/&gt;
STORED AS TEXTFILE;&lt;/p&gt;</description>
                <environment>&lt;p&gt;linux 2.6.32-358.el6.x86_64,Hive 12.0,shark 0.9.0,Hadoop 2.2.0&lt;/p&gt;</environment>
        <key id="12711109">SPARK-1661</key>
            <summary>the result of querying table created with RegexSerDe is all null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="qililhjcn">likunjian</reporter>
                        <labels>
                            <label>HQL</label>
                            <label>hadoop</label>
                            <label>hive</label>
                            <label>regex</label>
                            <label>shark</label>
                    </labels>
                <created>Tue, 29 Apr 2014 06:40:05 +0000</created>
                <updated>Wed, 30 Apr 2014 01:43:56 +0000</updated>
                            <resolved>Wed, 30 Apr 2014 01:43:56 +0000</resolved>
                                    <version>0.9.0</version>
                                                    <component>Spark Core</component>
                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="604800">168h</timeoriginalestimate>
                            <timeestimate seconds="604800">168h</timeestimate>
                                        <comments>
                            <comment id="13984074" author="qililhjcn" created="Tue, 29 Apr 2014 06:48:38 +0000"  >&lt;p&gt;all content&lt;/p&gt;</comment>
                            <comment id="13985055" author="marmbrus" created="Wed, 30 Apr 2014 01:43:45 +0000"  >&lt;p&gt;Thanks for your report.  This JIRA is for reporting bugs with Spark and its components.  Shark is a separate project and issues with older versions of Shark should probably be filed on the Shark issue tracker.&lt;/p&gt;

&lt;p&gt;However, I did add a test to make sure the RegexSerDe was working with Spark SQL (which is a nearly from scratch rewrite of Shark, that will be included in the 1.0 release of Spark as an Alpha component).  If you find you are still having problems with Spark SQL, please reopen this issue.&lt;/p&gt;

&lt;p&gt;New spark tests: &lt;a href=&quot;https://github.com/apache/spark/pull/595&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/595&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12642414" name="log.txt" size="6482" author="qililhjcn" created="Tue, 29 Apr 2014 06:48:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>389430</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1v2vb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>389672</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>