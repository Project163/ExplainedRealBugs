<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:42:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-46990] Regression: Unable to load empty avro files emitted by event-hubs</title>
                <link>https://issues.apache.org/jira/browse/SPARK-46990</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;In azure, I use databricks and event-hubs. Up until spark version 3.4.1 (in databricks as 13.3 LTS) empty avro files emitted by event-hubs can be read. Since version 3.5.0, it is impossible to load these files (even if I have multiple avro files to load and one of them is empty, it can&apos;t perform an operation like count or save). I tested this on databricks versions 14.0, 14.1, 14.2, 14.3 and it doesn&apos;t work properly in any of them.&lt;/p&gt;

&lt;p&gt;I use the following code:&lt;br/&gt;
&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
df = spark.read.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;avro&quot;&lt;/span&gt;) \ &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; .load(&lt;span class=&quot;code-quote&quot;&gt;&apos;abfss:&lt;span class=&quot;code-comment&quot;&gt;//&amp;lt;container&amp;gt;@&amp;lt;storage&amp;gt;.dfs.core.windows.net/&amp;lt;evh-namespace&amp;gt;/&amp;lt;evh&amp;gt;/0/2024/02/05/22/46/10.avro&apos;&lt;/span&gt;)  &#160; 
&lt;/span&gt;
df.count() &amp;lt;- in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; operation the spark hangs&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I am sending a fragment of logs from databricks and query plan:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
24/02/06 10:03:10 INFO ProgressReporter$: Added result fetcher &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 2734305632140666820_7640723027790427455_4f56f528d4a44796a98821713778d5f9
24/02/06 10:03:11 INFO InMemoryFileIndex: Start listing leaf files and directories. Size of Paths: 1; threshold: 32
24/02/06 10:03:11 INFO InMemoryFileIndex: Start listing leaf files and directories. Size of Paths: 0; threshold: 32
24/02/06 10:03:11 INFO InMemoryFileIndex: It took 9 ms to list leaf files &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 1 paths.
24/02/06 10:03:11 INFO ProgressReporter$: Removed result fetcher &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 2734305632140666820_7640723027790427455_4f56f528d4a44796a98821713778d5f9
24/02/06 10:03:12 INFO ProgressReporter$: Added result fetcher &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 2734305632140666820_6526693737104909881_a07acddb350f44a284cac52db0b2fb21
24/02/06 10:03:12 INFO ClusterLoadMonitor: Added query with execution ID:38. Current active queries:1
24/02/06 10:03:12 INFO FileSourceStrategy: Pushed Filters:&#160;
24/02/06 10:03:12 INFO FileSourceStrategy: Post-Scan Filters:&#160;
24/02/06 10:03:12 INFO CodeGenerator: Code generated in 10.636308 ms
24/02/06 10:03:12 INFO MemoryStore: Block broadcast_34 stored as values in memory (estimated size 409.5 KiB, free 3.3 GiB)
24/02/06 10:03:12 INFO MemoryStore: Block broadcast_34_piece0 stored as bytes in memory (estimated size 14.5 KiB, free 3.3 GiB)
24/02/06 10:03:12 INFO BlockManagerInfo: Added broadcast_34_piece0 in memory on &amp;lt;IP_ADDRESS_2&amp;gt;:43781 (size: 14.5 KiB, free: 3.3 GiB)
24/02/06 10:03:12 INFO SparkContext: Created broadcast 34 from $anonfun$withThreadLocalCaptured$5 at LexicalThreadLocal.scala:63
24/02/06 10:03:12 INFO FileSourceScanExec: Planning scan with bin packing, max split size: 4194304 bytes, max partition size: 4194304, open cost is considered as scanning 4194304 bytes.
24/02/06 10:03:12 INFO DAGScheduler: Registering RDD 104 ($anonfun$withThreadLocalCaptured$5 at LexicalThreadLocal.scala:63) as input to shuffle 11
24/02/06 10:03:12 INFO DAGScheduler: Got map stage job 22 ($anonfun$withThreadLocalCaptured$5 at LexicalThreadLocal.scala:63) with 1 output partitions
24/02/06 10:03:12 INFO DAGScheduler: Final stage: ShuffleMapStage 31 ($anonfun$withThreadLocalCaptured$5 at LexicalThreadLocal.scala:63)
24/02/06 10:03:12 INFO DAGScheduler: Parents of &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; stage: List()
24/02/06 10:03:12 INFO DAGScheduler: Missing parents: List()
24/02/06 10:03:12 INFO DAGScheduler: Submitting ShuffleMapStage 31 (MapPartitionsRDD[104] at $anonfun$withThreadLocalCaptured$5 at LexicalThreadLocal.scala:63), which has no missing parents
24/02/06 10:03:12 INFO DAGScheduler: Submitting 1 missing tasks from ShuffleMapStage 31 (MapPartitionsRDD[104] at $anonfun$withThreadLocalCaptured$5 at LexicalThreadLocal.scala:63) (first 15 tasks are &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; partitions Vector(0))
24/02/06 10:03:12 INFO TaskSchedulerImpl: Adding task set 31.0 with 1 tasks resource profile 0
24/02/06 10:03:12 INFO TaskSetManager: TaskSet 31.0 using PreferredLocationsV1
24/02/06 10:03:12 WARN FairSchedulableBuilder: A job was submitted with scheduler pool 2734305632140666820, which has not been configured. This can happen when the file that pools are read from isn&lt;span class=&quot;code-quote&quot;&gt;&apos;t set, or when that file doesn&apos;&lt;/span&gt;t contain 2734305632140666820. Created 2734305632140666820 with &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; configuration (schedulingMode: FIFO, minShare: 0, weight: 1)
24/02/06 10:03:12 INFO FairSchedulableBuilder: Added task set TaskSet_31.0 tasks to pool 2734305632140666820
24/02/06 10:03:12 INFO TaskSetManager: Starting task 0.0 in stage 31.0 (TID 449) (&amp;lt;IP_ADDRESS&amp;gt;, executor 3, partition 0, PROCESS_LOCAL,&#160;
24/02/06 10:03:12 INFO MemoryStore: Block broadcast_35 stored as values in memory (estimated size 137.2 KiB, free 3.3 GiB)
24/02/06 10:03:12 INFO MemoryStore: Block broadcast_35_piece0 stored as bytes in memory (estimated size 41.3 KiB, free 3.3 GiB)
24/02/06 10:03:12 INFO BlockManagerInfo: Added broadcast_35_piece0 in memory on &amp;lt;IP_ADDRESS_2&amp;gt;:43781 (size: 41.3 KiB, free: 3.3 GiB)
24/02/06 10:03:12 INFO SparkContext: Created broadcast 35 from broadcast at TaskSetManager.scala:723
24/02/06 10:03:12 INFO BlockManagerInfo: Added broadcast_35_piece0 in memory on &amp;lt;IP_ADDRESS&amp;gt;:40825 (size: 41.3 KiB, free: 3.6 GiB)
24/02/06 10:03:13 INFO BlockManagerInfo: Added broadcast_4_piece0 in memory on &amp;lt;IP_ADDRESS&amp;gt;:40825 (size: 17.6 KiB, free: 3.6 GiB)
24/02/06 10:03:14 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 0.0, New Ema: 1.0&#160;
24/02/06 10:03:15 INFO BlockManagerInfo: Added broadcast_34_piece0 in memory on &amp;lt;IP_ADDRESS&amp;gt;:40825 (size: 14.5 KiB, free: 3.6 GiB)
24/02/06 10:03:17 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:03:20 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:03:23 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:03:26 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:03:29 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:03:32 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:03:35 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:03:38 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:03:41 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:03:44 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:03:47 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:03:50 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:03:53 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:03:56 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:03:58 INFO DataSourceFactory$: DataSource Jdbc URL: jdbc:mariadb:&lt;span class=&quot;code-comment&quot;&gt;//&amp;lt;DELETED FOR JIRA PURPOSES&amp;gt;
&lt;/span&gt;24/02/06 10:03:58 INFO HikariDataSource: metastore-monitor - Starting...
24/02/06 10:03:58 INFO HikariDataSource: metastore-monitor - Start completed.
24/02/06 10:03:58 INFO HikariDataSource: metastore-monitor - Shutdown initiated...
24/02/06 10:03:58 INFO HikariDataSource: metastore-monitor - Shutdown completed.
24/02/06 10:03:58 INFO MetastoreMonitor: Metastore healthcheck successful (connection duration = 302 milliseconds)
24/02/06 10:03:59 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:02 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:05 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:08 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:11 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:13 INFO HiveMetaStore: 1: get_database: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
24/02/06 10:04:13 INFO audit: ugi=root &#160; &#160;ip=unknown-ip-addr &#160; &#160;cmd=get_database: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &#160; &#160;
24/02/06 10:04:13 INFO DriverCorral: DBFS health check ok
24/02/06 10:04:13 INFO DriverCorral: Metastore health check ok
24/02/06 10:04:14 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:17 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:20 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:23 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:26 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:29 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:32 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:35 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:38 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:41 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:44 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:47 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:50 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:53 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:56 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:04:59 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:05:02 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:05:05 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:05:08 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:05:11 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:05:14 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:05:17 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:05:20 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:05:23 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:05:26 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:05:29 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:05:32 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:05:35 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:05:38 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;
24/02/06 10:05:41 INFO ClusterLoadAvgHelper: Current cluster load: 1, Old Ema: 1.0, New Ema: 1.0&#160;

== Parsed Logical Plan ==
Relation [SequenceNumber#451L,Offset#452,EnqueuedTimeUtc#453,SystemProperties#454,Properties#455,Body#456] avro== Analyzed Logical Plan ==
SequenceNumber: bigint, Offset: string, EnqueuedTimeUtc: string, SystemProperties: map&amp;lt;string,struct&amp;lt;member0:bigint,member1:&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;,member2:string,member3:binary&amp;gt;&amp;gt;, Properties: map&amp;lt;string,struct&amp;lt;member0:bigint,member1:&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;,member2:string,member3:binary&amp;gt;&amp;gt;, Body: binary
Relation [SequenceNumber#451L,Offset#452,EnqueuedTimeUtc#453,SystemProperties#454,Properties#455,Body#456] avro== Optimized Logical Plan ==
Relation [SequenceNumber#451L,Offset#452,EnqueuedTimeUtc#453,SystemProperties#454,Properties#455,Body#456] avro== Physical Plan ==
FileScan avro [SequenceNumber#451L,Offset#452,EnqueuedTimeUtc#453,SystemProperties#454,Properties#455,Body#456] Batched: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, DataFilters: [], Format: Avro, Location: InMemoryFileIndex(1 paths)[abfss:&lt;span class=&quot;code-comment&quot;&gt;//&amp;lt;container&amp;gt;@&amp;lt;storage&amp;gt;.dfs.core..., PartitionFilters: [], PushedFilters: [], ReadSchema: struct&amp;lt;SequenceNumber:bigint,Offset:string,EnqueuedTimeUtc:string,SystemProperties:map&amp;lt;string,str...
&lt;/span&gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Databricks 14.0 - 14.3 (spark 3.5.0)&lt;/p&gt;</environment>
        <key id="13567590">SPARK-46990</key>
            <summary>Regression: Unable to load empty avro files emitted by event-hubs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ivan.sadikov">Ivan Sadikov</assignee>
                                    <reporter username="kamilkandzia">Kamil Kandzia</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 6 Feb 2024 12:45:31 +0000</created>
                <updated>Wed, 20 Mar 2024 15:40:59 +0000</updated>
                            <resolved>Wed, 20 Mar 2024 15:40:59 +0000</resolved>
                                    <version>3.5.0</version>
                                    <fixVersion>4.0.0</fixVersion>
                                    <component>PySpark</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17828090" author="pashashiz" created="Mon, 18 Mar 2024 20:20:57 +0000"  >&lt;p&gt;We are experiencing the same with Spark 3.5. That is likely caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-46633&quot; title=&quot;Reading a non-empty Avro file with empty blocks returns 0 records&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-46633&quot;&gt;&lt;del&gt;SPARK-46633&lt;/del&gt;&lt;/a&gt;. Here is the change &lt;a href=&quot;https://github.com/apache/spark/pull/44635/files#diff-c139f61eabcfcb9725c8caeb747becae061a2ea44f774b12c9cce5aeac102880&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR-44635&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The job hangs once tries to read avro files with no records. It loops forever here:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.spark.sql.avro.AvroUtils$RowReader.hasNextRow(AvroUtils.scala:265) 
org.apache.spark.sql.avro.AvroUtils$RowReader.hasNextRow$(AvroUtils.scala:263) 
org.apache.spark.sql.avro.AvroFileFormat$$anon$1.hasNextRow(AvroFileFormat.scala:186) 
org.apache.spark.sql.avro.AvroFileFormat$$anon$1.hasNext(AvroFileFormat.scala:201) 
scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:460) 
org.apache.spark.sql.execution.datasources.FileScanRDD$$anon$1$$anon$2.getNext(FileScanRDD.scala:604) 
org.apache.spark.util.NextIterator.hasNext(NextIterator.scala:73) 
org.apache.spark.sql.execution.datasources.FileScanRDD$$anon$1.nextIterator(FileScanRDD.scala:798) 
org.apache.spark.sql.execution.datasources.FileScanRDD$$anon$1.$anonfun$hasNext$1(FileScanRDD.scala:506) 
org.apache.spark.sql.execution.datasources.FileScanRDD$$anon$1$$Lambda$1269/1728924771.apply$mcZ$sp(Unknown Source)  &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here is the sample to reproduce the issue: &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13067509/13067509_second%3D02.avro&quot; title=&quot;second=02.avro attached to SPARK-46990&quot;&gt;second=02.avro&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17828095" author="JIRAUSER304097" created="Mon, 18 Mar 2024 20:36:46 +0000"  >&lt;p&gt;Could you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ivan.sadikov&quot; class=&quot;user-hover&quot; rel=&quot;ivan.sadikov&quot;&gt;ivan.sadikov&lt;/a&gt; look into issue? Pavlo has attached example avro file (I forgot to do this).&lt;/p&gt;</comment>
                            <comment id="17828100" author="ivan.sadikov" created="Mon, 18 Mar 2024 21:00:50 +0000"  >&lt;p&gt;Yes, sure. Thanks for reporting. I will take a look and open a PR once I have root caused the issue.&#160;&lt;/p&gt;</comment>
                            <comment id="17828106" author="JIRAUSER304097" created="Mon, 18 Mar 2024 21:25:40 +0000"  >&lt;p&gt;It is likely that the cause appeared earlier than you created your fixes. I observed this on databricks 14.0, which had a release in September 2023. According to details &lt;span class=&quot;error&quot;&gt;&amp;#91;Databricks Runtime 14.0 | Databricks on AWS|https://docs.databricks.com/en/release-notes/runtime/14.0.html&amp;#93;&lt;/span&gt;&#160; it doesn&apos;t contains your changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-46633&quot; title=&quot;Reading a non-empty Avro file with empty blocks returns 0 records&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-46633&quot;&gt;&lt;del&gt;SPARK-46633&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17828107" author="ivan.sadikov" created="Mon, 18 Mar 2024 21:27:43 +0000"  >&lt;p&gt;Thanks, Kamil. I am still debugging, will try to open a PR with the fix today or tomorrow.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pashashiz&quot; class=&quot;user-hover&quot; rel=&quot;pashashiz&quot;&gt;pashashiz&lt;/a&gt; Is it okay to use the provided sample file in the PR for a unit test?&#160;&lt;/p&gt;

&lt;p&gt;I will also reach out to Databricks to fix it there.&lt;/p&gt;</comment>
                            <comment id="17828113" author="pashashiz" created="Mon, 18 Mar 2024 22:26:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ivan.sadikov&quot; class=&quot;user-hover&quot; rel=&quot;ivan.sadikov&quot;&gt;ivan.sadikov&lt;/a&gt;, feel free to use it. That is a standard EventHub capture file, with azure defined schema and no data inside.&#160;&lt;/p&gt;</comment>
                            <comment id="17828143" author="ivan.sadikov" created="Tue, 19 Mar 2024 01:31:37 +0000"  >&lt;p&gt;Opened PR &lt;a href=&quot;https://github.com/apache/spark/pull/45578&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/45578&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17829213" author="cloud_fan" created="Wed, 20 Mar 2024 15:40:59 +0000"  >&lt;p&gt;Issue resolved by pull request 45578&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/45578&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/45578&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13067509" name="second=02.avro" size="508" author="pashashiz" created="Mon, 18 Mar 2024 20:05:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1n8wo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>