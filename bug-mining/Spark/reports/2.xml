<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:11:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-539] Permission denied(publickey)</title>
                <link>https://issues.apache.org/jira/browse/SPARK-539</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;419   command = ((&quot;rsync -rv -e &apos;ssh -o StrictHostKeyChecking=no -i %s&apos; &quot; +&lt;br/&gt;
420       &quot;&apos;%s/&apos; &apos;root@%s:/&apos;&quot;) % (opts.identity_file, tmp_dir, active_master))&lt;/p&gt;

&lt;p&gt;The script always produces an error when executing this command.&lt;br/&gt;
and the error produced is:&lt;br/&gt;
Permission denied (publickey)...(This error does not have to do with the permissions on the .pem file)&lt;/p&gt;

&lt;p&gt;Any ideas?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12704720">SPARK-539</key>
            <summary>Permission denied(publickey)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                                <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="matei">Matei Alexandru Zaharia</assignee>
                                    <reporter username="thikonom">thikonom</reporter>
                        <labels>
                    </labels>
                <created>Sat, 25 Aug 0012 06:57:00 +0000</created>
                <updated>Tue, 11 Dec 2012 10:06:30 +0000</updated>
                            <resolved>Mon, 10 Dec 2012 15:18:53 +0000</resolved>
                                                    <fixVersion>0.6.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13952671" author="patrick" created="Mon, 27 Aug 2012 07:25:00 +0000"  >&lt;p&gt;Github comment from mateiz: Weird, what OS is this on? And does the path to the key contain spaces by any chance?&lt;/p&gt;

&lt;p&gt;Matei&lt;/p&gt;

&lt;p&gt;On Aug 27, 2012, at 7:57 AM, Theodoros Ikonomou wrote:&lt;/p&gt;

&lt;p&gt;&amp;gt; 419 command = ((&quot;rsync -rv -e &apos;ssh -o StrictHostKeyChecking=no -i %s&apos; &quot; +&lt;br/&gt;
&amp;gt; 420 &quot;&apos;%s/&apos; &apos;root@%s:/&apos;&quot;) % (opts.identity_file, tmp_dir, active_master))&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; The script always produces an error when executing this command.&lt;br/&gt;
&amp;gt; and the error produced is:&lt;br/&gt;
&amp;gt; Permission denied (publickey)...(This error does not have to do with the permissions on the .pem file)&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Any ideas?&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; &#8212;&lt;br/&gt;
&amp;gt; Reply to this email directly or view it on GitHub.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt;&lt;/p&gt;</comment>
                            <comment id="13952672" author="patrick" created="Mon, 27 Aug 2012 07:35:00 +0000"  >&lt;p&gt;Github comment from thikonom: I&apos;m on a Mac with Snow Leopard and the path does not contain spaces.&lt;/p&gt;</comment>
                            <comment id="13952673" author="patrick" created="Mon, 27 Aug 2012 07:50:00 +0000"  >&lt;p&gt;Github comment from mateiz: The only thing I can think of is that you might not have specified the -k parameter when launching the VM to tell Amazon to use the private key for that key pair. Can you SSH into the machine by hand using your .pem file?&lt;/p&gt;

&lt;p&gt;Matei&lt;/p&gt;

&lt;p&gt;On Aug 27, 2012, at 8:35 AM, Theodoros Ikonomou wrote:&lt;/p&gt;

&lt;p&gt;&amp;gt; I&apos;m on a Mac with Snow Leopard and the path does not contain spaces.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; &#8212;&lt;br/&gt;
&amp;gt; Reply to this email directly or view it on GitHub.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt;&lt;/p&gt;</comment>
                            <comment id="13952674" author="patrick" created="Mon, 27 Aug 2012 08:15:00 +0000"  >&lt;p&gt;Github comment from thikonom: I&apos;m always using this command which includes the -k option:&lt;br/&gt;
./spark-ec2 -i /Users/thikonom/Desktop/Big/key.pem -k key_name launch cluster_name&lt;/p&gt;

&lt;p&gt;I get the same error every time i&apos;m trying to ssh from the command line:&lt;br/&gt;
ssh -i /Users/thikonom/Desktop/Big/key.pem root@...compute-1.amazonaws.com&lt;br/&gt;
Permission denied (publickey).&lt;/p&gt;</comment>
                            <comment id="13952670" author="patrick" created="Fri, 19 Oct 2012 18:03:00 +0000"  >&lt;p&gt;Imported from Github issue spark-180, originally reported by thikonom&lt;/p&gt;</comment>
                            <comment id="13952703" author="alexander.polev" created="Tue, 4 Dec 2012 05:23:21 +0000"  >&lt;p&gt;What fixed it for me is adding a &quot;chown 600&quot; line in spark_ec2.py:&lt;/p&gt;

&lt;p&gt;if deploy_ssh_key:&lt;br/&gt;
    print &quot;Copying SSH key %s to master...&quot; % opts.identity_file&lt;br/&gt;
    ssh(master, opts, &apos;mkdir -p ~/.ssh&apos;)&lt;br/&gt;
    scp(master, opts, opts.identity_file, &apos;~/.ssh/id_rsa&apos;)&lt;br/&gt;
    ssh(master, opts, &apos;chown 600 ~/.ssh/id_rsa&apos;)&lt;br/&gt;
  print &quot;Running setup on master...&quot;&lt;/p&gt;</comment>
                            <comment id="13952816" author="matei" created="Mon, 10 Dec 2012 14:59:59 +0000"  >&lt;p&gt;Thanks Alex &amp;#8211; I guess it&apos;s because the local file that we copied over did not have 600 permissions. Was this on Windows? On Linux/Mac I don&apos;t think you could even log into the node with a private key file that doesn&apos;t have 600 permissions set.&lt;/p&gt;</comment>
                            <comment id="13952144" author="matei" created="Mon, 10 Dec 2012 15:18:53 +0000"  >&lt;p&gt;I&apos;ve fixed this in &lt;a href=&quot;https://github.com/mesos/spark/commit/597520ae201513a51901c8e50f3815aff737d3d5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mesos/spark/commit/597520ae201513a51901c8e50f3815aff737d3d5&lt;/a&gt;, with Alexander&apos;s fix.&lt;/p&gt;</comment>
                            <comment id="13952817" author="alexander.polev" created="Tue, 11 Dec 2012 00:34:24 +0000"  >&lt;p&gt;Actually this was launched from another Linux EC2 host, but using different key file which had wrong permissions. &lt;/p&gt;

&lt;p&gt;Since for new cluster it allows to point to any private key as &quot;opts.identity_file&quot; (not the one that was already used for SSH before) we cant assume it will have correct permissions.&lt;/p&gt;</comment>
                            <comment id="13951996" author="matei" created="Tue, 11 Dec 2012 10:06:30 +0000"  >&lt;p&gt;Ah, makes sense. Thanks for the fix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>383583</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1u313:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>383851</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>