<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:12:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-1043] Pyspark RDD&apos;s cannot deal with strings greater than 64K bytes.</title>
                <link>https://issues.apache.org/jira/browse/SPARK-1043</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Pyspark uses java.io.DataOutputStream.writeUTF to send data to the python world which causes a problem since java.io.DataOutputStream.writeUTF fails if you pass it strings above 64K bytes. Furthermore a fix to this issue is not straight forward since the java to python protocol actually relies on this and uses it as the separator between items. The offending write happens in &lt;/p&gt;

&lt;p&gt;   core/src/main/scala/org/apache/spark/api/python/PythonRDD.scala:220&lt;/p&gt;

&lt;p&gt;and the reliance on this to separate items can be found in the  MUTF8Deserializer class in&lt;/p&gt;

&lt;p&gt;   python/pyspark/serializers.py:264&lt;/p&gt;

&lt;p&gt;The only solution I currently have in mind would be to change the protocol to either extend the number of bytes used to specify the length of the item or to add a boolean flag to every &quot;packet&quot; to indicate wether the item is split into multiple parts (although the second option might result in bad data if multiple things are writing to these steams)&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12704474">SPARK-1043</key>
            <summary>Pyspark RDD&apos;s cannot deal with strings greater than 64K bytes.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="joshrosen">Josh Rosen</assignee>
                                    <reporter username="tyro89">Erik Selin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jan 2014 13:18:33 +0000</created>
                <updated>Tue, 28 Jan 2014 21:32:55 +0000</updated>
                            <resolved>Tue, 28 Jan 2014 21:32:55 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.9.1</fixVersion>
                                    <component>PySpark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13953600" author="joshrosen" created="Fri, 24 Jan 2014 22:28:02 +0000"  >&lt;p&gt;Thanks for catching this.  I&apos;ll look into alternative encodings that support longer strings and add a test case for large strings to make sure this doesn&apos;t break again in the future.&lt;/p&gt;</comment>
                            <comment id="13953607" author="tyro89" created="Sun, 26 Jan 2014 11:57:50 +0000"  >&lt;p&gt;I&apos;ve submitted a quick fix to this &lt;a href=&quot;https://github.com/apache/incubator-spark/pull/512&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-spark/pull/512&lt;/a&gt; not sure if you guys usually discuss things here or on github so I&apos;m linking this to the pr and the pr to this &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13953603" author="bouk" created="Sun, 26 Jan 2014 14:15:21 +0000"  >&lt;p&gt;Note that the current encoding will also break if any of the modified characters described here: &lt;a href=&quot;http://docs.oracle.com/javase/7/docs/api/java/io/DataInput.html#modified-utf-8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javase/7/docs/api/java/io/DataInput.html#modified-utf-8&lt;/a&gt; are used. The python side doesn&apos;t implement anything to mitigate this, it&apos;s probably safest to switch to vanilla UTF-8&lt;/p&gt;</comment>
                            <comment id="13953604" author="joshrosen" created="Sun, 26 Jan 2014 14:24:05 +0000"  >&lt;p&gt;There&apos;s no reason that PySpark has to use MUTF-8; this was a bad choice that I made when implementing custom serializer support (&lt;a href=&quot;https://github.com/apache/incubator-spark/pull/146&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-spark/pull/146&lt;/a&gt;), so I&apos;d switch to vanilla UTF-8 instead.&lt;/p&gt;</comment>
                            <comment id="13953623" author="joshrosen" created="Tue, 28 Jan 2014 21:32:55 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/incubator-spark/pull/523&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-spark/pull/523&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>383183</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1u0k7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>383451</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>