<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:58:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-23189] reflect stage level blacklisting on executor tab </title>
                <link>https://issues.apache.org/jira/browse/SPARK-23189</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;This issue is the came during working on&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-22577&quot; title=&quot;executor page blacklist status should update with TaskSet level blacklisting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-22577&quot;&gt;&lt;del&gt;SPARK-22577&lt;/del&gt;&lt;/a&gt;&#160;where the conclusion was not only stage tab should reflect&#160;stage and application level backlisting but also the executor tab should be extended with&#160;stage level&#160;backlisting information.&lt;/p&gt;

&lt;p&gt;As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=irashid&quot; class=&quot;user-hover&quot; rel=&quot;irashid&quot;&gt;irashid&lt;/a&gt;&#160;and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tgraves&quot; class=&quot;user-hover&quot; rel=&quot;tgraves&quot;&gt;tgraves&lt;/a&gt; are discussed the backlisted stages&#160;should be listed for an executor like &quot;&lt;b&gt;stage[ , ,...]&lt;/b&gt;&quot;. One idea was to list only the&#160;most recent&#160;3 of the blacklisted stages another was list all the active stages which are blacklisted.&#160;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13133006">SPARK-23189</key>
            <summary>reflect stage level blacklisting on executor tab </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="attilapiros">Attila Zsolt Piros</assignee>
                                    <reporter username="attilapiros">Attila Zsolt Piros</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Jan 2018 10:21:44 +0000</created>
                <updated>Tue, 13 Feb 2018 15:55:20 +0000</updated>
                            <resolved>Tue, 13 Feb 2018 15:55:20 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>2.4.0</fixVersion>
                                    <component>Web UI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16335609" author="attilapiros" created="Tue, 23 Jan 2018 10:22:17 +0000"  >&lt;p&gt;I am working on this issue.&lt;/p&gt;</comment>
                            <comment id="16335769" author="attilapiros" created="Tue, 23 Jan 2018 13:26:12 +0000"  >&lt;p&gt;In case of listing only the active stages only I have only one performance concern / question. It is easy to store the blacklisted stageId-s for a live executor during blacklisting. But n case of stage completion without introducing an extra map from stage&#160;ID to executor ID I can only&#160;find&#160;the relevant executors with a complete&#160;search.&lt;/p&gt;

&lt;p&gt;Moreover I have an idea: what about&#160;showing just the last 3 by default but having a tooltip containing all the stages in case of hovering above the item? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ajbozarth&quot; class=&quot;user-hover&quot; rel=&quot;ajbozarth&quot;&gt;ajbozarth&lt;/a&gt; is using a tooltip an option on the UI? I have seen some&#160;in&#160;the event timeline, but within a table I have found none.&lt;/p&gt;</comment>
                            <comment id="16335808" author="tgraves" created="Tue, 23 Jan 2018 14:08:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=attilapiros&quot; class=&quot;user-hover&quot; rel=&quot;attilapiros&quot;&gt;attilapiros&lt;/a&gt; what do you mean by the last 3?&#160; Are you talking for the dead nodes or&#160;just referring to tracking all stages?&lt;/p&gt;

&lt;p&gt;I was thinking only showing active stages in the executor page as blacklisted.&#160; If its not active and it didn&apos;t get promoted to application then the user shouldn&apos;t care as much and they can see by going to the stages page.&#160; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=irashid&quot; class=&quot;user-hover&quot; rel=&quot;irashid&quot;&gt;irashid&lt;/a&gt; thoughts?&lt;/p&gt;</comment>
                            <comment id="16335888" author="irashid" created="Tue, 23 Jan 2018 15:03:58 +0000"  >&lt;p&gt;yeah I think just active stages might be fine.  In general, that will not be a long list (though of course, it could be long ...).&lt;/p&gt;

&lt;p&gt;honestly, I am trying to understand exactly what this will be used for.  If you just want to know which executors / nodes might be bad, looking at &quot;failed tasks&quot; is probably better.  If its to see what is going on an active stage, it seems like you&apos;d look at the stage page for that particular stage instead (as attila is handling in &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-22577&quot; title=&quot;executor page blacklist status should update with TaskSet level blacklisting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-22577&quot;&gt;&lt;del&gt;SPARK-22577&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;The other use I could think of is finding &quot;repeat offenders&quot;, if there are some executors which keep getting put on the taskset blacklist, but for some reason don&apos;t get put on the application blacklist (eg, wrong thresholds).  But for that, you&apos;d want to see the blacklisting for stages even after they had completed.&lt;/p&gt;</comment>
                            <comment id="16336326" author="ajbozarth" created="Tue, 23 Jan 2018 20:19:53 +0000"  >&lt;p&gt;The tooltip feature does exist, but I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=irashid&quot; class=&quot;user-hover&quot; rel=&quot;irashid&quot;&gt;irashid&lt;/a&gt; that I&apos;m not sure about the use case here. The executors page is dynamically created using the rest api, which would entail adding the blacklisted stages list to the api. I still think this is a cool idea, I&apos;m just not sure if its necessary.&lt;/p&gt;</comment>
                            <comment id="16336332" author="tgraves" created="Tue, 23 Jan 2018 20:28:11 +0000"  >&lt;p&gt;Personally I use the executors page a lot so that is why I think it would be nice to have it match the existing state of the active stages.&#160; For instance I go there many times as soon as I load an application to see how many active executors it has (with dynamic allocation), I can quickly see how many are active/dead and in this case possibly blacklisted and compare that to how many tasks are running in the various states.&#160;&#160;&lt;/p&gt;

&lt;p&gt;Like I mentioned in the pr for the stages page though, I&apos;m ok with waiting on this and see how just having it in stages page goes.&#160;&lt;/p&gt;</comment>
                            <comment id="16336372" author="attilapiros" created="Tue, 23 Jan 2018 21:08:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tgraves&quot; class=&quot;user-hover&quot; rel=&quot;tgraves&quot;&gt;tgraves&lt;/a&gt; I see so only active stages are interesting. Is it ok to find the relevant executors at stage&#160;completion by iterating through all the executors? So how many executors should we calculate typically?&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=irashid&quot; class=&quot;user-hover&quot; rel=&quot;irashid&quot;&gt;irashid&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ajbozarth&quot; class=&quot;user-hover&quot; rel=&quot;ajbozarth&quot;&gt;ajbozarth&lt;/a&gt; thanks&#160;for the info then I forget the tooltip here.&lt;/p&gt;

&lt;p&gt;I already started the coding but the Javascript part a bit slows me down still in the beginning of next week we will have something to see.&#160;&lt;/p&gt;</comment>
                            <comment id="16337957" author="irashid" created="Wed, 24 Jan 2018 17:42:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tgraves&quot; class=&quot;user-hover&quot; rel=&quot;tgraves&quot;&gt;tgraves&lt;/a&gt; &amp;#8211; why do you use the executors page instead of the stage page for the active stage?  Is it because you&apos;re typically running lots of jobs simultaneously?  Or is it just because its easier to navigate directly to the executors page &amp;#8211; no need to have a jobid / stageId?&lt;/p&gt;

&lt;p&gt;If its just having a convenient spot to navigate to, we could easily at a &quot;lastStage&quot; / &quot;lastJob&quot; redirect, that would be pretty trivial.  Or maybe there is some other summary view we&apos;re missing to capture the current state of the cluster &amp;#8211; the &quot;executors&quot; page may be close to what you want know but perhaps we&apos;re actually missing something else.&lt;/p&gt;

&lt;p&gt;I&apos;m not trying to block this change or anything, just want to avoid UI clutter and think a bit about the right way to add this.&lt;/p&gt;</comment>
                            <comment id="16338005" author="tgraves" created="Wed, 24 Jan 2018 18:06:09 +0000"  >&lt;p&gt;for large jobs the&#160;specific stage page is a pain to navigate.&#160; Most of the time I&#160;go&#160; there i immediately shrink the executors table just to be able to see task table more easily.&#160; All of those pages are a pain to navigate and find things in my opinion, which is why we had a pr to change to datatables but got back burnered based on vanzin request because changes in history server. that is done now so I think could be done now but don&apos;t have time at the moment. But that is just one reason.&#160;&#160;&lt;/p&gt;

&lt;p&gt;Most of the time I can take a quick look at the job or stages tab (list of all stages) to see what is happening at a high level,&#160; jump to executors tab to see what is going there at a high level, and then only if needed load the specific stages page.&#160; It might just be the way I use it.&#160; It also depends on what the user is complaining about as to where I go first.&#160; I think if we fixed the stage page to be more usable that might change.&#160; &#160;Like I already said I&apos;m fine with waiting on this.&lt;/p&gt;</comment>
                            <comment id="16338083" author="irashid" created="Wed, 24 Jan 2018 19:11:57 +0000"  >&lt;p&gt;OK, since nobody feels strongly and to avoid bike-shedding here, my suggestion to move forward is Attila goes ahead with this since it should be a small change, but if it complicated for whatever reason its probably not worth sinking a lot of time into.&lt;/p&gt;

&lt;p&gt;I&apos;d rather we just fixed the stage page to be better &amp;#8211; I don&apos;t like adding this if we plan on ripping it out later.  But also realize we don&apos;t have a ton of contributors working on the UI now, so who knows when the other UI stuff will happen, so we can make this small change, since I think you probably have a pretty good sense of what would be useful in these pages.&lt;/p&gt;</comment>
                            <comment id="16339389" author="attilapiros" created="Thu, 25 Jan 2018 15:35:01 +0000"  >&lt;p&gt;I have uploaded some images about&#160;the very first results:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12907713/12907713_backlisted.png&quot; title=&quot;backlisted.png attached to SPARK-23189&quot;&gt;backlisted.png&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&#160;is when one stage is backlisted for the executor.&lt;/li&gt;
	&lt;li&gt;The &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12907714/12907714_afterStageCompleted.png&quot; title=&quot;afterStageCompleted.png attached to SPARK-23189&quot;&gt;afterStageCompleted.png&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&#160;when the stage is completed and the UI is updated.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=irashid&quot; class=&quot;user-hover&quot; rel=&quot;irashid&quot;&gt;irashid&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tgraves&quot; class=&quot;user-hover&quot; rel=&quot;tgraves&quot;&gt;tgraves&lt;/a&gt;&#160;Any suggestions?&#160;&lt;/p&gt;</comment>
                            <comment id="16339442" author="irashid" created="Thu, 25 Jan 2018 16:17:08 +0000"  >&lt;p&gt;looks reasonable to me.  How do you differentiate application level blacklisting from stage-level blacklisting on the executors page?&lt;/p&gt;</comment>
                            <comment id="16339510" author="attilapiros" created="Thu, 25 Jan 2018 17:04:58 +0000"  >&lt;p&gt;I have introduced a new attribute for live executors called blacklistedInStages.&lt;/p&gt;

&lt;p&gt;It is a set containing the StageIDs where the executor was blacklisted.&lt;/p&gt;

&lt;p&gt;So on the UI the label can be one of the followings:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&quot;Blacklisted&quot; when the executor is blacklisted application level (old flag)&lt;/li&gt;
	&lt;li&gt;&quot;Dead&quot; when the executor is not Blacklisted and not Active&lt;/li&gt;
	&lt;li&gt;&quot;Blacklisted in Stages: &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&quot; when the executor is Active but the blacklistedInStages set is not empty&lt;/li&gt;
	&lt;li&gt;&quot;Active&quot; when the executor is Active and blacklistedInStages set is empty&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16341139" author="apachespark" created="Fri, 26 Jan 2018 15:00:05 +0000"  >&lt;p&gt;User &apos;attilapiros&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/20408&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/20408&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16362541" author="irashid" created="Tue, 13 Feb 2018 15:55:20 +0000"  >&lt;p&gt;Issue resolved by pull request 20408&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/20408&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/20408&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13120044">SPARK-22577</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12907714" name="afterStageCompleted.png" size="110225" author="attilapiros" created="Thu, 25 Jan 2018 15:30:30 +0000"/>
                            <attachment id="12907713" name="backlisted.png" size="128047" author="attilapiros" created="Thu, 25 Jan 2018 15:30:30 +0000"/>
                            <attachment id="12907728" name="multiple_stages.png" size="109833" author="attilapiros" created="Thu, 25 Jan 2018 16:44:40 +0000"/>
                            <attachment id="12908314" name="multiple_stages_1.png" size="107014" author="attilapiros" created="Tue, 30 Jan 2018 10:52:10 +0000"/>
                            <attachment id="12908315" name="multiple_stages_2.png" size="108077" author="attilapiros" created="Tue, 30 Jan 2018 10:52:10 +0000"/>
                            <attachment id="12908316" name="multiple_stages_3.png" size="106035" author="attilapiros" created="Tue, 30 Jan 2018 10:52:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p8o7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>