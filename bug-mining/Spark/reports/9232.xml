<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:34:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-44784] Failure in testing `SparkSessionE2ESuite` using Maven</title>
                <link>https://issues.apache.org/jira/browse/SPARK-44784</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/spark/actions/runs/5832898984/job/15819181762&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/actions/runs/5832898984/job/15819181762&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The following failures exist in the daily Maven tests, we should fix them before Apache Spark 3.5.0 release:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SparkSessionE2ESuite:
4638- interrupt all - background queries, foreground interrupt *** FAILED ***
4639  The code passed to eventually never returned normally. Attempted 30 times over 20.092924822 seconds. Last failure message: Some(&lt;span class=&quot;code-quote&quot;&gt;&quot;unexpected failure in q1: org.apache.spark.SparkException: org/apache/spark/sql/connect/client/SparkResult&quot;&lt;/span&gt;) was not empty Error not empty: Some(unexpected failure in q1: org.apache.spark.SparkException: org/apache/spark/sql/connect/client/SparkResult). (SparkSessionE2ESuite.scala:71)
4640- interrupt all - foreground queries, background interrupt *** FAILED ***
4641  &lt;span class=&quot;code-quote&quot;&gt;&quot;org/apache/spark/sql/connect/client/SparkResult&quot;&lt;/span&gt; did not contain &lt;span class=&quot;code-quote&quot;&gt;&quot;OPERATION_CANCELED&quot;&lt;/span&gt; Unexpected exception: org.apache.spark.SparkException: org/apache/spark/sql/connect/client/SparkResult (SparkSessionE2ESuite.scala:105)
4642- interrupt tag *** FAILED ***
4643  The code passed to eventually never returned normally. Attempted 30 times over 20.069445587 seconds. Last failure message: ListBuffer() had length 0 instead of expected length 2 Interrupted operations: ListBuffer().. (SparkSessionE2ESuite.scala:199)
4644- interrupt operation *** FAILED ***
4645  org.apache.spark.SparkException: org/apache/spark/sql/connect/client/SparkResult
4646  at org.apache.spark.sql.connect.client.GrpcExceptionConverter$.toThrowable(GrpcExceptionConverter.scala:89)
4647  at org.apache.spark.sql.connect.client.GrpcExceptionConverter$.convert(GrpcExceptionConverter.scala:38)
4648  at org.apache.spark.sql.connect.client.GrpcExceptionConverter$$anon$1.hasNext(GrpcExceptionConverter.scala:46)
4649  at org.apache.spark.sql.connect.client.SparkResult.org$apache$spark$sql$connect$client$SparkResult$$processResponses(SparkResult.scala:83)
4650  at org.apache.spark.sql.connect.client.SparkResult.operationId(SparkResult.scala:174)
4651  at org.apache.spark.sql.SparkSessionE2ESuite.$anonfun$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$31(SparkSessionE2ESuite.scala:243)
4652  at org.apache.spark.sql.connect.client.util.RemoteSparkSession.$anonfun$test$1(RemoteSparkSession.scala:243)
4653  at org.scalatest.OutcomeOf.outcomeOf(OutcomeOf.scala:85)
4654  at org.scalatest.OutcomeOf.outcomeOf$(OutcomeOf.scala:83)
4655  at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)
4656  ... &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13547036">SPARK-44784</key>
            <summary>Failure in testing `SparkSessionE2ESuite` using Maven</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hvanhovell">Herman van H&#246;vell</assignee>
                                    <reporter username="LuciferYang">Yang Jie</reporter>
                        <labels>
                    </labels>
                <created>Sat, 12 Aug 2023 13:29:51 +0000</created>
                <updated>Sun, 27 Aug 2023 03:33:05 +0000</updated>
                            <resolved>Sun, 27 Aug 2023 03:29:30 +0000</resolved>
                                    <version>3.5.0</version>
                                    <fixVersion>3.5.0</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                    <component>Connect</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17753974" author="juliuszsompolski" created="Mon, 14 Aug 2023 10:08:24 +0000"  >&lt;p&gt;This is a classloader issue with the serialization of an UDF pulling classes from the client&apos;s class context that it doesn&apos;t necessarily need, and then resulting in ClassNotFoundException on the server.&lt;br/&gt;
org.apache.spark.SparkException: org/apache/spark/sql/connect/client/SparkResult&lt;br/&gt;
It&apos;s not specifically related to the tests in that suite, but can happen anyplace with UDFs.&lt;/p&gt;</comment>
                            <comment id="17755299" author="hvanhovell" created="Wed, 16 Aug 2023 23:02:51 +0000"  >&lt;p&gt;Hmmm, this was supposed to be fixed by stubbing. The underlying issue is that for lambda deserialization we need to be able to load its capturing class. When that class contains any reference to a class we don&apos;t have on the classpath (and one we definitely don&apos;t want), it will fail with a CNFE.&lt;/p&gt;

&lt;p&gt;I will do some digging.&lt;/p&gt;</comment>
                            <comment id="17755373" author="luciferyang" created="Thu, 17 Aug 2023 06:01:23 +0000"  >&lt;p&gt;Because in &lt;a href=&quot;https://github.com/apache/spark/pull/42523&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/42523&lt;/a&gt;, SparkResult will be moved to the Connect Common module, it will become a class shared by both client and server. Therefore, if &lt;a href=&quot;https://github.com/apache/spark/pull/42523&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/42523&lt;/a&gt; is merged first, the existing test cases will not be able to reproduce this issue.&lt;/p&gt;</comment>
                            <comment id="17758827" author="gurwls223" created="Fri, 25 Aug 2023 04:59:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=LuciferYang&quot; class=&quot;user-hover&quot; rel=&quot;LuciferYang&quot;&gt;LuciferYang&lt;/a&gt; BTW, is this a real blocker? or test-only issue?&lt;/p&gt;</comment>
                            <comment id="17758831" author="luciferyang" created="Fri, 25 Aug 2023 05:13:42 +0000"  >&lt;p&gt;&lt;del&gt;Just a test-only issue,&#160; not a real blocker, but we should at least make the maven test pass in 3.5 release, even if it means just removing these two cases.&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Sorry, I misunderstood the Jira ticket. I&apos;m more inclined to think this is a testing issue now. What do you think? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hvanhovell&quot; class=&quot;user-hover&quot; rel=&quot;hvanhovell&quot;&gt;hvanhovell&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17759312" author="luciferyang" created="Sun, 27 Aug 2023 03:29:30 +0000"  >&lt;p&gt;Issue resolved by pull request 42591&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/42591&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/42591&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17759313" author="snoot" created="Sun, 27 Aug 2023 03:33:05 +0000"  >&lt;p&gt;User &apos;hvanhovell&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/42591&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/42591&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 11 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1jqu0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>