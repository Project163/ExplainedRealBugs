<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:01:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-23715] from_utc_timestamp returns incorrect results for some UTC date/time values</title>
                <link>https://issues.apache.org/jira/browse/SPARK-23715</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;This produces the expected answer:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;df.select(from_utc_timestamp(lit(&quot;2018-03-13T06:18:23&quot;), &quot;GMT+1&quot; ).as(&quot;dt&quot;)).show
+-------------------+
|                 dt|
+-------------------+
|2018-03-13 07:18:23|
+-------------------+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However, the equivalent UTC input (but with an explicit timezone) produces a wrong answer:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;df.select(from_utc_timestamp(lit(&quot;2018-03-13T06:18:23+00:00&quot;), &quot;GMT+1&quot; ).as(&quot;dt&quot;)).show
+-------------------+
|                 dt|
+-------------------+
|2018-03-13 00:18:23|
+-------------------+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Additionally, the equivalent Unix time (1520921903, which is also &quot;2018-03-13T06:18:23&quot; in the UTC time zone) produces the same wrong answer:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;df.select(from_utc_timestamp(to_timestamp(lit(1520921903)), &quot;GMT+1&quot; ).as(&quot;dt&quot;)).show
+-------------------+
|                 dt|
+-------------------+
|2018-03-13 00:18:23|
+-------------------+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;These issues stem from the fact that the FromUTCTimestamp expression, despite its name, expects the input to be in the user&apos;s local timezone. There is some magic under the covers to make things work (mostly) as the user expects.&lt;/p&gt;

&lt;p&gt;As an example, let&apos;s say a user in Los Angeles issues the following:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;df.select(from_utc_timestamp(lit(&quot;2018-03-13T06:18:23&quot;), &quot;GMT+1&quot; ).as(&quot;dt&quot;)).show
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;FromUTCTimestamp gets as input a Timestamp (long) value representing&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2018-03-13T06:18:23-07:00 (long value 1520947103000000)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;What FromUTCTimestamp needs instead is&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2018-03-13T06:18:23+00:00 (long value 1520921903000000)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So, it applies the local timezone&apos;s offset to the input timestamp to get the correct value (1520947103000000 minus 7 hours is 1520921903000000). Then it can process the value and produce the expected output.&lt;/p&gt;

&lt;p&gt;When the user explicitly specifies a time zone, FromUTCTimestamp&apos;s assumptions break down. The input is no longer in the local time zone. Because of the way input data is implicitly casted, FromUTCTimestamp never knows whether the input data had an explicit timezone.&lt;/p&gt;

&lt;p&gt;Here are some gory details:&lt;/p&gt;

&lt;p&gt;There is sometimes a mismatch in expectations between the (string =&amp;gt; timestamp) cast and FromUTCTimestamp. Also, since the FromUTCTimestamp expression never sees the actual input string (the cast &quot;intercepts&quot; the input and converts it to a long timestamp before FromUTCTimestamp uses the value), FromUTCTimestamp cannot reject any input value that would exercise this mismatch in expectations.&lt;/p&gt;

&lt;p&gt;There is a similar mismatch in expectations in the (integer =&amp;gt; timestamp) cast and FromUTCTimestamp. As a result, Unix time input almost always produces incorrect output.&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;WhenthingsworkasexpectedforStringinput%3A&quot;&gt;&lt;/a&gt;When things work as expected for String input:&lt;/h3&gt;

&lt;p&gt;When from_utc_timestamp is passed a string time value with no time zone, DateTimeUtils.stringToTimestamp (called from a Cast expression) treats the datetime string as though it&apos;s in the user&apos;s local time zone. Because DateTimeUtils.stringToTimestamp is a general function, this is reasonable.&lt;/p&gt;

&lt;p&gt;As a result, FromUTCTimestamp&apos;s input is a timestamp shifted by the local time zone&apos;s offset. FromUTCTimestamp assumes this (or more accurately, a utility function called by FromUTCTimestamp assumes this), so the first thing it does is reverse-shift to get it back the correct value. Now that the long value has been shifted back to the correct timestamp value, it can now process it (by shifting it again based on the specified time zone).&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;WhenthingsgowrongwithStringinput%3A&quot;&gt;&lt;/a&gt;When things go wrong with String input:&lt;/h3&gt;

&lt;p&gt;When from_utc_timestamp is passed a string datetime value with an explicit time zone, stringToTimestamp honors that timezone and ignores the local time zone. stringToTimestamp does not shift the timestamp by the local timezone&apos;s offset, but by the timezone specified on the datetime string.&lt;/p&gt;

&lt;p&gt;Unfortunately, FromUTCTimestamp, which has no insight into the actual input or the conversion, still assumes the timestamp is shifted by the local time zone. So it reverse-shifts the long value by the local time zone&apos;s offset, which produces a incorrect timestamp (except in the case where the input datetime string just happened to have an explicit timezone that matches the local timezone). FromUTCTimestamp then uses this incorrect value for further processing.&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;WhenthingsgowrongforUnixtimeinput%3A&quot;&gt;&lt;/a&gt;When things go wrong for Unix time input:&lt;/h3&gt;

&lt;p&gt;The cast in this case simply multiplies the integer by 1000000. The cast does not shift the resulting timestamp by the local time zone&apos;s offset.&lt;/p&gt;

&lt;p&gt;Again, because FromUTCTimestamp&apos;s evaluation assumes a shifted timestamp, the result is wrong.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13145898">SPARK-23715</key>
            <summary>from_utc_timestamp returns incorrect results for some UTC date/time values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bersprockets">Bruce Robbins</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Mar 2018 23:51:08 +0000</created>
                <updated>Mon, 12 Dec 2022 18:11:02 +0000</updated>
                            <resolved>Fri, 21 Sep 2018 01:52:43 +0000</resolved>
                                    <version>2.3.0</version>
                                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16403183" author="bersprockets" created="Sat, 17 Mar 2018 01:14:33 +0000"  >&lt;p&gt;It almost seems like FromUTCTimestamp needs its own Cast expressions&#160;to handle (string =&amp;gt; timestamp) and (integer =&amp;gt; timestamp), along with some small refactoring of the datetime utility functions.&lt;/p&gt;</comment>
                            <comment id="16406836" author="bersprockets" created="Tue, 20 Mar 2018 18:31:23 +0000"  >&lt;p&gt;A fix to&#160;this requires some ugly hacking of the implicit casts&#160;rule and the Cast class. It doesn&apos;t seem worth the mess.&lt;/p&gt;

&lt;p&gt;New&#160;Timestamp types (with timezone awareness) might&#160;help with this issue.&lt;/p&gt;</comment>
                            <comment id="16431403" author="bersprockets" created="Mon, 9 Apr 2018 22:24:49 +0000"  >&lt;p&gt;I&apos;ve been convinced this is worth fixing, at least for String input values, since&#160;a user was actually seeing wrong results despite specifying a datetime value with&#160;a UTC timezone.&lt;/p&gt;

&lt;p&gt;One way to fix&#160;this is to create&#160;a new expression type for converting&#160;string values&#160;to timestamp values.&#160;The Analyzer would&#160;place&#160;this expression as a left child of&#160;FromUTCTimestamp, if&#160;needed. This new expression type would&#160;be more aware of&#160;FromUTCTimestamp&apos;s expectations than a general purpose Cast expression (for example, it could reject string datetime values that contain an explicit timezone).&lt;/p&gt;

&lt;p&gt;Any opinions? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cloud_fan&quot; class=&quot;user-hover&quot; rel=&quot;cloud_fan&quot;&gt;cloud_fan&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smilegator&quot; class=&quot;user-hover&quot; rel=&quot;smilegator&quot;&gt;smilegator&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="16438982" author="cloud_fan" created="Mon, 16 Apr 2018 04:52:46 +0000"  >&lt;p&gt;is there a standard definition of from_utc_timestamp? How shall we treat the input timestamp? a UTC timestamp or a local timezone timestamp?&lt;/p&gt;</comment>
                            <comment id="16452790" author="bersprockets" created="Wed, 25 Apr 2018 18:02:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cloud_fan&quot; class=&quot;user-hover&quot; rel=&quot;cloud_fan&quot;&gt;cloud_fan&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ll give separate answers for String input and long input.&lt;/p&gt;

&lt;p&gt;1) String Input (e.g., &quot;2018-04-24 15:24:00&quot;)&lt;/p&gt;

&lt;p&gt;Across Impala, Hive, and Spark, the input to from_utc_timestamp is a UTC datetime value. They each work as expected when the user passes a UTC datetime value (with one exception for Spark, described below).&lt;/p&gt;

&lt;p&gt;Both Hive and Impala treat the string input as a UTC datetime value. That is, if you enter &apos;2018-04-24 15:24:00&apos;, from_utc_timestamp treats it as &apos;2018-04-24T15:00:00+00:00&apos; (or unix time 1524582000).&lt;/p&gt;

&lt;p&gt;Spark&apos;s from_utc_timezone function also treats it as a UTC datetime value. Internally, it treats it as a local time (for the above example, it initially treats it as &quot;2018-04-24T15:00:00-07:00&quot;), but then corrects itself later in the code path. But from the user&apos;s perspective, Spark&apos;s from_utc_timestamp treats the input string as a UTC datetime value as long as the user sticks with the formats &quot;yyyy-mm-dd HH:mm&quot; and &quot;yyyy-mm-dd&apos;T&apos;HH:mm&quot;.&lt;/p&gt;

&lt;p&gt;Once the user ventures away from those formats, bad things happen. If the user specifies a UTC datetime value with a timezone (e.g., &quot;2018-04-24T15:24:00+00:00&quot;), Spark&apos;s from_utc_timezone returns the wrong result. Also, the user can specify a datetime value with a non-UTC timezone, which makes no sense. These two issues are the subject of this Jira.&lt;/p&gt;

&lt;p&gt;In Hive and Impala, the user can only enter a datetime value in the format &quot;yyy-MM-dd HH:mm&quot;. With Hive and Impala,&#160;the user cannot enter a timezone specification.&lt;/p&gt;

&lt;p&gt;Besides the Spark bug described above,&#160;from_utc_timezone works the same between Impala, Hive, and Spark.&lt;/p&gt;

&lt;p&gt;Impala has a -use_local_tz_for_unix_timestamp_conversions setting which may (or may not) change the behavior if its from_utc_timestamp function. I have not tested it.&lt;/p&gt;

&lt;p&gt;IBM&apos;s DB2 also has a from_utc_timestamp function. I have not tested it, but the documentation says the input datetime value should be &apos;An expression that specifies the timestamp that is in the Coordinated Universal Time time zone&apos;, which is consistent with HIve, Impala, and Spark.&lt;/p&gt;

&lt;p&gt;2) Integer Input (e.g., 1524582000)&lt;/p&gt;

&lt;p&gt;Here Impala diverges from Spark and Hive.&lt;/p&gt;

&lt;p&gt;Impala treats the input as the number of seconds since the epoch 1970-01-01 00:00:00 UTC.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;gt; select from_utc_timestamp(cast(0 as timestamp), &quot;UTC&quot;) as result;
+---------------------+
| result              |
+---------------------+
| 1970-01-01 00:00:00 |
+---------------------+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Both Hive and Spark first shift the specified time by the local time zone. Since I am in timezone America/Los_Angeles, the input value is shifted by -8 hours, to&#160;1969-12-31 16:00:00 UTC:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; select from_utc_timestamp(0, &apos;UTC&apos;);
OK
1969-12-31 16:00:00

spark-sql&amp;gt; select from_utc_timestamp(cast(0 as timestamp), &apos;UTC&apos;);
1969-12-31 16:00:00


hive&amp;gt; select from_utc_timestamp(0, &apos;America/Los_Angeles&apos;);
OK
1969-12-31 08:00:00

spark-sql&amp;gt; select from_utc_timestamp(cast(0 as timestamp), &apos;America/Los_Angeles&apos;);
1969-12-31 08:00:00
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I also classified this behavior with integer input as a bug in this Jira. However, it is consistent with Hive, so I am not so sure.&lt;br/&gt;
&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16454221" author="cloud_fan" created="Thu, 26 Apr 2018 13:43:25 +0000"  >&lt;p&gt;It seems the `from_utc_timestamp` doesn&apos;t make a lot of sense in Spark SQL. The timestamp in Spark SQL is TIMESTAMP WITH LOCAL TIME ZONE according to the SQL standard. Physically it stores microseconds from unix epoch, and when it&apos;s involved in timezone aware operations, like convert to string format, get the hour component, etc., Spark SQL uses session local timezone to interpret it.&lt;/p&gt;

&lt;p&gt;That said, the timestamp in Spark does not carry the timezone information, so `from_utc_timestamp` doesn&apos;t make sense in Spark to change the timezone of a timestamp.&lt;/p&gt;

&lt;p&gt;`from_utc_timestamp` was added in Spark 1.5, I think we can&apos;t remove it now, we should think of a reasonable definition for it to make it work as users expect. What do users expect?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
scala&amp;gt; sql(&lt;span class=&quot;code-quote&quot;&gt;&quot;select from_utc_timestamp(&lt;span class=&quot;code-quote&quot;&gt;&apos;2018-01-01 00:00:00&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;GMT+8&apos;&lt;/span&gt;)&quot;&lt;/span&gt;).show
+-----------------------------------------------------------------+
|from_utc_timestamp(CAST(2018-01-01 00:00:00 AS TIMESTAMP), GMT+8)|
+-----------------------------------------------------------------+
|                                              2018-01-01 08:00:00|
+-----------------------------------------------------------------+

scala&amp;gt; spark.conf.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;spark.sql.session.timeZone&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;GMT+4&quot;&lt;/span&gt;)

scala&amp;gt; sql(&lt;span class=&quot;code-quote&quot;&gt;&quot;select from_utc_timestamp(&lt;span class=&quot;code-quote&quot;&gt;&apos;2018-01-01 00:00:00&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;GMT+8&apos;&lt;/span&gt;)&quot;&lt;/span&gt;).show
+-----------------------------------------------------------------+
|from_utc_timestamp(CAST(2018-01-01 00:00:00 AS TIMESTAMP), GMT+8)|
+-----------------------------------------------------------------+
|                                              2018-01-01 08:00:00|
+-----------------------------------------------------------------+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The expected behavior is to shift the timestamp from UTC to the specified timezone, assuming the timestamp is timezone-agnostic. So the session local timezone should not affect the result. This also means the timestamp string can&apos;t carry the timezone and this is a bug in Spark.&lt;/p&gt;

&lt;p&gt;For integer input:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
scala&amp;gt; java.util.TimeZone.getDefault.getID
res27: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; = Asia/Shanghai  &lt;span class=&quot;code-comment&quot;&gt;// This is GMT+8
&lt;/span&gt;
scala&amp;gt; sql(&lt;span class=&quot;code-quote&quot;&gt;&quot;select from_utc_timestamp(&lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(0 as timestamp), &lt;span class=&quot;code-quote&quot;&gt;&apos;GMT+8&apos;&lt;/span&gt;)&quot;&lt;/span&gt;).show
+-----------------------------------------------+
|from_utc_timestamp(CAST(0 AS TIMESTAMP), GMT+8)|
+-----------------------------------------------+
|                            1970-01-01 16:00:00|
+-----------------------------------------------+


scala&amp;gt; spark.conf.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;spark.sql.session.timeZone&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;GMT+4&quot;&lt;/span&gt;)

scala&amp;gt; sql(&lt;span class=&quot;code-quote&quot;&gt;&quot;select from_utc_timestamp(&lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(0 as timestamp), &lt;span class=&quot;code-quote&quot;&gt;&apos;GMT+8&apos;&lt;/span&gt;)&quot;&lt;/span&gt;).show
+-----------------------------------------------+
|from_utc_timestamp(CAST(0 AS TIMESTAMP), GMT+8)|
+-----------------------------------------------+
|                            1970-01-01 12:00:00|
+-----------------------------------------------+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;so what happened is, `cast(0 as timestamp)` assumes the input integer is seconds from unix epoch, and it converts the seconds to microseconds and done, no timezone information is needed. According to the semantic of Spark timestamp, `cast(0 as timestamp)` is effectively `1970-01-01 08:00:00`(local timezone is GMT+8) as an input to `from_utc_timestamp`, and that&apos;s why the result is `1970-01-01 16:00:00`. And the result changes if the local timezone changes.&lt;/p&gt;

&lt;p&gt;Since this behavior is consistent with Hive, let&apos;s stick with it. Personly I don&apos;t think it&apos;s the corrected behavior but it&apos;s too late to change, and we don&apos;t have to change as long as it&apos;s well defined, i.e. the result is deterministic.&lt;/p&gt;

&lt;p&gt;Now the only thing we need to change is, if input is string, return null if it contains timezone.&lt;/p&gt;</comment>
                            <comment id="16454462" author="apachespark" created="Thu, 26 Apr 2018 16:09:05 +0000"  >&lt;p&gt;User &apos;cloud-fan&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/21169&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/21169&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16457604" author="gurwls223" created="Sat, 28 Apr 2018 13:29:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bersprockets&quot; class=&quot;user-hover&quot; rel=&quot;bersprockets&quot;&gt;bersprockets&lt;/a&gt;, mind if I ask to clarify &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;In Hive and Impala, the user can only enter a datetime value in the format &quot;yyy-MM-dd HH:mm&quot;. With Hive and Impala, the user cannot enter a timezone specification.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;?&lt;/p&gt;

&lt;p&gt;I was double checking it but seems Hive accepts timezone part in the input:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hive&amp;gt; select from_utc_timestamp(&lt;span class=&quot;code-quote&quot;&gt;&apos;2000-10-10 00:00:00+00:00&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;PST&apos;&lt;/span&gt;);
2000-10-10 01:00:00
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16457657" author="bersprockets" created="Sat, 28 Apr 2018 15:24:22 +0000"  >&lt;p&gt;Maybe a configuration setting or difference between versions?&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; select from_utc_timestamp(&apos;2000-10-10 00:00:00+00:00&apos;, &apos;PST&apos;);
OK
NULL
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Also the docs say:&lt;/p&gt;

&lt;p&gt;Supported conversions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Strings: JDBC compliant java.sql.Timestamp format &quot;YYYY-MM-DD HH:MM:SS.fffffffff&quot; (9 decimal place precision)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I am not a Hive user, so I am going by the document and the above test.&lt;/p&gt;</comment>
                            <comment id="16457658" author="gurwls223" created="Sat, 28 Apr 2018 15:28:54 +0000"  >&lt;p&gt;I used the (almost) latest build one. Will double check and track the JIRA tomorrow (it&apos;s quite late in my time). Which version did you use?&lt;/p&gt;</comment>
                            <comment id="16457665" author="bersprockets" created="Sat, 28 Apr 2018 15:45:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;Which version did you use?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The jars all say &quot;2.1.1&quot;.&lt;/p&gt;

&lt;p&gt;I can check about datetime string formats with some Hive experts on Monday.&lt;/p&gt;

&lt;p&gt;By the way, that Hive result is still not correct (but might be consistent with Spark, depending on your timezone).&lt;/p&gt;</comment>
                            <comment id="16457669" author="gurwls223" created="Sat, 28 Apr 2018 15:49:15 +0000"  >&lt;p&gt;Yea but was just wondering what behaviour Hive wants. It should be good to read the discussion if there&apos;s a JIRA for it. Timezone stuff always makes me think multiple times for a while.&lt;/p&gt;

&lt;p&gt;FYI, my timezone is Singapore Timezone. &lt;/p&gt;</comment>
                            <comment id="16457674" author="bersprockets" created="Sat, 28 Apr 2018 16:03:59 +0000"  >&lt;p&gt;Could be this: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-14412&quot; title=&quot;Add timestamp with time zone&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-14412&quot;&gt;&lt;del&gt;HIVE-14412&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16457754" author="bersprockets" created="Sat, 28 Apr 2018 18:56:42 +0000"  >&lt;p&gt;I just downloaded and installed hive-2.3.3 (3 April 2018) from Apache and ran it in standalone mode. I still see the behavior I earlier reported:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; select from_utc_timestamp(&apos;2000-10-10 00:00:00&apos;, &apos;PST&apos;);
OK
2000-10-09 17:00:00
Time taken: 0.016 seconds, Fetched: 1 row(s)
hive&amp;gt; select from_utc_timestamp(&apos;2000-10-10 00:00:00+00:00&apos;, &apos;PST&apos;);
OK
NULL
Time taken: 0.015 seconds, Fetched: 1 row(s)
hive&amp;gt;


$ hive --version
Hive 2.3.3
Git git://daijymacpro-2.local/Users/daijy/commit/hive -r 8a511e3f79b43d4be41cd231cf5c99e43b248383
Compiled by daijy on Wed Mar 28 16:58:33 PDT 2018
From source with checksum 8873bba6c55a058614e74c0e628ab022
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Maybe you are running Hive-on-Spark?&lt;/p&gt;</comment>
                            <comment id="16457874" author="bersprockets" created="Sun, 29 Apr 2018 01:18:44 +0000"  >&lt;p&gt;I might understand what&apos;s going on with Hive.&lt;/p&gt;

&lt;p&gt;In the latest released version of Hive (2..3), their timestamp converter code uses java.sql.Timestamp to convert string inputs, which expects JDBC escaped format (yyyy-mm-dd hh:mm:ss.fffffffff)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hive/blob/branch-2.3/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java#L1181&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/blob/branch-2.3/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java#L1181&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In the Hive master branch however, it looks like they added some code to try to parse a string value containing&#160;a timezone, if java.sql.Timestamp.valueOf fails:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hive/blob/master/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java#L1250&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/blob/master/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java#L1250&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hyukjin.kwon&quot; class=&quot;user-hover&quot; rel=&quot;hyukjin.kwon&quot;&gt;hyukjin.kwon&lt;/a&gt; Is it possible you tested on the master branch?&lt;/p&gt;

&lt;p&gt;If this is the explanation, then Hive does not share Spark&apos;s bug &lt;em&gt;yet&lt;/em&gt;, but they will soon.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16457888" author="cloud_fan" created="Sun, 29 Apr 2018 02:45:07 +0000"  >&lt;p&gt;`from_utc_timestamp` is also in some traditional RDBMS like DB2. From the DB2 doc: &lt;a href=&quot;https://www.ibm.com/support/knowledgecenter/en/SS6NHC/com.ibm.swg.im.dashdb.sql.ref.doc/doc/r0061916.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.ibm.com/support/knowledgecenter/en/SS6NHC/com.ibm.swg.im.dashdb.sql.ref.doc/doc/r0061916.html&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&amp;gt; An expression that specifies the timestamp that is in the Coordinated Universal Time time zone.&lt;/p&gt;

&lt;p&gt;I think this is a reasonable definition and we should reject timestamp string that contains timezone. We can look at more databases and follow the mainstream.&lt;/p&gt;</comment>
                            <comment id="16457892" author="bersprockets" created="Sun, 29 Apr 2018 03:06:05 +0000"  >&lt;p&gt;Still, I filed an Jira with Hive so they won&apos;t release this bug. Currently this bug does not exist in any release available in their downloads page.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-19354&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-19354&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16457893" author="gurwls223" created="Sun, 29 Apr 2018 03:10:31 +0000"  >&lt;p&gt;I already built Hive from source. I did this against branch-3 since it will be released soon if I followed up the discussion in Apache Hive correctly.&lt;br/&gt;
 I double checked against master - &lt;a href=&quot;https://github.com/apache/hive/commit/8349dbde55f479167e43cfd1f089e131d4271e5b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/commit/8349dbde55f479167e43cfd1f089e131d4271e5b&lt;/a&gt; for this time:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hive&amp;gt; select from_utc_timestamp(&lt;span class=&quot;code-quote&quot;&gt;&apos;2000-10-10 00:00:00&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;PST&apos;&lt;/span&gt;);
2000-10-09 17:00:00
hive&amp;gt; select from_utc_timestamp(&lt;span class=&quot;code-quote&quot;&gt;&apos;2000-10-10 00:00:00+00:00&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;PST&apos;&lt;/span&gt;);
2000-10-10 01:00:00

./bin/hive --version
SLF4J: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/.../apache-hive-3.1.0-SNAPSHOT-bin/lib/log4j-slf4j-impl-2.10.0.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/.../hadoop-2.7.5/share/hadoop/common/lib/slf4j-log4j12-1.7.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http:&lt;span class=&quot;code-comment&quot;&gt;//www.slf4j.org/codes.html#multiple_bindings &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; an explanation.
&lt;/span&gt;SLF4J: Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]
Hive 3.1.0-SNAPSHOT
Git git:&lt;span class=&quot;code-comment&quot;&gt;//.../hive -r 8349dbde55f479167e43cfd1f089e131d4271e5b
&lt;/span&gt;Compiled by hkwon on Sun Apr 29 10:55:51 +08 2018
From source with checksum 79b284fcc099c917cc1aba844ab65e6f
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16457894" author="gurwls223" created="Sun, 29 Apr 2018 03:11:45 +0000"  >&lt;p&gt;Right, I agree with the PR approach. I just found a small delta and wanted to double check.&lt;/p&gt;</comment>
                            <comment id="16457896" author="bersprockets" created="Sun, 29 Apr 2018 03:25:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hyukjin.kwon&quot; class=&quot;user-hover&quot; rel=&quot;hyukjin.kwon&quot;&gt;hyukjin.kwon&lt;/a&gt; Yes, I also built from sources and I could reproduce there. I could not reproduce on a released version. Anyway, I just don&apos;t want Hive to introduce the same bug.&lt;/p&gt;</comment>
                            <comment id="16462294" author="gurwls223" created="Thu, 3 May 2018 11:27:42 +0000"  >&lt;p&gt;Issue resolved by pull request 21169&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/21169&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/21169&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16621395" author="rxin" created="Thu, 20 Sep 2018 01:42:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bersprockets&quot; class=&quot;user-hover&quot; rel=&quot;bersprockets&quot;&gt;bersprockets&lt;/a&gt; i think we should revert the change while we still can (before 2.4 release).&lt;/p&gt;

&lt;p&gt;Spark treats timestamps very differently from Impala. IIUC, Impala basically&#160;implements the ansi sql timestamp without timezone, whereas Spark implements internally just absolute UTC time. These two functions make a lot of sense for the ansi sql timestamp, but not Spark&apos;s timestamp. In Spark&apos;s timestamp, there is no need to convert something from UTC time to a local time, because it&apos;s when a timestamp is displayed, the time is interpreted using the session local timezone already. These two functions in hindsight were added by mistake, unless we overhaul Spark&apos;s timestamp semantics.&lt;/p&gt;

&lt;p&gt;You identified one example of the result being different in Spark vs Impala, but there are tons of other differences as a result of how timestamp is implemented. These fundamental differences cannot be reconciled by fixing the differences one by one.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I think we should deprecate these two functions in Spark 3.0. And for now, we should document them more clearly, by explaining what the actual semantics are, which is to take a timestamp, and actually shift the underlying utc time so the timestamp would be displayed in string form to be the time in the target timezone. We are literally shifting the absolute utc time here.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16621405" author="rxin" created="Thu, 20 Sep 2018 01:49:22 +0000"  >&lt;p&gt;Also I reject the notion that the old behavior was &quot;incorrect&quot;. Correctness depends on the defined semantics. There&apos;s no clear standard for this for the type of timestamp type Spark implements, and as a result that can&apos;t be &quot;incorrect&quot;.&lt;/p&gt;</comment>
                            <comment id="16621452" author="bersprockets" created="Thu, 20 Sep 2018 03:12:55 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rxin&quot; class=&quot;user-hover&quot; rel=&quot;rxin&quot;&gt;rxin&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thanks for following up with me. This is a weird one.&lt;/p&gt;

&lt;p&gt;I filed the Jira because a user can specify &lt;em&gt;what appears to be&lt;/em&gt; the same&#160;UTC value, in slightly different forms, and get different results:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;scala&amp;gt; df.select(from_utc_timestamp(lit(&quot;2018-09-19T00:00:00&quot;), &quot;GMT+1&quot; ).as(&quot;dt&quot;)).show
+-------------------+
|                 dt|
+-------------------+
|2018-09-19 01:00:00|
+-------------------+

scala&amp;gt; df.select(from_utc_timestamp(lit(&quot;2018-09-19T00:00:00+00:00&quot;), &quot;GMT+1&quot; ).as(&quot;dt&quot;)).show
+-------------------+
|                 dt|
+-------------------+
|2018-09-18 18:00:00|
+-------------------+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I recognize that in the first case , the user is not actually entering a UTC timestamp, but a timestamp in his/her&#160;local time zone (let&apos;s say Pacific time). And I also recognize that the response only appears&#160;correct, but is really &quot;2018-09-19 01:00:00-07:00&quot;, not &quot;2018-09-19 01:00:00+GMT+1&quot;. However, if the user always deals with timezone-free strings, it kinda works out.&lt;/p&gt;

&lt;p&gt;I also recognize that the second &quot;wrong&quot; example is probably&#160;more correct (because &quot;2018-09-18 18:00:00-07:00&quot; is also &quot;2018-09-19 01:00:00+GMT+1&quot;, which is the expected answer). Although more correct, it&apos;s not helpful.&lt;/p&gt;

&lt;p&gt;Despite reality,&#160;from the user&apos;s perspective, he/she&#160;is entering&#160;the same UTC timestamp and getting different results.&lt;/p&gt;

&lt;p&gt;I am not sure how you could document this so that it makes sense to a user.&#160;I don&apos;t have strong feelings about reverting the fix if someone can figure out how to document this.&lt;/p&gt;

&lt;p&gt;Deprecating these UTC&#160;functions makes sense (at least until a timezone-agnostic data type is defined, if ever).&lt;/p&gt;</comment>
                            <comment id="16622802" author="rxin" created="Thu, 20 Sep 2018 22:26:34 +0000"  >&lt;p&gt;Great discussions. Since you don&apos;t mind, let&apos;s revert the patch in 2.4 and see how we can deprecate these functions in 3.0. My sense is that we have a config to fail queries that use these queries, and the config is on by default. The error message can tell users to turn the configs off to enable these functions for backward compatibility, if they know what they are doing.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cloud_fan&quot; class=&quot;user-hover&quot; rel=&quot;cloud_fan&quot;&gt;cloud_fan&lt;/a&gt; can you revert?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16622820" author="apachespark" created="Thu, 20 Sep 2018 22:41:15 +0000"  >&lt;p&gt;User &apos;gatorsmile&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/22505&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/22505&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16622821" author="apachespark" created="Thu, 20 Sep 2018 22:41:53 +0000"  >&lt;p&gt;User &apos;gatorsmile&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/22505&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/22505&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16622928" author="cloud_fan" created="Fri, 21 Sep 2018 00:59:01 +0000"  >&lt;p&gt;I have no idea how to document the current behavior. Shall we deprecate them in 2.4, fail queries using them by default in 2.5 and remove them in 3.0?&lt;/p&gt;</comment>
                            <comment id="16622932" author="rxin" created="Fri, 21 Sep 2018 01:10:19 +0000"  >&lt;p&gt;we can&apos;t fail queries in 2.x.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16622953" author="rxin" created="Fri, 21 Sep 2018 01:49:53 +0000"  >&lt;p&gt;the current behavior is that it only takes a timestamp type data right? if it is a string one, it gets cast to timestamp following cast&apos;s semantics.&lt;/p&gt;</comment>
                            <comment id="16622956" author="cloud_fan" created="Fri, 21 Sep 2018 01:58:40 +0000"  >&lt;p&gt;I&apos;ll write one and emphasize the behavior of casting string to timestamp. Will ping you guys later.&lt;/p&gt;</comment>
                            <comment id="16626926" author="apachespark" created="Tue, 25 Sep 2018 07:39:09 +0000"  >&lt;p&gt;User &apos;cloud-fan&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/22543&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/22543&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16626927" author="apachespark" created="Tue, 25 Sep 2018 07:39:50 +0000"  >&lt;p&gt;User &apos;cloud-fan&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/22543&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/22543&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13186519">SPARK-25496</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rfnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>