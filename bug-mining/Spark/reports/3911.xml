<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:46:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-16966] App Name is a randomUUID even when &quot;spark.app.name&quot; exists</title>
                <link>https://issues.apache.org/jira/browse/SPARK-16966</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;When submitting an application with &quot;--name&quot;:&lt;/p&gt;

&lt;p&gt;./bin/spark-submit --name myApplicationTest --verbose --executor-cores 3 --num-executors 1 --master yarn --deploy-mode client --class org.apache.spark.examples.SparkKMeans examples/target/original-spark-examples_2.11-2.1.0-SNAPSHOT.jar hdfs://localhost:9000/lr_big.txt 2 5&lt;/p&gt;

&lt;p&gt;In the history server UI:&lt;br/&gt;
App ID: application_1470694797714_0016&lt;br/&gt;
App Name: 70c06dc5-1b99-4b4a-a826-ea27497e977b&lt;/p&gt;

&lt;p&gt;The App Name should not be a randomUUID &quot;70c06dc5-1b99-4b4a-a826-ea27497e977b&quot;  since the &quot;spark.app.name&quot; was myApplicationTest.&lt;/p&gt;

&lt;p&gt;The application &quot;org.apache.spark.examples.SparkKMeans&quot; above did not invoke &quot;.appName()&quot;. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12995859">SPARK-16966</key>
            <summary>App Name is a randomUUID even when &quot;spark.app.name&quot; exists</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srowen">Sean R. Owen</assignee>
                                    <reporter username="WeiqingYang">Weiqing Yang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Aug 2016 06:37:42 +0000</created>
                <updated>Wed, 17 Aug 2016 11:07:36 +0000</updated>
                            <resolved>Sat, 13 Aug 2016 22:40:22 +0000</resolved>
                                                    <fixVersion>2.0.1</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15413059" author="apachespark" created="Tue, 9 Aug 2016 06:53:06 +0000"  >&lt;p&gt;User &apos;Sherry302&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/14556&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/14556&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15413167" author="srowen" created="Tue, 9 Aug 2016 08:11:15 +0000"  >&lt;p&gt;Hm, but SparkKMeans and other examples do call appName(). Even without setting &lt;tt&gt;--name&lt;/tt&gt; I don&apos;t see why this ends up with a UUID for a name. (You aren&apos;t by chance using an old or modified example &amp;#8211; wasn&apos;t sure what &quot;original-spark-examples&quot; is?)&lt;/p&gt;

&lt;p&gt;The problem here is that the builder options override SparkConf settings. And, if you don&apos;t specify a name in the builder options, it will still set a random one in the options, which then override anything set elsewhere like in Spark submit I think those three lines of code should be removed because SparkSubmit will have already ensured spark.app.name is set to something. If that isn&apos;t used, or the app doesn&apos;t set one directly, it&apos;s an error.&lt;/p&gt;

&lt;p&gt;CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rxin&quot; class=&quot;user-hover&quot; rel=&quot;rxin&quot;&gt;rxin&lt;/a&gt; if possible for a comment because of &lt;a href=&quot;https://github.com/apache/spark/commit/f2ee0ed4b7ecb2855cc4928a9613a07d45446f4e#diff-d91c284798f1c98bf03a31855e26d71cR768&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/commit/f2ee0ed4b7ecb2855cc4928a9613a07d45446f4e#diff-d91c284798f1c98bf03a31855e26d71cR768&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15413201" author="jerryshao" created="Tue, 9 Aug 2016 08:35:46 +0000"  >&lt;p&gt;Yes, agreed. A better way is to handle this app name thing in &lt;tt&gt;SparkSubmitArguments&lt;/tt&gt;, And there&apos;s already a bunch of codes there to figure out a proper app name. It is really not so intuitive to use a random UUID as app name. We can always guarantee app name is figured out in &lt;tt&gt;SparkSubmitArguments&lt;/tt&gt; so that 3 lines can be removed.&lt;/p&gt;</comment>
                            <comment id="15413810" author="weiqingyang" created="Tue, 9 Aug 2016 16:34:20 +0000"  >&lt;p&gt;In the tests, I modified org.apache.spark.examples.SparkKMeans (code is from spark master branch), commented its appName() call. &lt;/p&gt;

&lt;p&gt;   val spark = SparkSession&lt;br/&gt;
      .builder&lt;br/&gt;
      // .appName(&quot;SparkKMeans&quot;)&lt;br/&gt;
      .getOrCreate()&lt;/p&gt;</comment>
                            <comment id="15413823" author="srowen" created="Tue, 9 Aug 2016 16:48:55 +0000"  >&lt;p&gt;OK, that explains that part then, thanks. The rest makes sense now.&lt;/p&gt;</comment>
                            <comment id="15413852" author="weiqingyang" created="Tue, 9 Aug 2016 17:03:04 +0000"  >&lt;p&gt;Thanks for the quick feedback.&lt;/p&gt;

&lt;p&gt;If &quot;--name&quot; is not configured and appName() is not called,  &quot;spark.app.name&quot; will be &quot;mainClass&quot;&lt;br/&gt;
-------------------------------------------&lt;br/&gt;
 // Set name from main class if not given&lt;br/&gt;
    name = Option(name).orElse(Option(mainClass)).orNull&lt;br/&gt;
------------------------------------------&lt;/p&gt;

&lt;p&gt;If &quot;mainClass&quot; is always there, I think removing those three lines of code will be safe, but for pyspark and sparkr, the mainclass might be none, is it safe to remove those three lines of code? What do you think? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srowen&quot; class=&quot;user-hover&quot; rel=&quot;srowen&quot;&gt;srowen&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jerryshao&quot; class=&quot;user-hover&quot; rel=&quot;jerryshao&quot;&gt;jerryshao&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15413866" author="srowen" created="Tue, 9 Aug 2016 17:15:43 +0000"  >&lt;p&gt;It will be the name of the class executing, right? All that sounds correct. If the user isn&apos;t specifying a name, any reasonable name (and no error) seems like fine behavior. Right now it seems like &lt;tt&gt;--name&lt;/tt&gt; is always clobbered by the value in SparkSession, which doesn&apos;t seem right.&lt;/p&gt;</comment>
                            <comment id="15413921" author="weiqingyang" created="Tue, 9 Aug 2016 18:00:40 +0000"  >&lt;p&gt;Yes, it will be the name of the class executing.&lt;/p&gt;</comment>
                            <comment id="15414481" author="jerryshao" created="Wed, 10 Aug 2016 00:06:32 +0000"  >&lt;p&gt;Here is the code in &lt;tt&gt;SparkSubmitArguments&lt;/tt&gt; to handle the name thing:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-comment&quot;&gt;// Set name from main &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not given
&lt;/span&gt;    name = Option(name).orElse(Option(mainClass)).orNull
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (name == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; primaryResource != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      name = Utils.stripDirectory(primaryResource)
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It could handle SparkPy and SparkR scenario by using the file name.&lt;/p&gt;

&lt;p&gt;So from my understanding, if we can make sure here &lt;tt&gt;name&lt;/tt&gt; is not null, it is safe to remove the codes in &lt;tt&gt;SparkSession&lt;/tt&gt;. &lt;/p&gt;</comment>
                            <comment id="15414778" author="weiqingyang" created="Wed, 10 Aug 2016 06:06:30 +0000"  >&lt;p&gt;Thanks for the feedback. I will update my PR to remove those three lines of code.&lt;/p&gt;</comment>
                            <comment id="15417007" author="apachespark" created="Thu, 11 Aug 2016 10:43:05 +0000"  >&lt;p&gt;User &apos;srowen&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/14602&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/14602&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15419968" author="apachespark" created="Sat, 13 Aug 2016 15:35:05 +0000"  >&lt;p&gt;User &apos;srowen&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/14630&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/14630&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15420116" author="weiqingyang" created="Sat, 13 Aug 2016 23:20:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srowen&quot; class=&quot;user-hover&quot; rel=&quot;srowen&quot;&gt;srowen&lt;/a&gt; Thanks for the new PR and review.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12997875">SPARK-17105</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 14 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i322nb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>