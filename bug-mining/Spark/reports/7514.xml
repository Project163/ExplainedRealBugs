<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:19:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-33105] Broken installation of source packages on AppVeyor</title>
                <link>https://issues.apache.org/jira/browse/SPARK-33105</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;It looks like AppVeyor configuration is broken, which leads to failure of installation of  source packages (become a problem when &lt;tt&gt;rlang&lt;/tt&gt; has been updated from 0.4.7 and 0.4.8, with latter available only as a source package).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

[00:01:48] trying URL
&lt;span class=&quot;code-quote&quot;&gt;&apos;https:&lt;span class=&quot;code-comment&quot;&gt;//cloud.r-project.org/src/contrib/rlang_0.4.8.tar.gz&apos;&lt;/span&gt;
&lt;/span&gt;[00:01:48] Content type &lt;span class=&quot;code-quote&quot;&gt;&apos;application/x-gzip&apos;&lt;/span&gt; length 847517 bytes (827 KB)
[00:01:48] ==================================================
[00:01:48] downloaded 827 KB
[00:01:48] 
[00:01:48] Warning in strptime(xx, f, tz = tz) :
[00:01:48]   unable to identify current timezone &lt;span class=&quot;code-quote&quot;&gt;&apos;C&apos;&lt;/span&gt;:
[00:01:48] please set environment variable &lt;span class=&quot;code-quote&quot;&gt;&apos;TZ&apos;&lt;/span&gt;
[00:01:49] * installing *source* &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;rlang&apos;&lt;/span&gt; ...
[00:01:49] ** &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;rlang&apos;&lt;/span&gt; successfully unpacked and MD5 sums checked
[00:01:49] ** using staged installation
[00:01:49] ** libs
[00:01:49] 
[00:01:49] *** arch - i386
[00:01:49] C:/Rtools40/mingw64/bin/gcc  -I&lt;span class=&quot;code-quote&quot;&gt;&quot;C:/R/include&quot;&lt;/span&gt; -DNDEBUG
-I./lib/         -O2 -Wall  -std=gnu99 -mfpmath=sse -msse2
-mstackrealign -c capture.c -o capture.o
[00:01:49] C:/Rtools40/mingw64/bin/gcc  -I&lt;span class=&quot;code-quote&quot;&gt;&quot;C:/R/include&quot;&lt;/span&gt; -DNDEBUG
-I./lib/         -O2 -Wall  -std=gnu99 -mfpmath=sse -msse2
-mstackrealign -c export.c -o export.o
[00:01:49] C:/Rtools40/mingw64/bin/gcc  -I&lt;span class=&quot;code-quote&quot;&gt;&quot;C:/R/include&quot;&lt;/span&gt; -DNDEBUG
-I./lib/         -O2 -Wall  -std=gnu99 -mfpmath=sse -msse2
-mstackrealign -c internal.c -o internal.o
[00:01:50] In file included from ./lib/rlang.h:74,
[00:01:50]                  from internal/arg.c:1,
[00:01:50]                  from internal.c:1:
[00:01:50] internal/eval-tidy.c: In function &lt;span class=&quot;code-quote&quot;&gt;&apos;rlang_tilde_eval&apos;&lt;/span&gt;:
[00:01:50] ./lib/env.h:33:10: warning: &lt;span class=&quot;code-quote&quot;&gt;&apos;top&apos;&lt;/span&gt; may be used uninitialized
in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; function [-Wmaybe-uninitialized]
[00:01:50]    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ENCLOS(env);
[00:01:50]           ^~~~~~~~~~~
[00:01:50] In file included from internal.c:8:
[00:01:50] internal/eval-tidy.c:406:9: note: &lt;span class=&quot;code-quote&quot;&gt;&apos;top&apos;&lt;/span&gt; was declared here
[00:01:50]    sexp* top;
[00:01:50]          ^~~
[00:01:50] C:/Rtools40/mingw64/bin/gcc  -I&lt;span class=&quot;code-quote&quot;&gt;&quot;C:/R/include&quot;&lt;/span&gt; -DNDEBUG
-I./lib/         -O2 -Wall  -std=gnu99 -mfpmath=sse -msse2
-mstackrealign -c lib.c -o lib.o
[00:01:51] C:/Rtools40/mingw64/bin/gcc  -I&lt;span class=&quot;code-quote&quot;&gt;&quot;C:/R/include&quot;&lt;/span&gt; -DNDEBUG
-I./lib/         -O2 -Wall  -std=gnu99 -mfpmath=sse -msse2
-mstackrealign -c version.c -o version.o
[00:01:52] C:/Rtools40/mingw64/bin/gcc -shared -s -&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;-libgcc -o
rlang.dll tmp.def capture.o export.o internal.o lib.o version.o
-LC:/R/bin/i386 -lR
[00:01:52]
c:/Rtools40/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/8.3.0/../../../../x86_64-w64-mingw32/bin/ld.exe:
skipping incompatible C:/R/bin/i386/R.dll when searching &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; -lR
[00:01:52]
c:/Rtools40/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/8.3.0/../../../../x86_64-w64-mingw32/bin/ld.exe:
skipping incompatible C:/R/bin/i386/R.dll when searching &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; -lR
[00:01:52]
c:/Rtools40/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/8.3.0/../../../../x86_64-w64-mingw32/bin/ld.exe:
cannot find -lR
[00:01:52] collect2.exe: error: ld returned 1 exit status
[00:01:52] no DLL was created
[00:01:52] ERROR: compilation failed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;rlang&apos;&lt;/span&gt;
[00:01:52] * removing &lt;span class=&quot;code-quote&quot;&gt;&apos;C:/RLibrary/rlang&apos;&lt;/span&gt;
[00:01:52] 
[00:01:52] The downloaded source packages are in
[00:01:52]    
&lt;span class=&quot;code-quote&quot;&gt;&apos;C:\Users\appveyor\AppData\Local\Temp\1\Rtmp8qrryA\downloaded_packages&apos;&lt;/span&gt;
[00:01:52] Warning message:
[00:01:52] In install.packages(c(&lt;span class=&quot;code-quote&quot;&gt;&quot;knitr&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;rmarkdown&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;testthat&quot;&lt;/span&gt;,
&lt;span class=&quot;code-quote&quot;&gt;&quot;e1071&quot;&lt;/span&gt;,  :
[00:01:52]   installation of &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;rlang&apos;&lt;/span&gt; had non-zero exit status 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This leads to failures to install &lt;tt&gt;devtools&lt;/tt&gt; and generate Rd files and, as a result, CRAN check failure.&lt;/p&gt;

&lt;p&gt;There are some discrepancies in the &lt;tt&gt;dev/appveyor-install-dependencies.ps1&lt;/tt&gt;, but the direct source of this issue seems to be &lt;tt&gt;$env:BINPREF&lt;/tt&gt;, which forces usage of 64 bit mingw, even if packages are compiled for 32 bit. &lt;/p&gt;

&lt;p&gt;Modifying the variable to include current architecture:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$env:BINPREF=$RtoolsDrive + &lt;span class=&quot;code-quote&quot;&gt;&apos;/Rtools40/mingw$(WIN)/bin/&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(as proposed &lt;a href=&quot;https://stackoverflow.com/a/44035904&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; by R Yoda) looks like a valid fix, though we might want to clean remaining issues as well.&lt;/p&gt;</description>
                <environment>&lt;p&gt;&lt;b&gt;strong text&lt;/b&gt;&lt;/p&gt;</environment>
        <key id="13334732">SPARK-33105</key>
            <summary>Broken installation of source packages on AppVeyor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zero323">Maciej Szymkiewicz</assignee>
                                    <reporter username="zero323">Maciej Szymkiewicz</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Oct 2020 22:30:54 +0000</created>
                <updated>Mon, 12 Dec 2022 18:10:52 +0000</updated>
                            <resolved>Sat, 10 Oct 2020 04:50:04 +0000</resolved>
                                    <version>3.1.0</version>
                                    <fixVersion>3.1.0</fixVersion>
                                    <component>Project Infra</component>
                    <component>R</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17211456" author="apachespark" created="Fri, 9 Oct 2020 22:52:23 +0000"  >&lt;p&gt;User &apos;zero323&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/29991&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/29991&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17211558" author="gurwls223" created="Sat, 10 Oct 2020 04:50:05 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/spark/pull/29991&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/29991&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 5 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0jky0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>