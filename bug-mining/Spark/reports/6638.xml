<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:06:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-28621] CheckCartesianProducts may throw some error which mismatch generated physical plan</title>
                <link>https://issues.apache.org/jira/browse/SPARK-28621</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;CheckCartesianProducts check logical plan which mismatch the physical plan. So when option &quot;spark.sql.crossJoin.enabled&quot; turn off (by default), it may throw some mismatching error which make user confusing.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;There&apos;re some cases:&lt;/p&gt;

&lt;p&gt;1) The sql optimizer will possibly do join reordering. So that if one join marked by &quot;CROSS JOIN&quot; syntax, it may be reordered in the&#160;physical plan. So here&#160;CheckCartesianProducts only check logical plan which will possibly mismatch the physical plan.&lt;/p&gt;

&lt;p&gt;2) Other places which may be inconsistent with&#160;physical plan:&lt;/p&gt;

&lt;p&gt;providing:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
spark.range(2).createOrReplaceTempView(&lt;span class=&quot;code-quote&quot;&gt;&quot;sm1&quot;&lt;/span&gt;) &lt;span class=&quot;code-comment&quot;&gt;// can be broadcast
&lt;/span&gt;spark.range(50000000).createOrReplaceTempView(&lt;span class=&quot;code-quote&quot;&gt;&quot;bg1&quot;&lt;/span&gt;) &lt;span class=&quot;code-comment&quot;&gt;// cannot be broadcast
&lt;/span&gt;spark.range(60000000).createOrReplaceTempView(&lt;span class=&quot;code-quote&quot;&gt;&quot;bg2&quot;&lt;/span&gt;) &lt;span class=&quot;code-comment&quot;&gt;// cannot be broadcast&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and suppose `spark.sql.crossJoin.enabled=false` (by default)&lt;/p&gt;

&lt;p&gt;1) Some join could be convert to broadcast nested loop join, but CheckCartesianProducts raise error. e.g.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
select sm1.id, bg1.id from bg1 join sm1 where sm1.id &amp;lt; bg1.id
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;2) Some join will run by CartesianJoin but CheckCartesianProducts DO NOT raise error. e.g.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
select bg1.id, bg2.id from bg1 join bg2 where bg1.id &amp;lt; bg2.id
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13248850">SPARK-28621</key>
            <summary>CheckCartesianProducts may throw some error which mismatch generated physical plan</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="weichenxu123">Weichen Xu</assignee>
                                    <reporter username="weichenxu123">Weichen Xu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Aug 2019 09:55:03 +0000</created>
                <updated>Tue, 27 Aug 2019 13:55:06 +0000</updated>
                            <resolved>Tue, 27 Aug 2019 13:55:06 +0000</resolved>
                                    <version>2.4.3</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16916742" author="cloud_fan" created="Tue, 27 Aug 2019 13:55:06 +0000"  >&lt;p&gt;Issue resolved by pull request 25520&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/25520&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/25520&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05bug:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>