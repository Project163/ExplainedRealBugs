<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:14:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-23435] R tests should support latest testthat</title>
                <link>https://issues.apache.org/jira/browse/SPARK-23435</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;To follow up on &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-22817&quot; title=&quot;Use fixed testthat version for SparkR tests in AppVeyor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-22817&quot;&gt;&lt;del&gt;SPARK-22817&lt;/del&gt;&lt;/a&gt;, the latest version of testthat, 2.0.0 was released in Dec 2017, and its method has been changed.&lt;/p&gt;

&lt;p&gt;In order for our tests to keep working, we need to detect that and call a different method.&lt;/p&gt;

&lt;p&gt;Jenkins is running 1.0.1 though, we need to check if it is going to work.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13138733">SPARK-23435</key>
            <summary>R tests should support latest testthat</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="felixcheung">Felix Cheung</assignee>
                                    <reporter username="felixcheung">Felix Cheung</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Feb 2018 09:29:04 +0000</created>
                <updated>Mon, 12 Dec 2022 18:10:49 +0000</updated>
                            <resolved>Wed, 29 Jan 2020 01:37:35 +0000</resolved>
                                    <version>2.3.1</version>
                    <version>2.4.0</version>
                    <version>3.0.0</version>
                                    <fixVersion>2.4.5</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>SparkR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16368351" author="felixcheung" created="Sat, 17 Feb 2018 20:21:53 +0000"  >&lt;p&gt;Working on this. Debugging a problem.&lt;/p&gt;</comment>
                            <comment id="16491908" author="felixcheung" created="Sun, 27 May 2018 03:56:55 +0000"  >&lt;p&gt;Work was stopped for a while. Hopefully I can come by in a few weeks.&lt;/p&gt;</comment>
                            <comment id="16510065" author="adrian555" created="Tue, 12 Jun 2018 19:18:34 +0000"  >&lt;p&gt;I hit this since I just reinstalled R and bunch of stuff.&#160;It took me some time to get to locate this issue here.&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=felixcheung&quot; class=&quot;user-hover&quot; rel=&quot;felixcheung&quot;&gt;felixcheung&lt;/a&gt;, are you still working on this? If not, can I work on it? I can pull together the changes I have made and raise a PR.&lt;/p&gt;</comment>
                            <comment id="16513416" author="felixcheung" created="Fri, 15 Jun 2018 06:32:25 +0000"  >&lt;p&gt;sorry, I did try but couldn&apos;t get it to work, but something like this?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; testthat after 1.0.2 call test_dir as run_tests is removed.
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (packageVersion(&lt;span class=&quot;code-quote&quot;&gt;&quot;testthat&quot;&lt;/span&gt;) &amp;gt;= &lt;span class=&quot;code-quote&quot;&gt;&quot;2.0.0&quot;&lt;/span&gt;) {
  test_pkg_env &amp;lt;- list2env(as.list(getNamespace(&lt;span class=&quot;code-quote&quot;&gt;&quot;SparkR&quot;&lt;/span&gt;), all.names = TRUE),
  parent = parent.env(getNamespace(&lt;span class=&quot;code-quote&quot;&gt;&quot;SparkR&quot;&lt;/span&gt;)))
  withr::local_options(list(topLevelEnvironment = test_pkg_env))
  test_dir(file.path(sparkRDir, &lt;span class=&quot;code-quote&quot;&gt;&quot;pkg&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;tests&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;fulltests&quot;&lt;/span&gt;),
    env = test_pkg_env,
    stop_on_failure = TRUE,
    stop_on_warning = FALSE)
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
  testthat:::run_tests(&lt;span class=&quot;code-quote&quot;&gt;&quot;SparkR&quot;&lt;/span&gt;,
    file.path(sparkRDir, &lt;span class=&quot;code-quote&quot;&gt;&quot;pkg&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;tests&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;fulltests&quot;&lt;/span&gt;),
    NULL,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;summary&quot;&lt;/span&gt;)
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16514111" author="adrian555" created="Fri, 15 Jun 2018 17:13:41 +0000"  >&lt;p&gt;yes, quite similar&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;```&lt;/p&gt;

&lt;p&gt;sp &amp;lt;- getNamespace(&quot;SparkR&quot;)&lt;br/&gt;
 attach(sp)&lt;br/&gt;
 test_dir(file.path(sparkRDir, &quot;pkg&quot;, &quot;tests&quot;, &quot;fulltests&quot;))&lt;/p&gt;

&lt;p&gt;)&lt;/p&gt;

&lt;p&gt;```&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16597781" author="phegstrom" created="Thu, 30 Aug 2018 18:51:38 +0000"  >&lt;p&gt;What is the status of this? My appveyor.yml has the lower version of testthat, but I&apos;m still getting the original error.&lt;/p&gt;

&lt;p&gt;Looks like it&apos;s because I followed &lt;a href=&quot;http://spark.apache.org/docs/latest/building-spark.html#running-r-tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://spark.apache.org/docs/latest/building-spark.html#running-r-tests&lt;/a&gt;, but this command downloads the most recent testthat version.&lt;/p&gt;

&lt;p&gt;Can someone change this until your PR goes through?&lt;/p&gt;</comment>
                            <comment id="17023194" author="shaneknapp" created="Fri, 24 Jan 2020 19:20:05 +0000"  >&lt;p&gt;since we can&apos;t have different R environments for different spark branches, we should confirm that testthat 2.0.0 doesn&apos;t break the 2.4 branch before the jenkins workers are upgraded.&lt;/p&gt;</comment>
                            <comment id="17025523" author="gurwls223" created="Wed, 29 Jan 2020 01:37:35 +0000"  >&lt;p&gt;Issue resolved by pull request 27359&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/27359&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/27359&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17030198" author="shaneknapp" created="Tue, 4 Feb 2020 23:09:11 +0000"  >&lt;p&gt;sadly (or not),&#160;i had to upgrade R to 3.5.2 on the centos (amp-jenkins-worker-{2..6}, and the ubuntu workers (a-j-s-w-02, research-jenkins-*) have version 3.2.3.&lt;/p&gt;

&lt;p&gt;worst case, i can downgrade R.&lt;/p&gt;</comment>
                            <comment id="17030219" author="gurwls223" created="Wed, 5 Feb 2020 00:07:40 +0000"  >&lt;p&gt;I think that&apos;s no problem. Thanks Shane!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13281569">SPARK-30645</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13281082">SPARK-30611</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="13281946">SPARK-30663</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13283354">SPARK-30733</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13281470">SPARK-30637</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3q7yf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>