<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:06:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-28671] [UDF] dropping permanent function when a temporary function with the same name already exists giving wrong msg on dropping it again</title>
                <link>https://issues.apache.org/jira/browse/SPARK-28671</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Created jar and uploaded at hdfs path&lt;br/&gt;
1.	./hdfs dfs -put /opt/trash1/AddDoublesUDF.jar /user/user1/&lt;br/&gt;
2.	Launch beeline and created permanent function&lt;br/&gt;
CREATE FUNCTION addDoubles AS &apos;com.huawei.bigdata.hive.example.udf.AddDoublesUDF&apos; using jar &apos;hdfs://hacluster/user/user1/AddDoublesUDF.jar&apos;;&lt;br/&gt;
3.	Perform select operation&lt;br/&gt;
jdbc:hive2://100.100.208.125:23040/default&amp;gt; SELECT addDoubles(1,2,3);&lt;br/&gt;
&lt;ins&gt;-----------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; default.addDoubles(1, 2, 3)  &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;ins&gt;-----------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 6.0                          &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;ins&gt;-----------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+&lt;br/&gt;
1 row selected (0.111 seconds)&lt;br/&gt;
4.	Created temporary function as below&lt;br/&gt;
jdbc:hive2://100.100.208.125:23040/default&amp;gt; CREATE temporary FUNCTION addDoubles AS &apos;com.huawei.bigdata.hive.example.udf.AddDoublesUDF&apos; using jar &apos;hdfs://hacluster/user/user1/AddDoublesUDF.jar&apos;;&lt;br/&gt;
5.	jdbc:hive2://100.100.208.125:23040/default&amp;gt; SELECT addDoubles(1,2,3);&lt;br/&gt;
&lt;ins&gt;---------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; addDoubles(1, 2, 3)  &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;ins&gt;---------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 6.0                  &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;ins&gt;---------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+&lt;br/&gt;
1 row selected (0.088 seconds)&lt;br/&gt;
6.	Drop function&lt;br/&gt;
jdbc:hive2://100.100.208.125:23040/default&amp;gt; drop function addDoubles;&lt;br/&gt;
&lt;ins&gt;--------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Result  &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;ins&gt;--------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+&lt;br/&gt;
&lt;ins&gt;--------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+&lt;br/&gt;
7.	jdbc:hive2://100.100.208.125:23040/default&amp;gt; SELECT addDoubles(1,2,3); &amp;#8211; It is success&lt;br/&gt;
8.	Drop again Error thrown&lt;br/&gt;
jdbc:hive2://100.100.208.125:23040/default&amp;gt; drop function addDoubles;&lt;br/&gt;
Error: org.apache.spark.sql.catalyst.analysis.NoSuchFunctionException: Undefined function: &apos;default.addDoubles&apos;. This function is neither a registered temporary function nor a permanent function registered in the database &apos;default&apos;.; (state=,code=0)&lt;/p&gt;

&lt;p&gt;9.	Perform again select &lt;br/&gt;
jdbc:hive2://100.100.208.125:23040/default&amp;gt;  SELECT addDoubles(1,2,3);&lt;br/&gt;
&lt;ins&gt;---------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; addDoubles(1, 2, 3)  &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;ins&gt;---------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 6.0                  &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;Issue is why the Error msg shown is step 8 saying it is neither registered as permanent or temporary function where as it is registered as temporary function in step 4 that is why in step 9 select is returning result.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13249812">SPARK-28671</key>
            <summary>[UDF] dropping permanent function when a temporary function with the same name already exists giving wrong msg on dropping it again</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pavithraramachandran">pavithra ramachandran</assignee>
                                    <reporter username="abhishek.akg">ABHISHEK KUMAR GUPTA</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Aug 2019 04:57:02 +0000</created>
                <updated>Fri, 16 Aug 2019 13:55:36 +0000</updated>
                            <resolved>Fri, 16 Aug 2019 13:54:24 +0000</resolved>
                                    <version>2.4.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16903570" author="pavithraramachandran" created="Fri, 9 Aug 2019 04:58:24 +0000"  >&lt;p&gt;i will work on this&lt;/p&gt;</comment>
                            <comment id="16909066" author="maropu" created="Fri, 16 Aug 2019 13:54:24 +0000"  >&lt;p&gt;Resolved by&#160;&lt;a href=&quot;https://github.com/apache/spark/pull/25394&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/25394&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 13 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05hs0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>