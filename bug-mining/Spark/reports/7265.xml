<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:17:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-31994] Docker image should use `https` urls for only mirrors that support it(SSL)</title>
                <link>https://issues.apache.org/jira/browse/SPARK-31994</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;It appears, that security.debian.org does not support https.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
curl https:&lt;span class=&quot;code-comment&quot;&gt;//security.debian.org
&lt;/span&gt;curl: (35) LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to security.debian.org:443 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While building the image, it fails in the following way.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
MacBook-Pro:spark prashantsharma$ bin/docker-image-tool.sh -r scrapcodes -t v3.1.0-1 build
Sending build context to Docker daemon  222.1MB
Step 1/18 : ARG java_image_tag=8-jre-slim
Step 2/18 : FROM openjdk:${java_image_tag}
 ---&amp;gt; 381b20190cf7
Step 3/18 : ARG spark_uid=185
 ---&amp;gt; Using cache
 ---&amp;gt; 65c06f86753c
Step 4/18 : RUN set -ex &amp;amp;&amp;amp;     sed -i &lt;span class=&quot;code-quote&quot;&gt;&apos;s/http:/https:/g&apos;&lt;/span&gt; /etc/apt/sources.list &amp;amp;&amp;amp;     apt-get update &amp;amp;&amp;amp;     ln -s /lib /lib64 &amp;amp;&amp;amp;     apt install -y bash tini libc6 libpam-modules krb5-user libnss3 procps &amp;amp;&amp;amp;     mkdir -p /opt/spark &amp;amp;&amp;amp;     mkdir -p /opt/spark/examples &amp;amp;&amp;amp;     mkdir -p /opt/spark/work-dir &amp;amp;&amp;amp;     touch /opt/spark/RELEASE &amp;amp;&amp;amp;     rm /bin/sh &amp;amp;&amp;amp;     ln -sv /bin/bash /bin/sh &amp;amp;&amp;amp;     echo &lt;span class=&quot;code-quote&quot;&gt;&quot;auth required pam_wheel.so use_uid&quot;&lt;/span&gt; &amp;gt;&amp;gt; /etc/pam.d/su &amp;amp;&amp;amp;     chgrp root /etc/passwd &amp;amp;&amp;amp; chmod ug+rw /etc/passwd &amp;amp;&amp;amp;     rm -rf /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/cache/apt/*
 ---&amp;gt; Running in a3461dadd6eb
+ sed -i s/http:/https:/g /etc/apt/sources.list
+ apt-get update
Ign:1 https:&lt;span class=&quot;code-comment&quot;&gt;//security.debian.org/debian-security buster/updates InRelease
&lt;/span&gt;Err:2 https:&lt;span class=&quot;code-comment&quot;&gt;//security.debian.org/debian-security buster/updates Release
&lt;/span&gt;  Could not handshake: The TLS connection was non-properly terminated. [IP: 151.101.0.204 443]
Get:3 https:&lt;span class=&quot;code-comment&quot;&gt;//deb.debian.org/debian buster InRelease [121 kB]
&lt;/span&gt;Get:4 https:&lt;span class=&quot;code-comment&quot;&gt;//deb.debian.org/debian buster-updates InRelease [51.9 kB]
&lt;/span&gt;Get:5 https:&lt;span class=&quot;code-comment&quot;&gt;//deb.debian.org/debian buster/main amd64 Packages [7905 kB]
&lt;/span&gt;Get:6 https:&lt;span class=&quot;code-comment&quot;&gt;//deb.debian.org/debian buster-updates/main amd64 Packages [7868 B]
&lt;/span&gt;Reading &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; lists...
E: The repository &lt;span class=&quot;code-quote&quot;&gt;&apos;https:&lt;span class=&quot;code-comment&quot;&gt;//security.debian.org/debian-security buster/updates Release&apos;&lt;/span&gt; does not have a Release file.
&lt;/span&gt;The command &lt;span class=&quot;code-quote&quot;&gt;&apos;/bin/sh -c set -ex &amp;amp;&amp;amp;     sed -i &apos;&lt;/span&gt;s/http:/https:/g&lt;span class=&quot;code-quote&quot;&gt;&apos; /etc/apt/sources.list &amp;amp;&amp;amp;     apt-get update &amp;amp;&amp;amp;     ln -s /lib /lib64 &amp;amp;&amp;amp;     apt install -y bash tini libc6 libpam-modules krb5-user libnss3 procps &amp;amp;&amp;amp;     mkdir -p /opt/spark &amp;amp;&amp;amp;     mkdir -p /opt/spark/examples &amp;amp;&amp;amp;     mkdir -p /opt/spark/work-dir &amp;amp;&amp;amp;     touch /opt/spark/RELEASE &amp;amp;&amp;amp;     rm /bin/sh &amp;amp;&amp;amp;     ln -sv /bin/bash /bin/sh &amp;amp;&amp;amp;     echo &lt;span class=&quot;code-quote&quot;&gt;&quot;auth required pam_wheel.so use_uid&quot;&lt;/span&gt; &amp;gt;&amp;gt; /etc/pam.d/su &amp;amp;&amp;amp;     chgrp root /etc/passwd &amp;amp;&amp;amp; chmod ug+rw /etc/passwd &amp;amp;&amp;amp;     rm -rf /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/cache/apt/*&apos;&lt;/span&gt; returned a non-zero code: 100
Failed to build Spark JVM Docker image, please refer to Docker build output &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, if we limit the https support to only deb.debian.org, that does the trick.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13311453">SPARK-31994</key>
            <summary>Docker image should use `https` urls for only mirrors that support it(SSL)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prashant">Prashant Sharma</assignee>
                                    <reporter username="prashant">Prashant Sharma</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Jun 2020 10:04:51 +0000</created>
                <updated>Mon, 15 Jun 2020 18:27:14 +0000</updated>
                            <resolved>Mon, 15 Jun 2020 18:26:46 +0000</resolved>
                                    <version>3.0.0</version>
                    <version>3.1.0</version>
                                    <fixVersion>3.0.1</fixVersion>
                    <fixVersion>3.1.0</fixVersion>
                                    <component>Kubernetes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17135714" author="apachespark" created="Mon, 15 Jun 2020 10:16:22 +0000"  >&lt;p&gt;User &apos;ScrapCodes&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/28834&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/28834&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17135716" author="apachespark" created="Mon, 15 Jun 2020 10:17:19 +0000"  >&lt;p&gt;User &apos;ScrapCodes&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/28834&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/28834&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17136087" author="dongjoon" created="Mon, 15 Jun 2020 18:26:46 +0000"  >&lt;p&gt;Issue resolved by pull request 28834&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/28834&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/28834&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0fups:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>