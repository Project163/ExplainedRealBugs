<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:14:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-30993] GenerateUnsafeRowJoiner corrupts the value if the datatype is UDF and its sql type has fixed length</title>
                <link>https://issues.apache.org/jira/browse/SPARK-30993</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;This is reported by user mailing list, though the mail thread is regarding suspect of the behavior of mapGroupsWithState.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://lists.apache.org/thread.html/r08b44a7afac4e4c971633d30b4e5d11bd7c0d6e28180e03b874ea58b%40%3Cuser.spark.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/r08b44a7afac4e4c971633d30b4e5d11bd7c0d6e28180e03b874ea58b%40%3Cuser.spark.apache.org%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The actual culprit is, there&apos;re a couple of methods which don&apos;t handle UDT and it makes&#160;GenerateUnsafeRowJoiner to generate incorrect code. Specifically, the issue occurs when the sql type of UDT has fixed length - GenerateUnsafeRowJoiner has the logic to update the offset position for all&#160;variable-length data, and due to this bug, UDT field with&#160;fixed length is being treated as variable-length data and its value is modified.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13288450">SPARK-30993</key>
            <summary>GenerateUnsafeRowJoiner corrupts the value if the datatype is UDF and its sql type has fixed length</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kabhwan">Jungtaek Lim</assignee>
                                    <reporter username="kabhwan">Jungtaek Lim</reporter>
                        <labels>
                            <label>correctness</label>
                    </labels>
                <created>Sat, 29 Feb 2020 14:11:26 +0000</created>
                <updated>Tue, 8 Jun 2021 16:45:27 +0000</updated>
                            <resolved>Mon, 2 Mar 2020 19:26:41 +0000</resolved>
                                    <version>2.3.0</version>
                    <version>2.3.1</version>
                    <version>2.3.2</version>
                    <version>2.3.3</version>
                    <version>2.3.4</version>
                    <version>2.4.5</version>
                    <version>3.0.0</version>
                                    <fixVersion>2.4.6</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17048317" author="kabhwan" created="Sat, 29 Feb 2020 14:13:20 +0000"  >&lt;p&gt;Will submit a PR soon. Btw, it looks to be correctness issue, and if it is, priority may need to be raised to critical+ (I&apos;d defer decision of priority to the committers.)&lt;/p&gt;</comment>
                            <comment id="17048318" author="kabhwan" created="Sat, 29 Feb 2020 14:14:16 +0000"  >&lt;p&gt;The reporter uses Spark 2.3.0, and validated it exists on Spark 2.4.0 as well.&lt;/p&gt;</comment>
                            <comment id="17048321" author="kabhwan" created="Sat, 29 Feb 2020 14:39:58 +0000"  >&lt;p&gt;During review phase I&apos;ll check which versions are affected (recent version for each minor version). Maybe tomorrow. It would be really appreciated someone could help checking it.&lt;/p&gt;</comment>
                            <comment id="17048456" author="kabhwan" created="Sun, 1 Mar 2020 03:23:58 +0000"  >&lt;p&gt;Just confirmed the problem persists in branch-2.3 and branch-2.4. I guess the bug is ancient one, as there has been no code change around the spot.&lt;/p&gt;</comment>
                            <comment id="17048713" author="dongjoon" created="Sun, 1 Mar 2020 23:51:26 +0000"  >&lt;p&gt;Thank you, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kabhwan&quot; class=&quot;user-hover&quot; rel=&quot;kabhwan&quot;&gt;kabhwan&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="17049585" author="dongjoon" created="Mon, 2 Mar 2020 19:26:41 +0000"  >&lt;p&gt;This is resolved via &lt;a href=&quot;https://github.com/apache/spark/pull/27747&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/27747&lt;/a&gt; in `branch-3.0`.&lt;br/&gt;
And, &lt;a href=&quot;https://github.com/apache/spark/pull/27761&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/27761&lt;/a&gt; is under review.&lt;/p&gt;</comment>
                            <comment id="17359461" author="apachespark" created="Tue, 8 Jun 2021 16:44:09 +0000"  >&lt;p&gt;User &apos;gengliangwang&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/32824&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/32824&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17359462" author="apachespark" created="Tue, 8 Jun 2021 16:45:27 +0000"  >&lt;p&gt;User &apos;gengliangwang&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/32824&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/32824&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13288309">SPARK-30986</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0c114:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>