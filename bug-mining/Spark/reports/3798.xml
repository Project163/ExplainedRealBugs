<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:45:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-16439] Incorrect information in SQL Query details</title>
                <link>https://issues.apache.org/jira/browse/SPARK-16439</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;One picture is worth a thousand words.&lt;/p&gt;

&lt;p&gt;Please see attachment&lt;/p&gt;

&lt;p&gt;Incorrect values are in fields:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;data size&lt;/li&gt;
	&lt;li&gt;number of output rows&lt;/li&gt;
	&lt;li&gt;time to collect&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12987771">SPARK-16439</key>
            <summary>Incorrect information in SQL Query details</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davies">Davies Liu</assignee>
                                    <reporter username="maver1ck">Maciej Bry&#324;ski</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Jul 2016 12:28:46 +0000</created>
                <updated>Mon, 19 Sep 2016 18:58:22 +0000</updated>
                            <resolved>Mon, 19 Sep 2016 18:49:22 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.1</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                                    <component>SQL</component>
                    <component>Web UI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15368056" author="dongjoon" created="Fri, 8 Jul 2016 17:47:34 +0000"  >&lt;p&gt;For me, it seems to work.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.box.com/s/lw0kl1ft7z4od9fwamtoafipzfrnex8m&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.box.com/s/lw0kl1ft7z4od9fwamtoafipzfrnex8m&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Could you provide more information?&lt;/p&gt;</comment>
                            <comment id="15370435" author="maver1ck" created="Mon, 11 Jul 2016 09:22:53 +0000"  >&lt;p&gt;I think that the problem exist when value is greater than 1024.&lt;br/&gt;
Could you repeat your test ?&lt;/p&gt;</comment>
                            <comment id="15370454" author="dongjoon" created="Mon, 11 Jul 2016 09:37:52 +0000"  >&lt;p&gt;If you provide your testcase. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15370458" author="dongjoon" created="Mon, 11 Jul 2016 09:38:29 +0000"  >&lt;p&gt;The picture is not worth at all.&lt;/p&gt;</comment>
                            <comment id="15370461" author="dongjoon" created="Mon, 11 Jul 2016 09:39:14 +0000"  >&lt;p&gt;If you provide more specific information, you will get the fix faster.&lt;/p&gt;</comment>
                            <comment id="15370463" author="maver1ck" created="Mon, 11 Jul 2016 09:39:40 +0000"  >&lt;p&gt;I&apos;ll try to prepare sth.&lt;br/&gt;
This was the screenshot from testing my production env on Spark 2.0. So I can&apos;t share the data.&lt;/p&gt;</comment>
                            <comment id="15370469" author="dongjoon" created="Mon, 11 Jul 2016 09:42:24 +0000"  >&lt;p&gt;Thanks. I understand. Most issues are in the same situation. It&apos;s not easy to report.&lt;/p&gt;</comment>
                            <comment id="15370555" author="maver1ck" created="Mon, 11 Jul 2016 11:00:15 +0000"  >&lt;p&gt;OK. Got this.&lt;br/&gt;
Using spark-shell (Spark deployed with YARN)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Left(a: &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Right(b: &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;)
val df_left = spark.range(10000).map(num =&amp;gt; Left(num))
val df_right = spark.range(10000).map(num =&amp;gt; Right(num))
df_left.registerTempTable(&lt;span class=&quot;code-quote&quot;&gt;&quot;l&quot;&lt;/span&gt;)
df_right.registerTempTable(&lt;span class=&quot;code-quote&quot;&gt;&quot;r&quot;&lt;/span&gt;)
spark.sql(&lt;span class=&quot;code-quote&quot;&gt;&quot;select count(*) from l join r on l.a = r.b&quot;&lt;/span&gt;).collect()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Screenshot from SQL Query details attached as sample.png&lt;/p&gt;

&lt;p&gt;Tested with:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Firefox 47&lt;/li&gt;
	&lt;li&gt;Chrome 51&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The problem is that where number is greater than 1000 we put special unicode character u+00A0 (no-breaking space) between thousands and hundreds.&lt;br/&gt;
So 10000 looks like 10u00A0000&lt;/p&gt;</comment>
                            <comment id="15370623" author="proflin" created="Mon, 11 Jul 2016 12:14:24 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dongjoon&quot; class=&quot;user-hover&quot; rel=&quot;dongjoon&quot;&gt;dongjoon&lt;/a&gt;, would you mind leaving this open for two days or three? If it&apos;s okay by you, one/two colleague(s) of mine might take this as a first step to start contributing. Thanks a lot!&lt;/p&gt;</comment>
                            <comment id="15370647" author="maver1ck" created="Mon, 11 Jul 2016 12:28:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=proflin&quot; class=&quot;user-hover&quot; rel=&quot;proflin&quot;&gt;proflin&lt;/a&gt;&lt;br/&gt;
I don&apos;t know if waiting is right decision if we want this to be merged to 2.0.0&lt;/p&gt;</comment>
                            <comment id="15371780" author="maver1ck" created="Mon, 11 Jul 2016 22:21:17 +0000"  >&lt;p&gt;I found that problem is locale dependent.&lt;/p&gt;

&lt;p&gt;The \u00A0 sign is added by java NumberFormat class.&lt;br/&gt;
It can be avoided when using NumberFormat.setGroupingUsed(false)&lt;/p&gt;</comment>
                            <comment id="15371845" author="apachespark" created="Mon, 11 Jul 2016 22:59:12 +0000"  >&lt;p&gt;User &apos;maver1ck&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/14142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/14142&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15374746" author="srowen" created="Wed, 13 Jul 2016 09:50:47 +0000"  >&lt;p&gt;Issue resolved by pull request 14142&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/14142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/14142&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15491744" author="davies" created="Wed, 14 Sep 2016 23:27:58 +0000"  >&lt;p&gt;The separator was added on purpose, otherwise it&apos;s very difficult to read the numbers (especially the number of rows),  we need to count the number of digits to realize how large the number is. I think we should still keep that and fix the local issue (using English should be enough), I will send a PR to add it back.&lt;/p&gt;</comment>
                            <comment id="15491747" author="davies" created="Wed, 14 Sep 2016 23:28:39 +0000"  >&lt;p&gt;We could bring the seperator back for better readability. &lt;/p&gt;</comment>
                            <comment id="15491766" author="apachespark" created="Wed, 14 Sep 2016 23:38:06 +0000"  >&lt;p&gt;User &apos;davies&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/15106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/15106&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15504309" author="davies" created="Mon, 19 Sep 2016 18:49:23 +0000"  >&lt;p&gt;Issue resolved by pull request 15106&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/15106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/15106&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12817119" name="sample.png" size="134544" author="maver1ck" created="Mon, 11 Jul 2016 11:02:14 +0000"/>
                            <attachment id="12816817" name="spark.jpg" size="52044" author="maver1ck" created="Fri, 8 Jul 2016 12:29:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30p8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>