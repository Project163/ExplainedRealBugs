<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:15:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-31312] Transforming Hive simple UDF (using JAR) expression may incur CNFE in later evaluation</title>
                <link>https://issues.apache.org/jira/browse/SPARK-31312</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-26560&quot; title=&quot;Repeating select on udf function throws analysis exception - function not registered&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-26560&quot;&gt;&lt;del&gt;SPARK-26560&lt;/del&gt;&lt;/a&gt;, we ensured that Hive UDF using JAR is executed regardless of current thread context classloader.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cloud_fan&quot; class=&quot;user-hover&quot; rel=&quot;cloud_fan&quot;&gt;cloud_fan&lt;/a&gt; pointed out another potential issue in post-review of &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-26560&quot; title=&quot;Repeating select on udf function throws analysis exception - function not registered&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-26560&quot;&gt;&lt;del&gt;SPARK-26560&lt;/del&gt;&lt;/a&gt; - quoting the comment:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Found a potential problem: here we call HiveSimpleUDF.dateType (which is a lazy val), to force to load the class with the corrected class loader.&lt;/p&gt;

&lt;p&gt;However, if the expression gets transformed later, which copies HiveSimpleUDF, then calling HiveSimpleUDF.dataType will re-trigger the class loading, and at that time there is no guarantee that the corrected classloader is used.&lt;/p&gt;

&lt;p&gt;I think we should materialize the loaded class in HiveSimpleUDF.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This JIRA issue is to track the effort of verifying the potential issue and fixing the issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13295185">SPARK-31312</key>
            <summary>Transforming Hive simple UDF (using JAR) expression may incur CNFE in later evaluation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kabhwan">Jungtaek Lim</assignee>
                                    <reporter username="kabhwan">Jungtaek Lim</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Mar 2020 07:42:45 +0000</created>
                <updated>Tue, 7 Apr 2020 13:26:16 +0000</updated>
                            <resolved>Tue, 31 Mar 2020 16:32:48 +0000</resolved>
                                    <version>2.4.5</version>
                    <version>3.0.0</version>
                                    <fixVersion>2.4.6</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17073075" author="dongjoon" created="Wed, 1 Apr 2020 18:40:18 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kabhwan&quot; class=&quot;user-hover&quot; rel=&quot;kabhwan&quot;&gt;kabhwan&lt;/a&gt;. Due to &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-26560&quot; title=&quot;Repeating select on udf function throws analysis exception - function not registered&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-26560&quot;&gt;&lt;del&gt;SPARK-26560&lt;/del&gt;&lt;/a&gt;, this occurs only for 2.4.5 and 3.0.0?&lt;/p&gt;</comment>
                            <comment id="17073264" author="kabhwan" created="Wed, 1 Apr 2020 23:58:24 +0000"  >&lt;p&gt;No, it wasn&apos;t triggered by &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-26560&quot; title=&quot;Repeating select on udf function throws analysis exception - function not registered&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-26560&quot;&gt;&lt;del&gt;SPARK-26560&lt;/del&gt;&lt;/a&gt; and should be long-lived bug same as &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-26560&quot; title=&quot;Repeating select on udf function throws analysis exception - function not registered&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-26560&quot;&gt;&lt;del&gt;SPARK-26560&lt;/del&gt;&lt;/a&gt;, although I haven&apos;t encountered the bug in practice so I can&apos;t say which version is the oldest.&lt;/p&gt;

&lt;p&gt;Btw, while I always appreciate your details and diligence on leaving information, it&apos;s a different story if that is required to others. That would become a burden to do actual work, spending more time on &quot;boilerplate&quot; than the origin work. There should be a &quot;balance&quot;, and the balance should be decided by consensus of community.&lt;/p&gt;

&lt;p&gt;Let&apos;s discuss more in dev@ mailing list.&lt;/p&gt;</comment>
                            <comment id="17073407" author="dongjoon" created="Thu, 2 Apr 2020 06:25:39 +0000"  >&lt;p&gt;It&apos;s for informimg the users (and the downstream distributors) the risk and to recommend upgrade their versions. If we set 2.4.5 only, that can be also considered as a bug occurred at 2.4.5 .&lt;/p&gt;

&lt;p&gt;If we set 2.3.x at least, all 2.4.0 ~ 2.4.4 users also understand the risk.&lt;/p&gt;</comment>
                            <comment id="17073409" author="dongjoon" created="Thu, 2 Apr 2020 06:29:35 +0000"  >&lt;p&gt;Since I saw your opinion, I&apos;ll not ping you about that again.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13207991">SPARK-26560</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 32 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0d3v4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>