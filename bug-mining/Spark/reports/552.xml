<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:16:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-1022] Add unit tests for kafka streaming</title>
                <link>https://issues.apache.org/jira/browse/SPARK-1022</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;It would be nice if we could add unit tests to verify elements of kafka&apos;s stream. Right now we do integration tests only which makes it hard to upgrade versions of kafka. The place to start here would be to look at how kafka tests itself and see if the functionality can be exposed to third party users.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12704562">SPARK-1022</key>
            <summary>Add unit tests for kafka streaming</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jerryshao">Saisai Shao</assignee>
                                    <reporter username="pwendell">Patrick Wendell</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Jan 2014 09:43:02 +0000</created>
                <updated>Thu, 6 Aug 2015 00:21:53 +0000</updated>
                            <resolved>Wed, 6 Aug 2014 06:43:39 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14067730" author="apachespark" created="Sun, 20 Jul 2014 00:05:37 +0000"  >&lt;p&gt;User &apos;tdas&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/557&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/557&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14083928" author="apachespark" created="Sun, 3 Aug 2014 09:21:44 +0000"  >&lt;p&gt;User &apos;jerryshao&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/1751&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1751&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14087092" author="apachespark" created="Wed, 6 Aug 2014 01:41:46 +0000"  >&lt;p&gt;User &apos;tdas&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/1797&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1797&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14087333" author="pwendell" created="Wed, 6 Aug 2014 06:43:48 +0000"  >&lt;p&gt;There was a follow up to this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/1797&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1797&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14087415" author="apachespark" created="Wed, 6 Aug 2014 08:30:20 +0000"  >&lt;p&gt;User &apos;srowen&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/1804&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1804&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14659014" author="anujojha" created="Wed, 5 Aug 2015 21:46:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tdas&quot; class=&quot;user-hover&quot; rel=&quot;tdas&quot;&gt;tdas&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jerryshao2015&quot; class=&quot;user-hover&quot; rel=&quot;jerryshao2015&quot;&gt;jerryshao2015&lt;/a&gt; I was working on writing Integration test for my application, which reads data from kafka, performs transformation on the data and then writes the Dstream back to other kafka topic. To do this I had to get KafkaTestUtils and some other dependent classes locally as I needed embedded zookeeper and kafa queue. I also had to modify sendMessage to accept my specific type of ket and value. I was wondering if it is possible to make the KafkaTestUtils generic? so that others can use it for in-memory  unit/integration testing. I have created generic sendMessage method hopefully it&apos;s of some use. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;KafkaTestUtils [T,U]{
.......
  &lt;span class=&quot;code-comment&quot;&gt;// Kafka producer
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; producer: Producer[T, U] = _

..........

  def sendMessages(topic: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, messageToFreq: JMap[T, U]): Unit = {
    &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; scala.collection.JavaConversions._
    producer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Producer[T, U](&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ProducerConfig(producerConfiguration))
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; ((k,v) &amp;lt;- messageToFreq) {
      &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; message = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; KeyedMessage(topic, k,v)
      producer.send(message)
    }
    producer.close()
    producer = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  }

.........
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I also had to change producer properties to provide key and value serialization class. It might be worth making possible to set these values from user test. I did not create JIRA for the request as I wanted to see if this is even a acceptable request. Please let me know.&lt;/p&gt;</comment>
                            <comment id="14659246" author="jerryshao" created="Thu, 6 Aug 2015 00:21:53 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anujojha&quot; class=&quot;user-hover&quot; rel=&quot;anujojha&quot;&gt;anujojha&lt;/a&gt;, &lt;tt&gt;KafkaTestUtils&lt;/tt&gt; is used for Kafka and Spark integration test, it is not public to users to use it, so the API design is not so generic for everyone use. I think Spark itself will not provide such functionality for user to do integration test, if you want to do such thing, from my point it would be better for you to do it yourself, not replying on Spark.&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12742984">SPARK-3615</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382836</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tyf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>383104</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>