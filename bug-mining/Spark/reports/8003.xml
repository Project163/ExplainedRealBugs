<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:26:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-35834] Use the same cleanup logic as Py4J in inheritable thread API</title>
                <link>https://issues.apache.org/jira/browse/SPARK-35834</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;After &lt;a href=&quot;https://github.com/apache/spark/commit/6d309914df422d9f0c96edfd37924ecb8f29e3a9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/commit/6d309914df422d9f0c96edfd37924ecb8f29e3a9&lt;/a&gt;, the test became flaky:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
======================================================================
ERROR [71.813s]: test_save_load_pipeline_estimator (pyspark.ml.tests.test_tuning.CrossValidatorTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/__w/spark/spark/python/pyspark/ml/tests/test_tuning.py&quot;&lt;/span&gt;, line 589, in test_save_load_pipeline_estimator
    self._run_test_save_load_pipeline_estimator(DummyLogisticRegression)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/__w/spark/spark/python/pyspark/ml/tests/test_tuning.py&quot;&lt;/span&gt;, line 572, in _run_test_save_load_pipeline_estimator
    cvModel2 = crossval2.fit(training)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/__w/spark/spark/python/pyspark/ml/base.py&quot;&lt;/span&gt;, line 161, in fit
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; self._fit(dataset)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/__w/spark/spark/python/pyspark/ml/tuning.py&quot;&lt;/span&gt;, line 747, in _fit
    bestModel = est.fit(dataset, epm[bestIndex])
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/__w/spark/spark/python/pyspark/ml/base.py&quot;&lt;/span&gt;, line 159, in fit
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; self.copy(params)._fit(dataset)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/__w/spark/spark/python/pyspark/ml/pipeline.py&quot;&lt;/span&gt;, line 114, in _fit
    model = stage.fit(dataset)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/__w/spark/spark/python/pyspark/ml/base.py&quot;&lt;/span&gt;, line 161, in fit
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; self._fit(dataset)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/__w/spark/spark/python/pyspark/ml/pipeline.py&quot;&lt;/span&gt;, line 114, in _fit
    model = stage.fit(dataset)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/__w/spark/spark/python/pyspark/ml/base.py&quot;&lt;/span&gt;, line 161, in fit
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; self._fit(dataset)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/__w/spark/spark/python/pyspark/ml/classification.py&quot;&lt;/span&gt;, line 2924, in _fit
    models = pool.map(inheritable_thread_target(trainSingleClass), range(numClasses))
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/__t/Python/3.6.13/x64/lib/python3.6/multiprocessing/pool.py&quot;&lt;/span&gt;, line 266, in map
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; self._map_async(func, iterable, mapstar, chunksize).get()
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/__t/Python/3.6.13/x64/lib/python3.6/multiprocessing/pool.py&quot;&lt;/span&gt;, line 644, in get
    raise self._value
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/__t/Python/3.6.13/x64/lib/python3.6/multiprocessing/pool.py&quot;&lt;/span&gt;, line 119, in worker
    result = (True, func(*args, **kwds))
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/__t/Python/3.6.13/x64/lib/python3.6/multiprocessing/pool.py&quot;&lt;/span&gt;, line 44, in mapstar
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; list(map(*args))
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/__w/spark/spark/python/pyspark/util.py&quot;&lt;/span&gt;, line 324, in wrapped
    InheritableThread._clean_py4j_conn_for_current_thread()
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/__w/spark/spark/python/pyspark/util.py&quot;&lt;/span&gt;, line 389, in _clean_py4j_conn_for_current_thread
    del connections[i]
IndexError: deque index out of range

----------------------------------------------------------------------
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13384747">SPARK-35834</key>
            <summary>Use the same cleanup logic as Py4J in inheritable thread API</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gurwls223">Hyukjin Kwon</assignee>
                                    <reporter username="gurwls223">Hyukjin Kwon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Jun 2021 01:07:09 +0000</created>
                <updated>Mon, 12 Dec 2022 18:11:08 +0000</updated>
                            <resolved>Tue, 14 Sep 2021 00:09:10 +0000</resolved>
                                    <version>3.2.0</version>
                                    <fixVersion>3.2.0</fixVersion>
                                    <component>PySpark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17366324" author="apachespark" created="Mon, 21 Jun 2021 01:20:59 +0000"  >&lt;p&gt;User &apos;HyukjinKwon&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/32989&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/32989&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17414562" author="holdenk" created="Mon, 13 Sep 2021 19:54:20 +0000"  >&lt;p&gt;Is this a test only issue or a regression for Python users?&lt;/p&gt;</comment>
                            <comment id="17414641" author="gurwls223" created="Tue, 14 Sep 2021 00:08:59 +0000"  >&lt;p&gt;This is actually fixed too. I wonder why it wasn&apos;t resolved. It&apos;s not a regression, just a bug fix.&lt;/p&gt;</comment>
                            <comment id="17414643" author="gurwls223" created="Tue, 14 Sep 2021 00:09:10 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/spark/pull/32989&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/32989&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0s3yo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>