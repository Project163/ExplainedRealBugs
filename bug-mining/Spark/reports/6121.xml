<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:02:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-25906] spark-shell cannot handle `-i` option correctly</title>
                <link>https://issues.apache.org/jira/browse/SPARK-25906</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;This is a regression on Spark 2.4.0.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Spark 2.3.2&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ cat test.scala
spark.version
&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Record(key: Int, value: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)
spark.sparkContext.parallelize((1 to 2).map(i =&amp;gt; Record(i, s&lt;span class=&quot;code-quote&quot;&gt;&quot;val_$i&quot;&lt;/span&gt;))).toDF.show

$ bin/spark-shell -i test.scala
18/10/31 23:22:43 WARN NativeCodeLoader: Unable to load &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;-hadoop library &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; your platform... using builtin-java classes where applicable
Setting &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; log level to &lt;span class=&quot;code-quote&quot;&gt;&quot;WARN&quot;&lt;/span&gt;.
To adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).
Spark context Web UI available at http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:4040
&lt;/span&gt;Spark context available as &lt;span class=&quot;code-quote&quot;&gt;&apos;sc&apos;&lt;/span&gt; (master = local[*], app id = local-1541053368478).
Spark session available as &lt;span class=&quot;code-quote&quot;&gt;&apos;spark&apos;&lt;/span&gt;.
Loading test.scala...
res0: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; = 2.3.2
defined &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Record
18/10/31 23:22:56 WARN ObjectStore: Failed to get database global_temp, returning NoSuchObjectException
+---+-----+
|key|value|
+---+-----+
|  1|val_1|
|  2|val_2|
+---+-----+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;Spark 2.4.0 RC5&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ bin/spark-shell -i test.scala
2018-10-31 23:23:14 WARN  NativeCodeLoader:62 - Unable to load &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;-hadoop library &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; your platform... using builtin-java classes where applicable
Setting &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; log level to &lt;span class=&quot;code-quote&quot;&gt;&quot;WARN&quot;&lt;/span&gt;.
To adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).
Spark context Web UI available at http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:4040
&lt;/span&gt;Spark context available as &lt;span class=&quot;code-quote&quot;&gt;&apos;sc&apos;&lt;/span&gt; (master = local[*], app id = local-1541053400312).
Spark session available as &lt;span class=&quot;code-quote&quot;&gt;&apos;spark&apos;&lt;/span&gt;.
test.scala:17: error: value toDF is not a member of org.apache.spark.rdd.RDD[Record]
Error occurred in an application involving &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; arguments.
       spark.sparkContext.parallelize((1 to 2).map(i =&amp;gt; Record(i, s&lt;span class=&quot;code-quote&quot;&gt;&quot;val_$i&quot;&lt;/span&gt;))).toDF.show
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;&lt;b&gt;WORKAROUND&lt;/b&gt;&lt;br/&gt;
Add the following line at the first of the script.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; spark.implicits._
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13195559">SPARK-25906</key>
            <summary>spark-shell cannot handle `-i` option correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gurwls223">Hyukjin Kwon</assignee>
                                    <reporter username="dongjoon">Dongjoon Hyun</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Nov 2018 06:25:17 +0000</created>
                <updated>Mon, 12 Dec 2022 18:11:04 +0000</updated>
                            <resolved>Tue, 6 Nov 2018 02:41:23 +0000</resolved>
                                    <version>2.4.0</version>
                                    <fixVersion>2.4.1</fixVersion>
                                    <component>Spark Shell</component>
                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16671159" author="dongjoon" created="Thu, 1 Nov 2018 06:26:26 +0000"  >&lt;p&gt;cc&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cloud_fan&quot; class=&quot;user-hover&quot; rel=&quot;cloud_fan&quot;&gt;cloud_fan&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smilegator&quot; class=&quot;user-hover&quot; rel=&quot;smilegator&quot;&gt;smilegator&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;Although this is a regression, I marked this as non-blocker.&lt;/p&gt;</comment>
                            <comment id="16671161" author="dongjoon" created="Thu, 1 Nov 2018 06:29:51 +0000"  >&lt;p&gt;Hi,&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dbtsai&quot; class=&quot;user-hover&quot; rel=&quot;dbtsai&quot;&gt;dbtsai&lt;/a&gt; .&#160;Could you take a look at this?&lt;/p&gt;

&lt;p&gt;This seems to be related to the recent shell changes. Only `-i` option has a problem. In the shell, it works. I guess this will be a known issue of 2.4.0&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
scala&amp;gt; spark.version
res1: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; = 2.4.0

scala&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Record(key: Int, value: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)
defined &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Record

scala&amp;gt; spark.sparkContext.parallelize((1 to 2).map(i =&amp;gt; Record(i, s&lt;span class=&quot;code-quote&quot;&gt;&quot;val_$i&quot;&lt;/span&gt;))).toDF.show
+---+-----+
|key|value|
+---+-----+
| 1|val_1|
| 2|val_2|
+---+-----+&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16671165" author="gurwls223" created="Thu, 1 Nov 2018 06:44:20 +0000"  >&lt;p&gt;Yea, looks this is pretty much related with REPL fix we did for Scala 2.12.&lt;/p&gt;</comment>
                            <comment id="16671169" author="dongjoon" created="Thu, 1 Nov 2018 06:52:40 +0000"  >&lt;p&gt;Thank you for confirmation. The workaround is to add the following at the first line. I&apos;ll lower the priority.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; spark.implicits._&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16671186" author="cloud_fan" created="Thu, 1 Nov 2018 07:20:34 +0000"  >&lt;p&gt;thanks for reporting it! I&apos;ll list it as known issue in 2.4.0&lt;/p&gt;</comment>
                            <comment id="16671193" author="dongjoon" created="Thu, 1 Nov 2018 07:26:14 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cloud_fan&quot; class=&quot;user-hover&quot; rel=&quot;cloud_fan&quot;&gt;cloud_fan&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="16671241" author="gurwls223" created="Thu, 1 Nov 2018 08:08:43 +0000"  >&lt;p&gt;Another workaround is to use &lt;tt&gt;-I&lt;/tt&gt; instead of &lt;tt&gt;-i&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16671264" author="gurwls223" created="Thu, 1 Nov 2018 08:36:10 +0000"  >&lt;p&gt;The root cause seems to be &lt;a href=&quot;https://github.com/scala/scala/commit/99dad60d984d3f72338f3bad4c4fe905090edd51.&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/scala/scala/commit/99dad60d984d3f72338f3bad4c4fe905090edd51.&lt;/a&gt;&#160;They change what &lt;tt&gt;-i&lt;/tt&gt; means in that change.&lt;br/&gt;
&lt;tt&gt;-i&lt;/tt&gt; option is&#160;replaced to &lt;tt&gt;-I&lt;/tt&gt;. The &lt;em&gt;newly replaced&lt;/em&gt; option &lt;tt&gt;-i&lt;/tt&gt; at Scala 2.11.12 works like &lt;tt&gt;:paste&lt;/tt&gt; (previously it worked like &lt;tt&gt;:load&lt;/tt&gt;). but still I wonder why the newly replaced &lt;tt&gt;-i&lt;/tt&gt; option does not work.&lt;/p&gt;

&lt;p&gt;Basically here&apos;s what&apos;s going on:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
scala&amp;gt; :paste test.scala
Pasting file test.scala...
test.scala:17: error: value toDF is not a member of org.apache.spark.rdd.RDD[Record]
Error occurred in an application involving &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; arguments.
       spark.sparkContext.parallelize((1 to 2).map(i =&amp;gt; Record(i, s&lt;span class=&quot;code-quote&quot;&gt;&quot;val_$i&quot;&lt;/span&gt;))).toDF.show
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;tt&gt;:paste&lt;/tt&gt; itself looks not working fine in both Spark 2.3 and 2.4.&lt;/p&gt;

&lt;p&gt;FWIW, &lt;tt&gt;./bin/spark-shell --help&lt;/tt&gt; does not show this option.&lt;/p&gt;</comment>
                            <comment id="16671296" author="apachespark" created="Thu, 1 Nov 2018 09:05:48 +0000"  >&lt;p&gt;User &apos;HyukjinKwon&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/22919&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/22919&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16671665" author="dongjoon" created="Thu, 1 Nov 2018 14:20:22 +0000"  >&lt;p&gt;Thank you! &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hyukjin.kwon&quot; class=&quot;user-hover&quot; rel=&quot;hyukjin.kwon&quot;&gt;hyukjin.kwon&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16676058" author="gurwls223" created="Tue, 6 Nov 2018 02:41:23 +0000"  >&lt;p&gt;Issue resolved by pull request 22919&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/22919&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/22919&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13188711">SPARK-25587</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s000aw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12344117">2.4.1</customfieldvalue>
    <customfieldvalue id="12339177">3.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>