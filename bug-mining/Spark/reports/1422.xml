<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:23:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-2313] PySpark should accept port via a command line argument rather than STDIN</title>
                <link>https://issues.apache.org/jira/browse/SPARK-2313</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Relying on stdin is a brittle mechanism and has broken several times in the past. From what I can tell this is used only to bootstrap worker.py one time. It would be strictly simpler to just pass it is a command line.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12724261">SPARK-2313</key>
            <summary>PySpark should accept port via a command line argument rather than STDIN</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="joshrosen">Josh Rosen</assignee>
                                    <reporter username="pwendell">Patrick Wendell</reporter>
                        <labels>
                    </labels>
                <created>Sat, 28 Jun 2014 01:14:33 +0000</created>
                <updated>Mon, 16 Feb 2015 23:38:27 +0000</updated>
                            <resolved>Mon, 16 Feb 2015 23:38:21 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>PySpark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14046843" author="farrellee" created="Sat, 28 Jun 2014 12:25:39 +0000"  >&lt;p&gt;components involved -&lt;br/&gt;
 0. pyspark - python program that initiates a py4j setup when constructing the SparkContext (calls launch_gateway form java_gateway.py)&lt;br/&gt;
 1. launch_gateway - invokes &quot;o.a.s.d.SparkSubmit pyspark-shell&quot; via spark-class via spark-submit, which invokes py4j.GatewayServer&lt;br/&gt;
 2. py4j.GatewayServer - py4j specific code that listens on a port and prints it to stdout (see GatewayServer.java#L610)&lt;br/&gt;
 3. launch_gateway - reads the port from stdin and constructs the client side of the py4j channel&lt;/p&gt;

&lt;p&gt;comments -&lt;br/&gt;
 a. by allowing the child to pick an ephemeral port there&apos;s a guarantee of success (except for the case of no available ports)&lt;br/&gt;
 b. having the parent pick a port and pass it to the child introduces a risk that when the child tries to use the port it will no longer be available. thus, not strictly simpler to keep the same guarantees that currently exist.&lt;br/&gt;
 c. printing the port to stdout from the child (py4j gatewayserver) is the intended method for discovery, see &lt;a href=&quot;https://github.com/bartdag/py4j/blob/master/py4j-java/src/py4j/GatewayServer.java#L610&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bartdag/py4j/blob/master/py4j-java/src/py4j/GatewayServer.java#L610&lt;/a&gt;&lt;br/&gt;
 d. any data on stdout from spark-submit, spark-class or o.a.s.d.SparkSubmit can interfere with the py4j setup&lt;/p&gt;

&lt;p&gt;because of (d), i consider this fragile - good meaning, unrelated changes are likely to break it.&lt;/p&gt;

&lt;p&gt;i&apos;ll take a look at this&lt;/p&gt;</comment>
                            <comment id="14063454" author="farrellee" created="Wed, 16 Jul 2014 13:15:22 +0000"  >&lt;p&gt;as this stands, having another communication mechanism for py4j that can be controlled by the parent is the proper solution. using something like a domain socket may also assist in the return path from py4j (tmp file).&lt;/p&gt;

&lt;p&gt;fyi, a recent change pushed all existing output to stderr in the spark-class/spark-submit path&lt;/p&gt;

&lt;p&gt;i&apos;m not actively working on this&lt;/p&gt;</comment>
                            <comment id="14222763" author="apachespark" created="Mon, 24 Nov 2014 07:58:32 +0000"  >&lt;p&gt;User &apos;lvsoft&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/3424&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/3424&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14223583" author="davies" created="Mon, 24 Nov 2014 21:50:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=farrellee&quot; class=&quot;user-hover&quot; rel=&quot;farrellee&quot;&gt;farrellee&lt;/a&gt; Thew new approach could be:&lt;/p&gt;

&lt;p&gt;1) bind to random socket in python, &lt;br/&gt;
2) pass the port into JVM, connect to it&lt;br/&gt;
3) Java Gateway binds to random port&lt;br/&gt;
4) pass the port back via socket (created in 1)&lt;br/&gt;
5) read the port from socket (created in 1), close it&lt;/p&gt;

&lt;p&gt;The logic will similar as current, the cost is create a temporary socket.&lt;/p&gt;</comment>
                            <comment id="14318221" author="farrellee" created="Thu, 12 Feb 2015 14:12:42 +0000"  >&lt;p&gt;that&apos;d work, also requires a py4j change&lt;/p&gt;</comment>
                            <comment id="14321236" author="apachespark" created="Sat, 14 Feb 2015 04:57:55 +0000"  >&lt;p&gt;User &apos;JoshRosen&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/4603&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/4603&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14323449" author="joshrosen" created="Mon, 16 Feb 2015 23:38:21 +0000"  >&lt;p&gt;Issue resolved by pull request 4603&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/4603&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/4603&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12775050">SPARK-5810</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12720611">SPARK-2111</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12735204">SPARK-3140</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12711329">SPARK-1670</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402446</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x9pz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402513</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326686">1.1.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>