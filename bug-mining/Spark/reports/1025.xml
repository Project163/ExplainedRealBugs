<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:20:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-4412] Parquet logger cannot be configured</title>
                <link>https://issues.apache.org/jira/browse/SPARK-4412</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;The Spark ParquetRelation.scala code makes the assumption that the parquet.Log class has already been loaded. If ParquetRelation.enableLogForwarding executes prior to the parquet.Log class being loaded then the code in enableLogForwarding has no affect.&lt;/p&gt;

&lt;p&gt;ParquetRelation.scala attempts to override the parquet logger but, at least currently (and if your application simply reads a parquet file before it does anything else with Parquet), the parquet.Log class hasn&apos;t been loaded yet. Therefore the code in ParquetRelation.enableLogForwarding has no affect. If you look at the code in parquet.Log there&apos;s a static initializer that needs to be called prior to enableLogForwarding or whatever enableLogForwarding does gets undone by this static initializer.&lt;/p&gt;

&lt;p&gt;The &quot;fix&quot; would be to force the static initializer to get called in parquet.Log as part of enableForwardLogging. &lt;/p&gt;

&lt;p&gt;PR will be forthcomming.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12755474">SPARK-4412</key>
            <summary>Parquet logger cannot be configured</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="4">Incomplete</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jimfcarroll">Jim Carroll</reporter>
                        <labels>
                            <label>bulk-closed</label>
                    </labels>
                <created>Fri, 14 Nov 2014 20:26:35 +0000</created>
                <updated>Tue, 21 May 2019 04:16:08 +0000</updated>
                            <resolved>Tue, 21 May 2019 04:16:08 +0000</resolved>
                                    <version>1.2.0</version>
                    <version>1.3.1</version>
                                                    <component>SQL</component>
                        <due></due>
                            <votes>5</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="14212824" author="apachespark" created="Fri, 14 Nov 2014 21:05:35 +0000"  >&lt;p&gt;User &apos;jimfcarroll&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/3271&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/3271&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14213072" author="marmbrus" created="Fri, 14 Nov 2014 23:33:52 +0000"  >&lt;p&gt;Issue resolved by pull request 3271&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/3271&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/3271&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14545677" author="yanakad" created="Fri, 15 May 2015 15:38:21 +0000"  >&lt;p&gt;I would like to reopen as I believe the issue has again regressed in Spark 1.3.0. This SO thread has a lengthy discussion &lt;a href=&quot;http://stackoverflow.com/questions/30052889/how-to-suppress-parquet-log-messages-in-spark&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/30052889/how-to-suppress-parquet-log-messages-in-spark&lt;/a&gt;&lt;br/&gt;
 but the short summary is that log4j.rootCategory=ERROR, console setting still leaks&lt;br/&gt;
&lt;blockquote&gt;
&lt;p&gt; INFO: parquet.hadoop.InternalParquetRecordReader &lt;/p&gt;&lt;/blockquote&gt; messages&lt;/p&gt;</comment>
                            <comment id="14545679" author="yanakad" created="Fri, 15 May 2015 15:38:52 +0000"  >&lt;p&gt;Reopening as the issue reappeared in 1.3.0&lt;/p&gt;</comment>
                            <comment id="14658378" author="hntd187" created="Wed, 5 Aug 2015 15:32:58 +0000"  >&lt;p&gt;This also happens to me a lot in Spark 1.4.0 perhaps this could be tested on the 1.4 branch as well?&lt;/p&gt;</comment>
                            <comment id="14703451" author="wyldbill" created="Wed, 19 Aug 2015 17:51:43 +0000"  >&lt;p&gt;Happening in 1.3.1 as well &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16118403" author="sscaffidi" created="Tue, 8 Aug 2017 14:46:23 +0000"  >&lt;p&gt;This is also an issue in the version of parquet distributed in CDH 5.x. In this case, I am using &lt;tt&gt;parquet-1.5.0-cdh5.8.4&lt;/tt&gt; (sources available here: &lt;a href=&quot;http://archive.cloudera.com/cdh5/cdh/5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://archive.cloudera.com/cdh5/cdh/5&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;However, I&apos;ve found a work-around for mapreduce jobs submitted via Hive. I&apos;m sure this can be adapted for use with Spark as well.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Add the following properties to your job&apos;s configuration (in my case, I added them to &lt;tt&gt;hive-site.xml&lt;/tt&gt; since adding them to &lt;tt&gt;mapred-site.xml&lt;/tt&gt; didn&apos;t work:
  &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;mapreduce.map.java.opts&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;-Djava.util.logging.config.file=parquet-logging.properties&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;mapreduce.reduce.java.opts&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;-Djava.util.logging.config.file=parquet-logging.properties&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;mapreduce.child.java.opts&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;-Djava.util.logging.config.file=parquet-logging.properties&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Create a file named &lt;tt&gt;parquet-logging.properties&lt;/tt&gt; with the following contents:
  &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;# Note: I&apos;m certain not every line here is necessary. I just added them to cover all possible
# &lt;span class=&quot;code-keyword&quot;&gt;class/&lt;/span&gt;facility names.you will want to tailor &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; as per your needs.
.level=WARNING
java.util.logging.ConsoleHandler.level=WARNING

parquet.handlers=java.util.logging.ConsoleHandler
parquet.hadoop.handlers=java.util.logging.ConsoleHandler
org.apache.parquet.handlers=java.util.logging.ConsoleHandler
org.apache.parquet.hadoop.handlers=java.util.logging.ConsoleHandler

parquet.level=WARNING
parquet.hadoop.level=WARNING
org.apache.parquet.level=WARNING
org.apache.parquet.hadoop.level=WARNING&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Add the file to the job. In Hive, this is most easily done like so:
  &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ADD FILE /path/to/parquet-logging.properties;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;With this done, when you run your Hive queries, parquet should only log WARNING (and higher) level messages to the stdout container logs.&lt;/p&gt;</comment>
                            <comment id="16118423" author="sscaffidi" created="Tue, 8 Aug 2017 14:56:36 +0000"  >&lt;p&gt;Apologies - I just realized this is the JIRA for Spark, not Parquet! A spark-oriented workaround can be found on StackOverflow, here: &lt;a href=&quot;https://stackoverflow.com/a/38344902/14186&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/a/38344902/14186&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22efr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>