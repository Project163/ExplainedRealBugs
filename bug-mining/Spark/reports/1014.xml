<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:20:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-4348] pyspark.mllib.random conflicts with random module</title>
                <link>https://issues.apache.org/jira/browse/SPARK-4348</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;There are conflict in two cases:&lt;/p&gt;

&lt;p&gt;1. random module is used by pyspark.mllib.feature, if the first part of sys.path is not &apos;&apos;, then the hack in pyspark/_&lt;em&gt;init&lt;/em&gt;_.py will fail to fix the conflict.&lt;/p&gt;

&lt;p&gt;2. Run tests in mllib/xxx.py, the &apos;&apos; should be popped out before import anything, or it will fail.&lt;/p&gt;

&lt;p&gt;The first one is not fully fixed for user, it will introduce problems in some cases, such as:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; sys
&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; sys.insert(0, PATH_OF_MODULE)
&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; pyspark
&amp;gt;&amp;gt;&amp;gt; # use Word2Vec will fail
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;d like to rename mllib/random.py as random/&lt;em&gt;random.py, then in mllib/&lt;/em&gt;_init.py&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; pyspark.mllib._random as random
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mengxr&quot; class=&quot;user-hover&quot; rel=&quot;mengxr&quot;&gt;mengxr&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dorx&quot; class=&quot;user-hover&quot; rel=&quot;dorx&quot;&gt;dorx&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12754594">SPARK-4348</key>
            <summary>pyspark.mllib.random conflicts with random module</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davies">Davies Liu</assignee>
                                    <reporter username="davies">Davies Liu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Nov 2014 22:06:40 +0000</created>
                <updated>Tue, 13 Jan 2015 00:17:49 +0000</updated>
                            <resolved>Thu, 13 Nov 2014 18:25:15 +0000</resolved>
                                    <version>1.1.0</version>
                    <version>1.2.0</version>
                                    <fixVersion>1.1.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                                    <component>MLlib</component>
                    <component>PySpark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14207199" author="dorx" created="Tue, 11 Nov 2014 22:25:48 +0000"  >&lt;p&gt;I fully support this. It took a lot of hacking just to override the default random module in Python, and it wasn&apos;t clear if the override was the ideal solution.&lt;/p&gt;</comment>
                            <comment id="14207511" author="apachespark" created="Wed, 12 Nov 2014 01:49:26 +0000"  >&lt;p&gt;User &apos;davies&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/3216&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/3216&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14207529" author="davies" created="Wed, 12 Nov 2014 02:02:58 +0000"  >&lt;p&gt;After some experiments, I found it&apos;s more harder than expected, it still need some hack to make it work (see the PR), but I think this hack is safer than before:&lt;/p&gt;

&lt;p&gt;1. the rand.py module will not overwrite default random module, so it&apos;s safe to run the mllib/xxx.py without hacking, also we do not need hack to use random in mllib package.&lt;/p&gt;

&lt;p&gt;2. the RandomModuleHook only installed when user try to import &apos;pyspark.mllib&apos;, it also only works for &apos;pyspark.mllib.random&apos;.&lt;/p&gt;

&lt;p&gt;Note: In order to use default random module, we need &apos;from _&lt;em&gt;future&lt;/em&gt;_ import absolute_import&apos; in the caller module, this also need as more. Without this, &apos;import random&apos; can be translated as &apos;from pyspark.mllib import random&apos;.  So, there is a bug in master (Word2Vec)&lt;/p&gt;</comment>
                            <comment id="14210116" author="mengxr" created="Thu, 13 Nov 2014 18:25:15 +0000"  >&lt;p&gt;Issue resolved by pull request 3216&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/3216&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/3216&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14211768" author="mengxr" created="Fri, 14 Nov 2014 03:06:00 +0000"  >&lt;p&gt;Note that after this fix, it is very likely that the bytecode file `random.pyc` still sits under `pyspark/mllib`. We need to remove it manually to prevent &quot;import random&quot; taking that file. &lt;/p&gt;</comment>
                            <comment id="14274333" author="apachespark" created="Mon, 12 Jan 2015 22:51:38 +0000"  >&lt;p&gt;User &apos;JoshRosen&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/4011&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/4011&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14274463" author="joshrosen" created="Tue, 13 Jan 2015 00:17:49 +0000"  >&lt;p&gt;I&apos;ve also fixed this in 1.1.2 by backporting the 1.2 patch:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/spark/pull/4011&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/4011&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12743650">SPARK-3662</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 45 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2295z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327369">1.2.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>