<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:07:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-29911] Cache table may memory leak when session closed</title>
                <link>https://issues.apache.org/jira/browse/SPARK-29911</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;How to reproduce:&lt;br/&gt;
1. create a local temporary view v1&lt;br/&gt;
2. cache it in memory&lt;br/&gt;
3. close session without drop v1.&lt;br/&gt;
The application will hold the memory forever. In a long running thrift server scenario. It&apos;s worse.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000&amp;gt; CACHE TABLE testCacheTable AS SELECT 1;
&lt;/span&gt;CACHE TABLE testCacheTable AS SELECT 1;
+---------+--+
| Result  |
+---------+--+
+---------+--+
No rows selected (1.498 seconds)
0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000&amp;gt; !close
&lt;/span&gt;!close
Closing: 0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000
&lt;/span&gt;0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000 (closed)&amp;gt; !connect &lt;span class=&quot;code-quote&quot;&gt;&apos;jdbc:hive2://localhost:10000&apos;&lt;/span&gt;
&lt;/span&gt;!connect &lt;span class=&quot;code-quote&quot;&gt;&apos;jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000&apos;&lt;/span&gt;
&lt;/span&gt;Connecting to jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000
&lt;/span&gt;Enter username &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000:
&lt;/span&gt;lajin
Enter password &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000:
&lt;/span&gt;***
Connected to: Spark SQL (version 3.0.0-SNAPSHOT)
Driver: Hive JDBC (version 1.2.1.spark2)
Transaction isolation: TRANSACTION_REPEATABLE_READ
1: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000&amp;gt; select * from testCacheTable;
&lt;/span&gt;select * from testCacheTable;
Error: Error running query: org.apache.spark.sql.AnalysisException: Table or view not found: testCacheTable; line 1 pos 14;
&apos;Project [*]
+- &apos;UnresolvedRelation [testCacheTable] (state=,code=0)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12985915/12985915_Screen+Shot+2019-11-15+at+2.03.49+PM.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="13268489">SPARK-29911</key>
            <summary>Cache table may memory leak when session closed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cltlfcjin">Lantao Jin</assignee>
                                    <reporter username="cltlfcjin">Lantao Jin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Nov 2019 07:01:05 +0000</created>
                <updated>Tue, 4 Jan 2022 07:48:38 +0000</updated>
                            <resolved>Thu, 21 Nov 2019 00:19:56 +0000</resolved>
                                    <version>3.0.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16975307" author="dongjoon" created="Fri, 15 Nov 2019 18:33:04 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cltlfcjin&quot; class=&quot;user-hover&quot; rel=&quot;cltlfcjin&quot;&gt;cltlfcjin&lt;/a&gt;. Since is reported as a memory leakage issue, could you check the older Spark version and update the `Affected Versions` of this JIRA issue please?&lt;/p&gt;</comment>
                            <comment id="16978835" author="srowen" created="Thu, 21 Nov 2019 00:19:56 +0000"  >&lt;p&gt;Issue resolved by pull request 26543&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/26543&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/26543&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13278427">SPARK-30470</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12985915" name="Screen Shot 2019-11-15 at 2.03.49 PM.png" size="65353" author="cltlfcjin" created="Fri, 15 Nov 2019 07:01:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z08n54:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>