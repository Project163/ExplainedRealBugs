<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:16:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-2881] Snappy is now default codec - could lead to conflicts since uses /tmp</title>
                <link>https://issues.apache.org/jira/browse/SPARK-2881</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;I was using spark master branch and I ran into an issue with Snappy since its now the default codec for shuffle. &lt;/p&gt;

&lt;p&gt;The issue was that someone else had run with snappy and it created /tmp/snappy-*.so but it had restrictive permissions so I was not able to use it or remove it.   This caused my spark job to not start.  &lt;/p&gt;

&lt;p&gt;I was running in yarn client mode at the time.  Yarn cluster mode shouldn&apos;t have this issue since we change the java.io.tmpdir. &lt;br/&gt;
I assume this would also affect standalone mode.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if this is a true blocker but wanted to file it as one at first and let us decide.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12732338">SPARK-2881</key>
            <summary>Snappy is now default codec - could lead to conflicts since uses /tmp</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pwendell">Patrick Wendell</assignee>
                                    <reporter username="tgraves">Thomas Graves</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Aug 2014 17:08:26 +0000</created>
                <updated>Mon, 1 Sep 2014 05:49:31 +0000</updated>
                            <resolved>Mon, 18 Aug 2014 00:07:39 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.1.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14088018" author="mridulm80" created="Wed, 6 Aug 2014 18:45:03 +0000"  >&lt;p&gt;To add, this will affect spark whenever tmp directory is not overridden via java.io.tmpdir to something ephemeral.&lt;/p&gt;

&lt;p&gt;So local, yarn client, standalone should be affected by default (unless I missed something in the scripts).&lt;br/&gt;
I am not very of how mesos runs jobs, so cant comment about that, anyone care to add ?&lt;/p&gt;


&lt;p&gt;A workaround I can think of is to always set &apos;org.xerial.snappy.tempdir&apos; to a randomly generated directory under &quot;java.io.tmpdir&quot; as part of spark startup (only) once : which will cause snappy to use that directory and avoid this issue. &lt;/p&gt;


&lt;p&gt;Since snappy is the default codec now, I am +1 on marking this as a blocker for release&lt;/p&gt;</comment>
                            <comment id="14090012" author="pwendell" created="Thu, 7 Aug 2014 23:08:37 +0000"  >&lt;p&gt;What about using the existing spark local dir for this?&lt;/p&gt;</comment>
                            <comment id="14099849" author="pwendell" created="Sun, 17 Aug 2014 01:36:46 +0000"  >&lt;p&gt;Actually since this uses a static system property it might be better to just do &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mridul&quot; class=&quot;user-hover&quot; rel=&quot;mridul&quot;&gt;mridul&lt;/a&gt;&apos;s suggestion and keep this simple. One possibility is just a static code block in the Snappy compression codec itself that sets it to a random sub directory of /tmp/&lt;/p&gt;</comment>
                            <comment id="14099857" author="pwendell" created="Sun, 17 Aug 2014 02:30:33 +0000"  >&lt;p&gt;I filed a bug to have snappy deal with this better out of the box.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/xerial/snappy-java/issues/84&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/xerial/snappy-java/issues/84&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14099859" author="apachespark" created="Sun, 17 Aug 2014 02:42:01 +0000"  >&lt;p&gt;User &apos;pwendell&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/1991&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1991&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14099864" author="pwendell" created="Sun, 17 Aug 2014 02:59:38 +0000"  >&lt;p&gt;It turns out this is actually fixed in newer versions of snappy-java. I&apos;m a little hesitant to do a version bump this late in the release cycle, but we do have the option of bumping the version as well.&lt;/p&gt;</comment>
                            <comment id="14099866" author="apachespark" created="Sun, 17 Aug 2014 03:06:45 +0000"  >&lt;p&gt;User &apos;pwendell&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/1994&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1994&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14099867" author="apachespark" created="Sun, 17 Aug 2014 03:11:45 +0000"  >&lt;p&gt;User &apos;pwendell&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/1995&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1995&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14099870" author="taroleo" created="Sun, 17 Aug 2014 03:26:13 +0000"  >&lt;p&gt;This problem is fixed in snappy-java 1.1.1.3. &lt;br/&gt;
But for your convenience, I applied a hot fix and released 1.0.5.3:&lt;br/&gt;
&lt;a href=&quot;https://github.com/xerial/snappy-java/commit/89277ddb7a9982126d444af3a290a1d68953ac66&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/xerial/snappy-java/commit/89277ddb7a9982126d444af3a290a1d68953ac66&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This version 1.0.5.3 is now available in Maven central:&lt;br/&gt;
&lt;a href=&quot;http://central.maven.org/maven2/org/xerial/snappy/snappy-java/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://central.maven.org/maven2/org/xerial/snappy/snappy-java/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14099996" author="apachespark" created="Sun, 17 Aug 2014 17:31:59 +0000"  >&lt;p&gt;User &apos;pwendell&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/1999&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1999&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14100164" author="pwendell" created="Sun, 17 Aug 2014 22:49:59 +0000"  >&lt;p&gt;Okay I&apos;ve merged a change in branch-1.1 updating the version to snappy-java 1.0.5.3 so this is no longer blocking Spark 1.1. I&apos;ve also submitted a patch to the master branch updating to 1.1.1.3. We can merge that when tests pass.&lt;/p&gt;</comment>
                            <comment id="14100185" author="pwendell" created="Mon, 18 Aug 2014 00:07:27 +0000"  >&lt;p&gt;Fixed in master branch via:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/1995&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1995&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12737919">HIVE-7916</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410366</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 14 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ylp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410355</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>