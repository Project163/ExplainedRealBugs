<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:52:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-20341] Support BigIngeger values &gt; 19 precision</title>
                <link>https://issues.apache.org/jira/browse/SPARK-20341</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;If you create a &lt;tt&gt;Dataset[scala.math.BigInt]&lt;/tt&gt;, then you can&apos;t have a precision &amp;gt; 19.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;scala&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BigIntWrapper(value:scala.math.BigInt)
defined &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BigIntWrapper

scala&amp;gt; val longDf = spark.createDataset(BigIntWrapper(scala.math.BigInt(&lt;span class=&quot;code-quote&quot;&gt;&quot;10000000000000000002&quot;&lt;/span&gt;))::Nil)
17/04/14 19:45:15 main INFO CodeGenerator: Code generated in 211.949738 ms
java.lang.RuntimeException: Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; encoding: java.lang.IllegalArgumentException: requirement failed: BigInteger 10000000000000000002 too large &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; decimal
staticinvoke(&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.spark.sql.types.Decimal$, DecimalType(38,0), apply, assertnotnull(input[0, BigIntWrapper, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;], top level non-flat input object).value, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;) AS value#16
+- staticinvoke(&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.spark.sql.types.Decimal$, DecimalType(38,0), apply, assertnotnull(input[0, BigIntWrapper, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;], top level non-flat input object).value, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
   +- assertnotnull(input[0, BigIntWrapper, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;], top level non-flat input object).value
      +- assertnotnull(input[0, BigIntWrapper, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;], top level non-flat input object)
         +- input[0, BigIntWrapper, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;]

  at org.apache.spark.sql.catalyst.encoders.ExpressionEncoder.toRow(ExpressionEncoder.scala:280)
  at org.apache.spark.sql.SparkSession$$anonfun$3.apply(SparkSession.scala:421)
  at org.apache.spark.sql.SparkSession$$anonfun$3.apply(SparkSession.scala:421)
  at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)
  at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)
  at scala.collection.immutable.List.foreach(List.scala:381)
  at scala.collection.TraversableLike$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;map(TraversableLike.scala:234)
  at scala.collection.immutable.List.map(List.scala:285)
  at org.apache.spark.sql.SparkSession.createDataset(SparkSession.scala:421)
  ... 54 elided
Caused by: java.lang.IllegalArgumentException: requirement failed: BigInteger 10000000000000000002 too large &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; decimal
  at scala.Predef$.require(Predef.scala:224)
  at org.apache.spark.sql.types.Decimal.set(Decimal.scala:137)
  at org.apache.spark.sql.types.Decimal$.apply(Decimal.scala:419)
  at org.apache.spark.sql.types.Decimal.apply(Decimal.scala)
  at org.apache.spark.sql.catalyst.expressions.GeneratedClass$SpecificUnsafeProjection.apply(Unknown Source)
  at org.apache.spark.sql.catalyst.encoders.ExpressionEncoder.toRow(ExpressionEncoder.scala:277)
  ... 62 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13064137">SPARK-20341</key>
            <summary>Support BigIngeger values &gt; 19 precision</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kiszk">Kazuaki Ishizaki</assignee>
                                    <reporter username="pzaczkiewicz">Paul Zaczkieiwcz</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Apr 2017 19:49:35 +0000</created>
                <updated>Fri, 21 Apr 2017 14:31:11 +0000</updated>
                            <resolved>Fri, 21 Apr 2017 14:31:11 +0000</resolved>
                                    <version>2.0.2</version>
                    <version>2.1.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                    <fixVersion>2.3.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15973227" author="kiszk" created="Tue, 18 Apr 2017 18:22:30 +0000"  >&lt;p&gt;Master branch also throws an exception.&lt;/p&gt;</comment>
                            <comment id="15973343" author="kiszk" created="Tue, 18 Apr 2017 19:31:03 +0000"  >&lt;p&gt;This exception is thrown since &lt;tt&gt;BigInt&lt;/tt&gt; and &lt;tt&gt;BigInteger&lt;/tt&gt; does not have &lt;tt&gt;precision&lt;/tt&gt; method. Current Spark runtime assumes that the value is fit into 64-bit.&lt;br/&gt;
I will create a PR by using &lt;a href=&quot;http://stackoverflow.com/questions/15677518/how-to-obtain-the-precision-of-biginteger-in-java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this approach&lt;/a&gt; to get a precision for &lt;tt&gt;BigInt&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15974589" author="apachespark" created="Wed, 19 Apr 2017 13:00:04 +0000"  >&lt;p&gt;User &apos;kiszk&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/17684&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/17684&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15974698" author="pzaczkiewicz" created="Wed, 19 Apr 2017 13:52:06 +0000"  >&lt;p&gt;Thanks! I saw &lt;tt&gt;scala.math.BigInt&lt;/tt&gt; and &lt;tt&gt;java.math.BigInteger&lt;/tt&gt; when looking through &lt;tt&gt;ScalaReflection.schemaFor&lt;/tt&gt;. I couldn&apos;t use a &lt;tt&gt;Dataset[java.math.BigDecimal]&lt;/tt&gt; because that is always precision(38,18). I figured that getting the &lt;tt&gt;BigInt&lt;/tt&gt; variants to work would be easier than getting &lt;tt&gt;BigDecimal&lt;/tt&gt; to work with a non-default precision.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3dnbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>