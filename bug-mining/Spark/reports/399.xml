<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:14:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-2003] SparkContext(SparkConf) doesn&apos;t work in pyspark</title>
                <link>https://issues.apache.org/jira/browse/SPARK-2003</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Using SparkConf with SparkContext as described in the Programming Guide does NOT work in Python:&lt;br/&gt;
conf = SparkConf.setAppName(&quot;blah&quot;)&lt;br/&gt;
sc = SparkContext(conf)&lt;br/&gt;
When I tried I got &lt;br/&gt;
AttributeError: &apos;SparkConf&apos; object has no attribute &apos;_get_object_id&apos;&lt;/p&gt;

&lt;p&gt;[This equivalent code in Scala works fine:&lt;br/&gt;
val conf = new SparkConf().setAppName(&quot;blah&quot;)&lt;br/&gt;
val sc = new SparkContext(conf)]&lt;/p&gt;

&lt;p&gt;I think this is because there&apos;s no equivalent for the Scala constructor SparkContext(SparkConf).  &lt;/p&gt;

&lt;p&gt;Workaround:&lt;br/&gt;
If I explicitly set the conf parameter in the python call, it does work:&lt;br/&gt;
sconf = SparkConf.setAppName(&quot;blah&quot;)&lt;br/&gt;
sc = SparkContext(conf=sconf)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12718225">SPARK-2003</key>
            <summary>SparkContext(SparkConf) doesn&apos;t work in pyspark</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dcarroll@cloudera.com">Diana Carroll</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Jun 2014 19:08:35 +0000</created>
                <updated>Wed, 2 Jul 2014 00:21:31 +0000</updated>
                            <resolved>Wed, 2 Jul 2014 00:21:31 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.0.1</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>Documentation</component>
                    <component>PySpark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14046125" author="farrellee" created="Fri, 27 Jun 2014 16:40:56 +0000"  >&lt;p&gt;i&apos;m taking a look at this&lt;/p&gt;</comment>
                            <comment id="14046152" author="farrellee" created="Fri, 27 Jun 2014 17:06:00 +0000"  >&lt;p&gt;first up - reproducer should be closer to:&lt;/p&gt;

&lt;p&gt;from pyspark import SparkConf, SparkContext&lt;br/&gt;
conf = SparkConf().setAppName(&quot;blah&quot;).setMaster(&apos;local&apos;)&lt;br/&gt;
sc = SparkContext(conf)&lt;/p&gt;

&lt;p&gt;documentation says -&lt;/p&gt;

&lt;p&gt;conf = SparkConf().setAppName(appName).setMaster(master)&lt;br/&gt;
sc = SparkContext(conf)&lt;/p&gt;


&lt;p&gt;however, there&apos;s a confounding issue:&lt;/p&gt;

&lt;p&gt;Traceback (most recent call last):&lt;br/&gt;
  File &quot;&amp;lt;stdin&amp;gt;&quot;, line 1, in &amp;lt;module&amp;gt;&lt;br/&gt;
  File &quot;/home/matt/Documents/Repositories/spark/dist/python/pyspark/context.py&quot;, line 94, in _&lt;em&gt;init&lt;/em&gt;_&lt;br/&gt;
    SparkContext._ensure_initialized(self, gateway=gateway)&lt;br/&gt;
  File &quot;/home/matt/Documents/Repositories/spark/dist/python/pyspark/context.py&quot;, line 197, in _ensure_initialized&lt;br/&gt;
    currentMaster = SparkContext._active_spark_context.master&lt;br/&gt;
AttributeError: &apos;SparkContext&apos; object has no attribute &apos;master&apos;&lt;/p&gt;

&lt;p&gt;this additional issue appears to be the result of adding an _ensure_initialized call before self.master is set&lt;/p&gt;</comment>
                            <comment id="14046161" author="farrellee" created="Fri, 27 Jun 2014 17:13:04 +0000"  >&lt;p&gt;actually, the attribute issue may be the result of side-effecting code in SparkConf and SparkContext and a red herring&lt;/p&gt;

&lt;p&gt;a fresh shell does not hit the master attr issue&lt;/p&gt;</comment>
                            <comment id="14046163" author="farrellee" created="Fri, 27 Jun 2014 17:19:07 +0000"  >&lt;p&gt;this is only a documentation bug&lt;/p&gt;</comment>
                            <comment id="14046168" author="farrellee" created="Fri, 27 Jun 2014 17:23:25 +0000"  >&lt;p&gt;pull request - &lt;a href=&quot;https://github.com/apache/spark/pull/1246&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1246&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14046591" author="pwendell" created="Sat, 28 Jun 2014 01:21:40 +0000"  >&lt;p&gt;Fixed via:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/1246/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1246/files&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14047710" author="dcarroll@cloudera.com" created="Mon, 30 Jun 2014 14:36:52 +0000"  >&lt;p&gt;I do not agree this is a doc bug.  This is legit code that should work.  The python implementation of the SparkContext constructor should accept a SparkConf object just like the Scala implementation does.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;from pyspark &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; SparkContext
from pyspark &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; SparkConf
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; __name__ == &lt;span class=&quot;code-quote&quot;&gt;&quot;__main__&quot;&lt;/span&gt;:
    sconf = SparkConf().setAppName(&lt;span class=&quot;code-quote&quot;&gt;&quot;My Spark App&quot;&lt;/span&gt;)
    sc = SparkContext(sconf)
    print &lt;span class=&quot;code-quote&quot;&gt;&quot;Hello world&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(setting master is not required in Spark 1.0+, as it can be set using spark-submit)&lt;/p&gt;</comment>
                            <comment id="14048109" author="joshrosen" created="Mon, 30 Jun 2014 20:30:17 +0000"  >&lt;p&gt;I guess we&apos;d have to deprecate the old SparkContext constructor in favor of the SparkConf one, since we don&apos;t have Java-style overloaded constructors in Python.&lt;/p&gt;</comment>
                            <comment id="14049047" author="farrellee" created="Tue, 1 Jul 2014 16:38:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dcarroll%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;dcarroll@cloudera.com&quot;&gt;dcarroll@cloudera.com&lt;/a&gt; -&lt;/p&gt;

&lt;p&gt;it does look like there&apos;s some inconsistency here. the python code currently requires the &quot;conf=&quot; to properly pass in the SparkConf. this can be changed and will result in an api compat change.&lt;/p&gt;

&lt;p&gt;as for the example having setMaster - it&apos;s necessary when running the code in the pyspark repl, but is not required if you use spark-submit.&lt;/p&gt;

&lt;p&gt;should a bug be filed to make setMaster optional when using the pyspark repl?&lt;/p&gt;</comment>
                            <comment id="14049084" author="dcarroll@cloudera.com" created="Tue, 1 Jul 2014 17:16:25 +0000"  >&lt;p&gt;Actually you can&apos;t create a SparkContext in the repl...it&apos;s already created&lt;br/&gt;
for you.  Therefore this bug is moot in the repl, and only applies to a&lt;br/&gt;
&quot;standalone&quot; pyspark program.&lt;/p&gt;

&lt;p&gt;as far as I know, in Scala the officially recommended way to&lt;br/&gt;
programmatically configure a SparkContext is &quot;new SparkContext(sparkConf)&quot;.&lt;br/&gt;
 Therefore the same should be true for PySpark.&lt;/p&gt;


&lt;p&gt;On Tue, Jul 1, 2014 at 12:40 PM, Matthew Farrellee (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;
</comment>
                            <comment id="14049243" author="farrellee" created="Tue, 1 Jul 2014 19:51:27 +0000"  >&lt;p&gt;good catch! i misspoke, you need setMaster if you&apos;re using the python repl.&lt;/p&gt;

&lt;p&gt;so we&apos;re on the same page for: when you use the pyspark repl or spark-submit prog.py you don&apos;t need setMaster.&lt;/p&gt;

&lt;p&gt;as for the SparkContext constructor, we can make SparkContext(sparkConf) work, but it will be an api change that isn&apos;t backward compatible.&lt;/p&gt;</comment>
                            <comment id="14049456" author="pwendell" created="Wed, 2 Jul 2014 00:21:15 +0000"  >&lt;p&gt;If I understand correctly, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dcarroll%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;dcarroll@cloudera.com&quot;&gt;dcarroll@cloudera.com&lt;/a&gt; is asking us to change this API to make it more consistent with other languages. I don&apos;t see a way of doing this without breaking the existing behavior for old users (which we can&apos;t do). In python, it&apos;s not possible to overload constructors in the same way as in Java because it&apos;s not strongly typed. I&apos;d guess this is why Matei didn&apos;t change it when he refactored the constructor to take a configuration.&lt;/p&gt;

&lt;p&gt;For that reason I&apos;m going to close this as &quot;wontFix&quot; - but if there is indeed a backwards-compatible way to do that, please feel free to re-open it with a proposal.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396427</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1w91r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396549</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>