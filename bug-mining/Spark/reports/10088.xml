<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:45:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-50759] Spark catalog api bug when working with non-hms based catalog</title>
                <link>https://issues.apache.org/jira/browse/SPARK-50759</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Hi&lt;/p&gt;

&lt;p&gt;I am encountering issues while working with a REST-based catalog. My Spark session is configured with a default catalog that uses the REST-based implementation.&lt;/p&gt;

&lt;p&gt;The&#160;&lt;tt&gt;SparkSession.catalog&lt;/tt&gt;&#160;API does not function correctly with the REST-based catalog. This issue has been tested and observed in Spark 3.4.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;${SPARK_HOME}/bin/spark-shell --master local&lt;span class=&quot;error&quot;&gt;&amp;#91;*&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;--driver-memory 2g&lt;br/&gt;
--conf spark.hadoop.fs.s3a.aws.credentials.provider=org.apache.hadoop.fs.s3a.TemporaryAWSCredentialsProvider&lt;br/&gt;
--conf spark.sql.catalog.iceberg.uri=&lt;a href=&quot;https://xx.xxx.xxxx.domain.com/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://xx.xxx.xxxx.domain.com&lt;/a&gt;&lt;br/&gt;
--conf spark.sql.warehouse.dir=$SQL_WAREHOUSE_DIR&lt;br/&gt;
--conf spark.sql.defaultCatalog=iceberg&lt;br/&gt;
--conf spark.sql.catalog.iceberg=org.apache.iceberg.spark.SparkCatalog&lt;br/&gt;
--conf spark.sql.catalog.iceberg.catalog-impl=org.apache.iceberg.rest.RESTCatalog \&lt;/p&gt;

&lt;p&gt;scala&amp;gt; spark.catalog.currentCatalog&lt;br/&gt;
res1: String = iceberg&lt;/p&gt;

&lt;p&gt;scala&amp;gt; spark.sql(&quot;select * from restDb.restTable&quot;).show&lt;br/&gt;
&lt;ins&gt;--&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;---------+&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; id&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; data&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;ins&gt;--&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;---------+&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;some_value&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;ins&gt;--&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;---------+&lt;/p&gt;

&lt;p&gt;scala&amp;gt; spark.catalog.tableExists(&quot;restDb.restTable&quot;)&lt;br/&gt;
&lt;b&gt;res3: Boolean = true&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;scala&amp;gt; spark.catalog.tableExists(&quot;restDb&quot;, &quot;restTable&quot;)&lt;br/&gt;
&lt;b&gt;res4: Boolean = false&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------------------------&lt;br/&gt;
&#160;&lt;br/&gt;
API&#160;spark.catalog.tableExists(String databaseName, String tableName)&#160;&lt;br/&gt;
&#160;is only meant to work with HMS based catalog&#160;(&lt;a href=&quot;https://github.com/apache/spark/blob/5a91172c019c119e686f8221bbdb31f59d3d7776/sql/core/src/main/scala/org/apache/spark/sql/catalog/Catalog.scala#L224&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/blob/5a91172c019c119e686f8221bbdb31f59d3d7776/sql/core/src/main/scala/org/apache/spark/sql/catalog/Catalog.scala#L224&lt;/a&gt;)&lt;br/&gt;
&#160;&lt;br/&gt;
spark.catalog.tableExists(String databaseName, String tableName)&#160;&lt;br/&gt;
&#160; is meant to work with hms and non-hms based catalogs&#160;&lt;br/&gt;
&#160;&lt;br/&gt;
&#160;&lt;br/&gt;
Suggested resolutions&lt;br/&gt;
1. API&#160;spark.catalog.tableExists(String databaseName, String tableName)&#160;to throw runtime exception if session catalog is non-hms based catalog&lt;br/&gt;
2. Deprecrate HMS specific API in newer Spark release as Spark already have API that can work with hms and non-hms based catalogs.&lt;br/&gt;
&#160;&lt;br/&gt;
Thanks&lt;br/&gt;
Sunny&lt;/p&gt;</description>
                <environment></environment>
        <key id="13604137">SPARK-50759</key>
            <summary>Spark catalog api bug when working with non-hms based catalog</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sunny1154">Sunny malik</assignee>
                                    <reporter username="sunny1154">Sunny malik</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 7 Jan 2025 21:38:55 +0000</created>
                <updated>Fri, 14 Mar 2025 20:57:55 +0000</updated>
                            <resolved>Fri, 14 Mar 2025 20:57:55 +0000</resolved>
                                    <version>3.4.0</version>
                    <version>3.5.4</version>
                    <version>4.0.0</version>
                                    <fixVersion>4.1.0</fixVersion>
                                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17928074" author="cloud_fan" created="Tue, 18 Feb 2025 12:54:25 +0000"  >&lt;p&gt;This is by design to avoid breaking changes. These legacy APIs will remain operating on the `spark_catalog` no matter what the current catalog is.&lt;/p&gt;

&lt;p&gt;I&apos;m +1 to deprecate them and promote the new APIs that take qualified table names. Also cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dongjoon&quot; class=&quot;user-hover&quot; rel=&quot;dongjoon&quot;&gt;dongjoon&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17935642" author="cloud_fan" created="Fri, 14 Mar 2025 20:57:55 +0000"  >&lt;p&gt;Issue resolved by pull request 50085&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/50085&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/50085&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1tgyg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>