<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:22:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-4923] Add Developer API to REPL to allow re-publishing the REPL jar</title>
                <link>https://issues.apache.org/jira/browse/SPARK-4923</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Spark-repl installation and deployment has been discontinued (see &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-3452&quot; title=&quot;Maven build should skip publishing artifacts people shouldn&amp;#39;t depend on&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-3452&quot;&gt;&lt;del&gt;SPARK-3452&lt;/del&gt;&lt;/a&gt;). But its in the dependency list of a few projects that extends its initialization process.&lt;br/&gt;
Please remove the &apos;skip&apos; setting in spark-repl and make it an &apos;official&apos; API to encourage more platform to integrate with it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12763321">SPARK-4923</key>
            <summary>Add Developer API to REPL to allow re-publishing the REPL jar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="senkwich">Chip Senkbeil</assignee>
                                    <reporter username="peng">Peng Cheng</reporter>
                        <labels>
                            <label>shell</label>
                    </labels>
                <created>Mon, 22 Dec 2014 22:07:39 +0000</created>
                <updated>Thu, 29 Jan 2015 08:13:51 +0000</updated>
                            <resolved>Tue, 20 Jan 2015 21:36:26 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                                    <component>Build</component>
                    <component>Spark Shell</component>
                        <due></due>
                            <votes>6</votes>
                                    <watches>13</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="14256308" author="pwendell" created="Mon, 22 Dec 2014 23:20:23 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pc175%40uowmail.edu.au&quot; class=&quot;user-hover&quot; rel=&quot;pc175@uowmail.edu.au&quot;&gt;pc175@uowmail.edu.au&lt;/a&gt; - we removed this from Maven because it&apos;s not meant as a stable API in Spark. Could you talk about which parts of the repl API you are using and how you are using it?&lt;/p&gt;</comment>
                            <comment id="14256319" author="peng" created="Mon, 22 Dec 2014 23:42:03 +0000"  >&lt;p&gt;Hey Patrick,&lt;/p&gt;

&lt;p&gt;The following API has been integrated since 1.0.0, IMHO they are stable enough for daily prototyping, creating case class used to be defective but has been fixed long time ago.&lt;br/&gt;
SparkILoop.getAddedJars()&lt;br/&gt;
$SparkIMain.bind&lt;br/&gt;
$SparkIMain.quietBind&lt;br/&gt;
$SparkIMain.interpret&lt;br/&gt;
end of &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;At first I assume that further development on it has been moved to databricks cloud. But the JIRA ticket was already there in September. So maybe demand on this API from the community is indeed low enough.&lt;br/&gt;
However, I would still suggest keeping it, even promoting it into a Developer&apos;s API, this would encourage more projects to integrate in a more flexible way, and save prototyping/QA cost by customizing fixtures of REPL. People will still move to databricks cloud, which has far more features than that. Many influential projects already depends on the routinely published Scala-REPL (e.g. playFW), it would be strange for Spark not doing the same.&lt;br/&gt;
What do you think? &lt;/p&gt;</comment>
                            <comment id="14256322" author="peng" created="Mon, 22 Dec 2014 23:45:07 +0000"  >&lt;p&gt;Sorry my project is &lt;a href=&quot;https://github.com/tribbloid/ISpark&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tribbloid/ISpark&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14256393" author="pwendell" created="Tue, 23 Dec 2014 01:02:50 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pc175%40uowmail.edu.au&quot; class=&quot;user-hover&quot; rel=&quot;pc175@uowmail.edu.au&quot;&gt;pc175@uowmail.edu.au&lt;/a&gt;, thanks for filling that in - I didn&apos;t even realize we had code in there that was bytecode public. By stable I meant that we are promising it is an unchanging API. This is what we usually think about when we release things. For 1.2.0 I refactored our build and found out that we were publishing a bunch of random internal build components, so I took them all out of the published artifacts (examples, our assembly jar, etc) in &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-4923&quot; title=&quot;Add Developer API to REPL to allow re-publishing the REPL jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-4923&quot;&gt;&lt;del&gt;SPARK-4923&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Anyways - perhaps we could just annotate these as developer API&apos;s and be clear that they might change in the future. If you wanted to do that, and re-enable publishing them, I&apos;d be happy to do that.&lt;/p&gt;</comment>
                            <comment id="14256440" author="peng" created="Tue, 23 Dec 2014 01:46:48 +0000"  >&lt;p&gt;thank you so much! First patch uploaded&lt;/p&gt;</comment>
                            <comment id="14258666" author="jerryshao" created="Thu, 25 Dec 2014 07:24:27 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pwendell&quot; class=&quot;user-hover&quot; rel=&quot;pwendell&quot;&gt;pwendell&lt;/a&gt;, for some projects like Zeppelin(&lt;a href=&quot;http://zeppelin-project.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://zeppelin-project.org/&lt;/a&gt;) depend on this repl jar to work, it would be very nice to publish this jar publicly, as for 1.1 version Spark actually published it. This changes will make several similar projects fail to update to latest Spark version.&lt;/p&gt;</comment>
                            <comment id="14258772" author="pwendell" created="Thu, 25 Dec 2014 14:53:21 +0000"  >&lt;p&gt;Yes - I can retro-actively publish this one for Spark 1.2.&lt;/p&gt;</comment>
                            <comment id="14259341" author="noootsab" created="Sat, 27 Dec 2014 11:09:05 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pwendell&quot; class=&quot;user-hover&quot; rel=&quot;pwendell&quot;&gt;pwendell&lt;/a&gt;, when done, I&apos;ll start supporting this release it in the &lt;a href=&quot;https://github.com/andypetrella/spark-notebook&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Spark Notebook&lt;/a&gt; as well.&lt;/p&gt;</comment>
                            <comment id="14261185" author="peng" created="Tue, 30 Dec 2014 15:53:20 +0000"  >&lt;p&gt;Hey, a guy waiting for it was complaining that the version number of spark-repl_2.10 on typesafe repo is actually 1.2.0-SNAPSHOT, not the released 1.2.0&lt;br/&gt;
Is it done on purpose?&lt;/p&gt;</comment>
                            <comment id="14261198" author="srowen" created="Tue, 30 Dec 2014 16:04:11 +0000"  >&lt;p&gt;The typesafe repo would not be where the artifacts are officially released. I don&apos;t see any 1.2.x artifacts for the REPL anywhere, including Maven Central. That&apos;s the point of this JIRA. If someone published a snapshot release to a different repo I think you&apos;d best ask them.&lt;/p&gt;</comment>
                            <comment id="14261216" author="etmjansen" created="Tue, 30 Dec 2014 16:30:16 +0000"  >&lt;p&gt;I am sorry for any misunderstanding. I did not find the SNAPSHOT in the typesafe repo, but indeed somewhere else on GitHub.&lt;/p&gt;</comment>
                            <comment id="14261639" author="helena_e" created="Tue, 30 Dec 2014 23:24:34 +0000"  >&lt;p&gt;We are updating &lt;a href=&quot;https://github.com/datastax/spark-cassandra-connector&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/datastax/spark-cassandra-connector&lt;/a&gt; which integrates with the REPL, as does DSE, so this is a blocker for our upgrade to spark 1.2.0 as well.&lt;/p&gt;</comment>
                            <comment id="14263458" author="senkwich" created="Sat, 3 Jan 2015 07:33:38 +0000"  >&lt;p&gt;FYI, this is a blocker for us as well: &lt;a href=&quot;https://github.com/ibm-et/spark-kernel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ibm-et/spark-kernel&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Specific issue: &lt;a href=&quot;https://github.com/ibm-et/spark-kernel/issues/12&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ibm-et/spark-kernel/issues/12&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We are using quite a few different public methods from SparkIMain (such as valueOfTerm to pull out variables from the interpreter), not just interpret and bind. The API markings suggested by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=peng&quot; class=&quot;user-hover&quot; rel=&quot;peng&quot;&gt;peng&lt;/a&gt; would not be enough for us, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pwendell&quot; class=&quot;user-hover&quot; rel=&quot;pwendell&quot;&gt;pwendell&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14263539" author="bzz" created="Sat, 3 Jan 2015 14:00:06 +0000"  >&lt;p&gt;Just FYI, same for us here &lt;a href=&quot;https://github.com/NFLabs/zeppelin/issues/260&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/NFLabs/zeppelin/issues/260&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14263681" author="peng" created="Sun, 4 Jan 2015 00:03:35 +0000"  >&lt;p&gt;You are right, in fact &apos;Dev&apos;s API&apos; simply means method is susceptible to changes without deprecation or notice, which the main 3 markings will be least likely to undergo.&lt;br/&gt;
Could you please edit the patch and add more markings?&lt;/p&gt;</comment>
                            <comment id="14274239" author="pwendell" created="Mon, 12 Jan 2015 21:58:22 +0000"  >&lt;p&gt;Hey All,&lt;/p&gt;

&lt;p&gt;Sorry this has caused a disruption. As I said in the earlier comment. if anyone on these projects can submit a patch that locks down the visibility in that package and opening up things that are specifically needed, I&apos;m fine to keep publishing it (and do so retro-actively for 1.2). We just need to look closely at what we are exposing because this package currently violates Spark&apos;s API policy. Because the Scala repl does not itself offer any kind of API stability, it will be hard for Spark to do same. But I think it&apos;s fine to just annotate and expose unstable API&apos;s here, provided projects understand the implications of depending on them.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=senkwich&quot; class=&quot;user-hover&quot; rel=&quot;senkwich&quot;&gt;senkwich&lt;/a&gt; - since you guys are probably the heaviest user, would you be willing to take a crack at this? Basically start by making everything private and then go and unlock things that you need as Developer API&apos;s.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Patrick&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14274253" author="senkwich" created="Mon, 12 Jan 2015 22:07:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pwendell&quot; class=&quot;user-hover&quot; rel=&quot;pwendell&quot;&gt;pwendell&lt;/a&gt;, I can definitely do that. Would you prefer a patch in the same form as the one attached? Or would it be better to create a pull request on Github for this with the changes?&lt;/p&gt;</comment>
                            <comment id="14274263" author="pwendell" created="Mon, 12 Jan 2015 22:10:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=senkwich&quot; class=&quot;user-hover&quot; rel=&quot;senkwich&quot;&gt;senkwich&lt;/a&gt; definitely prefer github.&lt;/p&gt;</comment>
                            <comment id="14274268" author="senkwich" created="Mon, 12 Jan 2015 22:12:41 +0000"  >&lt;p&gt;Okay, I&apos;ll do that and update this JIRA once I&apos;ve submitted the pull request.&lt;/p&gt;</comment>
                            <comment id="14276558" author="apachespark" created="Wed, 14 Jan 2015 06:33:17 +0000"  >&lt;p&gt;User &apos;rcsenkbeil&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/4034&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/4034&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14276562" author="senkwich" created="Wed, 14 Jan 2015 06:36:35 +0000"  >&lt;p&gt;As the nice bot has stated, I created a pull request for this issue. I detailed why I marked each method/field public and provided Scaladocs for each of them to make the exposure of the REPL API a little nicer.&lt;/p&gt;

&lt;p&gt;As stated in the pull request, I only tackled Scala 2.10 for now as the Scala 2.11 did not &quot;appear&quot; to be ready, although I could easily be mistaken. I merely glanced at the SparkIMain and noticed that it did not have the class server declaration to ship the compiled class files nor was it - or any of the other classes - in the org.apache.spark.repl package.&lt;/p&gt;</comment>
                            <comment id="14284461" author="pwendell" created="Tue, 20 Jan 2015 21:36:26 +0000"  >&lt;p&gt;I updated the title of this to reflect the work that actually happened in Chip&apos;s patch. And &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-5289&quot; title=&quot;Backport publishing of repl, yarn into branch-1.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-5289&quot;&gt;&lt;del&gt;SPARK-5289&lt;/del&gt;&lt;/a&gt; is tracking publishing of the artifacts.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12768142">SPARK-5289</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12688770" name="SPARK-4923__Maven_build_should_keep_publishing_spark-repl.patch" size="3701" author="peng" created="Tue, 23 Dec 2014 01:46:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 43 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23p93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311620" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Shepherd</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>pwendell</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327642">1.3.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>