<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:37:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-12582] IndexShuffleBlockResolverSuite fails in windows</title>
                <link>https://issues.apache.org/jira/browse/SPARK-12582</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;IndexShuffleBlockResolverSuite fails in my windows develop machine.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[info] IndexShuffleBlockResolverSuite:
[info] - commit shuffle files multiple times *** FAILED *** (388 milliseconds)
[info]   Array(10, 0, 20) equaled Array(10, 0, 20) (IndexShuffleBlockResolverSuite.scala:108)
[info]   org.scalatest.exceptions.TestFailedException:
.....
.....
[info] Exception encountered when attempting to run a suite with &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;name: org.apache.spark.shuffle.sort.IndexShuffleB
lockResolverSuite *** ABORTED *** (2 seconds, 234 milliseconds)
[info]   java.io.IOException: Failed to delete: C:\Users\yyu29\Documents\codes.next\spark\target\tmp\spark-0e81a15a-e712
-4b1c-a089-f421db149e65
[info]   at org.apache.spark.util.Utils$.deleteRecursively(Utils.scala:940)
[info]   at org.apache.spark.shuffle.sort.IndexShuffleBlockResolverSuite.afterEach(IndexShuffleBlockResolverSuite.scala:
60)
[info]   at org.scalatest.BeforeAndAfterEach$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;afterEach(BeforeAndAfterEach.scala:205)
[info]   at org.apache.spark.shuffle.sort.IndexShuffleBlockResolverSuite.afterEach(IndexShuffleBlockResolverSuite.scala:
36)
[info]   at org.scalatest.BeforeAndAfterEach$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;afterEach(BeforeAndAfterEach.scala:220)
[info]   at org.apache.spark.shuffle.sort.IndexShuffleBlockResolverSuite.afterEach(IndexShuffleBlockResolverSuite.scala:
36)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Root cause is when &quot;afterEach&quot; wants to clean up data, some files are still open. For example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-comment&quot;&gt;// The dataFile should be the previous one
&lt;/span&gt;    val in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(dataFile)
    val firstByte = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Array[&lt;span class=&quot;code-object&quot;&gt;Byte&lt;/span&gt;](1)
    in.read(firstByte)
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt;(firstByte(0) === 0)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Lack of &quot;in.close()&quot;. &lt;br/&gt;
In Linux, it is not a problem, you can still delete a file even it is open, but this does not work in windows, which will report &quot;resource is busy&quot;.&lt;/p&gt;

&lt;p&gt;Another issue is this IndexShuffleBlockResolverSuite.scala is a scala file but it is placed in &quot;test/java&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12924875">SPARK-12582</key>
            <summary>IndexShuffleBlockResolverSuite fails in windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yucai">yucai</assignee>
                                    <reporter username="yucai">yucai</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Dec 2015 12:36:15 +0000</created>
                <updated>Tue, 12 Jan 2016 13:23:45 +0000</updated>
                            <resolved>Tue, 12 Jan 2016 13:23:45 +0000</resolved>
                                                    <fixVersion>1.6.1</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Tests</component>
                    <component>Windows</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15075011" author="apachespark" created="Wed, 30 Dec 2015 12:52:04 +0000"  >&lt;p&gt;User &apos;yucai&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/10526&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/10526&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15093863" author="srowen" created="Tue, 12 Jan 2016 13:23:45 +0000"  >&lt;p&gt;Issue resolved by pull request 10526&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/10526&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/10526&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 45 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2qelz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12334009">1.6.1</customfieldvalue>
    <customfieldvalue id="12329449">2.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>