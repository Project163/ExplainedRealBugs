<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:22:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-4986] Graceful shutdown for Spark Streaming does not work in Standalone cluster mode</title>
                <link>https://issues.apache.org/jira/browse/SPARK-4986</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;When using the graceful stop API of Spark Streaming in Spark Standalone cluster the stop signal never reaches the receivers. I have tested this with Spark 1.2 and Kafka receivers. &lt;/p&gt;

&lt;p&gt;ReceiverTracker will send StopReceiver message to ReceiverSupervisorImpl.&lt;br/&gt;
In local mode ReceiverSupervisorImpl receives this message but in Standalone cluster mode the message seems to be lost.&lt;/p&gt;

&lt;p&gt;(I have modified the code to send my own string message as a stop signal from ReceiverTracker to ReceiverSupervisorImpl and it works as a workaround.)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12763984">SPARK-4986</key>
            <summary>Graceful shutdown for Spark Streaming does not work in Standalone cluster mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="koudelka">Jesper Lundgren</assignee>
                                    <reporter username="koudelka">Jesper Lundgren</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Dec 2014 07:28:46 +0000</created>
                <updated>Thu, 30 Apr 2015 15:57:34 +0000</updated>
                            <resolved>Tue, 3 Feb 2015 23:23:25 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.2</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>DStreams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14260815" author="koudelka" created="Tue, 30 Dec 2014 05:20:48 +0000"  >&lt;p&gt;I am currently using this patch as a work around.&lt;br/&gt;
&lt;a href=&quot;https://gist.github.com/cleaton/dad2633ec56403fdd331&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gist.github.com/cleaton/dad2633ec56403fdd331&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Still don&apos;t know why the original StopReceiver object can not be sent as a akka message in cluster mode.&lt;/p&gt;</comment>
                            <comment id="14260941" author="koudelka" created="Tue, 30 Dec 2014 09:31:16 +0000"  >&lt;p&gt;Can anyone else confirm confirm that this is an issue?&lt;/p&gt;</comment>
                            <comment id="14261981" author="koudelka" created="Wed, 31 Dec 2014 06:32:49 +0000"  >&lt;p&gt;I have updated the gist link with a modified patch. Added code to wait for the receiver job to be terminated before shutting down.&lt;/p&gt;</comment>
                            <comment id="14262045" author="joshrosen" created="Wed, 31 Dec 2014 09:19:57 +0000"  >&lt;p&gt;I think I found one potential cause of why this works in local mode but not on a real cluster, which I&apos;ve described at &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-5035&quot; title=&quot;Streaming ReceiverMessage trait should extend Serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-5035&quot;&gt;&lt;del&gt;SPARK-5035&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14262503" author="tdas" created="Thu, 1 Jan 2015 00:06:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=koudelka&quot; class=&quot;user-hover&quot; rel=&quot;koudelka&quot;&gt;koudelka&lt;/a&gt; I have merged &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-5035&quot; title=&quot;Streaming ReceiverMessage trait should extend Serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-5035&quot;&gt;&lt;del&gt;SPARK-5035&lt;/del&gt;&lt;/a&gt;, could you check whether this issue is solved in your environment?&lt;/p&gt;</comment>
                            <comment id="14263697" author="apachespark" created="Sun, 4 Jan 2015 01:35:05 +0000"  >&lt;p&gt;User &apos;cleaton&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/3868&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/3868&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14291158" author="srowen" created="Sun, 25 Jan 2015 16:15:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=koudelka&quot; class=&quot;user-hover&quot; rel=&quot;koudelka&quot;&gt;koudelka&lt;/a&gt; This sounds pretty related to the issue I raised in &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-4545&quot; title=&quot;If first Spark Streaming batch fails, it waits 10x batch duration before stopping&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-4545&quot;&gt;&lt;del&gt;SPARK-4545&lt;/del&gt;&lt;/a&gt;. I&apos;m not sure, but your changes might address the problem too &amp;#8211; graceful shutdown takes a long time if no batch succeeds. If you have a moment would you mind taking a look? If it&apos;s really a subset of the problem you&apos;re solving we can close the other one.&lt;/p&gt;</comment>
                            <comment id="14291349" author="koudelka" created="Mon, 26 Jan 2015 01:29:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srowen&quot; class=&quot;user-hover&quot; rel=&quot;srowen&quot;&gt;srowen&lt;/a&gt; The current patch I have does not address this issue, but looking at the code I think a check for eventActor == null might do the trick.&lt;/p&gt;

&lt;p&gt;&quot;  // eventActor is created when generator starts.&lt;br/&gt;
  // This not being null means the scheduler has been started and not stopped&lt;br/&gt;
  private var eventActor: ActorRef = null&lt;br/&gt;
&quot;&lt;/p&gt;</comment>
                            <comment id="14303358" author="apachespark" created="Tue, 3 Feb 2015 14:46:40 +0000"  >&lt;p&gt;User &apos;cleaton&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/4338&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/4338&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12757107">SPARK-4545</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23t9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>