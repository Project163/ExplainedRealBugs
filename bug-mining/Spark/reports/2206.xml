<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:30:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-8405] Show executor logs on Web UI when Yarn log aggregation is enabled</title>
                <link>https://issues.apache.org/jira/browse/SPARK-8405</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;When running Spark application in Yarn mode and Yarn log aggregation is enabled, customer is not able to view executor logs on the history server Web UI. The only way for customer to view the logs is through the Yarn command &quot;yarn logs -applicationId &amp;lt;appId&amp;gt;&quot;.&lt;/p&gt;

&lt;p&gt;An screenshot of the error is attached. When you click an executor&#8217;s log link on the Spark history server, you&#8217;ll see the error if Yarn log aggregation is enabled. The log URL redirects user to the node manager&#8217;s UI. This works if the logs are located on that node. But since log aggregation is enabled, the local logs are deleted once log aggregation is completed. &lt;/p&gt;

&lt;p&gt;The logs should be available through the web UIs just like other Hadoop components like MapReduce. For security reasons, end users may not be able to log into the nodes and run the yarn logs -applicationId command. The web UIs can be viewable and exposed through the firewall if necessary.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12838404">SPARK-8405</key>
            <summary>Show executor logs on Web UI when Yarn log aggregation is enabled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="carsonwang">Carson Wang</assignee>
                                    <reporter username="carsonwang">Carson Wang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Jun 2015 07:56:49 +0000</created>
                <updated>Thu, 8 Jun 2017 16:48:07 +0000</updated>
                            <resolved>Mon, 27 Jul 2015 13:04:11 +0000</resolved>
                                    <version>1.4.0</version>
                                    <fixVersion>1.4.2</fixVersion>
                                    <component>Web UI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14589475" author="carsonwang" created="Wed, 17 Jun 2015 08:24:53 +0000"  >&lt;p&gt;I had some in progress works and here is the approach I was using.&lt;br/&gt;
1. If Yarn log aggreation is enabled, we update each executor&apos;s log URL on the history server. The new URL link is a new added log page hosted on the history server. These URLs are passed the same as how other URLs are passed. So we have enough information like the container Id, appOwner, etc.&lt;br/&gt;
2. The log page reads the aggregated logs from HDFS by using Yarn APIs. &lt;/p&gt;

&lt;p&gt;This is transparent to the end users. If Yarn log aggreation is not enabled, nothing is changed. If it is eanbled, the end user will be albe to click the executor&apos;s log link and view the logs on Web UI. &lt;/p&gt;

&lt;p&gt;Is there any concerns regarding reading the aggregated logs from HDFS? The Map Reduce history server reads the aggregated logs from HDFS as well to show the logs so I suppose it is ok for Spark history server to read it.&lt;/p&gt;</comment>
                            <comment id="14602496" author="apachespark" created="Fri, 26 Jun 2015 07:08:10 +0000"  >&lt;p&gt;User &apos;carsonwang&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/7033&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/7033&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14603262" author="hshreedharan" created="Fri, 26 Jun 2015 17:32:33 +0000"  >&lt;p&gt;If you wait for a  few seconds, that webpage does redirect to the correct logs, in recent versions of YARN.&lt;/p&gt;</comment>
                            <comment id="14603269" author="hshreedharan" created="Fri, 26 Jun 2015 17:35:47 +0000"  >&lt;p&gt;Actually I think this is a config issue on your YARN cluster. See: &lt;a href=&quot;https://groups.google.com/a/cloudera.org/forum/#!topic/cdh-user/HBGzj_NG9_s&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://groups.google.com/a/cloudera.org/forum/#!topic/cdh-user/HBGzj_NG9_s&lt;/a&gt; and &lt;a href=&quot;http://stackoverflow.com/questions/24076192/yarn-jobhistory-error-failed-redirect-for-container-1400260444475-3309-01-00000&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/24076192/yarn-jobhistory-error-failed-redirect-for-container-1400260444475-3309-01-00000&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14605126" author="carsonwang" created="Mon, 29 Jun 2015 05:08:05 +0000"  >&lt;p&gt;Thank you very much, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hshreedharan&quot; class=&quot;user-hover&quot; rel=&quot;hshreedharan&quot;&gt;hshreedharan&lt;/a&gt;&lt;br/&gt;
After I configured yarn.log.server.url in yarn-site.xml, the log url did redirect to MR job history server&apos;s UI and was able to show the logs. But this seems a little strange because we need view Spark&apos;s log on MR history server. Would it make more sense that Spark history server reads and shows the aggregated logs itself?&lt;/p&gt;</comment>
                            <comment id="14631024" author="carsonwang" created="Fri, 17 Jul 2015 08:43:11 +0000"  >&lt;p&gt;I think we can improve the doc so users will know that the aggregated logs are available on Web UI if MR history server is running and the configuration are correct.&lt;/p&gt;</comment>
                            <comment id="14631042" author="apachespark" created="Fri, 17 Jul 2015 08:54:03 +0000"  >&lt;p&gt;User &apos;carsonwang&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/7463&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/7463&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13078193">SPARK-21013</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12848886">SPARK-9311</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12740065" name="SparkLogError.png" size="101689" author="carsonwang" created="Wed, 17 Jun 2015 07:58:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g56f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>