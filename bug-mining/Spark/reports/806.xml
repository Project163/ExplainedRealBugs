<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:18:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-3706] Cannot run IPython REPL with IPYTHON set to &quot;1&quot; and PYSPARK_PYTHON unset</title>
                <link>https://issues.apache.org/jira/browse/SPARK-3706</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;h3&gt;&lt;a name=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h3&gt;

&lt;p&gt;The section &quot;Using the shell&quot; in Spark Programming Guide (&lt;a href=&quot;https://spark.apache.org/docs/latest/programming-guide.html#using-the-shell&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://spark.apache.org/docs/latest/programming-guide.html#using-the-shell&lt;/a&gt;) says that we can run pyspark REPL through IPython.&lt;br/&gt;
But a folloing command does not run IPython but a default Python executable.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;$ IPYTHON=1 ./bin/pyspark&lt;br/&gt;
Python 2.7.8 (default, Jul  2 2014, 10:14:46) &lt;br/&gt;
...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;the spark/bin/pyspark script on the commit b235e013638685758885842dc3268e9800af3678 decides which executable and options it use folloing way.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;if PYSPARK_PYTHON unset
	&lt;ul&gt;
		&lt;li&gt;&#8594; defaulting to &quot;python&quot;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;if IPYTHON_OPTS set
	&lt;ul&gt;
		&lt;li&gt;&#8594; set IPYTHON &quot;1&quot;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;some python scripts passed to ./bin/pyspak &#8594; run it with ./bin/spark-submit
	&lt;ul&gt;
		&lt;li&gt;out of this issues scope&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;if IPYTHON set as &quot;1&quot;
	&lt;ul&gt;
		&lt;li&gt;&#8594; execute $PYSPARK_PYTHON (default: ipython) with arguments $IPYTHON_OPTS&lt;/li&gt;
		&lt;li&gt;otherwise execute $PYSPARK_PYTHON&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Therefore, when PYSPARK_PYTHON is unset, python is executed though IPYTHON is &quot;1&quot;.&lt;br/&gt;
In other word, when PYSPARK_PYTHON is unset, IPYTHON_OPS and IPYTHON has no effect on decide which command to use.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;PYSPARK_PYTHON&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;IPYTHON_OPTS&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;IPYTHON&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;resulting command&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;expected command&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(unset &#8594; defaults to python)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(unset)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(unset)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;python&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(same)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(unset &#8594; defaults to python)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(unset)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;python&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ipython&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(unset &#8594; defaults to python)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;an_option&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(unset &#8594; set to 1)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;python an_option&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ipython an_option&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(unset &#8594; defaults to python)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;an_option&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;python an_option&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ipython an_option&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ipython&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(unset)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(unset)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ipython&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(same)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ipython&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(unset)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ipython&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(same)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ipython&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;an_option&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(unset &#8594; set to 1)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ipython an_option&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(same)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ipython&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;an_option&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ipython an_option&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(same)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;h3&gt;&lt;a name=&quot;Suggestion&quot;&gt;&lt;/a&gt;Suggestion&lt;/h3&gt;

&lt;p&gt;The pyspark script should determine firstly whether a user wants to run IPython or other executables.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;if IPYTHON_OPTS set
	&lt;ul&gt;
		&lt;li&gt;set IPYTHON &quot;1&quot;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;if IPYTHON has a value &quot;1&quot;
	&lt;ul&gt;
		&lt;li&gt;PYSPARK_PYTHON defaults to &quot;ipython&quot; if not set&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;PYSPARK_PYTHON defaults to &quot;python&quot; if not set&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;See the pull request for more detailed modification.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS X 10.9.5, Python 2.7.8, IPython 2.2.0&lt;/p&gt;</environment>
        <key id="12744455">SPARK-3706</key>
            <summary>Cannot run IPython REPL with IPYTHON set to &quot;1&quot; and PYSPARK_PYTHON unset</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cocoatomo">Tomohiko K.</reporter>
                        <labels>
                            <label>pyspark</label>
                    </labels>
                <created>Sat, 27 Sep 2014 03:38:40 +0000</created>
                <updated>Fri, 3 Oct 2014 17:06:17 +0000</updated>
                            <resolved>Thu, 2 Oct 2014 18:13:42 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>PySpark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14150370" author="apachespark" created="Sat, 27 Sep 2014 03:50:30 +0000"  >&lt;p&gt;User &apos;cocoatomo&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/2554&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/2554&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14155219" author="joshrosen" created="Wed, 1 Oct 2014 18:06:15 +0000"  >&lt;p&gt;Do you know whether this problem occurs in the released version of 1.1.0 or in branch-1.1?  It looks like you tested this with b235e013638685758885842dc3268e9800af3678, which is part of the master branch (1.2.0).&lt;/p&gt;

&lt;p&gt;I tried &lt;tt&gt;IPYTHON=1 ./bin/pyspark&lt;/tt&gt; with one of the 1.1.0 binary distributions and it worked as expected.  Therefore, I&apos;m going to change the &quot;Affects Versions&quot; to 1.2.0.  Let me know if you can reproduce this issue on 1.1.0, since we should backport a fix if this represents a regression between 1.0.2 and 1.1.0.&lt;/p&gt;</comment>
                            <comment id="14156776" author="cocoatomo" created="Thu, 2 Oct 2014 17:15:51 +0000"  >&lt;p&gt;Thank you for the comment and modification, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joshrosen&quot; class=&quot;user-hover&quot; rel=&quot;joshrosen&quot;&gt;joshrosen&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Taking a quick look, this regression created at the commit &lt;a href=&quot;https://github.com/apache/spark/commit/f38fab97c7970168f1bd81d4dc202e36322c95e3#diff-5dbcb82caf8131d60c73e82cf8d12d8aR107&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;f38fab97c7970168f1bd81d4dc202e36322c95e3&lt;/a&gt; on master branch.&lt;br/&gt;
Pushing &quot;ipython&quot; aside into a default value force us to set PYSPARK_PYTHON as &quot;ipython&quot;, since PYSPARK_PYTHON defaults to &quot;python&quot; at the top of the ./bin/pyspark script.&lt;br/&gt;
This issue is a regression between 1.1.0 and 1.2.0, therefore affects only 1.2.0.&lt;/p&gt;</comment>
                            <comment id="14156906" author="joshrosen" created="Thu, 2 Oct 2014 18:13:42 +0000"  >&lt;p&gt;Issue resolved by pull request 2554&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/2554&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/2554&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14158200" author="joshrosen" created="Fri, 3 Oct 2014 17:06:17 +0000"  >&lt;p&gt;This introduced a problem, since after this patch we now use IPython on the workers; see &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-3772&quot; title=&quot;RDD operation on IPython REPL failed with an illegal port number&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-3772&quot;&gt;&lt;del&gt;SPARK-3772&lt;/del&gt;&lt;/a&gt; for more details.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 7 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20ju7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327369">1.2.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>