<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:29:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-8119] HeartbeatReceiver should not adjust application executor resources</title>
                <link>https://issues.apache.org/jira/browse/SPARK-8119</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;DynamicAllocation will set the total executor to a little number when it wants to kill some executors.&lt;br/&gt;
But in no-DynamicAllocation scenario, Spark will also set the total executor.&lt;br/&gt;
So it will cause such problem: sometimes an executor fails down, there is no more executor which will be pull up by spark.&lt;/p&gt;

&lt;p&gt;=== EDIT by andrewor14 ===&lt;br/&gt;
The issue is that the AM forgets about the original number of executors it wants after calling sc.killExecutor. Even if dynamic allocation is not enabled, this is still possible because of heartbeat timeouts.&lt;/p&gt;

&lt;p&gt;I think the problem is that sc.killExecutor is used incorrectly in HeartbeatReceiver. The intention of the method is to permanently adjust the number of executors the application will get. In HeartbeatReceiver, however, this is used as a best-effort mechanism to ensure that the timed out executor is dead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12835591">SPARK-8119</key>
            <summary>HeartbeatReceiver should not adjust application executor resources</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andrewor14">Andrew Or</assignee>
                                    <reporter username="carlmartin">Zhaowei Huang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Jun 2015 01:29:32 +0000</created>
                <updated>Wed, 17 Feb 2016 08:38:17 +0000</updated>
                            <resolved>Sat, 2 Jan 2016 14:22:57 +0000</resolved>
                                    <version>1.4.0</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>Spark Core</component>
                        <due>Fri, 5 Jun 2015 00:00:00 +0000</due>
                            <votes>3</votes>
                                    <watches>14</watches>
                                                                                                                <comments>
                            <comment id="14573946" author="apachespark" created="Fri, 5 Jun 2015 02:07:08 +0000"  >&lt;p&gt;User &apos;SaintBacchus&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/6662&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/6662&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14606853" author="apachespark" created="Tue, 30 Jun 2015 02:08:02 +0000"  >&lt;p&gt;User &apos;andrewor14&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/7107&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/7107&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14630380" author="roji" created="Thu, 16 Jul 2015 21:39:54 +0000"  >&lt;p&gt;Will this really not be fixed before 1.5? This issue makes Spark 1.4 unusable in a Yarn environment where preemption may happen....&lt;/p&gt;</comment>
                            <comment id="14630545" author="andrewor14" created="Thu, 16 Jul 2015 23:43:00 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roji&quot; class=&quot;user-hover&quot; rel=&quot;roji&quot;&gt;roji&lt;/a&gt;, yes, we should fix it for 1.4.2 as well. Thanks for bringing that up.&lt;/p&gt;</comment>
                            <comment id="14630799" author="roji" created="Fri, 17 Jul 2015 05:31:34 +0000"  >&lt;p&gt;Thanks Andrew!&lt;/p&gt;</comment>
                            <comment id="14650657" author="srowen" created="Sun, 2 Aug 2015 08:59:25 +0000"  >&lt;p&gt;I attempted a back-port but this depends on &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-7835&quot; title=&quot;Refactor HeartbeatReceiverSuite for coverage and clean up&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-7835&quot;&gt;&lt;del&gt;SPARK-7835&lt;/del&gt;&lt;/a&gt; and possibly other prior changes, which I&apos;m not so familiar with.&lt;/p&gt;</comment>
                            <comment id="14693113" author="damageboy" created="Wed, 12 Aug 2015 08:22:18 +0000"  >&lt;p&gt;Does this mean it&apos;s already fixed for the upcoming 1.5.0?&lt;br/&gt;
The only outstanding issue is for the 1.4.2 backport? &lt;/p&gt;</comment>
                            <comment id="14693121" author="srowen" created="Wed, 12 Aug 2015 08:29:14 +0000"  >&lt;p&gt;Yes, committed for 1.5.0. I don&apos;t know if it will actually go back into 1.4.x since it depends on other changes that aren&apos;t in 1.4.x. &lt;/p&gt;</comment>
                            <comment id="14693738" author="andrewor14" created="Wed, 12 Aug 2015 16:15:04 +0000"  >&lt;p&gt;It will be in 1.4.2. I just need to backport it.&lt;/p&gt;</comment>
                            <comment id="14738995" author="damageboy" created="Thu, 10 Sep 2015 16:06:44 +0000"  >&lt;p&gt;Why was the target version moved to 1.5.1?&lt;br/&gt;
Wasn&apos;t this already marked as fixed for 1.5.0?&lt;br/&gt;
Is now pushed back?&lt;/p&gt;</comment>
                            <comment id="14739030" author="srowen" created="Thu, 10 Sep 2015 16:16:09 +0000"  >&lt;p&gt;No, it&apos;s marked as Fixed for 1.5.0 which remains true. I did a bulk change of Target=1.5.0 to Target=1.5.1 which changed this one too, but then I noticed that didn&apos;t make sense; it&apos;s only left to be integrated into 1.4.2, so I restored that.&lt;/p&gt;</comment>
                            <comment id="15076528" author="srowen" created="Sat, 2 Jan 2016 14:22:57 +0000"  >&lt;p&gt;I don&apos;t think this will be back-ported to 1.4.x at this point&lt;/p&gt;</comment>
                            <comment id="15150055" author="zhpengg" created="Wed, 17 Feb 2016 07:43:39 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srowen&quot; class=&quot;user-hover&quot; rel=&quot;srowen&quot;&gt;srowen&lt;/a&gt;, I think it&apos;s really a serious bug, do you have any reason for not back-porting it to 1.4.x?&lt;/p&gt;</comment>
                            <comment id="15150128" author="srowen" created="Wed, 17 Feb 2016 08:38:17 +0000"  >&lt;p&gt;I don&apos;t think there are any more 1.4.x releases to come. Still, if you open a clean back port to the branch I&apos;ll look at merging it.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12849252">SPARK-9375</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12905861">SPARK-11181</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12837804">SPARK-8374</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fnzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>