<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:34:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-11338] HistoryPage not multi-tenancy enabled (app links not prefixed with APPLICATION_WEB_PROXY_BASE)</title>
                <link>https://issues.apache.org/jira/browse/SPARK-11338</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Links on &lt;tt&gt;HistoryPage&lt;/tt&gt; are not prepended with &lt;tt&gt;uiRoot&lt;/tt&gt; (&lt;tt&gt;export APPLICATION_WEB_PROXY_BASE=&amp;lt;uiRoot path&amp;gt;&lt;/tt&gt;). This makes it impossible/unpractical to expose the &lt;b&gt;History Server&lt;/b&gt; in a multi-tenancy environment where each Spark service instance has one history server behind a multi-tenant enabled proxy server.  All other Spark web UI pages are correctly prefixed when the &lt;tt&gt;APPLICATION_WEB_PROXY_BASE&lt;/tt&gt; environment variable is set.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Repro steps:&lt;/b&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Configure history log collection:
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;conf/spark-defaults.conf&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;spark.eventLog.enabled         &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
spark.eventLog.dir             logs/history
spark.history.fs.logDirectory  logs/history
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;...create the logs folders:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ mkdir -p logs/history
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Start the Spark shell and run the word count example:
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ bin/spark-shell
...
scala&amp;gt; sc.textFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;README.md&quot;&lt;/span&gt;).flatMap(_.split(&lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;)).map(w =&amp;gt; (w, 1)).reduceByKey(_ + _).collect
scala&amp;gt; sc.stop
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Set the web proxy root path path (i.e. &lt;tt&gt;/testwebuiproxy/..&lt;/tt&gt;):
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ export APPLICATION_WEB_PROXY_BASE=/testwebuiproxy/..
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Start the history server:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$  sbin/start-history-server.sh
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Bring up the History Server web UI at &lt;tt&gt;localhost:18080&lt;/tt&gt; and view the application link in the HTML source text:
&lt;div class=&quot;code panel&quot; style=&quot;border-color: #c00;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;    ...
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;thead&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;th width=&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot; class=&quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;gt;&lt;/span&gt;App ID&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/th&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;th width=&quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot; class=&quot;&lt;/span&gt;&quot;&amp;gt;&lt;/span&gt;App Name&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/th&amp;gt;&lt;/span&gt;...&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/thead&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;tbody&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;tr&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;a href=&lt;span class=&quot;code-quote&quot;&gt;&quot;/history/local-1445896187531&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;local-1445896187531&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;Spark shell&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
      ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;Notice&lt;/b&gt;, application link &quot;&lt;tt&gt;/history/local-1445896187531&lt;/tt&gt;&quot; does &lt;em&gt;not&lt;/em&gt; have the prefix &lt;tt&gt;/testwebuiproxy/..&lt;/tt&gt; &lt;br class=&quot;atl-forced-newline&quot; /&gt; &lt;br class=&quot;atl-forced-newline&quot; /&gt;
All site-relative links (URL starting with &lt;tt&gt;&quot;/&quot;&lt;/tt&gt;) should have been prepended with the uiRoot prefix &lt;tt&gt;/testwebuiproxy/..&lt;/tt&gt; like this ...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-color: #0c0;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;    ...
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;thead&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;th width=&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot; class=&quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;gt;&lt;/span&gt;App ID&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/th&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;th width=&quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot; class=&quot;&lt;/span&gt;&quot;&amp;gt;&lt;/span&gt;App Name&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/th&amp;gt;&lt;/span&gt;...&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/thead&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;tbody&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;tr&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;a href=&lt;span class=&quot;code-quote&quot;&gt;&quot;/testwebuiproxy/../history/local-1445896187531&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;local-1445896187531&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;Spark shell&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
      ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="12908112">SPARK-11338</key>
            <summary>HistoryPage not multi-tenancy enabled (app links not prefixed with APPLICATION_WEB_PROXY_BASE)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ckadner">Christian Kadner</assignee>
                                    <reporter username="ckadner">Christian Kadner</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Oct 2015 04:26:17 +0000</created>
                <updated>Sun, 1 Nov 2015 21:10:24 +0000</updated>
                            <resolved>Sun, 1 Nov 2015 21:10:24 +0000</resolved>
                                                    <fixVersion>1.6.0</fixVersion>
                                    <component>Web UI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="172800">48h</timeoriginalestimate>
                            <timeestimate seconds="172800">48h</timeestimate>
                                        <comments>
                            <comment id="14975743" author="apachespark" created="Tue, 27 Oct 2015 05:18:02 +0000"  >&lt;p&gt;User &apos;ckadner&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/9291&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/9291&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nk1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12333083">1.6.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>