<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:44:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-50959] ImportError: sys.meta_path is None, Python is likely shutting down Exception ignored in: &lt;function JavaWrapper.__del__ at 0x77bbd652bb00&gt;</title>
                <link>https://issues.apache.org/jira/browse/SPARK-50959</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;When I try a simple LogisticRegression demo, I found it will throw exception at the end&lt;/p&gt;


&lt;p&gt;&lt;em&gt;from pyspark.ml.classification import LogisticRegression&lt;/em&gt;&lt;br/&gt;
&lt;em&gt;from pyspark.ml.linalg import Vectors&lt;/em&gt;&lt;br/&gt;
&lt;em&gt;from pyspark.sql import SparkSession&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;spark = SparkSession.builder.master(&quot;local&lt;span class=&quot;error&quot;&gt;&amp;#91;*&amp;#93;&lt;/span&gt;&quot;).getOrCreate()&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;dataset = spark.createDataFrame(&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;[(Vectors.dense(&lt;span class=&quot;error&quot;&gt;&amp;#91;0.0&amp;#93;&lt;/span&gt;), 0.0),&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;(Vectors.dense(&lt;span class=&quot;error&quot;&gt;&amp;#91;0.4&amp;#93;&lt;/span&gt;), 1.0),&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;(Vectors.dense(&lt;span class=&quot;error&quot;&gt;&amp;#91;0.5&amp;#93;&lt;/span&gt;), 0.0),&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;(Vectors.dense(&lt;span class=&quot;error&quot;&gt;&amp;#91;0.6&amp;#93;&lt;/span&gt;), 1.0),&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;(Vectors.dense(&lt;span class=&quot;error&quot;&gt;&amp;#91;1.0&amp;#93;&lt;/span&gt;), 1.0)] * 10,&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;features&amp;quot;, &amp;quot;label&amp;quot;&amp;#93;&lt;/span&gt;)&lt;/em&gt;&lt;br/&gt;
&lt;em&gt;lr = LogisticRegression()&lt;/em&gt;&lt;br/&gt;
&lt;em&gt;model = lr.fit(dataset)&lt;/em&gt;&lt;/p&gt;


&lt;p&gt;&#160;&lt;br/&gt;
&lt;em&gt;Exception ignored in: &amp;lt;function JavaWrapper.&lt;/em&gt;&lt;em&gt;del&lt;/em&gt;_ at 0x70b8caf2f920&amp;gt;_ &#160; &#160; &#160; &#160; &#160;&lt;br/&gt;
&lt;em&gt;Traceback (most recent call last):&lt;/em&gt;&lt;br/&gt;
&#160; &lt;em&gt;File &quot;/home/xxx/work.d/spark/spark-master/python/pyspark/ml/util.py&quot;, line 254, in wrapped&lt;/em&gt;&lt;br/&gt;
&#160; &lt;em&gt;File &quot;/home/xxx/work.d/spark/spark-master/python/pyspark/ml/wrapper.py&quot;, line 60, in __del&lt;/em&gt;__&lt;br/&gt;
&lt;em&gt;ImportError: sys.meta_path is None, Python is likely shutting down&lt;/em&gt;&lt;br/&gt;
&lt;em&gt;Exception ignored in: &amp;lt;function JavaWrapper.&lt;/em&gt;&lt;em&gt;del&lt;/em&gt;_ at 0x70b8caf2f920&amp;gt;_&lt;br/&gt;
&lt;em&gt;Traceback (most recent call last):&lt;/em&gt;&lt;br/&gt;
&#160; &lt;em&gt;File &quot;/home/xxx/work.d/spark/spark-master/python/pyspark/ml/util.py&quot;, line 254, in wrapped&lt;/em&gt;&lt;br/&gt;
&#160; &lt;em&gt;File &quot;/home/xxx/work.d/spark/spark-master/python/pyspark/ml/wrapper.py&quot;, line 60, in __del&lt;/em&gt;__&lt;br/&gt;
&lt;em&gt;ImportError: sys.meta_path is None, Python is likely shutting down&lt;/em&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
&#160;&lt;br/&gt;
Looks like the &quot;python shutdown&quot; happens before _&lt;em&gt;del&lt;/em&gt;_ function in JavaWrapper.&#160;&lt;br/&gt;
When I remove the `@try_remote_del` from &lt;a href=&quot;https://github.com/apache/spark/blob/master/python/pyspark/ml/wrapper.py#L58&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/blob/master/python/pyspark/ml/wrapper.py#L58&lt;/a&gt; , the issue is still there&lt;/p&gt;</description>
                <environment></environment>
        <key id="13605982">SPARK-50959</key>
            <summary>ImportError: sys.meta_path is None, Python is likely shutting down Exception ignored in: &lt;function JavaWrapper.__del__ at 0x77bbd652bb00&gt;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wbo4958">Bobby Wang</assignee>
                                    <reporter username="wbo4958">Bobby Wang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 23 Jan 2025 06:31:05 +0000</created>
                <updated>Thu, 23 Jan 2025 08:54:05 +0000</updated>
                            <resolved>Thu, 23 Jan 2025 08:53:50 +0000</resolved>
                                    <version>4.0.0</version>
                                    <fixVersion>4.0.0</fixVersion>
                                    <component>ML</component>
                    <component>PySpark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17916324" author="podongfeng" created="Thu, 23 Jan 2025 08:53:50 +0000"  >&lt;p&gt;Issue resolved by pull request 49615&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/49615&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/49615&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1tsb4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>