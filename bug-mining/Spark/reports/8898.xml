<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:32:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-41952] Upgrade Parquet to fix off-heap memory leaks in Zstd codec</title>
                <link>https://issues.apache.org/jira/browse/SPARK-41952</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Recently, native memory leak have been discovered in Parquet in conjunction of it using Zstd decompressor from luben/zstd-jni library (&lt;a href=&quot;https://issues.apache.org/jira/browse/PARQUET-2160&quot; title=&quot;Close decompression stream to free off-heap memory in time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PARQUET-2160&quot;&gt;&lt;del&gt;PARQUET-2160&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;This is very problematic to a point where we can&apos;t use Parquet w/ Zstd due to pervasive OOMs taking down our executors and disrupting our jobs.&lt;/p&gt;

&lt;p&gt;Luckily fix addressing this had already landed in Parquet:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/parquet-mr/pull/982&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/parquet-mr/pull/982&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Now, we just need to&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Updated version of Parquet is released in a timely manner&lt;/li&gt;
	&lt;li&gt;Spark is upgraded onto this new version in the upcoming release&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13517298">SPARK-41952</key>
            <summary>Upgrade Parquet to fix off-heap memory leaks in Zstd codec</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chengpan">Cheng Pan</assignee>
                                    <reporter username="alexey.kudinkin">Alexey Kudinkin</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 9 Jan 2023 23:48:24 +0000</created>
                <updated>Thu, 20 Jun 2024 06:39:47 +0000</updated>
                            <resolved>Mon, 20 Feb 2023 17:45:09 +0000</resolved>
                                    <version>3.1.3</version>
                    <version>3.3.1</version>
                    <version>3.2.3</version>
                                    <fixVersion>3.2.4</fixVersion>
                    <fixVersion>3.3.3</fixVersion>
                    <fixVersion>3.4.0</fixVersion>
                                    <component>Input/Output</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="17690853" author="luciferyang" created="Sun, 19 Feb 2023 08:53:43 +0000"  >&lt;p&gt;For the old Spark versions, is it possible to introduce other costs by upgrading parquet?&#160; Should we directly introduce parquet.hadoop.CodecFactory to old Spark version and fix them accordingly?&#160;&lt;/p&gt;

&lt;p&gt;After that, we can also revert the changes of the Spark version(for example, master and Spark 3.4) that can be solved by upgrading parquet&lt;/p&gt;</comment>
                            <comment id="17691012" author="chengpan" created="Mon, 20 Feb 2023 05:38:15 +0000"  >&lt;p&gt;Fix on Spark side is feasible, I&apos;m working on this.&lt;/p&gt;</comment>
                            <comment id="17691014" author="dongjoon" created="Mon, 20 Feb 2023 05:51:37 +0000"  >&lt;p&gt;May I ask why you put me `Shepherd` field, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alexey.kudinkin&quot; class=&quot;user-hover&quot; rel=&quot;alexey.kudinkin&quot;&gt;alexey.kudinkin&lt;/a&gt; ? Let me first remove me from there.&lt;/p&gt;</comment>
                            <comment id="17691015" author="apachespark" created="Mon, 20 Feb 2023 06:00:37 +0000"  >&lt;p&gt;User &apos;pan3793&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/40091&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/40091&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1eo4w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>