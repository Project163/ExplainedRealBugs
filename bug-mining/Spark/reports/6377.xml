<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:04:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-26606] parameters passed in extraJavaOptions are not being picked up </title>
                <link>https://issues.apache.org/jira/browse/SPARK-26606</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;driver.extraJavaOptions and executor.extraJavaOptions are not being picked up . Even though I see the parameters are being passed fine in the spark launch command I do not see these parameters are being picked up for some unknown reason. My source code throws an error stating the java params are empty&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This is my spark submit command:&#160;&lt;/p&gt;

&lt;p&gt;&#160; &#160; output=`spark-submit \&lt;br/&gt;
 --class com.demo.myApp.App \&lt;br/&gt;
 --conf &apos;spark.executor.extraJavaOptions=-Dapp.env=dev -Dapp.country=US -Dapp.banner=ABC -Doracle.net.tns_admin=/work/artifacts/oracle/current -Djava.security.egd=&lt;a href=&quot;file:///dev/urandom&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/dev/./urandom&lt;/a&gt;&apos;&#160;\&lt;br/&gt;
 --conf &apos;spark.driver.extraJavaOptions=-Dapp.env=dev -Dapp.country=US -Dapp.banner=ABC -Doracle.net.tns_admin=/work/artifacts/oracle/current -Djava.security.egd=&lt;a href=&quot;file:///dev/urandom&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/dev/./urandom&lt;/a&gt;&apos; \&lt;br/&gt;
 --executor-memory &quot;$EXECUTOR_MEMORY&quot; \&lt;br/&gt;
 --executor-cores &quot;$EXECUTOR_CORES&quot; \&lt;br/&gt;
 --total-executor-cores &quot;$TOTAL_CORES&quot; \&lt;br/&gt;
 --driver-memory &quot;$DRIVER_MEMORY&quot; \&lt;br/&gt;
 --deploy-mode cluster \&lt;br/&gt;
 /home/spark/asm//current/myapp-*.jar 2&amp;gt;&amp;amp;1 &amp;amp;`&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Is there any other way I can access the java params with out using extraJavaOptions.&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13209071">SPARK-26606</key>
            <summary>parameters passed in extraJavaOptions are not being picked up </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kabhwan">Jungtaek Lim</assignee>
                                    <reporter username="rrb441">Ravindra</reporter>
                        <labels>
                            <label>java</label>
                            <label>spark</label>
                    </labels>
                <created>Fri, 11 Jan 2019 18:59:10 +0000</created>
                <updated>Sun, 24 Mar 2019 23:48:14 +0000</updated>
                            <resolved>Fri, 22 Mar 2019 22:31:51 +0000</resolved>
                                    <version>2.3.1</version>
                                    <fixVersion>2.3.4</fixVersion>
                    <fixVersion>2.4.1</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>Spark Submit</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16740668" author="vanzin" created="Fri, 11 Jan 2019 19:04:30 +0000"  >&lt;p&gt;Define not working?&lt;/p&gt;

&lt;p&gt;e.g. I see you have both single quotes and variable references. That won&apos;t work the way you&apos;re probably expecting it to.&lt;/p&gt;</comment>
                            <comment id="16740672" author="rrb441" created="Fri, 11 Jan 2019 19:07:25 +0000"  >&lt;p&gt;I have tried removing the single quotes too and even hardcoded the reference variables. It does not work yet. You can also see the attached screenshot where it picks the reference variable values&lt;/p&gt;</comment>
                            <comment id="16740675" author="vanzin" created="Fri, 11 Jan 2019 19:10:09 +0000"  >&lt;p&gt;Can you define what &quot;does not work&quot; means?&lt;/p&gt;

&lt;p&gt;Because it works for me based on my expectations.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ ./bin/spark-shell --conf &quot;spark.driver.extraJavaOptions=-Dprop1=$LOGNAME&quot;
...
scala&amp;gt; sys.props(&quot;prop1&quot;)
res0: String = vanzin
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16740683" author="rrb441" created="Fri, 11 Jan 2019 19:16:13 +0000"  >&lt;p&gt;I can see the launch command which has the expected values. But the individual parts like&#160; &quot;-Dapp.env=prod&quot;&#160;&#160;&quot;-Dapp.country=US&quot;&#160;&quot;-Dapp.banner=WMT&quot; are missing. I am suspecting this could be the reason why my source code is throwing an exception that the jvm params are null.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16740692" author="vanzin" created="Fri, 11 Jan 2019 19:22:22 +0000"  >&lt;p&gt;What master are you using?&lt;/p&gt;</comment>
                            <comment id="16740694" author="rrb441" created="Fri, 11 Jan 2019 19:24:49 +0000"  >&lt;p&gt;10.36.67.188:7077 is what I am using. The rest of all the master links over there are just stand by&apos;s&lt;/p&gt;</comment>
                            <comment id="16740719" author="vanzin" created="Fri, 11 Jan 2019 19:44:22 +0000"  >&lt;p&gt;So you&apos;re using standalone cluster mode. It might be an issue with that combination. That&apos;s not really my area.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is there any other way I can access the java params with out using extraJavaOptions. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There&apos;s a thousand different ways. Use parameters to you class instead of system properties, config files, etc, etc.&lt;/p&gt;</comment>
                            <comment id="16743280" author="rrb441" created="Tue, 15 Jan 2019 18:19:24 +0000"  >&lt;p&gt;any update on this&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16796924" author="m.kaczor" created="Wed, 20 Mar 2019 08:46:16 +0000"  >&lt;p&gt;I think I&apos;ve come across similar issue (at least with the driver, works fine for executors in my case)&lt;/p&gt;

&lt;p&gt;I&apos;ve even posted a question on stackoverflow: &lt;a href=&quot;https://stackoverflow.com/questions/55244273/spark-2-4-0-submit-in-cluster-mode-why-is-rest-submission-server-required&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/55244273/spark-2-4-0-submit-in-cluster-mode-why-is-rest-submission-server-required&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;To sum up the problem:&lt;/p&gt;

&lt;p&gt;Spark version 2.4.0, &lt;b&gt;standalone&lt;/b&gt; cluster.&lt;/p&gt;

&lt;p&gt;I&apos;m submitting app using spark-submit, in all cases exactly the same script is used, just changing master port and deploy mode.&lt;/p&gt;

&lt;p&gt;I want to pass some extraJavaOptions to driver hence I&apos;m using spark.driver.extraJavaOptions property (-- conf &quot;spark.driver.extraJavaOptions=-Dfoo=BAR&quot;)&lt;/p&gt;

&lt;p&gt;I assume that variable was properly passed if it&apos;s listed in System Properties table in Environment tab of app UI (the one running on port 4040).&lt;/p&gt;

&lt;p&gt;Here is what I&apos;ve observed:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Deploy mode&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Deploy to 7077 (regular way)&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Deploy to 6066 (via REST)&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Client&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Variables are passed correctly&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Cluster&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Variables are not passed&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Variables are passed correctly&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;All in all, it looks to me that if we want to pass system variables in cluster mode &lt;b&gt;we have to&lt;/b&gt; deploy via REST.&lt;/p&gt;

&lt;p&gt;I consider it a bug, please correct me if I&apos;m wrong.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16799402" author="vanzin" created="Fri, 22 Mar 2019 22:31:51 +0000"  >&lt;p&gt;Issue resolved by pull request 24163&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/24163&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/24163&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|u00r9k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>