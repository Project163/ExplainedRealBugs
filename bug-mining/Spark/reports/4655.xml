<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:52:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-19751] Create Data frame API fails with a self referencing bean</title>
                <link>https://issues.apache.org/jira/browse/SPARK-19751</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;createDataset API throws a stack overflow exception when we try creating a &lt;br/&gt;
Dataset using a bean encoder. The bean is self referencing&lt;/p&gt;

&lt;p&gt;BEAN:&lt;br/&gt;
public class HierObj implements Serializable {&lt;br/&gt;
    String name;&lt;br/&gt;
    List&amp;lt;HierObj&amp;gt; children;&lt;/p&gt;

&lt;p&gt;    public String getName() &lt;/p&gt;
{
        return name;
    }

&lt;p&gt;    public void setName(String name) &lt;/p&gt;
{
        this.name = name;
    }

&lt;p&gt;    public List&amp;lt;HierObj&amp;gt; getChildren() &lt;/p&gt;
{
        return children;
    }

&lt;p&gt;    public void setChildren(List&amp;lt;HierObj&amp;gt; children) &lt;/p&gt;
{
        this.children = children;
    }
&lt;p&gt;}&lt;/p&gt;


&lt;p&gt;// create an object&lt;br/&gt;
        HierObj hierObj = new HierObj();&lt;br/&gt;
        hierObj.setName(&quot;parent&quot;);&lt;br/&gt;
        List children = new ArrayList();&lt;/p&gt;

&lt;p&gt;        HierObj child1 = new HierObj();&lt;br/&gt;
        child1.setName(&quot;child1&quot;);&lt;br/&gt;
        HierObj child2 = new HierObj();&lt;br/&gt;
        child2.setName(&quot;child2&quot;);&lt;br/&gt;
        children.add(child1);&lt;br/&gt;
        children.add(child2);&lt;/p&gt;

&lt;p&gt;        hierObj.setChildren(children);&lt;/p&gt;

&lt;p&gt;// create a dataset&lt;br/&gt;
        Dataset ds = sparkSession().createDataset(Arrays.asList(hierObj), Encoders.bean(HierObj.class));&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13046668">SPARK-19751</key>
            <summary>Create Data frame API fails with a self referencing bean</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="maropu">Takeshi Yamamuro</assignee>
                                    <reporter username="avinashmeda">Avinash Venkateshaiah</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Feb 2017 15:42:04 +0000</created>
                <updated>Thu, 16 Mar 2017 00:51:32 +0000</updated>
                            <resolved>Thu, 16 Mar 2017 00:50:40 +0000</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15886067" author="srowen" created="Mon, 27 Feb 2017 16:26:03 +0000"  >&lt;p&gt;Can you show the stack trace, at least the part before it just starts repeating?&lt;br/&gt;
To be clear, your bean doesn&apos;t reference itself, it just references instances of its same class right?&lt;br/&gt;
I&apos;m not sure that&apos;s supposed to work, because it&apos;s not clear how that translates to a fixed nested schema, but it seems like the error could be better&lt;/p&gt;</comment>
                            <comment id="15886097" author="avinashmeda" created="Mon, 27 Feb 2017 16:46:44 +0000"  >&lt;p&gt;Yes, Instances of the same class.&lt;/p&gt;

&lt;p&gt;Stacktrace below&lt;/p&gt;

&lt;p&gt;java.lang.StackOverflowError&lt;br/&gt;
	at org.spark_project.guava.collect.RegularImmutableMap.get(RegularImmutableMap.java:140)&lt;br/&gt;
	at org.spark_project.guava.reflect.TypeResolver.resolveTypeVariable(TypeResolver.java:207)&lt;br/&gt;
	at org.spark_project.guava.reflect.TypeResolver$1.resolveTypeVariable(TypeResolver.java:194)&lt;br/&gt;
	at org.spark_project.guava.reflect.TypeResolver$1.resolveTypeVariable(TypeResolver.java:194)&lt;br/&gt;
	at org.spark_project.guava.reflect.TypeResolver.resolveTypeVariable(TypeResolver.java:197)&lt;br/&gt;
	at org.spark_project.guava.reflect.TypeResolver.resolveType(TypeResolver.java:157)&lt;br/&gt;
	at org.spark_project.guava.reflect.TypeResolver.resolveTypeVariable(TypeResolver.java:218)&lt;br/&gt;
	at org.spark_project.guava.reflect.TypeResolver$1.resolveTypeVariable(TypeResolver.java:194)&lt;br/&gt;
	at org.spark_project.guava.reflect.TypeResolver.resolveTypeVariable(TypeResolver.java:197)&lt;br/&gt;
	at org.spark_project.guava.reflect.TypeResolver.resolveType(TypeResolver.java:157)&lt;br/&gt;
	at org.spark_project.guava.reflect.TypeResolver.resolveTypeVariable(TypeResolver.java:218)&lt;br/&gt;
	at org.spark_project.guava.reflect.TypeResolver.resolveTypeVariable(TypeResolver.java:197)&lt;br/&gt;
	at org.spark_project.guava.reflect.TypeResolver.resolveType(TypeResolver.java:157)&lt;br/&gt;
	at org.spark_project.guava.reflect.TypeResolver.resolveParameterizedType(TypeResolver.java:229)&lt;br/&gt;
	at org.spark_project.guava.reflect.TypeResolver.resolveType(TypeResolver.java:159)&lt;br/&gt;
	at org.spark_project.guava.reflect.TypeToken.resolveType(TypeToken.java:268)&lt;br/&gt;
	at org.spark_project.guava.reflect.TypeToken.resolveSupertype(TypeToken.java:279)&lt;br/&gt;
	at org.spark_project.guava.reflect.TypeToken.getSupertype(TypeToken.java:401)&lt;br/&gt;
	at org.apache.spark.sql.catalyst.JavaTypeInference$.elementType(JavaTypeInference.scala:142)&lt;br/&gt;
	at org.apache.spark.sql.catalyst.JavaTypeInference$.org$apache$spark$sql$catalyst$JavaTypeInference$$inferDataType(JavaTypeInference.scala:111)&lt;br/&gt;
	at org.apache.spark.sql.catalyst.JavaTypeInference$$anonfun$2.apply(JavaTypeInference.scala:127)&lt;br/&gt;
	at org.apache.spark.sql.catalyst.JavaTypeInference$$anonfun$2.apply(JavaTypeInference.scala:125)&lt;br/&gt;
	at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)&lt;br/&gt;
	at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)&lt;br/&gt;
	at scala.collection.IndexedSeqOptimized$class.foreach(IndexedSeqOptimized.scala:33)&lt;br/&gt;
	at scala.collection.mutable.ArrayOps$ofRef.foreach(ArrayOps.scala:186)&lt;br/&gt;
	at scala.collection.TraversableLike$class.map(TraversableLike.scala:234)&lt;br/&gt;
	at scala.collection.mutable.ArrayOps$ofRef.map(ArrayOps.scala:186)&lt;br/&gt;
	at org.apache.spark.sql.catalyst.JavaTypeInference$.org$apache$spark$sql$catalyst$JavaTypeInference$$inferDataType(JavaTypeInference.scala:125)&lt;br/&gt;
	at org.apache.spark.sql.catalyst.JavaTypeInference$.org$apache$spark$sql$catalyst$JavaTypeInference$$inferDataType(JavaTypeInference.scala:111)&lt;br/&gt;
	at org.apache.spark.sql.catalyst.JavaTypeInference$$anonfun$2.apply(JavaTypeInference.scala:127)&lt;br/&gt;
	at org.apache.spark.sql.catalyst.JavaTypeInference$$anonfun$2.apply(JavaTypeInference.scala:125)&lt;br/&gt;
	at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)&lt;br/&gt;
	at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)&lt;br/&gt;
	at scala.collection.IndexedSeqOptimized$class.foreach(IndexedSeqOptimized.scala:33)&lt;br/&gt;
	at scala.collection.mutable.ArrayOps$ofRef.foreach(ArrayOps.scala:186)&lt;br/&gt;
	at scala.collection.TraversableLike$class.map(TraversableLike.scala:234)&lt;br/&gt;
	at scala.collection.mutable.ArrayOps$ofRef.map(ArrayOps.scala:186)&lt;/p&gt;

&lt;p&gt;...&lt;/p&gt;

&lt;p&gt;	at org.apache.spark.sql.catalyst.JavaTypeInference$.org$apache$spark$sql$catalyst$JavaTypeInference$$inferDataType(JavaTypeInference.scala:125)&lt;br/&gt;
	at org.apache.spark.sql.catalyst.JavaTypeInference$.org$apache$spark$sql$catalyst$JavaTypeInference$$inferDataType(JavaTypeInference.scala:111)&lt;br/&gt;
	at org.apache.spark.sql.catalyst.JavaTypeInference$$anonfun$2.apply(JavaTypeInference.scala:127)&lt;br/&gt;
	at org.apache.spark.sql.catalyst.JavaTypeInference$$anonfun$2.apply(JavaTypeInference.scala:125)&lt;br/&gt;
	at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)&lt;br/&gt;
	at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)&lt;br/&gt;
	at scala.collection.IndexedSeqOptimized$class.foreach(IndexedSeqOptimized.scala:33)&lt;br/&gt;
	at scala.collection.mutable.ArrayOps$ofRef.foreach(ArrayOps.scala:186)&lt;br/&gt;
	at scala.collection.TraversableLike$class.map(TraversableLike.scala:234)&lt;br/&gt;
	at scala.collection.mutable.ArrayOps$ofRef.map(ArrayOps.scala:186)&lt;br/&gt;
	at org.apache.spark.sql.catalyst.JavaTypeInference$.org$apache$spark$sql$catalyst$JavaTypeInference$$inferDataType(JavaTypeInference.scala:125)&lt;br/&gt;
	at org.apache.spark.sql.catalyst.JavaTypeInference$.org$apache$spark$sql$catalyst$JavaTypeInference$$inferDataType(JavaTypeInference.scala:111)&lt;br/&gt;
	at org.apache.spark.sql.catalyst.JavaTypeInference$$anonfun$2.apply(JavaTypeInference.scala:127)&lt;br/&gt;
	at org.apache.spark.sql.catalyst.JavaTypeInference$$anonfun$2.apply(JavaTypeInference.scala:125)&lt;br/&gt;
	at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)&lt;br/&gt;
	at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)&lt;/p&gt;</comment>
                            <comment id="15886101" author="avinashmeda" created="Mon, 27 Feb 2017 16:49:19 +0000"  >&lt;p&gt;Does it mean that we cant have beans those reference their own instance ? &lt;/p&gt;</comment>
                            <comment id="15898967" author="apachespark" created="Tue, 7 Mar 2017 08:45:03 +0000"  >&lt;p&gt;User &apos;maropu&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/17188&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/17188&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15927259" author="cloud_fan" created="Thu, 16 Mar 2017 00:50:40 +0000"  >&lt;p&gt;Issue resolved by pull request 17188&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/17188&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/17188&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13050020">SPARK-19896</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3aohr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>