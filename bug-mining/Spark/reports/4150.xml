<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:48:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-17944] sbin/start-* scripts use of `hostname -f` fail with Solaris </title>
                <link>https://issues.apache.org/jira/browse/SPARK-17944</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;&lt;tt&gt;$SPARK_HOME/sbin/start-master.sh&lt;/tt&gt; fails:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ ./start-master.sh 
usage: hostname [[-t] system_name]
       hostname [-D]
starting org.apache.spark.deploy.master.Master, logging to /home/eoshaugh/local/spark/logs/spark-eoshaugh-org.apache.spark.deploy.master.Master-1-m7-16-002-ld1.out
failed to launch org.apache.spark.deploy.master.Master:
    --properties-file FILE Path to a custom Spark properties file.
                           Default is conf/spark-defaults.conf.
full log in /home/eoshaugh/local/spark/logs/spark-eoshaugh-org.apache.spark.deploy.master.Master-1-m7-16-002-ld1.out
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I found &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-17546&quot; title=&quot;start-* scripts should use hostname -f&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-17546&quot;&gt;&lt;del&gt;SPARK-17546&lt;/del&gt;&lt;/a&gt; which changed the invocation of hostname in sbin/start-master.sh, sbin/start-slaves.sh and sbin/start-mesos-dispatcher.sh to include the flag &lt;tt&gt;-f&lt;/tt&gt;, which is not a valid command line option for the Solaris hostname implementation. &lt;/p&gt;

&lt;p&gt;As a workaround, Solaris users can substitute:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;`/usr/sbin/check-hostname | awk &apos;{print $NF}&apos;`
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Admittedly not an obvious fix, but it provides equivalent functionality. &lt;/p&gt;</description>
                <environment>&lt;p&gt;Solaris 10, Solaris 11&lt;/p&gt;</environment>
        <key id="13012455">SPARK-17944</key>
            <summary>sbin/start-* scripts use of `hostname -f` fail with Solaris </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="erik.oshaughnessy">Erik O&apos;Shaughnessy</assignee>
                                    <reporter username="erik.oshaughnessy">Erik O&apos;Shaughnessy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Oct 2016 19:34:12 +0000</created>
                <updated>Sat, 22 Oct 2016 08:38:21 +0000</updated>
                            <resolved>Sat, 22 Oct 2016 08:38:12 +0000</resolved>
                                    <version>2.0.1</version>
                                    <fixVersion>2.1.0</fixVersion>
                                    <component>Deploy</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15576323" author="srowen" created="Fri, 14 Oct 2016 19:54:10 +0000"  >&lt;p&gt;Yeah, I think Solaris is the odd man out here then. Linux and OS X support this. I&apos;m not sure Solaris is something Spark intends to support in general, for reasons like this. If there&apos;s a simple change that makes it work, OK, but otherwise I&apos;d close this.&lt;/p&gt;</comment>
                            <comment id="15576367" author="erik.oshaughnessy" created="Fri, 14 Oct 2016 20:16:15 +0000"  >&lt;p&gt;I&apos;m sure there are situations where Linux and OS X disagree with how to get things done, I was hoping for more inclusivity despite Solaris being a less favored development platform.&lt;/p&gt;

&lt;p&gt;A simple change might be to add a file similar to &lt;tt&gt;sbin/spark-config.sh&lt;/tt&gt;, call it &lt;tt&gt;sbin/spark-funcs.sh&lt;/tt&gt;, and populate it with a set of bash functions which can attempt OS specific invocations until it finds one that is successful or returns an error after exhausting all options. This could provide a framework for resolving future conflicts between OS implementation details in addition to addressing this particular problem.&lt;/p&gt;</comment>
                            <comment id="15577826" author="srowen" created="Sat, 15 Oct 2016 10:25:59 +0000"  >&lt;p&gt;Yes, for example `hostname` differs on OS X / Linux but the behavior of `-f` happens to give the same desired output on both. Is `check-hostname` present only on Solaris (or at least, does it do the right thing everywhere we think it exists)? If so I could imagine just checking if that command exists and using it if present.&lt;/p&gt;

&lt;p&gt;There are 3 usages, and all could have the same treatment. That&apos;s not so bad IMHO. A central script to switch out commands seems appealing but the indirection non-trivially complicates the scripts. I&apos;m not sure how far to go to try to support Solaris, not because there&apos;s anything wrong with it, but because a) I don&apos;t know how many Spark users are on Solaris, and b) I am not sure we know it otherwise works, that there aren&apos;t other problems like this&lt;/p&gt;</comment>
                            <comment id="15582817" author="erik.oshaughnessy" created="Mon, 17 Oct 2016 17:16:02 +0000"  >&lt;p&gt;AFAIK, check-hostname is a Solaris specific script written to provide a fully qualified host name to sendmail.&lt;/p&gt;

&lt;p&gt;I am fairly certain that before &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-16962&quot; title=&quot;Unsafe accesses (Platform.getLong()) not supported on unaligned boundaries in SPARC/Solaris&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-16962&quot;&gt;&lt;del&gt;SPARK-16962&lt;/del&gt;&lt;/a&gt; there were no Apache Spark installations on Solaris SPARC platforms external to Oracle. My management assures me that there is significant interest in having Apache Spark work &quot;out-of-the-box&quot; on Solaris SPARC, thus my (admittedly recent) participation in Apache Spark.&lt;/p&gt;

&lt;p&gt;As far as your second question, whether &quot;we know it otherwise works&quot; on Solaris, the only evidence I can offer is the paucity of issues raised as a consequence of Oracle running Apache Spark on Solaris; &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-13776&quot; title=&quot;Web UI is not available after ./sbin/start-master.sh&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-13776&quot;&gt;&lt;del&gt;SPARK-13776&lt;/del&gt;&lt;/a&gt; which tickled a Jetty bug and &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-16962&quot; title=&quot;Unsafe accesses (Platform.getLong()) not supported on unaligned boundaries in SPARC/Solaris&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-16962&quot;&gt;&lt;del&gt;SPARK-16962&lt;/del&gt;&lt;/a&gt; which addresses unaligned memory accesses.  The only other major problem we have encountered is with an Apache Spark dependency, snappy-java, that does not support 64-bit Solaris SPARC (yet). We have patches in-house which are under legal review.&lt;/p&gt;

&lt;p&gt;I&apos;ll be happy to write a &lt;tt&gt;sbin/spark-funcs.sh&lt;/tt&gt; so we have something concrete to discuss. &lt;/p&gt;
</comment>
                            <comment id="15582898" author="srowen" created="Mon, 17 Oct 2016 17:46:26 +0000"  >&lt;p&gt;To solve this problem &amp;#8211; if it&apos;s really the only script-based issue &amp;#8211; just replace these 3 instances with some if-else bash construct to call check-hostname if it exists. I wouldn&apos;t introduce a bigger abstraction for now.&lt;/p&gt;</comment>
                            <comment id="15590009" author="apachespark" created="Wed, 19 Oct 2016 22:05:05 +0000"  >&lt;p&gt;User &apos;JnyJny&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/15557&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/15557&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15597448" author="srowen" created="Sat, 22 Oct 2016 08:38:12 +0000"  >&lt;p&gt;Issue resolved by pull request 15557&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/15557&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/15557&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34wxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>