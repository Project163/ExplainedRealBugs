<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:54:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-21306] OneVsRest Conceals Columns That May Be Relevant To Underlying Classifier</title>
                <link>https://issues.apache.org/jira/browse/SPARK-21306</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Hi folks, thanks for Spark! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve been learning to use `ml` and `mllib`, and I&apos;ve encountered a block while trying to use `ml.classification.OneVsRest` with `ml.classification.LogisticRegression`. Basically, &lt;a href=&quot;https://github.com/apache/spark/blob/master/mllib/src/main/scala/org/apache/spark/ml/classification/OneVsRest.scala#L320&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here in the code&lt;/a&gt;, only two columns are being extracted and fed to the underlying classifiers.. however with some configurations, more than two columns are required.&lt;/p&gt;

&lt;p&gt;Specifically: I want to do multiclass learning with Logistic Regression, on a very imbalanced dataset. In my dataset, I have lots of imbalances, so I was planning to use weights. I set a column, `&quot;weight&quot;`, as the inverse frequency of each field, and I configured my `LogisticRegression` class to use this column, then put it in a `OneVsRest` wrapper.&lt;/p&gt;

&lt;p&gt;However, `OneVsRest` strips all but two columns out of a dataset before training, so I get an error from within `LogisticRegression` that it can&apos;t find the `&quot;weight&quot;` column.&lt;/p&gt;

&lt;p&gt;It would be nice to have this fixed! I can see a few ways, but a very conservative fix would be to include a parameter in `OneVsRest.fit` for additional columns to `select` before passing to the underlying model.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</description>
                <environment></environment>
        <key id="13084593">SPARK-21306</key>
            <summary>OneVsRest Conceals Columns That May Be Relevant To Underlying Classifier</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="facai">Yan Facai (&#39068;&#21457;&#25165;)</assignee>
                                    <reporter username="cathalgarvey">Cathal Garvey</reporter>
                        <labels>
                            <label>classification</label>
                            <label>ml</label>
                    </labels>
                <created>Tue, 4 Jul 2017 16:00:04 +0000</created>
                <updated>Mon, 12 Dec 2022 18:10:45 +0000</updated>
                            <resolved>Fri, 28 Jul 2017 02:24:09 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>2.0.3</fixVersion>
                    <fixVersion>2.1.2</fixVersion>
                    <fixVersion>2.2.1</fixVersion>
                    <fixVersion>2.3.0</fixVersion>
                                    <component>ML</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16074404" author="mlnick" created="Wed, 5 Jul 2017 08:21:47 +0000"  >&lt;p&gt;This is definitely an issue. I don&apos;t think it is an issue with columns other than &lt;tt&gt;weight&lt;/tt&gt;, right? &lt;/p&gt;

&lt;p&gt;The easy fix would be to simply use the entire dataset in the &lt;tt&gt;fit&lt;/tt&gt; logic, though that would probably result in caching unnecessary data. If it is only the weight col that is really impacted, we could just add a check for that param on the classifier and if present, select the weight column also.&lt;/p&gt;</comment>
                            <comment id="16075970" author="facai" created="Thu, 6 Jul 2017 05:39:51 +0000"  >&lt;p&gt;I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mlnick&quot; class=&quot;user-hover&quot; rel=&quot;mlnick&quot;&gt;mlnick&lt;/a&gt;. It seems that we will get in trouble only when `weight` is expected.&lt;/p&gt;

&lt;p&gt;How about adding a `setWeightCol` like LogisticRegression?&lt;/p&gt;</comment>
                            <comment id="16075974" author="facai" created="Thu, 6 Jul 2017 05:44:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cathalgarvey&quot; class=&quot;user-hover&quot; rel=&quot;cathalgarvey&quot;&gt;cathalgarvey&lt;/a&gt; By the way, since LogisticRegression in ml supports multi-class directly by using multinomial loss, I believe that it might be better than OneVsRest.&lt;/p&gt;</comment>
                            <comment id="16076172" author="cathalgarvey" created="Thu, 6 Jul 2017 08:45:29 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mlnick&quot; class=&quot;user-hover&quot; rel=&quot;mlnick&quot;&gt;mlnick&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=facai&quot; class=&quot;user-hover&quot; rel=&quot;facai&quot;&gt;facai&lt;/a&gt; - Passing-through the weights column would fix my issue, yes. I&apos;d be content with that.&lt;/p&gt;

&lt;p&gt;I&apos;m only concerned that it&apos;s a patch over an issue that may continue to trouble future classifiers that may be written. Perhaps a mention in the documentation that it filters columns would help others diagnose this if it ever surfaces again?&lt;/p&gt;

&lt;p&gt;Thanks for your advice about using LogisticRegression for multiclass without using OVR; I&apos;ll try it &quot;bare&quot; and see what happens. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks for the help!&lt;/p&gt;</comment>
                            <comment id="16076274" author="apachespark" created="Thu, 6 Jul 2017 09:59:03 +0000"  >&lt;p&gt;User &apos;facaiy&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/18554&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/18554&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16111569" author="gurwls223" created="Wed, 2 Aug 2017 19:19:47 +0000"  >&lt;p&gt;User &apos;facaiy&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/18763&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/18763&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16111570" author="gurwls223" created="Wed, 2 Aug 2017 19:19:53 +0000"  >&lt;p&gt;User &apos;facaiy&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/18764&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/18764&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3h37b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311620" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Shepherd</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>yanboliang</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12339551">2.3.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>