<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:21:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-4461] Pass java options to yarn master to handle system properties correctly.</title>
                <link>https://issues.apache.org/jira/browse/SPARK-4461</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Currently spark read mapred-site.xml to get the class path. From hadoop 2.6, the library is shipped to cluster with distributed cache at run-time, and may not be available at every node manager. &lt;/p&gt;

&lt;p&gt;Instead of relying on mapred-site.xml, spark should handle this by its own, for example, through ADD_JARs, SPARK_CLASSPATH, etc&lt;/p&gt;</description>
                <environment></environment>
        <key id="12755935">SPARK-4461</key>
            <summary>Pass java options to yarn master to handle system properties correctly.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhazhan">Zhan Zhang</assignee>
                                    <reporter username="zzhan">Zhan Zhang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Nov 2014 22:28:52 +0000</created>
                <updated>Thu, 18 Dec 2014 16:02:50 +0000</updated>
                            <resolved>Thu, 18 Dec 2014 16:02:50 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>YARN</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14220322" author="vanzin" created="Fri, 21 Nov 2014 00:50:35 +0000"  >&lt;p&gt;The fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-2669&quot; title=&quot;Hadoop configuration is not localised when submitting job in yarn-cluster mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-2669&quot;&gt;&lt;del&gt;SPARK-2669&lt;/del&gt;&lt;/a&gt; should handle this issue to (although the current PR seems to have been abandoned).&lt;/p&gt;</comment>
                            <comment id="14221474" author="zzhan" created="Fri, 21 Nov 2014 21:51:32 +0000"  >&lt;p&gt;I changed the title so that to reflect the issue fixed in the PR.&lt;/p&gt;</comment>
                            <comment id="14221484" author="apachespark" created="Fri, 21 Nov 2014 22:03:02 +0000"  >&lt;p&gt;User &apos;zhzhan&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/3409&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/3409&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14221502" author="zzhan" created="Fri, 21 Nov 2014 22:21:35 +0000"  >&lt;p&gt;Thanks for the information Marcelo. I changed the title to reflect the change. It handles a different issue. But the PR you referred should also be fixed.&lt;/p&gt;

&lt;p&gt;Currently, there is no way to pass yarn am specific java options. It cause some potential issues when reading classpath from hadoop configuration file. Hadoop configuration actually replace variables in its property with the system property passed in java options. How to specify the value depends on different hadoop distribution.&lt;/p&gt;

&lt;p&gt;The new options are SPARK_YARN_JAVA_OPTS or spark.yarn.extraJavaOptions. I make it as spark global level, because typically we don&apos;t want user to specify this in their command line each time submitting spark job after it is setup in spark-defaults.conf.&lt;/p&gt;

&lt;p&gt;In addition, with this new extra options enabled to be passed to AM, it provides more flexibility. How to specify the value&lt;/p&gt;

&lt;p&gt;For example int the following valid mapred-site.xml file, we have the class path which specify values using system property. Hadoop can correctly handle it because it has java options passed in.&lt;/p&gt;


&lt;p&gt;mapreduce.application.classpath&lt;br/&gt;
/etc/hadoop/${hadoop.version}/mapreduce/*&lt;br/&gt;
In the meantime, we cannot relies on mapreduce.admin.map.child.java.opts in mapred-site.xml, because it has its own extra java options specified, which does not apply to Spark.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12752171">SPARK-4181</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22h8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327642">1.3.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>