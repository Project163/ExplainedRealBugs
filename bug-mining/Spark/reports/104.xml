<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:12:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-1149] Bad partitioners can cause Spark to hang</title>
                <link>https://issues.apache.org/jira/browse/SPARK-1149</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;While implementing a unit test for lookup, I accidentally created a situation where a partitioner returned a partition number that was outside its range. It should have returned 0 or 1, but in the last case, it returned a -1. &lt;/p&gt;

&lt;p&gt;Rather than reporting the problem via an exception, Spark simply hangs during the unit test run.&lt;/p&gt;

&lt;p&gt;We should catch this bad behavior by partitioners and throw an exception.&lt;/p&gt;

&lt;p&gt;test(&quot;lookup with bad partitioner&quot;) {&lt;br/&gt;
    val pairs = sc.parallelize(Array((1,2), (3,4), (5,6), (5,7)))&lt;/p&gt;

&lt;p&gt;    val p = new Partitioner &lt;/p&gt;
{
      def numPartitions: Int = 2

      def getPartition(key: Any): Int = key.hashCode() % 2
    }
&lt;p&gt;    val shuffled = pairs.partitionBy(p)&lt;/p&gt;

&lt;p&gt;    assert(shuffled.partitioner === Some(p))&lt;br/&gt;
    assert(shuffled.lookup(1) === Seq(2))&lt;br/&gt;
    assert(shuffled.lookup(5) === Seq(6,7))&lt;br/&gt;
    assert(shuffled.lookup(-1) === Seq())&lt;br/&gt;
  }&lt;/p&gt;</description>
                <environment></environment>
        <key id="12704710">SPARK-1149</key>
            <summary>Bad partitioners can cause Spark to hang</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="xoltar">Bryn Keller</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Feb 2014 21:00:03 +0000</created>
                <updated>Mon, 13 Oct 2014 18:05:14 +0000</updated>
                            <resolved>Mon, 13 Oct 2014 18:05:14 +0000</resolved>
                                                                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13953893" author="gq" created="Fri, 28 Feb 2014 01:18:42 +0000"  >&lt;p&gt;I opened a pull request:&lt;a href=&quot;https://github.com/apache/spark/pull/44&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#44&lt;/a&gt; . Spark should not to hang.&lt;/p&gt;</comment>
                            <comment id="14169660" author="srowen" created="Mon, 13 Oct 2014 18:05:14 +0000"  >&lt;p&gt;Looks like Patrick merged this into master in March. It might have been fixed for ... 1.0?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>383109</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1u03r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>383377</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>