<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:40:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-13600] Use approxQuantile from DataFrame stats in QuantileDiscretizer</title>
                <link>https://issues.apache.org/jira/browse/SPARK-13600</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;For consistency and code reuse, QuantileDiscretizer should use approxQuantile to find splits in the data rather than implement it&apos;s own method.&lt;/p&gt;

&lt;p&gt;Additionally, making this change should remedy a bug where QuantileDiscretizer fails to calculate the correct splits in certain circumstances, resulting in an incorrect number of buckets/bins.&lt;/p&gt;

&lt;p&gt;E.g.&lt;/p&gt;

&lt;p&gt;val df = sc.parallelize(1.0 to 10.0 by 1.0).map(Tuple1.apply).toDF(&quot;x&quot;)&lt;br/&gt;
val discretizer = new QuantileDiscretizer().setInputCol(&quot;x&quot;).setOutputCol(&quot;y&quot;).setNumBuckets(5)&lt;br/&gt;
discretizer.fit(df).getSplits&lt;/p&gt;

&lt;p&gt;gives:&lt;br/&gt;
Array(-Infinity, 2.0, 4.0, 6.0, 8.0, 10.0, Infinity)&lt;br/&gt;
which corresponds to 6 buckets (not 5).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12945902">SPARK-13600</key>
            <summary>Use approxQuantile from DataFrame stats in QuantileDiscretizer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ocp">Oliver Pierson</assignee>
                                    <reporter username="ocp">Oliver Pierson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Mar 2016 18:46:35 +0000</created>
                <updated>Mon, 11 Apr 2016 19:03:08 +0000</updated>
                            <resolved>Mon, 11 Apr 2016 19:03:08 +0000</resolved>
                                    <version>1.6.0</version>
                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>MLlib</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15176117" author="mlnick" created="Wed, 2 Mar 2016 18:08:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ocp&quot; class=&quot;user-hover&quot; rel=&quot;ocp&quot;&gt;ocp&lt;/a&gt; do you plan to submit a PR? Since you worked on &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-13444&quot; title=&quot;QuantileDiscretizer chooses bad splits on large DataFrames&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-13444&quot;&gt;&lt;del&gt;SPARK-13444&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="15176580" author="ocp" created="Wed, 2 Mar 2016 22:11:58 +0000"  >&lt;p&gt;Yeah, you can assign this to me.  However, it may be a few days or even a week before I can get a PR together.  I was hoping to get people&apos;s opinion on reimplementing findSplitCandidates using another &lt;a href=&quot;https://en.wikipedia.org/wiki/Quantile#Estimating_quantiles_from_a_sample&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;method&lt;/a&gt; (see the second paragraph of that section). I believe it&apos;s done this way in Numpy/Scipy. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srowen&quot; class=&quot;user-hover&quot; rel=&quot;srowen&quot;&gt;srowen&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mengxr&quot; class=&quot;user-hover&quot; rel=&quot;mengxr&quot;&gt;mengxr&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yinxusen&quot; class=&quot;user-hover&quot; rel=&quot;yinxusen&quot;&gt;yinxusen&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15177392" author="yinxusen" created="Thu, 3 Mar 2016 07:13:15 +0000"  >&lt;p&gt;Vote for the new method.&lt;/p&gt;</comment>
                            <comment id="15182512" author="apachespark" created="Mon, 7 Mar 2016 03:13:08 +0000"  >&lt;p&gt;User &apos;oliverpierson&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/11553&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11553&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15184717" author="mlnick" created="Tue, 8 Mar 2016 09:34:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ocp&quot; class=&quot;user-hover&quot; rel=&quot;ocp&quot;&gt;ocp&lt;/a&gt; Could you update this ticket with something about the approach taken of using DataFrame &lt;tt&gt;approxQuantile&lt;/tt&gt; - perhaps even update the title. Or it may make sense to create a new JIRA for the change to using &lt;tt&gt;approxQuantile&lt;/tt&gt;, since it is quite an important change.&lt;/p&gt;</comment>
                            <comment id="15184954" author="ocp" created="Tue, 8 Mar 2016 14:20:36 +0000"  >&lt;p&gt;Sure thing.  I think the best way to fix the bug is to use approxQuantile so I&apos;ve updated the ticket rather than open a new one.  If you&apos;d prefer a new JIRA instead, let me know and I&apos;ll open it.  Thanks.&lt;/p&gt;</comment>
                            <comment id="15186648" author="mlnick" created="Wed, 9 Mar 2016 07:11:45 +0000"  >&lt;p&gt;Thanks, that&apos;s fine&lt;/p&gt;</comment>
                            <comment id="15235739" author="mengxr" created="Mon, 11 Apr 2016 19:03:08 +0000"  >&lt;p&gt;Issue resolved by pull request 11553&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/11553&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11553&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12895962">SPARK-10785</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12895962">SPARK-10785</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2tzkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311620" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Shepherd</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>mlnick</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>