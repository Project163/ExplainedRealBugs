<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:30:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-9801] Spark streaming deletes the temp file and backup files without checking if they exist or not</title>
                <link>https://issues.apache.org/jira/browse/SPARK-9801</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;For spark streaming, when checkpoint is happening, it is getting below error message from spark driver log: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;15/07/29 11:04:50 INFO CheckpointWriter: Saving checkpoint &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; time 1438135490000 ms to file &lt;span class=&quot;code-quote&quot;&gt;&apos;maprfs:/user/mapr/spark-checkpoint2/checkpoint-1438135490000&apos;&lt;/span&gt; 
15/07/29 11:04:50 ERROR MapRFileSystem: Failed to delete path maprfs:/user/mapr/spark-checkpoint2/temp, error: No such file or directory (2) 
15/07/29 11:04:50 ERROR MapRFileSystem: Failed to delete path maprfs:/user/mapr/spark-checkpoint2/checkpoint-1438135490000.bk, error: No such file or directory (2) 
15/07/29 11:04:50 INFO CheckpointWriter: Deleting maprfs:&lt;span class=&quot;code-comment&quot;&gt;///user/mapr/spark-checkpoint2/checkpoint-1438135480000 
&lt;/span&gt;15/07/29 11:04:50 INFO CheckpointWriter: Checkpoint &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; time 1438135490000 ms saved to file &lt;span class=&quot;code-quote&quot;&gt;&apos;maprfs:/user/mapr/spark-checkpoint2/checkpoint-1438135490000&apos;&lt;/span&gt;, took 8729 bytes and 14 ms 
15/07/29 11:04:50 INFO DStreamGraph: Clearing checkpoint data &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; time 1438135490000 ms 
15/07/29 11:04:50 INFO DStreamGraph: Cleared checkpoint data &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; time 1438135490000 ms
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From the source code : &lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/blob/master/streaming/src/main/scala/org/apache/spark/streaming/Checkpoint.scala&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/blob/master/streaming/src/main/scala/org/apache/spark/streaming/Checkpoint.scala&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When Spark tries to delete the 2 files, it did not check if the 2 files exist or not. &lt;br/&gt;
fs.delete(tempFile, true) // just in case it exists &lt;br/&gt;
fs.delete(backupFile, true) // just in case it exists&lt;/p&gt;

&lt;p&gt;We should add the logic to check if the files exist or not before deleting.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12853989">SPARK-9801</key>
            <summary>Spark streaming deletes the temp file and backup files without checking if they exist or not</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="haozhu">Hao Zhu</assignee>
                                    <reporter username="haozhu">Hao Zhu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Aug 2015 21:47:02 +0000</created>
                <updated>Wed, 12 Aug 2015 09:48:49 +0000</updated>
                            <resolved>Tue, 11 Aug 2015 00:18:54 +0000</resolved>
                                    <version>1.4.1</version>
                                    <fixVersion>1.3.2</fixVersion>
                    <fixVersion>1.4.2</fixVersion>
                    <fixVersion>1.5.0</fixVersion>
                                    <component>DStreams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14680843" author="haozhu" created="Mon, 10 Aug 2015 21:58:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/spark/pull/8082&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/8082&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14680844" author="apachespark" created="Mon, 10 Aug 2015 21:58:06 +0000"  >&lt;p&gt;User &apos;viadea&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/8082&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/8082&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14680879" author="joshrosen" created="Mon, 10 Aug 2015 22:28:16 +0000"  >&lt;p&gt;I think there&apos;s an earlier duplicate JIRA for this same issue, in case someone wants to search for it.&lt;/p&gt;</comment>
                            <comment id="14681016" author="tdas" created="Tue, 11 Aug 2015 00:34:28 +0000"  >&lt;p&gt;I cant find it &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joshrosen&quot; class=&quot;user-hover&quot; rel=&quot;joshrosen&quot;&gt;joshrosen&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ik4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>