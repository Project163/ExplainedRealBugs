<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:59:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-19964] Flaky test: SparkSubmitSuite &quot;includes jars passed in through --packages&quot;</title>
                <link>https://issues.apache.org/jira/browse/SPARK-19964</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;The following test case has been failed due to TestFailedDueToTimeoutException&lt;br/&gt;
&lt;b&gt;Test Suite:&lt;/b&gt; SparkSubmitSuite&lt;br/&gt;
&lt;b&gt;Test Case:&lt;/b&gt; includes jars passed in through --packages&lt;br/&gt;
&lt;a href=&quot;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/74413/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/74413/testReport/&lt;/a&gt;&lt;br/&gt;
&lt;b&gt;Stacktrace is also attached.&lt;/b&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13056411">SPARK-19964</key>
            <summary>Flaky test: SparkSubmitSuite &quot;includes jars passed in through --packages&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vanzin">Marcelo Masiero Vanzin</assignee>
                                    <reporter username="erenavsarogullari">Eren Avsarogullari</reporter>
                        <labels>
                            <label>flaky-test</label>
                    </labels>
                <created>Wed, 15 Mar 2017 19:47:38 +0000</created>
                <updated>Mon, 12 Dec 2022 18:10:46 +0000</updated>
                            <resolved>Tue, 3 Apr 2018 01:33:02 +0000</resolved>
                                    <version>2.2.0</version>
                                                    <component>Deploy</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15927510" author="srowen" created="Thu, 16 Mar 2017 05:05:26 +0000"  >&lt;p&gt;It doesn&apos;t fail in master. This sounds like the kind of thing that fails when you have old builds lying around - could be local?&lt;/p&gt;</comment>
                            <comment id="15929257" author="kayousterhout" created="Fri, 17 Mar 2017 00:54:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srowen&quot; class=&quot;user-hover&quot; rel=&quot;srowen&quot;&gt;srowen&lt;/a&gt; it looks like this is failing periodically in master: &lt;a href=&quot;https://spark-tests.appspot.com/test-details?suite_name=org.apache.spark.deploy.SparkSubmitSuite&amp;amp;test_name=includes+jars+passed+in+through+--jars&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://spark-tests.appspot.com/test-details?suite_name=org.apache.spark.deploy.SparkSubmitSuite&amp;amp;test_name=includes+jars+passed+in+through+--jars&lt;/a&gt; (I added flaky to the name which is I suspect the source of confusion)&lt;/p&gt;</comment>
                            <comment id="16416033" author="vanzin" created="Tue, 27 Mar 2018 18:13:45 +0000"  >&lt;p&gt;Still flaky:&lt;br/&gt;
&lt;a href=&quot;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/88624/testReport/org.apache.spark.deploy/SparkSubmitSuite/includes_jars_passed_in_through___packages/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/88624/testReport/org.apache.spark.deploy/SparkSubmitSuite/includes_jars_passed_in_through___packages/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;sbt.ForkMain$ForkError: org.scalatest.exceptions.TestFailedDueToTimeoutException: The code passed to failAfter did not complete within 60 seconds.
	at java.lang.Thread.getStackTrace(Thread.java:1552)
	at org.scalatest.concurrent.TimeLimits$class.failAfterImpl(TimeLimits.scala:234)
	at org.apache.spark.deploy.SparkSubmitSuite$.failAfterImpl(SparkSubmitSuite.scala:1066)
	at org.scalatest.concurrent.TimeLimits$class.failAfter(TimeLimits.scala:230)
	at org.apache.spark.deploy.SparkSubmitSuite$.failAfter(SparkSubmitSuite.scala:1066)
	at org.apache.spark.deploy.SparkSubmitSuite$.runSparkSubmit(SparkSubmitSuite.scala:1085)
	at org.apache.spark.deploy.SparkSubmitSuite$$anonfun$9$$anonfun$apply$mcV$sp$1.apply(SparkSubmitSuite.scala:525)
	at org.apache.spark.deploy.SparkSubmitSuite$$anonfun$9$$anonfun$apply$mcV$sp$1.apply(SparkSubmitSuite.scala:514)
	at org.apache.spark.deploy.IvyTestUtils$.withRepository(IvyTestUtils.scala:377)
	at org.apache.spark.deploy.SparkSubmitSuite$$anonfun$9.apply$mcV$sp(SparkSubmitSuite.scala:514)
	at org.apache.spark.deploy.SparkSubmitSuite$$anonfun$9.apply(SparkSubmitSuite.scala:510)
	at org.apache.spark.deploy.SparkSubmitSuite$$anonfun$9.apply(SparkSubmitSuite.scala:510)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16416091" author="vanzin" created="Tue, 27 Mar 2018 18:52:05 +0000"  >&lt;p&gt;I ran into this failure in our internal jenkins also... the logs look similar to the above failure. It seems the code is taking a long time inside ivy libraries:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;18/03/27 02:20:43.516 Utils: SLF4J: Class path contains multiple SLF4J bindings.
...
18/03/27 02:21:22.384 Utils: 	found my.great.lib#mylib;0.1 in repo-1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Those are the first and last log lines for the test. In our internal jenkins spark-submit makes further progress, but still the timeout is caused by the call into ivy taking a long time:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;18/03/27 11:21:20.307 Ivy Default Cache set to: /var/lib/jenkins/.ivy2/cache
...
18/03/27 11:21:20.582 :: resolving dependencies :: org.apache.spark#spark-submit-parent;1.0
18/03/27 11:21:20.582 	confs: [default]
18/03/27 11:21:41.618 	found my.great.lib#mylib;0.1 in repo-1
18/03/27 11:22:11.271 	found my.great.dep#mylib;0.1 in repo-1
...
18/03/27 11:22:18.878 INFO BlockManagerMasterEndpoint: Registering block manager 172.28.195.10:58362 with 366.3 MB RAM, BlockManagerId(0, 172.28.195.10, 58362, None)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Wonder if it has anything to to with ivy trying to access the network during these tests, or some local lock maybe (which would be affected by multiple jenkins jobs on the same machine).&lt;/p&gt;</comment>
                            <comment id="16416141" author="vanzin" created="Tue, 27 Mar 2018 19:41:02 +0000"  >&lt;p&gt;&lt;a href=&quot;http://dl.bintray.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://dl.bintray.com&lt;/a&gt; doesn&apos;t seem to be loading right now, and that repo is hardcoded in &lt;tt&gt;SparkSubmit.scala&lt;/tt&gt;. Might be good to make tests skip these remote repos if they don&apos;t need them.&lt;/p&gt;</comment>
                            <comment id="16416239" author="apachespark" created="Tue, 27 Mar 2018 21:01:04 +0000"  >&lt;p&gt;User &apos;vanzin&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/20916&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/20916&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16423352" author="gurwls223" created="Tue, 3 Apr 2018 01:33:02 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/spark/pull/20916&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/20916&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13148385">SPARK-23804</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12858941" name="SparkSubmitSuite_Stacktrace" size="5126" author="erenavsarogullari" created="Wed, 15 Mar 2017 19:49:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 33 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3cbov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12342432">2.3.1</customfieldvalue>
    <customfieldvalue id="12342385">2.4.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>