<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:04:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-26721] Bug in feature importance calculation in GBM (and possibly other decision tree classifiers)</title>
                <link>https://issues.apache.org/jira/browse/SPARK-26721</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;The feature importance calculation in org.apache.spark.ml.classification.GBTClassificationModel.featureImportances follows a flawed implementation from scikit-learn resulting in incorrect importance values. This error was recently discovered and updated in scikit-learn version 0.20.0. This error&#160;is inherited in the spark implementation and needs to be fixed here as well.&lt;/p&gt;

&lt;p&gt;As described in the scikit-learn release notes (&lt;a href=&quot;https://scikit-learn.org/stable/whats_new.html#version-0-20-0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://scikit-learn.org/stable/whats_new.html#version-0-20-0&lt;/a&gt;):&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Fix Fixed a bug in ensemble.GradientBoostingRegressor and ensemble.GradientBoostingClassifier to have feature importances summed and then normalized, rather than normalizing on a per-tree basis. The previous behavior over-weighted the Gini importance of features that appear in later stages. This issue only affected feature importances. #11176 by Gil Forsyth.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Full discussion of this error and debate ultimately validating the&#160;correctness&#160;of the change can be found in the comment thread of the scikit-learn pull request: &lt;a href=&quot;https://github.com/scikit-learn/scikit-learn/pull/11176&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/scikit-learn/scikit-learn/pull/11176&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I believe the main change required would be to the featureImportances function in mllib/src/main/scala/org/apache/spark/ml/tree/treeModels.scala , however, I do not have the experience to make this change myself.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13211667">SPARK-26721</key>
            <summary>Bug in feature importance calculation in GBM (and possibly other decision tree classifiers)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgaido">Marco Gaido</assignee>
                                    <reporter username="danjump">Daniel Jumper</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Jan 2019 23:11:00 +0000</created>
                <updated>Sat, 26 Oct 2019 23:11:11 +0000</updated>
                            <resolved>Sat, 16 Feb 2019 22:51:19 +0000</resolved>
                                    <version>2.4.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>ML</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16751691" author="danjump" created="Thu, 24 Jan 2019 23:17:37 +0000"  >&lt;p&gt;updated the priority to Blocker as this is a correctness issue.&lt;/p&gt;</comment>
                            <comment id="16752865" author="maropu" created="Sat, 26 Jan 2019 00:47:42 +0000"  >&lt;p&gt;Unset the priority tag for now cuz its generally reserved for committers.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srowen&quot; class=&quot;user-hover&quot; rel=&quot;srowen&quot;&gt;srowen&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cloud_fan&quot; class=&quot;user-hover&quot; rel=&quot;cloud_fan&quot;&gt;cloud_fan&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mengxr&quot; class=&quot;user-hover&quot; rel=&quot;mengxr&quot;&gt;mengxr&lt;/a&gt; Anyone can check this? (I&apos;m not familiar with this part..)&lt;/p&gt;</comment>
                            <comment id="16752905" author="srowen" created="Sat, 26 Jan 2019 02:12:20 +0000"  >&lt;p&gt;I would not call it a Blocker, but I&apos;d welcome a pull request to evaluate it.&lt;/p&gt;</comment>
                            <comment id="16770245" author="srowen" created="Sat, 16 Feb 2019 22:51:19 +0000"  >&lt;p&gt;Issue resolved by pull request 23773&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/23773&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/23773&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13242507">SPARK-28222</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0acg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>