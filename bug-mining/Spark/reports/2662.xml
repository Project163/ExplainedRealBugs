<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:34:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-11398] unnecessary def dialectClassName in HiveContext, and misleading dialect conf at the start of spark-sql</title>
                <link>https://issues.apache.org/jira/browse/SPARK-11398</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;1. def dialectClassName in HiveContext is unnecessary. &lt;/p&gt;

&lt;p&gt;In HiveContext, if conf.dialect == &quot;hiveql&quot;, getSQLDialect() will return new HiveQLDialect(this);&lt;br/&gt;
else it will use super.getSQLDialect(). Then in super.getSQLDialect(), it calls dialectClassName, which is overriden in HiveContext and still return super.dialectClassName.&lt;/p&gt;

&lt;p&gt;So we&apos;ll never reach the code &quot;classOf&lt;span class=&quot;error&quot;&gt;&amp;#91;HiveQLDialect&amp;#93;&lt;/span&gt;.getCanonicalName&quot; of def dialectClassName in HiveContext.&lt;/p&gt;


&lt;p&gt;2. When we start bin/spark-sql, the default context is HiveContext, and the corresponding dialect is hiveql.&lt;br/&gt;
However, if we type &quot;set spark.sql.dialect;&quot;, the result is &quot;sql&quot;, which is inconsistent with the actual dialect and is misleading. For example, we can use sql like &quot;create table&quot; which is only allowed in hiveql, but this dialect conf shows it&apos;s &quot;sql&quot;.&lt;/p&gt;

&lt;p&gt;Although this problem will not cause any execution error, it&apos;s misleading to spark sql users. Therefore I think we should fix it.&lt;/p&gt;

&lt;p&gt;In this pr, instead of overriding def dialect in conf of HiveContext, I set the SQLConf.DIALECT directly as &quot;hiveql&quot;, such that result of &quot;set spark.sql.dialect;&quot; will be &quot;hiveql&quot;, not &quot;sql&quot;. After the change, we can still use &quot;sql&quot; as the dialect in HiveContext through &quot;set spark.sql.dialect=sql&quot;. Then the conf.dialect in HiveContext will become sql. Because in SQLConf, def dialect = getConf(), and now the dialect in &quot;settings&quot; becomes &quot;sql&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12908814">SPARK-11398</key>
            <summary>unnecessary def dialectClassName in HiveContext, and misleading dialect conf at the start of spark-sql</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ZenWzh">Zhenhua Wang</assignee>
                                    <reporter username="ZenWzh">Zhenhua Wang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Oct 2015 06:19:18 +0000</created>
                <updated>Thu, 5 Nov 2015 09:50:00 +0000</updated>
                            <resolved>Thu, 5 Nov 2015 01:17:17 +0000</resolved>
                                                    <fixVersion>1.6.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14979916" author="apachespark" created="Thu, 29 Oct 2015 06:26:05 +0000"  >&lt;p&gt;User &apos;wzhfy&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/9349&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/9349&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 3 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nobr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>