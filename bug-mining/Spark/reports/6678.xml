<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:06:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-29027] KafkaDelegationTokenSuite fails</title>
                <link>https://issues.apache.org/jira/browse/SPARK-29027</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;i am seeing consistent failure of KafkaDelegationTokenSuite on master&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
JsonUtilsSuite:
- parsing partitions
- parsing partitionOffsets
KafkaDelegationTokenSuite:
javax.security.sasl.SaslException: Failure to initialize security context [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos credentails)]
	at com.sun.security.sasl.gsskerb.GssKrb5Server.&amp;lt;init&amp;gt;(GssKrb5Server.java:125)
	at com.sun.security.sasl.gsskerb.FactoryImpl.createSaslServer(FactoryImpl.java:85)
	at javax.security.sasl.Sasl.createSaslServer(Sasl.java:524)
	at org.apache.zookeeper.server.ZooKeeperSaslServer$1.run(ZooKeeperSaslServer.java:118)
	at org.apache.zookeeper.server.ZooKeeperSaslServer$1.run(ZooKeeperSaslServer.java:114)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
	at org.apache.zookeeper.server.ZooKeeperSaslServer.createSaslServer(ZooKeeperSaslServer.java:114)
	at org.apache.zookeeper.server.ZooKeeperSaslServer.&amp;lt;init&amp;gt;(ZooKeeperSaslServer.java:48)
	at org.apache.zookeeper.server.NIOServerCnxn.&amp;lt;init&amp;gt;(NIOServerCnxn.java:100)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.createConnection(NIOServerCnxnFactory.java:156)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:197)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
Caused by: GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos credentails)
	at sun.security.jgss.krb5.Krb5AcceptCredential.getInstance(Krb5AcceptCredential.java:87)
	at sun.security.jgss.krb5.Krb5MechFactory.getCredentialElement(Krb5MechFactory.java:127)
	at sun.security.jgss.GSSManagerImpl.getCredentialElement(GSSManagerImpl.java:193)
	at sun.security.jgss.GSSCredentialImpl.add(GSSCredentialImpl.java:427)
	at sun.security.jgss.GSSCredentialImpl.&amp;lt;init&amp;gt;(GSSCredentialImpl.java:62)
	at sun.security.jgss.GSSManagerImpl.createCredential(GSSManagerImpl.java:154)
	at com.sun.security.sasl.gsskerb.GssKrb5Server.&amp;lt;init&amp;gt;(GssKrb5Server.java:108)
	... 12 more
org.apache.spark.sql.kafka010.KafkaDelegationTokenSuite *** ABORTED ***
  org.I0Itec.zkclient.exception.ZkAuthFailedException: Authentication failure
  at org.I0Itec.zkclient.ZkClient.waitForKeeperState(ZkClient.java:947)
  at org.I0Itec.zkclient.ZkClient.waitUntilConnected(ZkClient.java:924)
  at org.I0Itec.zkclient.ZkClient.connect(ZkClient.java:1231)
  at org.I0Itec.zkclient.ZkClient.&amp;lt;init&amp;gt;(ZkClient.java:157)
  at org.I0Itec.zkclient.ZkClient.&amp;lt;init&amp;gt;(ZkClient.java:131)
  at kafka.utils.ZkUtils$.createZkClientAndConnection(ZkUtils.scala:93)
  at kafka.utils.ZkUtils$.apply(ZkUtils.scala:75)
  at org.apache.spark.sql.kafka010.KafkaTestUtils.setupEmbeddedZookeeper(KafkaTestUtils.scala:202)
  at org.apache.spark.sql.kafka010.KafkaTestUtils.setup(KafkaTestUtils.scala:243)
  at org.apache.spark.sql.kafka010.KafkaDelegationTokenSuite.beforeAll(KafkaDelegationTokenSuite.scala:49)
  ...
KafkaSourceOffsetSuite:
- comparison {&lt;span class=&quot;code-quote&quot;&gt;&quot;t&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;:1}} &amp;lt;=&amp;gt; {&lt;span class=&quot;code-quote&quot;&gt;&quot;t&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;:2}}
- comparison {&lt;span class=&quot;code-quote&quot;&gt;&quot;t&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;:0,&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;:1}} &amp;lt;=&amp;gt; {&lt;span class=&quot;code-quote&quot;&gt;&quot;t&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;:1,&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;:2}}
- comparison {&lt;span class=&quot;code-quote&quot;&gt;&quot;t&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;:1},&lt;span class=&quot;code-quote&quot;&gt;&quot;T&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;:0}} &amp;lt;=&amp;gt; {&lt;span class=&quot;code-quote&quot;&gt;&quot;t&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;:2},&lt;span class=&quot;code-quote&quot;&gt;&quot;T&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;:1}}
- comparison {&lt;span class=&quot;code-quote&quot;&gt;&quot;t&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;:1}} &amp;lt;=&amp;gt; {&lt;span class=&quot;code-quote&quot;&gt;&quot;t&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;:1,&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;:2}}
- comparison {&lt;span class=&quot;code-quote&quot;&gt;&quot;t&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;:1}} &amp;lt;=&amp;gt; {&lt;span class=&quot;code-quote&quot;&gt;&quot;t&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;:3,&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;:2}}
- basic serialization - deserialization
- OffsetSeqLog serialization - deserialization
- read Spark 2.1.0 offset format
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] Reactor Summary &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Spark Project Parent POM 3.0.0-SNAPSHOT:
[INFO] 
[INFO] Spark Project Parent POM ........................... SUCCESS [  4.178 s]
[INFO] Spark Project Tags ................................. SUCCESS [  9.373 s]
[INFO] Spark Project Sketch ............................... SUCCESS [ 24.586 s]
[INFO] Spark Project Local DB ............................. SUCCESS [  5.456 s]
[INFO] Spark Project Networking ........................... SUCCESS [ 49.819 s]
[INFO] Spark Project Shuffle Streaming Service ............ SUCCESS [  6.096 s]
[INFO] Spark Project Unsafe ............................... SUCCESS [ 14.714 s]
[INFO] Spark Project Launcher ............................. SUCCESS [  5.277 s]
[INFO] Spark Project Core ................................. SUCCESS [32:58 min]
[INFO] Spark Project ML Local Library ..................... SUCCESS [ 41.076 s]
[INFO] Spark Project GraphX ............................... SUCCESS [01:51 min]
[INFO] Spark Project Streaming ............................ SUCCESS [06:43 min]
[INFO] Spark Project Catalyst ............................. SUCCESS [15:04 min]
[INFO] Spark Project SQL .................................. SUCCESS [  01:32 h]
[INFO] Spark Project ML Library ........................... SUCCESS [26:48 min]
[INFO] Spark Project Tools ................................ SUCCESS [  7.830 s]
[INFO] Spark Project Hive ................................. SUCCESS [  01:00 h]
[INFO] Spark Project Graph API ............................ SUCCESS [  3.378 s]
[INFO] Spark Project Cypher ............................... SUCCESS [  3.672 s]
[INFO] Spark Project Graph ................................ SUCCESS [  3.615 s]
[INFO] Spark Project REPL ................................. SUCCESS [02:11 min]
[INFO] Spark Project Assembly ............................. SUCCESS [  3.058 s]
[INFO] Kafka 0.10+ Token Provider &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Streaming ........... SUCCESS [ 24.208 s]
[INFO] Spark Integration &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Kafka 0.10 ................... SUCCESS [01:46 min]
[INFO] Kafka 0.10+ Source &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Structured Streaming ........ FAILURE [06:15 min]
[INFO] Spark Project Examples ............................. SKIPPED
[INFO] Spark Integration &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Kafka 0.10 Assembly .......... SUCCESS [  2.467 s]
[INFO] Spark Avro ......................................... SUCCESS [01:47 min]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  04:11 h
[INFO] Finished at: 2019-09-08T02:49:07-04:00
[INFO] ------------------------------------------------------------------------
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
commit 6378d4bc06cd1bb1a209bd5fb63d10ef52d75eb4
Author: Sean Owen &amp;lt;sean.owen@databricks.com&amp;gt;
Date:   Mon Sep 9 10:19:40 2019 -0500
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ubuntu 16.04 with OpenJDK 1.8 (1.8.0_222-8u222-b10-1ubuntu1~16.04.1-b10)&lt;/p&gt;</environment>
        <key id="13255753">SPARK-29027</key>
            <summary>KafkaDelegationTokenSuite fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gsomogyi">Gabor Somogyi</assignee>
                                    <reporter username="koert">koert kuipers</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Sep 2019 22:40:31 +0000</created>
                <updated>Mon, 12 Dec 2022 18:10:34 +0000</updated>
                            <resolved>Tue, 17 Sep 2019 22:30:41 +0000</resolved>
                                    <version>3.0.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>Structured Streaming</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16926288" author="gurwls223" created="Tue, 10 Sep 2019 03:02:37 +0000"  >&lt;p&gt;Seems like this is passing correctly in Jenkins. Would you be willing to investigate further? which command did you use to run the tests?&lt;/p&gt;</comment>
                            <comment id="16926299" author="kabhwan" created="Tue, 10 Sep 2019 03:24:15 +0000"  >&lt;p&gt;The test passed in my local dev. MacOS 10.14.2, JDK 1.8.0_191-b12&lt;/p&gt;

&lt;p&gt;I&apos;ve run below command to avoid running all tests.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
mvn clean install -DskipTests
mvn clean install -rf :spark-sql-kafka-0-10_2.12 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Which profile(s) you enable when running tests?&lt;/p&gt;

&lt;p&gt;cc. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gsomogyi&quot; class=&quot;user-hover&quot; rel=&quot;gsomogyi&quot;&gt;gsomogyi&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16926420" author="gsomogyi" created="Tue, 10 Sep 2019 08:28:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kabhwan&quot; class=&quot;user-hover&quot; rel=&quot;kabhwan&quot;&gt;kabhwan&lt;/a&gt; thanks for pinging. I know of this because I&apos;ve suggested on the original PR to open this jira.&lt;br/&gt;
Apart from jenkins runs (which are passing) yesterday I&apos;ve started this test in a loop with sbt and maven as well but until now haven&apos;t failed.&lt;/p&gt;

&lt;p&gt;What I can think of:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The environment is significantly different from my Mac and from PR builder&lt;/li&gt;
	&lt;li&gt;The code is not vanilla Spark and has some downstream changes&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;All in all as suggested exact environment description + debug logs would help.&lt;/p&gt;</comment>
                            <comment id="16926423" author="gsomogyi" created="Tue, 10 Sep 2019 08:34:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=koert&quot; class=&quot;user-hover&quot; rel=&quot;koert&quot;&gt;koert&lt;/a&gt; are you guys using vanilla Spark or the code contains some downstream changes?&lt;/p&gt;</comment>
                            <comment id="16926427" author="gsomogyi" created="Tue, 10 Sep 2019 08:39:29 +0000"  >&lt;p&gt;Hmmm, based on the reactor summary you&apos;ve provided I see downstream changes.&lt;/p&gt;</comment>
                            <comment id="16926563" author="koert" created="Tue, 10 Sep 2019 12:11:40 +0000"  >&lt;p&gt;hey the command i run is:&lt;br/&gt;
mvn clean test -fae&lt;/p&gt;

&lt;p&gt;i am not aware of downstream changes. where/how do you see that in reactor summary?&lt;br/&gt;
in so far i know this is spark master. to be sure i will do new clone of repo.&lt;/p&gt;</comment>
                            <comment id="16926577" author="koert" created="Tue, 10 Sep 2019 12:19:51 +0000"  >&lt;p&gt;i am running test on my work laptop. it has kerberos client installed (e.g. i can kinit, klist, kdestroy on it). i get the same error on other laptop (ubuntu 18) and one of our build servers. they also have kerberos client installed. &lt;/p&gt;</comment>
                            <comment id="16926620" author="koert" created="Tue, 10 Sep 2019 13:07:06 +0000"  >&lt;p&gt;i am going to try running tests on a virtual machine to try to isolate what the issue could be in environment&lt;/p&gt;</comment>
                            <comment id="16926648" author="gsomogyi" created="Tue, 10 Sep 2019 13:37:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;where/how do you see that in reactor summary?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I thought I&apos;ve seen additional project in the summary but revisited and it&apos;s not true.&lt;/p&gt;

&lt;p&gt;I&apos;ve double checked my Mac and there I&apos;ve also kerberos client installed.&lt;/p&gt;</comment>
                            <comment id="16926707" author="koert" created="Tue, 10 Sep 2019 14:52:58 +0000"  >&lt;p&gt;i tried doing tests in a virtual machine and they pass&lt;br/&gt;
so its something in my environment (or really in all our corporate laptops and servers) but i have no idea what it could be right now&lt;/p&gt;</comment>
                            <comment id="16926809" author="koert" created="Tue, 10 Sep 2019 17:49:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gsomogyi&quot; class=&quot;user-hover&quot; rel=&quot;gsomogyi&quot;&gt;gsomogyi&lt;/a&gt; do you use any services that require open ports perhaps? i am thinking it could be firewall issue, or host to ip mapping?&lt;/p&gt;</comment>
                            <comment id="16927189" author="kabhwan" created="Wed, 11 Sep 2019 01:59:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=koert&quot; class=&quot;user-hover&quot; rel=&quot;koert&quot;&gt;koert&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please try to mv krb5.conf to other and run the test again. If it works, please find &quot;EXAMPLE.COM&quot; is defined as realm in krb5.conf, as MiniKdc seems to use it for default configuration.&lt;/p&gt;</comment>
                            <comment id="16927334" author="gsomogyi" created="Wed, 11 Sep 2019 07:40:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=koert&quot; class=&quot;user-hover&quot; rel=&quot;koert&quot;&gt;koert&lt;/a&gt; Zookeeper opens a port where ZKClient tries to connect. That said it would be good to see debug log from this suite. It may contain lot of useful info...&lt;/p&gt;</comment>
                            <comment id="16927637" author="gsomogyi" created="Wed, 11 Sep 2019 15:04:43 +0000"  >&lt;p&gt;I&apos;ve tried to create a krb5.conf file which contains various things but not able to make the test fail. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=koert&quot; class=&quot;user-hover&quot; rel=&quot;koert&quot;&gt;koert&lt;/a&gt; please attach something to proceed.&lt;/p&gt;</comment>
                            <comment id="16927640" author="gsomogyi" created="Wed, 11 Sep 2019 15:08:11 +0000"  >&lt;p&gt;Can you give for example the output of this cmd:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;gaborsomogyi:~/spark/external/kafka-0-10-sql&amp;#93;&lt;/span&gt; master(&lt;ins&gt;8/-2)&lt;/ins&gt; &#177; mvn dependency:tree -Dverbose | grep zookeeper&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="16927646" author="koert" created="Wed, 11 Sep 2019 15:12:45 +0000"  >&lt;p&gt;let me try to get debug logs&lt;/p&gt;</comment>
                            <comment id="16927715" author="koert" created="Wed, 11 Sep 2019 15:58:13 +0000"  >&lt;p&gt;i renamed /etc/krb5.conf and it did not change anything. still same failure.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
~/spark/external/kafka-0-10-sql$ mvn dependency:tree -Dverbose | grep zookeeper
[INFO] +- org.apache.zookeeper:zookeeper:jar:3.4.7:test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16927783" author="koert" created="Wed, 11 Sep 2019 16:33:07 +0000"  >&lt;p&gt;i get same error in sbt i think, plus i find sbt a lot easier to handle &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[info] KafkaDelegationTokenSuite:
[info] org.apache.spark.sql.kafka010.KafkaDelegationTokenSuite *** ABORTED *** (10 seconds, 543 milliseconds)
[info]   org.I0Itec.zkclient.exception.ZkAuthFailedException: Authentication failure
[info]   at org.I0Itec.zkclient.ZkClient.waitForKeeperState(ZkClient.java:947)
[info]   at org.I0Itec.zkclient.ZkClient.waitUntilConnected(ZkClient.java:924)
[info]   at org.I0Itec.zkclient.ZkClient.connect(ZkClient.java:1231)
[info]   at org.I0Itec.zkclient.ZkClient.&amp;lt;init&amp;gt;(ZkClient.java:157)
[info]   at org.I0Itec.zkclient.ZkClient.&amp;lt;init&amp;gt;(ZkClient.java:131)
[info]   at kafka.utils.ZkUtils$.createZkClientAndConnection(ZkUtils.scala:93)
[info]   at kafka.utils.ZkUtils$.apply(ZkUtils.scala:75)
[info]   at org.apache.spark.sql.kafka010.KafkaTestUtils.setupEmbeddedZookeeper(KafkaTestUtils.scala:202)
[info]   at org.apache.spark.sql.kafka010.KafkaTestUtils.setup(KafkaTestUtils.scala:243)
[info]   at org.apache.spark.sql.kafka010.KafkaDelegationTokenSuite.beforeAll(KafkaDelegationTokenSuite.scala:49)
[info]   at org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:212)
[info]   at org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)
[info]   at org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)
[info]   at org.apache.spark.SparkFunSuite.run(SparkFunSuite.scala:56)
[info]   at org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:314)
[info]   at org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:507)
[info]   at sbt.ForkMain$Run$2.call(ForkMain.java:296)
[info]   at sbt.ForkMain$Run$2.call(ForkMain.java:286)
[info]   at java.util.concurrent.FutureTask.run(FutureTask.java:266)
[info]   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
[info]   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
[info]   at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
org.apache.directory.api.ldap.model.exception.LdapOperationErrorException: /home/koert/src/spark/target/tmp/spark-dc223dd0-e499-4ccf-9600-c70e4706a909/1568218986864/partitions/system/1.3.6.1.4.1.18060.0.4.1.2.50.lg (No such file or directory)
	at org.apache.directory.server.core.partition.impl.btree.AbstractBTreePartition.modify(AbstractBTreePartition.java:1183)
	at org.apache.directory.server.core.shared.partition.DefaultPartitionNexus.sync(DefaultPartitionNexus.java:335)
	at org.apache.directory.server.core.DefaultDirectoryService.shutdown(DefaultDirectoryService.java:1299)
	at org.apache.directory.server.core.DefaultDirectoryService$1.run(DefaultDirectoryService.java:1230)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
Caused by: java.io.FileNotFoundException: /home/koert/src/spark/target/tmp/spark-dc223dd0-e499-4ccf-9600-c70e4706a909/1568218986864/partitions/system/1.3.6.1.4.1.18060.0.4.1.2.50.lg (No such file or directory)
	at java.io.FileOutputStream.open0(Native Method)
	at java.io.FileOutputStream.open(FileOutputStream.java:270)
	at java.io.FileOutputStream.&amp;lt;init&amp;gt;(FileOutputStream.java:213)
	at java.io.FileOutputStream.&amp;lt;init&amp;gt;(FileOutputStream.java:101)
	at jdbm.recman.TransactionManager.open(TransactionManager.java:209)
	at jdbm.recman.TransactionManager.synchronizeLogFromMemory(TransactionManager.java:202)
	at jdbm.recman.TransactionManager.synchronizeLog(TransactionManager.java:135)
	at org.apache.directory.server.core.partition.impl.btree.jdbm.JdbmIndex.sync(JdbmIndex.java:698)
	at org.apache.directory.server.core.partition.impl.btree.jdbm.JdbmPartition.sync(JdbmPartition.java:312)
	at org.apache.directory.server.core.partition.impl.btree.AbstractBTreePartition.modify(AbstractBTreePartition.java:1228)
	at org.apache.directory.server.core.partition.impl.btree.AbstractBTreePartition.modify(AbstractBTreePartition.java:1173)
	... 4 more
java.io.FileNotFoundException: /home/koert/src/spark/target/tmp/spark-dc223dd0-e499-4ccf-9600-c70e4706a909/1568218986864/partitions/example/1.3.6.1.4.1.18060.0.4.1.2.5.lg (No such file or directory)
	at java.io.FileOutputStream.open0(Native Method)
	at java.io.FileOutputStream.open(FileOutputStream.java:270)
	at java.io.FileOutputStream.&amp;lt;init&amp;gt;(FileOutputStream.java:213)
	at java.io.FileOutputStream.&amp;lt;init&amp;gt;(FileOutputStream.java:101)
	at jdbm.recman.TransactionManager.open(TransactionManager.java:209)
	at jdbm.recman.TransactionManager.synchronizeLogFromMemory(TransactionManager.java:202)
	at jdbm.recman.TransactionManager.synchronizeLog(TransactionManager.java:135)
	at org.apache.directory.server.core.partition.impl.btree.jdbm.JdbmIndex.sync(JdbmIndex.java:698)
	at org.apache.directory.server.core.partition.impl.btree.jdbm.JdbmPartition.sync(JdbmPartition.java:312)
	at org.apache.directory.server.core.shared.partition.DefaultPartitionNexus.sync(DefaultPartitionNexus.java:353)
	at org.apache.directory.server.core.DefaultDirectoryService.shutdown(DefaultDirectoryService.java:1299)
	at org.apache.directory.server.core.DefaultDirectoryService$1.run(DefaultDirectoryService.java:1230)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
java.io.FileNotFoundException: /home/koert/src/spark/target/tmp/spark-dc223dd0-e499-4ccf-9600-c70e4706a909/1568218986864/partitions/system/1.3.6.1.4.1.18060.0.4.1.2.5.lg (No such file or directory)
	at java.io.FileOutputStream.open0(Native Method)
	at java.io.FileOutputStream.open(FileOutputStream.java:270)
	at java.io.FileOutputStream.&amp;lt;init&amp;gt;(FileOutputStream.java:213)
	at java.io.FileOutputStream.&amp;lt;init&amp;gt;(FileOutputStream.java:101)
	at jdbm.recman.TransactionManager.open(TransactionManager.java:209)
	at jdbm.recman.TransactionManager.synchronizeLogFromMemory(TransactionManager.java:202)
	at jdbm.recman.TransactionManager.synchronizeLog(TransactionManager.java:135)
	at org.apache.directory.server.core.partition.impl.btree.jdbm.JdbmIndex.sync(JdbmIndex.java:698)
	at org.apache.directory.server.core.partition.impl.btree.jdbm.JdbmPartition.sync(JdbmPartition.java:312)
	at org.apache.directory.server.core.shared.partition.DefaultPartitionNexus.sync(DefaultPartitionNexus.java:353)
	at org.apache.directory.server.core.DefaultDirectoryService.shutdown(DefaultDirectoryService.java:1299)
	at org.apache.directory.server.core.DefaultDirectoryService$1.run(DefaultDirectoryService.java:1230)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
[info] ScalaTest
[info] Run completed in 14 seconds, 392 milliseconds.
[info] Total number of tests run: 0
[info] Suites: completed 0, aborted 1
[info] Tests: succeeded 0, failed 0, canceled 0, ignored 0, pending 0
[info] *** 1 SUITE ABORTED ***
[error] Error: Total 1, Failed 0, Errors 1, Passed 0
[error] Error during tests:
[error] 	org.apache.spark.sql.kafka010.KafkaDelegationTokenSuite
[error] (sql-kafka-0-10/test:testOnly) sbt.TestsFailedException: Tests unsuccessful
[error] Total time: 52 s, completed Sep 11, 2019 12:23:22 PM
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16927785" author="koert" created="Wed, 11 Sep 2019 16:33:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gsomogyi&quot; class=&quot;user-hover&quot; rel=&quot;gsomogyi&quot;&gt;gsomogyi&lt;/a&gt; i can email you debug log file directly if thats ok. rather not post it publicly.&lt;/p&gt;</comment>
                            <comment id="16927822" author="gsomogyi" created="Wed, 11 Sep 2019 17:15:34 +0000"  >&lt;p&gt;You can remove the sensitive parts or if you only trust me then fine but you loose the possibility of community knowledge. Maybe somebody would pinpoint the issue right away.&lt;/p&gt;</comment>
                            <comment id="16927889" author="koert" created="Wed, 11 Sep 2019 18:28:07 +0000"  >&lt;p&gt;just for this one test debug logs is 62mb of kerberos and ldap stuff. its difficult to say whats sensitive and whats not.&lt;/p&gt;</comment>
                            <comment id="16927912" author="koert" created="Wed, 11 Sep 2019 19:03:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gsomogyi&quot; class=&quot;user-hover&quot; rel=&quot;gsomogyi&quot;&gt;gsomogyi&lt;/a&gt; if you email me at koert at tresata dot com i can send logs&lt;/p&gt;</comment>
                            <comment id="16928466" author="gsomogyi" created="Thu, 12 Sep 2019 11:36:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=koert&quot; class=&quot;user-hover&quot; rel=&quot;koert&quot;&gt;koert&lt;/a&gt; I see your concern and sending a mail...&lt;/p&gt;</comment>
                            <comment id="16931883" author="vanzin" created="Tue, 17 Sep 2019 22:30:42 +0000"  >&lt;p&gt;Issue resolved by pull request 25803&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/25803&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/25803&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13264142">SPARK-29580</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 8 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z06hfk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>