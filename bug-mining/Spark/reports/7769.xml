<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:24:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-32617] Upgrade kubernetes client version to support latest minikube version.</title>
                <link>https://issues.apache.org/jira/browse/SPARK-32617</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Following error comes, when the k8s integration tests are run against the minikube cluster with version 1.2.1&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Run starting. Expected test count is: 18
KubernetesSuite:
org.apache.spark.deploy.k8s.integrationtest.KubernetesSuite *** ABORTED ***
  io.fabric8.kubernetes.client.KubernetesClientException: An error has occurred.
  at io.fabric8.kubernetes.client.KubernetesClientException.launderThrowable(KubernetesClientException.java:64)
  at io.fabric8.kubernetes.client.KubernetesClientException.launderThrowable(KubernetesClientException.java:53)
  at io.fabric8.kubernetes.client.utils.HttpClientUtils.createHttpClient(HttpClientUtils.java:196)
  at io.fabric8.kubernetes.client.utils.HttpClientUtils.createHttpClient(HttpClientUtils.java:62)
  at io.fabric8.kubernetes.client.BaseClient.&amp;lt;init&amp;gt;(BaseClient.java:51)
  at io.fabric8.kubernetes.client.DefaultKubernetesClient.&amp;lt;init&amp;gt;(DefaultKubernetesClient.java:105)
  at org.apache.spark.deploy.k8s.integrationtest.backend.minikube.Minikube$.getKubernetesClient(Minikube.scala:81)
  at org.apache.spark.deploy.k8s.integrationtest.backend.minikube.MinikubeTestBackend$.initialize(MinikubeTestBackend.scala:33)
  at org.apache.spark.deploy.k8s.integrationtest.KubernetesSuite.beforeAll(KubernetesSuite.scala:131)
  at org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:212)
  ...
  Cause: java.nio.file.NoSuchFileException: /root/.minikube/apiserver.crt
  at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
  at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
  at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
  at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214)
  at java.nio.file.Files.newByteChannel(Files.java:361)
  at java.nio.file.Files.newByteChannel(Files.java:407)
  at java.nio.file.Files.readAllBytes(Files.java:3152)
  at io.fabric8.kubernetes.client.internal.CertUtils.getInputStreamFromDataOrFile(CertUtils.java:72)
  at io.fabric8.kubernetes.client.internal.CertUtils.createKeyStore(CertUtils.java:242)
  at io.fabric8.kubernetes.client.internal.SSLUtils.keyManagers(SSLUtils.java:128)
  ...
Run completed in 1 second, 821 milliseconds.
Total number of tests run: 0
Suites: completed 1, aborted 1
Tests: succeeded 0, failed 0, canceled 0, ignored 0, pending 0
*** 1 SUITE ABORTED ***
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Spark Project Parent POM 3.1.0-SNAPSHOT:
[INFO] 
[INFO] Spark Project Parent POM ........................... SUCCESS [  4.454 s]
[INFO] Spark Project Tags ................................. SUCCESS [  4.768 s]
[INFO] Spark Project Local DB ............................. SUCCESS [  2.961 s]
[INFO] Spark Project Networking ........................... SUCCESS [  4.258 s]
[INFO] Spark Project Shuffle Streaming Service ............ SUCCESS [  5.703 s]
[INFO] Spark Project Unsafe ............................... SUCCESS [  3.239 s]
[INFO] Spark Project Launcher ............................. SUCCESS [  3.224 s]
[INFO] Spark Project Core ................................. SUCCESS [02:25 min]
[INFO] Spark Project Kubernetes Integration Tests ......... FAILURE [ 17.244 s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  03:12 min
[INFO] Finished at: 2020-08-11T06:26:15-05:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.scalatest:scalatest-maven-plugin:2.0.0:test (integration-test) on project spark-kubernetes-integration-tests_2.12: There are test failures -&amp;gt; [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt;.
[ERROR] Re-run Maven using the -X &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http:&lt;span class=&quot;code-comment&quot;&gt;//cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
&lt;/span&gt;[ERROR]  &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;New minikube has support for profiles, which is simply enabled by upgrading the minikube version.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13322728">SPARK-32617</key>
            <summary>Upgrade kubernetes client version to support latest minikube version.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="3" iconUrl="https://issues.apache.org/jira/images/icons/statuses/inprogress.png" description="This issue is being actively worked on at the moment by the assignee.">In Progress</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="prashant">Prashant Sharma</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Aug 2020 10:09:33 +0000</created>
                <updated>Fri, 26 Feb 2021 01:17:10 +0000</updated>
                                            <version>3.1.0</version>
                                                    <component>Kubernetes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="17182945" author="dmoore62" created="Mon, 24 Aug 2020 04:27:48 +0000"  >&lt;p&gt;Is there a minikube support matrix?&lt;/p&gt;</comment>
                            <comment id="17248168" author="attilapiros" created="Fri, 11 Dec 2020 20:39:42 +0000"  >&lt;p&gt;I will have PR for this soon. &lt;/p&gt;</comment>
                            <comment id="17248522" author="apachespark" created="Sun, 13 Dec 2020 07:18:15 +0000"  >&lt;p&gt;User &apos;attilapiros&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/30751&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/30751&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17248523" author="apachespark" created="Sun, 13 Dec 2020 07:20:04 +0000"  >&lt;p&gt;User &apos;attilapiros&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/30751&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/30751&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17291321" author="apachespark" created="Fri, 26 Feb 2021 01:00:47 +0000"  >&lt;p&gt;User &apos;dongjoon-hyun&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/31655&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/31655&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17291325" author="dongjoon" created="Fri, 26 Feb 2021 01:14:13 +0000"  >&lt;p&gt;The commit is reverted because it breaks IT when `minikube kubectl config view` returns multiple configs.&lt;/p&gt;

&lt;p&gt;I tried to do follow-up first with `kubectl config view --minify`. However, it turns out that `minikube` doesn&apos;t support `minikube kubectl config view --minify`.&lt;/p&gt;</comment>
                            <comment id="17291326" author="dongjoon" created="Fri, 26 Feb 2021 01:15:05 +0000"  >&lt;p&gt;BTW, the issue title is wrong. K8s IT works with all the latest Minikube including v1.16 and v1.17 (as of today).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 37 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0hrw8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>