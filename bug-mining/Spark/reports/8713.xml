<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:31:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-40798] Alter partition should verify value</title>
                <link>https://issues.apache.org/jira/browse/SPARK-40798</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CREATE TABLE t (c &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) USING PARQUET PARTITIONED BY(p &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;);

-- This DDL should fail but worked:
ALTER TABLE t ADD PARTITION(p=&lt;span class=&quot;code-quote&quot;&gt;&apos;aaa&apos;&lt;/span&gt;); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13486300">SPARK-40798</key>
            <summary>Alter partition should verify value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ulysses">XiDuo You</assignee>
                                    <reporter username="ulysses">XiDuo You</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Oct 2022 09:59:39 +0000</created>
                <updated>Wed, 16 Nov 2022 02:58:49 +0000</updated>
                            <resolved>Mon, 24 Oct 2022 07:21:10 +0000</resolved>
                                    <version>3.4.0</version>
                                    <fixVersion>3.4.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17617617" author="apachespark" created="Fri, 14 Oct 2022 10:09:19 +0000"  >&lt;p&gt;User &apos;ulysses-you&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/38257&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/38257&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17617619" author="apachespark" created="Fri, 14 Oct 2022 10:09:33 +0000"  >&lt;p&gt;User &apos;ulysses-you&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/38257&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/38257&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17623000" author="cloud_fan" created="Mon, 24 Oct 2022 07:21:10 +0000"  >&lt;p&gt;Issue resolved by pull request 38257&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/38257&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/38257&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17626367" author="apachespark" created="Mon, 31 Oct 2022 04:07:37 +0000"  >&lt;p&gt;User &apos;HyukjinKwon&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/38443&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/38443&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17626556" author="apachespark" created="Mon, 31 Oct 2022 12:08:59 +0000"  >&lt;p&gt;User &apos;ulysses-you&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/38449&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/38449&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17630146" author="apachespark" created="Tue, 8 Nov 2022 03:03:32 +0000"  >&lt;p&gt;User &apos;HyukjinKwon&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/38547&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/38547&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17630147" author="apachespark" created="Tue, 8 Nov 2022 03:04:06 +0000"  >&lt;p&gt;User &apos;HyukjinKwon&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/38547&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/38547&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17630869" author="apachespark" created="Wed, 9 Nov 2022 09:18:38 +0000"  >&lt;p&gt;User &apos;ulysses-you&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/38580&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/38580&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17630870" author="apachespark" created="Wed, 9 Nov 2022 09:19:33 +0000"  >&lt;p&gt;User &apos;ulysses-you&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/38580&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/38580&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17632106" author="rangareddy.avula@gmail.com" created="Fri, 11 Nov 2022 06:45:45 +0000"  >&lt;p&gt;The below issue is addressed in the current Jira. Can I add a test case for the below issue in&#160;InsertSuite.scala?&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-40988&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SPARK-40988&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17632413" author="ulysses" created="Fri, 11 Nov 2022 15:24:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rangareddy.avula%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;rangareddy.avula@gmail.com&quot;&gt;rangareddy.avula@gmail.com&lt;/a&gt; sure, just go ahead&lt;/p&gt;</comment>
                            <comment id="17633209" author="rangareddy.avula@gmail.com" created="Sun, 13 Nov 2022 03:54:54 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ulysses&quot; class=&quot;user-hover&quot; rel=&quot;ulysses&quot;&gt;ulysses&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;The current Jira will solve both the &lt;b&gt;Insert&lt;/b&gt; and &lt;b&gt;Alter&lt;/b&gt; partition values.&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CREATE EXTERNAL TABLE test_partition_value_tbl ( id INT, name STRING ) PARTITIONED BY (age INT) LOCATION &lt;span class=&quot;code-quote&quot;&gt;&apos;file:/tmp/spark-warehouse/test_partition_value_tbl&apos;&lt;/span&gt;;

-- This DDL should fail but worked: - SPARK-40798
ALTER TABLE test_partition_value_tbl ADD PARTITION(age=&lt;span class=&quot;code-quote&quot;&gt;&apos;aaa&apos;&lt;/span&gt;); 

-- This DML should fail but worked: - SPARK-40988
INSERT INTO test_partition_value_tbl PARTITION(age=&lt;span class=&quot;code-quote&quot;&gt;&quot;aaa&quot;&lt;/span&gt;) VALUES (1, &lt;span class=&quot;code-quote&quot;&gt;&apos;ABC&apos;&lt;/span&gt;); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can we rename &lt;b&gt;SKIP_TYPE_VALIDATION_ON_ALTER_PARTITION&lt;/b&gt; variable and update the description of this variable?&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; We have a &lt;b&gt;spark.sql.sources.validatePartitionColumns&lt;/b&gt; &lt;font color=&quot;#172b4d&quot;&gt;parameter and used while reading the partition value.&#160; This variable only we can reuse?&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;After that, I will commit my test case.&lt;/p&gt;</comment>
                            <comment id="17633429" author="ulysses" created="Mon, 14 Nov 2022 01:37:38 +0000"  >&lt;p&gt;I think the name should be fine without change. You are actually altering partition when do insert a partitioned table, right ?&lt;/p&gt;</comment>
                            <comment id="17633471" author="rangareddy.avula@gmail.com" created="Mon, 14 Nov 2022 03:10:05 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ulysses&quot; class=&quot;user-hover&quot; rel=&quot;ulysses&quot;&gt;ulysses&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-40988&quot; title=&quot;Test case for insert partition should verify value &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-40988&quot;&gt;SPARK-40988&lt;/a&gt;&lt;/b&gt; is created for validating the value type while inserting a partition and &lt;b&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-40798&quot; title=&quot;Alter partition should verify value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-40798&quot;&gt;&lt;del&gt;SPARK-40798&lt;/del&gt;&lt;/a&gt;&lt;/b&gt; is created for validating the value while altering a partition. &lt;b&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-40798&quot; title=&quot;Alter partition should verify value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-40798&quot;&gt;&lt;del&gt;SPARK-40798&lt;/del&gt;&lt;/a&gt;&lt;/b&gt; Jira will fix the &lt;b&gt;validating partition value&lt;/b&gt; for both &lt;b&gt;insert&lt;/b&gt; and &lt;b&gt;alter&lt;/b&gt; partitions. So, we can use the &lt;b&gt;same configuration&lt;/b&gt; parameter for both &lt;b&gt;Insert&lt;/b&gt; and &lt;b&gt;Alter&lt;/b&gt; partitions?&lt;/p&gt;</comment>
                            <comment id="17633486" author="ulysses" created="Mon, 14 Nov 2022 03:55:56 +0000"  >&lt;p&gt;I think it&apos;s fine, the semantics of insert is `insert data` + `add partition`.&lt;/p&gt;</comment>
                            <comment id="17633488" author="rangareddy.avula@gmail.com" created="Mon, 14 Nov 2022 03:59:39 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ulysses&quot; class=&quot;user-hover&quot; rel=&quot;ulysses&quot;&gt;ulysses&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I will go ahead and add a test case for the &lt;b&gt;insert&lt;/b&gt; operation and update the Jira description.&#160;&lt;/p&gt;</comment>
                            <comment id="17633489" author="ulysses" created="Mon, 14 Nov 2022 04:00:55 +0000"  >&lt;p&gt;thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rangareddy.avula%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;rangareddy.avula@gmail.com&quot;&gt;rangareddy.avula@gmail.com&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17634614" author="apachespark" created="Wed, 16 Nov 2022 02:58:49 +0000"  >&lt;p&gt;User &apos;HyukjinKwon&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/38667&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/38667&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z19dag:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>