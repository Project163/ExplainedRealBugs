<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:17:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-3399] Test for PySpark should ignore HADOOP_CONF_DIR and YARN_CONF_DIR</title>
                <link>https://issues.apache.org/jira/browse/SPARK-3399</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Some tests for PySpark make temporary files on /tmp of local file system but if environment variable HADOOP_CONF_DIR or YARN_CONF_DIR is set in spark-env.sh, tests expects temporary files are on FileSystem configured in core-site.xml even though actual files are on local file system.&lt;/p&gt;

&lt;p&gt;I think, we should ignore HADOOP_CONF_DIR and YARN_CONF_DIR.&lt;br/&gt;
If we need those variables in some tests, we should set those variables in such tests specially.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12739024">SPARK-3399</key>
            <summary>Test for PySpark should ignore HADOOP_CONF_DIR and YARN_CONF_DIR</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sarutak">Kousuke Saruta</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Sep 2014 06:33:15 +0000</created>
                <updated>Fri, 5 Sep 2014 18:07:10 +0000</updated>
                            <resolved>Fri, 5 Sep 2014 18:07:10 +0000</resolved>
                                                    <fixVersion>1.2.0</fixVersion>
                                    <component>PySpark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14121016" author="apachespark" created="Thu, 4 Sep 2014 06:40:35 +0000"  >&lt;p&gt;User &apos;sarutak&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/2270&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/2270&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14123143" author="davies" created="Fri, 5 Sep 2014 16:46:02 +0000"  >&lt;p&gt;Could you give an example to show the problem?&lt;/p&gt;</comment>
                            <comment id="14123167" author="sarutak" created="Fri, 5 Sep 2014 17:06:36 +0000"  >&lt;p&gt;Some test for pyspark, for instance rdd.py, use NamedTemporaryFile for creating input data.&lt;br/&gt;
NamedTemporaryFile creates temporary file on /tmp on local filesystem.&lt;br/&gt;
rdd.py is kicked by pyspark script in python/run-tests.&lt;br/&gt;
If we set environment variables HADOOP_CONF_DIR or YARN_CONF_DIR in spark-env.sh before testing, pyspark command load values from those variables.&lt;br/&gt;
After loading those value, Spark expects input data is on the filesystem configured by the environment variables.&lt;/p&gt;</comment>
                            <comment id="14123195" author="davies" created="Fri, 5 Sep 2014 17:26:50 +0000"  >&lt;p&gt;Thanks for the explain. I still can not reproduce the problem by putting  HADOOP_CONF_DIR and YARN_CONF_DIR into conf/spark-env.sh, run-tests can run successfully. Did I miss something?&lt;/p&gt;</comment>
                            <comment id="14123200" author="sarutak" created="Fri, 5 Sep 2014 17:31:06 +0000"  >&lt;p&gt;Ah, did you set fs.defaultFs to like hdfs:// in core-site.xml on the path  configured by HADOOP_CONF_DIR or YARN_CONF_DIR?&lt;/p&gt;</comment>
                            <comment id="14123214" author="davies" created="Fri, 5 Sep 2014 17:38:31 +0000"  >&lt;p&gt;Given fs.defaultFs as hdfs://,  saveAsTextFile() will save the files into HDFS, but other parts of code assume that the files are saved in local filesystem, then test cases failed. Do I understand correctly?&lt;/p&gt;

&lt;p&gt;Then this patch make sense, thanks to your work!&lt;/p&gt;</comment>
                            <comment id="14123237" author="sarutak" created="Fri, 5 Sep 2014 17:48:06 +0000"  >&lt;p&gt;Yes I meant like what you mentioned.&lt;/p&gt;</comment>
                            <comment id="14123279" author="joshrosen" created="Fri, 5 Sep 2014 18:07:10 +0000"  >&lt;p&gt;Issue resolved by pull request 2270&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/2270&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/2270&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 11 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1znzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326686">1.1.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>