<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:15:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-2341] loadLibSVMFile doesn&apos;t handle regression datasets</title>
                <link>https://issues.apache.org/jira/browse/SPARK-2341</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Many datasets exist in LibSVM format for regression tasks &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; but currently the loadLibSVMFile primitive doesn&apos;t handle regression datasets.&lt;/p&gt;

&lt;p&gt;More precisely, the LabelParser is either a MulticlassLabelParser or a BinaryLabelParser. What happens then is that the file is loaded but in multiclass mode : each target value is interpreted as a class name !&lt;/p&gt;

&lt;p&gt;The fix would be to write a RegressionLabelParser which converts target values to Double and plug it into the loadLibSVMFile routine.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.csie.ntu.edu.tw/~cjlin/libsvmtools/datasets/regression.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.csie.ntu.edu.tw/~cjlin/libsvmtools/datasets/regression.html&lt;/a&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="12724894">SPARK-2341</key>
            <summary>loadLibSVMFile doesn&apos;t handle regression datasets</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srowen">Sean R. Owen</assignee>
                                    <reporter username="eustache">Eustache</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Wed, 2 Jul 2014 07:21:40 +0000</created>
                <updated>Thu, 15 Jan 2015 09:08:38 +0000</updated>
                            <resolved>Thu, 31 Jul 2014 00:35:14 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>MLlib</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14049732" author="mengxr" created="Wed, 2 Jul 2014 08:23:08 +0000"  >&lt;p&gt;Just set `multiclass = true` to load double values.&lt;/p&gt;</comment>
                            <comment id="14049755" author="eustache" created="Wed, 2 Jul 2014 08:49:26 +0000"  >&lt;p&gt;I see that LabelParser with multiclass=true works for the regression&lt;br/&gt;
setting.&lt;/p&gt;

&lt;p&gt;What I fail to understand is how it is related to multiclass ? Is the&lt;br/&gt;
naming proper ?&lt;/p&gt;

&lt;p&gt;In any case shouldn&apos;t we provide a naming that explicitly mentions&lt;br/&gt;
regression ?&lt;/p&gt;



</comment>
                            <comment id="14049765" author="mengxr" created="Wed, 2 Jul 2014 09:07:47 +0000"  >&lt;p&gt;It is a little awkward to have both `regression` and `multiclass` as input arguments. I agree that a correct name should be `multiclassOrRegression` or `multiclassOrContinuous`. But it is certainly too long. We tried to make this clear in the doc:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;multiclass: whether the input labels contain more than two classes. If &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, any label with value greater than 0.5 will be mapped to 1.0, or 0.0 otherwise. So it works &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; both +1/-1 and 1/0 cases. If &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, the &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; value parsed directly from the label string will be used as the label value.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It would be good if we can improve the documentation to make it clearer. But for the API, I don&apos;t feel that it is necessary to change.&lt;/p&gt;</comment>
                            <comment id="14049778" author="eustache" created="Wed, 2 Jul 2014 09:33:25 +0000"  >&lt;p&gt;Ok then would you mind that I work on a doc improvement for this ?&lt;/p&gt;

&lt;p&gt;Perhaps a simple no-brainer like &quot;for regression set this to true&quot; could do&lt;br/&gt;
the job...&lt;/p&gt;

&lt;p&gt;Personally I think `multiclassOrRegression` is a good option but I let it&lt;br/&gt;
to you to decide &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14049942" author="srowen" created="Wed, 2 Jul 2014 14:17:25 +0000"  >&lt;p&gt;I&apos;ve been a bit uncomfortable with how the MLlib API conflates categorical values and numbers, since they aren&apos;t numbers in general. Treating them as numbers is a convenience in some cases, and common in papers, but feels like suboptimal software design &amp;#8211; should a user have to convert categoricals to some numeric representation? To me it invites confusion, and this is one symptom. So I am not sure &quot;multiclass&quot; should mean &quot;parse target as double&quot; to begin with?&lt;/p&gt;

&lt;p&gt;OK, it&apos;s not the issue here. But we&apos;re on the subject of an experimental API subject to change with an example of something related that could be improved along the way, and it&apos;s my #1 wish for MLlib at the moment. I&apos;d really like to work on a change to try to accommodate classes as, say, strings at least, and not presume doubles. But I am trying to figure out if anyone agrees with that. &lt;/p&gt;</comment>
                            <comment id="14051151" author="mengxr" created="Thu, 3 Jul 2014 07:39:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srowen&quot; class=&quot;user-hover&quot; rel=&quot;srowen&quot;&gt;srowen&lt;/a&gt; Instead of taking string labels directly, we can provide tools to convert them to integer labels (still Double typed). LIBLINEAR/LIBSVM do not support string labels either, but they are still among the top choices for logistic regression and SVM.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eustache&quot; class=&quot;user-hover&quot; rel=&quot;eustache&quot;&gt;eustache&lt;/a&gt; Unfortunately, the argument name in Scala is part of the API and loadLibSVMFile is not marked as experimental. So we cannot update the argument name to `multiclassOrRegression`, which is too long anyway. Could you update the doc and change the first sentence from &quot;multiclass: whether the input labels contain more than two classes&quot; to &quot;multiclass: whether the input labels are continuous-valued (for regression) or contain more than two classes&quot;? &lt;/p&gt;</comment>
                            <comment id="14051194" author="srowen" created="Thu, 3 Jul 2014 08:42:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mengxr&quot; class=&quot;user-hover&quot; rel=&quot;mengxr&quot;&gt;mengxr&lt;/a&gt; For regression, rather than further overloading &quot;multiclass&quot; to mean &quot;regression&quot;, how about modifying the argument to take on three values (as an enum, string, etc.) to distinguish the three modes. The current method would stay, but be deprecated.&lt;/p&gt;

&lt;p&gt;multiclass=false is for binary classification. libsvm uses &quot;0&quot; and &quot;1&quot; (or any ints) for binary classification. But this parses it as a real number, and rounds to 0/1. (Is that was libsvm does?) Maybe it&apos;s a convenient semantic overload when you want to transform a continuous value to a 0/1 indicator, but is that implied by libsvm format or just a transformation the caller should make? multiclass=true treats libsvm integer labels as doubles, but not continuous values. It seems like inviting more confusion to have this mode also double as the mode for parsing labels that are continuous values as continuous values.&lt;/p&gt;

&lt;p&gt;libsvm is widely used but it&apos;s old; I don&apos;t think it&apos;s file format from long ago should necessarily inform API design now. There are other serializations besides libsvm (plain CSV for instance) and other algorithms (random decision forests).&lt;/p&gt;

&lt;p&gt;You can make utilities to convert classes to numbers for benefit of the implementation on the front, and I&apos;ll have to in order to use this. Maybe we can start there &amp;#8211; at least if a utility is in the project people aren&apos;t all reinventing this in order to use an SVM with actual labels. The caller carries around a dictionary then to do the reverse mapping. The model seems like the place to hold that info, if in fact internally it converts classes to some other representation. Maybe the need would be clearer once the utility is created.&lt;/p&gt;

&lt;p&gt;As you say I&apos;m concerned that the API is already locked down early and some of these changes are going to be viewed as infeasible just for that reason.&lt;/p&gt;</comment>
                            <comment id="14063155" author="mengxr" created="Wed, 16 Jul 2014 05:04:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srowen&quot; class=&quot;user-hover&quot; rel=&quot;srowen&quot;&gt;srowen&lt;/a&gt; Using enum or string sounds good. As you already knew, using string may be better because of Python.&lt;/p&gt;

&lt;p&gt;Rounding is used because people use either +1/-1 or 1/0 for binary classification in LIBSVM and we require 1/0 in MLlib. Actually the +1/-1 is the only corner case I wanted to cover when multiclass=false. We added LIBSVM support because there are many commonly used datasets we can download from LIBSVM/LIBLINEAR website and other places. It is easier for people to test MLlib&apos;s algorithms.&lt;/p&gt;

&lt;p&gt;It would be nice if you have free cycles to implement a method that convert classes to numbers. For the long term, I&apos;m thinking about for each dataset, we can attach metadata that contains feature names, feature types, number of non-zeros, and for every categorical feature we have a value &amp;lt;-&amp;gt; &lt;/p&gt;
{0, 1, ...}
&lt;p&gt; map.&lt;/p&gt;</comment>
                            <comment id="14063419" author="srowen" created="Wed, 16 Jul 2014 12:12:51 +0000"  >&lt;p&gt;OK is it worth a pull request for changing the boolean multiclass argument to a string? I wanted to ask if that was your intent before I do that.&lt;/p&gt;

&lt;p&gt;libsvm format support is certainly important. It happens to have to encode non-numeric input as numbers. It need not be that way throughout MLlib, since it isn&apos;t that way in other input formats. (In this API method, it&apos;s pretty minor, since libsvm does by definition use this encoding.) So yes that would be great if data sets or API objects didn&apos;t assume that categorical data was numeric, but encoded type in the data set or even in the object model itself. I think it&apos;s mostly a design and type-safety argument &amp;#8211; same reason we have String instead of just byte[] everywhere.&lt;/p&gt;

&lt;p&gt;Sure I will have to build this conversion at some point anyway and can share the result then.&lt;/p&gt;</comment>
                            <comment id="14066283" author="srowen" created="Fri, 18 Jul 2014 11:25:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mengxr&quot; class=&quot;user-hover&quot; rel=&quot;mengxr&quot;&gt;mengxr&lt;/a&gt; Here is an example of changing the argument:&lt;br/&gt;
&lt;a href=&quot;https://github.com/srowen/spark/commit/4a584ff9c0ada3d035d4668ecf22ec0e65ed16b6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/srowen/spark/commit/4a584ff9c0ada3d035d4668ecf22ec0e65ed16b6&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I won&apos;t open a PR yet. I think this is a better API at this point, but the question is more whether the weight of deprecated methods are worth it or not. Another data point to keep in mind regarding how APIs can evolve.&lt;/p&gt;</comment>
                            <comment id="14078031" author="mengxr" created="Tue, 29 Jul 2014 17:26:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srowen&quot; class=&quot;user-hover&quot; rel=&quot;srowen&quot;&gt;srowen&lt;/a&gt; For the doc in your version:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;If &lt;span class=&quot;code-quote&quot;&gt;&quot;multiclass&quot;&lt;/span&gt;, the numeric value parsed directly from the label string will be used as the label value.
If &lt;span class=&quot;code-quote&quot;&gt;&quot;continuous&quot;&lt;/span&gt;, the &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; value parsed directly from the string will be used as the label.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Would user feel confused since the two lines are essentially the same?&lt;/p&gt;

&lt;p&gt;Another possible solution is that we parse the labels into doubles and remove the `multiclass` argument. Users can perform a map to transform the labels into binary 0/1 if needed.&lt;/p&gt;</comment>
                            <comment id="14078040" author="srowen" created="Tue, 29 Jul 2014 17:33:04 +0000"  >&lt;p&gt;To me, it&apos;s less confusing than writing &quot;multiclass&quot; for a regression problem. Yes I also think it could be simpler to remove multiclass; the idea I suppose is that binary is merely a special case of that, and the caller can write the required transformation to 0/1 if needed. At least the caller is aware of the transformation and I think that&apos;s good. At least, there you just let numbers be numbers and let downstream code figure out whether the number is a continuous value, or the number is a category.&lt;/p&gt;</comment>
                            <comment id="14078945" author="mengxr" created="Wed, 30 Jul 2014 05:48:03 +0000"  >&lt;p&gt;That sounds good. Do you mind creating a PR? We can deprecate the existing ones with `multiclass` and add a warning in the doc about the +1/-1 case.&lt;/p&gt;</comment>
                            <comment id="14079704" author="apachespark" created="Wed, 30 Jul 2014 18:26:22 +0000"  >&lt;p&gt;User &apos;srowen&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/1663&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1663&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14080306" author="mengxr" created="Thu, 31 Jul 2014 00:35:14 +0000"  >&lt;p&gt;Issue resolved by pull request 1663&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/1663&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1663&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>403077</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 16 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xdiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>403132</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326686">1.1.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>