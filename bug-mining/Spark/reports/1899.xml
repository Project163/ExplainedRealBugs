<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:27:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-7758] Failed to start thrift server when metastore is postgre sql</title>
                <link>https://issues.apache.org/jira/browse/SPARK-7758</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;I am using today&apos;s master branch to start thrift server with setting metastore to postgre sql, and it shows error like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;15/05/20 20:43:57 DEBUG Schema: DROP TABLE DELETEME1432125837197 CASCADE
15/05/20 20:43:57 ERROR Datastore: Error thrown executing DROP TABLE DELETEME1432125837197 CASCADE : Syntax error: Encountered &lt;span class=&quot;code-quote&quot;&gt;&quot;CASCADE&quot;&lt;/span&gt; at line 1, column 34.
java.sql.SQLSyntaxErrorException: Syntax error: Encountered &lt;span class=&quot;code-quote&quot;&gt;&quot;CASCADE&quot;&lt;/span&gt; at line 1, column 34.
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)
	at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)
	at org.datanucleus.store.rdbms.datasource.dbcp.DelegatingStatement.execute(DelegatingStatement.java:264)
	at org.datanucleus.store.rdbms.datasource.dbcp.DelegatingStatement.execute(DelegatingStatement.java:264)`

But it works well with earlier master branch (on 7th, April).
After printing their debug level log, I found current branch tries to connect with derby but didn&apos;t know why, maybe the big reconstructure in sql module cause &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; issue.

The Datastore shows in current branch:
15/05/20 20:43:57 DEBUG Datastore: ======================= Datastore =========================
15/05/20 20:43:57 DEBUG Datastore: StoreManager : &lt;span class=&quot;code-quote&quot;&gt;&quot;rdbms&quot;&lt;/span&gt; (org.datanucleus.store.rdbms.RDBMSStoreManager)
15/05/20 20:43:57 DEBUG Datastore: Datastore : read-write
15/05/20 20:43:57 DEBUG Datastore: Schema Control : AutoCreate(None), Validate(None)
15/05/20 20:43:57 DEBUG Datastore: Query Languages : [JDOQL, JPQL, SQL, STOREDPROC]
15/05/20 20:43:57 DEBUG Datastore: Queries : Timeout=0
15/05/20 20:43:57 DEBUG Datastore: ===========================================================
15/05/20 20:43:57 DEBUG Datastore: Datastore Adapter : org.datanucleus.store.rdbms.adapter.PostgreSQLAdapter
15/05/20 20:43:57 DEBUG Datastore: Datastore : name=&lt;span class=&quot;code-quote&quot;&gt;&quot;Apache Derby&quot;&lt;/span&gt; version=&lt;span class=&quot;code-quote&quot;&gt;&quot;10.10.1.1 - (1458268)&quot;&lt;/span&gt;
15/05/20 20:43:57 DEBUG Datastore: Datastore Driver : name=&lt;span class=&quot;code-quote&quot;&gt;&quot;Apache Derby Embedded JDBC Driver&quot;&lt;/span&gt; version=&lt;span class=&quot;code-quote&quot;&gt;&quot;10.10.1.1 - (1458268)&quot;&lt;/span&gt;
15/05/20 20:43:57 DEBUG Datastore: Primary Connection Factory : URL[jdbc:derby:;databaseName=/tmp/spark-8b38e943-01e5-4341-9c92-7c250f2dec96/metastore;create=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;]
15/05/20 20:43:57 DEBUG Datastore: Secondary Connection Factory : URL[jdbc:derby:;databaseName=/tmp/spark-8b38e943-01e5-4341-9c92-7c250f2dec96/metastore;create=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;]
15/05/20 20:43:57 DEBUG Datastore: Datastore Identifiers : factory=&lt;span class=&quot;code-quote&quot;&gt;&quot;datanucleus1&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;=UPPERCASE catalog= schema=SPARK
15/05/20 20:43:57 DEBUG Datastore: Supported Identifier Cases : &lt;span class=&quot;code-quote&quot;&gt;&quot;MixedCase&quot;&lt;/span&gt; UPPERCASE &lt;span class=&quot;code-quote&quot;&gt;&quot;MixedCase-Sensitive&quot;&lt;/span&gt; 
15/05/20 20:43:57 DEBUG Datastore: Supported Identifier Lengths (max) : Table=128 Column=128 Constraint=128 Index=128 Delimiter=&quot;
15/05/20 20:43:57 DEBUG Datastore: Support &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Identifiers in DDL : catalog=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; schema=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
15/05/20 20:43:57 DEBUG Datastore: Datastore : checkTableViewExistence, rdbmsConstraintCreateMode=DataNucleus, initialiseColumnInfo=ALL
15/05/20 20:43:57 DEBUG Datastore: Support Statement Batching : yes (max-batch-size=50)
15/05/20 20:43:57 DEBUG Datastore: Queries : Results direction=forward, type=forward-only, concurrency=read-only
15/05/20 20:43:57 DEBUG Datastore: Java-Types : string-&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-length=255
15/05/20 20:43:57 DEBUG Datastore: JDBC-Types : [id=2009], BLOB, CLOB, TIME, DATE, BOOLEAN, VARCHAR, DECIMAL, NUMERIC, CHAR, BINARY, FLOAT, LONGVARBINARY, VARBINARY, JAVA_OBJECT
15/05/20 20:43:57 DEBUG Datastore: ===========================================================

The Datastore in earlier master branch:
15/05/20 20:18:10 DEBUG Datastore: ======================= Datastore =========================
15/05/20 20:18:10 DEBUG Datastore: StoreManager : &lt;span class=&quot;code-quote&quot;&gt;&quot;rdbms&quot;&lt;/span&gt; (org.datanucleus.store.rdbms.RDBMSStoreManager)
15/05/20 20:18:10 DEBUG Datastore: Datastore : read-write
15/05/20 20:18:10 DEBUG Datastore: Schema Control : AutoCreate(None), Validate(None)
15/05/20 20:18:10 DEBUG Datastore: Query Languages : [JDOQL, JPQL, SQL, STOREDPROC]
15/05/20 20:18:10 DEBUG Datastore: Queries : Timeout=0
15/05/20 20:18:10 DEBUG Datastore: ===========================================================
15/05/20 20:18:10 DEBUG Datastore: Datastore Adapter : org.datanucleus.store.rdbms.adapter.PostgreSQLAdapter
15/05/20 20:18:10 DEBUG Datastore: Datastore : name=&lt;span class=&quot;code-quote&quot;&gt;&quot;GaussDB&quot;&lt;/span&gt; version=&lt;span class=&quot;code-quote&quot;&gt;&quot;9.2.1&quot;&lt;/span&gt;
15/05/20 20:18:10 DEBUG Datastore: Datastore Driver : name=&lt;span class=&quot;code-quote&quot;&gt;&quot;PostgreSQL Native Driver&quot;&lt;/span&gt; version=&lt;span class=&quot;code-quote&quot;&gt;&quot;PostgreSQL 9.1 JDBC4 (build 902)&quot;&lt;/span&gt;
15/05/20 20:18:10 DEBUG Datastore: Primary Connection Factory : URL[jdbc:postgresql:&lt;span class=&quot;code-comment&quot;&gt;//9.91.88.98:20051/sparkhivemeta]
&lt;/span&gt;15/05/20 20:18:10 DEBUG Datastore: Secondary Connection Factory : URL[jdbc:postgresql:&lt;span class=&quot;code-comment&quot;&gt;//9.91.88.98:20051/sparkhivemeta]
&lt;/span&gt;15/05/20 20:18:10 DEBUG Datastore: Datastore Identifiers : factory=&lt;span class=&quot;code-quote&quot;&gt;&quot;datanucleus1&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;=UPPERCASE schema=PUBLIC
15/05/20 20:18:10 DEBUG Datastore: Supported Identifier Cases : &lt;span class=&quot;code-quote&quot;&gt;&quot;MixedCase&quot;&lt;/span&gt; UPPERCASE &lt;span class=&quot;code-quote&quot;&gt;&quot;MixedCase-Sensitive&quot;&lt;/span&gt; 
15/05/20 20:18:10 DEBUG Datastore: Supported Identifier Lengths (max) : Table=63 Column=63 Constraint=63 Index=63 Delimiter=&quot;
15/05/20 20:18:10 DEBUG Datastore: Support &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Identifiers in DDL : catalog=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; schema=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
15/05/20 20:18:10 DEBUG Datastore: Datastore : checkTableViewExistence, rdbmsConstraintCreateMode=DataNucleus, initialiseColumnInfo=ALL
15/05/20 20:18:10 DEBUG Datastore: Support Statement Batching : yes (max-batch-size=50)
15/05/20 20:18:10 DEBUG Datastore: Queries : Results direction=forward, type=forward-only, concurrency=read-only
15/05/20 20:18:10 DEBUG Datastore: Java-Types : string-&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-length=255
15/05/20 20:18:10 DEBUG Datastore: JDBC-Types : BLOB, CLOB, TIMESTAMP, TIME, STRUCT, DATE, [id=3838], ARRAY, VARCHAR, NUMERIC, CHAR, REAL, LONGVARCHAR, LONGVARBINARY, SMALLINT, INTEGER, BIGINT, BIT, DOUBLE, DISTINCT
15/05/20 20:18:10 DEBUG Datastore: ===========================================================
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I pasted the two logs and hive-site.xml here, the launch command is just &quot;./start-thriftserver.sh&quot;.&lt;/p&gt;

&lt;p&gt;Hope someone can help solve this. THanks!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12831376">SPARK-7758</key>
            <summary>Failed to start thrift server when metastore is postgre sql</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="WangTaoTheTonic">Tao Wang</assignee>
                                    <reporter username="WangTaoTheTonic">Tao Wang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 May 2015 13:24:26 +0000</created>
                <updated>Fri, 22 May 2015 21:44:59 +0000</updated>
                            <resolved>Fri, 22 May 2015 21:44:45 +0000</resolved>
                                    <version>1.4.0</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14553791" author="apachespark" created="Thu, 21 May 2015 07:37:07 +0000"  >&lt;p&gt;User &apos;WangTaoTheTonic&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/6314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/6314&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14556880" author="marmbrus" created="Fri, 22 May 2015 21:44:45 +0000"  >&lt;p&gt;Issue resolved by pull request 6314&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/6314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/6314&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12831377">SPARK-7759</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12734130" name="hive-site.xml" size="1404" author="WangTaoTheTonic" created="Wed, 20 May 2015 13:30:39 +0000"/>
                            <attachment id="12734158" name="with error.log" size="272168" author="WangTaoTheTonic" created="Wed, 20 May 2015 17:04:39 +0000"/>
                            <attachment id="12734159" name="with no error.log" size="556734" author="WangTaoTheTonic" created="Wed, 20 May 2015 17:04:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 26 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ezlb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12329359">1.4.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>