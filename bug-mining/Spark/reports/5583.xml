<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:58:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-23438] DStreams could lose blocks with WAL enabled when driver crashes</title>
                <link>https://issues.apache.org/jira/browse/SPARK-23438</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;There is a race condition introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-11141&quot; title=&quot;Batching of ReceivedBlockTrackerLogEvents for efficient WAL writes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-11141&quot;&gt;&lt;del&gt;SPARK-11141&lt;/del&gt;&lt;/a&gt; which could cause data loss.&lt;/p&gt;

&lt;p&gt;This affects&#160;all versions since 1.6.0.&lt;/p&gt;

&lt;p&gt;Problematic situation:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Start streaming job with 2 receivers with WAL enabled.&lt;/li&gt;
	&lt;li&gt;Receiver 1 receives a block and does the following&lt;/li&gt;
&lt;/ol&gt;


&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;Writes a&#160;BlockAdditionEvent into WAL&lt;/li&gt;
		&lt;li&gt;Puts the block into it&apos;s received block queue with ID 1&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;Receiver 2 receives a block and does the following&lt;/li&gt;
&lt;/ol&gt;


&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;Writes a&#160;BlockAdditionEvent into WAL&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;Spark allocates all blocks from it&apos;s&#160;received block queue and writes&#160;AllocatedBlocks(IDs=(1)) into WAL&lt;/li&gt;
	&lt;li&gt;Driver crashes&lt;/li&gt;
	&lt;li&gt;New Driver recovers from WAL&lt;/li&gt;
	&lt;li&gt;Realise block with ID 2 never processed&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13138823">SPARK-23438</key>
            <summary>DStreams could lose blocks with WAL enabled when driver crashes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gsomogyi">Gabor Somogyi</assignee>
                                    <reporter username="gsomogyi">Gabor Somogyi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Feb 2018 16:34:40 +0000</created>
                <updated>Mon, 26 Feb 2018 16:58:57 +0000</updated>
                            <resolved>Mon, 26 Feb 2018 16:58:57 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>2.0.3</fixVersion>
                    <fixVersion>2.1.3</fixVersion>
                    <fixVersion>2.2.2</fixVersion>
                    <fixVersion>2.3.1</fixVersion>
                    <fixVersion>2.4.0</fixVersion>
                                    <component>DStreams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16365861" author="gsomogyi" created="Thu, 15 Feb 2018 16:35:45 +0000"  >&lt;p&gt;I&apos;m working on that.&lt;/p&gt;</comment>
                            <comment id="16365928" author="apachespark" created="Thu, 15 Feb 2018 17:01:04 +0000"  >&lt;p&gt;User &apos;gaborgsomogyi&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/20620&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/20620&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3q8if:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>