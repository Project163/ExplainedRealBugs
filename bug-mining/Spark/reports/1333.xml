<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:22:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-5153] Flaky test: o.a.s.streaming.kafka.ReliableKafkaStreamSuite</title>
                <link>https://issues.apache.org/jira/browse/SPARK-5153</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;I have seen several irrelevant PR failed on this test&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/25254/consoleFull&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/25254/consoleFull&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/25248/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/25248/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/25251/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/25251/console&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12765843">SPARK-5153</key>
            <summary>Flaky test: o.a.s.streaming.kafka.ReliableKafkaStreamSuite</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tdas">Tathagata Das</assignee>
                                    <reporter username="codingcat">Nan Zhu</reporter>
                        <labels>
                            <label>flaky-test</label>
                    </labels>
                <created>Thu, 8 Jan 2015 19:56:10 +0000</created>
                <updated>Thu, 30 Apr 2015 15:58:03 +0000</updated>
                            <resolved>Tue, 3 Feb 2015 21:47:08 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.2</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>DStreams</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14270655" author="jerryshao" created="Fri, 9 Jan 2015 06:51:22 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=CodingCat&quot; class=&quot;user-hover&quot; rel=&quot;codingcat&quot;&gt;CodingCat&lt;/a&gt;, thanks a lot for your reporting, mainly the problem is caused in here:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    eventually(timeout(1000 milliseconds), interval(100 milliseconds)) {
      &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt;(
        server.apis.leaderCache.keySet.contains(TopicAndPartition(topic, partition)),
        s&lt;span class=&quot;code-quote&quot;&gt;&quot;Partition [$topic, $partition] metadata not propagated after timeout&quot;&lt;/span&gt;
      )
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which trying to verify if topic is created and propagated accordingly, currently the longest timeout is 1000 ms, which might be fine for local test, but probably it will be timeout if the machine is in high load. Actually I&apos;ve tested in my local machine for several rounds, this issue is hard to reproduce.&lt;/p&gt;

&lt;p&gt;I think a possible way is to increase the timeout (1000 ms) to a large value.&lt;/p&gt;
</comment>
                            <comment id="14270964" author="codingcat" created="Fri, 9 Jan 2015 12:43:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saisai_shao&quot; class=&quot;user-hover&quot; rel=&quot;saisai_shao&quot;&gt;saisai_shao&lt;/a&gt;, yeah, I got up early to check whether the test case can pass in a lightly loaded jenkins, &lt;/p&gt;

&lt;p&gt;Same code, just rebased&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/25323/consoleFull&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/25323/consoleFull&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It passed...&lt;/p&gt;

&lt;p&gt;So I agree with you that it&apos;s just caused by the overloaded server&lt;/p&gt;

&lt;p&gt;but I&apos;m not sure prolonging the timeout duration is the right way to do...as it&apos;s still possible to have a &quot;super overloaded&quot; server to make that timeout again...&lt;/p&gt;</comment>
                            <comment id="14271047" author="jerryshao" created="Fri, 9 Jan 2015 14:16:53 +0000"  >&lt;p&gt;Yes, I agree with you that increasing the timeout may not be an elegant solution, always have chance to meet the timeout. Actually this code is referred to Kafka&apos;s unit test, I will try to dig into the Kafka code to see if I can find a better solution.&lt;/p&gt;</comment>
                            <comment id="14303790" author="tdas" created="Tue, 3 Feb 2015 19:14:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jerryshao&quot; class=&quot;user-hover&quot; rel=&quot;jerryshao&quot;&gt;jerryshao&lt;/a&gt; Any elegant solution for this? Or should we ust increase the timeout?&lt;/p&gt;</comment>
                            <comment id="14303797" author="apachespark" created="Tue, 3 Feb 2015 19:22:05 +0000"  >&lt;p&gt;User &apos;tdas&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/4342&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/4342&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14303821" author="tdas" created="Tue, 3 Feb 2015 19:32:41 +0000"  >&lt;p&gt;I increased timeout to reduce flakiness. If you can think of a better solution, please send a PR&lt;/p&gt;</comment>
                            <comment id="14304423" author="jerryshao" created="Wed, 4 Feb 2015 01:03:13 +0000"  >&lt;p&gt;Hi TD, thanks a lot for your PR, currently I&apos;ve no better solution instead of increasing the timeout threshold, as I remembered in the Kafka unit test, it also deal with this way, I will check again to see if we can solve this with elegant way.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i243cf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>