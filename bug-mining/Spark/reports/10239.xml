<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:48:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-49968] The split function produces incorrect results with an empty regex and a limit</title>
                <link>https://issues.apache.org/jira/browse/SPARK-49968</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;The current behavior of the split function is as follows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
select split(&lt;span class=&quot;code-quote&quot;&gt;&apos;hello&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;h&apos;&lt;/span&gt;, 1) &lt;span class=&quot;code-comment&quot;&gt;// result is [&lt;span class=&quot;code-quote&quot;&gt;&quot;hello&quot;&lt;/span&gt;]
&lt;/span&gt;select split(&lt;span class=&quot;code-quote&quot;&gt;&apos;hello&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;-&apos;&lt;/span&gt;, 1) &lt;span class=&quot;code-comment&quot;&gt;// result is [&lt;span class=&quot;code-quote&quot;&gt;&quot;hello&quot;&lt;/span&gt;]
&lt;/span&gt;select split(&lt;span class=&quot;code-quote&quot;&gt;&apos;hello&apos;&lt;/span&gt;, &apos;&apos;, 1)  &lt;span class=&quot;code-comment&quot;&gt;// result is [&lt;span class=&quot;code-quote&quot;&gt;&quot;h&quot;&lt;/span&gt;]
&lt;/span&gt;
select split(&lt;span class=&quot;code-quote&quot;&gt;&apos;1A2A3A4&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;A&apos;&lt;/span&gt;, 3) &lt;span class=&quot;code-comment&quot;&gt;// result is [&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;2&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;3A4&quot;&lt;/span&gt;]
&lt;/span&gt;select split(&lt;span class=&quot;code-quote&quot;&gt;&apos;1A2A3A4&apos;&lt;/span&gt;, &apos;&apos;, 3)  &lt;span class=&quot;code-comment&quot;&gt;// result is [&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;A&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;2&quot;&lt;/span&gt;]&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However, according to the function&apos;s description, when the limit is greater than zero, the last element of the split result should contain the remaining part of the input string.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Arguments:
&#160; &#160; &#160; * str - a string expression to split.
&#160; &#160; &#160; * regex - a string representing a regular expression. The regex string should be a Java regular expression.
&#160; &#160; &#160; * limit - an integer expression which controls the number of times the regex is applied.
&#160; &#160; &#160; &#160; &#160; * limit &amp;gt; 0: The resulting array&lt;span class=&quot;code-quote&quot;&gt;&apos;s length will not be more than `limit`, and the resulting array&apos;&lt;/span&gt;s last entry will contain all input beyond the last matched regex.
&#160; &#160; &#160; &#160; &#160; * limit &amp;lt;= 0: `regex` will be applied as many times as possible, and the resulting array can be of any size. &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So, the split function produces incorrect results with an empty regex and a limit. The correct result should be:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
select split(&lt;span class=&quot;code-quote&quot;&gt;&apos;hello&apos;&lt;/span&gt;, &apos;&apos;, 1)    &lt;span class=&quot;code-comment&quot;&gt;// result is [&lt;span class=&quot;code-quote&quot;&gt;&quot;hello&quot;&lt;/span&gt;]
&lt;/span&gt;
select split(&lt;span class=&quot;code-quote&quot;&gt;&apos;1A2A3A4&apos;&lt;/span&gt;, &apos;&apos;, 3)  &lt;span class=&quot;code-comment&quot;&gt;// result is [&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;A&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;2A3A4&quot;&lt;/span&gt;]&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13595423">SPARK-49968</key>
            <summary>The split function produces incorrect results with an empty regex and a limit</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="deninelu123">Dejiu Lu</assignee>
                                    <reporter username="deninelu123">Dejiu Lu</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 15 Oct 2024 04:27:23 +0000</created>
                <updated>Fri, 25 Jul 2025 09:52:40 +0000</updated>
                            <resolved>Fri, 25 Jul 2025 09:52:40 +0000</resolved>
                                    <version>3.5.1</version>
                                    <fixVersion>4.1.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="18009908" author="cloud_fan" created="Fri, 25 Jul 2025 09:52:40 +0000"  >&lt;p&gt;Issue resolved by pull request 48470&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/48470&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/48470&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1rzj4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>