<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:20:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-4375] Assembly built with Maven is missing most of repl classes</title>
                <link>https://issues.apache.org/jira/browse/SPARK-4375</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;In particular, the ones in the split scala-2.10/scala-2.11 directories aren&apos;t being added&lt;/p&gt;</description>
                <environment></environment>
        <key id="12754946">SPARK-4375</key>
            <summary>Assembly built with Maven is missing most of repl classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sandyr">Sandy Ryza</assignee>
                                    <reporter username="sandyr">Sandy Ryza</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Nov 2014 01:56:29 +0000</created>
                <updated>Thu, 4 Dec 2014 04:08:57 +0000</updated>
                            <resolved>Fri, 14 Nov 2014 22:22:42 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14209217" author="sandyr" created="Thu, 13 Nov 2014 03:49:42 +0000"  >&lt;p&gt;The issue here is that the activeByDefault Maven option doesn&apos;t work as expected: it turns off all default profiles if any profile is given on the command line.  Circumventing this by removing the scala-2.10 profile and setting properties that get overridden when the scala-2.11 profile is turned on is pretty straightforward.  Except in a couple cases:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;When using Scala 2.11, we don&apos;t want to build the external/kafka module&lt;/li&gt;
	&lt;li&gt;When using Scala 2.11, we don&apos;t want the examples module to include the kafka module as a dependency&lt;/li&gt;
	&lt;li&gt;When using Scala 2.11, we don&apos;t want the examples module to include algebird as a dependency&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;As far as I can tell, there aren&apos;t Maven doesn&apos;t let us do these things in any ways that aren&apos;t deeply hacky.&lt;/p&gt;

&lt;p&gt;For dealing with the first issue, I had talked with Patrick about adding profiles for all of the external modules (including kafka).  An issue with this is that the examples depend on all these modules, so we would need to create separate modules or directories for the examples tied to each of these modules. &lt;/p&gt;

&lt;p&gt;Another thing we could do is add a &quot;scala-2.10-only&quot; profile that turns on building the kafka module and turns on the examples and examples dependencies that only work with scala-2.10.&lt;/p&gt;</comment>
                            <comment id="14209305" author="pwendell" created="Thu, 13 Nov 2014 05:36:27 +0000"  >&lt;p&gt;Hey Sandy,&lt;/p&gt;

&lt;p&gt;What about the following solution:&lt;/p&gt;

&lt;p&gt;1. For the repl case, we make the change you are suggesting and simply drop the need for -Pscala-2.10 to be there explicilty.&lt;br/&gt;
2. We no longer include the examples module or the external project modules by default in the build. There is a profile for each of the external projects and a profile for the examples.&lt;br/&gt;
2. When building the examples, you need to specify, somewhat pedantically, all of the necessary external sub projects and also -Pscala-2.10 or -Pscala-2.11. We can just give people the exact commands to run for 2.10 and 2.11 examples in the maven docs.&lt;/p&gt;

&lt;p&gt;The main benefits I see is that there is no regression for someone doing a package for Scala 2.10 which is the common case. If someone wants to build the examples, they need to go and do a bit of extra work to look up the new command, but it&apos;s mostly straightforward. Of course, all of our packages will still have the examples pre-built.&lt;/p&gt;</comment>
                            <comment id="14209314" author="pwendell" created="Thu, 13 Nov 2014 05:42:46 +0000"  >&lt;p&gt;One thing we could add onto that to make the user have to write less code is something like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;mvn &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; -Pexamples -Pscala-2.10 -Dexamples-2.10
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The internally we have profiles that are activated by the &quot;examples-2.10&quot; property and add the relevant modules that are required by the examples build in 2.10.&lt;/p&gt;</comment>
                            <comment id="14209388" author="sandyr" created="Thu, 13 Nov 2014 06:50:16 +0000"  >&lt;p&gt;This all makes sense to me.  Will put up a patch.&lt;/p&gt;</comment>
                            <comment id="14209389" author="prashant_" created="Thu, 13 Nov 2014 06:51:47 +0000"  >&lt;p&gt;I was inclined towards not removing that option for one reason, that it shows to our new and seasoned users that there is something like scala version that &quot;NOW&quot; that we have crossbuilding for scala versions, it needs to passed as a command line option. I am saying this realizing that kafka&apos;s exclusion is temporary and so on. About producing a helpful message we can probably break the maven build at validation step saying one of the profile is mandatory (If maven allows this, I think I can try !). Thoughts ?&lt;/p&gt;</comment>
                            <comment id="14209416" author="pwendell" created="Thu, 13 Nov 2014 07:25:12 +0000"  >&lt;p&gt;So my favorite option now is just moving the Kafka example to the kafka directory (it will still be on github, in the source code, etc). Then doing Sandy&apos;s trick for the repl project. And for the kafka project make it enabled with a flag only.&lt;/p&gt;</comment>
                            <comment id="14209433" author="apachespark" created="Thu, 13 Nov 2014 07:31:15 +0000"  >&lt;p&gt;User &apos;sryza&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/3239&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/3239&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14233894" author="apachespark" created="Thu, 4 Dec 2014 04:08:57 +0000"  >&lt;p&gt;User &apos;chenghao-intel&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/3595&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/3595&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22b8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327369">1.2.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>