<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:27:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-35259] ExternalBlockHandler metrics have misleading unit in the name</title>
                <link>https://issues.apache.org/jira/browse/SPARK-35259</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Today &lt;tt&gt;ExternalBlockHandler&lt;/tt&gt; exposes a few &lt;tt&gt;Timer&lt;/tt&gt; metrics:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-comment&quot;&gt;// Time latency &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; open block request in ms
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Timer openBlockRequestLatencyMillis = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Timer();
    &lt;span class=&quot;code-comment&quot;&gt;// Time latency &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; executor registration latency in ms
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Timer registerExecutorRequestLatencyMillis = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Timer();
    &lt;span class=&quot;code-comment&quot;&gt;// Time latency &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; processing fetch merged blocks meta request latency in ms
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Timer fetchMergedBlocksMetaLatencyMillis = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Timer();
    &lt;span class=&quot;code-comment&quot;&gt;// Time latency &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; processing finalize shuffle merge request latency in ms
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Timer finalizeShuffleMergeLatencyMillis = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Timer();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However these Dropwizard Timers by default use nanoseconds (&lt;a href=&quot;https://metrics.dropwizard.io/3.2.3/getting-started.html#timers&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;documentation&lt;/a&gt;). It&apos;s certainly possible to extract milliseconds from them, but it seems misleading to have millis in the name here.&lt;/p&gt;

&lt;p&gt;This causes &lt;tt&gt;YarnShuffleServiceMetrics&lt;/tt&gt; to expose confusingly-named metrics like &lt;tt&gt;openBlockRequestLatencyMillis_count&lt;/tt&gt; and &lt;tt&gt;openBlockRequestLatencyMillis_nanos&lt;/tt&gt;. It should be up to the metrics exporter, like &lt;tt&gt;YarnShuffleServiceMetrics&lt;/tt&gt;, to decide the unit and adjust the name accordingly, so the unit shouldn&apos;t be included in the name of the metric itself.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13375666">SPARK-35259</key>
            <summary>ExternalBlockHandler metrics have misleading unit in the name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="3" iconUrl="https://issues.apache.org/jira/images/icons/statuses/inprogress.png" description="This issue is being actively worked on at the moment by the assignee.">In Progress</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="xkrogen">Erik Krogen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Apr 2021 18:25:10 +0000</created>
                <updated>Mon, 26 Jul 2021 16:15:40 +0000</updated>
                                            <version>3.1.1</version>
                                                    <component>Shuffle</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17334932" author="xkrogen" created="Wed, 28 Apr 2021 18:37:43 +0000"  >&lt;p&gt;I have a PR for this but it is based on the PR for &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-35258&quot; title=&quot;Enhance ESS ExternalBlockHandler with additional block rate-based metrics and histograms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-35258&quot;&gt;&lt;del&gt;SPARK-35258&lt;/del&gt;&lt;/a&gt; so I will hold off posting it for now.&lt;/p&gt;

&lt;p&gt;While that goes through &amp;#8211; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rxin&quot; class=&quot;user-hover&quot; rel=&quot;rxin&quot;&gt;rxin&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlaskowski&quot; class=&quot;user-hover&quot; rel=&quot;jlaskowski&quot;&gt;jlaskowski&lt;/a&gt; &amp;#8211; I see you participated in the discussions on &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-16405&quot; title=&quot;Add metrics and source for external shuffle service&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-16405&quot;&gt;&lt;del&gt;SPARK-16405&lt;/del&gt;&lt;/a&gt; when these were added, do you have any comment here? Maybe I am missing something?&lt;/p&gt;</comment>
                            <comment id="17370790" author="apachespark" created="Mon, 28 Jun 2021 18:41:33 +0000"  >&lt;p&gt;User &apos;xkrogen&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/33116&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/33116&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17370792" author="apachespark" created="Mon, 28 Jun 2021 18:42:06 +0000"  >&lt;p&gt;User &apos;xkrogen&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/33116&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/33116&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17387452" author="apachespark" created="Mon, 26 Jul 2021 16:15:19 +0000"  >&lt;p&gt;User &apos;xkrogen&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/33523&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/33523&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17387454" author="apachespark" created="Mon, 26 Jul 2021 16:15:40 +0000"  >&lt;p&gt;User &apos;xkrogen&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/33524&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/33524&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13375663">SPARK-35258</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qk1s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>