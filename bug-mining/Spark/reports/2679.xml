<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:34:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-10046] Hive warehouse dir not set in current directory when not providing hive-site.xml</title>
                <link>https://issues.apache.org/jira/browse/SPARK-10046</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;When running spark in local environment (for unit-testing purpose) and without providing any `hive-site.xml, databases apart from the default one are created in Hive default hive.metastore.warehouse.dir and not in the current directory (as stated in &lt;span class=&quot;error&quot;&gt;&amp;#91;Spark docs&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://spark.apache.org/docs/latest/sql-programming-guide.html#hive-tables&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://spark.apache.org/docs/latest/sql-programming-guide.html#hive-tables&lt;/a&gt;)). This code snippet, tested with Spark 1.3.1 demonstrates the issue: &lt;a href=&quot;https://github.com/tmnd1991/spark-hive-bug/blob/master/src/main/scala/Main.scala&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tmnd1991/spark-hive-bug/blob/master/src/main/scala/Main.scala&lt;/a&gt; You cane see that the exception is thrown when executing the CREATE DATABASE STATEMENT, stating that is `Unable to create database path &lt;a href=&quot;file:/user/hive/warehouse/abc.db&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/user/hive/warehouse/abc.db&lt;/a&gt;, failed to create database abc)` where is `/user/hive/warehouse/abc.db`is not the current directory as stated in the docs.&lt;/p&gt;</description>
                <environment>&lt;p&gt;OS X 10.10.4&lt;br/&gt;
Java 1.7.0_79-b15&lt;br/&gt;
Scala 2.10.5&lt;br/&gt;
Spark 1.3.1&lt;/p&gt;</environment>
        <key id="12856524">SPARK-10046</key>
            <summary>Hive warehouse dir not set in current directory when not providing hive-site.xml</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xwu0226">Xin Wu</assignee>
                                    <reporter username="tmnd91">Antonio Murgia</reporter>
                        <labels>
                            <label>hive</label>
                            <label>spark</label>
                            <label>sparksql</label>
                    </labels>
                <created>Mon, 17 Aug 2015 05:51:56 +0000</created>
                <updated>Sun, 8 Nov 2015 20:29:11 +0000</updated>
                            <resolved>Sun, 8 Nov 2015 20:29:05 +0000</resolved>
                                    <version>1.3.1</version>
                                    <fixVersion>1.5.3</fixVersion>
                    <fixVersion>1.6.0</fixVersion>
                                    <component>Spark Core</component>
                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14981282" author="xwu0226" created="Thu, 29 Oct 2015 21:09:18 +0000"  >&lt;p&gt;The default HiveConf without hite-site.xml has &quot;hive.metastore.warehouse.dir=/user/hive/warehouse&quot;. and Spark&apos;s HiveContext creates database or tables through Hive Client. So it leaves it to Hive to decide where to create the database/table directory to.. which is &quot;/user/hive/warehouse&quot; by default. We can set the desired warehouse location within spark-shell or spark application, like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hiveContext.setConf(&lt;span class=&quot;code-quote&quot;&gt;&quot;hive.metastore.warehouse.dir&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/spark/warehouse&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;So maybe changing the document to align with the default behavior is an option? And let user know they may hit directory permission issue with the hive default?&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yhuai&quot; class=&quot;user-hover&quot; rel=&quot;yhuai&quot;&gt;yhuai&lt;/a&gt; What do you think? Thanks!&lt;/p&gt;</comment>
                            <comment id="14981305" author="yhuai" created="Thu, 29 Oct 2015 21:21:04 +0000"  >&lt;p&gt;I feel it is better to not use local dir as the parent dir of warehouse because a developer can have multiple spark projects and he/she wants to use the same set of table (without configuring this setting for every project). I do not have a very strong opinion though. We can first update the doc.&lt;/p&gt;</comment>
                            <comment id="14981331" author="xwu0226" created="Thu, 29 Oct 2015 21:33:53 +0000"  >&lt;p&gt;Ok. Let me update the doc then.&lt;/p&gt;</comment>
                            <comment id="14981435" author="apachespark" created="Thu, 29 Oct 2015 22:22:05 +0000"  >&lt;p&gt;User &apos;xwu0226&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/9365&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/9365&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 3 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2iznb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>