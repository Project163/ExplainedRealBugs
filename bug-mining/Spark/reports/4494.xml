<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:50:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-19307] SPARK-17387 caused ignorance of conf object passed to SparkContext:</title>
                <link>https://issues.apache.org/jira/browse/SPARK-19307</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;after patch &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-17387&quot; title=&quot;Creating SparkContext() from python without spark-submit ignores user conf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-17387&quot;&gt;&lt;del&gt;SPARK-17387&lt;/del&gt;&lt;/a&gt; was applied &amp;#8211; Sparkconf object is ignored when launching SparkContext programmatically via python from spark-submit:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/spark/blob/master/python/pyspark/context.py#L128:&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/blob/master/python/pyspark/context.py#L128:&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;in case when we are running python SparkContext(conf=xxx) from spark-submit:&lt;br/&gt;
    conf is set, conf._jconf is None ()&lt;/p&gt;

&lt;p&gt;    passed as arg  conf object is ignored (and used only when we are launching java_gateway).&lt;/p&gt;

&lt;p&gt;how to fix:&lt;/p&gt;

&lt;p&gt;python/pyspark/context.py:132&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;python/pyspark/context.py:132&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; conf is not None and conf._jconf is not None:
            # conf has been initialized in JVM properly, so use conf directly. This represent the
            # scenario that JVM has been launched before SparkConf is created (e.g. SparkContext is
            # created and then stopped, and we create a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SparkConf and &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SparkContext again)
            self._conf = conf
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;:
            self._conf = SparkConf(_jvm=SparkContext._jvm)
+             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; conf:
+                 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; key, value in conf.getAll():
+                     self._conf.set(key,value)
+                     print(key,value)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</description>
                <environment></environment>
        <key id="13036467">SPARK-19307</key>
            <summary>SPARK-17387 caused ignorance of conf object passed to SparkContext:</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vanzin">Marcelo Masiero Vanzin</assignee>
                                    <reporter username="yuriy_hupalo">yuriy_hupalo</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Jan 2017 07:57:33 +0000</created>
                <updated>Tue, 29 Aug 2017 22:48:18 +0000</updated>
                            <resolved>Wed, 25 Jan 2017 20:08:58 +0000</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.1.1</fixVersion>
                    <fixVersion>2.2.0</fixVersion>
                                    <component>PySpark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15831548" author="srowen" created="Fri, 20 Jan 2017 11:09:02 +0000"  >&lt;p&gt;CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zjffdu&quot; class=&quot;user-hover&quot; rel=&quot;zjffdu&quot;&gt;zjffdu&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15831569" author="yuriy_hupalo" created="Fri, 20 Jan 2017 11:30:25 +0000"  >&lt;p&gt;git diff&lt;/p&gt;</comment>
                            <comment id="15831572" author="srowen" created="Fri, 20 Jan 2017 11:31:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuriy_hupalo&quot; class=&quot;user-hover&quot; rel=&quot;yuriy_hupalo&quot;&gt;yuriy_hupalo&lt;/a&gt; we don&apos;t use patches. Please read &lt;a href=&quot;http://spark.apache.org/contributing.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://spark.apache.org/contributing.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15831609" author="yuriy_hupalo" created="Fri, 20 Jan 2017 11:59:28 +0000"  >&lt;p&gt;pull:&lt;br/&gt;
&lt;a href=&quot;https://github.com/yuriyhupalo/spark/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/yuriyhupalo/spark/pull/1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15831623" author="srowen" created="Fri, 20 Jan 2017 12:11:30 +0000"  >&lt;p&gt;That&apos;s also not how to make a pull request vs apache/spark, but, maybe best to hear from the author of the change to verify it before procdeding anyway.&lt;/p&gt;</comment>
                            <comment id="15835212" author="apachespark" created="Mon, 23 Jan 2017 21:13:04 +0000"  >&lt;p&gt;User &apos;vanzin&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/16682&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/16682&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16041040" author="irinatruong" created="Wed, 7 Jun 2017 15:23:51 +0000"  >&lt;p&gt;Is this available in 2.1.1? I could not find it in release notes.&lt;/p&gt;</comment>
                            <comment id="16138840" author="dongjoon" created="Wed, 23 Aug 2017 18:27:13 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=irinatruong&quot; class=&quot;user-hover&quot; rel=&quot;irinatruong&quot;&gt;irinatruong&lt;/a&gt;.&lt;br/&gt;
Yes. It&apos;s available in 2.1.1. Maybe, the release note is missing due to the missing fixed version.&lt;/p&gt;</comment>
                            <comment id="16146280" author="ctsai" created="Tue, 29 Aug 2017 22:42:32 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am using 2.2.0 but find that command line &lt;tt&gt;-&lt;del&gt;conf&lt;/tt&gt; arguments are still not available when the &lt;tt&gt;SparkConf()&lt;/tt&gt; object is instantiated. As a result, I can&apos;t check what has already been set using the command line &lt;tt&gt;&lt;/del&gt;-conf&lt;/tt&gt; arguments in my driver and set additional configuration using &lt;tt&gt;setIfMissing&lt;/tt&gt;. Instead, &lt;tt&gt;setIfMissing&lt;/tt&gt; effectively overwrites whatever is passed in through the CLI.&lt;/p&gt;

&lt;p&gt;For example, if my job is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;# debug.py

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; pyspark

&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; __name__ == &lt;span class=&quot;code-quote&quot;&gt;&apos;__main__&apos;&lt;/span&gt;:
    print(pyspark.SparkConf()._jconf)    # is `None` but should include `--conf` arguments

    default_conf = {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;spark.dynamicAllocation.maxExecutors&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;36&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;spark.yarn.executor.memoryOverhead&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;1500&quot;&lt;/span&gt;,
    }

    # these are supposed to be set only &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not provided by the CLI args
    spark_conf = pyspark.SparkConf()
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (k, v) in default_conf.items():
        spark_conf.setIfMissing(k, v)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Running&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;spark-submit \
    --master yarn \
    --deploy-mode client \
    --conf spark.yarn.executor.memoryOverhead=2500 \
    --conf spark.dynamicAllocation.maxExecutors=128 \
    debug.py
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In 1.6.2 the CLI args take precedent, whereas in 2.2.0, &lt;tt&gt;SparkConf().getAll()&lt;/tt&gt; appears empty even though &lt;tt&gt;--conf&lt;/tt&gt; args were passed in already.&lt;/p&gt;

&lt;p&gt;Is this a separate problem or was this intended to be addressed by this ticket?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13038162">SPARK-19369</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13064517">SPARK-20362</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13002510">SPARK-17387</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13036425">SPARK-19301</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12848520" name="SPARK-19307.patch" size="602" author="yuriy_hupalo" created="Fri, 20 Jan 2017 11:30:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 11 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38z5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12338779">2.1.1</customfieldvalue>
    <customfieldvalue id="12338275">2.2.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>