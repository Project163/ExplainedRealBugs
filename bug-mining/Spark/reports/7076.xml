<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:15:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-31170] Spark Cli does not respect hive-site.xml and spark.sql.warehouse.dir</title>
                <link>https://issues.apache.org/jira/browse/SPARK-31170</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;In Spark CLI, we create a hive CliSessionState and it does not load the hive-site.xml. So the configurations in hive-site.xml will not take effects like other spark-hive integration apps.&lt;/p&gt;

&lt;p&gt;Also, the warehouse directory is not correctly picked. If the `default` database does not exist, the CliSessionState will create one during the first time it talks to the metastore. The `Location` of the default DB will be neither the value of spark.sql.warehousr.dir nor the user-specified value of hive.metastore.warehourse.dir, but the default value of hive.metastore.warehourse.dir which will always be `/user/hive/warehouse`.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13292104">SPARK-31170</key>
            <summary>Spark Cli does not respect hive-site.xml and spark.sql.warehouse.dir</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Qin Yao">Kent Yao 2</assignee>
                                    <reporter username="Qin Yao">Kent Yao 2</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Mar 2020 03:45:10 +0000</created>
                <updated>Fri, 11 Dec 2020 00:31:08 +0000</updated>
                            <resolved>Fri, 27 Mar 2020 04:26:04 +0000</resolved>
                                    <version>3.0.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17060998" author="cloud_fan" created="Tue, 17 Mar 2020 15:30:15 +0000"  >&lt;p&gt;Issue resolved by pull request 27933&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/27933&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/27933&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17062991" author="dongjoon" created="Thu, 19 Mar 2020 23:19:25 +0000"  >&lt;p&gt;This is reverted because this broke all `hive-1.2` profile Jenkins jobs (2 SBT/2 Maven).&lt;/p&gt;</comment>
                            <comment id="17068255" author="cloud_fan" created="Fri, 27 Mar 2020 04:26:04 +0000"  >&lt;p&gt;Issue resolved by pull request 27969&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/27969&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/27969&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17088997" author="nchammas" created="Tue, 21 Apr 2020 19:19:46 +0000"  >&lt;p&gt;Isn&apos;t this also an issue in Spark 2.4.5?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ spark-sql
...
20/04/21 15:12:26 INFO metastore: Mestastore configuration hive.metastore.warehouse.dir changed from /user/hive/warehouse to file:/Users/myusername/spark-warehouse
...
spark-sql&amp;gt; create table test(a &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;);
...
20/04/21 15:12:48 WARN HiveMetaStore: Location: file:/user/hive/warehouse/test specified &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; non-external table:test
20/04/21 15:12:48 INFO FileUtils: Creating directory &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; it doesn&apos;t exist: file:/user/hive/warehouse/test
Error in query: org.apache.hadoop.hive.ql.metadata.HiveException: MetaException(message:file:/user/hive/warehouse/test is not a directory or unable to create one);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If I understood the problem correctly, then the fix should perhaps also be backported to 2.4.x.&lt;/p&gt;</comment>
                            <comment id="17089274" author="cloud_fan" created="Wed, 22 Apr 2020 04:29:04 +0000"  >&lt;p&gt;Yea it&apos;s a long-standing bug, but the fix is non-trivial, seems a bit risky for 2.4. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dongjoon&quot; class=&quot;user-hover&quot; rel=&quot;dongjoon&quot;&gt;dongjoon&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=holdenkarau&quot; class=&quot;user-hover&quot; rel=&quot;holdenkarau&quot;&gt;holdenkarau&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13345319">SPARK-33740</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0clio:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>