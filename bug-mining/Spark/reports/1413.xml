<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:23:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-5669] Spark assembly includes incompatibly licensed libgfortran, libgcc code via JBLAS</title>
                <link>https://issues.apache.org/jira/browse/SPARK-5669</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Sorry for &quot;Blocker&quot;, but it&apos;s a license issue. The Spark assembly includes the following, from JBLAS:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;lib/
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Mac OS X/
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Mac OS X/x86_64/
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Mac OS X/x86_64/libjblas_arch_flavor.jnilib
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Mac OS X/x86_64/sse3/
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Mac OS X/x86_64/sse3/libjblas.jnilib
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Windows/
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Windows/x86/
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Windows/x86/libgfortran-3.dll
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Windows/x86/libgcc_s_dw2-1.dll
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Windows/x86/jblas_arch_flavor.dll
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Windows/x86/sse3/
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Windows/x86/sse3/jblas.dll
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Windows/amd64/
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Windows/amd64/libgfortran-3.dll
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Windows/amd64/jblas.dll
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Windows/amd64/libgcc_s_sjlj-1.dll
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Windows/amd64/jblas_arch_flavor.dll
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Linux/
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Linux/i386/
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Linux/i386/sse3/
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Linux/i386/sse3/libjblas.so
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Linux/i386/libjblas_arch_flavor.so
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Linux/amd64/
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Linux/amd64/sse3/
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Linux/amd64/sse3/libjblas.so
lib/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/Linux/amd64/libjblas_arch_flavor.so
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unfortunately the libgfortran and libgcc libraries included for Windows are not licensed in a way that&apos;s compatible with Spark and the AL2 &amp;#8211; LGPL at least.&lt;/p&gt;

&lt;p&gt;It&apos;s easy to exclude them. I&apos;m not clear what it does to running on Windows; I assume it can still work but the libs would have to be made available locally and put on the shared library path manually. I don&apos;t think there&apos;s a package manager as in Linux that would make it easily available. I&apos;m not able to test on Windows.&lt;/p&gt;

&lt;p&gt;If it doesn&apos;t work, the follow-up question is whether that means JBLAS has to be removed on the double, or treated as a known issue for 1.3.0.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12773253">SPARK-5669</key>
            <summary>Spark assembly includes incompatibly licensed libgfortran, libgcc code via JBLAS</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="srowen">Sean R. Owen</assignee>
                                    <reporter username="srowen">Sean R. Owen</reporter>
                        <labels>
                    </labels>
                <created>Sat, 7 Feb 2015 20:53:03 +0000</created>
                <updated>Sun, 22 Feb 2015 09:10:54 +0000</updated>
                            <resolved>Sun, 22 Feb 2015 09:10:54 +0000</resolved>
                                                                    <component>Build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14310931" author="apachespark" created="Sat, 7 Feb 2015 21:08:33 +0000"  >&lt;p&gt;User &apos;srowen&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/4453&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/4453&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14322082" author="mengxr" created="Sun, 15 Feb 2015 17:18:13 +0000"  >&lt;p&gt;PR #4453 resolves this issue for master and branch-1.3.&lt;/p&gt;</comment>
                            <comment id="14322084" author="srowen" created="Sun, 15 Feb 2015 17:22:49 +0000"  >&lt;p&gt;Since the follow-up change is to remove JBLAS, and that&apos;s covered in &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-5814&quot; title=&quot;Remove JBLAS from runtime dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-5814&quot;&gt;&lt;del&gt;SPARK-5814&lt;/del&gt;&lt;/a&gt;, shall we track the remaining work there?&lt;/p&gt;</comment>
                            <comment id="14325759" author="apachespark" created="Wed, 18 Feb 2015 11:39:33 +0000"  >&lt;p&gt;User &apos;srowen&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/4673&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/4673&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14326706" author="mengxr" created="Wed, 18 Feb 2015 23:11:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srowen&quot; class=&quot;user-hover&quot; rel=&quot;srowen&quot;&gt;srowen&lt;/a&gt; We will remove JBLAS from runtime in 1.4. But for branch-1.1 and branch-1.2, we should use your solution.&lt;/p&gt;</comment>
                            <comment id="14326940" author="mengxr" created="Thu, 19 Feb 2015 03:08:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srowen&quot; class=&quot;user-hover&quot; rel=&quot;srowen&quot;&gt;srowen&lt;/a&gt; I came across this &quot;GCC Runtime Library Exception&quot; today: &lt;a href=&quot;https://www.gnu.org/licenses/gcc-exception&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.gnu.org/licenses/gcc-exception&lt;/a&gt; but I haven&apos;t read it closely. It seems that we can include GCC binaries with a NOTICE file. If this is true, the issue becomes less critical.&lt;/p&gt;</comment>
                            <comment id="14327133" author="srowen" created="Thu, 19 Feb 2015 08:56:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mengxr&quot; class=&quot;user-hover&quot; rel=&quot;mengxr&quot;&gt;mengxr&lt;/a&gt; That just applies to GCC, right? it still wouldn&apos;t change the LGPL license for libgfortran. I also don&apos;t know if Spark qualifies given the definition of &quot;Eligible Compilation Process&quot;. My understanding is that without this exception, anything compiled by GCC would be copyleft, and this prevents that. I don&apos;t know if it generally allows redistribution of libgcc.&lt;/p&gt;</comment>
                            <comment id="14327953" author="mengxr" created="Thu, 19 Feb 2015 18:59:49 +0000"  >&lt;p&gt;GFortran is part of GCC (&lt;a href=&quot;https://gcc.gnu.org/wiki/GFortran&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gcc.gnu.org/wiki/GFortran&lt;/a&gt;) and hence the `libgfortran` library. In Apple&apos;s libgfortran header file (&lt;a href=&quot;http://www.opensource.apple.com/source/gcc/gcc-5484/libgfortran/libgfortran.h&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.opensource.apple.com/source/gcc/gcc-5484/libgfortran/libgfortran.h&lt;/a&gt;), I found the following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;As a special exception, &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; you link &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; library with other files,
   some of which are compiled with GCC, to produce an executable,
   &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; library does not by itself cause the resulting executable
   to be covered by the GNU General Public License.
   This exception does not however invalidate any other reasons why
   the executable file might be covered by the GNU General Public License.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The official one linked to the special exception page: &lt;a href=&quot;https://github.com/gcc-mirror/gcc/blob/master/libgfortran/libgfortran.h#L18&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/gcc-mirror/gcc/blob/master/libgfortran/libgfortran.h#L18&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14327997" author="srowen" created="Thu, 19 Feb 2015 19:33:58 +0000"  >&lt;p&gt;Aha, that&apos;s a good point. I&apos;m still not clear if this exception covers the usage in Spark, given the definition of &quot;Eligible Compilation Process&quot;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;A Compilation &lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt; is &lt;span class=&quot;code-quote&quot;&gt;&quot;Eligible&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; it is done using GCC, alone or with other GPL-compatible software, or &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; it is done without using any work based on GCC. ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here the Target Work is just put together with bundling. It doesn&apos;t seem quite in the spirit of this exemption as I understand it, but it&apos;s done without using any work based on GCC,&quot; at least I think.&lt;/p&gt;

&lt;p&gt;Well, regardless, my thinking was that there was already momentum to standardize on one library, so erring on the side of caution regarding licenses, and excising JBLAS also solves that problem. Also, since 1.3 we don&apos;t even use the native libraries anyway. Do you think it&apos;s best to continue down this road anyway, removing the native libs at least and likely JBLAS?&lt;/p&gt;</comment>
                            <comment id="14328010" author="mengxr" created="Thu, 19 Feb 2015 19:43:26 +0000"  >&lt;p&gt;Yes, we are going to remove JBLAS anyway in 1.4. Having a simple dependency tree is always a good thing. The problem is how we should proceed for branch-1.0/1.1/1.2. If we are covered by this exemption, maybe the only thing we need to do is to put a notice. This also applies to branch-1.3. We don&apos;t call native routines in Spark but it doesn&apos;t mean that users don&apos;t. With the current solution, users need to supply the origin JBLAS jar at runtime to use native routines, and I haven&apos;t tested whether it works or not. So if we are covered by this exemption, the best thing to do might be to revert the patch and put a notice.&lt;/p&gt;</comment>
                            <comment id="14328092" author="srowen" created="Thu, 19 Feb 2015 20:44:22 +0000"  >&lt;p&gt;I do find it confusing. I can see an argument that this is allowed on the grounds that it &lt;b&gt;does&lt;/b&gt; meet the exception because the target work is created &lt;b&gt;without&lt;/b&gt; GCC, and on the grounds that it is &lt;b&gt;not&lt;/b&gt; a Category X license case as described in &lt;a href=&quot;http://www.apache.org/legal/resolved.html#category-x&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/legal/resolved.html#category-x&lt;/a&gt; , even though the list calls out &quot;special exception to the GPL&quot; licenses, since the problem it identifies regarding derived works is &lt;b&gt;not&lt;/b&gt; part of the exception terms. &lt;/p&gt;

&lt;p&gt;If that&apos;s true, I don&apos;t even see that a notice is required.&lt;/p&gt;

&lt;p&gt;On that grounds, you could put back the binaries into 1.3. (Yes, it&apos;s a moot point in 1.4). Your reasoning is that it would prevent users from having to bring their own JBLAS if they already use JBLAS. But they&apos;ll have to in 1.4 anyway, and we&apos;ve always required programs to bring their own dependencies even if they&apos;re also used by Spark. I suppose I&apos;d favor taking that hit earlier than later, since it happens anyway, and if it lets us be a tiny bit more conservative about the licensing issue.&lt;/p&gt;

&lt;p&gt;But I do not feel strongly about it. Having said all that, would you rather proceed with just putting back the libs in 1.3?&lt;/p&gt;</comment>
                            <comment id="14328358" author="mengxr" created="Fri, 20 Feb 2015 00:09:11 +0000"  >&lt;p&gt;Agree that users should maintain their dependencies. In 1.3, if users want to use JBLAS to call native routines, there will be two JBLAS jars on the classpath, one with native libraries from user and one without from Spark. I don&apos;t know what would happen in this case. If we remove JBLAS in 1.4, there will be only one BLAS jar. Btw, I sent out a PR for &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-5814&quot; title=&quot;Remove JBLAS from runtime dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-5814&quot;&gt;&lt;del&gt;SPARK-5814&lt;/del&gt;&lt;/a&gt;. Maybe it is too late to merge it into branch-1.3 now, but it should be a good change. Let&apos;s ask &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pwendell&quot; class=&quot;user-hover&quot; rel=&quot;pwendell&quot;&gt;pwendell&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14328364" author="srowen" created="Fri, 20 Feb 2015 00:16:55 +0000"  >&lt;p&gt;It &lt;b&gt;should&lt;/b&gt; be fine on the grounds that the native libs are on the classpath and there is no conflict. That said I have not tried it. Are you proposing the new PR for 1.3.0? That would also solve the issue. If not, I would support it if you felt more comfortable restoring the native libs for 1.3.0 instead.&lt;/p&gt;</comment>
                            <comment id="14330377" author="apachespark" created="Sat, 21 Feb 2015 18:36:24 +0000"  >&lt;p&gt;User &apos;srowen&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/4715&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/4715&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14332087" author="srowen" created="Sun, 22 Feb 2015 09:10:54 +0000"  >&lt;p&gt;I think this is basically &apos;WontFix&apos; since the net result is that this change only went into master, on the grounds that there&apos;s an argument the licensing is OK. However this is made moot anyway by &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-5814&quot; title=&quot;Remove JBLAS from runtime dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-5814&quot;&gt;&lt;del&gt;SPARK-5814&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12775084">SPARK-5814</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25bwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>