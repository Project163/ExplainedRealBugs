<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:52:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-19925] SparkR spark.getSparkFiles fails on executor</title>
                <link>https://issues.apache.org/jira/browse/SPARK-19925</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;SparkR function &lt;tt&gt;spark.getSparkFiles&lt;/tt&gt; fails when it was called on executors. For examples, the following R code will fail. (See error logs in attachment.) &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;spark.addFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;./README.md&quot;&lt;/span&gt;)
seq &amp;lt;- seq(from = 1, to = 10, length.out = 5)
train &amp;lt;- function(seq) {
path &amp;lt;- spark.getSparkFiles(&lt;span class=&quot;code-quote&quot;&gt;&quot;README.md&quot;&lt;/span&gt;)
print(path)
}
spark.lapply(seq, train)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However, we can run successfully with Scala API:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.spark.SparkFiles
sc.addFile(&quot;./README.md&#8221;)
sc.parallelize(Seq(0)).map{ _ =&amp;gt; SparkFiles.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;README.md&quot;&lt;/span&gt;)}.first()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and also successfully with Python API:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;from pyspark &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; SparkFiles
sc.addFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;./README.md&quot;&lt;/span&gt;)
sc.parallelize(range(1)).map(lambda x: SparkFiles.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;README.md&quot;&lt;/span&gt;)).first()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13050311">SPARK-19925</key>
            <summary>SparkR spark.getSparkFiles fails on executor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yanboliang">Yanbo Liang</assignee>
                                    <reporter username="yanboliang">Yanbo Liang</reporter>
                        <labels>
                    </labels>
                <created>Sun, 12 Mar 2017 08:37:20 +0000</created>
                <updated>Wed, 22 Mar 2017 05:14:23 +0000</updated>
                            <resolved>Wed, 22 Mar 2017 05:14:23 +0000</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.1.1</fixVersion>
                    <fixVersion>2.2.0</fixVersion>
                                    <component>SparkR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15906469" author="yanboliang" created="Sun, 12 Mar 2017 09:31:25 +0000"  >&lt;p&gt;The error was caused by &lt;tt&gt;spark.getSparkFiles&lt;/tt&gt; calling backend Java code, however, it can not connect to backend when it&apos;s on executors.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;spark.getSparkFiles &amp;lt;- function(fileName) {
  callJStatic(&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.spark.SparkFiles&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;get&quot;&lt;/span&gt;, as.character(fileName))
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think we should have special handling when it was called on executors, following the PySpark implementation:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    def getRootDirectory(cls):
        &quot;&quot;&quot;
        Get the root directory that contains files added through
        C{SparkContext.addFile()}.
        &quot;&quot;&quot;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; cls._is_running_on_worker:
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; cls._root_directory
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;:
            # This will have to change &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we support multiple SparkContexts:
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; cls._sc._jvm.org.apache.spark.SparkFiles.getRootDirectory()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15906569" author="yanboliang" created="Sun, 12 Mar 2017 16:05:52 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=felixcheung&quot; class=&quot;user-hover&quot; rel=&quot;felixcheung&quot;&gt;felixcheung&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shivaram&quot; class=&quot;user-hover&quot; rel=&quot;shivaram&quot;&gt;shivaram&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sunrui&quot; class=&quot;user-hover&quot; rel=&quot;sunrui&quot;&gt;sunrui&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15907366" author="apachespark" created="Mon, 13 Mar 2017 12:33:02 +0000"  >&lt;p&gt;User &apos;yanboliang&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/17274&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/17274&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12857515" name="error-log" size="18478" author="yanboliang" created="Sun, 12 Mar 2017 09:25:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3bagf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12338275">2.2.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>