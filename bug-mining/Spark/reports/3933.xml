<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:46:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-12666] spark-shell --packages cannot load artifacts which are publishLocal&apos;d by SBT</title>
                <link>https://issues.apache.org/jira/browse/SPARK-12666</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Symptom:&lt;/p&gt;

&lt;p&gt;I cloned the latest master of &lt;tt&gt;spark-redshift&lt;/tt&gt;, then used &lt;tt&gt;sbt publishLocal&lt;/tt&gt; to publish it to my Ivy cache. When I tried running &lt;tt&gt;./bin/spark-shell --packages com.databricks:spark-redshift_2.10:0.5.3-SNAPSHOT&lt;/tt&gt; to load this dependency into &lt;tt&gt;spark-shell&lt;/tt&gt;, I received the following cryptic error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.RuntimeException: [unresolved dependency: com.databricks#spark-redshift_2.10;0.5.3-SNAPSHOT: configuration not found in com.databricks#spark-redshift_2.10;0.5.3-SNAPSHOT: &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&apos;&lt;/span&gt;. It was required from org.apache.spark#spark-submit-parent;1.0 &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;]
	at org.apache.spark.deploy.SparkSubmitUtils$.resolveMavenCoordinates(SparkSubmit.scala:1009)
	at org.apache.spark.deploy.SparkSubmit$.prepareSubmitEnvironment(SparkSubmit.scala:286)
	at org.apache.spark.deploy.SparkSubmit$.submit(SparkSubmit.scala:153)
	at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:120)
	at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think the problem here is that Spark is declaring a dependency on the spark-redshift artifact using the &lt;tt&gt;default&lt;/tt&gt; Ivy configuration. Based on my admittedly limited understanding of Ivy, the default configuration will be the only configuration defined in an Ivy artifact if that artifact defines no other configurations. Thus, for Maven artifacts I think the default configuration will end up mapping to Maven&apos;s regular JAR dependency (i.e. Maven artifacts don&apos;t declare Ivy configurations so they implicitly have the &lt;tt&gt;default&lt;/tt&gt; configuration) but for Ivy artifacts I think we can run into trouble when loading artifacts which explicitly define their own configurations, since those artifacts might not have a configuration named &lt;tt&gt;default&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I spent a bit of time playing around with the SparkSubmit code to see if I could fix this but wasn&apos;t able to completely resolve the issue.&lt;/p&gt;

&lt;p&gt;/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brkyvz&quot; class=&quot;user-hover&quot; rel=&quot;brkyvz&quot;&gt;brkyvz&lt;/a&gt; (ping me offline and I can walk you through the repo in person, if you&apos;d like)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12927917">SPARK-12666</key>
            <summary>spark-shell --packages cannot load artifacts which are publishLocal&apos;d by SBT</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bryanc">Bryan Cutler</assignee>
                                    <reporter username="joshrosen">Josh Rosen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Jan 2016 05:45:26 +0000</created>
                <updated>Fri, 30 Sep 2016 00:03:44 +0000</updated>
                            <resolved>Sat, 20 Aug 2016 20:47:26 +0000</resolved>
                                    <version>1.5.1</version>
                    <version>1.6.0</version>
                                    <fixVersion>2.0.1</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                                    <component>Spark Submit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15308950" author="bryanc" created="Wed, 1 Jun 2016 00:23:12 +0000"  >&lt;p&gt;This seems like it is more of an issue with SBT publishLocal, as it publishes an ivy.xml file without a &quot;default&quot; conf.  Like this, for example&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;ivy-module version=&quot;2.0&quot; xmlns:e=&quot;http://ant.apache.org/ivy/extra&quot;&amp;gt;
        ...
        &amp;lt;configurations&amp;gt;
                &amp;lt;conf name=&quot;compile&quot; visibility=&quot;public&quot; description=&quot;&quot;/&amp;gt;
                &amp;lt;conf name=&quot;runtime&quot; visibility=&quot;public&quot; description=&quot;&quot; extends=&quot;compile&quot;/&amp;gt;
                &amp;lt;conf name=&quot;test&quot; visibility=&quot;public&quot; description=&quot;&quot; extends=&quot;runtime&quot;/&amp;gt;
                &amp;lt;conf name=&quot;provided&quot; visibility=&quot;public&quot; description=&quot;&quot;/&amp;gt;
                &amp;lt;conf name=&quot;optional&quot; visibility=&quot;public&quot; description=&quot;&quot;/&amp;gt;
                &amp;lt;conf name=&quot;it&quot; visibility=&quot;public&quot; description=&quot;&quot; extends=&quot;test&quot;/&amp;gt;
                &amp;lt;conf name=&quot;sources&quot; visibility=&quot;public&quot; description=&quot;&quot;/&amp;gt;
                &amp;lt;conf name=&quot;docs&quot; visibility=&quot;public&quot; description=&quot;&quot;/&amp;gt;
                &amp;lt;conf name=&quot;pom&quot; visibility=&quot;public&quot; description=&quot;&quot;/&amp;gt;
        &amp;lt;/configurations&amp;gt;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If this file had a conf name=&quot;default&quot;, or if there were no confs defined an implicit &quot;default&quot; would be used.  But since it is missing, there is an error when resolving.  I think it&apos;s reasonable for Spark to expect a &quot;default&quot; conf to exist, but we can make it a bit more robust to handle cases like this where it doesn&apos;t exist.  I&apos;ll post a PR for this.&lt;/p&gt;</comment>
                            <comment id="15308965" author="apachespark" created="Wed, 1 Jun 2016 00:35:03 +0000"  >&lt;p&gt;User &apos;BryanCutler&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/13428&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/13428&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15429508" author="joshrosen" created="Sat, 20 Aug 2016 20:47:26 +0000"  >&lt;p&gt;Fixed for 2.0.1 and 2.1.0 by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bryanc&quot; class=&quot;user-hover&quot; rel=&quot;bryanc&quot;&gt;bryanc&lt;/a&gt;&apos;s PR.&lt;/p&gt;</comment>
                            <comment id="15534475" author="atemerev" created="Fri, 30 Sep 2016 00:03:44 +0000"  >&lt;p&gt;If you came here for a workaround for 2.0.0 (like I did), here it is: publish your artifacts using sbt publishM2 instead of publish-local. This way they will end up in local Maven (and not Ivy2) repository, which works fine.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 7 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2qwz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>