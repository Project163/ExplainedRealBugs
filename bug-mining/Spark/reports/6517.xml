<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:05:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-26985] Test &quot;access only some column of the all of columns &quot; fails on big endian</title>
                <link>https://issues.apache.org/jira/browse/SPARK-26985</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;While&#160;running tests on Apache Spark v2.3.2 with AdoptJDK on big endian, I am observing test failures for 2 Suites of Project SQL.&lt;br/&gt;
 1. InMemoryColumnarQuerySuite&lt;br/&gt;
 2. DataFrameTungstenSuite&lt;br/&gt;
 In both the cases test &quot;access only some column of the all of columns&quot; fails due to mismatch in the final assert.&lt;/p&gt;

&lt;p&gt;Observed that the data obtained after df.cache() is&#160;causing&#160;the error. Please find attached the log with the details.&#160;&lt;/p&gt;

&lt;p&gt;cache() works perfectly fine if double and&#160; float values are not in picture.&lt;/p&gt;

&lt;p&gt;Inside test !!!!!!- access only some column of the all of columns *** FAILED ***&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux Ubuntu 16.04&#160;&lt;/p&gt;

&lt;p&gt;openjdk version &quot;1.8.0_202&quot;&lt;br/&gt;
OpenJDK Runtime Environment (build 1.8.0_202-b08)&lt;br/&gt;
Eclipse OpenJ9 VM (build openj9-0.12.1, JRE 1.8.0 64-Bit Compressed References 20190205_218 (JIT enabled, AOT enabled)&lt;br/&gt;
OpenJ9 - 90dd8cb40&lt;br/&gt;
OMR - d2f4534b&lt;br/&gt;
JCL - d002501a90 based on jdk8u202-b08)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</environment>
        <key id="13217792">SPARK-26985</key>
            <summary>Test &quot;access only some column of the all of columns &quot; fails on big endian</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ketan22584">ketan kunde</assignee>
                                    <reporter username="Anuja">Anuja Jakhade</reporter>
                        <labels>
                            <label>BigEndian</label>
                            <label>correctness</label>
                    </labels>
                <created>Mon, 25 Feb 2019 10:43:35 +0000</created>
                <updated>Mon, 12 Dec 2022 18:10:36 +0000</updated>
                            <resolved>Tue, 25 Jun 2019 13:35:53 +0000</resolved>
                                    <version>2.3.2</version>
                                    <fixVersion>2.4.5</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16780116" author="gurwls223" created="Thu, 28 Feb 2019 05:24:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Anuja&quot; class=&quot;user-hover&quot; rel=&quot;Anuja&quot;&gt;Anuja&lt;/a&gt;, I am sure there&apos;re multiple JIRAs related to big endian. Mind adding links to the JIRAs in this JIRA?&lt;/p&gt;</comment>
                            <comment id="16782066" author="srowen" created="Fri, 1 Mar 2019 21:02:52 +0000"  >&lt;p&gt;Same as &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-26940&quot; title=&quot;Observed greater deviation on big endian platform for SingletonReplSuite test case&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-26940&quot;&gt;&lt;del&gt;SPARK-26940&lt;/del&gt;&lt;/a&gt;; until it&apos;s reproducible on a standard JDK, I don&apos;t think it&apos;s at all clear it&apos;s not due to this custom JDK implementation. I don&apos;t see evidence it has to do with endian-ness.&lt;/p&gt;</comment>
                            <comment id="16789392" author="anuja" created="Mon, 11 Mar 2019 10:50:38 +0000"  >&lt;p&gt;I did tried with OpenJDK. However same behavior is observed.&#160;&lt;/p&gt;

&lt;p&gt;The test fails with the same error.&#160;&lt;/p&gt;</comment>
                            <comment id="16789396" author="anuja" created="Mon, 11 Mar 2019 10:51:55 +0000"  >&lt;p&gt;I did tried with OpenJDK. However same behavior is observed.&#160;&lt;/p&gt;

&lt;p&gt;The test fails with the same error.&#160;&lt;/p&gt;</comment>
                            <comment id="16795931" author="anuja" created="Tue, 19 Mar 2019 10:11:37 +0000"  >&lt;p&gt;Hi&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srowen&quot; class=&quot;user-hover&quot; rel=&quot;srowen&quot;&gt;srowen&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hyukjin.kwon&quot; class=&quot;user-hover&quot; rel=&quot;hyukjin.kwon&quot;&gt;hyukjin.kwon&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have observed that after changing the ByteOrder in &lt;em&gt;&lt;b&gt;&lt;a href=&quot;https://github.com/apache/spark/blob/v2.3.2/sql/core/src/main/java/org/apache/spark/sql/execution/vectorized/OnHeapColumnVector.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;OnHeapColumnVector.java&lt;/a&gt;&lt;/b&gt;&lt;/em&gt;&#160;to&#160;&#160;&lt;b&gt;ByteOrder.BIG_ENDIAN&lt;/b&gt; the tests passes.&lt;/p&gt;

&lt;p&gt;Because the float and double data is read properly. However in that case some tests of Paraquet Module fails. e.x:&#160;&lt;b&gt;ParquetIOSuite.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Is there any specific reason why we are using ByteOrder format as LITTLE_ENDIAN even when the&#160;bigEndianPlatform is true?&lt;/p&gt;

&lt;p&gt;Because the above fix however, doesn&apos;t work on all the test cases and the behavior of&#160;&lt;b&gt;ParquetIOSuite and DataFrameTungsten/InMemoryColumnarQuerySuite&lt;/b&gt; compliment each other.&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;ParquetIOSuite&lt;/b&gt;&#160; passes only when&#160;&#160;ByteOrder&#160; is set to&#160;ByteOrder.LITTLE_ENDIAN&#160;and&#160;&lt;b&gt;DataFrameTungsten/InMemoryColumnarQuerySuite&lt;/b&gt;&#160;passes only when ByteOrder&#160; is set to&#160;ByteOrder.BIG_ENDIAN.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16858318" author="apachespark" created="Fri, 7 Jun 2019 05:52:08 +0000"  >&lt;p&gt;User &apos;ketank-new&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/24788&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/24788&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16872357" author="srowen" created="Tue, 25 Jun 2019 13:35:53 +0000"  >&lt;p&gt;Resolved by &lt;a href=&quot;https://github.com/apache/spark/pull/24861&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/24861&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13304654">SPARK-31703</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12960003" name="DataFrameTungstenSuite.txt" size="1578" author="Anuja" created="Mon, 25 Feb 2019 10:45:23 +0000"/>
                            <attachment id="12960004" name="InMemoryColumnarQuerySuite.txt" size="2538" author="Anuja" created="Mon, 25 Feb 2019 10:45:23 +0000"/>
                            <attachment id="12960165" name="access only some column of the all of columns.txt" size="4047" author="Anuja" created="Tue, 26 Feb 2019 10:09:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z001mo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>