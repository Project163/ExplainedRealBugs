<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:23:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-5557] Servlet API classes now missing after jetty shading</title>
                <link>https://issues.apache.org/jira/browse/SPARK-5557</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;the log:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;5/02/03 19:06:39 INFO spark.HttpServer: Starting HTTP Server
Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/servlet/http/HttpServletResponse
	at org.apache.spark.HttpServer.org$apache$spark$HttpServer$$doStart(HttpServer.scala:75)
	at org.apache.spark.HttpServer$$anonfun$1.apply(HttpServer.scala:62)
	at org.apache.spark.HttpServer$$anonfun$1.apply(HttpServer.scala:62)
	at org.apache.spark.util.Utils$$anonfun$startServiceOnPort$1.apply$mcVI$sp(Utils.scala:1774)
	at scala.collection.immutable.Range.foreach$mVc$sp(Range.scala:141)
	at org.apache.spark.util.Utils$.startServiceOnPort(Utils.scala:1765)
	at org.apache.spark.HttpServer.start(HttpServer.scala:62)
	at org.apache.spark.repl.SparkIMain.&amp;lt;init&amp;gt;(SparkIMain.scala:130)
	at org.apache.spark.repl.SparkILoop$SparkILoopInterpreter.&amp;lt;init&amp;gt;(SparkILoop.scala:185)
	at org.apache.spark.repl.SparkILoop.createInterpreter(SparkILoop.scala:214)
	at org.apache.spark.repl.SparkILoop$$anonfun$org$apache$spark$repl$SparkILoop$$process$1.apply$mcZ$sp(SparkILoop.scala:946)
	at org.apache.spark.repl.SparkILoop$$anonfun$org$apache$spark$repl$SparkILoop$$process$1.apply(SparkILoop.scala:942)
	at org.apache.spark.repl.SparkILoop$$anonfun$org$apache$spark$repl$SparkILoop$$process$1.apply(SparkILoop.scala:942)
	at scala.tools.nsc.util.ScalaClassLoader$.savingContextLoader(ScalaClassLoader.scala:135)
	at org.apache.spark.repl.SparkILoop.org$apache$spark$repl$SparkILoop$$process(SparkILoop.scala:942)
	at org.apache.spark.repl.SparkILoop.process(SparkILoop.scala:1039)
	at org.apache.spark.repl.Main$.main(Main.scala:31)
	at org.apache.spark.repl.Main.main(Main.scala)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.spark.deploy.SparkSubmit$.launch(SparkSubmit.scala:403)
	at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:77)
	at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)
Caused by: java.lang.ClassNotFoundException: javax.servlet.http.HttpServletResponse
	at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:425)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:358)
	... 25 more

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12772001">SPARK-5557</key>
            <summary>Servlet API classes now missing after jetty shading</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pwendell">Patrick Wendell</assignee>
                                    <reporter username="gq">Guoqiang Li</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Feb 2015 11:10:32 +0000</created>
                <updated>Fri, 6 Feb 2015 02:15:15 +0000</updated>
                            <resolved>Fri, 6 Feb 2015 02:15:15 +0000</resolved>
                                    <version>1.3.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                                    <component>Spark Core</component>
                        <due></due>
                            <votes>5</votes>
                                    <watches>13</watches>
                                                                                                                <comments>
                            <comment id="14303332" author="nemccarthy" created="Tue, 3 Feb 2015 14:24:08 +0000"  >&lt;p&gt;I am seeing similar when trying to launch spark standalone master via start-master.sh.&lt;/p&gt;

&lt;p&gt;Built via;&lt;br/&gt;
./make-distribution.sh --name mapr3 --skip-java-test --tgz -Pmapr3 -Phive -Phive-thriftserver -Phive-0.12.0 &lt;/p&gt;

&lt;p&gt;Stack trace:&lt;/p&gt;


&lt;p&gt;15/02/04 08:53:56 INFO slf4j.Slf4jLogger: Slf4jLogger started&lt;br/&gt;
15/02/04 08:53:56 INFO Remoting: Starting remoting&lt;br/&gt;
15/02/04 08:53:56 INFO Remoting: Remoting started; listening on addresses :&lt;span class=&quot;error&quot;&gt;&amp;#91;akka.tcp://sparkMaster@hadoop-009:7077&amp;#93;&lt;/span&gt;&lt;br/&gt;
15/02/04 08:53:56 INFO Remoting: Remoting now listens on addresses: &lt;span class=&quot;error&quot;&gt;&amp;#91;akka.tcp://sparkMaster@hadoop-009:7077&amp;#93;&lt;/span&gt;&lt;br/&gt;
...skipping...&lt;br/&gt;
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)&lt;br/&gt;
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)&lt;br/&gt;
        at java.lang.reflect.Constructor.newInstance(Constructor.java:526)&lt;br/&gt;
        at akka.util.Reflect$.instantiate(Reflect.scala:66)&lt;br/&gt;
        at akka.actor.ArgsReflectConstructor.produce(Props.scala:352)&lt;br/&gt;
        at akka.actor.Props.newActor(Props.scala:252)&lt;br/&gt;
        at akka.actor.ActorCell.newActor(ActorCell.scala:552)&lt;br/&gt;
        at akka.actor.ActorCell.create(ActorCell.scala:578)&lt;br/&gt;
        ... 9 more&lt;br/&gt;
Caused by: java.lang.NoClassDefFoundError: javax/servlet/FilterRegistration&lt;br/&gt;
        at org.spark-project.jetty.servlet.ServletContextHandler.&amp;lt;init&amp;gt;(ServletContextHandler.java:136)&lt;br/&gt;
        at org.spark-project.jetty.servlet.ServletContextHandler.&amp;lt;init&amp;gt;(ServletContextHandler.java:129)&lt;br/&gt;
        at org.spark-project.jetty.servlet.ServletContextHandler.&amp;lt;init&amp;gt;(ServletContextHandler.java:98)&lt;br/&gt;
        at org.apache.spark.ui.JettyUtils$.createServletHandler(JettyUtils.scala:96)&lt;br/&gt;
        at org.apache.spark.ui.JettyUtils$.createServletHandler(JettyUtils.scala:87)&lt;br/&gt;
        at org.apache.spark.ui.WebUI.attachPage(WebUI.scala:67)&lt;br/&gt;
        at org.apache.spark.deploy.master.ui.MasterWebUI.initialize(MasterWebUI.scala:40)&lt;br/&gt;
        at org.apache.spark.deploy.master.ui.MasterWebUI.&amp;lt;init&amp;gt;(MasterWebUI.scala:36)&lt;br/&gt;
        at org.apache.spark.deploy.master.Master.&amp;lt;init&amp;gt;(Master.scala:95)&lt;br/&gt;
        ... 18 more&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: javax.servlet.FilterRegistration&lt;br/&gt;
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)&lt;br/&gt;
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:425)&lt;br/&gt;
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:358)&lt;br/&gt;
        ... 27 more&lt;/p&gt;
</comment>
                            <comment id="14304252" author="bmabey" created="Tue, 3 Feb 2015 22:58:35 +0000"  >&lt;p&gt;I ran a git bisect and this is the first bad commit:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/spark/commit/7930d2bef0e2c7f62456e013124455061dfe6dc8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/commit/7930d2bef0e2c7f62456e013124455061dfe6dc8&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The commit adds a Jetty dep so that seems like the culprit.&lt;/p&gt;

</comment>
                            <comment id="14306714" author="nemccarthy" created="Thu, 5 Feb 2015 06:11:16 +0000"  >&lt;p&gt;Any ideas on what needs to be done to fix this? &lt;/p&gt;</comment>
                            <comment id="14308346" author="pwendell" created="Fri, 6 Feb 2015 00:36:02 +0000"  >&lt;p&gt;I can send a fix for this shortly. It also works fine if you build with Hadoop 2 support.&lt;/p&gt;</comment>
                            <comment id="14308374" author="kostas" created="Fri, 6 Feb 2015 00:56:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pwendell&quot; class=&quot;user-hover&quot; rel=&quot;pwendell&quot;&gt;pwendell&lt;/a&gt; recommended this which did the trick:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;diff --git a/core/pom.xml b/core/pom.xml
index 2dc5f74..f03ec47 100644
--- a/core/pom.xml
+++ b/core/pom.xml
@@ -132,6 +132,11 @@
       &amp;lt;artifactId&amp;gt;jetty-servlet&amp;lt;/artifactId&amp;gt;
       &amp;lt;scope&amp;gt;compile&amp;lt;/scope&amp;gt;
     &amp;lt;/dependency&amp;gt;
+    &amp;lt;dependency&amp;gt;
+      &amp;lt;groupId&amp;gt;org.eclipse.jetty.orbit&amp;lt;/groupId&amp;gt;
+      &amp;lt;artifactId&amp;gt;javax.servlet&amp;lt;/artifactId&amp;gt;
+      &amp;lt;version&amp;gt;3.0.0.v201112011016&amp;lt;/version&amp;gt;
+    &amp;lt;/dependency&amp;gt;
 
     &amp;lt;dependency&amp;gt;
       &amp;lt;groupId&amp;gt;org.apache.commons&amp;lt;/groupId&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14308378" author="apachespark" created="Fri, 6 Feb 2015 00:58:45 +0000"  >&lt;p&gt;User &apos;pwendell&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/4411&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/4411&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14308391" author="pwendell" created="Fri, 6 Feb 2015 01:07:07 +0000"  >&lt;p&gt;I&apos;m sorry that this affected so many people for so long. It is not acceptable to have the master build not working for this many hours. Unfortunately our tests do not catch this for some reason.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12771925">SPARK-5547</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 41 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i254c7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>