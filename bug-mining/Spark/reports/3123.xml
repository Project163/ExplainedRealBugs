<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:38:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-13298] DAG visualization does not render correctly for jobs</title>
                <link>https://issues.apache.org/jira/browse/SPARK-13298</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Whenever I try to open the DAG for a job, I get something like this:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12787639/12787639_dag_viz.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Obviously the svg doesn&apos;t get resized, but if I resize it manually, only the first of four stages in the DAG is shown. &lt;/p&gt;

&lt;p&gt;The js console says (variable v is null in peg$c34):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-javascript&quot;&gt;Uncaught TypeError: Cannot read property &lt;span class=&quot;code-quote&quot;&gt;&apos;3&apos;&lt;/span&gt; of &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  peg$c34 @ graphlib-dot.min.js:1
  peg$parseidDef @ graphlib-dot.min.js:1
  peg$parseaList @ graphlib-dot.min.js:1
  peg$parseattrListBlock @ graphlib-dot.min.js:1
  peg$parseattrList @ graphlib-dot.min.js:1
  peg$parsenodeStmt @ graphlib-dot.min.js:1
  peg$parsestmt @ graphlib-dot.min.js:1
  peg$parsestmtList @ graphlib-dot.min.js:1
  peg$parsesubgraphStmt @ graphlib-dot.min.js:1
  peg$parsenodeIdOrSubgraph @ graphlib-dot.min.js:1
  peg$parseedgeStmt @ graphlib-dot.min.js:1
  peg$parsestmt @ graphlib-dot.min.js:1
  peg$parsestmtList @ graphlib-dot.min.js:1
  peg$parsesubgraphStmt @ graphlib-dot.min.js:1
  peg$parsenodeIdOrSubgraph @ graphlib-dot.min.js:1
  peg$parseedgeStmt @ graphlib-dot.min.js:1
  peg$parsestmt @ graphlib-dot.min.js:1
  peg$parsestmtList @ graphlib-dot.min.js:1
  peg$parsegraphStmt @ graphlib-dot.min.js:1
  parse @ graphlib-dot.min.js:2
  readOne @ graphlib-dot.min.js:2
  renderDot @ spark-dag-viz.js:281
  (anonymous &lt;span class=&quot;code-keyword&quot;&gt;function&lt;/span&gt;) @ spark-dag-viz.js:248
  (anonymous &lt;span class=&quot;code-keyword&quot;&gt;function&lt;/span&gt;) @ d3.min.js:
  3Y @ d3.min.js:1
  _a.each @ d3.min.js:3
  renderDagVizForJob @ spark-dag-viz.js:207
  renderDagViz @ spark-dag-viz.js:163
  toggleDagViz @ spark-dag-viz.js:100
  onclick @ ?id=2:153
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(tested in FIrefox 44.0.1 and Chromium 48.0.2564.103)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12938755">SPARK-13298</key>
            <summary>DAG visualization does not render correctly for jobs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zsxwing">Shixiong Zhu</assignee>
                                    <reporter username="telemort">Lucas Woltmann</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Feb 2016 09:40:08 +0000</created>
                <updated>Sun, 13 Mar 2016 12:05:03 +0000</updated>
                            <resolved>Tue, 23 Feb 2016 01:42:50 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>1.6.1</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Web UI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15148232" author="telemort" created="Tue, 16 Feb 2016 07:57:07 +0000"  >&lt;p&gt;Looks like .cache() breaks it.&lt;/p&gt;

&lt;p&gt;DAG without cache(): &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12788022/12788022_dag_full.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="15149457" author="zsxwing" created="Tue, 16 Feb 2016 22:39:50 +0000"  >&lt;p&gt;Do you have a reproducer?&lt;/p&gt;</comment>
                            <comment id="15152057" author="telemort" created="Thu, 18 Feb 2016 10:00:05 +0000"  >&lt;p&gt;Yes, of course:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;from pyspark &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; SparkContext
from pyspark.sql &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; SQLContext

sc = SparkContext(appName=&lt;span class=&quot;code-quote&quot;&gt;&quot;HierarchyGroup&quot;&lt;/span&gt;)
sqlContext = SQLContext(sc)

df = sqlContext.read.format(&lt;span class=&quot;code-quote&quot;&gt;&apos;com.databricks.spark.csv&apos;&lt;/span&gt;).options(header=&lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;&lt;/span&gt;, inferschema=&lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;&lt;/span&gt;).load(&lt;span class=&quot;code-quote&quot;&gt;&apos;cars.csv&apos;&lt;/span&gt;)

stats = df \
       .groupby(&lt;span class=&quot;code-quote&quot;&gt;&quot;year&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;make&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;model&quot;&lt;/span&gt;) \
       .pivot(&lt;span class=&quot;code-quote&quot;&gt;&quot;model&quot;&lt;/span&gt;) \
       .count() \
       .cache()

stats_elem1 = stats.groupby(&lt;span class=&quot;code-quote&quot;&gt;&quot;make&quot;&lt;/span&gt;).sum()
stats_elem1 = stats_elem1.unionAll(stats.groupby(&lt;span class=&quot;code-quote&quot;&gt;&quot;year&quot;&lt;/span&gt;).sum())

stats_elem1.show()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I use &lt;tt&gt;--packages com.databricks:spark-csv_2.10:1.3.0&lt;/tt&gt; with &lt;tt&gt;spark-submit&lt;/tt&gt;. The example csv can be found here (it&apos;s the standard example from the csv package documentation):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;wget https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/databricks/spark-csv/raw/master/src/test/resources/cars.csv&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15157495" author="ajbozarth" created="Mon, 22 Feb 2016 19:04:58 +0000"  >&lt;p&gt;Using your reproducer I saw the same js error but the dag image was blank, and removing cache() didn&apos;t change the result for me.&lt;br/&gt;
&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12789045/12789045_no-dag.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;br/&gt;
(Tested on Safari 9.0.3, Firefox ESR 38.6.1, Chrome 48.0.2564.116)&lt;/p&gt;

&lt;p&gt;I don&apos;t have time now, but if no one picks this up I may come back to this later.&lt;/p&gt;</comment>
                            <comment id="15157633" author="zsxwing" created="Mon, 22 Feb 2016 20:23:44 +0000"  >&lt;p&gt;Thanks for the reproducer. Just submit a PR to fix it.&lt;/p&gt;</comment>
                            <comment id="15157637" author="apachespark" created="Mon, 22 Feb 2016 20:24:04 +0000"  >&lt;p&gt;User &apos;zsxwing&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/11309&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11309&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15192324" author="todd_leo" created="Sun, 13 Mar 2016 12:05:03 +0000"  >&lt;p&gt;Pls also see &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-13645&quot; title=&quot;DAG Diagram not shown properly in Chrome&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-13645&quot;&gt;&lt;del&gt;SPARK-13645&lt;/del&gt;&lt;/a&gt;: DAG Diagram not shown properly in Chrome&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12948163">SPARK-13755</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12788022" name="dag_full.png" size="98411" author="telemort" created="Tue, 16 Feb 2016 07:57:25 +0000"/>
                            <attachment id="12787639" name="dag_viz.png" size="16115" author="telemort" created="Fri, 12 Feb 2016 09:40:38 +0000"/>
                            <attachment id="12789045" name="no-dag.png" size="32967" author="ajbozarth" created="Mon, 22 Feb 2016 19:04:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sriv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12334009">1.6.1</customfieldvalue>
    <customfieldvalue id="12329449">2.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>