<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:38:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-3650] Triangle Count handles reverse edges incorrectly</title>
                <link>https://issues.apache.org/jira/browse/SPARK-3650</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;The triangle count implementation assumes that edges are aligned in a canonical direction.  As stated in the documentation:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Note that the input graph should have its edges in canonical direction (i.e. the `sourceId` less than `destId`)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;However the TriangleCount algorithm does not verify that this condition holds and indeed even the unit tests exploits this functionality:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-scala&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;val&lt;/span&gt; triangles = Array(0L -&amp;gt; 1L, 1L -&amp;gt; 2L, 2L -&amp;gt; 0L) ++
        Array(0L -&amp;gt; -1L, -1L -&amp;gt; -2L, -2L -&amp;gt; 0L)
      &lt;span class=&quot;code-keyword&quot;&gt;val&lt;/span&gt; rawEdges = sc.parallelize(triangles, 2)
      &lt;span class=&quot;code-keyword&quot;&gt;val&lt;/span&gt; graph = Graph.fromEdgeTuples(rawEdges, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).cache()
      &lt;span class=&quot;code-keyword&quot;&gt;val&lt;/span&gt; triangleCount = graph.triangleCount()
      &lt;span class=&quot;code-keyword&quot;&gt;val&lt;/span&gt; verts = triangleCount.vertices
      verts.collect().foreach { &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; (vid, count) =&amp;gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (vid == 0) {
          assert(count === 4)  &lt;span class=&quot;code-comment&quot;&gt;// &amp;lt;-- Should be 2
&lt;/span&gt;        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
          assert(count === 2) &lt;span class=&quot;code-comment&quot;&gt;// &amp;lt;-- Should be 1
&lt;/span&gt;        }
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</description>
                <environment></environment>
        <key id="12743360">SPARK-3650</key>
            <summary>Triangle Count handles reverse edges incorrectly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="robineast">Robin East</assignee>
                                    <reporter username="jegonzal">Joseph E. Gonzalez</reporter>
                        <labels>
                            <label>releasenotes</label>
                    </labels>
                <created>Mon, 22 Sep 2014 22:22:19 +0000</created>
                <updated>Mon, 22 Feb 2016 05:37:34 +0000</updated>
                            <resolved>Mon, 22 Feb 2016 01:07:43 +0000</resolved>
                                    <version>1.1.0</version>
                    <version>1.2.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>GraphX</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14143954" author="apachespark" created="Mon, 22 Sep 2014 22:30:27 +0000"  >&lt;p&gt;User &apos;jegonzal&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/2495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/2495&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14289012" author="apachespark" created="Fri, 23 Jan 2015 09:28:18 +0000"  >&lt;p&gt;User &apos;Leolh&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/4176&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/4176&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14603016" author="robineast" created="Fri, 26 Jun 2015 15:11:37 +0000"  >&lt;p&gt;What is the status of this issue? A user on the mailing list just ran into to this issue. It looks like PR-2495 should fix the issue. Is there a version that is being targeted for the fix?&lt;/p&gt;</comment>
                            <comment id="14603992" author="srowen" created="Sat, 27 Jun 2015 05:38:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=robineast&quot; class=&quot;user-hover&quot; rel=&quot;robineast&quot;&gt;robineast&lt;/a&gt; looks like &lt;a href=&quot;https://github.com/apache/spark/pull/2495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/2495&lt;/a&gt; just never got merged for some reason. Dust it off and ping jegonzal and ankurdave for review (again)&lt;/p&gt;</comment>
                            <comment id="15152066" author="ovidiumarcu" created="Thu, 18 Feb 2016 10:05:12 +0000"  >&lt;p&gt;Can someone look over this issue?&lt;/p&gt;</comment>
                            <comment id="15152075" author="srowen" created="Thu, 18 Feb 2016 10:09:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ovidiumarcu&quot; class=&quot;user-hover&quot; rel=&quot;ovidiumarcu&quot;&gt;ovidiumarcu&lt;/a&gt; what are you expecting here? you should try to revive the PR as I mentioned above if you&apos;re interested. I don&apos;t think anyone else is working on GraphX though.&lt;/p&gt;</comment>
                            <comment id="15152239" author="ovidiumarcu" created="Thu, 18 Feb 2016 12:28:17 +0000"  >&lt;p&gt;I see interesting issues on GraphX, nobody working on, maybe low priority. too bad.&lt;/p&gt;</comment>
                            <comment id="15152327" author="robineast" created="Thu, 18 Feb 2016 13:48:44 +0000"  >&lt;p&gt;I did ask if the PR could be revived but never followed up on it. If I get a moment I&apos;ll try and submit the PR myself however have been a little busy on other GraphX things.&lt;/p&gt;

&lt;p&gt;By the way there is a workaround to the issue which is to make sure your edges are in the canonical direction before calling triangleCount.&lt;/p&gt;</comment>
                            <comment id="15155991" author="apachespark" created="Sun, 21 Feb 2016 11:55:06 +0000"  >&lt;p&gt;User &apos;insidedctm&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/11290&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11290&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15156499" author="ovidiumarcu" created="Mon, 22 Feb 2016 05:37:34 +0000"  >&lt;p&gt;Is it possible to apply this fix to a 1.5 version?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20d53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>