<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:52:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-19803] Flaky BlockManagerProactiveReplicationSuite tests</title>
                <link>https://issues.apache.org/jira/browse/SPARK-19803</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;The tests added for BlockManagerProactiveReplicationSuite has made the jenkins build flaky. Please refer to the build for more details - &lt;a href=&quot;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/73640/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/73640/testReport/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13047770">SPARK-19803</key>
            <summary>Flaky BlockManagerProactiveReplicationSuite tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shubhamc">Shubham Chopra</assignee>
                                    <reporter username="sitalkedia@gmail.com">Sital Kedia</reporter>
                        <labels>
                            <label>flaky-test</label>
                    </labels>
                <created>Thu, 2 Mar 2017 19:20:13 +0000</created>
                <updated>Tue, 28 Mar 2017 01:48:16 +0000</updated>
                            <resolved>Tue, 28 Mar 2017 01:48:16 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Spark Core</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15893640" author="apachespark" created="Fri, 3 Mar 2017 03:05:03 +0000"  >&lt;p&gt;User &apos;uncleGen&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/17144&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/17144&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15900102" author="kayousterhout" created="Tue, 7 Mar 2017 20:30:37 +0000"  >&lt;p&gt;Thanks for fixing this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=uncleGen&quot; class=&quot;user-hover&quot; rel=&quot;uncleGen&quot;&gt;uncleGen&lt;/a&gt; and for reporting it &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sitalkedia%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;sitalkedia@gmail.com&quot;&gt;sitalkedia@gmail.com&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15925353" author="kayousterhout" created="Wed, 15 Mar 2017 00:57:30 +0000"  >&lt;p&gt;This does not appear to be fixed &amp;#8211; it looks like there&apos;s some error condition in the underlying code that can cause this to break?  From &lt;a href=&quot;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/74412/testReport/org.apache.spark.storage/BlockManagerProactiveReplicationSuite/proactive_block_replication___5_replicas___4_block_manager_deletions/:&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/74412/testReport/org.apache.spark.storage/BlockManagerProactiveReplicationSuite/proactive_block_replication___5_replicas___4_block_manager_deletions/:&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;org.scalatest.exceptions.TestFailedDueToTimeoutException: The code passed to eventually never returned normally. Attempted 493 times over 5.007521253999999 seconds. Last failure message: 4 did not equal 5.&lt;br/&gt;
	at org.scalatest.concurrent.Eventually$class.tryTryAgain$1(Eventually.scala:420)&lt;br/&gt;
	at org.scalatest.concurrent.Eventually$class.eventually(Eventually.scala:438)&lt;br/&gt;
	at org.scalatest.concurrent.Eventually$.eventually(Eventually.scala:478)&lt;br/&gt;
	at org.scalatest.concurrent.Eventually$class.eventually(Eventually.scala:307)&lt;br/&gt;
	at org.scalatest.concurrent.Eventually$.eventually(Eventually.scala:478)&lt;br/&gt;
	at org.apache.spark.storage.BlockManagerProactiveReplicationSuite.testProactiveReplication(BlockManagerReplicationSuite.scala:492)&lt;br/&gt;
	at org.apache.spark.storage.BlockManagerProactiveReplicationSuite$$anonfun$12$$anonfun$apply$mcVI$sp$1.apply$mcV$sp(BlockManagerReplicationSuite.scala:464)&lt;br/&gt;
	at org.apache.spark.storage.BlockManagerProactiveReplicationSuite$$anonfun$12$$anonfun$apply$mcVI$sp$1.apply(BlockManagerReplicationSuite.scala:464)&lt;br/&gt;
	at org.apache.spark.storage.BlockManagerProactiveReplicationSuite$$anonfun$12$$anonfun$apply$mcVI$sp$1.apply(BlockManagerReplicationSuite.scala:464)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shubhamc&quot; class=&quot;user-hover&quot; rel=&quot;shubhamc&quot;&gt;shubhamc&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cloud_fan&quot; class=&quot;user-hover&quot; rel=&quot;cloud_fan&quot;&gt;cloud_fan&lt;/a&gt;, since you worked on the original code for this, can you take a look at this?  I looked at this for a bit and based on some experimentation it looked like there were some race conditions in the underlying code.&lt;/p&gt;</comment>
                            <comment id="15927263" author="kayousterhout" created="Thu, 16 Mar 2017 00:57:40 +0000"  >&lt;p&gt;This failed again today: &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/74621/testReport/org.apache.spark.storage/BlockManagerProactiveReplicationSuite/proactive_block_replication___3_replicas___2_block_manager_deletions/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/74621/testReport/org.apache.spark.storage/BlockManagerProactiveReplicationSuite/proactive_block_replication___3_replicas___2_block_manager_deletions/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15927396" author="shubhamc" created="Thu, 16 Mar 2017 03:05:43 +0000"  >&lt;p&gt;I am looking into this and will try to submit a fix in a day or so. Mostly trying to isolate the race condition and simplify the test cases. &lt;/p&gt;</comment>
                            <comment id="15927539" author="kayousterhout" created="Thu, 16 Mar 2017 05:53:36 +0000"  >&lt;p&gt;Awesome thanks!&lt;/p&gt;</comment>
                            <comment id="15930065" author="shubhamc" created="Fri, 17 Mar 2017 14:46:11 +0000"  >&lt;p&gt;Adding a PR link. Not sure why JIRA did not pick up the PR yesterday.&lt;/p&gt;</comment>
                            <comment id="15938676" author="shubhamc" created="Thu, 23 Mar 2017 16:17:24 +0000"  >&lt;p&gt;Any feedback on the PR - &lt;a href=&quot;https://github.com/apache/spark/pull/17325&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/17325&lt;/a&gt; ? &lt;/p&gt;</comment>
                            <comment id="15943460" author="shubhamc" created="Mon, 27 Mar 2017 15:26:27 +0000"  >&lt;p&gt;The PR enforces a refresh of the peer list cached at the executor that is trying to proactively replicate the block. This fix ensures that the peer will never try to replicate to a previously failed executor due to a stale reference. In addition, in the unit test, the block managers are explicitly stopped when they are being removed from the master.&lt;/p&gt;</comment>
                            <comment id="15944380" author="cloud_fan" created="Tue, 28 Mar 2017 01:48:16 +0000"  >&lt;p&gt;Issue resolved by pull request 17325&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/17325&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/17325&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ava7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>