<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:06:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-28930] Spark DESC FORMATTED TABLENAME information display issues</title>
                <link>https://issues.apache.org/jira/browse/SPARK-28930</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Spark DESC FORMATTED TABLENAME information display issues.Showing incorrect&#160;&lt;b&gt;Last Access time and&lt;/b&gt; feeling some information displays can make it better.&lt;/p&gt;

&lt;p&gt;Test steps:&lt;br/&gt;
 1. Open spark sql&lt;br/&gt;
 2. Create table with partition&lt;br/&gt;
 CREATE EXTERNAL TABLE IF NOT EXISTS employees_info_extended ( id INT, name STRING, usd_flag STRING, salary DOUBLE, deductions MAP&amp;lt;STRING, DOUBLE&amp;gt;, address STRING ) PARTITIONED BY (entrytime STRING) STORED AS TEXTFILE location &apos;hdfs://hacluster/user/sparkhive/warehouse&apos;;&lt;br/&gt;
 3. from spark sql check the table description&lt;br/&gt;
 desc formatted tablename;&lt;br/&gt;
 4. From scala shell check the table description&lt;br/&gt;
 sql(&quot;desc formatted tablename&quot;).show()&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Issue1:&lt;/b&gt;&lt;br/&gt;
 If there is no comment for spark scala shell shows &lt;b&gt;&quot;null&quot; in small letters&lt;/b&gt; but all other places Hive beeline/Spark beeline/Spark SQL it is showing in &lt;b&gt;CAPITAL &quot;NULL&lt;/b&gt;&quot;. Better to show same in all places.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
*scala&amp;gt;* sql(&lt;span class=&quot;code-quote&quot;&gt;&quot;desc formatted employees_info_extended&quot;&lt;/span&gt;).show(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
 +-----------------------------+---------------------------++-------
|col_name|data_type|*comment*|

+-----------------------------+---------------------------++-------
|id|&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;|*&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;*|
|name|string|*&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;*|
|usd_flag|string|*&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;*|
|salary|&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;|*&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;*|
|deductions|map&amp;lt;string,&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;&amp;gt;|*&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;*|
|address|string|&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;|
|entrytime|string|&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;|
| # Partition Information|&#160;|&#160;|
| # col_name|data_type|comment|
|entrytime|string|&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;|
|&#160;|&#160;|&#160;|
| # Detailed Table Information|&#160;|&#160;|
|Database|sparkdb__|&#160;|
|Table|employees_info_extended|&#160;|
|Owner|root|&#160;|

*|Created Time |Tue Aug 20 13:42:06 CST 2019| |*
 *|Last Access |Thu Jan 01 08:00:00 CST 1970| |*
|Created By|Spark 2.4.3|&#160;|
|Type|EXTERNAL|&#160;|
|Provider|hive|&#160;|

+-----------------------------+---------------------------++-------
 only showing top 20 rows

*scala&amp;gt;*
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;Issue 2:&lt;/b&gt;&lt;br/&gt;
 Spark SQL &quot;desc formatted tablename&quot; is not showing the header &lt;a href=&quot;#col_name,data_type,comment&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;# col_name,data_type,comment&lt;/a&gt; in the top of the query result.But header is showing on top of partition description. For Better understanding show the header on Top of the query result.Other than in spark sql ,we are able to see the header like&#160;&lt;a href=&quot;#col_name,data_type,comment&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;# col_name,data_type,comment&lt;/a&gt;&#160;in spark-beeline &amp;amp; hive beeline&#160;&#160;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
*spark-sql&amp;gt;* desc formatted employees_info_extended1;
 id &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; *NULL*
 name string *NULL*
 usd_flag string NULL
 salary &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; NULL
 deductions map&amp;lt;string,&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;&amp;gt; NULL
 address string NULL
 entrytime string NULL
 * 
 ## Partition Information*
 ## col_name data_type comment*
 entrytime string *NULL*

 
 *spark-sql&amp;gt;*               |                                                                                 |                  |



&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;This is Scala shell showing the headers &quot;|col_name|data_type|*comment&lt;/b&gt;| &quot;*&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;scala&amp;gt;&lt;/b&gt; sql(&quot;desc formatted employees_info_extended&quot;).show(false); &lt;ins&gt;----------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-------------------------&lt;del&gt;+&lt;ins&gt;&lt;/del&gt;------ &lt;b&gt;|col_name|data_type|*comment&lt;/b&gt;|* +----------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-------------------------&lt;del&gt;++&lt;/del&gt;------ |id|int|&lt;b&gt;null&lt;/b&gt;| |name|string|&lt;b&gt;null&lt;/b&gt;| |usd_flag|string|&lt;b&gt;null&lt;/b&gt;|&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;This is the spark-beeline which is showing the headers&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;0: jdbc:hive2://10.186.60.158:23040/default&amp;gt; desc formatted employees; &lt;ins&gt;------------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-------------------------------------------------------------------------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;----------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;&lt;del&gt;+ | &lt;b&gt;col_name | data_type | comment | &lt;ins&gt;&lt;/del&gt;&lt;/b&gt;-----------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-------------------------------------------------------------------------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;----------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+ | name | string | Employee name | | salary | float | Employee salary | | | | |&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;This is Hive Beeline showing headers&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;0: jdbc:hive2://10.18.98.147:21066/&amp;gt; desc formatted mytest1;&lt;/b&gt;&lt;br/&gt;
INFO : Concurrency mode is disabled, not creating a lock manager&lt;br/&gt;
&lt;ins&gt;------------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;----------------------------------------------------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&lt;/ins&gt;&lt;br/&gt;
&lt;b&gt;| col_name | data_type | comment |&lt;/b&gt;&lt;br/&gt;
&lt;ins&gt;------------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;----------------------------------------------------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&lt;/ins&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;ol&gt;
	&lt;li&gt;col_name&lt;/li&gt;
&lt;/ol&gt;
&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; data_type &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; comment &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; col &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; array&amp;lt;string&amp;gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; from deserializer &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; value &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; string&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;




&lt;p&gt;&lt;b&gt;Issue 3:&lt;/b&gt;&lt;br/&gt;
 I created the table on Aug 20.So it is showing created time correct .&lt;b&gt;But Last access time showing 1970 Jan 01&lt;/b&gt;. It is not good to show Last access time earlier time than the created time.Better to show the correct date and time else show UNKNOWN.&lt;br/&gt;
 &lt;b&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Created Time,Tue Aug 20 13:42:06 CST 2019,&amp;#93;&lt;/span&gt;&lt;/b&gt;&lt;br/&gt;
 &lt;b&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Last Access,Thu Jan 01 08:00:00 CST 1970,&amp;#93;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13253932">SPARK-28930</key>
            <summary>Spark DESC FORMATTED TABLENAME information display issues</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="S71955">Sujith Chacko</assignee>
                                    <reporter username="jobitmathew">jobit mathew</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Aug 2019 13:04:27 +0000</created>
                <updated>Mon, 12 Dec 2022 18:10:49 +0000</updated>
                            <resolved>Wed, 18 Sep 2019 03:55:50 +0000</resolved>
                                    <version>2.4.3</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16919563" author="s71955" created="Fri, 30 Aug 2019 13:46:59 +0000"  >&lt;p&gt;@ &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jobitmathew&quot; class=&quot;user-hover&quot; rel=&quot;jobitmathew&quot;&gt;jobitmathew&lt;/a&gt;&#160;As i remember Issue 3 is already handled as part of&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-24812&quot; title=&quot;Last Access Time in the table description is not valid&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-24812&quot;&gt;&lt;del&gt;SPARK-24812&lt;/del&gt;&lt;/a&gt; some time back, need to recheck. other issues i will check and get back to you.&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dongjoon&quot; class=&quot;user-hover&quot; rel=&quot;dongjoon&quot;&gt;dongjoon&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16932023" author="gurwls223" created="Wed, 18 Sep 2019 03:55:50 +0000"  >&lt;p&gt;Issue resolved by pull request 25720&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/25720&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/25720&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13256940">SPARK-29099</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 8 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z06720:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>