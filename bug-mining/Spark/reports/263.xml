<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:13:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-1527] rootDirs in DiskBlockManagerSuite doesn&apos;t get full path from rootDir0, rootDir1</title>
                <link>https://issues.apache.org/jira/browse/SPARK-1527</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;In core/src/test/scala/org/apache/storage/DiskBlockManagerSuite.scala&lt;/p&gt;

&lt;p&gt;  val rootDir0 = Files.createTempDir()&lt;br/&gt;
  rootDir0.deleteOnExit()&lt;br/&gt;
  val rootDir1 = Files.createTempDir()&lt;br/&gt;
  rootDir1.deleteOnExit()&lt;br/&gt;
  val rootDirs = rootDir0.getName + &quot;,&quot; + rootDir1.getName&lt;/p&gt;

&lt;p&gt;rootDir0 and rootDir1 are in system&apos;s temporary directory. &lt;br/&gt;
rootDir0.getName will not get the full path of the directory but the last component of the directory. When passing to DiskBlockManage constructor, the DiskBlockerManger creates directories in pwd not the temporary directory.&lt;/p&gt;

&lt;p&gt;rootDir0.toString will fix this issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12709075">SPARK-1527</key>
            <summary>rootDirs in DiskBlockManagerSuite doesn&apos;t get full path from rootDir0, rootDir1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nirajsuthar">Niraj Suthar</assignee>
                                    <reporter username="advancedxy">YE</reporter>
                        <labels>
                            <label>starter</label>
                    </labels>
                <created>Thu, 17 Apr 2014 15:21:24 +0000</created>
                <updated>Wed, 14 May 2014 02:04:45 +0000</updated>
                            <resolved>Wed, 14 May 2014 02:04:45 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="13973067" author="srowen" created="Thu, 17 Apr 2014 15:26:44 +0000"  >&lt;p&gt;&lt;tt&gt;toString()&lt;/tt&gt; returns &lt;tt&gt;getPath()&lt;/tt&gt; which may still be relative. &lt;tt&gt;getAbsolutePath()&lt;/tt&gt; is better, but even &lt;tt&gt;getCanonicalPath()&lt;/tt&gt; may be better still.&lt;/p&gt;</comment>
                            <comment id="13973087" author="advancedxy" created="Thu, 17 Apr 2014 15:50:32 +0000"  >&lt;p&gt;Yes. You are right. toString() may give relative path. And since it&apos;s determined by java.io.tmpdir system property. see &lt;a href=&quot;https://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/io/Files.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/io/Files.java&lt;/a&gt; line 591. It&apos;s possible that the DiskBlockManager will create different directories than the original temp dir when java.io.tmpdir is a relative path. &lt;/p&gt;

&lt;p&gt;so use getAbsolutePath since I use this method in my last pr?&lt;/p&gt;

&lt;p&gt;But, I saw toString() was called other places! Should we do something about that?&lt;/p&gt;</comment>
                            <comment id="13973091" author="srowen" created="Thu, 17 Apr 2014 15:54:24 +0000"  >&lt;p&gt;If the paths are only used locally, then an absolute path never hurts (except to be a bit longer). I assume that since these are references to a temp directory that is by definition only valid locally, that absolute path is the right thing to use.&lt;/p&gt;

&lt;p&gt;In other cases, similar logic may apply. I could imagine in some cases the right thing to do is transmit a relative path. &lt;/p&gt;</comment>
                            <comment id="13973096" author="advancedxy" created="Thu, 17 Apr 2014 16:06:05 +0000"  >&lt;p&gt;Yes, of course, sometimes we want absolute path, sometimes we want to transmit a relative path. It depends on logic. &lt;br/&gt;
But I think maybe we should review these usages so that we can make sure absolute paths or relative paths are used appropriately.&lt;/p&gt;

&lt;p&gt;I may have time to review it after I finish another JIRA issue. If you want to take it over, please!&lt;/p&gt;

&lt;p&gt;Anyway, thanks for your comments and help.&lt;/p&gt;</comment>
                            <comment id="13973148" author="srowen" created="Thu, 17 Apr 2014 17:09:48 +0000"  >&lt;p&gt;There are a number of other uses of File.getName(), but a quick glance suggests all the others are appropriate.&lt;/p&gt;

&lt;p&gt;There are a number of other uses of File.toString(), almost all in tests. I suspect the Files in question already have absolute paths, and that even relative paths happen to work fine in a test since the working dir doesn&apos;t change. So those could change, but are probably not a concern.&lt;/p&gt;

&lt;p&gt;The only one that gave me pause was the use in HttpBroadcast.scala, though I suspect it turns out to work fine for similar reasons.&lt;/p&gt;

&lt;p&gt;If reviewers are interested in changing the toString()s I&apos;ll test and submit a PR for that.&lt;/p&gt;</comment>
                            <comment id="13979309" author="advancedxy" created="Thu, 24 Apr 2014 05:35:38 +0000"  >&lt;p&gt;hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nirajsuthar&quot; class=&quot;user-hover&quot; rel=&quot;nirajsuthar&quot;&gt;nirajsuthar&lt;/a&gt;&lt;br/&gt;
This is my pr. &lt;a href=&quot;https://github.com/apache/spark/pull/436&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/436&lt;/a&gt;. As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srowen&quot; class=&quot;user-hover&quot; rel=&quot;srowen&quot;&gt;srowen&lt;/a&gt; said, if someone interested in changing the toString()s, please leave a comment.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rxin&quot; class=&quot;user-hover&quot; rel=&quot;rxin&quot;&gt;rxin&lt;/a&gt; what do you think?&lt;/p&gt;</comment>
                            <comment id="13980185" author="nirajsuthar" created="Thu, 24 Apr 2014 20:03:16 +0000"  >&lt;p&gt;Sure Ye Xianjin,&lt;/p&gt;

&lt;p&gt;I am more thn happy to do so. after reading the comments I looked at the HttpBroadcast.scala and will update it appropriately.&lt;/p&gt;

&lt;p&gt;if you guys have any suggestions here..please let me know. &lt;/p&gt;

&lt;p&gt;Thank you,&lt;br/&gt;
Niraj&lt;/p&gt;</comment>
                            <comment id="13997189" author="pwendell" created="Wed, 14 May 2014 02:04:45 +0000"  >&lt;p&gt;Issue resolved by pull request 436&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/436&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/436&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387398</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 27 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uqhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387660</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>