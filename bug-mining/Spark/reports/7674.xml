<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:23:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-33029] Standalone mode blacklist executors page UI marks driver as blacklisted</title>
                <link>https://issues.apache.org/jira/browse/SPARK-33029</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;I am running a spark shell on a 1 node standalone cluster.&#160; I noticed that the executors page ui was marking the driver as blacklisted for the stage that is running.&#160; Attached a screen shot.&lt;/p&gt;

&lt;p&gt;Also, in my case one of the executors died and it doesn&apos;t seem like the schedule rpicked up the new one.&#160; It doesn&apos;t show up on the stages page and just shows it as active but none of the tasks ran there.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;You can reproduce this by starting a master and slave on a single node, then launch a shell like where you will get multiple executors (in this case I got 3)&lt;/p&gt;

&lt;p&gt;$SPARK_HOME/bin/spark-shell --master spark://yourhost:7077 --executor-cores 4 --conf spark.blacklist.enabled=true&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;From shell run:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.spark.TaskContext
val rdd = sc.makeRDD(1 to 1000, 5).mapPartitions { it =&amp;gt;
 val context = TaskContext.get()
 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (context.attemptNumber() &amp;lt; 2) {
 &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Exception(&lt;span class=&quot;code-quote&quot;&gt;&quot;test attempt num&quot;&lt;/span&gt;)
 }
 it
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13330018">SPARK-33029</key>
            <summary>Standalone mode blacklist executors page UI marks driver as blacklisted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Baohe Zhang">Baohe Zhang</assignee>
                                    <reporter username="tgraves">Thomas Graves</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Sep 2020 18:51:55 +0000</created>
                <updated>Thu, 7 Jan 2021 03:13:14 +0000</updated>
                            <resolved>Wed, 6 Jan 2021 03:17:29 +0000</resolved>
                                    <version>3.0.0</version>
                                    <fixVersion>3.0.2</fixVersion>
                    <fixVersion>3.1.1</fixVersion>
                                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17204259" author="tgraves" created="Tue, 29 Sep 2020 19:56:04 +0000"  >&lt;p&gt;NOte I filed &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-33031&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SPARK-33031&lt;/a&gt;&#160;for the issue of it not using the other executor as it seems more critical&#160;&lt;/p&gt;</comment>
                            <comment id="17255682" author="baohe zhang" created="Mon, 28 Dec 2020 18:10:48 +0000"  >&lt;p&gt;With the blacklist feature enabled, by default, a node will be excluded when 2 executors on this node have been excluded. In this case, the node is excluded and we will mark all executors in that node as excluded. Since we are running standalone mode in a single node, the driver and all executors share the same hostname. the driver will be marked as excluded on AppStatusListener when handling &quot;SparkListenerNodeExcludedForStage&quot; event. We can fix it by filter out the driver entity when handling this event, hence the UI won&apos;t show the driver is excluded.&lt;/p&gt;</comment>
                            <comment id="17255702" author="apachespark" created="Mon, 28 Dec 2020 19:38:21 +0000"  >&lt;p&gt;User &apos;baohe-zhang&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/30954&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/30954&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17255703" author="apachespark" created="Mon, 28 Dec 2020 19:38:54 +0000"  >&lt;p&gt;User &apos;baohe-zhang&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/30954&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/30954&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17259376" author="dongjoon" created="Wed, 6 Jan 2021 03:17:29 +0000"  >&lt;p&gt;Issue resolved by pull request 30954&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/30954&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/30954&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17259415" author="apachespark" created="Wed, 6 Jan 2021 04:53:30 +0000"  >&lt;p&gt;User &apos;baohe-zhang&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/31057&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/31057&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13012316" name="Screen Shot 2020-09-29 at 1.52.09 PM.png" size="119365" author="tgraves" created="Tue, 29 Sep 2020 18:52:55 +0000"/>
                            <attachment id="13012317" name="Screen Shot 2020-09-29 at 1.53.37 PM.png" size="130109" author="tgraves" created="Tue, 29 Sep 2020 18:54:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 44 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0j0tc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>