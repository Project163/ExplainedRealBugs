<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:13:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-1959] String &quot;NULL&quot; is interpreted as null value</title>
                <link>https://issues.apache.org/jira/browse/SPARK-1959</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;The &lt;tt&gt;HiveTableScan&lt;/tt&gt; operator unwraps string &quot;NULL&quot; (case insensitive) into null values even if the column type is &lt;tt&gt;STRING&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;To reproduce the bug, we use &lt;tt&gt;sql/hive/src/test/resources/groupby_groupingid.txt&lt;/tt&gt; as test input, copied to &lt;tt&gt;/tmp/groupby_groupingid.txt&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Hive session:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; CREATE TABLE test_null(key INT, value STRING);
hive&amp;gt; LOAD DATA LOCAL INPATH &lt;span class=&quot;code-quote&quot;&gt;&apos;/tmp/groupby_groupingid.txt&apos;&lt;/span&gt; INTO table test_null;
hive&amp;gt; SELECT * FROM test_null WHERE value IS NOT NULL;
...
OK
1       NULL
1       1
2       2
3       3
3       NULL
4       5
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We can see that the &lt;tt&gt;NULL&lt;/tt&gt; cells in the original input file are interpreted as string &lt;tt&gt;&quot;NULL&quot;&lt;/tt&gt; in Hive.&lt;/p&gt;

&lt;p&gt;Spark SQL session (&lt;tt&gt;sbt/sbt hive/console&lt;/tt&gt;):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;scala&amp;gt; hql(&lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE TABLE test_null(key INT, value STRING)&quot;&lt;/span&gt;)
scala&amp;gt; hql(&lt;span class=&quot;code-quote&quot;&gt;&quot;LOAD DATA LOCAL INPATH &lt;span class=&quot;code-quote&quot;&gt;&apos;/tmp/groupby_groupingid.txt&apos;&lt;/span&gt; INTO table test_null&quot;&lt;/span&gt;)
scala&amp;gt; hql(&lt;span class=&quot;code-quote&quot;&gt;&quot;SELECT * FROM test_null WHERE value IS NOT NULL&quot;&lt;/span&gt;).foreach(println)
...
[1,1]
[2,2]
[3,3]
[4,5]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As we can see, string &lt;tt&gt;&quot;NULL&quot;&lt;/tt&gt; is interpreted as null values in Spark SQL.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12717203">SPARK-1959</key>
            <summary>String &quot;NULL&quot; is interpreted as null value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lian cheng">Cheng Lian</assignee>
                                    <reporter username="lian cheng">Cheng Lian</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 May 2014 03:12:38 +0000</created>
                <updated>Tue, 28 Oct 2014 22:06:02 +0000</updated>
                            <resolved>Sat, 31 May 2014 05:13:19 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.0.1</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14012031" author="lian cheng" created="Thu, 29 May 2014 03:54:08 +0000"  >&lt;p&gt;To &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marmbrus&quot; class=&quot;user-hover&quot; rel=&quot;marmbrus&quot;&gt;marmbrus&lt;/a&gt;: The problematic line should be &lt;a href=&quot;https://github.com/apache/spark/blob/master/sql%2Fhive%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fspark%2Fsql%2Fhive%2FhiveOperators.scala#L154&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this one&lt;/a&gt;. I wonder under what circumstances, would Hive return a Java string &lt;tt&gt;&quot;NULL&quot;&lt;/tt&gt; to represent a null value? Is it safe to simply remove this line?&lt;/p&gt;</comment>
                            <comment id="14012058" author="marmbrus" created="Thu, 29 May 2014 04:36:01 +0000"  >&lt;p&gt;If all the hive tests still pass with that line removed then I&apos;m okay with it.&lt;/p&gt;</comment>
                            <comment id="14012118" author="lian cheng" created="Thu, 29 May 2014 06:31:44 +0000"  >&lt;p&gt;Pull request: &lt;a href=&quot;https://github.com/apache/spark/pull/909&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/909&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12743893">SPARK-3683</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>395407</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1w2tb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>395536</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>