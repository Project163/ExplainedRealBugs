<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:12:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-782] Multiple versions of ASM being put on classpath</title>
                <link>https://issues.apache.org/jira/browse/SPARK-782</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Since the update to ASM 4, something is still pulling in ASM 3. We need to exclude it in SBT or just find a better way to manage lib_managed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12704511">SPARK-782</key>
            <summary>Multiple versions of ASM being put on classpath</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sandyr">Sandy Ryza</assignee>
                                    <reporter username="matei">Matei Alexandru Zaharia</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Jun 2013 08:07:57 +0000</created>
                <updated>Fri, 4 Apr 2014 20:51:10 +0000</updated>
                            <resolved>Sun, 9 Mar 2014 13:18:18 +0000</resolved>
                                                    <fixVersion>0.9.1</fixVersion>
                    <fixVersion>1.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13953075" author="matei" created="Sun, 23 Jun 2013 16:21:34 +0000"  >&lt;p&gt;This is now fixed in the SBT build but not Maven.&lt;/p&gt;</comment>
                            <comment id="13953824" author="sandy" created="Sun, 23 Feb 2014 23:52:22 +0000"  >&lt;p&gt;It looks like Hadoop depends on asm 3.2.  I&apos;ve seen this cause IncompatibleClassChangeErrors a couple times recently, depending on which order the jars are placed on the classpath (even when built with SBT).  Would it make sense to shade asm in Spark?&lt;/p&gt;</comment>
                            <comment id="13953984" author="sandy" created="Wed, 5 Mar 2014 20:44:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/spark/pull/90&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/90&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13954039" author="klmarkey" created="Tue, 11 Mar 2014 13:09:23 +0000"  >&lt;p&gt;Thank you!  Not following this issue earlier, and having to deal with multiple ASM conflicts (Hadoop, Jersey servlet, and more), and not being able to wait for shaded Maven packages (spark-core), we needed to shade other instances in other libraries, but given how Spark is deployed, it was impossible for us to shade Spark independency.  &lt;/p&gt;</comment>
                            <comment id="13954169" author="tdas" created="Mon, 24 Mar 2014 16:49:17 +0000"  >&lt;p&gt;The PR that fixes this &lt;a href=&quot;https://github.com/apache/spark/pull/100/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/100/&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="13954172" author="klmarkey" created="Tue, 25 Mar 2014 08:13:22 +0000"  >&lt;p&gt;Thanks. I understand there&apos;s a fix and pull for it but my comment was to include it in. 0.9.1. It&apos;s lots handier if it&apos;s in Maven central than making a special build and pushing it into our Maven repository and pushing the fixes to the clusters. &lt;/p&gt;

&lt;p&gt;Thanks again. &lt;/p&gt;
</comment>
                            <comment id="13954184" author="glenn.murray" created="Tue, 25 Mar 2014 16:18:51 +0000"  >&lt;p&gt;I&apos;d like to +1 Kevin&apos;s request to push this into 0.9.1.  This week I actually had a coding exercise for a job application that requested deployment of the exercise to AWS, and having it fail with 0.9.0 was painful.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Glenn&lt;/p&gt;</comment>
                            <comment id="13954181" author="tdas" created="Tue, 25 Mar 2014 17:39:25 +0000"  >&lt;p&gt;The PR (&lt;a href=&quot;https://github.com/apache/spark/pull/100/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/100/&lt;/a&gt;) that fixed this for master branch did the following:&lt;br/&gt;
1. Made Spark use existing shaded asm (Kryo&apos;s) and removed Spark&apos;s direct dependency to asm&lt;br/&gt;
2. Excluded ASM from all Spark dependencies so that asm is not Spark binary any more. &lt;/p&gt;

&lt;p&gt;For branch 0.9, I am afraid to do (2), because there is a remote possibility that completely remove asm from Spark binaries may fail something. For example, Hadoop has asm as dependency and removing asm completely may cause Hadoop to fail in some scenario. Hence, I am porting only (1). This would allow downstream projects to safely exclude asm from Spark, as Spark in itself does not depend on asm (only shaded asm).&lt;/p&gt;

</comment>
                            <comment id="13954182" author="tdas" created="Tue, 25 Mar 2014 17:47:22 +0000"  >&lt;p&gt;I opened a PR with this &lt;a href=&quot;https://github.com/apache/spark/pull/232&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/232&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13954193" author="klmarkey" created="Tue, 25 Mar 2014 18:07:20 +0000"  >&lt;p&gt;It is precisely the Hadoop transitive dependencies on ASM that broke us first. It depends on what Hadoop version. We were using 2,2,0 which required 3.2 ASM. Hive, too. More recent Hadoop versions might be in line with &lt;br/&gt;
4.0 but I&apos;ve no checked. If they are in conflict, we are sunk in any case, and your concern is moot. Hadoop shouldn&apos;t depend on Spark&apos;s transitive dependencies. &lt;/p&gt;

&lt;p&gt;Thanks &lt;br/&gt;
Kevin&lt;/p&gt;
</comment>
                            <comment id="13954189" author="tdas" created="Tue, 25 Mar 2014 19:01:52 +0000"  >&lt;p&gt;But shouldnt this change in theh PR make it easier to deal with such conflicts as you can now exclude ASM from Spark, without affecting the execution of Spark (since Spark does not use ASM any more)?&lt;/p&gt;

&lt;p&gt;Since Spark is designed to build against many different version of Hadoop, short of blindly eliminating ASM completely from all dependencies, there isnt any super-smart thing that can be done in the Spark build to deal with ASM conflicts. Explicitly removing a transitive dependency without have a full knowledge of how it may affect dependencies (Hadoop in this case) is something that should not be done in a maintenance release.&lt;/p&gt;</comment>
                            <comment id="13954202" author="tdas" created="Wed, 26 Mar 2014 14:50:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klmarkey&quot; class=&quot;user-hover&quot; rel=&quot;klmarkey&quot;&gt;klmarkey&lt;/a&gt; Since 0.9.1-RC2 with this fix is out, if possible, you can try compiling your project with ASM excluded from Spark.&lt;/p&gt;</comment>
                            <comment id="13954192" author="klmarkey" created="Wed, 26 Mar 2014 15:07:20 +0000"  >&lt;p&gt;Thank you for including 782.  Yes, I&apos;m in the process of ramping up a &lt;br/&gt;
test.  Compilation is insufficient.  I&apos;ll need to test runtime, too.  &lt;br/&gt;
Which will take a few days because some of the relevant code in flux.&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;


</comment>
                            <comment id="13954224" author="santhoma" created="Fri, 28 Mar 2014 02:32:53 +0000"  >&lt;p&gt;Thanks for the fix.&lt;br/&gt;
I was getting below exception while trying with CDH 5.2 beta.&lt;/p&gt;

&lt;p&gt;java.lang.IncompatibleClassChangeError: class org.apache.spark.util.InnerClosureFinder has interface org.objectweb.asm.ClassVisitor as super class&lt;br/&gt;
	at java.lang.ClassLoader.defineClass1(Native Method)&lt;br/&gt;
	at java.lang.ClassLoader.defineClass(ClassLoader.java:792)&lt;/p&gt;

&lt;p&gt;The embedded version with CDH 5.2b is spark 0.9, and after building from  0.9.1 branch version the above error was gone.&lt;/p&gt;</comment>
                            <comment id="13954225" author="tdas" created="Fri, 28 Mar 2014 02:53:42 +0000"  >&lt;p&gt;Great!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382878</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tyof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>383146</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>