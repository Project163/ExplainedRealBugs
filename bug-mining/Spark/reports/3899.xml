<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:46:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-15899] file scheme should be used correctly</title>
                <link>https://issues.apache.org/jira/browse/SPARK-15899</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://www.ietf.org/rfc/rfc1738.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;A RFC&lt;/a&gt; defines file scheme as &lt;tt&gt;&lt;a href=&quot;file://host/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://host/&lt;/a&gt;&lt;/tt&gt; or &lt;tt&gt;&lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt;&lt;/tt&gt;. &lt;a href=&quot;https://en.wikipedia.org/wiki/File_URI_scheme&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Wikipedia&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/blob/master/sql/core/src/main/scala/org/apache/spark/sql/internal/SQLConf.scala#L58&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Some code stuffs&lt;/a&gt; use different prefix such as &lt;tt&gt;file:&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;It would be good to prepare a utility method to correctly add &lt;tt&gt;&lt;a href=&quot;file://host&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://host&lt;/a&gt;&lt;/tt&gt; or {{&lt;a href=&quot;file://&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://&lt;/a&gt;} prefix.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12977897">SPARK-15899</key>
            <summary>file scheme should be used correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="avulanov">Alexander Ulanov</assignee>
                                    <reporter username="kiszk">Kazuaki Ishizaki</reporter>
                        <labels>
                    </labels>
                <created>Sun, 12 Jun 2016 00:01:49 +0000</created>
                <updated>Tue, 15 Nov 2016 15:18:11 +0000</updated>
                            <resolved>Wed, 10 Aug 2016 12:55:57 +0000</resolved>
                                                    <fixVersion>2.0.1</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="15326294" author="srowen" created="Sun, 12 Jun 2016 08:07:22 +0000"  >&lt;p&gt;I think the code is actually using the form &lt;tt&gt;&lt;a href=&quot;file:/path&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/path&lt;/a&gt;&lt;/tt&gt; which I agree isn&apos;t quite right though usually is understood. It&apos;s OK to add the two extra slashes, yes. I don&apos;t think this needs a utility method.&lt;/p&gt;</comment>
                            <comment id="15326537" author="kiszk" created="Sun, 12 Jun 2016 17:09:13 +0000"  >&lt;p&gt;Thank you for your comments.&lt;/p&gt;

&lt;p&gt;It is a little bit complicated since there is a difference among platforms as described &lt;a href=&quot;https://en.wikipedia.org/wiki/File_URI_scheme#Examples&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. On Linux, we have to make a prefix &lt;tt&gt;&lt;a href=&quot;file://&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://&lt;/a&gt;&lt;/tt&gt; (add the two extra slashes) to &lt;tt&gt;file:&lt;/tt&gt; since a file path that we get is &lt;tt&gt;/path/to&lt;/tt&gt;. On Windows, we have to make a prefix &lt;tt&gt;&lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt;&lt;/tt&gt; (add the three extra slashes) to &lt;tt&gt;file:&lt;/tt&gt; since a file path that we get is &lt;tt&gt;c:/windows&lt;/tt&gt;.&lt;br/&gt;
How will we address this?&lt;/p&gt;</comment>
                            <comment id="15326540" author="srowen" created="Sun, 12 Jun 2016 17:12:15 +0000"  >&lt;p&gt;I don&apos;t think that&apos;s what the reference says. A host follows the second slash, and may be empty, in all cases.&lt;/p&gt;</comment>
                            <comment id="15327825" author="kiszk" created="Mon, 13 Jun 2016 17:47:29 +0000"  >&lt;p&gt;When I added the two extra slashes, it works on Linux. But, it does not work on Windows. An exception has thrown. &lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Linux: &lt;tt&gt;&lt;a href=&quot;file://&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://&lt;/a&gt;&lt;/tt&gt; + &lt;tt&gt;/path/to&lt;/tt&gt;&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Windows: &lt;tt&gt;&lt;a href=&quot;file://&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://&lt;/a&gt;&lt;/tt&gt; + &lt;tt&gt;c:/paths/to&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;This is because the difference of the original path format between platforms. I noticed that we have to add the three extra slashes (e.g. &lt;tt&gt;&lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt;&lt;/tt&gt;) on Windows while we need to add the two extra slashes.&lt;/p&gt;</comment>
                            <comment id="15328056" author="srowen" created="Mon, 13 Jun 2016 19:50:36 +0000"  >&lt;p&gt;OK, I had assumed that absolute paths on Windows would have to be specified like &lt;tt&gt;/c:/paths/to&lt;/tt&gt;. I know that normal Windows paths are &lt;tt&gt;c:\paths\to&lt;/tt&gt; of course, but this is a somewhat different context.&lt;/p&gt;

&lt;p&gt;OK, so what is the value of the System property user.dir on Windows? does it start with c: and not /c: ? Yeah, then I see that this needs some special handling. You&apos;re right, we could have a utility method that just adds a &lt;tt&gt;/&lt;/tt&gt; at the start if none is present, but that would silently turn relative paths into non-relative.&lt;/p&gt;

&lt;p&gt;Can we use the &lt;tt&gt;File&lt;/tt&gt; or &lt;tt&gt;Paths&lt;/tt&gt; API to really do this right? it should give a URI object whose string rep is, I hope, exactly what&apos;s desired.&lt;/p&gt;</comment>
                            <comment id="15345355" author="rxin" created="Wed, 22 Jun 2016 23:09:41 +0000"  >&lt;p&gt;Does this work if we just always do &lt;a href=&quot;file:///?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///?&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15345611" author="avulanov" created="Thu, 23 Jun 2016 02:53:14 +0000"  >&lt;p&gt;`user.dir` on Windows starts with a letter:&lt;br/&gt;
scala&amp;gt; System.getProperty(&quot;user.dir&quot;)&lt;br/&gt;
res0: String = C:\Program Files (x86)\scala\bin&lt;/p&gt;

&lt;p&gt;On Linux it starts with a slash:&lt;br/&gt;
scala&amp;gt; System.getProperty(&quot;user.dir&quot;)&lt;br/&gt;
res0: String = /home/hduser&lt;/p&gt;

&lt;p&gt;It seems that java.io.File could convert it to a proper URI:&lt;br/&gt;
Windows:&lt;br/&gt;
scala&amp;gt; new File(&quot;c:/myfile&quot;).toURI&lt;br/&gt;
res6: java.net.URI = &lt;a href=&quot;file:/c:/myfile&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/c:/myfile&lt;/a&gt;&lt;br/&gt;
Linux:&lt;br/&gt;
scala&amp;gt; new File(&quot;/home/myfile&quot;).toURI&lt;br/&gt;
res3: java.net.URI = &lt;a href=&quot;file:/home/myfile&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/home/myfile&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We can remove &quot;file:&quot; from &lt;a href=&quot;https://github.com/apache/spark/blob/master/sql/core/src/main/scala/org/apache/spark/sql/internal/SQLConf.scala#L58&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/blob/master/sql/core/src/main/scala/org/apache/spark/sql/internal/SQLConf.scala#L58&lt;/a&gt; and add toURI conversion in &lt;a href=&quot;https://github.com/apache/spark/blob/master/sql/core/src/main/scala/org/apache/spark/sql/internal/SQLConf.scala#L694&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/blob/master/sql/core/src/main/scala/org/apache/spark/sql/internal/SQLConf.scala#L694&lt;/a&gt;&lt;/p&gt;


</comment>
                            <comment id="15345620" author="kiszk" created="Thu, 23 Jun 2016 03:05:50 +0000"  >&lt;p&gt;I think so.&lt;/p&gt;

&lt;p&gt;As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sowen&quot; class=&quot;user-hover&quot; rel=&quot;sowen&quot;&gt;sowen&lt;/a&gt; proposed, we may need a utility method to do &lt;tt&gt;&lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt;&lt;/tt&gt;.&lt;br/&gt;
If we do this in the all of places in Spark, the annoying&#12288;issue is that there are many usages of &lt;tt&gt;file:&lt;/tt&gt; schema.&lt;/p&gt;</comment>
                            <comment id="15345630" author="apachespark" created="Thu, 23 Jun 2016 03:11:04 +0000"  >&lt;p&gt;User &apos;avulanov&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/13868&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/13868&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15407253" author="xuyifei" created="Thu, 4 Aug 2016 06:14:13 +0000"  >&lt;p&gt;The Problem is still exist on windows, when i use spark2.0 to read files but it failed by exception:&lt;br/&gt;
`Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: java.net.URISyntaxException: Relative path in absolute URI: &lt;a href=&quot;file:E:/hkl/spark-warehouse&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:E:/hkl/spark-warehouse&lt;/a&gt;`&lt;/p&gt;</comment>
                            <comment id="15408362" author="arsenvlad" created="Thu, 4 Aug 2016 19:29:02 +0000"  >&lt;p&gt;Are you using the pre-compiled binaries? The applied fix is probably not there yet. I tried with spark-2.0.0-bin-without-hadoop.tgz distro and got the same error. To workaround the issue for now, I tried adding &quot;spark.sql.warehouse.dir=&lt;a href=&quot;file:///C:/Experiment/spark-2.0.0-bin-without-hadoop/spark-warehouse&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///C:/Experiment/spark-2.0.0-bin-without-hadoop/spark-warehouse&lt;/a&gt;&quot; config setting to the conf/spark-defaults.conf file with the &quot;file:///&quot; scheme and it seems to let me read files via the SparkSession (e.g val data = spark.read.format(&quot;csv&quot;).option(&quot;header&quot;,&quot;false&quot;).load(&quot;C:/Temp/test.csv&quot;))&lt;/p&gt;</comment>
                            <comment id="15408717" author="skaarthik" created="Fri, 5 Aug 2016 00:57:43 +0000"  >&lt;p&gt;Confirming that overriding the setting (&quot;--conf spark.sql.warehouse.dir=&lt;a href=&quot;file:///C:/temp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///C:/temp&lt;/a&gt;&quot;) as pointed out by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arsenvlad&quot; class=&quot;user-hover&quot; rel=&quot;arsenvlad&quot;&gt;arsenvlad&lt;/a&gt; is a good workaround for this issue&lt;/p&gt;</comment>
                            <comment id="15411052" author="brunocfnba" created="Sun, 7 Aug 2016 20:11:34 +0000"  >&lt;p&gt;I have used System.setProperty(&quot;spark.sql.warehouse.dir&quot;,&quot;file:///C:/temp&quot;) within my project (with Maven) using Scala IDE  in Windows and it&apos;s also worked.&lt;/p&gt;</comment>
                            <comment id="15411190" author="xuyifei" created="Mon, 8 Aug 2016 02:29:17 +0000"  >&lt;p&gt;really appreciate, it works,( sorry reply too late&lt;/p&gt;</comment>
                            <comment id="15415228" author="srowen" created="Wed, 10 Aug 2016 12:55:57 +0000"  >&lt;p&gt;Resolved by &lt;a href=&quot;https://github.com/apache/spark/pull/13868&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/13868&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15416977" author="apachespark" created="Thu, 11 Aug 2016 10:09:05 +0000"  >&lt;p&gt;User &apos;avulanov&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/14600&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/14600&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15556174" author="dsbos" created="Fri, 7 Oct 2016 20:36:36 +0000"  >&lt;p&gt;Regarding the reference to &lt;a href=&quot;https://tools.ietf.org/html/rfc1738&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;RFC 1738&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;RFC 1738 has been &quot;obsoleted&quot; and updated by several other RFCs.  (See the links at the top of the linked-to page.)&lt;/p&gt;

&lt;p&gt;(Make sure you&apos;re considering the current specifications of URIs and schemes.)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12977810">SPARK-15893</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13020650">SPARK-18439</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13010254">SPARK-17810</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 6 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zc5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>