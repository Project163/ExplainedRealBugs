<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:15:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-2737] ClassCastExceptions when collect()ing JavaRDDs&apos; underlying Scala RDDs</title>
                <link>https://issues.apache.org/jira/browse/SPARK-2737</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;The Java API&apos;s use of fake ClassTags doesn&apos;t seem to cause any problems for Java users, but it can lead to issues when passing JavaRDDs&apos; underlying RDDs to Scala code (e.g. in the MLlib Java API wrapper code).  If we call &lt;tt&gt;collect()&lt;/tt&gt; on a Scala RDD with an incorrect ClassTag, this causes ClassCastExceptions when we try to allocate an array of the wrong type (for example, see &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-2197&quot; title=&quot;Spark invoke DecisionTree by Java&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-2197&quot;&gt;&lt;del&gt;SPARK-2197&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;There are a few possible fixes here.  An API-breaking fix would be to completely remove the fake ClassTags and require Java API users to pass &lt;tt&gt;java.lang.Class&lt;/tt&gt; instances to all &lt;tt&gt;parallelize()&lt;/tt&gt; calls and add &lt;tt&gt;returnClass&lt;/tt&gt; fields to all &lt;tt&gt;Function&lt;/tt&gt; implementations.  This would be extremely verbose.&lt;/p&gt;

&lt;p&gt;Instead, I propose that we add internal APIs to &quot;repair&quot; a Scala RDD with an incorrect ClassTag by wrapping it and overriding its ClassTag.  This should be okay for cases where the Scala code that calls &lt;tt&gt;collect()&lt;/tt&gt; knows what type of array should be allocated, which is the case in the MLlib wrappers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12730609">SPARK-2737</key>
            <summary>ClassCastExceptions when collect()ing JavaRDDs&apos; underlying Scala RDDs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="joshrosen">Josh Rosen</assignee>
                                    <reporter username="joshrosen">Josh Rosen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Jul 2014 21:14:11 +0000</created>
                <updated>Wed, 23 Sep 2015 08:21:43 +0000</updated>
                            <resolved>Thu, 31 Jul 2014 05:42:02 +0000</resolved>
                                    <version>0.8.0</version>
                    <version>0.9.0</version>
                    <version>1.0.0</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Java API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14078398" author="apachespark" created="Tue, 29 Jul 2014 21:26:00 +0000"  >&lt;p&gt;User &apos;JoshRosen&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/1639&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/1639&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14078705" author="josephkb" created="Wed, 30 Jul 2014 00:38:17 +0000"  >&lt;p&gt;Relating to &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-2197&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;SPARK-2197 Spark invoke DecisionTree by Java &lt;/a&gt;, this makes the Java DecisionTree test get farther, but does not fix it completely.  Will examine logs more.&lt;/p&gt;</comment>
                            <comment id="14903542" author="glenn.strycker@gmail.com" created="Tue, 22 Sep 2015 22:08:11 +0000"  >&lt;p&gt;I am getting a similar error in Spark 1.3.0... see a new ticket I created:  &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-10762&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SPARK-10762&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14904141" author="srowen" created="Wed, 23 Sep 2015 08:21:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=glenn.strycker%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;glenn.strycker@gmail.com&quot;&gt;glenn.strycker@gmail.com&lt;/a&gt; you can use JIRA to link issues if you&apos;re pretty sure they&apos;re related. It&apos;s more visible than in a comment.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12756380">SPARK-4489</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12722462">SPARK-2197</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>408682</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 8 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ybif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>408680</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>