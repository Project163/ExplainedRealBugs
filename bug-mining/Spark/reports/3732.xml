<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:45:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-16106] TaskSchedulerImpl does not correctly handle new executors on existing hosts</title>
                <link>https://issues.apache.org/jira/browse/SPARK-16106</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;The TaskSchedulerImpl updates the set of executors and hosts in each call to &lt;tt&gt;resourceOffers&lt;/tt&gt;.  During this call, it also tracks whether there are any new executors observed in &lt;tt&gt;newExecAvail&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      executorIdToHost(o.executorId) = o.host
      executorIdToTaskCount.getOrElseUpdate(o.executorId, 0)
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!executorsByHost.contains(o.host)) {
        executorsByHost(o.host) = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashSet[&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;]()
        executorAdded(o.executorId, o.host)
        newExecAvail = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, this only detects when a new &lt;b&gt;host&lt;/b&gt; is added, not when an additional executor is added to an existing host (a relatively common event in dynamic allocation).&lt;/p&gt;

&lt;p&gt;The end result is that task locality and &lt;tt&gt;failedEpochs&lt;/tt&gt; is not updated correctly for new executors.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12981389">SPARK-16106</key>
            <summary>TaskSchedulerImpl does not correctly handle new executors on existing hosts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="irashid">Imran Rashid</assignee>
                                    <reporter username="irashid">Imran Rashid</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Jun 2016 15:35:59 +0000</created>
                <updated>Sun, 17 May 2020 17:48:06 +0000</updated>
                            <resolved>Mon, 27 Jun 2016 21:41:03 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.1.0</fixVersion>
                                    <component>Scheduler</component>
                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15342821" author="irashid" created="Tue, 21 Jun 2016 21:53:09 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kayousterhout&quot; class=&quot;user-hover&quot; rel=&quot;kayousterhout&quot;&gt;kayousterhout&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;After taking a closer look at this, I don&apos;t think its really a very big issue.  Since you&apos;ve already got some executor on the host, your locality level will already include &lt;b&gt;at least&lt;/b&gt; NODE_LOCAL.  Its possible that when you add another executor, now you can go to PROCESS_LOCAL &amp;#8211; but I can&apos;t think of how you&apos;d have a task which wants to be PROCESS_LOCAL in an executor which doesn&apos;t exist yet.&lt;/p&gt;

&lt;p&gt;There is also the issue w/ failedEpoch, I haven&apos;t wrapped my head around what the ramifications of that are yet.&lt;/p&gt;

&lt;p&gt;In any case, its confusing at the very least, might as well fix this.  But it might be reasonable to simply change &lt;tt&gt;executorAdded()&lt;/tt&gt; to &lt;tt&gt;hostAdded()&lt;/tt&gt; to clear up the naming, and leave the current behavior as well.&lt;/p&gt;</comment>
                            <comment id="15342926" author="apachespark" created="Tue, 21 Jun 2016 22:36:04 +0000"  >&lt;p&gt;User &apos;squito&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/13826&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/13826&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15351888" author="irashid" created="Mon, 27 Jun 2016 21:41:03 +0000"  >&lt;p&gt;Issue resolved by pull request 13826&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/13826&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/13826&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zth3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>