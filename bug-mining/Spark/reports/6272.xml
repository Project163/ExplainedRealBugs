<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:03:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-26776] Reduce Py4J communication cost in PySpark&apos;s execution barrier check</title>
                <link>https://issues.apache.org/jira/browse/SPARK-26776</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;I am investigating flaky tests. I realised that:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/workspace/SparkPullRequestBuilder/python/pyspark/rdd.py&quot;&lt;/span&gt;, line 2512, in __init__
        self.is_barrier = prev._is_barrier() or isFromBarrier
      File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/workspace/SparkPullRequestBuilder/python/pyspark/rdd.py&quot;&lt;/span&gt;, line 2412, in _is_barrier
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; self._jrdd.rdd().isBarrier()
      File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/workspace/SparkPullRequestBuilder/python/lib/py4j-0.10.8.1-src.zip/py4j/java_gateway.py&quot;&lt;/span&gt;, line 1286, in __call__
        answer, self.gateway_client, self.target_id, self.name)
      File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/workspace/SparkPullRequestBuilder/python/lib/py4j-0.10.8.1-src.zip/py4j/protocol.py&quot;&lt;/span&gt;, line 342, in get_return_value
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; OUTPUT_CONVERTER[type](answer[2:], gateway_client)
      File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/workspace/SparkPullRequestBuilder/python/lib/py4j-0.10.8.1-src.zip/py4j/java_gateway.py&quot;&lt;/span&gt;, line 2492, in &amp;lt;lambda&amp;gt;
        lambda target_id, gateway_client: JavaObject(target_id, gateway_client))
      File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/workspace/SparkPullRequestBuilder/python/lib/py4j-0.10.8.1-src.zip/py4j/java_gateway.py&quot;&lt;/span&gt;, line 1324, in __init__
        ThreadSafeFinalizer.add_finalizer(key, value)
      File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jenkins/workspace/SparkPullRequestBuilder/python/lib/py4j-0.10.8.1-src.zip/py4j/finalizer.py&quot;&lt;/span&gt;, line 43, in add_finalizer
        cls.finalizers[id] = weak_ref
      File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/lib64/pypy-2.5.1/lib-python/2.7/threading.py&quot;&lt;/span&gt;, line 216, in __exit__
        self.release()
      File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/lib64/pypy-2.5.1/lib-python/2.7/threading.py&quot;&lt;/span&gt;, line 208, in release
        self.__block.release()
    error: release unlocked lock
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I assume it might not be directly related with the test itself but I noticed that it prev._is_barrier() attempts to access via Py4J.&lt;/p&gt;

&lt;p&gt;Accessing via Py4J is expensive and IMHO it makes it flaky.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13212700">SPARK-26776</key>
            <summary>Reduce Py4J communication cost in PySpark&apos;s execution barrier check</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gurwls223">Hyukjin Kwon</assignee>
                                    <reporter username="gurwls223">Hyukjin Kwon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Jan 2019 02:42:49 +0000</created>
                <updated>Mon, 12 Dec 2022 17:50:46 +0000</updated>
                            <resolved>Wed, 30 Jan 2019 04:25:16 +0000</resolved>
                                    <version>2.4.0</version>
                    <version>3.0.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>PySpark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16755602" author="apachespark" created="Wed, 30 Jan 2019 02:45:13 +0000"  >&lt;p&gt;User &apos;HyukjinKwon&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/23690&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/23690&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16755605" author="apachespark" created="Wed, 30 Jan 2019 02:46:16 +0000"  >&lt;p&gt;User &apos;HyukjinKwon&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/23690&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/23690&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16755661" author="cloud_fan" created="Wed, 30 Jan 2019 04:25:16 +0000"  >&lt;p&gt;Issue resolved by pull request 23690&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/23690&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/23690&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13172332">SPARK-24822</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0gog:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>