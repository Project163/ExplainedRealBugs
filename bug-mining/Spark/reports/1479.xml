<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:24:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-1955] VertexRDD can incorrectly assume index sharing</title>
                <link>https://issues.apache.org/jira/browse/SPARK-1955</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Many VertexRDD operations (diff, leftJoin, innerJoin) can use a fast zip join if both operands are VertexRDDs sharing the same index (i.e., one operand is derived from the other). This check is implemented by matching on the operand type and using the fast join strategy if both are VertexRDDs.&lt;/p&gt;

&lt;p&gt;This is clearly fine when both do in fact share the same index. It is also fine when the two VertexRDDs have the same partitioner but different indexes, because each VertexPartition will detect the index mismatch and fall back to the slow but correct local join strategy.&lt;/p&gt;

&lt;p&gt;However, when they have different numbers of partitions or different partition functions, an exception or even silently incorrect results can occur.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.spark._
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.spark.graphx._

&lt;span class=&quot;code-comment&quot;&gt;// Construct VertexRDDs with different numbers of partitions
&lt;/span&gt;val a = VertexRDD(sc.parallelize(List((0L, 1), (1L, 2)), 1))
val b = VertexRDD(sc.parallelize(List((0L, 5)), 8))
&lt;span class=&quot;code-comment&quot;&gt;// Try to join them. Appears to work...
&lt;/span&gt;val c = a.innerJoin(b) { (vid, x, y) =&amp;gt; x + y }
&lt;span class=&quot;code-comment&quot;&gt;// ... but then fails with java.lang.IllegalArgumentException: Can&apos;t zip RDDs with unequal numbers of partitions
&lt;/span&gt;c.collect

&lt;span class=&quot;code-comment&quot;&gt;// Construct VertexRDDs with different partition functions
&lt;/span&gt;val a = VertexRDD(sc.parallelize(List((0L, 1), (1L, 2))).partitionBy(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashPartitioner(2)))
val bVerts = sc.parallelize(List((1L, 5)))
val b = VertexRDD(bVerts.partitionBy(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RangePartitioner(2, bVerts)))
&lt;span class=&quot;code-comment&quot;&gt;// Try to join them. We expect (1L, 7).
&lt;/span&gt;val c = a.innerJoin(b) { (vid, x, y) =&amp;gt; x + y }
&lt;span class=&quot;code-comment&quot;&gt;// Silent failure: we get an empty set!
&lt;/span&gt;c.collect
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;VertexRDD should check equality of partitioners before using the fast zip join. If the partitioners are different, the two datasets should be automatically co-partitioned.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12717153">SPARK-1955</key>
            <summary>VertexRDD can incorrectly assume index sharing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="boyork">Brennon York</assignee>
                                    <reporter username="ankurd">Ankur Dave</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 May 2014 21:57:43 +0000</created>
                <updated>Wed, 25 Feb 2015 22:15:48 +0000</updated>
                            <resolved>Wed, 25 Feb 2015 22:15:48 +0000</resolved>
                                    <version>0.9.0</version>
                    <version>0.9.1</version>
                    <version>1.0.0</version>
                                    <fixVersion>1.2.2</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>GraphX</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14062792" author="ankurd" created="Tue, 15 Jul 2014 22:46:26 +0000"  >&lt;p&gt;IndexedRDD fixes this issue.&lt;/p&gt;</comment>
                            <comment id="14319661" author="boyork" created="Fri, 13 Feb 2015 06:34:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ankurdave&quot; class=&quot;user-hover&quot; rel=&quot;ankurdave&quot;&gt;ankurdave&lt;/a&gt; if you haven&apos;t started on this I can take it since it relates heavily to &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-4600&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;SPARK-4600&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-5790&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;SPARK-5790&lt;/a&gt;. If you&apos;ve already started work though let me know &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14319672" author="ankurd" created="Fri, 13 Feb 2015 07:01:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=boyork&quot; class=&quot;user-hover&quot; rel=&quot;boyork&quot;&gt;boyork&lt;/a&gt; Thanks, it would be great if you could take this. I think the fix should be pretty simple: in each of the VertexRDD functions, check partitioner equality and repartition the other RDD if unequal, as in &lt;a href=&quot;https://github.com/amplab/spark-indexedrdd/blob/master/src/main/scala/edu/berkeley/cs/amplab/spark/indexedrdd/IndexedRDDLike.scala#L206&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/amplab/spark-indexedrdd/blob/master/src/main/scala/edu/berkeley/cs/amplab/spark/indexedrdd/IndexedRDDLike.scala#L206&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14329246" author="apachespark" created="Fri, 20 Feb 2015 17:46:01 +0000"  >&lt;p&gt;User &apos;brennonyork&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/4705&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/4705&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14337334" author="ankurd" created="Wed, 25 Feb 2015 22:15:48 +0000"  >&lt;p&gt;Issue resolved by pull request 4705&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/4705&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/4705&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12725414">SPARK-2365</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12774754">SPARK-5790</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>395360</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 38 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1w2jb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>395490</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>