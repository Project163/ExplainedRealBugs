<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:44:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-15092] toDebugString missing from ML DecisionTreeClassifier</title>
                <link>https://issues.apache.org/jira/browse/SPARK-15092</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;The attribute toDebugString is missing from the DecisionTreeClassifier and DecisionTreeClassifierModel from ML. The attribute exists on the MLLib DecisionTree model. &lt;/p&gt;

&lt;p&gt;There&apos;s no way to check or print the model tree structure from the ML.&lt;/p&gt;

&lt;p&gt;The basic code for it is this:&lt;/p&gt;


&lt;p&gt;rom pyspark.ml import Pipeline&lt;br/&gt;
from pyspark.ml.feature import VectorAssembler, StringIndexer&lt;br/&gt;
from pyspark.ml.classification import DecisionTreeClassifier&lt;/p&gt;

&lt;p&gt;cl = DecisionTreeClassifier(labelCol=&apos;target_idx&apos;, featuresCol=&apos;features&apos;)&lt;br/&gt;
pipe = Pipeline(stages=&lt;span class=&quot;error&quot;&gt;&amp;#91;target_index, assembler, cl&amp;#93;&lt;/span&gt;)&lt;br/&gt;
model = pipe.fit(df_train)&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Prediction and model evaluation&lt;br/&gt;
predictions = model.transform(df_test)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;mc_evaluator = MulticlassClassificationEvaluator(&lt;br/&gt;
labelCol=&quot;target_idx&quot;, predictionCol=&quot;prediction&quot;, metricName=&quot;precision&quot;    )&lt;/p&gt;

&lt;p&gt;accuracy = mc_evaluator.evaluate(predictions)&lt;br/&gt;
print(&quot;Test Error = {}&quot;.format(1.0 - accuracy))&lt;/p&gt;

&lt;p&gt;now it would be great to be able to do what is being done on the MLLib model:&lt;/p&gt;

&lt;p&gt;print model.toDebugString(),  # it already has newline&lt;br/&gt;
        DecisionTreeModel classifier of depth 1 with 3 nodes&lt;br/&gt;
          If (feature 0 &amp;lt;= 0.0)&lt;br/&gt;
           Predict: 0.0&lt;br/&gt;
          Else (feature 0 &amp;gt; 0.0)&lt;br/&gt;
           Predict: 1.0&lt;/p&gt;

&lt;p&gt;but there&apos;s no toDebugString attribute either to the pipeline model or the DecisionTreeClassifier model:&lt;/p&gt;

&lt;p&gt;cl.toDebugString()&lt;br/&gt;
Attribute Error&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://spark.apache.org/docs/1.6.0/api/python/_modules/pyspark/mllib/tree.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://spark.apache.org/docs/1.6.0/api/python/_modules/pyspark/mllib/tree.html&lt;/a&gt;&lt;/p&gt;
</description>
                <environment>&lt;p&gt;HDP 2.3.4, Red Hat 6.7&lt;/p&gt;</environment>
        <key id="12964679">SPARK-15092</key>
            <summary>toDebugString missing from ML DecisionTreeClassifier</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="holden">Holden Karau</assignee>
                                    <reporter username="ispmarin">Ivan SPM</reporter>
                        <labels>
                            <label>features</label>
                    </labels>
                <created>Tue, 3 May 2016 14:42:32 +0000</created>
                <updated>Thu, 2 Jun 2016 22:56:33 +0000</updated>
                            <resolved>Thu, 2 Jun 2016 22:56:33 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>ML</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15268814" author="ispmarin" created="Tue, 3 May 2016 14:43:34 +0000"  >&lt;p&gt;Of course, this is for PySpark.&lt;/p&gt;</comment>
                            <comment id="15269310" author="holdenk" created="Tue, 3 May 2016 18:32:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ispmarin&quot; class=&quot;user-hover&quot; rel=&quot;ispmarin&quot;&gt;ispmarin&lt;/a&gt;For PySpark you can actually list the component as PySpark as well as ML. (Note though its also not present in Scala ML).&lt;/p&gt;</comment>
                            <comment id="15269327" author="ispmarin" created="Tue, 3 May 2016 18:40:29 +0000"  >&lt;p&gt;Care to explain? How can you list decisions and thresholds with ML?&lt;/p&gt;</comment>
                            <comment id="15269333" author="holdenk" created="Tue, 3 May 2016 18:48:51 +0000"  >&lt;p&gt;Sorry I should have clarified, I meant when you are creating your JIRA you can explicitly list PySpark as a the component that is impacted so that people interested in working on Python issues can find it (however in this case since it is also missing in the Scala API that would likely be a better place to start anyways).&lt;/p&gt;</comment>
                            <comment id="15269426" author="ispmarin" created="Tue, 3 May 2016 19:37:41 +0000"  >&lt;p&gt;It seems from the code that the toDebugString() on MLLib is just a print on the _java_model available:&lt;/p&gt;

&lt;p&gt;    def toDebugString(self):&lt;br/&gt;
        &quot;&quot;&quot; Full model &quot;&quot;&quot;&lt;br/&gt;
        return self._java_model.toDebugString()&lt;/p&gt;

&lt;p&gt;But no _java_model is available on the ML stack. I&apos;m hopeful that it could be an easy fix but I&apos;m not sure about the interface (or how one could do it, actually).&lt;/p&gt;</comment>
                            <comment id="15271872" author="apachespark" created="Thu, 5 May 2016 04:27:08 +0000"  >&lt;p&gt;User &apos;holdenk&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/12919&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/12919&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15271873" author="holdenk" created="Thu, 5 May 2016 04:27:40 +0000"  >&lt;p&gt;Ah yes, it is present in Java so it is a simple fix. I&apos;ve created a PR for this as part of our API audit with Python ML for 2.0 so hopefully we can get something in soon.&lt;/p&gt;</comment>
                            <comment id="15272956" author="apachespark" created="Thu, 5 May 2016 19:57:03 +0000"  >&lt;p&gt;User &apos;holdenk&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/12937&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/12937&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15313242" author="mlnick" created="Thu, 2 Jun 2016 22:56:33 +0000"  >&lt;p&gt;Issue resolved by pull request 12919&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/12919&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/12919&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12965157">SPARK-15139</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 24 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2x3un:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>