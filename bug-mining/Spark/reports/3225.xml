<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:40:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-13776] Web UI is not available after ./sbin/start-master.sh</title>
                <link>https://issues.apache.org/jira/browse/SPARK-13776</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;The Apache Spark Web UI fails to become available after starting a Spark master in stand-alone mode:&lt;/p&gt;

&lt;p&gt;$ ./sbin/start-master.sh&lt;/p&gt;

&lt;p&gt;The log file contains the following:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;cat spark-hadoop-org.apache.spark.deploy.master.Master-1-t5-8-002.out&lt;br/&gt;
Spark Command: /usr/java/bin/java -cp /usr/local/spark-1.6.0_nohadoop/conf/:/usr/local/spark-1.6.0_nohadoop/assembly/target/scala-2.10/spark-assembly-1.6.0-hadoop2.2.0.jar:/usr/local/spark-1.6.0_nohadoop/lib_managed/jars/datanucleus-api-jdo-3.2.6.jar:/usr/local/spark-1.6.0_nohadoop/lib_managed/jars/datanucleus-rdbms-3.2.9.jar:/usr/local/spark-1.6.0_nohadoop/lib_managed/jars/datanucleus-core-3.2.10.jar -Xms1g -Xmx1g org.apache.spark.deploy.master.Master --ip t5-8-002 --port 7077 --webui-port 8080&lt;br/&gt;
========================================&lt;br/&gt;
16/01/27 12:00:42 WARN AbstractConnector: insufficient threads configured for SelectChannelConnector@0.0.0.0:8080&lt;br/&gt;
16/01/27 12:00:42 WARN AbstractConnector: insufficient threads configured for SelectChannelConnector@t5-8-002:6066&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I did some poking around and it seems that message is coming from Jetty and indicates a mismatch between Jetty&apos;s default maxThreads configuration and the actual number of CPUs available on the hardware (1024). I was not able to find a way to successfully change Jetty&apos;s configuration at run-time. &lt;/p&gt;

&lt;p&gt;Our work around was to disable CPUs until the WARN messages did not occur in the log file, which was when NCPUs = 504. &lt;/p&gt;

&lt;p&gt;I don&apos;t know for certain that this is isn&apos;t a known problem in Jetty from looking at their bug reports, but I wasn&apos;t able to locate a Jetty issue that described this problem.&lt;/p&gt;

&lt;p&gt;While not specifically an Apache Spark problem, I thought documenting it would at least be helpful.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Solaris 11.3, Oracle SPARC T-5 8 with 1024 hardware threads&lt;/p&gt;</environment>
        <key id="12948457">SPARK-13776</key>
            <summary>Web UI is not available after ./sbin/start-master.sh</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zsxwing">Shixiong Zhu</assignee>
                                    <reporter username="erik.oshaughnessy">Erik O&apos;Shaughnessy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Mar 2016 17:16:08 +0000</created>
                <updated>Thu, 17 Mar 2016 13:05:17 +0000</updated>
                            <resolved>Thu, 17 Mar 2016 13:05:11 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>Web UI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15187600" author="srowen" created="Wed, 9 Mar 2016 18:34:45 +0000"  >&lt;p&gt;I don&apos;t think I&apos;d call it major if it only affects 1024 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; core machines.&lt;br/&gt;
Yes, this may be something that can&apos;t be worked around in Spark, I don&apos;t know. I&apos;m surprised Jetty cares if it has fewer threads than cores here.&lt;/p&gt;</comment>
                            <comment id="15187693" author="erik.oshaughnessy" created="Wed, 9 Mar 2016 19:07:48 +0000"  >&lt;p&gt;Quite agree, this is a Minor and not Major problem. This is the first JIRA I&apos;ve filled out and I missed updating that field. That&apos;s my story and I&apos;m sticking with it. &lt;/p&gt;</comment>
                            <comment id="15188206" author="apachespark" created="Wed, 9 Mar 2016 22:27:03 +0000"  >&lt;p&gt;User &apos;zsxwing&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/11615&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11615&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15188208" author="zsxwing" created="Wed, 9 Mar 2016 22:27:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erik.oshaughnessy&quot; class=&quot;user-hover&quot; rel=&quot;erik.oshaughnessy&quot;&gt;erik.oshaughnessy&lt;/a&gt; could you test this one: &lt;a href=&quot;https://github.com/apache/spark/pull/11615&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11615&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15188276" author="erik.oshaughnessy" created="Wed, 9 Mar 2016 23:12:04 +0000"  >&lt;p&gt;Thanks Shixiong Zhu! I will need to build and schedule time on the hardware to test. I will update when I have something to report. It could be a day or two, hopefully less.&lt;/p&gt;</comment>
                            <comment id="15189906" author="erik.oshaughnessy" created="Thu, 10 Mar 2016 20:42:26 +0000"  >&lt;p&gt;I have built and tested your fix Shixiong Zhu.&lt;/p&gt;

&lt;p&gt;Starting the master on a machine with 1024 CPUs without setting spark.ui.threads results in the following log file and an unresponsive Web UI:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Spark Command: /usr/java/bin/java -cp /home/eoshaugh/local/spark/conf/:/home/eoshaugh/local/spark/assembly/target/scala-2.11/spark-assembly-2.0.0-SNAPSHOT-hadoop2.2.0.jar:/home/eoshaugh/local/spark/lib_managed/jars/datanucleus-api-jdo-3.2.6.jar:/home/eoshaugh/local/spark/lib_managed/jars/datanucleus-core-3.2.10.jar:/home/eoshaugh/local/spark/lib_managed/jars/datanucleus-rdbms-3.2.9.jar -Xms1g -Xmx1g org.apache.spark.deploy.master.Master --ip t5-8-003 --port 7077 --webui-port 8080&lt;br/&gt;
========================================&lt;br/&gt;
Using Spark&apos;s default log4j profile: org/apache/spark/log4j-defaults.properties&lt;br/&gt;
16/03/10 12:26:49 INFO Master: Started daemon with process name: 109175@t5-8-003&lt;br/&gt;
16/03/10 12:26:49 INFO Master: Registered signal handlers for &lt;span class=&quot;error&quot;&gt;&amp;#91;TERM, HUP, INT&amp;#93;&lt;/span&gt;&lt;br/&gt;
16/03/10 12:26:49 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable&lt;br/&gt;
16/03/10 12:26:49 INFO SecurityManager: Changing view acls to: eoshaugh&lt;br/&gt;
16/03/10 12:26:49 INFO SecurityManager: Changing modify acls to: eoshaugh&lt;br/&gt;
16/03/10 12:26:49 INFO SecurityManager: SecurityManager: authentication disabled; ui acls disabled; users with view permissions: Set(eoshaugh); users with modify permissions: Set(eoshaugh)&lt;br/&gt;
16/03/10 12:26:50 INFO Utils: Successfully started service &apos;sparkMaster&apos; on port 7077.&lt;br/&gt;
16/03/10 12:26:50 INFO Master: Starting Spark master at spark://t5-8-003:7077&lt;br/&gt;
16/03/10 12:26:50 INFO Master: Running Spark version 2.0.0-SNAPSHOT&lt;br/&gt;
16/03/10 12:26:50 WARN JettyUtils: Insufficient threads for Web UI. Automatically increase from 254 to 257. Please increase &quot;spark.ui.threads&quot; to make the Web UI available.&lt;br/&gt;
16/03/10 12:26:51 WARN AbstractConnector: insufficient threads configured for SelectChannelConnector@0.0.0.0:8080&lt;br/&gt;
16/03/10 12:26:51 INFO Utils: Successfully started service &apos;MasterUI&apos; on port 8080.&lt;br/&gt;
16/03/10 12:26:51 INFO MasterWebUI: Bound MasterWebUI to 0.0.0.0, and started at &lt;a href=&quot;http://10.137.232.160:8080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://10.137.232.160:8080&lt;/a&gt;&lt;br/&gt;
16/03/10 12:26:51 WARN AbstractConnector: insufficient threads configured for SelectChannelConnector@t5-8-003:6066&lt;br/&gt;
16/03/10 12:26:51 INFO Utils: Successfully started service on port 6066.&lt;br/&gt;
16/03/10 12:26:51 INFO StandaloneRestServer: Started REST server for submitting applications on port 6066&lt;br/&gt;
16/03/10 12:26:51 INFO Master: I have been elected leader! New state: ALIVE&lt;br/&gt;
16/03/10 12:31:51 ERROR Master: RECEIVED SIGNAL 15: SIGTERM&lt;br/&gt;
16/03/10 12:31:51 INFO ShutdownHookManager: Shutdown hook called&lt;br/&gt;
16/03/10 12:31:51 INFO ShutdownHookManager: Deleting directory /var/tmp/spark-2427f2ba-b859-4b35-b63c-f701ca7eae5e&lt;br/&gt;
16/03/10 12:31:51 INFO ShutdownHookManager: Deleting directory /var/tmp/spark-2427f2ba-b859-4b35-b63c-f701ca7eae5e/repl-603f43f2-6579-49cc-ab10-e2e4e35c454d&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;After adding &quot;spark.ui.threads 1024&quot; to conf/spark-defaults.conf, starting the master results in the following log and a responsive Web UI: &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Spark Command: /usr/java/bin/java -cp /home/eoshaugh/local/spark/conf/:/home/eoshaugh/local/spark/assembly/target/scala-2.11/spark-assembly-2.0.0-SNAPSHOT-hadoop2.2.0.jar:/home/eoshaugh/local/spark/lib_managed/jars/datanucleus-api-jdo-3.2.6.jar:/home/eoshaugh/local/spark/lib_managed/jars/datanucleus-core-3.2.10.jar:/home/eoshaugh/local/spark/lib_managed/jars/datanucleus-rdbms-3.2.9.jar -Xms1g -Xmx1g org.apache.spark.deploy.master.Master --ip t5-8-003 --port 7077 --webui-port 8080&lt;br/&gt;
========================================&lt;br/&gt;
Using Spark&apos;s default log4j profile: org/apache/spark/log4j-defaults.properties&lt;br/&gt;
16/03/10 12:31:58 INFO Master: Started daemon with process name: 109244@t5-8-003&lt;br/&gt;
16/03/10 12:31:58 INFO Master: Registered signal handlers for &lt;span class=&quot;error&quot;&gt;&amp;#91;TERM, HUP, INT&amp;#93;&lt;/span&gt;&lt;br/&gt;
16/03/10 12:31:58 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable&lt;br/&gt;
16/03/10 12:31:58 INFO SecurityManager: Changing view acls to: eoshaugh&lt;br/&gt;
16/03/10 12:31:58 INFO SecurityManager: Changing modify acls to: eoshaugh&lt;br/&gt;
16/03/10 12:31:58 INFO SecurityManager: SecurityManager: authentication disabled; ui acls disabled; users with view permissions: Set(eoshaugh); users with modify permissions: Set(eoshaugh)&lt;br/&gt;
16/03/10 12:31:59 INFO Utils: Successfully started service &apos;sparkMaster&apos; on port 7077.&lt;br/&gt;
16/03/10 12:31:59 INFO Master: Starting Spark master at spark://t5-8-003:7077&lt;br/&gt;
16/03/10 12:31:59 INFO Master: Running Spark version 2.0.0-SNAPSHOT&lt;br/&gt;
16/03/10 12:32:00 INFO Utils: Successfully started service &apos;MasterUI&apos; on port 8080.&lt;br/&gt;
16/03/10 12:32:00 INFO MasterWebUI: Bound MasterWebUI to 0.0.0.0, and started at &lt;a href=&quot;http://10.137.232.160:8080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://10.137.232.160:8080&lt;/a&gt;&lt;br/&gt;
16/03/10 12:32:00 WARN AbstractConnector: insufficient threads configured for SelectChannelConnector@t5-8-003:6066&lt;br/&gt;
16/03/10 12:32:00 INFO Utils: Successfully started service on port 6066.&lt;br/&gt;
16/03/10 12:32:00 INFO StandaloneRestServer: Started REST server for submitting applications on port 6066&lt;br/&gt;
16/03/10 12:32:00 INFO Master: I have been elected leader! New state: ALIVE&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;As you can see in this log file, there is still an &quot;insufficient threads&quot; WARN for the service starting on port 6066. I suspect that service also needs to inspect spark.ui.threads in a similar manner. &lt;/p&gt;</comment>
                            <comment id="15189936" author="zsxwing" created="Thu, 10 Mar 2016 21:06:19 +0000"  >&lt;p&gt;Looks I didn&apos;t detect the correct min thread number. Let me investigate more.&lt;/p&gt;</comment>
                            <comment id="15190227" author="zsxwing" created="Fri, 11 Mar 2016 00:25:28 +0000"  >&lt;p&gt;I didn&apos;t count the number of selectors. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erik.oshaughnessy&quot; class=&quot;user-hover&quot; rel=&quot;erik.oshaughnessy&quot;&gt;erik.oshaughnessy&lt;/a&gt; could you try my PR again? Thanks!&lt;/p&gt;</comment>
                            <comment id="15191233" author="erik.oshaughnessy" created="Fri, 11 Mar 2016 17:10:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zsxwing&quot; class=&quot;user-hover&quot; rel=&quot;zsxwing&quot;&gt;zsxwing&lt;/a&gt; I&apos;ve got your PR building, should have a test completed in an hour or so. &lt;/p&gt;</comment>
                            <comment id="15191330" author="erik.oshaughnessy" created="Fri, 11 Mar 2016 18:25:19 +0000"  >&lt;p&gt;Looks good. Here is the log without a conf/spark-default.conf file:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Spark Command: /usr/java/bin/java -cp /home/eoshaugh/local/spark/conf/:/home/eoshaugh/local/spark/assembly/target/scala-2.11/spark-assembly-2.0.0-SNAPSHOT-hadoop2.2.0.jar:/home/eoshaugh/local/spark/lib_managed/jars/datanucleus-api-jdo-3.2.6.jar:/home/eoshaugh/local/spark/lib_managed/jars/datanucleus-core-3.2.10.jar:/home/eoshaugh/local/spark/lib_managed/jars/datanucleus-rdbms-3.2.9.jar -Xms1g -Xmx1g org.apache.spark.deploy.master.Master --ip t5-8-003 --port 7077 --webui-port 8080&lt;br/&gt;
========================================&lt;br/&gt;
Using Spark&apos;s default log4j profile: org/apache/spark/log4j-defaults.properties&lt;br/&gt;
16/03/11 10:18:33 INFO Master: Started daemon with process name: 114940@t5-8-003&lt;br/&gt;
16/03/11 10:18:33 INFO Master: Registered signal handlers for &lt;span class=&quot;error&quot;&gt;&amp;#91;TERM, HUP, INT&amp;#93;&lt;/span&gt;&lt;br/&gt;
16/03/11 10:18:33 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable&lt;br/&gt;
16/03/11 10:18:33 INFO SecurityManager: Changing view acls to: eoshaugh&lt;br/&gt;
16/03/11 10:18:33 INFO SecurityManager: Changing modify acls to: eoshaugh&lt;br/&gt;
16/03/11 10:18:33 INFO SecurityManager: SecurityManager: authentication disabled; ui acls disabled; users with view permissions: Set(eoshaugh); users with modify permissions: Set(eoshaugh)&lt;br/&gt;
16/03/11 10:18:34 INFO Utils: Successfully started service &apos;sparkMaster&apos; on port 7077.&lt;br/&gt;
16/03/11 10:18:34 INFO Master: Starting Spark master at spark://t5-8-003:7077&lt;br/&gt;
16/03/11 10:18:34 INFO Master: Running Spark version 2.0.0-SNAPSHOT&lt;br/&gt;
16/03/11 10:18:34 INFO Utils: Successfully started service &apos;MasterUI&apos; on port 8080.&lt;br/&gt;
16/03/11 10:18:34 INFO MasterWebUI: Bound MasterWebUI to 0.0.0.0, and started at &lt;a href=&quot;http://10.137.232.160:8080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://10.137.232.160:8080&lt;/a&gt;&lt;br/&gt;
16/03/11 10:18:34 WARN AbstractConnector: insufficient threads configured for SelectChannelConnector@t5-8-003:6066&lt;br/&gt;
16/03/11 10:18:34 INFO Utils: Successfully started service on port 6066.&lt;br/&gt;
16/03/11 10:18:34 INFO StandaloneRestServer: Started REST server for submitting applications on port 6066&lt;br/&gt;
16/03/11 10:18:35 INFO Master: I have been elected leader! New state: ALIVE&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="15199473" author="srowen" created="Thu, 17 Mar 2016 13:05:11 +0000"  >&lt;p&gt;Issue resolved by pull request 11615&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/11615&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11615&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2uesv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>