<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:50:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-19019] PySpark does not work with Python 3.6.0</title>
                <link>https://issues.apache.org/jira/browse/SPARK-19019</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Currently, PySpark does not work with Python 3.6.0.&lt;/p&gt;

&lt;p&gt;Running &lt;tt&gt;./bin/pyspark&lt;/tt&gt; simply throws the error as below:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Traceback (most recent call last):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;.../spark/python/pyspark/shell.py&quot;&lt;/span&gt;, line 30, in &amp;lt;module&amp;gt;
    &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; pyspark
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;.../spark/python/pyspark/__init__.py&quot;&lt;/span&gt;, line 46, in &amp;lt;module&amp;gt;
    from pyspark.context &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; SparkContext
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;.../spark/python/pyspark/context.py&quot;&lt;/span&gt;, line 36, in &amp;lt;module&amp;gt;
    from pyspark.java_gateway &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; launch_gateway
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;.../spark/python/pyspark/java_gateway.py&quot;&lt;/span&gt;, line 31, in &amp;lt;module&amp;gt;
    from py4j.java_gateway &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java_import, JavaGateway, GatewayClient
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;frozen importlib._bootstrap&amp;gt;&quot;&lt;/span&gt;, line 961, in _find_and_load
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;frozen importlib._bootstrap&amp;gt;&quot;&lt;/span&gt;, line 950, in _find_and_load_unlocked
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;frozen importlib._bootstrap&amp;gt;&quot;&lt;/span&gt;, line 646, in _load_unlocked
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;frozen importlib._bootstrap&amp;gt;&quot;&lt;/span&gt;, line 616, in _load_backward_compatible
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;.../spark/python/lib/py4j-0.10.4-src.zip/py4j/java_gateway.py&quot;&lt;/span&gt;, line 18, in &amp;lt;module&amp;gt;
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/Cellar/python3/3.6.0/Frameworks/Python.framework/Versions/3.6/lib/python3.6/pydoc.py&quot;&lt;/span&gt;, line 62, in &amp;lt;module&amp;gt;
    &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; pkgutil
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/Cellar/python3/3.6.0/Frameworks/Python.framework/Versions/3.6/lib/python3.6/pkgutil.py&quot;&lt;/span&gt;, line 22, in &amp;lt;module&amp;gt;
    ModuleInfo = namedtuple(&lt;span class=&quot;code-quote&quot;&gt;&apos;ModuleInfo&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;module_finder name ispkg&apos;&lt;/span&gt;)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;.../spark/python/pyspark/serializers.py&quot;&lt;/span&gt;, line 394, in namedtuple
    cls = _old_namedtuple(*args, **kwargs)
TypeError: namedtuple() missing 3 required keyword-only arguments: &lt;span class=&quot;code-quote&quot;&gt;&apos;verbose&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;rename&apos;&lt;/span&gt;, and &lt;span class=&quot;code-quote&quot;&gt;&apos;module&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is in &lt;a href=&quot;https://github.com/apache/spark/blob/3c68944b229aaaeeaee3efcbae3e3be9a2914855/python/pyspark/serializers.py#L386-L394&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/blob/3c68944b229aaaeeaee3efcbae3e3be9a2914855/python/pyspark/serializers.py#L386-L394&lt;/a&gt; as the error says and the cause seems because the arguments of &lt;tt&gt;namedtuple&lt;/tt&gt; are now completely keyword-only arguments from Python 3.6.0 (See &lt;a href=&quot;https://bugs.python.org/issue25628&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.python.org/issue25628&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;We currently copy this function via &lt;tt&gt;types.FunctionType&lt;/tt&gt; which does not set the default values of keyword-only arguments (meaning &lt;tt&gt;namedtuple._&lt;em&gt;kwdefaults&lt;/em&gt;_&lt;/tt&gt;) and this seems causing internally missing values in the function (non-bound arguments).&lt;/p&gt;


&lt;p&gt;This ends up as below:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; types
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; collections

def _copy_func(f):
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; types.FunctionType(f.__code__, f.__globals__, f.__name__,
        f.__defaults__, f.__closure__)

_old_namedtuple = _copy_func(collections.namedtuple)

_old_namedtuple(, &lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;)
_old_namedtuple(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;If we call as below:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt;&amp;gt;&amp;gt; _old_namedtuple(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;)
Traceback (most recent call last):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;stdin&amp;gt;&quot;&lt;/span&gt;, line 1, in &amp;lt;module&amp;gt;
TypeError: namedtuple() missing 3 required keyword-only arguments: &lt;span class=&quot;code-quote&quot;&gt;&apos;verbose&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;rename&apos;&lt;/span&gt;, and &lt;span class=&quot;code-quote&quot;&gt;&apos;module&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;It throws an exception as above becuase &lt;tt&gt;_&lt;em&gt;kwdefaults&lt;/em&gt;_&lt;/tt&gt; for required keyword arguments seem unset in the copied function. So, if we give explicit value for these,&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt;&amp;gt;&amp;gt; _old_namedtuple(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;, verbose=False, rename=False, module=None)
&amp;lt;class &lt;span class=&quot;code-quote&quot;&gt;&apos;__main__.a&apos;&lt;/span&gt;&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It works fine.&lt;/p&gt;

&lt;p&gt;It seems now we should properly set these into the hijected one.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13030996">SPARK-19019</key>
            <summary>PySpark does not work with Python 3.6.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gurwls223">Hyukjin Kwon</assignee>
                                    <reporter username="gurwls223">Hyukjin Kwon</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Dec 2016 02:40:53 +0000</created>
                <updated>Mon, 12 Dec 2022 18:10:46 +0000</updated>
                            <resolved>Tue, 17 Jan 2017 17:53:30 +0000</resolved>
                                                    <fixVersion>1.6.4</fixVersion>
                    <fixVersion>2.0.3</fixVersion>
                    <fixVersion>2.1.1</fixVersion>
                    <fixVersion>2.2.0</fixVersion>
                                    <component>PySpark</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>15</watches>
                                                                                                                <comments>
                            <comment id="15784329" author="apachespark" created="Thu, 29 Dec 2016 02:47:04 +0000"  >&lt;p&gt;User &apos;HyukjinKwon&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/16429&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/16429&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15826485" author="davies" created="Tue, 17 Jan 2017 17:53:30 +0000"  >&lt;p&gt;Issue resolved by pull request 16429&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/16429&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/16429&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15931288" author="zero323" created="Sat, 18 Mar 2017 17:17:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davies&quot; class=&quot;user-hover&quot; rel=&quot;davies&quot;&gt;davies&lt;/a&gt; Could it be backported to 1.6 and 2.0?&lt;/p&gt;</comment>
                            <comment id="15931527" author="henrytxz" created="Sun, 19 Mar 2017 02:00:40 +0000"  >&lt;p&gt;Would also be interested in the answer to Maciej&apos;s question (for 2.0) and when is 2.1.1 scheduled to be released? Thank you!&lt;/p&gt;</comment>
                            <comment id="15931566" author="gurwls223" created="Sun, 19 Mar 2017 04:41:20 +0000"  >&lt;p&gt;Let me try to make a PR to backport this if this is confirmed.&lt;/p&gt;</comment>
                            <comment id="15934331" author="apachespark" created="Tue, 21 Mar 2017 09:29:03 +0000"  >&lt;p&gt;User &apos;HyukjinKwon&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/17374&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/17374&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15934362" author="apachespark" created="Tue, 21 Mar 2017 09:54:02 +0000"  >&lt;p&gt;User &apos;HyukjinKwon&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/17375&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/17375&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15992699" author="gurwls223" created="Tue, 2 May 2017 10:49:57 +0000"  >&lt;p&gt;To solve this problem fully, I had to port cloudpickle change too in the PR. Only fixing hijected one described above dose not fully solve this issue. Please refer the discussion in the PR and the change.&lt;/p&gt;</comment>
                            <comment id="16127330" author="mrmathias" created="Tue, 15 Aug 2017 14:50:57 +0000"  >&lt;p&gt;Just got this error post fix on spark 2.1:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Traceback (most recent call last):
    File &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/anaconda3/lib/python3.6/runpy.py&quot;&lt;/span&gt;, line 183, in _run_module_as_main
      mod_name, mod_spec, code = _get_module_details(mod_name, _Error)
    File &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/anaconda3/lib/python3.6/runpy.py&quot;&lt;/span&gt;, line 109, in _get_module_details
      __import__(pkg_name)
    File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/hdp/current/spark-client/python/pyspark/__init__.py&quot;&lt;/span&gt;, line 41, in &amp;lt;module&amp;gt;
      from pyspark.context &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; SparkContext
    File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/hdp/current/spark-client/python/pyspark/context.py&quot;&lt;/span&gt;, line 33, in &amp;lt;module&amp;gt;
      from pyspark.java_gateway &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; launch_gateway
    File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/hdp/current/spark-client/python/pyspark/java_gateway.py&quot;&lt;/span&gt;, line 25, in &amp;lt;module&amp;gt;
      &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; platform
    File &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/anaconda3/lib/python3.6/platform.py&quot;&lt;/span&gt;, line 886, in &amp;lt;module&amp;gt;
      &lt;span class=&quot;code-quote&quot;&gt;&quot;system node release version machine processor&quot;&lt;/span&gt;)
    File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/hdp/current/spark-client/python/pyspark/serializers.py&quot;&lt;/span&gt;, line 381, in namedtuple
      cls = _old_namedtuple(*args, **kwargs)
  TypeError: namedtuple() missing 3 required keyword-only arguments: &lt;span class=&quot;code-quote&quot;&gt;&apos;verbose&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;rename&apos;&lt;/span&gt;, and &lt;span class=&quot;code-quote&quot;&gt;&apos;module&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16127339" author="gurwls223" created="Tue, 15 Aug 2017 14:55:45 +0000"  >&lt;p&gt;I think this was backported into Spark 2.1.1. Was your Spark version, 2.1.1+?&lt;/p&gt;</comment>
                            <comment id="16128593" author="mrmathias" created="Wed, 16 Aug 2017 10:13:22 +0000"  >&lt;p&gt;Yea. This was just a pythonpath mishab on our end. 2.1.1 is a-okay.&lt;/p&gt;</comment>
                            <comment id="16776567" author="parixit" created="Mon, 25 Feb 2019 06:41:06 +0000"  >&lt;p&gt;I am facing the same issue in Spark1.6.0?&#160;Was this fixed for Spark 1.6.0 version? If not, are there any plans to do so?&lt;/p&gt;</comment>
                            <comment id="16776582" author="kabhwan" created="Mon, 25 Feb 2019 07:26:25 +0000"  >&lt;p&gt;According to fix versions, fixed version of 1.6.x version line is 1.6.4. You need to upgrade to 1.6.4, but I believe 1.6 is EOL and no more support on community. You may need to upgrade the version to 2.3.3 (if you feel more safer to have bugfix versions in minor version) or 2.4.0.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3837z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>