<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 19:05:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-27896] Fix definition of clustering silhouette coefficient for 1-element clusters</title>
                <link>https://issues.apache.org/jira/browse/SPARK-27896</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Reported by Samuel Kubler via email:&lt;/p&gt;

&lt;p&gt;In the code &lt;a href=&quot;https://github.com/apache/spark/blob/master/mllib/src/main/scala/org/apache/spark/ml/evaluation/ClusteringEvaluator.scala&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/blob/master/mllib/src/main/scala/org/apache/spark/ml/evaluation/ClusteringEvaluator.scala&lt;/a&gt;, I think there is a little mistake in the class &#8220;Silhouette&#8221; when you calculate the Silhouette coefficient for a point. Indeed, according to the scientific paper of reference &#8220;Silhouettes:  a graphical aid to the interpretation and validation of cluster analysis&#8221; Peter J. ROUSSEEUW 1986, for the points which are alone in a cluster it is not the currentClusterDissimilarity  which is supposed to be equal to 0 like it is the case in your code (&#8220;val currentClusterDissimilarity = if (pointClusterNumOfPoints == 1) &lt;/p&gt;
{0.0}
&lt;p&gt;&#8221; but the silhouette coefficient itself. Indeed, &#8220;When cluster A contains only a single object it is unclear how a&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; should be defined, and the we simply set s&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; equal to zero&#8221;.&lt;/p&gt;

&lt;p&gt;The problem of defining the currentClusterDissimilarity to zero like you have done is that you can&#8217;t use the silhouette coefficient anymore as a criterion to determine the optimal value of the number of clusters in your clustering process because your algorithm will answer that the more clusters you have, the better will be your clustering algorithm. Indeed, in that case when the number of clustering classes increases, s&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; converges toward 1. (so your algorithm seems to be more efficient) I have, beside, check this result of my own clustering example.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13236827">SPARK-27896</key>
            <summary>Fix definition of clustering silhouette coefficient for 1-element clusters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srowen">Sean R. Owen</assignee>
                                    <reporter username="srowen">Sean R. Owen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 May 2019 12:21:40 +0000</created>
                <updated>Sun, 2 Jun 2019 18:50:26 +0000</updated>
                            <resolved>Fri, 31 May 2019 23:30:22 +0000</resolved>
                                    <version>2.4.3</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>ML</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="16852962" author="srowen" created="Fri, 31 May 2019 12:22:27 +0000"  >&lt;p&gt;Copying follow up from email:&lt;/p&gt;

&lt;p&gt;Yes the paper does say the silhouette is 0 in this case. That&apos;s an&lt;br/&gt;
argument to change it.&lt;/p&gt;

&lt;p&gt;On the other hand, I am not sure if I agree with the paper here. If A&lt;br/&gt;
consists of one point, then that point&apos;s assignment is optimal in a&lt;br/&gt;
sense. Setting the silhouette to 0 indicates that assigning it to B,&lt;br/&gt;
which is a cluster of more distant points, is just as good. I don&apos;t&lt;br/&gt;
think that makes as much sense as 1, which it returns now.&lt;/p&gt;

&lt;p&gt;You could argue that silhouette is specifically penalizing, in a way,&lt;br/&gt;
this type of assignment in a way that Euclidean distance does not.&lt;br/&gt;
Wikipedia&apos;s definition follows the paper:&lt;br/&gt;
&lt;a href=&quot;https://en.wikipedia.org/wiki/Silhouette_(clustering&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://en.wikipedia.org/wiki/Silhouette_(clustering&lt;/a&gt;)&lt;br/&gt;
It looks like sklearn also follows the paper&apos;s definition:&lt;br/&gt;
&lt;a href=&quot;https://github.com/scikit-learn/scikit-learn/blob/7813f7efb/sklearn/metrics/cluster/unsupervised.py#L235&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/scikit-learn/scikit-learn/blob/7813f7efb/sklearn/metrics/cluster/unsupervised.py#L235&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16853476" author="dongjoon" created="Fri, 31 May 2019 23:30:22 +0000"  >&lt;p&gt;This is resolved via&#160;&lt;a href=&quot;https://github.com/apache/spark/pull/24756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/24756&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 24 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z03aew:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12339177">3.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>