<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:30:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-9750] SparseMatrix should override equals</title>
                <link>https://issues.apache.org/jira/browse/SPARK-9750</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/spark/blob/9897cc5e3d6c70f7e45e887e2c6fc24dfa1adada/mllib/src/main/scala/org/apache/spark/mllib/linalg/Matrices.scala#L479&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SparseMatrix&lt;/a&gt; should override equals to ensure that two instances of the same matrix are equal.&lt;/p&gt;

&lt;p&gt;This implementation should take into account the &lt;tt&gt;isTransposed&lt;/tt&gt; flag and &lt;tt&gt;values&lt;/tt&gt; may not be in the same order.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12853050">SPARK-9750</key>
            <summary>SparseMatrix should override equals</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fliang">Feynman Liang</assignee>
                                    <reporter username="fliang">Feynman Liang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Aug 2015 20:52:25 +0000</created>
                <updated>Thu, 1 Oct 2015 21:30:47 +0000</updated>
                            <resolved>Tue, 11 Aug 2015 19:50:31 +0000</resolved>
                                                    <fixVersion>1.5.0</fixVersion>
                                    <component>MLlib</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14662536" author="apachespark" created="Fri, 7 Aug 2015 22:12:07 +0000"  >&lt;p&gt;User &apos;feynmanliang&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/8042&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/8042&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14662538" author="josephkb" created="Fri, 7 Aug 2015 22:12:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fliang&quot; class=&quot;user-hover&quot; rel=&quot;fliang&quot;&gt;fliang&lt;/a&gt; Are you working on this?&lt;/p&gt;</comment>
                            <comment id="14662566" author="fliang" created="Fri, 7 Aug 2015 22:28:00 +0000"  >&lt;p&gt;Yep.&lt;/p&gt;</comment>
                            <comment id="14680566" author="josephkb" created="Mon, 10 Aug 2015 19:00:03 +0000"  >&lt;p&gt;This JIRA should probably be expanded to include DenseMatrix too.  Currently, DenseMatrix.equals always returns false for comparisons with SparseMatrix instances.&lt;/p&gt;</comment>
                            <comment id="14682365" author="josephkb" created="Tue, 11 Aug 2015 19:50:32 +0000"  >&lt;p&gt;Issue resolved by pull request 8042&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/8042&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/8042&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14694707" author="mengxr" created="Thu, 13 Aug 2015 05:22:35 +0000"  >&lt;p&gt;Btw, this duplicates &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-6364&quot; title=&quot;hashCode and equals for Matrices&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-6364&quot;&gt;&lt;del&gt;SPARK-6364&lt;/del&gt;&lt;/a&gt;. I marked that one as duplicated since this was merged.&lt;/p&gt;</comment>
                            <comment id="14695721" author="josephkb" created="Thu, 13 Aug 2015 18:22:02 +0000"  >&lt;p&gt;Discussed with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mengxr&quot; class=&quot;user-hover&quot; rel=&quot;mengxr&quot;&gt;mengxr&lt;/a&gt;: We&apos;re going to revert this for 1.5 and put it in 1.6 instead.&lt;/p&gt;</comment>
                            <comment id="14696046" author="josephkb" created="Thu, 13 Aug 2015 22:15:53 +0000"  >&lt;p&gt;My understanding is as follows.  Does this sound right?&lt;/p&gt;

&lt;p&gt;Terminology:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;literal equality: ignores semantics of tranpose, sparsity, etc., and simply compares objects for exact equality&lt;/li&gt;
	&lt;li&gt;semantic equality: equality in linear algebra semantics, e.g., as Breeze does&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;(update) Scratching out my previous assessment since I did not realize default hash codes are sometimes implemented using references, not actual values.  See &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mengxr&quot; class=&quot;user-hover&quot; rel=&quot;mengxr&quot;&gt;mengxr&lt;/a&gt;&apos;s list below instead.&lt;/p&gt;

&lt;p&gt;&lt;del&gt;Status before this PR:&lt;/del&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;del&gt;Python&lt;/del&gt;
	&lt;ul&gt;
		&lt;li&gt;&lt;del&gt;Vectors: eq implements literal equality.  Default hash.&lt;/del&gt;&lt;/li&gt;
		&lt;li&gt;&lt;del&gt;Matrices: eq implements semantic equality.  Default hash. *&lt;b&gt;&lt;/del&gt;&lt;del&gt;&amp;gt;This is a bug.&lt;/b&gt;*&lt;/del&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;del&gt;Scala&lt;/del&gt;
	&lt;ul&gt;
		&lt;li&gt;&lt;del&gt;Vectors: equals() implements semantic equality.  hashCode() uses first 16 elements.&lt;/del&gt;&lt;/li&gt;
		&lt;li&gt;&lt;del&gt;DenseMatrix: equals() implements semantic equality.  hashCode() uses all elements.&lt;/del&gt;&lt;/li&gt;
		&lt;li&gt;&lt;del&gt;SparseMatrix: default equals(), hashCode().&lt;/del&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;del&gt;Thus, there is one bug which we could fix.  But it&apos;s probably not significant since it&apos;s been in MLlib for a while.&lt;/del&gt;&lt;/p&gt;</comment>
                            <comment id="14696049" author="josephkb" created="Thu, 13 Aug 2015 22:17:03 +0000"  >&lt;p&gt;The plan therefore is to:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Revert &lt;a href=&quot;https://github.com/apache/spark/pull/8042&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/8042&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Maybe fix the bug with Python matrices. (TBD)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14696058" author="josephkb" created="Thu, 13 Aug 2015 22:20:59 +0000"  >&lt;p&gt;Notes on these things:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Python: &lt;a href=&quot;https://docs.python.org/2/reference/datamodel.html#object.__hash__&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.python.org/2/reference/datamodel.html#object.__hash__&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Scala: &lt;a href=&quot;http://www.artima.com/lejava/articles/equality.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.artima.com/lejava/articles/equality.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14696101" author="mengxr" created="Thu, 13 Aug 2015 22:49:05 +0000"  >&lt;p&gt;This is really messy ... Using your terminology, this is what I found:&lt;/p&gt;

&lt;p&gt;In 1.4 (which is the same as before this PR):&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Python&lt;/li&gt;
	&lt;li&gt;DenseVector: Semantic eq but only with `DenseVector`. Default hash. -&amp;gt; &lt;b&gt;bug&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;SparseVector: Semantic eq but &lt;b&gt;wrong&lt;/b&gt; (only with `SparseVector` and not handling explicit zeros). Default hash. -&amp;gt; &lt;b&gt;bug&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;DenseMatrix: Semantic eq but only with `DenseMatrix`. Default hash. -&amp;gt; &lt;b&gt;bug&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;SparseMatrix: Semantic eq but converting to dense. Default hash. -&amp;gt; &lt;b&gt;bug&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;Scala&lt;/li&gt;
	&lt;li&gt;Vectors: Semantic eq. Hash uses first 16 entries.&lt;/li&gt;
	&lt;li&gt;DenseMatrix: Semantic eq but &lt;b&gt;wrong&lt;/b&gt; (only with `DenseMatrix` and not handling transpose). Guava Objects.hashCode (similar to default hash). -&amp;gt; &lt;b&gt;bug&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;SparseMatrix: Literal eq. Default hash.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="14696111" author="josephkb" created="Thu, 13 Aug 2015 23:00:08 +0000"  >&lt;p&gt;Discussed with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mengxr&quot; class=&quot;user-hover&quot; rel=&quot;mengxr&quot;&gt;mengxr&lt;/a&gt;: The new plan is to NOT revert this JIRA&apos;s PR for 1.5.  It should be as safe as it was before (i.e., not safe at all to use these objects in collections).  And we can fix all of these items up for the 1.6 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12782329">SPARK-6364</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12855712">SPARK-9919</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12855895">SPARK-9940</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12902001">SPARK-10906</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12855992">SPARK-9953</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12853936">SPARK-9792</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12853940">SPARK-9793</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 14 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ihgf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311620" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Shepherd</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>josephkb</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12332078">1.5.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>