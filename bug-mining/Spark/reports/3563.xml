<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:43:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-15439] Failed to run unit test in SparkR</title>
                <link>https://issues.apache.org/jira/browse/SPARK-15439</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;Failed to run ./R/run-tests.sh   around recent commit (May 19, 2016)&lt;/p&gt;

&lt;p&gt;It might be related to permission. It seems I used `sudo ./R/run-tests.sh` and it worked sometimes. Without permission, maybe we couldn&apos;t access /tmp directory.  However, the SparkR unit testing is still brittle.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://gist.github.com/vectorijk/71f4ff34e3d34a628b8a3013f0ca2aa2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;error message&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12971424">SPARK-15439</key>
            <summary>Failed to run unit test in SparkR</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wm624">Miao Wang</assignee>
                                    <reporter username="vectorijk">Kai Jiang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 May 2016 06:31:45 +0000</created>
                <updated>Mon, 27 Jun 2016 08:28:21 +0000</updated>
                            <resolved>Thu, 26 May 2016 04:08:33 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>SparkR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15292814" author="wm624" created="Fri, 20 May 2016 06:33:07 +0000"  >&lt;p&gt;Let me investigate this bug.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="15292815" author="vectorijk" created="Fri, 20 May 2016 06:35:25 +0000"  >&lt;p&gt;Cool! Let me know if you find a way to solve this.&lt;/p&gt;</comment>
                            <comment id="15294522" author="wm624" created="Fri, 20 May 2016 23:25:04 +0000"  >&lt;p&gt;Reproduced. Now I am analyzing the reason.&lt;/p&gt;</comment>
                            <comment id="15297176" author="shivaram" created="Mon, 23 May 2016 21:58:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wm624&quot; class=&quot;user-hover&quot; rel=&quot;wm624&quot;&gt;wm624&lt;/a&gt; Any luck in figuring out why this is happening ? Would be good to fix this before the 2.0 RC goes out&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sunrui&quot; class=&quot;user-hover&quot; rel=&quot;sunrui&quot;&gt;sunrui&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15297714" author="wm624" created="Tue, 24 May 2016 05:32:28 +0000"  >&lt;p&gt;I am still investigating the errors.&lt;br/&gt;
Now, I see new errors without using sudo, like below:&lt;br/&gt;
Failed -------------------------------------------------------------------------&lt;br/&gt;
1. Failure: Check masked functions (@test_context.R#30) ------------------------&lt;br/&gt;
length(maskedBySparkR) not equal to length(namesOfMasked).&lt;br/&gt;
1/1 mismatches&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; 22 - 20 == 2&lt;/p&gt;


&lt;p&gt;2. Failure: Check masked functions (@test_context.R#31) ------------------------&lt;br/&gt;
sort(maskedBySparkR) not equal to sort(namesOfMasked).&lt;br/&gt;
Lengths differ: 22 vs 20&lt;/p&gt;


&lt;p&gt;3. Failure: Check masked functions (@test_context.R#40) ------------------------&lt;br/&gt;
length(maskedCompletely) not equal to length(namesOfMaskedCompletely).&lt;br/&gt;
1/1 mismatches&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; 5 - 3 == 2&lt;/p&gt;


&lt;p&gt;4. Failure: Check masked functions (@test_context.R#41) ------------------------&lt;br/&gt;
sort(maskedCompletely) not equal to sort(namesOfMaskedCompletely).&lt;br/&gt;
Lengths differ: 5 vs 3&lt;br/&gt;
I am learning how R works.&lt;/p&gt;</comment>
                            <comment id="15297774" author="wm624" created="Tue, 24 May 2016 06:47:38 +0000"  >&lt;p&gt;Per discussion with Yanbo, the directory not found is a known issue. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yanboliang&quot; class=&quot;user-hover&quot; rel=&quot;yanboliang&quot;&gt;yanboliang&lt;/a&gt; Can you explain it? For the other Failures, I will try to debug it to understand whether it is related to the known issue or not.&lt;/p&gt;</comment>
                            <comment id="15297781" author="vectorijk" created="Tue, 24 May 2016 06:53:52 +0000"  >&lt;p&gt;I can reproduce this.&lt;/p&gt;</comment>
                            <comment id="15298579" author="shivaram" created="Tue, 24 May 2016 17:38:49 +0000"  >&lt;p&gt;I think the `maskedCompletely` failures might be related to some R version or package versions. At a high level those tests check how many base R functions are masked by SparkR. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=felixcheung&quot; class=&quot;user-hover&quot; rel=&quot;felixcheung&quot;&gt;felixcheung&lt;/a&gt; who knows more about those unit tests.&lt;/p&gt;</comment>
                            <comment id="15298679" author="wm624" created="Tue, 24 May 2016 18:31:53 +0000"  >&lt;p&gt;I think I found the reason of failure. Will post a PR soon.&lt;/p&gt;</comment>
                            <comment id="15299004" author="wm624" created="Tue, 24 May 2016 21:54:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shivaram&quot; class=&quot;user-hover&quot; rel=&quot;shivaram&quot;&gt;shivaram&lt;/a&gt;I fixed that failure. But I see a new failure in test_sparkSQL.R#922&lt;/p&gt;

&lt;p&gt;2. Error: subsetting (@test_sparkSQL.R#922) ------------------------------------&lt;br/&gt;
argument &quot;subset&quot; is missing, with no default&lt;br/&gt;
1: subset(df, select = &quot;name&quot;) at /Users/mwang/spark_ws_0904/R/lib/SparkR/tests/testthat/test_sparkSQL.R:922&lt;br/&gt;
2: subset(df, select = &quot;name&quot;)&lt;br/&gt;
3: .local(x, ...)&lt;br/&gt;
4: x&lt;span class=&quot;error&quot;&gt;&amp;#91;subset, select, drop = drop&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;I am fixing it now.&lt;/p&gt;</comment>
                            <comment id="15299011" author="wm624" created="Tue, 24 May 2016 21:57:00 +0000"  >&lt;p&gt;It seems that this one is caused by &lt;a href=&quot;https://github.com/apache/spark/pull/11318&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/11318&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Let me change some of this PR for test.&lt;/p&gt;</comment>
                            <comment id="15299078" author="apachespark" created="Tue, 24 May 2016 22:37:04 +0000"  >&lt;p&gt;User &apos;wangmiao1981&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/13284&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/13284&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15299143" author="wm624" created="Tue, 24 May 2016 23:30:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=felixcheung&quot; class=&quot;user-hover&quot; rel=&quot;felixcheung&quot;&gt;felixcheung&lt;/a&gt; For the test case below:&lt;/p&gt;

&lt;p&gt;test_that(&quot;Check masked functions&quot;, {&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Check that we are not masking any new function from base, stats, testthat unexpectedly&lt;br/&gt;
  masked &amp;lt;- conflicts(detail = TRUE)$`package:SparkR`&lt;br/&gt;
  expect_true(&quot;describe&quot; %in% masked)  # only when with testthat..&lt;br/&gt;
  func &amp;lt;- lapply(masked, function&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; 
{ capture.output(showMethods(x))[[1]] }
&lt;p&gt;)&lt;br/&gt;
  funcSparkROrEmpty &amp;lt;- grepl(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;(package SparkR&lt;br class=&quot;atl-forced-newline&quot; /&gt;)$|^$&quot;, func)&lt;br/&gt;
  maskedBySparkR &amp;lt;- masked&lt;span class=&quot;error&quot;&gt;&amp;#91;funcSparkROrEmpty&amp;#93;&lt;/span&gt;&lt;br/&gt;
  namesOfMasked &amp;lt;- c(&quot;describe&quot;, &quot;cov&quot;, &quot;filter&quot;, &quot;lag&quot;, &quot;na.omit&quot;, &quot;predict&quot;, &quot;sd&quot;, &quot;var&quot;,&lt;br/&gt;
                     &quot;colnames&quot;, &quot;colnames&amp;lt;-&quot;, &quot;intersect&quot;, &quot;rank&quot;, &quot;rbind&quot;, &quot;sample&quot;, &quot;subset&quot;,&lt;br/&gt;
                     &quot;summary&quot;, &quot;transform&quot;, &quot;drop&quot;, &quot;window&quot;, &quot;as.data.frame&quot;,&lt;br/&gt;
                     &quot;endsWith&quot;, &quot;startsWith&quot;)&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;When I run it in local, it has &quot;endsWith&quot; and &quot;startsWith&quot;. However, when I submit PR, Jekins test doesn&apos;t include these two. &lt;/p&gt;

&lt;p&gt;I don&apos;t know what is the difference when running in local and running auto test. I suspect version issue but I don&apos;t know where to set the version. Can you help checking it? Thanks!&lt;/p&gt;</comment>
                            <comment id="15299432" author="felixcheung" created="Wed, 25 May 2016 04:23:25 +0000"  >&lt;p&gt;Possibly with R version or package versions. Can you check `installed.packages()`?&lt;/p&gt;</comment>
                            <comment id="15301490" author="shivaram" created="Thu, 26 May 2016 04:08:33 +0000"  >&lt;p&gt;Issue resolved by pull request 13284&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/13284&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/13284&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15301735" author="felixcheung" created="Thu, 26 May 2016 08:16:04 +0000"  >&lt;p&gt;I think we have an issue here - I&quot;m running R 3.2.2 and the mask tests are failing because:&lt;br/&gt;
&amp;gt; R.version$minor&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &quot;2.2&quot;&lt;/p&gt;

&lt;p&gt;And this is not strict enough?&lt;br/&gt;
  if (as.numeric(R.version$major) == 3 &amp;amp;&amp;amp; as.numeric(R.version$minor) &amp;gt; 2) &lt;/p&gt;
{
    namesOfMasked &amp;lt;- c(&quot;endsWith&quot;, &quot;startsWith&quot;, namesOfMasked)
    namesOfMaskedCompletely &amp;lt;- c(&quot;endsWith&quot;, &quot;startsWith&quot;, namesOfMaskedCompletely)
  }


&lt;p&gt;1. Failure: Check masked functions (@test_context.R#35) ------------------------&lt;br/&gt;
length(maskedBySparkR) not equal to length(namesOfMasked).&lt;br/&gt;
1/1 mismatches&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; 20 - 22 == -2&lt;/p&gt;


&lt;p&gt;2. Failure: Check masked functions (@test_context.R#36) ------------------------&lt;br/&gt;
sort(maskedBySparkR) not equal to sort(namesOfMasked).&lt;br/&gt;
Lengths differ: 20 vs 22&lt;/p&gt;


&lt;p&gt;3. Failure: Check masked functions (@test_context.R#44) ------------------------&lt;br/&gt;
length(maskedCompletely) not equal to length(namesOfMaskedCompletely).&lt;br/&gt;
1/1 mismatches&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; 3 - 5 == -2&lt;/p&gt;


&lt;p&gt;4. Failure: Check masked functions (@test_context.R#45) ------------------------&lt;br/&gt;
sort(maskedCompletely) not equal to sort(namesOfMaskedCompletely).&lt;br/&gt;
Lengths differ: 3 vs 5&lt;/p&gt;</comment>
                            <comment id="15302525" author="shivaram" created="Thu, 26 May 2016 17:26:31 +0000"  >&lt;p&gt;Hmm - I think the check needs to be `R.version$minor &amp;gt;= 3` and similarly the major version should be `&amp;gt;=3` ?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12964424">SPARK-15069</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2y9cn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>