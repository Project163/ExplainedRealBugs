<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:55:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-21638] Warning message of RF is not accurate</title>
                <link>https://issues.apache.org/jira/browse/SPARK-21638</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;When train RF model, there is many warning message like this:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;WARN RandomForest: Tree learning is using approximately 268492800 bytes per iteration, which exceeds requested limit maxMemoryUsage=268435456. This allows splitting 2622 nodes in this iteration.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This warning message is unnecessary and the data is not accurate.&lt;/p&gt;

&lt;p&gt;Actually, if all the nodes cannot split in one iteration, it will show this warning. For most of the case, all the nodes cannot split just in one iteration, so for most of the case, it will show this warning for each iteration.&lt;/p&gt;

&lt;p&gt;This is because:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (nodeStack.nonEmpty &amp;amp;&amp;amp; (memUsage &amp;lt; maxMemoryUsage || memUsage == 0)) {
      val (treeIndex, node) = nodeStack.top
      &lt;span class=&quot;code-comment&quot;&gt;// Choose subset of features &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; node (&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; subsampling).
&lt;/span&gt;      val featureSubset: Option[Array[Int]] = &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (metadata.subsamplingFeatures) {
        Some(SamplingUtils.reservoirSampleAndCount(Range(0,
          metadata.numFeatures).iterator, metadata.numFeaturesPerNode, rng.nextLong())._1)
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        None
      }
      &lt;span class=&quot;code-comment&quot;&gt;// Check &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; enough memory remains to add &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; node to the group.
&lt;/span&gt;      val nodeMemUsage = RandomForest.aggregateSizeForNode(metadata, featureSubset) * 8L
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (memUsage + nodeMemUsage &amp;lt;= maxMemoryUsage || memUsage == 0) {
        nodeStack.pop()
        mutableNodesForGroup.getOrElseUpdate(treeIndex, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; mutable.ArrayBuffer[LearningNode]()) +=
          node
        mutableTreeToNodeToIndexInfo
          .getOrElseUpdate(treeIndex, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; mutable.HashMap[Int, NodeIndexInfo]())(node.id)
          = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NodeIndexInfo(numNodesInGroup, featureSubset)
      }
      numNodesInGroup += 1   &lt;span class=&quot;code-comment&quot;&gt;//we not add the node to mutableNodesForGroup, but we add memUsage here.
&lt;/span&gt;      memUsage += nodeMemUsage
    }
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (memUsage &amp;gt; maxMemoryUsage) {
      &lt;span class=&quot;code-comment&quot;&gt;// If maxMemoryUsage is 0, we should still allow splitting 1 node.
&lt;/span&gt;      logWarning(s&lt;span class=&quot;code-quote&quot;&gt;&quot;Tree learning is using approximately $memUsage bytes per iteration, which&quot;&lt;/span&gt; +
        s&lt;span class=&quot;code-quote&quot;&gt;&quot; exceeds requested limit maxMemoryUsage=$maxMemoryUsage. This allows splitting&quot;&lt;/span&gt; +
        s&lt;span class=&quot;code-quote&quot;&gt;&quot; $numNodesInGroup nodes in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; iteration.&quot;&lt;/span&gt;)
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment>
</environment>
        <key id="13092412">SPARK-21638</key>
            <summary>Warning message of RF is not accurate</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="peng.meng@intel.com">Peng Meng</assignee>
                                    <reporter username="peng.meng@intel.com">Peng Meng</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Aug 2017 08:43:28 +0000</created>
                <updated>Mon, 11 Dec 2017 13:57:06 +0000</updated>
                            <resolved>Thu, 10 Aug 2017 20:38:17 +0000</resolved>
                                    <version>2.3.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>ML</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16114126" author="srowen" created="Fri, 4 Aug 2017 08:46:32 +0000"  >&lt;p&gt;What&apos;s inaccurate and why isn&apos;t it necessary? Please start with the problem.&lt;/p&gt;</comment>
                            <comment id="16114132" author="peng.meng@intel.com" created="Fri, 4 Aug 2017 08:49:04 +0000"  >&lt;p&gt;This is because &quot;we not add the node to mutableNodesForGroup, but we add memUsage&quot; in current implemantation.&lt;br/&gt;
This logic is not accurate.&lt;/p&gt;</comment>
                            <comment id="16114133" author="peng.meng@intel.com" created="Fri, 4 Aug 2017 08:51:12 +0000"  >&lt;p&gt;I will be back home now, will answer your question next week. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=srowen&quot; class=&quot;user-hover&quot; rel=&quot;srowen&quot;&gt;srowen&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16114153" author="peng.meng@intel.com" created="Fri, 4 Aug 2017 09:10:41 +0000"  >&lt;p&gt;In the example warning message, the split node shoud be 2621;  &lt;/p&gt;</comment>
                            <comment id="16114156" author="peng.meng@intel.com" created="Fri, 4 Aug 2017 09:13:11 +0000"  >&lt;p&gt;The first data should - nodeMemUsage&lt;/p&gt;</comment>
                            <comment id="16122283" author="srowen" created="Thu, 10 Aug 2017 20:38:17 +0000"  >&lt;p&gt;Issue resolved by pull request 18868&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/18868&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/18868&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16285942" author="apachespark" created="Mon, 11 Dec 2017 13:57:06 +0000"  >&lt;p&gt;User &apos;mpjlu&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/18868&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/18868&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ievj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>