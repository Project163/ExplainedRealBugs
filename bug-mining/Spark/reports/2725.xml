<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:34:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-11553] row.getInt(i) if row[i]=null returns 0</title>
                <link>https://issues.apache.org/jira/browse/SPARK-11553</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;row.getInt|Float|Double in SPARK RDD return 0 if row&lt;span class=&quot;error&quot;&gt;&amp;#91;index&amp;#93;&lt;/span&gt; is null. (Even according to the document they should throw nullException error)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12911023">SPARK-11553</key>
            <summary>row.getInt(i) if row[i]=null returns 0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="alberskib">Bartlomiej Alberski</assignee>
                                    <reporter username="TFNM">Tofigh</reporter>
                        <labels>
                            <label>releasenotes</label>
                    </labels>
                <created>Fri, 6 Nov 2015 11:14:16 +0000</created>
                <updated>Mon, 30 Nov 2015 20:59:39 +0000</updated>
                            <resolved>Mon, 16 Nov 2015 23:17:15 +0000</resolved>
                                                    <fixVersion>1.6.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14993615" author="srowen" created="Fri, 6 Nov 2015 12:55:43 +0000"  >&lt;p&gt;Can you be more specific? these aren&apos;t methods of RDD. What language, etc? Please have a look at &lt;a href=&quot;https://cwiki.apache.org/confluence/display/SPARK/Contributing+to+Spark&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/SPARK/Contributing+to+Spark&lt;/a&gt; before opening a JIRA. This would be useful if you&apos;d add a snippet to demonstrate.&lt;/p&gt;</comment>
                            <comment id="15000616" author="alberskib" created="Wed, 11 Nov 2015 16:35:52 +0000"  >&lt;p&gt;Ok. I think that I know what is the problem. It can be reproduced with scala 2.11.6 and DataFrame API.&lt;/p&gt;

&lt;p&gt;If you are using DataFrame API from scala and you are trying to get Int|Long|Boolean etc - value that extends AnyVal, you will receive &quot;zero value&quot; specific for given type (0 for Long and Int, false for Boolean etc), while API suggest that NPE will be raised.&lt;/p&gt;

&lt;p&gt;Example modified in order to ilustrate problem (from &lt;a href=&quot;http://spark.apache.org/docs/latest/sql-programming-guide.html#dataframes&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://spark.apache.org/docs/latest/sql-programming-guide.html#dataframes&lt;/a&gt;)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;val sc: SparkContext &lt;span class=&quot;code-comment&quot;&gt;// An existing SparkContext.
&lt;/span&gt;val sqlContext = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; org.apache.spark.sql.SQLContext(sc)

val df = sqlContext.read.json(&lt;span class=&quot;code-quote&quot;&gt;&quot;examples/src/main/resources/people.json&quot;&lt;/span&gt;)

&lt;span class=&quot;code-comment&quot;&gt;// Displays the content of the DataFrame to stdout
&lt;/span&gt;df.show()
val res = df.map(x =&amp;gt; x.getLong(x.fieldIndex(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;))).collect()
println(res.mkString(&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Problem comes from implementation of getInt|Float|Boolean|... methods: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;getInt(i: Int): Int = getAs[Int](i)
getAs[T](i: Int): T = get(i).asInstanceOf[T]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;null.asInstanceOf&lt;span class=&quot;error&quot;&gt;&amp;#91;Long&amp;#93;&lt;/span&gt; returns 0 (because Long cannot be null - it extends AnyVal)&lt;/p&gt;

&lt;p&gt;Examplary invocations from scala REPL&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;scala&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.asInstanceOf[Int]
res0: Int = 0

scala&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.asInstanceOf[&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;]
res1: &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; = 0

scala&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.asInstanceOf[&lt;span class=&quot;code-object&quot;&gt;Short&lt;/span&gt;]
res2: &lt;span class=&quot;code-object&quot;&gt;Short&lt;/span&gt; = 0

scala&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.asInstanceOf[&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;]
res3: &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt; = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;

scala&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.asInstanceOf[&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;]
res4: &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt; = 0.0

scala&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.asInstanceOf[&lt;span class=&quot;code-object&quot;&gt;Float&lt;/span&gt;]
res5: &lt;span class=&quot;code-object&quot;&gt;Float&lt;/span&gt; = 0.0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I will be more than happy to prepare PR solving this issue.&lt;/p&gt;</comment>
                            <comment id="15001285" author="apachespark" created="Wed, 11 Nov 2015 22:54:04 +0000"  >&lt;p&gt;User &apos;alberskib&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/9642&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/9642&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15005270" author="alberskib" created="Sat, 14 Nov 2015 09:35:29 +0000"  >&lt;p&gt;Please assign me to this issue as I already prepare PR&lt;/p&gt;</comment>
                            <comment id="15005284" author="srowen" created="Sat, 14 Nov 2015 09:59:31 +0000"  >&lt;p&gt;That&apos;s clear already. We normally assign after it&apos;s fixed.&lt;/p&gt;</comment>
                            <comment id="15005292" author="alberskib" created="Sat, 14 Nov 2015 10:06:48 +0000"  >&lt;p&gt;Thanks - good to know&lt;/p&gt;</comment>
                            <comment id="15007606" author="marmbrus" created="Mon, 16 Nov 2015 23:17:15 +0000"  >&lt;p&gt;Issue resolved by pull request 9642&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/9642&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/9642&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o1zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12333083">1.6.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>