<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:50:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-19033] HistoryServer still uses old ACLs even if ACLs are updated</title>
                <link>https://issues.apache.org/jira/browse/SPARK-19033</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;In the current implementation of HistoryServer, Application ACLs is picked from event log rather than configuration:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            val uiAclsEnabled = conf.getBoolean(&lt;span class=&quot;code-quote&quot;&gt;&quot;spark.history.ui.acls.enable&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
            ui.getSecurityManager.setAcls(uiAclsEnabled)
            &lt;span class=&quot;code-comment&quot;&gt;// make sure to set admin acls before view acls so they are properly picked up
&lt;/span&gt;            ui.getSecurityManager.setAdminAcls(appListener.adminAcls.getOrElse(&quot;&quot;))
            ui.getSecurityManager.setViewAcls(attempt.sparkUser,
              appListener.viewAcls.getOrElse(&quot;&quot;))
            ui.getSecurityManager.setAdminAclsGroups(appListener.adminAclsGroups.getOrElse(&quot;&quot;))
            ui.getSecurityManager.setViewAclsGroups(appListener.viewAclsGroups.getOrElse(&quot;&quot;))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This will become a problem when ACLs is updated (newly added admin), only the new application can be effected, the old applications were still using the old ACLs. So these new admin still cannot check the logs of old applications.&lt;/p&gt;

&lt;p&gt;It is hard to say this is a bug, but in our scenario this is not the expected behavior we wanted.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13031225">SPARK-19033</key>
            <summary>HistoryServer still uses old ACLs even if ACLs are updated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jerryshao">Saisai Shao</assignee>
                                    <reporter username="jerryshao">Saisai Shao</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Dec 2016 06:28:26 +0000</created>
                <updated>Fri, 6 Jan 2017 16:09:06 +0000</updated>
                            <resolved>Fri, 6 Jan 2017 16:09:06 +0000</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.1.1</fixVersion>
                    <fixVersion>2.2.0</fixVersion>
                                    <component>Spark Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15787031" author="jerryshao" created="Fri, 30 Dec 2016 06:32:07 +0000"  >&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vanzin&quot; class=&quot;user-hover&quot; rel=&quot;vanzin&quot;&gt;vanzin&lt;/a&gt;, I found that you made this change, would you mind explaining the purpose of doing so? Thanks very much.&lt;/p&gt;</comment>
                            <comment id="15795810" author="vanzin" created="Tue, 3 Jan 2017 18:45:55 +0000"  >&lt;p&gt;I actually didn&apos;t write the code, I just moved it around a lot. It was first added in &lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-1489&quot; title=&quot;Fix the HistoryServer view acls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPARK-1489&quot;&gt;&lt;del&gt;SPARK-1489&lt;/del&gt;&lt;/a&gt; by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tgraves&quot; class=&quot;user-hover&quot; rel=&quot;tgraves&quot;&gt;tgraves&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15795863" author="tgraves" created="Tue, 3 Jan 2017 19:01:16 +0000"  >&lt;p&gt;this should actually be an improvement to allow admin acls from history server config to also apply. I&apos;ve been meaning to do this for a while, thought I filed jira for it but don&apos;t see it now. &lt;/p&gt;

&lt;p&gt;Currently it uses what the application sets for acls, which in general is correct because you don&apos;t want the user level acls being applied differently then what the application had originally set, this would be a security hole and you would be applying one set of history acls across all applications. The exception to that is the admin level acls, the idea is that these are people with special privileges and like you mention this could change.  Although I would also encourage you to use groups which helps with this issue as you shouldn&apos;t need a huge list of individual users but its still also possible for a user to blank out the admin acls so it would be good to allow the history server to add those back.&lt;/p&gt;

&lt;p&gt;So this jira should just add another option to append history server admin acls to application ones.  Something like spark.history.ui.admin.acls and spark.history.ui.admin.acls.groups&lt;/p&gt;</comment>
                            <comment id="15796834" author="jerryshao" created="Wed, 4 Jan 2017 01:36:48 +0000"  >&lt;p&gt;Thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tgraves&quot; class=&quot;user-hover&quot; rel=&quot;tgraves&quot;&gt;tgraves&lt;/a&gt;, I will think about how to better address this issue.&lt;/p&gt;</comment>
                            <comment id="15797548" author="apachespark" created="Wed, 4 Jan 2017 08:15:04 +0000"  >&lt;p&gt;User &apos;jerryshao&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/16470&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/16470&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i384mn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>