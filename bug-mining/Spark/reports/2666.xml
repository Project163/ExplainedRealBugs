<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 18:34:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SPARK-11474] Options to jdbc load are lower cased</title>
                <link>https://issues.apache.org/jira/browse/SPARK-11474</link>
                <project id="12315420" key="SPARK">Spark</project>
                    <description>&lt;p&gt;We recently upgraded from spark 1.3.0 to 1.5.1 and one of the features we wanted to take advantage of was the fetchSize added to the jdbc data frame reader.&lt;/p&gt;

&lt;p&gt;In 1.5.1 there appears to be a bug or regression, whereby an options map has its keys lowercased. This means the existing properties from prior to 1.4 are ok, such as dbtable, url and driver, but the newer fetchSize gets converted to fetchsize.&lt;/p&gt;

&lt;p&gt;To re-produce:&lt;/p&gt;

&lt;p&gt;val conf = new SparkConf(true).setMaster(&quot;local&quot;).setAppName(&quot;fetchtest&quot;)&lt;br/&gt;
val sc = new SparkContext(conf)&lt;br/&gt;
val sql = new SQLContext(sc)&lt;/p&gt;

&lt;p&gt;val options = Map(&quot;url&quot; -&amp;gt; ...., &quot;driver&quot; -&amp;gt; ...., &quot;fetchSize&quot; -&amp;gt; ....)&lt;br/&gt;
val df = sql.load(&quot;jdbc&quot;, options)&lt;/p&gt;

&lt;p&gt;Breakpoint at line 371 in JDBCRDD and you&apos;ll see the options are all lowercased, so:&lt;br/&gt;
val fetchSize = properties.getProperty(&quot;fetchSize&quot;, &quot;0&quot;).toInt&lt;br/&gt;
results in 0&lt;/p&gt;

&lt;p&gt;Now I know sql.load is deprecated, but this might be occuring on other methods too. The workaround is to use the java.util.Properties overload, which keeps the case sensitive keys.&lt;/p&gt;

</description>
                <environment>&lt;p&gt;Linux &amp;amp; Mac&lt;/p&gt;</environment>
        <key id="12909934">SPARK-11474</key>
            <summary>Options to jdbc load are lower cased</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="huaxingao">Huaxin Gao</assignee>
                                    <reporter username="sksamuel">Stephen Samuel</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Nov 2015 09:42:56 +0000</created>
                <updated>Tue, 31 May 2016 23:58:47 +0000</updated>
                            <resolved>Thu, 5 Nov 2015 17:41:26 +0000</resolved>
                                    <version>1.5.1</version>
                                    <fixVersion>1.5.3</fixVersion>
                    <fixVersion>1.6.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14988939" author="huaxing" created="Wed, 4 Nov 2015 05:46:45 +0000"  >&lt;p&gt;In DefaultDataSource.scala, it has &lt;/p&gt;

&lt;p&gt;  override def createRelation(&lt;br/&gt;
      sqlContext: SQLContext,&lt;br/&gt;
      parameters: Map&lt;span class=&quot;error&quot;&gt;&amp;#91;String, String&amp;#93;&lt;/span&gt;): BaseRelation &lt;/p&gt;

&lt;p&gt;The parameters is CaseInsensitiveMap. &lt;br/&gt;
After this line&lt;br/&gt;
parameters.foreach(kv =&amp;gt; properties.setProperty(kv._1, kv._2))&lt;br/&gt;
properties is set to all lower case key/value pairs and fetchSize becomes fetchsize.&lt;br/&gt;
However, in compute method in JDBCRDD, it has&lt;br/&gt;
 val fetchSize = properties.getProperty(&quot;fetchSize&quot;, &quot;0&quot;).toInt&lt;br/&gt;
so fetchSize value is always 0 and never gets set correctly. &lt;/p&gt;

&lt;p&gt;I will have a pull request to fix this problem. &lt;/p&gt;</comment>
                            <comment id="14989094" author="huaxing" created="Wed, 4 Nov 2015 08:09:29 +0000"  >&lt;p&gt;Did PR  &lt;a href=&quot;https://github.com/apache/spark/pull/9461&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/9461&lt;/a&gt;&lt;br/&gt;
Somehow it didn&apos;t get automatically linked to the PR.  Will fix the problem tomorrow. &lt;/p&gt;</comment>
                            <comment id="14990193" author="apachespark" created="Wed, 4 Nov 2015 19:05:02 +0000"  >&lt;p&gt;User &apos;huaxingao&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/9461&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/9461&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14990335" author="apachespark" created="Wed, 4 Nov 2015 20:25:03 +0000"  >&lt;p&gt;User &apos;huaxingao&apos; has created a pull request for this issue:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/spark/pull/9473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/spark/pull/9473&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nvan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>