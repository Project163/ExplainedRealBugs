{"url":"https://api.github.com/repos/glfw/glfw/issues/2408","repository_url":"https://api.github.com/repos/glfw/glfw","labels_url":"https://api.github.com/repos/glfw/glfw/issues/2408/labels{/name}","comments_url":"https://api.github.com/repos/glfw/glfw/issues/2408/comments","events_url":"https://api.github.com/repos/glfw/glfw/issues/2408/events","html_url":"https://github.com/glfw/glfw/issues/2408","id":1927540320,"node_id":"I_kwDOAJFXBc5y4-5g","number":2408,"title":"glfwWaitEventsTimeout doesn't process QS_SENDMESSAGE on Windows","user":{"login":"BloCamLimb","id":14106648,"node_id":"MDQ6VXNlcjE0MTA2NjQ4","avatar_url":"https://avatars.githubusercontent.com/u/14106648?v=4","gravatar_id":"","url":"https://api.github.com/users/BloCamLimb","html_url":"https://github.com/BloCamLimb","followers_url":"https://api.github.com/users/BloCamLimb/followers","following_url":"https://api.github.com/users/BloCamLimb/following{/other_user}","gists_url":"https://api.github.com/users/BloCamLimb/gists{/gist_id}","starred_url":"https://api.github.com/users/BloCamLimb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BloCamLimb/subscriptions","organizations_url":"https://api.github.com/users/BloCamLimb/orgs","repos_url":"https://api.github.com/users/BloCamLimb/repos","events_url":"https://api.github.com/users/BloCamLimb/events{/privacy}","received_events_url":"https://api.github.com/users/BloCamLimb/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":36425440,"node_id":"MDU6TGFiZWwzNjQyNTQ0MA==","url":"https://api.github.com/repos/glfw/glfw/labels/bug","name":"bug","color":"b60205","default":true,"description":"Bug reports and bugfix pull requests"},{"id":37361218,"node_id":"MDU6TGFiZWwzNzM2MTIxOA==","url":"https://api.github.com/repos/glfw/glfw/labels/Windows","name":"Windows","color":"0078d6","default":false,"description":"Win32 specific (not Cygwin or WSL)"},{"id":37364584,"node_id":"MDU6TGFiZWwzNzM2NDU4NA==","url":"https://api.github.com/repos/glfw/glfw/labels/verified","name":"verified","color":"0e8a16","default":false,"description":"Reproduced or otherwise verified bugs"},{"id":1572895686,"node_id":"MDU6TGFiZWwxNTcyODk1Njg2","url":"https://api.github.com/repos/glfw/glfw/labels/input","name":"input","color":"d4c5f9","default":false,"description":"Keyboard, joystick or mouse"}],"state":"closed","locked":false,"assignee":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/glfw/glfw/milestones/23","html_url":"https://github.com/glfw/glfw/milestone/23","labels_url":"https://api.github.com/repos/glfw/glfw/milestones/23/labels","id":8185249,"node_id":"MI_kwDOAJFXBc4AfOWh","number":23,"title":"3.3.9","description":"","creator":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":29,"state":"closed","created_at":"2022-07-11T18:36:03Z","updated_at":"2024-02-05T16:21:00Z","due_on":null,"closed_at":"2023-12-12T17:59:26Z"},"comments":1,"created_at":"2023-10-05T07:12:47Z","updated_at":"2023-11-17T13:59:17Z","closed_at":"2023-11-17T13:56:01Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### Description\r\nhttps://github.com/glfw/glfw/blob/3eaf1255b29fdf5c2895856c7be7d7185ef2b241/src/win32_window.c#L2122-L2127  `MsgWaitForMultipleObjects` doesn't include `QS_SENDMESSAGE` flag. This will result in some messages not being processed.\r\n\r\nI first encountered this issue when I use [tiny file dialogs](https://sourceforge.net/projects/tinyfiledialogs/). To reproduce:\r\n1. Create a GLFW window on main thread.\r\n2. Use `glfwWaitEventsTimeout` in main thread loop.\r\n3. Open a `tinyfd` dialog from non-main thread (a background thread).\r\n\r\nYou will see `glfwWaitEventsTimeout` won't return and process input events for the dialog window, so the dialog is not responding. It only returns after `timeout` seconds has expired. Of course, `glfwWaitEventsTimeout` works for input events for the GLFW window.\r\n\r\n#### My workaround\r\n1. Only use `glfwWaitEvents` and `glfwPollEvents` in main thread loop, they can process input events for the background dialog window.\r\n2. Use `tinyfd` only on main thread. In this case, the dialog window is responding, but it will block application's main thread.\r\n\r\n#### Possible solution\r\nReplace `QS_ALLEVENTS` with `QS_ALLINPUT`.","closed_by":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/2408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/glfw/glfw/issues/2408/timeline","performed_via_github_app":null,"state_reason":"completed"}