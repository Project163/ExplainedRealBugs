{"url":"https://api.github.com/repos/glfw/glfw/issues/1791","repository_url":"https://api.github.com/repos/glfw/glfw","labels_url":"https://api.github.com/repos/glfw/glfw/issues/1791/labels{/name}","comments_url":"https://api.github.com/repos/glfw/glfw/issues/1791/comments","events_url":"https://api.github.com/repos/glfw/glfw/issues/1791/events","html_url":"https://github.com/glfw/glfw/issues/1791","id":724399916,"node_id":"MDU6SXNzdWU3MjQzOTk5MTY=","number":1791,"title":"Apple AirPlay causes GLFW error in glfwInit (\"Cocoa: Failed to find service port for display\")","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":36425442,"node_id":"MDU6TGFiZWwzNjQyNTQ0Mg==","url":"https://api.github.com/repos/glfw/glfw/labels/enhancement","name":"enhancement","color":"c7def8","default":true,"description":"Feature suggestions and PRs"},{"id":37361162,"node_id":"MDU6TGFiZWwzNzM2MTE2Mg==","url":"https://api.github.com/repos/glfw/glfw/labels/macOS","name":"macOS","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/glfw/glfw/milestones/22","html_url":"https://github.com/glfw/glfw/milestone/22","labels_url":"https://api.github.com/repos/glfw/glfw/milestones/22/labels","id":7762419,"node_id":"MI_kwDOAJFXBc4AdnHz","number":22,"title":"3.3.8","description":"","creator":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":24,"state":"closed","created_at":"2022-03-13T15:55:18Z","updated_at":"2024-02-05T14:14:23Z","due_on":null,"closed_at":"2022-07-21T14:49:38Z"},"comments":2,"created_at":"2020-10-19T08:33:40Z","updated_at":"2023-01-18T02:03:14Z","closed_at":"2022-03-17T23:58:17Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I'm getting GLFW errors when my MacBook (macOS 10.15.7) is connected via [AirPlay](https://en.wikipedia.org/wiki/AirPlay). I'm new to macOS, so I'm not 100% sure about the package version I'm using, but I appear to be running on GLFW 3.3.2 (installed via brew).\r\n\r\nNaively written applications will probably exit or trigger into a debugger when they get an GLFW error callback. For example, the mapbox GLFW platform sample:\r\n\r\n```\r\nCurrent executable set to '/tmp/mapbox-gl-native/build/platform/glfw/mbgl-glfw' (x86_64).\r\n(lldb) r\r\nProcess 84490 launched: '/tmp/mapbox-gl-native/build/platform/glfw/mbgl-glfw' (x86_64)\r\nAssertion failed: (false), function glfwError, file ../platform/glfw/glfw_view.cpp, line 112.\r\nProcess 84490 stopped\r\n* thread #1, queue = 'com.apple.main-thread', stop reason = hit program assert\r\n    frame #4: 0x000000010004bfb7 mbgl-glfw`glfwError(error=65544, description=\"Cocoa: Failed to find service port for display\") at glfw_view.cpp:112:5\r\n   109\r\n   110 \tvoid glfwError(int error, const char *description) {\r\n   111 \t    mbgl::Log::Error(mbgl::Event::OpenGL, \"GLFW error (%i): %s\", error, description);\r\n-> 112 \t    assert(false);\r\n   113 \t}\r\n   114\r\n   115 \tGLFWView::GLFWView(bool fullscreen_, bool benchmark_, const mbgl::ResourceOptions &options)\r\nTarget 1: (mbgl-glfw) stopped.\r\n```\r\n\r\nHere is the backtrace for that situation (unfortunately, I don't have GLFW symbols):\r\n\r\n```\r\n(lldb) bt\r\n* thread #1, queue = 'com.apple.main-thread', stop reason = hit program assert\r\n    frame #0: 0x00007fff69d3533a libsystem_kernel.dylib`__pthread_kill + 10\r\n    frame #1: 0x00007fff69df1e60 libsystem_pthread.dylib`pthread_kill + 430\r\n    frame #2: 0x00007fff69cbc808 libsystem_c.dylib`abort + 120\r\n    frame #3: 0x00007fff69cbbac6 libsystem_c.dylib`__assert_rtn + 314\r\n  * frame #4: 0x000000010004bfb7 mbgl-glfw`glfwError(error=65544, description=\"Cocoa: Failed to find service port for display\") at glfw_view.cpp:112:5\r\n    frame #5: 0x00000001061d182e libglfw.3.dylib`_glfwInputError + 491\r\n    frame #6: 0x00000001061d8244 libglfw.3.dylib`_glfwPollMonitorsNS + 733\r\n    frame #7: 0x00000001061d7243 libglfw.3.dylib`_glfwPlatformInit + 1649\r\n    frame #8: 0x00000001061d1bb6 libglfw.3.dylib`glfwInit + 74\r\n    frame #9: 0x000000010004c34f mbgl-glfw`GLFWView::GLFWView(this=0x00007ffeefbfedd0, fullscreen_=false, benchmark_=false, options=0x00007ffeefbfd748) at glfw_view.cpp:124:10\r\n    frame #10: 0x000000010005142c mbgl-glfw`GLFWView::GLFWView(this=0x00007ffeefbfedd0, fullscreen_=false, benchmark_=false, options=0x00007ffeefbfd748) at glfw_view.cpp:119:43\r\n    frame #11: 0x000000010000ba17 mbgl-glfw`main(argc=1, argv=0x00007ffeefbff848) at main.cpp:107:14\r\n    frame #12: 0x00007fff69bedcc9 libdyld.dylib`start + 1\r\n    frame #13: 0x00007fff69bedcc9 libdyld.dylib`start + 1\r\n```\r\n\r\nI compared it to the code, and I assume it's this:\r\n\r\nhttps://github.com/glfw/glfw/blob/a2674a903434b7dfc0b0bcc5d0b479da417367ff/src/cocoa_monitor.m#L87-L92\r\n\r\nIgnoring that error will not cause any issues (or none that I noticed). The GLFW window will behave normally on the native display and the AirPlay display / mirror.\r\n\r\n\r\nThis case should be handled more gracefully. If there's an option to check for AirPlay, a respective name should be returned (ideally, the name of the AirPlay display?).","closed_by":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/1791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/glfw/glfw/issues/1791/timeline","performed_via_github_app":null,"state_reason":"completed"}