{"url":"https://api.github.com/repos/glfw/glfw/issues/2092","repository_url":"https://api.github.com/repos/glfw/glfw","labels_url":"https://api.github.com/repos/glfw/glfw/issues/2092/labels{/name}","comments_url":"https://api.github.com/repos/glfw/glfw/issues/2092/comments","events_url":"https://api.github.com/repos/glfw/glfw/issues/2092/events","html_url":"https://github.com/glfw/glfw/issues/2092","id":1221720707,"node_id":"I_kwDOAJFXBc5I0fqD","number":2092,"title":"Querying for joystick user pointer","user":{"login":"ravimohan1991","id":2173654,"node_id":"MDQ6VXNlcjIxNzM2NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2173654?v=4","gravatar_id":"","url":"https://api.github.com/users/ravimohan1991","html_url":"https://github.com/ravimohan1991","followers_url":"https://api.github.com/users/ravimohan1991/followers","following_url":"https://api.github.com/users/ravimohan1991/following{/other_user}","gists_url":"https://api.github.com/users/ravimohan1991/gists{/gist_id}","starred_url":"https://api.github.com/users/ravimohan1991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ravimohan1991/subscriptions","organizations_url":"https://api.github.com/users/ravimohan1991/orgs","repos_url":"https://api.github.com/users/ravimohan1991/repos","events_url":"https://api.github.com/users/ravimohan1991/events{/privacy}","received_events_url":"https://api.github.com/users/ravimohan1991/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":36425440,"node_id":"MDU6TGFiZWwzNjQyNTQ0MA==","url":"https://api.github.com/repos/glfw/glfw/labels/bug","name":"bug","color":"b60205","default":true,"description":"Bug reports and bugfix pull requests"},{"id":37361162,"node_id":"MDU6TGFiZWwzNzM2MTE2Mg==","url":"https://api.github.com/repos/glfw/glfw/labels/macOS","name":"macOS","color":"1d76db","default":false,"description":""},{"id":37361218,"node_id":"MDU6TGFiZWwzNzM2MTIxOA==","url":"https://api.github.com/repos/glfw/glfw/labels/Windows","name":"Windows","color":"0078d6","default":false,"description":"Win32 specific (not Cygwin or WSL)"},{"id":37364584,"node_id":"MDU6TGFiZWwzNzM2NDU4NA==","url":"https://api.github.com/repos/glfw/glfw/labels/verified","name":"verified","color":"0e8a16","default":false,"description":"Reproduced or otherwise verified bugs"},{"id":417091543,"node_id":"MDU6TGFiZWw0MTcwOTE1NDM=","url":"https://api.github.com/repos/glfw/glfw/labels/Linux","name":"Linux","color":"ffffff","default":false,"description":"Linux specific (any window system)"}],"state":"closed","locked":false,"assignee":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/glfw/glfw/milestones/22","html_url":"https://github.com/glfw/glfw/milestone/22","labels_url":"https://api.github.com/repos/glfw/glfw/milestones/22/labels","id":7762419,"node_id":"MI_kwDOAJFXBc4AdnHz","number":22,"title":"3.3.8","description":"","creator":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":24,"state":"closed","created_at":"2022-03-13T15:55:18Z","updated_at":"2024-02-05T14:14:23Z","due_on":null,"closed_at":"2022-07-21T14:49:38Z"},"comments":6,"created_at":"2022-04-30T04:20:22Z","updated_at":"2022-07-06T18:15:28Z","closed_at":"2022-06-09T16:47:55Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Howdy!\r\n\r\nFirst off, thanks for great library. Highly useful for my creation purposes.\r\n\r\nI have been trying to hook gamepad to my application. Naturally I'd want the joystick relevant callbacks to have access to application functions. This is the reason I am writing a struct with a pointer to some event function. The struct is passed over to glfw by the function ```glfwSetJoystickUserPointer``` in the pointer form (second argument). However either I left something or the documentation is highly misleading, in the sense, that \r\n\r\n1. ```glfwGetJoystickUserPointer``` returns null pointer when the joystick is disconnected (different from what is [documented](https://www.glfw.org/docs/3.3/group__input.html#ga18cefd7265d1fa04f3fd38a6746db5f3)) when used in the lambda of ```glfwSetJoystickCallback``` with the event as ```GLFW_DISCONNECTED``` (line 5 in the code below).\r\n2. I have no clue on how to use the event ```GLFW_CONNECTED``` to set a user pointer within the lambda, which itself would require userpointer to dispatch events to rest of the application in form of simple function call.\r\n\r\nThis is the tentative code that I am monkeying with\r\n```\r\nglfwSetJoystickCallback([](int cID, int event)\r\n{\r\n\tif (event == GLFW_DISCONNECTED)\r\n\t{\r\n\t\tWindowsInputData& data = *static_cast<WindowsInputData*>(glfwGetJoystickUserPointer(cID));\r\n\r\n\t\tControllerDeviceDisconnectedEvent eve(cID, event);\r\n\t\tdata.EventCallback(eve);\r\n\r\n\t\tEventDispatcher dispatcher(eve);\r\n\t\tdispatcher.Dispatch<ControllerDeviceDisconnectedEvent>([](ControllerDeviceDisconnectedEvent event) -> bool\r\n\t\t{\r\n\t\t\tKR_CORE_INFO(\"Event: {0}\", event.ToString().c_str());\r\n\t\t\treturn true;\r\n\t\t});\r\n\t}\r\n\telse if (event == GLFW_CONNECTED)\r\n\t{\r\n\t\tvoid* test = glfwGetJoystickUserPointer(cID);\r\n\t\t\r\n\t\tWindowsInputData& data = *static_cast<WindowsInputData*>(test);\r\n\r\n\t\tControllerDeviceConnectedEvent eve(cID, event);\r\n\t\tdata.EventCallback(eve);\r\n\r\n\t\tEventDispatcher dispatcher(eve);\r\n\t\tdispatcher.Dispatch<ControllerDeviceConnectedEvent>([](ControllerDeviceConnectedEvent event) -> bool\r\n\t\t{\r\n\t\t\tKR_CORE_INFO(\"Event: {0}\", event.ToString().c_str());\r\n\t\t\treturn true;\r\n\t\t});\r\n\t}\r\n\r\n});\r\n```\r\n\r\nI shall provide evidence of that happening if required.\r\nCheers!","closed_by":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/2092/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/glfw/glfw/issues/2092/timeline","performed_via_github_app":null,"state_reason":"completed"}