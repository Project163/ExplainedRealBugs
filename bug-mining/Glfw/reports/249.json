{"url":"https://api.github.com/repos/glfw/glfw/issues/1293","repository_url":"https://api.github.com/repos/glfw/glfw","labels_url":"https://api.github.com/repos/glfw/glfw/issues/1293/labels{/name}","comments_url":"https://api.github.com/repos/glfw/glfw/issues/1293/comments","events_url":"https://api.github.com/repos/glfw/glfw/issues/1293/events","html_url":"https://github.com/glfw/glfw/issues/1293","id":333808002,"node_id":"MDU6SXNzdWUzMzM4MDgwMDI=","number":1293,"title":"Range of gamepad axes mapped from digital source incorrect?","user":{"login":"sammko","id":703905,"node_id":"MDQ6VXNlcjcwMzkwNQ==","avatar_url":"https://avatars.githubusercontent.com/u/703905?v=4","gravatar_id":"","url":"https://api.github.com/users/sammko","html_url":"https://github.com/sammko","followers_url":"https://api.github.com/users/sammko/followers","following_url":"https://api.github.com/users/sammko/following{/other_user}","gists_url":"https://api.github.com/users/sammko/gists{/gist_id}","starred_url":"https://api.github.com/users/sammko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammko/subscriptions","organizations_url":"https://api.github.com/users/sammko/orgs","repos_url":"https://api.github.com/users/sammko/repos","events_url":"https://api.github.com/users/sammko/events{/privacy}","received_events_url":"https://api.github.com/users/sammko/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":36425440,"node_id":"MDU6TGFiZWwzNjQyNTQ0MA==","url":"https://api.github.com/repos/glfw/glfw/labels/bug","name":"bug","color":"b60205","default":true,"description":"Bug reports and bugfix pull requests"},{"id":37364584,"node_id":"MDU6TGFiZWwzNzM2NDU4NA==","url":"https://api.github.com/repos/glfw/glfw/labels/verified","name":"verified","color":"0e8a16","default":false,"description":"Reproduced or otherwise verified bugs"}],"state":"closed","locked":false,"assignee":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/glfw/glfw/milestones/12","html_url":"https://github.com/glfw/glfw/milestone/12","labels_url":"https://api.github.com/repos/glfw/glfw/milestones/12/labels","id":1586124,"node_id":"MDk6TWlsZXN0b25lMTU4NjEyNA==","number":12,"title":"3.3","description":"","creator":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":266,"state":"closed","created_at":"2016-02-16T16:04:47Z","updated_at":"2019-07-21T23:55:22Z","due_on":null,"closed_at":"2019-04-16T00:42:23Z"},"comments":2,"created_at":"2018-06-19T19:30:47Z","updated_at":"2019-03-28T14:02:44Z","closed_at":"2019-03-28T00:16:52Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Some gamepads do not have analogue triggers. In such cases, the mapping simply assigns a digital source to the axis -- usually a button (apparently always, in the current SDL_GameControllerDB). Let's call this type of mapping a digital axis. This case is handled [here](https://github.com/glfw/glfw/blob/0be4f3f75aebd9d24583ee86590a38e741db0904/src/input.c#L1255) in glfw. The resulting range of the axis is from 0 to 1.0 instead of the expected(?) -1.0 to 1.0. Other gamepads with analogue triggers produce values in the full range. I propose changing the behaviour to something like this:\r\n```state->axes[i] = js->buttons[e->index] ? 1.0f : -1.0f;```\r\nSimilarly with the hat case [just above](https://github.com/glfw/glfw/blob/0be4f3f75aebd9d24583ee86590a38e741db0904/src/input.c#L1252).\r\n\r\nOf course, one has to consider the behaviour with regard to standard \"stick\" axes, which in the default state are expected to return 0.0f. The current SDL_GameControllerDB contains only two cases of this\r\n\r\n1. the `030000000d0f00000d00000000010000,hori` with `leftx:b4,lefty:b5` and\r\n2. the `03000000100000008200000000000000,PS360+ v1.66` with `leftx:h0.4`.\r\n\r\nThe negative range is however never reached in these two mappings, which, to me, makes no sense either. On the other hand, cases of digital triggers in the database are countless.\r\n\r\nAnother option is to mimic SDL, which always uses the [positive-only range with triggers](https://github.com/SDL-mirror/SDL/blob/master/include/SDL_gamecontroller.h#L297). The current glfw implementation follows [that of SDL](https://github.com/SDL-mirror/SDL/blob/a2a09abf66a72abead51ee95ff9120000d5c9c9b/src/joystick/SDL_gamecontroller.c#L1602), which also only returns positive values for digital axes. This makes sense in SDL, due to the different trigger range.\r\n\r\nI appreciate any thoughts.","closed_by":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/1293/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/glfw/glfw/issues/1293/timeline","performed_via_github_app":null,"state_reason":"completed"}