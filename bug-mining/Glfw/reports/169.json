{"url":"https://api.github.com/repos/glfw/glfw/issues/748","repository_url":"https://api.github.com/repos/glfw/glfw","labels_url":"https://api.github.com/repos/glfw/glfw/issues/748/labels{/name}","comments_url":"https://api.github.com/repos/glfw/glfw/issues/748/comments","events_url":"https://api.github.com/repos/glfw/glfw/issues/748/events","html_url":"https://github.com/glfw/glfw/issues/748","id":150308812,"node_id":"MDU6SXNzdWUxNTAzMDg4MTI=","number":748,"title":"glfwSetWindowMonitor broken","user":{"login":"Spasi","id":1545420,"node_id":"MDQ6VXNlcjE1NDU0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/1545420?v=4","gravatar_id":"","url":"https://api.github.com/users/Spasi","html_url":"https://github.com/Spasi","followers_url":"https://api.github.com/users/Spasi/followers","following_url":"https://api.github.com/users/Spasi/following{/other_user}","gists_url":"https://api.github.com/users/Spasi/gists{/gist_id}","starred_url":"https://api.github.com/users/Spasi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Spasi/subscriptions","organizations_url":"https://api.github.com/users/Spasi/orgs","repos_url":"https://api.github.com/users/Spasi/repos","events_url":"https://api.github.com/users/Spasi/events{/privacy}","received_events_url":"https://api.github.com/users/Spasi/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":36425440,"node_id":"MDU6TGFiZWwzNjQyNTQ0MA==","url":"https://api.github.com/repos/glfw/glfw/labels/bug","name":"bug","color":"b60205","default":true,"description":"Bug reports and bugfix pull requests"},{"id":37361162,"node_id":"MDU6TGFiZWwzNzM2MTE2Mg==","url":"https://api.github.com/repos/glfw/glfw/labels/macOS","name":"macOS","color":"1d76db","default":false,"description":""},{"id":37364584,"node_id":"MDU6TGFiZWwzNzM2NDU4NA==","url":"https://api.github.com/repos/glfw/glfw/labels/verified","name":"verified","color":"0e8a16","default":false,"description":"Reproduced or otherwise verified bugs"}],"state":"closed","locked":false,"assignee":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/glfw/glfw/milestones/12","html_url":"https://github.com/glfw/glfw/milestone/12","labels_url":"https://api.github.com/repos/glfw/glfw/milestones/12/labels","id":1586124,"node_id":"MDk6TWlsZXN0b25lMTU4NjEyNA==","number":12,"title":"3.3","description":"","creator":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":266,"state":"closed","created_at":"2016-02-16T16:04:47Z","updated_at":"2019-07-21T23:55:22Z","due_on":null,"closed_at":"2019-04-16T00:42:23Z"},"comments":2,"created_at":"2016-04-22T08:43:39Z","updated_at":"2017-03-14T20:28:53Z","closed_at":"2017-03-14T20:28:48Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Restoring fullscreen mode to windowed mode does not respect the `glfwSetWindowMonitor` arguments.\n\nGLFW 3.2.0 Cocoa NSGL chdir menubar retina dynamic (d97044d9acc0c76433edda5a75b3196957906ca5)\nOS X 10.11.4\nIntel Iris Graphics 6100\n#### Details\n\nWhile in fullscreen mode, calling `glfwSetWindowMonitor(window, NULL, xpos, ypos, width, height, 0);` does not result in a window at `xpos, ypos` with `width x height` dimensions, but rather covers the entire screen (like having double-clicked on the window title bar). Printing all events gives the following sequence:\n\n```\nBEFORE RESTORE to: 520,176 - 640 x 480\n6.252: Window framebuffer resized to 3300 x 2002\n6.253: Window resized to 1650 x 1001\n6.256: Window framebuffer resized to 1650 x 1001\n6.260: Window refreshed\n6.270: Window framebuffer resized to 640 x 480\n6.271: Window resized to 640 x 480\n6.273: Window refreshed\nAFTER RESTORE\n6.277: Window framebuffer resized to 1680 x 1001\n6.278: Window resized to 1680 x 1001\n6.281: Window refreshed\n6.310: Window framebuffer resized to 3360 x 2002\n6.322: Window refreshed\n```\n\nA workaround seems to be:\n\n``` c\nglfwSetWindowMonitor(window, NULL, xpos, ypos, width, height, 0);\nglfwPollEvents();\nglfwSetWindowMonitor(window, NULL, xpos, ypos, width, height, 0);\n```\n\nI also randomly inserted a `_glfwPlatformPollEvents();` in `cocoa_window.m` after `_glfwInputWindowMonitorChange(window, monitor);` at line 1220. This also fixes the issue and produces the following output:\n\n```\nBEFORE RESTORE to: 520,176 - 640 x 480\n    BEFORE INNER POLL EVENTS\n11.455: Window moved to 0, 0\n11.456: Window framebuffer resized to 3300 x 2100\n11.459: Window refreshed\n    AFTER INNER POLL EVENTS\n11.510: Window framebuffer resized to 3300 x 2002\n11.511: Window resized to 1650 x 1001\n11.537: Window framebuffer resized to 3300 x 2002\n11.547: Window refreshed\n11.574: Window framebuffer resized to 1280 x 960\n11.574: Window resized to 640 x 480\n11.579: Window refreshed\nAFTER RESTORE\n```\n\nNote also that, even though with the workarounds the window ends-up in the correct shape, window position events are missing.\n","closed_by":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/glfw/glfw/issues/748/timeline","performed_via_github_app":null,"state_reason":"completed"}