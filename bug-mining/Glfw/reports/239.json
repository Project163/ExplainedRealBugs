{"url":"https://api.github.com/repos/glfw/glfw/issues/1385","repository_url":"https://api.github.com/repos/glfw/glfw","labels_url":"https://api.github.com/repos/glfw/glfw/issues/1385/labels{/name}","comments_url":"https://api.github.com/repos/glfw/glfw/issues/1385/comments","events_url":"https://api.github.com/repos/glfw/glfw/issues/1385/events","html_url":"https://github.com/glfw/glfw/issues/1385","id":383824972,"node_id":"MDU6SXNzdWUzODM4MjQ5NzI=","number":1385,"title":"Gamepad issues (Steelseries Stratus)","user":{"login":"gimblll","id":6358557,"node_id":"MDQ6VXNlcjYzNTg1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/6358557?v=4","gravatar_id":"","url":"https://api.github.com/users/gimblll","html_url":"https://github.com/gimblll","followers_url":"https://api.github.com/users/gimblll/followers","following_url":"https://api.github.com/users/gimblll/following{/other_user}","gists_url":"https://api.github.com/users/gimblll/gists{/gist_id}","starred_url":"https://api.github.com/users/gimblll/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gimblll/subscriptions","organizations_url":"https://api.github.com/users/gimblll/orgs","repos_url":"https://api.github.com/users/gimblll/repos","events_url":"https://api.github.com/users/gimblll/events{/privacy}","received_events_url":"https://api.github.com/users/gimblll/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":36425440,"node_id":"MDU6TGFiZWwzNjQyNTQ0MA==","url":"https://api.github.com/repos/glfw/glfw/labels/bug","name":"bug","color":"b60205","default":true,"description":"Bug reports and bugfix pull requests"},{"id":37361162,"node_id":"MDU6TGFiZWwzNzM2MTE2Mg==","url":"https://api.github.com/repos/glfw/glfw/labels/macOS","name":"macOS","color":"1d76db","default":false,"description":""},{"id":37364584,"node_id":"MDU6TGFiZWwzNzM2NDU4NA==","url":"https://api.github.com/repos/glfw/glfw/labels/verified","name":"verified","color":"0e8a16","default":false,"description":"Reproduced or otherwise verified bugs"}],"state":"closed","locked":false,"assignee":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/glfw/glfw/milestones/12","html_url":"https://github.com/glfw/glfw/milestone/12","labels_url":"https://api.github.com/repos/glfw/glfw/milestones/12/labels","id":1586124,"node_id":"MDk6TWlsZXN0b25lMTU4NjEyNA==","number":12,"title":"3.3","description":"","creator":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":266,"state":"closed","created_at":"2016-02-16T16:04:47Z","updated_at":"2019-07-21T23:55:22Z","due_on":null,"closed_at":"2019-04-16T00:42:23Z"},"comments":2,"created_at":"2018-11-23T13:29:05Z","updated_at":"2019-01-31T00:59:30Z","closed_at":"2019-01-31T00:58:49Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I encountered a few issues on MacOS (Mojave) (up to date glfw from GitHub) with a specific controller (Steelseries Stratus XL) when trying to use it through the gamepad API. The controller has a mapping in the default mappings file, but glfw rejects it because it cannot find all the buttons when initializing the controller. The attached diffs show the needed additions to get it working. (The kHIDPage_Consumer is for the pause button). You can see that SDL uses the same enumerations (+ a few more that might be useful to add) https://www.libsdl.org/tmp/SDL/src/joystick/darwin/SDL_sysjoystick.c\r\n\r\nThere is also another issue with it. The buttons on this controller are force sensitive, so _GLFWjoyelementNS::maximum is 255 for all the buttons except the pause button. But glfw seems to be passing this number through as is. This then no longer matches with the documented GLFW_PRESS enumeration when reading from GLFWgamepadstate. So the value should probably be clamped to 1, unless you want to support force sensitive buttons?\r\n\r\n```\r\nIndex: cocoa_joystick.m\r\n===================================================================\r\n--- cocoa_joystick.m\t(revision 5570)\r\n+++ cocoa_joystick.m\t(revision 5571)\r\n@@ -220,10 +220,18 @@\r\n                 case kHIDUsage_GD_Hatswitch:\r\n                     target = hats;\r\n                     break;\r\n+\t\t\t\tcase kHIDUsage_GD_DPadUp:\r\n+\t\t\t\tcase kHIDUsage_GD_DPadDown:\r\n+\t\t\t\tcase kHIDUsage_GD_DPadLeft:\r\n+\t\t\t\tcase kHIDUsage_GD_DPadRight:\r\n+\t\t\t\t\ttarget = buttons;\r\n+\t\t\t\t\tbreak;\r\n             }\r\n         }\r\n         else if (page == kHIDPage_Button)\r\n             target = buttons;\r\n+\t\telse if (page == kHIDPage_Consumer)\r\n+\t\t\ttarget = buttons;\r\n \r\n         if (target)\r\n         {\r\n\r\n```","closed_by":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/1385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/glfw/glfw/issues/1385/timeline","performed_via_github_app":null,"state_reason":"completed"}