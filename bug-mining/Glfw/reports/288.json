{"url":"https://api.github.com/repos/glfw/glfw/issues/1236","repository_url":"https://api.github.com/repos/glfw/glfw","labels_url":"https://api.github.com/repos/glfw/glfw/issues/1236/labels{/name}","comments_url":"https://api.github.com/repos/glfw/glfw/issues/1236/comments","events_url":"https://api.github.com/repos/glfw/glfw/issues/1236/events","html_url":"https://github.com/glfw/glfw/issues/1236","id":306833102,"node_id":"MDU6SXNzdWUzMDY4MzMxMDI=","number":1236,"title":"Ignoring mouse events / transparent for inputs / disable hit testing","user":{"login":"ocornut","id":8225057,"node_id":"MDQ6VXNlcjgyMjUwNTc=","avatar_url":"https://avatars.githubusercontent.com/u/8225057?v=4","gravatar_id":"","url":"https://api.github.com/users/ocornut","html_url":"https://github.com/ocornut","followers_url":"https://api.github.com/users/ocornut/followers","following_url":"https://api.github.com/users/ocornut/following{/other_user}","gists_url":"https://api.github.com/users/ocornut/gists{/gist_id}","starred_url":"https://api.github.com/users/ocornut/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ocornut/subscriptions","organizations_url":"https://api.github.com/users/ocornut/orgs","repos_url":"https://api.github.com/users/ocornut/repos","events_url":"https://api.github.com/users/ocornut/events{/privacy}","received_events_url":"https://api.github.com/users/ocornut/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":36425442,"node_id":"MDU6TGFiZWwzNjQyNTQ0Mg==","url":"https://api.github.com/repos/glfw/glfw/labels/enhancement","name":"enhancement","color":"c7def8","default":true,"description":"Feature suggestions and PRs"},{"id":37361162,"node_id":"MDU6TGFiZWwzNzM2MTE2Mg==","url":"https://api.github.com/repos/glfw/glfw/labels/macOS","name":"macOS","color":"1d76db","default":false,"description":""},{"id":37361218,"node_id":"MDU6TGFiZWwzNzM2MTIxOA==","url":"https://api.github.com/repos/glfw/glfw/labels/Windows","name":"Windows","color":"0078d6","default":false,"description":"Win32 specific (not Cygwin or WSL)"},{"id":37361231,"node_id":"MDU6TGFiZWwzNzM2MTIzMQ==","url":"https://api.github.com/repos/glfw/glfw/labels/X11","name":"X11","color":"3b80ae","default":false,"description":null},{"id":89092389,"node_id":"MDU6TGFiZWw4OTA5MjM4OQ==","url":"https://api.github.com/repos/glfw/glfw/labels/Wayland","name":"Wayland","color":"ffbc00","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/glfw/glfw/milestones/13","html_url":"https://github.com/glfw/glfw/milestone/13","labels_url":"https://api.github.com/repos/glfw/glfw/milestones/13/labels","id":1805405,"node_id":"MDk6TWlsZXN0b25lMTgwNTQwNQ==","number":13,"title":"3.4","description":"","creator":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":91,"state":"closed","created_at":"2016-06-02T16:19:22Z","updated_at":"2024-04-15T13:42:33Z","due_on":null,"closed_at":"2024-02-23T12:42:01Z"},"comments":3,"created_at":"2018-03-20T11:50:46Z","updated_at":"2020-07-15T17:57:49Z","closed_at":"2020-07-15T17:56:48Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hello,\r\n\r\nUsing a long subject line because I don't know what is the most appropriate cross-platform terminology and people might search for this under different names\r\n\r\nThis is feature request for a window hint, let's tentatively call it `GLFW_MOUSE_PASSTHRU` (exact naming to be determined). I am using it as part of the same work I mentioned in #1166 (GIF at the end of this post).\r\n\r\n(Note, this is unrelated to transparency from a visual point of view, already discussed many times here: https://github.com/glfw/glfw/issues?utf8=%E2%9C%93&q=transparent)\r\n\r\n----\r\n\r\n**Windows**\r\nThe WndProc handler would do:\r\n```\r\nif (msg == WM_NCHITTEST)\r\n    return HTTRANSPARENT;\r\n```\r\n\r\n**Mac**\r\nI think we can use the 'ignoresMouseEvents' property of 'NSWindow' (untested)\r\nhttps://developer.apple.com/documentation/appkit/nswindow/1419354-ignoresmouseevents?language=objc\r\n> A Boolean value that indicates whether the window is transparent to mouse events.\r\n\r\n**Wayland**\r\nPossibly 'wl_surface::set_input_region' (untested)\r\nhttps://wayland.freedesktop.org/docs/html/apa.html#protocol-spec-wl_surface\r\n> Input events happening outside of this region will try the next surface in the server surface stack. The compositor ignores the parts of the input region that fall outside of the surface. [...] The initial value for an input region is infinite. That means the whole surface will accept input. Setting the pending input region has copy semantics, and the wl_region object can be destroyed immediately. A NULL wl_region causes the input region to be set to infinite. \r\n\r\n**X11**\r\nI'm not sure how X11 works. For reference, Qt uses `xcb_xfixes_create_region()`+`xcb_xfixes_set_window_shape_region_checked`:\r\nhttps://git.merproject.org/mer-core/qtbase/blob/master/qtbase/src/plugins/platforms/xcb/qxcbwindow.cpp#L1151\r\n\r\n----\r\n\r\nContext (gif): I am dragging a glfw window (that is right under my mouse cursor) and need to detect the window under so I can drop into them. Similarly to #1166 I can provide a rough (but usable) approximation on client-side by using the desktop size/position of all my windows, but of course this would bypass the window manager and ignore the proper z-order of windows (including windows from foreign application).\r\n\r\n*EDIT* To clarify, at the moment I am testing this by using win32-specific code and installing a WndProc hook.\r\n\r\n![viewport_20180318](https://user-images.githubusercontent.com/8225057/37652084-98d6b8a0-2c3a-11e8-8ee1-0d2d86815ad0.gif)\r\n\r\n----\r\n\r\nThe naming and my use case are a little tricky because I toggle this feature on an existing GLFW window, and right now I still receive the currently captured mouse position for that window, which is ideal and desirable in my use case, and I think more flexible. This is why I didn't suggest a name like `GLFW_IGNORE_MOUSE_INPUTS`, because both CursorPosCallback and glfwGetCursorPos() still work fine.\r\n\r\nThanks for your consideration,\r\nOmar\r\n","closed_by":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/1236/reactions","total_count":13,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":13,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/glfw/glfw/issues/1236/timeline","performed_via_github_app":null,"state_reason":"completed"}