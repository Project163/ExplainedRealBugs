[{"actor":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-01T00:39:46Z","updated_at":"2018-06-01T00:39:46Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/OlivierSohn/hamazed/issues/19","repository_url":"https://api.github.com/repos/OlivierSohn/hamazed","labels_url":"https://api.github.com/repos/OlivierSohn/hamazed/issues/19/labels{/name}","comments_url":"https://api.github.com/repos/OlivierSohn/hamazed/issues/19/comments","events_url":"https://api.github.com/repos/OlivierSohn/hamazed/issues/19/events","html_url":"https://github.com/OlivierSohn/hamazed/issues/19","id":328342439,"node_id":"MDU6SXNzdWUzMjgzNDI0Mzk=","number":19,"title":"[Ubuntu] Occasional game freezes","user":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-01T00:39:45Z","updated_at":"2018-06-01T11:40:40Z","closed_at":"2018-06-01T11:40:40Z","author_association":"OWNER","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":109905682,"node_id":"MDEwOlJlcG9zaXRvcnkxMDk5MDU2ODI=","name":"hamazed","full_name":"OlivierSohn/hamazed","private":false,"owner":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/OlivierSohn/hamazed","description":"Monorepo for a multi-player game engine, and game examples","fork":false,"url":"https://api.github.com/repos/OlivierSohn/hamazed","forks_url":"https://api.github.com/repos/OlivierSohn/hamazed/forks","keys_url":"https://api.github.com/repos/OlivierSohn/hamazed/keys{/key_id}","collaborators_url":"https://api.github.com/repos/OlivierSohn/hamazed/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/OlivierSohn/hamazed/teams","hooks_url":"https://api.github.com/repos/OlivierSohn/hamazed/hooks","issue_events_url":"https://api.github.com/repos/OlivierSohn/hamazed/issues/events{/number}","events_url":"https://api.github.com/repos/OlivierSohn/hamazed/events","assignees_url":"https://api.github.com/repos/OlivierSohn/hamazed/assignees{/user}","branches_url":"https://api.github.com/repos/OlivierSohn/hamazed/branches{/branch}","tags_url":"https://api.github.com/repos/OlivierSohn/hamazed/tags","blobs_url":"https://api.github.com/repos/OlivierSohn/hamazed/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/OlivierSohn/hamazed/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/OlivierSohn/hamazed/git/refs{/sha}","trees_url":"https://api.github.com/repos/OlivierSohn/hamazed/git/trees{/sha}","statuses_url":"https://api.github.com/repos/OlivierSohn/hamazed/statuses/{sha}","languages_url":"https://api.github.com/repos/OlivierSohn/hamazed/languages","stargazers_url":"https://api.github.com/repos/OlivierSohn/hamazed/stargazers","contributors_url":"https://api.github.com/repos/OlivierSohn/hamazed/contributors","subscribers_url":"https://api.github.com/repos/OlivierSohn/hamazed/subscribers","subscription_url":"https://api.github.com/repos/OlivierSohn/hamazed/subscription","commits_url":"https://api.github.com/repos/OlivierSohn/hamazed/commits{/sha}","git_commits_url":"https://api.github.com/repos/OlivierSohn/hamazed/git/commits{/sha}","comments_url":"https://api.github.com/repos/OlivierSohn/hamazed/comments{/number}","issue_comment_url":"https://api.github.com/repos/OlivierSohn/hamazed/issues/comments{/number}","contents_url":"https://api.github.com/repos/OlivierSohn/hamazed/contents/{+path}","compare_url":"https://api.github.com/repos/OlivierSohn/hamazed/compare/{base}...{head}","merges_url":"https://api.github.com/repos/OlivierSohn/hamazed/merges","archive_url":"https://api.github.com/repos/OlivierSohn/hamazed/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/OlivierSohn/hamazed/downloads","issues_url":"https://api.github.com/repos/OlivierSohn/hamazed/issues{/number}","pulls_url":"https://api.github.com/repos/OlivierSohn/hamazed/pulls{/number}","milestones_url":"https://api.github.com/repos/OlivierSohn/hamazed/milestones{/number}","notifications_url":"https://api.github.com/repos/OlivierSohn/hamazed/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/OlivierSohn/hamazed/labels{/name}","releases_url":"https://api.github.com/repos/OlivierSohn/hamazed/releases{/id}","deployments_url":"https://api.github.com/repos/OlivierSohn/hamazed/deployments","created_at":"2017-11-08T00:05:57Z","updated_at":"2024-06-30T19:13:38Z","pushed_at":"2022-02-13T22:25:10Z","git_url":"git://github.com/OlivierSohn/hamazed.git","ssh_url":"git@github.com:OlivierSohn/hamazed.git","clone_url":"https://github.com/OlivierSohn/hamazed.git","svn_url":"https://github.com/OlivierSohn/hamazed","homepage":"","size":4664,"stargazers_count":42,"watchers_count":42,"language":"Haskell","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":5,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":null,"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["addition","animation","ascii-art","ascii-game","ascii-graphics","collision","game","haskell","laser","mathematics","retrogaming"],"visibility":"public","forks":5,"open_issues":0,"watchers":42,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"On Ubuntu (18.04 at least), [this bug in GLFW](https://github.com/glfw/glfw/issues/1281), makes the game occasionally freeze until the player generates an event in the window (a key-press, a mouse movement).\r\n\r\nAs a workaround, maybe posting an empty event with a small (o(ms) or o(us)) time delay will ensure that the freeze is not noticeable for the user.\r\n\r\nNote that this bug doesn't happen on OSX.\r\n","reactions":{"url":"https://api.github.com/repos/OlivierSohn/hamazed/issues/19/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/OlivierSohn/hamazed/issues/19/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/393805056","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-393805056","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":393805056,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MzgwNTA1Ng==","user":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-01T08:18:44Z","updated_at":"2018-06-01T08:18:44Z","body":"The bug also exists with the latest version of the `master` branch","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/393805056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1657794342,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTY1Nzc5NDM0Mg==","url":"https://api.github.com/repos/glfw/glfw/issues/events/1657794342","actor":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2018-06-01T08:41:06Z","rename":{"from":"[Ubuntu 18.04] Race condition between glfwPostEmptyEvent and glfwWaitEvent","to":"[Ubuntu 18.04 / X11] Race condition between glfwPostEmptyEvent and glfwWaitEvent"},"performed_via_github_app":null},{"id":1657796248,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTY1Nzc5NjI0OA==","url":"https://api.github.com/repos/glfw/glfw/issues/events/1657796248","actor":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2018-06-01T08:42:03Z","rename":{"from":"[Ubuntu 18.04 / X11] Race condition between glfwPostEmptyEvent and glfwWaitEvent","to":"[Ubuntu 18.04 / X11] Sometimes, glfwPostEmptyEvent fails to unblock glfwWaitEvent"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/393844657","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-393844657","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":393844657,"node_id":"MDEyOklzc3VlQ29tbWVudDM5Mzg0NDY1Nw==","user":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-01T10:48:01Z","updated_at":"2018-06-01T10:48:46Z","body":"I also tried to fix the bug by changing the implementations of `glfwPostEmptyEvent` and `glfwWaitEvents` for X11, but could only make the bug \"less frequent\", so it's not a solution.\r\n\r\nMy workaround sofar is to systematically post a _second_ empty event, one millisecond after the first one, to have the guarantee that the freeze will not exceed a millisecond when it happens.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/393844657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1665452268,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTY2NTQ1MjI2OA==","url":"https://api.github.com/repos/glfw/glfw/issues/events/1665452268","actor":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2018-06-06T07:48:50Z","rename":{"from":"[Ubuntu 18.04 / X11] Sometimes, glfwPostEmptyEvent fails to unblock glfwWaitEvent","to":"[Ubuntu 18.04 / X11] Sometimes, glfwPostEmptyEvent fails to unblock glfwWaitEvents"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395268710","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395268710","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395268710,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTI2ODcxMA==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T02:00:34Z","updated_at":"2018-06-07T02:00:34Z","body":"Wouldn't the fix be simply to use a mutex either wrapping your calls to glfwPostEmptyEvent() and glfwWaitEvents() or add a mutex to glfw itself (which may not be appropriate since glfw does not depend on ptthreads, IIRC)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395268710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395312700","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395312700","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395312700,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTMxMjcwMA==","user":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T06:51:45Z","updated_at":"2018-06-07T06:51:45Z","body":"@kovidgoyal if I wrap my calls to glfwPostEmptyEvent() and glfwWaitEvents() in a mutex, I won't be able, ever, to wake up the thread that made the glfwWaitEvents() call by calling glfwPostEmptyEvent() from another thread, because ... of the mutex :) so it's not a solution.\r\n\r\nUsing a mutex at a finer level inside glfw is an approach that could work, my first attempt was not conclusive, but there might be a possible solution there. Do you want to give it a try?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395312700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1667767347,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTY2Nzc2NzM0Nw==","url":"https://api.github.com/repos/glfw/glfw/issues/events/1667767347","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-06-07T06:51:45Z","performed_via_github_app":null},{"id":1667767349,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE2Njc3NjczNDk=","url":"https://api.github.com/repos/glfw/glfw/issues/events/1667767349","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-06-07T06:51:45Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395316985","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395316985","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395316985,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTMxNjk4NQ==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T07:11:10Z","updated_at":"2018-06-07T07:11:10Z","body":"Oh yeah, sorry, I wasn't paying much attention to the context :) Thinking about it some more, I dont think this will work, or at least, one needs to understand the root cause of the failure first. What is happening to the events sent by XSendEvent? Why aren't they being picked up by XNextEvent?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395316985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395320546","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395320546","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395320546,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTMyMDU0Ng==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T07:26:07Z","updated_at":"2018-06-07T07:26:30Z","body":"I tried your minimal test case and on my system (with the i3 window manager, it freezes before starting the test). So I removed the window creation bits form the test (as far as I can tell having a window is immaterial to this issue) and with that it runs, but does not reproduce your issue.\r\nHere is the source I used:\r\n```cpp\r\n#include \"assert.h\"\r\n\r\n#include <stdio.h>\r\n#include <unistd.h>\r\n\r\n#include <atomic>\r\n#include <ctime>\r\n#include <thread>\r\n\r\n//#include \"../glfw/include/GLFW/glfw3.h\"\r\n#include <GLFW/glfw3.h>\r\n\r\n/*\r\nIn this test, a producer thread posts empty events, and a consumer thread consumes them.\r\n\r\n- The producer thread waits for the consumer to consume the event before posting a new event.\r\n\r\n- The consumer thread waits for the producer to declare that an event /will/ be produced before\r\n   trying to consume it.\r\n*/\r\n\r\nstd::atomic_int event_status;\r\nconstexpr int CONSUMED = 0;\r\nconstexpr int POSTED = 1;\r\n\r\nvoid consume() {\r\n    while(true) {\r\n        while(event_status != POSTED) {\r\n            std::this_thread::yield();\r\n        }\r\n\r\n        glfwWaitEvents(); printf(\"c\");\r\n\r\n        event_status = CONSUMED;\r\n    }\r\n}\r\n\r\nvoid produce() {\r\n    while(true) {\r\n        using namespace std;\r\n        clock_t begin = clock();\r\n        while(event_status != CONSUMED) {\r\n            this_thread::yield();\r\n            clock_t end = clock();\r\n            double elapsed_secs = double(end - begin) / CLOCKS_PER_SEC;\r\n            if(elapsed_secs > 3) {\r\n                printf(\r\n                    \"\\nThe bug has been reproduced:\"\r\n                    \"\\nThe main thread is blocked since 3 seconds in glfwWaitEvents(), \"\r\n                    \"eventhough an empty event has been posted to unblock it.\\n\");\r\n                exit(1);\r\n            }\r\n        }\r\n\r\n        event_status = POSTED;\r\n\r\n        glfwPostEmptyEvent(); printf(\".\");\r\n\r\n        // Note that if we move 'event_status = POSTED;' here\r\n        // (thereby ensuring that glfwPostEmptyEvent() and glfwWaitEvents()\r\n        // do not execute at the same time), the bug is not reproduced.\r\n        //\r\n        // In other words, the bug seems to exist only when glfwPostEmptyEvent()\r\n        // and glfwWaitEvents() are executing at the same time.\r\n    }\r\n}\r\n\r\nvoid error_callback(int error, const char* description)\r\n{\r\n    fprintf(stderr, \"Error (%d) : %s\\n\", error, description);\r\n}\r\n\r\nint main() {\r\n\r\n    // disable stdout buffering, to see logs immediately.\r\n    setbuf(stdout, NULL);\r\n\r\n    if (!glfwInit())\r\n    {\r\n        return 1;\r\n    }\r\n\r\n    printf(\"glfwGetVersionString = %s\\n\\n\", glfwGetVersionString());\r\n    glfwSetErrorCallback(error_callback);\r\n\r\n    // Window creation has generated some events in the queue so we clear the queue:\r\n    for(int i=0; i<10; ++i) {\r\n        glfwWaitEventsTimeout(0.1);\r\n    }\r\n\r\n    printf(\r\n        \"Please stay here in the terminal while the test is running, \\n\"\r\n        \"to ensure that no event is sent to the glfw window.\\n\"\r\n        \"\\nPress a key to start the test...\");\r\n    getchar();\r\n\r\n\r\n    {\r\n        event_status = CONSUMED;\r\n        std::thread producer(produce);\r\n        consume();\r\n    }\r\n\r\n    return 0;\r\n}\r\n\r\n// build on OSX :\r\n// g++ main.cpp -std=c++14 -I\"/usr/local/Cellar/glfw/3.2.1/include/GLFW/\" -lglfw3\r\n// build on linux:\r\n// g++ main.cpp -std=c++14 -lglfw -lpthread\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395320546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395332436","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395332436","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395332436,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTMzMjQzNg==","user":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T08:11:24Z","updated_at":"2018-06-07T08:11:24Z","body":"> with the i3 window manager, it freezes before starting the test\r\n\r\nCan you add logs to the test program to see where it freezes?\r\n\r\nIf I run your program on my system, it works fine, so that shows that we need a window to reproduce the problem.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395332436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395333964","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395333964","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395333964,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTMzMzk2NA==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T08:17:02Z","updated_at":"2018-06-07T08:17:02Z","body":"It freezes on the window creation step, basically glfwCreateWindow() never returns\r\n\r\nIf you need a window to reproduce it, it means something on your system is interfering with event handling, probably accessing the X event queue itself. Some kind of plugin that hooks into all processes? Ubuntu is notorious for those.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395333964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395336149","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395336149","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395336149,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTMzNjE0OQ==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T08:24:31Z","updated_at":"2018-06-07T08:24:31Z","body":"I can reproduce with your example, by adding glfwWindowHint(GLFW_VISIBLE, false);\r\nbefore the call to the window creation step.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395336149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395338534","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395338534","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395338534,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTMzODUzNA==","user":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T08:32:27Z","updated_at":"2018-06-07T08:32:27Z","body":"> It freezes on the window creation step, basically glfwCreateWindow() never returns\r\n\r\nI think I'm using \"the standard way\" of creating a glfw window, so I'm surprised that it doesn't work for you.\r\n\r\n> I can reproduce with your example, by adding glfwWindowHint(GLFW_VISIBLE, false);\r\nbefore the call to the window creation step.\r\n\r\nI don't see why this call is necessary, it seems to me it's an unrelated issue (an issue nonetheless).\r\n\r\n> If you need a window to reproduce it, it means something on your system is interfering with event handling, probably accessing the X event queue itself. Some kind of plugin that hooks into all processes? Ubuntu is notorious for those.\r\n\r\nThe window itself probably needs the X event queue, for mouse events, resize events, etc... so I'm not surprised that having or not having a window can make a difference.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395338534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395339600","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395339600","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395339600,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTMzOTYwMA==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T08:35:58Z","updated_at":"2018-06-07T08:35:58Z","body":"The reason the window is needed is because of line 1115 in window.c Basically glfwpostemptyevent is a no-op when no windows are present. I dont know why that is the case, probably needed by some other backend.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395339600/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395339938","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395339938","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395339938,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTMzOTkzOA==","user":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T08:37:06Z","updated_at":"2018-06-07T08:37:06Z","body":"> one needs to understand the root cause of the failure first. What is happening to the events sent by XSendEvent? Why aren't they being picked up by XNextEvent?\r\n\r\nLet me explain what I understood about \"what can be the root cause\" :\r\n\r\nI think the problem is that to wait for events, we use `select` (see the comment on top of waitForEvent in x11_window.c) instead of using X-related functions.\r\n\r\nX-related functions use the display-lock when necessary to avoid race conditions, but select doesn't.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395339938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395341262","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395341262","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395341262,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTM0MTI2Mg==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T08:41:20Z","updated_at":"2018-06-07T08:41:20Z","body":"That should be easy to check, just replace the implementation of waitForEvent with XEventsQueued see if that fixes it.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395341262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395345362","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395345362","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395345362,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTM0NTM2Mg==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T08:55:06Z","updated_at":"2018-06-07T08:55:06Z","body":"Using XPeekEvent instead of the select does indeed fix the issue on my system","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395345362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395348564","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395348564","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395348564,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTM0ODU2NA==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T09:05:24Z","updated_at":"2018-06-07T09:05:24Z","body":"And this commit is the one that introduced the use of select, as best as I can tell: https://github.com/glfw/glfw/commit/eb7688df8f851b2a21047f757096b500ded34e48\r\n\r\nI dont see any good way to fix this. As far as I can tell, you cannot both be lock free and avoid race conditions. I dont know why it is important to be able to use GLX calls from another thread, OpenGL calls, sure, but GLX?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395348564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395354774","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395354774","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395354774,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTM1NDc3NA==","user":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T09:25:56Z","updated_at":"2018-06-07T09:25:56Z","body":"`XEventsQueued` will block, but if we repeatedly call XPending() and then sched_yield() maybe that would be ok? I'm trying this right now, to see if CPU consumption is not too high","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395354774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395355936","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395355936","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395355936,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTM1NTkzNg==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T09:29:48Z","updated_at":"2018-06-07T09:29:48Z","body":"CPU consumption would be awful with that. The other possibility is to use a dedicated extra fd pair. Have the select call wait on that as well and have the postemptyevent function write to it.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395355936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395358998","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395358998","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395358998,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTM1ODk5OA==","user":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T09:40:30Z","updated_at":"2018-06-07T09:40:30Z","body":"so `XPending()` + `sched_yield()` works (the race condition is solved), we are lock-free (i.e one can take the display lock when we release it), but the problem is we use 100%cpu! we could use usleep(...) instead of sched_yield() but that would increase latency...\r\n\r\n> I dont know why it is important to be able to use GLX calls from another thread, OpenGL calls, sure, but GLX?\r\n\r\nI have no idea","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395358998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395359206","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395359206","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395359206,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTM1OTIwNg==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T09:41:13Z","updated_at":"2018-06-07T09:41:13Z","body":"See my previous post.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395359206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395362054","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395362054","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395362054,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTM2MjA1NA==","user":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T09:50:53Z","updated_at":"2018-06-07T09:50:53Z","body":"> The other possibility is to use a dedicated extra fd pair. Have the select call wait on that as well and have the postemptyevent function write to it.\r\n\r\nSounds good","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395362054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395362974","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395362974","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395362974,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTM2Mjk3NA==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T09:54:01Z","updated_at":"2018-06-07T09:54:01Z","body":"I'm happy to implement that in my glfw fork (and switch to using poll as well instead of select) since this issue could affect me, though I have not seen it in the wild so far. However you'll need to get buy in from @elmindreda if you want to get the fix merged here.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395362974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1668132139,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTY2ODEzMjEzOQ==","url":"https://api.github.com/repos/glfw/glfw/issues/events/1668132139","actor":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-06-07T09:54:01Z","performed_via_github_app":null},{"id":1668132140,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE2NjgxMzIxNDA=","url":"https://api.github.com/repos/glfw/glfw/issues/events/1668132140","actor":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-06-07T09:54:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395366540","html_url":"https://github.com/glfw/glfw/issues/1281#issuecomment-395366540","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1281","id":395366540,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTM2NjU0MA==","user":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-07T10:05:59Z","updated_at":"2018-06-07T10:05:59Z","body":"Thanks, it would be great! If you want I can cherrypick your commit to propose a merge here afterwards (or did you intend to merge your fork?).\r\n\r\nJust to give some context, in my games I use event-driven loops : no rendering happens until an event (coming from the server, or from the platform) occurs. I'm not sure I would have noticed this bug had I used a time-based loop where every 10 milli seconds a render occurs...","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/395366540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"OlivierSohn","id":8191319,"node_id":"MDQ6VXNlcjgxOTEzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8191319?v=4","gravatar_id":"","url":"https://api.github.com/users/OlivierSohn","html_url":"https://github.com/OlivierSohn","followers_url":"https://api.github.com/users/OlivierSohn/followers","following_url":"https://api.github.com/users/OlivierSohn/following{/other_user}","gists_url":"https://api.github.com/users/OlivierSohn/gists{/gist_id}","starred_url":"https://api.github.com/users/OlivierSohn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlivierSohn/subscriptions","organizations_url":"https://api.github.com/users/OlivierSohn/orgs","repos_url":"https://api.github.com/users/OlivierSohn/repos","events_url":"https://api.github.com/users/OlivierSohn/events{/privacy}","received_events_url":"https://api.github.com/users/OlivierSohn/received_events","type":"User","user_view_type":"public","site_admin":false}}]