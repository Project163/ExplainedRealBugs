[{"id":1630538944,"node_id":"MDEyOkxhYmVsZWRFdmVudDE2MzA1Mzg5NDQ=","url":"https://api.github.com/repos/glfw/glfw/issues/events/1630538944","actor":{"login":"elmindreda","id":133714,"node_id":"MDQ6VXNlcjEzMzcxNA==","avatar_url":"https://avatars.githubusercontent.com/u/133714?v=4","gravatar_id":"","url":"https://api.github.com/users/elmindreda","html_url":"https://github.com/elmindreda","followers_url":"https://api.github.com/users/elmindreda/followers","following_url":"https://api.github.com/users/elmindreda/following{/other_user}","gists_url":"https://api.github.com/users/elmindreda/gists{/gist_id}","starred_url":"https://api.github.com/users/elmindreda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elmindreda/subscriptions","organizations_url":"https://api.github.com/users/elmindreda/orgs","repos_url":"https://api.github.com/users/elmindreda/repos","events_url":"https://api.github.com/users/elmindreda/events{/privacy}","received_events_url":"https://api.github.com/users/elmindreda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-05-16T20:32:21Z","label":{"name":"Wayland","color":"ffbc00"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/389794227","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-389794227","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":389794227,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTc5NDIyNw==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-17T08:52:17Z","updated_at":"2018-05-17T08:52:17Z","body":"@linkmauve I'm guessing this is because of te buffer glfw uses to render window decorations?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/389794227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1631427236,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTYzMTQyNzIzNg==","url":"https://api.github.com/repos/glfw/glfw/issues/events/1631427236","actor":{"login":"linkmauve","id":7755816,"node_id":"MDQ6VXNlcjc3NTU4MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7755816?v=4","gravatar_id":"","url":"https://api.github.com/users/linkmauve","html_url":"https://github.com/linkmauve","followers_url":"https://api.github.com/users/linkmauve/followers","following_url":"https://api.github.com/users/linkmauve/following{/other_user}","gists_url":"https://api.github.com/users/linkmauve/gists{/gist_id}","starred_url":"https://api.github.com/users/linkmauve/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linkmauve/subscriptions","organizations_url":"https://api.github.com/users/linkmauve/orgs","repos_url":"https://api.github.com/users/linkmauve/repos","events_url":"https://api.github.com/users/linkmauve/events{/privacy}","received_events_url":"https://api.github.com/users/linkmauve/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-05-17T08:52:17Z","performed_via_github_app":null},{"id":1631427238,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE2MzE0MjcyMzg=","url":"https://api.github.com/repos/glfw/glfw/issues/events/1631427238","actor":{"login":"linkmauve","id":7755816,"node_id":"MDQ6VXNlcjc3NTU4MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7755816?v=4","gravatar_id":"","url":"https://api.github.com/users/linkmauve","html_url":"https://github.com/linkmauve","followers_url":"https://api.github.com/users/linkmauve/followers","following_url":"https://api.github.com/users/linkmauve/following{/other_user}","gists_url":"https://api.github.com/users/linkmauve/gists{/gist_id}","starred_url":"https://api.github.com/users/linkmauve/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linkmauve/subscriptions","organizations_url":"https://api.github.com/users/linkmauve/orgs","repos_url":"https://api.github.com/users/linkmauve/repos","events_url":"https://api.github.com/users/linkmauve/events{/privacy}","received_events_url":"https://api.github.com/users/linkmauve/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-05-17T08:52:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390425277","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-390425277","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":390425277,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDQyNTI3Nw==","user":{"login":"linkmauve","id":7755816,"node_id":"MDQ6VXNlcjc3NTU4MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7755816?v=4","gravatar_id":"","url":"https://api.github.com/users/linkmauve","html_url":"https://github.com/linkmauve","followers_url":"https://api.github.com/users/linkmauve/followers","following_url":"https://api.github.com/users/linkmauve/following{/other_user}","gists_url":"https://api.github.com/users/linkmauve/gists{/gist_id}","starred_url":"https://api.github.com/users/linkmauve/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linkmauve/subscriptions","organizations_url":"https://api.github.com/users/linkmauve/orgs","repos_url":"https://api.github.com/users/linkmauve/repos","events_url":"https://api.github.com/users/linkmauve/events{/privacy}","received_events_url":"https://api.github.com/users/linkmauve/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-19T18:54:20Z","updated_at":"2018-05-19T18:54:20Z","body":"I can’t reproduce the log you provide at https://github.com/swaywm/sway/issues/1992#issuecomment-389515651 on `rootston` with a GLFW example, instead I get requests done in the correct order, with the configure dance being completed before allocating the first buffer.\r\n\r\nCould you make sure you’re running the latest commit from master?\r\n\r\n@kovidgoyal, wlroots [doesn’t support](https://github.com/swaywm/wlroots/issues/633) `wp_viewporter`, so that can’t be the issue.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390425277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"linkmauve","id":7755816,"node_id":"MDQ6VXNlcjc3NTU4MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7755816?v=4","gravatar_id":"","url":"https://api.github.com/users/linkmauve","html_url":"https://github.com/linkmauve","followers_url":"https://api.github.com/users/linkmauve/followers","following_url":"https://api.github.com/users/linkmauve/following{/other_user}","gists_url":"https://api.github.com/users/linkmauve/gists{/gist_id}","starred_url":"https://api.github.com/users/linkmauve/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linkmauve/subscriptions","organizations_url":"https://api.github.com/users/linkmauve/orgs","repos_url":"https://api.github.com/users/linkmauve/repos","events_url":"https://api.github.com/users/linkmauve/events{/privacy}","received_events_url":"https://api.github.com/users/linkmauve/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1635651660,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTYzNTY1MTY2MA==","url":"https://api.github.com/repos/glfw/glfw/issues/events/1635651660","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-05-19T18:54:20Z","performed_via_github_app":null},{"id":1635651661,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE2MzU2NTE2NjE=","url":"https://api.github.com/repos/glfw/glfw/issues/events/1635651661","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-05-19T18:54:20Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390427259","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-390427259","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":390427259,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDQyNzI1OQ==","user":{"login":"dryya","id":4873173,"node_id":"MDQ6VXNlcjQ4NzMxNzM=","avatar_url":"https://avatars.githubusercontent.com/u/4873173?v=4","gravatar_id":"","url":"https://api.github.com/users/dryya","html_url":"https://github.com/dryya","followers_url":"https://api.github.com/users/dryya/followers","following_url":"https://api.github.com/users/dryya/following{/other_user}","gists_url":"https://api.github.com/users/dryya/gists{/gist_id}","starred_url":"https://api.github.com/users/dryya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dryya/subscriptions","organizations_url":"https://api.github.com/users/dryya/orgs","repos_url":"https://api.github.com/users/dryya/repos","events_url":"https://api.github.com/users/dryya/events{/privacy}","received_events_url":"https://api.github.com/users/dryya/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-19T19:31:12Z","updated_at":"2018-05-19T19:31:12Z","body":"I'm absolutely sure I was running the latest commit. I have not tried on rootson, though. Will check now.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390427259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dryya","id":4873173,"node_id":"MDQ6VXNlcjQ4NzMxNzM=","avatar_url":"https://avatars.githubusercontent.com/u/4873173?v=4","gravatar_id":"","url":"https://api.github.com/users/dryya","html_url":"https://github.com/dryya","followers_url":"https://api.github.com/users/dryya/followers","following_url":"https://api.github.com/users/dryya/following{/other_user}","gists_url":"https://api.github.com/users/dryya/gists{/gist_id}","starred_url":"https://api.github.com/users/dryya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dryya/subscriptions","organizations_url":"https://api.github.com/users/dryya/orgs","repos_url":"https://api.github.com/users/dryya/repos","events_url":"https://api.github.com/users/dryya/events{/privacy}","received_events_url":"https://api.github.com/users/dryya/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390427529","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-390427529","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":390427529,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDQyNzUyOQ==","user":{"login":"linkmauve","id":7755816,"node_id":"MDQ6VXNlcjc3NTU4MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7755816?v=4","gravatar_id":"","url":"https://api.github.com/users/linkmauve","html_url":"https://github.com/linkmauve","followers_url":"https://api.github.com/users/linkmauve/followers","following_url":"https://api.github.com/users/linkmauve/following{/other_user}","gists_url":"https://api.github.com/users/linkmauve/gists{/gist_id}","starred_url":"https://api.github.com/users/linkmauve/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linkmauve/subscriptions","organizations_url":"https://api.github.com/users/linkmauve/orgs","repos_url":"https://api.github.com/users/linkmauve/repos","events_url":"https://api.github.com/users/linkmauve/events{/privacy}","received_events_url":"https://api.github.com/users/linkmauve/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-19T19:35:55Z","updated_at":"2018-05-19T19:35:55Z","body":"Could you also check with the normal GLFW, and not some fork which is probably out of date?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390427529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"linkmauve","id":7755816,"node_id":"MDQ6VXNlcjc3NTU4MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7755816?v=4","gravatar_id":"","url":"https://api.github.com/users/linkmauve","html_url":"https://github.com/linkmauve","followers_url":"https://api.github.com/users/linkmauve/followers","following_url":"https://api.github.com/users/linkmauve/following{/other_user}","gists_url":"https://api.github.com/users/linkmauve/gists{/gist_id}","starred_url":"https://api.github.com/users/linkmauve/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linkmauve/subscriptions","organizations_url":"https://api.github.com/users/linkmauve/orgs","repos_url":"https://api.github.com/users/linkmauve/repos","events_url":"https://api.github.com/users/linkmauve/events{/privacy}","received_events_url":"https://api.github.com/users/linkmauve/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390427741","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-390427741","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":390427741,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDQyNzc0MQ==","user":{"login":"dryya","id":4873173,"node_id":"MDQ6VXNlcjQ4NzMxNzM=","avatar_url":"https://avatars.githubusercontent.com/u/4873173?v=4","gravatar_id":"","url":"https://api.github.com/users/dryya","html_url":"https://github.com/dryya","followers_url":"https://api.github.com/users/dryya/followers","following_url":"https://api.github.com/users/dryya/following{/other_user}","gists_url":"https://api.github.com/users/dryya/gists{/gist_id}","starred_url":"https://api.github.com/users/dryya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dryya/subscriptions","organizations_url":"https://api.github.com/users/dryya/orgs","repos_url":"https://api.github.com/users/dryya/repos","events_url":"https://api.github.com/users/dryya/events{/privacy}","received_events_url":"https://api.github.com/users/dryya/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-19T19:40:14Z","updated_at":"2018-05-19T19:40:27Z","body":"I get the same behavior in rootston - I can launch termite, but trying to launch kitty from it fails. I also tried just dropping in the GLFW files to replace kitty's, but could not successfully build - tried to fix it for a while the other day but eventually gave up. Would there be some easier way to get kitty to use the system glfw I have installed instead of its bundled version?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390427741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dryya","id":4873173,"node_id":"MDQ6VXNlcjQ4NzMxNzM=","avatar_url":"https://avatars.githubusercontent.com/u/4873173?v=4","gravatar_id":"","url":"https://api.github.com/users/dryya","html_url":"https://github.com/dryya","followers_url":"https://api.github.com/users/dryya/followers","following_url":"https://api.github.com/users/dryya/following{/other_user}","gists_url":"https://api.github.com/users/dryya/gists{/gist_id}","starred_url":"https://api.github.com/users/dryya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dryya/subscriptions","organizations_url":"https://api.github.com/users/dryya/orgs","repos_url":"https://api.github.com/users/dryya/repos","events_url":"https://api.github.com/users/dryya/events{/privacy}","received_events_url":"https://api.github.com/users/dryya/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390453077","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-390453077","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":390453077,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDQ1MzA3Nw==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-20T02:29:47Z","updated_at":"2018-05-20T02:29:47Z","body":"kitty's fork of glfw is most definitely not out of date. There are no commits on the wl_* files in glfw master that are not in kitty's fork. There are some extra commits to fix keyboard handling, which I have described in other bug reports here.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390453077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390453882","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-390453882","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":390453882,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDQ1Mzg4Mg==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-20T02:55:54Z","updated_at":"2019-04-07T21:06:30Z","body":"Just for completeness, here is a diff of the wl_* files in glfw master vs kitty, as you can see the only changes are related to keyboard handling and so cannot have a bearing on this issue.\r\n\r\n<details><summary>Diff of upstream vs kitty GLFW</summary>\r\n\r\n```diff\r\ndiff -Naurp /t/g/wl_init.c /t/k/wl_init.c\r\n--- /t/g/wl_init.c\t2018-05-20 08:20:32.313078050 +0530\r\n+++ /t/k/wl_init.c\t2018-05-20 08:19:09.523787242 +0530\r\n@@ -32,7 +32,6 @@\r\n #include <stdlib.h>\r\n #include <string.h>\r\n #include <sys/mman.h>\r\n-#include <sys/timerfd.h>\r\n #include <unistd.h>\r\n #include <wayland-client.h>\r\n \r\n@@ -350,16 +349,7 @@ static void keyboardHandleKeymap(void* d\r\n                                  int fd,\r\n                                  uint32_t size)\r\n {\r\n-    struct xkb_keymap* keymap;\r\n-    struct xkb_state* state;\r\n-\r\n-#ifdef HAVE_XKBCOMMON_COMPOSE_H\r\n-    struct xkb_compose_table* composeTable;\r\n-    struct xkb_compose_state* composeState;\r\n-#endif\r\n-\r\n     char* mapStr;\r\n-    const char* locale;\r\n \r\n     if (format != WL_KEYBOARD_KEYMAP_FORMAT_XKB_V1)\r\n     {\r\n@@ -372,78 +362,10 @@ static void keyboardHandleKeymap(void* d\r\n         close(fd);\r\n         return;\r\n     }\r\n-\r\n-    keymap = xkb_keymap_new_from_string(_glfw.wl.xkb.context,\r\n-                                        mapStr,\r\n-                                        XKB_KEYMAP_FORMAT_TEXT_V1,\r\n-                                        0);\r\n+    glfw_xkb_compile_keymap(&_glfw.wl.xkb, mapStr);\r\n     munmap(mapStr, size);\r\n     close(fd);\r\n \r\n-    if (!keymap)\r\n-    {\r\n-        _glfwInputError(GLFW_PLATFORM_ERROR,\r\n-                        \"Wayland: Failed to compile keymap\");\r\n-        return;\r\n-    }\r\n-\r\n-    state = xkb_state_new(keymap);\r\n-    if (!state)\r\n-    {\r\n-        _glfwInputError(GLFW_PLATFORM_ERROR,\r\n-                        \"Wayland: Failed to create XKB state\");\r\n-        xkb_keymap_unref(keymap);\r\n-        return;\r\n-    }\r\n-\r\n-    // Look up the preferred locale, falling back to \"C\" as default.\r\n-    locale = getenv(\"LC_ALL\");\r\n-    if (!locale)\r\n-        locale = getenv(\"LC_CTYPE\");\r\n-    if (!locale)\r\n-        locale = getenv(\"LANG\");\r\n-    if (!locale)\r\n-        locale = \"C\";\r\n-\r\n-#ifdef HAVE_XKBCOMMON_COMPOSE_H\r\n-    composeTable =\r\n-        xkb_compose_table_new_from_locale(_glfw.wl.xkb.context, locale,\r\n-                                          XKB_COMPOSE_COMPILE_NO_FLAGS);\r\n-    if (composeTable)\r\n-    {\r\n-        composeState =\r\n-            xkb_compose_state_new(composeTable, XKB_COMPOSE_STATE_NO_FLAGS);\r\n-        xkb_compose_table_unref(composeTable);\r\n-        if (composeState)\r\n-            _glfw.wl.xkb.composeState = composeState;\r\n-        else\r\n-            _glfwInputError(GLFW_PLATFORM_ERROR,\r\n-                            \"Wayland: Failed to create XKB compose state\");\r\n-    }\r\n-    else\r\n-    {\r\n-        _glfwInputError(GLFW_PLATFORM_ERROR,\r\n-                        \"Wayland: Failed to create XKB compose table\");\r\n-    }\r\n-#endif\r\n-\r\n-    xkb_keymap_unref(_glfw.wl.xkb.keymap);\r\n-    xkb_state_unref(_glfw.wl.xkb.state);\r\n-    _glfw.wl.xkb.keymap = keymap;\r\n-    _glfw.wl.xkb.state = state;\r\n-\r\n-    _glfw.wl.xkb.controlMask =\r\n-        1 << xkb_keymap_mod_get_index(_glfw.wl.xkb.keymap, \"Control\");\r\n-    _glfw.wl.xkb.altMask =\r\n-        1 << xkb_keymap_mod_get_index(_glfw.wl.xkb.keymap, \"Mod1\");\r\n-    _glfw.wl.xkb.shiftMask =\r\n-        1 << xkb_keymap_mod_get_index(_glfw.wl.xkb.keymap, \"Shift\");\r\n-    _glfw.wl.xkb.superMask =\r\n-        1 << xkb_keymap_mod_get_index(_glfw.wl.xkb.keymap, \"Mod4\");\r\n-    _glfw.wl.xkb.capsLockMask =\r\n-        1 << xkb_keymap_mod_get_index(_glfw.wl.xkb.keymap, \"Lock\");\r\n-    _glfw.wl.xkb.numLockMask =\r\n-        1 << xkb_keymap_mod_get_index(_glfw.wl.xkb.keymap, \"Mod2\");\r\n }\r\n \r\n static void keyboardHandleEnter(void* data,\r\n@@ -482,65 +404,6 @@ static void keyboardHandleLeave(void* da\r\n     _glfwInputWindowFocus(window, GLFW_FALSE);\r\n }\r\n \r\n-static int toGLFWKeyCode(uint32_t key)\r\n-{\r\n-    if (key < sizeof(_glfw.wl.keycodes) / sizeof(_glfw.wl.keycodes[0]))\r\n-        return _glfw.wl.keycodes[key];\r\n-\r\n-    return GLFW_KEY_UNKNOWN;\r\n-}\r\n-\r\n-#ifdef HAVE_XKBCOMMON_COMPOSE_H\r\n-static xkb_keysym_t composeSymbol(xkb_keysym_t sym)\r\n-{\r\n-    if (sym == XKB_KEY_NoSymbol || !_glfw.wl.xkb.composeState)\r\n-        return sym;\r\n-    if (xkb_compose_state_feed(_glfw.wl.xkb.composeState, sym)\r\n-            != XKB_COMPOSE_FEED_ACCEPTED)\r\n-        return sym;\r\n-    switch (xkb_compose_state_get_status(_glfw.wl.xkb.composeState))\r\n-    {\r\n-        case XKB_COMPOSE_COMPOSED:\r\n-            return xkb_compose_state_get_one_sym(_glfw.wl.xkb.composeState);\r\n-        case XKB_COMPOSE_COMPOSING:\r\n-        case XKB_COMPOSE_CANCELLED:\r\n-            return XKB_KEY_NoSymbol;\r\n-        case XKB_COMPOSE_NOTHING:\r\n-        default:\r\n-            return sym;\r\n-    }\r\n-}\r\n-#endif\r\n-\r\n-static GLFWbool inputChar(_GLFWwindow* window, uint32_t key)\r\n-{\r\n-    uint32_t code, numSyms;\r\n-    long cp;\r\n-    const xkb_keysym_t *syms;\r\n-    xkb_keysym_t sym;\r\n-\r\n-    code = key + 8;\r\n-    numSyms = xkb_state_key_get_syms(_glfw.wl.xkb.state, code, &syms);\r\n-\r\n-    if (numSyms == 1)\r\n-    {\r\n-#ifdef HAVE_XKBCOMMON_COMPOSE_H\r\n-        sym = composeSymbol(syms[0]);\r\n-#else\r\n-        sym = syms[0];\r\n-#endif\r\n-        cp = _glfwKeySym2Unicode(sym);\r\n-        if (cp != -1)\r\n-        {\r\n-            const int mods = _glfw.wl.xkb.modifiers;\r\n-            const int plain = !(mods & (GLFW_MOD_CONTROL | GLFW_MOD_ALT));\r\n-            _glfwInputChar(window, cp, mods, plain);\r\n-        }\r\n-    }\r\n-\r\n-    return xkb_keymap_key_repeats(_glfw.wl.xkb.keymap, syms[0]);\r\n-}\r\n-\r\n static void keyboardHandleKey(void* data,\r\n                               struct wl_keyboard* keyboard,\r\n                               uint32_t serial,\r\n@@ -548,37 +411,19 @@ static void keyboardHandleKey(void* data\r\n                               uint32_t key,\r\n                               uint32_t state)\r\n {\r\n-    int keyCode;\r\n-    int action;\r\n     _GLFWwindow* window = _glfw.wl.keyboardFocus;\r\n-    GLFWbool shouldRepeat;\r\n-    struct itimerspec timer = {};\r\n-\r\n     if (!window)\r\n         return;\r\n-\r\n-    keyCode = toGLFWKeyCode(key);\r\n-    action = state == WL_KEYBOARD_KEY_STATE_PRESSED\r\n-            ? GLFW_PRESS : GLFW_RELEASE;\r\n-\r\n-    _glfwInputKey(window, keyCode, key, action,\r\n-                  _glfw.wl.xkb.modifiers);\r\n-\r\n-    if (action == GLFW_PRESS)\r\n-    {\r\n-        shouldRepeat = inputChar(window, key);\r\n-\r\n-        if (shouldRepeat && _glfw.wl.keyboardRepeatRate > 0)\r\n-        {\r\n-            _glfw.wl.keyboardLastKey = keyCode;\r\n-            _glfw.wl.keyboardLastScancode = key;\r\n-            timer.it_interval.tv_sec = _glfw.wl.keyboardRepeatRate / 1000;\r\n-            timer.it_interval.tv_nsec = (_glfw.wl.keyboardRepeatRate % 1000) * 1000000;\r\n-            timer.it_value.tv_sec = _glfw.wl.keyboardRepeatDelay / 1000;\r\n-            timer.it_value.tv_nsec = (_glfw.wl.keyboardRepeatDelay % 1000) * 1000000;\r\n-        }\r\n+    int action = state == WL_KEYBOARD_KEY_STATE_PRESSED ? GLFW_PRESS : GLFW_RELEASE;\r\n+    glfw_xkb_handle_key_event(window, &_glfw.wl.xkb, key, action);\r\n+    _glfw.wl.keyRepeatInfo.nextRepeatAt = 0;\r\n+\r\n+    if (action == GLFW_PRESS && _glfw.wl.keyboardRepeatRate > 0 && glfw_xkb_should_repeat(&_glfw.wl.xkb, key))\r\n+    {\r\n+        _glfw.wl.keyRepeatInfo.key = key;\r\n+        _glfw.wl.keyRepeatInfo.nextRepeatAt = glfwGetTime() + (double)(_glfw.wl.keyboardRepeatDelay) / 1000.0;\r\n+        _glfw.wl.keyRepeatInfo.keyboardFocus = window;\r\n     }\r\n-    timerfd_settime(_glfw.wl.timerfd, 0, &timer, NULL);\r\n }\r\n \r\n static void keyboardHandleModifiers(void* data,\r\n@@ -589,41 +434,9 @@ static void keyboardHandleModifiers(void\r\n                                     uint32_t modsLocked,\r\n                                     uint32_t group)\r\n {\r\n-    xkb_mod_mask_t mask;\r\n-    unsigned int modifiers = 0;\r\n-\r\n-    if (!_glfw.wl.xkb.keymap)\r\n-        return;\r\n-\r\n-    xkb_state_update_mask(_glfw.wl.xkb.state,\r\n-                          modsDepressed,\r\n-                          modsLatched,\r\n-                          modsLocked,\r\n-                          0,\r\n-                          0,\r\n-                          group);\r\n-\r\n-    mask = xkb_state_serialize_mods(_glfw.wl.xkb.state,\r\n-                                    XKB_STATE_MODS_DEPRESSED |\r\n-                                    XKB_STATE_LAYOUT_DEPRESSED |\r\n-                                    XKB_STATE_MODS_LATCHED |\r\n-                                    XKB_STATE_LAYOUT_LATCHED);\r\n-    if (mask & _glfw.wl.xkb.controlMask)\r\n-        modifiers |= GLFW_MOD_CONTROL;\r\n-    if (mask & _glfw.wl.xkb.altMask)\r\n-        modifiers |= GLFW_MOD_ALT;\r\n-    if (mask & _glfw.wl.xkb.shiftMask)\r\n-        modifiers |= GLFW_MOD_SHIFT;\r\n-    if (mask & _glfw.wl.xkb.superMask)\r\n-        modifiers |= GLFW_MOD_SUPER;\r\n-    if (mask & _glfw.wl.xkb.capsLockMask)\r\n-        modifiers |= GLFW_MOD_CAPS_LOCK;\r\n-    if (mask & _glfw.wl.xkb.numLockMask)\r\n-        modifiers |= GLFW_MOD_NUM_LOCK;\r\n-    _glfw.wl.xkb.modifiers = modifiers;\r\n+    glfw_xkb_update_modifiers(&_glfw.wl.xkb, modsDepressed, modsLatched, modsLocked, 0, 0, group);\r\n }\r\n \r\n-#ifdef WL_KEYBOARD_REPEAT_INFO_SINCE_VERSION\r\n static void keyboardHandleRepeatInfo(void* data,\r\n                                      struct wl_keyboard* keyboard,\r\n                                      int32_t rate,\r\n@@ -635,7 +448,6 @@ static void keyboardHandleRepeatInfo(voi\r\n     _glfw.wl.keyboardRepeatRate = rate;\r\n     _glfw.wl.keyboardRepeatDelay = delay;\r\n }\r\n-#endif\r\n \r\n static const struct wl_keyboard_listener keyboardListener = {\r\n     keyboardHandleKeymap,\r\n@@ -643,9 +455,7 @@ static const struct wl_keyboard_listener\r\n     keyboardHandleLeave,\r\n     keyboardHandleKey,\r\n     keyboardHandleModifiers,\r\n-#ifdef WL_KEYBOARD_REPEAT_INFO_SINCE_VERSION\r\n     keyboardHandleRepeatInfo,\r\n-#endif\r\n };\r\n \r\n static void seatHandleCapabilities(void* data,\r\n@@ -798,140 +608,6 @@ static const struct wl_registry_listener\r\n     registryHandleGlobalRemove\r\n };\r\n \r\n-// Create key code translation tables\r\n-//\r\n-static void createKeyTables(void)\r\n-{\r\n-    int scancode;\r\n-\r\n-    memset(_glfw.wl.keycodes, -1, sizeof(_glfw.wl.keycodes));\r\n-    memset(_glfw.wl.scancodes, -1, sizeof(_glfw.wl.scancodes));\r\n-\r\n-    _glfw.wl.keycodes[KEY_GRAVE]      = GLFW_KEY_GRAVE_ACCENT;\r\n-    _glfw.wl.keycodes[KEY_1]          = GLFW_KEY_1;\r\n-    _glfw.wl.keycodes[KEY_2]          = GLFW_KEY_2;\r\n-    _glfw.wl.keycodes[KEY_3]          = GLFW_KEY_3;\r\n-    _glfw.wl.keycodes[KEY_4]          = GLFW_KEY_4;\r\n-    _glfw.wl.keycodes[KEY_5]          = GLFW_KEY_5;\r\n-    _glfw.wl.keycodes[KEY_6]          = GLFW_KEY_6;\r\n-    _glfw.wl.keycodes[KEY_7]          = GLFW_KEY_7;\r\n-    _glfw.wl.keycodes[KEY_8]          = GLFW_KEY_8;\r\n-    _glfw.wl.keycodes[KEY_9]          = GLFW_KEY_9;\r\n-    _glfw.wl.keycodes[KEY_0]          = GLFW_KEY_0;\r\n-    _glfw.wl.keycodes[KEY_SPACE]      = GLFW_KEY_SPACE;\r\n-    _glfw.wl.keycodes[KEY_MINUS]      = GLFW_KEY_MINUS;\r\n-    _glfw.wl.keycodes[KEY_EQUAL]      = GLFW_KEY_EQUAL;\r\n-    _glfw.wl.keycodes[KEY_Q]          = GLFW_KEY_Q;\r\n-    _glfw.wl.keycodes[KEY_W]          = GLFW_KEY_W;\r\n-    _glfw.wl.keycodes[KEY_E]          = GLFW_KEY_E;\r\n-    _glfw.wl.keycodes[KEY_R]          = GLFW_KEY_R;\r\n-    _glfw.wl.keycodes[KEY_T]          = GLFW_KEY_T;\r\n-    _glfw.wl.keycodes[KEY_Y]          = GLFW_KEY_Y;\r\n-    _glfw.wl.keycodes[KEY_U]          = GLFW_KEY_U;\r\n-    _glfw.wl.keycodes[KEY_I]          = GLFW_KEY_I;\r\n-    _glfw.wl.keycodes[KEY_O]          = GLFW_KEY_O;\r\n-    _glfw.wl.keycodes[KEY_P]          = GLFW_KEY_P;\r\n-    _glfw.wl.keycodes[KEY_LEFTBRACE]  = GLFW_KEY_LEFT_BRACKET;\r\n-    _glfw.wl.keycodes[KEY_RIGHTBRACE] = GLFW_KEY_RIGHT_BRACKET;\r\n-    _glfw.wl.keycodes[KEY_A]          = GLFW_KEY_A;\r\n-    _glfw.wl.keycodes[KEY_S]          = GLFW_KEY_S;\r\n-    _glfw.wl.keycodes[KEY_D]          = GLFW_KEY_D;\r\n-    _glfw.wl.keycodes[KEY_F]          = GLFW_KEY_F;\r\n-    _glfw.wl.keycodes[KEY_G]          = GLFW_KEY_G;\r\n-    _glfw.wl.keycodes[KEY_H]          = GLFW_KEY_H;\r\n-    _glfw.wl.keycodes[KEY_J]          = GLFW_KEY_J;\r\n-    _glfw.wl.keycodes[KEY_K]          = GLFW_KEY_K;\r\n-    _glfw.wl.keycodes[KEY_L]          = GLFW_KEY_L;\r\n-    _glfw.wl.keycodes[KEY_SEMICOLON]  = GLFW_KEY_SEMICOLON;\r\n-    _glfw.wl.keycodes[KEY_APOSTROPHE] = GLFW_KEY_APOSTROPHE;\r\n-    _glfw.wl.keycodes[KEY_Z]          = GLFW_KEY_Z;\r\n-    _glfw.wl.keycodes[KEY_X]          = GLFW_KEY_X;\r\n-    _glfw.wl.keycodes[KEY_C]          = GLFW_KEY_C;\r\n-    _glfw.wl.keycodes[KEY_V]          = GLFW_KEY_V;\r\n-    _glfw.wl.keycodes[KEY_B]          = GLFW_KEY_B;\r\n-    _glfw.wl.keycodes[KEY_N]          = GLFW_KEY_N;\r\n-    _glfw.wl.keycodes[KEY_M]          = GLFW_KEY_M;\r\n-    _glfw.wl.keycodes[KEY_COMMA]      = GLFW_KEY_COMMA;\r\n-    _glfw.wl.keycodes[KEY_DOT]        = GLFW_KEY_PERIOD;\r\n-    _glfw.wl.keycodes[KEY_SLASH]      = GLFW_KEY_SLASH;\r\n-    _glfw.wl.keycodes[KEY_BACKSLASH]  = GLFW_KEY_BACKSLASH;\r\n-    _glfw.wl.keycodes[KEY_ESC]        = GLFW_KEY_ESCAPE;\r\n-    _glfw.wl.keycodes[KEY_TAB]        = GLFW_KEY_TAB;\r\n-    _glfw.wl.keycodes[KEY_LEFTSHIFT]  = GLFW_KEY_LEFT_SHIFT;\r\n-    _glfw.wl.keycodes[KEY_RIGHTSHIFT] = GLFW_KEY_RIGHT_SHIFT;\r\n-    _glfw.wl.keycodes[KEY_LEFTCTRL]   = GLFW_KEY_LEFT_CONTROL;\r\n-    _glfw.wl.keycodes[KEY_RIGHTCTRL]  = GLFW_KEY_RIGHT_CONTROL;\r\n-    _glfw.wl.keycodes[KEY_LEFTALT]    = GLFW_KEY_LEFT_ALT;\r\n-    _glfw.wl.keycodes[KEY_RIGHTALT]   = GLFW_KEY_RIGHT_ALT;\r\n-    _glfw.wl.keycodes[KEY_LEFTMETA]   = GLFW_KEY_LEFT_SUPER;\r\n-    _glfw.wl.keycodes[KEY_RIGHTMETA]  = GLFW_KEY_RIGHT_SUPER;\r\n-    _glfw.wl.keycodes[KEY_MENU]       = GLFW_KEY_MENU;\r\n-    _glfw.wl.keycodes[KEY_NUMLOCK]    = GLFW_KEY_NUM_LOCK;\r\n-    _glfw.wl.keycodes[KEY_CAPSLOCK]   = GLFW_KEY_CAPS_LOCK;\r\n-    _glfw.wl.keycodes[KEY_PRINT]      = GLFW_KEY_PRINT_SCREEN;\r\n-    _glfw.wl.keycodes[KEY_SCROLLLOCK] = GLFW_KEY_SCROLL_LOCK;\r\n-    _glfw.wl.keycodes[KEY_PAUSE]      = GLFW_KEY_PAUSE;\r\n-    _glfw.wl.keycodes[KEY_DELETE]     = GLFW_KEY_DELETE;\r\n-    _glfw.wl.keycodes[KEY_BACKSPACE]  = GLFW_KEY_BACKSPACE;\r\n-    _glfw.wl.keycodes[KEY_ENTER]      = GLFW_KEY_ENTER;\r\n-    _glfw.wl.keycodes[KEY_HOME]       = GLFW_KEY_HOME;\r\n-    _glfw.wl.keycodes[KEY_END]        = GLFW_KEY_END;\r\n-    _glfw.wl.keycodes[KEY_PAGEUP]     = GLFW_KEY_PAGE_UP;\r\n-    _glfw.wl.keycodes[KEY_PAGEDOWN]   = GLFW_KEY_PAGE_DOWN;\r\n-    _glfw.wl.keycodes[KEY_INSERT]     = GLFW_KEY_INSERT;\r\n-    _glfw.wl.keycodes[KEY_LEFT]       = GLFW_KEY_LEFT;\r\n-    _glfw.wl.keycodes[KEY_RIGHT]      = GLFW_KEY_RIGHT;\r\n-    _glfw.wl.keycodes[KEY_DOWN]       = GLFW_KEY_DOWN;\r\n-    _glfw.wl.keycodes[KEY_UP]         = GLFW_KEY_UP;\r\n-    _glfw.wl.keycodes[KEY_F1]         = GLFW_KEY_F1;\r\n-    _glfw.wl.keycodes[KEY_F2]         = GLFW_KEY_F2;\r\n-    _glfw.wl.keycodes[KEY_F3]         = GLFW_KEY_F3;\r\n-    _glfw.wl.keycodes[KEY_F4]         = GLFW_KEY_F4;\r\n-    _glfw.wl.keycodes[KEY_F5]         = GLFW_KEY_F5;\r\n-    _glfw.wl.keycodes[KEY_F6]         = GLFW_KEY_F6;\r\n-    _glfw.wl.keycodes[KEY_F7]         = GLFW_KEY_F7;\r\n-    _glfw.wl.keycodes[KEY_F8]         = GLFW_KEY_F8;\r\n-    _glfw.wl.keycodes[KEY_F9]         = GLFW_KEY_F9;\r\n-    _glfw.wl.keycodes[KEY_F10]        = GLFW_KEY_F10;\r\n-    _glfw.wl.keycodes[KEY_F11]        = GLFW_KEY_F11;\r\n-    _glfw.wl.keycodes[KEY_F12]        = GLFW_KEY_F12;\r\n-    _glfw.wl.keycodes[KEY_F13]        = GLFW_KEY_F13;\r\n-    _glfw.wl.keycodes[KEY_F14]        = GLFW_KEY_F14;\r\n-    _glfw.wl.keycodes[KEY_F15]        = GLFW_KEY_F15;\r\n-    _glfw.wl.keycodes[KEY_F16]        = GLFW_KEY_F16;\r\n-    _glfw.wl.keycodes[KEY_F17]        = GLFW_KEY_F17;\r\n-    _glfw.wl.keycodes[KEY_F18]        = GLFW_KEY_F18;\r\n-    _glfw.wl.keycodes[KEY_F19]        = GLFW_KEY_F19;\r\n-    _glfw.wl.keycodes[KEY_F20]        = GLFW_KEY_F20;\r\n-    _glfw.wl.keycodes[KEY_F21]        = GLFW_KEY_F21;\r\n-    _glfw.wl.keycodes[KEY_F22]        = GLFW_KEY_F22;\r\n-    _glfw.wl.keycodes[KEY_F23]        = GLFW_KEY_F23;\r\n-    _glfw.wl.keycodes[KEY_F24]        = GLFW_KEY_F24;\r\n-    _glfw.wl.keycodes[KEY_KPSLASH]    = GLFW_KEY_KP_DIVIDE;\r\n-    _glfw.wl.keycodes[KEY_KPDOT]      = GLFW_KEY_KP_MULTIPLY;\r\n-    _glfw.wl.keycodes[KEY_KPMINUS]    = GLFW_KEY_KP_SUBTRACT;\r\n-    _glfw.wl.keycodes[KEY_KPPLUS]     = GLFW_KEY_KP_ADD;\r\n-    _glfw.wl.keycodes[KEY_KP0]        = GLFW_KEY_KP_0;\r\n-    _glfw.wl.keycodes[KEY_KP1]        = GLFW_KEY_KP_1;\r\n-    _glfw.wl.keycodes[KEY_KP2]        = GLFW_KEY_KP_2;\r\n-    _glfw.wl.keycodes[KEY_KP3]        = GLFW_KEY_KP_3;\r\n-    _glfw.wl.keycodes[KEY_KP4]        = GLFW_KEY_KP_4;\r\n-    _glfw.wl.keycodes[KEY_KP5]        = GLFW_KEY_KP_5;\r\n-    _glfw.wl.keycodes[KEY_KP6]        = GLFW_KEY_KP_6;\r\n-    _glfw.wl.keycodes[KEY_KP7]        = GLFW_KEY_KP_7;\r\n-    _glfw.wl.keycodes[KEY_KP8]        = GLFW_KEY_KP_8;\r\n-    _glfw.wl.keycodes[KEY_KP9]        = GLFW_KEY_KP_9;\r\n-    _glfw.wl.keycodes[KEY_KPCOMMA]    = GLFW_KEY_KP_DECIMAL;\r\n-    _glfw.wl.keycodes[KEY_KPEQUAL]    = GLFW_KEY_KP_EQUAL;\r\n-    _glfw.wl.keycodes[KEY_KPENTER]    = GLFW_KEY_KP_ENTER;\r\n-\r\n-    for (scancode = 0;  scancode < 256;  scancode++)\r\n-    {\r\n-        if (_glfw.wl.keycodes[scancode] > 0)\r\n-            _glfw.wl.scancodes[_glfw.wl.keycodes[scancode]] = scancode;\r\n-    }\r\n-}\r\n-\r\n \r\n //////////////////////////////////////////////////////////////////////////\r\n //////                       GLFW platform API                      //////\r\n@@ -971,54 +647,6 @@ int _glfwPlatformInit(void)\r\n     _glfw.wl.egl.window_resize = (PFN_wl_egl_window_resize)\r\n         _glfw_dlsym(_glfw.wl.egl.handle, \"wl_egl_window_resize\");\r\n \r\n-    _glfw.wl.xkb.handle = _glfw_dlopen(\"libxkbcommon.so.0\");\r\n-    if (!_glfw.wl.xkb.handle)\r\n-    {\r\n-        _glfwInputError(GLFW_PLATFORM_ERROR,\r\n-                        \"Wayland: Failed to open libxkbcommon\");\r\n-        return GLFW_FALSE;\r\n-    }\r\n-\r\n-    _glfw.wl.xkb.context_new = (PFN_xkb_context_new)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_context_new\");\r\n-    _glfw.wl.xkb.context_unref = (PFN_xkb_context_unref)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_context_unref\");\r\n-    _glfw.wl.xkb.keymap_new_from_string = (PFN_xkb_keymap_new_from_string)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_keymap_new_from_string\");\r\n-    _glfw.wl.xkb.keymap_unref = (PFN_xkb_keymap_unref)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_keymap_unref\");\r\n-    _glfw.wl.xkb.keymap_mod_get_index = (PFN_xkb_keymap_mod_get_index)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_keymap_mod_get_index\");\r\n-    _glfw.wl.xkb.keymap_key_repeats = (PFN_xkb_keymap_key_repeats)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_keymap_key_repeats\");\r\n-    _glfw.wl.xkb.state_new = (PFN_xkb_state_new)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_state_new\");\r\n-    _glfw.wl.xkb.state_unref = (PFN_xkb_state_unref)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_state_unref\");\r\n-    _glfw.wl.xkb.state_key_get_syms = (PFN_xkb_state_key_get_syms)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_state_key_get_syms\");\r\n-    _glfw.wl.xkb.state_update_mask = (PFN_xkb_state_update_mask)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_state_update_mask\");\r\n-    _glfw.wl.xkb.state_serialize_mods = (PFN_xkb_state_serialize_mods)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_state_serialize_mods\");\r\n-\r\n-#ifdef HAVE_XKBCOMMON_COMPOSE_H\r\n-    _glfw.wl.xkb.compose_table_new_from_locale = (PFN_xkb_compose_table_new_from_locale)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_compose_table_new_from_locale\");\r\n-    _glfw.wl.xkb.compose_table_unref = (PFN_xkb_compose_table_unref)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_compose_table_unref\");\r\n-    _glfw.wl.xkb.compose_state_new = (PFN_xkb_compose_state_new)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_compose_state_new\");\r\n-    _glfw.wl.xkb.compose_state_unref = (PFN_xkb_compose_state_unref)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_compose_state_unref\");\r\n-    _glfw.wl.xkb.compose_state_feed = (PFN_xkb_compose_state_feed)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_compose_state_feed\");\r\n-    _glfw.wl.xkb.compose_state_get_status = (PFN_xkb_compose_state_get_status)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_compose_state_get_status\");\r\n-    _glfw.wl.xkb.compose_state_get_one_sym = (PFN_xkb_compose_state_get_one_sym)\r\n-        _glfw_dlsym(_glfw.wl.xkb.handle, \"xkb_compose_state_get_one_sym\");\r\n-#endif\r\n-\r\n     _glfw.wl.display = wl_display_connect(NULL);\r\n     if (!_glfw.wl.display)\r\n     {\r\n@@ -1030,15 +658,7 @@ int _glfwPlatformInit(void)\r\n     _glfw.wl.registry = wl_display_get_registry(_glfw.wl.display);\r\n     wl_registry_add_listener(_glfw.wl.registry, &registryListener, NULL);\r\n \r\n-    createKeyTables();\r\n-\r\n-    _glfw.wl.xkb.context = xkb_context_new(0);\r\n-    if (!_glfw.wl.xkb.context)\r\n-    {\r\n-        _glfwInputError(GLFW_PLATFORM_ERROR,\r\n-                        \"Wayland: Failed to initialize xkb context\");\r\n-        return GLFW_FALSE;\r\n-    }\r\n+    if (!glfw_xkb_create_context(&_glfw.wl.xkb)) return GLFW_FALSE;\r\n \r\n     // Sync so we got all registry objects\r\n     wl_display_roundtrip(_glfw.wl.display);\r\n@@ -1053,10 +673,6 @@ int _glfwPlatformInit(void)\r\n \r\n     _glfwInitTimerPOSIX();\r\n \r\n-    _glfw.wl.timerfd = -1;\r\n-    if (_glfw.wl.seatVersion >= 4)\r\n-        _glfw.wl.timerfd = timerfd_create(CLOCK_MONOTONIC, TFD_CLOEXEC);\r\n-\r\n     if (_glfw.wl.pointer && _glfw.wl.shm)\r\n     {\r\n         _glfw.wl.cursorTheme = wl_cursor_theme_load(NULL, 32, _glfw.wl.shm);\r\n@@ -1085,21 +701,7 @@ void _glfwPlatformTerminate(void)\r\n         _glfw.wl.egl.handle = NULL;\r\n     }\r\n \r\n-#ifdef HAVE_XKBCOMMON_COMPOSE_H\r\n-    if (_glfw.wl.xkb.composeState)\r\n-        xkb_compose_state_unref(_glfw.wl.xkb.composeState);\r\n-#endif\r\n-    if (_glfw.wl.xkb.keymap)\r\n-        xkb_keymap_unref(_glfw.wl.xkb.keymap);\r\n-    if (_glfw.wl.xkb.state)\r\n-        xkb_state_unref(_glfw.wl.xkb.state);\r\n-    if (_glfw.wl.xkb.context)\r\n-        xkb_context_unref(_glfw.wl.xkb.context);\r\n-    if (_glfw.wl.xkb.handle)\r\n-    {\r\n-        _glfw_dlclose(_glfw.wl.xkb.handle);\r\n-        _glfw.wl.xkb.handle = NULL;\r\n-    }\r\n+    glfw_xkb_release(&_glfw.wl.xkb);\r\n \r\n     if (_glfw.wl.cursorTheme)\r\n         wl_cursor_theme_destroy(_glfw.wl.cursorTheme);\r\n@@ -1158,4 +760,3 @@ const char* _glfwPlatformGetVersionStrin\r\n #endif\r\n         ;\r\n }\r\n-\r\ndiff -Naurp /t/g/wl_platform.h /t/k/wl_platform.h\r\n--- /t/g/wl_platform.h\t2018-05-20 08:20:32.313078050 +0530\r\n+++ /t/k/wl_platform.h\t2018-05-20 08:19:09.523787242 +0530\r\n@@ -25,10 +25,6 @@\r\n //========================================================================\r\n \r\n #include <wayland-client.h>\r\n-#include <xkbcommon/xkbcommon.h>\r\n-#ifdef HAVE_XKBCOMMON_COMPOSE_H\r\n-#include <xkbcommon/xkbcommon-compose.h>\r\n-#endif\r\n #include <dlfcn.h>\r\n \r\n typedef VkFlags VkWaylandSurfaceCreateFlagsKHR;\r\n@@ -52,7 +48,7 @@ typedef VkBool32 (APIENTRY *PFN_vkGetPhy\r\n #else\r\n #include \"null_joystick.h\"\r\n #endif\r\n-#include \"xkb_unicode.h\"\r\n+#include \"xkb_glfw.h\"\r\n #include \"egl_context.h\"\r\n #include \"osmesa_context.h\"\r\n \r\n@@ -105,46 +101,6 @@ typedef void (* PFN_wl_egl_window_resize\r\n #define wl_egl_window_destroy _glfw.wl.egl.window_destroy\r\n #define wl_egl_window_resize _glfw.wl.egl.window_resize\r\n \r\n-typedef struct xkb_context* (* PFN_xkb_context_new)(enum xkb_context_flags);\r\n-typedef void (* PFN_xkb_context_unref)(struct xkb_context*);\r\n-typedef struct xkb_keymap* (* PFN_xkb_keymap_new_from_string)(struct xkb_context*, const char*, enum xkb_keymap_format, enum xkb_keymap_compile_flags);\r\n-typedef void (* PFN_xkb_keymap_unref)(struct xkb_keymap*);\r\n-typedef xkb_mod_index_t (* PFN_xkb_keymap_mod_get_index)(struct xkb_keymap*, const char*);\r\n-typedef int (* PFN_xkb_keymap_key_repeats)(struct xkb_keymap*, xkb_keycode_t);\r\n-typedef struct xkb_state* (* PFN_xkb_state_new)(struct xkb_keymap*);\r\n-typedef void (* PFN_xkb_state_unref)(struct xkb_state*);\r\n-typedef int (* PFN_xkb_state_key_get_syms)(struct xkb_state*, xkb_keycode_t, const xkb_keysym_t**);\r\n-typedef enum xkb_state_component (* PFN_xkb_state_update_mask)(struct xkb_state*, xkb_mod_mask_t, xkb_mod_mask_t, xkb_mod_mask_t, xkb_layout_index_t, xkb_layout_index_t, xkb_layout_index_t);\r\n-typedef xkb_mod_mask_t (* PFN_xkb_state_serialize_mods)(struct xkb_state*, enum xkb_state_component);\r\n-#define xkb_context_new _glfw.wl.xkb.context_new\r\n-#define xkb_context_unref _glfw.wl.xkb.context_unref\r\n-#define xkb_keymap_new_from_string _glfw.wl.xkb.keymap_new_from_string\r\n-#define xkb_keymap_unref _glfw.wl.xkb.keymap_unref\r\n-#define xkb_keymap_mod_get_index _glfw.wl.xkb.keymap_mod_get_index\r\n-#define xkb_keymap_key_repeats _glfw.wl.xkb.keymap_key_repeats\r\n-#define xkb_state_new _glfw.wl.xkb.state_new\r\n-#define xkb_state_unref _glfw.wl.xkb.state_unref\r\n-#define xkb_state_key_get_syms _glfw.wl.xkb.state_key_get_syms\r\n-#define xkb_state_update_mask _glfw.wl.xkb.state_update_mask\r\n-#define xkb_state_serialize_mods _glfw.wl.xkb.state_serialize_mods\r\n-\r\n-#ifdef HAVE_XKBCOMMON_COMPOSE_H\r\n-typedef struct xkb_compose_table* (* PFN_xkb_compose_table_new_from_locale)(struct xkb_context*, const char*, enum xkb_compose_compile_flags);\r\n-typedef void (* PFN_xkb_compose_table_unref)(struct xkb_compose_table*);\r\n-typedef struct xkb_compose_state* (* PFN_xkb_compose_state_new)(struct xkb_compose_table*, enum xkb_compose_state_flags);\r\n-typedef void (* PFN_xkb_compose_state_unref)(struct xkb_compose_state*);\r\n-typedef enum xkb_compose_feed_result (* PFN_xkb_compose_state_feed)(struct xkb_compose_state*, xkb_keysym_t);\r\n-typedef enum xkb_compose_status (* PFN_xkb_compose_state_get_status)(struct xkb_compose_state*);\r\n-typedef xkb_keysym_t (* PFN_xkb_compose_state_get_one_sym)(struct xkb_compose_state*);\r\n-#define xkb_compose_table_new_from_locale _glfw.wl.xkb.compose_table_new_from_locale\r\n-#define xkb_compose_table_unref _glfw.wl.xkb.compose_table_unref\r\n-#define xkb_compose_state_new _glfw.wl.xkb.compose_state_new\r\n-#define xkb_compose_state_unref _glfw.wl.xkb.compose_state_unref\r\n-#define xkb_compose_state_feed _glfw.wl.xkb.compose_state_feed\r\n-#define xkb_compose_state_get_status _glfw.wl.xkb.compose_state_get_status\r\n-#define xkb_compose_state_get_one_sym _glfw.wl.xkb.compose_state_get_one_sym\r\n-#endif\r\n-\r\n #define _GLFW_DECORATION_WIDTH 4\r\n #define _GLFW_DECORATION_TOP 24\r\n #define _GLFW_DECORATION_VERTICAL (_GLFW_DECORATION_TOP + _GLFW_DECORATION_WIDTH)\r\n@@ -245,52 +201,12 @@ typedef struct _GLFWlibraryWayland\r\n \r\n     int32_t                     keyboardRepeatRate;\r\n     int32_t                     keyboardRepeatDelay;\r\n-    int                         keyboardLastKey;\r\n-    int                         keyboardLastScancode;\r\n-    int                         timerfd;\r\n-    short int                   keycodes[256];\r\n-    short int                   scancodes[GLFW_KEY_LAST + 1];\r\n-\r\n     struct {\r\n-        void*                   handle;\r\n-        struct xkb_context*     context;\r\n-        struct xkb_keymap*      keymap;\r\n-        struct xkb_state*       state;\r\n-\r\n-#ifdef HAVE_XKBCOMMON_COMPOSE_H\r\n-        struct xkb_compose_state* composeState;\r\n-#endif\r\n-\r\n-        xkb_mod_mask_t          controlMask;\r\n-        xkb_mod_mask_t          altMask;\r\n-        xkb_mod_mask_t          shiftMask;\r\n-        xkb_mod_mask_t          superMask;\r\n-        xkb_mod_mask_t          capsLockMask;\r\n-        xkb_mod_mask_t          numLockMask;\r\n-        unsigned int            modifiers;\r\n-\r\n-        PFN_xkb_context_new context_new;\r\n-        PFN_xkb_context_unref context_unref;\r\n-        PFN_xkb_keymap_new_from_string keymap_new_from_string;\r\n-        PFN_xkb_keymap_unref keymap_unref;\r\n-        PFN_xkb_keymap_mod_get_index keymap_mod_get_index;\r\n-        PFN_xkb_keymap_key_repeats keymap_key_repeats;\r\n-        PFN_xkb_state_new state_new;\r\n-        PFN_xkb_state_unref state_unref;\r\n-        PFN_xkb_state_key_get_syms state_key_get_syms;\r\n-        PFN_xkb_state_update_mask state_update_mask;\r\n-        PFN_xkb_state_serialize_mods state_serialize_mods;\r\n-\r\n-#ifdef HAVE_XKBCOMMON_COMPOSE_H\r\n-        PFN_xkb_compose_table_new_from_locale compose_table_new_from_locale;\r\n-        PFN_xkb_compose_table_unref compose_table_unref;\r\n-        PFN_xkb_compose_state_new compose_state_new;\r\n-        PFN_xkb_compose_state_unref compose_state_unref;\r\n-        PFN_xkb_compose_state_feed compose_state_feed;\r\n-        PFN_xkb_compose_state_get_status compose_state_get_status;\r\n-        PFN_xkb_compose_state_get_one_sym compose_state_get_one_sym;\r\n-#endif\r\n-    } xkb;\r\n+        uint32_t                key;\r\n+        double                  nextRepeatAt;\r\n+        _GLFWwindow*            keyboardFocus;\r\n+    } keyRepeatInfo;\r\n+    _GLFWXKBData                xkb;\r\n \r\n     _GLFWwindow*                pointerFocus;\r\n     _GLFWwindow*                keyboardFocus;\r\n@@ -340,4 +256,3 @@ typedef struct _GLFWcursorWayland\r\n \r\n \r\n void _glfwAddOutputWayland(uint32_t name, uint32_t version);\r\n-\r\ndiff -Naurp /t/g/wl_window.c /t/k/wl_window.c\r\n--- /t/g/wl_window.c\t2018-05-20 08:20:32.313078050 +0530\r\n+++ /t/k/wl_window.c\t2018-05-20 08:19:09.523787242 +0530\r\n@@ -35,7 +35,6 @@\r\n #include <string.h>\r\n #include <fcntl.h>\r\n #include <sys/mman.h>\r\n-#include <sys/timerfd.h>\r\n #include <poll.h>\r\n \r\n \r\n@@ -691,15 +690,31 @@ static GLFWbool createXdgSurface(_GLFWwi\r\n }\r\n \r\n static void\r\n+dispatchPendingKeyRepeats() {\r\n+    if (_glfw.wl.keyRepeatInfo.nextRepeatAt <= 0 || _glfw.wl.keyRepeatInfo.keyboardFocus != _glfw.wl.keyboardFocus || _glfw.wl.keyboardRepeatRate == 0) return;\r\n+    double now = glfwGetTime();\r\n+    while (_glfw.wl.keyRepeatInfo.nextRepeatAt <= now) {\r\n+        glfw_xkb_handle_key_event(_glfw.wl.keyRepeatInfo.keyboardFocus, &_glfw.wl.xkb, _glfw.wl.keyRepeatInfo.key, GLFW_REPEAT);\r\n+        _glfw.wl.keyRepeatInfo.nextRepeatAt += 1.0 / _glfw.wl.keyboardRepeatRate;\r\n+        now = glfwGetTime();\r\n+    }\r\n+}\r\n+\r\n+static int\r\n+adjustTimeoutForKeyRepeat(int timeout) {\r\n+    if (_glfw.wl.keyRepeatInfo.nextRepeatAt <= 0 || _glfw.wl.keyRepeatInfo.keyboardFocus != _glfw.wl.keyboardFocus || _glfw.wl.keyboardRepeatRate == 0) return timeout;\r\n+    double now = glfwGetTime();\r\n+    if (timeout < 0 || now + timeout / 1000. > _glfw.wl.keyRepeatInfo.nextRepeatAt) {\r\n+        timeout = _glfw.wl.keyRepeatInfo.nextRepeatAt <= now ? 0 : ( (_glfw.wl.keyRepeatInfo.nextRepeatAt - now) * 1000 + 1 );\r\n+    }\r\n+    return timeout;\r\n+}\r\n+\r\n+static void\r\n handleEvents(int timeout)\r\n {\r\n     struct wl_display* display = _glfw.wl.display;\r\n-    struct pollfd fds[] = {\r\n-        { wl_display_get_fd(display), POLLIN },\r\n-        { _glfw.wl.timerfd, POLLIN },\r\n-    };\r\n-    ssize_t read_ret;\r\n-    uint64_t repeats, i;\r\n+    struct pollfd pfd = { wl_display_get_fd(display), POLLIN };\r\n \r\n     while (wl_display_prepare_read(display) != 0)\r\n         wl_display_dispatch_pending(display);\r\n@@ -719,9 +734,12 @@ handleEvents(int timeout)\r\n         return;\r\n     }\r\n \r\n-    if (poll(fds, 2, timeout) > 0)\r\n+    dispatchPendingKeyRepeats();\r\n+    timeout = adjustTimeoutForKeyRepeat(timeout);\r\n+\r\n+    if (poll(&pfd, 1, timeout) > 0)\r\n     {\r\n-        if (fds[0].revents & POLLIN)\r\n+        if (pfd.revents & POLLIN)\r\n         {\r\n             wl_display_read_events(display);\r\n             wl_display_dispatch_pending(display);\r\n@@ -731,22 +749,12 @@ handleEvents(int timeout)\r\n             wl_display_cancel_read(display);\r\n         }\r\n \r\n-        if (fds[1].revents & POLLIN)\r\n-        {\r\n-            read_ret = read(_glfw.wl.timerfd, &repeats, sizeof(repeats));\r\n-            if (read_ret != 8)\r\n-                return;\r\n-\r\n-            for (i = 0; i < repeats; ++i)\r\n-                _glfwInputKey(_glfw.wl.keyboardFocus, _glfw.wl.keyboardLastKey,\r\n-                              _glfw.wl.keyboardLastScancode, GLFW_REPEAT,\r\n-                              _glfw.wl.xkb.modifiers);\r\n-        }\r\n     }\r\n     else\r\n     {\r\n         wl_display_cancel_read(display);\r\n     }\r\n+    dispatchPendingKeyRepeats();\r\n }\r\n \r\n // Translates a GLFW standard cursor to a theme cursor name\r\n@@ -1079,6 +1087,18 @@ void _glfwPlatformRequestWindowAttention\r\n                     \"Wayland: Window attention request not implemented yet\");\r\n }\r\n \r\n+int _glfwPlatformWindowBell(_GLFWwindow* window)\r\n+{\r\n+    // TODO: Use an actual Wayland API to implement this when one becomes available\r\n+    int fd = open(\"/dev/tty\", O_WRONLY | O_CLOEXEC);\r\n+    if (fd > -1) {\r\n+        int ret = write(fd, \"\\x07\", 1) == 1 ? GLFW_TRUE : GLFW_FALSE;\r\n+        close(fd);\r\n+        return ret;\r\n+    }\r\n+    return GLFW_FALSE;\r\n+}\r\n+\r\n void _glfwPlatformFocusWindow(_GLFWwindow* window)\r\n {\r\n     _glfwInputError(GLFW_PLATFORM_ERROR,\r\n@@ -1222,13 +1242,12 @@ void _glfwPlatformSetCursorMode(_GLFWwin\r\n \r\n const char* _glfwPlatformGetScancodeName(int scancode)\r\n {\r\n-    // TODO\r\n-    return NULL;\r\n+    return glfw_xkb_keysym_name(scancode);\r\n }\r\n \r\n int _glfwPlatformGetKeyScancode(int key)\r\n {\r\n-    return _glfw.wl.scancodes[key];\r\n+    return glfw_xkb_sym_for_key(key);\r\n }\r\n \r\n int _glfwPlatformCreateCursor(_GLFWcursor* cursor,\r\n@@ -1539,4 +1558,3 @@ GLFWAPI struct wl_surface* glfwGetWaylan\r\n     _GLFW_REQUIRE_INIT_OR_RETURN(NULL);\r\n     return window->wl.surface;\r\n }\r\n-\r\n```\r\n</details>","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390453882/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390459324","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-390459324","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":390459324,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDQ1OTMyNA==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-20T05:38:24Z","updated_at":"2018-05-20T05:38:24Z","body":"I just installed sway and tried it. kitty build from current master works for me with sway version 0.15.2","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390459324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390488061","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-390488061","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":390488061,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDQ4ODA2MQ==","user":{"login":"dryya","id":4873173,"node_id":"MDQ6VXNlcjQ4NzMxNzM=","avatar_url":"https://avatars.githubusercontent.com/u/4873173?v=4","gravatar_id":"","url":"https://api.github.com/users/dryya","html_url":"https://github.com/dryya","followers_url":"https://api.github.com/users/dryya/followers","following_url":"https://api.github.com/users/dryya/following{/other_user}","gists_url":"https://api.github.com/users/dryya/gists{/gist_id}","starred_url":"https://api.github.com/users/dryya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dryya/subscriptions","organizations_url":"https://api.github.com/users/dryya/orgs","repos_url":"https://api.github.com/users/dryya/repos","events_url":"https://api.github.com/users/dryya/events{/privacy}","received_events_url":"https://api.github.com/users/dryya/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-20T14:49:08Z","updated_at":"2018-05-20T15:18:00Z","body":"0.15.2 uses wlc, not wlroots, so it is probably just that wlc does not check for that issue. wlc is also abandoned (https://github.com/Cloudef/wlc/issues/262)\r\n\r\nAlso, just for clarity, when you say it works, do you mean it runs as a native wayland window or under xwayland? Because I have no problems running ~~sway~~ kitty under xwayland.\r\n\r\n(I shouldn't have written this out before having my morning coffee)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390488061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dryya","id":4873173,"node_id":"MDQ6VXNlcjQ4NzMxNzM=","avatar_url":"https://avatars.githubusercontent.com/u/4873173?v=4","gravatar_id":"","url":"https://api.github.com/users/dryya","html_url":"https://github.com/dryya","followers_url":"https://api.github.com/users/dryya/followers","following_url":"https://api.github.com/users/dryya/following{/other_user}","gists_url":"https://api.github.com/users/dryya/gists{/gist_id}","starred_url":"https://api.github.com/users/dryya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dryya/subscriptions","organizations_url":"https://api.github.com/users/dryya/orgs","repos_url":"https://api.github.com/users/dryya/repos","events_url":"https://api.github.com/users/dryya/events{/privacy}","received_events_url":"https://api.github.com/users/dryya/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390492437","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-390492437","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":390492437,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDQ5MjQzNw==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-20T16:01:14Z","updated_at":"2018-05-20T16:01:14Z","body":"Both XWayland and Wayland work on my machine with sway 0.15.2. I'm afraid I dont pay any attention to wayland as it doesn't solve any problems I have, so I dont really have any insight to offer. ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390492437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390495490","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-390495490","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":390495490,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDQ5NTQ5MA==","user":{"login":"linkmauve","id":7755816,"node_id":"MDQ6VXNlcjc3NTU4MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7755816?v=4","gravatar_id":"","url":"https://api.github.com/users/linkmauve","html_url":"https://github.com/linkmauve","followers_url":"https://api.github.com/users/linkmauve/followers","following_url":"https://api.github.com/users/linkmauve/following{/other_user}","gists_url":"https://api.github.com/users/linkmauve/gists{/gist_id}","starred_url":"https://api.github.com/users/linkmauve/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linkmauve/subscriptions","organizations_url":"https://api.github.com/users/linkmauve/orgs","repos_url":"https://api.github.com/users/linkmauve/repos","events_url":"https://api.github.com/users/linkmauve/events{/privacy}","received_events_url":"https://api.github.com/users/linkmauve/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-20T16:50:33Z","updated_at":"2018-05-20T16:50:33Z","body":"@aenda, I asked you to check another GLFW program, to make sure it doesn’t come from the fork.  There are many examples in `examples/` and `tests/` in GLFW’s repository which you can enable with `-DGLFW_BUILD_EXAMPLES=ON` and `-DGLFW_BUILD_TESTS=ON`.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390495490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"linkmauve","id":7755816,"node_id":"MDQ6VXNlcjc3NTU4MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7755816?v=4","gravatar_id":"","url":"https://api.github.com/users/linkmauve","html_url":"https://github.com/linkmauve","followers_url":"https://api.github.com/users/linkmauve/followers","following_url":"https://api.github.com/users/linkmauve/following{/other_user}","gists_url":"https://api.github.com/users/linkmauve/gists{/gist_id}","starred_url":"https://api.github.com/users/linkmauve/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linkmauve/subscriptions","organizations_url":"https://api.github.com/users/linkmauve/orgs","repos_url":"https://api.github.com/users/linkmauve/repos","events_url":"https://api.github.com/users/linkmauve/events{/privacy}","received_events_url":"https://api.github.com/users/linkmauve/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1635962179,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTYzNTk2MjE3OQ==","url":"https://api.github.com/repos/glfw/glfw/issues/events/1635962179","actor":{"login":"dryya","id":4873173,"node_id":"MDQ6VXNlcjQ4NzMxNzM=","avatar_url":"https://avatars.githubusercontent.com/u/4873173?v=4","gravatar_id":"","url":"https://api.github.com/users/dryya","html_url":"https://github.com/dryya","followers_url":"https://api.github.com/users/dryya/followers","following_url":"https://api.github.com/users/dryya/following{/other_user}","gists_url":"https://api.github.com/users/dryya/gists{/gist_id}","starred_url":"https://api.github.com/users/dryya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dryya/subscriptions","organizations_url":"https://api.github.com/users/dryya/orgs","repos_url":"https://api.github.com/users/dryya/repos","events_url":"https://api.github.com/users/dryya/events{/privacy}","received_events_url":"https://api.github.com/users/dryya/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-05-20T16:50:33Z","performed_via_github_app":null},{"id":1635962181,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE2MzU5NjIxODE=","url":"https://api.github.com/repos/glfw/glfw/issues/events/1635962181","actor":{"login":"dryya","id":4873173,"node_id":"MDQ6VXNlcjQ4NzMxNzM=","avatar_url":"https://avatars.githubusercontent.com/u/4873173?v=4","gravatar_id":"","url":"https://api.github.com/users/dryya","html_url":"https://github.com/dryya","followers_url":"https://api.github.com/users/dryya/followers","following_url":"https://api.github.com/users/dryya/following{/other_user}","gists_url":"https://api.github.com/users/dryya/gists{/gist_id}","starred_url":"https://api.github.com/users/dryya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dryya/subscriptions","organizations_url":"https://api.github.com/users/dryya/orgs","repos_url":"https://api.github.com/users/dryya/repos","events_url":"https://api.github.com/users/dryya/events{/privacy}","received_events_url":"https://api.github.com/users/dryya/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-05-20T16:50:33Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390542299","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-390542299","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":390542299,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDU0MjI5OQ==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-21T03:15:27Z","updated_at":"2018-05-21T03:15:27Z","body":"@linkmauve that wont prove anything, unless the examples/test programs cover all possible sequences of glfw window initialization. But it would be nice to have a simplified example to reproduce this. ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390542299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1636217207,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTYzNjIxNzIwNw==","url":"https://api.github.com/repos/glfw/glfw/issues/events/1636217207","actor":{"login":"linkmauve","id":7755816,"node_id":"MDQ6VXNlcjc3NTU4MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7755816?v=4","gravatar_id":"","url":"https://api.github.com/users/linkmauve","html_url":"https://github.com/linkmauve","followers_url":"https://api.github.com/users/linkmauve/followers","following_url":"https://api.github.com/users/linkmauve/following{/other_user}","gists_url":"https://api.github.com/users/linkmauve/gists{/gist_id}","starred_url":"https://api.github.com/users/linkmauve/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linkmauve/subscriptions","organizations_url":"https://api.github.com/users/linkmauve/orgs","repos_url":"https://api.github.com/users/linkmauve/repos","events_url":"https://api.github.com/users/linkmauve/events{/privacy}","received_events_url":"https://api.github.com/users/linkmauve/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-05-21T03:15:27Z","performed_via_github_app":null},{"id":1636217208,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE2MzYyMTcyMDg=","url":"https://api.github.com/repos/glfw/glfw/issues/events/1636217208","actor":{"login":"linkmauve","id":7755816,"node_id":"MDQ6VXNlcjc3NTU4MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7755816?v=4","gravatar_id":"","url":"https://api.github.com/users/linkmauve","html_url":"https://github.com/linkmauve","followers_url":"https://api.github.com/users/linkmauve/followers","following_url":"https://api.github.com/users/linkmauve/following{/other_user}","gists_url":"https://api.github.com/users/linkmauve/gists{/gist_id}","starred_url":"https://api.github.com/users/linkmauve/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linkmauve/subscriptions","organizations_url":"https://api.github.com/users/linkmauve/orgs","repos_url":"https://api.github.com/users/linkmauve/repos","events_url":"https://api.github.com/users/linkmauve/events{/privacy}","received_events_url":"https://api.github.com/users/linkmauve/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-05-21T03:15:27Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390655829","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-390655829","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":390655829,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDY1NTgyOQ==","user":{"login":"dryya","id":4873173,"node_id":"MDQ6VXNlcjQ4NzMxNzM=","avatar_url":"https://avatars.githubusercontent.com/u/4873173?v=4","gravatar_id":"","url":"https://api.github.com/users/dryya","html_url":"https://github.com/dryya","followers_url":"https://api.github.com/users/dryya/followers","following_url":"https://api.github.com/users/dryya/following{/other_user}","gists_url":"https://api.github.com/users/dryya/gists{/gist_id}","starred_url":"https://api.github.com/users/dryya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dryya/subscriptions","organizations_url":"https://api.github.com/users/dryya/orgs","repos_url":"https://api.github.com/users/dryya/repos","events_url":"https://api.github.com/users/dryya/events{/privacy}","received_events_url":"https://api.github.com/users/dryya/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-21T13:37:06Z","updated_at":"2018-05-21T13:37:06Z","body":"The examples work, but they are running under Xwayland - is there some way I could test w/ running them as native Wayland applications?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390655829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dryya","id":4873173,"node_id":"MDQ6VXNlcjQ4NzMxNzM=","avatar_url":"https://avatars.githubusercontent.com/u/4873173?v=4","gravatar_id":"","url":"https://api.github.com/users/dryya","html_url":"https://github.com/dryya","followers_url":"https://api.github.com/users/dryya/followers","following_url":"https://api.github.com/users/dryya/following{/other_user}","gists_url":"https://api.github.com/users/dryya/gists{/gist_id}","starred_url":"https://api.github.com/users/dryya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dryya/subscriptions","organizations_url":"https://api.github.com/users/dryya/orgs","repos_url":"https://api.github.com/users/dryya/repos","events_url":"https://api.github.com/users/dryya/events{/privacy}","received_events_url":"https://api.github.com/users/dryya/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390657659","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-390657659","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":390657659,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDY1NzY1OQ==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-21T13:44:07Z","updated_at":"2018-05-21T13:44:07Z","body":"Build glfw with the wayland backend and the examples will run under wayland. I dont recall the exact varaible to pass to cmake for that, but it should be in the glfw docs.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390657659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390658437","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-390658437","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":390658437,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDY1ODQzNw==","user":{"login":"dryya","id":4873173,"node_id":"MDQ6VXNlcjQ4NzMxNzM=","avatar_url":"https://avatars.githubusercontent.com/u/4873173?v=4","gravatar_id":"","url":"https://api.github.com/users/dryya","html_url":"https://github.com/dryya","followers_url":"https://api.github.com/users/dryya/followers","following_url":"https://api.github.com/users/dryya/following{/other_user}","gists_url":"https://api.github.com/users/dryya/gists{/gist_id}","starred_url":"https://api.github.com/users/dryya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dryya/subscriptions","organizations_url":"https://api.github.com/users/dryya/orgs","repos_url":"https://api.github.com/users/dryya/repos","events_url":"https://api.github.com/users/dryya/events{/privacy}","received_events_url":"https://api.github.com/users/dryya/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-21T13:46:44Z","updated_at":"2018-05-21T13:49:46Z","body":"Ah, I tried that earlier and it failed, but turns out I was missing extra-cmake-modules. Let me check again.\r\n\r\nWell, they all output `Error: Wayland: Focusing a window requires user interaction`, but still run on both sway and rootston.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/390658437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dryya","id":4873173,"node_id":"MDQ6VXNlcjQ4NzMxNzM=","avatar_url":"https://avatars.githubusercontent.com/u/4873173?v=4","gravatar_id":"","url":"https://api.github.com/users/dryya","html_url":"https://github.com/dryya","followers_url":"https://api.github.com/users/dryya/followers","following_url":"https://api.github.com/users/dryya/following{/other_user}","gists_url":"https://api.github.com/users/dryya/gists{/gist_id}","starred_url":"https://api.github.com/users/dryya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dryya/subscriptions","organizations_url":"https://api.github.com/users/dryya/orgs","repos_url":"https://api.github.com/users/dryya/repos","events_url":"https://api.github.com/users/dryya/events{/privacy}","received_events_url":"https://api.github.com/users/dryya/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/392012912","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-392012912","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":392012912,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjAxMjkxMg==","user":{"login":"linkmauve","id":7755816,"node_id":"MDQ6VXNlcjc3NTU4MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7755816?v=4","gravatar_id":"","url":"https://api.github.com/users/linkmauve","html_url":"https://github.com/linkmauve","followers_url":"https://api.github.com/users/linkmauve/followers","following_url":"https://api.github.com/users/linkmauve/following{/other_user}","gists_url":"https://api.github.com/users/linkmauve/gists{/gist_id}","starred_url":"https://api.github.com/users/linkmauve/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linkmauve/subscriptions","organizations_url":"https://api.github.com/users/linkmauve/orgs","repos_url":"https://api.github.com/users/linkmauve/repos","events_url":"https://api.github.com/users/linkmauve/events{/privacy}","received_events_url":"https://api.github.com/users/linkmauve/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-25T10:34:23Z","updated_at":"2018-05-25T10:35:01Z","body":"So this is a downstream error, please get in touch with the Kitty developers and ask them to update their internal fork of GLFW.  The focusing warning is expected, it isn’t possible on Wayland to force-focus a window.\r\n\r\n@kovidgoyal, there is only one `glfwCreateWindow()` function, and it must always do the correct thing.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/392012912/reactions","total_count":2,"+1":0,"-1":2,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"linkmauve","id":7755816,"node_id":"MDQ6VXNlcjc3NTU4MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7755816?v=4","gravatar_id":"","url":"https://api.github.com/users/linkmauve","html_url":"https://github.com/linkmauve","followers_url":"https://api.github.com/users/linkmauve/followers","following_url":"https://api.github.com/users/linkmauve/following{/other_user}","gists_url":"https://api.github.com/users/linkmauve/gists{/gist_id}","starred_url":"https://api.github.com/users/linkmauve/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linkmauve/subscriptions","organizations_url":"https://api.github.com/users/linkmauve/orgs","repos_url":"https://api.github.com/users/linkmauve/repos","events_url":"https://api.github.com/users/linkmauve/events{/privacy}","received_events_url":"https://api.github.com/users/linkmauve/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1646324149,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTY0NjMyNDE0OQ==","url":"https://api.github.com/repos/glfw/glfw/issues/events/1646324149","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-05-25T10:34:23Z","performed_via_github_app":null},{"id":1646324150,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE2NDYzMjQxNTA=","url":"https://api.github.com/repos/glfw/glfw/issues/events/1646324150","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-05-25T10:34:23Z","performed_via_github_app":null},{"id":1646325796,"node_id":"MDEyOkxhYmVsZWRFdmVudDE2NDYzMjU3OTY=","url":"https://api.github.com/repos/glfw/glfw/issues/events/1646325796","actor":{"login":"linkmauve","id":7755816,"node_id":"MDQ6VXNlcjc3NTU4MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7755816?v=4","gravatar_id":"","url":"https://api.github.com/users/linkmauve","html_url":"https://github.com/linkmauve","followers_url":"https://api.github.com/users/linkmauve/followers","following_url":"https://api.github.com/users/linkmauve/following{/other_user}","gists_url":"https://api.github.com/users/linkmauve/gists{/gist_id}","starred_url":"https://api.github.com/users/linkmauve/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linkmauve/subscriptions","organizations_url":"https://api.github.com/users/linkmauve/orgs","repos_url":"https://api.github.com/users/linkmauve/repos","events_url":"https://api.github.com/users/linkmauve/events{/privacy}","received_events_url":"https://api.github.com/users/linkmauve/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-05-25T10:35:22Z","label":{"name":"external","color":"000000"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/392014577","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-392014577","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":392014577,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjAxNDU3Nw==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-25T10:42:04Z","updated_at":"2018-05-25T10:42:04Z","body":"Umm I am the kitty developer, and as I said already, the kitty fork has all commits from the master branch of this repository. I even posted the diff showing that there is nothing to update. But anyway, I can see this is going nowhere, so when I find the time, I will investigate and fix it myself, as I did for the various other bugs in glfw. Feel free to close this issue.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/392014577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/392238444","html_url":"https://github.com/glfw/glfw/issues/1268#issuecomment-392238444","issue_url":"https://api.github.com/repos/glfw/glfw/issues/1268","id":392238444,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjIzODQ0NA==","user":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-26T05:35:43Z","updated_at":"2018-05-26T05:36:35Z","body":"@linkmauve Just by the way the error does not happen in glfwCreateWindow() it happens in glfwShowWindow(). So no, the glfw examples do not cover all possible ways of creating and showing windows.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/glfw/glfw/issues/comments/392238444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kovidgoyal","id":1308621,"node_id":"MDQ6VXNlcjEzMDg2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1308621?v=4","gravatar_id":"","url":"https://api.github.com/users/kovidgoyal","html_url":"https://github.com/kovidgoyal","followers_url":"https://api.github.com/users/kovidgoyal/followers","following_url":"https://api.github.com/users/kovidgoyal/following{/other_user}","gists_url":"https://api.github.com/users/kovidgoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/kovidgoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kovidgoyal/subscriptions","organizations_url":"https://api.github.com/users/kovidgoyal/orgs","repos_url":"https://api.github.com/users/kovidgoyal/repos","events_url":"https://api.github.com/users/kovidgoyal/events{/privacy}","received_events_url":"https://api.github.com/users/kovidgoyal/received_events","type":"User","user_view_type":"public","site_admin":false}}]