{"url":"https://api.github.com/repos/assimp/assimp/issues/623","repository_url":"https://api.github.com/repos/assimp/assimp","labels_url":"https://api.github.com/repos/assimp/assimp/issues/623/labels{/name}","comments_url":"https://api.github.com/repos/assimp/assimp/issues/623/comments","events_url":"https://api.github.com/repos/assimp/assimp/issues/623/events","html_url":"https://github.com/assimp/assimp/issues/623","id":99378119,"node_id":"MDU6SXNzdWU5OTM3ODExOQ==","number":623,"title":"PLY importer should not automatically create faces (and it does it wrong)","user":{"login":"dibenedetto","id":709589,"node_id":"MDQ6VXNlcjcwOTU4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/709589?v=4","gravatar_id":"","url":"https://api.github.com/users/dibenedetto","html_url":"https://github.com/dibenedetto","followers_url":"https://api.github.com/users/dibenedetto/followers","following_url":"https://api.github.com/users/dibenedetto/following{/other_user}","gists_url":"https://api.github.com/users/dibenedetto/gists{/gist_id}","starred_url":"https://api.github.com/users/dibenedetto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dibenedetto/subscriptions","organizations_url":"https://api.github.com/users/dibenedetto/orgs","repos_url":"https://api.github.com/users/dibenedetto/repos","events_url":"https://api.github.com/users/dibenedetto/events{/privacy}","received_events_url":"https://api.github.com/users/dibenedetto/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":244436167,"node_id":"MDU6TGFiZWwyNDQ0MzYxNjc=","url":"https://api.github.com/repos/assimp/assimp/labels/Bug","name":"Bug","color":"bfe5bf","default":false,"description":"Global flag to mark a deviation from expected behaviour"}],"state":"closed","locked":false,"assignee":{"login":"kimkulling","id":2323156,"node_id":"MDQ6VXNlcjIzMjMxNTY=","avatar_url":"https://avatars.githubusercontent.com/u/2323156?v=4","gravatar_id":"","url":"https://api.github.com/users/kimkulling","html_url":"https://github.com/kimkulling","followers_url":"https://api.github.com/users/kimkulling/followers","following_url":"https://api.github.com/users/kimkulling/following{/other_user}","gists_url":"https://api.github.com/users/kimkulling/gists{/gist_id}","starred_url":"https://api.github.com/users/kimkulling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimkulling/subscriptions","organizations_url":"https://api.github.com/users/kimkulling/orgs","repos_url":"https://api.github.com/users/kimkulling/repos","events_url":"https://api.github.com/users/kimkulling/events{/privacy}","received_events_url":"https://api.github.com/users/kimkulling/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"kimkulling","id":2323156,"node_id":"MDQ6VXNlcjIzMjMxNTY=","avatar_url":"https://avatars.githubusercontent.com/u/2323156?v=4","gravatar_id":"","url":"https://api.github.com/users/kimkulling","html_url":"https://github.com/kimkulling","followers_url":"https://api.github.com/users/kimkulling/followers","following_url":"https://api.github.com/users/kimkulling/following{/other_user}","gists_url":"https://api.github.com/users/kimkulling/gists{/gist_id}","starred_url":"https://api.github.com/users/kimkulling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimkulling/subscriptions","organizations_url":"https://api.github.com/users/kimkulling/orgs","repos_url":"https://api.github.com/users/kimkulling/repos","events_url":"https://api.github.com/users/kimkulling/events{/privacy}","received_events_url":"https://api.github.com/users/kimkulling/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/assimp/assimp/milestones/3","html_url":"https://github.com/assimp/assimp/milestone/3","labels_url":"https://api.github.com/repos/assimp/assimp/milestones/3/labels","id":1386672,"node_id":"MDk6TWlsZXN0b25lMTM4NjY3Mg==","number":3,"title":"Release 3.3","description":null,"creator":{"login":"kimkulling","id":2323156,"node_id":"MDQ6VXNlcjIzMjMxNTY=","avatar_url":"https://avatars.githubusercontent.com/u/2323156?v=4","gravatar_id":"","url":"https://api.github.com/users/kimkulling","html_url":"https://github.com/kimkulling","followers_url":"https://api.github.com/users/kimkulling/followers","following_url":"https://api.github.com/users/kimkulling/following{/other_user}","gists_url":"https://api.github.com/users/kimkulling/gists{/gist_id}","starred_url":"https://api.github.com/users/kimkulling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimkulling/subscriptions","organizations_url":"https://api.github.com/users/kimkulling/orgs","repos_url":"https://api.github.com/users/kimkulling/repos","events_url":"https://api.github.com/users/kimkulling/events{/privacy}","received_events_url":"https://api.github.com/users/kimkulling/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":5,"state":"closed","created_at":"2015-10-31T12:19:05Z","updated_at":"2020-05-06T06:39:08Z","due_on":null,"closed_at":"2020-05-06T06:39:08Z"},"comments":0,"created_at":"2015-08-06T07:44:32Z","updated_at":"2018-03-08T23:26:06Z","closed_at":"2018-03-08T23:26:06Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"If no faces are found in the header, the PLY importer automatically adds them by simply generating triplets by taking vertex indices triplets sequentially.\nThe code is in PlyLoader.cpp. from line 207:\n\n```\n// if no face list is existing we assume that the vertex\n// list is containing a list of triangles\nif (avFaces.empty())\n{\n    if (avPositions.size() < 3)\n    {\n        throw DeadlyImportError( \"Invalid .ply file: Not enough \"\n            \"vertices to build a proper face list. \");\n    }\n\n    const unsigned int iNum = (unsigned int)avPositions.size() / 3;\n    for (unsigned int i = 0; i< iNum;++i)\n    {\n        PLY::Face sFace;\n        sFace.mIndices.push_back((iNum*3));\n        sFace.mIndices.push_back((iNum*3)+1);\n        sFace.mIndices.push_back((iNum*3)+2);\n        avFaces.push_back(sFace);\n    }\n}\n```\n\nThe for loop is bugged: a PLY::Face already has 3 indices (by constructor), so it ends up having 6 indices, first 3 are zero, last ones have constant indices (\"iNum\" should be \"i\").\n\nApart from this bug itself, this prevents the importer to properly detect and load point clouds (i.e., geometry with no faces, just vertices). Even if the whole \"if\" at line 207 is removed, meshes in later stages will not be created and the scene will be null.\n\nAs a temporary fix, I added a new flag to the scene, AI_SCENE_FLAGS_AUTO_FACES: when set, this would report the caller that faces are artificial. The correct behavior is to not create faces at all.\n\nm.\n","closed_by":{"login":"kimkulling","id":2323156,"node_id":"MDQ6VXNlcjIzMjMxNTY=","avatar_url":"https://avatars.githubusercontent.com/u/2323156?v=4","gravatar_id":"","url":"https://api.github.com/users/kimkulling","html_url":"https://github.com/kimkulling","followers_url":"https://api.github.com/users/kimkulling/followers","following_url":"https://api.github.com/users/kimkulling/following{/other_user}","gists_url":"https://api.github.com/users/kimkulling/gists{/gist_id}","starred_url":"https://api.github.com/users/kimkulling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimkulling/subscriptions","organizations_url":"https://api.github.com/users/kimkulling/orgs","repos_url":"https://api.github.com/users/kimkulling/repos","events_url":"https://api.github.com/users/kimkulling/events{/privacy}","received_events_url":"https://api.github.com/users/kimkulling/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/assimp/assimp/issues/623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/assimp/assimp/issues/623/timeline","performed_via_github_app":null,"state_reason":"completed"}