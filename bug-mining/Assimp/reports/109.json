{"url":"https://api.github.com/repos/assimp/assimp/issues/4179","repository_url":"https://api.github.com/repos/assimp/assimp","labels_url":"https://api.github.com/repos/assimp/assimp/issues/4179/labels{/name}","comments_url":"https://api.github.com/repos/assimp/assimp/issues/4179/comments","events_url":"https://api.github.com/repos/assimp/assimp/issues/4179/events","html_url":"https://github.com/assimp/assimp/issues/4179","id":1052803277,"node_id":"I_kwDOAAnkjM4-wIDN","number":4179,"title":"Bug: Collada parsing partly broken since v5.1.0","user":{"login":"pezcode","id":907940,"node_id":"MDQ6VXNlcjkwNzk0MA==","avatar_url":"https://avatars.githubusercontent.com/u/907940?v=4","gravatar_id":"","url":"https://api.github.com/users/pezcode","html_url":"https://github.com/pezcode","followers_url":"https://api.github.com/users/pezcode/followers","following_url":"https://api.github.com/users/pezcode/following{/other_user}","gists_url":"https://api.github.com/users/pezcode/gists{/gist_id}","starred_url":"https://api.github.com/users/pezcode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pezcode/subscriptions","organizations_url":"https://api.github.com/users/pezcode/orgs","repos_url":"https://api.github.com/users/pezcode/repos","events_url":"https://api.github.com/users/pezcode/events{/privacy}","received_events_url":"https://api.github.com/users/pezcode/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":244436167,"node_id":"MDU6TGFiZWwyNDQ0MzYxNjc=","url":"https://api.github.com/repos/assimp/assimp/labels/Bug","name":"Bug","color":"bfe5bf","default":false,"description":"Global flag to mark a deviation from expected behaviour"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-11-13T23:41:57Z","updated_at":"2021-11-17T18:41:20Z","closed_at":"2021-11-17T18:16:11Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"On v5.1.0 (and probably earlier) some Collada parts aren't parsed correctly, mainly lights, samplers, and some material properties.\r\n\r\nThere's a lot of code that does something like this:\r\n\r\n```c++\r\nif (currentName == \"constant_attenuation\") {\r\n    XmlParser::getRealAttribute(currentNode, \"constant_attenuation\", pLight.mAttConstant);\r\n}\r\n```\r\n\r\nwhich tries to read a *child attribute*, not the current attribute. This fails and the value is never written.\r\n\r\nThis happens in several places (non-exhaustive list):\r\n\r\nhttps://github.com/assimp/assimp/blob/05115b07b4d7ca12a52b9fd0e0534029ac8f2cb6/code/AssetLib/Collada/ColladaParser.cpp#L951\r\nhttps://github.com/assimp/assimp/blob/05115b07b4d7ca12a52b9fd0e0534029ac8f2cb6/code/AssetLib/Collada/ColladaParser.cpp#L1111\r\nhttps://github.com/assimp/assimp/blob/05115b07b4d7ca12a52b9fd0e0534029ac8f2cb6/code/AssetLib/Collada/ColladaParser.cpp#L1144\r\n\r\nSeems to have been changed in [this commit](https://github.com/assimp/assimp/commit/d393f677ce8af2343260fed3231222170b511300)\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Import https://github.com/assimp/assimp/blob/master/test/models/Collada/lights.dae\r\n2. Attenuation values for \"Point-light\" are 1, 0, 0 instead of 0.1, 0.7, 0.9\r\n\r\n**Expected behavior**\r\nSame behaviour as 5.0.1\r\n","closed_by":{"login":"kimkulling","id":2323156,"node_id":"MDQ6VXNlcjIzMjMxNTY=","avatar_url":"https://avatars.githubusercontent.com/u/2323156?v=4","gravatar_id":"","url":"https://api.github.com/users/kimkulling","html_url":"https://github.com/kimkulling","followers_url":"https://api.github.com/users/kimkulling/followers","following_url":"https://api.github.com/users/kimkulling/following{/other_user}","gists_url":"https://api.github.com/users/kimkulling/gists{/gist_id}","starred_url":"https://api.github.com/users/kimkulling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimkulling/subscriptions","organizations_url":"https://api.github.com/users/kimkulling/orgs","repos_url":"https://api.github.com/users/kimkulling/repos","events_url":"https://api.github.com/users/kimkulling/events{/privacy}","received_events_url":"https://api.github.com/users/kimkulling/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/assimp/assimp/issues/4179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/assimp/assimp/issues/4179/timeline","performed_via_github_app":null,"state_reason":"completed"}