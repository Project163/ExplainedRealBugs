{"url":"https://api.github.com/repos/assimp/assimp/issues/2662","repository_url":"https://api.github.com/repos/assimp/assimp","labels_url":"https://api.github.com/repos/assimp/assimp/issues/2662/labels{/name}","comments_url":"https://api.github.com/repos/assimp/assimp/issues/2662/comments","events_url":"https://api.github.com/repos/assimp/assimp/issues/2662/events","html_url":"https://github.com/assimp/assimp/issues/2662","id":495926427,"node_id":"MDU6SXNzdWU0OTU5MjY0Mjc=","number":2662,"title":"Incorrect aiAnimation::mTicksPerSecond value for gltf2 imports","user":{"login":"theakman2","id":5579954,"node_id":"MDQ6VXNlcjU1Nzk5NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/5579954?v=4","gravatar_id":"","url":"https://api.github.com/users/theakman2","html_url":"https://github.com/theakman2","followers_url":"https://api.github.com/users/theakman2/followers","following_url":"https://api.github.com/users/theakman2/following{/other_user}","gists_url":"https://api.github.com/users/theakman2/gists{/gist_id}","starred_url":"https://api.github.com/users/theakman2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/theakman2/subscriptions","organizations_url":"https://api.github.com/users/theakman2/orgs","repos_url":"https://api.github.com/users/theakman2/repos","events_url":"https://api.github.com/users/theakman2/events{/privacy}","received_events_url":"https://api.github.com/users/theakman2/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":831073868,"node_id":"MDU6TGFiZWw4MzEwNzM4Njg=","url":"https://api.github.com/repos/assimp/assimp/labels/glTF2.0","name":"glTF2.0","color":"1d76db","default":false,"description":"Bugs related to the glTF2.0 format"},{"id":8423909189,"node_id":"LA_kwDOAAnkjM8AAAAB9hqnRQ","url":"https://api.github.com/repos/assimp/assimp/labels/Animation","name":"Animation","color":"d93f0b","default":false,"description":"Bugs related to the animation data"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-09-19T17:15:54Z","updated_at":"2025-04-10T16:21:20Z","closed_at":"2019-09-30T21:10:25Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When importing gltf 2 files, the value of `aiAnimation::mTicksPerSecond` is incorrect (at least in some cases).\r\n\r\nAccording to the documentation, the value of aiAnimation::mDuration is in ticks (http://assimp.sourceforge.net/lib_html/structai_animation.html#ae2bbc49320b4b75c05e23e0ab704ece7) and the value of aiAnimation::mTicksPerSecond should be the number of ticks per second (http://assimp.sourceforge.net/lib_html/structai_animation.html#afd26a40c3f16b6aa6e150effa3eaeab1).\r\n\r\nThis means the duration of an animation in seconds should be `mDuration * mTicksPerSecond`. Unfortunately I'm getting an `mDuration` value of `4000.0` and a `mTicksPerSecond` value of `1.25` when I try to import the attached GLB file.\r\n\r\n[object.tar.gz](https://github.com/assimp/assimp/files/3632426/object.tar.gz)\r\n\r\n(I'm importing the GLB file, but I've also included the original Blender 2.80 file from which the GLB file was exported).\r\n\r\nThe animation in reality is 4s (48 frames at 12fps), but according to Assimp it's 4000*1.25=5000s!\r\n\r\nI think the problem is with these two lines in `code/glTF2/glTF2Importer.cpp`:\r\n\r\n![image](https://user-images.githubusercontent.com/5579954/65265426-da49c600-db08-11e9-8dfb-7c4f8de1a566.png)\r\n\r\nIn the `CreateNodeAnim` method, the keyframe times are being specified in milliseconds since they're all being multiplied by `kMillisecondsFromSeconds`. That means `mTicksPerSecond` should always be `0.001`.\r\n\r\n(On a separate note, what is the duration of an animation if `mTicksPerSecond` is 0? The documentation notes that this is possible, so does that mean the length of the animation in seconds is just `mDuration` when `mTicksPerSecond` is 0?)","closed_by":{"login":"kimkulling","id":2323156,"node_id":"MDQ6VXNlcjIzMjMxNTY=","avatar_url":"https://avatars.githubusercontent.com/u/2323156?v=4","gravatar_id":"","url":"https://api.github.com/users/kimkulling","html_url":"https://github.com/kimkulling","followers_url":"https://api.github.com/users/kimkulling/followers","following_url":"https://api.github.com/users/kimkulling/following{/other_user}","gists_url":"https://api.github.com/users/kimkulling/gists{/gist_id}","starred_url":"https://api.github.com/users/kimkulling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimkulling/subscriptions","organizations_url":"https://api.github.com/users/kimkulling/orgs","repos_url":"https://api.github.com/users/kimkulling/repos","events_url":"https://api.github.com/users/kimkulling/events{/privacy}","received_events_url":"https://api.github.com/users/kimkulling/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/assimp/assimp/issues/2662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/assimp/assimp/issues/2662/timeline","performed_via_github_app":null,"state_reason":"completed"}