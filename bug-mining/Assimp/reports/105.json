{"url":"https://api.github.com/repos/assimp/assimp/issues/3888","repository_url":"https://api.github.com/repos/assimp/assimp","labels_url":"https://api.github.com/repos/assimp/assimp/issues/3888/labels{/name}","comments_url":"https://api.github.com/repos/assimp/assimp/issues/3888/comments","events_url":"https://api.github.com/repos/assimp/assimp/issues/3888/events","html_url":"https://github.com/assimp/assimp/issues/3888","id":876798611,"node_id":"MDU6SXNzdWU4NzY3OTg2MTE=","number":3888,"title":"Numerous loader misbehaviors when file can not be opened (crashes, assertions, bad returns) [amf, 3ds, sib, irrm, irrs, quick3d, ms3d, cob, nendo, xgl, assbin]","user":{"login":"JC3","id":5651184,"node_id":"MDQ6VXNlcjU2NTExODQ=","avatar_url":"https://avatars.githubusercontent.com/u/5651184?v=4","gravatar_id":"","url":"https://api.github.com/users/JC3","html_url":"https://github.com/JC3","followers_url":"https://api.github.com/users/JC3/followers","following_url":"https://api.github.com/users/JC3/following{/other_user}","gists_url":"https://api.github.com/users/JC3/gists{/gist_id}","starred_url":"https://api.github.com/users/JC3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JC3/subscriptions","organizations_url":"https://api.github.com/users/JC3/orgs","repos_url":"https://api.github.com/users/JC3/repos","events_url":"https://api.github.com/users/JC3/events{/privacy}","received_events_url":"https://api.github.com/users/JC3/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":244436167,"node_id":"MDU6TGFiZWwyNDQ0MzYxNjc=","url":"https://api.github.com/repos/assimp/assimp/labels/Bug","name":"Bug","color":"bfe5bf","default":false,"description":"Global flag to mark a deviation from expected behaviour"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-05-05T20:14:45Z","updated_at":"2025-05-07T15:33:04Z","closed_at":"2021-05-10T23:48:24Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Library version: latest master at the time of this post.\r\nPlatform: Win 10 64-bit, debug build, MSVC 2019 64-bit.\r\n\r\nA fair number of loaders crash (usually due to assertion failures) or return empty scenes (instead of failing) when faced with files that can not be opened:\r\n\r\n- 3DS, SIB, Quick3D, Milkshape, TrueSpace, Nendo: When the file can not be opened for any reason, these all throw null stream assertion failures in debug mode, and generally crash in release mode.\r\n- AMF: When a zero-length file is opened, it appears to return and (correctly) fail, but an access violation (termination with 0xc0000005 on Windows) soon follows. Have not investigated yet.\r\n- Assbin: When the file can not be opened for any reason, this returns an empty scene instead of failing.\r\n- Irrlicht Mesh, Irrlicht Scene, XGL: When a zero-length file is opened, these return empty scenes instead of failing.\r\n\r\nWill investigate and fix as much as possible. \r\n\r\n---\r\n\r\nI've got a test program that spits this out pretty quickly:\r\n\r\n![image](https://user-images.githubusercontent.com/5651184/117201994-4ef37600-adbb-11eb-98c8-1d19f846d403.png)\r\n\r\nIn that table:\r\n- White = correctly failed with an error message\r\n- Yellow = did not fail, returned an empty scene instead\r\n- Red = terminated the program (ignore *noaccess_file*'s redness -- unrelated)\r\n- (Dots aren't too important here but generally solid = something printed to stderr = an assertion failure in this context.)\r\n\r\nWhere the input files were:\r\n- `empty_file`: a zero length file\r\n- `empty_dir`: a directory\r\n- `noaccess_file`: a file with no read permissions\r\n- `nonexistent_file`: doesn't exist\r\n- `invalid|path`: not a valid filename on Windows\r\n- `glob*in*.path`: you get the idea\r\n- `$%$%$%$%$%$%$%`\r\n\r\nThis again highlights the need for better unit test coverage, especially in failure cases.","closed_by":{"login":"JC3","id":5651184,"node_id":"MDQ6VXNlcjU2NTExODQ=","avatar_url":"https://avatars.githubusercontent.com/u/5651184?v=4","gravatar_id":"","url":"https://api.github.com/users/JC3","html_url":"https://github.com/JC3","followers_url":"https://api.github.com/users/JC3/followers","following_url":"https://api.github.com/users/JC3/following{/other_user}","gists_url":"https://api.github.com/users/JC3/gists{/gist_id}","starred_url":"https://api.github.com/users/JC3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JC3/subscriptions","organizations_url":"https://api.github.com/users/JC3/orgs","repos_url":"https://api.github.com/users/JC3/repos","events_url":"https://api.github.com/users/JC3/events{/privacy}","received_events_url":"https://api.github.com/users/JC3/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/assimp/assimp/issues/3888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/assimp/assimp/issues/3888/timeline","performed_via_github_app":null,"state_reason":"completed"}