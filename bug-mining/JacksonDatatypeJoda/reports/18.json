{"url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda/issues/160","repository_url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda","labels_url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda/issues/160/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda/issues/160/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda/issues/160/events","html_url":"https://github.com/FasterXML/jackson-datatype-joda/issues/160","id":2954843133,"node_id":"I_kwDOACP7XM6wH1P9","number":160,"title":"Cannot serialize `org.joda.time.Days`","user":{"login":"bestbugwriter","id":4133268,"node_id":"MDQ6VXNlcjQxMzMyNjg=","avatar_url":"https://avatars.githubusercontent.com/u/4133268?v=4","gravatar_id":"","url":"https://api.github.com/users/bestbugwriter","html_url":"https://github.com/bestbugwriter","followers_url":"https://api.github.com/users/bestbugwriter/followers","following_url":"https://api.github.com/users/bestbugwriter/following{/other_user}","gists_url":"https://api.github.com/users/bestbugwriter/gists{/gist_id}","starred_url":"https://api.github.com/users/bestbugwriter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bestbugwriter/subscriptions","organizations_url":"https://api.github.com/users/bestbugwriter/orgs","repos_url":"https://api.github.com/users/bestbugwriter/repos","events_url":"https://api.github.com/users/bestbugwriter/events{/privacy}","received_events_url":"https://api.github.com/users/bestbugwriter/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda/milestones/30","html_url":"https://github.com/FasterXML/jackson-datatype-joda/milestone/30","labels_url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda/milestones/30/labels","id":12647240,"node_id":"MI_kwDOACP7XM4AwPtI","number":30,"title":"2.18.4","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":1,"state":"open","created_at":"2025-03-31T22:25:57Z","updated_at":"2025-03-31T22:26:14Z","due_on":null,"closed_at":null},"comments":6,"created_at":"2025-03-28T02:24:53Z","updated_at":"2025-03-31T22:26:14Z","closed_at":"2025-03-29T17:00:08Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I found jackson-datatype-joda is also has a serializer `com.fasterxml.jackson.datatype.joda.deser.PeriodDeserializer`ï¼Œand `Days` does implements the `ReadablePeriod` interface. \nbut I don't known why it is not work.\n\n\n\n\nhttps://stackoverflow.com/questions/79535991/joda-date-time-type-org-joda-time-days-not-supported-by-default?noredirect=1#comment140269178_79535991\n\nI used joda 2.10.14 time and jackson 2.18.3,\n\n    jackson-core-2.18.3.jar\n    jackson-databind-2.18.3.jar\n    jackson-datatype-joda-2.18.3.jar\n    joda-time-2.10.14.jar\n\n\nI have register `JodaModule`, but it also throw Exception, my code is \n\n    public static void main(String[] args) throws JsonProcessingException {\n        DateTime dateTime = new DateTime();\n        Days days = Days.days(1);\n        Map<String, Object> map = new HashMap<>();\n        map.put(\"dateTime\", dateTime);\n        map.put(\"days\", days);\n        ObjectMapper objectMapper = new ObjectMapper();\n        objectMapper.registerModule(new JodaModule());\n        String json = objectMapper.writeValueAsString(map);\n        System.out.println(json);\n    }\n\n\nthe exception\n\n    Exception in thread \"main\" com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Joda date/time type `org.joda.time.Days` not supported by default: add Module \"com.fasterxml.jackson.datatype:jackson-datatype-joda\" to enable handling (through reference chain: java.util.HashMap[\"days\"])\n\tat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77)\n\tat com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1340)\n\tat com.fasterxml.jackson.databind.ser.impl.UnsupportedTypeSerializer.serialize(UnsupportedTypeSerializer.java:35)\n\tat com.fasterxml.jackson.databind.ser.std.MapSerializer.serializeFields(MapSerializer.java:808)\n\tat com.fasterxml.jackson.databind.ser.std.MapSerializer.serializeWithoutTypeInfo(MapSerializer.java:764)\n\tat com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:720)\n\tat com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:35)\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:502)\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:341)\n\tat com.fasterxml.jackson.databind.ObjectMapper._writeValueAndClose(ObjectMapper.java:4819)\n\tat com.fasterxml.jackson.databind.ObjectMapper.writeValueAsString(ObjectMapper.java:4060)\n\tat azkaban.utils.JSONUtils.main(JSONUtils.java:96)\n\n\nI checked JodaModule code, found that it is not add Days deserializer, but has PeriodDeserializer. So, how should I resolve this issue?\n\n \n\n<img width=\"973\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/15e0a62e-8614-47d8-8971-6438680014b4\" />","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda/issues/160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda/issues/160/timeline","performed_via_github_app":null,"state_reason":"completed"}