{"url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda/issues/83","repository_url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda","labels_url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda/issues/83/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda/issues/83/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda/issues/83/events","html_url":"https://github.com/FasterXML/jackson-datatype-joda/issues/83","id":144723302,"node_id":"MDU6SXNzdWUxNDQ3MjMzMDI=","number":83,"title":"WRITE_DATES_WITH_ZONE_ID feature not working when applied on @JsonFormat annotation","user":{"login":"mandyWW","id":1316724,"node_id":"MDQ6VXNlcjEzMTY3MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1316724?v=4","gravatar_id":"","url":"https://api.github.com/users/mandyWW","html_url":"https://github.com/mandyWW","followers_url":"https://api.github.com/users/mandyWW/followers","following_url":"https://api.github.com/users/mandyWW/following{/other_user}","gists_url":"https://api.github.com/users/mandyWW/gists{/gist_id}","starred_url":"https://api.github.com/users/mandyWW/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mandyWW/subscriptions","organizations_url":"https://api.github.com/users/mandyWW/orgs","repos_url":"https://api.github.com/users/mandyWW/repos","events_url":"https://api.github.com/users/mandyWW/events{/privacy}","received_events_url":"https://api.github.com/users/mandyWW/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda/milestones/19","html_url":"https://github.com/FasterXML/jackson-datatype-joda/milestone/19","labels_url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda/milestones/19/labels","id":1857999,"node_id":"MDk6TWlsZXN0b25lMTg1Nzk5OQ==","number":19,"title":"2.8.0","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":3,"state":"open","created_at":"2016-06-30T17:06:43Z","updated_at":"2016-07-01T05:49:27Z","due_on":null,"closed_at":null},"comments":2,"created_at":"2016-03-30T21:21:50Z","updated_at":"2016-07-01T05:49:38Z","closed_at":"2016-07-01T05:49:27Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Copied over from https://github.com/FasterXML/jackson-databind/issues/1175 as was assigned to wrong module.\n\nFirstly thank you for a fantastic library :-) Just one small issue:-\n\nI am using Jackson 2.7.3 and I would like to specify the date format pattern and whether or not to display timezone information on a per property basis. Therefore I have specified \n\n`@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = \"dd-MM-yyyy hh:mm:ss\", with = JsonFormat.Feature.WRITE_DATES_WITH_ZONE_ID)`\n\non my date property - see example class below:-\n\n```\nprivate static class DummyClassWithDate {\n        @JsonProperty(\"name\")\n        private String name;\n        @JsonProperty(\"age\")\n        private int age;\n        @JsonProperty(\"date\")\n        @JsonFormat\n                (shape = JsonFormat.Shape.STRING, pattern = \"dd-MM-yyyy hh:mm:ss Z\", with = JsonFormat.Feature.WRITE_DATES_WITH_ZONE_ID)\n        private DateTime date;\n\n        public DummyClassWithDate() {\n\n        }\n\n        public DummyClassWithDate(String name, int age, DateTime date) {\n            this.name = name;\n            this.age = age;\n            this.date = date;\n        }\n\n        public String getName() {\n            return name;\n        }\n\n        public int getAge() {\n            return age;\n        }\n\n        public DateTime getDate() {\n            return date;\n        }\n\n        public void setName(String aName) {\n            name = aName;\n        }\n\n        public void setAge(int anAge) {\n            age = anAge;\n        }\n\n        public void setDate(DateTime aDate) {\n            date = aDate;\n        }\n\n    }\n```\n\nHowever, although the pattern is being used, the timezone is not being preserved when serialized. Here is a unit test which shows the problem:\n\n```\n    private final DummyClassWithDate dummyClassWithDateIncludingTimezone = new DummyClassWithDate(\"Test\", 50, new DateTime(2015, 11, 23, 22, 06, 39, DateTimeZone.forID(\"Asia/Krasnoyarsk\")));\n\n    @Test\n    public void testJacksonAnnotatedPOJOWithDateWithTimezoneToJson() throws Exception {\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.registerModule(new JodaModule());\n\n        assertEquals(\"{\\\"name\\\":\\\"Test\\\",\\\"age\\\":50,\\\"date\\\":\\\"23-11-2015 10:06:39 +0800[Asia/Krasnoyarsk]\\\"}\",mapper.writeValueAsString(dummyClassWithDateIncludingTimezone));\n    }\n```\n\nand the results of running the test:\n\n```\njunit.framework.ComparisonFailure: \nExpected :{\"name\":\"Test\",\"age\":50,\"date\":\"23-11-2015 10:06:39 +0800[Asia/Krasnoyarsk]\"}\nActual   :{\"name\":\"Test\",\"age\":50,\"date\":\"23-11-2015 02:06:39 +0000\"}\n```\n\nIf I change my test to add in:\n\n`mapper.configure(SerializationFeature.WRITE_DATES_WITH_ZONE_ID, true);\n`\nthis fixes the issue however this is applying the setting to dates on ALL classes and I really only want it applied to specific properties.\n","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda/issues/83/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-datatype-joda/issues/83/timeline","performed_via_github_app":null,"state_reason":"completed"}