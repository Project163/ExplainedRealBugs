diff --git a/oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PathUtils.java b/oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PathUtils.java
index 4cbcd74738..132e081725 100644
--- a/oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PathUtils.java
+++ b/oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PathUtils.java
@@ -215,48 +215,46 @@ public final class PathUtils {
     public static Iterable<String> elements(final String path) {
         assert isValid(path) : "Invalid path ["+path+"]";
 
-        final Iterator<String> it = new Iterator<String>() {
-            int pos = PathUtils.isAbsolute(path) ? 1 : 0;
-            String next;
-
+        return new Iterable<String>() {
             @Override
-            public boolean hasNext() {
-                if (next == null) {
-                    if (pos >= path.length()) {
-                        return false;
-                    }
-                    int i = path.indexOf('/', pos);
-                    if (i < 0) {
-                        next = path.substring(pos);
-                        pos = path.length();
-                    } else {
-                        next = path.substring(pos, i);
-                        pos = i + 1;
+            public Iterator<String> iterator() {
+                return new Iterator<String>() {
+                    int pos = isAbsolute(path) ? 1 : 0;
+                    String next;
+
+                    @Override
+                    public boolean hasNext() {
+                        if (next == null) {
+                            if (pos >= path.length()) {
+                                return false;
+                            }
+                            int i = path.indexOf('/', pos);
+                            if (i < 0) {
+                                next = path.substring(pos);
+                                pos = path.length();
+                            } else {
+                                next = path.substring(pos, i);
+                                pos = i + 1;
+                            }
+                        }
+                        return true;
                     }
-                }
-                return true;
-            }
-
-            @Override
-            public String next() {
-                if (hasNext()) {
-                    String next = this.next;
-                    this.next = null;
-                    return next;
-                }
-                throw new NoSuchElementException();
-            }
 
-            @Override
-            public void remove() {
-                throw new UnsupportedOperationException("remove");
-            }
-        };
+                    @Override
+                    public String next() {
+                        if (hasNext()) {
+                            String next = this.next;
+                            this.next = null;
+                            return next;
+                        }
+                        throw new NoSuchElementException();
+                    }
 
-        return new Iterable<String>() {
-            @Override
-            public Iterator<String> iterator() {
-                return it;
+                    @Override
+                    public void remove() {
+                        throw new UnsupportedOperationException("remove");
+                    }
+                };
             }
         };
     }
diff --git a/oak-commons/src/test/java/org/apache/jackrabbit/oak/commons/PathUtilsTest.java b/oak-commons/src/test/java/org/apache/jackrabbit/oak/commons/PathUtilsTest.java
index 699deabaf3..940bda147d 100644
--- a/oak-commons/src/test/java/org/apache/jackrabbit/oak/commons/PathUtilsTest.java
+++ b/oak-commons/src/test/java/org/apache/jackrabbit/oak/commons/PathUtilsTest.java
@@ -18,6 +18,7 @@ package org.apache.jackrabbit.oak.commons;
 
 import junit.framework.AssertionFailedError;
 import junit.framework.TestCase;
+import org.junit.Assert;
 import org.junit.Test;
 
 /**
@@ -458,4 +459,21 @@ public class PathUtilsTest extends TestCase {
         }
     }
 
+    public void testElements() {
+        String path = "a/b/c";
+        String[] elementsArray = path.split("/");
+        Iterable<String> elementsIterable = PathUtils.elements(path);
+        int k = 0;
+        for (String name : elementsIterable) {
+            Assert.assertEquals(elementsArray[k++], name);
+        }
+        assertEquals(3, k);
+
+        k = 0;
+        for (String name : elementsIterable) {
+            Assert.assertEquals(elementsArray[k++], name);
+        }
+        assertEquals(3, k);
+    }
+
 }
