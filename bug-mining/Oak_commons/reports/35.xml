<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:46:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-6648] test failure seen in org.apache.jackrabbit.oak.segment.upgrade.UpgradeIT</title>
                <link>https://issues.apache.org/jira/browse/OAK-6648</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Running org.apache.jackrabbit.oak.segment.upgrade.UpgradeIT
Apache Jackrabbit Oak 1.6.1
===&amp;gt; true
===&amp;gt; org.apache.jackrabbit.oak.plugins.document.*, org.apache.jackrabbit.oak.plugins.segment.*, org.apache.jackrabbit.oak.segment.SegmentNodeBuilder
===&amp;gt; org.apache.jackrabbit.oak.plugins.document.*, org.apache.jackrabbit.oak.plugins.segment.*, org.apache.jackrabbit.oak.segment.SegmentNodeBuilder, org.apache.jackrabbit.oak.spi.commit.EmptyHook
===&amp;gt; org.apache.jackrabbit.oak.plugins.document.*, org.apache.jackrabbit.oak.plugins.segment.*, org.apache.jackrabbit.oak.segment.SegmentNodeBuilder, org.apache.jackrabbit.oak.spi.commit.EmptyHook, org.apache.jackrabbit.oak.spi.commit.CommitInfo
===&amp;gt; true
===&amp;gt; org.apache.jackrabbit.oak.segment.SegmentNodeStore@6bb75258
===&amp;gt; SegmentNodeBuilder{path=/}
===&amp;gt; null
===&amp;gt; { property-name-5-0 = property-value-5-0, property-name-5-1 = property-value-5-1, property-name-5-2 = property-value-5-2, property-name-5-3 = property-value-5-3, property-name-5-4 = property-value-5-4, property-name-5-5 = property-value-5-5, property-name-5-6 = property-value-5-6, property-name-5-7 = property-value-5-7, property-name-5-8 = property-value-5-8, property-name-5-9 = property-value-5-9, node-5-3 = { ... }, node-5-4 = { ... }, node-5-9 = { ... }, node-5-1 = { ... }, node-5-2 = { ... }, node-5-7 = { ... }, node-5-8 = { ... }, node-5-5 = { ... }, node-5-0 = { ... }, node-5-6 = { ... } }
Apache Jackrabbit Oak 1.6.1
===&amp;gt; true
===&amp;gt; org.apache.jackrabbit.oak.plugins.document.*, org.apache.jackrabbit.oak.plugins.segment.*, org.apache.jackrabbit.oak.segment.SegmentNodeBuilder
===&amp;gt; org.apache.jackrabbit.oak.plugins.document.*, org.apache.jackrabbit.oak.plugins.segment.*, org.apache.jackrabbit.oak.segment.SegmentNodeBuilder, org.apache.jackrabbit.oak.spi.commit.EmptyHook
===&amp;gt; org.apache.jackrabbit.oak.plugins.document.*, org.apache.jackrabbit.oak.plugins.segment.*, org.apache.jackrabbit.oak.segment.SegmentNodeBuilder, org.apache.jackrabbit.oak.spi.commit.EmptyHook, org.apache.jackrabbit.oak.spi.commit.CommitInfo
===&amp;gt; true
===&amp;gt; org.apache.jackrabbit.oak.segment.SegmentNodeStore@5b04476e
===&amp;gt; SegmentNodeBuilder{path=/}
===&amp;gt; null
===&amp;gt; { property-name-5-0 = property-value-5-0, property-name-5-1 = property-value-5-1, property-name-5-2 = property-value-5-2, property-name-5-3 = property-value-5-3, property-name-5-4 = property-value-5-4, property-name-5-5 = property-value-5-5, property-name-5-6 = property-value-5-6, property-name-5-7 = property-value-5-7, property-name-5-8 = property-value-5-8, property-name-5-9 = property-value-5-9, node-5-3 = { ... }, node-5-4 = { ... }, node-5-9 = { ... }, node-5-1 = { ... }, node-5-2 = { ... }, node-5-7 = { ... }, node-5-8 = { ... }, node-5-5 = { ... }, node-5-0 = { ... }, node-5-6 = { ... } }
Apache Jackrabbit Oak 1.6.1
===&amp;gt; true
===&amp;gt; org.apache.jackrabbit.oak.plugins.document.*, org.apache.jackrabbit.oak.plugins.segment.*, org.apache.jackrabbit.oak.segment.SegmentNodeBuilder
===&amp;gt; org.apache.jackrabbit.oak.plugins.document.*, org.apache.jackrabbit.oak.plugins.segment.*, org.apache.jackrabbit.oak.segment.SegmentNodeBuilder, org.apache.jackrabbit.oak.spi.commit.EmptyHook
===&amp;gt; org.apache.jackrabbit.oak.plugins.document.*, org.apache.jackrabbit.oak.plugins.segment.*, org.apache.jackrabbit.oak.segment.SegmentNodeBuilder, org.apache.jackrabbit.oak.spi.commit.EmptyHook, org.apache.jackrabbit.oak.spi.commit.CommitInfo
===&amp;gt; true
===&amp;gt; org.apache.jackrabbit.oak.segment.SegmentNodeStore@5b04476e
===&amp;gt; SegmentNodeBuilder{path=/}
===&amp;gt; null
===&amp;gt; { property-name-5-0 = property-value-5-0, property-name-5-1 = property-value-5-1, property-name-5-2 = property-value-5-2, property-name-5-3 = property-value-5-3, property-name-5-4 = property-value-5-4, property-name-5-5 = property-value-5-5, property-name-5-6 = property-value-5-6, property-name-5-7 = property-value-5-7, property-name-5-8 = property-value-5-8, property-name-5-9 = property-value-5-9, node-5-3 = { ... }, node-5-4 = { ... }, node-5-9 = { ... }, node-5-1 = { ... }, node-5-2 = { ... }, node-5-7 = { ... }, node-5-8 = { ... }, node-5-5 = { ... }, node-5-0 = { ... }, node-5-6 = { ... } }
Apache Jackrabbit Oak 1.6.1
===&amp;gt; true
===&amp;gt; org.apache.jackrabbit.oak.plugins.document.*, org.apache.jackrabbit.oak.plugins.segment.*, org.apache.jackrabbit.oak.segment.SegmentNodeBuilder
===&amp;gt; org.apache.jackrabbit.oak.plugins.document.*, org.apache.jackrabbit.oak.plugins.segment.*, org.apache.jackrabbit.oak.segment.SegmentNodeBuilder, org.apache.jackrabbit.oak.spi.commit.EmptyHook
===&amp;gt; org.apache.jackrabbit.oak.plugins.document.*, org.apache.jackrabbit.oak.plugins.segment.*, org.apache.jackrabbit.oak.segment.SegmentNodeBuilder, org.apache.jackrabbit.oak.spi.commit.EmptyHook, org.apache.jackrabbit.oak.spi.commit.CommitInfo
===&amp;gt; true
===&amp;gt; org.apache.jackrabbit.oak.segment.SegmentNodeStore@5b04476e
===&amp;gt; SegmentNodeBuilder{path=/}
===&amp;gt; null
===&amp;gt; { property-name-5-0 = property-value-5-0, property-name-5-1 = property-value-5-1, property-name-5-2 = property-value-5-2, property-name-5-3 = property-value-5-3, property-name-5-4 = property-value-5-4, property-name-5-5 = property-value-5-5, property-name-5-6 = property-value-5-6, property-name-5-7 = property-value-5-7, property-name-5-8 = property-value-5-8, property-name-5-9 = property-value-5-9, node-5-3 = { ... }, node-5-4 = { ... }, node-5-9 = { ... }, node-5-1 = { ... }, node-5-2 = { ... }, node-5-7 = { ... }, node-5-8 = { ... }, node-5-5 = { ... }, node-5-0 = { ... }, node-5-6 = { ... } }
Tests run: 4, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 18.543 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.jackrabbit.oak.segment.upgrade.UpgradeIT
offRCUpgradesSegments(org.apache.jackrabbit.oak.segment.upgrade.UpgradeIT)  Time elapsed: 5.578 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: Segment version mismatch. Expected V_13, found V_12 expected:&amp;lt;V_13&amp;gt; but was:&amp;lt;V_12&amp;gt;
        at org.apache.jackrabbit.oak.segment.upgrade.UpgradeIT.checkSegmentVersion(UpgradeIT.java:143)
        at org.apache.jackrabbit.oak.segment.upgrade.UpgradeIT.offRCUpgradesSegments(UpgradeIT.java:109)


Results :

Failed tests:
  UpgradeIT.offRCUpgradesSegments:109-&amp;gt;checkSegmentVersion:143 Segment version mismatch. Expected V_13, found V_12 expected:&amp;lt;V_13&amp;gt; but was:&amp;lt;V_12&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13101295">OAK-6648</key>
            <summary>test failure seen in org.apache.jackrabbit.oak.segment.upgrade.UpgradeIT</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="frm">Francesco Mari</assignee>
                                    <reporter username="reschke">Julian Reschke</reporter>
                        <labels>
                            <label>test-failure</label>
                            <label>windows</label>
                    </labels>
                <created>Mon, 11 Sep 2017 15:03:38 +0000</created>
                <updated>Thu, 23 Nov 2017 08:10:33 +0000</updated>
                            <resolved>Mon, 18 Sep 2017 15:06:39 +0000</resolved>
                                                    <fixVersion>1.7.8</fixVersion>
                    <fixVersion>1.8.0</fixVersion>
                                    <component>segment-tar</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16161437" author="mduerig" created="Mon, 11 Sep 2017 15:25:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt;, is this reproducible at your end? Might this be a Windows issue, as I cannot reproduce it on osx nor linux.&lt;/p&gt;</comment>
                            <comment id="16161443" author="reschke" created="Mon, 11 Sep 2017 15:30:34 +0000"  >&lt;p&gt;Yes, it&apos;s likely Windows-only - and it is reproducible.&lt;/p&gt;</comment>
                            <comment id="16161472" author="mduerig" created="Mon, 11 Sep 2017 15:54:50 +0000"  >&lt;p&gt;Checked again, cannot reproduce at my end. I assume this has to do with the point in time when files can/cannot be deleted on Windows vs. other platforms. Will investigate once I have access to a Windows environment. &lt;/p&gt;

&lt;p&gt;Until then we should probably add a method to &lt;tt&gt;CIHelper&lt;/tt&gt; to detect a Windows environment and disable the test in that case. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt;, could you help out with finding a good way to detect whether the tests are running on Windows?&lt;/p&gt;</comment>
                            <comment id="16161557" author="catholicon" created="Mon, 11 Sep 2017 16:46:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mduerig&quot; class=&quot;user-hover&quot; rel=&quot;mduerig&quot;&gt;mduerig&lt;/a&gt;, &lt;tt&gt;IndexCopierTest&lt;/tt&gt; has:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void assumeNotWindows() {
        assumeTrue(!StandardSystemProperty.OS_NAME.value().toLowerCase().contains(&lt;span class=&quot;code-quote&quot;&gt;&quot;windows&quot;&lt;/span&gt;));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Maybe, we can put this in &lt;tt&gt;CIHelper&lt;/tt&gt; and use that one all over the place which require such check.&lt;/p&gt;</comment>
                            <comment id="16161811" author="mduerig" created="Mon, 11 Sep 2017 19:09:28 +0000"  >&lt;p&gt;Thanks for the pointer &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=catholicon&quot; class=&quot;user-hover&quot; rel=&quot;catholicon&quot;&gt;catholicon&lt;/a&gt;. I added a respective method to the &lt;tt&gt;CIHelpers&lt;/tt&gt; class replaced the ad-hoc ones.&lt;/p&gt;

&lt;p&gt;Also at. &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1808053&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1808053&amp;amp;view=rev&lt;/a&gt; I disabled the failing test on Windows. &lt;/p&gt;</comment>
                            <comment id="16161814" author="mduerig" created="Mon, 11 Sep 2017 19:10:12 +0000"  >&lt;p&gt;Unscheduling now until I have access to a Windows environment to reproduce.  &lt;/p&gt;</comment>
                            <comment id="16161852" author="reschke" created="Mon, 11 Sep 2017 19:39:22 +0000"  >&lt;p&gt;I appreciate that this unblocks my own development. Now we just need to make sure that we actually address these issues at some point of time.&lt;/p&gt;</comment>
                            <comment id="16162714" author="mduerig" created="Tue, 12 Sep 2017 09:17:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=edivad&quot; class=&quot;user-hover&quot; rel=&quot;edivad&quot;&gt;edivad&lt;/a&gt;, could you share a rational why this issue should block the release?&lt;/p&gt;</comment>
                            <comment id="16162914" author="edivad" created="Tue, 12 Sep 2017 13:17:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mduerig&quot; class=&quot;user-hover&quot; rel=&quot;mduerig&quot;&gt;mduerig&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;could you share a rational why this issue should block the release?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think we should not ship a load that is known to fail. Even if it&apos;s for a specific platform. It may be a test problem; but nevertheless I think it should be fixed.&lt;/p&gt;</comment>
                            <comment id="16162924" author="mduerig" created="Tue, 12 Sep 2017 13:23:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think we should not ship a load that is known to fail.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;But according to this reasoning all of these &lt;a href=&quot;https://issues.apache.org/jira/issues/?jql=project%20%3D%20OAK%20AND%20status%20in%20(Open%2C%20%22In%20Progress%22%2C%20Reopened)%20AND%20labels%20%3D%20test-failure&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/issues/?jql=project%20%3D%20OAK%20AND%20status%20in%20(Open%2C%20%22In%20Progress%22%2C%20Reopened)%20AND%20labels%20%3D%20test-failure&lt;/a&gt; (and probably many more) should be blockers. &lt;/p&gt;
</comment>
                            <comment id="16169909" author="frm" created="Mon, 18 Sep 2017 11:33:04 +0000"  >&lt;p&gt;A first finding is that initializing &lt;tt&gt;TemporaryFolder&lt;/tt&gt; with a &lt;tt&gt;File&lt;/tt&gt; composed of two or more path components fails the creation of the temporary folder. This seems to be &lt;a href=&quot;http://bugs.java.com/bugdatabase/view_bug.do?bug_id=8152272&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JDK-8152272&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="16170088" author="frm" created="Mon, 18 Sep 2017 14:33:04 +0000"  >&lt;p&gt;While building the project locally I also spotted &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6680&quot; title=&quot;Test failure: DocumentNodeStoreTest.disabledBranchesWithBackgroundWrite&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-6680&quot;&gt;&lt;del&gt;OAK-6680&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16170135" author="frm" created="Mon, 18 Sep 2017 15:06:39 +0000"  >&lt;p&gt;Fixed at r1808731.&lt;/p&gt;</comment>
                            <comment id="16185615" author="edivad" created="Fri, 29 Sep 2017 10:09:41 +0000"  >&lt;p&gt;Bulk close for 1.7.8&lt;/p&gt;</comment>
                            <comment id="16263940" author="reschke" created="Thu, 23 Nov 2017 08:04:53 +0000"  >&lt;p&gt;trunk: &lt;a href=&quot;http://svn.apache.org/r1808731&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1808731&lt;/a&gt; &lt;a href=&quot;http://svn.apache.org/r1808053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1808053&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13120406">OAK-6975</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 51 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ldzb:0000ia001f3km5r</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>