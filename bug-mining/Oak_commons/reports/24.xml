<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:46:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-3802] SessionMBean not getting registered due to MalformedObjectNameException</title>
                <link>https://issues.apache.org/jira/browse/OAK-3802</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;Due to changes done in &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-3477&quot; title=&quot;Make JMX Bean names predictable so they can be used in configurations.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-3477&quot;&gt;&lt;del&gt;OAK-3477&lt;/del&gt;&lt;/a&gt; SessionMBean is not getting registered as it contains &apos;,&apos; in the ObjectName. Unfortunately the exception thrown gets lost and this did not got detected so far&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;javax.management.MalformedObjectNameException: Invalid character in value: `,&apos;
	at javax.management.ObjectName.checkValue(ObjectName.java:1009)
	at javax.management.ObjectName.construct(ObjectName.java:725)
	at javax.management.ObjectName.&amp;lt;init&amp;gt;(ObjectName.java:1425)
	at org.apache.jackrabbit.oak.spi.whiteboard.WhiteboardUtils.registerMBean(WhiteboardUtils.java:79)
	at org.apache.jackrabbit.oak.spi.whiteboard.WhiteboardUtils.registerMBean(WhiteboardUtils.java:68)
	at org.apache.jackrabbit.oak.jcr.repository.RepositoryImpl$RegistrationTask.run(RepositoryImpl.java:523)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The name passed for ObjectName is &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{name=admin@session-11@Dec 17, 2015 9:57:11 AM, type=SessionStatistics}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12922590">OAK-3802</key>
            <summary>SessionMBean not getting registered due to MalformedObjectNameException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chetanm">Chetan Mehrotra</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                            <label>regresion</label>
                    </labels>
                <created>Thu, 17 Dec 2015 04:29:15 +0000</created>
                <updated>Wed, 2 Mar 2016 15:11:33 +0000</updated>
                            <resolved>Thu, 17 Dec 2015 05:56:53 +0000</resolved>
                                    <version>1.3.11</version>
                                    <fixVersion>1.3.13</fixVersion>
                    <fixVersion>1.4</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15061451" author="chetanm" created="Thu, 17 Dec 2015 04:32:44 +0000"  >&lt;p&gt;The issue is in implementation of &lt;tt&gt;quoteIfRequired&lt;/tt&gt;. This does handle case if value contains char like &apos;,&apos;, &apos;=&apos;. &lt;/p&gt;</comment>
                            <comment id="15061553" author="chetanm" created="Thu, 17 Dec 2015 05:56:53 +0000"  >&lt;p&gt;Fixed with 1720487&lt;/p&gt;

&lt;p&gt;There is still one problem that any exception happening within the scheduled jobs do not get detected (logged) due to &lt;a href=&quot;http://stackoverflow.com/q/1660834/1035417&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;way ScheduledExecutor works&lt;/a&gt;. Handling that would require bit wider change.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mduerig&quot; class=&quot;user-hover&quot; rel=&quot;mduerig&quot;&gt;mduerig&lt;/a&gt; Thoughts? Also would be good if you can have a look at commit done in &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/commit/18e4af1c66bcbef18f034471d23b6f9eab43631c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;1720487&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15061885" author="mduerig" created="Thu, 17 Dec 2015 10:53:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;exception happening within the scheduled jobs do not get detected&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The preferred way is to have the tasks to handle their own exception and never leak any out. If this is not possible it indicates that the exception is indeed not so exceptional but kind of expected and should probably better be part of the return value. One way of doing this is through futures. Luckily the scheduler returns futures. Unluckily we currently ignore this return values. Also unluckily Java&apos;s futures a pretty useless. &lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;look at commit done in 1720487&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t particularly like &lt;tt&gt;JmxUtil&lt;/tt&gt;. Isn&apos;t there a library for this? (Read: why is the Java class library soooo lacking).&lt;/p&gt;</comment>
                            <comment id="15061905" author="chetanm" created="Thu, 17 Dec 2015 11:08:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;Unluckily we currently ignore this return values. Also unluckily Java&apos;s futures a pretty useless.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I saw that coming!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I don&apos;t particularly like JmxUtil. Isn&apos;t there a library for this? (Read: why is the Java class library soooo lacking).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well looks like our need of &lt;tt&gt;quoteOnlyIfRequired&lt;/tt&gt; is very specific. So had to come up with our own utility&lt;/p&gt;</comment>
                            <comment id="15087401" author="edivad" created="Thu, 7 Jan 2016 14:14:43 +0000"  >&lt;p&gt;Bulk close for 1.3.13&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12902618">OAK-3477</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 45 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2q0l3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>