diff --git a/maven-project/src/test/java/org/apache/maven/project/DefaultMavenProjectBuilderTest.java b/maven-project/src/test/java/org/apache/maven/project/DefaultMavenProjectBuilderTest.java
index 85405a80b..425f59a77 100644
--- a/maven-project/src/test/java/org/apache/maven/project/DefaultMavenProjectBuilderTest.java
+++ b/maven-project/src/test/java/org/apache/maven/project/DefaultMavenProjectBuilderTest.java
@@ -28,6 +28,7 @@ import java.util.Properties;
 import org.apache.maven.artifact.repository.ArtifactRepository;
 import org.apache.maven.artifact.repository.DefaultArtifactRepository;
 import org.apache.maven.artifact.repository.layout.ArtifactRepositoryLayout;
+import org.apache.maven.model.Plugin;
 import org.apache.maven.model.Profile;
 import org.apache.maven.model.Repository;
 import org.apache.maven.profiles.DefaultProfileManager;
@@ -161,6 +162,17 @@ public class DefaultMavenProjectBuilderTest
         getProject( f2 );
     }
     
+     public void testDuplicatePluginDefinitionsMerged()
+         throws Exception
+     {
+         File f1 = getTestFile( "src/test/resources/projects/duplicate-plugins-merged-pom.xml" );
+ 
+         MavenProject project = getProject( f1 );
+ 
+         assertEquals( 2, ( (Plugin) project.getBuildPlugins().get( 0 ) ).getDependencies().size() );
+     }
+ 
+	
     protected ArtifactRepository getLocalRepository()
         throws Exception
     {
diff --git a/maven-project/src/test/java/org/apache/maven/project/ModelUtilsTest.java b/maven-project/src/test/java/org/apache/maven/project/ModelUtilsTest.java
index eca722ae8..d99be75da 100644
--- a/maven-project/src/test/java/org/apache/maven/project/ModelUtilsTest.java
+++ b/maven-project/src/test/java/org/apache/maven/project/ModelUtilsTest.java
@@ -37,6 +37,33 @@ public class ModelUtilsTest
     extends TestCase
 {
     
+    public void testShouldUseMainPluginDependencyVersionOverManagedDepVersion()
+    {
+        Plugin mgtPlugin = createPlugin( "group", "artifact", "1", Collections.EMPTY_MAP );
+        Dependency mgtDep = createDependency( "g", "a", "2" );
+        mgtPlugin.addDependency( mgtDep );
+
+        Plugin plugin = createPlugin( "group", "artifact", "1", Collections.EMPTY_MAP );
+        Dependency dep = createDependency( "g", "a", "1" );
+        plugin.addDependency( dep );
+
+        ModelUtils.mergePluginDefinitions( plugin, mgtPlugin, false );
+
+        assertEquals( dep.getVersion(), ((Dependency) plugin.getDependencies().get( 0 ) ).getVersion() );
+    }
+
+    private Dependency createDependency( String gid,
+                                         String aid,
+                                         String ver )
+    {
+        Dependency dep = new Dependency();
+        dep.setGroupId( gid );
+        dep.setArtifactId( aid );
+        dep.setVersion( ver );
+
+        return dep;
+    }
+
     public void testShouldNotInheritPluginWithInheritanceSetToFalse()
     {
         PluginContainer parent = new PluginContainer();
@@ -403,4 +430,29 @@ public class ModelUtilsTest
         Dependency dep2 = (Dependency) child.getDependencies().get( 0 );
         assertEquals( dep.getManagementKey(), dep2.getManagementKey() );
     }
+
+    public void testShouldMergeTwoPluginDependenciesOnMergeDupePluginDefs()
+    {
+        PluginContainer first = new PluginContainer();
+        Plugin fPlugin = createPlugin( "g", "a", "1", Collections.EMPTY_MAP );
+        Dependency fDep = new Dependency();
+        fDep.setGroupId( "group" );
+        fDep.setArtifactId( "artifact" );
+        fDep.setVersion( "1" );
+
+        first.addPlugin( fPlugin );
+        fPlugin.addDependency( fDep );
+
+        Plugin sPlugin = createPlugin( "g", "a", "1", Collections.EMPTY_MAP );
+        Dependency sDep = new Dependency();
+        sDep.setGroupId( "group" );
+        sDep.setArtifactId( "artifact2" );
+        sDep.setVersion( "1" );
+        first.addPlugin( sPlugin );
+        sPlugin.addDependency( sDep );
+
+        ModelUtils.mergeDuplicatePluginDefinitions( first );
+
+        assertEquals( 2, ((Plugin)first.getPlugins().get( 0 ) ).getDependencies().size() );
+    }
 }
diff --git a/maven-project/src/test/resources/projects/duplicate-plugins-merged-pom.xml b/maven-project/src/test/resources/projects/duplicate-plugins-merged-pom.xml
new file mode 100644
index 000000000..9cbbd12df
--- /dev/null
+++ b/maven-project/src/test/resources/projects/duplicate-plugins-merged-pom.xml
@@ -0,0 +1,32 @@
+<project>
+    <modelVersion>4.0.0</modelVersion>
+    <groupId>tests.project</groupId>
+    <artifactId>duplicate-plugin-defs-merged</artifactId>
+    <version>1</version>
+    
+    <build>
+      <plugins>
+        <plugin>
+          <artifactId>maven-compiler-plugin</artifactId>
+          <dependencies>
+            <dependency>
+              <groupId>group</groupId>
+              <artifactId>first</artifactId>
+              <version>1</version>
+            </dependency>
+          </dependencies>
+        </plugin>
+        <plugin>
+          <artifactId>maven-compiler-plugin</artifactId>
+          <dependencies>
+            <dependency>
+              <groupId>group</groupId>
+              <artifactId>second</artifactId>
+              <version>1</version>
+            </dependency>
+          </dependencies>
+        </plugin>
+      </plugins>
+    </build>
+    
+</project>
