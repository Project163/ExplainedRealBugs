diff --git a/maven-project/src/test/java/org/apache/maven/profiles/DefaultProfileManagerTest.java b/maven-project/src/test/java/org/apache/maven/profiles/DefaultProfileManagerTest.java
index 9c9cbbc66..6f97f3a77 100644
--- a/maven-project/src/test/java/org/apache/maven/profiles/DefaultProfileManagerTest.java
+++ b/maven-project/src/test/java/org/apache/maven/profiles/DefaultProfileManagerTest.java
@@ -20,11 +20,9 @@ package org.apache.maven.profiles;
  */
 
 import java.io.File;
-import java.net.URL;
+import java.io.IOException;
 import java.util.List;
 
-import junit.framework.TestCase;
-
 import org.apache.maven.model.Activation;
 import org.apache.maven.model.ActivationOS;
 import org.apache.maven.model.ActivationProperty;
@@ -32,7 +30,6 @@ import org.apache.maven.model.Profile;
 import org.apache.maven.profiles.activation.ProfileActivationException;
 import org.apache.maven.settings.Settings;
 import org.codehaus.plexus.PlexusTestCase;
-import org.codehaus.plexus.util.StringUtils;
 
 public class DefaultProfileManagerTest
     extends PlexusTestCase
@@ -242,7 +239,7 @@ public class DefaultProfileManagerTest
     }
 
     public void testFileActivationProfile()
-        throws ProfileActivationException
+        throws ProfileActivationException, IOException
     {
         Profile osActivated = new Profile();
         osActivated.setId( "os-profile" );
@@ -251,20 +248,9 @@ public class DefaultProfileManagerTest
 
         org.apache.maven.model.ActivationFile activationFile = new org.apache.maven.model.ActivationFile();
 
-        // convert the class into the path form of the classpath
-        String classPathForm = "/" + TestCase.class.getName().replace( '.', '/' ) + ".class";
-        // get the location to the class and convert to a string
-        URL url = this.getClass().getResource( classPathForm );
-        
-        //take only the left part
-        String[] parts = url.getPath().split( "!" );
-        
-        //remove file from the beginning.
-        String path = StringUtils.stripStart( parts[0],"file://" );
-        
-        path = new File(path).getAbsolutePath();
-        // Assume that junit exists in the local repo
-        activationFile.setExists( path );
+        File f = File.createTempFile( "activationTest", null );
+        f.createNewFile();
+        activationFile.setExists( f.getAbsolutePath() );
 
         fileActivation.setFile( activationFile );
 
