diff --git a/maven-project/src/test/java/org/apache/maven/project/inheritance/t04/ProjectInheritanceTest.java b/maven-project/src/test/java/org/apache/maven/project/inheritance/t04/ProjectInheritanceTest.java
new file mode 100644
index 000000000..294d1db1e
--- /dev/null
+++ b/maven-project/src/test/java/org/apache/maven/project/inheritance/t04/ProjectInheritanceTest.java
@@ -0,0 +1,83 @@
+package org.apache.maven.project.inheritance.t04;
+
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *  http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+
+import java.io.File;
+import java.util.Set;
+import java.util.Iterator;
+
+import org.apache.maven.project.MavenProject;
+import org.apache.maven.project.inheritance.AbstractProjectInheritanceTestCase;
+import org.apache.maven.artifact.Artifact;
+
+/**
+ * Verifies the version of a dependency listed in a parent's
+ * dependencyManagement section is chosen over another version of the same
+ * dependency, listed transitively.	
+ *
+ * @author <a href="mailto:pschneider@gmail.com">Patrick Schneider</a>
+ * @version $Id$
+ */
+public class ProjectInheritanceTest
+    extends AbstractProjectInheritanceTestCase
+{
+    // ----------------------------------------------------------------------
+    //
+    // p1 inherits from p0
+    // p0 inhertis from super model
+    //
+    // or we can show it graphically as:
+    //
+    // p1 ---> p0 --> super model
+    //
+    // p1 has a depMgmt section that specifies versions 1.0 of jars "a" & "b"
+    // jar "a" has a transitive dependency on 2.0 of jar "b", but maven should
+    // prefer to use version 1.0.
+    //
+    // ----------------------------------------------------------------------
+
+    public void testDependencyManagementOverridesTransitiveDependencyVersion()
+        throws Exception
+    {
+        File localRepo = getLocalRepositoryPath();
+        File pom0 = new File( localRepo, "p0/pom.xml" );
+        File pom0Basedir = pom0.getParentFile();
+        File pom1 = new File( pom0Basedir, "p1/pom.xml" );
+
+        // load the child project, which inherits from p0...
+        MavenProject project0 = getProjectWithDependencies( pom0 );
+        MavenProject project1 = getProjectWithDependencies( pom1 );
+
+        assertEquals( pom0Basedir, project1.getParent().getBasedir() );
+        Set set = project1.getArtifacts();
+        assertNotNull("No artifacts", set);
+        assertTrue("No Artifacts", set.size() > 0);
+        assertTrue("Set size should be 3, is " + set.size(), set.size() == 3);
+        
+        Iterator iter = set.iterator();
+        while (iter.hasNext()) {
+            Artifact artifact = (Artifact)iter.next();
+            System.out.println("Artifact: " + artifact.getDependencyConflictId() + " " + artifact.getVersion() +
+              " Optional=" + (artifact.isOptional() ? "true" : "false"));
+            assertTrue("Incorrect version for " + artifact.getDependencyConflictId(), artifact.getVersion().equals("1.0"));
+        }
+
+    }
+}
\ No newline at end of file
diff --git a/maven-project/src/test/java/org/apache/maven/project/inheritance/t05/ProjectInheritanceTest.java b/maven-project/src/test/java/org/apache/maven/project/inheritance/t05/ProjectInheritanceTest.java
new file mode 100644
index 000000000..a0adb4863
--- /dev/null
+++ b/maven-project/src/test/java/org/apache/maven/project/inheritance/t05/ProjectInheritanceTest.java
@@ -0,0 +1,79 @@
+package org.apache.maven.project.inheritance.t05;
+
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *  http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+
+import java.io.File;
+import java.util.Set;
+import java.util.Iterator;
+
+import org.apache.maven.project.MavenProject;
+import org.apache.maven.project.inheritance.AbstractProjectInheritanceTestCase;
+import org.apache.maven.artifact.Artifact;
+
+/**
+ * A test which demonstrates maven's dependency management
+ *
+ * @author <a href="rgoers@apache.org">Ralph Goers</a>
+ * @version $Id$
+ */
+public class ProjectInheritanceTest
+    extends AbstractProjectInheritanceTestCase
+{
+    // ----------------------------------------------------------------------
+    //
+    // p1 inherits from p0
+    // p0 inhertis from super model
+    //
+    // or we can show it graphically as:
+    //
+    // p1 ---> p0 --> super model
+    //
+    // ----------------------------------------------------------------------
+
+    public void testDependencyManagement()
+        throws Exception
+    {
+        File localRepo = getLocalRepositoryPath();
+        File pom0 = new File( localRepo, "p0/pom.xml" );
+
+        File pom0Basedir = pom0.getParentFile();
+
+        File pom1 = new File( pom0Basedir, "p1/pom.xml" );
+
+        // load everything...
+        MavenProject project0 = getProjectWithDependencies( pom0 );
+        MavenProject project1 = getProjectWithDependencies( pom1 );
+
+        assertEquals( pom0Basedir, project1.getParent().getBasedir() );
+        Set set = project1.getArtifacts();
+        assertNotNull("No artifacts", set);
+        assertTrue("No Artifacts", set.size() > 0);
+        Iterator iter = set.iterator();
+
+        while (iter.hasNext())
+        {
+            Artifact artifact = (Artifact)iter.next();
+            System.out.println("Artifact: " + artifact.getDependencyConflictId() + " " +
+                    artifact.getVersion() + " Scope: " + artifact.getScope());
+            assertTrue("Incorrect version for " + artifact.getDependencyConflictId(), artifact.getVersion().equals("1.0"));
+        }
+
+    }
+}
diff --git a/maven-project/src/test/java/org/apache/maven/project/inheritance/t06/ProjectInheritanceTest.java b/maven-project/src/test/java/org/apache/maven/project/inheritance/t06/ProjectInheritanceTest.java
new file mode 100644
index 000000000..147443000
--- /dev/null
+++ b/maven-project/src/test/java/org/apache/maven/project/inheritance/t06/ProjectInheritanceTest.java
@@ -0,0 +1,81 @@
+package org.apache.maven.project.inheritance.t06;
+
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *  http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+
+import java.io.File;
+import java.util.Set;
+import java.util.Iterator;
+
+import org.apache.maven.project.MavenProject;
+import org.apache.maven.project.inheritance.AbstractProjectInheritanceTestCase;
+import org.apache.maven.artifact.Artifact;
+
+/**
+ * A test which demonstrates maven's dependency management
+ *
+ * @author <a href="rgoers@apache.org">Ralph Goers</a>
+ * @version $Id$
+ */
+public class ProjectInheritanceTest
+    extends AbstractProjectInheritanceTestCase
+{
+    // ----------------------------------------------------------------------
+    //
+    // p1 inherits from p0
+    // p0 inhertis from super model
+    //
+    // or we can show it graphically as:
+    //
+    // p1 ---> p0 --> super model
+    //
+    // ----------------------------------------------------------------------
+
+    public void testDependencyManagement()
+        throws Exception
+    {
+        File localRepo = getLocalRepositoryPath();
+        File pom0 = new File( localRepo, "p0/pom.xml" );
+
+        File pom0Basedir = pom0.getParentFile();
+
+        File pom1 = new File( pom0Basedir, "p1/pom.xml" );
+
+        // load everything...
+        MavenProject project0 = getProjectWithDependencies( pom0 );
+        MavenProject project1 = getProjectWithDependencies( pom1 );
+
+        assertEquals( pom0Basedir, project1.getParent().getBasedir() );
+        System.out.println("Project " + project1.getId() + " " + project1);
+        Set set = project1.getArtifacts();
+        assertNotNull("No artifacts", set);
+        assertTrue("No Artifacts", set.size() > 0);
+        Iterator iter = set.iterator();
+        assertTrue("Set size should be 4, is " + set.size(), set.size() == 4);
+
+        while (iter.hasNext())
+        {
+            Artifact artifact = (Artifact)iter.next();
+            System.out.println("Artifact: " + artifact.getDependencyConflictId() + " " + artifact.getVersion() +
+              " Optional=" + (artifact.isOptional() ? "true" : "false"));
+            assertTrue("Incorrect version for " + artifact.getDependencyConflictId(), artifact.getVersion().equals("1.0"));
+        }
+
+    }
+}
diff --git a/maven-project/src/test/java/org/apache/maven/project/inheritance/t07/ProjectInheritanceTest.java b/maven-project/src/test/java/org/apache/maven/project/inheritance/t07/ProjectInheritanceTest.java
new file mode 100644
index 000000000..5fc083112
--- /dev/null
+++ b/maven-project/src/test/java/org/apache/maven/project/inheritance/t07/ProjectInheritanceTest.java
@@ -0,0 +1,91 @@
+package org.apache.maven.project.inheritance.t07;
+
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *  http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+
+import java.io.File;
+import java.util.List;
+import java.util.Set;
+import java.util.Iterator;
+
+import org.apache.maven.model.Build;
+import org.apache.maven.model.MailingList;
+import org.apache.maven.model.Plugin;
+import org.apache.maven.model.PluginExecution;
+import org.apache.maven.model.Dependency;
+import org.apache.maven.project.MavenProject;
+import org.apache.maven.project.inheritance.AbstractProjectInheritanceTestCase;
+import org.apache.maven.artifact.Artifact;
+import org.codehaus.plexus.util.xml.Xpp3Dom;
+import org.codehaus.plexus.logging.LoggerManager;
+import org.codehaus.plexus.logging.Logger;
+
+/**
+ * A test which demonstrates maven's dependency management
+ *
+ * @author <a href="mailto:jason@maven.org">Jason van Zyl</a>
+ * @version $Id$
+ */
+public class ProjectInheritanceTest
+    extends AbstractProjectInheritanceTestCase
+{
+    // ----------------------------------------------------------------------
+    //
+    // p1 inherits from p0
+    // p0 inhertis from super model
+    //
+    // or we can show it graphically as:
+    //
+    // p1 ---> p0 --> super model
+    //
+    // ----------------------------------------------------------------------
+
+    public void testDependencyManagement()
+        throws Exception
+    {
+        File localRepo = getLocalRepositoryPath();
+        File pom0 = new File( localRepo, "p0/pom.xml" );
+
+        File pom0Basedir = pom0.getParentFile();
+
+        File pom1 = new File( pom0Basedir, "p1/pom.xml" );
+
+        // load everything...
+        MavenProject project0 = getProjectWithDependencies( pom0 );
+        MavenProject project1 = getProjectWithDependencies( pom1 );
+
+        assertEquals( pom0Basedir, project1.getParent().getBasedir() );
+        System.out.println("Project " + project1.getId() + " " + project1);
+        Set set = project1.getArtifacts();
+        assertNotNull("No artifacts", set);
+        assertTrue("No Artifacts", set.size() > 0);
+        Iterator iter = set.iterator();
+        assertTrue("Set size should be 3, is " + set.size(), set.size() == 3);
+        
+        while (iter.hasNext())
+        {
+            Artifact artifact = (Artifact)iter.next();
+            assertFalse("", artifact.getArtifactId().equals("maven-test-d"));
+            System.out.println("Artifact: " + artifact.getDependencyConflictId() + " " + artifact.getVersion() +
+              " Optional=" + (artifact.isOptional() ? "true" : "false"));
+            assertTrue("Incorrect version for " + artifact.getDependencyConflictId(), artifact.getVersion().equals("1.0"));
+        }
+
+    }
+}
diff --git a/maven-project/src/test/java/org/apache/maven/project/inheritance/t08/ProjectInheritanceTest.java b/maven-project/src/test/java/org/apache/maven/project/inheritance/t08/ProjectInheritanceTest.java
new file mode 100644
index 000000000..94a021ddc
--- /dev/null
+++ b/maven-project/src/test/java/org/apache/maven/project/inheritance/t08/ProjectInheritanceTest.java
@@ -0,0 +1,81 @@
+package org.apache.maven.project.inheritance.t08;
+
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *  http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+
+import java.io.File;
+import java.util.Set;
+import java.util.Iterator;
+
+import org.apache.maven.project.MavenProject;
+import org.apache.maven.project.inheritance.AbstractProjectInheritanceTestCase;
+import org.apache.maven.artifact.Artifact;
+
+/**
+ * A test which demonstrates maven's dependency management
+ *
+ * @author <a href="rgoers@apache.org">Ralph Goers</a>
+ * @version $Id$
+ */
+public class ProjectInheritanceTest
+    extends AbstractProjectInheritanceTestCase
+{
+    // ----------------------------------------------------------------------
+    //
+    // p1 inherits from p0
+    // p0 inhertis from super model
+    //
+    // or we can show it graphically as:
+    //
+    // p1 ---> p0 --> super model
+    //
+    // ----------------------------------------------------------------------
+
+    public void testDependencyManagement()
+        throws Exception
+    {
+        File localRepo = getLocalRepositoryPath();
+        File pom0 = new File( localRepo, "p0/pom.xml" );
+
+        File pom0Basedir = pom0.getParentFile();
+
+        File pom1 = new File( pom0Basedir, "p1/pom.xml" );
+
+        // load everything...
+        MavenProject project0 = getProjectWithDependencies( pom0 );
+        MavenProject project1 = getProjectWithDependencies( pom1 );
+
+        assertEquals( pom0Basedir, project1.getParent().getBasedir() );
+        System.out.println("Project " + project1.getId() + " " + project1);
+        Set set = project1.getArtifacts();
+        assertNotNull("No artifacts", set);
+        assertTrue("No Artifacts", set.size() > 0);
+        Iterator iter = set.iterator();
+        assertTrue("Set size should be 4, is " + set.size(), set.size() == 4);
+        
+        while (iter.hasNext())
+        {
+            Artifact artifact = (Artifact)iter.next();
+            System.out.println("Artifact: " + artifact.getDependencyConflictId() + " " + artifact.getVersion() +
+              " Optional=" + (artifact.isOptional() ? "true" : "false"));
+            assertTrue("Incorrect version for " + artifact.getDependencyConflictId(), artifact.getVersion().equals("1.0"));
+        }
+
+    }
+}
diff --git a/maven-project/src/test/java/org/apache/maven/project/inheritance/t09/ProjectInheritanceTest.java b/maven-project/src/test/java/org/apache/maven/project/inheritance/t09/ProjectInheritanceTest.java
new file mode 100644
index 000000000..d858098bd
--- /dev/null
+++ b/maven-project/src/test/java/org/apache/maven/project/inheritance/t09/ProjectInheritanceTest.java
@@ -0,0 +1,133 @@
+package org.apache.maven.project.inheritance.t09;
+
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *  http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+import java.io.File;
+import java.util.Collection;
+import java.util.List;
+import java.util.Map;
+import java.util.Iterator;
+
+import org.apache.maven.model.Build;
+import org.apache.maven.model.MailingList;
+import org.apache.maven.model.Plugin;
+import org.apache.maven.model.PluginExecution;
+import org.apache.maven.model.Dependency;
+import org.apache.maven.project.MavenProject;
+import org.apache.maven.project.inheritance.AbstractProjectInheritanceTestCase;
+import org.apache.maven.artifact.Artifact;
+import org.codehaus.plexus.util.xml.Xpp3Dom;
+import org.codehaus.plexus.logging.LoggerManager;
+import org.codehaus.plexus.logging.Logger;
+
+/**
+ * Verifies exclusions listed in dependencyManagement are valid for
+ * transitive dependencies.
+ *
+ * @author <a href="mailto:pschneider@gmail.com">Patrick Schneider</a>
+ * @version $Id$
+ */
+public class ProjectInheritanceTest
+    extends AbstractProjectInheritanceTestCase
+{
+    // ----------------------------------------------------------------------
+    //
+    // p1 inherits from p0
+    // p0 inhertis from super model
+    //
+    // or we can show it graphically as:
+    //
+    // p1 ---> p0 --> super model
+	//
+    // ----------------------------------------------------------------------
+
+    /**
+     * How the test project is set up:
+     * 
+     * 1. dependencyManagement lists dependencies on a & b,
+     *    with an exclusion on c in b.
+     * 2. the child project lists a dependency on project a only
+     * 3. a depends on b (which is transitive to the child project),
+     *    and b depends on c.
+     *
+     * We should see that the resulting size of collected artifacts is two:
+     * a & b only.
+     */
+    public void testDependencyManagementExclusionsExcludeTransitively()
+        throws Exception
+    {
+        File localRepo = getLocalRepositoryPath();
+
+        File pom0 = new File( localRepo, "p0/pom.xml" );
+        File pom0Basedir = pom0.getParentFile();
+        File pom1 = new File( pom0Basedir, "p1/pom.xml" );
+
+        // load the child project, which inherits from p0...
+        MavenProject project0 = getProjectWithDependencies( pom0 );
+        MavenProject project1 = getProjectWithDependencies( pom1 );
+
+        assertEquals( pom0Basedir, project1.getParent().getBasedir() );
+        System.out.println("Project " + project1.getId() + " " + project1);
+        Map map = project1.getArtifactMap();
+
+        assertNotNull("No artifacts", map);
+        assertTrue("No Artifacts", map.size() > 0);
+        assertTrue("Set size should be 2, is " + map.size(), map.size() == 2);
+        
+        assertTrue("maven-test-a is not in the project", map.containsKey( "maven-test:maven-test-a" ));
+        assertTrue("maven-test-b is not in the project", map.containsKey( "maven-test:maven-test-b" ));
+
+    }
+
+    /**
+     * Setup exactly the same as the above test, except that the child project
+     * now depends upon d, which has a transitive dependency on c.  Even though
+     * we did list an exclusion on c, it was only from within the context of
+     * project b.  We will pick up project c in this case because no
+     * restrictions were placed on d.  This demonstrates that a, b, c, & d will
+     * all be collected.
+     * 
+     * @throws Exception
+     */
+    public void testDependencyManagementExclusionDoesNotOverrideGloballyForTransitives()
+        throws Exception
+    {
+        File localRepo = getLocalRepositoryPath();
+
+        File pom0 = new File( localRepo, "p0/pom.xml" );
+        File pom0Basedir = pom0.getParentFile();
+        File pom2 = new File( pom0Basedir, "p2/pom.xml" );
+
+        // load the child project, which inherits from p0...
+        MavenProject project0 = getProjectWithDependencies( pom0 );
+        MavenProject project2 = getProjectWithDependencies( pom2 );
+
+        assertEquals( pom0Basedir, project2.getParent().getBasedir() );
+        System.out.println( "Project " + project2.getId() + " " + project2 );
+        Map map = project2.getArtifactMap();
+        assertNotNull( "No artifacts", map );
+        assertTrue( "No Artifacts", map.size() > 0 );
+        assertTrue( "Set size should be 4, is " + map.size(), map.size() == 4 );
+
+        assertTrue( "maven-test-a is not in the project", map.containsKey( "maven-test:maven-test-a" ) );
+        assertTrue( "maven-test-b is not in the project", map.containsKey( "maven-test:maven-test-b" ) );
+        assertTrue( "maven-test-c is not in the project", map.containsKey( "maven-test:maven-test-c" ) );
+        assertTrue( "maven-test-d is not in the project", map.containsKey( "maven-test:maven-test-d" ) );
+    }
+}
\ No newline at end of file
diff --git a/maven-project/src/test/java/org/apache/maven/project/inheritance/t10/ProjectInheritanceTest.java b/maven-project/src/test/java/org/apache/maven/project/inheritance/t10/ProjectInheritanceTest.java
new file mode 100644
index 000000000..25c5d6a9c
--- /dev/null
+++ b/maven-project/src/test/java/org/apache/maven/project/inheritance/t10/ProjectInheritanceTest.java
@@ -0,0 +1,101 @@
+package org.apache.maven.project.inheritance.t10;
+
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *  http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+
+import java.io.File;
+import java.util.Collection;
+import java.util.List;
+import java.util.Map;
+import java.util.Iterator;
+
+import org.apache.maven.model.Build;
+import org.apache.maven.model.MailingList;
+import org.apache.maven.model.Plugin;
+import org.apache.maven.model.PluginExecution;
+import org.apache.maven.model.Dependency;
+import org.apache.maven.project.MavenProject;
+import org.apache.maven.project.inheritance.AbstractProjectInheritanceTestCase;
+import org.apache.maven.artifact.Artifact;
+import org.codehaus.plexus.util.xml.Xpp3Dom;
+import org.codehaus.plexus.logging.LoggerManager;
+import org.codehaus.plexus.logging.Logger;
+
+/**
+ * Verifies scope inheritence of direct and transitive dependencies.
+ * 
+ * Should show three behaviors:
+ * 
+ * 1. dependencyManagement should override the scope of transitive dependencies.
+ * 2. Direct dependencies should override the scope of dependencyManagement.
+ * 3. Direct dependencies should inherit scope from dependencyManagement when
+ *    they do not explicitly state a scope.
+ *
+ * @author <a href="mailto:pschneider@gmail.com">Patrick Schneider</a>
+ * @version $Id$
+ */
+public class ProjectInheritanceTest
+    extends AbstractProjectInheritanceTestCase
+{
+    // ----------------------------------------------------------------------
+    //
+    // p1 inherits from p0
+    // p0 inhertis from super model
+    //
+    // or we can show it graphically as:
+    //
+    // p1 ---> p0 --> super model
+	//
+    // ----------------------------------------------------------------------
+
+    public void testDependencyManagementOverridesTransitiveDependencyVersion()
+        throws Exception
+    {
+        File localRepo = getLocalRepositoryPath();
+
+        File pom0 = new File( localRepo, "p0/pom.xml" );
+        File pom0Basedir = pom0.getParentFile();
+        File pom1 = new File( pom0Basedir, "p1/pom.xml" );
+
+        // load the child project, which inherits from p0...
+        MavenProject project0 = getProjectWithDependencies( pom0 );
+        MavenProject project1 = getProjectWithDependencies( pom1 );
+
+        assertEquals( pom0Basedir, project1.getParent().getBasedir() );
+        System.out.println("Project " + project1.getId() + " " + project1);
+        Map map = project1.getArtifactMap();
+        assertNotNull("No artifacts", map);
+        assertTrue("No Artifacts", map.size() > 0);
+        assertTrue("Set size should be 3, is " + map.size(), map.size() == 3);
+        
+        Artifact a = (Artifact) map.get("maven-test:maven-test-a");
+        Artifact b = (Artifact) map.get("maven-test:maven-test-b");
+        Artifact c = (Artifact) map.get("maven-test:maven-test-c");
+        
+        // inherited from depMgmt
+        assertTrue("Incorrect scope for " + a.getDependencyConflictId(), a.getScope().equals("test"));
+        
+        // transitive dep, overridden b depMgmt
+        assertTrue("Incorrect scope for " + b.getDependencyConflictId(), b.getScope().equals("runtime"));
+        
+        // direct dep, overrides depMgmt
+        assertTrue("Incorrect scope for " + c.getDependencyConflictId(), c.getScope().equals("runtime"));
+
+    }
+}
\ No newline at end of file
diff --git a/maven-project/src/test/resources/dependencyManagement-pom.xml b/maven-project/src/test/resources/dependencyManagement-pom.xml
new file mode 100644
index 000000000..0ac9b461d
--- /dev/null
+++ b/maven-project/src/test/resources/dependencyManagement-pom.xml
@@ -0,0 +1,41 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven</groupId>
+  <artifactId>maven-core</artifactId>
+  <name>Maven</name>
+  <version>2.0-SNAPSHOT</version>
+  <dependencyManagement>
+    <dependencies>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-b</artifactId>
+        <version>1.0</version>
+      </dependency>
+    </dependencies>
+  </dependencyManagement>
+  <build>
+    <plugins>
+      <plugin>
+        <artifactId>maven-plexus-plugin</artifactId>
+        <version>1.0</version>
+        <configuration>
+          <plexusConfiguration>src/conf/plexus.conf</plexusConfiguration>
+          <plexusConfigurationPropertiesFile>src/conf/plexus.properties</plexusConfigurationPropertiesFile>
+          <plexusApplicationName>Continuum</plexusApplicationName>
+        </configuration>
+        <executions>
+          <execution>
+            <goals>
+              <goal>plexus:runtime</goal>
+            </goals>
+            <configuration>
+              <plexusApplicationName>ContinuumPro</plexusApplicationName>
+            </configuration>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+</project>
diff --git a/maven-project/src/test/resources/inheritance-repo/t04/maven-test/jars/maven-test-a-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/jars/maven-test-a-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/jars/maven-test-a-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t04/maven-test/jars/maven-test-b-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/jars/maven-test-b-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/jars/maven-test-b-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t04/maven-test/jars/maven-test-b-2.0.jar b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/jars/maven-test-b-2.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/jars/maven-test-b-2.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t04/maven-test/jars/maven-test-c-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/jars/maven-test-c-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/jars/maven-test-c-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t04/maven-test/jars/maven-test-c-2.0.jar b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/jars/maven-test-c-2.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/jars/maven-test-c-2.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t04/maven-test/poms/maven-test-a-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/poms/maven-test-a-1.0.pom
new file mode 100644
index 000000000..9661de08d
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/poms/maven-test-a-1.0.pom
@@ -0,0 +1,21 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-a</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+  <repositories>
+    <repository>
+      <id>central</id>
+      <name>Fake Maven Central Repository</name>
+      <url>file://dummy</url>
+    </repository>
+  </repositories>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-b</artifactId>
+      <version>2.0</version>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t04/maven-test/poms/maven-test-b-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/poms/maven-test-b-1.0.pom
new file mode 100644
index 000000000..c173c663d
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/poms/maven-test-b-1.0.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-b</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t04/maven-test/poms/maven-test-b-2.0.pom b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/poms/maven-test-b-2.0.pom
new file mode 100644
index 000000000..b2f1d976c
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/poms/maven-test-b-2.0.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-b</artifactId>
+  <packaging>jar</packaging>
+  <version>2.0</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t04/maven-test/poms/maven-test-c-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/poms/maven-test-c-1.0.pom
new file mode 100644
index 000000000..1f0497860
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/poms/maven-test-c-1.0.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-c</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t04/maven-test/poms/maven-test-c-2.0.pom b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/poms/maven-test-c-2.0.pom
new file mode 100644
index 000000000..b2f1d976c
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t04/maven-test/poms/maven-test-c-2.0.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-b</artifactId>
+  <packaging>jar</packaging>
+  <version>2.0</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t04/p0/p1/pom.xml b/maven-project/src/test/resources/inheritance-repo/t04/p0/p1/pom.xml
new file mode 100644
index 000000000..a853118b9
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t04/p0/p1/pom.xml
@@ -0,0 +1,41 @@
+<project>
+  <parent>
+    <artifactId>p0</artifactId>
+    <groupId>maven</groupId>
+    <version>1.0</version>
+  </parent>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven</groupId>
+  <artifactId>p1</artifactId>
+  <packaging>pom</packaging>
+  <name>p1</name>
+  <version>1.0</version>
+  <scm>
+    <url>scm-url</url>
+  </scm>
+
+  <dependencies>
+
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-a</artifactId>
+    </dependency>
+
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-c</artifactId>
+      <version>1.0</version>
+    </dependency>
+
+  </dependencies>
+  <build>
+    <plugins>
+      <plugin>
+        <artifactId>maven-antrun-plugin</artifactId>
+        <configuration>
+          <tasks><echo>${project.parent.basedir}</echo></tasks>
+        </configuration>
+      </plugin>
+    </plugins>
+  </build>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t04/p0/pom.xml b/maven-project/src/test/resources/inheritance-repo/t04/p0/pom.xml
new file mode 100644
index 000000000..9d2f0828e
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t04/p0/pom.xml
@@ -0,0 +1,37 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven</groupId>
+  <artifactId>p0</artifactId>
+  <packaging>pom</packaging>
+  <name>p0</name>
+  <version>1.0</version>
+  <organization>
+    <name>Codehaus</name>
+  </organization>
+
+  <dependencyManagement>
+
+    <dependencies>
+
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-a</artifactId>
+        <version>1.0</version>
+      </dependency>
+
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-b</artifactId>
+        <version>1.0</version>
+      </dependency>
+
+	  <dependency>
+	    <groupId>maven-test</groupId>
+	    <artifactId>maven-test-c</artifactId>
+	    <version>2.0</version>
+	  </dependency>
+
+    </dependencies>
+  </dependencyManagement>
+
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-a-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-a-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-a-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-a-2.0.jar b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-a-2.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-a-2.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-b-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-b-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-b-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-b-1.1.jar b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-b-1.1.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-b-1.1.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-b-2.0.jar b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-b-2.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-b-2.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-c-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-c-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-c-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-d-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-d-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-d-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-d-1.1.jar b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-d-1.1.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-d-1.1.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-d-1.2.jar b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-d-1.2.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/jars/maven-test-d-1.2.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-a-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-a-1.0.pom
new file mode 100644
index 000000000..6905f6c8d
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-a-1.0.pom
@@ -0,0 +1,23 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-a</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+  <repositories>
+    <repository>
+      <id>central</id>
+      <name>Fake Maven Central Repository</name>
+      <url>file://dummy</url>
+    </repository>
+  </repositories>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-b</artifactId>
+      <version>1.0</version>
+      <type>jar</type>
+      <scope>compile</scope>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-a-2.0.pom b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-a-2.0.pom
new file mode 100644
index 000000000..2f4cd6992
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-a-2.0.pom
@@ -0,0 +1,23 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-a</artifactId>
+  <packaging>jar</packaging>
+  <version>2.0</version>
+  <repositories>
+    <repository>
+      <id>central</id>
+      <name>Fake Maven Central Repository</name>
+      <url>file://dummy</url>
+    </repository>
+  </repositories>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-b</artifactId>
+      <version>1.0</version>
+      <type>jar</type>
+      <scope>compile</scope>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-b-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-b-1.0.pom
new file mode 100644
index 000000000..304f00474
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-b-1.0.pom
@@ -0,0 +1,24 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-b</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-c</artifactId>
+      <version>1.0</version>
+      <type>jar</type>
+      <scope>compile</scope>
+    </dependency>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-d</artifactId>
+      <version>1.1</version>
+      <type>jar</type>
+      <scope>compile</scope>
+      <optional>false</optional>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-b-1.1.pom b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-b-1.1.pom
new file mode 100644
index 000000000..9bf5e3da1
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-b-1.1.pom
@@ -0,0 +1,24 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-b</artifactId>
+  <packaging>jar</packaging>
+  <version>1.1</version>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-c</artifactId>
+      <version>1.0</version>
+      <type>jar</type>
+      <scope>compile</scope>
+    </dependency>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-d</artifactId>
+      <version>1.1</version>
+      <type>jar</type>
+      <scope>compile</scope>
+      <optional>false</optional>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-b-2.0.pom b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-b-2.0.pom
new file mode 100644
index 000000000..999ff4f0f
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-b-2.0.pom
@@ -0,0 +1,24 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-b</artifactId>
+  <packaging>jar</packaging>
+  <version>2.0</version>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-c</artifactId>
+      <version>1.0</version>
+      <type>jar</type>
+      <scope>compile</scope>
+    </dependency>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-d</artifactId>
+      <version>1.1</version>
+      <type>jar</type>
+      <scope>compile</scope>
+      <optional>false</optional>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-c-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-c-1.0.pom
new file mode 100644
index 000000000..7505b1c65
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-c-1.0.pom
@@ -0,0 +1,17 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-c</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-d</artifactId>
+      <version>1.1</version>
+      <type>jar</type>
+      <scope>compile</scope>
+      <optional>true</optional>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-d-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-d-1.0.pom
new file mode 100644
index 000000000..ac6ef12ec
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-d-1.0.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-d</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-d-1.1.pom b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-d-1.1.pom
new file mode 100644
index 000000000..6e22f6083
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-d-1.1.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-d</artifactId>
+  <packaging>jar</packaging>
+  <version>1.1</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-d-1.2.pom b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-d-1.2.pom
new file mode 100644
index 000000000..16f8d9051
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/maven-test/poms/maven-test-d-1.2.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-d</artifactId>
+  <packaging>jar</packaging>
+  <version>1.2</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/p0/p1/pom.xml b/maven-project/src/test/resources/inheritance-repo/t05/p0/p1/pom.xml
new file mode 100644
index 000000000..8b7d1386e
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/p0/p1/pom.xml
@@ -0,0 +1,54 @@
+<project>
+  <parent>
+    <artifactId>p0</artifactId>
+    <groupId>maven</groupId>
+    <version>1.0</version>
+  </parent>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven</groupId>
+  <artifactId>p1</artifactId>
+  <packaging>pom</packaging>
+  <name>p1</name>
+  <version>1.0</version>
+  <scm>
+    <url>scm-url</url>
+  </scm>
+  <dependencyManagement>
+    <dependencies>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-b</artifactId>
+        <version>1.0</version>
+      </dependency>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-d</artifactId>
+        <version>1.0</version>
+      </dependency>
+    </dependencies>
+  </dependencyManagement>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-a</artifactId>
+      <version>1.0</version>
+      <scope>runtime</scope>
+    </dependency>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-c</artifactId>
+      <version>1.0</version>
+      <scope>runtime</scope>
+    </dependency>
+  </dependencies>
+  <build>
+    <plugins>
+      <plugin>
+        <artifactId>maven-antrun-plugin</artifactId>
+        <configuration>
+          <tasks><echo>${project.parent.basedir}</echo></tasks>
+        </configuration>
+      </plugin>
+    </plugins>
+  </build>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t05/p0/pom.xml b/maven-project/src/test/resources/inheritance-repo/t05/p0/pom.xml
new file mode 100644
index 000000000..f21cb91a3
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t05/p0/pom.xml
@@ -0,0 +1,36 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven</groupId>
+  <artifactId>p0</artifactId>
+  <packaging>pom</packaging>
+  <name>p0</name>
+  <version>1.0</version>
+  <organization>
+    <name>Codehaus</name>
+  </organization>
+  <dependencyManagement>
+    <dependencies>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-a</artifactId>
+        <version>1.0</version>
+      </dependency>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-b</artifactId>
+        <version>1.1</version>
+      </dependency>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-c</artifactId>
+        <version>1.0</version>
+        <scope>compile</scope>
+      </dependency>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-d</artifactId>
+        <version>1.2</version>
+      </dependency>
+    </dependencies>
+  </dependencyManagement>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-a-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-a-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-a-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-b-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-b-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-b-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-b-1.1.jar b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-b-1.1.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-b-1.1.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-c-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-c-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-c-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-d-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-d-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-d-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-d-1.1.jar b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-d-1.1.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-d-1.1.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-d-1.2.jar b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-d-1.2.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/jars/maven-test-d-1.2.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-a-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-a-1.0.pom
new file mode 100644
index 000000000..6905f6c8d
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-a-1.0.pom
@@ -0,0 +1,23 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-a</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+  <repositories>
+    <repository>
+      <id>central</id>
+      <name>Fake Maven Central Repository</name>
+      <url>file://dummy</url>
+    </repository>
+  </repositories>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-b</artifactId>
+      <version>1.0</version>
+      <type>jar</type>
+      <scope>compile</scope>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-b-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-b-1.0.pom
new file mode 100644
index 000000000..304f00474
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-b-1.0.pom
@@ -0,0 +1,24 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-b</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-c</artifactId>
+      <version>1.0</version>
+      <type>jar</type>
+      <scope>compile</scope>
+    </dependency>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-d</artifactId>
+      <version>1.1</version>
+      <type>jar</type>
+      <scope>compile</scope>
+      <optional>false</optional>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-b-1.1.pom b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-b-1.1.pom
new file mode 100644
index 000000000..304f00474
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-b-1.1.pom
@@ -0,0 +1,24 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-b</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-c</artifactId>
+      <version>1.0</version>
+      <type>jar</type>
+      <scope>compile</scope>
+    </dependency>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-d</artifactId>
+      <version>1.1</version>
+      <type>jar</type>
+      <scope>compile</scope>
+      <optional>false</optional>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-c-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-c-1.0.pom
new file mode 100644
index 000000000..7505b1c65
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-c-1.0.pom
@@ -0,0 +1,17 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-c</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-d</artifactId>
+      <version>1.1</version>
+      <type>jar</type>
+      <scope>compile</scope>
+      <optional>true</optional>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-d-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-d-1.0.pom
new file mode 100644
index 000000000..ac6ef12ec
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-d-1.0.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-d</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-d-1.1.pom b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-d-1.1.pom
new file mode 100644
index 000000000..6e22f6083
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-d-1.1.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-d</artifactId>
+  <packaging>jar</packaging>
+  <version>1.1</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-d-1.2.pom b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-d-1.2.pom
new file mode 100644
index 000000000..16f8d9051
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t06/maven-test/poms/maven-test-d-1.2.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-d</artifactId>
+  <packaging>jar</packaging>
+  <version>1.2</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t06/p0/p1/pom.xml b/maven-project/src/test/resources/inheritance-repo/t06/p0/p1/pom.xml
new file mode 100644
index 000000000..ba2e9fc94
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t06/p0/p1/pom.xml
@@ -0,0 +1,54 @@
+<project>
+  <parent>
+    <artifactId>p0</artifactId>
+    <groupId>maven</groupId>
+    <version>1.0</version>
+  </parent>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven</groupId>
+  <artifactId>p1</artifactId>
+  <packaging>pom</packaging>
+  <name>p1</name>
+  <version>1.0</version>
+  <scm>
+    <url>scm-url</url>
+  </scm>
+  <dependencyManagement>
+    <dependencies>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-b</artifactId>
+        <version>1.0</version>
+      </dependency>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-d</artifactId>
+        <version>1.0</version>
+        <scope>test</scope>
+        <optional>false</optional>
+      </dependency>
+    </dependencies>
+  </dependencyManagement>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-a</artifactId>
+      <version>1.0</version>
+    </dependency>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-c</artifactId>
+      <version>1.0</version>
+    </dependency>
+  </dependencies>
+  <build>
+    <plugins>
+      <plugin>
+        <artifactId>maven-antrun-plugin</artifactId>
+        <configuration>
+          <tasks><echo>${project.parent.basedir}</echo></tasks>
+        </configuration>
+      </plugin>
+    </plugins>
+  </build>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t06/p0/pom.xml b/maven-project/src/test/resources/inheritance-repo/t06/p0/pom.xml
new file mode 100644
index 000000000..51d1e7b1e
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t06/p0/pom.xml
@@ -0,0 +1,37 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven</groupId>
+  <artifactId>p0</artifactId>
+  <packaging>pom</packaging>
+  <name>p0</name>
+  <version>1.0</version>
+  <organization>
+    <name>Codehaus</name>
+  </organization>
+  <dependencyManagement>
+    <dependencies>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-a</artifactId>
+        <version>1.0</version>
+      </dependency>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-b</artifactId>
+        <version>1.1</version>
+      </dependency>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-c</artifactId>
+        <version>1.0</version>
+      </dependency>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-d</artifactId>
+        <version>1.2</version>
+        <scope>test</scope>
+        <optional>false</optional>
+      </dependency>
+    </dependencies>
+  </dependencyManagement>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-a-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-a-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-a-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-b-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-b-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-b-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-b-1.1.jar b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-b-1.1.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-b-1.1.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-c-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-c-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-c-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-d-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-d-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-d-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-d-1.1.jar b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-d-1.1.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-d-1.1.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-d-1.2.jar b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-d-1.2.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/jars/maven-test-d-1.2.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-a-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-a-1.0.pom
new file mode 100644
index 000000000..6905f6c8d
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-a-1.0.pom
@@ -0,0 +1,23 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-a</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+  <repositories>
+    <repository>
+      <id>central</id>
+      <name>Fake Maven Central Repository</name>
+      <url>file://dummy</url>
+    </repository>
+  </repositories>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-b</artifactId>
+      <version>1.0</version>
+      <type>jar</type>
+      <scope>compile</scope>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-b-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-b-1.0.pom
new file mode 100644
index 000000000..4143f268d
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-b-1.0.pom
@@ -0,0 +1,24 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-b</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-c</artifactId>
+      <version>1.0</version>
+      <type>jar</type>
+      <scope>compile</scope>
+    </dependency>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-d</artifactId>
+      <version>1.1</version>
+      <type>jar</type>
+      <scope>compile</scope>
+      <optional>true</optional>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-b-1.1.pom b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-b-1.1.pom
new file mode 100644
index 000000000..b0057e1be
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-b-1.1.pom
@@ -0,0 +1,24 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-b</artifactId>
+  <packaging>jar</packaging>
+  <version>1.1</version>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-c</artifactId>
+      <version>1.0</version>
+      <type>jar</type>
+      <scope>compile</scope>
+    </dependency>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-d</artifactId>
+      <version>1.1</version>
+      <type>jar</type>
+      <scope>compile</scope>
+      <optional>true</optional>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-c-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-c-1.0.pom
new file mode 100644
index 000000000..7505b1c65
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-c-1.0.pom
@@ -0,0 +1,17 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-c</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-d</artifactId>
+      <version>1.1</version>
+      <type>jar</type>
+      <scope>compile</scope>
+      <optional>true</optional>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-d-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-d-1.0.pom
new file mode 100644
index 000000000..ac6ef12ec
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-d-1.0.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-d</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-d-1.1.pom b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-d-1.1.pom
new file mode 100644
index 000000000..6e22f6083
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-d-1.1.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-d</artifactId>
+  <packaging>jar</packaging>
+  <version>1.1</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-d-1.2.pom b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-d-1.2.pom
new file mode 100644
index 000000000..16f8d9051
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t07/maven-test/poms/maven-test-d-1.2.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-d</artifactId>
+  <packaging>jar</packaging>
+  <version>1.2</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t07/p0/p1/pom.xml b/maven-project/src/test/resources/inheritance-repo/t07/p0/p1/pom.xml
new file mode 100644
index 000000000..ba2e9fc94
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t07/p0/p1/pom.xml
@@ -0,0 +1,54 @@
+<project>
+  <parent>
+    <artifactId>p0</artifactId>
+    <groupId>maven</groupId>
+    <version>1.0</version>
+  </parent>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven</groupId>
+  <artifactId>p1</artifactId>
+  <packaging>pom</packaging>
+  <name>p1</name>
+  <version>1.0</version>
+  <scm>
+    <url>scm-url</url>
+  </scm>
+  <dependencyManagement>
+    <dependencies>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-b</artifactId>
+        <version>1.0</version>
+      </dependency>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-d</artifactId>
+        <version>1.0</version>
+        <scope>test</scope>
+        <optional>false</optional>
+      </dependency>
+    </dependencies>
+  </dependencyManagement>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-a</artifactId>
+      <version>1.0</version>
+    </dependency>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-c</artifactId>
+      <version>1.0</version>
+    </dependency>
+  </dependencies>
+  <build>
+    <plugins>
+      <plugin>
+        <artifactId>maven-antrun-plugin</artifactId>
+        <configuration>
+          <tasks><echo>${project.parent.basedir}</echo></tasks>
+        </configuration>
+      </plugin>
+    </plugins>
+  </build>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t07/p0/pom.xml b/maven-project/src/test/resources/inheritance-repo/t07/p0/pom.xml
new file mode 100644
index 000000000..51d1e7b1e
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t07/p0/pom.xml
@@ -0,0 +1,37 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven</groupId>
+  <artifactId>p0</artifactId>
+  <packaging>pom</packaging>
+  <name>p0</name>
+  <version>1.0</version>
+  <organization>
+    <name>Codehaus</name>
+  </organization>
+  <dependencyManagement>
+    <dependencies>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-a</artifactId>
+        <version>1.0</version>
+      </dependency>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-b</artifactId>
+        <version>1.1</version>
+      </dependency>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-c</artifactId>
+        <version>1.0</version>
+      </dependency>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-d</artifactId>
+        <version>1.2</version>
+        <scope>test</scope>
+        <optional>false</optional>
+      </dependency>
+    </dependencies>
+  </dependencyManagement>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-a-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-a-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-a-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-b-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-b-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-b-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-b-1.1.jar b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-b-1.1.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-b-1.1.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-c-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-c-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-c-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-d-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-d-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-d-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-d-1.1.jar b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-d-1.1.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-d-1.1.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-d-1.2.jar b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-d-1.2.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/jars/maven-test-d-1.2.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-a-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-a-1.0.pom
new file mode 100644
index 000000000..6905f6c8d
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-a-1.0.pom
@@ -0,0 +1,23 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-a</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+  <repositories>
+    <repository>
+      <id>central</id>
+      <name>Fake Maven Central Repository</name>
+      <url>file://dummy</url>
+    </repository>
+  </repositories>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-b</artifactId>
+      <version>1.0</version>
+      <type>jar</type>
+      <scope>compile</scope>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-b-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-b-1.0.pom
new file mode 100644
index 000000000..304f00474
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-b-1.0.pom
@@ -0,0 +1,24 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-b</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-c</artifactId>
+      <version>1.0</version>
+      <type>jar</type>
+      <scope>compile</scope>
+    </dependency>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-d</artifactId>
+      <version>1.1</version>
+      <type>jar</type>
+      <scope>compile</scope>
+      <optional>false</optional>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-b-1.1.pom b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-b-1.1.pom
new file mode 100644
index 000000000..9bf5e3da1
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-b-1.1.pom
@@ -0,0 +1,24 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-b</artifactId>
+  <packaging>jar</packaging>
+  <version>1.1</version>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-c</artifactId>
+      <version>1.0</version>
+      <type>jar</type>
+      <scope>compile</scope>
+    </dependency>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-d</artifactId>
+      <version>1.1</version>
+      <type>jar</type>
+      <scope>compile</scope>
+      <optional>false</optional>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-c-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-c-1.0.pom
new file mode 100644
index 000000000..7505b1c65
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-c-1.0.pom
@@ -0,0 +1,17 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-c</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-d</artifactId>
+      <version>1.1</version>
+      <type>jar</type>
+      <scope>compile</scope>
+      <optional>true</optional>
+    </dependency>
+  </dependencies>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-d-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-d-1.0.pom
new file mode 100644
index 000000000..ac6ef12ec
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-d-1.0.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-d</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-d-1.1.pom b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-d-1.1.pom
new file mode 100644
index 000000000..6e22f6083
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-d-1.1.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-d</artifactId>
+  <packaging>jar</packaging>
+  <version>1.1</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-d-1.2.pom b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-d-1.2.pom
new file mode 100644
index 000000000..16f8d9051
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t08/maven-test/poms/maven-test-d-1.2.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-d</artifactId>
+  <packaging>jar</packaging>
+  <version>1.2</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t08/p0/p1/pom.xml b/maven-project/src/test/resources/inheritance-repo/t08/p0/p1/pom.xml
new file mode 100644
index 000000000..2b9b0b9fb
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t08/p0/p1/pom.xml
@@ -0,0 +1,59 @@
+<project>
+  <parent>
+    <artifactId>p0</artifactId>
+    <groupId>maven</groupId>
+    <version>1.0</version>
+  </parent>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven</groupId>
+  <artifactId>p1</artifactId>
+  <packaging>pom</packaging>
+  <name>p1</name>
+  <version>1.0</version>
+  <scm>
+    <url>scm-url</url>
+  </scm>
+  <dependencyManagement>
+    <dependencies>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-b</artifactId>
+        <version>1.0</version>
+      </dependency>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-d</artifactId>
+        <version>1.0</version>
+        <scope>test</scope>
+        <optional>true</optional>
+      </dependency>
+    </dependencies>
+  </dependencyManagement>
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-a</artifactId>
+      <version>1.0</version>
+    </dependency>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-c</artifactId>
+      <version>1.0</version>
+    </dependency>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-d</artifactId>
+      <version>1.0</version>
+    </dependency>
+  </dependencies>
+  <build>
+    <plugins>
+      <plugin>
+        <artifactId>maven-antrun-plugin</artifactId>
+        <configuration>
+          <tasks><echo>${project.parent.basedir}</echo></tasks>
+        </configuration>
+      </plugin>
+    </plugins>
+  </build>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t08/p0/pom.xml b/maven-project/src/test/resources/inheritance-repo/t08/p0/pom.xml
new file mode 100644
index 000000000..51d1e7b1e
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t08/p0/pom.xml
@@ -0,0 +1,37 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven</groupId>
+  <artifactId>p0</artifactId>
+  <packaging>pom</packaging>
+  <name>p0</name>
+  <version>1.0</version>
+  <organization>
+    <name>Codehaus</name>
+  </organization>
+  <dependencyManagement>
+    <dependencies>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-a</artifactId>
+        <version>1.0</version>
+      </dependency>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-b</artifactId>
+        <version>1.1</version>
+      </dependency>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-c</artifactId>
+        <version>1.0</version>
+      </dependency>
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-d</artifactId>
+        <version>1.2</version>
+        <scope>test</scope>
+        <optional>false</optional>
+      </dependency>
+    </dependencies>
+  </dependencyManagement>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t09/maven-test/jars/maven-test-a-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t09/maven-test/jars/maven-test-a-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t09/maven-test/jars/maven-test-a-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t09/maven-test/jars/maven-test-b-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t09/maven-test/jars/maven-test-b-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t09/maven-test/jars/maven-test-b-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t09/maven-test/jars/maven-test-c-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t09/maven-test/jars/maven-test-c-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t09/maven-test/jars/maven-test-c-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t09/maven-test/jars/maven-test-d-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t09/maven-test/jars/maven-test-d-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t09/maven-test/jars/maven-test-d-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t09/maven-test/poms/maven-test-a-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t09/maven-test/poms/maven-test-a-1.0.pom
new file mode 100644
index 000000000..3f959cca6
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t09/maven-test/poms/maven-test-a-1.0.pom
@@ -0,0 +1,24 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-a</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+  <repositories>
+    <repository>
+      <id>central</id>
+      <name>Fake Maven Central Repository</name>
+      <url>file://dummy</url>
+    </repository>
+  </repositories>
+
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-b</artifactId>
+      <version>1.0</version>
+      <scope>compile</scope>
+    </dependency>
+  </dependencies>
+
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t09/maven-test/poms/maven-test-b-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t09/maven-test/poms/maven-test-b-1.0.pom
new file mode 100644
index 000000000..b41f77074
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t09/maven-test/poms/maven-test-b-1.0.pom
@@ -0,0 +1,17 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-b</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-c</artifactId>
+      <version>1.0</version>
+      <scope>compile</scope>
+    </dependency>
+  </dependencies>
+
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t09/maven-test/poms/maven-test-c-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t09/maven-test/poms/maven-test-c-1.0.pom
new file mode 100644
index 000000000..1f0497860
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t09/maven-test/poms/maven-test-c-1.0.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-c</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t09/maven-test/poms/maven-test-d-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t09/maven-test/poms/maven-test-d-1.0.pom
new file mode 100644
index 000000000..9db7ef19d
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t09/maven-test/poms/maven-test-d-1.0.pom
@@ -0,0 +1,17 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-d</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-c</artifactId>
+      <version>1.0</version>
+      <scope>compile</scope>
+    </dependency>
+  </dependencies>
+
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t09/p0/p1/pom.xml b/maven-project/src/test/resources/inheritance-repo/t09/p0/p1/pom.xml
new file mode 100644
index 000000000..20b5b0639
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t09/p0/p1/pom.xml
@@ -0,0 +1,36 @@
+<project>
+  <parent>
+    <artifactId>p0</artifactId>
+    <groupId>maven</groupId>
+    <version>1.0</version>
+  </parent>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven</groupId>
+  <artifactId>p1</artifactId>
+  <packaging>pom</packaging>
+  <name>p1</name>
+  <version>1.0</version>
+  <scm>
+    <url>scm-url</url>
+  </scm>
+
+  <dependencies>
+
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-a</artifactId>
+    </dependency>
+
+  </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <artifactId>maven-antrun-plugin</artifactId>
+        <configuration>
+          <tasks><echo>${project.parent.basedir}</echo></tasks>
+        </configuration>
+      </plugin>
+    </plugins>
+  </build>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t09/p0/p2/pom.xml b/maven-project/src/test/resources/inheritance-repo/t09/p0/p2/pom.xml
new file mode 100644
index 000000000..cb0178f8a
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t09/p0/p2/pom.xml
@@ -0,0 +1,42 @@
+<project>
+  <parent>
+    <artifactId>p0</artifactId>
+    <groupId>maven</groupId>
+    <version>1.0</version>
+  </parent>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven</groupId>
+  <artifactId>p2</artifactId>
+  <packaging>pom</packaging>
+  <name>p2</name>
+  <version>1.0</version>
+  <scm>
+    <url>scm-url</url>
+  </scm>
+
+  <dependencies>
+
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-a</artifactId>
+    </dependency>
+
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-d</artifactId>
+      <version>1.0</version>
+    </dependency>
+
+  </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <artifactId>maven-antrun-plugin</artifactId>
+        <configuration>
+          <tasks><echo>${project.parent.basedir}</echo></tasks>
+        </configuration>
+      </plugin>
+    </plugins>
+  </build>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t09/p0/pom.xml b/maven-project/src/test/resources/inheritance-repo/t09/p0/pom.xml
new file mode 100644
index 000000000..22c618bbc
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t09/p0/pom.xml
@@ -0,0 +1,38 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven</groupId>
+  <artifactId>p0</artifactId>
+  <packaging>pom</packaging>
+  <name>p0</name>
+  <version>1.0</version>
+  <organization>
+    <name>Codehaus</name>
+  </organization>
+
+  <dependencyManagement>
+
+    <dependencies>
+
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-a</artifactId>
+        <version>1.0</version>
+      </dependency>
+
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-b</artifactId>
+        <version>1.0</version>
+        <exclusions>
+          <exclusion>
+            <groupId>maven-test</groupId>
+            <artifactId>maven-test-c</artifactId>
+          </exclusion>
+        </exclusions>
+      </dependency>
+
+    </dependencies>
+
+  </dependencyManagement>
+
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t10/maven-test/jars/maven-test-a-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t10/maven-test/jars/maven-test-a-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t10/maven-test/jars/maven-test-a-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t10/maven-test/jars/maven-test-b-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t10/maven-test/jars/maven-test-b-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t10/maven-test/jars/maven-test-b-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t10/maven-test/jars/maven-test-c-1.0.jar b/maven-project/src/test/resources/inheritance-repo/t10/maven-test/jars/maven-test-c-1.0.jar
new file mode 100644
index 000000000..257cc5642
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t10/maven-test/jars/maven-test-c-1.0.jar
@@ -0,0 +1 @@
+foo
diff --git a/maven-project/src/test/resources/inheritance-repo/t10/maven-test/poms/maven-test-a-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t10/maven-test/poms/maven-test-a-1.0.pom
new file mode 100644
index 000000000..3f959cca6
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t10/maven-test/poms/maven-test-a-1.0.pom
@@ -0,0 +1,24 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-a</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+  <repositories>
+    <repository>
+      <id>central</id>
+      <name>Fake Maven Central Repository</name>
+      <url>file://dummy</url>
+    </repository>
+  </repositories>
+
+  <dependencies>
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-b</artifactId>
+      <version>1.0</version>
+      <scope>compile</scope>
+    </dependency>
+  </dependencies>
+
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t10/maven-test/poms/maven-test-b-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t10/maven-test/poms/maven-test-b-1.0.pom
new file mode 100644
index 000000000..c173c663d
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t10/maven-test/poms/maven-test-b-1.0.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-b</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t10/maven-test/poms/maven-test-c-1.0.pom b/maven-project/src/test/resources/inheritance-repo/t10/maven-test/poms/maven-test-c-1.0.pom
new file mode 100644
index 000000000..1f0497860
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t10/maven-test/poms/maven-test-c-1.0.pom
@@ -0,0 +1,7 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven-test</groupId>
+  <artifactId>maven-test-c</artifactId>
+  <packaging>jar</packaging>
+  <version>1.0</version>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t10/p0/p1/pom.xml b/maven-project/src/test/resources/inheritance-repo/t10/p0/p1/pom.xml
new file mode 100644
index 000000000..11449e46a
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t10/p0/p1/pom.xml
@@ -0,0 +1,42 @@
+<project>
+  <parent>
+    <artifactId>p0</artifactId>
+    <groupId>maven</groupId>
+    <version>1.0</version>
+  </parent>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven</groupId>
+  <artifactId>p1</artifactId>
+  <packaging>pom</packaging>
+  <name>p1</name>
+  <version>1.0</version>
+  <scm>
+    <url>scm-url</url>
+  </scm>
+
+  <dependencies>
+
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-a</artifactId>
+    </dependency>
+
+    <dependency>
+      <groupId>maven-test</groupId>
+      <artifactId>maven-test-c</artifactId>
+      <scope>runtime</scope>
+    </dependency>
+
+  </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <artifactId>maven-antrun-plugin</artifactId>
+        <configuration>
+          <tasks><echo>${project.parent.basedir}</echo></tasks>
+        </configuration>
+      </plugin>
+    </plugins>
+  </build>
+</project>
\ No newline at end of file
diff --git a/maven-project/src/test/resources/inheritance-repo/t10/p0/pom.xml b/maven-project/src/test/resources/inheritance-repo/t10/p0/pom.xml
new file mode 100644
index 000000000..9b7ef6a14
--- /dev/null
+++ b/maven-project/src/test/resources/inheritance-repo/t10/p0/pom.xml
@@ -0,0 +1,41 @@
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>maven</groupId>
+  <artifactId>p0</artifactId>
+  <packaging>pom</packaging>
+  <name>p0</name>
+  <version>1.0</version>
+  <organization>
+    <name>Codehaus</name>
+  </organization>
+
+  <dependencyManagement>
+
+    <dependencies>
+
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-a</artifactId>
+        <version>1.0</version>
+        <scope>test</scope>
+      </dependency>
+
+      <dependency>
+        <groupId>maven-test</groupId>
+        <artifactId>maven-test-b</artifactId>
+        <version>1.0</version>
+        <scope>runtime</scope>
+      </dependency>
+
+	  <dependency>
+	    <groupId>maven-test</groupId>
+	    <artifactId>maven-test-c</artifactId>
+	    <version>1.0</version>
+	    <scope>test</scope>
+	  </dependency>
+
+    </dependencies>
+
+  </dependencyManagement>
+
+</project>
\ No newline at end of file
