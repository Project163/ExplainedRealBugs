diff --git a/maven-project/src/main/java/org/apache/maven/project/MavenProject.java b/maven-project/src/main/java/org/apache/maven/project/MavenProject.java
index 47e9c813b..6ee407f50 100644
--- a/maven-project/src/main/java/org/apache/maven/project/MavenProject.java
+++ b/maven-project/src/main/java/org/apache/maven/project/MavenProject.java
@@ -45,6 +45,7 @@ import org.apache.maven.model.Reporting;
 import org.apache.maven.model.Resource;
 import org.apache.maven.model.Scm;
 import org.apache.maven.model.io.xpp3.MavenXpp3Writer;
+import org.apache.maven.project.artifact.ActiveProjectArtifact;
 import org.apache.maven.project.artifact.MavenMetadataSource;
 import org.apache.maven.project.overlay.BuildOverlay;
 import org.codehaus.plexus.util.xml.Xpp3Dom;
@@ -1408,7 +1409,7 @@ public class MavenProject
         throws InvalidVersionSpecificationException
     {
         return MavenMetadataSource.createArtifacts( artifactFactory, getDependencies(), inheritedScope,
-                                                    dependencyFilter, projectReferences );
+                                                    dependencyFilter, this );
     }
 
     public void addProjectReference( MavenProject project )
@@ -1454,4 +1455,34 @@ public class MavenProject
     {
         return getBuild() != null ? getBuild().getDefaultGoal() : null;
     }
+
+    public Artifact replaceWithActiveArtifact( Artifact pluginArtifact )
+    {
+        if ( getProjectReferences() != null && !getProjectReferences().isEmpty() )
+        {
+            // TODO: use MavenProject getProjectReferenceId
+            String refId = pluginArtifact.getGroupId() + ":" + pluginArtifact.getArtifactId();
+            MavenProject ref = (MavenProject) getProjectReferences().get( refId );
+            if ( ref != null && ref.getArtifact() != null )
+            {
+                // TODO: if not matching, we should get the correct artifact from that project (attached)
+                if ( ref.getArtifact().getDependencyConflictId().equals( pluginArtifact.getDependencyConflictId() ) )
+                {
+                    // if the project artifact doesn't exist, don't use it. We haven't built that far.
+                    if ( ref.getArtifact().getFile() != null && ref.getArtifact().getFile().exists() )
+                    {
+                        pluginArtifact = new ActiveProjectArtifact( ref, pluginArtifact );
+                    }
+                    else
+                    {
+/* TODO...
+                        logger.warn( "Artifact found in the reactor has not been built when it's use was " +
+                            "attempted - resolving from the repository instead" );
+*/
+                    }
+                }
+            }
+        }
+        return pluginArtifact;
+    }
 }
diff --git a/maven-project/src/main/java/org/apache/maven/project/artifact/MavenMetadataSource.java b/maven-project/src/main/java/org/apache/maven/project/artifact/MavenMetadataSource.java
index 043f8c440..d7570803f 100644
--- a/maven-project/src/main/java/org/apache/maven/project/artifact/MavenMetadataSource.java
+++ b/maven-project/src/main/java/org/apache/maven/project/artifact/MavenMetadataSource.java
@@ -18,7 +18,6 @@ package org.apache.maven.project.artifact;
 
 import org.apache.maven.artifact.Artifact;
 import org.apache.maven.artifact.factory.ArtifactFactory;
-import org.apache.maven.artifact.metadata.ArtifactMetadata;
 import org.apache.maven.artifact.metadata.ArtifactMetadataRetrievalException;
 import org.apache.maven.artifact.metadata.ArtifactMetadataSource;
 import org.apache.maven.artifact.metadata.ResolutionGroup;
@@ -57,7 +56,6 @@ import java.util.Collections;
 import java.util.HashSet;
 import java.util.Iterator;
 import java.util.List;
-import java.util.Map;
 import java.util.Set;
 
 /**
@@ -259,7 +257,7 @@ public class MavenMetadataSource
     }
 
     public static Set createArtifacts( ArtifactFactory artifactFactory, List dependencies, String inheritedScope,
-                                       ArtifactFilter dependencyFilter, Map projectReferences )
+                                       ArtifactFilter dependencyFilter, MavenProject project )
         throws InvalidVersionSpecificationException
     {
         Set projectArtifacts = new HashSet( dependencies.size() );
@@ -315,20 +313,9 @@ public class MavenMetadataSource
 
                 artifact.setDependencyFilter( dependencyFilter );
 
-                if ( projectReferences != null )
+                if ( project != null )
                 {
-                    // TODO: use MavenProject getProjectReferenceId
-                    String refId = d.getGroupId() + ":" + d.getArtifactId();
-                    MavenProject project = (MavenProject) projectReferences.get( refId );
-                    if ( project != null && project.getArtifact() != null )
-                    {
-                        // TODO: if not matching, we should get the correct artifact from that project (attached)
-                        if ( project.getArtifact().getDependencyConflictId().equals(
-                            artifact.getDependencyConflictId() ) )
-                        {
-                            artifact = new ActiveProjectArtifact( project, artifact );
-                        }
-                    }
+                    artifact = project.replaceWithActiveArtifact( artifact );
                 }
 
                 projectArtifacts.add( artifact );
@@ -365,21 +352,6 @@ public class MavenMetadataSource
         return versions;
     }
 
-    private Metadata loadMetadata( ArtifactMetadata repoMetadata, ArtifactRepository remoteRepository,
-                                   ArtifactRepository localRepository )
-        throws ArtifactMetadataRetrievalException
-    {
-        File metadataFile = new File( localRepository.getBasedir(),
-                                      localRepository.pathOfLocalRepositoryMetadata( repoMetadata, remoteRepository ) );
-
-        Metadata metadata = null;
-        if ( metadataFile.exists() )
-        {
-            metadata = readMetadata( metadataFile );
-        }
-        return metadata;
-    }
-
     /**
      * @todo share with DefaultPluginMappingManager.
      */
