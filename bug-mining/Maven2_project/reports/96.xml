<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:29:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MNG-2136] Active profile in profiles.xml prevents active profile in pom.xml to be triggered automatically</title>
                <link>https://issues.apache.org/jira/browse/MNG-2136</link>
                <project id="12316922" key="MNG">Maven (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;If there&apos;s a profiles.xml with an active profile in it, then the active profile defined in the pom.xml is ignored and not triggered.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12794195">MNG-2136</key>
            <summary>Active profile in profiles.xml prevents active profile in pom.xml to be triggered automatically</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcasey">John Dennis Casey</assignee>
                                    <reporter username="vmassol">Vincent Massol</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Mar 2006 07:47:49 +0000</created>
                <updated>Sat, 5 Jul 2025 10:32:00 +0000</updated>
                            <resolved>Fri, 10 Mar 2006 11:05:54 +0000</resolved>
                                    <version>2.0.3</version>
                                    <fixVersion>2.0.3</fixVersion>
                                    <component>POM</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14409939" author="jdcasey" created="Wed, 8 Mar 2006 09:44:54 +0000"  >&lt;p&gt;do these two profiles have the same id? How is the profile in the POM triggered?&lt;/p&gt;

&lt;p&gt;Can you provide a test case, so we know when this is fixed?&lt;/p&gt;</comment>
                            <comment id="14410060" author="jdcasey" created="Wed, 8 Mar 2006 09:45:43 +0000"  >&lt;p&gt;upgrading to blocker to make sure this is resolved before we release.&lt;/p&gt;</comment>
                            <comment id="14410095" author="vmassol" created="Wed, 8 Mar 2006 09:51:39 +0000"  >&lt;p&gt;Heer&apos;s the profiles.xml:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;profilesXml&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;profiles&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;profile&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;vmassol&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;properties&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;installDir&amp;gt;&lt;/span&gt;c:/apps/cargo-installs&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/installDir&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/properties&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/profile&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/profiles&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;activeProfiles&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;activeProfile&amp;gt;&lt;/span&gt;vmassol&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/activeProfile&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/activeProfiles&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/profilesXml&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here&apos;s a portion of the pom.xml:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;[...]
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;profiles&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;profile&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;jboss4x&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;activation&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;activeByDefault&amp;gt;&lt;/span&gt;true&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/activeByDefault&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/activation&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;properties&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;containerId&amp;gt;&lt;/span&gt;jboss4x&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/containerId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/properties&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;build&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.codehaus.cargo&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;cargo-maven2-plugin&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
              &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;container&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;zipUrlInstaller&amp;gt;&lt;/span&gt;
                  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;url&amp;gt;&lt;/span&gt;http://ovh.dl.sourceforge.net/sourceforge/jboss/jboss-4.0.2.zip&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/url&amp;gt;&lt;/span&gt;
                  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;installDir&amp;gt;&lt;/span&gt;${installDir}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/installDir&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/zipUrlInstaller&amp;gt;&lt;/span&gt;
              &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/container&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/profile&amp;gt;&lt;/span&gt;
[...]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;if I type &quot;mvn install&quot; the jboss4x profile is not activated. Removing profiles.xml makes it work. Forcing it using -Pjboss4x makes it active too (as would be expected).&lt;/p&gt;</comment>
                            <comment id="14410032" author="jdcasey" created="Wed, 8 Mar 2006 14:04:15 +0000"  >&lt;p&gt;The above example is working as designed. The &amp;lt;activeByDefault/&amp;gt; element is meant to specify that this profile will be activated if no other profiles are active in the build. Therefore, specific activation of any profile will cause this one to be deactivated. The issue with using the logic that the profile should always be applied is this:&lt;/p&gt;

&lt;p&gt;1. If it&apos;s always applied, why not put it in the POM?&lt;br/&gt;
2. If it&apos;s active-unless-deactivated, how do you deactivate it?&lt;/p&gt;

&lt;p&gt;Changing this feature right now might not make a huge impact on the user community, but it would break backwards compatibility in the strictest sense. Also, it requires defining some mechanism for deactivating profiles. We have one undocumented feature for this, which is:&lt;/p&gt;

&lt;p&gt;-P -jboss4x&lt;/p&gt;

&lt;p&gt;which would explicitly deactivate the jboss4x profileId, but this is not well tested, and IMO is pretty specific...I&apos;d say that we would need something akin to:&lt;/p&gt;

&lt;p&gt;&amp;lt;deactivation&amp;gt;&lt;br/&gt;
  &amp;lt;!-- stuff similar to the activation section --&amp;gt;&lt;br/&gt;
&amp;lt;/deactivation&amp;gt;&lt;/p&gt;

&lt;p&gt;where the user can specify conditions that will deactivate the profile. Alternately, we could add an element to simply invert the activation logic...meaning the profile is active by default if this element is set, but anything triggered in the activation section will DEACTIVATE the profile...&lt;/p&gt;

&lt;p&gt;I dunno which way we should go with this, but my feeling is that it might have to wait for 2.1.&lt;/p&gt;</comment>
                            <comment id="14410075" author="jdcasey" created="Wed, 8 Mar 2006 14:04:57 +0000"  >&lt;p&gt;BTW, can&apos;t you add a secondary activation condition that will result in this profile being activated despite the outcome of &amp;lt;activeByDefault/&amp;gt; ? If you cannot, I&apos;d consider &lt;b&gt;that&lt;/b&gt; a bug.&lt;/p&gt;</comment>
                            <comment id="14410001" author="vmassol" created="Wed, 8 Mar 2006 14:41:30 +0000"  >&lt;p&gt;Thanks John&lt;/p&gt;

&lt;p&gt;&amp;gt; 1. If it&apos;s always applied, why not put it in the POM?&lt;/p&gt;

&lt;p&gt;I fail to undestand this. The reason I have a profiles.xml file is because it contains user-specific properties that cannot be shared with other users. That&apos;s the rasion d&apos;etre of profiles.xml, isn&apos;t it?&lt;/p&gt;

&lt;p&gt;&amp;gt; 2. If it&apos;s active-unless-deactivated, how do you deactivate it?&lt;/p&gt;

&lt;p&gt;I don&apos;t want to deactivate it. I want jboss4x to be the default profile so that there&apos;s always a container defined by default and I want to let the user define where the containers are installed.&lt;/p&gt;

&lt;p&gt;Is that an invalid use case?&lt;/p&gt;

&lt;p&gt;If it&apos;s valid, then how do I implement it? Or are you simply saying that such a use case (which I think it pretty common and simple) is not supported?&lt;/p&gt;</comment>
                            <comment id="14410022" author="jdcasey" created="Fri, 10 Mar 2006 09:50:26 +0000"  >&lt;p&gt;Alright, let&apos;s see if we can make &amp;lt;activeByDefault/&amp;gt; a little more intuitive. Since external profiles (from profiles.xml or settings.xml) may be injected at almost any time (especially those in settings.xml), we don&apos;t want them to factor into the calculation of whether &quot;by default&quot; is satisfied...in other words, we don&apos;t expect/want that external profiles will have an impact on whether a default profile is used or not. The only thing that should be able to suppress a profile that&apos;s active-by-default is another profile in the POM which has been activated, either explicitly or using some trigger.&lt;/p&gt;

&lt;p&gt;Using this, your example can still have users supplying installation directories for containers in an external profile (though the settings.xml may be a better place for this...I dunno). When they specify an install dir through a profile, that will have no impact on the choice of container to be installed, which is specified by a set of profiles that are embedded in the POM. When the user triggers some other container, maybe by &quot;-Dcontainer=orion&quot; or something, then the default profile of &quot;jboss4&quot; will be suppressed in favor of the &quot;orion&quot; profile...both of these would be embedded in the POM.&lt;/p&gt;

&lt;p&gt;I&apos;m checking this change into SVN soon, and we can roll it back if need be. IT is it0102 for testing purposes. Let me know what you think.&lt;/p&gt;</comment>
                            <comment id="14409987" author="vmassol" created="Fri, 10 Mar 2006 10:07:27 +0000"  >&lt;p&gt;I think that&apos;s a good idea as it&apos;ll allow reproductible builds (i.e. external profiles should not modify what&apos;s in pom.xml).&lt;/p&gt;</comment>
                            <comment id="14409941" author="jdcasey" created="Fri, 10 Mar 2006 11:05:54 +0000"  >&lt;p&gt;modified the calculation used in activating &amp;lt;activeByDefault/&amp;gt; profiles.&lt;/p&gt;

&lt;p&gt;Was:&lt;/p&gt;

&lt;p&gt;If ANY profile &lt;/p&gt;
{embedded in POM, external}
&lt;p&gt; was activated by a means &lt;b&gt;other&lt;/b&gt; than &amp;lt;activeByDefault/&amp;gt;, then all &amp;lt;activeByDefault/&amp;gt; triggers were suppressed.&lt;/p&gt;

&lt;p&gt;Is:&lt;/p&gt;

&lt;p&gt;If a profile that&apos;s embedded in POM is activated by a means &lt;b&gt;other&lt;/b&gt; than &amp;lt;activeByDefault/&amp;gt;, then all &amp;lt;activeByDefault/&amp;gt; triggers are suppressed.&lt;/p&gt;

&lt;p&gt;For example, if I have a profile in my settings.xml that injects a new repository, and that profile is in my &amp;lt;activeProfiles/&amp;gt; section in the settings.xml, it &lt;b&gt;cannot&lt;/b&gt; influence whether or not an &amp;lt;activeByDefault/&amp;gt; profile is triggered in a build that I run. This should keep such local environmental factors from changing the build process.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;NOTE:&lt;/b&gt; This represents a subtle change in behavior from &amp;lt; 2.0.3 releases. However, I believe the nature of this change will make &amp;lt;activeByDefault/&amp;gt; usage more intuitive, and fix behavior that would otherwise appear buggy.&lt;/p&gt;
</comment>
                            <comment id="17997426" author="JIRAUSER302100" created="Sat, 5 Jul 2025 10:32:00 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven/issues/4311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven#4311&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i28l2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>