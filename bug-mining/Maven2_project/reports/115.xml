<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:30:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MNG-2690] DefaultPluginManager.getConfiguredMojo() doesn&apos;t handle NoClassDefFoundError correctly</title>
                <link>https://issues.apache.org/jira/browse/MNG-2690</link>
                <project id="12316922" key="MNG">Maven (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;If maven tries to download a file which doesn&apos;t exist and it believes there is no other place where it can get the file, you can have the situation that Maven tries to invoke a Plugin without a complete classpath. In the log, you&apos;ll see something like this:&lt;/p&gt;

&lt;p&gt;Downloading: &lt;a href=&quot;http://repository.codehaus.org/org/codehaus/mojo/dependency-maven-plugin/1.0/dependency-maven-plugin-1.0.pom&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://repository.codehaus.org/org/codehaus/mojo/dependency-maven-plugin/1.0/dependency-maven-plugin-1.0.pom&lt;/a&gt;&lt;br/&gt;
Downloading: &lt;a href=&quot;http://repo1.maven.org/maven2/org/codehaus/mojo/dependency-maven-plugin/1.0/dependency-maven-plugin-1.0.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://repo1.maven.org/maven2/org/codehaus/mojo/dependency-maven-plugin/1.0/dependency-maven-plugin-1.0.jar&lt;/a&gt;&lt;br/&gt;
15K downloaded&lt;/p&gt;

&lt;p&gt;As you can see, Maven tries to download the POM from a different site than the JAR. Now, the classpath of the JAR is incomplete because the POM is missing. Things get really nasty when Maven tries to access the plugin. You&apos;ll get:&lt;/p&gt;

&lt;p&gt;java.lang.NoClassDefFoundError: Lorg/codehaus/plexus/archiver/manager/ArchiverManager;&lt;/p&gt;

&lt;p&gt;which tells you exactly nothing since you have no idea who wants that class. The cause of the problem is that PlexusContainer doesn&apos;t catch errors (well, Java says you shouldn&apos;t but the user would really like to see what&apos;s going on).&lt;/p&gt;

&lt;p&gt;My fix was to duplicate the catch in DefaultPluginManager.getConfiguredMojo() (around line 530):&lt;/p&gt;

&lt;p&gt;        catch ( NoClassDefFoundError e )&lt;/p&gt;
        {
            throw new PluginManagerException( &quot;Unable to find the mojo &apos;&quot; + mojoDescriptor.getRoleHint() +
                &quot;&apos; in the plugin &apos;&quot; + pluginDescriptor.getPluginLookupKey() + &quot;&apos; because of NoClassDefFoundError:&quot;, e );
        }

&lt;p&gt;This way, I get at least an idea which plugin is causing the problem.&lt;/p&gt;

&lt;p&gt;But I guess the container should be fixed to catch these errors.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12796476">MNG-2690</key>
            <summary>DefaultPluginManager.getConfiguredMojo() doesn&apos;t handle NoClassDefFoundError correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcasey">John Dennis Casey</assignee>
                                    <reporter username="digulla">Aaron Digulla</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Dec 2006 09:21:33 +0000</created>
                <updated>Sat, 5 Jul 2025 10:31:26 +0000</updated>
                            <resolved>Wed, 25 Feb 2009 10:50:50 +0000</resolved>
                                    <version>2.0.4</version>
                                    <fixVersion>2.1.0</fixVersion>
                                    <component>Plugins and Lifecycle</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14414120" author="brettporter" created="Thu, 18 Dec 2008 08:17:54 +0000"  >&lt;p&gt;common nuisance error - wuld be good to fix&lt;/p&gt;</comment>
                            <comment id="14414386" author="jdcasey" created="Mon, 9 Feb 2009 09:35:07 +0000"  >&lt;p&gt;Consolidating to 2.1.0-M1 so we can then rename to 2.1.0. We can weed out any issues we want to push to a later release from this set once we&apos;ve done the consolidation.&lt;/p&gt;</comment>
                            <comment id="14414464" author="jdcasey" created="Thu, 19 Feb 2009 14:25:17 +0000"  >&lt;p&gt;It would be good if we could get even just a stack trace to start figuring out where to put this sort of code. Line 530 isn&apos;t in getConfiguredMojo() anymore, so I&apos;m not entirely sure where to put this fix.&lt;/p&gt;

&lt;p&gt;I&apos;m guessing it&apos;s a whole other discussion whether we can put together an integration test for this, but it&apos;s important to try if we can.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure we can get this done for 2.1.0, given the scant information in the issue.&lt;/p&gt;</comment>
                            <comment id="17997280" author="JIRAUSER302100" created="Sat, 5 Jul 2025 10:31:26 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven/issues/3987&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven#3987&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i29bcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>