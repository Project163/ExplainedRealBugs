<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:29:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MNG-757] Transitive dependency resolution ignores custom repositories</title>
                <link>https://issues.apache.org/jira/browse/MNG-757</link>
                <project id="12316922" key="MNG">Maven (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;The attached files set the scene:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;test-repo.zip - expand this into the root context of a local web server on 127.0.0.1:8080 for a test repo&lt;/li&gt;
	&lt;li&gt;projects.zip - expand this for the projects&lt;/li&gt;
	&lt;li&gt;settings.xml - the ~/.m2/settings.xml file&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The scenario is as follows:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;test-repo contains a single artifact C&lt;/li&gt;
	&lt;li&gt;project B depends on C&lt;/li&gt;
	&lt;li&gt;project A depends on B &amp;amp; defines test-repo&lt;/li&gt;
	&lt;li&gt;settings.xml also defines test-repo&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The build process is:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;m2 install B (downloads C, installs B ok)&lt;/li&gt;
	&lt;li&gt;m2 install A (finds B and C in local repo, installs A ok)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Now the problem is if C is then deleted the second step fails - i.e. m2 only looks in the central repo for C and not the custom test-repo, even though test-repo is defined in both A&apos;s POM and settings.xml.&lt;/p&gt;

&lt;p&gt;This didn&apos;t happen in 2.0-alpha-3 - is this intentional?&lt;/p&gt;</description>
                <environment>Windows XP, Cygwin</environment>
        <key id="12793251">MNG-757</key>
            <summary>Transitive dependency resolution ignores custom repositories</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcasey">John Dennis Casey</assignee>
                                    <reporter username="markh">Mark Hobson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Aug 2005 11:32:46 +0000</created>
                <updated>Sat, 5 Jul 2025 08:33:26 +0000</updated>
                            <resolved>Tue, 13 Sep 2005 22:48:31 +0000</resolved>
                                    <version>2.0-beta-1</version>
                                    <fixVersion>2.0-beta-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="50"/>
                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="50" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                                    <row percentage="50" backgroundColor="transparent"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="50" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                                    <row percentage="50" backgroundColor="transparent"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="14400">4h</timeoriginalestimate>
                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7200">2h</timespent>
                                <comments>
                            <comment id="14408625" author="brettporter" created="Sun, 21 Aug 2005 01:28:20 +0000"  >&lt;p&gt;yeah, this is a bug. probably a regression related to recent fixes in profile merging.&lt;/p&gt;</comment>
                            <comment id="14408555" author="brettporter" created="Sun, 21 Aug 2005 01:28:48 +0000"  >&lt;p&gt;btw, this is easier to test using a &lt;a href=&quot;file://&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://&lt;/a&gt; repo than a test repo on http&lt;/p&gt;</comment>
                            <comment id="14408688" author="jdcasey" created="Mon, 22 Aug 2005 10:33:56 +0000"  >&lt;p&gt;this would seem to imply that we expect dependency poms to have profiles from settings.xml merged into them...that doesn&apos;t sound right to me. The only way that a could transitively find c would be if:&lt;/p&gt;

&lt;p&gt;1. the same set of repositories were used at all levels for dependency resolution...which would be defined in the project-to-be-built pom.xml file. This is how -alpha-3 worked.&lt;/p&gt;

&lt;p&gt;2. we apply settings.xml profiles to all POMs we work with during the build, including dependency POMs.&lt;/p&gt;

&lt;p&gt;If you think about the integrity of the dependency POM, these two are restatements of the same thing...modifying something that&apos;s meant to be an authoritative source of information for a graph of dependencies (the dependency and it&apos;s transitive closure).&lt;/p&gt;

&lt;p&gt;I&apos;m not sure it&apos;s wise to put all resolution control in the hands of your project&apos;s dependencies...so maybe it would be better to say that the project being built should provide the list of repositories used to resolve everything a la -alpha-3...? I bring this up since there was another JIRA issue filed to change that to repository-set-per-POM.&lt;/p&gt;</comment>
                            <comment id="14408538" author="brettporter" created="Mon, 22 Aug 2005 10:40:44 +0000"  >&lt;p&gt;I think settings profiles should be applied to all poms - parents, deps and projects. The reason for this need to is to avoid the chicken and egg problem of a parent in a repository specified in the parent (which may happen in the project, or the dep - so needs to apply to both).&lt;/p&gt;

&lt;p&gt;It may make sense to make the project authoratative, but that doesn&apos;t solve the chicken and egg problem either.&lt;/p&gt;

&lt;p&gt;The other issue you refer to was to make the project repositories be searched before the parent (ie super POM), I think.&lt;/p&gt;</comment>
                            <comment id="14408663" author="mihobson" created="Mon, 22 Aug 2005 11:03:07 +0000"  >&lt;p&gt;Not sure if the actual use-case that led to this helps, but I had:&lt;/p&gt;

&lt;p&gt;1) project depending on Hibernate&lt;br/&gt;
2) Hibernate depending on JTA&lt;br/&gt;
3) JTA hosted on my repo&lt;/p&gt;

&lt;p&gt;So JTA on my repo couldn&apos;t possibly be referenced by the ibiblio Hibernate POM, and so m2 needs help finding it.  Either this could come from settings.xml, or maybe even a repo-hint added to the Hibernate dependency in the top-level project&apos;s POM?&lt;/p&gt;

&lt;p&gt;I haven&apos;t been keeping up-to-speed on the latest design discussions, so whatever you guys think as long as there&apos;s a way of achieving this.&lt;/p&gt;</comment>
                            <comment id="14408643" author="jdcasey" created="Mon, 22 Aug 2005 14:15:12 +0000"  >&lt;p&gt;I think the correct solution here is to append successively deep transitive dependency POMs&apos; repository definitions to the list being used for resolution, preserving repository uniqueness by id. This allows each project to have precedence in determining which repository a given artifact will be resolved from, while ensuring that the artifact will be resolved from somewhere...as long as those repositories are accessible.&lt;/p&gt;</comment>
                            <comment id="14408589" author="mihobson" created="Mon, 22 Aug 2005 14:24:08 +0000"  >&lt;p&gt;Sounds good to me.  Would higher-level POMs have precedence over transitive dependency POMs?  This would allow projects to override repositories, e.g. use an in-house repo for some dependencies rather than ibiblio (without mirroring the entirety of ibiblio).&lt;/p&gt;</comment>
                            <comment id="14408756" author="brettporter" created="Mon, 5 Sep 2005 19:37:02 +0000"  >&lt;p&gt;rolled back due to &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-836&quot; title=&quot;plugin dependencies cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-836&quot;&gt;&lt;del&gt;MNG-836&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14408777" author="jdcasey" created="Mon, 12 Sep 2005 15:10:38 +0000"  >&lt;p&gt;what are the details of the regression caused by this fix, do we know? Do we have a test in place to prevent future regressions?&lt;/p&gt;</comment>
                            <comment id="14408738" author="brettporter" created="Mon, 12 Sep 2005 18:47:53 +0000"  >&lt;p&gt;the details are in &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-836&quot; title=&quot;plugin dependencies cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-836&quot;&gt;&lt;del&gt;MNG-836&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14408656" author="jdcasey" created="Tue, 13 Sep 2005 22:21:22 +0000"  >&lt;p&gt;I&apos;m functionally re-adding the code that got rolled back, because I suspect that this was not the root problem. In addition, I&apos;m adding two integration tests: the first, it0068, will verify that &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-836&quot; title=&quot;plugin dependencies cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-836&quot;&gt;&lt;del&gt;MNG-836&lt;/del&gt;&lt;/a&gt; is not repeated; the second, it2001, replicates the scenario originally laid out in this issue, and verifies that it works. This last test - it2001 - is complex, and must be run manually by executing test.sh inside the it2001 directory.&lt;/p&gt;

&lt;p&gt;I&apos;m going to commit what I have for this, and if regressions pop up, I guess we&apos;ll fix them.&lt;/p&gt;</comment>
                            <comment id="14408800" author="jdcasey" created="Tue, 13 Sep 2005 22:22:47 +0000"  >&lt;p&gt;I&apos;ve worked another 3h on this issue, but I&apos;m not at all sure how to log it properly without causing negative time estimation in JIRA...&lt;/p&gt;</comment>
                            <comment id="14408713" author="jdcasey" created="Tue, 13 Sep 2005 22:48:31 +0000"  >&lt;p&gt;see it0068 and it2001&lt;/p&gt;</comment>
                            <comment id="17997026" author="JIRAUSER302100" created="Sat, 5 Jul 2025 08:33:26 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven/issues/3751&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven#3751&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12711717" name="projects.zip" size="811" author="markh" created="Fri, 19 Aug 2005 11:32:46 +0000"/>
                            <attachment id="12711508" name="settings.xml" size="333" author="markh" created="Fri, 19 Aug 2005 11:32:46 +0000"/>
                            <attachment id="12711857" name="test-repo.zip" size="1606" author="markh" created="Fri, 19 Aug 2005 11:32:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i28tnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>