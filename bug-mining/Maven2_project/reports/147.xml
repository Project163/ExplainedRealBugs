<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:30:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MNG-3106] Multiple profile activation conditions broken</title>
                <link>https://issues.apache.org/jira/browse/MNG-3106</link>
                <project id="12316922" key="MNG">Maven (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;Having multiple profile activation conditions behaves in an unexpected manner. It doesn&apos;t cause a build failure, but the actual algorithm for activating a profile is very different from expected. My expectation was that if you include multiple conditions, they are ANDed together. However what appears to happen is that the conditions overwrite each other.&lt;/p&gt;

&lt;p&gt;If an &amp;lt;os&amp;gt; condition is added, it overrides any &amp;lt;property&amp;gt; or &amp;lt;file&amp;gt; conditions regardless of their results.&lt;br/&gt;
If a &amp;lt;file&amp;gt; condition is added, it overrides any &amp;lt;property&amp;gt; condition regardless of results&lt;/p&gt;

&lt;p&gt;The following table gives a sample of conditions matched, and whether the profile was activated as a result:&lt;/p&gt;

&lt;p&gt;Property  File  OS   Result   Expected&lt;br/&gt;
     T           T      -         T                T&lt;br/&gt;
     T           F      -         F                F&lt;br/&gt;
     F           T      -         T                F&lt;br/&gt;
     F           F      -         F                F&lt;br/&gt;
     T           -      T         T                T&lt;br/&gt;
     T           -      F         F                F&lt;br/&gt;
     F           -      T         T                F&lt;br/&gt;
     F           -      F         F                F&lt;br/&gt;
     F           F     T         T                F &lt;br/&gt;
     T           T      F        F                F&lt;/p&gt;</description>
                <environment></environment>
        <key id="12794773">MNG-3106</key>
            <summary>Multiple profile activation conditions broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pgier">Paul Gier</assignee>
                                    <reporter username="andybryant">andybryant</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Jul 2007 04:39:11 +0000</created>
                <updated>Sat, 5 Jul 2025 13:03:27 +0000</updated>
                            <resolved>Thu, 15 May 2008 15:46:43 +0000</resolved>
                                    <version>2.0.4</version>
                                    <fixVersion>2.0.10</fixVersion>
                    <fixVersion>2.1.0-M1</fixVersion>
                                    <component>Profiles</component>
                        <due></due>
                            <votes>7</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="14411818" author="andybryant" created="Fri, 13 Jul 2007 04:40:56 +0000"  >&lt;p&gt;If the intention is that multiple conditions are not supported currently for maven activation, it would be much better to fail with an error message rather than current behaviour.&lt;/p&gt;</comment>
                            <comment id="14412050" author="bkate" created="Tue, 14 Aug 2007 14:41:15 +0000"  >&lt;p&gt;This bug is severely limiting, especially since the online documentation indicates an AND operation.&lt;/p&gt;</comment>
                            <comment id="14412251" author="andybryant" created="Tue, 30 Oct 2007 05:23:09 +0000"  >&lt;p&gt;Something like the following should do the trick. This modifies the DefaultProfileManager isActive method so that:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if no activator matches return false (current behaviour)&lt;/li&gt;
	&lt;li&gt;if any activators match, they ALL must consider the profile to be active&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Index: DefaultProfileManager.java&lt;br/&gt;
===================================================================&lt;br/&gt;
&amp;#8212; DefaultProfileManager.java  (revision 590008)&lt;br/&gt;
+++ DefaultProfileManager.java  (working copy)&lt;br/&gt;
@@ -254,17 +254,27 @@&lt;br/&gt;
         {&lt;br/&gt;
             activators = container.lookupList( ProfileActivator.ROLE );&lt;/p&gt;

&lt;p&gt;+            boolean matchedActivator = false;&lt;br/&gt;
+            boolean activate = true;&lt;br/&gt;
+&lt;br/&gt;
             for ( Iterator activatorIterator = activators.iterator(); activatorIterator.hasNext(); )&lt;br/&gt;
             {&lt;br/&gt;
                 ProfileActivator activator = (ProfileActivator) activatorIterator.next();&lt;/p&gt;

&lt;p&gt;                 if ( activator.canDetermineActivation( profile ) )&lt;/p&gt;
                 {
-                    return activator.isActive( profile );
+                    matchedActivator = true;
+                    activate &amp;amp;= activator.isActive( profile );
                 }
&lt;p&gt;             }&lt;br/&gt;
-&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return false;&lt;br/&gt;
+            if (!matchedActivator)&lt;br/&gt;
+            
{
+                return false;
+            }
&lt;p&gt;+            else&lt;br/&gt;
+            &lt;/p&gt;
{
+                return activate;
+            }
&lt;p&gt;         }&lt;br/&gt;
         catch ( ComponentLookupException e )&lt;br/&gt;
         {&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14413110" author="pgier" created="Thu, 15 May 2008 15:46:43 +0000"  >&lt;p&gt;This is now fixed in the 2.0.x branch and trunk.&lt;br/&gt;
The new behaviour is that the profile will be activated if any of the activators returns true (i.e. an &quot;or&quot; operation).&lt;/p&gt;</comment>
                            <comment id="14413734" author="jdcasey" created="Wed, 3 Sep 2008 16:59:20 +0000"  >&lt;p&gt;Adding fix-for for both 2.0.10 and 2.1.0-M1, since 2.1.0-M1 will actually be released first and may not incorporate all of the eventual issue fixes released in 2.0.10.&lt;/p&gt;</comment>
                            <comment id="14417168" author="epabst" created="Thu, 21 Apr 2011 08:58:26 +0000"  >&lt;p&gt;I have a fix for this here that doesn&apos;t modify the pom schema at all and simply switches it from an OR to and AND:&lt;br/&gt;
&lt;a href=&quot;https://github.com/epabst/maven-3/tree/MNG-4516&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/epabst/maven-3/tree/MNG-4516&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14419413" author="rcalmbac" created="Fri, 7 Feb 2014 15:47:30 +0000"  >&lt;p&gt;The resolution is incorrect. How could this happen? This was never supposed to be an &quot;OR&quot;, it was supposed to be an &quot;AND&quot;.&lt;/p&gt;</comment>
                            <comment id="17069533" author="hudson" created="Sat, 28 Mar 2020 14:57:55 +0000"  >&lt;p&gt;Build failed in Jenkins: Maven TLP &#187; maven-studies &#187; maven-metrics #4&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://builds.apache.org/job/maven-box/job/maven-studies/job/maven-metrics/4/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/maven-box/job/maven-studies/job/maven-metrics/4/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17998079" author="JIRAUSER302100" created="Sat, 5 Jul 2025 13:03:27 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven/issues/4808&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven#4808&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12797370">MNG-4225</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12797514">MNG-4565</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12794036">MNG-1753</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12796795">MNG-3328</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12796803">MNG-4516</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12794036">MNG-1753</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="12796332">MNG-5619</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i296lb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>