<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:29:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MNG-1021] Build numbers are incremented when they shouldn&apos;t</title>
                <link>https://issues.apache.org/jira/browse/MNG-1021</link>
                <project id="12316922" key="MNG">Maven (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;I have a project built using m2. I want the project to install/deploy&lt;br/&gt;
a source-code JAR along with the binaries JAR (on both the install and&lt;br/&gt;
deploy phases). I&apos;ve added the following section in the pom.xml file:&lt;/p&gt;

&lt;p&gt;&amp;lt;build&amp;gt;&lt;br/&gt;
 &amp;lt;plugins&amp;gt;&lt;br/&gt;
   &amp;lt;plugin&amp;gt;&lt;br/&gt;
     &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
     &amp;lt;artifactId&amp;gt;maven-source-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
     &amp;lt;executions&amp;gt;&lt;br/&gt;
       &amp;lt;execution&amp;gt;&lt;br/&gt;
         &amp;lt;goals&amp;gt;&lt;br/&gt;
           &amp;lt;goal&amp;gt;jar&amp;lt;/goal&amp;gt;&lt;br/&gt;
         &amp;lt;/goals&amp;gt;&lt;br/&gt;
       &amp;lt;/execution&amp;gt;&lt;br/&gt;
     &amp;lt;/executions&amp;gt;&lt;br/&gt;
   &amp;lt;/plugin&amp;gt;&lt;br/&gt;
 &amp;lt;/plugins&amp;gt;&lt;br/&gt;
&amp;lt;/build&amp;gt;&lt;/p&gt;

&lt;p&gt;It works very nice, except for one problem: the sources JAR always&lt;br/&gt;
gets a new build number. For instance, assuming I clean my local repo,&lt;br/&gt;
and then run &quot;m2 install&quot;, the local repo will contain:&lt;br/&gt;
myproject-20050925.155953-1.jar&lt;br/&gt;
myproject-20050925.155953-2-sources.jar&lt;/p&gt;

&lt;p&gt;Shouldn&apos;t they have the same build number?&lt;/p&gt;

&lt;p&gt;This causes a problem because the maven-metadata.xml file specifies&lt;br/&gt;
that the current build number is 2, and so, projects depending on that&lt;br/&gt;
project can&apos;t find the file (since there&apos;s no binary JAR for build&lt;br/&gt;
number 2, only for build 1).&lt;/p&gt;</description>
                <environment>Fedora 4, JDK 1.5.0_04, Maven 2 beta 1</environment>
        <key id="12797286">MNG-1021</key>
            <summary>Build numbers are incremented when they shouldn&apos;t</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcasey">John Dennis Casey</assignee>
                                    <reporter username="arikkfir">Arik Kfir</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Sep 2005 10:49:35 +0000</created>
                <updated>Sat, 5 Jul 2025 08:32:56 +0000</updated>
                            <resolved>Wed, 5 Oct 2005 13:32:01 +0000</resolved>
                                    <version>2.0-beta-1</version>
                                    <fixVersion>2.0 (RC)</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="133"/>
                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="75" backgroundColor="#89afd7"/>
                                                    <row percentage="25" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="75" backgroundColor="#89afd7"/>
                                                    <row percentage="25" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="10800">3h</timeoriginalestimate>
                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="14400">4h</timespent>
                                <comments>
                            <comment id="14408839" author="jdcasey" created="Wed, 28 Sep 2005 11:16:20 +0000"  >&lt;p&gt;need to figure out how this feature regressed, and add a test to keep it from happening again.&lt;/p&gt;</comment>
                            <comment id="14409040" author="arikkfir" created="Fri, 30 Sep 2005 07:20:27 +0000"  >&lt;p&gt;I&#180;ll give it a try today and see if it sorted out on the latest sources (don&#180;t close yet!) &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14408991" author="arikkfir" created="Sat, 1 Oct 2005 07:55:50 +0000"  >&lt;p&gt;Tried again using m2 trunk - and still happens. I&apos;ve attached the exact POM so you can take a look (perhaps I&apos;m doing something wrong?)&lt;/p&gt;

&lt;p&gt;I&apos;ve also tried cleaning my .m2 repo (completely removed it), but to no avail.&lt;/p&gt;</comment>
                            <comment id="14408928" author="jdcasey" created="Mon, 3 Oct 2005 22:02:57 +0000"  >&lt;p&gt;Attached artifacts are now formally handled by AttachedArtifact instances, which take the main artifact as a constructor parameter, and use it for things like groupId and version info. Once the main artifact&apos;s version is resolved (like for deployment), the attached instance automatically gets the same version information. Once that happens, the attached artifact doesn&apos;t look like a snapshot any more (for example) and will not have a new snapshot transformation performed on it. This should hold up for future meta-versions as well.&lt;/p&gt;

&lt;p&gt;See it0079 for the test, based on the attached pom.&lt;/p&gt;</comment>
                            <comment id="14409046" author="arikkfir" created="Tue, 4 Oct 2005 20:23:10 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I tried again from the trunk (using the same POM I attached previously), and while there is some progress, it still does not work. &lt;/p&gt;

&lt;p&gt;Now the binary and source-code JARs have the same build numbers, but the &apos;maven-metadata.xml&apos; file (under the version directory) still contains a wrong build number.&lt;/p&gt;

&lt;p&gt;In the repo are the following files:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;arik@bzq-179-147-142 0.1-SNAPSHOT&amp;#93;&lt;/span&gt;$ ll&lt;br/&gt;
total 112&lt;br/&gt;
&lt;del&gt;rw-rw-r&lt;/del&gt;-  1 arik arik   309 Oct  5 04:14 maven-metadata.xml&lt;br/&gt;
&lt;del&gt;rw-rw-r&lt;/del&gt;-  1 arik arik    32 Oct  5 04:14 maven-metadata.xml.md5&lt;br/&gt;
&lt;del&gt;rw-rw-r&lt;/del&gt;-  1 arik arik    40 Oct  5 04:14 maven-metadata.xml.sha1&lt;br/&gt;
&lt;del&gt;rw-rw-r&lt;/del&gt;-  1 arik arik 12832 Oct  5 04:14 msg-0.1-20051005.011402-1.jar&lt;br/&gt;
&lt;del&gt;rw-rw-r&lt;/del&gt;-  1 arik arik    32 Oct  5 04:14 msg-0.1-20051005.011402-1.jar.md5&lt;br/&gt;
&lt;del&gt;rw-rw-r&lt;/del&gt;-  1 arik arik    40 Oct  5 04:14 msg-0.1-20051005.011402-1.jar.sha1&lt;br/&gt;
&lt;del&gt;rw-rw-r&lt;/del&gt;-  1 arik arik  3016 Oct  5 04:14 msg-0.1-20051005.011402-1.pom&lt;br/&gt;
&lt;del&gt;rw-rw-r&lt;/del&gt;-  1 arik arik    32 Oct  5 04:14 msg-0.1-20051005.011402-1.pom.md5&lt;br/&gt;
&lt;del&gt;rw-rw-r&lt;/del&gt;-  1 arik arik    40 Oct  5 04:14 msg-0.1-20051005.011402-1.pom.sha1&lt;br/&gt;
&lt;del&gt;rw-rw-r&lt;/del&gt;-  1 arik arik  6924 Oct  5 04:14 msg-0.1-20051005.011402-1-sources.jar&lt;br/&gt;
&lt;del&gt;rw-rw-r&lt;/del&gt;-  1 arik arik    32 Oct  5 04:14 msg-0.1-20051005.011402-1-sources.jar.md5&lt;br/&gt;
&lt;del&gt;rw-rw-r&lt;/del&gt;-  1 arik arik    40 Oct  5 04:14 msg-0.1-20051005.011402-1-sources.jar.sha1&lt;/p&gt;

&lt;p&gt;Which is better than before - but the contents of the maven-metadata.xml file is:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;arik@bzq-179-147-142 0.1-SNAPSHOT&amp;#93;&lt;/span&gt;$ cat maven-metadata.xml&lt;br/&gt;
&amp;lt;metadata&amp;gt;&lt;br/&gt;
  &amp;lt;groupId&amp;gt;org.messages&amp;lt;/groupId&amp;gt;&lt;br/&gt;
  &amp;lt;artifactId&amp;gt;msg&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
  &amp;lt;version&amp;gt;0.1-SNAPSHOT&amp;lt;/version&amp;gt;&lt;br/&gt;
  &amp;lt;versioning&amp;gt;&lt;br/&gt;
    &amp;lt;snapshot&amp;gt;&lt;br/&gt;
      &amp;lt;timestamp&amp;gt;20051005.011402&amp;lt;/timestamp&amp;gt;&lt;br/&gt;
      &amp;lt;buildNumber&amp;gt;2&amp;lt;/buildNumber&amp;gt;&lt;br/&gt;
    &amp;lt;/snapshot&amp;gt;&lt;br/&gt;
    &amp;lt;lastUpdated&amp;gt;20051005011402&amp;lt;/lastUpdated&amp;gt;&lt;br/&gt;
  &amp;lt;/versioning&amp;gt;&lt;br/&gt;
&amp;lt;/metadata&amp;gt;&lt;/p&gt;

&lt;p&gt;Note that the &amp;lt;buildNumber&amp;gt; is 2 - and not 1 as it should be (I cleaned the repo before building).&lt;/p&gt;

&lt;p&gt;Let me know if you need more info.&lt;/p&gt;</comment>
                            <comment id="14408996" author="arikkfir" created="Tue, 4 Oct 2005 20:25:15 +0000"  >&lt;p&gt;One other thing - not sure it affects anything, but just in case - the POM I used in the last try has the &amp;lt;version&amp;gt; of &quot;0.1-SNAPSHOT&quot;, and not &quot;SNAPSHOT&quot; as in the original POM I attached.&lt;/p&gt;</comment>
                            <comment id="14409022" author="jdcasey" created="Wed, 5 Oct 2005 11:15:20 +0000"  >&lt;p&gt;Ah HA! Found it.&lt;/p&gt;

&lt;p&gt;This is caused by attached artifacts having their own metadata, which is written when the artifact is deployed - over the top of the main artifact. Since these are attachments, they shouldn&apos;t change the metadata of the parent artifact. I&apos;ll geld the metadata handling on AttachedArtifact, and this should fix the problem.&lt;/p&gt;

&lt;p&gt;Just waiting for SVN to come back up before I can commit.&lt;/p&gt;</comment>
                            <comment id="14408971" author="arikkfir" created="Wed, 5 Oct 2005 11:43:19 +0000"  >&lt;p&gt;cool!  Let me know as soon as you commit, I&apos;ll give it a try. &lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="17996883" author="JIRAUSER302100" created="Sat, 5 Jul 2025 08:32:56 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven/issues/3626&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven#3626&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12801203">MDEPLOY-43</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12711861" name="pom.xml" size="5162" author="arikkfir" created="Sat, 1 Oct 2005 07:55:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i29d7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>