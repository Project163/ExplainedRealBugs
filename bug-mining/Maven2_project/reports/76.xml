<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:29:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MNG-1251] attachArtifact doesn&apos;t allow to attach an artifact with different type and no assembly</title>
                <link>https://issues.apache.org/jira/browse/MNG-1251</link>
                <project id="12316922" key="MNG">Maven (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;Use case: a project triggers a plugin which generates several files. I want to put all these files in a zip file and install it when calling install.&lt;br/&gt;
So I bind my plugin to the package phase, I keep the project packaging as pom, and then i tri to do soemthing like projectHelper.attachArtifact( project, &quot;zip&quot;, null, toFile ); in my execute() method&lt;/p&gt;

&lt;p&gt;this fails in 2 places:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;empty or null classifier is disallowed by AttachedArtifact&lt;/li&gt;
	&lt;li&gt;then AttachedArtifact inherits the parent&apos;s ArtifactHandler which then will return &quot;pom&quot; as extension instead of &quot;zip&quot; (the type) .&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thus my artifact ends up being installed in finalName-forcedClassifier.pom instead of finalName.zip...&lt;br/&gt;
Blocks my webstart plugin development,&lt;/p&gt;

&lt;p&gt;Note that project.attachArtifact() looks empty...&lt;/p&gt;</description>
                <environment></environment>
        <key id="12793538">MNG-1251</key>
            <summary>attachArtifact doesn&apos;t allow to attach an artifact with different type and no assembly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcasey">John Dennis Casey</assignee>
                                    <reporter username="lacostej">Jerome Lacoste</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Oct 2005 09:50:14 +0000</created>
                <updated>Sat, 5 Jul 2025 08:13:04 +0000</updated>
                            <resolved>Wed, 2 Nov 2005 18:21:21 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0.1</fixVersion>
                                    <component>Inheritance and Interpolation</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>4</watches>
                                    <workratio workratioPercent="100"/>
                                    <progress percentage="50">
                                    <originalProgress>
                                                    <row percentage="50" backgroundColor="#89afd7"/>
                                                    <row percentage="50" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="50" backgroundColor="#51a825"/>
                                                    <row percentage="50" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="50">
                                    <originalProgress>
                                                    <row percentage="50" backgroundColor="#89afd7"/>
                                                    <row percentage="50" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="50" backgroundColor="#51a825"/>
                                                    <row percentage="50" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="14409222" author="jdcasey" created="Thu, 20 Oct 2005 09:53:25 +0000"  >&lt;p&gt;Need to make AttachedArtifact manage its own extension and allow empty classifier.&lt;/p&gt;

&lt;p&gt;Also, need to introduce new variant of MavenProjectHelper.attachArtifact(..) to handle fuller specification of this information.&lt;/p&gt;</comment>
                            <comment id="14409223" author="lacostej" created="Thu, 20 Oct 2005 17:50:06 +0000"  >&lt;p&gt;This fixes it for me. Not sure if that is the right thing to do, in particular with the API now potentially inconsistent:&lt;/p&gt;

&lt;p&gt;  projectHelper.attachArtifact( project, &quot;zip&quot;, null, toFile ); fails&lt;/p&gt;

&lt;p&gt;while&lt;/p&gt;

&lt;p&gt;  projectHelper.attachArtifact( project, &quot;zip&quot;, toFile ); works&lt;/p&gt;

&lt;p&gt;one may want to look into that.&lt;/p&gt;

&lt;p&gt;Some comments: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the updates to the poms are probably not needed. I just wanted to be sure to use 2.0.1-SNAPSHOT material. Feel free to apply separately.&lt;/li&gt;
	&lt;li&gt;AttachedArtifact has a strange way of redirectign method calls to the parent instance. I came up with the fix in 5 minutes and it took me 30 min more to find out that the getArtifactHandler() was &apos;bypassing&apos; my intended changes...&lt;/li&gt;
	&lt;li&gt;and no, I don&apos;t have a test case... Except that this fixes what I&apos;ve been trying to do.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;install:install&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Installing /home/jerome/Dev/m2/mojo-site/mojo/mojo-sandbox/webstart-maven-plugin/src/test/projects/project1/pom.xml to /home/jerome/.m2/repository-m2trunk/org/apache/maven/plugins/jar-mng-1130-0/1.0/jar-mng-1130-0-1.0.pom&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Installing /home/jerome/Dev/m2/mojo-site/mojo/mojo-sandbox/webstart-maven-plugin/src/test/projects/project1/target/jar-mng-1130-0-1.0.zip to /home/jerome/.m2/repository-m2trunk/org/apache/maven/plugins/jar-mng-1130-0/1.0/jar-mng-1130-0-1.0.zip&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14409181" author="brettporter" created="Sun, 23 Oct 2005 20:58:16 +0000"  >&lt;p&gt;I have some concerns with this patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;it seems to break a public API, in particular creating a dependence on maven 2.0.1 for the install plugin (though I can&apos;t see why as the install plugin is not changed)&lt;/li&gt;
	&lt;li&gt;I don&apos;t understand the comment about omitting getArtifactHandler yet&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;it requires a closer look&lt;/p&gt;</comment>
                            <comment id="14409208" author="lacostej" created="Mon, 24 Oct 2005 14:25:02 +0000"  >&lt;p&gt;Brett, thanks for looking into this.&lt;/p&gt;

&lt;p&gt;I will try to be a little bit more verbose, first describing the patch then maybe a better approach.&lt;/p&gt;

&lt;p&gt;The patch&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;with regard to the pom dependencies updates, I think I&apos;ve had to make the change for the maven-project dependency. The 2 others are probably not required.&lt;br/&gt;
  If I didn&apos;t upgrade maven-project to be 2.0.1-SNAPSHOT, tHe install package would keep using the 2.0 maven-project. That was failing in my plugin. I could maybe try forcing a dependency of 2.0.1-SNAPSHOT in my plugin.&lt;/li&gt;
	&lt;li&gt;with regard to commenting out the getArtifactHandler(). The original getArtifactHandler() assumed that the super.artifactHandler was initialized by the parent.artifactHandler, thus the getArtifactHandler() would always return the same as parent.getArtifactHandler(). As my new constructor introduces its own ArtifactHandler instead of passing the parent.getArtifactHandler() to the super() constructor.this assumption is broken. I need to let the super return the real ArtifactHandler, known only by super. As to why the AttachedArtifact was overriding all these calls, I don&apos;t know. I would let the super provide this information or use delegation instead of inheritance.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Better approach?&lt;/p&gt;

&lt;p&gt;It looks like AttachedArtifact is not correctly implemented.&lt;br/&gt;
1- delegation instead of inheritance?&lt;br/&gt;
2- do not add a new constructor but change the default AttachedArtifact to deal with the 2 broken cases initially reported in this bug report, i.e.:&lt;br/&gt;
     1- support empty or null classifier&lt;br/&gt;
     2- when the classifier is empty/null and the type different from the parent&apos;s type, use a different ArtifactHandler() with the correct type.&lt;/p&gt;</comment>
                            <comment id="14409153" author="jdcasey" created="Thu, 27 Oct 2005 16:55:35 +0000"  >&lt;p&gt;getArtifactHandler() must not be delegated to main artifact instance, either...&lt;/p&gt;</comment>
                            <comment id="14409132" author="ajwhitney" created="Thu, 27 Oct 2005 19:05:57 +0000"  >&lt;p&gt;In a multi-module project, the ArtifactHandler extension only appears to be read from the extensions&apos; components.xml for the first module.&lt;/p&gt;

&lt;p&gt;i.e.&lt;/p&gt;

&lt;p&gt;&amp;lt;modules&amp;gt;&lt;br/&gt;
	&amp;lt;module&amp;gt;modules/module1-ext1&amp;lt;/module&amp;gt;&lt;br/&gt;
	&amp;lt;module&amp;gt;modules/module2-ext2&amp;lt;/module&amp;gt;&lt;br/&gt;
&amp;lt;/modules&amp;gt;&lt;/p&gt;

&lt;p&gt;results in the custom artifact handler for module1-ext1 being used but not module2-ext2&lt;/p&gt;

&lt;p&gt;Reversing this order&lt;/p&gt;

&lt;p&gt;&amp;lt;modules&amp;gt;&lt;br/&gt;
	&amp;lt;module&amp;gt;modules/module2-ext2&amp;lt;/module&amp;gt;&lt;br/&gt;
	&amp;lt;module&amp;gt;modules/module1-ext1&amp;lt;/module&amp;gt;&lt;br/&gt;
&amp;lt;/modules&amp;gt;&lt;/p&gt;

&lt;p&gt;results in the custom artifact handler for module2-ext2 being used but not module1-ext1&lt;/p&gt;</comment>
                            <comment id="14409117" author="jdcasey" created="Wed, 2 Nov 2005 18:13:01 +0000"  >&lt;p&gt;changed the MavenProjectHelper to lookup and pass the proper ArtifactHandler to the AttachedArtifact constructor. Then, I changed the AttachedArtifact to only delegate those methods that need to be kept up to date WRT the main artifact. Wherever a method delegates instead of using its own data, I&apos;ve disabled the corresponding setter method by throwing UnsupportedOperationException that has a message explaining why it&apos;s disabled.&lt;/p&gt;</comment>
                            <comment id="14409252" author="jdcasey" created="Wed, 2 Nov 2005 18:21:21 +0000"  >&lt;p&gt;patch was reviewed but not applied. The better approach was to make the attached artifact more independent, only delegating the identity-related fields (groupId, artifactId, version stuff) to the main artifact. The only reason to do this is to keep metadata lookups working consistently based on this info.&lt;/p&gt;

&lt;p&gt;Also, I added code to MavenProjectHelper to lookup and pass on the correct ArtifactHandler for the given artifact type used for the attachment.&lt;/p&gt;

&lt;p&gt;Thanks for the help on running this one down, Jerome (and everyone else who helped). &lt;/p&gt;</comment>
                            <comment id="14409197" author="lacostej" created="Thu, 3 Nov 2005 01:15:33 +0000"  >&lt;p&gt;Thanks for fixing that one.&lt;br/&gt;
THere are at least one issue depending on that one: CC-1310. I thought there was a second, but I can&apos;t find it right now.&lt;br/&gt;
Should I try to refresh the patch on this issue, or should you take care of it?&lt;/p&gt;</comment>
                            <comment id="17996506" author="JIRAUSER302100" created="Sat, 5 Jul 2025 08:13:04 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven/issues/3236&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven#3236&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12711519" name="MNG-1251_more_flexible_attach_artifact.diff" size="5665" author="lacostej" created="Thu, 20 Oct 2005 17:50:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i28ywv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>