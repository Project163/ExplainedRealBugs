<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:30:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MNG-3244] inherited site url not properly handling parameters</title>
                <link>https://issues.apache.org/jira/browse/MNG-3244</link>
                <project id="12316922" key="MNG">Maven (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;Here is the test case to reproduce this problem.  Take the following two pom.xml files&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;project&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.bar&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;foo&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;foo&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0-SNAPSHOT&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;packaging&amp;gt;&lt;/span&gt;pom&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/packaging&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;modelVersion&amp;gt;&lt;/span&gt;4.0.0&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/modelVersion&amp;gt;&lt;/span&gt;

	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;distributionManagement&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;site&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;foo-site&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;url&amp;gt;&lt;/span&gt;file://C:/Documents and Settings/foo/.m2/site/${project.artifactId}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/url&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/site&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/distributionManagement&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;project&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.bar&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;baz&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;baz&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0-SNAPSHOT&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;packaging&amp;gt;&lt;/span&gt;pom&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/packaging&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;modelVersion&amp;gt;&lt;/span&gt;4.0.0&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/modelVersion&amp;gt;&lt;/span&gt;

	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;parent&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;foo&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.bar&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0-SNAPSHOT&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/parent&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And run the site-deploy goal on each.  What you get under the site directory is this&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;- site
/- foo
---/site docs
/- baz
---/- baz (extra directory)
--- ---/site docs&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is the simplest test case.  In the case where I have a &quot;grandparent&quot; pom, the site directory uses the grandparent/parent as the path to the site, and doesn&apos;t use the actual artifactId of the artifact I&apos;m creating the site for.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12796966">MNG-3244</key>
            <summary>inherited site url not properly handling parameters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="brianf">Brian E Fox</assignee>
                                    <reporter username="jacob.robertson">Jacob Robertson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 May 2006 09:54:47 +0000</created>
                <updated>Sat, 5 Jul 2025 10:31:14 +0000</updated>
                            <resolved>Fri, 22 May 2020 20:07:30 +0000</resolved>
                                    <version>2.0.7</version>
                                                    <component>Inheritance and Interpolation</component>
                    <component>Sites &amp;amp; Reporting</component>
                        <due></due>
                            <votes>47</votes>
                                    <watches>45</watches>
                                                                                                                <comments>
                            <comment id="14410796" author="bwellhoefer" created="Tue, 26 Sep 2006 03:38:41 +0000"  >&lt;p&gt;I hereby kindly ask you to fix the bug. &lt;/p&gt;

&lt;p&gt;I really have problems convincing my colleagues to switch to Maven when such a bug is not fixed for month.&lt;/p&gt;</comment>
                            <comment id="14410736" author="steffans" created="Tue, 26 Sep 2006 08:50:27 +0000"  >&lt;p&gt;The issue origins seems to be the DefaultModelInheritanceAssembler.class wich automatically adds the parents artifactId no matter what.&lt;br/&gt;
According to the site-plugin in documentation the inheritance of the parents artifactId can enabled by adding a trailing / to the url.&lt;br/&gt;
But the InheritanceModel doesnt apply this rule.&lt;/p&gt;

&lt;p&gt;Details on: &lt;a href=&quot;http://maven.apache.org/guides/mini/guide-site.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org/guides/mini/guide-site.html&lt;/a&gt;&lt;br/&gt;
Note: the trailing slash in the URL above indicates that any subprojects that inherit this value should append their artifact ID to the path instead of using it as-is.&lt;/p&gt;

&lt;p&gt;My solution, the method assembleDistributionInheritence(...) should be modified like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( childDistMgmt.getSite() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; )
            {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( parentDistMgmt.getSite() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; )
                {
                    Site site = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Site();
                    childDistMgmt.setSite( site );
                    site.setId( parentDistMgmt.getSite().getId() );
                    site.setName( parentDistMgmt.getSite().getName() );
                    site.setUrl( parentDistMgmt.getSite().getUrl() );
                    &lt;span class=&quot;code-comment&quot;&gt;// modification, add the .endWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;) to the condition 
&lt;/span&gt;                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( site.getUrl() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; site.getUrl().endsWith( &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; ) )
                    {
                            site.setUrl( appendPath( site.getUrl(), child.getArtifactId(), appendPaths ) );
                    }
                }
            }
...&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14412247" author="jameswdumay" created="Wed, 17 Oct 2007 20:52:47 +0000"  >&lt;p&gt;Here is a fix for Maven 2.0.8 with tests.&lt;/p&gt;</comment>
                            <comment id="14412223" author="brianf@infinity.nu" created="Wed, 17 Oct 2007 22:12:29 +0000"  >&lt;p&gt;Thanks for the patch. I updated it to handle \ in the path and another small issue I found while testing.&lt;/p&gt;</comment>
                            <comment id="14420737" author="brianf@infinity.nu" created="Wed, 24 Oct 2007 19:17:19 +0000"  >&lt;p&gt;This patch breaks existing behavior (the docs are wrong). &lt;/p&gt;</comment>
                            <comment id="14420773" author="william_ferguson_au@yahoo.com" created="Thu, 8 Nov 2007 22:10:15 +0000"  >&lt;p&gt;Brian, we all seem to want this fix, but don&apos;t want to break existing behaviour (however bizarre it may be).&lt;/p&gt;

&lt;p&gt;The proper solution seems to be to add a POM attribute/element like either:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;use-inherited-urls with a default of false&lt;/li&gt;
	&lt;li&gt;append-artifactId-to-parent-urls with a default of true&lt;br/&gt;
But this requires a change to the POM schema which I suspect will be much harder to organise..&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;A temporary solution might be to do the same thing using well-documented POM properties, eg&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;mng-3244-use-inherited-urls with a default of false&lt;/li&gt;
	&lt;li&gt;mng-3244-append-artifactId-to-parent-urls with a default of true&lt;br/&gt;
And when (hopefully not if) the POM schema is changed to accomodate the proper solution the implementation can be readily switched from one to the other and even handle fallback and notification of the appropriate configuration.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14412448" author="bentmann" created="Sun, 11 Nov 2007 06:03:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;This patch breaks existing behavior (the docs are wrong).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well, then you might find this patch useful, intended to save users from confusion and providing some further tweaks to the guide. It&apos;s one thing to have a controversal behavior but it&apos;s definitively a bad thing to have incorrect documentation.&lt;/p&gt;</comment>
                            <comment id="14420769" author="brianf@infinity.nu" created="Tue, 27 Nov 2007 11:22:00 +0000"  >&lt;p&gt;Site patch is applied.&lt;/p&gt;</comment>
                            <comment id="14412554" author="skaze" created="Mon, 31 Dec 2007 12:33:30 +0000"  >&lt;p&gt;remember that the site distro URL and the project URL are related. If you add the documented but missing feature of being &apos;/&apos; aware for one of them (i.e. as you have with this patch and its handling of site distro url) you will need to add the same feature to the project url assembly.&lt;/p&gt;

&lt;p&gt;We have had to declare explicit project.url and distroManagement.site.url elements in EVERY pom of our multi-module proejcts because we also use real identifying information in these URLS, namely the ${project.groupId}/${project.artifactId}/${project.version} &lt;/p&gt;
</comment>
                            <comment id="14412488" author="skaze" created="Wed, 2 Jan 2008 15:17:36 +0000"  >&lt;p&gt;After playing with some patch some more i came across another problem beyond the one mentioned above. You need to ensure that the trailing slash is propagated to the child projects URLs (distroManagement.site.url and project.url) otherwise the logic based upon the presence of the trailing slash stop working. i.e. if you call appendPaths you must ensure that the resulting path ends with a &apos;/&apos;.&lt;/p&gt;</comment>
                            <comment id="14420815" author="seidler" created="Thu, 21 Feb 2008 05:01:04 +0000"  >&lt;p&gt;Will this also be implemented for the SCM URLs and the various other places where the artifactid is automatically appended? Because this bug here supercedes &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-2290&quot; title=&quot;Generated URLs in POMs of child modules&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-2290&quot;&gt;&lt;del&gt;MNG-2290&lt;/del&gt;&lt;/a&gt;, which supercedes &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-2219&quot; title=&quot;artifactId appended to URL in scm reports. Problem apparently comes from the core.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-2219&quot;&gt;&lt;del&gt;MNG-2219&lt;/del&gt;&lt;/a&gt;, which is about SCM URLs. And can someone, please, document that? Because a guide is &lt;b&gt;not&lt;/b&gt; a place to put such an important piece of information. Maybe the right place would be the docs for the pom.xml structure?&lt;/p&gt;</comment>
                            <comment id="14412703" author="jriboe" created="Sat, 23 Feb 2008 04:52:51 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;I sent this comment to the list, without any repsonse, so I decided to put them here - where they belong&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;As I understand it; the current rule implements implicit URLs as&lt;br/&gt;
${parent.url}/${project.artifactId}&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;scm&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;connection&amp;gt;&lt;/span&gt;${parentPOM.scm.connection}/${project.artifactId}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/connection&amp;gt;&lt;/span&gt;
 ...
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/scm&amp;gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Where parentPOM is a made-up symbol denoting an upward search for the pom property that follows (scm.connection).&lt;/p&gt;

&lt;p&gt;So, how about the following suggestion:&lt;br/&gt;
The Super POM contains this kind of definition for all URLs where this rule applies today. When the effective POM&lt;br/&gt;
is computed for a sub-project it uses the &quot;closest&quot; url definition that contains the symbol parentPOM. If none is&lt;br/&gt;
found expect the def in super pom, this one is used and the rule applies as it always has.&lt;/p&gt;

&lt;p&gt;On the other hand, if one decides to put an url expression containing parentPOM into a POM of type &apos;pom&apos;,&lt;br/&gt;
then there is a new definition and will be used. That means, we have a way to define how sub-project urls should&lt;br/&gt;
be constructed. I would be delighted if I could define an expression like&lt;br/&gt;
   ${parentPOM.scm.connection}/${project.name}/trunk&lt;/p&gt;

&lt;p&gt;There is a residual problem, however: I cannot define both an url expansion expression and an actual url expression&lt;br/&gt;
that is intended to be used in sub-projects. The easiest solution, is just to have two organization poms, the top-most&lt;br/&gt;
pom contains the url expansion expressions (overriding the rule from the super pom) and the one beneath is the&lt;br/&gt;
original org pom, containing actual urls that will be used in the expansions further down.&lt;/p&gt;

&lt;p&gt;I&apos;m convinced there are other more elegant solutions. However, the suggestion above would be fairly easy to implement&lt;br/&gt;
without breaking existing code and poms (or require a POM version increment), but still provide a way for org-pom&lt;br/&gt;
designers to tweak the url expansions the way they want.&lt;/p&gt;

&lt;p&gt;Comments / Objections ??? &lt;/p&gt;</comment>
                            <comment id="14420812" author="brianf@infinity.nu" created="Thu, 28 Feb 2008 20:21:52 +0000"  >&lt;p&gt;There isn&apos;t a way that i know of to refer to a value in the parent pom. This would require defining a whole new property and is more than I think we want to do in 2.0.x. &lt;/p&gt;</comment>
                            <comment id="14420801" author="brianf@infinity.nu" created="Mon, 3 Mar 2008 12:05:57 +0000"  >&lt;p&gt;Note, dission on dev list: &lt;a href=&quot;http://www.nabble.com/Comments---Ideas-for-MNG-3244-td15808822s177.html#a15808822&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.nabble.com/Comments---Ideas-for-MNG-3244-td15808822s177.html#a15808822&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14420846" author="brianf@infinity.nu" created="Tue, 11 Mar 2008 14:05:36 +0000"  >&lt;p&gt;There seems to be no solution available to fix this in 2.0.x&lt;/p&gt;</comment>
                            <comment id="14413808" author="flynnk" created="Mon, 24 Nov 2008 00:47:01 +0000"  >&lt;p&gt;I&apos;m fairly new to Maven, but I find the default behavior for all URLs very confusing. I understand the desired behavior, but many projects are just not arranged like the default behavior implies. The same URL alteration happens for SCM urls, the overall project URL, etc. I had initially created a corporate parent POM that I had hoped could work about 85% of our SVN repos by default, but I will have to override every one in the actual POM for each project (the suggested workaround).&lt;/p&gt;

&lt;p&gt;I would strongly argue for a change to the POM to be able to turn this off globally (not just for site URLs). I&apos;d prefer for that to be the default (I think the current behavior violates the principle of least surprise), but that&apos;s water under the bridge in terms of compatibility at this point. We really need a way of turning this off though--I really think it will lead to simpler POMs.&lt;/p&gt;</comment>
                            <comment id="14415975" author="ecc11718" created="Thu, 21 Jan 2010 11:16:01 +0000"  >&lt;p&gt;I&apos;m going to summarize all that this peculiar functionality touches upon, some of which can be traced in the issue links above, in order to justify my attached patch and hope for its consensus adoption.&lt;/p&gt;

&lt;p&gt;There&apos;s a Maven 1-ey method in DefaultModelInheritanceAssembler, appendPath(..), that may append a child path relative to a parent (project) path and this path becomes the returned URL. In practice, this method is called upon from three places in this inheritance-assembling class: all of &amp;lt;scm&amp;gt;, the &amp;lt;url&amp;gt; inside &amp;lt;site&amp;gt; inside &amp;lt;distributionManagement&amp;gt;, and the top-level &amp;lt;url&amp;gt;, where the parent has a value and the child doesn&apos;t. And in each case, the child path is its &amp;lt;artifactId&amp;gt;. The boolean param that determines whether to &quot;append child to parent,&quot; AFAICT, is hard-coded to true in each of these cases and, hence, no matter what the inherited value may be, the child path (artifactId) is appended and for most inheritance schemes, you see a strange reflective..artifact..of the artifactId tacked on the end of these resolved URLs. Again, it all sounds very Maven 1-ey, where children are logically inside parent or relative to it.&lt;/p&gt;

&lt;p&gt;Most inheritance schemes, as I&apos;ve said, for these values are of this flavor: the inherited child value is &lt;a href=&quot;http://www.foo.com/etc/$&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.foo.com/etc/$\&lt;/a&gt;{project.artifactId} &amp;#8211; according to my following the bug trails. Rather than rewrite this aspect of the model, as Brett Porter suggested &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, my proposed patch quietly inserts a check for a certain condition and, if present, follows different inheritance logic. My aims were:&lt;/p&gt;

&lt;p&gt;1. Non-disruptive insertion - if present, do this, else keep the status quo.&lt;br/&gt;
2. Cover 90% (or better) of the cases - there may be other fringe (inheritance) cases my patch does not address but I think I&apos;ve landed on the majority and, with #1 in mind, it does no worse for those cases.&lt;/p&gt;

&lt;p&gt;So my patch is basically this: if the child has no value and the parent does (for those POM elements mentioned), and if the parent value ends with a Maven expression (i.e. ${blah}), then child value = parent value, otherwise, as you were. (Paul Harrison suggested &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; the choice of the algorithm be the presence of &apos;/&apos; at the end of the parent value but I think the &quot;ends with Maven expression&quot; is a more direct approach.)&lt;/p&gt;

&lt;p&gt;My patch includes new units and has been utilized in a full rebuild of 2.2.2-RC1-SNAPSHOT successfully. I look forward to hearing everyone&apos;s feedback.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Steven&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://jira.codehaus.org/browse/MNG-4508?focusedCommentId=204629&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#action_204629&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jira.codehaus.org/browse/MNG-4508?focusedCommentId=204629&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#action_204629&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://jira.codehaus.org/browse/MNG-4508?focusedCommentId=174940&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#action_174940&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jira.codehaus.org/browse/MNG-4508?focusedCommentId=174940&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#action_174940&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="14415872" author="ecc11718" created="Thu, 21 Jan 2010 11:16:51 +0000"  >&lt;p&gt;patch by Steven MountJoy&lt;/p&gt;</comment>
                            <comment id="14416334" author="npgall" created="Thu, 20 May 2010 14:21:04 +0000"  >&lt;p&gt;My company has a flat SVN structure, with trunk/, tags/ and branches/ folders in every project. e.g.&lt;/p&gt;

&lt;p&gt;.../corporate-pom/trunk/&lt;br/&gt;
.......................pom.xml&lt;br/&gt;
................./tags/&lt;br/&gt;
................./branches/&lt;/p&gt;

&lt;p&gt;.../project1/trunk/&lt;br/&gt;
..................pom.xml&lt;br/&gt;
............/tags/&lt;br/&gt;
............/branches/&lt;/p&gt;

&lt;p&gt;We were hoping to factor out scm, site and nexus urls from all of our projects into a corporate pom. Due to this bug though, maven is appending artifactid again after trunk/ in inherited urls, which doesn&apos;t make sense for this structure. So basically this bug will prevent us from factoring out most of the configuration, and we&apos;ll have to copy/paste the same url template into every pom.&lt;/p&gt;

&lt;p&gt;Can we consider fixing this bug for maven 2.x again?&lt;/p&gt;

&lt;p&gt;..Edited to remove a suggestion which has some problems on closer examination.&lt;/p&gt;</comment>
                            <comment id="14416301" author="npgall" created="Fri, 21 May 2010 09:02:08 +0000"  >&lt;p&gt;@Steven MountJoy- I looked at that patch, and I think it would improve the situation for some people, but for us it&apos;s not going to fix the broken handling of our scm urls because we put our variables in the middle of the urls unfortunately, and we put &quot;/trunk&quot; at the end.&lt;/p&gt;

&lt;p&gt;@all&lt;br/&gt;
Perhaps looking for patterns in urls is not the way to go to decide whether or not to apply the fixed logic.&lt;/p&gt;

&lt;p&gt;How about we apply the fix if property &quot;mng-3244-append-artifactId-to-parent-urls&quot; is set to &quot;false&quot; (as William Ferguson above suggested 2.5 years ago), otherwise we apply existing behaviour?&lt;/p&gt;

&lt;p&gt;I can&apos;t see any way that this could break existing behaviour.&lt;/p&gt;</comment>
                            <comment id="14416847" author="malavon" created="Tue, 7 Dec 2010 04:51:18 +0000"  >&lt;p&gt;Since I&apos;ve experiencing issues on this as well, I&apos;ve been thinking that referencing i.e. project.version in a parent pom (to the parent&apos;s version) should be possible.&lt;br/&gt;
I might not see a certain UC or already implemented behaviour, but wouldn&apos;t this be possible (and still be backwards compatible) by adding one of two behaviours:&lt;/p&gt;

&lt;p&gt;1. A way to specify properties that are resolved to the correct version (from the pom that they&apos;re in) either at install time or at the time the effective pom is generated. A proposal on this option would be to use i.e. #&lt;/p&gt;
{property}
&lt;p&gt; or maybe $&lt;span class=&quot;error&quot;&gt;&amp;#91;property&amp;#93;&lt;/span&gt;&lt;br/&gt;
I think that this might even be possible in a Maven plugin, but there will be a problem with backing up the pom first then as well. If there&apos;s a way to hook into the effective pom generation it can be done cleanly though without touching the pom on disk.&lt;/p&gt;

&lt;p&gt;2. A way to specify a certain parent in the hierarchy, though this would require a model change. It would then be possible to request a certain parent, i.e. by doing ${project.parent.someParentGroup.someParentId}&lt;/p&gt;

&lt;p&gt;Personally I like #1 the most, though #2 is probably the most powerful. Both will of course require a substantial amount of work, but I expect that #2 will require a lot more than #1.&lt;/p&gt;

&lt;p&gt;ps. just wondering: are votes counted together from all related issues? If so I might vote on them all &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14417413" author="famod" created="Wed, 19 Oct 2011 09:46:29 +0000"  >&lt;p&gt;It&apos;s sad to see that this issue hasn&apos;t been fixed in all these years. People &lt;b&gt;really&lt;/b&gt; need it.&lt;/p&gt;

&lt;p&gt;I ended up specifying following snippet in each and every child pom:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;distributionManagement&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- repositories inherited--&amp;gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;site&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;${distributionManagement.site.id}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;url&amp;gt;&lt;/span&gt;${distributionManagement.site.url}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/url&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/site&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/distributionManagement&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Whereas the same snippet is defined in the parent pom (including repositories of course!) and this parent pom also defines the referenced properties:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;distributionManagement.site.id&amp;gt;&lt;/span&gt;someid&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/distributionManagement.site.id&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;distributionManagement.site.url&amp;gt;&lt;/span&gt;scp://somehost.example.org/u/admin/maven/site/${project.artifactId}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/distributionManagement.site.url&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I needed to do the same for project.url and all the URLs in project.scm.&lt;/p&gt;

&lt;p&gt;It&apos;s a quite cumbersome workaround but this way I can use a &quot;dumb&quot; copy and paste approach when creating new child poms  - without needing to remember to append the artifactIds! At the the same time I can just release the parent pom as usual, including correct site deployment.&lt;/p&gt;</comment>
                            <comment id="14419457" author="dma_k" created="Wed, 12 Feb 2014 10:42:29 +0000"  >&lt;p&gt;I have jumped to this issue from &lt;a href=&quot;https://issues.apache.org/jira/browse/MSITE-334&quot; title=&quot;Make it possible to not append the artifactId of the child when inheriting site url&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSITE-334&quot;&gt;&lt;del&gt;MSITE-334&lt;/del&gt;&lt;/a&gt;, as I have the same issue with automatic appending of &lt;tt&gt;artifactId&lt;/tt&gt; to inherited site URL, which does not work well with custom &quot;templated&quot; URLs.&lt;br/&gt;
In our environment we use URL like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;dav:http:&lt;span class=&quot;code-comment&quot;&gt;//host/nexus/content/sites/maven-site/${project.groupId}/${project.artifactId}/${project.version}/&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14601727" author="flandoo" created="Thu, 25 Jun 2015 18:54:47 +0000"  >&lt;p&gt;Was just bitten by this issue today, using a very similar URL scheme as Dmitry Katsubo, just sans the groupId. As explained in this stack overflow answer - &lt;a href=&quot;http://stackoverflow.com/a/20517630&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/a/20517630&lt;/a&gt; - the default behavior makes much more sense when you are deploying to source control, as the maven core site is. If you&apos;re not, however, there really should be a way to disable this because it messes up the site structure.&lt;/p&gt;</comment>
                            <comment id="15071658" author="hboutemy" created="Fri, 25 Dec 2015 16:31:50 +0000"  >&lt;p&gt;there is a new feature in &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-5951&quot; title=&quot;add an option to avoid path addition to inherited URLs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-5951&quot;&gt;&lt;del&gt;MNG-5951&lt;/del&gt;&lt;/a&gt; to disable path addition when inheriting urls: feedback appreciated&lt;/p&gt;</comment>
                            <comment id="17002229" author="elharo" created="Mon, 23 Dec 2019 11:55:24 +0000"  >&lt;p&gt;worked around in &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-5951&quot; title=&quot;add an option to avoid path addition to inherited URLs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-5951&quot;&gt;&lt;del&gt;MNG-5951&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17997208" author="JIRAUSER302100" created="Sat, 5 Jul 2025 10:31:14 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven/issues/3942&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven#3942&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12923364">MNG-5951</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12797152">MNG-5034</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12794829">MNG-3133</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12794888">MNG-3254</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12797004">MNG-4878</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12794821">MNG-3846</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12794461">MNG-2872</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12794754">MNG-4670</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12809003">MSITE-277</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12794870">MNG-4507</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12809014">MSITE-579</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12796851">MNG-4508</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12796423">MNG-2290</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="12923364">MNG-5951</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12805468">MPIR-234</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12712106" name="fix-inherited-site-url.patch" size="2985" author="" created="Wed, 17 Oct 2007 20:52:47 +0000"/>
                            <attachment id="12712504" name="guide-site.patch" size="4171" author="bentmann" created="Sun, 11 Nov 2007 06:03:42 +0000"/>
                            <attachment id="12713020" name="mng-3244_patch.txt" size="16325" author="ecc11718" created="Thu, 21 Jan 2010 11:16:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i28vr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>