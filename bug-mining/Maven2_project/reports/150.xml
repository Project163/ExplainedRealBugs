<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:30:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MNG-3530] Regression: Properties get resolved before the LifeCycle is Forked.</title>
                <link>https://issues.apache.org/jira/browse/MNG-3530</link>
                <project id="12316922" key="MNG">Maven (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;Since Maven 2.0.9 &amp;#8211; If a plugin uses a forked lifecycle, then the project properties are resolved by maven before the lifecycle is forked.&lt;br/&gt;
This means that the forked lifecycle has the non-forked lifecycle&apos;s values.&lt;/p&gt;

&lt;p&gt;This was not the case in maven prior to version 2.0.9, where properties were resolved at a much later time.&lt;/p&gt;

&lt;p&gt;For example - the attached sample project uses the Clover plugin with the xdoclet plugin. When &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;mvn clean install&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; is run under &lt;b&gt;Maven-2.0.8&lt;/b&gt; you can see the following output:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[INFO] [xdoclet:xdoclet {execution: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;}]
[INFO] Initializing DocletTasks!!!
[INFO] Executing tasks
     [echo] Build Dir: ${project.build.directory}/test.clover
[INFO] Executed tasks
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;whilst &lt;b&gt;Maven 2.0.9&lt;/b&gt; outputs:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[INFO] [xdoclet:xdoclet {execution: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;}]
[INFO] Initializing DocletTasks!!!
[INFO] Executing tasks
    [mkdir] Created dir: /Users/niick/work/mvnclvr/src/it/mng/xdoclet/target
    [touch] Creating /Users/niick/work/mvnclvr/src/it/mng/xdoclet/target/test.clover
     [echo] Build Dir: /Users/niick/work/mvnclvr/src/it/mng/xdoclet/target/test.clover
[INFO] Executed tasks
[INFO] [resources:resources]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The fact the  ${project.build.directory} property has been expanded already under 2.0.9, means that the forked lifecycle has the same value for that property.&lt;/p&gt;

&lt;p&gt;This new behavior will break any plugin which uses a forked lifecycle.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12796667">MNG-3530</key>
            <summary>Regression: Properties get resolved before the LifeCycle is Forked.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcasey">John Dennis Casey</assignee>
                                    <reporter username="npellow">Nick Pellow</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Apr 2008 02:57:48 +0000</created>
                <updated>Sat, 5 Jul 2025 16:37:17 +0000</updated>
                            <resolved>Tue, 10 Feb 2009 03:51:02 +0000</resolved>
                                    <version>2.0.9</version>
                                    <fixVersion>2.1.0-M1</fixVersion>
                                    <component>General</component>
                        <due></due>
                            <votes>8</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14412981" author="npellow" created="Thu, 17 Apr 2008 03:04:43 +0000"  >&lt;p&gt;To reproduce this bug, simply unpack this archive and run:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;mvn clean install
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When run with version 2.0.9 of maven you will see that the properties get resolved.&lt;br/&gt;
When run with version 2.0.8, these properties are not resolved.&lt;/p&gt;

&lt;p&gt;Please let me know if you have any difficulties reproducing this.&lt;/p&gt;</comment>
                            <comment id="14413152" author="sisbell" created="Wed, 14 May 2008 13:02:23 +0000"  >&lt;p&gt;I tried to run the attached project but received a build error:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; You need to configure a license file location for Clover. You can create an evaluation license at &lt;a href=&quot;http://www.atlassian.com/ex/GenerateLicense.jspa?product=Clover&amp;amp;version=2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.atlassian.com/ex/GenerateLicense.jspa?product=Clover&amp;amp;version=2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Looks as though there is a registration process needed prior to verifing the bug.&lt;/p&gt;</comment>
                            <comment id="14413051" author="npellow" created="Wed, 14 May 2008 19:40:52 +0000"  >&lt;p&gt;Hi Shane, &lt;/p&gt;

&lt;p&gt;No need for verification. I mistakenly left a reference to the clover maven plugin. This is not needed to reproduce the bug.&lt;br/&gt;
Please remove the plugin configuration from the pom.xml and try again.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached the archive again, with the plugin removed.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Nick&lt;/p&gt;</comment>
                            <comment id="14413072" author="npellow" created="Wed, 14 May 2008 19:41:56 +0000"  >&lt;p&gt;This archive has no dependency on Clover.&lt;/p&gt;

&lt;p&gt;FYI - the next release of the clover plugin will be have a valid evaluation license bundled.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Nick&lt;/p&gt;</comment>
                            <comment id="14413102" author="jdcasey" created="Wed, 4 Jun 2008 17:26:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-3355&quot; title=&quot;CLONE -${pom.build.sourceDirectory} and ${pom.build.testSourceDirectory} no longer recognized&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-3355&quot;&gt;&lt;del&gt;MNG-3355&lt;/del&gt;&lt;/a&gt;: the solution for this item broke &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-3530&quot; title=&quot;Regression: Properties get resolved before the LifeCycle is Forked.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-3530&quot;&gt;&lt;del&gt;MNG-3530&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14413228" author="jdcasey" created="Tue, 10 Jun 2008 17:26:50 +0000"  >&lt;p&gt;I&apos;ve refactored the way POM expressions are resolved in the build section, and will be posting my proposal to fix this issue shortly on &lt;a href=&quot;http://docs.codehaus.org/display/MAVEN/Dynamic+POM+Build+Sections&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.codehaus.org/display/MAVEN/Dynamic+POM+Build+Sections&lt;/a&gt; (confluence isn&apos;t responding for me to post a revision to this document ATM)...&lt;/p&gt;

&lt;p&gt;The feature branch I&apos;ve been working on is at:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/maven/components/branches/john-2.0.x-dynamicBuild&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/maven/components/branches/john-2.0.x-dynamicBuild&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;One question, though: I&apos;ve tried to run the &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-3530&quot; title=&quot;Regression: Properties get resolved before the LifeCycle is Forked.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-3530&quot;&gt;&lt;del&gt;MNG-3530&lt;/del&gt;&lt;/a&gt; project attached to this issue, and it fails without creating a target/clover/test.clover directory. This would seem to be because clover isn&apos;t running when you run &apos;mvn clean install&apos;...is there another way to verify this fix against the issue you&apos;re reporting? I&apos;ve added integration tests for this issue here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/repos/asf/maven/core-integration-testing/trunk/core-integration-tests/src/test/resources/mng-3530-dynamicPOMInterpolation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/maven/core-integration-testing/trunk/core-integration-tests/src/test/resources/mng-3530-dynamicPOMInterpolation&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;But, I&apos;m not sure whether they express the whole problem.&lt;/p&gt;</comment>
                            <comment id="14413239" author="jdcasey" created="Tue, 24 Jun 2008 15:42:57 +0000"  >&lt;p&gt;merged from feature branch, and verified on 2.0.x branch build.&lt;/p&gt;</comment>
                            <comment id="14413909" author="npellow" created="Wed, 17 Dec 2008 22:50:46 +0000"  >&lt;p&gt;Hi John, &lt;/p&gt;

&lt;p&gt;Could you please confirm which branch this has been fixed on?&lt;br/&gt;
This behavior still persists for me under Maven 2.1.0-M1.&lt;br/&gt;
The attached .zip file still reproduces the problem.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Nick&lt;/p&gt;</comment>
                            <comment id="14413965" author="brettporter" created="Wed, 17 Dec 2008 23:27:25 +0000"  >&lt;p&gt;need to review the fix and the IT, I have the same problem in both sample projects provided with 2.1.0-M1&lt;/p&gt;</comment>
                            <comment id="14414420" author="jdcasey" created="Fri, 6 Feb 2009 12:35:53 +0000"  >&lt;p&gt;I can&apos;t get the attached sample project to fail. I&apos;m using JDK 1.4 with Maven 2.1.0-M1, and had to modify the POM to include the following repository entry:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;pluginRepositories&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;pluginRepository&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;atlassian&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;url&amp;gt;&lt;/span&gt;http://repository.atlassian.com/maven2&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/url&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/pluginRepository&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/pluginRepositories&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but it clearly shows the xdoclet plugin creating the target/clover/test.clover file...&lt;/p&gt;

&lt;p&gt;Can someone tell me how I can reproduce this problem? BTW, the Maven core ITs are all passing here for this issue, too...&lt;/p&gt;</comment>
                            <comment id="14414338" author="npellow" created="Sun, 8 Feb 2009 17:39:42 +0000"  >&lt;p&gt;Hi john, &lt;/p&gt;

&lt;p&gt;Thanks for looking into this. This looks to now be fixed on 2.1.0-M1. It is not however working for 2.0.10-RC8.&lt;/p&gt;

&lt;p&gt;Here is my output running:&lt;br/&gt;
&lt;tt&gt;mvn clean clover2:instrument&lt;/tt&gt; using maven 2.0.8, 2.0.9, 2.0.10-RC8 and 2.1.0-M1:&lt;/p&gt;

&lt;p&gt;2.0.8: &lt;b&gt;correct behavior&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[INFO] Initializing DocletTasks!!!
[INFO] Executing tasks
    [touch] Creating /Users/niick/downloads/MNG-3530/target/clover/test.clover
     [echo] Build Dir: ${project.build.directory}/test.clover
[INFO] Executed tasks
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2.0.9 &lt;b&gt;broken&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[INFO] Initializing DocletTasks!!!
[INFO] Executing tasks
    [touch] Creating /Users/niick/downloads/MNG-3530/target/test.clover
     [echo] Build Dir: /Users/niick/downloads/MNG-3530/target/test.clover
[INFO] Executed tasks
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2.0.10-RC8 &lt;b&gt;broken&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[INFO] Executing tasks
    [touch] Creating /Users/niick/downloads/MNG-3530/target/test.clover
     [echo] Build Dir: /Users/niick/downloads/MNG-3530/target/test.clover
[INFO] Executed tasks
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2.1.0-M1: &lt;b&gt;correct behavior&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[INFO] Initializing DocletTasks!!!
[INFO] Executing tasks
    [touch] Creating /Users/niick/downloads/MNG-3530/target/clover/test.clover
     [echo] Build Dir: /Users/niick/downloads/MNG-3530/target/clover/test.clover
[INFO] Executed tasks
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14414360" author="brettporter" created="Sun, 8 Feb 2009 20:00:11 +0000"  >&lt;p&gt;interesting - I had the problem in 2.1.0-M1. I&apos;ll try it again to confirm, maybe I got them mixed up.&lt;/p&gt;

&lt;p&gt;Nick, can we close this if it is solved in a final 2.1.0 in the near future?&lt;/p&gt;</comment>
                            <comment id="14414324" author="npellow" created="Sun, 8 Feb 2009 21:00:34 +0000"  >&lt;p&gt;Hi Brett, &lt;/p&gt;

&lt;p&gt;Could you please confirm it works under 2.1.0-M1? I just re-read my previous comment that it was broken under 2.1.0-M1 for me too.&lt;br/&gt;
Either both of us were mistaken, or possibly something has changed?&lt;/p&gt;

&lt;p&gt;I am happy to have this closed if solved in a final 2.1.0 release.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;br/&gt;
Nick&lt;/p&gt;</comment>
                            <comment id="14414340" author="jdcasey" created="Mon, 9 Feb 2009 09:35:07 +0000"  >&lt;p&gt;Consolidating to 2.1.0-M1 so we can then rename to 2.1.0. We can weed out any issues we want to push to a later release from this set once we&apos;ve done the consolidation.&lt;/p&gt;</comment>
                            <comment id="14414477" author="brettporter" created="Tue, 10 Feb 2009 03:42:16 +0000"  >&lt;p&gt;I&apos;m still getting this with 2.1.0-M1 and M2-SNAPSHOT. Are we all using the same versions of the plugins?&lt;/p&gt;</comment>
                            <comment id="14414436" author="bentmann" created="Tue, 10 Feb 2009 03:48:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;Are we all using the same versions of the plugins?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The attached test project is missing plugin versions, that should be fixed to wipe out this uncertainty.&lt;/p&gt;</comment>
                            <comment id="14414499" author="brettporter" created="Tue, 10 Feb 2009 03:50:51 +0000"  >&lt;p&gt;I think I made the same mistake I may have made earlier - running &quot;mvn clean install&quot; from the first instructions with the second project. It works if I run the clover instrument command per the latter instructions.&lt;/p&gt;</comment>
                            <comment id="14414500" author="npellow" created="Tue, 10 Feb 2009 16:15:38 +0000"  >&lt;p&gt;ah. sorry for the confusion here. I think I tried removing the Clover plugin entirely from the equation, however left the check in the verifications.xml .&lt;/p&gt;

&lt;p&gt;Cheers,Nick&lt;/p&gt;</comment>
                            <comment id="17998470" author="JIRAUSER302100" created="Sat, 5 Jul 2025 16:37:17 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven/issues/5147&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven#5147&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12794102">MNG-1927</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12796582">MNG-3355</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12794204">MNG-2124</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12794147">MNG-1995</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12796408">MNG-2223</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12712645" name="MNG-3530.tar.gz" size="15545" author="npellow" created="Thu, 17 Apr 2008 03:04:43 +0000"/>
                            <attachment id="12712525" name="MNG-3530.zip" size="22162" author="npellow" created="Wed, 14 May 2008 19:41:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2932n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>