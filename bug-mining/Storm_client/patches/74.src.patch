diff --git a/storm-client/src/jvm/org/apache/storm/pacemaker/codec/ThriftEncoder.java b/storm-client/src/jvm/org/apache/storm/pacemaker/codec/ThriftEncoder.java
index 9dffd0428..349803f4a 100644
--- a/storm-client/src/jvm/org/apache/storm/pacemaker/codec/ThriftEncoder.java
+++ b/storm-client/src/jvm/org/apache/storm/pacemaker/codec/ThriftEncoder.java
@@ -41,6 +41,7 @@ public class ThriftEncoder extends MessageToMessageEncoder<Object> {
         byte[] messageBuffer = new byte[netty_message.encodeLength()];
         ByteBuf wrappedBuffer = Unpooled.wrappedBuffer(messageBuffer);
         try {
+            wrappedBuffer.resetWriterIndex();
             netty_message.write(wrappedBuffer);
             
             message_data.set_message_blob(messageBuffer);
