<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:46:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[STORM-2912] Tick tuple is being shared without resetting start time and incur side-effect to break metrics</title>
                <link>https://issues.apache.org/jira/browse/STORM-2912</link>
                <project id="12314820" key="STORM">Apache Storm</project>
                    <description>&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/STORM-2786&quot; title=&quot;Ackers leak tracking info on failure and lots of other cases.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;STORM-2786&quot;&gt;&lt;del&gt;STORM-2786&lt;/del&gt;&lt;/a&gt; we have applied small optimization: create tick tuple only once and reuse. The optimization completely makes sense, but when measuring built-in metrics, when reused tick tuple is selected for sampling, we never reset start time unless it is selected for sampling again, hence further tick tuple is always considered as sampled with start time unchanged.&lt;/p&gt;

&lt;p&gt;What I&apos;ve observed is that delta&#160;for tick tuple is gradually increasing for some time-period, and reset to 0, which messes up latencies.&#160;It also messes up executed as well because it is always considered as selected tuple (hence recorded to 20x&#160;for tick tuple), but unless interval of tick tuple is super small, the effect is&#160;much smaller then latency.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Here&apos;s part of log denoting this issue. Please take a look at DELTA values, which shouldn&apos;t be such huge.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2018-01-25 13:34:41.464 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14-__acker-executor[1 1] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [30] TASK: 1 DELTA: 0
2018-01-25 13:34:41.658 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-12-counter-executor[3 3] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [3] TASK: 3 DELTA: 87083
2018-01-25 13:34:41.658 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8-counter-executor[2 2] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [3] TASK: 2 DELTA: 6003
2018-01-25 13:34:41.728 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-26-counter-executor[5 5] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [3] TASK: 5 DELTA: 30036
2018-01-25 13:34:41.728 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-4-intermediateRanker-executor[8 8] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 8 DELTA: 4001
2018-01-25 13:34:41.729 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-32-counter-executor[4 4] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [3] TASK: 4 DELTA: 156155
2018-01-25 13:34:41.813 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-16-finalRanker-executor[6 6] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 6 DELTA: 24043
2018-01-25 13:34:41.813 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10-intermediateRanker-executor[7 7] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 7 DELTA: 14025
2018-01-25 13:34:41.813 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-18-intermediateRanker-executor[9 9] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 9 DELTA: 52091
2018-01-25 13:34:41.886 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-28-intermediateRanker-executor[10 10] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 10 DELTA: 18025
2018-01-25 13:34:43.731 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-4-intermediateRanker-executor[8 8] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 8 DELTA: 6004
2018-01-25 13:34:43.817 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-16-finalRanker-executor[6 6] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 6 DELTA: 26047
2018-01-25 13:34:43.817 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10-intermediateRanker-executor[7 7] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 7 DELTA: 16029
2018-01-25 13:34:43.817 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-18-intermediateRanker-executor[9 9] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 9 DELTA: 1
2018-01-25 13:34:43.890 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-28-intermediateRanker-executor[10 10] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 10 DELTA: 20029
2018-01-25 13:34:44.661 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-12-counter-executor[3 3] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [3] TASK: 3 DELTA: 90086
2018-01-25 13:34:44.662 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8-counter-executor[2 2] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [3] TASK: 2 DELTA: 9007
2018-01-25 13:34:44.734 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-26-counter-executor[5 5] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [3] TASK: 5 DELTA: 33042
2018-01-25 13:34:44.734 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-32-counter-executor[4 4] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [3] TASK: 4 DELTA: 159160
2018-01-25 13:34:45.735 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-4-intermediateRanker-executor[8 8] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 8 DELTA: 8008
2018-01-25 13:34:45.820 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-18-intermediateRanker-executor[9 9] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 9 DELTA: 2004
2018-01-25 13:34:45.821 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-16-finalRanker-executor[6 6] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 6 DELTA: 28051
2018-01-25 13:34:45.821 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10-intermediateRanker-executor[7 7] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 7 DELTA: 18033
2018-01-25 13:34:45.892 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-28-intermediateRanker-executor[10 10] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 10 DELTA: 22031
2018-01-25 13:34:47.663 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-12-counter-executor[3 3] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [3] TASK: 3 DELTA: 93088
2018-01-25 13:34:47.664 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8-counter-executor[2 2] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [3] TASK: 2 DELTA: 12009
2018-01-25 13:34:47.734 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-32-counter-executor[4 4] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [3] TASK: 4 DELTA: 162160
2018-01-25 13:34:47.736 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-4-intermediateRanker-executor[8 8] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 8 DELTA: 10009
2018-01-25 13:34:47.736 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-26-counter-executor[5 5] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [3] TASK: 5 DELTA: 36044
2018-01-25 13:34:47.825 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10-intermediateRanker-executor[7 7] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 7 DELTA: 20037
2018-01-25 13:34:47.826 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-16-finalRanker-executor[6 6] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 6 DELTA: 30056
2018-01-25 13:34:47.826 o.a.s.d.executor &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-18-intermediateRanker-executor[9 9] [INFO] Execute done TUPLE source: __system:-1, stream: __tick, id: {}, [2] TASK: 9 DELTA: 4010&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13133597">STORM-2912</key>
            <summary>Tick tuple is being shared without resetting start time and incur side-effect to break metrics</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kabhwan">Jungtaek Lim</assignee>
                                    <reporter username="kabhwan">Jungtaek Lim</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 25 Jan 2018 06:10:17 +0000</created>
                <updated>Sun, 26 Jan 2025 09:25:39 +0000</updated>
                            <resolved>Fri, 26 Jan 2018 18:28:11 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>1.2.0</version>
                    <version>1.1.2</version>
                    <version>1.0.6</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.1.2</fixVersion>
                    <fixVersion>1.0.6</fixVersion>
                                    <component>storm-client</component>
                    <component>storm-core</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="12000">3h 20m</timespent>
                                <comments>
                            <comment id="16340194" author="kabhwan" created="Thu, 25 Jan 2018 22:20:00 +0000"  >&lt;p&gt;I misunderstood what&apos;s happening here when I fixed the code, and corrected yesterday night. Tick tuple is not related to thread safety, since each executor will initialize separate tick tuple even without this patch. Correction to summary and description.&lt;/p&gt;</comment>
                            <comment id="16341396" author="ptgoetz" created="Fri, 26 Jan 2018 18:28:11 +0000"  >&lt;p&gt;Merged to master, 1.x-branch, 1.1.x-branch, 1.0.x-branch.&lt;/p&gt;</comment>
                            <comment id="17919885" author="githubbot" created="Sun, 26 Jan 2025 09:25:39 +0000"  >&lt;p&gt;For your information, &lt;a href=&quot;https://issues.apache.org/jira/projects/STORM/issues/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;all STORM issues&lt;/a&gt;  have been transferred to Github: &lt;a href=&quot;https://github.com/apache/storm/issues/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/storm/issues/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here is the direct link to this issue in Github: &lt;a href=&quot;https://github.com/apache/storm/issues//6694&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/storm/issues//6694&lt;/a&gt;&lt;br/&gt;
And here is the link to a search for related issues: &lt;a href=&quot;https://github.com/apache/storm/issues/?q=%22STORM-2912%22&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/storm/issues/?q=%22STORM-2912%22&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(Note: this is an automated bulk comment)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pcb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>