[{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/comments/1726655964","html_url":"https://github.com/Alamofire/Alamofire/issues/3778#issuecomment-1726655964","issue_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3778","id":1726655964,"node_id":"IC_kwDOAVavk85m6q3c","user":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-19T23:01:40Z","updated_at":"2023-09-19T23:01:40Z","body":"Confirmed, thanks for the report!\r\n\r\nOddly, this isn't the case for `[String: String?]`, so I'll have to figure out why that is. I've replicated your solution but it would only fix it for `String?` values, and I'd rather not have to have an overload for every type.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/comments/1726655964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10416031933,"node_id":"AE_lADOAVavk85xeg7YzwAAAAJs2Ai9","url":"https://api.github.com/repos/Alamofire/Alamofire/issues/events/10416031933","actor":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2023-09-19T23:01:43Z","assignee":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":10416032218,"node_id":"LE_lADOAVavk85xeg7YzwAAAAJs2Ana","url":"https://api.github.com/repos/Alamofire/Alamofire/issues/events/10416032218","actor":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-09-19T23:01:48Z","label":{"name":"bug","color":"ff3333"},"performed_via_github_app":null},{"actor":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-19T23:54:10Z","updated_at":"2023-09-19T23:54:10Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3779","repository_url":"https://api.github.com/repos/Alamofire/Alamofire","labels_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3779/labels{/name}","comments_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3779/comments","events_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3779/events","html_url":"https://github.com/Alamofire/Alamofire/pull/3779","id":1903868967,"node_id":"PR_kwDOAVavk85auZfJ","number":3779,"title":"Add encodeIfPresent Support to URLEncodedFormEncoder","user":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/Alamofire/Alamofire/milestones/88","html_url":"https://github.com/Alamofire/Alamofire/milestone/88","labels_url":"https://api.github.com/repos/Alamofire/Alamofire/milestones/88/labels","id":10099907,"node_id":"MI_kwDOAVavk84AmhzD","number":88,"title":"5.8.1","description":"","creator":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":6,"state":"closed","created_at":"2023-10-24T14:15:37Z","updated_at":"2024-03-02T21:20:55Z","due_on":null,"closed_at":"2024-03-02T21:20:55Z"},"comments":0,"created_at":"2023-09-19T23:54:10Z","updated_at":"2023-12-17T15:45:45Z","closed_at":"2023-09-20T00:11:32Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":22458259,"node_id":"MDEwOlJlcG9zaXRvcnkyMjQ1ODI1OQ==","name":"Alamofire","full_name":"Alamofire/Alamofire","private":false,"owner":{"login":"Alamofire","id":7774181,"node_id":"MDEyOk9yZ2FuaXphdGlvbjc3NzQxODE=","avatar_url":"https://avatars.githubusercontent.com/u/7774181?v=4","gravatar_id":"","url":"https://api.github.com/users/Alamofire","html_url":"https://github.com/Alamofire","followers_url":"https://api.github.com/users/Alamofire/followers","following_url":"https://api.github.com/users/Alamofire/following{/other_user}","gists_url":"https://api.github.com/users/Alamofire/gists{/gist_id}","starred_url":"https://api.github.com/users/Alamofire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Alamofire/subscriptions","organizations_url":"https://api.github.com/users/Alamofire/orgs","repos_url":"https://api.github.com/users/Alamofire/repos","events_url":"https://api.github.com/users/Alamofire/events{/privacy}","received_events_url":"https://api.github.com/users/Alamofire/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/Alamofire/Alamofire","description":"Elegant HTTP Networking in Swift","fork":false,"url":"https://api.github.com/repos/Alamofire/Alamofire","forks_url":"https://api.github.com/repos/Alamofire/Alamofire/forks","keys_url":"https://api.github.com/repos/Alamofire/Alamofire/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Alamofire/Alamofire/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Alamofire/Alamofire/teams","hooks_url":"https://api.github.com/repos/Alamofire/Alamofire/hooks","issue_events_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/events{/number}","events_url":"https://api.github.com/repos/Alamofire/Alamofire/events","assignees_url":"https://api.github.com/repos/Alamofire/Alamofire/assignees{/user}","branches_url":"https://api.github.com/repos/Alamofire/Alamofire/branches{/branch}","tags_url":"https://api.github.com/repos/Alamofire/Alamofire/tags","blobs_url":"https://api.github.com/repos/Alamofire/Alamofire/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Alamofire/Alamofire/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Alamofire/Alamofire/git/refs{/sha}","trees_url":"https://api.github.com/repos/Alamofire/Alamofire/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Alamofire/Alamofire/statuses/{sha}","languages_url":"https://api.github.com/repos/Alamofire/Alamofire/languages","stargazers_url":"https://api.github.com/repos/Alamofire/Alamofire/stargazers","contributors_url":"https://api.github.com/repos/Alamofire/Alamofire/contributors","subscribers_url":"https://api.github.com/repos/Alamofire/Alamofire/subscribers","subscription_url":"https://api.github.com/repos/Alamofire/Alamofire/subscription","commits_url":"https://api.github.com/repos/Alamofire/Alamofire/commits{/sha}","git_commits_url":"https://api.github.com/repos/Alamofire/Alamofire/git/commits{/sha}","comments_url":"https://api.github.com/repos/Alamofire/Alamofire/comments{/number}","issue_comment_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/comments{/number}","contents_url":"https://api.github.com/repos/Alamofire/Alamofire/contents/{+path}","compare_url":"https://api.github.com/repos/Alamofire/Alamofire/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Alamofire/Alamofire/merges","archive_url":"https://api.github.com/repos/Alamofire/Alamofire/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Alamofire/Alamofire/downloads","issues_url":"https://api.github.com/repos/Alamofire/Alamofire/issues{/number}","pulls_url":"https://api.github.com/repos/Alamofire/Alamofire/pulls{/number}","milestones_url":"https://api.github.com/repos/Alamofire/Alamofire/milestones{/number}","notifications_url":"https://api.github.com/repos/Alamofire/Alamofire/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Alamofire/Alamofire/labels{/name}","releases_url":"https://api.github.com/repos/Alamofire/Alamofire/releases{/id}","deployments_url":"https://api.github.com/repos/Alamofire/Alamofire/deployments","created_at":"2014-07-31T05:56:19Z","updated_at":"2025-11-10T12:47:33Z","pushed_at":"2025-11-10T03:54:38Z","git_url":"git://github.com/Alamofire/Alamofire.git","ssh_url":"git@github.com:Alamofire/Alamofire.git","clone_url":"https://github.com/Alamofire/Alamofire.git","svn_url":"https://github.com/Alamofire/Alamofire","homepage":"","size":39182,"stargazers_count":42212,"watchers_count":42212,"language":"Swift","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":7641,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":42,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["alamofire","carthage","certificate-pinning","cocoapods","httpurlresponse","networking","parameter-encoding","public-key-pinning","request","response","swift","swift-package-manager","urlrequest","urlsession","xcode"],"visibility":"public","forks":7641,"open_issues":42,"watchers":42212,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/Alamofire/Alamofire/pulls/3779","html_url":"https://github.com/Alamofire/Alamofire/pull/3779","diff_url":"https://github.com/Alamofire/Alamofire/pull/3779.diff","patch_url":"https://github.com/Alamofire/Alamofire/pull/3779.patch","merged_at":"2023-09-20T00:11:32Z"},"body":"### Issue Link :link:\r\nFixes #3778\r\n\r\n### Goals :soccer:\r\nThe encoding of synthesized `Encodable` values is different than `[String: String?]` so we were missing coverage for `encodeIfPresent`, causing `Optional` values to be dropped. This PR adds the missing support.\r\n\r\n### Implementation Details :construction:\r\nAdded all of the `encodeIfPresent` overloads to `_URLEncodedFormEncoder.KeyedContainer` so that the protocol uses the custom implementation.\r\n\r\n### Testing Details :mag:\r\nTests added for `Encodable` values with optional properties.\r\n","reactions":{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3779/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/comments/1726692655","html_url":"https://github.com/Alamofire/Alamofire/issues/3778#issuecomment-1726692655","issue_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3778","id":1726692655,"node_id":"IC_kwDOAVavk85m6z0v","user":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-19T23:54:57Z","updated_at":"2023-09-19T23:54:57Z","body":"I've fixed this in #3779, feel free to take a look and ensure it works for you before I merge.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/comments/1726692655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10416345370,"node_id":"CE_lADOAVavk85xeg7YzwAAAAJs3NEa","url":"https://api.github.com/repos/Alamofire/Alamofire/issues/events/10416345370","actor":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2023-09-20T00:11:34Z","state_reason":null,"performed_via_github_app":null},{"id":10416345563,"node_id":"REFE_lADOAVavk85xeg7YzwAAAAJs3NHb","url":"https://api.github.com/repos/Alamofire/Alamofire/issues/events/10416345563","actor":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1df2a75e74384b4ca37e7aab7d4f473339fb83c2","commit_url":"https://api.github.com/repos/Alamofire/Alamofire/commits/1df2a75e74384b4ca37e7aab7d4f473339fb83c2","created_at":"2023-09-20T00:11:36Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/comments/1726703674","html_url":"https://github.com/Alamofire/Alamofire/issues/3778#issuecomment-1726703674","issue_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3778","id":1726703674,"node_id":"IC_kwDOAVavk85m62g6","user":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-20T00:12:18Z","updated_at":"2023-09-20T00:12:18Z","body":"This has been merged and will go out in the next release. Depending on whatever else I may want to go out, it may be as soon as tomorrow or this weekend.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/comments/1726703674/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/comments/1729522170","html_url":"https://github.com/Alamofire/Alamofire/issues/3778#issuecomment-1729522170","issue_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3778","id":1729522170,"node_id":"IC_kwDOAVavk85nFmn6","user":{"login":"amarcadet","id":1073483,"node_id":"MDQ6VXNlcjEwNzM0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/1073483?v=4","gravatar_id":"","url":"https://api.github.com/users/amarcadet","html_url":"https://github.com/amarcadet","followers_url":"https://api.github.com/users/amarcadet/followers","following_url":"https://api.github.com/users/amarcadet/following{/other_user}","gists_url":"https://api.github.com/users/amarcadet/gists{/gist_id}","starred_url":"https://api.github.com/users/amarcadet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amarcadet/subscriptions","organizations_url":"https://api.github.com/users/amarcadet/orgs","repos_url":"https://api.github.com/users/amarcadet/repos","events_url":"https://api.github.com/users/amarcadet/events{/privacy}","received_events_url":"https://api.github.com/users/amarcadet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-21T13:02:21Z","updated_at":"2023-09-21T13:02:21Z","body":"Thank you for your quick reply! Awesome üôè ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/comments/1729522170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"amarcadet","id":1073483,"node_id":"MDQ6VXNlcjEwNzM0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/1073483?v=4","gravatar_id":"","url":"https://api.github.com/users/amarcadet","html_url":"https://github.com/amarcadet","followers_url":"https://api.github.com/users/amarcadet/followers","following_url":"https://api.github.com/users/amarcadet/following{/other_user}","gists_url":"https://api.github.com/users/amarcadet/gists{/gist_id}","starred_url":"https://api.github.com/users/amarcadet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amarcadet/subscriptions","organizations_url":"https://api.github.com/users/amarcadet/orgs","repos_url":"https://api.github.com/users/amarcadet/repos","events_url":"https://api.github.com/users/amarcadet/events{/privacy}","received_events_url":"https://api.github.com/users/amarcadet/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/comments/1776991392","html_url":"https://github.com/Alamofire/Alamofire/issues/3778#issuecomment-1776991392","issue_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3778","id":1776991392,"node_id":"IC_kwDOAVavk85p6ryg","user":{"login":"amarcadet","id":1073483,"node_id":"MDQ6VXNlcjEwNzM0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/1073483?v=4","gravatar_id":"","url":"https://api.github.com/users/amarcadet","html_url":"https://github.com/amarcadet","followers_url":"https://api.github.com/users/amarcadet/followers","following_url":"https://api.github.com/users/amarcadet/following{/other_user}","gists_url":"https://api.github.com/users/amarcadet/gists{/gist_id}","starred_url":"https://api.github.com/users/amarcadet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amarcadet/subscriptions","organizations_url":"https://api.github.com/users/amarcadet/orgs","repos_url":"https://api.github.com/users/amarcadet/repos","events_url":"https://api.github.com/users/amarcadet/events{/privacy}","received_events_url":"https://api.github.com/users/amarcadet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T11:02:45Z","updated_at":"2023-10-24T11:02:45Z","body":"Coming back here for an update, do you plan to release a version with the fix soon?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/comments/1776991392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"amarcadet","id":1073483,"node_id":"MDQ6VXNlcjEwNzM0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/1073483?v=4","gravatar_id":"","url":"https://api.github.com/users/amarcadet","html_url":"https://github.com/amarcadet","followers_url":"https://api.github.com/users/amarcadet/followers","following_url":"https://api.github.com/users/amarcadet/following{/other_user}","gists_url":"https://api.github.com/users/amarcadet/gists{/gist_id}","starred_url":"https://api.github.com/users/amarcadet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amarcadet/subscriptions","organizations_url":"https://api.github.com/users/amarcadet/orgs","repos_url":"https://api.github.com/users/amarcadet/repos","events_url":"https://api.github.com/users/amarcadet/events{/privacy}","received_events_url":"https://api.github.com/users/amarcadet/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/comments/1777282967","html_url":"https://github.com/Alamofire/Alamofire/issues/3778#issuecomment-1777282967","issue_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3778","id":1777282967,"node_id":"IC_kwDOAVavk85p7y-X","user":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T14:04:09Z","updated_at":"2023-10-24T14:04:09Z","body":"I was hoping to release it alongside `WebSocketRequest` but I'm still working on things there. I'll do a release.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/comments/1777282967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/comments/1781829548","html_url":"https://github.com/Alamofire/Alamofire/issues/3778#issuecomment-1781829548","issue_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3778","id":1781829548,"node_id":"IC_kwDOAVavk85qNI-s","user":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T20:11:14Z","updated_at":"2023-10-26T20:11:14Z","body":"I've released 5.8.1 with this fix but CocoaPods availability will be delayed pending a backend issue on their side. SPM / Carthage should see it now.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/comments/1781829548/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jshier","id":51020,"node_id":"MDQ6VXNlcjUxMDIw","avatar_url":"https://avatars.githubusercontent.com/u/51020?v=4","gravatar_id":"","url":"https://api.github.com/users/jshier","html_url":"https://github.com/jshier","followers_url":"https://api.github.com/users/jshier/followers","following_url":"https://api.github.com/users/jshier/following{/other_user}","gists_url":"https://api.github.com/users/jshier/gists{/gist_id}","starred_url":"https://api.github.com/users/jshier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshier/subscriptions","organizations_url":"https://api.github.com/users/jshier/orgs","repos_url":"https://api.github.com/users/jshier/repos","events_url":"https://api.github.com/users/jshier/events{/privacy}","received_events_url":"https://api.github.com/users/jshier/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"phoney","id":3106038,"node_id":"MDQ6VXNlcjMxMDYwMzg=","avatar_url":"https://avatars.githubusercontent.com/u/3106038?v=4","gravatar_id":"","url":"https://api.github.com/users/phoney","html_url":"https://github.com/phoney","followers_url":"https://api.github.com/users/phoney/followers","following_url":"https://api.github.com/users/phoney/following{/other_user}","gists_url":"https://api.github.com/users/phoney/gists{/gist_id}","starred_url":"https://api.github.com/users/phoney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phoney/subscriptions","organizations_url":"https://api.github.com/users/phoney/orgs","repos_url":"https://api.github.com/users/phoney/repos","events_url":"https://api.github.com/users/phoney/events{/privacy}","received_events_url":"https://api.github.com/users/phoney/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-15T22:58:02Z","updated_at":"2024-05-15T22:58:02Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3870","repository_url":"https://api.github.com/repos/Alamofire/Alamofire","labels_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3870/labels{/name}","comments_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3870/comments","events_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3870/events","html_url":"https://github.com/Alamofire/Alamofire/issues/3870","id":2298989356,"node_id":"I_kwDOAVavk86JB8ss","number":3870,"title":"EncodeIfPresent Doesn't Honor If An Optional is Present for URLEncodedFormEncoder","user":{"login":"phoney","id":3106038,"node_id":"MDQ6VXNlcjMxMDYwMzg=","avatar_url":"https://avatars.githubusercontent.com/u/3106038?v=4","gravatar_id":"","url":"https://api.github.com/users/phoney","html_url":"https://github.com/phoney","followers_url":"https://api.github.com/users/phoney/followers","following_url":"https://api.github.com/users/phoney/following{/other_user}","gists_url":"https://api.github.com/users/phoney/gists{/gist_id}","starred_url":"https://api.github.com/users/phoney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phoney/subscriptions","organizations_url":"https://api.github.com/users/phoney/orgs","repos_url":"https://api.github.com/users/phoney/repos","events_url":"https://api.github.com/users/phoney/events{/privacy}","received_events_url":"https://api.github.com/users/phoney/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":207127011,"node_id":"MDU6TGFiZWwyMDcxMjcwMTE=","url":"https://api.github.com/repos/Alamofire/Alamofire/labels/feature%20request","name":"feature request","color":"2575FF","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-05-15T22:55:36Z","updated_at":"2025-09-10T15:16:49Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":22458259,"node_id":"MDEwOlJlcG9zaXRvcnkyMjQ1ODI1OQ==","name":"Alamofire","full_name":"Alamofire/Alamofire","private":false,"owner":{"login":"Alamofire","id":7774181,"node_id":"MDEyOk9yZ2FuaXphdGlvbjc3NzQxODE=","avatar_url":"https://avatars.githubusercontent.com/u/7774181?v=4","gravatar_id":"","url":"https://api.github.com/users/Alamofire","html_url":"https://github.com/Alamofire","followers_url":"https://api.github.com/users/Alamofire/followers","following_url":"https://api.github.com/users/Alamofire/following{/other_user}","gists_url":"https://api.github.com/users/Alamofire/gists{/gist_id}","starred_url":"https://api.github.com/users/Alamofire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Alamofire/subscriptions","organizations_url":"https://api.github.com/users/Alamofire/orgs","repos_url":"https://api.github.com/users/Alamofire/repos","events_url":"https://api.github.com/users/Alamofire/events{/privacy}","received_events_url":"https://api.github.com/users/Alamofire/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/Alamofire/Alamofire","description":"Elegant HTTP Networking in Swift","fork":false,"url":"https://api.github.com/repos/Alamofire/Alamofire","forks_url":"https://api.github.com/repos/Alamofire/Alamofire/forks","keys_url":"https://api.github.com/repos/Alamofire/Alamofire/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Alamofire/Alamofire/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Alamofire/Alamofire/teams","hooks_url":"https://api.github.com/repos/Alamofire/Alamofire/hooks","issue_events_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/events{/number}","events_url":"https://api.github.com/repos/Alamofire/Alamofire/events","assignees_url":"https://api.github.com/repos/Alamofire/Alamofire/assignees{/user}","branches_url":"https://api.github.com/repos/Alamofire/Alamofire/branches{/branch}","tags_url":"https://api.github.com/repos/Alamofire/Alamofire/tags","blobs_url":"https://api.github.com/repos/Alamofire/Alamofire/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Alamofire/Alamofire/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Alamofire/Alamofire/git/refs{/sha}","trees_url":"https://api.github.com/repos/Alamofire/Alamofire/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Alamofire/Alamofire/statuses/{sha}","languages_url":"https://api.github.com/repos/Alamofire/Alamofire/languages","stargazers_url":"https://api.github.com/repos/Alamofire/Alamofire/stargazers","contributors_url":"https://api.github.com/repos/Alamofire/Alamofire/contributors","subscribers_url":"https://api.github.com/repos/Alamofire/Alamofire/subscribers","subscription_url":"https://api.github.com/repos/Alamofire/Alamofire/subscription","commits_url":"https://api.github.com/repos/Alamofire/Alamofire/commits{/sha}","git_commits_url":"https://api.github.com/repos/Alamofire/Alamofire/git/commits{/sha}","comments_url":"https://api.github.com/repos/Alamofire/Alamofire/comments{/number}","issue_comment_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/comments{/number}","contents_url":"https://api.github.com/repos/Alamofire/Alamofire/contents/{+path}","compare_url":"https://api.github.com/repos/Alamofire/Alamofire/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Alamofire/Alamofire/merges","archive_url":"https://api.github.com/repos/Alamofire/Alamofire/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Alamofire/Alamofire/downloads","issues_url":"https://api.github.com/repos/Alamofire/Alamofire/issues{/number}","pulls_url":"https://api.github.com/repos/Alamofire/Alamofire/pulls{/number}","milestones_url":"https://api.github.com/repos/Alamofire/Alamofire/milestones{/number}","notifications_url":"https://api.github.com/repos/Alamofire/Alamofire/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Alamofire/Alamofire/labels{/name}","releases_url":"https://api.github.com/repos/Alamofire/Alamofire/releases{/id}","deployments_url":"https://api.github.com/repos/Alamofire/Alamofire/deployments","created_at":"2014-07-31T05:56:19Z","updated_at":"2025-11-10T12:47:33Z","pushed_at":"2025-11-10T03:54:38Z","git_url":"git://github.com/Alamofire/Alamofire.git","ssh_url":"git@github.com:Alamofire/Alamofire.git","clone_url":"https://github.com/Alamofire/Alamofire.git","svn_url":"https://github.com/Alamofire/Alamofire","homepage":"","size":39182,"stargazers_count":42212,"watchers_count":42212,"language":"Swift","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":7641,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":42,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["alamofire","carthage","certificate-pinning","cocoapods","httpurlresponse","networking","parameter-encoding","public-key-pinning","request","response","swift","swift-package-manager","urlrequest","urlsession","xcode"],"visibility":"public","forks":7641,"open_issues":42,"watchers":42212,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"* [ X] I've read, understood, and done my best to follow the [*CONTRIBUTING guidelines](https://github.com/Alamofire/Alamofire/blob/master/CONTRIBUTING.md).\r\n\r\n## What did you do?\r\n\r\nI expect that ```encodeIfPresent()``` when used with ```URLEncodedFormEncoder``` will NOT emit an optional value that is ```nil```. I expect that a simple ```encode()``` WILL include an optional value, even if it's nil, based on the ```nilEncoding``` value. I believe that's how JSONEncoder works but I don't think that's how ```URLEncodedFormEncoder``` works.\r\n\r\nI have these two unit tests that I expect to pass. The ```JSONEncoder``` test passes but the URLEncodedFormEncoder test doesn't pass.\r\n\r\n```\r\n    private struct OptionalEncodableStruct2: Encodable {\r\n        let one = \"one\"\r\n        let two: String? = nil\r\n        let three: String? = nil\r\n\r\n        func encode(to encoder: any Encoder) throws {\r\n            var container = encoder.container(keyedBy: CodingKeys.self)\r\n\r\n            try container.encode(one, forKey: .one)\r\n            try container.encode(two, forKey: .two)\r\n            try container.encodeIfPresent(three, forKey: .three)\r\n        }\r\n\r\n        private enum CodingKeys: String, CodingKey {\r\n            case one, two, three\r\n        }\r\n    }\r\n\r\n    func testThatEncodeIfPresentDoesntEncodeNil() {\r\n        // Given\r\n        let encoder = URLEncodedFormEncoder(nilEncoding: .null)\r\n\r\n        // When\r\n        let result = Result<String, Error> { try encoder.encode(OptionalEncodableStruct2()) }\r\n\r\n        // Then\r\n        // XCTAssertEqual(result.success, \"one=one\")   // Cannot convert to string...\r\n        switch result {\r\n        case .success(let value):\r\n            // two should be emitted, three should not be emitted\r\n            XCTAssertEqual(value, \"one=one&two=null\")\r\n            // XCTAssertEqual failed: (\"one=one&three=null&two=null\") is not equal to (\"one=one&two=null\").null\r\n            // XCTAssertEqual failed: (\"one=one&three=&two=\") is not equal to (\"one=one&two=\") .dropValue\r\n            // XCTAssertEqual failed: (\"one=one\") is not equal to (\"one=one&two=null\") .dropKey\r\n        case .failure(let error):\r\n            print(error)\r\n            XCTFail()\r\n        }\r\n    }\r\n\r\n    func testThatEncodeIfPresentDoesntEncodeNilJSONEncoder() throws {\r\n        // Given\r\n        let encoder = JSONEncoder()\r\n\r\n        // When\r\n        let result = try encoder.encode(OptionalEncodableStruct2())\r\n        let value = String(data: result, encoding: .utf8) ?? \"\"\r\n\r\n        // Then\r\n        // two should be emitted, three should not be emitted\r\n        XCTAssertEqual(value, \"{\\\"one\\\":\\\"one\\\",\\\"two\\\":null}\")\r\n    }\r\n```\r\n\r\n## What did you expect to happen?\r\n\r\nI expect that when using ```encodeIfPresent()``` with ```URLEncodedFormEncoder``` that ```nil``` values will not be emitted.\r\nI expect that ```encode()``` works differently from ```encodeIfPresent()``` for nil values.\r\nI expect that ```encode()``` will emil a nil value based on the ```nilEncoding``` value.\r\nI expect that ```encodeIfPresent()``` will only emit a value based on the ```nilEncoding``` value if the optional is not nil.\r\n\r\nI expect that ```URLEncodedFormEncoder``` will handle ```encodeIfPresent()``` in the same way as ```JSONEncoder```.\r\n\r\n## What happened instead?\r\n\r\nA ```nil``` value is emitted both when using ```encode()``` and ```encodeIfPresent()``` for ```nilEncoding``` of ```.null``` and ```.dropValue```. \r\nA ```nil``` value is not emitted both when using ```encode()``` and ```encodeIfPresent()``` for ```nilEncoding``` of ```.dropKey```.\r\n\r\nI have a case where my Encodable struct has several optional values. I want one of them to not be present if it's ```nil``` and I want the other to be present even if it's ```nil```. I realize there's no way to manage this with the simple compiler-emitted encoding but I should be able to manage this by use of ```encode()``` and ```encodeIfPresent()```. The only way to currently do that is to only call ```encodeIfPresent()``` based on whether the object is nil in my ```encode(to:)``` method. \r\n\r\nLike\r\n\r\n```\r\n    if let three {\r\n        try container.encodeIfPresent(three, forKey: .three)\r\n    }\r\n```\r\n\r\nbut it should work like ```JSONEncoder```.\r\n\r\nThis issue is in some way related to this other issue https://github.com/Alamofire/Alamofire/issues/3778\r\n\r\n## Alamofire Environment\r\n\r\nAlamofire Version: 5.9.1\r\nCocoaPods 1.15.2\r\nXcode Version: Version 15.4 (15F31d)\r\nSwift Version: Swift 5\r\nPlatform(s) Running Alamofire: iOS 17.5\r\nmacOS Version Running Xcode: 14.4.1 (23E224)\r\n\r\n## Demo Project\r\n\r\nI think my unit tests above should demonstrate the issue.","reactions":{"url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Alamofire/Alamofire/issues/3870/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"Vivi0074","id":175643004,"node_id":"U_kgDOCngZfA","avatar_url":"https://avatars.githubusercontent.com/u/175643004?v=4","gravatar_id":"","url":"https://api.github.com/users/Vivi0074","html_url":"https://github.com/Vivi0074","followers_url":"https://api.github.com/users/Vivi0074/followers","following_url":"https://api.github.com/users/Vivi0074/following{/other_user}","gists_url":"https://api.github.com/users/Vivi0074/gists{/gist_id}","starred_url":"https://api.github.com/users/Vivi0074/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Vivi0074/subscriptions","organizations_url":"https://api.github.com/users/Vivi0074/orgs","repos_url":"https://api.github.com/users/Vivi0074/repos","events_url":"https://api.github.com/users/Vivi0074/events{/privacy}","received_events_url":"https://api.github.com/users/Vivi0074/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-03T17:20:28Z","updated_at":"2024-09-03T17:20:28Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/Vivi0074/LeBlue/issues/3","repository_url":"https://api.github.com/repos/Vivi0074/LeBlue","labels_url":"https://api.github.com/repos/Vivi0074/LeBlue/issues/3/labels{/name}","comments_url":"https://api.github.com/repos/Vivi0074/LeBlue/issues/3/comments","events_url":"https://api.github.com/repos/Vivi0074/LeBlue/issues/3/events","html_url":"https://github.com/Vivi0074/LeBlue/issues/3","id":2503391661,"node_id":"I_kwDOMWqwM86VNrmt","number":3,"title":"* [ X] I've read, understood, and done my best to follow the [*CONTRIBUTING guidelines](https://github.com/Alamofire/Alamofire/blob/master/CONTRIBUTING.md).","user":{"login":"Vivi0074","id":175643004,"node_id":"U_kgDOCngZfA","avatar_url":"https://avatars.githubusercontent.com/u/175643004?v=4","gravatar_id":"","url":"https://api.github.com/users/Vivi0074","html_url":"https://github.com/Vivi0074","followers_url":"https://api.github.com/users/Vivi0074/followers","following_url":"https://api.github.com/users/Vivi0074/following{/other_user}","gists_url":"https://api.github.com/users/Vivi0074/gists{/gist_id}","starred_url":"https://api.github.com/users/Vivi0074/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Vivi0074/subscriptions","organizations_url":"https://api.github.com/users/Vivi0074/orgs","repos_url":"https://api.github.com/users/Vivi0074/repos","events_url":"https://api.github.com/users/Vivi0074/events{/privacy}","received_events_url":"https://api.github.com/users/Vivi0074/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-09-03T17:20:28Z","updated_at":"2024-09-03T17:20:28Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":829075507,"node_id":"R_kgDOMWqwMw","name":"LeBlue","full_name":"Vivi0074/LeBlue","private":false,"owner":{"login":"Vivi0074","id":175643004,"node_id":"U_kgDOCngZfA","avatar_url":"https://avatars.githubusercontent.com/u/175643004?v=4","gravatar_id":"","url":"https://api.github.com/users/Vivi0074","html_url":"https://github.com/Vivi0074","followers_url":"https://api.github.com/users/Vivi0074/followers","following_url":"https://api.github.com/users/Vivi0074/following{/other_user}","gists_url":"https://api.github.com/users/Vivi0074/gists{/gist_id}","starred_url":"https://api.github.com/users/Vivi0074/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Vivi0074/subscriptions","organizations_url":"https://api.github.com/users/Vivi0074/orgs","repos_url":"https://api.github.com/users/Vivi0074/repos","events_url":"https://api.github.com/users/Vivi0074/events{/privacy}","received_events_url":"https://api.github.com/users/Vivi0074/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/Vivi0074/LeBlue","description":"Cash App trouble shooting!!! WHY?????","fork":false,"url":"https://api.github.com/repos/Vivi0074/LeBlue","forks_url":"https://api.github.com/repos/Vivi0074/LeBlue/forks","keys_url":"https://api.github.com/repos/Vivi0074/LeBlue/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Vivi0074/LeBlue/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Vivi0074/LeBlue/teams","hooks_url":"https://api.github.com/repos/Vivi0074/LeBlue/hooks","issue_events_url":"https://api.github.com/repos/Vivi0074/LeBlue/issues/events{/number}","events_url":"https://api.github.com/repos/Vivi0074/LeBlue/events","assignees_url":"https://api.github.com/repos/Vivi0074/LeBlue/assignees{/user}","branches_url":"https://api.github.com/repos/Vivi0074/LeBlue/branches{/branch}","tags_url":"https://api.github.com/repos/Vivi0074/LeBlue/tags","blobs_url":"https://api.github.com/repos/Vivi0074/LeBlue/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Vivi0074/LeBlue/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Vivi0074/LeBlue/git/refs{/sha}","trees_url":"https://api.github.com/repos/Vivi0074/LeBlue/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Vivi0074/LeBlue/statuses/{sha}","languages_url":"https://api.github.com/repos/Vivi0074/LeBlue/languages","stargazers_url":"https://api.github.com/repos/Vivi0074/LeBlue/stargazers","contributors_url":"https://api.github.com/repos/Vivi0074/LeBlue/contributors","subscribers_url":"https://api.github.com/repos/Vivi0074/LeBlue/subscribers","subscription_url":"https://api.github.com/repos/Vivi0074/LeBlue/subscription","commits_url":"https://api.github.com/repos/Vivi0074/LeBlue/commits{/sha}","git_commits_url":"https://api.github.com/repos/Vivi0074/LeBlue/git/commits{/sha}","comments_url":"https://api.github.com/repos/Vivi0074/LeBlue/comments{/number}","issue_comment_url":"https://api.github.com/repos/Vivi0074/LeBlue/issues/comments{/number}","contents_url":"https://api.github.com/repos/Vivi0074/LeBlue/contents/{+path}","compare_url":"https://api.github.com/repos/Vivi0074/LeBlue/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Vivi0074/LeBlue/merges","archive_url":"https://api.github.com/repos/Vivi0074/LeBlue/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Vivi0074/LeBlue/downloads","issues_url":"https://api.github.com/repos/Vivi0074/LeBlue/issues{/number}","pulls_url":"https://api.github.com/repos/Vivi0074/LeBlue/pulls{/number}","milestones_url":"https://api.github.com/repos/Vivi0074/LeBlue/milestones{/number}","notifications_url":"https://api.github.com/repos/Vivi0074/LeBlue/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Vivi0074/LeBlue/labels{/name}","releases_url":"https://api.github.com/repos/Vivi0074/LeBlue/releases{/id}","deployments_url":"https://api.github.com/repos/Vivi0074/LeBlue/deployments","created_at":"2024-07-15T17:50:58Z","updated_at":"2024-07-15T17:51:02Z","pushed_at":"2024-07-15T17:50:58Z","git_url":"git://github.com/Vivi0074/LeBlue.git","ssh_url":"git@github.com:Vivi0074/LeBlue.git","clone_url":"https://github.com/Vivi0074/LeBlue.git","svn_url":"https://github.com/Vivi0074/LeBlue","homepage":null,"size":0,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":9,"license":null,"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":0,"open_issues":9,"watchers":0,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"* [ X] I've read, understood, and done my best to follow the [*CONTRIBUTING guidelines](https://github.com/Alamofire/Alamofire/blob/master/CONTRIBUTING.md).\r\n\r\n## What did you do?\r\n\r\nI expect that ```encodeIfPresent()``` when used with ```URLEncodedFormEncoder``` will NOT emit an optional value that is ```nil```. I expect that a simple ```encode()``` WILL include an optional value, even if it's nil, based on the ```nilEncoding``` value. I believe that's how JSONEncoder works but I don't think that's how ```URLEncodedFormEncoder``` works.\r\n\r\nI have these two unit tests that I expect to pass. The ```JSONEncoder``` test passes but the URLEncodedFormEncoder test doesn't pass.\r\n\r\n```\r\n    private struct OptionalEncodableStruct2: Encodable {\r\n        let one = \"one\"\r\n        let two: String? = nil\r\n        let three: String? = nil\r\n\r\n        func encode(to encoder: any Encoder) throws {\r\n            var container = encoder.container(keyedBy: CodingKeys.self)\r\n\r\n            try container.encode(one, forKey: .one)\r\n            try container.encode(two, forKey: .two)\r\n            try container.encodeIfPresent(three, forKey: .three)\r\n        }\r\n\r\n        private enum CodingKeys: String, CodingKey {\r\n            case one, two, three\r\n        }\r\n    }\r\n\r\n    func testThatEncodeIfPresentDoesntEncodeNil() {\r\n        // Given\r\n        let encoder = URLEncodedFormEncoder(nilEncoding: .null)\r\n\r\n        // When\r\n        let result = Result<String, Error> { try encoder.encode(OptionalEncodableStruct2()) }\r\n\r\n        // Then\r\n        // XCTAssertEqual(result.success, \"one=one\")   // Cannot convert to string...\r\n        switch result {\r\n        case .success(let value):\r\n            // two should be emitted, three should not be emitted\r\n            XCTAssertEqual(value, \"one=one&two=null\")\r\n            // XCTAssertEqual failed: (\"one=one&three=null&two=null\") is not equal to (\"one=one&two=null\").null\r\n            // XCTAssertEqual failed: (\"one=one&three=&two=\") is not equal to (\"one=one&two=\") .dropValue\r\n            // XCTAssertEqual failed: (\"one=one\") is not equal to (\"one=one&two=null\") .dropKey\r\n        case .failure(let error):\r\n            print(error)\r\n            XCTFail()\r\n        }\r\n    }\r\n\r\n    func testThatEncodeIfPresentDoesntEncodeNilJSONEncoder() throws {\r\n        // Given\r\n        let encoder = JSONEncoder()\r\n\r\n        // When\r\n        let result = try encoder.encode(OptionalEncodableStruct2())\r\n        let value = String(data: result, encoding: .utf8) ?? \"\"\r\n\r\n        // Then\r\n        // two should be emitted, three should not be emitted\r\n        XCTAssertEqual(value, \"{\\\"one\\\":\\\"one\\\",\\\"two\\\":null}\")\r\n    }\r\n```\r\n\r\n## What did you expect to happen?\r\n\r\nI expect that when using ```encodeIfPresent()``` with ```URLEncodedFormEncoder``` that ```nil``` values will not be emitted.\r\nI expect that ```encode()``` works differently from ```encodeIfPresent()``` for nil values.\r\nI expect that ```encode()``` will emil a nil value based on the ```nilEncoding``` value.\r\nI expect that ```encodeIfPresent()``` will only emit a value based on the ```nilEncoding``` value if the optional is not nil.\r\n\r\nI expect that ```URLEncodedFormEncoder``` will handle ```encodeIfPresent()``` in the same way as ```JSONEncoder```.\r\n\r\n## What happened instead?\r\n\r\nA ```nil``` value is emitted both when using ```encode()``` and ```encodeIfPresent()``` for ```nilEncoding``` of ```.null``` and ```.dropValue```. \r\nA ```nil``` value is not emitted both when using ```encode()``` and ```encodeIfPresent()``` for ```nilEncoding``` of ```.dropKey```.\r\n\r\nI have a case where my Encodable struct has several optional values. I want one of them to not be present if it's ```nil``` and I want the other to be present even if it's ```nil```. I realize there's no way to manage this with the simple compiler-emitted encoding but I should be able to manage this by use of ```encode()``` and ```encodeIfPresent()```. The only way to currently do that is to only call ```encodeIfPresent()``` based on whether the object is nil in my ```encode(to:)``` method. \r\n\r\nLike\r\n\r\n```\r\n    if let three {\r\n        try container.encodeIfPresent(three, forKey: .three)\r\n    }\r\n```\r\n\r\nbut it should work like ```JSONEncoder```.\r\n\r\nThis issue is in some way related to this other issue https://github.com/Alamofire/Alamofire/issues/3778\r\n\r\n## Alamofire Environment\r\n\r\nAlamofire Version: 5.9.1\r\nCocoaPods 1.15.2\r\nXcode Version: Version 15.4 (15F31d)\r\nSwift Version: Swift 5\r\nPlatform(s) Running Alamofire: iOS 17.5\r\nmacOS Version Running Xcode: 14.4.1 (23E224)\r\n\r\n## Demo Project\r\n\r\nI think my unit tests above should demonstrate the issue.\n\n_Originally posted by @phoney in https://github.com/Alamofire/Alamofire/issues/3870_","reactions":{"url":"https://api.github.com/repos/Vivi0074/LeBlue/issues/3/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Vivi0074/LeBlue/issues/3/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":17782663239,"node_id":"REFE_lADOAVavk85xeg7YzwAAAAQj7ehH","url":"https://api.github.com/repos/Alamofire/Alamofire/issues/events/17782663239","actor":{"login":"prongbang","id":6635954,"node_id":"MDQ6VXNlcjY2MzU5NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6635954?v=4","gravatar_id":"","url":"https://api.github.com/users/prongbang","html_url":"https://github.com/prongbang","followers_url":"https://api.github.com/users/prongbang/followers","following_url":"https://api.github.com/users/prongbang/following{/other_user}","gists_url":"https://api.github.com/users/prongbang/gists{/gist_id}","starred_url":"https://api.github.com/users/prongbang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prongbang/subscriptions","organizations_url":"https://api.github.com/users/prongbang/orgs","repos_url":"https://api.github.com/users/prongbang/repos","events_url":"https://api.github.com/users/prongbang/events{/privacy}","received_events_url":"https://api.github.com/users/prongbang/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"57c1f9a78b295aca39cae1967459ee9c8f0e3cda","commit_url":"https://api.github.com/repos/prongbang/Alamofire/commits/57c1f9a78b295aca39cae1967459ee9c8f0e3cda","created_at":"2025-05-23T03:47:53Z","performed_via_github_app":null}]