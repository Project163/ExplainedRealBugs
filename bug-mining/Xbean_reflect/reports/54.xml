<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:30:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[XBEAN-266] xbean-reflect embeds asm5 even in not shaded version</title>
                <link>https://issues.apache.org/jira/browse/XBEAN-266</link>
                <project id="12310312" key="XBEAN">XBean</project>
                    <description></description>
                <environment></environment>
        <key id="12715440">XBEAN-266</key>
            <summary>xbean-reflect embeds asm5 even in not shaded version</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="romain.manni-bucau">Romain Manni-Bucau</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 May 2014 11:56:29 +0000</created>
                <updated>Tue, 20 May 2014 19:00:48 +0000</updated>
                            <resolved>Tue, 20 May 2014 19:00:48 +0000</resolved>
                                    <version>3.17</version>
                                    <fixVersion>3.18</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14003200" author="romain.manni-bucau" created="Tue, 20 May 2014 13:13:59 +0000"  >&lt;p&gt;Patch fixing it&lt;/p&gt;</comment>
                            <comment id="14003342" author="gnt" created="Tue, 20 May 2014 14:14:15 +0000"  >&lt;p&gt;I can&apos;t deploy the jars on OSGi with your patch, as xbean-reflect is missing the org.apache.xbean.asm5.original.commons package.&lt;br/&gt;
Though I&apos;m not sure it comes from your patch.&lt;/p&gt;</comment>
                            <comment id="14003387" author="romain.manni-bucau" created="Tue, 20 May 2014 14:45:54 +0000"  >&lt;p&gt;@Guillaume: once added it works? I&apos;ll work on it in 3h about, will add it if enough&lt;/p&gt;

&lt;p&gt;seems I need to configure shading too&lt;/p&gt;</comment>
                            <comment id="14003398" author="romain.manni-bucau" created="Tue, 20 May 2014 14:57:51 +0000"  >&lt;p&gt;another try&lt;/p&gt;

&lt;p&gt;seems imports were wrong when upgrading to asm4/5&lt;/p&gt;</comment>
                            <comment id="14003494" author="gnt" created="Tue, 20 May 2014 15:47:08 +0000"  >&lt;p&gt;I think there&apos;s still some problems.&lt;br/&gt;
My understand is the following:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;xbean-asm5-shaded provides org.apache.xbean.asm5 + org.apache.xbean.asm5.original.commons&lt;/li&gt;
	&lt;li&gt;xbean-asm-util provides org.apache.xbean.asm5.original.commons but is not a bundle&lt;/li&gt;
	&lt;li&gt;xbean-finder uses the org.objectweb.asm packages + org.apache.xbean.asm5.original.commons&lt;/li&gt;
	&lt;li&gt;xbean-finder-shaded uses the org.apache.xbean.asm5 packages + org.apache.xbean.asm5.original.commons&lt;/li&gt;
	&lt;li&gt;xbean-reflect can use both org.apache.xbean.asm5 and org.objectweb.asm packages, but requires at least one of them, and also needs org.apache.xbean.asm5.original.commons&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;IIUC, the use of the shaded packages is mostly for non osgi environments, where multiple asm versions may coexist in incompatible versions.  However, in OSGi, the import version ranges protects against such use case, so the use of the shaded versions is not really interesting.&lt;br/&gt;
The main problems is caused by the fact that org.apache.xbean.asm5.original.commons is only provide by the xbean-asm5-shaded bundle.&lt;/p&gt;

&lt;p&gt;Hence, I wonder if it would make more sense to remove org.apache.xbean.asm5.original.commons from xbean-asm5-shaded and embed it in xbean-finder and xbean-reflect.&lt;/p&gt;
</comment>
                            <comment id="14003549" author="romain.manni-bucau" created="Tue, 20 May 2014 16:04:46 +0000"  >&lt;p&gt;Well the main goal is to avoid to embed twice the same thing.&lt;/p&gt;

&lt;p&gt;Isn&apos;t it org.apache.xbean.asm5.shade.commons instead of org.apache.xbean.asm5.original.commons? xbean-asm-util is just a build hack and shouldn&apos;t be used then. It is in xbean-asm5-shaded which is the reference one for xbean. You are right that in OSGi normal asm package can be used&lt;/p&gt;
</comment>
                            <comment id="14003559" author="gnt" created="Tue, 20 May 2014 16:10:34 +0000"  >&lt;p&gt;Afaik, xbean-finder-shaded does not embeds asm, it&apos;s either provided by xbean-asm5-shaded or by the original asm5 jar.&lt;br/&gt;
The org.apache.xbean.asm5.shade.commons is the shaded version (which uses the shaded asm5 binaries), but xbean-reflect and xbean-finder (not shaded) do not use the shaded asm5, so it needs to be available.&lt;/p&gt;

&lt;p&gt;The main problem is that xbean-asm5-shaded embeds the org.apache.xbean.asm5.shade.commons, but the original org.apache.xbean.asm5.original.commons is not available in any bundle.  &lt;/p&gt;

&lt;p&gt;I&apos;m investigating embedding that single class into the non shaded xbean-finder and xbean-reflect so that they can actually use the plain asm5 jar in osgi.&lt;/p&gt;</comment>
                            <comment id="14003707" author="romain.manni-bucau" created="Tue, 20 May 2014 17:37:06 +0000"  >&lt;p&gt;pushed a version, review welcomed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12645806" name="XBEAN-reflect-osgi-01.patch" size="2347" author="romain.manni-bucau" created="Tue, 20 May 2014 14:57:51 +0000"/>
                            <attachment id="12645788" name="XBEAN-reflect.patch" size="1080" author="romain.manni-bucau" created="Tue, 20 May 2014 13:13:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>393726</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vsof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>393882</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>