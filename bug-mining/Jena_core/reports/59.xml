<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 19:57:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JENA-662] Wrong space handling in FileModelAssembler</title>
                <link>https://issues.apache.org/jira/browse/JENA-662</link>
                <project id="12311220" key="JENA">Apache Jena</project>
                    <description>&lt;p&gt;The method &lt;tt&gt;getDirectoryName&lt;/tt&gt; in &lt;tt&gt;com.hp.hpl.jena.assembler.assemblers.FileModelAssembler&lt;/tt&gt; should also make sure that at some chars, like space should be urldecoded again. E.g. If the URI is &lt;tt&gt;&lt;a href=&quot;file:///tmp/file%20name%20with%20space&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///tmp/file%20name%20with%20space&lt;/a&gt;&lt;/tt&gt; the corresponding file can not be found under &lt;tt&gt;/tmp/file%20name%20with%20space&lt;/tt&gt; but under  &lt;tt&gt;/tmp/file name with space&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;There might be some other chars which have to be taken into account, e.g. &quot;%25&quot; -&amp;gt; &quot;%&quot;, but I don&apos;t think a urldecode over the whole string is correct.&lt;/p&gt;

&lt;p&gt;Sorry I can&apos;t provide an example yet, because I couldn&apos;t isolate this part of the code so far and I didn&apos;t try to write a test for this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12703491">JENA-662</key>
            <summary>Wrong space handling in FileModelAssembler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andy">Andy Seaborne</assignee>
                                    <reporter username="white_gecko">Natanael Arndt</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Mar 2014 15:38:03 +0000</created>
                <updated>Sat, 9 May 2015 16:54:51 +0000</updated>
                            <resolved>Tue, 20 Jan 2015 10:41:29 +0000</resolved>
                                    <version>Jena 2.11.1</version>
                                    <fixVersion>Jena 2.13.0</fixVersion>
                                    <component>Jena</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13946750" author="andy.seaborne" created="Tue, 25 Mar 2014 16:28:17 +0000"  >&lt;p&gt;Where does a &lt;tt&gt;&lt;a href=&quot;file:///tmp/file%20name%20with%20space&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///tmp/file%20name%20with%20space&lt;/a&gt;&lt;/tt&gt; come from in the first place?&lt;/p&gt;

&lt;p&gt;The tricky part of file names with % in them are valid as a filename albeit a different filename.&lt;/p&gt;</comment>
                            <comment id="13946767" author="white_gecko" created="Tue, 25 Mar 2014 16:42:01 +0000"  >&lt;p&gt;But shouldn&apos;t actual &lt;tt&gt;%&lt;/tt&gt;&apos;s in filenames be encoded as &lt;tt&gt;%25&lt;/tt&gt; in the corresponding uris?&lt;/p&gt;</comment>
                            <comment id="13946775" author="andy.seaborne" created="Tue, 25 Mar 2014 16:50:46 +0000"  >&lt;p&gt;Quite possibly - &lt;tt&gt;file:&lt;/tt&gt; is not a very well defined URI scheme so Jena has to make some pragmatic decisions.  Where does the &lt;tt&gt;&lt;a href=&quot;file://&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://&lt;/a&gt;&lt;/tt&gt; with %20 come from?&lt;/p&gt;

&lt;p&gt;A test case to explain the setup would be appreciated.&lt;/p&gt;

&lt;p&gt;org.apache.jena.riot.system.IRILib post-dates that assembler (and it&apos;s in the wrong module) but it does consolidate Jena&apos;s handling of filenames and file IRIs.&lt;/p&gt;</comment>
                            <comment id="13946781" author="white_gecko" created="Tue, 25 Mar 2014 16:56:10 +0000"  >&lt;p&gt;&#8220;Where does the &lt;a href=&quot;file://&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://&lt;/a&gt; with %20 come from?&#8221;&lt;br/&gt;
&#8220;A test case to explain the setup would be appreciated.&#8221;&lt;/p&gt;

&lt;p&gt;Yes I know, but the error occurred in a big project which is currently not running, so its hard to do further debugging, but I wanted to document this issue. I will come back with further information as soon as the project runs again.&lt;/p&gt;</comment>
                            <comment id="13946782" author="jeremycarroll" created="Tue, 25 Mar 2014 16:57:35 +0000"  >&lt;p&gt;In my view the issue is that the % encoding of %&apos;s is unclearly specified.&lt;br/&gt;
You are required to % escape certain characters, and not all.&lt;br/&gt;
Exactly which seems to depend &#8230;.&lt;/p&gt;

&lt;p&gt;Since in this case:&lt;/p&gt;

&lt;p&gt;1) &lt;tt&gt;/tmp/file name with space&lt;/tt&gt; is a legal file name&lt;br/&gt;
2) &lt;tt&gt;&lt;a href=&quot;file:///tmp/file&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///tmp/file&lt;/a&gt; name with space&lt;/tt&gt;  is not a legal IRI&lt;br/&gt;
3) &lt;tt&gt;&lt;a href=&quot;file:///tmp/file%20name%20with%20space&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///tmp/file%20name%20with%20space&lt;/a&gt;&lt;/tt&gt;  is a legal IRI that decodes to &lt;tt&gt;/tmp/file name with space&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;my take is that the only &apos;correct&apos; implementation does indeed replace the %20 with spaces, and if you want to talk about the file&lt;br/&gt;
&lt;tt&gt;/tmp/file%20name%20with%20space&lt;/tt&gt; then the IRI you should use is&lt;br/&gt;
&lt;tt&gt;&lt;a href=&quot;file:///tmp/file%2520name%2520with%2520space&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///tmp/file%2520name%2520with%2520space&lt;/a&gt;&lt;/tt&gt; &lt;/p&gt;

&lt;p&gt;Identifying where in the software stack this should happen is difficult. It is made more difficult because java.net.URI predates the IRI spec, and as far as I know, has not been updated. I also do not believe that they would view this as their problem, but I suspect a careful analysis would make that the most suspect code&lt;/p&gt;</comment>
                            <comment id="13946787" author="andy.seaborne" created="Tue, 25 Mar 2014 17:01:01 +0000"  >&lt;p&gt;Jeremy - see org.apache.jena.riot.system.IRILib - that&apos;s what it does!&lt;/p&gt;</comment>
                            <comment id="13946794" author="jeremycarroll" created="Tue, 25 Mar 2014 17:02:49 +0000"  >&lt;p&gt;Re-reading the original issue, I may have misunderstood. &lt;/p&gt;

&lt;p&gt;getDirectoryName should indeed do a % decode, and that is relatively easy compared with the % encode.&lt;/p&gt;

&lt;p&gt;The method is:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;replace every %&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9A-Fa-f&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9A-Fa-f&amp;#93;&lt;/span&gt;  by the corresponding byte and do the utf-8 thing&lt;br/&gt;
If it goes wrong, throw an exception.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It would be fairly straightforward to write test cases for this behavior. The problem of what to encode when, lies elsewhere, and is harder.&lt;/p&gt;

&lt;p&gt;My expectation is that the software is probably correct and the user expectation of simplicity-of-use needs adjustment. %-encoding is a pig.&lt;/p&gt;</comment>
                            <comment id="13946804" author="jeremycarroll" created="Tue, 25 Mar 2014 17:11:27 +0000"  >&lt;p&gt;The method getDirectoryName in com.hp.hpl.jena.assembler.assemblers.FileModelAssembler does look incorrect to me: it does not appear to decode. The RIOT code does appear correct with a very quick review&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   private String getDirectoryName( Resource root )
        {
        return getRequiredResource( root, JA.directory ).getURI().replaceFirst( &quot;file:&quot;, &quot;&quot; );
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13946899" author="white_gecko" created="Tue, 25 Mar 2014 18:26:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeremycarroll&quot; class=&quot;user-hover&quot; rel=&quot;jeremycarroll&quot;&gt;jeremycarroll&lt;/a&gt; yes exactly this is what I&apos;m saying the code is missing some decoding and its not an issue of &#8220;&#8230; the user expectation of simplicity-of-use needs adjustment&#8221;.&lt;/p&gt;

&lt;p&gt;Here is my example code now. You just have to &lt;tt&gt;touch /tmp/folder\ with\ space/file\ with\ space.ttl&lt;/tt&gt; before.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;		String graphs = &quot;&quot;;
		graphs += &quot;@prefix ja: &amp;lt;http://jena.hpl.hp.com/2005/11/Assembler#&amp;gt; . &quot;;
		graphs += &quot;&amp;lt;http://example.org/file&amp;gt; a ja:FileModel ; &quot;;
		graphs += &quot;ja:directory &amp;lt;file:///tmp/folder%20with%20space/&amp;gt; ; &quot;;
		graphs += &quot;ja:modelName \&quot;file with space.ttl\&quot; . &quot;;
		
		InputStream is = new ByteArrayInputStream(graphs.getBytes());
		
		Model model = ModelFactory.createDefaultModel();
		model.read(is, &quot;http://example.org/&quot;, &quot;TURTLE&quot;);
		Resource r = model.createResource(&quot;http://example.org/file&quot;);
		Model assemblerModel = (Model) Assembler.general.open(r);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This causes an Exception with the following cause:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Caused by: com.hp.hpl.jena.shared.DoesNotExistException: /tmp/folder%20with%20space/file with space.ttl&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;If you also &lt;tt&gt;touch /tmp/folder%20with%20space/file\ with\ space.ttl&lt;/tt&gt; it will work. But this is not the behavior we want.&lt;/p&gt;</comment>
                            <comment id="14259840" author="githubbot" created="Mon, 29 Dec 2014 04:48:40 +0000"  >&lt;p&gt;GitHub user kinow opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/16&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/16&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-662&quot; title=&quot;Wrong space handling in FileModelAssembler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-662&quot;&gt;&lt;del&gt;JENA-662&lt;/del&gt;&lt;/a&gt; Wrong space handling in FileModelAssembler&lt;/p&gt;

&lt;p&gt;    Pull request for &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-662&quot; title=&quot;Wrong space handling in FileModelAssembler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-662&quot;&gt;&lt;del&gt;JENA-662&lt;/del&gt;&lt;/a&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-662&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/JENA-662&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/kinow/jena&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/kinow/jena&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-662&quot; title=&quot;Wrong space handling in FileModelAssembler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-662&quot;&gt;&lt;del&gt;JENA-662&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/16.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/16.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #16&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 36ddaf2a4d13ca27cb8b3841d87e8304908f2ef0&lt;br/&gt;
Author: Bruno P. Kinoshita &amp;lt;brunodepaulak@yahoo.com.br&amp;gt;&lt;br/&gt;
Date:   2014-12-29T04:46:54Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-662&quot; title=&quot;Wrong space handling in FileModelAssembler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-662&quot;&gt;&lt;del&gt;JENA-662&lt;/del&gt;&lt;/a&gt; Wrong space handling in FileModelAssembler&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14259841" author="kinow" created="Mon, 29 Dec 2014 04:51:22 +0000"  >&lt;p&gt;Not sure if there&apos;s a consensus on whether FileModelAssembler should decode the directory name or not. But I&apos;ve made a pull request that fixes the behaviour described in this issue. It simply calls URLDecoder.decode(s, &quot;UTF-8&quot;). &lt;/p&gt;</comment>
                            <comment id="14262972" author="githubbot" created="Fri, 2 Jan 2015 16:03:34 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/16&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/16&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14283635" author="andy.seaborne" created="Tue, 20 Jan 2015 09:39:45 +0000"  >&lt;p&gt;Test failure on windows.&lt;/p&gt;</comment>
                            <comment id="14283655" author="jira-bot" created="Tue, 20 Jan 2015 10:01:48 +0000"  >&lt;p&gt;Commit 43382fa07e542d10fdc93c4b296f15999d6b0268 in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=43382fa&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=43382fa&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-662&quot; title=&quot;Wrong space handling in FileModelAssembler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-662&quot;&gt;&lt;del&gt;JENA-662&lt;/del&gt;&lt;/a&gt; : Stablize for MSWindows&lt;/p&gt;

&lt;p&gt;Convert directory name to URI by &quot;\&quot; =&amp;gt; &quot;/&quot;  and &quot; &quot; =&amp;gt; &quot;%20&quot;&lt;/p&gt;</comment>
                            <comment id="14536761" author="andy.seaborne" created="Sat, 9 May 2015 16:54:51 +0000"  >&lt;p&gt;NB&lt;/p&gt;

&lt;p&gt;FileModels are likely to be removed in Jena3. If that&apos;s an issue for anyone, please email dev@ to discuss this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>381826</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 28 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ts8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382101</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>