<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 19:57:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JENA-489] error message for builtin with wrong number of args is wrong</title>
                <link>https://issues.apache.org/jira/browse/JENA-489</link>
                <project id="12311220" key="JENA">Apache Jena</project>
                    <description>&lt;p&gt;The message for a syntax error in the rule parser when a builtin is used in a backwards rule with the wrong number of arguments is wrong.  The message is generated in emitBody(Functor functor) in RuleClauseCode by these lines:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;                throw new LPRuleSyntaxException(&quot;Wrong number of arguments to functor &quot; + functor.getName() 
                                                  + &quot; expected &quot; + functor.getArgLength(), rule);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Instead of functor.getArgLength() should be builtin.getArgLength(). In context these are:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        void emitBody(Functor functor) {
            Node[] fargs = functor.getArgs();
            Builtin builtin = functor.getImplementor();
            if (builtin == null) {
                throw new LPRuleSyntaxException(&quot;Unknown builtin operation &quot; + functor.getName(), rule);
            }
            if (builtin.getArgLength() != 0 &amp;amp;&amp;amp; builtin.getArgLength() != fargs.length) {
                throw new LPRuleSyntaxException(&quot;Wrong number of arguments to functor &quot; + functor.getName() 
                                                  + &quot; expected &quot; + functor.getArgLength(), rule);
            }
            for (int i = 0; i &amp;lt; fargs.length; i++) {
                Node node = fargs[i];
                // We optionally force an eager dereference of variables here.
                // We used to force this but the current builtin implementations
                // now robust against it (the do a deref themselves anyway).
                 emitBodyPut(node, i, true);
            }
            code[p++] = CALL_BUILTIN;
            code[p++] = (byte)fargs.length;
            args.add(builtin);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Code that demonstates the misleading message follows:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;import com.hp.hpl.jena.rdf.model.InfModel;
import com.hp.hpl.jena.rdf.model.Model;
import com.hp.hpl.jena.rdf.model.ModelFactory;
import com.hp.hpl.jena.reasoner.rulesys.GenericRuleReasoner;
import com.hp.hpl.jena.reasoner.rulesys.Rule;
import com.hp.hpl.jena.reasoner.rulesys.builtins.Sum;
import com.hp.hpl.jena.vocabulary.RDF;

public class JenaBuiltinErrorMessageExample {
	static String rules = &quot;&quot; +
			&quot;[(?x thriceValue ?vvv) &amp;lt;-\n&quot; +
			&quot; (?x rdf:value ?v)\n&quot; +
			&quot; sum(?v,?v,?v,?vvv)]\n&quot; +
			&quot;&quot;;
	Sum sum;
	public static void main( String[] args ) {
		GenericRuleReasoner reasoner = new GenericRuleReasoner( Rule.parseRules( rules ));
		Model base = ModelFactory.createDefaultModel();
		base.createResource().addLiteral( RDF.value, 10 );
		InfModel inf = ModelFactory.createInfModel( reasoner, base );
		inf.write( System.out, &quot;N3&quot; );
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This throws an exception with a misleading message:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; com.hp.hpl.jena.reasoner.rulesys.impl.LPRuleSyntaxException: Syntax error in backward rule: [ (?x thriceValue ?vvv) &amp;lt;- (?x rdf:value ?v) sum(?v ?v ?v ?vvv) ]
Wrong number of arguments to functor sum expected 4
	at com.hp.hpl.jena.reasoner.rulesys.impl.RuleClauseCode$CompileState.emitBody(RuleClauseCode.java:607)
	at com.hp.hpl.jena.reasoner.rulesys.impl.RuleClauseCode.compile(RuleClauseCode.java:213)
	at com.hp.hpl.jena.reasoner.rulesys.impl.LPRuleStore.compileAll(LPRuleStore.java:249)
	at com.hp.hpl.jena.reasoner.rulesys.impl.LPRuleStore.codeFor(LPRuleStore.java:99)
	at com.hp.hpl.jena.reasoner.rulesys.impl.LPRuleStore.codeFor(LPRuleStore.java:119)
	at com.hp.hpl.jena.reasoner.rulesys.impl.LPInterpreter.&amp;lt;init&amp;gt;(LPInterpreter.java:91)
	at com.hp.hpl.jena.reasoner.rulesys.impl.LPBRuleEngine.find(LPBRuleEngine.java:109)
	at com.hp.hpl.jena.reasoner.rulesys.FBRuleInfGraph.findWithContinuation(FBRuleInfGraph.java:575)
	at com.hp.hpl.jena.reasoner.rulesys.FBRuleInfGraph.graphBaseFind(FBRuleInfGraph.java:606)
	at com.hp.hpl.jena.reasoner.BaseInfGraph.graphBaseFind(BaseInfGraph.java:370)
	at com.hp.hpl.jena.graph.impl.GraphBase.find(GraphBase.java:266)
	at com.hp.hpl.jena.graph.compose.DisjointUnion.graphBaseFind(DisjointUnion.java:39)
	at com.hp.hpl.jena.graph.impl.GraphBase.find(GraphBase.java:266)
	at com.hp.hpl.jena.graph.impl.GraphBase.graphBaseFind(GraphBase.java:287)
	at com.hp.hpl.jena.graph.impl.GraphBase.find(GraphBase.java:284)
	at com.hp.hpl.jena.rdf.model.impl.ModelCom.listStatements(ModelCom.java:449)
	at com.hp.hpl.jena.rdf.model.impl.ModelCom.listStatements(ModelCom.java:455)
	at com.hp.hpl.jena.n3.N3JenaWriterPP.prepareLists(N3JenaWriterPP.java:81)
	at com.hp.hpl.jena.n3.N3JenaWriterPP.prepare(N3JenaWriterPP.java:67)
	at com.hp.hpl.jena.n3.N3JenaWriterCommon.processModel(N3JenaWriterCommon.java:275)
	at com.hp.hpl.jena.n3.N3JenaWriterCommon.write(N3JenaWriterCommon.java:197)
	at com.hp.hpl.jena.n3.N3JenaWriterCommon.write(N3JenaWriterCommon.java:209)
	at com.hp.hpl.jena.n3.N3JenaWriter.write(N3JenaWriter.java:171)
	at com.hp.hpl.jena.rdf.model.impl.ModelCom.write(ModelCom.java:327)
	at JenaBuiltinErrorMessageExample.main(JenaBuiltinErrorMessageExample.java:20)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12658356">JENA-489</key>
            <summary>error message for builtin with wrong number of args is wrong</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andy">Andy Seaborne</assignee>
                                    <reporter username="taylorj">Joshua Taylor</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Jul 2013 20:06:56 +0000</created>
                <updated>Sun, 21 Jul 2013 16:54:12 +0000</updated>
                            <resolved>Sun, 21 Jul 2013 16:54:01 +0000</resolved>
                                    <version>Jena 2.10.0</version>
                                    <fixVersion>Jena 2.11.0</fixVersion>
                                    <component>Jena</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="180">0.05h</timeoriginalestimate>
                            <timeestimate seconds="180">0.05h</timeestimate>
                                        <comments>
                            <comment id="13714743" author="jira-bot" created="Sun, 21 Jul 2013 16:53:22 +0000"  >&lt;p&gt;Commit 1505419 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt; in branch &apos;jena/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1505419&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1505419&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-489&quot; title=&quot;error message for builtin with wrong number of args is wrong&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-489&quot;&gt;&lt;del&gt;JENA-489&lt;/del&gt;&lt;/a&gt; - Fix exception message.&lt;/p&gt;</comment>
                            <comment id="13714745" author="andy.seaborne" created="Sun, 21 Jul 2013 16:53:34 +0000"  >&lt;p&gt;Thanks for that.  The Exception message has been changed to:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    throw new LPRuleSyntaxException(&quot;Wrong number of arguments to functor &quot; + functor.getName() 
                                    + &quot; : got &quot; + functor.getArgLength()
                                    + &quot; : expected &quot; + builtin.getArgLength(), rule);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>338550</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 17 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1me67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>338870</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>