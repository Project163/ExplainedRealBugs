<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 19:57:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JENA-805] Graph#isIsomorphicWith should use semantic equivalence when comparing blank nodes</title>
                <link>https://issues.apache.org/jira/browse/JENA-805</link>
                <project id="12311220" key="JENA">Apache Jena</project>
                    <description>&lt;p&gt;It appears that Graph#isIsomorphicWith appears to use syntactic equivalence when comparing blank nodes:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/jena/blob/master/jena-core/src/main/java/com/hp/hpl/jena/graph/impl/GraphMatcher.java#L27&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/blob/master/jena-core/src/main/java/com/hp/hpl/jena/graph/impl/GraphMatcher.java#L27&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It should probably use semantic equivalence instead, or, at the very least, respect the RDF 1.1 equivalence of plain literals and xsd:string-typed literals.&lt;/p&gt;

&lt;p&gt;Here is an example that I believe should be considered isomorphic:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void isomorphismShouldRespectPlainLiteralEquivalence() {

        &lt;span class=&quot;code-comment&quot;&gt;// Without worrying about a blank node, isomorphism works fine:
&lt;/span&gt;        Model model1 = ModelFactory.createDefaultModel();
        model1.read(IOUtils.toInputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;info:x&amp;gt; &amp;lt;info:y&amp;gt; \&quot;&lt;/span&gt;x\&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;), &quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;, &quot;&lt;/span&gt;TTL&quot;);
        Model model2 = ModelFactory.createDefaultModel();
        model2.read(IOUtils.toInputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;info:x&amp;gt; &amp;lt;info:y&amp;gt; \&quot;&lt;/span&gt;x\&lt;span class=&quot;code-quote&quot;&gt;&quot;^^&amp;lt;http:&lt;span class=&quot;code-comment&quot;&gt;//www.w3.org/2001/XMLSchema#string&amp;gt;&quot;&lt;/span&gt;), &lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;, &quot;&lt;/span&gt;TTL&quot;);
&lt;/span&gt;        assertTrue(model1.isIsomorphicWith(model2)); &lt;span class=&quot;code-comment&quot;&gt;// WORKS
&lt;/span&gt;
        &lt;span class=&quot;code-comment&quot;&gt;// Now with a blank node:
&lt;/span&gt;        Model model3 = ModelFactory.createDefaultModel();
        model3.read(IOUtils.toInputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;info:x&amp;gt; &amp;lt;info:y&amp;gt; [ &amp;lt;info:z&amp;gt; \&quot;&lt;/span&gt;x\&lt;span class=&quot;code-quote&quot;&gt;&quot; ]&quot;&lt;/span&gt;), &lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;, &quot;&lt;/span&gt;TTL&quot;);
        Model model4 = ModelFactory.createDefaultModel();
        model4.read(IOUtils.toInputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;info:x&amp;gt; &amp;lt;info:y&amp;gt; [ &amp;lt;info:z&amp;gt; \&quot;&lt;/span&gt;x\&lt;span class=&quot;code-quote&quot;&gt;&quot;^^&amp;lt;http:&lt;span class=&quot;code-comment&quot;&gt;//www.w3.org/2001/XMLSchema#string&amp;gt; ]&quot;&lt;/span&gt;), &lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;, &quot;&lt;/span&gt;TTL&quot;);
&lt;/span&gt;        assertTrue(model3.isIsomorphicWith(model4)); &lt;span class=&quot;code-comment&quot;&gt;// BROKEN
&lt;/span&gt;    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12750197">JENA-805</key>
            <summary>Graph#isIsomorphicWith should use semantic equivalence when comparing blank nodes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andy">Andy Seaborne</assignee>
                                    <reporter username="cbeer">Chris Beer</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Oct 2014 20:29:37 +0000</created>
                <updated>Thu, 30 Oct 2014 21:54:13 +0000</updated>
                            <resolved>Tue, 28 Oct 2014 15:03:31 +0000</resolved>
                                    <version>Jena 2.12.1</version>
                                    <fixVersion>Jena 2.13.0</fixVersion>
                                    <component>Jena</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14183109" author="andy.seaborne" created="Fri, 24 Oct 2014 17:46:48 +0000"  >&lt;p&gt;By &quot;blank node&quot;, do you mean string literals?&lt;/p&gt;</comment>
                            <comment id="14183145" author="cbeer" created="Fri, 24 Oct 2014 17:55:27 +0000"  >&lt;p&gt;Sorry, there&apos;s two things that trigger this behavior. You have to have a blank node, and that blank node has to have a property with a typed string literal. If you compare that graph to a graph with a blank node with the same property with the same string literal (but omits the type), they are not isomorphic.&lt;/p&gt;</comment>
                            <comment id="14183180" author="ajs6f" created="Fri, 24 Oct 2014 18:09:03 +0000"  >&lt;p&gt;Shouldn&apos;t what Chris is describing devolve by algorithm and polymorphism down to `Node_Blank`&apos;s and `Node_Literal`&apos;s notions of equality, as spec&apos;d (particularly for `Node_Literal`, by RDF 1.1)? Is there something problematic there?&lt;/p&gt;</comment>
                            <comment id="14183189" author="andy.seaborne" created="Fri, 24 Oct 2014 18:13:32 +0000"  >&lt;p&gt;Clarification of the current situation:&lt;/p&gt;

&lt;p&gt;Jena2 is not completely RDF 1.1. The changes that would mean that data on-disk need to be reloaded are being done as part of Jena3, to avoid a major version change followed soon afterwards by another one.&lt;/p&gt;

&lt;p&gt;By &quot;same term&quot; (.equals), it looks to me like the first one should be false.&lt;/p&gt;

&lt;p&gt;A blank node elsewhere does not trigger the problem.  A bank as subject does &amp;#8211; replace &lt;tt&gt;&amp;lt;info:x&amp;gt;&lt;/tt&gt; by &lt;tt&gt;[]&lt;/tt&gt;.  This suggests it is in the fixed (no blank node involved) part.&lt;/p&gt;


&lt;p&gt;Jena has treated simple literals and xsd strings as the same value in some cases (in memory graphs for example). This is not an RDF 1.1 matter. RDF 1.1 makes them the same term (i.e. .equals). Other &quot;same value&quot; are integers &quot;1&quot; and &quot;+001&quot;.&lt;/p&gt;</comment>
                            <comment id="14184144" author="andy.seaborne" created="Sat, 25 Oct 2014 16:05:07 +0000"  >&lt;p&gt;As well as the. Node.equals call (L578 - marked) there is also a call to Graph.contains (L295 in method &lt;tt&gt;prepare&lt;/tt&gt;) which goes to sameValueAs code for default memory graphs.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   GraphMatcher.prepare -&amp;gt;
     Graph.contains -&amp;gt;
       GraphTripleStoreBase.contains -&amp;gt;
         NodeToTriplesMapMem.containsBySameValueAs -&amp;gt;
           . . .
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14186917" author="jira-bot" created="Tue, 28 Oct 2014 15:02:06 +0000"  >&lt;p&gt;Commit 3ea2542c307a491071e9ee113841ea2c44f30334 in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=3ea2542&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=3ea2542&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-805&quot; title=&quot;Graph#isIsomorphicWith should use semantic equivalence when comparing blank nodes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-805&quot;&gt;&lt;del&gt;JENA-805&lt;/del&gt;&lt;/a&gt; : Make graph isomorphism strictly &quot;same term&quot;&lt;/p&gt;</comment>
                            <comment id="14186920" author="andy.seaborne" created="Tue, 28 Oct 2014 15:03:31 +0000"  >&lt;p&gt;&lt;tt&gt;GraphMatcher&lt;/tt&gt;, the engine for isomorphism testing, now does a very specific &quot;contains&quot; test that implements &quot;same term&quot; semantics, not whatever one of the testing graphs provides, which might be &quot;same value&quot;.&lt;/p&gt;</comment>
                            <comment id="14186923" author="cbeer" created="Tue, 28 Oct 2014 15:05:37 +0000"  >&lt;p&gt;Thanks. I&apos;m happy for the consistency, at least.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 3 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21iof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>