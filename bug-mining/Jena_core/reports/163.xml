<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 19:58:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JENA-1729] A minor initilization issue</title>
                <link>https://issues.apache.org/jira/browse/JENA-1729</link>
                <project id="12311220" key="JENA">Apache Jena</project>
                    <description>&lt;p&gt;The following one-class program fails with assertion error:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; xx.yy;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.jena.rdf.model.RDFNode;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.jena.rdf.model.ResourceFactory;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.jena.sys.JenaSubsystemLifecycle;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.jena.sys.JenaSystem;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.jena.vocabulary.RDF;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;InitTest &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; JenaSubsystemLifecycle {
    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void start() {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (JenaSystem.DEBUG_INIT)
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;InitTEST -- start&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; RDF.type != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;RDF#type is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; =&amp;gt; attempt to load a graph here will fail&quot;&lt;/span&gt;;
    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void stop() {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (JenaSystem.DEBUG_INIT)
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;InitTEST -- finish&quot;&lt;/span&gt;);
    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; level() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 500;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;... args) { &lt;span class=&quot;code-comment&quot;&gt;// run VM option: -ea
&lt;/span&gt;        JenaSystem.DEBUG_INIT = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        &lt;span class=&quot;code-comment&quot;&gt;//RDFNode r = ResourceFactory.createProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;X&quot;&lt;/span&gt;); // &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; works fine
&lt;/span&gt;        RDFNode r = ResourceFactory.createTypedLiteral(&lt;span class=&quot;code-quote&quot;&gt;&quot;Y&quot;&lt;/span&gt;); &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; causes a problem
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(r);
    }
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment>&lt;p&gt;java8(1.8.0_152), jena-arq:3.12.0&lt;/p&gt;</environment>
        <key id="13243516">JENA-1729</key>
            <summary>A minor initilization issue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andy">Andy Seaborne</assignee>
                                    <reporter username="szz">ssz</reporter>
                        <labels>
                    </labels>
                <created>Sun, 7 Jul 2019 13:58:54 +0000</created>
                <updated>Fri, 4 Jun 2021 12:53:07 +0000</updated>
                            <resolved>Wed, 28 Apr 2021 15:11:17 +0000</resolved>
                                                    <fixVersion>Jena 4.1.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16880176" author="andy.seaborne" created="Mon, 8 Jul 2019 10:17:53 +0000"  >&lt;p&gt;Thank for the test case.  The same happens for me.&lt;/p&gt;

&lt;p&gt;What is your use case for loading graph during Jena system initialization?&lt;/p&gt;

&lt;p&gt;Operations such as loading a graph will be suspect - this is a knock on effect of how java class initialization happens. If system initialization is triggered by a call to &lt;tt&gt;JenaSystem.init&lt;/tt&gt; inside a class initializer, then while that happens, all other class initialization is not being performed (the Java runtime controls this).&lt;/p&gt;

&lt;p&gt;Here, it&apos;s the constant RDF.type not getting set. It is not happening because java class initialization is started by a  NodeFactory class init block.&lt;/p&gt;

&lt;p&gt;The simplest way to initialize is an explicit call of &lt;tt&gt;JenaSystem.init();&lt;/tt&gt; then perform operations such as reading graphs outside the initialization sequence.&lt;/p&gt;

&lt;p&gt;In initialization code, the constant for RDF.type is obtained from &lt;tt&gt;RDF.Init.type()&lt;/tt&gt; but that assumes the code is &quot;init aware&quot;. Reading a graph invokes a lot of code and most if it is not init aware.&lt;/p&gt;

&lt;p&gt;The only way I can see to have a better initialization is to have every class that initializes constants to have an &quot;init&quot; call that sets the class statics directly. That has a major downside of an extra requirement of every class. We could do that for one or two key classes.&lt;/p&gt;</comment>
                            <comment id="16880243" author="szz" created="Mon, 8 Jul 2019 11:42:25 +0000"  >&lt;p&gt;In my case (the project avicomp/ont-map) I use Jena initialization subsystem to load library graphs from system resources in order to have them as some kind of singleton: they are used widely in API, which is desired to be fast as possible. Maybe yes, loading graphs while initialization is not very good idea, and I have to think to change it somehow. But for me this is a minor issue, and here is mostly for the record; the appropriate way to use the api implies explicit calling `JenaSystem.init()`&lt;/p&gt;</comment>
                            <comment id="16934412" author="andy.seaborne" created="Fri, 20 Sep 2019 13:45:16 +0000"  >&lt;p&gt;I have tried this again in the development 3.13.0 code.&lt;/p&gt;

&lt;p&gt;This&lt;br/&gt;
RDFNode r = ResourceFactory.createTypedLiteral(&quot;Y&quot;); // this causes a problem&lt;br/&gt;
works but&lt;br/&gt;
assert RDF.type != null&lt;br/&gt;
still fails because RDF.type is null, class initialization is active so &quot;static final&quot; aren&apos;t assigned yet.&lt;/p&gt;

&lt;p&gt;Some other code specially calls &lt;tt&gt;RDF.Init.type()&lt;/tt&gt; but that is not a workaround for a general operation like graph creation and loading.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17334786" author="jira-bot" created="Wed, 28 Apr 2021 15:09:29 +0000"  >&lt;p&gt;Commit 1689763c589b4d8fb7fededeb6e8dc938ecbd030 in jena&apos;s branch refs/heads/main from Andy Seaborne&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=jena.git;h=1689763&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=jena.git;h=1689763&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1729&quot; title=&quot;A minor initilization issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1729&quot;&gt;&lt;del&gt;JENA-1729&lt;/del&gt;&lt;/a&gt;: Use RDF.Init during initialization&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 28 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04fio:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>