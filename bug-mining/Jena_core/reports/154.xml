<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 19:58:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JENA-2019] Rule$ParserException in Jena rules when string literal equals to open parenthesis</title>
                <link>https://issues.apache.org/jira/browse/JENA-2019</link>
                <project id="12311220" key="JENA">Apache Jena</project>
                    <description>&lt;p&gt;I have some &lt;a href=&quot;https://jena.apache.org/documentation/inference/#RULEsyntax&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Jena rules&lt;/a&gt;&#160;and I &lt;font color=&quot;#172b4d&quot;&gt;need &lt;/font&gt;to test a string literal in them:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@prefix my: &amp;lt;http:&lt;span class=&quot;code-comment&quot;&gt;//test/expressions#&amp;gt; .
&lt;/span&gt;
# Rule including string &lt;span class=&quot;code-quote&quot;&gt;&quot;(&quot;&lt;/span&gt;
[(?a my:text &lt;span class=&quot;code-quote&quot;&gt;&quot;(&quot;&lt;/span&gt;) -&amp;gt; ]      # fails &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;(&apos;&lt;/span&gt; is single quotes too
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And a call to&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
List&amp;lt;Rule&amp;gt; rules = Rule.rulesFromURL(my_rules_path)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;throws:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; org.apache.jena.reasoner.rulesys.Rule$ParserException: Expected &apos;)&apos; at end of clause, found ]
At &apos;[ ( ?a my:text &quot; ( &quot; ) -&amp;gt; ] &apos;
        at org.apache.jena.reasoner.rulesys.Rule$Parser.parseNodeList(Rule.java:987)
        at org.apache.jena.reasoner.rulesys.Rule$Parser.parseNode(Rule.java:906)
        at org.apache.jena.reasoner.rulesys.Rule$Parser.parseNodeList(Rule.java:983)
        at org.apache.jena.reasoner.rulesys.Rule$Parser.parseClause(Rule.java:998)
        at org.apache.jena.reasoner.rulesys.Rule$Parser.doParseRule(Rule.java:1057)
        at org.apache.jena.reasoner.rulesys.Rule$Parser.parseRule(Rule.java:1030)
        at org.apache.jena.reasoner.rulesys.Rule.parseRules(Rule.java:666)
        at org.apache.jena.reasoner.rulesys.Rule.rulesFromURL(Rule.java:515)
        at org.apache.jena.reasoner.rulesys.Rule.rulesFromURL(Rule.java:526)
        at ru.vstu.Main.runReasoning(Main.java:64)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This crash happens if the string is exactly equal to &lt;b&gt;&quot;(&quot;&lt;/b&gt; (the use of double quotes or single quotes does not matter). Escaping also with backslash &lt;b&gt;&quot;\ (&quot;&lt;/b&gt; does not help.&lt;br/&gt;
 Changing the original string from&#160;&lt;b&gt;&quot;(&quot;&lt;/b&gt;&#160;to &lt;b&gt;&quot;()&quot;&lt;/b&gt;&#160;,&#160;&lt;b&gt;&quot;((&quot;&lt;/b&gt;&#160;,&#160;&lt;b&gt;&quot;-(&quot;&lt;/b&gt;&#160;or&#160;&lt;b&gt;&quot;)&quot;&lt;/b&gt;&#160;eliminates the exception (but this is not what i want).&lt;/p&gt;</description>
                <environment>&lt;p&gt;&lt;em&gt;&amp;gt; java -version&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;openjdk version &quot;1.8.0_232&quot;&lt;br/&gt;
OpenJDK Runtime Environment (build 1.8.0_232-BellSoft-b10)&lt;br/&gt;
OpenJDK 64-Bit Server VM (build 25.232-b10, mixed mode)&lt;/p&gt;

&lt;p&gt;Windows 8.1&lt;/p&gt;</environment>
        <key id="13346621">JENA-2019</key>
            <summary>Rule$ParserException in Jena rules when string literal equals to open parenthesis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andy">Andy Seaborne</assignee>
                                    <reporter username="rdfman">rdfman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Dec 2020 16:53:42 +0000</created>
                <updated>Sat, 17 Apr 2021 17:25:18 +0000</updated>
                            <resolved>Tue, 16 Feb 2021 17:50:01 +0000</resolved>
                                    <version>Jena 3.16.0</version>
                    <version>Jena 3.17.0</version>
                                                    <component>Jena</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="22"/>
                                    <progress percentage="22">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="22" backgroundColor="#51a825"/>
                                                    <row percentage="78" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="22">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="22" backgroundColor="#51a825"/>
                                                    <row percentage="78" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="10800">3h</timeoriginalestimate>
                            <timeestimate seconds="8400">2h 20m</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="17252529" author="jira-bot" created="Sun, 20 Dec 2020 21:55:10 +0000"  >&lt;p&gt;Commit e80048016846c19446e65211791e21dcc0eff6e8 in jena&apos;s branch refs/heads/master from Andy Seaborne&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=jena.git;h=e800480&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=jena.git;h=e800480&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-2019&quot; title=&quot;Rule$ParserException in Jena rules when string literal equals to open parenthesis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-2019&quot;&gt;&lt;del&gt;JENA-2019&lt;/del&gt;&lt;/a&gt;: Parse rule literals&lt;/p&gt;</comment>
                            <comment id="17252531" author="jira-bot" created="Sun, 20 Dec 2020 21:55:13 +0000"  >&lt;p&gt;Commit 58de541b1e7ee4d17e5fd8fdb4429ea907c123e8 in jena&apos;s branch refs/heads/master from Andy Seaborne&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=jena.git;h=58de541&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=jena.git;h=58de541&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-2019&quot; title=&quot;Rule$ParserException in Jena rules when string literal equals to open parenthesis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-2019&quot;&gt;&lt;del&gt;JENA-2019&lt;/del&gt;&lt;/a&gt;: Test rule parser&lt;/p&gt;</comment>
                            <comment id="17283447" author="rdfman" created="Fri, 12 Feb 2021 00:52:30 +0000"  >&lt;p&gt;Thank you for your work. I tryied to verify is it works: pull the repo and built jena-core from source.&lt;br/&gt;
So I found that my problem (the open parenthesis) is not fixed and discovered one more similar bug (the comma). I also checked some other single-character strings and no bugs there.&lt;br/&gt;
I pasted the experimental rules code here: &lt;a href=&quot;https://pastebin.com/y3Wt4G5t&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://pastebin.com/y3Wt4G5t&lt;/a&gt; as it is quite big for this comment.&lt;br/&gt;
Hope it will help in debugging.&lt;/p&gt;</comment>
                            <comment id="17283586" author="andy.seaborne" created="Fri, 12 Feb 2021 10:20:33 +0000"  >&lt;p&gt;Note: fix was 2020-12-20 and that is after the last release 3.17.0 on 2020-12-01.&lt;/p&gt;

&lt;p&gt;Which code did you pull from the repo? (which commit id?)&lt;/p&gt;

&lt;p&gt;Does&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@prefix my: &amp;lt;http:&lt;span class=&quot;code-comment&quot;&gt;//test/expressions#&amp;gt; .
&lt;/span&gt;
# Rule including string &lt;span class=&quot;code-quote&quot;&gt;&quot;(&quot;&lt;/span&gt;
[(?a my:text &lt;span class=&quot;code-quote&quot;&gt;&quot;(&quot;&lt;/span&gt;) -&amp;gt; ]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And a call to&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
List&amp;lt;Rule&amp;gt; rules = Rule.rulesFromURL(my_rules_path)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;work for you?&lt;/p&gt;

&lt;p&gt;Note: &lt;a href=&quot;https://github.com/apache/jena/commit/58de541/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/commit/58de541/&lt;/a&gt; &amp;#8211; it is in the test suite.&lt;/p&gt;

&lt;p&gt;The report example works for me with the latest  code (note the branch is now &quot;main&quot;).&lt;/p&gt;

&lt;p&gt;comma does not work.&lt;/p&gt;

&lt;p&gt;This works for me:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;@prefix my: &amp;lt;http://test/dream#&amp;gt; .

[ -&amp;gt; print(&apos;test jena!&apos;) ]
[(?a my:text &quot;(&quot;) -&amp;gt; ]
-&amp;gt; print(&quot;(&quot;).
-&amp;gt; print(&apos;(&apos;).
[ -&amp;gt; print(&apos;(&apos;) ]
-&amp;gt; print(&apos;)&apos;) .
## -&amp;gt; print(&quot;,&quot;).
## -&amp;gt; print(&apos;,&apos;).
-&amp;gt; print(&quot;.&quot;).
-&amp;gt; print(&quot;-&amp;gt;&quot;).
-&amp;gt; print(&quot;[&quot;).
-&amp;gt; print(&quot;]&quot;).
-&amp;gt; print(&quot;:&quot;).
-&amp;gt; print(&quot;?&quot;).
-&amp;gt; print(&quot;&amp;lt;&amp;lt;&quot;).
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17283965" author="rdfman" created="Fri, 12 Feb 2021 20:35:46 +0000"  >&lt;p&gt;I pulled the repo 2 days ago, the commit I used is on &lt;b&gt;master&lt;/b&gt;:&#160;4321d11a9bfef4258104860c44b5d6d1991f5790 &lt;br/&gt;
 (I will use &lt;b&gt;main&lt;/b&gt; next time, thank you).&lt;/p&gt;

&lt;p&gt;The code I originally posted:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# Rule including string &lt;span class=&quot;code-quote&quot;&gt;&quot;(&quot;&lt;/span&gt;
[(?a my:text &lt;span class=&quot;code-quote&quot;&gt;&quot;(&quot;&lt;/span&gt;) -&amp;gt; ]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;still does not work (the first FAIL in my pastebin snippet).&lt;/p&gt;

&lt;p&gt;I used jdk14 for maven to compile &lt;b&gt;jena-core&lt;/b&gt; only and substituted my project dependency on jena-core:3.17.0 with the built 3.18.0-SNAPSHOT. Maybe I have to rebuild more modules?&lt;/p&gt;

&lt;p&gt;I used both openjdk 8 and jdk14 to run my code and experiences the same behaviour (as reported in the pastebin snippet).&lt;br/&gt;
How can I check my environment is OK?&lt;/p&gt;</comment>
                            <comment id="17284179" author="andy.seaborne" created="Sat, 13 Feb 2021 11:09:04 +0000"  >&lt;p&gt;Which exceptions do you get for the failures?&lt;/p&gt;

&lt;p&gt;It is safer to build a consistent cut of the code. Both external dependencies (via the parent POM) and internal code have changed between 3.17.0 and 4.0.0 (3.18.0 has been renamed).&lt;/p&gt;

&lt;p&gt;A quick build is:&lt;/p&gt;

&lt;p&gt;`mvn clean install -Pdev` &lt;/p&gt;

&lt;p&gt;The project is moving to a minimum of Java11.&lt;br/&gt;
I doubt Java version makes a difference. &lt;br/&gt;
We build with JDK 11,14,15,16,17 (output Java11 class files) on a regular basis. &lt;a href=&quot;https://ci-builds.apache.org/job/Jena/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Jena/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can get development builds from:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        &amp;lt;repository&amp;gt;
          &amp;lt;id&amp;gt;apache.snapshots&amp;lt;/id&amp;gt;
          &amp;lt;name&amp;gt;Apache Snapshot Repository&amp;lt;/name&amp;gt;
          &amp;lt;url&amp;gt;https://repository.apache.org/snapshots&amp;lt;/url&amp;gt;
          &amp;lt;releases&amp;gt;&amp;lt;enabled&amp;gt;false&amp;lt;/enabled&amp;gt;&amp;lt;/releases&amp;gt;
          &amp;lt;snapshots&amp;gt;&amp;lt;enabled&amp;gt;true&amp;lt;/enabled&amp;gt;&amp;lt;/snapshots&amp;gt;
        &amp;lt;/repository&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17284378" author="jira-bot" created="Sun, 14 Feb 2021 09:31:58 +0000"  >&lt;p&gt;Commit 7d095fdbf04bef7d06a1737938067027ba0bf16c in jena&apos;s branch refs/heads/main from Andy Seaborne&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=jena.git;h=7d095fd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=jena.git;h=7d095fd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-2019&quot; title=&quot;Rule$ParserException in Jena rules when string literal equals to open parenthesis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-2019&quot;&gt;&lt;del&gt;JENA-2019&lt;/del&gt;&lt;/a&gt;: Parser fix; printing fix; more tests&lt;/p&gt;</comment>
                            <comment id="17284379" author="jira-bot" created="Sun, 14 Feb 2021 09:31:59 +0000"  >&lt;p&gt;Commit 781290561580c1e218a0dbabe8bfe6662c15542d in jena&apos;s branch refs/heads/main from Andy Seaborne&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=jena.git;h=7812905&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=jena.git;h=7812905&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #922 from afs/jena2019-rule-parser&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-2019&quot; title=&quot;Rule$ParserException in Jena rules when string literal equals to open parenthesis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-2019&quot;&gt;&lt;del&gt;JENA-2019&lt;/del&gt;&lt;/a&gt;: Parser fix; printing fix; more tests&lt;/p&gt;</comment>
                            <comment id="17284398" author="andy.seaborne" created="Sun, 14 Feb 2021 11:11:31 +0000"  >&lt;p&gt;New PR merged. &lt;/p&gt;

&lt;p&gt;This includes all the tests listed and test changes to parse-write-parse-compare all syntax test cases.&lt;/p&gt;
</comment>
                            <comment id="17285365" author="rdfman" created="Tue, 16 Feb 2021 17:29:22 +0000"  >&lt;p&gt;Latest&#160;development build v4.0.0 seems to resolve my issues.&lt;br/&gt;
 Thank you.&lt;/p&gt;</comment>
                            <comment id="17285375" author="andy.seaborne" created="Tue, 16 Feb 2021 17:50:43 +0000"  >&lt;p&gt;Thanks for testing (before a release!!).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 38 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lm7k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>