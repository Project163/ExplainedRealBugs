<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 19:57:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JENA-1294] JenaSystem.init from RDFS throws NPE, fails ARQ tests</title>
                <link>https://issues.apache.org/jira/browse/JENA-1294</link>
                <project id="12311220" key="JENA">Apache Jena</project>
                    <description>&lt;p&gt;As discussed in #&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1290&quot; title=&quot;Slow Model.createList()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1290&quot;&gt;&lt;del&gt;JENA-1290&lt;/del&gt;&lt;/a&gt;, jena-arq tests failed but committers could not reproduce the issue. The cause was that for some reason the first test that ran on was &lt;tt&gt;TestParameterizedSparqlString.test_param_string_injection_01&lt;/tt&gt;, and as the following stack trace shows, it reached &lt;tt&gt;JenaSystem.init&lt;/tt&gt; from RDFS class initialization.&lt;/p&gt;

&lt;p&gt;At least 3 locations involved in core and ARQ initalization refer to &lt;tt&gt;RDFS.subClassOf&lt;/tt&gt; and &lt;tt&gt;RDFS.member&lt;/tt&gt; which are null and cannot be initialized because RDFS is already being initialized:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Init: JenaInitLevel0
Init: InitJenaCore
JenaCore.init - start
RDF: http://www.w3.org/1999/02/22-rdf-syntax-ns#
RDFS: http://www.w3.org/2000/01/rdf-schema#
RDFS.subClassOf: null
OWL: http://www.w3.org/2002/07/owl#
JenaCore.init - finish
Init: InitRIOT
RIOT.init - start
RIOT.init - finish
Init: InitARQ
ARQ.init - start
ARQ.init - start.1
ARQ.init - start.2
ARQ.init - start.3
ARQ.init - start.4
AssemblerUtils.init - start
AssemblerUtils.init.registerDataset - start
implementWith(http://jena.hpl.hp.com/2005/11/Assembler#DefaultModel)
RDFS.subClassOf==null: true
nulls: 5876a9af 7993aa96 null e1204e1f
java.lang.NullPointerException
	at org.apache.jena.rdf.model.impl.ModelCom.add(ModelCom.java:1192)
	at org.apache.jena.assembler.assemblers.AssemblerGroup$ExpandingAssemblerGroup.implementWith(AssemblerGroup.java:95)
	at org.apache.jena.assembler.ConstAssembler.general(ConstAssembler.java:137)
	at org.apache.jena.sparql.core.assembler.AssemblerUtils.registerDataset(AssemblerUtils.java:72)
	at org.apache.jena.sparql.core.assembler.AssemblerUtils.init(AssemblerUtils.java:61)
	at org.apache.jena.query.ARQ.init(ARQ.java:596)
	at org.apache.jena.sparql.system.InitARQ.start(InitARQ.java:29)
	at org.apache.jena.system.JenaSystem.lambda$init$2(JenaSystem.java:119)
	at java.util.ArrayList.forEach(ArrayList.java:1249)
	at org.apache.jena.system.JenaSystem.forEach(JenaSystem.java:194)
	at org.apache.jena.system.JenaSystem.forEach(JenaSystem.java:171)
	at org.apache.jena.system.JenaSystem.init(JenaSystem.java:117)
	at org.apache.jena.graph.NodeFactory.&amp;lt;clinit&amp;gt;(NodeFactory.java:32)
	at org.apache.jena.rdf.model.impl.ResourceImpl.fresh(ResourceImpl.java:135)
	at org.apache.jena.rdf.model.impl.ResourceImpl.&amp;lt;init&amp;gt;(ResourceImpl.java:85)
	at org.apache.jena.rdf.model.ResourceFactory$Impl.createResource(ResourceFactory.java:297)
	at org.apache.jena.rdf.model.ResourceFactory.createResource(ResourceFactory.java:92)
	at org.apache.jena.vocabulary.RDFS.resource(RDFS.java:36)
	at org.apache.jena.vocabulary.RDFS.&amp;lt;clinit&amp;gt;(RDFS.java:44)
	at org.apache.jena.shared.PrefixMapping.&amp;lt;clinit&amp;gt;(PrefixMapping.java:219)
	at org.apache.jena.query.TestParameterizedSparqlString.test_param_string_injection_01(TestParameterizedSparqlString.java:1382)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The same problem can be observed on a one-liner mwe (jena-rdfs-init):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;public class App {
    public static void main(String[] args) {
        System.out.printf(&quot;subClassOf URI: %s\n&quot;, RDFS.subClassOf.toString());
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The ARQ test issue can be fixed adding a call to &lt;tt&gt;JenaSystem.init&lt;/tt&gt; (call-init.patch). However, if test order changes for someone, the problem re-appears.&lt;/p&gt;

&lt;p&gt;For Both the MWE and the test, replacing RDFS fields used in init code with &lt;tt&gt;RDF.getURI()+&quot;localName&quot;&lt;/tt&gt; fixes it (no-rdfs-on-init.patch). It is a  hack and the problem remains for if the MWE uses vocab classes (RDF and OWL) in place of RDFS. &lt;/p&gt;</description>
                <environment>&lt;p&gt;OpenJDK 1.8.0_121-b13&lt;br/&gt;
Linux 4.9.8-1-ARCH #1 SMP PREEMPT x86_64 GNU/Linux&lt;/p&gt;</environment>
        <key id="13044689">JENA-1294</key>
            <summary>JenaSystem.init from RDFS throws NPE, fails ARQ tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andy">Andy Seaborne</assignee>
                                    <reporter username="alexishuf">Alexis Armin Huf</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Feb 2017 02:27:03 +0000</created>
                <updated>Wed, 10 May 2017 15:35:22 +0000</updated>
                            <resolved>Tue, 28 Feb 2017 23:06:21 +0000</resolved>
                                    <version>Jena 3.2.0</version>
                                    <fixVersion>Jena 3.3.0</fixVersion>
                                    <component>ARQ</component>
                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15876067" author="andy.seaborne" created="Tue, 21 Feb 2017 14:37:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alexishuf&quot; class=&quot;user-hover&quot; rel=&quot;alexishuf&quot;&gt;alexishuf&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thank you for the analysis! I can reproduce this by running &lt;tt&gt;TestParameterizedSparqlString&lt;/tt&gt; and you&apos;ve enabled me to find a shorter test case:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;public static void main(String... args) {
   Object obj = RDFS.label;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Your fixes will work in the test case but I&apos;m concerned there is a deeper problem of the initialization order.  The test are often the place issue first arise (sometimes because the tests delve deep inside Jena, though in this case this is public API usage).&lt;/p&gt;

&lt;p&gt;If initialization is trigger by starting at RDFS, then Jena initialization issues during that call but it is in class loading of RDFS so RDFS itself is not initialized and class initialization is switched off (Java - prevents A init B init A).&lt;/p&gt;

&lt;p&gt;As to why this is occurring now, I don&apos;t know. We have nearly identical systems.&lt;/p&gt;</comment>
                            <comment id="15876073" author="alexishuf" created="Tue, 21 Feb 2017 14:41:25 +0000"  >&lt;p&gt;Traced the cause to commit 782d214066e224ba553bcef2b626fefbcfd73113 from &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1258&quot; title=&quot;Context key is null (ARQConstants.registryFunctions) via NodeFmtLib&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1258&quot;&gt;&lt;del&gt;JENA-1258&lt;/del&gt;&lt;/a&gt;. Reverting it also fixes the test and the MWE.&lt;/p&gt;</comment>
                            <comment id="15876084" author="alexishuf" created="Tue, 21 Feb 2017 14:47:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt; I also reproduced the original build issue on a similar up-to-date arch linux box. Maybe there is some obscure reason involving our slightly diffrent maven builds. It does not seem to be random though, the build problem always occurred on my machines.&lt;/p&gt;</comment>
                            <comment id="15882758" author="andy.seaborne" created="Fri, 24 Feb 2017 14:12:07 +0000"  >&lt;p&gt;Analysis:&lt;/p&gt;

&lt;p&gt;If the first point of contact with Jena is the RDFS vocabulary then:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Load RDFS, run its class init.&lt;/li&gt;
	&lt;li&gt;While running class init, the class is not itself fully initialized.&lt;/li&gt;
	&lt;li&gt;The first initialization is &lt;tt&gt;resource( &quot;Class&quot;)&lt;/tt&gt; which hits &lt;tt&gt;NodeFactory&lt;/tt&gt; causing &lt;tt&gt;JenaSystem.init()&lt;/tt&gt; to run.&lt;/li&gt;
	&lt;li&gt;This causes &lt;tt&gt;AssemblerUtils.init}] to run which depends on {{RDFS.subClassOf&lt;/tt&gt;, which is not yet initialized so it is null.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Moving the &lt;tt&gt;JenaSystem.init()&lt;/tt&gt; does not help. RDFS is always initializing while JenaSystem.init runs.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;&amp;lt;proposal&amp;gt;&lt;/b&gt;&lt;br/&gt;
have forms of the RDFS constants that are not dependent on RDFS initializing. These would be static methods (functions) that get called and calculate their return, not cached static constants. (Prototyped and manually tested.)&lt;/p&gt;

&lt;p&gt;OWL and RDF are also affected in fixable ways.&lt;br/&gt;
&lt;b&gt;&amp;lt;/proposal&amp;gt;&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Another way is for assignment to the vocabulary constants to be explicitly done from outside in some piece of initialization, but then the constants can&apos;t be final. This is a neater way internally because it is a systematic solution, not case-by-case, but at the cost of losing the &lt;tt&gt;final&lt;/tt&gt; impacts applications and is IMO too great.&lt;/p&gt;

&lt;p&gt;This is not testable in any reliable way that I can think of! The problem only arises when code first uses Jena via one of these 3 vocabularies. Tests running in random orders don&apos;t show it and some of our test framework code itself touches Jena before a test is run.&lt;/p&gt;

&lt;p&gt;As to exactly why &lt;tt&gt;TestParameterizedSparqlString&lt;/tt&gt; was being called first or why running &lt;tt&gt;TestParameterizedSparqlString&lt;/tt&gt; on its own now fails, I don&apos;t know. I&apos;m fairly sure I&apos;ve run it separately recently before (for an earlier initializer issue). Maybe there is some subtle internal JVM non-determinacy and/or change causing a different order somewhere.&lt;/p&gt;</comment>
                            <comment id="15883229" author="alexishuf" created="Fri, 24 Feb 2017 18:15:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;, I&apos;m a newbie on jena internals, but I agree with  your proposal. As for the alternative I cannot see a reliable and simple way to implement it.&lt;/p&gt;

&lt;p&gt;I did a simple benchmark to get a feel of the overhead on using lazy static methods that check the final fields for nulity:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;List&amp;lt;Resource&amp;gt; dummy = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&amp;gt;(blockSize*runs);
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; runs; i++) {
    Stopwatch watch = Stopwatch.createStarted();
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; j = 0; j &amp;lt; blockSize; j++)
        dummy.add(compute());
    computeSum += watch.elapsed(TimeUnit.MICROSECONDS);
    
    watch.reset().start();
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; j = 0; j &amp;lt; blockSize; j++)
        dummy.add(lazyField());
    lazySum += watch.elapsed(TimeUnit.MICROSECONDS);
    
    watch.reset().start();
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; j = 0; j &amp;lt; blockSize; j++)
        dummy.add(field);
    fieldSum += watch.elapsed(TimeUnit.MICROSECONDS);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Averages are in microseconds per call (not block). Preheat runs are discarded due to JVM JIT compiler.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;preheat runs: 2 runs: 100, blockSize: 32
Avgs (us) compute: 1.208  lazyField: 0.163 field: 0.093
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m not sure if this overhead would cause problems for some applications. It looks fine for mine. Replacing all uses of vocabularies inside jena code with method calls is probably a more robust solution.&lt;/p&gt;

&lt;p&gt;As for testing it, spawning a JVM could do it. Is there a policy against JVM spawning in Jena tests? I&apos;ve attached a patch with a method in &lt;tt&gt;TestSystemSetup&lt;/tt&gt; do test this. If the test is included, then it would be manageable to search all vocabulary use from jena initialization and replace only those. As code changes, the test would fail.&lt;/p&gt;

&lt;p&gt;Once devs agree on what to do, I can volunteer for the manual labour.&lt;/p&gt;</comment>
                            <comment id="15884193" author="githubbot" created="Sat, 25 Feb 2017 11:06:27 +0000"  >&lt;p&gt;GitHub user afs opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/218&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1294&quot; title=&quot;JenaSystem.init from RDFS throws NPE, fails ARQ tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1294&quot;&gt;&lt;del&gt;JENA-1294&lt;/del&gt;&lt;/a&gt;: Don&apos;t use contants during initialization.&lt;/p&gt;

&lt;p&gt;    Fixes for RDFS - use functions for constants during initialization.&lt;/p&gt;

&lt;p&gt;    This fixes initialization as reported (TestParameterizedSparqlString).&lt;/p&gt;

&lt;p&gt;    RDF and OWL still to do in the same style for some rather unusual ways to trigger the same effect.&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/afs/jena&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/afs/jena&lt;/a&gt; jena_init&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/218.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/218.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #218&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 258a390bc239a62583cf020b5fe57c922b158d42&lt;br/&gt;
Author: Andy Seaborne &amp;lt;andy@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-02-25T10:43:48Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1294&quot; title=&quot;JenaSystem.init from RDFS throws NPE, fails ARQ tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1294&quot;&gt;&lt;del&gt;JENA-1294&lt;/del&gt;&lt;/a&gt;: Don&apos;t use contants during initialization.&lt;/p&gt;

&lt;p&gt;    Use the RDFS.Init.&amp;lt;const&amp;gt;() function instead.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15884197" author="andy.seaborne" created="Sat, 25 Feb 2017 11:19:22 +0000"  >&lt;p&gt;I&apos;ve just made a pull request with RDFS. RDF and OWL (the only other two vocabularies affected) still to do in the same style of RDFS.Init.&lt;/p&gt;

&lt;p&gt;The statics remain final.  This means there fields are as before - the fields are set during class initialization and can&apos;t be reset latest. &lt;/p&gt;

&lt;p&gt;I doubt that performance would make an observable difference. It seems quite unlikely they would be used in some tight loop that was big enough to be noticeable.  In the PR, they are are still final and still set by calculation. What has changed is that the initialization code elsewhere calls the calculation, not use the constant.&lt;/p&gt;

&lt;p&gt;I like the patch with the init test - I&apos;ll add it to the PR.  Spawning JVM might a problem in some environments, we&apos;ll just have to see, but even it is adding the test and ignoring at least collects the knowledge.&lt;/p&gt;

</comment>
                            <comment id="15884199" author="githubbot" created="Sat, 25 Feb 2017 11:23:04 +0000"  >&lt;p&gt;Github user afs commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/218#discussion_r103077077&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/218#discussion_r103077077&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: jena-arq/src/main/java/org/apache/jena/sparql/core/assembler/AssemblerUtils.java &amp;#8212;&lt;br/&gt;
    @@ -76,8 +76,11 @@ static public void registerModel(Resource r, Assembler a) {&lt;br/&gt;
         /** Register an addition assembler */  &lt;br/&gt;
         static public void register(AssemblerGroup g, Resource r, Assembler a, Resource superType) {&lt;br/&gt;
             registerAssembler(g, r, a) ;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if ( superType != null &amp;amp;&amp;amp; ! superType.equals(r) )&lt;/li&gt;
	&lt;li&gt;modelExtras.add(r, RDFS.subClassOf, superType) ;&lt;br/&gt;
    +        if ( superType != null &amp;amp;&amp;amp; ! superType.equals(r) ) {&lt;br/&gt;
    +            // This is called during Jena-wide initialization.&lt;br/&gt;
    +            // Use function for constant (&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1294&quot; title=&quot;JenaSystem.init from RDFS throws NPE, fails ARQ tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1294&quot;&gt;&lt;del&gt;JENA-1294&lt;/del&gt;&lt;/a&gt;)&lt;br/&gt;
    +           modelExtras.add(r, RDFS.Init.subClassOf(), superType) ;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Example of use of the calculation rather than the eventual constant.&lt;/p&gt;</comment>
                            <comment id="15884200" author="githubbot" created="Sat, 25 Feb 2017 11:23:04 +0000"  >&lt;p&gt;Github user afs commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/218#discussion_r103077064&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/218#discussion_r103077064&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: jena-arq/src/main/java/org/apache/jena/query/ARQ.java &amp;#8212;&lt;br/&gt;
    @@ -579,7 +580,7 @@ public static void init() {&lt;br/&gt;
                 JenaSystem.logLifecycle(&quot;ARQ.init - start&quot;) ;&lt;br/&gt;
                 // Force constants to be set.  This should be independent of other initialization including jena core.&lt;br/&gt;
                 ARQConstants.getGlobalPrefixMap();&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;p&gt;    +            ResultSetLang.init();&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This isn&apos;t directly related but I noticed that `ResultSetLang` init into RDFLangauge was happens later. Making it happen now was part of verification there were no other lurking problems.&lt;/p&gt;</comment>
                            <comment id="15884341" author="githubbot" created="Sat, 25 Feb 2017 19:02:24 +0000"  >&lt;p&gt;Github user alexishuf commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/218&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Tested here and it solved everything. Thanks!&lt;/p&gt;

&lt;p&gt;    Before this PR, Initializing from OWL was only a problem if TDB was also initialized. Maybe is it a good idea to add `TestSystemSetup`  to `org.apache.jena.tdb.sys.TS_Sys`?&lt;/p&gt;</comment>
                            <comment id="15884342" author="githubbot" created="Sat, 25 Feb 2017 19:03:44 +0000"  >&lt;p&gt;Github user alexishuf commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/218#discussion_r103085413&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/218#discussion_r103085413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: jena-core/src/test/java/org/apache/jena/test/TestSystemSetup.java &amp;#8212;&lt;br/&gt;
    @@ -35,5 +42,24 @@ public void testRDF11() &lt;/p&gt;
{
                 fail(&quot;RDF 1.0 mode enabled in Jena3 test run&quot;) ;
         }

&lt;p&gt;    +    /** This test relies on forking a clean JVM */ &lt;br/&gt;
    +    public void testInitFromRDFS() throws IOException, InterruptedException {&lt;br/&gt;
    +        String separator = System.getProperty(&quot;file.separator&quot;);&lt;br/&gt;
    +        String classpath = System.getProperty(&quot;java.class.path&quot;);&lt;br/&gt;
    +        String java = System.getProperty(&quot;java.home&quot;)&lt;br/&gt;
    +                + separator + &quot;bin&quot; + separator + &quot;java&quot;;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    On windows, the java executable will end with &quot;.exe&quot;. This should avoid any problem:&lt;br/&gt;
    ```java&lt;br/&gt;
    import org.apache.commons.lang3.SystemUtils;&lt;br/&gt;
            if (SystemUtils.IS_OS_WINDOWS)&lt;br/&gt;
                java += &quot;.exe&quot;;&lt;br/&gt;
    ```&lt;/p&gt;</comment>
                            <comment id="15884806" author="githubbot" created="Sun, 26 Feb 2017 16:41:04 +0000"  >&lt;p&gt;Github user afs commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/218&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &quot;.exe&quot; append integrated in.&lt;/p&gt;

&lt;p&gt;    I had some problems in the build (because of a static method called &quot;Property()&quot;) but all fixed now so this PR should be complete.  I&apos;ll merge it soon unless someone has an more comments.&lt;/p&gt;

</comment>
                            <comment id="15889063" author="jira-bot" created="Tue, 28 Feb 2017 23:02:28 +0000"  >&lt;p&gt;Commit e67d0bb24c19a4f2992003d951c95bd712432416 in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=e67d0bb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=e67d0bb&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1294&quot; title=&quot;JenaSystem.init from RDFS throws NPE, fails ARQ tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1294&quot;&gt;&lt;del&gt;JENA-1294&lt;/del&gt;&lt;/a&gt;: Don&apos;t use RDFS contants during initialization.&lt;/p&gt;

&lt;p&gt;Use the RDFS.Init.&amp;lt;const&amp;gt;() function instead.&lt;/p&gt;</comment>
                            <comment id="15889064" author="jira-bot" created="Tue, 28 Feb 2017 23:02:31 +0000"  >&lt;p&gt;Commit 15a03f643c8a634dcfe999478a54570862858ba6 in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=15a03f6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=15a03f6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1294&quot; title=&quot;JenaSystem.init from RDFS throws NPE, fails ARQ tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1294&quot;&gt;&lt;del&gt;JENA-1294&lt;/del&gt;&lt;/a&gt;: Initialization starting at RDF or OWL&lt;/p&gt;</comment>
                            <comment id="15889066" author="jira-bot" created="Tue, 28 Feb 2017 23:02:34 +0000"  >&lt;p&gt;Commit 16ef8cafc8d367472ade13dec01ab36262b5a7fa in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=16ef8ca&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=16ef8ca&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1294&quot; title=&quot;JenaSystem.init from RDFS throws NPE, fails ARQ tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1294&quot;&gt;&lt;del&gt;JENA-1294&lt;/del&gt;&lt;/a&gt;: Test for RDFS initialization path (forks a JVM)&lt;/p&gt;</comment>
                            <comment id="15889068" author="jira-bot" created="Tue, 28 Feb 2017 23:02:38 +0000"  >&lt;p&gt;Commit 9d64e423c02b00c95386ed6dc4082840452fd054 in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=9d64e42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=9d64e42&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1294&quot; title=&quot;JenaSystem.init from RDFS throws NPE, fails ARQ tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1294&quot;&gt;&lt;del&gt;JENA-1294&lt;/del&gt;&lt;/a&gt;: Include initialization test in TDB test suite&lt;/p&gt;</comment>
                            <comment id="15889069" author="githubbot" created="Tue, 28 Feb 2017 23:02:42 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/218&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15889070" author="jira-bot" created="Tue, 28 Feb 2017 23:02:42 +0000"  >&lt;p&gt;Commit e71f273814f1a933f284ca41a4a52f1461937bb7 in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=e71f273&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=e71f273&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1294&quot; title=&quot;JenaSystem.init from RDFS throws NPE, fails ARQ tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1294&quot;&gt;&lt;del&gt;JENA-1294&lt;/del&gt;&lt;/a&gt;: Merge commit &apos;refs/pull/218/head&apos; of github.com:apache/jena&lt;/p&gt;

&lt;p&gt;This closes #218.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12853627" name="call-init.patch" size="1146" author="alexishuf" created="Tue, 21 Feb 2017 02:28:21 +0000"/>
                            <attachment id="12853628" name="jena-rdfs-init.tar.gz" size="10233" author="alexishuf" created="Tue, 21 Feb 2017 02:28:21 +0000"/>
                            <attachment id="12853629" name="mvn-verify-arq-bug.log.gz" size="66214" author="alexishuf" created="Tue, 21 Feb 2017 02:28:21 +0000"/>
                            <attachment id="12853630" name="no-rdfs-on-init.patch" size="2711" author="alexishuf" created="Tue, 21 Feb 2017 02:28:21 +0000"/>
                            <attachment id="12854542" name="testInitFromRDFS.patch" size="2397" author="alexishuf" created="Fri, 24 Feb 2017 18:15:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 37 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3acpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>