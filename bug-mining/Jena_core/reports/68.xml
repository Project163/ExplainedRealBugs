<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 19:57:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JENA-966] LazyIterator</title>
                <link>https://issues.apache.org/jira/browse/JENA-966</link>
                <project id="12311220" key="JENA">Apache Jena</project>
                    <description>&lt;p&gt;LazyIterator is an abstract class.  The documentation indicates that the create() method needs to be overridden to create an instance.  From this I would expect that &lt;/p&gt;

&lt;p&gt;now LazyIterator(){&lt;br/&gt;
@Override&lt;br/&gt;
public ExtendedIterator&amp;lt;Model&amp;gt; create() &lt;/p&gt;
{
			...
}}
&lt;p&gt;;&lt;/p&gt;

&lt;p&gt;Would work however LazyIterator does not override:&lt;br/&gt;
remoteNext(), andThen(), toList(), and toSet().&lt;/p&gt;

&lt;p&gt;I believe these should be implemented in the class.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12838305">JENA-966</key>
            <summary>LazyIterator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="claude">Claude Warren</assignee>
                                    <reporter username="claude">Claude Warren</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Jun 2015 21:18:41 +0000</created>
                <updated>Thu, 30 Jul 2015 13:26:59 +0000</updated>
                            <resolved>Tue, 30 Jun 2015 09:47:53 +0000</resolved>
                                    <version>Jena 3.0.0</version>
                                    <fixVersion>Jena 3.0.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14589458" author="andy.seaborne" created="Wed, 17 Jun 2015 08:09:33 +0000"  >&lt;p&gt;There are no uses of this class in the codebase anymore.  We can remove it.&lt;/p&gt;</comment>
                            <comment id="14590002" author="ajs6f" created="Wed, 17 Jun 2015 16:23:52 +0000"  >&lt;p&gt;There is also &lt;tt&gt;LateBindingIterator&lt;/tt&gt; which is only used by &lt;tt&gt;Unparser&lt;/tt&gt;, and its use there could be replaced with a &lt;tt&gt;Supplier&amp;lt;Iterator&amp;lt;Resource&amp;gt;&amp;gt;&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;There is also &lt;tt&gt;EarlyBindingIterator&lt;/tt&gt;, which is used nowhere and is a little bit confusing, too.&lt;/p&gt;</comment>
                            <comment id="14590012" author="ajs6f" created="Wed, 17 Jun 2015 16:27:18 +0000"  >&lt;p&gt;I think it could be argued that &lt;tt&gt;Map1Iterator&lt;/tt&gt; should be deprecated in favor of using &lt;tt&gt;Iter::map&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14590036" author="ajs6f" created="Wed, 17 Jun 2015 16:29:37 +0000"  >&lt;p&gt;&lt;tt&gt;SingletonIterator&lt;/tt&gt; could be plausibly be deprecated in favor of Guava&apos;s &lt;tt&gt;Iterators::singletonIterator&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14590038" author="ajs6f" created="Wed, 17 Jun 2015 16:30:49 +0000"  >&lt;p&gt;&lt;tt&gt;UniqueExtendedIterator&lt;/tt&gt; is not used anywhere, and even its own comments say, &quot;This class may be deprecated in the future.  New development should use use &amp;lt;code&amp;gt;UniqueFilter&amp;lt;/code&amp;gt; for simple filtering of an ExtendedIterator, for more complex filtering implement a custom &amp;lt;code&amp;gt;Filter&amp;lt;/code&amp;gt;.&quot;&lt;/p&gt;</comment>
                            <comment id="14590097" author="claudenw" created="Wed, 17 Jun 2015 17:05:55 +0000"  >&lt;p&gt;What say we open an epic to cover iterator refactoring.&lt;/p&gt;

&lt;p&gt;My opinion is that it should deprecate all (most?) iterators and point devs to the java8 replacements.&lt;/p&gt;

&lt;p&gt;I think we should deprecate since change iterators in legacy code might be a big step &amp;#8211; well beyond renaming included packages.&lt;/p&gt;

&lt;p&gt;As for this defect.  I think that the methods noted above should be added to the iterator both in 3.0.0 and in 2.13.1 (or whatever the latest 2.x version is).&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="14590304" author="githubbot" created="Wed, 17 Jun 2015 18:44:00 +0000"  >&lt;p&gt;GitHub user ajs6f opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/79&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/79&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-966&quot; title=&quot;LazyIterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-966&quot;&gt;&lt;del&gt;JENA-966&lt;/del&gt;&lt;/a&gt;: Eliminating some unnecessary iterator types&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ajs6f/jena&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ajs6f/jena&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-966&quot; title=&quot;LazyIterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-966&quot;&gt;&lt;del&gt;JENA-966&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/79.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/79.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #79&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 86588743ad64f8d736278889bc8b0677d8d9fe87&lt;br/&gt;
Author: ajs6f &amp;lt;ajs6f@virginia.edu&amp;gt;&lt;br/&gt;
Date:   2015-06-17T18:43:35Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-966&quot; title=&quot;LazyIterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-966&quot;&gt;&lt;del&gt;JENA-966&lt;/del&gt;&lt;/a&gt;: Eliminating some unnecessary iterator types&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14590306" author="ajs6f" created="Wed, 17 Jun 2015 18:45:40 +0000"  >&lt;p&gt;The PR above actually removes the types in question. If it&apos;s deemed better to merely deprecate them for now, I can add them back in deprecated. It does seem to me that a major version bump is actually a &lt;em&gt;good&lt;/em&gt; time to remove stuff, but I don&apos;t have a great sense of how responsive the Jena community is.&lt;/p&gt;</comment>
                            <comment id="14590522" author="andy.seaborne" created="Wed, 17 Jun 2015 20:31:22 +0000"  >&lt;p&gt;I don&apos;t think that is a good idea. &lt;tt&gt;Iter&lt;/tt&gt; and the iterators in jena-core aren&apos;t connected at the moment.&lt;/p&gt;</comment>
                            <comment id="14590523" author="andy.seaborne" created="Wed, 17 Jun 2015 20:31:31 +0000"  >&lt;p&gt;I agree - delete it.&lt;/p&gt;</comment>
                            <comment id="14590530" author="ajs6f" created="Wed, 17 Jun 2015 20:34:51 +0000"  >&lt;p&gt;Re: &lt;tt&gt;Map1Iterator&lt;/tt&gt;, I didn&apos;t connect it to &lt;tt&gt;Iter::map&lt;/tt&gt;, I got rid of it completely, with no bad effect. Do you think we should keep it around, and if so, when should it be used in preference to &lt;tt&gt;Iter::map&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="14590570" author="andy.seaborne" created="Wed, 17 Jun 2015 20:50:27 +0000"  >&lt;p&gt;Why is iterator refactoring important?&lt;/p&gt;

&lt;p&gt;(and Java8 streams do not replace iterators : they behave differently (no .remove, potentially parallel execution, either now or in some future Java version))&lt;/p&gt;</comment>
                            <comment id="14590674" author="andy.seaborne" created="Wed, 17 Jun 2015 21:46:38 +0000"  >&lt;p&gt;&lt;tt&gt;NiceIterator&lt;/tt&gt; now uses &lt;tt&gt;Iter.map&lt;/tt&gt; via &lt;tt&gt;WrappedIterator.create(map(this, map1));&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="14591746" author="ajs6f" created="Thu, 18 Jun 2015 13:03:47 +0000"  >&lt;p&gt;I don&apos;t think iterator refactoring is what is being discussed here. I think what is being discussed is removing classes that aren&apos;t ever used and show no likelihood of being used. But maybe I&apos;m misinterpreting &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=claudenw&quot; class=&quot;user-hover&quot; rel=&quot;claudenw&quot;&gt;claudenw&lt;/a&gt;&apos;s remarks.&lt;/p&gt;</comment>
                            <comment id="14591752" author="ajs6f" created="Thu, 18 Jun 2015 13:12:26 +0000"  >&lt;p&gt;Yes. Is that problematic? Isn&apos;t the larger strategy to shift non-Jena-specific stuff into &lt;tt&gt;jena-base&lt;/tt&gt; and Atlas?&lt;/p&gt;</comment>
                            <comment id="14596484" author="claudenw" created="Mon, 22 Jun 2015 19:17:02 +0000"  >&lt;p&gt;This bug is for the LazyIterator.  I think we should add the missing functionality to bring it up to what I expected (see original report).  All discussions about refactoring and deprecating iterators should be on an Jira epic.  If there are no objections I will implement the missing functionality tomorrow evening and will open the Epic at the same time.&lt;/p&gt;</comment>
                            <comment id="14596485" author="ajs6f" created="Mon, 22 Jun 2015 19:19:08 +0000"  >&lt;p&gt;I would rather actually remove the &lt;tt&gt;LazyIterator&lt;/tt&gt; class and use built-in Java 8 functionality (i.e. &lt;tt&gt;Supplier&lt;/tt&gt;).&lt;/p&gt;</comment>
                            <comment id="14596500" author="claudenw" created="Mon, 22 Jun 2015 19:26:46 +0000"  >&lt;p&gt;I don&apos;t see how to quickly implement LazyIterator as a Supplier.  How do I implement:&lt;/p&gt;

&lt;p&gt;ExtendedIterator.andThen( new LazyIterator() ) where the contents of the lazy iterator are determined during the processing of the ExtendedIterator.next().&lt;/p&gt;

&lt;p&gt;Claude&lt;/p&gt;
</comment>
                            <comment id="14596501" author="ajs6f" created="Mon, 22 Jun 2015 19:28:53 +0000"  >&lt;p&gt;I&apos;d rather remove &lt;tt&gt;LazyIterator&lt;/tt&gt; and add &lt;tt&gt;andThen(Supplier&amp;lt;Iterator&amp;lt;T&amp;gt;&amp;gt;)&lt;/tt&gt;. It seems to me to be a better pattern. Methods that accept &lt;tt&gt;T&lt;/tt&gt; have a natural match in &quot;lazy&quot; methods that accept a &lt;tt&gt;Supplier&amp;lt;T&amp;gt;&lt;/tt&gt;, and this doesn&apos;t lead to multiplying &quot;lazy&quot; types.&lt;/p&gt;</comment>
                            <comment id="14596509" author="claudenw" created="Mon, 22 Jun 2015 19:32:48 +0000"  >&lt;p&gt;My other concern is the &quot;distance&quot; between 2.13 and 3.0  I understand there will be refactoring of code involved in the move but to remove all iterators and replace them with streams (even if there is a good technical answer for Andy&apos;s objection) seems like a step (or several) too far.  If I was to approach migrating an application from 2.13 and I had to replace all iterators in my code I think I would shy away.  Furthermore, older code which will otherwise compile under Java 8, will require deep reworking to make it function with Jean 3.0.&lt;/p&gt;

&lt;p&gt;Is there a shim that will turn a Supplier into an Iterator?  Are you proposing we leave the entire installed base and extended code base behind at the 3.0 juncture?   &lt;/p&gt;

&lt;p&gt;Claude&lt;/p&gt;</comment>
                            <comment id="14596530" author="ajs6f" created="Mon, 22 Jun 2015 19:42:48 +0000"  >&lt;p&gt;There are a few points here: &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I have &lt;em&gt;not&lt;/em&gt; suggested anything about &lt;tt&gt;Stream&lt;/tt&gt;. They just don&apos;t have anything to do with this. As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt; pointed out, a &lt;tt&gt;Stream&lt;/tt&gt; is not an &lt;tt&gt;Iterator&lt;/tt&gt;, period. They just have no relevance here, so I&apos;m not sure what your objection is, in that regard.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&quot;Are you proposing we leave the entire installed base and extended code base behind at the 3.0 juncture?&quot; I think that&apos;s a bit disingenuous. I&apos;m suggesting, as I said above, getting rid of three or four types that are either not used anywhere in the code base or used only once. That&apos;s hardly leaving &quot;the entire installed base&quot; behind, is it? And if a major version change &lt;em&gt;isn&apos;t&lt;/em&gt; the time to make this kind of clean-up, when is? Are all unused but released classes in Jena eternal and indestructible?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Getting an &lt;tt&gt;Iterator&lt;/tt&gt; out of a &lt;tt&gt;Supplier&amp;lt;Iterator&amp;gt;&lt;/tt&gt; is as hard as calling &lt;tt&gt;Supplier::get&lt;/tt&gt;. One method. It is exactly the timing of that method call that introduces the laziness.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;m happy to let this be. I just don&apos;t see as much value in the effort spent filling out a class that has never been used as I do in taking advantage of the much more idiomatic approach now available in Java 8, as well as removing some unused code.&lt;/p&gt;</comment>
                            <comment id="14596545" author="ajs6f" created="Mon, 22 Jun 2015 19:58:54 +0000"  >&lt;p&gt;Just as a sidenote for anyone following this who is not familiar with the use of &lt;tt&gt;Supplier&lt;/tt&gt;: &lt;tt&gt;Supplier&lt;/tt&gt; is not part of the Java 8 Stream API, it&apos;s part of the Function API. It is a very simple SAM interface that is intended to hold a computation. So one might do:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;# the only costs of the line below are an assignment and object creation
Supplier&amp;lt;Foo&amp;gt; fooForLater = () -&amp;gt; expensiveCompution();

# &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; some other stuff

# the line below is where we pay the cost of expensiveCompution()
Foo myFoo = fooForLater.get();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14596588" author="ajs6f" created="Mon, 22 Jun 2015 20:25:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=claudenw&quot; class=&quot;user-hover&quot; rel=&quot;claudenw&quot;&gt;claudenw&lt;/a&gt;, would it be useful to you for me to send a PR showing my proposal (adding &lt;tt&gt;andThen(Supplier&amp;lt;Iterator&amp;lt;T&amp;gt;&amp;gt;)&lt;/tt&gt; to &lt;tt&gt;ExtendedIterator&lt;/tt&gt;? It would look something like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ExtendedIterator andThen(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Supplier&amp;lt;Iterator&amp;lt;T&amp;gt;&amp;gt; nextIterator) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; andThen(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Iterator&amp;lt;T&amp;gt;() {

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; T next() { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; nextIterator.get().next(); }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; hasNext() { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; nextIterator.get().hasNext(); }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void remove() { nextIterator.get().remove(); }

} );
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and you would invoke it like &lt;tt&gt;ExtendedIterator joined = first.andThen(() -&amp;gt; second);&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14596710" author="andy.seaborne" created="Mon, 22 Jun 2015 21:47:13 +0000"  >&lt;p&gt;Adding &lt;tt&gt;andThen(Supplier&amp;lt;Iterator&amp;lt;T&amp;gt;&amp;gt;)&lt;/tt&gt; to &lt;tt&gt;ExtendedIterator&lt;/tt&gt; complicates the &lt;tt&gt;ExtendedIterator&lt;/tt&gt; interface. Some of the &lt;tt&gt;ExtendedIterator&lt;/tt&gt; uses are in the visible graph SPI so this is not just clearing up.&lt;/p&gt;

&lt;p&gt;Better to build around the concept of &quot;iterators&quot; and have an (extended) iterator that provides the delay.  i.e. a &lt;tt&gt;LazyIterator&lt;/tt&gt; which internally delays is cleaner IMO because it encapsulates the supplier in a class, not a general interface.&lt;/p&gt;

&lt;p&gt;So minimal change:  &lt;br/&gt;
&lt;tt&gt;public LazyIterator(Supplier&amp;lt;ExtendedIterator&amp;lt;T&amp;gt;&amp;gt;)&lt;/tt&gt; rather than LazyIterator being abstract with &lt;tt&gt;create()&lt;/tt&gt;.  &lt;tt&gt;Supplier&amp;lt;&amp;gt;.get()&lt;/tt&gt; is called when &lt;tt&gt;lazy()&lt;/tt&gt; is called.  Then have {{create() &lt;/p&gt;
{ return supplier.get();}
&lt;p&gt; }}.&lt;br/&gt;
Fixing up &lt;tt&gt;LazyIterator&lt;/tt&gt; is a point-wise issue, especially as &lt;tt&gt;LazyIterator&lt;/tt&gt; isn&apos;t currently in-use.  &lt;/p&gt;

&lt;p&gt;I&apos;m unclear about the idea of an epic for iterators in general.  If it is all (Extended)Iterators, it sounds like a major undertaking with wide repercussions yet there is no obvious benefit driven by changes to a class not in use.  If the &quot;epic&quot; is for LazyIterator, I don&apos;t care.  Or remove LazyIterator from jena-core and take the code where it is wanted.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Minor observations:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;LazyIterator&lt;/tt&gt; delays until first call, typically &lt;tt&gt;hasNext}] or {{next&lt;/tt&gt; ; &lt;tt&gt;andThen(Supplier&amp;lt;ExtendedIterator&amp;lt;T&amp;gt;&amp;gt;)&lt;/tt&gt; delays only until creation of the &quot;andThen&quot; step.  That&apos;s not quite the same.  (Note the &lt;tt&gt;Supplier&lt;/tt&gt; generic signature.)&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;LazyIterator&lt;/tt&gt; already has &quot;andThen&quot;, but it&apos;s got the wrong signature, so that leaves toSet and toList.  &lt;/p&gt;

&lt;p&gt;If &lt;tt&gt;LazyIterator&lt;/tt&gt; becomes concrete, then that needs fixing. As a abstract class leaving toSet and toList (&quot;terminal operations&quot;) to the concrete implementation makes sense to me but if someone wants to make &lt;tt&gt;LazyIterator&lt;/tt&gt; concrete, they will be needed. Or extend &lt;tt&gt;NiceIterator&amp;lt;T&amp;gt;&lt;/tt&gt;.&lt;/p&gt;
</comment>
                            <comment id="14597501" author="ajs6f" created="Tue, 23 Jun 2015 11:36:58 +0000"  >&lt;p&gt;I&apos;m happy to leave this to y&apos;all. I understand the desire to keep the interface as narrow as possible, although I really do think that laziness is a natural pairing.&lt;/p&gt;

&lt;p&gt;On that minor point: I&apos;m afraid you&apos;re wrong about the laziness of my design, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;. If you look at the sample I give above, you will see that every execution path containing &lt;tt&gt;Supplier::get&lt;/tt&gt; goes through an &lt;tt&gt;Iterator&lt;/tt&gt; method. So it&apos;s fully lazy: &lt;tt&gt;Supplier::get&lt;/tt&gt; isn&apos;t called until an &lt;tt&gt;Iterator&lt;/tt&gt; method is called. &lt;tt&gt;Supplier&lt;/tt&gt; is a very good way to induce laziness. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14598364" author="andy.seaborne" created="Tue, 23 Jun 2015 21:08:10 +0000"  >&lt;p&gt;The contract for &lt;tt&gt;Supplier&lt;/tt&gt; is not specific enough for that use.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Supplier::get&lt;/tt&gt; can return a different object each time or not.  It may be a factory pattern, it may be container, it may be a delayed slot . The javadoc contract does not say it is not the same object each time. When the result is stateful, like an iterator, that matters.&lt;/p&gt;

&lt;p&gt;For example: &lt;tt&gt;first.andThen(() -&amp;gt; bigThing.createIterator())&lt;/tt&gt;. So I think that &lt;tt&gt;Supplier::get&lt;/tt&gt; must be called only once to be safe.&lt;/p&gt;
</comment>
                            <comment id="14599460" author="ajs6f" created="Wed, 24 Jun 2015 14:08:26 +0000"  >&lt;p&gt;That&apos;s very true-- I should not have been so brash about it. But then we just need a subtype with the right semantic (say &lt;tt&gt;ConstantSupplier&lt;/tt&gt;). It&apos;s still a SAM type.&lt;/p&gt;

&lt;p&gt;I didn&apos;t mean to belabor this so long-- my only point (which I clearly didn&apos;t make very well) is that when you can extend with methods or with types, Java 8&apos;s lambdas make methods much more attractive than they used to be, because a single &lt;tt&gt;ConstantSupplier&lt;/tt&gt; (or whatever) type could be used to support laziness in any number of methods, as opposed to a new &quot;LazyX&quot; type for every case. The client can discover the option of laziness right at the site (instead of having to become aware of the existence of &quot;LazyX&quot;) and can use it with nothing more than &lt;tt&gt;() -&amp;gt; value&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14599547" author="ajs6f" created="Wed, 24 Jun 2015 15:12:11 +0000"  >&lt;p&gt;There is &lt;tt&gt;LateBindingIterator implements Iterator&lt;/tt&gt; and there is &lt;tt&gt;LazyIterator implements ExtendedIterator&lt;/tt&gt;. Can &lt;tt&gt;LateBindingIterator&lt;/tt&gt; be deprecated in favor of &lt;tt&gt;LazyIterator&lt;/tt&gt;? &lt;tt&gt;LateBindingIterator&lt;/tt&gt;, as mentioned above, is used only in &lt;tt&gt;Unparser&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14599624" author="ajs6f" created="Wed, 24 Jun 2015 16:00:34 +0000"  >&lt;p&gt;As per comment on the dev mailing list, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=claudenw&quot; class=&quot;user-hover&quot; rel=&quot;claudenw&quot;&gt;claudenw&lt;/a&gt; is going to wrangle &lt;tt&gt;LazyIterator&lt;/tt&gt; and &lt;tt&gt;LateBindingIterator&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14599637" author="ajs6f" created="Wed, 24 Jun 2015 16:10:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;, I am still not clear about your objection to deprecating &lt;tt&gt;Map1Iterator&lt;/tt&gt; in favor of &lt;tt&gt;Iter::map&lt;/tt&gt;. Are you entirely against this or is there something I can do to make it more attractive? My hope is to find those places where an &lt;tt&gt;ExtendedIterator&lt;/tt&gt; is not in fact needed and replace them with a simple use of &lt;tt&gt;Iter::map&lt;/tt&gt; and for the rest, use &lt;tt&gt;WrappedIterator&lt;/tt&gt; around a call to &lt;tt&gt;Iter::map&lt;/tt&gt;. There would be no direct connection from &lt;tt&gt;Iter&lt;/tt&gt; to the classes in &lt;tt&gt;&amp;lt;jena-core&amp;gt;/org.apache.jena.util.iterator&lt;/tt&gt;, although there would be a connection the other way. I thought the larger strategy was indeed to shift from &lt;tt&gt;&amp;lt;jena-core&amp;gt;/org.apache.jena.util&lt;/tt&gt; to Atlas, in &lt;tt&gt;&amp;lt;jena-base&amp;gt;&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="14599851" author="githubbot" created="Wed, 24 Jun 2015 18:06:12 +0000"  >&lt;p&gt;GitHub user ajs6f opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/80&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/80&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Deprecating and removing some iterators from jena-core&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-966&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/JENA-966&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ajs6f/jena&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ajs6f/jena&lt;/a&gt; DeprecateSomeIterators&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/80.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/80.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #80&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit b58fe263c97da3c51f66872e8e99b07b2d49fcf7&lt;br/&gt;
Author: ajs6f &amp;lt;ajs6f@virginia.edu&amp;gt;&lt;br/&gt;
Date:   2015-06-24T18:04:30Z&lt;/p&gt;

&lt;p&gt;    Deprecating and removing some iterators from jena-core&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14599853" author="githubbot" created="Wed, 24 Jun 2015 18:07:17 +0000"  >&lt;p&gt;Github user ajs6f commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/79#issuecomment-114963486&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/79#issuecomment-114963486&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Closed in favor of #80 .&lt;/p&gt;</comment>
                            <comment id="14599856" author="githubbot" created="Wed, 24 Jun 2015 18:07:31 +0000"  >&lt;p&gt;Github user ajs6f commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/79#issuecomment-114963573&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/79#issuecomment-114963573&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Closed in favor of #80 .&lt;/p&gt;</comment>
                            <comment id="14599857" author="githubbot" created="Wed, 24 Jun 2015 18:07:32 +0000"  >&lt;p&gt;Github user ajs6f closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/79&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/79&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14600155" author="andy.seaborne" created="Wed, 24 Jun 2015 21:11:45 +0000"  >&lt;p&gt;There is no strategy to move &lt;tt&gt;org.apache.jena.util.iterator.*&lt;/tt&gt; to jena-base from my point of view.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Iter&lt;/tt&gt;, which is not tied into &lt;tt&gt;ExtendedIterator&lt;/tt&gt; and is not just some utilities for Iterators, is in jena-base and is used in severals modules.&lt;/p&gt;

&lt;p&gt;My point of view is that the iterators in jena-core work perfectly well and can be left alone now the functional idioms are in use.  Changes for change sake adds nothing for users and costs the project. Adding wrappers to put back functionality taken out of working code seems rather odd.&lt;/p&gt;</comment>
                            <comment id="14601203" author="ajs6f" created="Thu, 25 Jun 2015 13:40:07 +0000"  >&lt;p&gt;Okay, I had that misapprehension based on some comments you (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;) made during the introduction of Java 8 syntax a while ago. Clearly I misunderstood you, for which I apologize. I certainly am &lt;em&gt;not&lt;/em&gt; trying to introduce &quot;Changes for change sake&quot;-- no one has enough time for that, especially on an unpaid basis. &lt;/p&gt;
{grin}

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=claudenw&quot; class=&quot;user-hover&quot; rel=&quot;claudenw&quot;&gt;claudenw&lt;/a&gt;, can I ask you to clarify when it is appropriate to use &lt;tt&gt;ExtendedIterator&lt;/tt&gt; and when it is better to use &lt;tt&gt;Iter&lt;/tt&gt;? &lt;tt&gt;Iter&lt;/tt&gt; features all of the functionality of &lt;tt&gt;ExtendedIterator&lt;/tt&gt; and more. Since &lt;tt&gt;Iter&lt;/tt&gt; is in &lt;tt&gt;jena-base&lt;/tt&gt; and &lt;tt&gt;ExtendedIterator&lt;/tt&gt; is in &lt;tt&gt;jena-core&lt;/tt&gt;, &lt;tt&gt;Iter&lt;/tt&gt; will be available any time &lt;tt&gt;ExtendedIterator&lt;/tt&gt; is. That&apos;s another reason I assumed we would want to shift to &lt;tt&gt;Iter&lt;/tt&gt;-- from a naive point of view, they look like flat-out duplication. If you can unpack this a bit for me, I will send a PR with some Javadocs additions for both that will prevent anyone else from going down the mistaken road I just wasted my time on.&lt;/p&gt;</comment>
                            <comment id="14603311" author="jira-bot" created="Fri, 26 Jun 2015 17:58:14 +0000"  >&lt;p&gt;Commit e9a976bae67be635047b52d7fa598e144015553b in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=claude%40xenei.org&quot; class=&quot;user-hover&quot; rel=&quot;claude@xenei.org&quot;&gt;claude@xenei.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=e9a976b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=e9a976b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-966&quot; title=&quot;LazyIterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-966&quot;&gt;&lt;del&gt;JENA-966&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Added removeNext(), andThen(), toList() and toSet() implementations to LazyIterator.&lt;/p&gt;

&lt;p&gt;Deprecated LateBindingIterator which had much the same.&lt;br/&gt;
Modified Unparser to use LazyIterator rather than LateBindingIterator&lt;/p&gt;</comment>
                            <comment id="14603324" author="andy.seaborne" created="Fri, 26 Jun 2015 18:05:13 +0000"  >&lt;p&gt;Let&apos;s delete unused &quot;LateBindingIterator&quot; and &quot;EarlyBindingIterator&quot;.&lt;/p&gt;</comment>
                            <comment id="14603338" author="andy.seaborne" created="Fri, 26 Jun 2015 18:10:40 +0000"  >&lt;p&gt;Shouldn&apos;t {{public  ExtendedIterator&amp;lt;T&amp;gt; andThen(ClosableIterator&amp;lt;? extends T&amp;gt; other) }} be deleted? &lt;/p&gt;

&lt;p&gt;It&apos;s just the same as the other &lt;tt&gt;andThen&lt;/tt&gt; but (a historical mistake presumably, from the days before @Override) has the wrong signature for the interface.&lt;/p&gt;</comment>
                            <comment id="14603345" author="jira-bot" created="Fri, 26 Jun 2015 18:14:43 +0000"  >&lt;p&gt;Commit 480706bdcff37bf740c9b66d3c6a5ed8f6d17709 in jena&apos;s branch refs/heads/jena2 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=claude%40xenei.org&quot; class=&quot;user-hover&quot; rel=&quot;claude@xenei.org&quot;&gt;claude@xenei.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=480706b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=480706b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-966&quot; title=&quot;LazyIterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-966&quot;&gt;&lt;del&gt;JENA-966&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Added removeNext(), andThen(), toList() and toSet() implementations to LazyIterator.&lt;/p&gt;

&lt;p&gt;Deprecated LateBindingIterator which had much the same.&lt;br/&gt;
Modified Unparser to use LazyIterator rather than LateBindingIterator&lt;/p&gt;</comment>
                            <comment id="14603365" author="jira-bot" created="Fri, 26 Jun 2015 18:26:01 +0000"  >&lt;p&gt;Commit cba80269fd4848cc35bf5f102cbb6bace923f3d5 in jena&apos;s branch refs/heads/jena2 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=claude%40xenei.org&quot; class=&quot;user-hover&quot; rel=&quot;claude@xenei.org&quot;&gt;claude@xenei.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=cba8026&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=cba8026&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;removed  {{public ExtendedIterator&amp;lt;T&amp;gt; andThen(ClosableIterator&amp;lt;? extends T&amp;gt; other) }}&lt;br/&gt;
as it was the same as the other andThen().&lt;/p&gt;

&lt;p&gt;part of &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-966&quot; title=&quot;LazyIterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-966&quot;&gt;&lt;del&gt;JENA-966&lt;/del&gt;&lt;/a&gt; fix&lt;/p&gt;</comment>
                            <comment id="14603369" author="jira-bot" created="Fri, 26 Jun 2015 18:27:11 +0000"  >&lt;p&gt;Commit 73f42cad91d6e92816d6c0b790c38cfc1ab15650 in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=claude%40xenei.org&quot; class=&quot;user-hover&quot; rel=&quot;claude@xenei.org&quot;&gt;claude@xenei.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=73f42ca&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=73f42ca&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;removed removed  {{public ExtendedIterator&amp;lt;T&amp;gt; andThen(ClosableIterator&amp;lt;? extends T&amp;gt; other) }}&lt;br/&gt;
as it has the wrong signature&lt;/p&gt;

&lt;p&gt;part of &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-966&quot; title=&quot;LazyIterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-966&quot;&gt;&lt;del&gt;JENA-966&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14603372" author="claudenw" created="Fri, 26 Jun 2015 18:28:04 +0000"  >&lt;p&gt;I think we should deprecate them now and remove them for 3.1.0 &amp;#8211; give people more time to make the changes.  Perhaps I am being too cautious.&lt;/p&gt;</comment>
                            <comment id="14603448" author="andy.seaborne" created="Fri, 26 Jun 2015 19:13:24 +0000"  >&lt;p&gt;Not critical either way but, yes, that&apos;s pretty cautious even by my standards &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Jena3 is a chance to &quot;accelerate deprecation&quot;. In tis case, I doubt anyone uses them (they are not contract).&lt;/p&gt;

&lt;p&gt;The code does not use them, LateBindingIterator isn&apos;t even an ExtendedIterator. EarlyBindingIterator has no tests and isn&apos;t very important anyway.&lt;/p&gt;</comment>
                            <comment id="14604606" author="andy.seaborne" created="Sun, 28 Jun 2015 09:45:54 +0000"  >&lt;p&gt;The Jenkins test job has got failures:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/view/H-L/view/Jena/job/Jena_Development_Deploy/org.apache.jena$jena-arq/968/testReport/junit/org.apache.jena.riot.writer/TestRiotWriterGraph/writer00_8__RDF_XML_pretty_/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/H-L/view/Jena/job/Jena_Development_Deploy/org.apache.jena$jena-arq/968/testReport/junit/org.apache.jena.riot.writer/TestRiotWriterGraph/writer00_8__RDF_XML_pretty_/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;NPE in LazyIterator. ARQ and Elephas affected.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException: null
	at org.apache.jena.rdfxml.xmloutput.impl.Unparser$6.create(Unparser.java:1549)
	at org.apache.jena.util.iterator.LazyIterator.lazy(LazyIterator.java:113)
	at org.apache.jena.util.iterator.LazyIterator.filterKeep(LazyIterator.java:67)
	at org.apache.jena.rdfxml.xmloutput.impl.Unparser.listSubjects(Unparser.java:1658)
	at org.apache.jena.rdfxml.xmloutput.impl.Unparser.wObjStar(Unparser.java:358)
	at org.apache.jena.rdfxml.xmloutput.impl.Unparser.wRDF(Unparser.java:345)
	at org.apache.jena.rdfxml.xmloutput.impl.Unparser.write(Unparser.java:247)
	at org.apache.jena.rdfxml.xmloutput.impl.Abbreviated.writeBody(Abbreviated.java:140)
	at org.apache.jena.rdfxml.xmloutput.impl.BaseXMLWriter.writeXMLBody(BaseXMLWriter.java:501)
	at org.apache.jena.rdfxml.xmloutput.impl.BaseXMLWriter.write(BaseXMLWriter.java:473)
	at org.apache.jena.rdfxml.xmloutput.impl.Abbreviated.write(Abbreviated.java:125)
	at org.apache.jena.rdfxml.xmloutput.impl.BaseXMLWriter.write(BaseXMLWriter.java:460)
	at org.apache.jena.riot.adapters.AdapterRDFWriter.write(AdapterRDFWriter.java:51)
	at org.apache.jena.riot.RDFDataMgr.write$(RDFDataMgr.java:1318)
	at org.apache.jena.riot.RDFDataMgr.write(RDFDataMgr.java:1084)
	at org.apache.jena.riot.RDFDataMgr.write(RDFDataMgr.java:1018)
	at org.apache.jena.riot.writer.TestRiotWriterGraph.test(TestRiotWriterGraph.java:120)
	at org.apache.jena.riot.writer.TestRiotWriterGraph.writer00(TestRiotWriterGraph.java:79)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14604610" author="andy.seaborne" created="Sun, 28 Jun 2015 09:56:38 +0000"  >&lt;p&gt;There is a quicker build for testing the main modules:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mvn install -Pdev
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14604886" author="andy.seaborne" created="Sun, 28 Jun 2015 20:16:06 +0000"  >&lt;p&gt;In &lt;tt&gt;Unparser.listSubjects&lt;/tt&gt; the iterator &lt;tt&gt;firstChoiceCyclic&lt;/tt&gt; is setup with:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Iterator&amp;lt;Resource&amp;gt; firstChoiceCyclic = allInfiniteLeft()
				.filterKeep(r -&amp;gt; {
					codeCoverage[4]++;
					if (r.isAnon())
						return false;
					Integer cnt = objectTable.get(r);
					if (cnt == null || cnt.intValue() &amp;lt;= 1)
						return false;
					return true;
				});
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;tt&gt;allInfiniteLeft&lt;/tt&gt; with the old code, &lt;tt&gt;LateBindingIterator&lt;/tt&gt; calls &lt;tt&gt;NiceIterator.filterKeep&lt;/tt&gt; which itself creates a &lt;tt&gt;FilterIterator&lt;/tt&gt; and the unlazy operation is first called at the &quot;hasNext&quot; stage - i.e. first use in the iterator of iterators, and after &lt;tt&gt;fakeLazyEvaluator&lt;/tt&gt; which is the initialization of &lt;tt&gt;infinite&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;allInfiniteLeft} with the new code, {{LazyIterator&lt;/tt&gt; calls the unlazy operation during &lt;tt&gt;LazyIterator.filterKeep&lt;/tt&gt; hence it&apos;s called at setup time assigning to &lt;tt&gt;firstChoiceCyclic&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Temporary fix applied to &lt;tt&gt;LazyIterator&lt;/tt&gt; : the NiceIterator code for filterKeep, filterDrop copied to LazyIterator.&lt;/p&gt;

&lt;p&gt;NB It looks like &lt;tt&gt;LazyIterator.mapWith&lt;/tt&gt; is also wrong. Fix applied for review. It uses &lt;tt&gt;Map1Iterator&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Possible proper solutions:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;&lt;tt&gt;LazyIterator&lt;/tt&gt; extends &lt;tt&gt;NiceIterator&lt;/tt&gt; and only override hasNext, next, remove.&lt;/li&gt;
	&lt;li&gt;Drop &lt;tt&gt;LazyIterator&lt;/tt&gt;, use &lt;tt&gt;LateBindingIterator&lt;/tt&gt; (renamed?)&lt;/li&gt;
	&lt;li&gt;Drop both, put a copy of &lt;tt&gt;LateBindingIterator&lt;/tt&gt; into package-scoped in the unparser package as &lt;tt&gt;UnparserLateBindingIterator&lt;/tt&gt; for unparser use only.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Comments?&lt;/p&gt;</comment>
                            <comment id="14604892" author="jira-bot" created="Sun, 28 Jun 2015 20:22:36 +0000"  >&lt;p&gt;Commit 6f54f643125ee356b9694da51b70b50342abcd49 in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=6f54f64&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=6f54f64&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-966&quot; title=&quot;LazyIterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-966&quot;&gt;&lt;del&gt;JENA-966&lt;/del&gt;&lt;/a&gt; : filterKeep/filterDrop : Fix for laziness to apply on use.&lt;/p&gt;</comment>
                            <comment id="14608023" author="jira-bot" created="Tue, 30 Jun 2015 09:35:35 +0000"  >&lt;p&gt;Commit 434bb59fb8e13370869256463369156dfb0f1408 in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=434bb59&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=434bb59&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-966&quot; title=&quot;LazyIterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-966&quot;&gt;&lt;del&gt;JENA-966&lt;/del&gt;&lt;/a&gt; : LazyInterator extends NiceIterator.&lt;/p&gt;</comment>
                            <comment id="14608025" author="andy.seaborne" created="Tue, 30 Jun 2015 09:36:01 +0000"  >&lt;p&gt;Option 1 used to DRY the code.&lt;/p&gt;</comment>
                            <comment id="14608035" author="jira-bot" created="Tue, 30 Jun 2015 09:41:47 +0000"  >&lt;p&gt;Commit 21b5e602e7411735ba22a716f84b136cdb709169 in jena&apos;s branch refs/heads/jena2 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=21b5e60&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=21b5e60&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-966&quot; title=&quot;LazyIterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-966&quot;&gt;&lt;del&gt;JENA-966&lt;/del&gt;&lt;/a&gt;: backport LazyIterator changes&lt;/p&gt;</comment>
                            <comment id="14613322" author="jira-bot" created="Fri, 3 Jul 2015 17:09:36 +0000"  >&lt;p&gt;Commit 66ceff0cb1b2aaddf4477993dda60a1e32026ebf in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=66ceff0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=66ceff0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-966&quot; title=&quot;LazyIterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-966&quot;&gt;&lt;del&gt;JENA-966&lt;/del&gt;&lt;/a&gt;: Deprecate EarlyBindingIterator and UniqueExtendedIterator&lt;/p&gt;</comment>
                            <comment id="14613323" author="andy.seaborne" created="Fri, 3 Jul 2015 17:10:16 +0000"  >&lt;p&gt;Can we wrap this up now by removing these iterators (which are not used in the code base and don&apos;t form part of an API):&lt;/p&gt;

&lt;p&gt;EarlyBindingIterator&lt;br/&gt;
UniqueExtendedIterator&lt;br/&gt;
LateBindingIterator&lt;/p&gt;</comment>
                            <comment id="14623937" author="jira-bot" created="Sun, 12 Jul 2015 18:38:28 +0000"  >&lt;p&gt;Commit 764cf529257f3b180e5b6f456a5464813fe47628 in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=claude%40xenei.org&quot; class=&quot;user-hover&quot; rel=&quot;claude@xenei.org&quot;&gt;claude@xenei.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=764cf52&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=764cf52&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Removed EarlyBindingIterator, UniqueExtendedIterator, and LateBindingIterator.&lt;br/&gt;
Part of a fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-966&quot; title=&quot;LazyIterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-966&quot;&gt;&lt;del&gt;JENA-966&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
Should complete the fix.&lt;/p&gt;</comment>
                            <comment id="14623982" author="claudenw" created="Sun, 12 Jul 2015 20:03:35 +0000"  >&lt;p&gt;Jenkins build successful after removal of 3 iterators.  Closing issue as completed.&lt;/p&gt;</comment>
                            <comment id="14624531" author="jira-bot" created="Mon, 13 Jul 2015 11:13:20 +0000"  >&lt;p&gt;Commit 71363fc1bf5465a3126c601f1331f812e9a8e19d in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=71363fc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=71363fc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;This closes #80. See &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-966&quot; title=&quot;LazyIterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-966&quot;&gt;&lt;del&gt;JENA-966&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14627974" author="githubbot" created="Wed, 15 Jul 2015 12:36:21 +0000"  >&lt;p&gt;Github user ajs6f closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/80&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/80&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14646710" author="githubbot" created="Wed, 29 Jul 2015 20:31:05 +0000"  >&lt;p&gt;Github user ajs6f commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/90#discussion_r35807971&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/90#discussion_r35807971&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: jena-base/src/main/java/org/apache/jena/atlas/iterator/Iter.java &amp;#8212;&lt;br/&gt;
    @@ -29,6 +29,14 @@&lt;br/&gt;
     import org.apache.jena.atlas.lib.Closeable ;&lt;br/&gt;
     import org.apache.jena.atlas.lib.Sink ;&lt;/p&gt;

&lt;p&gt;    +/**&lt;br/&gt;
    + * Iter provides utilities for working with &lt;/p&gt;
{@link Iterator}
&lt;p&gt;s.&lt;br/&gt;
    + *&lt;br/&gt;
    + * Iter should never be used as a return type or parameter type in the public contract of a class. It is only to be used&lt;br/&gt;
    + * inside implementation code and is instantiated only to allow method-chaining as part of a calculation.&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Yes, that&apos;s why the note is useful. If `Iter` actually imposed that in the code there would be no need for documentation.&lt;/p&gt;

&lt;p&gt;    Is there in fact any difference between `Iter` and `ExtendedIterator`? They are both subtypes of `java.util.Iterator` that provide convenient methods, with the functionality of `Iter` entirely overlapping that of `ExtendedIterator`. I&apos;ve tried repeatedly to discover this information, and my experience shows that it is quite possible to confuse them. You were quite explicit in explaining to me in connection with &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-966&quot; title=&quot;LazyIterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-966&quot;&gt;&lt;del&gt;JENA-966&lt;/del&gt;&lt;/a&gt; that they are not to be used in the same circumstances, and all I&apos;m trying to do here is determine what those circumstances actually are and record them.&lt;/p&gt;</comment>
                            <comment id="14647612" author="githubbot" created="Thu, 30 Jul 2015 13:26:59 +0000"  >&lt;p&gt;Github user ajs6f commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/90#discussion_r35869523&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/90#discussion_r35869523&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: jena-base/src/main/java/org/apache/jena/atlas/iterator/Iter.java &amp;#8212;&lt;br/&gt;
    @@ -29,6 +29,14 @@&lt;br/&gt;
     import org.apache.jena.atlas.lib.Closeable ;&lt;br/&gt;
     import org.apache.jena.atlas.lib.Sink ;&lt;/p&gt;

&lt;p&gt;    +/**&lt;br/&gt;
    + * Iter provides utilities for working with &lt;/p&gt;
{@link Iterator}
&lt;p&gt;s.&lt;br/&gt;
    + *&lt;br/&gt;
    + * Iter should never be used as a return type or parameter type in the public contract of a class. It is only to be used&lt;br/&gt;
    + * inside implementation code and is instantiated only to allow method-chaining as part of a calculation.&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    What I meant by &quot;difference&quot; was context of use. In other words, what I have been trying to get at with this conversation, as I have written, is the answer to &quot;When should one use `Iter`, and when should one use `ExtendedIterator`?&quot; I tried to use `Iter` inside an `ExtendedIterator` during &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-966&quot; title=&quot;LazyIterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-966&quot;&gt;&lt;del&gt;JENA-966&lt;/del&gt;&lt;/a&gt; and you explained that this was wrong, and I am trying to get Javadocs into these classes so that other people don&apos;t have the same confusion. &lt;/p&gt;

&lt;p&gt;    I still have no idea when to use either. If the difference is purely historical, then there is no inherent need for both, and perhaps I should open a ticket for a slow, careful, un-disruptive migration towards a single type for these purposes?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g4lb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>