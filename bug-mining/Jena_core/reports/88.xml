<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 19:57:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JENA-1249] ModelCom constuction triggers prefix reading in TDB</title>
                <link>https://issues.apache.org/jira/browse/JENA-1249</link>
                <project id="12311220" key="JENA">Apache Jena</project>
                    <description>&lt;p&gt;For TDB, the Dataset-level wrapper is &lt;tt&gt;DatasetImpl&lt;/tt&gt;. The model-level operations &lt;tt&gt;Dataset.getDefaultModel&lt;/tt&gt; and &lt;tt&gt;Dataset.getNamedModel&lt;/tt&gt; use a &lt;tt&gt;ModelCom&lt;/tt&gt; to wrap the graph.&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;ModelCom&lt;/tt&gt; construct also calls &lt;tt&gt;ModelCom.getPrefixMapping&lt;/tt&gt; which in turn triggers the TDB graph level prefix mapping to be created.&lt;/p&gt;

&lt;p&gt;Due to &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-81&quot; title=&quot;Partial failure to see prefixes in persistent storage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-81&quot;&gt;&lt;del&gt;JENA-81&lt;/del&gt;&lt;/a&gt;, the prefix map is read to the cache when the graph starts.&lt;/p&gt;

&lt;p&gt;Overall result - creating the model causes the prefix mappings to be read.&lt;/p&gt;

&lt;p&gt;We should avoid calling &lt;tt&gt;getPrefixMapping&lt;/tt&gt; inside the &lt;tt&gt;ModelCom&lt;/tt&gt; constructor.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015021">JENA-1249</key>
            <summary>ModelCom constuction triggers prefix reading in TDB</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andy">Andy Seaborne</assignee>
                                    <reporter username="andy">Andy Seaborne</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Oct 2016 09:20:04 +0000</created>
                <updated>Tue, 8 Nov 2016 10:21:28 +0000</updated>
                            <resolved>Mon, 31 Oct 2016 11:14:47 +0000</resolved>
                                                    <fixVersion>Jena 3.1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15604762" author="andy.seaborne" created="Tue, 25 Oct 2016 09:25:10 +0000"  >&lt;p&gt;A test program showing the costs of getPrefixes for TDB.&lt;/p&gt;</comment>
                            <comment id="15604765" author="andy.seaborne" created="Tue, 25 Oct 2016 09:26:04 +0000"  >&lt;p&gt;Original report &lt;a href=&quot;https://lists.apache.org/thread.html/acd5c14d296d6acd2eeb55e7aa9a4727f50aa386bae80b38a8b7649f@%3Cdev.jena.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;email from users@ Nov 2016&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15604819" author="andy.seaborne" created="Tue, 25 Oct 2016 09:49:09 +0000"  >&lt;p&gt;Proposal: &lt;/p&gt;

&lt;p&gt;Remove the ability to set the default a prefix mapping on ModelCom.&lt;/p&gt;

&lt;p&gt;ModelFactory has the same functionality (currently, it sets the statics in ModelCom).&lt;/p&gt;

&lt;p&gt;Remove from ModelFactory as well (deprecation cycle) - specifically so that it does not happen for &lt;tt&gt;ModelFactory.createModelForGraph&lt;/tt&gt; which is the common way to put a Model wrapper around a Graph.&lt;/p&gt;

&lt;p&gt;This is a proposed two step plan :&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;avoid the problem for 3.1.1 by checking whether prefix mapping defaults need setting. If not, the normal case, prefixes loading does not occur during model creation.&lt;/li&gt;
	&lt;li&gt;deprecate the associated functionality (setting a default prefix map) with a view to removal.  I believe is little used, especially with TDB where it could cause a read transaction to try to write.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;There is a interaction with how Jena initializes because common vocabularies depend on ModelCom, and ModelCom depends on subsystem prefix initialization, which initializes common vocabularies. Removing implicit default prefixes will break that cycle making initialization more reliable as the code changes cause different class initialization orderings.&lt;/p&gt;</comment>
                            <comment id="15605278" author="ajs6f" created="Tue, 25 Oct 2016 13:12:36 +0000"  >&lt;p&gt;+1 to the proposal. It might be nice for step 2 to add a convenience constant containing the old defaults, to let people have an easy migration.&lt;/p&gt;</comment>
                            <comment id="15605313" author="andy.seaborne" created="Tue, 25 Oct 2016 13:25:23 +0000"  >&lt;p&gt;See &lt;tt&gt;ModelCom&lt;/tt&gt;:  the standard default is an empty prefix mapping. If the app does not set the default prefix mapping, no migration is involved.&lt;/p&gt;</comment>
                            <comment id="15605321" author="ajs6f" created="Tue, 25 Oct 2016 13:28:50 +0000"  >&lt;p&gt;Oh, cool. Never mind then.&lt;/p&gt;</comment>
                            <comment id="15609768" author="jira-bot" created="Wed, 26 Oct 2016 21:43:30 +0000"  >&lt;p&gt;Commit 4573a430e7b05c9a3e669e53f128507461f03bf3 in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=4573a43&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=4573a43&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1249&quot; title=&quot;ModelCom constuction triggers prefix reading in TDB&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1249&quot;&gt;&lt;del&gt;JENA-1249&lt;/del&gt;&lt;/a&gt; - Add PrefixMapping.numPrefixes and PrefixMapping.noMappings&lt;/p&gt;</comment>
                            <comment id="15609769" author="jira-bot" created="Wed, 26 Oct 2016 21:43:31 +0000"  >&lt;p&gt;Commit d865a839c9268b5f2e23c223c193f409b887a28c in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=d865a83&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=d865a83&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1249&quot; title=&quot;ModelCom constuction triggers prefix reading in TDB&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1249&quot;&gt;&lt;del&gt;JENA-1249&lt;/del&gt;&lt;/a&gt; - Don&apos;t touch prefixes unless non-empty to be merged.&lt;/p&gt;

&lt;p&gt;Cope with initialization ordering effects.&lt;/p&gt;</comment>
                            <comment id="15609770" author="jira-bot" created="Wed, 26 Oct 2016 21:43:32 +0000"  >&lt;p&gt;Commit fd44d834ac940005e9067947d3a5968bdc0779db in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=fd44d83&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=fd44d83&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1249&quot; title=&quot;ModelCom constuction triggers prefix reading in TDB&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1249&quot;&gt;&lt;del&gt;JENA-1249&lt;/del&gt;&lt;/a&gt;: Merge commit &apos;refs/pull/183/head&apos; of github.com:apache/jena&lt;/p&gt;

&lt;p&gt;This closes #183.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12835095" name="ReportPerf.java" size="2265" author="andy" created="Tue, 25 Oct 2016 09:25:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35cnj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>