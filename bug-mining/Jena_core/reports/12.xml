<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 19:57:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JENA-335] Node.hashCode of an illegal hexBinary causes a Xerces-originated exception.</title>
                <link>https://issues.apache.org/jira/browse/JENA-335</link>
                <project id="12311220" key="JENA">Apache Jena</project>
                    <description>&lt;p&gt;To reproduce in Jena core:&lt;/p&gt;

&lt;p&gt;        Node n = Node.createLiteral(&quot;AB CD&quot;, XSDDatatype.XSDhexBinary) ;&lt;br/&gt;
        n.hashCode() ;&lt;/p&gt;

&lt;p&gt;Effect&lt;/p&gt;

&lt;p&gt;A bad lexical form for hexBinary causes problems for TDB: &lt;/p&gt;

&lt;p&gt;Example data:&lt;br/&gt;
---- D.ttl&lt;br/&gt;
{{&lt;br/&gt;
@prefix xsd:     &amp;lt;&lt;a href=&quot;http://www.w3.org/2001/XMLSchema#&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/2001/XMLSchema#&lt;/a&gt;&amp;gt; .&lt;br/&gt;
@prefix :        &amp;lt;&lt;a href=&quot;http://example/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://example/&lt;/a&gt;&amp;gt; .&lt;/p&gt;

&lt;p&gt;:s &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &quot;AB CD&quot;^^xsd:hexBinary .&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;:s &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &quot;AB CD&quot;^^xsd:float .&lt;br/&gt;
}}&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;tdbloader --loc DB D.ttl ==&amp;gt;&lt;/p&gt;

&lt;p&gt;WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;line: 4, col: 7 &amp;#93;&lt;/span&gt; Lexical form &apos;AB CD&apos; not valid for datatype &lt;a href=&quot;http://www.w3.org/2001/XMLSchema#hexBinary&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/2001/XMLSchema#hexBinary&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://example/s&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://example/s&lt;/a&gt; &lt;a href=&quot;http://example/p&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://example/p&lt;/a&gt; &quot;AB CD&quot;^^&lt;a href=&quot;http://www.w3.org/2001/XMLSchema#hexBinary&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/2001/XMLSchema#hexBinary&lt;/a&gt;&lt;br/&gt;
com.hp.hpl.jena.datatypes.DatatypeFormatException: Lexical form &apos;AB CD&apos; is not a legal instance of Datatype&lt;a href=&quot;http://www.w3.org/2001/XMLSchema#hexBinary&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/2001/XMLSchema#hexBinary&lt;/a&gt; Lexical form &apos;AB CD&apos; is not a legal instance of Datatype&lt;a href=&quot;http://www.w3.org/2001/XMLSchema#hexBinary&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/2001/XMLSchema#hexBinary&lt;/a&gt; during parse -org.apache.xerces.impl.dv.InvalidDatatypeValueException: cvc-datatype-valid.1.2.1: &apos;AB CD&apos; is not a valid value for &apos;hexBinary&apos;.&lt;br/&gt;
	at com.hp.hpl.jena.graph.impl.LiteralLabelImpl.getValue(LiteralLabelImpl.java:326)&lt;br/&gt;
	at com.hp.hpl.jena.datatypes.xsd.XSDhexBinary.getHashCode(XSDhexBinary.java:81)&lt;br/&gt;
	at com.hp.hpl.jena.graph.impl.LiteralLabelImpl.hashCode(LiteralLabelImpl.java:448)&lt;br/&gt;
	at com.hp.hpl.jena.graph.Node.hashCode(Node.java:331)&lt;br/&gt;
	at java.util.HashMap.hash(HashMap.java:351)&lt;/p&gt;

&lt;p&gt;The WARN is right - the exception should not happen.  Looks like Xerces is behaving differently because &lt;br/&gt;
a bad float only causes a wanring (which is correct) and TDB continues.&lt;/p&gt;


</description>
                <environment></environment>
        <key id="12612265">JENA-335</key>
            <summary>Node.hashCode of an illegal hexBinary causes a Xerces-originated exception.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andy">Andy Seaborne</assignee>
                                    <reporter username="andy">Andy Seaborne</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Oct 2012 17:54:10 +0000</created>
                <updated>Wed, 7 Nov 2012 14:48:49 +0000</updated>
                            <resolved>Thu, 18 Oct 2012 14:26:54 +0000</resolved>
                                    <version>Jena 2.7.3</version>
                                    <fixVersion>Jena 2.7.4</fixVersion>
                                    <component>Jena</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13479031" author="andy.seaborne" created="Thu, 18 Oct 2012 14:26:54 +0000"  >&lt;p&gt;hexBinary and base64Binary use a byte[] as their value.&lt;/p&gt;

&lt;p&gt;The getHashCode function of the datatypes calls getValue()&lt;/p&gt;

&lt;p&gt;    return getHashCode( (byte []) lit.getValue() )&lt;/p&gt;

&lt;p&gt;They can not use the default implementation (in BaseDatatype) because that does value.hashCode when the literal is well-formed.  A Java byte[] is not value-equals - it&apos;s only object-identify-equals and different instances have different hashcodes.&lt;/p&gt;

&lt;p&gt;Fix: &lt;br/&gt;
Change each of hexBinary.getHashCode and base64Binary.getHashCode to be:&lt;/p&gt;

&lt;p&gt;        if ( lit.isWellFormed() )&lt;br/&gt;
            return getHashCode( (byte []) lit.getValue() );&lt;br/&gt;
        else&lt;br/&gt;
            return lit.getLexicalForm().hashCode() ;&lt;/p&gt;</comment>
                            <comment id="13479039" author="hudson" created="Thu, 18 Oct 2012 14:37:49 +0000"  >&lt;p&gt;Integrated in Jena__Development_Test #217 (See &lt;a href=&quot;https://builds.apache.org/job/Jena__Development_Test/217/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Jena__Development_Test/217/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-335&quot; title=&quot;Node.hashCode of an illegal hexBinary causes a Xerces-originated exception.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-335&quot;&gt;&lt;del&gt;JENA-335&lt;/del&gt;&lt;/a&gt; : Make getHashCode check the &quot;wellformed&quot; flag of the LiteralLabel. (Revision 1399675)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
andy : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/jena/trunk/jena-core/src/main/java/com/hp/hpl/jena/datatypes/BaseDatatype.java&lt;/li&gt;
	&lt;li&gt;/jena/trunk/jena-core/src/main/java/com/hp/hpl/jena/datatypes/xsd/XSDbase64Binary.java&lt;/li&gt;
	&lt;li&gt;/jena/trunk/jena-core/src/main/java/com/hp/hpl/jena/datatypes/xsd/XSDhexBinary.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13479060" author="hudson" created="Thu, 18 Oct 2012 15:08:05 +0000"  >&lt;p&gt;Integrated in Jena__Development_Test #219 (See &lt;a href=&quot;https://builds.apache.org/job/Jena__Development_Test/219/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Jena__Development_Test/219/&lt;/a&gt;)&lt;br/&gt;
    Tests to cover &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-335&quot; title=&quot;Node.hashCode of an illegal hexBinary causes a Xerces-originated exception.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-335&quot;&gt;&lt;del&gt;JENA-335&lt;/del&gt;&lt;/a&gt; (Revision 1399689)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
andy : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/jena/trunk/jena-core/src/test/java/com/hp/hpl/jena/graph/test/TestLiteralLabels.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13481333" author="hudson" created="Mon, 22 Oct 2012 12:29:29 +0000"  >&lt;p&gt;Integrated in Jena__Development_Test #235 (See &lt;a href=&quot;https://builds.apache.org/job/Jena__Development_Test/235/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Jena__Development_Test/235/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-335&quot; title=&quot;Node.hashCode of an illegal hexBinary causes a Xerces-originated exception.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-335&quot;&gt;&lt;del&gt;JENA-335&lt;/del&gt;&lt;/a&gt; : Make XSDbase64binary as registered handler for byte[] (this is the original behaviour, pre &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-335&quot; title=&quot;Node.hashCode of an illegal hexBinary causes a Xerces-originated exception.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-335&quot;&gt;&lt;del&gt;JENA-335&lt;/del&gt;&lt;/a&gt;).  Do not register XSDhexBinary. (Revision 1400849)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
andy : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/jena/trunk/jena-core/src/main/java/com/hp/hpl/jena/datatypes/xsd/XSDbase64Binary.java&lt;/li&gt;
	&lt;li&gt;/jena/trunk/jena-core/src/main/java/com/hp/hpl/jena/datatypes/xsd/XSDbinary.java&lt;/li&gt;
	&lt;li&gt;/jena/trunk/jena-core/src/main/java/com/hp/hpl/jena/datatypes/xsd/XSDhexBinary.java&lt;/li&gt;
	&lt;li&gt;/jena/trunk/jena-core/src/test/java/com/hp/hpl/jena/graph/test/TestTypedLiterals.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13492393" author="hudson" created="Wed, 7 Nov 2012 14:48:49 +0000"  >&lt;p&gt;Integrated in Jena_Development_Test_Windows #6 (See &lt;a href=&quot;https://builds.apache.org/job/Jena_Development_Test_Windows/6/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Jena_Development_Test_Windows/6/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-335&quot; title=&quot;Node.hashCode of an illegal hexBinary causes a Xerces-originated exception.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-335&quot;&gt;&lt;del&gt;JENA-335&lt;/del&gt;&lt;/a&gt; : Make XSDbase64binary as registered handler for byte[] (this is the original behaviour, pre &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-335&quot; title=&quot;Node.hashCode of an illegal hexBinary causes a Xerces-originated exception.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-335&quot;&gt;&lt;del&gt;JENA-335&lt;/del&gt;&lt;/a&gt;).  Do not register XSDhexBinary. (Revision 1400849)&lt;/p&gt;

&lt;p&gt;     Result = UNSTABLE&lt;br/&gt;
andy : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/jena/trunk/jena-core/src/main/java/com/hp/hpl/jena/datatypes/xsd/XSDbase64Binary.java&lt;/li&gt;
	&lt;li&gt;/jena/trunk/jena-core/src/main/java/com/hp/hpl/jena/datatypes/xsd/XSDbinary.java&lt;/li&gt;
	&lt;li&gt;/jena/trunk/jena-core/src/main/java/com/hp/hpl/jena/datatypes/xsd/XSDhexBinary.java&lt;/li&gt;
	&lt;li&gt;/jena/trunk/jena-core/src/test/java/com/hp/hpl/jena/graph/test/TestTypedLiterals.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>249348</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0a71r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57415</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>