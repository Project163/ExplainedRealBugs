<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 19:57:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JENA-1258] Context key is null (ARQConstants.registryFunctions) via NodeFmtLib</title>
                <link>https://issues.apache.org/jira/browse/JENA-1258</link>
                <project id="12311220" key="JENA">Apache Jena</project>
                    <description>&lt;p&gt;This small test, with no ARQ.init(), causes a problem in initializers:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testName() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        Node node = NodeFactory.createLiteral(&lt;span class=&quot;code-quote&quot;&gt;&quot;Hello world&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;en&quot;&lt;/span&gt;);
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;Hello world\&lt;span class=&quot;code-quote&quot;&gt;&quot;@en&quot;&lt;/span&gt;, NodeFmtLib.str(node));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It fails with:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

java.lang.ExceptionInInitializerError
at org.apache.jena.riot.out.NodeFmtLib.&amp;lt;clinit&amp;gt;(NodeFmtLib.java:55)
at org.apache.commons.rdf.jena.TestNodeStuff.testName(TestNodeStuff.java:15)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:678)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: org.apache.jena.sparql.ARQException: Context key is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
at org.apache.jena.sparql.util.Context._put(Context.java:102)
at org.apache.jena.sparql.util.Context.set(Context.java:94)
at org.apache.jena.sparql.function.FunctionRegistry.set(FunctionRegistry.java:74)
at org.apache.jena.sparql.function.FunctionRegistry.init(FunctionRegistry.java:48)
at org.apache.jena.query.ARQ.init(ARQ.java:592)
at org.apache.jena.sparql.system.InitARQ.start(InitARQ.java:29)
at org.apache.jena.system.JenaSystem.lambda$init$2(JenaSystem.java:119)
at java.util.ArrayList.forEach(ArrayList.java:1249)
at org.apache.jena.system.JenaSystem.forEach(JenaSystem.java:194)
at org.apache.jena.system.JenaSystem.forEach(JenaSystem.java:171)
at org.apache.jena.system.JenaSystem.init(JenaSystem.java:117)
at org.apache.jena.sparql.ARQConstants.&amp;lt;clinit&amp;gt;(ARQConstants.java:35)
... 25 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;closer debugging reveals that it is trying to set a context with the static &lt;tt&gt;ARQConstants.registryFunctions&lt;/tt&gt; which is still null:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; [main] (Suspended (breakpoint at line 102 in Context))	
	owns: &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;  (id=65)	
	owns: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;T&amp;gt; (org.apache.jena.system.JenaSystem) (id=61)	
	owns: &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;  (id=66)	
	Context._put(Symbol, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;) line: 102	
	Context.set(Symbol, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;) line: 94	
	FunctionRegistry.set(Context, FunctionRegistry) line: 74	
	FunctionRegistry.init() line: 48	
	ARQ.init() line: 592	
	InitARQ.start() line: 29	
	JenaSystem.lambda$init$2(JenaSubsystemLifecycle) line: 119	
	2009221452.accept(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;) line: not available	
	ArrayList&amp;lt;E&amp;gt;.forEach(Consumer&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt; E&amp;gt;) line: 1249	
	JenaSystem.forEach(Consumer&amp;lt;JenaSubsystemLifecycle&amp;gt;, Comparator&amp;lt;JenaSubsystemLifecycle&amp;gt;) line: 194	
	JenaSystem.forEach(Consumer&amp;lt;JenaSubsystemLifecycle&amp;gt;) line: 171	
	JenaSystem.init() line: 117	
	ARQConstants.&amp;lt;clinit&amp;gt;() line: 35	
	NodeFmtLib.&amp;lt;clinit&amp;gt;() line: 55	
	TestNodeStuff.testName() line: 17	
	NativeMethodAccessorImpl.invoke0(Method, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[]) line: not available [&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt; method]	
	NativeMethodAccessorImpl.invoke(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[]) line: 62	
	DelegatingMethodAccessorImpl.invoke(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[]) line: 43	
	Method.invoke(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;...) line: 498	
	FrameworkMethod$1.runReflectiveCall() line: 50	
	FrameworkMethod$1(ReflectiveCallable).run() line: 12	
	FrameworkMethod.invokeExplosively(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;...) line: 47	
	InvokeMethod.evaluate() line: 17	
	BlockJUnit4ClassRunner(ParentRunner&amp;lt;T&amp;gt;).runLeaf(Statement, Description, RunNotifier) line: 325	
	BlockJUnit4ClassRunner.runChild(FrameworkMethod, RunNotifier) line: 78	
	BlockJUnit4ClassRunner.runChild(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, RunNotifier) line: 57	
	ParentRunner$3.run() line: 290	
	ParentRunner$1.schedule(&lt;span class=&quot;code-object&quot;&gt;Runnable&lt;/span&gt;) line: 71	
	BlockJUnit4ClassRunner(ParentRunner&amp;lt;T&amp;gt;).runChildren(RunNotifier) line: 288	
	ParentRunner&amp;lt;T&amp;gt;.access$000(ParentRunner, RunNotifier) line: 58	
	ParentRunner$2.evaluate() line: 268	
	BlockJUnit4ClassRunner(ParentRunner&amp;lt;T&amp;gt;).run(RunNotifier) line: 363	
	JUnit4TestReference.run(TestExecution) line: 86	
	TestExecution.run(ITestReference[]) line: 38	
	RemoteTestRunner.runTests(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, TestExecution) line: 459	
	RemoteTestRunner.runTests(TestExecution) line: 678	
	RemoteTestRunner.run() line: 382	
	RemoteTestRunner.main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]) line: 192	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Workaround: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ARQ.init(); &lt;span class=&quot;code-comment&quot;&gt;// or JenaSystem.init()&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;before using NodeFmtLib.&lt;/p&gt;

&lt;p&gt;Should NodeFactory ensure &lt;tt&gt;JenaSystem.init()&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13018713">JENA-1258</key>
            <summary>Context key is null (ARQConstants.registryFunctions) via NodeFmtLib</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andy">Andy Seaborne</assignee>
                                    <reporter username="stain">Stian Soiland-Reyes</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Nov 2016 00:46:19 +0000</created>
                <updated>Thu, 9 Feb 2017 13:09:41 +0000</updated>
                            <resolved>Wed, 9 Nov 2016 14:07:33 +0000</resolved>
                                    <version>Jena 3.1.1</version>
                                    <fixVersion>Jena 3.2.0</fixVersion>
                                    <component>ARQ</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15642720" author="stain" created="Mon, 7 Nov 2016 00:49:20 +0000"  >&lt;p&gt;Raised as a regression against 3.1.0 where this works. See &lt;a href=&quot;https://lists.apache.org/thread.html/f70071baeb37dc9b105d41ddb9080415ecf476172b2588d53640dae7@%3Cdev.jena.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.1.1 RC2 vote&lt;/a&gt;.&lt;/p&gt;

</comment>
                            <comment id="15642745" author="stain" created="Mon, 7 Nov 2016 01:03:41 +0000"  >&lt;p&gt;Early access to &lt;tt&gt;NodeFmtLib&lt;/tt&gt; is not needed to reproduce - the problem is ARQConstants:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;RDFS.label.asNode().toString(ARQConstants.getGlobalPrefixMap());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In 3.1.0 this will print out {{rdfs:label}, while 3.1.1 RC1 fails with the &quot;Contexts key is null&quot; exception.  ARQConstants is however documented as &quot;internal&quot;, but NodeFmtLib is exposed as &quot;Presentation utilitiles for Nodes, Triples, Quads and more.&quot;&lt;/p&gt;

&lt;p&gt;The quick fix is for &lt;tt&gt;NodeFmtLib&lt;/tt&gt; to also do &lt;tt&gt;JenaSystem.init()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The &quot;real&quot; problem I guess is way too many static fields, methods and initializers.. If ARQConstants is triggered first, it fails to finish initializing its fields.&lt;/p&gt;

&lt;p&gt;We probably need Jena 4 to fix that, get rid of all static fields and methods for anything non-trivial.&lt;/p&gt;</comment>
                            <comment id="15642775" author="githubbot" created="Mon, 7 Nov 2016 01:28:16 +0000"  >&lt;p&gt;GitHub user stain opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/189&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/189&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1258&quot; title=&quot;Context key is null (ARQConstants.registryFunctions) via NodeFmtLib&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1258&quot;&gt;&lt;del&gt;JENA-1258&lt;/del&gt;&lt;/a&gt; NodeFmtLib calls JenaSystem initializer&lt;/p&gt;

&lt;p&gt;    Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1258&quot; title=&quot;Context key is null (ARQConstants.registryFunctions) via NodeFmtLib&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1258&quot;&gt;&lt;del&gt;JENA-1258&lt;/del&gt;&lt;/a&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1258&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/JENA-1258&lt;/a&gt;) in `NodeFmtLib`&lt;/p&gt;

&lt;p&gt;    Note that the added `TestNodeFmtInit` test case would not normally find the bug ran from Maven as earlier tests would have caused initialization, but it can be tested from say Eclipse.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/stain/jena&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/stain/jena&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1258&quot; title=&quot;Context key is null (ARQConstants.registryFunctions) via NodeFmtLib&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1258&quot;&gt;&lt;del&gt;JENA-1258&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/189.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/189.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #189&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 170f7e7f1e9634b3afae0a6bd14fc7c88f792b7b&lt;br/&gt;
Author: Stian Soiland-Reyes &amp;lt;stain@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-11-07T01:20:25Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1258&quot; title=&quot;Context key is null (ARQConstants.registryFunctions) via NodeFmtLib&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1258&quot;&gt;&lt;del&gt;JENA-1258&lt;/del&gt;&lt;/a&gt; NodeFmtLib initializer for JenaSystem.init&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15642783" author="stain" created="Mon, 7 Nov 2016 01:31:45 +0000"  >&lt;p&gt;Other code using &lt;tt&gt;ARQConstant&lt;/tt&gt; without a &lt;tt&gt;static&lt;/tt&gt; initialization look a bit more excotic, e.g. &lt;tt&gt;org.apache.jena.riot.system.RiotLib&lt;/tt&gt;, &lt;tt&gt;org.apache.jena.sdb.engine.QueryEngineSDB&lt;/tt&gt;, &lt;tt&gt;org.apache.jena.sparql.algebra.AlgebraQuad&lt;/tt&gt;, &lt;tt&gt;org.apache.jena.sparql.core.Var&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="15643652" author="githubbot" created="Mon, 7 Nov 2016 09:47:29 +0000"  >&lt;p&gt;Github user afs commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/189&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/189&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This usage is calling into the middle of internal code.&lt;/p&gt;

&lt;p&gt;    Fixing output code seems wrong. It is better to initialize as objects get created, not on output. This shows the root cause is somewhere else.&lt;/p&gt;
</comment>
                            <comment id="15643707" author="githubbot" created="Mon, 7 Nov 2016 10:11:09 +0000"  >&lt;p&gt;Github user stain commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/189&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/189&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Except for `impl` packages and suffixes it is never easy for Jena users to know what is &quot;internal code&quot;. &lt;/p&gt;

&lt;p&gt;    If it&apos;s in &lt;span class=&quot;error&quot;&gt;&amp;#91;Javadoc&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://jena.apache.org/documentation/javadoc/arq/org/apache/jena/riot/out/NodeFmtLib.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jena.apache.org/documentation/javadoc/arq/org/apache/jena/riot/out/NodeFmtLib.html&lt;/a&gt;), and it is useful &quot;outside&quot; without much hazzle, then I don&apos;t see why it should be called &quot;internal&quot; just because it is also used internally.&lt;/p&gt;

&lt;p&gt;    Agree that it would be good to ensure Jena initialization from `NodeFactory`.&lt;/p&gt;</comment>
                            <comment id="15644264" author="githubbot" created="Mon, 7 Nov 2016 14:08:20 +0000"  >&lt;p&gt;Github user afs commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/189&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/189&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The root cause:&lt;/p&gt;

&lt;p&gt;    Commit 204f253 switched Context to using a `ConcurrentHashMap`, commit d67a426 added a check for null otherwise nothing has changed since 3.1.0.&lt;/p&gt;</comment>
                            <comment id="15647437" author="githubbot" created="Tue, 8 Nov 2016 12:30:44 +0000"  >&lt;p&gt;GitHub user afs opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/192&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/192&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1258&quot; title=&quot;Context key is null (ARQConstants.registryFunctions) via NodeFmtLib&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1258&quot;&gt;&lt;del&gt;JENA-1258&lt;/del&gt;&lt;/a&gt;: System init in NodeFactory. Make ARQConstants init-safe.&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/afs/jena&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/afs/jena&lt;/a&gt; arq-constants&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/192.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/192.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #192&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 782d214066e224ba553bcef2b626fefbcfd73113&lt;br/&gt;
Author: Andy Seaborne &amp;lt;andy@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-11-08T12:20:47Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1258&quot; title=&quot;Context key is null (ARQConstants.registryFunctions) via NodeFmtLib&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1258&quot;&gt;&lt;del&gt;JENA-1258&lt;/del&gt;&lt;/a&gt;: System init in NodeFactory. Make ARQConstants init-safe.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15647439" author="githubbot" created="Tue, 8 Nov 2016 12:31:53 +0000"  >&lt;p&gt;Github user afs commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/189&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/189&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The better fix is to initialize in `NodeFactory` (and `Node` for legacy reasons) only. I have tested this in a build.&lt;/p&gt;

&lt;p&gt;    There is little point in a specific test because tests run in the overall suite; it&apos;s almost confusing to have a test that doesn&apos;t. With initialization in `NodeFactory` this will get tested anyway!&lt;/p&gt;

&lt;p&gt;    Also, it would help to unroll ARQConstants (for RDF, RDFS, OWL, XSD) so it does not need JenaSystem.init and then it is, with care, init-safe.&lt;/p&gt;

&lt;p&gt;    See PR#192 for that all made real.&lt;/p&gt;

&lt;p&gt;    The original example works when run separately to ensure minimal system initialization.&lt;/p&gt;</comment>
                            <comment id="15647563" author="githubbot" created="Tue, 8 Nov 2016 13:28:46 +0000"  >&lt;p&gt;Github user stain commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/189&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/189&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Yes, your pull request looks like the best approach.&lt;/p&gt;

&lt;p&gt;    On 8 Nov 2016 12:33 pm, &quot;Andy Seaborne&quot; &amp;lt;notifications@github.com&amp;gt; wrote:&lt;/p&gt;

&lt;p&gt;    &amp;gt; The better fix is to initialize in NodeFactory (and Node for legacy&lt;br/&gt;
    &amp;gt; reasons) only. I have tested this in a build.&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; There is little point in a specific test because tests run in the overall&lt;br/&gt;
    &amp;gt; suite; it&apos;s almost confusing to have a test that doesn&apos;t. With&lt;br/&gt;
    &amp;gt; initialization in NodeFactory this will get tested anyway!&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; Also, it would help to unroll ARQConstants (for RDF, RDFS, OWL, XSD) so it&lt;br/&gt;
    &amp;gt; does not need JenaSystem.init and then it is, with care, init-safe.&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; See PR#192 for that all made real.&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; The original example works when run separately to ensure minimal system&lt;br/&gt;
    &amp;gt; initialization.&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; &#8212;&lt;br/&gt;
    &amp;gt; You are receiving this because you authored the thread.&lt;br/&gt;
    &amp;gt; Reply to this email directly, view it on GitHub&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/jena/pull/189#issuecomment-259124635&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/189#issuecomment-259124635&lt;/a&gt;&amp;gt;, or mute&lt;br/&gt;
    &amp;gt; the thread&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/notifications/unsubscribe-auth/AAPd5fFN_RTsft_0zoh3lFvprRyNmYrsks5q8Gu3gaJpZM4Kqwha&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/notifications/unsubscribe-auth/AAPd5fFN_RTsft_0zoh3lFvprRyNmYrsks5q8Gu3gaJpZM4Kqwha&lt;/a&gt;&amp;gt;&lt;br/&gt;
    &amp;gt; .&lt;br/&gt;
    &amp;gt;&lt;/p&gt;
</comment>
                            <comment id="15651040" author="jira-bot" created="Wed, 9 Nov 2016 14:06:09 +0000"  >&lt;p&gt;Commit 782d214066e224ba553bcef2b626fefbcfd73113 in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=782d214&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=782d214&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1258&quot; title=&quot;Context key is null (ARQConstants.registryFunctions) via NodeFmtLib&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1258&quot;&gt;&lt;del&gt;JENA-1258&lt;/del&gt;&lt;/a&gt;: System init in NodeFactory. Make ARQConstants init-safe.&lt;/p&gt;</comment>
                            <comment id="15651042" author="jira-bot" created="Wed, 9 Nov 2016 14:06:13 +0000"  >&lt;p&gt;Commit 874c3be16cd492739f9a49386c484c9acd02b3c0 in jena&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andy.seaborne&quot; class=&quot;user-hover&quot; rel=&quot;andy.seaborne&quot;&gt;andy.seaborne&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=874c3be&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=jena.git;h=874c3be&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JENA-1258&quot; title=&quot;Context key is null (ARQConstants.registryFunctions) via NodeFmtLib&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JENA-1258&quot;&gt;&lt;del&gt;JENA-1258&lt;/del&gt;&lt;/a&gt;: Merge commit &apos;refs/pull/192/head&apos; of github.com:apache/jena&lt;/p&gt;

&lt;p&gt;This closes #192.&lt;br/&gt;
This closes #189.&lt;/p&gt;</comment>
                            <comment id="15651043" author="githubbot" created="Wed, 9 Nov 2016 14:06:22 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/192&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/192&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15651045" author="githubbot" created="Wed, 9 Nov 2016 14:06:22 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jena/pull/189&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jena/pull/189&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15859475" author="andy.seaborne" created="Thu, 9 Feb 2017 13:09:41 +0000"  >&lt;p&gt;Closed with the release of Jena 3.2.0.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 40 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35zev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>