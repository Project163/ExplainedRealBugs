diff --git a/wicket-util/src/main/java/org/apache/wicket/util/resource/XSLTResourceStream.java b/wicket-util/src/main/java/org/apache/wicket/util/resource/XSLTResourceStream.java
index 4cd432a4a4..28aeab8794 100644
--- a/wicket-util/src/main/java/org/apache/wicket/util/resource/XSLTResourceStream.java
+++ b/wicket-util/src/main/java/org/apache/wicket/util/resource/XSLTResourceStream.java
@@ -47,7 +47,7 @@ public class XSLTResourceStream extends AbstractResourceStream
 	 * 
 	 */
 	private static final long serialVersionUID = 1L;
-	ByteArrayOutputStream out;
+	private final transient ByteArrayOutputStream out;
 
 	/**
 	 * @return a {@link Map} of XSLT parameters, appropriate for passing information to the XSL
diff --git a/wicket-util/src/main/java/org/apache/wicket/util/resource/ZipResourceStream.java b/wicket-util/src/main/java/org/apache/wicket/util/resource/ZipResourceStream.java
index 9e2a452a30..bf9d5d657a 100644
--- a/wicket-util/src/main/java/org/apache/wicket/util/resource/ZipResourceStream.java
+++ b/wicket-util/src/main/java/org/apache/wicket/util/resource/ZipResourceStream.java
@@ -56,7 +56,7 @@ public class ZipResourceStream extends AbstractResourceStream
 
 	private static final Logger log = LoggerFactory.getLogger(ZipResourceStream.class);
 
-	private final ByteArrayOutputStream bytearray;
+	private final transient ByteArrayOutputStream bytearray;
 
 	/**
 	 * Construct.
diff --git a/wicket-util/src/main/java/org/apache/wicket/util/string/Strings.java b/wicket-util/src/main/java/org/apache/wicket/util/string/Strings.java
index 5f84153cf9..9e47460d53 100755
--- a/wicket-util/src/main/java/org/apache/wicket/util/string/Strings.java
+++ b/wicket-util/src/main/java/org/apache/wicket/util/string/Strings.java
@@ -1198,7 +1198,7 @@ public final class Strings
 			AppendingStringBuffer asb = (AppendingStringBuffer)s;
 			buffer.append(asb.getValue(), from, to - from);
 		}
-		else if (s instanceof StringBuffer)
+		else if (s instanceof StringBuilder)
 		{
 			buffer.append((StringBuilder)s, from, to - from);
 		}
diff --git a/wicket-util/src/main/java/org/apache/wicket/util/upload/DiskFileItem.java b/wicket-util/src/main/java/org/apache/wicket/util/upload/DiskFileItem.java
index 19082bbafe..e14c555b0d 100644
--- a/wicket-util/src/main/java/org/apache/wicket/util/upload/DiskFileItem.java
+++ b/wicket-util/src/main/java/org/apache/wicket/util/upload/DiskFileItem.java
@@ -762,7 +762,7 @@ public class DiskFileItem implements FileItem, FileItemHeadersSupport
 		{
 			FileInputStream input = new FileInputStream(dfosFile);
 			Streams.copy(input, output);
-			dfosFile.delete();
+			Files.remove(dfosFile);
 			dfosFile = null;
 		}
 		output.close();
diff --git a/wicket-util/src/main/java/org/apache/wicket/util/upload/FileUploadBase.java b/wicket-util/src/main/java/org/apache/wicket/util/upload/FileUploadBase.java
index 51f9eec17e..892489de5e 100644
--- a/wicket-util/src/main/java/org/apache/wicket/util/upload/FileUploadBase.java
+++ b/wicket-util/src/main/java/org/apache/wicket/util/upload/FileUploadBase.java
@@ -607,7 +607,7 @@ public abstract class FileUploadBase
 			{
 				break;
 			}
-			String header = headerPart.substring(start, end);
+			StringBuilder header = new StringBuilder(headerPart.substring(start, end));
 			start = end + 2;
 			while (start < len)
 			{
@@ -627,10 +627,10 @@ public abstract class FileUploadBase
 				}
 				// Continuation line found
 				end = parseEndOfLine(headerPart, nonWs);
-				header += " " + headerPart.substring(nonWs, end);
+				header.append(' ').append(headerPart.substring(nonWs, end));
 				start = end + 2;
 			}
-			parseHeaderLine(headers, header);
+			parseHeaderLine(headers, header.toString());
 		}
 		return headers;
 	}
@@ -668,12 +668,12 @@ public abstract class FileUploadBase
 		{
 			String headerName = (String)iter.next();
 			Iterator iter2 = headers.getHeaders(headerName);
-			String headerValue = (String)iter2.next();
+			StringBuilder headerValue = new StringBuilder((String)iter2.next());
 			while (iter2.hasNext())
 			{
-				headerValue += "," + iter2.next();
+				headerValue.append(',').append(iter2.next());
 			}
-			result.put(headerName, headerValue);
+			result.put(headerName, headerValue.toString());
 		}
 		return result;
 	}
diff --git a/wicket-util/src/main/java/org/apache/wicket/util/upload/MultipartFormInputStream.java b/wicket-util/src/main/java/org/apache/wicket/util/upload/MultipartFormInputStream.java
index 47f6b32027..b49045e1c6 100644
--- a/wicket-util/src/main/java/org/apache/wicket/util/upload/MultipartFormInputStream.java
+++ b/wicket-util/src/main/java/org/apache/wicket/util/upload/MultipartFormInputStream.java
@@ -301,7 +301,8 @@ public class MultipartFormInputStream
 	@Deprecated
 	public MultipartFormInputStream()
 	{
-		this(null, null, null);
+		// boundary can not be null
+		this(null, new byte[0], null);
 	}
 
 	/**
