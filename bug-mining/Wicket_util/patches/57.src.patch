diff --git a/wicket-util/src/main/java/org/apache/wicket/util/string/Strings.java b/wicket-util/src/main/java/org/apache/wicket/util/string/Strings.java
index fceb4990a2..27a9987dfe 100755
--- a/wicket-util/src/main/java/org/apache/wicket/util/string/Strings.java
+++ b/wicket-util/src/main/java/org/apache/wicket/util/string/Strings.java
@@ -22,6 +22,7 @@ import java.security.AccessController;
 import java.security.PrivilegedAction;
 import java.util.ArrayList;
 import java.util.List;
+import java.util.Locale;
 import java.util.regex.Matcher;
 import java.util.regex.Pattern;
 
@@ -906,19 +907,19 @@ public final class Strings
 	 */
 	public static String stripJSessionId(final String url)
 	{
-		if (url == null)
+		if (Strings.isEmpty(url))
 		{
-			return null;
+			return url;
 		}
 
 		// http://.../abc;jsessionid=...?param=...
-		int ixSemiColon = url.indexOf(";");
+		int ixSemiColon = url.toLowerCase(Locale.ENGLISH).indexOf(";jsessionid=");
 		if (ixSemiColon == -1)
 		{
 			return url;
 		}
 
-		int ixQuestionMark = url.indexOf("?");
+		int ixQuestionMark = url.indexOf('?');
 		if (ixQuestionMark == -1)
 		{
 			// no query paramaters; cut off at ";"
diff --git a/wicket-util/src/test/java/org/apache/wicket/util/string/StringsTest.java b/wicket-util/src/test/java/org/apache/wicket/util/string/StringsTest.java
index 4c45e86799..f074692961 100644
--- a/wicket-util/src/test/java/org/apache/wicket/util/string/StringsTest.java
+++ b/wicket-util/src/test/java/org/apache/wicket/util/string/StringsTest.java
@@ -77,6 +77,12 @@ public class StringsTest extends Assert
 		assertEquals(url + "?param", Strings.stripJSessionId(url + ";jsessionid=12345?param"));
 		assertEquals(url + "?param=a;b",
 			Strings.stripJSessionId(url + ";jsessionid=12345?param=a;b"));
+
+		// WICKET-4816
+		assertEquals(url + ";a=b;c=d",
+				Strings.stripJSessionId(url + ";a=b;c=d;jsessionid=12345"));
+		assertEquals(url + ";a=b;c=d?param=a;b",
+				Strings.stripJSessionId(url + ";a=b;c=d;jsessionid=12345?param=a;b"));
 	}
 
 	/**
