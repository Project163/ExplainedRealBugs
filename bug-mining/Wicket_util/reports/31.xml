<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:28:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-3875] Clear Files.remove() behavior</title>
                <link>https://issues.apache.org/jira/browse/WICKET-3875</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Currently org.apache.wicket.util.file.Files.remove(File) can remove just normal files.&lt;br/&gt;
I just found that it is called with a folder parameter and since File.delete() cannot delete non-empty directory it starts waiting for 100ms and trying again 10 times.&lt;br/&gt;
This retry strategy is there for problems in Windows systems where the first removal attempt may fail and few millis later may succeed.&lt;/p&gt;

&lt;p&gt;We should clear Files.remove() behavior because now it wastes 10*100ms trying to delete non-empty folder.&lt;br/&gt;
If I make the method able to delete files via recursion then it can almost block a thread if for some reason the files inside cannot be deleted (e.g. no permissions). In such case it will wait 1sec for each file.&lt;/p&gt;

&lt;p&gt;The other solution is to check all callers and make sure that all callers always pass a file (not a folder).&lt;/p&gt;

&lt;p&gt;The specific problem that I found is that DiskDataStore tries to delete org.apache.wicket.settings.IStoreSettings.getFileStoreFolder() but this folder contains file with name &quot;data&quot; inside and fails.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12512983">WICKET-3875</key>
            <summary>Clear Files.remove() behavior</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="mgrigorov">Martin Tzvetanov Grigorov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Jul 2011 13:06:09 +0000</created>
                <updated>Mon, 11 Jul 2011 10:04:12 +0000</updated>
                            <resolved>Mon, 11 Jul 2011 10:04:12 +0000</resolved>
                                    <version>1.5-RC5.1</version>
                                    <fixVersion>1.5-RC6</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13061975" author="mgrigorov" created="Fri, 8 Jul 2011 14:20:21 +0000"  >&lt;p&gt;Implement async removal of files via commons-upload FileCleaningTracker.&lt;/p&gt;

&lt;p&gt;API Break: renamed org.apache.wicket.util.file.IFileUploadCleaner to org.apache.wicket.util.file.IFileCleaner since it is not used just for file uploads anymore. This class has been introduced in 1.5 so I don&apos;t expect many users of it.&lt;/p&gt;</comment>
                            <comment id="13063255" author="mgrigorov" created="Mon, 11 Jul 2011 10:04:12 +0000"  >&lt;p&gt;The proposed patch is committed with r1145102.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12485742" name="WICKET-3875.patch" size="29753" author="mgrigorov" created="Fri, 8 Jul 2011 14:20:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>68437</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k9uf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116412</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>