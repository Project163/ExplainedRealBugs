<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:28:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4988] AbstractNumberConverter issue when used with NumberFormat#getCurrencyInstance</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4988</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Summary of the discussion on users@:&lt;/p&gt;

&lt;p&gt;There is an issue when using AbstractNumberConverter when #getNumberFormat returns NumberFormat#getCurrencyInstance()&lt;br/&gt;
I think the problem is due to AbstractNumberConverter#parse(Object, double, double, Locale):&lt;/p&gt;

&lt;p&gt;if (value instanceof String)&lt;br/&gt;
{&lt;br/&gt;
        // Convert spaces to no-break space (U+00A0) to fix problems with&lt;br/&gt;
        // browser conversions.&lt;br/&gt;
        // Space is not valid thousands-separator, but no-br space is.&lt;br/&gt;
        value = ((String)value).replace(&apos; &apos;, &apos;\u00A0&apos;);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;Which replace spaces, so a string like &quot;1,5 &#8364;&quot; is invalid while being parsed.&lt;/p&gt;

&lt;p&gt;public class CurrencyConverter extends AbstractNumberConverter&amp;lt;Double&amp;gt;&lt;br/&gt;
{&lt;br/&gt;
    private static final long serialVersionUID = 1L;&lt;/p&gt;

&lt;p&gt;    public CurrencyConverter()&lt;br/&gt;
    {&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;    @Override&lt;br/&gt;
    protected Class&amp;lt;Double&amp;gt; getTargetType()&lt;/p&gt;
    {
        return Double.class;
    }

&lt;p&gt;    @Override&lt;br/&gt;
    public NumberFormat getNumberFormat(Locale locale)&lt;/p&gt;
    {
        return NumberFormat.getCurrencyInstance(locale);
    }

&lt;p&gt;    @Override&lt;br/&gt;
    public Double convertToObject(String value, Locale locale)&lt;/p&gt;
    {
        locale = Locale.FRANCE;

        return this.parse(value, Double.MIN_VALUE, Double.MAX_VALUE, locale);

//        This does work:
//        final NumberFormat format = this.getNumberFormat(locale);
//        return this.parse(format, value, locale);
    }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;As Sven indicates, there is (yet another) issue in Java currency formating (space as thousand separator)&lt;br/&gt;
&lt;a href=&quot;http://matthiaswessendorf.wordpress.com/2007/12/03/javas-numberformat-bug/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://matthiaswessendorf.wordpress.com/2007/12/03/javas-numberformat-bug/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://bugs.sun.com/view_bug.do?bug_id=4510618&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bugs.sun.com/view_bug.do?bug_id=4510618&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So will I let you decide whether or not you wish to fix it (the space before the currency symbol).&lt;/p&gt;

&lt;p&gt;Thanks &amp;amp; best regards,&lt;br/&gt;
Sebastien.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12628104">WICKET-4988</key>
            <summary>AbstractNumberConverter issue when used with NumberFormat#getCurrencyInstance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="sebfz1">Sebastien Briquet</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Jan 2013 20:17:43 +0000</created>
                <updated>Thu, 7 Nov 2013 12:28:51 +0000</updated>
                            <resolved>Thu, 7 Nov 2013 12:28:51 +0000</resolved>
                                    <version>1.5.9</version>
                    <version>6.4.0</version>
                                    <fixVersion>7.0.0-M1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13815906" author="svenmeier" created="Thu, 7 Nov 2013 12:28:51 +0000"  >&lt;p&gt;replace space with non-breaking space between digits only&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>304955</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i17x3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>254333</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>