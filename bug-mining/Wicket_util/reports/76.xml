<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:28:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5853] LongConverter converts some values greater than Long.MAX_VALUE</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5853</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Currently it&apos;s possible to submit some values via Long Textfield&amp;lt;Long&amp;gt; that are greater than Long.MAX_VALUE. This will produce converted input and model update with value of Long.MAX_VALUE&lt;/p&gt;

&lt;p&gt;I&apos;m not sure what the behavior should be - imho throwing ConversionException seems fair as the input isn&apos;t a valid Long.&lt;/p&gt;

&lt;p&gt;The reason seems to be precision loss during Double.valueOf(input) execution while converting, and then comparing to Long.MAX_VALUE  using Long.doubleValue() in &lt;b&gt;AbstractNumberConverter&lt;/b&gt;, which by casting leads to to the same precision loss and the numbers are seemingly equal during comparison of ranges.&lt;/p&gt;

&lt;p&gt;Maybe using BigDecimals for parsing could help here.&lt;/p&gt;

&lt;p&gt;The quickstart is available at &lt;a href=&quot;https://github.com/zeratul021/wicket-number-conversion&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/zeratul021/wicket-number-conversion&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;For the fastest demonstration I extended Wicket&apos;s &lt;em&gt;longConversion()&lt;/em&gt; test-case in &lt;b&gt;ConvertersTest&lt;/b&gt;: &lt;a href=&quot;https://github.com/zeratul021/wicket-number-conversion/blob/master/src/test/java/com/github/zeratul021/wicketnumberconversion/ConvertersTest.java#L300&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/zeratul021/wicket-number-conversion/blob/master/src/test/java/com/github/zeratul021/wicketnumberconversion/ConvertersTest.java#L300&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12780491">WICKET-5853</key>
            <summary>LongConverter converts some values greater than Long.MAX_VALUE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="zeratul">Marek &#352;abo</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Mar 2015 12:45:28 +0000</created>
                <updated>Sat, 21 Mar 2015 14:33:30 +0000</updated>
                            <resolved>Sat, 21 Mar 2015 14:33:30 +0000</resolved>
                                    <version>7.0.0-M5</version>
                    <version>6.19.0</version>
                                    <fixVersion>7.0.0-M6</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14363263" author="mgrigorov" created="Mon, 16 Mar 2015 14:32:19 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;LongConverter converter = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LongConverter();
&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; converted = converter.convertToObject(&lt;span class=&quot;code-quote&quot;&gt;&quot;9223372036854776833&quot;&lt;/span&gt;, Locale.US);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;fails for me with ConversionException:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.wicket.util.convert.ConversionException: Value cannot be greater than 9.223372036854776E18
	at org.apache.wicket.util.convert.converter.AbstractConverter.newConversionException(AbstractConverter.java:80)
	at org.apache.wicket.util.convert.converter.AbstractNumberConverter.parse(AbstractNumberConverter.java:90)
	at org.apache.wicket.util.convert.converter.LongConverter.convertToObject(LongConverter.java:45)
	at org.apache.wicket.util.convert.converter.LongConverterTest.aa(LongConverterTest.java:15)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ll test now your quickstart.&lt;/p&gt;</comment>
                            <comment id="14367228" author="svenmeier" created="Wed, 18 Mar 2015 14:54:18 +0000"  >&lt;p&gt;Is this a real problem or rather a theoretical exercise?&lt;br/&gt;
It seems we&apos;ll have to change the signature of AbstractNumberConverter#parse(Object, double, double, Locale) to support this case.&lt;/p&gt;

&lt;p&gt;If your users are allowed to enter such high numbers, you can switch to BigDecimals instead.&lt;/p&gt;</comment>
                            <comment id="14367447" author="zeratul" created="Wed, 18 Mar 2015 16:50:30 +0000"  >&lt;p&gt;Hi Martin,&lt;/p&gt;

&lt;p&gt;In my version of &lt;em&gt;longConversion()&lt;/em&gt; the first added test-case shows that number you used is the boundary where the conversion works again. However try decrementing it and pass it to the converter (9223372036854776832) - it should fail as well but doesn&apos;t in my second added test-case.&lt;/p&gt;</comment>
                            <comment id="14367527" author="zeratul" created="Wed, 18 Mar 2015 17:33:13 +0000"  >&lt;p&gt;Hi Sven,&lt;/p&gt;

&lt;p&gt;we can of course use BigIntegers or BigDecimals.&lt;/p&gt;

&lt;p&gt;Our specification allows numbers in the Long range so we used that and hit a corner-case. We fixed it by setting RangeValidator max to the Long.MAX_VALUE - 1 which works as a viable workaround for us. &lt;/p&gt;

&lt;p&gt;So you might say that from this point on it&apos;s a theoretical exercise. In my books it&apos;s a bug because it contract of AbstractNumberConverter#parse() is not honored. It&apos;s up to you guys to decide what to do with it. I can see that a signature change at such place is risky and gain is meager.&lt;/p&gt;

&lt;p&gt;Another curious thing I noticed while working on this is that both BigInteger and BigDecimal can not have arbitrary size because they are bound in the range of -Double.MAX_VALUE and Double.MAX_VALUE in their respective converters (forced by method signature).&lt;/p&gt;</comment>
                            <comment id="14367599" author="svenmeier" created="Wed, 18 Mar 2015 18:13:19 +0000"  >&lt;p&gt;Hi Marek,&lt;/p&gt;

&lt;p&gt;&amp;gt;both BigInteger and BigDecimal can not have arbitrary size because they are bound&lt;br/&gt;
&amp;gt;in the range of -Double.MAX_VALUE and Double.MAX_VALUE in their respective converters&lt;/p&gt;

&lt;p&gt;this is what I thought too initially.&lt;br/&gt;
But it is not the case actually - the double value of very large BigDecimal is Double.MAX_VALUE, thus the converter will not complain.&lt;/p&gt;</comment>
                            <comment id="14368754" author="zeratul" created="Thu, 19 Mar 2015 09:28:08 +0000"  >&lt;p&gt;Hi Sven,&lt;/p&gt;

&lt;p&gt;I didn&apos;t know that so I tried with my quickstart and for big enough BigInteger or BigDecimal the &lt;em&gt;doubleValue()&lt;/em&gt; returns actually Double.POSITIVE_INFINITY which will fail the conversion at the range check.&lt;/p&gt;</comment>
                            <comment id="14368780" author="svenmeier" created="Thu, 19 Mar 2015 09:45:39 +0000"  >&lt;p&gt;Hi Marek,&lt;/p&gt;

&lt;p&gt;I stand corrected: BigDecimalConverter cannot parse large values (i.e. larger than Double.MAX_VALUE) currently.&lt;/p&gt;

&lt;p&gt;It&apos;s a rather extreme usecase, nevertheless we should support it.&lt;/p&gt;</comment>
                            <comment id="14372780" author="jira-bot" created="Sat, 21 Mar 2015 14:32:36 +0000"  >&lt;p&gt;Commit b80f6640b7a7c4645876cc2ce86552cb7144e48b in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b80f664&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b80f664&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5853&quot; title=&quot;LongConverter converts some values greater than Long.MAX_VALUE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5853&quot;&gt;&lt;del&gt;WICKET-5853&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5861&quot; title=&quot;BigDecimalConverter does not allow parsing of values great than Double.MAX_VALUE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5861&quot;&gt;&lt;del&gt;WICKET-5861&lt;/del&gt;&lt;/a&gt;: number converters are based on BigDecimals now&lt;/p&gt;</comment>
                            <comment id="14372782" author="svenmeier" created="Sat, 21 Mar 2015 14:33:30 +0000"  >&lt;p&gt;All number converters are based on BigDecimal now, so now rounding or bounds error should occur.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12783792">WICKET-5861</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26iof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>