<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:28:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-3518] Multiple filter mappings in web.xml cause request.getUrl() to break</title>
                <link>https://issues.apache.org/jira/browse/WICKET-3518</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;This issue is derived from &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-3497&quot; title=&quot;Request.getUrl() not returning correct data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-3497&quot;&gt;&lt;del&gt;WICKET-3497&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here is the problem&lt;/p&gt;

&lt;p&gt;If I have two filter mappings in web.xml, only the 1st one gets loaded on the servlet/filter startup. When calling request.getUrl() you get either an array index out of bounds exception or part of the filter mapping in the url when you access the app with the second mapping.&lt;/p&gt;

&lt;p&gt;here is an example&lt;/p&gt;

&lt;p&gt;2 mappings&lt;/p&gt;

&lt;p&gt;/app/*&lt;br/&gt;
/longapp/*&lt;/p&gt;

&lt;p&gt;when accessing with /app/ request.getUrl() works fine.&lt;br/&gt;
when accessing with /longapp/ request.getUrl() will return gapp/ (it takes the length of /app/ as the star for the substring)&lt;/p&gt;

&lt;p&gt;------&lt;del&gt;ServletWebRequest.getUrl()&lt;/del&gt;-------------&lt;br/&gt;
...&lt;br/&gt;
final int start = request.getContextPath().length() + filterPrefix.length() + 1;&lt;br/&gt;
url.append(uri.substring(start));&lt;br/&gt;
...&lt;br/&gt;
-------------------------------------------------------------&lt;br/&gt;
filterPrefix was loaded on the startup of the filter, which in this case is /app/ (this is can not be correct)&lt;/p&gt;

&lt;p&gt;you can see that if the mappings were reversed (/longapp/* before /app/*) in web.xml the above code will throw an array/string index out of bounds exception (and it does)&lt;/p&gt;
</description>
                <environment>WebSphere 6.1</environment>
        <key id="12500882">WICKET-3518</key>
            <summary>Multiple filter mappings in web.xml cause request.getUrl() to break</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="pete">Peter Ertl</assignee>
                                    <reporter username="fstof">Frans Stofberg</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Mar 2011 12:29:19 +0000</created>
                <updated>Mon, 14 Mar 2011 06:52:17 +0000</updated>
                            <resolved>Thu, 10 Mar 2011 00:59:20 +0000</resolved>
                                    <version>1.5-RC2</version>
                                    <fixVersion>1.5-RC3</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13004909" author="pete" created="Thu, 10 Mar 2011 00:59:20 +0000"  >&lt;p&gt;Wicket currently does not support multiple filter / servlet paths and probably never will. There is not much reason to make things a lot more complicated inside wicket core for a tiny benefit in a very rare use case. If you really need flexible urls you could consider using a front-end proxy like apache or nginx which gives you all the power of rewriting urls, even better than by utilizing web.xml&apos;s restricted possibilties.&lt;/p&gt;</comment>
                            <comment id="13005572" author="fstof" created="Fri, 11 Mar 2011 10:05:07 +0000"  >&lt;p&gt;okay,&lt;br/&gt;
But one more question.&lt;br/&gt;
would It be acceptable to have multiple servlets configured, each with its own mapping?&lt;/p&gt;

&lt;p&gt;eg...&lt;br/&gt;
servlet-name: servlet.app1&lt;br/&gt;
mapping: /app/*&lt;/p&gt;

&lt;p&gt;servlet-name: servlet.app2&lt;br/&gt;
mapping: /longapp/*&lt;/p&gt;

&lt;p&gt;I found that this does work, I just dont know If I may run into issues like this. Do you foresee any?&lt;/p&gt;</comment>
                            <comment id="13005608" author="pete" created="Fri, 11 Mar 2011 11:42:17 +0000"  >&lt;p&gt;^ This would mean you have multiple instances of wicket application. Should probably work though it&apos;s quite quick &amp;amp; dirty...&lt;/p&gt;

&lt;p&gt;If you just need some kind of discriminator between different application types you should consider using subhosts in your domain name, e.g.&lt;/p&gt;

&lt;p&gt;  app.mydomain.org &lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;  longapp.mydomain.org&lt;/p&gt;

&lt;p&gt;These will have different wicket sessions since the session cookie uses the domain name for separation.&lt;/p&gt;

&lt;p&gt;You can check the domain name in your app using the current request information.&lt;/p&gt;</comment>
                            <comment id="13006339" author="fstof" created="Mon, 14 Mar 2011 06:52:17 +0000"  >&lt;p&gt;Thank you Peter for the info&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>204296</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0aoe7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60225</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>