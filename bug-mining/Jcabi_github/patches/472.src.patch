diff --git a/src/main/java/com/jcabi/github/mock/MkContents.java b/src/main/java/com/jcabi/github/mock/MkContents.java
index 1d453ea96..e2f2cdc21 100644
--- a/src/main/java/com/jcabi/github/mock/MkContents.java
+++ b/src/main/java/com/jcabi/github/mock/MkContents.java
@@ -126,25 +126,7 @@ public final class MkContents implements Contents {
                     .add("git_url").set("http://localhost/2").up()
                     .add("html_url").set("http://localhost/3").up()
             );
-            final Directives commit = new Directives().xpath(this.commitXpath())
-                .add("commit")
-                .add("sha").set(fakeSha()).up()
-                .add("url").set("http://localhost/4").up()
-                .add("html_url").set("http://localhost/5").up()
-                .add("message").set(json.getString("message")).up();
-            if (json.containsKey("committer")) {
-                final JsonObject committer = json.getJsonObject("committer");
-                commit.add("committer")
-                    .add("email").set(committer.getString("email")).up()
-                    .add("name").set(committer.getString("name")).up();
-            }
-            if (json.containsKey("author")) {
-                final JsonObject author = json.getJsonObject("author");
-                commit.add("author")
-                    .add("email").set(author.getString("email")).up()
-                    .add("name").set(author.getString("name")).up();
-            }
-            this.storage.apply(commit);
+            this.storage.apply(this.commit(json));
         } finally {
             this.storage.unlock();
         }
@@ -179,7 +161,12 @@ public final class MkContents implements Contents {
     @Override
     public void update(final String path, final JsonObject json)
         throws IOException {
-        new JsonPatch(this.storage).patch(path, json);
+        try {
+            new JsonPatch(this.storage).patch(path, json);
+            this.storage.apply(this.commit(json));
+        } finally {
+            this.storage.unlock();
+        }
     }
 
     /**
@@ -204,6 +191,34 @@ public final class MkContents implements Contents {
         );
     }
 
+    /**
+     * XML Directives for commit creation.
+     * @param json Source
+     * @return Directives
+     */
+    private Directives commit(final JsonObject json) {
+        // @checkstyle MultipleStringLiterals (40 lines)
+        final Directives commit = new Directives().xpath(this.commitXpath())
+            .add("commit")
+            .add("sha").set(fakeSha()).up()
+            .add("url").set("http://localhost/4").up()
+            .add("html_url").set("http://localhost/5").up()
+            .add("message").set(json.getString("message")).up();
+        if (json.containsKey("committer")) {
+            final JsonObject committer = json.getJsonObject("committer");
+            commit.add("committer")
+                .add("email").set(committer.getString("email")).up()
+                .add("name").set(committer.getString("name")).up();
+        }
+        if (json.containsKey("author")) {
+            final JsonObject author = json.getJsonObject("author");
+            commit.add("author")
+                .add("email").set(author.getString("email")).up()
+                .add("name").set(author.getString("name")).up();
+        }
+        return commit;
+    }
+
     /**
      * Generate a random fake SHA hex string.
      *
diff --git a/src/test/java/com/jcabi/github/mock/MkContentsTest.java b/src/test/java/com/jcabi/github/mock/MkContentsTest.java
index 358e4ed72..58c23d21f 100644
--- a/src/test/java/com/jcabi/github/mock/MkContentsTest.java
+++ b/src/test/java/com/jcabi/github/mock/MkContentsTest.java
@@ -32,10 +32,13 @@ package com.jcabi.github.mock;
 import com.jcabi.github.Content;
 import com.jcabi.github.Contents;
 import com.jcabi.github.Repo;
+import com.jcabi.xml.XML;
+import java.io.IOException;
 import java.util.concurrent.ConcurrentHashMap;
 import java.util.concurrent.ConcurrentMap;
 import javax.json.Json;
 import javax.json.JsonObject;
+import javax.json.JsonObjectBuilder;
 import org.hamcrest.MatcherAssert;
 import org.hamcrest.Matchers;
 import org.junit.Ignore;
@@ -47,7 +50,17 @@ import org.junit.Test;
  * @version $Id$
  * @since 0.8
  * @checkstyle MultipleStringLiterals (500 lines)
+ * @todo #524 MkContents should be able to handle branches.
+ *  In a request for file update or create you may specify a branch.
+ *  Also, a branch might be specified in a reading request.
+ *  So, if you changed some file in branch-1, you shouldn't get these
+ *  changes in the master branch, only in branch-1.
+ *  Implementation of create, update and get methods of MkContents
+ *  should be changed.
+ *  See
+ *  http://developer.github.com/v3/repos/contents/#update-a-file for details
  */
+@SuppressWarnings("PMD.TooManyMethods")
 public final class MkContentsTest {
     /**
      * MkContents can fetch the default branch readme file.
@@ -86,16 +99,10 @@ public final class MkContentsTest {
     public void canCreateFile() throws Exception {
         final Contents contents = MkContentsTest.repo().contents();
         final String path = "file.txt";
-        final JsonObject json = Json.createObjectBuilder()
-            .add("path", path)
-            .add("message", "theCreateMessage")
-            .add("content", "newContent")
-            .add(
-                "committer",
-                Json.createObjectBuilder()
-                    .add("name", "joe")
-                    .add("email", "joe@contents.com")
-            ).build();
+        final JsonObject json = MkContentsTest
+            .content(path, "theCreateMessage", "newContent")
+            .add("committer", MkContentsTest.committer())
+            .build();
         final Content.Smart content = new Content.Smart(contents.create(json));
         MatcherAssert.assertThat(
             content.path(),
@@ -111,6 +118,17 @@ public final class MkContentsTest {
         );
     }
 
+    /**
+     * MkContents can create new file in non default branch.
+     *
+     * @throws Exception if some problem inside
+     */
+    @Test
+    @Ignore
+    public void canCreateFileInSomeBranch() throws Exception {
+        //To be implemented.
+    }
+
     /**
      * MkContents should be able to create new files.
      *
@@ -148,19 +166,16 @@ public final class MkContentsTest {
         final ConcurrentMap<String, String> author =
             new ConcurrentHashMap<String, String>();
         author.put("login", username);
-        final JsonObject content = Json.createObjectBuilder()
-            .add("path", path)
-            .add("message", "theMessage")
-            .add("content", "blah")
+        final JsonObject content = MkContentsTest
+            .content(path, "theMessage", "blah")
             .build();
         MatcherAssert.assertThat(
             content.getString(cont),
             Matchers.is(initial)
         );
-        final JsonObject jsonPatch = Json.createObjectBuilder()
-            .add("path", path)
-            .add("message", message)
-            .add(cont, update).build();
+        final JsonObject jsonPatch = MkContentsTest
+            .content(path, message, update)
+            .build();
         contents.update(path, jsonPatch);
         MatcherAssert.assertThat(
             content.getString(cont),
@@ -168,6 +183,69 @@ public final class MkContentsTest {
         );
     }
 
+    /**
+     * MkContents is able to update the file content.
+     * During update new commit is created
+     * @throws Exception Exception if some problem inside
+     */
+    @Test
+    public void updatesFileCreateCommit() throws Exception {
+        final MkStorage storage = new MkStorage.InFile();
+        final Contents contents = MkContentsTest.repo(storage).contents();
+        final String path = "file.txt";
+        final JsonObject json = MkContentsTest
+            .content(path, "theCreateMessage", "newContent")
+            .add("committer", MkContentsTest.committer())
+            .build();
+        contents.create(json);
+        final String xpath = "/github/repos/repo/commits/commit";
+        MatcherAssert.assertThat(
+            storage.xml().nodes(xpath),
+            Matchers.<XML>iterableWithSize(1)
+        );
+        final JsonObject update = MkContentsTest
+            .content(path, "theMessage", "blah")
+            .build();
+        contents.update(path, update);
+        final Content.Smart content =
+            new Content.Smart(contents.get(path, "master"));
+        MatcherAssert.assertThat(
+            content.path(),
+            Matchers.is(path)
+        );
+        MatcherAssert.assertThat(
+            storage.xml().nodes(xpath),
+            Matchers.<XML>iterableWithSize(2)
+        );
+    }
+
+    /**
+     * Create content JsonObjectBuilder.
+     * @param path Content path
+     * @param message Commit message
+     * @param content Base64 encoded content
+     * @return JsonObjectBuilder
+     * @throws Exception If some problem inside
+     */
+    private static JsonObjectBuilder content(
+        final String path, final String message, final String content)
+        throws Exception {
+        return Json.createObjectBuilder()
+            .add("path", path)
+            .add("message", message)
+            .add("content", content);
+    }
+
+    /**
+     * Creates default committer.
+     * @return JsonObjectBuilder
+     */
+    private static JsonObjectBuilder committer() {
+        return Json.createObjectBuilder()
+            .add("name", "joe")
+            .add("email", "joe@contents.com");
+    }
+
     /**
      * Create a repo to work with.
      * @return Repo
@@ -178,4 +256,18 @@ public final class MkContentsTest {
             Json.createObjectBuilder().add("name", "test").build()
         );
     }
+
+    /**
+     * Create a test repo with custom {@code MkStorage}.
+     * @param storage The storage
+     * @return Test repo
+     * @throws IOException If any I/O error occurs.
+     */
+    private static Repo repo(
+        final MkStorage storage) throws IOException {
+        final String login = "test";
+        return new MkGithub(storage, login).repos().create(
+            Json.createObjectBuilder().add("name", login).build()
+        );
+    }
 }
