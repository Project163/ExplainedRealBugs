{"url":"https://api.github.com/repos/jcabi/jcabi-github/issues/214","repository_url":"https://api.github.com/repos/jcabi/jcabi-github","labels_url":"https://api.github.com/repos/jcabi/jcabi-github/issues/214/labels{/name}","comments_url":"https://api.github.com/repos/jcabi/jcabi-github/issues/214/comments","events_url":"https://api.github.com/repos/jcabi/jcabi-github/issues/214/events","html_url":"https://github.com/jcabi/jcabi-github/issues/214","id":25547850,"node_id":"MDU6SXNzdWUyNTU0Nzg1MA==","number":214,"title":"RtHook creates a request for the wrong URI.","user":{"login":"carlosmiranda","id":1917892,"node_id":"MDQ6VXNlcjE5MTc4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/1917892?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosmiranda","html_url":"https://github.com/carlosmiranda","followers_url":"https://api.github.com/users/carlosmiranda/followers","following_url":"https://api.github.com/users/carlosmiranda/following{/other_user}","gists_url":"https://api.github.com/users/carlosmiranda/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosmiranda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosmiranda/subscriptions","organizations_url":"https://api.github.com/users/carlosmiranda/orgs","repos_url":"https://api.github.com/users/carlosmiranda/repos","events_url":"https://api.github.com/users/carlosmiranda/events{/privacy}","received_events_url":"https://api.github.com/users/carlosmiranda/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":64697495,"node_id":"MDU6TGFiZWw2NDY5NzQ5NQ==","url":"https://api.github.com/repos/jcabi/jcabi-github/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":68908475,"node_id":"MDU6TGFiZWw2ODkwODQ3NQ==","url":"https://api.github.com/repos/jcabi/jcabi-github/labels/TS/FIX","name":"TS/FIX","color":"d4c5f9","default":false,"description":null},{"id":71018633,"node_id":"MDU6TGFiZWw3MTAxODYzMw==","url":"https://api.github.com/repos/jcabi/jcabi-github/labels/30%20mins","name":"30 mins","color":"eb6421","default":false,"description":null},{"id":71649357,"node_id":"MDU6TGFiZWw3MTY0OTM1Nw==","url":"https://api.github.com/repos/jcabi/jcabi-github/labels/@carlosmiranda","name":"@carlosmiranda","color":"009801","default":false,"description":null},{"id":73955232,"node_id":"MDU6TGFiZWw3Mzk1NTIzMg==","url":"https://api.github.com/repos/jcabi/jcabi-github/labels/DEV","name":"DEV","color":"bfd4f3","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2014-01-14T01:55:17Z","updated_at":"2014-01-15T13:34:23Z","closed_at":"2014-01-15T12:36:38Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I encountered this issue while working on #159 . When attempting to obtain data from a Hook, a 404 error is encountered. The following code in `Hook.java` is the culprit:\n\n```\n/**\n * Public ctor.\n * @param req Request\n * @param repo Repository\n * @param number Id of the get\n */\nRtHook(final Request req, final Repo repo, final int number) {\n    final Coordinates coords = repo.coordinates();\n    this.request = req.uri()\n        .path(\"/repos\")\n        .path(coords.user())\n        .path(coords.repo())\n        .path(\"/hook\") //Bug here! should be \"/hooks\"\n        .path(Integer.toString(number))\n        .back();\n    this.owner = repo;\n    this.num = number;\n}\n```\n\nAs per the <a href=\"http://developer.github.com/v3/repos/hooks/#json-http\">JSON HTTP Hooks API</a>, the URI should be `/repos/:owner/:repo/hooks/:id`. At the moment, the constructor creates a request for `/repos/:owner/:repo/hook/:id`.\n\nI managed to reproduce the bug through the following integration test case:\n\n```\n/**\n * RtHooks can fetch a single hook.\n *\n * @throws Exception If some problem inside.\n */\n@Test\npublic void canFetchSingleHook() throws Exception {\n    final Hooks hooks = repo().hooks();\n    int number = 0;\n    try {\n        final Hook hook = hooks.create(\n            \"geocommit\",\n            Collections.singletonMap(\"active\", \"true\")\n        );\n        number = hook.number();\n        MatcherAssert.assertThat(\n            hooks.get(number).json().getInt(\"id\"),\n            Matchers.equalTo(number)\n        );\n    } finally {\n        hooks.remove(number);\n    }\n}\n\n/**\n * Create and return repo to test.\n * @return Repo\n * @throws Exception If some problem inside\n */\nprivate static Repo repo() throws Exception {\n    final String key = System.getProperty(\"failsafe.github.key\");\n    Assume.assumeThat(key, Matchers.notNullValue());\n    final Github github = new RtGithub(key);\n    return github.repos().get(\n        new Coordinates.Simple(System.getProperty(\"failsafe.github.repo\"))\n    );\n}\n```\n\nPartial error trace: \n\n```\njava.lang.AssertionError: HTTP response status is not equal to 200:\n404 Not Found [https://api.github.com/repos/carlosmiranda/testrepo/hook/1680893]\nServer: GitHub.com\nDate: Tue, 14 Jan 2014 01:52:18 GMT\nContent-Type: application/json; charset=utf-8\nTransfer-Encoding: chunked\nStatus: 404 Not Found\nX-RateLimit-Limit: 5000\nX-RateLimit-Remaining: 4966\nX-RateLimit-Reset: 1389664536\nX-OAuth-Scopes: user, public_repo, repo, gist\nX-GitHub-Media-Type: github.beta\nX-Content-Type-Options: nosniff\nAccess-Control-Allow-Credentials: true\nAccess-Control-Expose-Headers: ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval\nAccess-Control-Allow-Origin: *\nX-GitHub-Request-Id: 7A36EB86:4B93:29152D:52D49851\n```\n","closed_by":{"login":"carlosmiranda","id":1917892,"node_id":"MDQ6VXNlcjE5MTc4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/1917892?v=4","gravatar_id":"","url":"https://api.github.com/users/carlosmiranda","html_url":"https://github.com/carlosmiranda","followers_url":"https://api.github.com/users/carlosmiranda/followers","following_url":"https://api.github.com/users/carlosmiranda/following{/other_user}","gists_url":"https://api.github.com/users/carlosmiranda/gists{/gist_id}","starred_url":"https://api.github.com/users/carlosmiranda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlosmiranda/subscriptions","organizations_url":"https://api.github.com/users/carlosmiranda/orgs","repos_url":"https://api.github.com/users/carlosmiranda/repos","events_url":"https://api.github.com/users/carlosmiranda/events{/privacy}","received_events_url":"https://api.github.com/users/carlosmiranda/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/jcabi/jcabi-github/issues/214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jcabi/jcabi-github/issues/214/timeline","performed_via_github_app":null,"state_reason":"completed"}