diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index a17b94b..e95e302 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -23,7 +23,8 @@
   </properties>
   <body>
   <release version="4.0-incubating" date="TBD" description="First ASF release under Incubation.">
-    <action issue="OGNL-8" type="update" dev="Christian Grobmeier">OGNL-8 - enabled generation of javacc Parser classes</action>
+  	<action issue="OGNL-24" type="update" dev="Christian Grobmeier">OGNL-24 - Support visitor pattern on AST (contributed by Daniel Pitts)</action>
+    <action issue="OGNL-8" type="update" dev="Christian Grobmeier">OGNL-8 - enabled generation of javacc Parser classes)</action>
   </release>
   </body>
 </document>
diff --git a/src/main/java/org/apache/commons/ognl/ASTAdd.java b/src/main/java/org/apache/commons/ognl/ASTAdd.java
index 93cc8c4..5248923 100644
--- a/src/main/java/org/apache/commons/ognl/ASTAdd.java
+++ b/src/main/java/org/apache/commons/ognl/ASTAdd.java
@@ -302,4 +302,9 @@ class ASTAdd
             throw OgnlOps.castToRuntime( t );
         }
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTAnd.java b/src/main/java/org/apache/commons/ognl/ASTAnd.java
index 0632359..d3c7fb2 100644
--- a/src/main/java/org/apache/commons/ognl/ASTAnd.java
+++ b/src/main/java/org/apache/commons/ognl/ASTAnd.java
@@ -186,4 +186,9 @@ public class ASTAnd
 
         return result;
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTAssign.java b/src/main/java/org/apache/commons/ognl/ASTAssign.java
index 89aa065..98e0c6f 100644
--- a/src/main/java/org/apache/commons/ognl/ASTAssign.java
+++ b/src/main/java/org/apache/commons/ognl/ASTAssign.java
@@ -144,4 +144,9 @@ class ASTAssign
 
         return result + value + ")";
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTBitAnd.java b/src/main/java/org/apache/commons/ognl/ASTBitAnd.java
index d8a2225..ef345a6 100644
--- a/src/main/java/org/apache/commons/ognl/ASTBitAnd.java
+++ b/src/main/java/org/apache/commons/ognl/ASTBitAnd.java
@@ -59,4 +59,9 @@ class ASTBitAnd
     {
         return "(long)" + super.coerceToNumeric( source, context, child );
     }
-}
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
+}
\ No newline at end of file
diff --git a/src/main/java/org/apache/commons/ognl/ASTBitNegate.java b/src/main/java/org/apache/commons/ognl/ASTBitNegate.java
index 2947381..8bf0f9a 100644
--- a/src/main/java/org/apache/commons/ognl/ASTBitNegate.java
+++ b/src/main/java/org/apache/commons/ognl/ASTBitNegate.java
@@ -60,4 +60,9 @@ class ASTBitNegate
             return "~(" + source + ")";
         }
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTBitOr.java b/src/main/java/org/apache/commons/ognl/ASTBitOr.java
index 6bd3fb3..cbd280b 100644
--- a/src/main/java/org/apache/commons/ognl/ASTBitOr.java
+++ b/src/main/java/org/apache/commons/ognl/ASTBitOr.java
@@ -54,4 +54,9 @@ class ASTBitOr
     {
         return "|";
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTChain.java b/src/main/java/org/apache/commons/ognl/ASTChain.java
index 6bbb7a8..a4e2a68 100644
--- a/src/main/java/org/apache/commons/ognl/ASTChain.java
+++ b/src/main/java/org/apache/commons/ognl/ASTChain.java
@@ -495,4 +495,9 @@ public class ASTChain
 
         return result;
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTConst.java b/src/main/java/org/apache/commons/ognl/ASTConst.java
index fcfe1c8..22a3976 100644
--- a/src/main/java/org/apache/commons/ognl/ASTConst.java
+++ b/src/main/java/org/apache/commons/ognl/ASTConst.java
@@ -213,4 +213,9 @@ public class ASTConst
 
         return toGetSourceString( context, target );
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTCtor.java b/src/main/java/org/apache/commons/ognl/ASTCtor.java
index f3faf37..9ef0fcb 100644
--- a/src/main/java/org/apache/commons/ognl/ASTCtor.java
+++ b/src/main/java/org/apache/commons/ognl/ASTCtor.java
@@ -374,4 +374,9 @@ public class ASTCtor
     {
         return "";
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTDivide.java b/src/main/java/org/apache/commons/ognl/ASTDivide.java
index 579e59a..00f73a5 100644
--- a/src/main/java/org/apache/commons/ognl/ASTDivide.java
+++ b/src/main/java/org/apache/commons/ognl/ASTDivide.java
@@ -49,4 +49,9 @@ class ASTDivide
         return "/";
     }
 
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTEq.java b/src/main/java/org/apache/commons/ognl/ASTEq.java
index 45f3afd..0696a4b 100644
--- a/src/main/java/org/apache/commons/ognl/ASTEq.java
+++ b/src/main/java/org/apache/commons/ognl/ASTEq.java
@@ -53,4 +53,9 @@ class ASTEq
     {
         return "org.apache.commons.ognl.OgnlOps.equal";
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTEval.java b/src/main/java/org/apache/commons/ognl/ASTEval.java
index d33fbcd..09d723f 100644
--- a/src/main/java/org/apache/commons/ognl/ASTEval.java
+++ b/src/main/java/org/apache/commons/ognl/ASTEval.java
@@ -92,4 +92,9 @@ class ASTEval
     {
         throw new UnsupportedCompilationException( "Map expressions not supported as native java yet." );
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTGreater.java b/src/main/java/org/apache/commons/ognl/ASTGreater.java
index 00525c3..952e1f1 100644
--- a/src/main/java/org/apache/commons/ognl/ASTGreater.java
+++ b/src/main/java/org/apache/commons/ognl/ASTGreater.java
@@ -54,4 +54,9 @@ class ASTGreater
     {
         return "org.apache.commons.ognl.OgnlOps.greater";
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTGreaterEq.java b/src/main/java/org/apache/commons/ognl/ASTGreaterEq.java
index 91f093b..266de50 100644
--- a/src/main/java/org/apache/commons/ognl/ASTGreaterEq.java
+++ b/src/main/java/org/apache/commons/ognl/ASTGreaterEq.java
@@ -53,4 +53,9 @@ class ASTGreaterEq
     {
         return "!org.apache.commons.ognl.OgnlOps.less";
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTIn.java b/src/main/java/org/apache/commons/ognl/ASTIn.java
index e2e5237..4e2fe9d 100644
--- a/src/main/java/org/apache/commons/ognl/ASTIn.java
+++ b/src/main/java/org/apache/commons/ognl/ASTIn.java
@@ -97,4 +97,9 @@ class ASTIn
     {
         throw new UnsupportedCompilationException( "Map expressions not supported as native java yet." );
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTInstanceof.java b/src/main/java/org/apache/commons/ognl/ASTInstanceof.java
index d56b19d..a6db2c9 100644
--- a/src/main/java/org/apache/commons/ognl/ASTInstanceof.java
+++ b/src/main/java/org/apache/commons/ognl/ASTInstanceof.java
@@ -93,4 +93,9 @@ public class ASTInstanceof
     {
         return toGetSourceString( context, target );
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTKeyValue.java b/src/main/java/org/apache/commons/ognl/ASTKeyValue.java
index cd6199d..4601bb4 100644
--- a/src/main/java/org/apache/commons/ognl/ASTKeyValue.java
+++ b/src/main/java/org/apache/commons/ognl/ASTKeyValue.java
@@ -59,4 +59,9 @@ class ASTKeyValue
     {
         return getKey() + " -> " + getValue();
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTLess.java b/src/main/java/org/apache/commons/ognl/ASTLess.java
index 31845b6..ce37ef3 100644
--- a/src/main/java/org/apache/commons/ognl/ASTLess.java
+++ b/src/main/java/org/apache/commons/ognl/ASTLess.java
@@ -54,4 +54,9 @@ class ASTLess
     {
         return "org.apache.commons.ognl.OgnlOps.less";
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTLessEq.java b/src/main/java/org/apache/commons/ognl/ASTLessEq.java
index dfbf1eb..8ab1a7b 100644
--- a/src/main/java/org/apache/commons/ognl/ASTLessEq.java
+++ b/src/main/java/org/apache/commons/ognl/ASTLessEq.java
@@ -54,4 +54,9 @@ class ASTLessEq
         return "!org.apache.commons.ognl.OgnlOps.greater";
     }
 
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTList.java b/src/main/java/org/apache/commons/ognl/ASTList.java
index 3dd2894..4f44c69 100644
--- a/src/main/java/org/apache/commons/ognl/ASTList.java
+++ b/src/main/java/org/apache/commons/ognl/ASTList.java
@@ -235,4 +235,9 @@ public class ASTList
     {
         throw new UnsupportedCompilationException( "Can't generate setter for ASTList." );
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTMap.java b/src/main/java/org/apache/commons/ognl/ASTMap.java
index 7851228..03e7430 100644
--- a/src/main/java/org/apache/commons/ognl/ASTMap.java
+++ b/src/main/java/org/apache/commons/ognl/ASTMap.java
@@ -137,4 +137,9 @@ class ASTMap
     {
         throw new UnsupportedCompilationException( "Map expressions not supported as native java yet." );
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTMethod.java b/src/main/java/org/apache/commons/ognl/ASTMethod.java
index 19c64e6..346e58e 100644
--- a/src/main/java/org/apache/commons/ognl/ASTMethod.java
+++ b/src/main/java/org/apache/commons/ognl/ASTMethod.java
@@ -575,4 +575,9 @@ public class ASTMethod
 
         return result + ")" + post;
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTMultiply.java b/src/main/java/org/apache/commons/ognl/ASTMultiply.java
index deca87e..b563db6 100644
--- a/src/main/java/org/apache/commons/ognl/ASTMultiply.java
+++ b/src/main/java/org/apache/commons/ognl/ASTMultiply.java
@@ -55,4 +55,9 @@ class ASTMultiply
     {
         return "*";
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTNegate.java b/src/main/java/org/apache/commons/ognl/ASTNegate.java
index 8f940ff..705a989 100644
--- a/src/main/java/org/apache/commons/ognl/ASTNegate.java
+++ b/src/main/java/org/apache/commons/ognl/ASTNegate.java
@@ -60,4 +60,9 @@ class ASTNegate
             return "-(" + source + ")";
         }
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTNot.java b/src/main/java/org/apache/commons/ognl/ASTNot.java
index 943abd5..73ca2c4 100644
--- a/src/main/java/org/apache/commons/ognl/ASTNot.java
+++ b/src/main/java/org/apache/commons/ognl/ASTNot.java
@@ -67,4 +67,9 @@ class ASTNot
             throw OgnlOps.castToRuntime( t );
         }
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTNotEq.java b/src/main/java/org/apache/commons/ognl/ASTNotEq.java
index 370f7c3..f163088 100644
--- a/src/main/java/org/apache/commons/ognl/ASTNotEq.java
+++ b/src/main/java/org/apache/commons/ognl/ASTNotEq.java
@@ -54,4 +54,9 @@ class ASTNotEq
     {
         return "!org.apache.commons.ognl.OgnlOps.equal";
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTNotIn.java b/src/main/java/org/apache/commons/ognl/ASTNotIn.java
index 8cc9042..bc3fb2f 100644
--- a/src/main/java/org/apache/commons/ognl/ASTNotIn.java
+++ b/src/main/java/org/apache/commons/ognl/ASTNotIn.java
@@ -91,4 +91,9 @@ class ASTNotIn
             throw OgnlOps.castToRuntime( t );
         }
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTOr.java b/src/main/java/org/apache/commons/ognl/ASTOr.java
index 8857ccc..a86ab12 100644
--- a/src/main/java/org/apache/commons/ognl/ASTOr.java
+++ b/src/main/java/org/apache/commons/ognl/ASTOr.java
@@ -182,4 +182,9 @@ public class ASTOr
 
         return result;
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTProject.java b/src/main/java/org/apache/commons/ognl/ASTProject.java
index bb3759a..64b09c5 100644
--- a/src/main/java/org/apache/commons/ognl/ASTProject.java
+++ b/src/main/java/org/apache/commons/ognl/ASTProject.java
@@ -74,4 +74,9 @@ class ASTProject
     {
         throw new UnsupportedCompilationException( "Projection expressions not supported as native java yet." );
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTProperty.java b/src/main/java/org/apache/commons/ognl/ASTProperty.java
index 850e770..20a4490 100644
--- a/src/main/java/org/apache/commons/ognl/ASTProperty.java
+++ b/src/main/java/org/apache/commons/ognl/ASTProperty.java
@@ -703,4 +703,9 @@ public class ASTProperty
 
         return result;
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTRemainder.java b/src/main/java/org/apache/commons/ognl/ASTRemainder.java
index 00330d4..516472a 100644
--- a/src/main/java/org/apache/commons/ognl/ASTRemainder.java
+++ b/src/main/java/org/apache/commons/ognl/ASTRemainder.java
@@ -48,4 +48,9 @@ class ASTRemainder
     {
         return "%";
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTRootVarRef.java b/src/main/java/org/apache/commons/ognl/ASTRootVarRef.java
index 46b8092..1f9662c 100644
--- a/src/main/java/org/apache/commons/ognl/ASTRootVarRef.java
+++ b/src/main/java/org/apache/commons/ognl/ASTRootVarRef.java
@@ -79,4 +79,9 @@ public class ASTRootVarRef
         else
             return "$3";
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTSelect.java b/src/main/java/org/apache/commons/ognl/ASTSelect.java
index 2b893e7..40fae26 100644
--- a/src/main/java/org/apache/commons/ognl/ASTSelect.java
+++ b/src/main/java/org/apache/commons/ognl/ASTSelect.java
@@ -76,4 +76,9 @@ class ASTSelect
     {
         throw new UnsupportedCompilationException( "Eval expressions not supported as native java yet." );
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTSelectFirst.java b/src/main/java/org/apache/commons/ognl/ASTSelectFirst.java
index a22dedc..f180578 100644
--- a/src/main/java/org/apache/commons/ognl/ASTSelectFirst.java
+++ b/src/main/java/org/apache/commons/ognl/ASTSelectFirst.java
@@ -76,4 +76,9 @@ class ASTSelectFirst
     {
         throw new UnsupportedCompilationException( "Eval expressions not supported as native java yet." );
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTSelectLast.java b/src/main/java/org/apache/commons/ognl/ASTSelectLast.java
index 91592b8..051871f 100644
--- a/src/main/java/org/apache/commons/ognl/ASTSelectLast.java
+++ b/src/main/java/org/apache/commons/ognl/ASTSelectLast.java
@@ -76,4 +76,9 @@ class ASTSelectLast
     {
         throw new UnsupportedCompilationException( "Eval expressions not supported as native java yet." );
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTSequence.java b/src/main/java/org/apache/commons/ognl/ASTSequence.java
index 60395d7..490a5d1 100644
--- a/src/main/java/org/apache/commons/ognl/ASTSequence.java
+++ b/src/main/java/org/apache/commons/ognl/ASTSequence.java
@@ -166,4 +166,9 @@ public class ASTSequence
 
         return result;
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTShiftLeft.java b/src/main/java/org/apache/commons/ognl/ASTShiftLeft.java
index 141d74b..ba8c53a 100644
--- a/src/main/java/org/apache/commons/ognl/ASTShiftLeft.java
+++ b/src/main/java/org/apache/commons/ognl/ASTShiftLeft.java
@@ -48,4 +48,9 @@ class ASTShiftLeft
     {
         return "<<";
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTShiftRight.java b/src/main/java/org/apache/commons/ognl/ASTShiftRight.java
index b9a36e4..42c2862 100644
--- a/src/main/java/org/apache/commons/ognl/ASTShiftRight.java
+++ b/src/main/java/org/apache/commons/ognl/ASTShiftRight.java
@@ -48,4 +48,9 @@ class ASTShiftRight
     {
         return ">>";
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTStaticField.java b/src/main/java/org/apache/commons/ognl/ASTStaticField.java
index 90ed3b0..e40d41e 100644
--- a/src/main/java/org/apache/commons/ognl/ASTStaticField.java
+++ b/src/main/java/org/apache/commons/ognl/ASTStaticField.java
@@ -218,4 +218,9 @@ public class ASTStaticField
 
         return className + "." + fieldName;
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTStaticMethod.java b/src/main/java/org/apache/commons/ognl/ASTStaticMethod.java
index a706667..bf6d727 100644
--- a/src/main/java/org/apache/commons/ognl/ASTStaticMethod.java
+++ b/src/main/java/org/apache/commons/ognl/ASTStaticMethod.java
@@ -263,4 +263,9 @@ public class ASTStaticMethod
     {
         return toGetSourceString( context, target );
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTSubtract.java b/src/main/java/org/apache/commons/ognl/ASTSubtract.java
index 5ac858f..089ecec 100644
--- a/src/main/java/org/apache/commons/ognl/ASTSubtract.java
+++ b/src/main/java/org/apache/commons/ognl/ASTSubtract.java
@@ -48,4 +48,9 @@ class ASTSubtract
     {
         return "-";
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTTest.java b/src/main/java/org/apache/commons/ognl/ASTTest.java
index d20dfb6..c3589aa 100644
--- a/src/main/java/org/apache/commons/ognl/ASTTest.java
+++ b/src/main/java/org/apache/commons/ognl/ASTTest.java
@@ -133,4 +133,9 @@ class ASTTest
             throw OgnlOps.castToRuntime( t );
         }
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTThisVarRef.java b/src/main/java/org/apache/commons/ognl/ASTThisVarRef.java
index 9cec7a2..e092425 100644
--- a/src/main/java/org/apache/commons/ognl/ASTThisVarRef.java
+++ b/src/main/java/org/apache/commons/ognl/ASTThisVarRef.java
@@ -65,4 +65,9 @@ public class ASTThisVarRef
     {
         throw new UnsupportedCompilationException( "Unable to compile this references." );
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTUnsignedShiftRight.java b/src/main/java/org/apache/commons/ognl/ASTUnsignedShiftRight.java
index c4acb3a..2db28e2 100644
--- a/src/main/java/org/apache/commons/ognl/ASTUnsignedShiftRight.java
+++ b/src/main/java/org/apache/commons/ognl/ASTUnsignedShiftRight.java
@@ -84,4 +84,9 @@ class ASTUnsignedShiftRight
 
         return result;
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTVarRef.java b/src/main/java/org/apache/commons/ognl/ASTVarRef.java
index 4c1ab2c..49f6f6e 100644
--- a/src/main/java/org/apache/commons/ognl/ASTVarRef.java
+++ b/src/main/java/org/apache/commons/ognl/ASTVarRef.java
@@ -133,4 +133,9 @@ public class ASTVarRef
     {
         return toGetSourceString( context, target );
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/ASTXor.java b/src/main/java/org/apache/commons/ognl/ASTXor.java
index 82c56d8..0b33b69 100644
--- a/src/main/java/org/apache/commons/ognl/ASTXor.java
+++ b/src/main/java/org/apache/commons/ognl/ASTXor.java
@@ -54,4 +54,9 @@ class ASTXor
     {
         return "^";
     }
+    
+    public <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data) 
+    {
+        return visitor.visit(this, data);
+    }
 }
diff --git a/src/main/java/org/apache/commons/ognl/Node.java b/src/main/java/org/apache/commons/ognl/Node.java
index cb76a6e..9f41a93 100644
--- a/src/main/java/org/apache/commons/ognl/Node.java
+++ b/src/main/java/org/apache/commons/ognl/Node.java
@@ -91,4 +91,19 @@ public interface Node
      * @param accessor The compiled representation of this node.
      */
     void setAccessor( ExpressionAccessor accessor );
+
+
+    /**
+     * Supports the Visitor pattern. The method which corresponds to
+     * the runtime type of this Node will be called.
+     * @param visitor The visitor to accept.
+     * @param data The second parameter to pass through to visitor.visit
+     * @param <R> The return type of the visitor.visit method.
+     * @param <P> The type of the second parameter type.
+     * @return the value returned by visitor.visit
+     * @throws NullPointerException if visitor is null
+     * @throws RuntimeException if visitor.visit throws an exception.
+     */
+    <R,P> R accept(NodeVisitor<? extends R, ? super P> visitor, P data);
+
 }
diff --git a/src/main/java/org/apache/commons/ognl/NodeVisitor.java b/src/main/java/org/apache/commons/ognl/NodeVisitor.java
new file mode 100644
index 0000000..4eab67a
--- /dev/null
+++ b/src/main/java/org/apache/commons/ognl/NodeVisitor.java
@@ -0,0 +1,71 @@
+/*
+ * $Id: $
+ *
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *  http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+package org.apache.commons.ognl;
+
+public interface NodeVisitor<R, P>
+{
+  public R visit(ASTSequence node, P data);
+  public R visit(ASTAssign node, P data);
+  public R visit(ASTTest node, P data);
+  public R visit(ASTOr node, P data);
+  public R visit(ASTAnd node, P data);
+  public R visit(ASTBitOr node, P data);
+  public R visit(ASTXor node, P data);
+  public R visit(ASTBitAnd node, P data);
+  public R visit(ASTEq node, P data);
+  public R visit(ASTNotEq node, P data);
+  public R visit(ASTLess node, P data);
+  public R visit(ASTGreater node, P data);
+  public R visit(ASTLessEq node, P data);
+  public R visit(ASTGreaterEq node, P data);
+  public R visit(ASTIn node, P data);
+  public R visit(ASTNotIn node, P data);
+  public R visit(ASTShiftLeft node, P data);
+  public R visit(ASTShiftRight node, P data);
+  public R visit(ASTUnsignedShiftRight node, P data);
+  public R visit(ASTAdd node, P data);
+  public R visit(ASTSubtract node, P data);
+  public R visit(ASTMultiply node, P data);
+  public R visit(ASTDivide node, P data);
+  public R visit(ASTRemainder node, P data);
+  public R visit(ASTNegate node, P data);
+  public R visit(ASTBitNegate node, P data);
+  public R visit(ASTNot node, P data);
+  public R visit(ASTInstanceof node, P data);
+  public R visit(ASTChain node, P data);
+  public R visit(ASTEval node, P data);
+  public R visit(ASTConst node, P data);
+  public R visit(ASTThisVarRef node, P data);
+  public R visit(ASTRootVarRef node, P data);
+  public R visit(ASTVarRef node, P data);
+  public R visit(ASTList node, P data);
+  public R visit(ASTMap node, P data);
+  public R visit(ASTKeyValue node, P data);
+  public R visit(ASTStaticField node, P data);
+  public R visit(ASTCtor node, P data);
+  public R visit(ASTProperty node, P data);
+  public R visit(ASTStaticMethod node, P data);
+  public R visit(ASTMethod node, P data);
+  public R visit(ASTProject node, P data);
+  public R visit(ASTSelect node, P data);
+  public R visit(ASTSelectFirst node, P data);
+  public R visit(ASTSelectLast node, P data);
+}
