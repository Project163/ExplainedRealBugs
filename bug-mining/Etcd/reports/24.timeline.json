[{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/776133953","html_url":"https://github.com/etcd-io/etcd/issues/12680#issuecomment-776133953","issue_url":"https://api.github.com/repos/etcd-io/etcd/issues/12680","id":776133953,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjEzMzk1Mw==","user":{"login":"ptabor","id":11505763,"node_id":"MDQ6VXNlcjExNTA1NzYz","avatar_url":"https://avatars.githubusercontent.com/u/11505763?v=4","gravatar_id":"","url":"https://api.github.com/users/ptabor","html_url":"https://github.com/ptabor","followers_url":"https://api.github.com/users/ptabor/followers","following_url":"https://api.github.com/users/ptabor/following{/other_user}","gists_url":"https://api.github.com/users/ptabor/gists{/gist_id}","starred_url":"https://api.github.com/users/ptabor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptabor/subscriptions","organizations_url":"https://api.github.com/users/ptabor/orgs","repos_url":"https://api.github.com/users/ptabor/repos","events_url":"https://api.github.com/users/ptabor/events{/privacy}","received_events_url":"https://api.github.com/users/ptabor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-09T18:09:51Z","updated_at":"2021-02-09T18:09:51Z","body":"It's aligned with my recent observation on 1.4.13. \r\n\r\nWhat I found is that the node that is follower and becoming a leader during the election has some troubles with responding to the read-only requests it used to be serving. Can you check if the 'delayed' requests are 'served' by the 'new leader' or any of the nodes ?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/776133953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ptabor","id":11505763,"node_id":"MDQ6VXNlcjExNTA1NzYz","avatar_url":"https://avatars.githubusercontent.com/u/11505763?v=4","gravatar_id":"","url":"https://api.github.com/users/ptabor","html_url":"https://github.com/ptabor","followers_url":"https://api.github.com/users/ptabor/followers","following_url":"https://api.github.com/users/ptabor/following{/other_user}","gists_url":"https://api.github.com/users/ptabor/gists{/gist_id}","starred_url":"https://api.github.com/users/ptabor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptabor/subscriptions","organizations_url":"https://api.github.com/users/ptabor/orgs","repos_url":"https://api.github.com/users/ptabor/repos","events_url":"https://api.github.com/users/ptabor/events{/privacy}","received_events_url":"https://api.github.com/users/ptabor/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4310673779,"node_id":"MDEyOkxhYmVsZWRFdmVudDQzMTA2NzM3Nzk=","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/4310673779","actor":{"login":"ptabor","id":11505763,"node_id":"MDQ6VXNlcjExNTA1NzYz","avatar_url":"https://avatars.githubusercontent.com/u/11505763?v=4","gravatar_id":"","url":"https://api.github.com/users/ptabor","html_url":"https://github.com/ptabor","followers_url":"https://api.github.com/users/ptabor/followers","following_url":"https://api.github.com/users/ptabor/following{/other_user}","gists_url":"https://api.github.com/users/ptabor/gists{/gist_id}","starred_url":"https://api.github.com/users/ptabor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptabor/subscriptions","organizations_url":"https://api.github.com/users/ptabor/orgs","repos_url":"https://api.github.com/users/ptabor/repos","events_url":"https://api.github.com/users/ptabor/events{/privacy}","received_events_url":"https://api.github.com/users/ptabor/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-02-09T18:12:49Z","label":{"name":"important","color":"9B077A"},"performed_via_github_app":null},{"id":4310674778,"node_id":"MDEyOkxhYmVsZWRFdmVudDQzMTA2NzQ3Nzg=","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/4310674778","actor":{"login":"ptabor","id":11505763,"node_id":"MDQ6VXNlcjExNTA1NzYz","avatar_url":"https://avatars.githubusercontent.com/u/11505763?v=4","gravatar_id":"","url":"https://api.github.com/users/ptabor","html_url":"https://github.com/ptabor","followers_url":"https://api.github.com/users/ptabor/followers","following_url":"https://api.github.com/users/ptabor/following{/other_user}","gists_url":"https://api.github.com/users/ptabor/gists{/gist_id}","starred_url":"https://api.github.com/users/ptabor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptabor/subscriptions","organizations_url":"https://api.github.com/users/ptabor/orgs","repos_url":"https://api.github.com/users/ptabor/repos","events_url":"https://api.github.com/users/ptabor/events{/privacy}","received_events_url":"https://api.github.com/users/ptabor/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-02-09T18:13:04Z","label":{"name":"Investigating","color":"E0E0E0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/776252220","html_url":"https://github.com/etcd-io/etcd/issues/12680#issuecomment-776252220","issue_url":"https://api.github.com/repos/etcd-io/etcd/issues/12680","id":776252220,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjI1MjIyMA==","user":{"login":"Cjen1","id":11444677,"node_id":"MDQ6VXNlcjExNDQ0Njc3","avatar_url":"https://avatars.githubusercontent.com/u/11444677?v=4","gravatar_id":"","url":"https://api.github.com/users/Cjen1","html_url":"https://github.com/Cjen1","followers_url":"https://api.github.com/users/Cjen1/followers","following_url":"https://api.github.com/users/Cjen1/following{/other_user}","gists_url":"https://api.github.com/users/Cjen1/gists{/gist_id}","starred_url":"https://api.github.com/users/Cjen1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cjen1/subscriptions","organizations_url":"https://api.github.com/users/Cjen1/orgs","repos_url":"https://api.github.com/users/Cjen1/repos","events_url":"https://api.github.com/users/Cjen1/events{/privacy}","received_events_url":"https://api.github.com/users/Cjen1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-09T21:21:27Z","updated_at":"2021-02-09T21:21:27Z","body":"So I'm not actually sure and have had difficulty trying to figure this kind of thing out in the past. Specifically trying to track which node a request is dispatched to, has been troublesome, is there an endpoint which I can hook into for it?\r\n\r\nAdditionally this is should be a write-only workload (just `client.Put` requests).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/776252220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Cjen1","id":11444677,"node_id":"MDQ6VXNlcjExNDQ0Njc3","avatar_url":"https://avatars.githubusercontent.com/u/11444677?v=4","gravatar_id":"","url":"https://api.github.com/users/Cjen1","html_url":"https://github.com/Cjen1","followers_url":"https://api.github.com/users/Cjen1/followers","following_url":"https://api.github.com/users/Cjen1/following{/other_user}","gists_url":"https://api.github.com/users/Cjen1/gists{/gist_id}","starred_url":"https://api.github.com/users/Cjen1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cjen1/subscriptions","organizations_url":"https://api.github.com/users/Cjen1/orgs","repos_url":"https://api.github.com/users/Cjen1/repos","events_url":"https://api.github.com/users/Cjen1/events{/privacy}","received_events_url":"https://api.github.com/users/Cjen1/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/776264973","html_url":"https://github.com/etcd-io/etcd/issues/12680#issuecomment-776264973","issue_url":"https://api.github.com/repos/etcd-io/etcd/issues/12680","id":776264973,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjI2NDk3Mw==","user":{"login":"ptabor","id":11505763,"node_id":"MDQ6VXNlcjExNTA1NzYz","avatar_url":"https://avatars.githubusercontent.com/u/11505763?v=4","gravatar_id":"","url":"https://api.github.com/users/ptabor","html_url":"https://github.com/ptabor","followers_url":"https://api.github.com/users/ptabor/followers","following_url":"https://api.github.com/users/ptabor/following{/other_user}","gists_url":"https://api.github.com/users/ptabor/gists{/gist_id}","starred_url":"https://api.github.com/users/ptabor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptabor/subscriptions","organizations_url":"https://api.github.com/users/ptabor/orgs","repos_url":"https://api.github.com/users/ptabor/repos","events_url":"https://api.github.com/users/ptabor/events{/privacy}","received_events_url":"https://api.github.com/users/ptabor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-09T21:46:13Z","updated_at":"2021-02-09T21:46:13Z","body":"You can have 3 concurrently running clients each of them connecting to specific etcd node. ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/776264973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ptabor","id":11505763,"node_id":"MDQ6VXNlcjExNTA1NzYz","avatar_url":"https://avatars.githubusercontent.com/u/11505763?v=4","gravatar_id":"","url":"https://api.github.com/users/ptabor","html_url":"https://github.com/ptabor","followers_url":"https://api.github.com/users/ptabor/followers","following_url":"https://api.github.com/users/ptabor/following{/other_user}","gists_url":"https://api.github.com/users/ptabor/gists{/gist_id}","starred_url":"https://api.github.com/users/ptabor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptabor/subscriptions","organizations_url":"https://api.github.com/users/ptabor/orgs","repos_url":"https://api.github.com/users/ptabor/repos","events_url":"https://api.github.com/users/ptabor/events{/privacy}","received_events_url":"https://api.github.com/users/ptabor/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/780710984","html_url":"https://github.com/etcd-io/etcd/issues/12680#issuecomment-780710984","issue_url":"https://api.github.com/repos/etcd-io/etcd/issues/12680","id":780710984,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MDcxMDk4NA==","user":{"login":"Cjen1","id":11444677,"node_id":"MDQ6VXNlcjExNDQ0Njc3","avatar_url":"https://avatars.githubusercontent.com/u/11444677?v=4","gravatar_id":"","url":"https://api.github.com/users/Cjen1","html_url":"https://github.com/Cjen1","followers_url":"https://api.github.com/users/Cjen1/followers","following_url":"https://api.github.com/users/Cjen1/following{/other_user}","gists_url":"https://api.github.com/users/Cjen1/gists{/gist_id}","starred_url":"https://api.github.com/users/Cjen1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cjen1/subscriptions","organizations_url":"https://api.github.com/users/Cjen1/orgs","repos_url":"https://api.github.com/users/Cjen1/repos","events_url":"https://api.github.com/users/Cjen1/events{/privacy}","received_events_url":"https://api.github.com/users/Cjen1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-17T17:14:56Z","updated_at":"2021-02-17T23:21:49Z","body":"Hi I managed to get all that working today. It seems that you were correct, the delayed requests do seem to be read requests served by the new leader.\r\n\r\n![image](https://user-images.githubusercontent.com/11444677/108240902-31f7c100-7143-11eb-8a7f-d51abcbe6c97.png)\r\n\r\n![image](https://user-images.githubusercontent.com/11444677/108240934-3ae89280-7143-11eb-9a2f-27098a3f2989.png)\r\n\r\n(leader killed at 20s, that process is restarted at 40s, just read requests)\r\n\r\nAfaict the original leader is \"10.0.0.1\", and \"10.0.0.2\" is subsequently elected.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/780710984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Cjen1","id":11444677,"node_id":"MDQ6VXNlcjExNDQ0Njc3","avatar_url":"https://avatars.githubusercontent.com/u/11444677?v=4","gravatar_id":"","url":"https://api.github.com/users/Cjen1","html_url":"https://github.com/Cjen1","followers_url":"https://api.github.com/users/Cjen1/followers","following_url":"https://api.github.com/users/Cjen1/following{/other_user}","gists_url":"https://api.github.com/users/Cjen1/gists{/gist_id}","starred_url":"https://api.github.com/users/Cjen1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cjen1/subscriptions","organizations_url":"https://api.github.com/users/Cjen1/orgs","repos_url":"https://api.github.com/users/Cjen1/repos","events_url":"https://api.github.com/users/Cjen1/events{/privacy}","received_events_url":"https://api.github.com/users/Cjen1/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/790710168","html_url":"https://github.com/etcd-io/etcd/issues/12680#issuecomment-790710168","issue_url":"https://api.github.com/repos/etcd-io/etcd/issues/12680","id":790710168,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MDcxMDE2OA==","user":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-04T15:41:56Z","updated_at":"2021-03-04T15:41:56Z","body":"It might be caused by dropping request on \r\n\r\nhttps://github.com/etcd-io/etcd/blob/aefbd226b8a7b50f4d645f744d2356e0a5d3231a/raft/raft.go#L1075-L1078\r\n\r\nas later on we wait for response (and didn't get one) in\r\n\r\nhttps://github.com/etcd-io/etcd/blob/aefbd226b8a7b50f4d645f744d2356e0a5d3231a/server/etcdserver/v3_server.go#L754\r\n\r\nthus nothing is happening till timeout.\r\n\r\nOn my local setup, commenting out `return nil` in first file is resolving timeout issue (but is still not a solution, as this `if` is there for a reason: https://github.com/etcd-io/etcd/issues/7331). ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/790710168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/790742050","html_url":"https://github.com/etcd-io/etcd/issues/12680#issuecomment-790742050","issue_url":"https://api.github.com/repos/etcd-io/etcd/issues/12680","id":790742050,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MDc0MjA1MA==","user":{"login":"Cjen1","id":11444677,"node_id":"MDQ6VXNlcjExNDQ0Njc3","avatar_url":"https://avatars.githubusercontent.com/u/11444677?v=4","gravatar_id":"","url":"https://api.github.com/users/Cjen1","html_url":"https://github.com/Cjen1","followers_url":"https://api.github.com/users/Cjen1/followers","following_url":"https://api.github.com/users/Cjen1/following{/other_user}","gists_url":"https://api.github.com/users/Cjen1/gists{/gist_id}","starred_url":"https://api.github.com/users/Cjen1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cjen1/subscriptions","organizations_url":"https://api.github.com/users/Cjen1/orgs","repos_url":"https://api.github.com/users/Cjen1/repos","events_url":"https://api.github.com/users/Cjen1/events{/privacy}","received_events_url":"https://api.github.com/users/Cjen1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-04T16:24:04Z","updated_at":"2021-03-04T16:24:04Z","body":"@wpedrak I think that the `if` is there for the `Leader Completeness Property` (Section 8 of the Raft paper).\r\n\r\nIs it possible to do a case split kind of thing? So in the standard case, everything normal, in the `!committedEntryInCurrentTerm()` case waiting on that condition itself.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/790742050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Cjen1","id":11444677,"node_id":"MDQ6VXNlcjExNDQ0Njc3","avatar_url":"https://avatars.githubusercontent.com/u/11444677?v=4","gravatar_id":"","url":"https://api.github.com/users/Cjen1","html_url":"https://github.com/Cjen1","followers_url":"https://api.github.com/users/Cjen1/followers","following_url":"https://api.github.com/users/Cjen1/following{/other_user}","gists_url":"https://api.github.com/users/Cjen1/gists{/gist_id}","starred_url":"https://api.github.com/users/Cjen1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cjen1/subscriptions","organizations_url":"https://api.github.com/users/Cjen1/orgs","repos_url":"https://api.github.com/users/Cjen1/repos","events_url":"https://api.github.com/users/Cjen1/events{/privacy}","received_events_url":"https://api.github.com/users/Cjen1/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4409020449,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDQwOTAyMDQ0OQ==","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/4409020449","actor":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-03-04T16:24:04Z","performed_via_github_app":null},{"id":4409020454,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ0MDkwMjA0NTQ=","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/4409020454","actor":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-03-04T16:24:04Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/790767655","html_url":"https://github.com/etcd-io/etcd/issues/12680#issuecomment-790767655","issue_url":"https://api.github.com/repos/etcd-io/etcd/issues/12680","id":790767655,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MDc2NzY1NQ==","user":{"login":"ptabor","id":11505763,"node_id":"MDQ6VXNlcjExNTA1NzYz","avatar_url":"https://avatars.githubusercontent.com/u/11505763?v=4","gravatar_id":"","url":"https://api.github.com/users/ptabor","html_url":"https://github.com/ptabor","followers_url":"https://api.github.com/users/ptabor/followers","following_url":"https://api.github.com/users/ptabor/following{/other_user}","gists_url":"https://api.github.com/users/ptabor/gists{/gist_id}","starred_url":"https://api.github.com/users/ptabor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptabor/subscriptions","organizations_url":"https://api.github.com/users/ptabor/orgs","repos_url":"https://api.github.com/users/ptabor/repos","events_url":"https://api.github.com/users/ptabor/events{/privacy}","received_events_url":"https://api.github.com/users/ptabor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-04T16:58:59Z","updated_at":"2021-03-04T16:58:59Z","body":"@Cjen1 Could you please rerun your test with the if commented out to confirm that root-cause. \r\n\r\nAgree that we should somehow delay execution of the code\r\nhttps://github.com/etcd-io/etcd/blob/aefbd226b8a7b50f4d645f744d2356e0a5d3231a/raft/raft.go#L1083-L1093 till the post-commit. \r\n\r\nhttps://github.com/etcd-io/etcd/blob/aefbd226b8a7b50f4d645f744d2356e0a5d3231a/raft/raft.go#L509\r\nSeems to be always executed post-commit. \r\n\r\nI don't know whether in clusters without any RW traffic, we can assume a commit soon after election, that would drain the queued 'readIndex' updates.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/790767655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ptabor","id":11505763,"node_id":"MDQ6VXNlcjExNTA1NzYz","avatar_url":"https://avatars.githubusercontent.com/u/11505763?v=4","gravatar_id":"","url":"https://api.github.com/users/ptabor","html_url":"https://github.com/ptabor","followers_url":"https://api.github.com/users/ptabor/followers","following_url":"https://api.github.com/users/ptabor/following{/other_user}","gists_url":"https://api.github.com/users/ptabor/gists{/gist_id}","starred_url":"https://api.github.com/users/ptabor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptabor/subscriptions","organizations_url":"https://api.github.com/users/ptabor/orgs","repos_url":"https://api.github.com/users/ptabor/repos","events_url":"https://api.github.com/users/ptabor/events{/privacy}","received_events_url":"https://api.github.com/users/ptabor/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4409209604,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDQwOTIwOTYwNA==","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/4409209604","actor":{"login":"Cjen1","id":11444677,"node_id":"MDQ6VXNlcjExNDQ0Njc3","avatar_url":"https://avatars.githubusercontent.com/u/11444677?v=4","gravatar_id":"","url":"https://api.github.com/users/Cjen1","html_url":"https://github.com/Cjen1","followers_url":"https://api.github.com/users/Cjen1/followers","following_url":"https://api.github.com/users/Cjen1/following{/other_user}","gists_url":"https://api.github.com/users/Cjen1/gists{/gist_id}","starred_url":"https://api.github.com/users/Cjen1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cjen1/subscriptions","organizations_url":"https://api.github.com/users/Cjen1/orgs","repos_url":"https://api.github.com/users/Cjen1/repos","events_url":"https://api.github.com/users/Cjen1/events{/privacy}","received_events_url":"https://api.github.com/users/Cjen1/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-03-04T16:59:00Z","performed_via_github_app":null},{"id":4409209608,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ0MDkyMDk2MDg=","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/4409209608","actor":{"login":"Cjen1","id":11444677,"node_id":"MDQ6VXNlcjExNDQ0Njc3","avatar_url":"https://avatars.githubusercontent.com/u/11444677?v=4","gravatar_id":"","url":"https://api.github.com/users/Cjen1","html_url":"https://github.com/Cjen1","followers_url":"https://api.github.com/users/Cjen1/followers","following_url":"https://api.github.com/users/Cjen1/following{/other_user}","gists_url":"https://api.github.com/users/Cjen1/gists{/gist_id}","starred_url":"https://api.github.com/users/Cjen1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cjen1/subscriptions","organizations_url":"https://api.github.com/users/Cjen1/orgs","repos_url":"https://api.github.com/users/Cjen1/repos","events_url":"https://api.github.com/users/Cjen1/events{/privacy}","received_events_url":"https://api.github.com/users/Cjen1/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-03-04T16:59:00Z","performed_via_github_app":null},{"id":4445884498,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ0NDU4ODQ0OTg=","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/4445884498","actor":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"97d4a4b08d9b16a46f8c517498fb90d59b61a63f","commit_url":"https://api.github.com/repos/wpedrak/etcd/commits/97d4a4b08d9b16a46f8c517498fb90d59b61a63f","created_at":"2021-03-11T15:54:01Z","performed_via_github_app":null},{"actor":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T16:17:31Z","updated_at":"2021-03-11T16:17:31Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/12762","repository_url":"https://api.github.com/repos/etcd-io/etcd","labels_url":"https://api.github.com/repos/etcd-io/etcd/issues/12762/labels{/name}","comments_url":"https://api.github.com/repos/etcd-io/etcd/issues/12762/comments","events_url":"https://api.github.com/repos/etcd-io/etcd/issues/12762/events","html_url":"https://github.com/etcd-io/etcd/pull/12762","id":829303651,"node_id":"MDExOlB1bGxSZXF1ZXN0NTkwOTg5ODU0","number":12762,"title":"raft: postpone MsgReadIndex until first commit in the term","user":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":153947611,"node_id":"MDU6TGFiZWwxNTM5NDc2MTE=","url":"https://api.github.com/repos/etcd-io/etcd/labels/area/raft","name":"area/raft","color":"36d84b","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":14,"created_at":"2021-03-11T16:17:31Z","updated_at":"2022-07-13T16:17:48Z","closed_at":"2021-03-23T14:57:31Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":11225014,"node_id":"MDEwOlJlcG9zaXRvcnkxMTIyNTAxNA==","name":"etcd","full_name":"etcd-io/etcd","private":false,"owner":{"login":"etcd-io","id":41972792,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQxOTcyNzky","avatar_url":"https://avatars.githubusercontent.com/u/41972792?v=4","gravatar_id":"","url":"https://api.github.com/users/etcd-io","html_url":"https://github.com/etcd-io","followers_url":"https://api.github.com/users/etcd-io/followers","following_url":"https://api.github.com/users/etcd-io/following{/other_user}","gists_url":"https://api.github.com/users/etcd-io/gists{/gist_id}","starred_url":"https://api.github.com/users/etcd-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/etcd-io/subscriptions","organizations_url":"https://api.github.com/users/etcd-io/orgs","repos_url":"https://api.github.com/users/etcd-io/repos","events_url":"https://api.github.com/users/etcd-io/events{/privacy}","received_events_url":"https://api.github.com/users/etcd-io/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/etcd-io/etcd","description":"Distributed reliable key-value store for the most critical data of a distributed system","fork":false,"url":"https://api.github.com/repos/etcd-io/etcd","forks_url":"https://api.github.com/repos/etcd-io/etcd/forks","keys_url":"https://api.github.com/repos/etcd-io/etcd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/etcd-io/etcd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/etcd-io/etcd/teams","hooks_url":"https://api.github.com/repos/etcd-io/etcd/hooks","issue_events_url":"https://api.github.com/repos/etcd-io/etcd/issues/events{/number}","events_url":"https://api.github.com/repos/etcd-io/etcd/events","assignees_url":"https://api.github.com/repos/etcd-io/etcd/assignees{/user}","branches_url":"https://api.github.com/repos/etcd-io/etcd/branches{/branch}","tags_url":"https://api.github.com/repos/etcd-io/etcd/tags","blobs_url":"https://api.github.com/repos/etcd-io/etcd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/etcd-io/etcd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/etcd-io/etcd/git/refs{/sha}","trees_url":"https://api.github.com/repos/etcd-io/etcd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/etcd-io/etcd/statuses/{sha}","languages_url":"https://api.github.com/repos/etcd-io/etcd/languages","stargazers_url":"https://api.github.com/repos/etcd-io/etcd/stargazers","contributors_url":"https://api.github.com/repos/etcd-io/etcd/contributors","subscribers_url":"https://api.github.com/repos/etcd-io/etcd/subscribers","subscription_url":"https://api.github.com/repos/etcd-io/etcd/subscription","commits_url":"https://api.github.com/repos/etcd-io/etcd/commits{/sha}","git_commits_url":"https://api.github.com/repos/etcd-io/etcd/git/commits{/sha}","comments_url":"https://api.github.com/repos/etcd-io/etcd/comments{/number}","issue_comment_url":"https://api.github.com/repos/etcd-io/etcd/issues/comments{/number}","contents_url":"https://api.github.com/repos/etcd-io/etcd/contents/{+path}","compare_url":"https://api.github.com/repos/etcd-io/etcd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/etcd-io/etcd/merges","archive_url":"https://api.github.com/repos/etcd-io/etcd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/etcd-io/etcd/downloads","issues_url":"https://api.github.com/repos/etcd-io/etcd/issues{/number}","pulls_url":"https://api.github.com/repos/etcd-io/etcd/pulls{/number}","milestones_url":"https://api.github.com/repos/etcd-io/etcd/milestones{/number}","notifications_url":"https://api.github.com/repos/etcd-io/etcd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/etcd-io/etcd/labels{/name}","releases_url":"https://api.github.com/repos/etcd-io/etcd/releases{/id}","deployments_url":"https://api.github.com/repos/etcd-io/etcd/deployments","created_at":"2013-07-06T21:57:21Z","updated_at":"2025-11-09T18:54:09Z","pushed_at":"2025-11-09T18:54:04Z","git_url":"git://github.com/etcd-io/etcd.git","ssh_url":"git@github.com:etcd-io/etcd.git","clone_url":"https://github.com/etcd-io/etcd.git","svn_url":"https://github.com/etcd-io/etcd","homepage":"https://etcd.io","size":93104,"stargazers_count":50733,"watchers_count":50733,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":10207,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":225,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cncf","consensus","database","distributed-database","distributed-systems","etcd","go","key-value","kubernetes","raft"],"visibility":"public","forks":10207,"open_issues":225,"watchers":50733,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/etcd-io/etcd/pulls/12762","html_url":"https://github.com/etcd-io/etcd/pull/12762","diff_url":"https://github.com/etcd-io/etcd/pull/12762.diff","patch_url":"https://github.com/etcd-io/etcd/pull/12762.patch","merged_at":"2021-03-23T14:57:31Z"},"body":"This PR tries to address #12680. Instead of dropping requests while Leader didn't committed first log in the term, it records them and process afer commit (1).\r\n\r\n#12680 could be also fixed by another approach: retry mechanism in the following code (2)\r\n\r\nhttps://github.com/etcd-io/etcd/blob/3ead91ca3edf66112d56c453169343515bba71c3/server/etcdserver/v3_server.go#L752-L783 \r\n\r\nWhile this PR is proposal for (1), I'd like to introduce PR for (2) as well. In my opinion implementing (1) alone, (2) alone and both seems reasonable and I'd love to hear what you think.\r\n\r\nEdit: \r\nImplementation of (2) can be found in #12780","reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/12762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/etcd-io/etcd/issues/12762/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/796857938","html_url":"https://github.com/etcd-io/etcd/issues/12680#issuecomment-796857938","issue_url":"https://api.github.com/repos/etcd-io/etcd/issues/12680","id":796857938,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Njg1NzkzOA==","user":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T16:19:42Z","updated_at":"2021-03-11T16:19:42Z","body":"Hi @Cjen1 ,\r\n\r\nI've just submitted PR which might fix your issue. Once you have time, please have a look at https://github.com/etcd-io/etcd/pull/12762. ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/796857938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4446071439,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDQ0NjA3MTQzOQ==","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/4446071439","actor":{"login":"Cjen1","id":11444677,"node_id":"MDQ6VXNlcjExNDQ0Njc3","avatar_url":"https://avatars.githubusercontent.com/u/11444677?v=4","gravatar_id":"","url":"https://api.github.com/users/Cjen1","html_url":"https://github.com/Cjen1","followers_url":"https://api.github.com/users/Cjen1/followers","following_url":"https://api.github.com/users/Cjen1/following{/other_user}","gists_url":"https://api.github.com/users/Cjen1/gists{/gist_id}","starred_url":"https://api.github.com/users/Cjen1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cjen1/subscriptions","organizations_url":"https://api.github.com/users/Cjen1/orgs","repos_url":"https://api.github.com/users/Cjen1/repos","events_url":"https://api.github.com/users/Cjen1/events{/privacy}","received_events_url":"https://api.github.com/users/Cjen1/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-03-11T16:19:42Z","performed_via_github_app":null},{"id":4446071446,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ0NDYwNzE0NDY=","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/4446071446","actor":{"login":"Cjen1","id":11444677,"node_id":"MDQ6VXNlcjExNDQ0Njc3","avatar_url":"https://avatars.githubusercontent.com/u/11444677?v=4","gravatar_id":"","url":"https://api.github.com/users/Cjen1","html_url":"https://github.com/Cjen1","followers_url":"https://api.github.com/users/Cjen1/followers","following_url":"https://api.github.com/users/Cjen1/following{/other_user}","gists_url":"https://api.github.com/users/Cjen1/gists{/gist_id}","starred_url":"https://api.github.com/users/Cjen1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cjen1/subscriptions","organizations_url":"https://api.github.com/users/Cjen1/orgs","repos_url":"https://api.github.com/users/Cjen1/repos","events_url":"https://api.github.com/users/Cjen1/events{/privacy}","received_events_url":"https://api.github.com/users/Cjen1/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-03-11T16:19:42Z","performed_via_github_app":null},{"id":4449430069,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ0NDk0MzAwNjk=","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/4449430069","actor":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"5fc59ae393e5f3e80c820d57633e45d5534b9ed7","commit_url":"https://api.github.com/repos/wpedrak/etcd/commits/5fc59ae393e5f3e80c820d57633e45d5534b9ed7","created_at":"2021-03-12T08:38:06Z","performed_via_github_app":null},{"id":4463727551,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ0NjM3Mjc1NTE=","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/4463727551","actor":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6d492e47b232f64dd36d1dd933b31d1ba614ef84","commit_url":"https://api.github.com/repos/wpedrak/etcd/commits/6d492e47b232f64dd36d1dd933b31d1ba614ef84","created_at":"2021-03-16T10:41:02Z","performed_via_github_app":null},{"actor":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T10:52:35Z","updated_at":"2021-03-16T10:52:35Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/12780","repository_url":"https://api.github.com/repos/etcd-io/etcd","labels_url":"https://api.github.com/repos/etcd-io/etcd/issues/12780/labels{/name}","comments_url":"https://api.github.com/repos/etcd-io/etcd/issues/12780/comments","events_url":"https://api.github.com/repos/etcd-io/etcd/issues/12780/events","html_url":"https://github.com/etcd-io/etcd/pull/12780","id":832667625,"node_id":"MDExOlB1bGxSZXF1ZXN0NTkzNzg4ODUx","number":12780,"title":"Read index retry","user":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-03-16T10:52:35Z","updated_at":"2021-03-23T14:04:21Z","closed_at":"2021-03-23T12:47:41Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":11225014,"node_id":"MDEwOlJlcG9zaXRvcnkxMTIyNTAxNA==","name":"etcd","full_name":"etcd-io/etcd","private":false,"owner":{"login":"etcd-io","id":41972792,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQxOTcyNzky","avatar_url":"https://avatars.githubusercontent.com/u/41972792?v=4","gravatar_id":"","url":"https://api.github.com/users/etcd-io","html_url":"https://github.com/etcd-io","followers_url":"https://api.github.com/users/etcd-io/followers","following_url":"https://api.github.com/users/etcd-io/following{/other_user}","gists_url":"https://api.github.com/users/etcd-io/gists{/gist_id}","starred_url":"https://api.github.com/users/etcd-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/etcd-io/subscriptions","organizations_url":"https://api.github.com/users/etcd-io/orgs","repos_url":"https://api.github.com/users/etcd-io/repos","events_url":"https://api.github.com/users/etcd-io/events{/privacy}","received_events_url":"https://api.github.com/users/etcd-io/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/etcd-io/etcd","description":"Distributed reliable key-value store for the most critical data of a distributed system","fork":false,"url":"https://api.github.com/repos/etcd-io/etcd","forks_url":"https://api.github.com/repos/etcd-io/etcd/forks","keys_url":"https://api.github.com/repos/etcd-io/etcd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/etcd-io/etcd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/etcd-io/etcd/teams","hooks_url":"https://api.github.com/repos/etcd-io/etcd/hooks","issue_events_url":"https://api.github.com/repos/etcd-io/etcd/issues/events{/number}","events_url":"https://api.github.com/repos/etcd-io/etcd/events","assignees_url":"https://api.github.com/repos/etcd-io/etcd/assignees{/user}","branches_url":"https://api.github.com/repos/etcd-io/etcd/branches{/branch}","tags_url":"https://api.github.com/repos/etcd-io/etcd/tags","blobs_url":"https://api.github.com/repos/etcd-io/etcd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/etcd-io/etcd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/etcd-io/etcd/git/refs{/sha}","trees_url":"https://api.github.com/repos/etcd-io/etcd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/etcd-io/etcd/statuses/{sha}","languages_url":"https://api.github.com/repos/etcd-io/etcd/languages","stargazers_url":"https://api.github.com/repos/etcd-io/etcd/stargazers","contributors_url":"https://api.github.com/repos/etcd-io/etcd/contributors","subscribers_url":"https://api.github.com/repos/etcd-io/etcd/subscribers","subscription_url":"https://api.github.com/repos/etcd-io/etcd/subscription","commits_url":"https://api.github.com/repos/etcd-io/etcd/commits{/sha}","git_commits_url":"https://api.github.com/repos/etcd-io/etcd/git/commits{/sha}","comments_url":"https://api.github.com/repos/etcd-io/etcd/comments{/number}","issue_comment_url":"https://api.github.com/repos/etcd-io/etcd/issues/comments{/number}","contents_url":"https://api.github.com/repos/etcd-io/etcd/contents/{+path}","compare_url":"https://api.github.com/repos/etcd-io/etcd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/etcd-io/etcd/merges","archive_url":"https://api.github.com/repos/etcd-io/etcd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/etcd-io/etcd/downloads","issues_url":"https://api.github.com/repos/etcd-io/etcd/issues{/number}","pulls_url":"https://api.github.com/repos/etcd-io/etcd/pulls{/number}","milestones_url":"https://api.github.com/repos/etcd-io/etcd/milestones{/number}","notifications_url":"https://api.github.com/repos/etcd-io/etcd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/etcd-io/etcd/labels{/name}","releases_url":"https://api.github.com/repos/etcd-io/etcd/releases{/id}","deployments_url":"https://api.github.com/repos/etcd-io/etcd/deployments","created_at":"2013-07-06T21:57:21Z","updated_at":"2025-11-09T18:54:09Z","pushed_at":"2025-11-09T18:54:04Z","git_url":"git://github.com/etcd-io/etcd.git","ssh_url":"git@github.com:etcd-io/etcd.git","clone_url":"https://github.com/etcd-io/etcd.git","svn_url":"https://github.com/etcd-io/etcd","homepage":"https://etcd.io","size":93104,"stargazers_count":50733,"watchers_count":50733,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":10207,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":225,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cncf","consensus","database","distributed-database","distributed-systems","etcd","go","key-value","kubernetes","raft"],"visibility":"public","forks":10207,"open_issues":225,"watchers":50733,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/etcd-io/etcd/pulls/12780","html_url":"https://github.com/etcd-io/etcd/pull/12780","diff_url":"https://github.com/etcd-io/etcd/pull/12780.diff","patch_url":"https://github.com/etcd-io/etcd/pull/12780.patch","merged_at":"2021-03-23T12:47:41Z"},"body":"It is second approach (with first being #12762) to solve #12680\r\n\r\nThis PR is composed of 2 commit, first being refactor of l-read loop and second being implementation of retry mechanism itself.\r\n\r\nDrawbacks of this change (would like to seek your opinion on it):\r\n- retry time is hardcoded as 500ms\r\n- current 7s timeout resulting in error can become up to 7.5s depending on execution flow","reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/12780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/etcd-io/etcd/issues/12780/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":4464734952,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ0NjQ3MzQ5NTI=","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/4464734952","actor":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1df6caf21f63e280207439d451fa38811f934d47","commit_url":"https://api.github.com/repos/wpedrak/etcd/commits/1df6caf21f63e280207439d451fa38811f934d47","created_at":"2021-03-16T14:01:34Z","performed_via_github_app":null},{"id":4465318161,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ0NjUzMTgxNjE=","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/4465318161","actor":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e9779231ec81a79383208d92fde457424454b51d","commit_url":"https://api.github.com/repos/wpedrak/etcd/commits/e9779231ec81a79383208d92fde457424454b51d","created_at":"2021-03-16T15:34:28Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/801044122","html_url":"https://github.com/etcd-io/etcd/issues/12680#issuecomment-801044122","issue_url":"https://api.github.com/repos/etcd-io/etcd/issues/12680","id":801044122,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMTA0NDEyMg==","user":{"login":"Cjen1","id":11444677,"node_id":"MDQ6VXNlcjExNDQ0Njc3","avatar_url":"https://avatars.githubusercontent.com/u/11444677?v=4","gravatar_id":"","url":"https://api.github.com/users/Cjen1","html_url":"https://github.com/Cjen1","followers_url":"https://api.github.com/users/Cjen1/followers","following_url":"https://api.github.com/users/Cjen1/following{/other_user}","gists_url":"https://api.github.com/users/Cjen1/gists{/gist_id}","starred_url":"https://api.github.com/users/Cjen1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cjen1/subscriptions","organizations_url":"https://api.github.com/users/Cjen1/orgs","repos_url":"https://api.github.com/users/Cjen1/repos","events_url":"https://api.github.com/users/Cjen1/events{/privacy}","received_events_url":"https://api.github.com/users/Cjen1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-17T12:31:13Z","updated_at":"2021-03-17T12:31:13Z","body":"@wpedrak below are repeats of the test using the fixes. It appears that they work as expected.\r\n\r\nAs a minor point, I don't think that the current build from source instructions are correct, I had a devil of a time building your branches.\r\nWhat worked was abusing `make compile-with-docker-test` to have a working build environment.\r\n\r\nFor interpretation's sake, there are three repeats of each of the tests (etcd, etcd with postponing the reads, etcd with retrying the reads after 500ms).\r\n\r\n![visualization](https://user-images.githubusercontent.com/11444677/111467241-1d93ed80-871c-11eb-9b7d-2ef360c0620d.png)\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/801044122/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Cjen1","id":11444677,"node_id":"MDQ6VXNlcjExNDQ0Njc3","avatar_url":"https://avatars.githubusercontent.com/u/11444677?v=4","gravatar_id":"","url":"https://api.github.com/users/Cjen1","html_url":"https://github.com/Cjen1","followers_url":"https://api.github.com/users/Cjen1/followers","following_url":"https://api.github.com/users/Cjen1/following{/other_user}","gists_url":"https://api.github.com/users/Cjen1/gists{/gist_id}","starred_url":"https://api.github.com/users/Cjen1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cjen1/subscriptions","organizations_url":"https://api.github.com/users/Cjen1/orgs","repos_url":"https://api.github.com/users/Cjen1/repos","events_url":"https://api.github.com/users/Cjen1/events{/privacy}","received_events_url":"https://api.github.com/users/Cjen1/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4469939661,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDQ2OTkzOTY2MQ==","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/4469939661","actor":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-03-17T12:31:13Z","performed_via_github_app":null},{"id":4469939664,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ0Njk5Mzk2NjQ=","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/4469939664","actor":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-03-17T12:31:13Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/801084068","html_url":"https://github.com/etcd-io/etcd/issues/12680#issuecomment-801084068","issue_url":"https://api.github.com/repos/etcd-io/etcd/issues/12680","id":801084068,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMTA4NDA2OA==","user":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-17T13:33:48Z","updated_at":"2021-03-17T13:33:48Z","body":"@Cjen1 great to hear that it works for you. Could you elaborate on build issues you encountered? I've just did\r\n```\r\ngit clone git@github.com:wpedrak/etcd.git tmp-etcd\r\ncd tmp-etcd\r\ngit checkout read_index_retry\r\n./build.sh\r\n```\r\nand it went through without any issue.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/801084068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wpedrak","id":24903543,"node_id":"MDQ6VXNlcjI0OTAzNTQz","avatar_url":"https://avatars.githubusercontent.com/u/24903543?v=4","gravatar_id":"","url":"https://api.github.com/users/wpedrak","html_url":"https://github.com/wpedrak","followers_url":"https://api.github.com/users/wpedrak/followers","following_url":"https://api.github.com/users/wpedrak/following{/other_user}","gists_url":"https://api.github.com/users/wpedrak/gists{/gist_id}","starred_url":"https://api.github.com/users/wpedrak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wpedrak/subscriptions","organizations_url":"https://api.github.com/users/wpedrak/orgs","repos_url":"https://api.github.com/users/wpedrak/repos","events_url":"https://api.github.com/users/wpedrak/events{/privacy}","received_events_url":"https://api.github.com/users/wpedrak/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4470260763,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDQ3MDI2MDc2Mw==","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/4470260763","actor":{"login":"Cjen1","id":11444677,"node_id":"MDQ6VXNlcjExNDQ0Njc3","avatar_url":"https://avatars.githubusercontent.com/u/11444677?v=4","gravatar_id":"","url":"https://api.github.com/users/Cjen1","html_url":"https://github.com/Cjen1","followers_url":"https://api.github.com/users/Cjen1/followers","following_url":"https://api.github.com/users/Cjen1/following{/other_user}","gists_url":"https://api.github.com/users/Cjen1/gists{/gist_id}","starred_url":"https://api.github.com/users/Cjen1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cjen1/subscriptions","organizations_url":"https://api.github.com/users/Cjen1/orgs","repos_url":"https://api.github.com/users/Cjen1/repos","events_url":"https://api.github.com/users/Cjen1/events{/privacy}","received_events_url":"https://api.github.com/users/Cjen1/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-03-17T13:33:48Z","performed_via_github_app":null},{"id":4470260771,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ0NzAyNjA3NzE=","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/4470260771","actor":{"login":"Cjen1","id":11444677,"node_id":"MDQ6VXNlcjExNDQ0Njc3","avatar_url":"https://avatars.githubusercontent.com/u/11444677?v=4","gravatar_id":"","url":"https://api.github.com/users/Cjen1","html_url":"https://github.com/Cjen1","followers_url":"https://api.github.com/users/Cjen1/followers","following_url":"https://api.github.com/users/Cjen1/following{/other_user}","gists_url":"https://api.github.com/users/Cjen1/gists{/gist_id}","starred_url":"https://api.github.com/users/Cjen1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cjen1/subscriptions","organizations_url":"https://api.github.com/users/Cjen1/orgs","repos_url":"https://api.github.com/users/Cjen1/repos","events_url":"https://api.github.com/users/Cjen1/events{/privacy}","received_events_url":"https://api.github.com/users/Cjen1/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-03-17T13:33:48Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/801099435","html_url":"https://github.com/etcd-io/etcd/issues/12680#issuecomment-801099435","issue_url":"https://api.github.com/repos/etcd-io/etcd/issues/12680","id":801099435,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMTA5OTQzNQ==","user":{"login":"Cjen1","id":11444677,"node_id":"MDQ6VXNlcjExNDQ0Njc3","avatar_url":"https://avatars.githubusercontent.com/u/11444677?v=4","gravatar_id":"","url":"https://api.github.com/users/Cjen1","html_url":"https://github.com/Cjen1","followers_url":"https://api.github.com/users/Cjen1/followers","following_url":"https://api.github.com/users/Cjen1/following{/other_user}","gists_url":"https://api.github.com/users/Cjen1/gists{/gist_id}","starred_url":"https://api.github.com/users/Cjen1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cjen1/subscriptions","organizations_url":"https://api.github.com/users/Cjen1/orgs","repos_url":"https://api.github.com/users/Cjen1/repos","events_url":"https://api.github.com/users/Cjen1/events{/privacy}","received_events_url":"https://api.github.com/users/Cjen1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-17T13:54:12Z","updated_at":"2021-03-17T13:54:12Z","body":"I was getting a build directory wasn't `etcd/v3` error.\r\nSpecifically its the first check in `scripts/test_lib.sh`\r\n```\r\nif [[ \"$(go list)\" != \"${ROOT_MODULE}/v3\" ]]; then\r\n  echo \"must be run from '${ROOT_MODULE}/v3' module directory\"\r\n  exit 255\r\nfi\r\n```\r\n\r\n(this was from within the `~/go/go.etcd.io/etcd` folder with your branch checked out).\r\n\r\nI think it might have been related to using an older version of golang (v1.11.5), but I don't know enough about go's tooling to fix it.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/801099435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Cjen1","id":11444677,"node_id":"MDQ6VXNlcjExNDQ0Njc3","avatar_url":"https://avatars.githubusercontent.com/u/11444677?v=4","gravatar_id":"","url":"https://api.github.com/users/Cjen1","html_url":"https://github.com/Cjen1","followers_url":"https://api.github.com/users/Cjen1/followers","following_url":"https://api.github.com/users/Cjen1/following{/other_user}","gists_url":"https://api.github.com/users/Cjen1/gists{/gist_id}","starred_url":"https://api.github.com/users/Cjen1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cjen1/subscriptions","organizations_url":"https://api.github.com/users/Cjen1/orgs","repos_url":"https://api.github.com/users/Cjen1/repos","events_url":"https://api.github.com/users/Cjen1/events{/privacy}","received_events_url":"https://api.github.com/users/Cjen1/received_events","type":"User","user_view_type":"public","site_admin":false}}]