[{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/632386043","html_url":"https://github.com/etcd-io/etcd/issues/11930#issuecomment-632386043","issue_url":"https://api.github.com/repos/etcd-io/etcd/issues/11930","id":632386043,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMjM4NjA0Mw==","user":{"login":"gyuho","id":6799218,"node_id":"MDQ6VXNlcjY3OTkyMTg=","avatar_url":"https://avatars.githubusercontent.com/u/6799218?v=4","gravatar_id":"","url":"https://api.github.com/users/gyuho","html_url":"https://github.com/gyuho","followers_url":"https://api.github.com/users/gyuho/followers","following_url":"https://api.github.com/users/gyuho/following{/other_user}","gists_url":"https://api.github.com/users/gyuho/gists{/gist_id}","starred_url":"https://api.github.com/users/gyuho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gyuho/subscriptions","organizations_url":"https://api.github.com/users/gyuho/orgs","repos_url":"https://api.github.com/users/gyuho/repos","events_url":"https://api.github.com/users/gyuho/events{/privacy}","received_events_url":"https://api.github.com/users/gyuho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-21T22:53:05Z","updated_at":"2020-05-21T22:53:05Z","body":">  implementation is straightforward as the underlying bbolt already exposes options for this, NoSync \r\n\r\nYeah think it can be exposed as an unsafe option `--unsafe-no-sync`?\r\n\r\netcd also writes WAL (no option to disable).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/comments/632386043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gyuho","id":6799218,"node_id":"MDQ6VXNlcjY3OTkyMTg=","avatar_url":"https://avatars.githubusercontent.com/u/6799218?v=4","gravatar_id":"","url":"https://api.github.com/users/gyuho","html_url":"https://github.com/gyuho","followers_url":"https://api.github.com/users/gyuho/followers","following_url":"https://api.github.com/users/gyuho/following{/other_user}","gists_url":"https://api.github.com/users/gyuho/gists{/gist_id}","starred_url":"https://api.github.com/users/gyuho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gyuho/subscriptions","organizations_url":"https://api.github.com/users/gyuho/orgs","repos_url":"https://api.github.com/users/gyuho/repos","events_url":"https://api.github.com/users/gyuho/events{/privacy}","received_events_url":"https://api.github.com/users/gyuho/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3371425286,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDMzNzE0MjUyODY=","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/3371425286","actor":{"login":"crawshaw","id":161319,"node_id":"MDQ6VXNlcjE2MTMxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/161319?v=4","gravatar_id":"","url":"https://api.github.com/users/crawshaw","html_url":"https://github.com/crawshaw","followers_url":"https://api.github.com/users/crawshaw/followers","following_url":"https://api.github.com/users/crawshaw/following{/other_user}","gists_url":"https://api.github.com/users/crawshaw/gists{/gist_id}","starred_url":"https://api.github.com/users/crawshaw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crawshaw/subscriptions","organizations_url":"https://api.github.com/users/crawshaw/orgs","repos_url":"https://api.github.com/users/crawshaw/repos","events_url":"https://api.github.com/users/crawshaw/events{/privacy}","received_events_url":"https://api.github.com/users/crawshaw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"73d883a69a70737076b142f18dde848a77456134","commit_url":"https://api.github.com/repos/crawshaw/etcd/commits/73d883a69a70737076b142f18dde848a77456134","created_at":"2020-05-25T23:19:00Z","performed_via_github_app":null},{"id":3371426066,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDMzNzE0MjYwNjY=","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/3371426066","actor":{"login":"crawshaw","id":161319,"node_id":"MDQ6VXNlcjE2MTMxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/161319?v=4","gravatar_id":"","url":"https://api.github.com/users/crawshaw","html_url":"https://github.com/crawshaw","followers_url":"https://api.github.com/users/crawshaw/followers","following_url":"https://api.github.com/users/crawshaw/following{/other_user}","gists_url":"https://api.github.com/users/crawshaw/gists{/gist_id}","starred_url":"https://api.github.com/users/crawshaw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crawshaw/subscriptions","organizations_url":"https://api.github.com/users/crawshaw/orgs","repos_url":"https://api.github.com/users/crawshaw/repos","events_url":"https://api.github.com/users/crawshaw/events{/privacy}","received_events_url":"https://api.github.com/users/crawshaw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"47c9790205e7ad77a72ad7ebfcba3f51d70c138b","commit_url":"https://api.github.com/repos/crawshaw/etcd/commits/47c9790205e7ad77a72ad7ebfcba3f51d70c138b","created_at":"2020-05-25T23:19:48Z","performed_via_github_app":null},{"actor":{"login":"crawshaw","id":161319,"node_id":"MDQ6VXNlcjE2MTMxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/161319?v=4","gravatar_id":"","url":"https://api.github.com/users/crawshaw","html_url":"https://github.com/crawshaw","followers_url":"https://api.github.com/users/crawshaw/followers","following_url":"https://api.github.com/users/crawshaw/following{/other_user}","gists_url":"https://api.github.com/users/crawshaw/gists{/gist_id}","starred_url":"https://api.github.com/users/crawshaw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crawshaw/subscriptions","organizations_url":"https://api.github.com/users/crawshaw/orgs","repos_url":"https://api.github.com/users/crawshaw/repos","events_url":"https://api.github.com/users/crawshaw/events{/privacy}","received_events_url":"https://api.github.com/users/crawshaw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-25T23:21:42Z","updated_at":"2020-05-25T23:21:42Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/11946","repository_url":"https://api.github.com/repos/etcd-io/etcd","labels_url":"https://api.github.com/repos/etcd-io/etcd/issues/11946/labels{/name}","comments_url":"https://api.github.com/repos/etcd-io/etcd/issues/11946/comments","events_url":"https://api.github.com/repos/etcd-io/etcd/issues/11946/events","html_url":"https://github.com/etcd-io/etcd/pull/11946","id":624517893,"node_id":"MDExOlB1bGxSZXF1ZXN0NDIyOTIyMjI0","number":11946,"title":"etcdserver, et al: add --unsafe-no-fsync flag","user":{"login":"crawshaw","id":161319,"node_id":"MDQ6VXNlcjE2MTMxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/161319?v=4","gravatar_id":"","url":"https://api.github.com/users/crawshaw","html_url":"https://github.com/crawshaw","followers_url":"https://api.github.com/users/crawshaw/followers","following_url":"https://api.github.com/users/crawshaw/following{/other_user}","gists_url":"https://api.github.com/users/crawshaw/gists{/gist_id}","starred_url":"https://api.github.com/users/crawshaw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crawshaw/subscriptions","organizations_url":"https://api.github.com/users/crawshaw/orgs","repos_url":"https://api.github.com/users/crawshaw/repos","events_url":"https://api.github.com/users/crawshaw/events{/privacy}","received_events_url":"https://api.github.com/users/crawshaw/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-05-25T23:21:07Z","updated_at":"2020-06-06T01:30:39Z","closed_at":"2020-05-27T16:00:32Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":11225014,"node_id":"MDEwOlJlcG9zaXRvcnkxMTIyNTAxNA==","name":"etcd","full_name":"etcd-io/etcd","private":false,"owner":{"login":"etcd-io","id":41972792,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQxOTcyNzky","avatar_url":"https://avatars.githubusercontent.com/u/41972792?v=4","gravatar_id":"","url":"https://api.github.com/users/etcd-io","html_url":"https://github.com/etcd-io","followers_url":"https://api.github.com/users/etcd-io/followers","following_url":"https://api.github.com/users/etcd-io/following{/other_user}","gists_url":"https://api.github.com/users/etcd-io/gists{/gist_id}","starred_url":"https://api.github.com/users/etcd-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/etcd-io/subscriptions","organizations_url":"https://api.github.com/users/etcd-io/orgs","repos_url":"https://api.github.com/users/etcd-io/repos","events_url":"https://api.github.com/users/etcd-io/events{/privacy}","received_events_url":"https://api.github.com/users/etcd-io/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/etcd-io/etcd","description":"Distributed reliable key-value store for the most critical data of a distributed system","fork":false,"url":"https://api.github.com/repos/etcd-io/etcd","forks_url":"https://api.github.com/repos/etcd-io/etcd/forks","keys_url":"https://api.github.com/repos/etcd-io/etcd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/etcd-io/etcd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/etcd-io/etcd/teams","hooks_url":"https://api.github.com/repos/etcd-io/etcd/hooks","issue_events_url":"https://api.github.com/repos/etcd-io/etcd/issues/events{/number}","events_url":"https://api.github.com/repos/etcd-io/etcd/events","assignees_url":"https://api.github.com/repos/etcd-io/etcd/assignees{/user}","branches_url":"https://api.github.com/repos/etcd-io/etcd/branches{/branch}","tags_url":"https://api.github.com/repos/etcd-io/etcd/tags","blobs_url":"https://api.github.com/repos/etcd-io/etcd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/etcd-io/etcd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/etcd-io/etcd/git/refs{/sha}","trees_url":"https://api.github.com/repos/etcd-io/etcd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/etcd-io/etcd/statuses/{sha}","languages_url":"https://api.github.com/repos/etcd-io/etcd/languages","stargazers_url":"https://api.github.com/repos/etcd-io/etcd/stargazers","contributors_url":"https://api.github.com/repos/etcd-io/etcd/contributors","subscribers_url":"https://api.github.com/repos/etcd-io/etcd/subscribers","subscription_url":"https://api.github.com/repos/etcd-io/etcd/subscription","commits_url":"https://api.github.com/repos/etcd-io/etcd/commits{/sha}","git_commits_url":"https://api.github.com/repos/etcd-io/etcd/git/commits{/sha}","comments_url":"https://api.github.com/repos/etcd-io/etcd/comments{/number}","issue_comment_url":"https://api.github.com/repos/etcd-io/etcd/issues/comments{/number}","contents_url":"https://api.github.com/repos/etcd-io/etcd/contents/{+path}","compare_url":"https://api.github.com/repos/etcd-io/etcd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/etcd-io/etcd/merges","archive_url":"https://api.github.com/repos/etcd-io/etcd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/etcd-io/etcd/downloads","issues_url":"https://api.github.com/repos/etcd-io/etcd/issues{/number}","pulls_url":"https://api.github.com/repos/etcd-io/etcd/pulls{/number}","milestones_url":"https://api.github.com/repos/etcd-io/etcd/milestones{/number}","notifications_url":"https://api.github.com/repos/etcd-io/etcd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/etcd-io/etcd/labels{/name}","releases_url":"https://api.github.com/repos/etcd-io/etcd/releases{/id}","deployments_url":"https://api.github.com/repos/etcd-io/etcd/deployments","created_at":"2013-07-06T21:57:21Z","updated_at":"2025-11-09T18:54:09Z","pushed_at":"2025-11-09T18:54:04Z","git_url":"git://github.com/etcd-io/etcd.git","ssh_url":"git@github.com:etcd-io/etcd.git","clone_url":"https://github.com/etcd-io/etcd.git","svn_url":"https://github.com/etcd-io/etcd","homepage":"https://etcd.io","size":93104,"stargazers_count":50733,"watchers_count":50733,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":10207,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":225,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cncf","consensus","database","distributed-database","distributed-systems","etcd","go","key-value","kubernetes","raft"],"visibility":"public","forks":10207,"open_issues":225,"watchers":50733,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/etcd-io/etcd/pulls/11946","html_url":"https://github.com/etcd-io/etcd/pull/11946","diff_url":"https://github.com/etcd-io/etcd/pull/11946.diff","patch_url":"https://github.com/etcd-io/etcd/pull/11946.patch","merged_at":"2020-05-27T16:00:32Z"},"body":"This makes it possible to run an etcd node for testing and development\r\nwithout placing lots of load on the file system.\r\n\r\nFixes #11930","reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/11946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/etcd-io/etcd/issues/11946/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":3371428517,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDMzNzE0Mjg1MTc=","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/3371428517","actor":{"login":"crawshaw","id":161319,"node_id":"MDQ6VXNlcjE2MTMxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/161319?v=4","gravatar_id":"","url":"https://api.github.com/users/crawshaw","html_url":"https://github.com/crawshaw","followers_url":"https://api.github.com/users/crawshaw/followers","following_url":"https://api.github.com/users/crawshaw/following{/other_user}","gists_url":"https://api.github.com/users/crawshaw/gists{/gist_id}","starred_url":"https://api.github.com/users/crawshaw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crawshaw/subscriptions","organizations_url":"https://api.github.com/users/crawshaw/orgs","repos_url":"https://api.github.com/users/crawshaw/repos","events_url":"https://api.github.com/users/crawshaw/events{/privacy}","received_events_url":"https://api.github.com/users/crawshaw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"66cb045d47cca597266fc246c7e8ce9b4bd105ba","commit_url":"https://api.github.com/repos/crawshaw/etcd/commits/66cb045d47cca597266fc246c7e8ce9b4bd105ba","created_at":"2020-05-25T23:22:07Z","performed_via_github_app":null},{"id":3378879419,"node_id":"MDExOkNsb3NlZEV2ZW50MzM3ODg3OTQxOQ==","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/3378879419","actor":{"login":"gyuho","id":6799218,"node_id":"MDQ6VXNlcjY3OTkyMTg=","avatar_url":"https://avatars.githubusercontent.com/u/6799218?v=4","gravatar_id":"","url":"https://api.github.com/users/gyuho","html_url":"https://github.com/gyuho","followers_url":"https://api.github.com/users/gyuho/followers","following_url":"https://api.github.com/users/gyuho/following{/other_user}","gists_url":"https://api.github.com/users/gyuho/gists{/gist_id}","starred_url":"https://api.github.com/users/gyuho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gyuho/subscriptions","organizations_url":"https://api.github.com/users/gyuho/orgs","repos_url":"https://api.github.com/users/gyuho/repos","events_url":"https://api.github.com/users/gyuho/events{/privacy}","received_events_url":"https://api.github.com/users/gyuho/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-05-27T16:00:32Z","state_reason":null,"performed_via_github_app":null},{"id":3409502260,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM0MDk1MDIyNjA=","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/3409502260","actor":{"login":"jpbetz","id":523590,"node_id":"MDQ6VXNlcjUyMzU5MA==","avatar_url":"https://avatars.githubusercontent.com/u/523590?v=4","gravatar_id":"","url":"https://api.github.com/users/jpbetz","html_url":"https://github.com/jpbetz","followers_url":"https://api.github.com/users/jpbetz/followers","following_url":"https://api.github.com/users/jpbetz/following{/other_user}","gists_url":"https://api.github.com/users/jpbetz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpbetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpbetz/subscriptions","organizations_url":"https://api.github.com/users/jpbetz/orgs","repos_url":"https://api.github.com/users/jpbetz/repos","events_url":"https://api.github.com/users/jpbetz/events{/privacy}","received_events_url":"https://api.github.com/users/jpbetz/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2d89becdb9c412e60c2ac91799d7c39895e455fd","commit_url":"https://api.github.com/repos/jpbetz/etcd/commits/2d89becdb9c412e60c2ac91799d7c39895e455fd","created_at":"2020-06-05T03:15:07Z","performed_via_github_app":null},{"id":3409514272,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM0MDk1MTQyNzI=","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/3409514272","actor":{"login":"jpbetz","id":523590,"node_id":"MDQ6VXNlcjUyMzU5MA==","avatar_url":"https://avatars.githubusercontent.com/u/523590?v=4","gravatar_id":"","url":"https://api.github.com/users/jpbetz","html_url":"https://github.com/jpbetz","followers_url":"https://api.github.com/users/jpbetz/followers","following_url":"https://api.github.com/users/jpbetz/following{/other_user}","gists_url":"https://api.github.com/users/jpbetz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpbetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpbetz/subscriptions","organizations_url":"https://api.github.com/users/jpbetz/orgs","repos_url":"https://api.github.com/users/jpbetz/repos","events_url":"https://api.github.com/users/jpbetz/events{/privacy}","received_events_url":"https://api.github.com/users/jpbetz/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"78f67988aa40106299b9c4918ba9f22eb2adc6e5","commit_url":"https://api.github.com/repos/jpbetz/etcd/commits/78f67988aa40106299b9c4918ba9f22eb2adc6e5","created_at":"2020-06-05T03:21:55Z","performed_via_github_app":null},{"actor":{"login":"liggitt","id":980082,"node_id":"MDQ6VXNlcjk4MDA4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/980082?v=4","gravatar_id":"","url":"https://api.github.com/users/liggitt","html_url":"https://github.com/liggitt","followers_url":"https://api.github.com/users/liggitt/followers","following_url":"https://api.github.com/users/liggitt/following{/other_user}","gists_url":"https://api.github.com/users/liggitt/gists{/gist_id}","starred_url":"https://api.github.com/users/liggitt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liggitt/subscriptions","organizations_url":"https://api.github.com/users/liggitt/orgs","repos_url":"https://api.github.com/users/liggitt/repos","events_url":"https://api.github.com/users/liggitt/events{/privacy}","received_events_url":"https://api.github.com/users/liggitt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T16:36:40Z","updated_at":"2022-08-26T16:36:40Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/14370","repository_url":"https://api.github.com/repos/etcd-io/etcd","labels_url":"https://api.github.com/repos/etcd-io/etcd/issues/14370/labels{/name}","comments_url":"https://api.github.com/repos/etcd-io/etcd/issues/14370/comments","events_url":"https://api.github.com/repos/etcd-io/etcd/issues/14370/events","html_url":"https://github.com/etcd-io/etcd/issues/14370","id":1346593247,"node_id":"I_kwDOAKtHts5QQ2Hf","number":14370,"title":"Durability API guarantee broken in single node cluster","user":{"login":"hasethuraman","id":10446093,"node_id":"MDQ6VXNlcjEwNDQ2MDkz","avatar_url":"https://avatars.githubusercontent.com/u/10446093?v=4","gravatar_id":"","url":"https://api.github.com/users/hasethuraman","html_url":"https://github.com/hasethuraman","followers_url":"https://api.github.com/users/hasethuraman/followers","following_url":"https://api.github.com/users/hasethuraman/following{/other_user}","gists_url":"https://api.github.com/users/hasethuraman/gists{/gist_id}","starred_url":"https://api.github.com/users/hasethuraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hasethuraman/subscriptions","organizations_url":"https://api.github.com/users/hasethuraman/orgs","repos_url":"https://api.github.com/users/hasethuraman/repos","events_url":"https://api.github.com/users/hasethuraman/events{/privacy}","received_events_url":"https://api.github.com/users/hasethuraman/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":46697272,"node_id":"MDU6TGFiZWw0NjY5NzI3Mg==","url":"https://api.github.com/repos/etcd-io/etcd/labels/type/bug","name":"type/bug","color":"d61552","default":false,"description":""},{"id":2717379621,"node_id":"MDU6TGFiZWwyNzE3Mzc5NjIx","url":"https://api.github.com/repos/etcd-io/etcd/labels/priority/important-soon","name":"priority/important-soon","color":"D93F0B","default":false,"description":"Must be staffed and worked on either currently, or very soon, ideally in time for the next release."}],"state":"closed","locked":false,"assignee":{"login":"ahrtr","id":30739825,"node_id":"MDQ6VXNlcjMwNzM5ODI1","avatar_url":"https://avatars.githubusercontent.com/u/30739825?v=4","gravatar_id":"","url":"https://api.github.com/users/ahrtr","html_url":"https://github.com/ahrtr","followers_url":"https://api.github.com/users/ahrtr/followers","following_url":"https://api.github.com/users/ahrtr/following{/other_user}","gists_url":"https://api.github.com/users/ahrtr/gists{/gist_id}","starred_url":"https://api.github.com/users/ahrtr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ahrtr/subscriptions","organizations_url":"https://api.github.com/users/ahrtr/orgs","repos_url":"https://api.github.com/users/ahrtr/repos","events_url":"https://api.github.com/users/ahrtr/events{/privacy}","received_events_url":"https://api.github.com/users/ahrtr/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"ahrtr","id":30739825,"node_id":"MDQ6VXNlcjMwNzM5ODI1","avatar_url":"https://avatars.githubusercontent.com/u/30739825?v=4","gravatar_id":"","url":"https://api.github.com/users/ahrtr","html_url":"https://github.com/ahrtr","followers_url":"https://api.github.com/users/ahrtr/followers","following_url":"https://api.github.com/users/ahrtr/following{/other_user}","gists_url":"https://api.github.com/users/ahrtr/gists{/gist_id}","starred_url":"https://api.github.com/users/ahrtr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ahrtr/subscriptions","organizations_url":"https://api.github.com/users/ahrtr/orgs","repos_url":"https://api.github.com/users/ahrtr/repos","events_url":"https://api.github.com/users/ahrtr/events{/privacy}","received_events_url":"https://api.github.com/users/ahrtr/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":58,"created_at":"2022-08-22T15:24:27Z","updated_at":"2022-09-22T07:38:49Z","closed_at":"2022-09-22T00:43:38Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":11225014,"node_id":"MDEwOlJlcG9zaXRvcnkxMTIyNTAxNA==","name":"etcd","full_name":"etcd-io/etcd","private":false,"owner":{"login":"etcd-io","id":41972792,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQxOTcyNzky","avatar_url":"https://avatars.githubusercontent.com/u/41972792?v=4","gravatar_id":"","url":"https://api.github.com/users/etcd-io","html_url":"https://github.com/etcd-io","followers_url":"https://api.github.com/users/etcd-io/followers","following_url":"https://api.github.com/users/etcd-io/following{/other_user}","gists_url":"https://api.github.com/users/etcd-io/gists{/gist_id}","starred_url":"https://api.github.com/users/etcd-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/etcd-io/subscriptions","organizations_url":"https://api.github.com/users/etcd-io/orgs","repos_url":"https://api.github.com/users/etcd-io/repos","events_url":"https://api.github.com/users/etcd-io/events{/privacy}","received_events_url":"https://api.github.com/users/etcd-io/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/etcd-io/etcd","description":"Distributed reliable key-value store for the most critical data of a distributed system","fork":false,"url":"https://api.github.com/repos/etcd-io/etcd","forks_url":"https://api.github.com/repos/etcd-io/etcd/forks","keys_url":"https://api.github.com/repos/etcd-io/etcd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/etcd-io/etcd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/etcd-io/etcd/teams","hooks_url":"https://api.github.com/repos/etcd-io/etcd/hooks","issue_events_url":"https://api.github.com/repos/etcd-io/etcd/issues/events{/number}","events_url":"https://api.github.com/repos/etcd-io/etcd/events","assignees_url":"https://api.github.com/repos/etcd-io/etcd/assignees{/user}","branches_url":"https://api.github.com/repos/etcd-io/etcd/branches{/branch}","tags_url":"https://api.github.com/repos/etcd-io/etcd/tags","blobs_url":"https://api.github.com/repos/etcd-io/etcd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/etcd-io/etcd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/etcd-io/etcd/git/refs{/sha}","trees_url":"https://api.github.com/repos/etcd-io/etcd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/etcd-io/etcd/statuses/{sha}","languages_url":"https://api.github.com/repos/etcd-io/etcd/languages","stargazers_url":"https://api.github.com/repos/etcd-io/etcd/stargazers","contributors_url":"https://api.github.com/repos/etcd-io/etcd/contributors","subscribers_url":"https://api.github.com/repos/etcd-io/etcd/subscribers","subscription_url":"https://api.github.com/repos/etcd-io/etcd/subscription","commits_url":"https://api.github.com/repos/etcd-io/etcd/commits{/sha}","git_commits_url":"https://api.github.com/repos/etcd-io/etcd/git/commits{/sha}","comments_url":"https://api.github.com/repos/etcd-io/etcd/comments{/number}","issue_comment_url":"https://api.github.com/repos/etcd-io/etcd/issues/comments{/number}","contents_url":"https://api.github.com/repos/etcd-io/etcd/contents/{+path}","compare_url":"https://api.github.com/repos/etcd-io/etcd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/etcd-io/etcd/merges","archive_url":"https://api.github.com/repos/etcd-io/etcd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/etcd-io/etcd/downloads","issues_url":"https://api.github.com/repos/etcd-io/etcd/issues{/number}","pulls_url":"https://api.github.com/repos/etcd-io/etcd/pulls{/number}","milestones_url":"https://api.github.com/repos/etcd-io/etcd/milestones{/number}","notifications_url":"https://api.github.com/repos/etcd-io/etcd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/etcd-io/etcd/labels{/name}","releases_url":"https://api.github.com/repos/etcd-io/etcd/releases{/id}","deployments_url":"https://api.github.com/repos/etcd-io/etcd/deployments","created_at":"2013-07-06T21:57:21Z","updated_at":"2025-11-09T18:54:09Z","pushed_at":"2025-11-09T18:54:04Z","git_url":"git://github.com/etcd-io/etcd.git","ssh_url":"git@github.com:etcd-io/etcd.git","clone_url":"https://github.com/etcd-io/etcd.git","svn_url":"https://github.com/etcd-io/etcd","homepage":"https://etcd.io","size":93104,"stargazers_count":50733,"watchers_count":50733,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":10207,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":225,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cncf","consensus","database","distributed-database","distributed-systems","etcd","go","key-value","kubernetes","raft"],"visibility":"public","forks":10207,"open_issues":225,"watchers":50733,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I observed the possibility of data loss and I would like the community to comment / correct me otherwise.\r\n\r\nBefore explaining that, I would like to explain the happy path when user does a PUT <key, value>. I have tried to only necessary steps to focus this issue. And considered a single etcd instance.\r\n\r\n====================================================================================\r\n----------api thread --------------\r\n\r\nUser calls etcdctl PUT k v\r\n\r\nIt lands in v3_server.go::put function with the message about k,v\r\n\r\nCall delegates to series of function calls and enters v3_server.go::processInternalRaftRequestOnce\r\n\r\nIt registers for a signal with wait utility against this keyid\r\n\r\nCall delegates further to series of function calls and enters raft/node.go::stepWithWaitOption(..message..)\r\n\r\nIt wraps this message in a msgResult channel and updates its result channel; then sends this message to propc channel.\r\n\r\nAfter sending it waits on msgResult.channel\r\n----------api thread waiting --------------\r\n\r\nOn seeing a message in propc channel, raft/node.go::run(), it wakes up and sequence of calls adds the message.Entries to raftLog\r\n\r\nNotifies the msgResult.channel\r\n\r\n----------api thread wakes--------------\r\n10. Upon seeing the msgResult.channel, api thread wakes and returns down the stack back to v3_server.go::processInternalRaftRequestOnce and waits for signal that it registered at step#4\r\n----------api thread waiting --------------\r\n\r\nIn next iteration of raft/node.go::run(), it gets the entry from raftLog and add it to readyc\r\netcdserver/raft.go::start wakes up on seeing this entry in readyc and adds this entry to applyc channel\r\nand synchronously writes to wal log ---------------------> wal log\r\netcdserver/server.go wakes up on seeing entry in applyc channel (added in step https://github.com/etcd-io/etcd/pull/12)\r\nFrom step#14, the call goes through series of calls and lands in server.go::applyEntryNormal\r\napplyEntryNormal calls applyV3.apply which will eventually puts the KV to mvcc kvstore txn kvindex\r\napplyEntryNormal now sends the signal for this key which is basically to wake up api thread that is waiting in 7\r\n----------api thread wakes--------------\r\n18. User thread here wakes and sends back acknowledgement\r\n----------user sees ok--------------\r\n\r\nBatcher flushes the entries added to kvstore txn kvindex to database file. (also this can happen before 18 based on its timer)\r\n====================================================================================\r\nHere if step https://github.com/etcd-io/etcd/pull/13 thread is pre-empted and rescheduled by the underlying operating system after completing step https://github.com/etcd-io/etcd/pull/18 and when there is a power failure at the end of step 18 where after user sees error, then the kv is neither written to wal nor to database file\r\n\r\nI think this is not seen today because it is a small window where the server has to restart immediately after step 18 (and immediately after step 12 the underlying os must have pre-empted the etcdserver/raft.go::start and added to end of the runnable Q.). Given these multiple conditions, it appears that we dont see data loss.\r\n\r\nBut it appears from the code that it is possible. To simulate, added sleep after step 12 (also added exit) and 19. I was able to see ok but the data is not in both wal and db.\r\n\r\nIf I am not correct, my apology and also please correct my understanding.\r\n\r\nBefore repro please do the changes:\r\n1. Do the code changes in raft.go\r\n![image](https://user-images.githubusercontent.com/10446093/185958416-6a52e10e-34f4-4d33-96dd-18e79454c74f.png)\r\n\r\n2.Do the code changes in tx.go\r\n![image](https://user-images.githubusercontent.com/10446093/185958466-7648b6c5-5d08-428b-b5f6-76e58e0448bc.png)\r\n\r\n3. Rebuild etcd server\r\n\r\nNow follow the steps to repro\r\n//1. Start etcd server with changes\r\n\r\n//2. Add a key value. Allow etcdserver to acknowledge and exit immediately (with just sleep and exit to simulate the explanation)\r\n$ touch /tmp/exitnow; ./bin/etcdctl put /k1 v1\r\nOK\r\n\r\n//3. Remove this control flag file and restart the etcd server\r\n$ rm /tmp/exitnow\r\n\r\n//4. Check if key present\r\n$ ./bin/etcdctl get /k --prefix\r\n$\r\n\r\n// We can see no key-value \r\n","reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/14370/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/etcd-io/etcd/issues/14370/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":17018080446,"node_id":"REFE_lADOAKtHts4lHw_JzwAAAAP2W0y-","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/17018080446","actor":{"login":"MarkFranceschini","id":5872914,"node_id":"MDQ6VXNlcjU4NzI5MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/5872914?v=4","gravatar_id":"","url":"https://api.github.com/users/MarkFranceschini","html_url":"https://github.com/MarkFranceschini","followers_url":"https://api.github.com/users/MarkFranceschini/followers","following_url":"https://api.github.com/users/MarkFranceschini/following{/other_user}","gists_url":"https://api.github.com/users/MarkFranceschini/gists{/gist_id}","starred_url":"https://api.github.com/users/MarkFranceschini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarkFranceschini/subscriptions","organizations_url":"https://api.github.com/users/MarkFranceschini/orgs","repos_url":"https://api.github.com/users/MarkFranceschini/repos","events_url":"https://api.github.com/users/MarkFranceschini/events{/privacy}","received_events_url":"https://api.github.com/users/MarkFranceschini/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"da816877a211df7415fbc756952558294755a7b5","commit_url":"https://api.github.com/repos/muxinc/etcd/commits/da816877a211df7415fbc756952558294755a7b5","created_at":"2025-03-27T16:52:57Z","performed_via_github_app":null},{"id":20327288977,"node_id":"SE_lADOAKtHts4lHw_JzwAAAAS7mdCR","url":"https://api.github.com/repos/etcd-io/etcd/issues/events/20327288977","actor":{"login":"jtamagnan","id":5892061,"node_id":"MDQ6VXNlcjU4OTIwNjE=","avatar_url":"https://avatars.githubusercontent.com/u/5892061?v=4","gravatar_id":"","url":"https://api.github.com/users/jtamagnan","html_url":"https://github.com/jtamagnan","followers_url":"https://api.github.com/users/jtamagnan/followers","following_url":"https://api.github.com/users/jtamagnan/following{/other_user}","gists_url":"https://api.github.com/users/jtamagnan/gists{/gist_id}","starred_url":"https://api.github.com/users/jtamagnan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtamagnan/subscriptions","organizations_url":"https://api.github.com/users/jtamagnan/orgs","repos_url":"https://api.github.com/users/jtamagnan/repos","events_url":"https://api.github.com/users/jtamagnan/events{/privacy}","received_events_url":"https://api.github.com/users/jtamagnan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-10-16T19:43:20Z","performed_via_github_app":null}]