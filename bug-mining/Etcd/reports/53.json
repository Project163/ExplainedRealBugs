{"url":"https://api.github.com/repos/etcd-io/etcd/issues/17780","repository_url":"https://api.github.com/repos/etcd-io/etcd","labels_url":"https://api.github.com/repos/etcd-io/etcd/issues/17780/labels{/name}","comments_url":"https://api.github.com/repos/etcd-io/etcd/issues/17780/comments","events_url":"https://api.github.com/repos/etcd-io/etcd/issues/17780/events","html_url":"https://github.com/etcd-io/etcd/issues/17780","id":2240079777,"node_id":"I_kwDOAKtHts6FhOeh","number":17780,"title":"Revision decreasing after panic during compaction","user":{"login":"serathius","id":5873433,"node_id":"MDQ6VXNlcjU4NzM0MzM=","avatar_url":"https://avatars.githubusercontent.com/u/5873433?v=4","gravatar_id":"","url":"https://api.github.com/users/serathius","html_url":"https://github.com/serathius","followers_url":"https://api.github.com/users/serathius/followers","following_url":"https://api.github.com/users/serathius/following{/other_user}","gists_url":"https://api.github.com/users/serathius/gists{/gist_id}","starred_url":"https://api.github.com/users/serathius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serathius/subscriptions","organizations_url":"https://api.github.com/users/serathius/orgs","repos_url":"https://api.github.com/users/serathius/repos","events_url":"https://api.github.com/users/serathius/events{/privacy}","received_events_url":"https://api.github.com/users/serathius/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":46697272,"node_id":"MDU6TGFiZWw0NjY5NzI3Mg==","url":"https://api.github.com/repos/etcd-io/etcd/labels/type/bug","name":"type/bug","color":"d61552","default":false,"description":""},{"id":125104947,"node_id":"MDU6TGFiZWwxMjUxMDQ5NDc=","url":"https://api.github.com/repos/etcd-io/etcd/labels/area/testing","name":"area/testing","color":"f9ea9a","default":false,"description":""},{"id":4507846746,"node_id":"LA_kwDOAKtHts8AAAABDLBIWg","url":"https://api.github.com/repos/etcd-io/etcd/labels/release/v3.6","name":"release/v3.6","color":"f9d0c4","default":false,"description":""},{"id":4507848305,"node_id":"LA_kwDOAKtHts8AAAABDLBOcQ","url":"https://api.github.com/repos/etcd-io/etcd/labels/release/v3.5","name":"release/v3.5","color":"f9d0c4","default":false,"description":""},{"id":4507848595,"node_id":"LA_kwDOAKtHts8AAAABDLBPkw","url":"https://api.github.com/repos/etcd-io/etcd/labels/release/v3.4","name":"release/v3.4","color":"930E07","default":false,"description":""},{"id":5333707210,"node_id":"LA_kwDOAKtHts8AAAABPenpyg","url":"https://api.github.com/repos/etcd-io/etcd/labels/area/robustness-testing","name":"area/robustness-testing","color":"c5def5","default":false,"description":""},{"id":6434167935,"node_id":"LA_kwDOAKtHts8AAAABf4Gcfw","url":"https://api.github.com/repos/etcd-io/etcd/labels/priority/critical-urgent","name":"priority/critical-urgent","color":"B60205","default":false,"description":"Highest priority. Must be actively worked on as someone's top priority right now."}],"state":"closed","locked":false,"assignee":{"login":"fuweid","id":17510957,"node_id":"MDQ6VXNlcjE3NTEwOTU3","avatar_url":"https://avatars.githubusercontent.com/u/17510957?v=4","gravatar_id":"","url":"https://api.github.com/users/fuweid","html_url":"https://github.com/fuweid","followers_url":"https://api.github.com/users/fuweid/followers","following_url":"https://api.github.com/users/fuweid/following{/other_user}","gists_url":"https://api.github.com/users/fuweid/gists{/gist_id}","starred_url":"https://api.github.com/users/fuweid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fuweid/subscriptions","organizations_url":"https://api.github.com/users/fuweid/orgs","repos_url":"https://api.github.com/users/fuweid/repos","events_url":"https://api.github.com/users/fuweid/events{/privacy}","received_events_url":"https://api.github.com/users/fuweid/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"fuweid","id":17510957,"node_id":"MDQ6VXNlcjE3NTEwOTU3","avatar_url":"https://avatars.githubusercontent.com/u/17510957?v=4","gravatar_id":"","url":"https://api.github.com/users/fuweid","html_url":"https://github.com/fuweid","followers_url":"https://api.github.com/users/fuweid/followers","following_url":"https://api.github.com/users/fuweid/following{/other_user}","gists_url":"https://api.github.com/users/fuweid/gists{/gist_id}","starred_url":"https://api.github.com/users/fuweid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fuweid/subscriptions","organizations_url":"https://api.github.com/users/fuweid/orgs","repos_url":"https://api.github.com/users/fuweid/repos","events_url":"https://api.github.com/users/fuweid/events{/privacy}","received_events_url":"https://api.github.com/users/fuweid/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":31,"created_at":"2024-04-12T12:42:46Z","updated_at":"2024-10-26T09:44:32Z","closed_at":"2024-10-26T09:44:32Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Bug report criteria\r\n\r\n- [x] This bug report is not security related, security issues should be disclosed privately via [etcd maintainers](mailto:etcd-maintainers@googlegroups.com).\r\n- [x] This is not a support request or question, support requests or questions should be raised in the etcd [discussion forums](https://github.com/etcd-io/etcd/discussions).\r\n- [x] You have read the etcd [bug reporting guidelines](https://github.com/etcd-io/etcd/blob/main/Documentation/contributor-guide/reporting_bugs.md).\r\n- [x] Existing open issues along with etcd [frequently asked questions](https://etcd.io/docs/latest/faq) have been checked and this is not a duplicate.\r\n\r\n### What happened?\r\n\r\nFailure in https://github.com/etcd-io/etcd/actions/runs/8659974818\r\n\r\n![image](https://github.com/etcd-io/etcd/assets/5873433/8508b160-c2f7-49f1-85b8-9930a1132826)\r\n\r\n### What did you expect to happen?\r\n\r\nRevision doesn't decrease\r\n\r\n### How can we reproduce it (as minimally and precisely as possible)?\r\n\r\nFollow https://github.com/etcd-io/etcd/tree/main/tests/robustness#re-evaluate-existing-report to validate report from https://github.com/etcd-io/etcd/actions/runs/8659974818\r\n\r\nRun `TestRobustnessExploratory/Kubernetes/LowTraffic/ClusterOfSize1` with failpoint `compactBeforeSetFinishedCompact=panic()`\r\n\r\n### Anything else we need to know?\r\n\r\nTODO:\r\n* [x] Try to reproduce the issue\r\n* [x] Try to reproduce the issue on amd64\r\n\r\n### Etcd version (please run commands below)\r\n\r\n<details>\r\n\r\n```console\r\n$ etcd --version\r\n# paste output here\r\n\r\n$ etcdctl version\r\n# paste output here\r\n```\r\n\r\n</details>\r\n\r\n\r\n### Etcd configuration (command line flags or environment variables)\r\n\r\n<details>\r\n\r\n# paste your configuration here\r\n\r\n</details>\r\n\r\n\r\n### Etcd debug information (please run commands below, feel free to obfuscate the IP address or FQDN in the output)\r\n\r\n<details>\r\n\r\n```console\r\n$ etcdctl member list -w table\r\n# paste output here\r\n\r\n$ etcdctl --endpoints=<member list> endpoint status -w table\r\n# paste output here\r\n```\r\n\r\n</details>\r\n\r\n\r\n### Relevant log output\r\n\r\n_No response_","closed_by":{"login":"serathius","id":5873433,"node_id":"MDQ6VXNlcjU4NzM0MzM=","avatar_url":"https://avatars.githubusercontent.com/u/5873433?v=4","gravatar_id":"","url":"https://api.github.com/users/serathius","html_url":"https://github.com/serathius","followers_url":"https://api.github.com/users/serathius/followers","following_url":"https://api.github.com/users/serathius/following{/other_user}","gists_url":"https://api.github.com/users/serathius/gists{/gist_id}","starred_url":"https://api.github.com/users/serathius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serathius/subscriptions","organizations_url":"https://api.github.com/users/serathius/orgs","repos_url":"https://api.github.com/users/serathius/repos","events_url":"https://api.github.com/users/serathius/events{/privacy}","received_events_url":"https://api.github.com/users/serathius/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/17780/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/etcd-io/etcd/issues/17780/timeline","performed_via_github_app":null,"state_reason":"completed"}