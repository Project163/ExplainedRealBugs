{"url":"https://api.github.com/repos/etcd-io/etcd/issues/19499","repository_url":"https://api.github.com/repos/etcd-io/etcd","labels_url":"https://api.github.com/repos/etcd-io/etcd/issues/19499/labels{/name}","comments_url":"https://api.github.com/repos/etcd-io/etcd/issues/19499/comments","events_url":"https://api.github.com/repos/etcd-io/etcd/issues/19499/events","html_url":"https://github.com/etcd-io/etcd/issues/19499","id":2884401253,"node_id":"I_kwDOAKtHts6r7Hhl","number":19499,"title":"Flaky `go.etcd.io/etcd/server/v3/etcdserver/api/v3compactor: TestPeriodicHourly `","user":{"login":"ahrtr","id":30739825,"node_id":"MDQ6VXNlcjMwNzM5ODI1","avatar_url":"https://avatars.githubusercontent.com/u/30739825?v=4","gravatar_id":"","url":"https://api.github.com/users/ahrtr","html_url":"https://github.com/ahrtr","followers_url":"https://api.github.com/users/ahrtr/followers","following_url":"https://api.github.com/users/ahrtr/following{/other_user}","gists_url":"https://api.github.com/users/ahrtr/gists{/gist_id}","starred_url":"https://api.github.com/users/ahrtr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ahrtr/subscriptions","organizations_url":"https://api.github.com/users/ahrtr/orgs","repos_url":"https://api.github.com/users/ahrtr/repos","events_url":"https://api.github.com/users/ahrtr/events{/privacy}","received_events_url":"https://api.github.com/users/ahrtr/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":125104947,"node_id":"MDU6TGFiZWwxMjUxMDQ5NDc=","url":"https://api.github.com/repos/etcd-io/etcd/labels/area/testing","name":"area/testing","color":"f9ea9a","default":false,"description":""},{"id":159103993,"node_id":"MDU6TGFiZWwxNTkxMDM5OTM=","url":"https://api.github.com/repos/etcd-io/etcd/labels/help%20wanted","name":"help wanted","color":"d3f49c","default":true,"description":""},{"id":3035364791,"node_id":"MDU6TGFiZWwzMDM1MzY0Nzkx","url":"https://api.github.com/repos/etcd-io/etcd/labels/type/flake","name":"type/flake","color":"829493","default":false,"description":""},{"id":4108243858,"node_id":"LA_kwDOAKtHts703tOS","url":"https://api.github.com/repos/etcd-io/etcd/labels/stage/triaged","name":"stage/triaged","color":"2D8E09","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"amosehiguese","id":93928881,"node_id":"U_kgDOBZk9sQ","avatar_url":"https://avatars.githubusercontent.com/u/93928881?v=4","gravatar_id":"","url":"https://api.github.com/users/amosehiguese","html_url":"https://github.com/amosehiguese","followers_url":"https://api.github.com/users/amosehiguese/followers","following_url":"https://api.github.com/users/amosehiguese/following{/other_user}","gists_url":"https://api.github.com/users/amosehiguese/gists{/gist_id}","starred_url":"https://api.github.com/users/amosehiguese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amosehiguese/subscriptions","organizations_url":"https://api.github.com/users/amosehiguese/orgs","repos_url":"https://api.github.com/users/amosehiguese/repos","events_url":"https://api.github.com/users/amosehiguese/events{/privacy}","received_events_url":"https://api.github.com/users/amosehiguese/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"amosehiguese","id":93928881,"node_id":"U_kgDOBZk9sQ","avatar_url":"https://avatars.githubusercontent.com/u/93928881?v=4","gravatar_id":"","url":"https://api.github.com/users/amosehiguese","html_url":"https://github.com/amosehiguese","followers_url":"https://api.github.com/users/amosehiguese/followers","following_url":"https://api.github.com/users/amosehiguese/following{/other_user}","gists_url":"https://api.github.com/users/amosehiguese/gists{/gist_id}","starred_url":"https://api.github.com/users/amosehiguese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amosehiguese/subscriptions","organizations_url":"https://api.github.com/users/amosehiguese/orgs","repos_url":"https://api.github.com/users/amosehiguese/repos","events_url":"https://api.github.com/users/amosehiguese/events{/privacy}","received_events_url":"https://api.github.com/users/amosehiguese/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":6,"created_at":"2025-02-27T12:37:31Z","updated_at":"2025-04-29T09:12:22Z","closed_at":"2025-04-29T09:12:22Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Which Github Action / Prow Jobs are flaking?\n\nhttps://prow.k8s.io/view/gs/kubernetes-ci-logs/pr-logs/pull/etcd-io_etcd/19426/pull-etcd-coverage-report/1895067242123497472\n\n```\n\n{Failed  === RUN   TestPeriodicHourly\n    logger.go:146: 2025-02-27T11:08:18.530Z\tINFO\tstarting auto periodic compaction\t{\"revision\": 1, \"compact-period\": \"2h0m0s\"}\n    logger.go:146: 2025-02-27T11:08:18.530Z\tINFO\tcompleted auto periodic compaction\t{\"revision\": 1, \"compact-period\": \"2h0m0s\", \"took\": \"0s\"}\n    logger.go:146: 2025-02-27T11:08:18.850Z\tINFO\tstarting auto periodic compaction\t{\"revision\": 10, \"compact-period\": \"2h0m0s\"}\n    logger.go:146: 2025-02-27T11:08:18.851Z\tINFO\tcompleted auto periodic compaction\t{\"revision\": 10, \"compact-period\": \"2h0m0s\", \"took\": \"0s\"}\n    logger.go:146: 2025-02-27T11:08:19.032Z\tINFO\tstarting auto periodic compaction\t{\"revision\": 20, \"compact-period\": \"2h0m0s\"}\n    logger.go:146: 2025-02-27T11:08:19.032Z\tINFO\tcompleted auto periodic compaction\t{\"revision\": 20, \"compact-period\": \"2h0m0s\", \"took\": \"0s\"}\n    logger.go:146: 2025-02-27T11:08:19.281Z\tINFO\tstarting auto periodic compaction\t{\"revision\": 30, \"compact-period\": \"2h0m0s\"}\n    periodic_test.go:72: len(actions) = 0, expected >= 1\n--- FAIL: TestPeriodicHourly (1.49s)\n}\n\n```\n\nFYI. Previously I raised a similar issue https://github.com/etcd-io/etcd/issues/17054, which was resolved in https://github.com/etcd-io/etcd/pull/18608. It seems the fix still has flaw.\n\n### Which tests are flaking?\n\n.\n\n### Github Action / Prow Job link\n\n_No response_\n\n### Reason for failure (if possible)\n\n_No response_\n\n### Anything else we need to know?\n\n_No response_","closed_by":{"login":"ahrtr","id":30739825,"node_id":"MDQ6VXNlcjMwNzM5ODI1","avatar_url":"https://avatars.githubusercontent.com/u/30739825?v=4","gravatar_id":"","url":"https://api.github.com/users/ahrtr","html_url":"https://github.com/ahrtr","followers_url":"https://api.github.com/users/ahrtr/followers","following_url":"https://api.github.com/users/ahrtr/following{/other_user}","gists_url":"https://api.github.com/users/ahrtr/gists{/gist_id}","starred_url":"https://api.github.com/users/ahrtr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ahrtr/subscriptions","organizations_url":"https://api.github.com/users/ahrtr/orgs","repos_url":"https://api.github.com/users/ahrtr/repos","events_url":"https://api.github.com/users/ahrtr/events{/privacy}","received_events_url":"https://api.github.com/users/ahrtr/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/etcd-io/etcd/issues/19499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/etcd-io/etcd/issues/19499/timeline","performed_via_github_app":null,"state_reason":"completed"}