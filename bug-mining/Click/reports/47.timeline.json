[{"actor":{"login":"cdman","id":838250,"node_id":"MDQ6VXNlcjgzODI1MA==","avatar_url":"https://avatars.githubusercontent.com/u/838250?v=4","gravatar_id":"","url":"https://api.github.com/users/cdman","html_url":"https://github.com/cdman","followers_url":"https://api.github.com/users/cdman/followers","following_url":"https://api.github.com/users/cdman/following{/other_user}","gists_url":"https://api.github.com/users/cdman/gists{/gist_id}","starred_url":"https://api.github.com/users/cdman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdman/subscriptions","organizations_url":"https://api.github.com/users/cdman/orgs","repos_url":"https://api.github.com/users/cdman/repos","events_url":"https://api.github.com/users/cdman/events{/privacy}","received_events_url":"https://api.github.com/users/cdman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-06T05:41:22Z","updated_at":"2017-01-06T05:41:22Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/pallets/flask/issues/2139","repository_url":"https://api.github.com/repos/pallets/flask","labels_url":"https://api.github.com/repos/pallets/flask/issues/2139/labels{/name}","comments_url":"https://api.github.com/repos/pallets/flask/issues/2139/comments","events_url":"https://api.github.com/repos/pallets/flask/issues/2139/events","html_url":"https://github.com/pallets/flask/issues/2139","id":198374381,"node_id":"MDU6SXNzdWUxOTgzNzQzODE=","number":2139,"title":"Flask 0.12 incompatible with Google App Engine?","user":{"login":"cinchent","id":4464714,"node_id":"MDQ6VXNlcjQ0NjQ3MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4464714?v=4","gravatar_id":"","url":"https://api.github.com/users/cinchent","html_url":"https://github.com/cinchent","followers_url":"https://api.github.com/users/cinchent/followers","following_url":"https://api.github.com/users/cinchent/following{/other_user}","gists_url":"https://api.github.com/users/cinchent/gists{/gist_id}","starred_url":"https://api.github.com/users/cinchent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cinchent/subscriptions","organizations_url":"https://api.github.com/users/cinchent/orgs","repos_url":"https://api.github.com/users/cinchent/repos","events_url":"https://api.github.com/users/cinchent/events{/privacy}","received_events_url":"https://api.github.com/users/cinchent/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2017-01-02T19:43:53Z","updated_at":"2020-11-14T03:35:35Z","closed_at":"2017-04-08T18:00:32Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":596892,"node_id":"MDEwOlJlcG9zaXRvcnk1OTY4OTI=","name":"flask","full_name":"pallets/flask","private":false,"owner":{"login":"pallets","id":16748505,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2NzQ4NTA1","avatar_url":"https://avatars.githubusercontent.com/u/16748505?v=4","gravatar_id":"","url":"https://api.github.com/users/pallets","html_url":"https://github.com/pallets","followers_url":"https://api.github.com/users/pallets/followers","following_url":"https://api.github.com/users/pallets/following{/other_user}","gists_url":"https://api.github.com/users/pallets/gists{/gist_id}","starred_url":"https://api.github.com/users/pallets/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pallets/subscriptions","organizations_url":"https://api.github.com/users/pallets/orgs","repos_url":"https://api.github.com/users/pallets/repos","events_url":"https://api.github.com/users/pallets/events{/privacy}","received_events_url":"https://api.github.com/users/pallets/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/pallets/flask","description":"The Python micro framework for building web applications.","fork":false,"url":"https://api.github.com/repos/pallets/flask","forks_url":"https://api.github.com/repos/pallets/flask/forks","keys_url":"https://api.github.com/repos/pallets/flask/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pallets/flask/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pallets/flask/teams","hooks_url":"https://api.github.com/repos/pallets/flask/hooks","issue_events_url":"https://api.github.com/repos/pallets/flask/issues/events{/number}","events_url":"https://api.github.com/repos/pallets/flask/events","assignees_url":"https://api.github.com/repos/pallets/flask/assignees{/user}","branches_url":"https://api.github.com/repos/pallets/flask/branches{/branch}","tags_url":"https://api.github.com/repos/pallets/flask/tags","blobs_url":"https://api.github.com/repos/pallets/flask/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pallets/flask/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pallets/flask/git/refs{/sha}","trees_url":"https://api.github.com/repos/pallets/flask/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pallets/flask/statuses/{sha}","languages_url":"https://api.github.com/repos/pallets/flask/languages","stargazers_url":"https://api.github.com/repos/pallets/flask/stargazers","contributors_url":"https://api.github.com/repos/pallets/flask/contributors","subscribers_url":"https://api.github.com/repos/pallets/flask/subscribers","subscription_url":"https://api.github.com/repos/pallets/flask/subscription","commits_url":"https://api.github.com/repos/pallets/flask/commits{/sha}","git_commits_url":"https://api.github.com/repos/pallets/flask/git/commits{/sha}","comments_url":"https://api.github.com/repos/pallets/flask/comments{/number}","issue_comment_url":"https://api.github.com/repos/pallets/flask/issues/comments{/number}","contents_url":"https://api.github.com/repos/pallets/flask/contents/{+path}","compare_url":"https://api.github.com/repos/pallets/flask/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pallets/flask/merges","archive_url":"https://api.github.com/repos/pallets/flask/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pallets/flask/downloads","issues_url":"https://api.github.com/repos/pallets/flask/issues{/number}","pulls_url":"https://api.github.com/repos/pallets/flask/pulls{/number}","milestones_url":"https://api.github.com/repos/pallets/flask/milestones{/number}","notifications_url":"https://api.github.com/repos/pallets/flask/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pallets/flask/labels{/name}","releases_url":"https://api.github.com/repos/pallets/flask/releases{/id}","deployments_url":"https://api.github.com/repos/pallets/flask/deployments","created_at":"2010-04-06T11:11:59Z","updated_at":"2025-11-10T08:50:29Z","pushed_at":"2025-10-14T20:26:26Z","git_url":"git://github.com/pallets/flask.git","ssh_url":"git@github.com:pallets/flask.git","clone_url":"https://github.com/pallets/flask.git","svn_url":"https://github.com/pallets/flask","homepage":"https://flask.palletsprojects.com","size":11296,"stargazers_count":70745,"watchers_count":70745,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":16617,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":16,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["flask","jinja","pallets","python","web-framework","werkzeug","wsgi"],"visibility":"public","forks":16617,"open_issues":16,"watchers":70745,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"A very simple boilerplate Google App Engine example using Flask fails when upgrading from 0.10 to 0.12.  The problem is something cryptic relating to module path resolution.  \r\n\r\nThe straight-off-the-web GAE Flask Hello World example works fine when deployed to a live GAE project.  The reason why this works ok is that it is so simple that it makes no use of third-party libraries outside of those that are natively installed along with Flask as a standard 'pip' install.\r\n\r\nBut when I extended this example to make the simplest use of the Google Cloud Datastore, then when the code is deployed, and a GET request is made, it fails with the following stack traceback:\r\n> Traceback (most recent call last):\r\n>   File \"/google/google-cloud-sdk/platform/google_appengine/google/appengine/runtime/wsgi.py\", line 240, in Handle\r\n>     handler = _config_handle.add_wsgi_middleware(self._LoadHandler())\r\n>   File \"/google/google-cloud-sdk/platform/google_appengine/google/appengine/runtime/wsgi.py\", line 299, in _LoadHandler\r\n>     handler, path, err = LoadObject(self._handler)\r\n>   File \"/google/google-cloud-sdk/platform/google_appengine/google/appengine/runtime/wsgi.py\", line 85, in LoadObject\r\n>     obj = __import__(path[0])\r\n>   File \"/home/cinchent/flask-skel/main.py\", line 8, in <module>\r\n>     from google.cloud import datastore\r\n> ImportError: cannot import name datastore\r\n\r\nDigging deeper into this, I tried to use the GAE development application server on my local Windows box, and lo! then even the stock Hello World example fails: Flask is unable to even successfully import the native Python 'msvcrt' module from within its own Click initializer.  Here's the traceback from that:\r\n\r\n> Traceback (most recent call last):\r\n>   File \"C:\\Program Files (x86)\\Google\\Cloud SDK\\google-cloud-sdk\\platform\\google_appengine\\google\\appengine\\runtime\\wsgi.py\", line 240, in Handle\r\n>     handler = _config_handle.add_wsgi_middleware(self._LoadHandler())\r\n>   File \"C:\\Program Files (x86)\\Google\\Cloud SDK\\google-cloud-sdk\\platform\\google_appengine\\google\\appengine\\runtime\\wsgi.py\", line 299, in _LoadHandler\r\n>     handler, path, err = LoadObject(self._handler)\r\n>   File \"C:\\Program Files (x86)\\Google\\Cloud SDK\\google-cloud-sdk\\platform\\google_appengine\\google\\appengine\\runtime\\wsgi.py\", line 85, in LoadObject\r\n>     obj = __import__(path[0])\r\n>   File \"C:\\CINCH\\Freewave\\GCP\\appengine-flask-skeleton\\main.py\", line 8, in <module>\r\n>     from flask import Flask\r\n>   File \"C:\\CINCH\\Freewave\\GCP\\appengine-flask-skeleton\\lib\\flask\\__init__.py\", line 21, in <module>\r\n>     from .app import Flask, Request, Response\r\n>   File \"C:\\CINCH\\Freewave\\GCP\\appengine-flask-skeleton\\lib\\flask\\app.py\", line 26, in <module>\r\n>     from . import json, cli\r\n>   File \"C:\\CINCH\\Freewave\\GCP\\appengine-flask-skeleton\\lib\\flask\\cli.py\", line 17, in <module>\r\n>     import click\r\n>   File \"C:\\CINCH\\Freewave\\GCP\\appengine-flask-skeleton\\lib\\click\\__init__.py\", line 18, in <module>\r\n>     from .core import Context, BaseCommand, Command, MultiCommand, Group, \\\r\n>   File \"C:\\CINCH\\Freewave\\GCP\\appengine-flask-skeleton\\lib\\click\\core.py\", line 7, in <module>\r\n>     from .types import convert_type, IntRange, BOOL\r\n>   File \"C:\\CINCH\\Freewave\\GCP\\appengine-flask-skeleton\\lib\\click\\types.py\", line 4, in <module>\r\n>     from ._compat import open_stream, text_type, filename_to_ui, \\\r\n>   File \"C:\\CINCH\\Freewave\\GCP\\appengine-flask-skeleton\\lib\\click\\_compat.py\", line 164, in <module>\r\n>     import msvcrt\r\n>   File \"C:\\Program Files (x86)\\Google\\Cloud SDK\\google-cloud-sdk\\platform\\google_appengine\\google\\appengine\\tools\\devappserver2\\python\\sandbox.py\", line 964, in load_module\r\n>     raise ImportError('No module named %s' % fullname)\r\n> ImportError: No module named msvcrt\r\n\r\nGAE runs the Flask webapp within a sandbox, but it provides the proper module paths to the installed modules, provided those obey a somewhat orthodox Python path resolution technique, but whatever exotic technique Flask now uses in 0.12 fails within that sandbox.  (Other third-party libraries can be imported from within the sandbox just fine.)\r\n\r\nThese problems are completely absent in Flask 0.10.  (Once you're past the problem of importing 'protobuf', that is, a separate but known incompatibility with GAE's internal use, which has a workaround.)\r\n\r\nI've googled high and low for any information about what I may be missing in the Flask initialization recipe -- surely I must not be the only person to have encountered this! -- but have turned up nothing.\r\n\r\n---\r\nIn the enclosed 'main.py', setting the DATASTORE_EXAMPLE global to False causes it to behave as the stock GAE Hello World example app, and setting it to True extends that app to attempt use of the Cloud Datastore.\r\n\r\n[bundle.zip](https://github.com/pallets/flask/files/681314/bundle.zip)\r\n","reactions":{"url":"https://api.github.com/repos/pallets/flask/issues/2139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pallets/flask/issues/2139/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":914692891,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDkxNDY5Mjg5MQ==","url":"https://api.github.com/repos/pallets/click/issues/events/914692891","actor":{"login":"untitaker","id":837573,"node_id":"MDQ6VXNlcjgzNzU3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/837573?v=4","gravatar_id":"","url":"https://api.github.com/users/untitaker","html_url":"https://github.com/untitaker","followers_url":"https://api.github.com/users/untitaker/followers","following_url":"https://api.github.com/users/untitaker/following{/other_user}","gists_url":"https://api.github.com/users/untitaker/gists{/gist_id}","starred_url":"https://api.github.com/users/untitaker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/untitaker/subscriptions","organizations_url":"https://api.github.com/users/untitaker/orgs","repos_url":"https://api.github.com/users/untitaker/repos","events_url":"https://api.github.com/users/untitaker/events{/privacy}","received_events_url":"https://api.github.com/users/untitaker/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"691a60b1b7947dd2b50620b48f3b1817d34a3085","commit_url":"https://api.github.com/repos/pallets/click/commits/691a60b1b7947dd2b50620b48f3b1817d34a3085","created_at":"2017-01-06T22:39:59Z","performed_via_github_app":null},{"id":914695159,"node_id":"MDExOkNsb3NlZEV2ZW50OTE0Njk1MTU5","url":"https://api.github.com/repos/pallets/click/issues/events/914695159","actor":{"login":"untitaker","id":837573,"node_id":"MDQ6VXNlcjgzNzU3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/837573?v=4","gravatar_id":"","url":"https://api.github.com/users/untitaker","html_url":"https://github.com/untitaker","followers_url":"https://api.github.com/users/untitaker/followers","following_url":"https://api.github.com/users/untitaker/following{/other_user}","gists_url":"https://api.github.com/users/untitaker/gists{/gist_id}","starred_url":"https://api.github.com/users/untitaker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/untitaker/subscriptions","organizations_url":"https://api.github.com/users/untitaker/orgs","repos_url":"https://api.github.com/users/untitaker/repos","events_url":"https://api.github.com/users/untitaker/events{/privacy}","received_events_url":"https://api.github.com/users/untitaker/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"691a60b1b7947dd2b50620b48f3b1817d34a3085","commit_url":"https://api.github.com/repos/pallets/click/commits/691a60b1b7947dd2b50620b48f3b1817d34a3085","created_at":"2017-01-06T22:42:36Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/pallets/click/issues/comments/325010267","html_url":"https://github.com/pallets/click/issues/711#issuecomment-325010267","issue_url":"https://api.github.com/repos/pallets/click/issues/711","id":325010267,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNTAxMDI2Nw==","user":{"login":"yairohayon","id":593519,"node_id":"MDQ6VXNlcjU5MzUxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/593519?v=4","gravatar_id":"","url":"https://api.github.com/users/yairohayon","html_url":"https://github.com/yairohayon","followers_url":"https://api.github.com/users/yairohayon/followers","following_url":"https://api.github.com/users/yairohayon/following{/other_user}","gists_url":"https://api.github.com/users/yairohayon/gists{/gist_id}","starred_url":"https://api.github.com/users/yairohayon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yairohayon/subscriptions","organizations_url":"https://api.github.com/users/yairohayon/orgs","repos_url":"https://api.github.com/users/yairohayon/repos","events_url":"https://api.github.com/users/yairohayon/events{/privacy}","received_events_url":"https://api.github.com/users/yairohayon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-08-25T19:04:23Z","updated_at":"2017-08-25T19:04:23Z","body":"This fix is no good - still opening with Flask 0.12 and Click 6.7","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pallets/click/issues/comments/325010267/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yairohayon","id":593519,"node_id":"MDQ6VXNlcjU5MzUxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/593519?v=4","gravatar_id":"","url":"https://api.github.com/users/yairohayon","html_url":"https://github.com/yairohayon","followers_url":"https://api.github.com/users/yairohayon/followers","following_url":"https://api.github.com/users/yairohayon/following{/other_user}","gists_url":"https://api.github.com/users/yairohayon/gists{/gist_id}","starred_url":"https://api.github.com/users/yairohayon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yairohayon/subscriptions","organizations_url":"https://api.github.com/users/yairohayon/orgs","repos_url":"https://api.github.com/users/yairohayon/repos","events_url":"https://api.github.com/users/yairohayon/events{/privacy}","received_events_url":"https://api.github.com/users/yairohayon/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pallets/click/issues/comments/358246281","html_url":"https://github.com/pallets/click/issues/711#issuecomment-358246281","issue_url":"https://api.github.com/repos/pallets/click/issues/711","id":358246281,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODI0NjI4MQ==","user":{"login":"sorgloomer","id":5985835,"node_id":"MDQ6VXNlcjU5ODU4MzU=","avatar_url":"https://avatars.githubusercontent.com/u/5985835?v=4","gravatar_id":"","url":"https://api.github.com/users/sorgloomer","html_url":"https://github.com/sorgloomer","followers_url":"https://api.github.com/users/sorgloomer/followers","following_url":"https://api.github.com/users/sorgloomer/following{/other_user}","gists_url":"https://api.github.com/users/sorgloomer/gists{/gist_id}","starred_url":"https://api.github.com/users/sorgloomer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sorgloomer/subscriptions","organizations_url":"https://api.github.com/users/sorgloomer/orgs","repos_url":"https://api.github.com/users/sorgloomer/repos","events_url":"https://api.github.com/users/sorgloomer/events{/privacy}","received_events_url":"https://api.github.com/users/sorgloomer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T09:27:08Z","updated_at":"2018-01-17T09:27:08Z","body":"Created App Engine issue, maybe they can push this better or provide a builtin workaround: https://issuetracker.google.com/issues/72043776","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pallets/click/issues/comments/358246281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sorgloomer","id":5985835,"node_id":"MDQ6VXNlcjU5ODU4MzU=","avatar_url":"https://avatars.githubusercontent.com/u/5985835?v=4","gravatar_id":"","url":"https://api.github.com/users/sorgloomer","html_url":"https://github.com/sorgloomer","followers_url":"https://api.github.com/users/sorgloomer/followers","following_url":"https://api.github.com/users/sorgloomer/following{/other_user}","gists_url":"https://api.github.com/users/sorgloomer/gists{/gist_id}","starred_url":"https://api.github.com/users/sorgloomer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sorgloomer/subscriptions","organizations_url":"https://api.github.com/users/sorgloomer/orgs","repos_url":"https://api.github.com/users/sorgloomer/repos","events_url":"https://api.github.com/users/sorgloomer/events{/privacy}","received_events_url":"https://api.github.com/users/sorgloomer/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3992687105,"node_id":"MDExOkxvY2tlZEV2ZW50Mzk5MjY4NzEwNQ==","url":"https://api.github.com/repos/pallets/click/issues/events/3992687105","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"locked","commit_id":null,"commit_url":null,"created_at":"2020-11-13T09:45:51Z","lock_reason":"resolved","performed_via_github_app":null}]