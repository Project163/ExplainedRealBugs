{"url":"https://api.github.com/repos/pallets/click/issues/3019","repository_url":"https://api.github.com/repos/pallets/click","labels_url":"https://api.github.com/repos/pallets/click/issues/3019/labels{/name}","comments_url":"https://api.github.com/repos/pallets/click/issues/3019/comments","events_url":"https://api.github.com/repos/pallets/click/issues/3019/events","html_url":"https://github.com/pallets/click/issues/3019","id":3271353696,"node_id":"I_kwDOASN_zM7C_OVg","number":3019,"title":"click.prompt and click.confirm argument prompt_suffix no longer works when suffix is empty","user":{"login":"gene1wood","id":1134034,"node_id":"MDQ6VXNlcjExMzQwMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1134034?v=4","gravatar_id":"","url":"https://api.github.com/users/gene1wood","html_url":"https://github.com/gene1wood","followers_url":"https://api.github.com/users/gene1wood/followers","following_url":"https://api.github.com/users/gene1wood/following{/other_user}","gists_url":"https://api.github.com/users/gene1wood/gists{/gist_id}","starred_url":"https://api.github.com/users/gene1wood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gene1wood/subscriptions","organizations_url":"https://api.github.com/users/gene1wood/orgs","repos_url":"https://api.github.com/users/gene1wood/repos","events_url":"https://api.github.com/users/gene1wood/events{/privacy}","received_events_url":"https://api.github.com/users/gene1wood/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":94769817,"node_id":"MDU6TGFiZWw5NDc2OTgxNw==","url":"https://api.github.com/repos/pallets/click/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pallets/click/milestones/28","html_url":"https://github.com/pallets/click/milestone/28","labels_url":"https://api.github.com/repos/pallets/click/milestones/28/labels","id":13720762,"node_id":"MI_kwDOASN_zM4A0Vy6","number":28,"title":"8.3.1","description":"","creator":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":2,"closed_issues":12,"state":"open","created_at":"2025-09-18T17:34:20Z","updated_at":"2025-10-20T11:13:17Z","due_on":null,"closed_at":null},"comments":0,"created_at":"2025-07-28T21:24:41Z","updated_at":"2025-10-30T00:21:06Z","closed_at":"2025-10-05T02:54:46Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"After #1836 and #2093 were merged the behavior of the `prompt_suffix` argument in the `click.prompt` and `click.confirm` functions changed.\n\n# Before these changes in click version 7.1.2\n\nPrior to the #1836 and #2093 PRs when an empty `prompt_suffix` was passed, no suffix was applied to the prompt.\n\nHere's how `prompt` used to behave\n\n```python\n>>> import click\n>>> click.prompt(\"test\", prompt_suffix=\"\")\ntestfoo\n'foo'\n>>> click.prompt(\"test\", prompt_suffix=\" \")\ntest foo\n'foo'\n```\n\nNotice that when a `prompt_suffix of `\"\"` is passed, there is no suffix after the prompt text of `test`. This is illustrated by how the text typed by the user (in this case `foo`) displays immediately after the prompt without a space character.\n\n# Current behavior in click 8.0.0 and newer\n\n```python\n>>> import click\n>>> click.prompt(\"test\", prompt_suffix=\"\")\ntest foo\n'foo'\n>>> click.prompt(\"test\", prompt_suffix=\" \")\ntest foo\n'foo'\n```\n\nNotice now that if you tell `prompt` to use no suffix, it still applies a space character suffix.\n\nThis is because the fixes in #1836 and #2093 presumes that the last character of the prompt is a space character. It then [`rstrip`s the space character and adds the space character back in](https://github.com/pallets/click/pull/1836/files#diff-1f88635ce1d1f86bb7f9de29ef053bf8fc628a13530d1d2c6a69d0ad637e32cdR130-R133). This doesn't work if the last character of the prompt is not a space character though.\n\nThis matters because it makes it impossible to do prompts like the following example\n\n# Example\n\n```python\nimport click\nclick.prompt(\"What IP address would you like? : 192.168.1.\", prompt_suffix=\"\")\n```\n\nThis would have the user enter the last octet of an IP and make it clear that they can only set something within the displayed subnet. The problem is that the resulting display looks like this\n\n```\nWhat IP address would you like? : 192.168.1. 123\n```\n\n# Note\n\nThe fixes in these two PRs can't just be reverted because the `readline` behavior that inspired them still exists.\n\nEnvironment:\n\n- Python version: 3.13\n- Click version: 8.0.3\n","closed_by":{"login":"Rowlando13","id":67291205,"node_id":"MDQ6VXNlcjY3MjkxMjA1","avatar_url":"https://avatars.githubusercontent.com/u/67291205?v=4","gravatar_id":"","url":"https://api.github.com/users/Rowlando13","html_url":"https://github.com/Rowlando13","followers_url":"https://api.github.com/users/Rowlando13/followers","following_url":"https://api.github.com/users/Rowlando13/following{/other_user}","gists_url":"https://api.github.com/users/Rowlando13/gists{/gist_id}","starred_url":"https://api.github.com/users/Rowlando13/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rowlando13/subscriptions","organizations_url":"https://api.github.com/users/Rowlando13/orgs","repos_url":"https://api.github.com/users/Rowlando13/repos","events_url":"https://api.github.com/users/Rowlando13/events{/privacy}","received_events_url":"https://api.github.com/users/Rowlando13/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pallets/click/issues/3019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pallets/click/issues/3019/timeline","performed_via_github_app":null,"state_reason":"completed"}