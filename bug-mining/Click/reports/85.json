{"url":"https://api.github.com/repos/pallets/click/issues/3069","repository_url":"https://api.github.com/repos/pallets/click","labels_url":"https://api.github.com/repos/pallets/click/issues/3069/labels{/name}","comments_url":"https://api.github.com/repos/pallets/click/issues/3069/comments","events_url":"https://api.github.com/repos/pallets/click/issues/3069/events","html_url":"https://github.com/pallets/click/issues/3069","id":3434315602,"node_id":"I_kwDOASN_zM7Ms39S","number":3069,"title":"`Sentinel` is passed to `type_cast_value`","user":{"login":"reallistic","id":3686226,"node_id":"MDQ6VXNlcjM2ODYyMjY=","avatar_url":"https://avatars.githubusercontent.com/u/3686226?v=4","gravatar_id":"","url":"https://api.github.com/users/reallistic","html_url":"https://github.com/reallistic","followers_url":"https://api.github.com/users/reallistic/followers","following_url":"https://api.github.com/users/reallistic/following{/other_user}","gists_url":"https://api.github.com/users/reallistic/gists{/gist_id}","starred_url":"https://api.github.com/users/reallistic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reallistic/subscriptions","organizations_url":"https://api.github.com/users/reallistic/orgs","repos_url":"https://api.github.com/users/reallistic/repos","events_url":"https://api.github.com/users/reallistic/events{/privacy}","received_events_url":"https://api.github.com/users/reallistic/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":94769817,"node_id":"MDU6TGFiZWw5NDc2OTgxNw==","url":"https://api.github.com/repos/pallets/click/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pallets/click/milestones/28","html_url":"https://github.com/pallets/click/milestone/28","labels_url":"https://api.github.com/repos/pallets/click/milestones/28/labels","id":13720762,"node_id":"MI_kwDOASN_zM4A0Vy6","number":28,"title":"8.3.1","description":"","creator":{"login":"davidism","id":1242887,"node_id":"MDQ6VXNlcjEyNDI4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1242887?v=4","gravatar_id":"","url":"https://api.github.com/users/davidism","html_url":"https://github.com/davidism","followers_url":"https://api.github.com/users/davidism/followers","following_url":"https://api.github.com/users/davidism/following{/other_user}","gists_url":"https://api.github.com/users/davidism/gists{/gist_id}","starred_url":"https://api.github.com/users/davidism/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidism/subscriptions","organizations_url":"https://api.github.com/users/davidism/orgs","repos_url":"https://api.github.com/users/davidism/repos","events_url":"https://api.github.com/users/davidism/events{/privacy}","received_events_url":"https://api.github.com/users/davidism/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":2,"closed_issues":12,"state":"open","created_at":"2025-09-18T17:34:20Z","updated_at":"2025-10-20T11:13:17Z","due_on":null,"closed_at":null},"comments":4,"created_at":"2025-09-19T13:09:06Z","updated_at":"2025-10-24T00:18:39Z","closed_at":"2025-10-09T02:42:23Z","author_association":"NONE","type":{"id":2218506,"node_id":"IT_kwDOAP-P2c4AIdoK","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-25T17:16:44Z","updated_at":"2024-07-26T10:37:51Z","is_enabled":true},"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Starting in version 8.3.0, a `Sentinel` object is passed in to the `type_cast_value` function of the `Parameter` class and its derivatives if no value is supplied.\n\nReproduction:\n\n```python\n# cli_bug.py\nimport click\n\n\nclass CSVOption(click.Option):\n    def type_cast_value(self, ctx, value):\n        if value:\n            return value.split(\",\")\n        return value\n\n\n@click.command(name=\"run\")\n@click.option(\"--csv\", cls=CSVOption)\ndef main(csv):\n    click.echo(f\"{csv!r}\")\n\nif __name__ == \"__main__\":\n    main()\n```\n\n```shell\n$ uv run --with 'click==8.3.0' cli_bug.py\n\nInstalled 1 package in 1ms\nTraceback (most recent call last):\n  File \"/home/coder/workspace/scratch/click-8_3_0-bug/cli_bug.py\", line 17, in <module>\n    main()\n  File \"/home/coder/.cache/uv/archive-v0/9Q5N3REh-YZUOJbO3iHRv/lib/python3.10/site-packages/click/core.py\", line 1462, in __call__\n    return self.main(*args, **kwargs)\n  File \"/home/coder/.cache/uv/archive-v0/9Q5N3REh-YZUOJbO3iHRv/lib/python3.10/site-packages/click/core.py\", line 1382, in main\n    with self.make_context(prog_name, args, **extra) as ctx:\n  File \"/home/coder/.cache/uv/archive-v0/9Q5N3REh-YZUOJbO3iHRv/lib/python3.10/site-packages/click/core.py\", line 1206, in make_context\n    self.parse_args(ctx, args)\n  File \"/home/coder/.cache/uv/archive-v0/9Q5N3REh-YZUOJbO3iHRv/lib/python3.10/site-packages/click/core.py\", line 1217, in parse_args\n    _, args = param.handle_parse_result(ctx, opts, args)\n  File \"/home/coder/.cache/uv/archive-v0/9Q5N3REh-YZUOJbO3iHRv/lib/python3.10/site-packages/click/core.py\", line 2516, in handle_parse_result\n    value = self.process_value(ctx, value)\n  File \"/home/coder/.cache/uv/archive-v0/9Q5N3REh-YZUOJbO3iHRv/lib/python3.10/site-packages/click/core.py\", line 2401, in process_value\n    value = self.type_cast_value(ctx, value)\n  File \"/home/coder/workspace/scratch/click-8_3_0-bug/cli_bug.py\", line 7, in type_cast_value\n    return value.split(\",\")\nAttributeError: 'Sentinel' object has no attribute 'split'\n```\n\n```shell\nuv run --with 'click<8.3.0' cli_bug.py\nNone\n```\n\nBased on comments in #3065 and #3068 it would make sense to pass through `None` here given that this function is public. At a minimum, a changelog denoting the new behavior would be nice.\n\nEnvironment:\n\n- Python version: 3.10\n- Click version: 8.3.0\n","closed_by":{"login":"Rowlando13","id":67291205,"node_id":"MDQ6VXNlcjY3MjkxMjA1","avatar_url":"https://avatars.githubusercontent.com/u/67291205?v=4","gravatar_id":"","url":"https://api.github.com/users/Rowlando13","html_url":"https://github.com/Rowlando13","followers_url":"https://api.github.com/users/Rowlando13/followers","following_url":"https://api.github.com/users/Rowlando13/following{/other_user}","gists_url":"https://api.github.com/users/Rowlando13/gists{/gist_id}","starred_url":"https://api.github.com/users/Rowlando13/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rowlando13/subscriptions","organizations_url":"https://api.github.com/users/Rowlando13/orgs","repos_url":"https://api.github.com/users/Rowlando13/repos","events_url":"https://api.github.com/users/Rowlando13/events{/privacy}","received_events_url":"https://api.github.com/users/Rowlando13/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pallets/click/issues/3069/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pallets/click/issues/3069/timeline","performed_via_github_app":null,"state_reason":"completed"}