<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:17:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6548] LoggingOutInterceptor logs the wrong Content-Type for some scenarios</title>
                <link>https://issues.apache.org/jira/browse/CXF-6548</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;When the content-type is not explicitly set in a JAXRS scenario using JAXRSClientFactory, the LoggingOutIntereceptor logs the wrong content type application/xml. This can be demonstrated by adding the LoggingOutputInterceptor to systests/jaxrs&lt;br/&gt;
JAXRSClientServerBookTest#testProxyWithCollectionMatrixParams&lt;/p&gt;

&lt;p&gt;This problem does not happen when WebClient is directly used to create a client (e.g., when adding the LoggingOutInterceptor to  JAXRSClientServerBook#testGetBookRoot).&lt;/p&gt;

&lt;p&gt;Below, the output showing the LoggingOutInterceptor logging the wrong content type different from the one that went over the wire and logged by the LoggingInInterceptor at the server.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;----------------------------------------------------------------------------------------------------
Aug 18, 2015 4:12:18 PM org.apache.cxf.interceptor.LoggingOutInterceptor
INFO: Outbound Message
---------------------------
ID: 1
Address: http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:9001/bookstore/segment/matrix-list;first=12;first=3
&lt;/span&gt;Http-Method: GET
Content-Type: application/xml
Headers: {Content-Type=[application/xml], Accept=[application/xml], Accept-Encoding=[gzip;q=1.0, identity; q=0.5, *;q=0]}
--------------------------------------
Aug 18, 2015 4:12:18 PM org.apache.cxf.interceptor.LoggingInInterceptor
INFO: Inbound Message
----------------------------
ID: 2
Address: http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:9001/bookstore/segment/matrix-list;first=12;first=3
&lt;/span&gt;Http-Method: GET
Content-Type: */*
Headers: {Accept=[application/xml], accept-encoding=[gzip;q=1.0, identity; q=0.5, *;q=0], Cache-Control=[no-cache], connection=[keep-alive], content-type=[*/*], Host=[localhost:9001], Pragma=[no-cache], User-Agent=[Apache CXF 3.1.3-SNAPSHOT-c4ce1dd672146fa49f7d6b0aabc563843828fe93]}
--------------------------------------
Aug 18, 2015 4:12:19 PM org.eclipse.jetty.server.handler.ContextHandler doStop
INFO: Stopped o.e.j.s.h.ContextHandler@43bc63a3{/,&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,UNAVAILABLE}
Aug 18, 2015 4:12:19 PM org.eclipse.jetty.server.AbstractConnector doStop
INFO: Stopped ServerConnector@175c2241{HTTP/1.1}{localhost:9001}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</description>
                <environment></environment>
        <key id="12856929">CXF-6548</key>
            <summary>LoggingOutInterceptor logs the wrong Content-Type for some scenarios</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ay">Akitoshi Yoshida</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Aug 2015 14:24:06 +0000</created>
                <updated>Fri, 14 Oct 2016 14:12:02 +0000</updated>
                            <resolved>Thu, 20 Aug 2015 12:23:30 +0000</resolved>
                                    <version>3.0.6</version>
                    <version>3.1.2</version>
                                    <fixVersion>3.1.3</fixVersion>
                    <fixVersion>3.0.7</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14701443" author="sergey_beryozkin" created="Tue, 18 Aug 2015 15:39:19 +0000"  >&lt;p&gt;Hi Aki&lt;/p&gt;

&lt;p&gt;I updated this test, added&lt;br/&gt;
WebClient.getConfig(proxy).getOutInterceptors().add(new LoggingOutInterceptor());&lt;/p&gt;

&lt;p&gt;it reports either wildcard or empty CT. But does report Accept: application/xml which is correct.&lt;br/&gt;
Are you sure you see Content-Type:application/xml ?&lt;/p&gt;</comment>
                            <comment id="14701602" author="ay" created="Tue, 18 Aug 2015 17:05:38 +0000"  >&lt;p&gt;Hi Sergey,&lt;br/&gt;
I don&apos;t understand. ;-(&lt;br/&gt;
I see application/xml in the LogOut&apos;s Content-Type output exactly like shown in the above output. I tried it with 3.1.3-SNAPSHOT and 3.0.7-SNAPSHOT.&lt;br/&gt;
regards aki&lt;/p&gt;</comment>
                            <comment id="14702018" author="sergey_beryozkin" created="Tue, 18 Aug 2015 21:29:31 +0000"  >&lt;p&gt;Hi Aki &lt;br/&gt;
it is actually a proxy specific code which is trying to put something if no Content-Type is set, that definitely can be fixed&lt;br/&gt;
thanks&lt;/p&gt;</comment>
                            <comment id="14702758" author="ay" created="Wed, 19 Aug 2015 09:30:52 +0000"  >&lt;p&gt;Hi Sergey,&lt;br/&gt;
This is not related the the proxy issue but I observed it while looking at that proxy issue and this discrepancy (the content-type that goes over the wire differs from the one that is logged) bothered me. So I opened this ticket to track this issue. It&apos;s just a logging issue. &lt;/p&gt;

&lt;p&gt;I see application/xml coming from here&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/cxf/blob/master/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/ClientProxyImpl.java#L341-L350&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/blob/master/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/ClientProxyImpl.java#L341-L350&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and this value is later ignored for the message that goes over the wire (i.e., either replaced by &quot;&lt;b&gt;/&lt;/b&gt;&quot; by default or removed when the other property is used) but the LoggingOutInt logs this value instead.&lt;/p&gt;

&lt;p&gt;I suppose you are seeing the same behavior. If not, I am puzzled.&lt;/p&gt;

&lt;p&gt;regards, aki&lt;/p&gt;</comment>
                            <comment id="14702855" author="sergey_beryozkin" created="Wed, 19 Aug 2015 11:05:50 +0000"  >&lt;p&gt;Hi Aki, yes, I was indeed referring to ClientProxyImpl. I updated ClientProxyImpl to avoid setting CT if body is null, and transport Headers utility to for custom CT to stay even if it is the empty request - to address your IRC comment, so that users can set a custom CT if needed to override CXF defaulting to &lt;b&gt;/&lt;/b&gt;.  &lt;/p&gt;</comment>
                            <comment id="14704761" author="ay" created="Thu, 20 Aug 2015 12:23:30 +0000"  >&lt;p&gt;the issue has been fixed, thanks to Sergey&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 13 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j21b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>