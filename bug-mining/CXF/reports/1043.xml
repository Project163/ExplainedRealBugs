<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:48:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-3704] Configured namespace map entry overwritten in AegisJSONProvider</title>
                <link>https://issues.apache.org/jira/browse/CXF-3704</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I have a jaxrs service configured as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;util:map id=&lt;span class=&quot;code-quote&quot;&gt;&quot;jsonNamespaceMap&quot;&lt;/span&gt; map-class=&lt;span class=&quot;code-quote&quot;&gt;&quot;java.util.Hashtable&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://acme.com/aegis/customtypes&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;t&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://acme.com/v1/activities&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://model.v1.acme.com&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;m&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/util:map&amp;gt;&lt;/span&gt;	

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;jaxrs:server id=&lt;span class=&quot;code-quote&quot;&gt;&quot;restServer&quot;&lt;/span&gt; address=&lt;span class=&quot;code-quote&quot;&gt;&quot;/rest&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;jaxrs:serviceBeans&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ref bean=&lt;span class=&quot;code-quote&quot;&gt;&quot;bookstoreService&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/jaxrs:serviceBeans&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;jaxrs:providers&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;bean class=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.cxf.jaxrs.provider.AegisJSONProvider&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;namespaceMap&quot;&lt;/span&gt; ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;jsonNamespaceMap&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/jaxrs:providers&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/jaxrs:server&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I then have a JSON payload for my service request:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-javascript&quot;&gt;{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;m.details&quot;&lt;/span&gt;: {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;m.date&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;2011-08-05&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;m.updates&quot;&lt;/span&gt;: [ 
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;a.value&quot;&lt;/span&gt;: {
          &lt;span class=&quot;code-quote&quot;&gt;&quot;t.string&quot;&lt;/span&gt;: {
            &lt;span class=&quot;code-quote&quot;&gt;&quot;t.name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;My &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;t.value&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;myValue&quot;&lt;/span&gt;
          }
        }
      }
    ]
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, the object parameter to the service method is not correctly populated with the value of &lt;tt&gt;date&lt;/tt&gt;, or &lt;tt&gt;updates&lt;/tt&gt;, and the logs contain messages such as:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;WARNING: xsi:type absent, and no type available for m.date
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A bit of digging around, and it seems to me the problem is at line 142 of AegisJSONProvider (and yes, I dislike the namespace map concept as much as the person that added comments at line 140 of AegisJSONProvider!):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;namespaceMap.put(typeToRead.getSchemaType().getNamespaceURI(), &lt;span class=&quot;code-quote&quot;&gt;&quot;ns1&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I believe that &lt;tt&gt;put&lt;/tt&gt; here should be switched to &lt;tt&gt;putIfAbsent&lt;/tt&gt; - what is happening is that on initialisation, the namespace map correctly contains the 3 entries as per the spring config, but when the message is processed, &lt;tt&gt;typeToRead&lt;/tt&gt; is not null, and the configured namespace prefix, {{m}}is overwritten with &lt;tt&gt;ns1&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12517800">CXF-3704</key>
            <summary>Configured namespace map entry overwritten in AegisJSONProvider</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="mrpotes">James Phillpotts</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Aug 2011 15:01:25 +0000</created>
                <updated>Fri, 19 Aug 2011 03:30:04 +0000</updated>
                            <resolved>Fri, 5 Aug 2011 09:56:10 +0000</resolved>
                                    <version>2.4</version>
                                    <fixVersion>2.4.2</fixVersion>
                    <fixVersion>2.5</fixVersion>
                                    <component>Aegis Databinding</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13079879" author="sergey_beryozkin" created="Fri, 5 Aug 2011 09:56:10 +0000"  >&lt;p&gt;ignoreNamespaces may be of help if no input JSON is expected&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5749</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 16 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b73j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63262</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>