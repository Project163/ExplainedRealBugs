<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:48:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-3763] CLONE - JaxWsDynamicClientFactory unable to handle custom exceptions</title>
                <link>https://issues.apache.org/jira/browse/CXF-3763</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;When server throws a custom exception client is showing a NULLPointerException and returning a SoapFault with the error message thrown by the server. But the expected output should be the custom exception.&lt;br/&gt;
Below is the full stack trace.&lt;/p&gt;

&lt;p&gt;Nov 21, 2009 11:25:01 AM org.apache.cxf.bus.spring.BusApplicationContext getConfigResources&lt;br/&gt;
INFO: No cxf.xml configuration file detected, relying on defaults.&lt;br/&gt;
Nov 21, 2009 11:25:03 AM org.apache.cxf.endpoint.dynamic.DynamicClientFactory outputDebug&lt;br/&gt;
INFO: Created classes: contactus.CxCSWebserviceExcpetion123, contactus.ObjectFactory, contactus.PostMessage, contactus.PostMessageResponse&lt;br/&gt;
Nov 21, 2009 11:25:05 AM org.apache.cxf.interceptor.ClientFaultConverter processFaultDetail&lt;br/&gt;
INFO: Exception occurred while creating exception: null&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.cxf.interceptor.ClientFaultConverter.getConstructor(ClientFaultConverter.java:182)&lt;br/&gt;
	at org.apache.cxf.interceptor.ClientFaultConverter.processFaultDetail(ClientFaultConverter.java:154)&lt;br/&gt;
	at org.apache.cxf.interceptor.ClientFaultConverter.handleMessage(ClientFaultConverter.java:74)&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:236)&lt;br/&gt;
	at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:96)&lt;br/&gt;
	at org.apache.cxf.binding.soap.interceptor.CheckFaultInterceptor.handleMessage(CheckFaultInterceptor.java:69)&lt;br/&gt;
	at org.apache.cxf.binding.soap.interceptor.CheckFaultInterceptor.handleMessage(CheckFaultInterceptor.java:34)&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:236)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:658)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:2139)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:2022)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1947)&lt;br/&gt;
	at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:66)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:632)&lt;br/&gt;
	at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:236)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:472)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:302)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:254)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:274)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:260)&lt;br/&gt;
	at com.chordiant.cs.scheduler.client.CXFDynamicContactClient.main(CXFDynamicContactClient.java:23)&lt;br/&gt;
org.apache.cxf.binding.soap.SoapFault: Exception from postMessages&lt;/p&gt;



&lt;p&gt;Here is the client Code.&lt;/p&gt;

&lt;p&gt;		try&lt;/p&gt;
		{
			JaxWsDynamicClientFactory dcf = JaxWsDynamicClientFactory.newInstance();
			Client client = dcf.createClient(&quot;http://localhost:8080/contactUs/contactus?wsdl&quot;, Thread.currentThread().getContextClassLoader());
			client.invoke(&quot;postMessage&quot;, &quot;test&quot;);
		}
&lt;p&gt;		catch(Exception e)&lt;/p&gt;
{
			System.out.println(e);
		}
</description>
                <environment>&lt;p&gt;Windows OS with tomcat server&lt;/p&gt;</environment>
        <key id="12520179">CXF-3763</key>
            <summary>CLONE - JaxWsDynamicClientFactory unable to handle custom exceptions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="esalaza">Esteban Salazar</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Aug 2011 23:17:23 +0000</created>
                <updated>Tue, 14 Oct 2014 09:06:59 +0000</updated>
                            <resolved>Fri, 26 Aug 2011 19:58:07 +0000</resolved>
                                    <version>2.4.2</version>
                                    <fixVersion>2.4.3</fixVersion>
                                    <component>JAX-WS Runtime</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13091408" author="esalaza" created="Thu, 25 Aug 2011 23:19:27 +0000"  >&lt;p&gt;Although &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-2555&quot; title=&quot;JaxWsDynamicClientFactory unable to handle custom exceptions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-2555&quot;&gt;&lt;del&gt;CXF-2555&lt;/del&gt;&lt;/a&gt; is closed as fixed in 2.2.6, some users reported the issue was still happening in 2.2.8.&lt;/p&gt;

&lt;p&gt;I tried it in 2.4.2 and the issue is also still hapenning.&lt;/p&gt;

&lt;p&gt;The stack trace in 2.4.2 is almost the same:&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.cxf.interceptor.ClientFaultConverter.getConstructor(ClientFaultConverter.java:204)&lt;br/&gt;
	at org.apache.cxf.interceptor.ClientFaultConverter.processFaultDetail(ClientFaultConverter.java:176)&lt;br/&gt;
	at org.apache.cxf.interceptor.ClientFaultConverter.handleMessage(ClientFaultConverter.java:80)&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)&lt;br/&gt;
	at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:105)&lt;br/&gt;
	at org.apache.cxf.binding.soap.interceptor.CheckFaultInterceptor.handleMessage(CheckFaultInterceptor.java:69)&lt;br/&gt;
	at org.apache.cxf.binding.soap.interceptor.CheckFaultInterceptor.handleMessage(CheckFaultInterceptor.java:34)&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:771)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:1600)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:1485)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1393)&lt;br/&gt;
	at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:640)&lt;br/&gt;
	at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:519)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:449)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:352)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:304)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:324)&lt;br/&gt;
	at test.CustomExceptionDynamicTestClientMain.main(CustomExceptionDynamicTestOASClientMain.java:31)&lt;/p&gt;

&lt;p&gt;The fix in Jira for &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-2555&quot; title=&quot;JaxWsDynamicClientFactory unable to handle custom exceptions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-2555&quot;&gt;&lt;del&gt;CXF-2555&lt;/del&gt;&lt;/a&gt; includes code (ExceptionCreator in TypeClassInitializer) to generate a JAXWS-type exception class which is mandatory to fix the error, but I have noticed this code is not being reached for the MessagePartInfo parts corresponding to the FaultInfo message.&lt;/p&gt;

&lt;p&gt;In the physical code generation phase, DynamicClientFactory generates the exception faultInfo bean class, but not  the jaxws excepcion class (the one that extends java.lang.Exception). Later, before returning the generated Client, the TypeClassInitializer service model visitor is called and is expected to generate the missing exception classes when visiting the MessagePartInfo parts related to the FaultInfo message. In my test cases, the visitor&apos;s &quot;begin&quot; method always return before generating the class due to the condition &lt;tt&gt;if (!allowWrapperOperations &amp;amp;&amp;amp; op.isUnwrappedCapable() &amp;amp;&amp;amp; !op.isUnwrapped())&lt;/tt&gt;. For this reason, when ClientFaultConverter asks for the exception class (which is supossed to be stored as a property of the FaultInfo message), it finds it null and generate the NPE.&lt;/p&gt;

&lt;p&gt;I modified the condition to &lt;tt&gt;if (!isFault &amp;amp;&amp;amp; !allowWrapperOperations &amp;amp;&amp;amp; op.isUnwrappedCapable() &amp;amp;&amp;amp; !op.isUnwrapped())&lt;/tt&gt; and my tests now work OK, but I&apos;m afraid I&apos;m maybe not taking into account all the wrapped/unwrapped variations.&lt;/p&gt;</comment>
                            <comment id="13091988" author="dkulp" created="Fri, 26 Aug 2011 19:58:07 +0000"  >
&lt;p&gt;Patch applied.  Thanks!&lt;/p&gt;</comment>
                            <comment id="13095546" author="esalaza" created="Thu, 1 Sep 2011 19:19:12 +0000"  >&lt;p&gt;I did the test again and the custom exceptions are now handled correctly.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12441360">CXF-2555</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12747961">CXF-6050</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12491708" name="TypeClassInitializer.java.patch" size="574" author="esalaza" created="Thu, 25 Aug 2011 23:22:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3589</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b71b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63252</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>