<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:15:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6406] WS-RM persistence with RMTxStore does not work with JNDI Lookup</title>
                <link>https://issues.apache.org/jira/browse/CXF-6406</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;1.) create new empty database schema&lt;br/&gt;
2.) configure a JNDI Datasource within application server that uses the schema&lt;br/&gt;
3.) Use the configuration as in attached file &quot;ClientConfig_with_WS-RM.xml&quot;&lt;br/&gt;
4.) See what happens.....&lt;/p&gt;

&lt;p&gt;You get the below exception, &lt;/p&gt;

&lt;p&gt;Caused by: java.sql.SQLException: You cannot commit with autocommit set!&lt;br/&gt;
	at org.jboss.jca.adapters.jdbc.BaseWrapperManagedConnection.jdbcCommit(BaseWrapperManagedConnection.java:1071)&lt;br/&gt;
	at org.jboss.jca.adapters.jdbc.WrappedConnection.commit(WrappedConnection.java:758)&lt;br/&gt;
	at org.apache.cxf.ws.rm.persistence.jdbc.RMTxStore.commit(RMTxStore.java:709)&lt;br/&gt;
	at org.apache.cxf.ws.rm.persistence.jdbc.RMTxStore.removeSourceSequence(RMTxStore.java:495)&lt;br/&gt;
	... 90 more&lt;/p&gt;


&lt;p&gt;It seems that the changes for &apos;setAutoCommit&apos; in &apos;org.apache.cxf.ws.rm.persistence.jdbc.RMTxStore&apos; were done in &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-3114&quot; title=&quot;WS-RM&amp;#39;s RMTxStore&amp;#39;s does not recover stored sequences after restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-3114&quot;&gt;&lt;del&gt;CXF-3114&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-3114&quot; title=&quot;WS-RM&amp;#39;s RMTxStore&amp;#39;s does not recover stored sequences after restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-3114&quot;&gt;&lt;del&gt;CXF-3114&lt;/del&gt;&lt;/a&gt; introduced a change  a change to con.setAutoCommit(false) to con.setAutoCommit(true) in the init() method.&lt;/p&gt;

&lt;p&gt;Since the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-3114&quot; title=&quot;WS-RM&amp;#39;s RMTxStore&amp;#39;s does not recover stored sequences after restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-3114&quot;&gt;&lt;del&gt;CXF-3114&lt;/del&gt;&lt;/a&gt;, the code&lt;br/&gt;
has been refactored and the line moved from init() to createTables() but the finally block that was&lt;br/&gt;
added is missing and so autoCommit flag is never set back to false. &lt;/p&gt;

&lt;p&gt;It seems that the &apos;finally&apos; block is missing, con.setAutoCommit(false) , which was removed for the fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-3114&quot; title=&quot;WS-RM&amp;#39;s RMTxStore&amp;#39;s does not recover stored sequences after restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-3114&quot;&gt;&lt;del&gt;CXF-3114&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;CXF 2.7.11 with JBoss EAP 6.3&lt;/p&gt;</environment>
        <key id="12830192">CXF-6406</key>
            <summary>WS-RM persistence with RMTxStore does not work with JNDI Lookup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ay">Akitoshi Yoshida</assignee>
                                    <reporter username="vrlgohel">Viral Gohel</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 May 2015 15:08:58 +0000</created>
                <updated>Mon, 10 Apr 2017 19:06:58 +0000</updated>
                            <resolved>Mon, 1 Jun 2015 10:34:46 +0000</resolved>
                                                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14550383" author="ay" created="Tue, 19 May 2015 12:55:27 +0000"  >&lt;p&gt;Hi Viral,&lt;br/&gt;
thank you for reporting this bug.&lt;br/&gt;
The patch has been integrated into the snapshot for 3.1.x, 3.0.x, and 2.7.x.&lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12479372">CXF-3114</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12733161" name="ClientConfig_with_WS-RM.xml" size="3448" author="vrlgohel" created="Fri, 15 May 2015 15:09:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2esdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>