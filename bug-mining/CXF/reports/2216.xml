<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:09:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5702] CXF 3.0 ApplicationPath issue with JAX-RS</title>
                <link>https://issues.apache.org/jira/browse/CXF-5702</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;It seems CXF JAX-RS implementation has something wrong with the relationship between defined servlet-mapping and the value of ApplicationPath annotation.&lt;/p&gt;

&lt;p&gt;From JSR-339 spec, section 2.3.2: If the Application subclass is annotated with @ApplicationPath, implementations are REQUIRED to use the value of this annotation appended with &#8221;/*&#8221; to define a mapping for the added server. Otherwise, the application MUST be packaged with a web.xml that specifies a servlet mapping.&lt;/p&gt;

&lt;p&gt;Also from ApplicationPath javadoc:&lt;br/&gt;
Identifies the application path that serves as the base URI for all resource URIs provided by Path. May only be applied to a subclass of Application. &lt;b&gt;When published in a Servlet container, the value of the application path may be overridden using a servlet-mapping element in the web.xml.&lt;/b&gt;&lt;br/&gt;
&lt;a href=&quot;https://jsr311.java.net/nonav/javadoc/javax/ws/rs/ApplicationPath.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jsr311.java.net/nonav/javadoc/javax/ws/rs/ApplicationPath.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;From above information, if both servlet-mapping in web.xml and ApplicationPath has value, only one of them should be used as the base URI, and it should be the value of servlet-mapping in web.xml.&lt;/p&gt;

&lt;p&gt;In my application, my web.xml looks like below. There are two servlet defined, each for one jaxrs application. And the servlet-mapping values are defined as &quot;/first/&quot; and &quot;/second/&quot;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;	&amp;lt;servlet&amp;gt;&lt;br/&gt;
		&amp;lt;servlet-name&amp;gt;rest1&amp;lt;/servlet-name&amp;gt;&lt;br/&gt;
		&amp;lt;servlet-class&amp;gt;org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet&amp;lt;/servlet-class&amp;gt;&lt;br/&gt;
		&amp;lt;init-param&amp;gt;&lt;br/&gt;
			&amp;lt;param-name&amp;gt;javax.ws.rs.Application&amp;lt;/param-name&amp;gt;&lt;br/&gt;
			&amp;lt;param-value&amp;gt;com.ibm.sample.jaxrs.UserDemoApplication&amp;lt;/param-value&amp;gt;&lt;br/&gt;
		&amp;lt;/init-param&amp;gt;&lt;br/&gt;
	&amp;lt;/servlet&amp;gt;&lt;br/&gt;
	&amp;lt;servlet&amp;gt;&lt;br/&gt;
		&amp;lt;servlet-name&amp;gt;rest2&amp;lt;/servlet-name&amp;gt;&lt;br/&gt;
		&amp;lt;servlet-class&amp;gt;org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet&amp;lt;/servlet-class&amp;gt;&lt;br/&gt;
		&amp;lt;init-param&amp;gt;&lt;br/&gt;
			&amp;lt;param-name&amp;gt;javax.ws.rs.Application&amp;lt;/param-name&amp;gt;&lt;br/&gt;
			&amp;lt;param-value&amp;gt;com.ibm.sample.jaxrs.GroupDemoApplication&amp;lt;/param-value&amp;gt;&lt;br/&gt;
		&amp;lt;/init-param&amp;gt;&lt;br/&gt;
	&amp;lt;/servlet&amp;gt;&lt;br/&gt;
	&amp;lt;servlet-mapping&amp;gt;&lt;br/&gt;
		&amp;lt;servlet-name&amp;gt;rest1&amp;lt;/servlet-name&amp;gt;&lt;br/&gt;
		&amp;lt;url-pattern&amp;gt;/first/*&amp;lt;/url-pattern&amp;gt;&lt;br/&gt;
	&amp;lt;/servlet-mapping&amp;gt;&lt;br/&gt;
	&amp;lt;servlet-mapping&amp;gt;&lt;br/&gt;
		&amp;lt;servlet-name&amp;gt;rest2&amp;lt;/servlet-name&amp;gt;&lt;br/&gt;
		&amp;lt;url-pattern&amp;gt;/second/*&amp;lt;/url-pattern&amp;gt;&lt;br/&gt;
	&amp;lt;/servlet-mapping&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;And in my application classes:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;@ApplicationPath(&quot;userdemo&quot;)&lt;br/&gt;
public class UserDemoApplication extends javax.ws.rs.core.Application {&lt;/p&gt;

&lt;p&gt;@ApplicationPath(&quot;groupdemo&quot;)&lt;br/&gt;
public class GroupDemoApplication extends javax.ws.rs.core.Application {&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So in this case according to spec and javadoc, &quot;/first/&quot; and &quot;/second/&quot; should be used as the base URI, but not the &quot;userdemo&quot; and &quot;groupdemo&quot; or BOTH.&lt;/p&gt;

&lt;p&gt;But in my CXF application I can only access the resources via URLs:&lt;br/&gt;
&lt;a href=&quot;http://localhost:9080/SingleParameterCxf/first/userdemo/users/eric&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9080/SingleParameterCxf/first/userdemo/users/eric&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://localhost:9080/SingleParameterCxf/second/groupdemo/groups/root&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9080/SingleParameterCxf/second/groupdemo/groups/root&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;However if I implement the same application using Jersey RI libs, I can access my resources via URLs:&lt;br/&gt;
&lt;a href=&quot;http://localhost:9080/SingleParameterJersey/first/users/eric&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9080/SingleParameterJersey/first/users/eric&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://localhost:9080/SingleParameterJersey/second/groups/root&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9080/SingleParameterJersey/second/groups/root&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;My feeling is Jersey RI implementation is correct behavior according to SPEC and JavaDoc. Please let me know if my understanding is correct or not.&lt;/p&gt;

&lt;p&gt;Any help is highly appreciated! Thank you!&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows&lt;/p&gt;</environment>
        <key id="12709207">CXF-5702</key>
            <summary>CXF 3.0 ApplicationPath issue with JAX-RS</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="kouzq">Kou, Zhi Qiang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Apr 2014 03:52:40 +0000</created>
                <updated>Tue, 15 Mar 2016 16:55:57 +0000</updated>
                            <resolved>Tue, 22 Apr 2014 12:36:30 +0000</resolved>
                                    <version>3.0.0-milestone2</version>
                                    <fixVersion>3.0</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13976700" author="sergey_beryozkin" created="Tue, 22 Apr 2014 12:36:30 +0000"  >&lt;p&gt;You are right, ApplicationPath needs to be ignored by default&lt;/p&gt;</comment>
                            <comment id="14113017" author="jhhartley" created="Wed, 27 Aug 2014 22:54:23 +0000"  >&lt;p&gt;I&apos;m experiencing a problem migrating from CXF 2.7, and wonder if this fix was the cause. I am relying on the ApplicationPath parameter, and NOT overriding it in web.xml. &lt;/p&gt;

&lt;p&gt;With the CXFNonSpringJaxrsServlet configured for /api/*, and my ApplicationV1 class annotated with &amp;#64;ApplicationPath(&quot;v1&quot;), and my search service annotated with &amp;#64;Path(&quot;search&quot;), in CXF 2.7 I can request /api/v1/search and get my search results. In the log I see&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;DEBUG JAXRSUtils - Trying to select a resource class, request path : /search/&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;After migrating to CXF 3.0.1, for the same request I get a 404 error and see:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;DEBUG JAXRSUtils - Trying to select a resource class, request path : /v1/search/&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Aside from being backward-incompatible, this seems inconsistent with the javadoc for the Path annotation:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Paths are relative. For an annotated class the base URI is the application path, see  {&amp;#64;link ApplicationPath}.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I wonder if the ignoring of ApplicationPath by default got a bit too aggressive. &lt;/p&gt;</comment>
                            <comment id="14113638" author="sergey_beryozkin" created="Thu, 28 Aug 2014 10:27:50 +0000"  >&lt;p&gt;Hi, well, what can we do if the spec API requires that either the explicit servlet pattern or ApplicationPath is used, combining both values now requires setting a servlet init parameter.&lt;br/&gt;
Can you see the contradiction in the Description of this JIRA, I could not. And CXF needs to be compliant by default.&lt;br/&gt;
Cheers, Sergey &lt;/p&gt;</comment>
                            <comment id="14113978" author="jhhartley" created="Thu, 28 Aug 2014 17:11:42 +0000"  >&lt;p&gt;Ah, now I see the distinction. Had to read it over several times. I had in my head that a single servlet could in theory contain multiple Applications, but that&apos;s obviously not correct. In 2.7, the ApplicationPath was appended to the servlet mapping, but I see that by spec when using a servlet container rather than Spring, the ApplicationPath must be overridden.&lt;/p&gt;</comment>
                            <comment id="15194206" author="jan.cetkovsky@gmail.com" created="Mon, 14 Mar 2016 21:44:43 +0000"  >&lt;p&gt;This appears to be present in the 2.7.x (tested on 2.7.15 and 2.7.18) is there a plan to back port this fix to the 2.7 branch?&lt;/p&gt;</comment>
                            <comment id="15194267" author="sergey_beryozkin" created="Mon, 14 Mar 2016 22:11:34 +0000"  >&lt;p&gt;Does setting a servlet parameter to true/false, as needed, fixes it ? All I did was to change the default value of this parameter. &lt;/p&gt;</comment>
                            <comment id="15194302" author="jan.cetkovsky@gmail.com" created="Mon, 14 Mar 2016 22:32:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergey_beryozkin&quot; class=&quot;user-hover&quot; rel=&quot;sergey_beryozkin&quot;&gt;sergey_beryozkin&lt;/a&gt; which servlet parameter (you mean &amp;lt;init-param&amp;gt;, what would be the key)? The issue I&apos;m seeing in the 2.7 is if using:&lt;/p&gt;

&lt;p&gt;  &amp;lt;servlet&amp;gt;&lt;br/&gt;
        &amp;lt;servlet-name&amp;gt;com.example.MyApplication&amp;lt;/servlet-name&amp;gt;&lt;br/&gt;
        &amp;lt;load-on-startup&amp;gt;1&amp;lt;/load-on-startup&amp;gt;&lt;br/&gt;
    &amp;lt;/servlet&amp;gt;&lt;br/&gt;
    &amp;lt;servlet-mapping&amp;gt;&lt;br/&gt;
        &amp;lt;servlet-name&amp;gt;com.example.MyApplication&amp;lt;/servlet-name&amp;gt;&lt;br/&gt;
        &amp;lt;url-pattern&amp;gt;/first&amp;lt;/url-pattern&amp;gt;&lt;br/&gt;
    &amp;lt;/servlet-mapping&amp;gt;&lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;@ApplicationPath(&quot;/second&quot;)&lt;br/&gt;
public class MyApplication extends Application {&lt;/p&gt;


&lt;p&gt;than the application gets bind to &lt;br/&gt;
/first/second&lt;/p&gt;

&lt;p&gt;while according the spec it should get overriden and be &lt;br/&gt;
/first &lt;br/&gt;
only&lt;/p&gt;</comment>
                            <comment id="15194308" author="sergey_beryozkin" created="Mon, 14 Mar 2016 22:37:34 +0000"  >&lt;p&gt;&quot;ignore.application.path&quot;&lt;/p&gt;</comment>
                            <comment id="15194330" author="jan.cetkovsky@gmail.com" created="Mon, 14 Mar 2016 22:48:52 +0000"  >&lt;p&gt; &amp;lt;servlet&amp;gt;&lt;br/&gt;
        &amp;lt;servlet-name&amp;gt;com.example.MyApplication&amp;lt;/servlet-name&amp;gt;&lt;br/&gt;
        &amp;lt;load-on-startup&amp;gt;1&amp;lt;/load-on-startup&amp;gt;&lt;br/&gt;
       &amp;lt;init-param&amp;gt;&lt;br/&gt;
            &amp;lt;param-name&amp;gt;ignore.application.path&amp;lt;/param-name&amp;gt;&lt;br/&gt;
            &amp;lt;param-value&amp;gt;true&amp;lt;/param-value&amp;gt;&lt;br/&gt;
        &amp;lt;/init-param&amp;gt;&lt;br/&gt;
    &amp;lt;/servlet&amp;gt;&lt;br/&gt;
    &amp;lt;servlet-mapping&amp;gt;&lt;br/&gt;
        &amp;lt;servlet-name&amp;gt;com.example.MyApplication&amp;lt;/servlet-name&amp;gt;&lt;br/&gt;
        &amp;lt;url-pattern&amp;gt;/aaa/*&amp;lt;/url-pattern&amp;gt;&lt;br/&gt;
    &amp;lt;/servlet-mapping&amp;gt;&lt;/p&gt;

&lt;p&gt;@ApplicationPath(&quot;/rs/ga/v1&quot;)&lt;br/&gt;
public class MyApplication extends Application {&lt;/p&gt;

&lt;p&gt;REST Application: &lt;a href=&quot;http://localhost:8080/registry/aaa/rs/ga/v1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/registry/aaa/rs/ga/v1&lt;/a&gt;                                  -&amp;gt; com.example.MyApplication&lt;/p&gt;

&lt;p&gt;doesn&apos;t seem to work on the 2.7.x . I am running it on TomEE 1.7.3 and I&apos;m not explicitly defining it to be CXF servlet, if it makes difference.&lt;/p&gt;

&lt;p&gt;EDIT: Just tested it on TomEE 7 which has CXF 3.1.x and if this was fixed in 3.0, the problem probably lies with the openEJB wrapper there&lt;/p&gt;</comment>
                            <comment id="15195074" author="sergey_beryozkin" created="Tue, 15 Mar 2016 10:32:19 +0000"  >&lt;p&gt;Right, this issue is really about using a CXFNonSpringJaxrsServlet to load an Application and I have a test confirming the &quot;ignore.application.path&quot; is effective.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure how what you typed is supported in TomEE - all of those extra variations related to how Application is loaded are supported really well in CXF but it is available from CXF 3.1.0, here is the relevant text:&lt;/p&gt;

&lt;p&gt;&quot;Starting from CXF 3.1.0: JaxrsServletContextInitializer will be shipped in a cxf-rt-rs-http-sc module. This will support  no-web.xml and other JAX-RS deployments depending on the container auto-discovery mechanism as described in a 2.3.2 section of JSR-339 (JAX-RS 2.0).&quot;  &lt;/p&gt;

&lt;p&gt;Given that you see your servlet loaded in TomEE which depends on CXF 2.7.x, it looks like that TomEE does have some code for it too and I guess it delegates to a CXFServlet internally - please report this issue to TomEE and ask Romain to set &quot;ignore.application.path&quot; internally to &apos;true&apos;, given that in CXF 2.7.x, as per this issue, this path is not ignored by default.&lt;/p&gt;</comment>
                            <comment id="15195628" author="jan.cetkovsky@gmail.com" created="Tue, 15 Mar 2016 16:53:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergeyb&quot; class=&quot;user-hover&quot; rel=&quot;sergeyb&quot;&gt;sergeyb&lt;/a&gt; Thank you for your help! I reported this to Romain yesterday already and he fixed it under &lt;a href=&quot;https://issues.apache.org/jira/browse/TOMEE-1731&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/TOMEE-1731&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15195638" author="sergey_beryozkin" created="Tue, 15 Mar 2016 16:55:57 +0000"  >&lt;p&gt;Np, thanks for coordinating it, yes, Romain does work fast &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Cheers, Sergey&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387530</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uran:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387792</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>