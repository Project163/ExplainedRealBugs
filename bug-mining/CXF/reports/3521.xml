<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:35:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-8282] Set read timeout using netty client</title>
                <link>https://issues.apache.org/jira/browse/CXF-8282</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am using&#160;cxf-rt-transports-http-netty-client (3.3.6) in order to set a client generated by jaxws using the Netty configuration. I want to set a read timeout in my client configuration because the server&apos;s response time is ocasionally too long.&lt;/p&gt;

&lt;p&gt;Connection timeout and Receive timeout are correctly set in the NettyHttpConduit but it looks like the read timeout can not be set.&#160;&lt;/p&gt;

&lt;p&gt;My client configuration is set as follows:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; client = (&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JaxWsProxyFactoryBean()).create();

&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Client clientProxy = ClientProxy.getClient(client);
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; HTTPConduit httpConduit = (HTTPConduit) clientProxy.getConduit();
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; HTTPClientPolicy httpClientPolicy = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HTTPClientPolicy();             

httpClientPolicy.setAsyncExecuteTimeout(connectTimeout.toMillis());
httpClientPolicy.setConnectionTimeout(connectTimeout.toMillis());
httpClientPolicy.setReceiveTimeout(readTimeout.toMillis());
httpConduit.setClient(httpClientPolicy);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13304569">CXF-8282</key>
            <summary>Set read timeout using netty client</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="reta">Andriy Redko</assignee>
                                    <reporter username="sanorcdel">Santiago Orcajo</reporter>
                        <labels>
                            <label>cxf</label>
                            <label>jax-ws,</label>
                            <label>netty</label>
                            <label>timeout</label>
                    </labels>
                <created>Wed, 13 May 2020 08:35:41 +0000</created>
                <updated>Wed, 22 Dec 2021 20:43:45 +0000</updated>
                            <resolved>Thu, 21 May 2020 21:57:24 +0000</resolved>
                                    <version>3.3.6</version>
                    <version>3.2.13</version>
                                    <fixVersion>3.2.14</fixVersion>
                    <fixVersion>3.3.7</fixVersion>
                    <fixVersion>3.4.0</fixVersion>
                                    <component>JAX-WS Runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17107831" author="reta" created="Fri, 15 May 2020 01:43:39 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sanorcdel&quot; class=&quot;user-hover&quot; rel=&quot;sanorcdel&quot;&gt;sanorcdel&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Could you please clarify if you use async / sync invocations (I suspect async, but would like to confirm). &lt;br/&gt;
Thank you.&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160; Andriy Redko&lt;/p&gt;</comment>
                            <comment id="17108055" author="sanorcdel" created="Fri, 15 May 2020 07:57:46 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I am using async invocations as you suspect. I want to use a reactive client so I have tried the invocation above:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Mono&amp;lt;ResponseObject&amp;gt; response = Mono.create(sink -&amp;gt; client.operationAsync(request,
                ReactorAsyncHandler.into(sink)));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;On this way, the request is sent correctly and I can see how the server side returns the message. The problem occurs when the server does not return any response message in the read timeout.&lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;

&lt;p&gt;Best regards,&lt;/p&gt;

&lt;p&gt;Santiago&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17109755" author="reta" created="Mon, 18 May 2020 02:04:52 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sanorcdel&quot; class=&quot;user-hover&quot; rel=&quot;sanorcdel&quot;&gt;sanorcdel&lt;/a&gt; , the fix went into latest snapshots (3.2.14, 3.3.7), may I ask you please to give it a try? Thank you.&lt;/p&gt;</comment>
                            <comment id="17110152" author="sanorcdel" created="Mon, 18 May 2020 11:24:16 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thanks for your quick response. I have tried the 3.3.7-SNAPSHOT version and it works when the read timeout is surpassed. However, when a response does not surpass the read timeout I can see the following lines in my console logs:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
WARN  io.netty.channel.AbstractChannelHandlerContext -  An exception &lt;span class=&quot;code-quote&quot;&gt;&apos;java.lang.NullPointerException&apos;&lt;/span&gt; [enable DEBUG level &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; full stacktrace] was thrown by a user handler&apos;s exceptionCaught() method &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; handling the following exception:
io.netty.handler.timeout.ReadTimeoutException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The NpE is thrown when the read timeout is surpassed (without take in account if the server has returned a response or not). I think the exception is provoked due to the following lines of the exceptionCaught method in the NettyHttpClientHandler class:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; NettyHttpClientRequest request = sendedQueue.poll();
            request.getCxfResponseCallback().error(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(cause));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Could it happen due to the ChannelHandlerContext object is not closed? The method channelReadComplete of the NettyHttpClientHandler could close the channel if it is set on this way:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void channelReadComplete(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ChannelHandlerContext ctx) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        ctx.flush();
        &lt;span class=&quot;code-comment&quot;&gt;//Now, we close the channel:
&lt;/span&gt;        ctx.close();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I guess it could be a solution. What do you think?&lt;/p&gt;

&lt;p&gt;Thank you,&lt;/p&gt;

&lt;p&gt;Santiago&lt;/p&gt;</comment>
                            <comment id="17110568" author="reta" created="Mon, 18 May 2020 19:50:34 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sanorcdel&quot; class=&quot;user-hover&quot; rel=&quot;sanorcdel&quot;&gt;sanorcdel&lt;/a&gt; ,&lt;/p&gt;

&lt;p&gt;Thanks&#160; a mill for checking, indeed I was able to see the same problem in case of successful response (followed by ReadTimeoutException). I am pretty sure the fix you are suggestion is very right (came to the same conclusions), I will test it and update you shortly. Thank.&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
&#160;&#160;&#160; Andriy Redko&lt;/p&gt;</comment>
                            <comment id="17111310" author="sanorcdel" created="Tue, 19 May 2020 16:11:11 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Once again, thanks for your quick response.&lt;/p&gt;

&lt;p&gt;Do you have an estimated date for the 3.3.7 release?&lt;/p&gt;

&lt;p&gt;Best regards,&lt;/p&gt;

&lt;p&gt;Santiago&lt;/p&gt;</comment>
                            <comment id="17111559" author="reta" created="Tue, 19 May 2020 21:46:51 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sanorcdel&quot; class=&quot;user-hover&quot; rel=&quot;sanorcdel&quot;&gt;sanorcdel&lt;/a&gt; ,&lt;/p&gt;

&lt;p&gt;The issue with ReadTimeoutException after the successful response should be fixed now, fresh snapshots are published. May I ask you please to give it another try? Regarding the 3.3.7 release, we don&apos;t have official date yet, but I would expect end of May / early June, a number of fixes and features are lined up. Thank you.&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
&#160;&#160;&#160; Andriy Redko&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17113220" author="sanorcdel" created="Thu, 21 May 2020 14:22:32 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I have tried again with the new snapshot version and everything is working fine in my tests. I look forward this version release.&lt;/p&gt;

&lt;p&gt;Thanks for your support,&lt;/p&gt;

&lt;p&gt;Santiago&lt;/p&gt;</comment>
                            <comment id="17113568" author="reta" created="Thu, 21 May 2020 21:57:12 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sanorcdel&quot; class=&quot;user-hover&quot; rel=&quot;sanorcdel&quot;&gt;sanorcdel&lt;/a&gt; , much appreciated!&lt;/p&gt;</comment>
                            <comment id="17124699" author="sanorcdel" created="Wed, 3 Jun 2020 07:27:49 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Any estimate date for the 3.3.7 release version?&lt;/p&gt;

&lt;p&gt;Thank you,&lt;/p&gt;

&lt;p&gt;Santiago&lt;/p&gt;</comment>
                            <comment id="17125360" author="reta" created="Wed, 3 Jun 2020 22:22:43 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sanorcdel&quot; class=&quot;user-hover&quot; rel=&quot;sanorcdel&quot;&gt;sanorcdel&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;There are few issues in work (from other team members), it has been 2 month since the last release, I expect the vote to be called soon, thank you.&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
    Andriy Redko&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0eobk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>