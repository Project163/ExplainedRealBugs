<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:32:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7828] Increased size of the payload(xml as a string) results - A SOAP 1.2 message is not valid when sent to a SOAP 1.1 only endpoint. - Error</title>
                <link>https://issues.apache.org/jira/browse/CXF-7828</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;SOAP WSDL&lt;/p&gt;

&lt;p&gt;Generated client stub using the apache cxf - wsdl2java feature.&lt;/p&gt;

&lt;p&gt;When invoking the SOAP webservice using the SOAP client stubs generated it results an error -&#160;A SOAP 1.2 message is not valid when sent to a SOAP 1.1 only endpoint.&#160;&lt;/p&gt;

&lt;p&gt;Upon further analysis we identified &lt;b&gt;increased size of the xml string results above error&lt;/b&gt;. For the &lt;b&gt;lower size of the xml string the service works fine&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;Below is the snippet of the code we are using when observed in debug the &lt;b&gt;port&lt;/b&gt; object refers to &quot;org.apache.cxf.jaxws.JaxWsClientProxy&quot; class pointing to the client-stub class(FASPSoap).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; orderxml = &lt;span class=&quot;code-quote&quot;&gt;&quot;Order xml constructed as a &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&quot;&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Transfer201210 ss = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Transfer201210();
ss.addPort(Transfer201210.Transfer201210Port, &lt;span class=&quot;code-quote&quot;&gt;&quot;Transfer201210Binding&quot;&lt;/span&gt;, soapapiurl);
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FASPSoap port = ss.getTransfer201210Port();
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; SubmitRequest r = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SubmitRequest();
r.setDefinition(orderxml);
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; SubmitResponse _submit__return = port.submit(r);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;As per the wsdl the SubmitRequest object accepts the definition attribute as a String. See below.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12937316/12937316_image-2018-08-27-10-34-12-193.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Please help us know if this a &quot;memory intensive&quot; related operation issue. And how should it be addressed.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Amar&lt;/p&gt;</description>
                <environment>&lt;p&gt;Production&lt;/p&gt;</environment>
        <key id="13181421">CXF-7828</key>
            <summary>Increased size of the payload(xml as a string) results - A SOAP 1.2 message is not valid when sent to a SOAP 1.1 only endpoint. - Error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="amarkin">Amar K</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Aug 2018 17:37:19 +0000</created>
                <updated>Wed, 14 Aug 2019 17:24:20 +0000</updated>
                            <resolved>Thu, 13 Sep 2018 11:48:40 +0000</resolved>
                                    <version>2.7.7</version>
                                                    <component>JAX-WS Runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16594183" author="amarkin" created="Mon, 27 Aug 2018 20:21:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=johan%40netcontinuum.com&quot; class=&quot;user-hover&quot; rel=&quot;johan@netcontinuum.com&quot;&gt;johan@netcontinuum.com&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I see your comment on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOAP-1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SOAP-1&lt;/a&gt;&#160;which is close to&#160;the issue I am facing.&lt;/p&gt;

&lt;p&gt;Can you please look into the issue I mentioned in the description and help me how I can address it ?&lt;/p&gt;

&lt;p&gt;When I debugged into the issue the SOAPVersion from the message is identified as 1.2 where as the client-stub I generated is 1.1 hence the error.&lt;/p&gt;

&lt;p&gt;Do you know why when the xml string size increases the SOAPVersion is identified as 1.2 instead of 1.1 ?&lt;/p&gt;

&lt;p&gt;Any help would be appreciated and thanks in advance.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Amar&lt;/p&gt;</comment>
                            <comment id="16594813" author="coheigea" created="Tue, 28 Aug 2018 10:47:58 +0000"  >&lt;p&gt;Can you create an example project to reproduce the problem?&lt;/p&gt;</comment>
                            <comment id="16595427" author="amarkin" created="Tue, 28 Aug 2018 18:46:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=coheigea&quot; class=&quot;user-hover&quot; rel=&quot;coheigea&quot;&gt;coheigea&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for the response. unfortunately I don&apos;t have a separate project for this implementation. It is part of a bigger project which has lot of other dependencies and I can&apos;t pull it out easily. I will try to setup a new meanwhile please see the exception stacktrace below for this issue.&lt;/p&gt;

&lt;p&gt;&#160;Please note we get this error only when the size of the xml string(payload) crosses a certain value. For smaller size xml strings this works perfectly fine. Please see the attached xml string file for which the below exception occurs.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Stacktrace :
Caused by: org.apache.cxf.binding.soap.SoapFault: A SOAP 1.2 message is not valid when sent to a SOAP 1.1 only endpoint. at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:159) at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:62) at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:272) at org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:835) at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:1606) at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:1502) at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1309) at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56) at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:627) at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62) at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:272) at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:565) at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:474) at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:377) at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:330) at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:96) at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:135) ... 98 more&#160;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Amar.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16596560" author="coheigea" created="Wed, 29 Aug 2018 16:20:23 +0000"  >&lt;p&gt;The error message seems fairly clear, a SOAP 1.2 message is being send to a SOAP 1.1 only service. What do the successful (small) request and failing (large) request look like? What does the complete WSDL look like? In case it&apos;s a bug in CXF you should also update to the latest version, 2.7.7 is quite old.&lt;/p&gt;</comment>
                            <comment id="16596625" author="amarkin" created="Wed, 29 Aug 2018 17:28:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=coheigea&quot; class=&quot;user-hover&quot; rel=&quot;coheigea&quot;&gt;coheigea&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The structure of the xml is exactly same across small and large. The only difference is the payload size increases as we try to add more&amp;lt;Path&amp;gt; elements under the &amp;lt;Files&amp;gt; node. Thats the only change other than that rest of the xml is exactly same.&lt;/p&gt;

&lt;p&gt;I have also attached the wsdl for your reference.&#160;&lt;/p&gt;

&lt;p&gt;The error doesn&apos;t look correct- If it consistently throws the same error for all the payloads(small and large) it makes sense. But the error on only large files isn&apos;t appropriate.&#160;&lt;/p&gt;

&lt;p&gt;I will try updating to&#160;a recent version of cxf (compatible&#160;with&#160;jdk 1.7) and see. Can you please take a look at the wsdl and see if something isn&apos;t appropriate ?&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12937654/12937654_image-2018-08-29-10-24-30-183.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12937653/12937653_Transfer-201210.wsdl&quot; title=&quot;Transfer-201210.wsdl attached to CXF-7828&quot;&gt;Transfer-201210.wsdl&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16597150" author="amarkin" created="Thu, 30 Aug 2018 07:32:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=coheigea&quot; class=&quot;user-hover&quot; rel=&quot;coheigea&quot;&gt;coheigea&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;On further debugging I noticed below piece of code is resulting the namespace to be 1.1 vs 1.2 when the xml size increases.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
XMLStreamReader xmlReader = message.getContent(XMLStreamReader.class); 

&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (xmlReader.getEventType() == XMLStreamConstants.START_ELEMENT || xmlReader.nextTag() == XMLStreamConstants.START_ELEMENT) {... }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;XMLStreamReader is pointing to an instance of &lt;b&gt;com.ctc.wstx.sr.ValidatingStreamReader&lt;/b&gt; and on the execution on getEventType() or nextTag() it results the SOAP envelope namespace to be&#160;&lt;b&gt;&lt;a href=&quot;http://www.w3.org/2003/05/soap-envelope&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/2003/05/soap-envelope&lt;/a&gt;&#160;(*when the xml length increases&lt;/b&gt;)&#160;&lt;b&gt;instead of&lt;/b&gt;&#160;&lt;a href=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://schemas.xmlsoap.org/soap/envelope/&lt;/a&gt;*&lt;/p&gt;

&lt;p&gt;This changed namespace results in the SOAP message to be identified as 1.2. I also logged a case with woodstocx - &lt;a href=&quot;https://github.com/FasterXML/woodstox/issues/63&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/FasterXML/woodstox/issues/63&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Any thoughts, why the XMLStreamReader behaves differently when the xml size increases ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Amar&lt;/p&gt;</comment>
                            <comment id="16598642" author="coheigea" created="Fri, 31 Aug 2018 11:56:56 +0000"  >&lt;p&gt;I don&apos;t see how that code you linked to is changing the namespace. I think we probably need a test-case to reproduce the problem to help further.&lt;/p&gt;</comment>
                            <comment id="16599026" author="amarkin" created="Fri, 31 Aug 2018 17:10:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=coheigea&quot; class=&quot;user-hover&quot; rel=&quot;coheigea&quot;&gt;coheigea&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for the response, see the documentation here - &lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/javax/xml/stream/XMLStreamReader.html#getNamespaceURI()&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/7/docs/api/javax/xml/stream/XMLStreamReader.html#getNamespaceURI()&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Event Type NAMESPACE and respective &quot;Valid Methods&quot; section the table.&lt;/p&gt;

&lt;p&gt;Its&#160;very weird just the change in length of the xml is causing this difference in behavior. I tried setting up the standalone test case but I am running into a different issue explained here - &lt;a href=&quot;https://stackoverflow.com/questions/14440582/axis2-fault-the-input-stream-for-an-incoming-message-is-null.&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/14440582/axis2-fault-the-input-stream-for-an-incoming-message-is-null.&lt;/a&gt;&#160;I tried the solution provided&#160;in the response but didn&apos;t help. Any thoughts what could be causing the axis2 error or how to debug ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Amar&lt;/p&gt;</comment>
                            <comment id="16613366" author="coheigea" created="Thu, 13 Sep 2018 11:48:40 +0000"  >&lt;p&gt;Please supply a test-case to reproduce the problem.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12937497" name="Job_Failure.xml" size="3434" author="amarkin" created="Tue, 28 Aug 2018 18:56:07 +0000"/>
                            <attachment id="12937653" name="Transfer-201210.wsdl" size="44680" author="amarkin" created="Wed, 29 Aug 2018 17:22:05 +0000"/>
                            <attachment id="12937316" name="image-2018-08-27-10-34-12-193.png" size="51900" author="amarkin" created="Mon, 27 Aug 2018 17:34:12 +0000"/>
                            <attachment id="12937654" name="image-2018-08-29-10-24-30-183.png" size="68344" author="amarkin" created="Wed, 29 Aug 2018 17:24:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xgwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>