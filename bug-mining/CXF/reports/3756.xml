<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:40:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-9021] Warning &quot;Could not resolve Schema for datatypes.dtd&quot; when file was found</title>
                <link>https://issues.apache.org/jira/browse/CXF-9021</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Assuming you have&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;system property &lt;tt&gt;javax.xml.accessExternalDTD&lt;/tt&gt; set to &lt;tt&gt;all&lt;/tt&gt; or &lt;tt&gt;file&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;enabled &lt;tt&gt;out&lt;/tt&gt; validation&lt;/li&gt;
	&lt;li&gt;an xsd that references a DTD&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;And fire a request, the following log appears:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apa.cxf.ws.add.EndpointReferenceUtils&amp;#93;&lt;/span&gt; Could not resolve Schema for ../dtd/XMLSchema.dtd&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The request is then correctly validated, despite the warning. Tested with both valid and invalid equests.&lt;/p&gt;

&lt;p&gt;Looking at the code: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (impl == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
    [...] &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; found in schemas map:
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; impl;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (systemId != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        [...] &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; found by systemId:
&lt;/span&gt;                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; impl;
    }
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (namespaceURI != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        [...] &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; found by namespaceURI:
&lt;/span&gt;                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; impl;
    }
    [...]
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (systemId == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        systemId = publicId;
    }
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (systemId != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        InputSource source = resolver.resolve(systemId, baseURI);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (source != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            impl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LSInputImpl();
            impl.setByteStream(source.getByteStream());
            impl.setSystemId(source.getSystemId());
            impl.setPublicId(source.getPublicId());
+            ### the code above is run, source is found, impl is set
+            ### i miss a &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; impl;&apos;&lt;/span&gt; here, to match the code above
        }
    }
    LOG.warning(&lt;span class=&quot;code-quote&quot;&gt;&quot;Could not resolve Schema &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt; + systemId);
}
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; impl;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I added two inline &apos;comments&apos;, starting with ### to mark the place where i miss a return statement.&lt;br/&gt;
Reasoning:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;all of the above happens in an if block: &lt;tt&gt;if (impl==null)&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;it seems that with different searches eg. via &lt;tt&gt;namespaceURI&lt;/tt&gt; and &lt;tt&gt;systemId&lt;/tt&gt;, the variable &lt;tt&gt;impl&lt;/tt&gt; should be filled and then returned&lt;/li&gt;
	&lt;li&gt;the warning in the last line says &apos;Could not resolve Schema&apos;&lt;/li&gt;
	&lt;li&gt;but the code directly above it may indeed find a &lt;tt&gt;source&lt;/tt&gt; and fill &lt;tt&gt;impl&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;so the schema (in my case a DTD) is found. I can verify that by looking into debug values. And the validation then takes place, with expected outcomes.&lt;/li&gt;
	&lt;li&gt;first finding the schema and then printing that it could not be found is misleading&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;proposed solution:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;either a &lt;tt&gt;return impl;&lt;/tt&gt; statement like mentioned above&lt;/li&gt;
	&lt;li&gt;or guard the warning with &lt;tt&gt;if (impl==null)&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13580710">CXF-9021</key>
            <summary>Warning &quot;Could not resolve Schema for datatypes.dtd&quot; when file was found</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ffang">Freeman Yue Fang</assignee>
                                    <reporter username="mickroll">Michael Kroll</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 May 2024 14:35:10 +0000</created>
                <updated>Wed, 20 Nov 2024 17:06:57 +0000</updated>
                            <resolved>Wed, 20 Nov 2024 17:05:28 +0000</resolved>
                                    <version>4.0.4</version>
                                    <fixVersion>4.1.0</fixVersion>
                    <fixVersion>3.5.10</fixVersion>
                    <fixVersion>3.6.5</fixVersion>
                    <fixVersion>4.0.6</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17899820" author="ffang" created="Wed, 20 Nov 2024 17:06:57 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mickroll&quot; class=&quot;user-hover&quot; rel=&quot;mickroll&quot;&gt;mickroll&lt;/a&gt; for reporting this!&lt;/p&gt;

&lt;p&gt;Fixed by going the proposed #1 solution, to align with other statements.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10062"><![CDATA[Moderate]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1pguw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>