<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:43:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-3132] asynchronous client can&apos;t get correct error if non-runtimeexcpetion happen</title>
                <link>https://issues.apache.org/jira/browse/CXF-3132</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;when use asynchronous cxf client handler, if there&apos;s a non-runtimeexception thrown, the asynchronous client handler can&apos;t get correct reason but get TimeoutException.&lt;/p&gt;

&lt;p&gt;For example if client receive a very complex soap message response with a greate amount of element level like&lt;br/&gt;
&amp;lt;soap:envelope&amp;gt;&amp;lt;soap:body&amp;gt;&amp;lt;a1&amp;gt;&amp;lt;a2&amp;gt;...&amp;lt;an&amp;gt;&amp;lt;/an&amp;gt;...&amp;lt;/a2&amp;lt;/a2&amp;gt;&amp;lt;/soap:body&amp;gt;&amp;lt;/soap:envelope&amp;gt;&lt;br/&gt;
here n could be very big which can cause StackOverflowError in StatxUtils as StatxUtils use recursive way to parse soap message.&lt;/p&gt;

&lt;p&gt;In this case if we use asynchronous cxf client, the client has no way to know there&apos;s a StackOverflowError but just get TimeoutException.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12480314">CXF-3132</key>
            <summary>asynchronous client can&apos;t get correct error if non-runtimeexcpetion happen</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ffang">Freeman Yue Fang</assignee>
                                    <reporter username="ffang">Freeman Yue Fang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Nov 2010 09:17:05 +0000</created>
                <updated>Mon, 6 Dec 2010 22:49:13 +0000</updated>
                            <resolved>Fri, 19 Nov 2010 09:40:02 +0000</resolved>
                                    <version>2.3</version>
                    <version>2.2.11</version>
                                    <fixVersion>2.2.12</fixVersion>
                    <fixVersion>2.3.1</fixVersion>
                    <fixVersion>2.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12933371" author="ffang" created="Thu, 18 Nov 2010 09:20:10 +0000"  >&lt;p&gt;attach a testcase which expose this issue&lt;/p&gt;</comment>
                            <comment id="12933478" author="dkulp" created="Thu, 18 Nov 2010 17:01:50 +0000"  >
&lt;p&gt;Freeman,&lt;/p&gt;

&lt;p&gt;The testcase and the &quot;fix&quot; added to cxf/trunk really &quot;fixes&quot; the wrong thing, or, at the very least, is incomplete.&lt;/p&gt;

&lt;p&gt;The proper fix, in this case, is to fix StaxUtils.   I&apos;ve attached a patch that fixes that to make the StaxUtils be non-recursive.     However, that causes your test to now fail as it relies on the broken behavior.   &lt;/p&gt;

&lt;p&gt;The test needs to be updated to mimic the behavior without relying on the broken behavior in StaxUtils.  My suggestion would be to add an interceptor on the client side that just throws some sort of RuntimeException.   That would also remove the 500K sample response which just wastes disk space.  &lt;/p&gt;
</comment>
                            <comment id="12933744" author="ffang" created="Fri, 19 Nov 2010 09:22:14 +0000"  >&lt;p&gt;Hi Dan,&lt;/p&gt;

&lt;p&gt;Done.&lt;/p&gt;

&lt;p&gt;Fully agree with you that we should refactor StaxUtils not to use recursive way to avoid StackOverflowError, I&apos;m actually thinking about it and going to create another issue to track it,  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Btw, I revise your patch a little bit to not use JDK6 only Deque class, and use old Stack class instead, which make it works with both JDK5 and JDK6.&lt;/p&gt;

&lt;p&gt;Also I think that we should ensure asynchronous client could get correct Error (like StackOverflowError)  but not Timeout when it&apos;s not RuntimeException, some third party libs which we can&apos;t control still use recursive algorithm so we can&apos;t guarantee there&apos;s no StackOverflowError anymore, so if it happens, asynchronous client should know about it.&lt;/p&gt;

&lt;p&gt;Best Regards&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;
</comment>
                            <comment id="12933750" author="ffang" created="Fri, 19 Nov 2010 09:40:02 +0000"  >&lt;p&gt;commit fix&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1036397&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1036397&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1036765&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1036765&amp;amp;view=rev&lt;/a&gt; for trunk&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1036401&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1036401&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1036766&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1036766&amp;amp;view=rev&lt;/a&gt; for 2.3 branch&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1036774&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1036774&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1036405&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1036405&amp;amp;view=rev&lt;/a&gt; for 2.2 branch&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12459898" name="CXF-3132-testcase.patch" size="568949" author="ffang" created="Thu, 18 Nov 2010 09:20:10 +0000"/>
                            <attachment id="12459926" name="non-recurse.patch" size="6952" author="dkulp" created="Thu, 18 Nov 2010 17:01:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47076</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0kl2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>118230</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>