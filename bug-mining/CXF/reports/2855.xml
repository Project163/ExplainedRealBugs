<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:21:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6740] Collision by Swagger2Feature in two OSGI bundles </title>
                <link>https://issues.apache.org/jira/browse/CXF-6740</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I have two separate bundles in my karaf, which are using cxf with the swagger2feature. The endpoints (/cxf/bpc-core and /cxf/bpc-monitor/ ) in both bundles working fine. But I got on both swagger-URL the same swagger-File (both for the monitor endpoints).&lt;/p&gt;

&lt;p&gt;I&apos;m using the blueprint for swagger2feature configuration and annotation for the endpoints.&lt;/p&gt;

&lt;p&gt;core bundle&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;blueprint xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.osgi.org/xmlns/blueprint/v1.0.0&quot;&lt;/span&gt;
&lt;/span&gt;       xmlns:xsi=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt;
&lt;/span&gt;       xmlns:cxf=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//cxf.apache.org/blueprint/core&quot;&lt;/span&gt;
&lt;/span&gt;       xmlns:jaxrs=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//cxf.apache.org/blueprint/jaxrs&quot;&lt;/span&gt;
&lt;/span&gt;
       xsi:schemaLocation=&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd
&lt;/span&gt;                           http:&lt;span class=&quot;code-comment&quot;&gt;//cxf.apache.org/blueprint/core http://cxf.apache.org/schemas/blueprint/core.xsd
&lt;/span&gt;                           http:&lt;span class=&quot;code-comment&quot;&gt;//cxf.apache.org/jaxrs http://cxf.apache.org/schemas/blueprint/jaxrs.xsd&quot;&amp;gt;
&lt;/span&gt;


    &amp;lt;!-- JAXRS providers --&amp;gt;
    &amp;lt;bean id=&lt;span class=&quot;code-quote&quot;&gt;&quot;jsonProvider&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider&quot;&lt;/span&gt; /&amp;gt;

    &amp;lt;!-- Application resources --&amp;gt;
    &amp;lt;bean id=&lt;span class=&quot;code-quote&quot;&gt;&quot;authenticationResource&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;de.virtimo.bpc.core.resource.AuthenticationResource&quot;&lt;/span&gt; /&amp;gt;
    &amp;lt;bean id=&lt;span class=&quot;code-quote&quot;&gt;&quot;configurationResource&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;de.virtimo.bpc.core.resource.Configuration&quot;&lt;/span&gt; /&amp;gt;
    &amp;lt;bean id=&lt;span class=&quot;code-quote&quot;&gt;&quot;statusResource&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;de.virtimo.bpc.core.resource.Status&quot;&lt;/span&gt; /&amp;gt;

    &amp;lt;!-- CXF Swagger2Feature --&amp;gt;  
    &amp;lt;bean id=&lt;span class=&quot;code-quote&quot;&gt;&quot;swagger2Feature_core&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.cxf.jaxrs.swagger.Swagger2Feature&quot;&lt;/span&gt;&amp;gt;
        &amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;basePath&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;/bpc-core&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;title&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;BPC Core&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;/bean&amp;gt;

    &amp;lt;cxf:bus&amp;gt;
        &amp;lt;cxf:features&amp;gt;
            &amp;lt;cxf:logging /&amp;gt;
        &amp;lt;/cxf:features&amp;gt;
    &amp;lt;/cxf:bus&amp;gt;

    &amp;lt;jaxrs:server id=&lt;span class=&quot;code-quote&quot;&gt;&quot;bpcServer&quot;&lt;/span&gt; address=&lt;span class=&quot;code-quote&quot;&gt;&quot;/bpc-core&quot;&lt;/span&gt;&amp;gt;
        &amp;lt;jaxrs:serviceBeans&amp;gt;
            &amp;lt;ref component-id=&lt;span class=&quot;code-quote&quot;&gt;&quot;authenticationResource&quot;&lt;/span&gt; /&amp;gt;
            &amp;lt;ref component-id=&lt;span class=&quot;code-quote&quot;&gt;&quot;configurationResource&quot;&lt;/span&gt; /&amp;gt;
            &amp;lt;ref component-id=&lt;span class=&quot;code-quote&quot;&gt;&quot;statusResource&quot;&lt;/span&gt; /&amp;gt;
        &amp;lt;/jaxrs:serviceBeans&amp;gt;
        &amp;lt;jaxrs:providers&amp;gt;
            &amp;lt;ref component-id=&lt;span class=&quot;code-quote&quot;&gt;&quot;jsonProvider&quot;&lt;/span&gt; /&amp;gt;
        &amp;lt;/jaxrs:providers&amp;gt;
        &amp;lt;jaxrs:features&amp;gt;
            &amp;lt;ref component-id=&lt;span class=&quot;code-quote&quot;&gt;&quot;swagger2Feature_core&quot;&lt;/span&gt; /&amp;gt;
        &amp;lt;/jaxrs:features&amp;gt;
    &amp;lt;/jaxrs:server&amp;gt;

&amp;lt;/blueprint&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Monitor Bundle&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;blueprint xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.osgi.org/xmlns/blueprint/v1.0.0&quot;&lt;/span&gt;
&lt;/span&gt;       xmlns:xsi=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt;
&lt;/span&gt;       xmlns:cxf=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//cxf.apache.org/blueprint/core&quot;&lt;/span&gt;
&lt;/span&gt;       xmlns:jaxrs=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//cxf.apache.org/blueprint/jaxrs&quot;&lt;/span&gt;
&lt;/span&gt;
       xsi:schemaLocation=&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd
&lt;/span&gt;                           http:&lt;span class=&quot;code-comment&quot;&gt;//cxf.apache.org/blueprint/core http://cxf.apache.org/schemas/blueprint/core.xsd
&lt;/span&gt;                           http:&lt;span class=&quot;code-comment&quot;&gt;//cxf.apache.org/jaxrs http://cxf.apache.org/schemas/blueprint/jaxrs.xsd&quot;&amp;gt;
&lt;/span&gt;


    &amp;lt;!-- JAXRS providers --&amp;gt;
    &amp;lt;bean id=&lt;span class=&quot;code-quote&quot;&gt;&quot;jsonProvider&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider&quot;&lt;/span&gt; /&amp;gt;

    &amp;lt;!-- Application resources --&amp;gt;
    &amp;lt;bean id=&lt;span class=&quot;code-quote&quot;&gt;&quot;monitorResource&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;de.virtimo.bpc.module.monitor.resource.Monitor&quot;&lt;/span&gt; /&amp;gt;

    &amp;lt;!-- CXF Swagger2Feature --&amp;gt;  
    &amp;lt;bean id=&lt;span class=&quot;code-quote&quot;&gt;&quot;swagger2Feature_monitor&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.cxf.jaxrs.swagger.Swagger2Feature&quot;&lt;/span&gt;&amp;gt;
        &amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;basePath&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;/bpc-monitor&quot;&lt;/span&gt;/&amp;gt;Center&quot;/&amp;gt;
        &amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;title&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;BPC Monitor&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;/bean&amp;gt;

    &amp;lt;cxf:bus&amp;gt;
        &amp;lt;cxf:features&amp;gt;
            &amp;lt;cxf:logging /&amp;gt;
        &amp;lt;/cxf:features&amp;gt;
    &amp;lt;/cxf:bus&amp;gt;

    &amp;lt;jaxrs:server id=&lt;span class=&quot;code-quote&quot;&gt;&quot;bpcMonitor&quot;&lt;/span&gt; address=&lt;span class=&quot;code-quote&quot;&gt;&quot;/bpc-monitor&quot;&lt;/span&gt;&amp;gt;
        &amp;lt;jaxrs:serviceBeans&amp;gt;
            &amp;lt;ref component-id=&lt;span class=&quot;code-quote&quot;&gt;&quot;monitorResource&quot;&lt;/span&gt; /&amp;gt;
        &amp;lt;/jaxrs:serviceBeans&amp;gt;
        &amp;lt;jaxrs:providers&amp;gt;
            &amp;lt;ref component-id=&lt;span class=&quot;code-quote&quot;&gt;&quot;jsonProvider&quot;&lt;/span&gt; /&amp;gt;
        &amp;lt;/jaxrs:providers&amp;gt;
        &amp;lt;jaxrs:features&amp;gt;
            &amp;lt;ref component-id=&lt;span class=&quot;code-quote&quot;&gt;&quot;swagger2Feature_monitor&quot;&lt;/span&gt; /&amp;gt;
        &amp;lt;/jaxrs:features&amp;gt;
    &amp;lt;/jaxrs:server&amp;gt;

&amp;lt;/blueprint&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I got the swagger-file for the monitor bundle on /cxf/bpc-core/swagger.json and /cxf/bpc-monitor/swagger.json&lt;/p&gt;

&lt;p&gt;Anyone suggestion how to handle this scenario?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Apache Karaf 4.0.2&lt;/p&gt;</environment>
        <key id="12929167">CXF-6740</key>
            <summary>Collision by Swagger2Feature in two OSGI bundles </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="reta">Andriy Redko</assignee>
                                    <reporter username="andreschlegel">Andre Schlegel-Tylla</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Jan 2016 12:50:46 +0000</created>
                <updated>Fri, 21 Oct 2016 18:46:11 +0000</updated>
                            <resolved>Mon, 22 Aug 2016 12:24:50 +0000</resolved>
                                    <version>3.1.4</version>
                                    <fixVersion>3.1.8</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                    <component>OSGi</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="15101755" author="reta" created="Fri, 15 Jan 2016 13:22:10 +0000"  >&lt;p&gt;This is very interesting issue, apparently related to changes in Swagger 2. &lt;br/&gt;
So what is happing, and you see that as well,  /cxf/bpc-core/swagger.json and /cxf/bpc-monitor/swagger.json return the same results. &lt;/p&gt;

&lt;p&gt;However, you should see 2 tags in the resulting json, something like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;tags&quot;&lt;/span&gt;: [
     { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;bpc-core&quot;&lt;/span&gt; }, 
     { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;bpc-monitor&quot;&lt;/span&gt; }
]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So basically you always have all your APIs in same specification. Very luckily, the heavy use of statics in Swagger may cause this  weird behaviour. I will try to investigate if something could be done in CXF to workaround that.&lt;br/&gt;
Thank you.&lt;/p&gt;</comment>
                            <comment id="15105816" author="reta" created="Mon, 18 Jan 2016 20:49:24 +0000"  >&lt;p&gt;Ok, the issue has been fully understood now. The cause is Swagger&apos;s overuse of Java statics. &lt;br/&gt;
Essentially, the problem reveals itself like this: &lt;b&gt;Swagger2Feature -&amp;gt; BeanConfig -&amp;gt; ScannerFactory.setScanner(this)&lt;/b&gt;. Every time new JAX-RS APIs with Swagger2Feature is initialized, the scanner is reset to the its BeanConfig instance.&lt;br/&gt;
Not sure we can workaround that on CXF side, but patch to Swagger may help, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergey_beryozkin&quot; class=&quot;user-hover&quot; rel=&quot;sergey_beryozkin&quot;&gt;sergey_beryozkin&lt;/a&gt; what do you think?&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="15106657" author="sergey_beryozkin" created="Tue, 19 Jan 2016 12:26:04 +0000"  >&lt;p&gt;Hi Andriy, thanks for the investigation of the source of the problem, I&apos;m curious is it only OSGI specific, or would the same occur in non-OSGI contexts, say we have a Spring context with two Swagger features...&lt;/p&gt;

&lt;p&gt;Thanks, Sergey &lt;/p&gt;</comment>
                            <comment id="15106735" author="reta" created="Tue, 19 Jan 2016 13:53:32 +0000"  >&lt;p&gt;Hi Sergey,&lt;/p&gt;

&lt;p&gt; I am pretty sure it is not OSGi specific, but I will check that as well, one JVM and 2 JAX-RS servers. Will update you asap.&lt;br/&gt;
Thanks!&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
    Andriy Redko&lt;/p&gt;</comment>
                            <comment id="15107060" author="reta" created="Tue, 19 Jan 2016 17:44:08 +0000"  >&lt;p&gt;Hi Serget,&lt;/p&gt;

&lt;p&gt;Just checked non-OSGi scenario, same thing. All APIs are published, nonetheless they are exposed through different ServletHolders and each one has own Swagger2Feature configured.&lt;br/&gt;
Seems like not the issue we can fix in the CXF integration itself .... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Thanks.&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
    Andriy Redko&lt;/p&gt;</comment>
                            <comment id="15108354" author="sergey_beryozkin" created="Wed, 20 Jan 2016 10:36:59 +0000"  >&lt;p&gt;Hi Andriy&lt;/p&gt;

&lt;p&gt;Thanks, can we consider doing the following hack:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Swagger deps are copied into a custom folder by Maven, say they would be in /WEB-INF/swagger as opposed to /WEB-INF/libs, this is not something we&apos;d recommend doing by default, but only for a case when multiple endpoints are available.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;CXF SwaggerFeature gets a new optional property, swaggerClasspath, if set (ex, &quot;/swagger&quot; or &quot;/WEB-INF/swagger&quot;)), then the feature will reflectively load Swagger with a custom URLClassLoader instance thus every CXF feature instance will have its own static Swagger storage&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Do you reckon it can work ?&lt;/p&gt;

&lt;p&gt;Thanks, Sergey &lt;/p&gt;</comment>
                            <comment id="15108561" author="reta" created="Wed, 20 Jan 2016 13:44:18 +0000"  >&lt;p&gt;Hi Sergey,&lt;/p&gt;

&lt;p&gt;We probably may hack the classloader (do we really need that? we may submit a patch so Swagger) by doing these tricks, but I doubt it solves the original issue related to OSGi container. &lt;br/&gt;
What would be the option there?&lt;br/&gt;
Thanks&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
    Andriy Redko&lt;/p&gt;</comment>
                            <comment id="15108610" author="sergey_beryozkin" created="Wed, 20 Jan 2016 14:18:15 +0000"  >&lt;p&gt;Hi Andriy, I agree it is a terrible hack &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. If a Swagger patch can be accepted then it would be ideal, otherwise this is the only approach I can think of, even for OSGI (the bundles would ship with embedded libs which would be bad &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)&lt;/p&gt;</comment>
                            <comment id="15108800" author="ay" created="Wed, 20 Jan 2016 16:08:26 +0000"  >&lt;p&gt;Hi Sergey, Andriy,&lt;br/&gt;
maybe we could replace the static usage (i.e., ScannerFactory.getScanner, ApiListingResource.initialized, etc) and cache the scanner and swagger instances under a specific root path key in the servlet context object so that the scenario specific bean scanner instance is passed to the corresponding ApiListingResource instance? Or what is the current suggested approach?&lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                            <comment id="15108825" author="sergey_beryozkin" created="Wed, 20 Jan 2016 16:22:56 +0000"  >&lt;p&gt;Hi Aki - sounds good, it may be a nice workaround until a patch gets applied  (or, we never know, may be a final solution, if the patch is not accepted in Swagger &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)&lt;br/&gt;
Cheers, Sergey &lt;/p&gt;</comment>
                            <comment id="15108980" author="reta" created="Wed, 20 Jan 2016 17:21:31 +0000"  >&lt;p&gt;Hey Aki, Sergey,&lt;/p&gt;

&lt;p&gt;Yes, sounds good to me as well, ScannerFactory.getScanner is called inside BeanConfig so we can try to mirror this class. &lt;br/&gt;
It might not be enough so I would like to spend some time looking at Swagger sources, we may have a good fix here to suggest.&lt;br/&gt;
Thanks.&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
    Andriy Redko&lt;/p&gt;</comment>
                            <comment id="15110338" author="ay" created="Thu, 21 Jan 2016 09:37:06 +0000"  >&lt;p&gt;Hi Andriy, Sergey,&lt;br/&gt;
sounds good.&lt;br/&gt;
Thanks.&lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                            <comment id="15110595" author="ay" created="Thu, 21 Jan 2016 13:43:48 +0000"  >&lt;p&gt;Hi Andriy,&lt;br/&gt;
there seems to be a recent update to swagger regarding this issue.&lt;br/&gt;
&lt;a href=&quot;https://github.com/swagger-api/swagger-core/issues/1482&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/swagger-api/swagger-core/issues/1482&lt;/a&gt;&lt;br/&gt;
it looks like the problem might have been solved with this patch.&lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                            <comment id="15111285" author="reta" created="Thu, 21 Jan 2016 21:00:49 +0000"  >&lt;p&gt;Hi Aki,&lt;/p&gt;

&lt;p&gt;Awesome! Thanks a lot for looking into Swagger issues, this is exactly the problem.&lt;br/&gt;
PR targets &lt;b&gt;Swagger 1.5.7&lt;/b&gt; so I think it is going to be fixed with this release. Closing this ticket.&lt;br/&gt;
Thanks!&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
    Andriy Redko&lt;/p&gt;</comment>
                            <comment id="15111286" author="reta" created="Thu, 21 Jan 2016 21:01:29 +0000"  >&lt;p&gt;Swagger issue, already fixed in master, on target for 1.5.7 release&lt;/p&gt;</comment>
                            <comment id="15114894" author="ay" created="Mon, 25 Jan 2016 08:28:42 +0000"  >&lt;p&gt;Hi Andriy, Sergey,&lt;br/&gt;
I think we need another solution. The one done in swagger-jaxrs doesn&apos;t cover our use case, where we need to manage multiple configurations over a single servlet component. &lt;/p&gt;

&lt;p&gt;I think we need another approach and I think we could get a much simpler patch by inserting both swagger and beanconfig/scanner instances to the thread-localized server context using a jaxrs&apos;s RequewtFilter and tell Swagger&apos;s ApiListingResource to get them from the context. In this way, we can insert a configuration specific swagger/scanner during the call and pass them to the swagger&apos;s resource. &lt;/p&gt;

&lt;p&gt;If we don&apos;t/can&apos;t use the thread-localized context to pass the configuration specific objects to Swagger&apos;s ApiRequestResource, we need to assign a unique path and pass an extra switch property so that Swagger&apos;s ApiRequestResource can use the specific path key (e.g. swagger-&amp;lt;path&amp;gt; or scanner-&amp;lt;path&amp;gt;) to do the lookup instead of using just swagger or scanner).&lt;/p&gt;

&lt;p&gt;How do you think? &lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                            <comment id="15114943" author="sergey_beryozkin" created="Mon, 25 Jan 2016 09:26:57 +0000"  >&lt;p&gt;Hi Aki&lt;/p&gt;

&lt;p&gt;Perhaps we can keep that all on the current Message/Exchange because the message is kept in a thread local map and can be accessed with PhaseInterceptorChain.getCurrentMessage() ?&lt;br/&gt;
Thanks, Sergey&lt;/p&gt;</comment>
                            <comment id="15115142" author="reta" created="Mon, 25 Jan 2016 12:40:53 +0000"  >&lt;p&gt;Hi Aki, Sergey,&lt;/p&gt;

&lt;p&gt;My apologies for prematurely closing the issue. I truly believe that github.com/swagger-api/swagger-core/pull/1611 is going to fix the problem.&lt;br/&gt;
Yes, you are right Aki, we need to manage multiple configurations over a single servlet component. However, if I do understand the pull request correctly, each BeanConfig is enriched with contextId and scannerId.&lt;br/&gt;
They are not necessarily tight to ServletConfig and in Swagger2Feature we can set those properties to be unique for every instance of the JAX-RS server. As such the right scanner should be picked up for each Swagger instance corresponding to different JAX-RS APIs. I am wondering did you play with latest Swagger snapshot and things didn&apos;t work out for you?&lt;br/&gt;
Thanks!&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
    Andriy Redko&lt;/p&gt;</comment>
                            <comment id="15115173" author="ay" created="Mon, 25 Jan 2016 13:15:03 +0000"  >&lt;p&gt;Hi Andriy,&lt;br/&gt;
no problem. I might have prematurely reopened the issue &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I thought the patched code still doesn&apos;t provide a way to pass the configured scanner/beanconfig from its user (cxf) to the swagger resource.&lt;br/&gt;
I played a little bit last friday by setting the both Id&apos;s (setting them to the corresponding jaxrs&apos; root path) but didn&apos;t get the behavior that I wanted.&lt;/p&gt;

&lt;p&gt;And I wandered how the patched code can pick up the configured scanner. Then, I went for another way and experimented with a slightly modified pre-patched swagger code and passed a scanner instance directly over the context to the swagger resource (briefly sketched in my previous comment).&lt;/p&gt;

&lt;p&gt;I&apos;ll spend a little more time today to see if I missed something.&lt;/p&gt;

&lt;p&gt;regards, aki&lt;/p&gt;
</comment>
                            <comment id="15115203" author="reta" created="Mon, 25 Jan 2016 13:42:27 +0000"  >&lt;p&gt;Hi Aki, &lt;/p&gt;

&lt;p&gt;Thanks a lot, do you want me to reassign this issue to you since your are doing most of the work.&lt;br/&gt;
I will be more than  happy to help you out with that, I will play with the patched snapshot version as well.&lt;br/&gt;
Thanks.&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
    Andriy Redko&lt;/p&gt;</comment>
                            <comment id="15115422" author="ay" created="Mon, 25 Jan 2016 15:45:32 +0000"  >&lt;p&gt;Hi Andriy,&lt;br/&gt;
We can keep it on your name and we can sync/exchange our status here.&lt;br/&gt;
thanks.&lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                            <comment id="15115522" author="reta" created="Mon, 25 Jan 2016 16:49:17 +0000"  >&lt;p&gt;Hi Aki,&lt;/p&gt;

&lt;p&gt;No objections, thanks!&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
    Andriy Redko&lt;/p&gt;</comment>
                            <comment id="15118447" author="reta" created="Wed, 27 Jan 2016 01:45:16 +0000"  >&lt;p&gt;Hey Aki,&lt;/p&gt;

&lt;p&gt;You are very right, the patch to Swagger &lt;b&gt;does not solve&lt;/b&gt; the problem, I honestly have troubles to understand the overall picture, as it partially addresses one specific use case, it looks broken to me. Anyway, I am going to work on Swagger side to fix this issue, although we could do some workaround in CXF, I think the complete solution would be better (if you already have something with this regards, please share). Thanks!&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
    Andriy Redko&lt;/p&gt;</comment>
                            <comment id="15118940" author="ay" created="Wed, 27 Jan 2016 09:47:42 +0000"  >&lt;p&gt;Hi Andriy,&lt;br/&gt;
thanks for verifying the issue. I think the patch applied there is somewhat unnecessarily complex (in terms of the code change and classes added and the configuration required) and we could suggest a simpler approach along what I sketched. Yes. I can share the stuff that I experimented. The only issue that I had with what I did was that I was not getting the thread-local behavior from context.setAttribtue(key) and context.getAttribtue(key) when I was using out of the box configuration with the cxf&apos;s jaxrs sample code on Karaf. Do I need to set some property or does it not work this way? Sergey? &lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                            <comment id="15119012" author="sergey_beryozkin" created="Wed, 27 Jan 2016 10:41:53 +0000"  >&lt;p&gt;Hi Aki, which &apos;context&apos; are you referring too ? &lt;br/&gt;
JAX-RS filter one has a setProperty/getProperty, and it must be tied to httpRequest by default, but if you work directly  with the CXF message, it should be OK....Sorry if I&apos;m missing something&lt;br/&gt;
Cheers, Sergey&lt;/p&gt;</comment>
                            <comment id="15119041" author="ay" created="Wed, 27 Jan 2016 11:02:32 +0000"  >&lt;p&gt;Hi Andriy, Sergey,&lt;/p&gt;

&lt;p&gt;My temporary change to swagger-core is in my git branch &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
It is branched from the origin&apos;s 01-18 version with this minor change &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;. That means, it does not include the change included with swagger-1482.&lt;/p&gt;

&lt;p&gt;And I am attachning the change and some samples for cxf as a patch file against cxf&apos;s current master &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Once you build both swagger-core and cxf projects including the two samples at its sample folders. You can install them on karaf by running the karaf comands&lt;/p&gt;

&lt;p&gt;feature:repo-add cxf 3.2.0-SNAPSHOT&lt;br/&gt;
feature:install cxf-rs-description-swagger2&lt;br/&gt;
install -s mvn:org.apache.cxf.samples/jax_rs_description_swagger2_osgi&lt;br/&gt;
install -s mvn:org.apache.cxf.samples/jax_rs_description_swagger2_osgi2&lt;/p&gt;

&lt;p&gt;and from the console, run&lt;/p&gt;

&lt;p&gt;curl &lt;a href=&quot;http://localhost:8181/cxf/swaggerSample/swagger.yaml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8181/cxf/swaggerSample/swagger.yaml&lt;/a&gt;&lt;br/&gt;
and&lt;br/&gt;
curl &lt;a href=&quot;http://localhost:8181/cxf/swaggerSample2/swagger.yaml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8181/cxf/swaggerSample2/swagger.yaml&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;to get two different swagger documents.&lt;/p&gt;

&lt;p&gt;However, as I mentioned, if the first call is held between its set and get lines and the second call&apos;s set is invoked, both calls will get the second document. And this was my question mentioned earlier, whether we should add another context attribute &quot;swagger.local&quot; with true or false to use the uri-path to do the lookup in the context when this is set to true. &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/elakito/swagger-core/tree/alt-1482&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/elakito/swagger-core/tree/alt-1482&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/elakito/swagger-core/commit/957e06ecce5a1286e882c6fda2c0a776eec9f2c0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/elakito/swagger-core/commit/957e06ecce5a1286e882c6fda2c0a776eec9f2c0&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; 0001-temporary-work-for-cxf-6740.patch attached in this ticket&lt;/p&gt;</comment>
                            <comment id="15119055" author="ay" created="Wed, 27 Jan 2016 11:09:31 +0000"  >&lt;p&gt;Hi Sergey,&lt;br/&gt;
I am talking about servletContext that is injected in our code both to our custom RequestFilter instance and Swagger&apos;s ApiListingResource.&lt;br/&gt;
As this seems to be a natural way to pass information from CXF to Swagger.&lt;br/&gt;
However, I think we should use a map as its value because it seems to be shared among all the calling threads?&lt;br/&gt;
Or I am missing something here because when I use a normal thread, I observe the thread-local behavior but not with the two calling threads.&lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                            <comment id="15119128" author="sergey_beryozkin" created="Wed, 27 Jan 2016 12:07:15 +0000"  >&lt;p&gt;Hi Aki&lt;/p&gt;

&lt;p&gt;Right, CXF has a TL storage for making sure the injected contexts are thread specific but the actual context value does not offer a TL storage for keeping the attributes.&lt;/p&gt;

&lt;p&gt;How about the following, register a custom CXF ContextProvider, in jaxrs:providers:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ServletContextProvider &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; ContextProvider&amp;lt;ServletContext&amp;gt; {
 &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ServletContext createContext(Message message) {
      ServletContext sc = (ServletContext)message.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;HTTP.CONTEXT&quot;&lt;/span&gt;);
      &lt;span class=&quot;code-comment&quot;&gt;// ThreadLocalServletContext - custom ServletContext impl which delegates to the original SC but
&lt;/span&gt;      &lt;span class=&quot;code-comment&quot;&gt;// manages the attributes in a thread local storage
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ThreadLocalServletContext(sc);
 }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Perhaps it can work ?&lt;/p&gt;

&lt;p&gt;Sergey&lt;/p&gt;</comment>
                            <comment id="15119193" author="ay" created="Wed, 27 Jan 2016 12:59:23 +0000"  >&lt;p&gt;Hi Sergey,&lt;/p&gt;

&lt;p&gt;Okay. Then, we have an approach either using this technique to ensure the attributes are held TL or using maps Map&amp;lt;String, Swagger&amp;gt; and Map&amp;lt;String, Scanner&amp;gt; as the values set in the context and doing the secondary lookup using the basePath from these maps.&lt;/p&gt;

&lt;p&gt;I think the second approach is simpler to manage and besides it does not unnecessarily contaminate the TL pools, at least for us. How do you think?&lt;/p&gt;

&lt;p&gt;A difficult question is whether this approach also works for the issue reporter of swagger-1482 and also acceptable for the swagger-core team.&lt;/p&gt;

&lt;p&gt;regards, aki&lt;/p&gt;</comment>
                            <comment id="15119201" author="sergey_beryozkin" created="Wed, 27 Jan 2016 13:04:54 +0000"  >&lt;p&gt;Hi Aki, sure, the 2nd approach is simpler, I did not realize it can be used too....&lt;/p&gt;

&lt;p&gt;So, we still need a fix in Swagger, in addition to what can be done in CXF, right ?&lt;/p&gt;

&lt;p&gt;Thanks, Sergey&lt;/p&gt;</comment>
                            <comment id="15119542" author="ay" created="Wed, 27 Jan 2016 15:28:47 +0000"  >&lt;p&gt;Hi Sergey,&lt;br/&gt;
Okay. I&apos;ll see how that approach will look alike. That will be a minor change to my previous code. &lt;/p&gt;

&lt;p&gt;Yes. and in any case, we would like to have the fix goes into swagger-core because otherwise we will need to duplicate their ApiListingResource in cxf ;-(&lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                            <comment id="15119692" author="ay" created="Wed, 27 Jan 2016 16:21:13 +0000"  >&lt;p&gt;Hi Sergey, Andriy,&lt;br/&gt;
I updated the code along our discussion.&lt;/p&gt;

&lt;p&gt;The swagger-core code is in my alt-1482b branch &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; with its diff&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; to its origin 01-08 version.&lt;br/&gt;
And cxf&apos;s change is attached &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; in this ticket.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/elakito/swagger-core/tree/alt-1482b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/elakito/swagger-core/tree/alt-1482b&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/elakito/swagger-core/commit/7bca845dd844efaef4f41c8fdb1918121763fa02&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/elakito/swagger-core/commit/7bca845dd844efaef4f41c8fdb1918121763fa02&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; 0001-temporary-work-for-cxf-6740-take-2.patch&lt;/p&gt;

&lt;p&gt;regards, aki&lt;/p&gt;</comment>
                            <comment id="15125558" author="reta" created="Sun, 31 Jan 2016 23:05:00 +0000"  >&lt;p&gt;Hi Aki, &lt;/p&gt;

&lt;p&gt;Thanks a lot for the patches, I think I got your idea pretty well and it is really good enough. &lt;br/&gt;
I am trying to come up with a way to integrate your changes with the latest master (rememberm SwaggerContextService) so we can introduce it to Swagger team.&lt;br/&gt;
Thanks!&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
    Andriy Redko&lt;/p&gt;</comment>
                            <comment id="15126000" author="ay" created="Mon, 1 Feb 2016 09:28:25 +0000"  >&lt;p&gt;Hi Andriy,&lt;br/&gt;
the swagger team wants to have a non-servletcontext based option (as done with SwaggerContextService) and they are open to adding the path option there so that our per-path configuration use-case can also be supported.&lt;br/&gt;
&lt;a href=&quot;https://groups.google.com/forum/#!topic/swagger-swaggersocket/bf7uVBWYRTw&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://groups.google.com/forum/#!topic/swagger-swaggersocket/bf7uVBWYRTw&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So we can go that way. Could you comment to the above swagger-thread that you will be working on this solution? I hope the patch canl get into 1.5.7. That will be great.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                            <comment id="15126185" author="reta" created="Mon, 1 Feb 2016 12:30:56 +0000"  >&lt;p&gt;Hi Aki, &lt;/p&gt;

&lt;p&gt;Done, thanks a lot for validating it with Swagger guys.&lt;br/&gt;
Thanks!&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
    Andriy Redko&lt;/p&gt;</comment>
                            <comment id="15186108" author="reta" created="Tue, 8 Mar 2016 23:59:48 +0000"  >&lt;p&gt;PR to Swagger had been submitted: &lt;a href=&quot;https://github.com/swagger-api/swagger-core/pull/1656&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/swagger-api/swagger-core/pull/1656&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15295178" author="reta" created="Sat, 21 May 2016 18:26:39 +0000"  >&lt;p&gt;Tested against Swagger 1.5.10-SNAPSHOT, the issue has been mitigated.&lt;br/&gt;
Updated OSGI sample: &lt;b&gt;jax_rs/description_swagger2_osgi&lt;/b&gt;&lt;br/&gt;
Added new sample: &lt;b&gt;jax_rs/description_swagger2_per_path_config&lt;/b&gt;&lt;/p&gt;</comment>
                            <comment id="15403058" author="reta" created="Mon, 1 Aug 2016 23:55:01 +0000"  >&lt;p&gt;Attaching the latest patch against &lt;b&gt;master&lt;/b&gt; so people can try to play with it using Swagger Core 1.5.10-SNAPSHOT (already available).&lt;/p&gt;</comment>
                            <comment id="15403319" author="nitina82" created="Tue, 2 Aug 2016 04:21:21 +0000"  >&lt;p&gt;Hi Andriyo,&lt;/p&gt;

&lt;p&gt;is this patch available with 3.2.0-SNAPSHOT or i need to build my own with this patch? Just trying to understand the process?&lt;br/&gt;
Also i don&apos;t see jax_rs/description_swagger2_per_path_config at below path? Am i looking right distribution?&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15403788" author="reta" created="Tue, 2 Aug 2016 11:24:53 +0000"  >&lt;p&gt;Hi Niten,&lt;/p&gt;

&lt;p&gt;You basically have to pull latest master (&lt;a href=&quot;https://github.com/apache/cxf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf&lt;/a&gt;) and apply the patch attached to this ticket (&lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6740&quot; title=&quot;Collision by Swagger2Feature in two OSGI bundles &quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6740&quot;&gt;&lt;del&gt;CXF-6740&lt;/del&gt;&lt;/a&gt;-Collision-by-Swagger.patch).&lt;br/&gt;
The fix is not yet merged into master, waiting for Swagger 1.5.10 release.&lt;br/&gt;
Thanks.&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
    Andriy Redko&lt;/p&gt;</comment>
                            <comment id="15428893" author="nitina82" created="Fri, 19 Aug 2016 21:41:44 +0000"  >&lt;p&gt;Hi Andriy,&lt;/p&gt;

&lt;p&gt;As Swagger 1.5.10 released can you incorporate same into cxf and publish master version?&lt;br/&gt;
&lt;a href=&quot;https://github.com/swagger-api/swagger-core/releases/tag/v1.5.10&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/swagger-api/swagger-core/releases/tag/v1.5.10&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Nitin&lt;/p&gt;</comment>
                            <comment id="15429483" author="sergey_beryozkin" created="Sat, 20 Aug 2016 18:54:47 +0000"  >&lt;p&gt;Andriy might be on holidays, I&apos;ll have a look next week if he is not back.&lt;/p&gt;

&lt;p&gt;One thing I&apos;d like to avoid though is to add a new Swagger2 demo &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, we already have 5 ones I think, I&apos;d rather document it and possibly enhance the existing demo like description_swagger2_web.&lt;/p&gt;

&lt;p&gt;thanks&lt;/p&gt;</comment>
                            <comment id="15429818" author="githubbot" created="Sun, 21 Aug 2016 17:56:31 +0000"  >&lt;p&gt;GitHub user splatch opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/160&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/160&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6740&quot; title=&quot;Collision by Swagger2Feature in two OSGI bundles &quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6740&quot;&gt;&lt;del&gt;CXF-6740&lt;/del&gt;&lt;/a&gt; Propagate swagger.* properties from endpoint to swagger.&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/splatch/cxf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/splatch/cxf&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6740&quot; title=&quot;Collision by Swagger2Feature in two OSGI bundles &quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6740&quot;&gt;&lt;del&gt;CXF-6740&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/160.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/160.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #160&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 23f69e44b517819b29e463c7934192c389b7be64&lt;br/&gt;
Author: &#321;ukasz Dywicki &amp;lt;luke@code-house.org&amp;gt;&lt;br/&gt;
Date:   2016-08-21T17:54:24Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6740&quot; title=&quot;Collision by Swagger2Feature in two OSGI bundles &quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6740&quot;&gt;&lt;del&gt;CXF-6740&lt;/del&gt;&lt;/a&gt; Propagate swagger.* properties from endpoint to swagger2 feature.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15429819" author="splatch" created="Sun, 21 Aug 2016 17:56:48 +0000"  >&lt;p&gt;I think there might be nicer (not necessarily better) way to solve this. Swagger uses contextId, configId and scannerId parameters. We don&apos;t set these in BeanConfig so it assumes always defaults and stores it under default key instead of compound key valid for given endpoint. If we will override contextId or configId it will start working properly. See my pull request to this issue.&lt;/p&gt;</comment>
                            <comment id="15429898" author="sergey_beryozkin" created="Sun, 21 Aug 2016 21:12:53 +0000"  >&lt;p&gt;Hi Lukasz, &lt;/p&gt;

&lt;p&gt;how would a CXF endpoint (or servlet) configuration would look like in the case of your PR (ex, see this JIRA&apos;s description) ?&lt;br/&gt;
Adding another non optional provider appears to be a bit sensitive - but I&apos;d like to understand better. &lt;/p&gt;</comment>
                            <comment id="15429923" author="splatch" created="Sun, 21 Aug 2016 22:25:52 +0000"  >&lt;p&gt;If servlets are configured already in web.xml with swagger parameters - there is no change necessary. This change applies only endpoint configurations used with single servlet:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Additional configuration in xml&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;jaxrs:properties&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;swagger.config.id&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;secondEndpoint&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;swagger.scanner.id&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;secondEndpoint&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/jaxrs:properties&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This will have the same effect as setting these in servlet init parameter, but in endpoint scope, without duplicating servlet configuration. This is in fact an alternative to solution offered by PR which does not require any additional parameters in swagger configuration.&lt;br/&gt;
I tested it under OSGi, will require some more testing in Spring based deployments.&lt;/p&gt;</comment>
                            <comment id="15429935" author="githubbot" created="Sun, 21 Aug 2016 23:49:13 +0000"  >&lt;p&gt;Github user reta commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/160&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/160&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi Lukasz,&lt;/p&gt;

&lt;p&gt;    Thanks a lot for the patch. What would be a use case to use such precise and not really straightforward Swagger configuration in CXF? I think the approach with path-based configuration (which essentially does the same trick by manipulating scanner/config ids) is simpler and does not really expose the internals of Swagger to CXF users. Plus, we could just make it a default behavior so the need to manipulate  scanner/config ids would be a very rare exception if at all. &lt;/p&gt;

&lt;p&gt;    What do you think?&lt;br/&gt;
    Thank you.&lt;/p&gt;

&lt;p&gt;    Best Regards,&lt;br/&gt;
        Andriy redko&lt;/p&gt;</comment>
                            <comment id="15429937" author="reta" created="Mon, 22 Aug 2016 00:19:14 +0000"  >&lt;p&gt;Hey guys,&lt;/p&gt;

&lt;p&gt;Sorry, was off for vacation. The fix had been merged into master, bumping minimal Swagger version to 1.5.10.&lt;br/&gt;
Keeping this issue open for now to discuss the patch and suggestions from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=splatch&quot; class=&quot;user-hover&quot; rel=&quot;splatch&quot;&gt;splatch&lt;/a&gt;.&lt;br/&gt;
Thanks.&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
    Andriy Redko&lt;/p&gt;</comment>
                            <comment id="15430240" author="githubbot" created="Mon, 22 Aug 2016 07:25:05 +0000"  >&lt;p&gt;Github user splatch commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/160&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/160&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Indeed, this binds cxf more to swagger than relying only on swagger option, however this one offered consistency with Swagger approach. By this way we could also bind lifecycle and flush swagger objects from servlet context when endpoint goes down. Currently we can&apos;t do that with swagger bazed approach, for that we need to control also ServletContext attributes.&lt;/p&gt;</comment>
                            <comment id="15430522" author="sergey_beryozkin" created="Mon, 22 Aug 2016 10:27:27 +0000"  >&lt;p&gt;Hey Lukasz, Andriy&lt;/p&gt;

&lt;p&gt;I wonder if we even can combine multiple approaches here, but I&apos;d like to understand better, setting some opaque id seems straightforward too, for example, instead of &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;jaxrs:properties&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;swagger.config.id&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;secondEndpoint&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;swagger.scanner.id&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;secondEndpoint&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/jaxrs:properties&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;we can simplify and do&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;jaxrs:properties&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;swagger.id&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;secondEndpoint&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/jaxrs:properties&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and then in Swagger2Feature - simply have it represented as both &quot;swagger.config.id&quot; &amp;amp; &quot;swagger.scanner.id&quot;.&lt;/p&gt;

&lt;p&gt;Lukasz, do we also have to set Swagger2 feature &apos;basePath&apos; ?&lt;/p&gt;

&lt;p&gt;So it looks like an option which is worth supporting.&lt;/p&gt;

&lt;p&gt;Andriy, in the demo you have 2 CXFServlets (each servlet has a &apos;basePath&apos; set to a CXF servlet URL pattern and a usePathBasedConfig), how would a Spring configuration look like if we have a single CXFServlet and 2 jaxrs endpoints ?&lt;/p&gt;

&lt;p&gt;Thanks, Sergey&lt;/p&gt;

</comment>
                            <comment id="15430567" author="splatch" created="Mon, 22 Aug 2016 11:07:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergey_beryozkin&quot; class=&quot;user-hover&quot; rel=&quot;sergey_beryozkin&quot;&gt;sergey_beryozkin&lt;/a&gt; There is no need to set basepath when context/scanner is is set, however it is still necessary to generate valid descriptor which could be used by swagger-ui. These two solutions are quite similar because they affect attribute name used to cache swagger instance.&lt;/p&gt;</comment>
                            <comment id="15430602" author="sergey_beryozkin" created="Mon, 22 Aug 2016 11:42:41 +0000"  >&lt;p&gt;Hi, we&apos;ve discussed it further with Lukasz and Lukasz agrees that updating to Swagger 1.5.10 (with useBasePathConfig) resolves this issue, so Andriy, please resolve it for 3.1.8/3.2.0 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; (FYI I merged it to 3.1.8 too)&lt;/p&gt;

&lt;p&gt;Lukasz has more ideas on how to optimize and improve few things like trying to get a basePath auto-calculated and also controlling the cached Swagger instances which we can look at separately&lt;br/&gt;
thanks&lt;/p&gt;</comment>
                            <comment id="15430636" author="reta" created="Mon, 22 Aug 2016 12:14:25 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergey_beryozkin&quot; class=&quot;user-hover&quot; rel=&quot;sergey_beryozkin&quot;&gt;sergey_beryozkin&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=splatch&quot; class=&quot;user-hover&quot; rel=&quot;splatch&quot;&gt;splatch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Right, those two approaches are very similar. The &apos;basePath&apos;-based one does implicit Swagger IDs manipulation (scanner / config / ...) by making base path a part of identifier (it triggers when &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;usePathBasedConfig&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; is set). So I think in this regards, we could make this property &lt;b&gt;true&lt;/b&gt; by default and cover quite a large number of collisions (there is no need to set Swagger IDs). However, if I understand &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=splatch&quot; class=&quot;user-hover&quot; rel=&quot;splatch&quot;&gt;splatch&lt;/a&gt; correctly, Swagger caching mechanism causing the issues when endpoints are loaded / unloaded dynamically (like in OSGi), in this case Swagger still exposes the API specs even if there are no running endpoints, the fix for this ticket does not address the issue yet but &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=splatch&quot; class=&quot;user-hover&quot; rel=&quot;splatch&quot;&gt;splatch&lt;/a&gt; has a PR. &lt;/p&gt;

&lt;p&gt;Regarding your question, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergey_beryozkin&quot; class=&quot;user-hover&quot; rel=&quot;sergey_beryozkin&quot;&gt;sergey_beryozkin&lt;/a&gt;, for Spring-based configuration with one CXF servlet we would need to have two JAXRSFactoryBean instances. In this case the &lt;b&gt;basePath&lt;/b&gt; will be taken from there.&lt;br/&gt;
Thanks.&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
    Andriy Redko&lt;/p&gt;
</comment>
                            <comment id="15430641" author="githubbot" created="Mon, 22 Aug 2016 12:17:41 +0000"  >&lt;p&gt;Github user splatch commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/160&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/160&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Closing this PR as agreed in JIRA.&lt;/p&gt;</comment>
                            <comment id="15430642" author="githubbot" created="Mon, 22 Aug 2016 12:17:41 +0000"  >&lt;p&gt;Github user splatch closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/160&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/160&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15430649" author="reta" created="Mon, 22 Aug 2016 12:24:23 +0000"  >&lt;p&gt;Thanks a bunch, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergey_beryozkin&quot; class=&quot;user-hover&quot; rel=&quot;sergey_beryozkin&quot;&gt;sergey_beryozkin&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=splatch&quot; class=&quot;user-hover&quot; rel=&quot;splatch&quot;&gt;splatch&lt;/a&gt;! &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=splatch&quot; class=&quot;user-hover&quot; rel=&quot;splatch&quot;&gt;splatch&lt;/a&gt; if you need my help with trying out your ideas, please let me know, I would be happy to support you here. Thanks!&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
    Andriy Redko&lt;/p&gt;</comment>
                            <comment id="15436321" author="nitina82" created="Thu, 25 Aug 2016 05:30:04 +0000"  >&lt;p&gt;Hi Andriy,&lt;/p&gt;

&lt;p&gt;Is 3.2.0 available at master repo? Somehow build not finding version so let me know correct repo location.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Nitin&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12784670" name="0001-temporary-work-for-cxf-6740-take-2.patch" size="26658" author="ay" created="Wed, 27 Jan 2016 16:22:07 +0000"/>
                            <attachment id="12784617" name="0001-temporary-work-for-cxf-6740.patch" size="25782" author="ay" created="Wed, 27 Jan 2016 11:03:48 +0000"/>
                            <attachment id="12821465" name="CXF-6740-Collision-by-Swagger.patch" size="40527" author="reta" created="Mon, 1 Aug 2016 23:55:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2r4of:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>