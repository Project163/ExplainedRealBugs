<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:29:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7501] Cannot inject field in ContainerRequestFilter</title>
                <link>https://issues.apache.org/jira/browse/CXF-7501</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Hey folks.&lt;/p&gt;

&lt;p&gt;We found a weird behavior while running MVC specification(JSR 371) on TomEE witch CXF. We have a &lt;b&gt;ContainerRequestFilter&lt;/b&gt; defined called &lt;b&gt;JaxRsContextFilter&lt;/b&gt; &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@PreMatching
@Priority(0)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JaxRsContextFilter &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; ContainerRequestFilter {
    @Inject
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; JaxRsContextProducer jaxRsContextProducer;
    @Context
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Configuration configuration;
    @Context
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; HttpServletRequest request;
    @Context
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; HttpServletResponse response;

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JaxRsContextFilter() {
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void filter(ContainerRequestContext requestContext) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.jaxRsContextProducer.populate(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.configuration, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.request, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.response);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can see that we have a JaxRsContextProducer annotated to be injected as a field in our object but when JAXRSUtils is called to run the the container filters it injects the fields annotated as &lt;b&gt;@Context&lt;/b&gt; , not the fields annotated with &lt;b&gt;@Inject&lt;/b&gt;.&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (ProviderInfo&amp;lt;ContainerRequestFilter&amp;gt; filter : containerFilters) {
                &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                    InjectionUtils.injectContexts(filter.getProvider(), filter, m);
                    filter.getProvider().filter(context);
                } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException ex) {
                    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; ExceptionUtils.toInternalServerErrorException(ex, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;); 
                }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;It causes our filter(&lt;b&gt;JaxRsContextFilter&lt;/b&gt;) to throw a NullPointerException when filtering the request because it uses the producer to perform some actions in  this operation.&lt;/p&gt;

&lt;p&gt;I believe this field should be injected as well, not only the &lt;b&gt;@Context&lt;/b&gt; fields.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux Mint 64 bit, TomEE Plus 7.0.3, JavaEE 7 application using MVC specification and reference implementation(Libs Attached)&lt;/p&gt;
</environment>
        <key id="13101716">CXF-7501</key>
            <summary>Cannot inject field in ContainerRequestFilter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="reta">Andriy Redko</assignee>
                                    <reporter username="jeyvison">Jeyvison Nascimento</reporter>
                        <labels>
                            <label>cdi</label>
                    </labels>
                <created>Tue, 12 Sep 2017 17:28:58 +0000</created>
                <updated>Tue, 28 Nov 2017 10:51:32 +0000</updated>
                            <resolved>Sat, 28 Oct 2017 13:47:48 +0000</resolved>
                                    <version>3.1.10</version>
                    <version>3.2.0</version>
                                    <fixVersion>3.1.14</fixVersion>
                    <fixVersion>3.2.1</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16163323" author="jeyvison" created="Tue, 12 Sep 2017 17:30:15 +0000"  >&lt;p&gt;Specification and Reference implementation attached.&lt;/p&gt;</comment>
                            <comment id="16163399" author="chkal" created="Tue, 12 Sep 2017 18:15:26 +0000"  >&lt;p&gt;Please also see this issue I created for Apache TomEE which describes the same issue:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/TOMEE-2122&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/TOMEE-2122&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16163489" author="sergey_beryozkin" created="Tue, 12 Sep 2017 18:59:17 +0000"  >&lt;p&gt;Hi&lt;/p&gt;

&lt;p&gt;My understanding is, that with the CXF CDI integration module, with CXF 3.1.13 for example, that should work. The later TomEE might use it ? &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt; Andriy, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmannibucau&quot; class=&quot;user-hover&quot; rel=&quot;rmannibucau&quot;&gt;rmannibucau&lt;/a&gt; Romain, can you comment please ? &lt;br/&gt;
thanks&lt;/p&gt;</comment>
                            <comment id="16163513" author="romain.manni-bucau" created="Tue, 12 Sep 2017 19:18:45 +0000"  >&lt;p&gt;Hi&lt;/p&gt;

&lt;p&gt;If the instantiation is done by tomee then if a cdi bean is available it is used and contexts work but ot through cxf register(Class) since tomee doesnt own them. Would cxf have a SPI for the factory?&lt;/p&gt;</comment>
                            <comment id="16163538" author="jeyvison" created="Tue, 12 Sep 2017 19:46:18 +0000"  >&lt;p&gt;Dont know if it helps but, for what i&apos;ve seen, the instantiation is done by &lt;b&gt;ConfigurationImpl&lt;/b&gt;, through reflection.&lt;/p&gt;</comment>
                            <comment id="16163843" author="reta" created="Tue, 12 Sep 2017 23:26:01 +0000"  >&lt;p&gt;That&apos;s right, the JAX-RS XxxFilter classes are not detected by CXF CDI extension without @Provider annotation. This comes from ContainerRequestFilter spec (&lt;a href=&quot;https://docs.oracle.com/javaee/7/api/javax/ws/rs/container/ContainerRequestFilter.html):&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javaee/7/api/javax/ws/rs/container/ContainerRequestFilter.html):&lt;/a&gt; Filters implementing this interface must be annotated with @Provider to be discovered by the JAX-RS runtime. Could you please try to annotate your filter with @Provider annotation? &lt;/p&gt;</comment>
                            <comment id="16164160" author="chkal" created="Wed, 13 Sep 2017 05:11:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt;: as mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/TOMEE-2122&quot; title=&quot;CDI injection into dynamically registered JAX-RS providers fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TOMEE-2122&quot;&gt;&lt;del&gt;TOMEE-2122&lt;/del&gt;&lt;/a&gt;, injection works fine if the &lt;tt&gt;ContainerRequestFilter&lt;/tt&gt; is annotated with &lt;tt&gt;@Provider&lt;/tt&gt;. But filters (and other providers) can also be dynamically registered using the Feature contract (&lt;a href=&quot;https://docs.oracle.com/javaee/7/api/javax/ws/rs/core/Feature.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javaee/7/api/javax/ws/rs/core/Feature.html&lt;/a&gt;). In this case injection doesn&apos;t work correctly. This is working fine with Jersey and RESTEasy. See a more detailed description in &lt;a href=&quot;https://issues.apache.org/jira/browse/TOMEE-2122&quot; title=&quot;CDI injection into dynamically registered JAX-RS providers fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TOMEE-2122&quot;&gt;&lt;del&gt;TOMEE-2122&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16164496" author="sergey_beryozkin" created="Wed, 13 Sep 2017 11:06:44 +0000"  >&lt;p&gt;Can a Feature.register(Object) work at least as a short term solution: rather than have FeatureImpl call back, via SPI, back to CDI, why can&apos;t the code calling the Feature instantiate the filter with the help of CDI and then register it with the Feature  ? &lt;/p&gt;</comment>
                            <comment id="16164507" author="reta" created="Wed, 13 Sep 2017 11:24:48 +0000"  >&lt;p&gt;Thanks for clarification &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chkal&quot; class=&quot;user-hover&quot; rel=&quot;chkal&quot;&gt;chkal&lt;/a&gt;, the reference to TomEE issue is very helpful to understand the issue. CXF does not support CDI-driven instantiation in this case, we will be working on the fix, meantime would the workaround suggested by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergeyb&quot; class=&quot;user-hover&quot; rel=&quot;sergeyb&quot;&gt;sergeyb&lt;/a&gt; be an option?&lt;/p&gt;</comment>
                            <comment id="16164875" author="chkal" created="Wed, 13 Sep 2017 15:59:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergey_beryozkin&quot; class=&quot;user-hover&quot; rel=&quot;sergey_beryozkin&quot;&gt;sergey_beryozkin&lt;/a&gt;: I agree that this is a possible workaround. I&apos;ll check if this could work in our case.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt;: Thanks a lot for your effort. The JAX-RS spec is a bit vague on this, but as Jersey and RESTEasy support it, it would be great to also see support in CXF. Thanks a lot.&lt;/p&gt;</comment>
                            <comment id="16165070" author="jeyvison" created="Wed, 13 Sep 2017 18:20:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergey_beryozkin&quot; class=&quot;user-hover&quot; rel=&quot;sergey_beryozkin&quot;&gt;sergey_beryozkin&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt; Thanks for analyzing this and help us folks &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16165490" author="reta" created="Wed, 13 Sep 2017 23:54:51 +0000"  >&lt;p&gt;Thank you guys for reporting it, we&apos;ll work on fixing it. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeyvison&quot; class=&quot;user-hover&quot; rel=&quot;jeyvison&quot;&gt;jeyvison&lt;/a&gt; would you mind if I downgrade the priority a bit to &lt;span class=&quot;error&quot;&gt;&amp;#91;Major&amp;#93;&lt;/span&gt;? I won&apos;t change much, just to fairly estimate the impact to the users. Thank you.&lt;/p&gt;</comment>
                            <comment id="16165596" author="jeyvison" created="Thu, 14 Sep 2017 01:29:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt; No problem Andriy &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I wasn&apos;t sure what priority to choose anyway ^^&lt;/p&gt;</comment>
                            <comment id="16222565" author="githubbot" created="Fri, 27 Oct 2017 15:40:03 +0000"  >&lt;p&gt;reta opened a new pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Adding the new extension-based customization (`ServerConfigurableFactory`) in order to control the way how providers are created and registered using `FeatureContext::register` methods family. It allows to use proper mechanisms in case of managed runtimes (like CDIs f.e.).&lt;/p&gt;

&lt;p&gt;   @sberyozkin @johnament Submitting through PR to have some feedback guys you may have. The change is not really complex but touches a bit some internals. &lt;/p&gt;

&lt;p&gt;   Thanks.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16222574" author="githubbot" created="Fri, 27 Oct 2017 15:43:50 +0000"  >&lt;p&gt;johnament commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147445943&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147445943&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   I see we have a create... should we also have a destroy?  Otherwise, in CDI, you run the risk of having dependent scoped beans lying around.  I&apos;m not sure if these are meant to be per-request objects or global objects, but if they are per request and `@Dependent` scoped then you&apos;ll want to destroy them.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16222585" author="githubbot" created="Fri, 27 Oct 2017 15:46:29 +0000"  >&lt;p&gt;reta commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147446613&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147446613&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Was puzzled to have this as well but there is no lifecycle hook to call the destroy /dispose &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16222636" author="githubbot" created="Fri, 27 Oct 2017 16:27:56 +0000"  >&lt;p&gt;rmannibucau commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147456626&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147456626&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   the client has close() so we can - worse case - use that. Also if the beanManager.isNormalScope(bean.getScope()) is true we don&apos;t need to call context.release()&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16222683" author="githubbot" created="Fri, 27 Oct 2017 17:04:32 +0000"  >&lt;p&gt;reta commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147464372&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147464372&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   This is server-side ... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16222704" author="githubbot" created="Fri, 27 Oct 2017 17:18:08 +0000"  >&lt;p&gt;rmannibucau commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147467401&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147467401&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   -&amp;gt; bam &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;   the server has it too (destroy() from memory)&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16222705" author="githubbot" created="Fri, 27 Oct 2017 17:18:29 +0000"  >&lt;p&gt;rmannibucau commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147467401&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147467401&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   -&amp;gt; bam &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;   the server has it too (destroy() from memory), that said it is true for a client in a server &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16222725" author="githubbot" created="Fri, 27 Oct 2017 17:30:12 +0000"  >&lt;p&gt;reta commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147470304&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147470304&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   @rmannibucau  let me try to figure out if we could hook in there, thanks for the hint&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16222771" author="githubbot" created="Fri, 27 Oct 2017 20:40:06 +0000"  >&lt;p&gt;reta commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147511834&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147511834&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   @johnament @rmannibucau Haven&apos;t found the acceptable way to dispose the created beans. It would be good to have that however `Feature`s (and `DynamicFeature`s) are instantiated at deployment (when JAX-RS resources are discovered) hereby should not be subject of request scoped but only global one. When server is shutting down (destroy) everything will be gone so may not worth introducing complex disposal mechanisms. Makes sense?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16222798" author="githubbot" created="Fri, 27 Oct 2017 20:51:22 +0000"  >&lt;p&gt;rmannibucau commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147514227&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147514227&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Issue is more for dependent beans which must be released to avoid to leak data/memory when the app is undeployed but the server is not killed so we should really have a lifecycle for the configurable which is bound to the underlying instance and worse case to the Server.&lt;/p&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16223083" author="githubbot" created="Sat, 28 Oct 2017 00:22:25 +0000"  >&lt;p&gt;reta commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147539875&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147539875&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Hard to disagree with that indeed, CXF should be a good citizen there. So I&apos;ve came up with quite simple solution using CDI events. Whenever we create the context in such circumstances, we register it for later disposal inside `JAXRSCdiResourceExtension` by firing the event (the same way we manage all other managed beans we create inside the CDI extension). It seems to work perfectly fine and releases the contexts on shutdown. Thoughts?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16223302" author="githubbot" created="Sat, 28 Oct 2017 07:38:04 +0000"  >&lt;p&gt;rmannibucau commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147548597&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147548597&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Looks good for the server side &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16223477" author="githubbot" created="Sat, 28 Oct 2017 12:52:05 +0000"  >&lt;p&gt;reta commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147553761&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147553761&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Thanks guys for the comments, merging ...&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16223478" author="githubbot" created="Sat, 28 Oct 2017 12:52:48 +0000"  >&lt;p&gt;reta closed pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java b/integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..15d4643d847&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
@@ -0,0 +1,91 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.cdi.event.DisposableCreationalContext;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;br/&gt;
+            final AnnotatedType&amp;lt;T&amp;gt; annotatedType = beanManager.createAnnotatedType(cls);&lt;br/&gt;
+            final InjectionTargetFactory&amp;lt;T&amp;gt; injectionTargetFactory = &lt;br/&gt;
+                beanManager.getInjectionTargetFactory(annotatedType);&lt;br/&gt;
+            final BeanAttributes&amp;lt;T&amp;gt; attributes = beanManager.createBeanAttributes(annotatedType);&lt;br/&gt;
+            final Bean&amp;lt;T&amp;gt; bean = beanManager.createBean(attributes, cls, injectionTargetFactory);&lt;br/&gt;
+            final CreationalContext&amp;lt;?&amp;gt; context = beanManager.createCreationalContext(bean);&lt;br/&gt;
+            &lt;br/&gt;
+            if (!beanManager.isNormalScope(bean.getScope())) &lt;/p&gt;
{
+                beanManager.fireEvent(new DisposableCreationalContext(context));
+            }
&lt;p&gt;+            &lt;br/&gt;
+            return beanManager.getReference(bean, cls, context);&lt;br/&gt;
+        }&lt;br/&gt;
+    }&lt;br/&gt;
+    &lt;br/&gt;
+    private static class CdiServerFeatureContextConfigurable extends ConfigurableImpl&amp;lt;FeatureContext&amp;gt; {&lt;br/&gt;
+        private final Instantiator instantiator;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiServerFeatureContextConfigurable(FeatureContext mc, BeanManager beanManager) &lt;/p&gt;
{
+            super(mc, RuntimeType.SERVER, SERVER_FILTER_INTERCEPTOR_CLASSES);
+            this.instantiator = new CdiInstantiator(beanManager);
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        protected Instantiator getInstantiator() &lt;/p&gt;
{
+            return instantiator;
+        }
&lt;p&gt;+    }&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/integration/cdi/src/main/java/org/apache/cxf/cdi/JAXRSCdiResourceExtension.java b/integration/cdi/src/main/java/org/apache/cxf/cdi/JAXRSCdiResourceExtension.java&lt;br/&gt;
index 2a36a3a4877..ce23e1a924c 100644&lt;br/&gt;
&amp;#8212; a/integration/cdi/src/main/java/org/apache/cxf/cdi/JAXRSCdiResourceExtension.java&lt;br/&gt;
+++ b/integration/cdi/src/main/java/org/apache/cxf/cdi/JAXRSCdiResourceExtension.java&lt;br/&gt;
@@ -49,9 +49,11 @@&lt;/p&gt;

&lt;p&gt; import org.apache.cxf.Bus;&lt;br/&gt;
 import org.apache.cxf.bus.extension.ExtensionManagerBus;&lt;br/&gt;
+import org.apache.cxf.cdi.event.DisposableCreationalContext;&lt;br/&gt;
 import org.apache.cxf.cdi.extension.JAXRSServerFactoryCustomizationExtension;&lt;br/&gt;
 import org.apache.cxf.feature.Feature;&lt;br/&gt;
 import org.apache.cxf.jaxrs.JAXRSServerFactoryBean;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
 import org.apache.cxf.jaxrs.utils.ResourceUtils;&lt;/p&gt;

&lt;p&gt; /**&lt;br/&gt;
@@ -138,6 +140,11 @@ public void load(@Observes final AfterDeploymentValidation event, final BeanMana&lt;br/&gt;
                 busBean,&lt;br/&gt;
                 Bus.class,&lt;br/&gt;
                 beanManager.createCreationalContext(busBean));&lt;br/&gt;
+        &lt;br/&gt;
+        // Adding the extension for dynamic providers registration and instantiation&lt;br/&gt;
+        if (bus.getExtension(ServerConfigurableFactory.class) == null) &lt;/p&gt;
{
+            bus.setExtension(new CdiServerConfigurableFactory(beanManager), ServerConfigurableFactory.class);
+        }

&lt;p&gt;         for (final Bean&amp;lt; ? &amp;gt; application: applicationBeans) &lt;/p&gt;
{
             final Application instance = (Application)beanManager.getReference(
@@ -182,11 +189,22 @@ public void injectBus(@Observes final AfterBeanDiscovery event, final BeanManage
     }

&lt;p&gt;     /**&lt;br/&gt;
+     * Registers created CreationalContext instances for disposal&lt;br/&gt;
+     */&lt;br/&gt;
+    public void registerCreationalContextForDisposal(@Observes final DisposableCreationalContext event) {&lt;br/&gt;
+        synchronized (disposableCreationalContexts) &lt;/p&gt;
{
+            disposableCreationalContexts.add(event.getContext());
+        }
&lt;p&gt;+    }&lt;br/&gt;
+    &lt;br/&gt;
+    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Releases created CreationalContext instances&lt;br/&gt;
      */&lt;br/&gt;
     public void release(@Observes final BeforeShutdown event) {&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;for (final CreationalContext&amp;lt;?&amp;gt; disposableCreationalContext: disposableCreationalContexts) {&lt;/li&gt;
	&lt;li&gt;disposableCreationalContext.release();&lt;br/&gt;
+        synchronized (disposableCreationalContexts) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+            for (final CreationalContext&amp;lt;?&amp;gt; disposableCreationalContext}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;     }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -375,9 +393,13 @@ private void customize(final BeanManager beanManager, final JAXRSServerFactoryBe&lt;br/&gt;
      */&lt;br/&gt;
     private&amp;lt;T&amp;gt; CreationalContext&amp;lt; T &amp;gt; createCreationalContext(final BeanManager beanManager, Bean&amp;lt; T &amp;gt; bean) {&lt;br/&gt;
         final CreationalContext&amp;lt; T &amp;gt; creationalContext = beanManager.createCreationalContext(bean);&lt;br/&gt;
+        &lt;br/&gt;
         if (!(bean instanceof DefaultApplicationBean)) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;disposableCreationalContexts.add(creationalContext);&lt;br/&gt;
+            synchronized (disposableCreationalContexts) 
{
+                disposableCreationalContexts.add(creationalContext);
+            }
&lt;p&gt;         }&lt;br/&gt;
+        &lt;br/&gt;
         return creationalContext;&lt;br/&gt;
     }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;diff --git a/integration/cdi/src/main/java/org/apache/cxf/cdi/event/DisposableCreationalContext.java b/integration/cdi/src/main/java/org/apache/cxf/cdi/event/DisposableCreationalContext.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..0944e4a057f&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/integration/cdi/src/main/java/org/apache/cxf/cdi/event/DisposableCreationalContext.java&lt;br/&gt;
@@ -0,0 +1,34 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.cxf.cdi.event;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+&lt;br/&gt;
+public class DisposableCreationalContext {&lt;br/&gt;
+    private final CreationalContext&amp;lt;?&amp;gt; context;&lt;br/&gt;
+    &lt;br/&gt;
+    public DisposableCreationalContext(CreationalContext&amp;lt;?&amp;gt; context) &lt;/p&gt;
{
+        this.context = context;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    public CreationalContext&amp;lt;?&amp;gt; getContext() &lt;/p&gt;
{
+        return context;
+    }
&lt;p&gt;+}&lt;br/&gt;
diff --git a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ConfigurableImpl.java b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ConfigurableImpl.java&lt;br/&gt;
index 9be144d0a55..54540272018 100644&lt;br/&gt;
&amp;#8212; a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ConfigurableImpl.java&lt;br/&gt;
+++ b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ConfigurableImpl.java&lt;br/&gt;
@@ -31,12 +31,17 @@&lt;/p&gt;

&lt;p&gt; public class ConfigurableImpl&amp;lt;C extends Configurable&amp;lt;C&amp;gt;&amp;gt; implements Configurable&amp;lt;C&amp;gt; {&lt;br/&gt;
     private ConfigurationImpl config;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private C configurable;&lt;/li&gt;
	&lt;li&gt;private Class&amp;lt;?&amp;gt;[] supportedProviderClasses;&lt;br/&gt;
+    private final C configurable;&lt;br/&gt;
+    private final Class&amp;lt;?&amp;gt;[] supportedProviderClasses;&lt;br/&gt;
+    &lt;br/&gt;
+    public interface Instantiator 
{
+        &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls);
+    }
&lt;p&gt;+    &lt;br/&gt;
     public ConfigurableImpl(C configurable, RuntimeType rt, Class&amp;lt;?&amp;gt;[] supportedProviderClasses) &lt;/p&gt;
{
         this(configurable, supportedProviderClasses, new ConfigurationImpl(rt));
     }
&lt;p&gt;-&lt;br/&gt;
+    &lt;br/&gt;
     public ConfigurableImpl(C configurable, Class&amp;lt;?&amp;gt;[] supportedProviderClasses, Configuration config) {&lt;br/&gt;
         this(configurable, supportedProviderClasses);&lt;br/&gt;
         this.config = config instanceof ConfigurationImpl&lt;br/&gt;
@@ -98,8 +103,7 @@ public C register(Class&amp;lt;?&amp;gt; providerClass) {&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     @Override&lt;br/&gt;
     public C register(Class&amp;lt;?&amp;gt; providerClass, int bindingPriority) &lt;/p&gt;
{
-        return doRegister(ConfigurationImpl.createProvider(providerClass),
-                          bindingPriority, supportedProviderClasses);
+        return doRegister(getInstantiator().create(providerClass), bindingPriority, supportedProviderClasses);
     }

&lt;p&gt;     @Override&lt;br/&gt;
@@ -109,7 +113,11 @@ public C register(Class&amp;lt;?&amp;gt; providerClass, Class&amp;lt;?&amp;gt;... contracts) {&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
     public C register(Class&amp;lt;?&amp;gt; providerClass, Map&amp;lt;Class&amp;lt;?&amp;gt;, Integer&amp;gt; contracts) &lt;/p&gt;
{
-        return register(ConfigurationImpl.createProvider(providerClass), contracts);
+        return register(getInstantiator().create(providerClass), contracts);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    protected Instantiator getInstantiator() &lt;/p&gt;
{
+        return ConfigurationImpl::createProvider;
     }

&lt;p&gt;     private C doRegister(Object provider, int bindingPriority, Class&amp;lt;?&amp;gt;... contracts) {&lt;br/&gt;
diff --git a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ServerConfigurableFactory.java b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ServerConfigurableFactory.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..f4e9ef8e955&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ServerConfigurableFactory.java&lt;br/&gt;
@@ -0,0 +1,42 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.cxf.jaxrs.provider;&lt;br/&gt;
+&lt;br/&gt;
+import javax.ws.rs.container.ContainerRequestFilter;&lt;br/&gt;
+import javax.ws.rs.container.ContainerResponseFilter;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+import javax.ws.rs.ext.ReaderInterceptor;&lt;br/&gt;
+import javax.ws.rs.ext.WriterInterceptor;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Manages the creation of server-side Configurable&amp;lt;FeatureContext&amp;gt; depending on &lt;br/&gt;
+ * the presence of managed runtime (like CDI f.e.). &lt;br/&gt;
+ */&lt;br/&gt;
+public interface ServerConfigurableFactory {&lt;br/&gt;
+    Class&amp;lt;?&amp;gt;[] SERVER_FILTER_INTERCEPTOR_CLASSES = new Class&amp;lt;?&amp;gt;[] &lt;/p&gt;
{
+        ContainerRequestFilter.class,
+        ContainerResponseFilter.class,
+        ReaderInterceptor.class,
+        WriterInterceptor.class 
+    }
&lt;p&gt;;&lt;br/&gt;
+    &lt;br/&gt;
+    Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context);&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ServerProviderFactory.java b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ServerProviderFactory.java&lt;br/&gt;
index dbacd48c3a1..dda7ee290d3 100644&lt;br/&gt;
&amp;#8212; a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ServerProviderFactory.java&lt;br/&gt;
+++ b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ServerProviderFactory.java&lt;br/&gt;
@@ -21,11 +21,9 @@&lt;br/&gt;
 import java.lang.reflect.Field;&lt;br/&gt;
 import java.lang.reflect.Method;&lt;br/&gt;
 import java.util.ArrayList;&lt;br/&gt;
-import java.util.Arrays;&lt;br/&gt;
 import java.util.Collection;&lt;br/&gt;
 import java.util.Collections;&lt;br/&gt;
 import java.util.HashMap;&lt;br/&gt;
-import java.util.HashSet;&lt;br/&gt;
 import java.util.LinkedHashSet;&lt;br/&gt;
 import java.util.LinkedList;&lt;br/&gt;
 import java.util.List;&lt;br/&gt;
@@ -40,6 +38,7 @@&lt;br/&gt;
 import javax.ws.rs.container.ContainerResponseFilter;&lt;br/&gt;
 import javax.ws.rs.container.DynamicFeature;&lt;br/&gt;
 import javax.ws.rs.container.PreMatching;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
 import javax.ws.rs.core.Configuration;&lt;br/&gt;
 import javax.ws.rs.core.Feature;&lt;br/&gt;
 import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
@@ -72,12 +71,6 @@&lt;br/&gt;
 import org.apache.cxf.message.MessageUtils;&lt;/p&gt;

&lt;p&gt; public final class ServerProviderFactory extends ProviderFactory {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private static final Set&amp;lt;Class&amp;lt;?&amp;gt;&amp;gt; SERVER_FILTER_INTERCEPTOR_CLASSES =&lt;/li&gt;
	&lt;li&gt;new HashSet&amp;lt;Class&amp;lt;?&amp;gt;&amp;gt;(Arrays.&amp;lt;Class&amp;lt;?&amp;gt;&amp;gt;asList(ContainerRequestFilter.class,&lt;/li&gt;
	&lt;li&gt;ContainerResponseFilter.class,&lt;/li&gt;
	&lt;li&gt;ReaderInterceptor.class,&lt;/li&gt;
	&lt;li&gt;WriterInterceptor.class));&lt;br/&gt;
-&lt;br/&gt;
     private static final String WADL_PROVIDER_NAME = &quot;org.apache.cxf.jaxrs.model.wadl.WadlGenerator&quot;;&lt;br/&gt;
     private static final String MAKE_DEFAULT_WAE_LEAST_SPECIFIC = &quot;default.wae.mapper.least.specific&quot;;&lt;br/&gt;
     private List&amp;lt;ProviderInfo&amp;lt;ExceptionMapper&amp;lt;?&amp;gt;&amp;gt;&amp;gt; exceptionMappers =&lt;br/&gt;
@@ -399,8 +392,11 @@ private void doApplyDynamicFeatures(ClassResourceInfo cri) {&lt;br/&gt;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     private FeatureContext createServerFeatureContext() {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;FeatureContextImpl featureContext = new FeatureContextImpl();&lt;/li&gt;
	&lt;li&gt;ServerFeatureContextConfigurable configImpl = new ServerFeatureContextConfigurable(featureContext);&lt;br/&gt;
+        final FeatureContextImpl featureContext = new FeatureContextImpl();&lt;br/&gt;
+        final ServerConfigurableFactory factory = getBus().getExtension(ServerConfigurableFactory.class);&lt;br/&gt;
+        final Configurable&amp;lt;FeatureContext&amp;gt; configImpl = (factory == null) &lt;br/&gt;
+            ? new ServerFeatureContextConfigurable(featureContext) &lt;br/&gt;
+                : factory.create(featureContext);&lt;br/&gt;
         featureContext.setConfigurable(configImpl);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         if (application != null) {&lt;br/&gt;
@@ -418,7 +414,7 @@ protected static boolean isPrematching(Class&amp;lt;?&amp;gt; filterCls) {&lt;/p&gt;

&lt;p&gt;     private static class ServerFeatureContextConfigurable extends ConfigurableImpl&amp;lt;FeatureContext&amp;gt; {&lt;br/&gt;
         protected ServerFeatureContextConfigurable(FeatureContext mc) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;super(mc, RuntimeType.SERVER, SERVER_FILTER_INTERCEPTOR_CLASSES.toArray(new Class&amp;lt;?&amp;gt;[]{}));&lt;br/&gt;
+            super(mc, RuntimeType.SERVER, ServerConfigurableFactory.SERVER_FILTER_INTERCEPTOR_CLASSES);&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;diff --git a/systests/cdi/base/src/main/java/org/apache/cxf/systests/cdi/base/BookStoreAuthenticator.java b/systests/cdi/base/src/main/java/org/apache/cxf/systests/cdi/base/BookStoreAuthenticator.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..d2448cec54b&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/systests/cdi/base/src/main/java/org/apache/cxf/systests/cdi/base/BookStoreAuthenticator.java&lt;br/&gt;
@@ -0,0 +1,33 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.systests.cdi.base;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.ApplicationScoped;&lt;br/&gt;
+import javax.inject.Named;&lt;br/&gt;
+&lt;br/&gt;
+@Named @ApplicationScoped&lt;br/&gt;
+public class BookStoreAuthenticator {&lt;br/&gt;
+    public BookStoreAuthenticator() &lt;/p&gt;
{
+        
+    }
&lt;p&gt;+    &lt;br/&gt;
+    public boolean authenticated() &lt;/p&gt;
{
+        return true;
+    }
&lt;p&gt;+}&lt;br/&gt;
diff --git a/systests/cdi/base/src/main/java/org/apache/cxf/systests/cdi/base/BookStoreRequestFilter.java b/systests/cdi/base/src/main/java/org/apache/cxf/systests/cdi/base/BookStoreRequestFilter.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..cbd88115afe&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/systests/cdi/base/src/main/java/org/apache/cxf/systests/cdi/base/BookStoreRequestFilter.java&lt;br/&gt;
@@ -0,0 +1,39 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.cxf.systests.cdi.base;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+&lt;br/&gt;
+import javax.inject.Inject;&lt;br/&gt;
+import javax.ws.rs.container.ContainerRequestContext;&lt;br/&gt;
+import javax.ws.rs.container.ContainerRequestFilter;&lt;br/&gt;
+import javax.ws.rs.core.Response;&lt;br/&gt;
+import javax.ws.rs.core.Response.Status;&lt;br/&gt;
+&lt;br/&gt;
+public class BookStoreRequestFilter implements ContainerRequestFilter {&lt;br/&gt;
+    @Inject private BookStoreAuthenticator authenticator;&lt;br/&gt;
+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void filter(ContainerRequestContext requestContext) throws IOException {&lt;br/&gt;
+        if (!authenticator.authenticated()) &lt;/p&gt;
{
+            requestContext.abortWith(Response.status(Status.UNAUTHORIZED).build());
+        }
&lt;p&gt;+    }&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/systests/cdi/cdi-owb/cdi-producers-owb/src/test/java/org/apache/cxf/systest/jaxrs/cdi/SampleFeature.java b/systests/cdi/cdi-owb/cdi-producers-owb/src/test/java/org/apache/cxf/systest/jaxrs/cdi/SampleFeature.java&lt;br/&gt;
index 6a108dc1834..ba340825828 100644&lt;br/&gt;
&amp;#8212; a/systests/cdi/cdi-owb/cdi-producers-owb/src/test/java/org/apache/cxf/systest/jaxrs/cdi/SampleFeature.java&lt;br/&gt;
+++ b/systests/cdi/cdi-owb/cdi-producers-owb/src/test/java/org/apache/cxf/systest/jaxrs/cdi/SampleFeature.java&lt;br/&gt;
@@ -23,11 +23,13 @@&lt;br/&gt;
 import javax.ws.rs.core.FeatureContext;&lt;/p&gt;

&lt;p&gt; import org.apache.cxf.jaxrs.provider.atom.AtomFeedProvider;&lt;br/&gt;
+import org.apache.cxf.systests.cdi.base.BookStoreRequestFilter;&lt;/p&gt;

&lt;p&gt; public class SampleFeature implements Feature {&lt;br/&gt;
     @Override&lt;br/&gt;
     public boolean configure(FeatureContext context) &lt;/p&gt;
{
         context.register(AtomFeedProvider.class);
+        context.register(BookStoreRequestFilter.class);
         return false;
     }&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/systests/cdi/cdi-weld/cdi-producers-weld/src/test/java/org/apache/cxf/systest/jaxrs/cdi/SampleFeature.java b/systests/cdi/cdi-weld/cdi-producers-weld/src/test/java/org/apache/cxf/systest/jaxrs/cdi/SampleFeature.java&lt;br/&gt;
index 6a108dc1834..ba340825828 100644&lt;br/&gt;
&amp;#8212; a/systests/cdi/cdi-weld/cdi-producers-weld/src/test/java/org/apache/cxf/systest/jaxrs/cdi/SampleFeature.java&lt;br/&gt;
+++ b/systests/cdi/cdi-weld/cdi-producers-weld/src/test/java/org/apache/cxf/systest/jaxrs/cdi/SampleFeature.java&lt;br/&gt;
@@ -23,11 +23,13 @@&lt;br/&gt;
 import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
 &lt;br/&gt;
 import org.apache.cxf.jaxrs.provider.atom.AtomFeedProvider;&lt;br/&gt;
+import org.apache.cxf.systests.cdi.base.BookStoreRequestFilter;&lt;br/&gt;
 &lt;br/&gt;
 public class SampleFeature implements Feature {&lt;br/&gt;
     @Override&lt;br/&gt;
     public boolean configure(FeatureContext context) {         context.register(AtomFeedProvider.class);+        context.register(BookStoreRequestFilter.class);         return false;     }
&lt;p&gt; }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16223806" author="githubbot" created="Sun, 29 Oct 2017 00:59:38 +0000"  >&lt;p&gt;johnament commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147568247&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147568247&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Hmmm I just noticed something looking at another issue.  I think this may assume that all providers now registered are within a CDI bean archive.  We may want to do a fallback in case the bean cannot be located.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224007" author="githubbot" created="Sun, 29 Oct 2017 14:12:03 +0000"  >&lt;p&gt;reta commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147582392&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147582392&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Thanks for spotting that @johnament, I will address it shortly.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224044" author="githubbot" created="Sun, 29 Oct 2017 15:33:57 +0000"  >&lt;p&gt;reta commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147584922&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147584922&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   @johnament hmm (my turn), so in the test case we have there are 2 providers: one from bean archive, another from regular JAR file (not a bean archive). In both cases, the bean is located successfully. Looking why, BeanManager implementation (OWB, Weld) does the fallback in case there is no bean archive for a class available.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224045" author="githubbot" created="Sun, 29 Oct 2017 15:39:43 +0000"  >&lt;p&gt;rmannibucau commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147585124&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147585124&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   @reta if not a bean you will not get a Bean&amp;lt;?&amp;gt; instance doing the lookup (empty Set). If it is found it means the jar was scanned and the bean activated somehow. The issue can come from the test setup, did you try with jackson for instance or a plain custom-provider-nocdi.jar?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224048" author="githubbot" created="Sun, 29 Oct 2017 15:43:37 +0000"  >&lt;p&gt;reta commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147585253&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147585253&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   I did with `AtomFeedProvider` from plain no CDI archive, let me try Jackson to be sure &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224049" author="githubbot" created="Sun, 29 Oct 2017 15:47:18 +0000"  >&lt;p&gt;reta commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147585376&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147585376&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   @johnament No issues, works just fine for Jackson as well (no deployment archives are present but the bean was synthesized from the class). &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224050" author="githubbot" created="Sun, 29 Oct 2017 15:47:52 +0000"  >&lt;p&gt;reta commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147585376&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147585376&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   @rmannibucau  No issues, works just fine for Jackson as well (no deployment archives are present but the bean was synthesized from the class). &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224056" author="githubbot" created="Sun, 29 Oct 2017 15:54:48 +0000"  >&lt;p&gt;rmannibucau commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147585617&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147585617&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   this is because you don&apos;t lookup a cdi bean but create one, this is probably not what we want. We should lookup an existing bean or fallback on creating a plain instance (take care of context injection support &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;). If we don&apos;t we can have side effects in applications duplicating beans during lookup or just pollute the CDI context for no reason.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224057" author="githubbot" created="Sun, 29 Oct 2017 16:01:19 +0000"  >&lt;p&gt;reta commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147585824&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147585824&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   so basically the better way would be to call beanManager.getBeans() to ensure there is one in the context, and fallback to createBean if none, right? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224059" author="githubbot" created="Sun, 29 Oct 2017 16:05:39 +0000"  >&lt;p&gt;johnament commented on issue #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#issuecomment-340273268&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#issuecomment-340273268&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Could you double check with an explicitly @Vetoed provider?  I believe the&lt;br/&gt;
   way you run the CDI teats it discovers all veans regardless of beans.xml.&lt;/p&gt;

&lt;p&gt;   On Oct 29, 2017 11:47 AM, &quot;Andriy Redko&quot; &amp;lt;notifications@github.com&amp;gt; wrote:&lt;/p&gt;

&lt;p&gt;   &amp;gt; &lt;b&gt;@reta&lt;/b&gt; commented on this pull request.&lt;br/&gt;
   &amp;gt; ------------------------------&lt;br/&gt;
   &amp;gt;&lt;br/&gt;
   &amp;gt; In integration/cdi/src/main/java/org/apache/cxf/cdi/&lt;br/&gt;
   &amp;gt; CdiServerConfigurableFactory.java&lt;br/&gt;
   &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147585376&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147585376&lt;/a&gt;&amp;gt;:&lt;br/&gt;
   &amp;gt;&lt;br/&gt;
   &amp;gt; &amp;gt; +    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
   &amp;gt; +        return new CdiServerFeatureContextConfigurable(context, beanManager);
   &amp;gt; +    }
&lt;p&gt;   &amp;gt; +&lt;br/&gt;
   &amp;gt; +    /**&lt;br/&gt;
   &amp;gt; +     * Instantiates the instance of the provider using CDI/BeanManager&lt;br/&gt;
   &amp;gt; +     */&lt;br/&gt;
   &amp;gt; +    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
   &amp;gt; +        private final BeanManager beanManager;&lt;br/&gt;
   &amp;gt; +&lt;br/&gt;
   &amp;gt; +        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
   &amp;gt; +            this.beanManager = beanManager;
   &amp;gt; +        }
&lt;p&gt;   &amp;gt; +&lt;br/&gt;
   &amp;gt; +        @Override&lt;br/&gt;
   &amp;gt; +        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;br/&gt;
   &amp;gt;&lt;br/&gt;
   &amp;gt; @johnament &amp;lt;&lt;a href=&quot;https://github.com/johnament&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/johnament&lt;/a&gt;&amp;gt; No issues, works just fine for&lt;br/&gt;
   &amp;gt; Jackson as well (no deployment archives are present but the bean was&lt;br/&gt;
   &amp;gt; synthesized from the class).&lt;br/&gt;
   &amp;gt;&lt;br/&gt;
   &amp;gt; &#8212;&lt;br/&gt;
   &amp;gt; You are receiving this because you were mentioned.&lt;br/&gt;
   &amp;gt; Reply to this email directly, view it on GitHub&lt;br/&gt;
   &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147585376&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147585376&lt;/a&gt;&amp;gt;, or mute&lt;br/&gt;
   &amp;gt; the thread&lt;br/&gt;
   &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/notifications/unsubscribe-auth/AAGmh_QK76KRSJVoNEQLJWz9THQ_wwy6ks5sxJ4GgaJpZM4QJPlJ&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/notifications/unsubscribe-auth/AAGmh_QK76KRSJVoNEQLJWz9THQ_wwy6ks5sxJ4GgaJpZM4QJPlJ&lt;/a&gt;&amp;gt;&lt;br/&gt;
   &amp;gt; .&lt;br/&gt;
   &amp;gt;&lt;/p&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224075" author="githubbot" created="Sun, 29 Oct 2017 16:09:50 +0000"  >&lt;p&gt;reta commented on issue #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#issuecomment-340273566&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#issuecomment-340273566&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @johnament yes, sure, I can add one @Vetoed guy. The tests do not hijack anything,  CDI container *&lt;b&gt;does not&lt;/b&gt;* discover all the beans, the `bean.xml` presence is strictly honored. &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224077" author="githubbot" created="Sun, 29 Oct 2017 16:10:58 +0000"  >&lt;p&gt;rmannibucau commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147586166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147586166&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   nop, try getbeans and if resolve() returns null then use standalone logic (default newInstance())&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224078" author="githubbot" created="Sun, 29 Oct 2017 16:15:17 +0000"  >&lt;p&gt;reta commented on a change in pull request #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#discussion_r147586312&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#discussion_r147586312&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,85 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
+import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
+import javax.ws.rs.RuntimeType;&lt;br/&gt;
+import javax.ws.rs.core.Configurable;&lt;br/&gt;
+import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
+&lt;br/&gt;
+/** &lt;br/&gt;
+ * Creates the instance of Configurable&amp;lt;?&amp;gt; suitable for CDI-managed runtime.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CdiServerConfigurableFactory implements ServerConfigurableFactory {&lt;br/&gt;
+    private final BeanManager beanManager;&lt;br/&gt;
+    &lt;br/&gt;
+    CdiServerConfigurableFactory(final BeanManager beanManager) &lt;/p&gt;
{
+        this.beanManager = beanManager;
+    }
&lt;p&gt;+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Configurable&amp;lt;FeatureContext&amp;gt; create(FeatureContext context) &lt;/p&gt;
{
+        return new CdiServerFeatureContextConfigurable(context, beanManager);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /** &lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager &lt;br/&gt;
+     */&lt;br/&gt;
+    private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
+        private final BeanManager beanManager;&lt;br/&gt;
+        &lt;br/&gt;
+        CdiInstantiator(final BeanManager beanManager) &lt;/p&gt;
{
+            this.beanManager = beanManager;
+        }
&lt;p&gt;+        &lt;br/&gt;
+        @Override&lt;br/&gt;
+        public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   sounds good, thanks @rmannibucau &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224103" author="githubbot" created="Sun, 29 Oct 2017 17:21:46 +0000"  >&lt;p&gt;reta opened a new pull request #330: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/330&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/330&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Using proper CDI bean resolution with fallback to default strategy. The `@Vetoed` presented an edge case when CDI runtime won&apos;t resolve the bean but we have to go over manual instantiation. &lt;/p&gt;

&lt;p&gt;   CC @rmannibucau @johnament &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224106" author="githubbot" created="Sun, 29 Oct 2017 17:34:56 +0000"  >&lt;p&gt;rmannibucau commented on issue #330: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/330#issuecomment-340279477&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/330#issuecomment-340279477&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   LGTM&lt;/p&gt;

&lt;p&gt;   side note: do we have a test covering @Context injection/instantiation too? Wonder if we need a third case where we do the injection normally (standalone) then create an InjectionTarget to integrate with CDI.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224107" author="githubbot" created="Sun, 29 Oct 2017 17:38:26 +0000"  >&lt;p&gt;reta commented on issue #330: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/330#issuecomment-340279707&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/330#issuecomment-340279707&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks @rmannibucau, we should be good here as `@Context` members are injected independently, but sure, it is good idea to have a test case.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224108" author="githubbot" created="Sun, 29 Oct 2017 17:41:17 +0000"  >&lt;p&gt;rmannibucau commented on issue #330: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/330#issuecomment-340279887&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/330#issuecomment-340279887&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @ApplicationScoped the provider, will be proxied so the injection will not be done as expected &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. A workaround used can be to support @Inject @Context but that&apos;s a workaround but CDI doesn&apos;t enable us to do more yet until you add automatically an @AroundConstruct interceptor to do the injection.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224110" author="githubbot" created="Sun, 29 Oct 2017 17:46:52 +0000"  >&lt;p&gt;reta commented on issue #330: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/330#issuecomment-340280285&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/330#issuecomment-340280285&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @rmannibucau I see, proxies do mess things up. I think would be good to solve that as a separate issue, it has more broad impact that the one this PR concerns. I will create a test case to reproduce that and an issue in the tracker. Sounds like a plan?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224112" author="githubbot" created="Sun, 29 Oct 2017 17:49:07 +0000"  >&lt;p&gt;rmannibucau commented on issue #330: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/330#issuecomment-340280475&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/330#issuecomment-340280475&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   +1, that&apos;s why it was a side note &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224115" author="githubbot" created="Sun, 29 Oct 2017 17:57:45 +0000"  >&lt;p&gt;reta commented on issue #330: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/330#issuecomment-340281055&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/330#issuecomment-340281055&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Done, &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7544&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CXF-7544&lt;/a&gt;. @rmannibucau @johnament Thank you guys for helping out with proper implementation. &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224117" author="githubbot" created="Sun, 29 Oct 2017 18:03:23 +0000"  >&lt;p&gt;reta closed pull request #330: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/330&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/330&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java b/integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
index 15d4643d847..9090bbfa664 100644&lt;br/&gt;
&amp;#8212; a/integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
+++ b/integration/cdi/src/main/java/org/apache/cxf/cdi/CdiServerConfigurableFactory.java&lt;br/&gt;
@@ -18,12 +18,11 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.cxf.cdi;&lt;/p&gt;

&lt;p&gt;+import java.util.Set;&lt;br/&gt;
+&lt;br/&gt;
 import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
-import javax.enterprise.inject.spi.AnnotatedType;&lt;br/&gt;
 import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
-import javax.enterprise.inject.spi.BeanAttributes;&lt;br/&gt;
 import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
-import javax.enterprise.inject.spi.InjectionTargetFactory;&lt;br/&gt;
 import javax.ws.rs.RuntimeType;&lt;br/&gt;
 import javax.ws.rs.core.Configurable;&lt;br/&gt;
 import javax.ws.rs.core.FeatureContext;&lt;br/&gt;
@@ -31,6 +30,7 @@&lt;br/&gt;
 import org.apache.cxf.cdi.event.DisposableCreationalContext;&lt;br/&gt;
 import org.apache.cxf.jaxrs.impl.ConfigurableImpl;&lt;br/&gt;
 import org.apache.cxf.jaxrs.impl.ConfigurableImpl.Instantiator;&lt;br/&gt;
+import org.apache.cxf.jaxrs.impl.ConfigurationImpl;&lt;br/&gt;
 import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;/p&gt;

&lt;p&gt; /** &lt;br/&gt;
@@ -49,7 +49,8 @@&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;     /** &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Instantiates the instance of the provider using CDI/BeanManager&lt;br/&gt;
+     * Instantiates the instance of the provider using CDI/BeanManager (or fall back&lt;br/&gt;
+     * to default strategy of CDI bean is not available).&lt;br/&gt;
      */&lt;br/&gt;
     private static class CdiInstantiator implements Instantiator {&lt;br/&gt;
         private final BeanManager beanManager;&lt;br/&gt;
@@ -60,18 +61,21 @@&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         @Override&lt;br/&gt;
         public &amp;lt;T&amp;gt; Object create(Class&amp;lt;T&amp;gt; cls) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final AnnotatedType&amp;lt;T&amp;gt; annotatedType = beanManager.createAnnotatedType(cls);&lt;/li&gt;
	&lt;li&gt;final InjectionTargetFactory&amp;lt;T&amp;gt; injectionTargetFactory =&lt;/li&gt;
	&lt;li&gt;beanManager.getInjectionTargetFactory(annotatedType);&lt;/li&gt;
	&lt;li&gt;final BeanAttributes&amp;lt;T&amp;gt; attributes = beanManager.createBeanAttributes(annotatedType);&lt;/li&gt;
	&lt;li&gt;final Bean&amp;lt;T&amp;gt; bean = beanManager.createBean(attributes, cls, injectionTargetFactory);&lt;/li&gt;
	&lt;li&gt;final CreationalContext&amp;lt;?&amp;gt; context = beanManager.createCreationalContext(bean);&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;if (!beanManager.isNormalScope(bean.getScope())) {&lt;/li&gt;
	&lt;li&gt;beanManager.fireEvent(new DisposableCreationalContext(context));&lt;br/&gt;
+            final Set&amp;lt;Bean&amp;lt;?&amp;gt;&amp;gt; candidates = beanManager.getBeans(cls);&lt;br/&gt;
+            final Bean&amp;lt;?&amp;gt; bean = beanManager.resolve(candidates);&lt;br/&gt;
+&lt;br/&gt;
+            if (bean != null) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+                final CreationalContext&amp;lt;?&amp;gt; context = beanManager.createCreationalContext(bean);+                +                if (!beanManager.isNormalScope(bean.getScope())) {
+                    beanManager.fireEvent(new DisposableCreationalContext(context));
+                }++                return beanManager.getReference(bean, cls, context);+            }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt; else &lt;/p&gt;
{
+                // No CDI bean available, falling back to default instantiation strategy
+                return ConfigurationImpl.createProvider(cls);
             }&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;return beanManager.getReference(bean, cls, context);&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;diff --git a/systests/cdi/base/src/main/java/org/apache/cxf/systests/cdi/base/BookStoreRequestFilter.java b/systests/cdi/base/src/main/java/org/apache/cxf/systests/cdi/base/BookStoreRequestFilter.java&lt;br/&gt;
index cbd88115afe..4fb8f846c4a 100644&lt;br/&gt;
&amp;#8212; a/systests/cdi/base/src/main/java/org/apache/cxf/systests/cdi/base/BookStoreRequestFilter.java&lt;br/&gt;
+++ b/systests/cdi/base/src/main/java/org/apache/cxf/systests/cdi/base/BookStoreRequestFilter.java&lt;br/&gt;
@@ -24,14 +24,22 @@&lt;br/&gt;
 import javax.inject.Inject;&lt;br/&gt;
 import javax.ws.rs.container.ContainerRequestContext;&lt;br/&gt;
 import javax.ws.rs.container.ContainerRequestFilter;&lt;br/&gt;
+import javax.ws.rs.container.ResourceInfo;&lt;br/&gt;
+import javax.ws.rs.core.Context;&lt;br/&gt;
 import javax.ws.rs.core.Response;&lt;br/&gt;
 import javax.ws.rs.core.Response.Status;&lt;/p&gt;

&lt;p&gt; public class BookStoreRequestFilter implements ContainerRequestFilter {&lt;br/&gt;
     @Inject private BookStoreAuthenticator authenticator;&lt;br/&gt;
+    @Context private ResourceInfo resourceInfo;&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
     public void filter(ContainerRequestContext requestContext) throws IOException {&lt;br/&gt;
+        // Contextual instances should be injected independently&lt;br/&gt;
+        if (resourceInfo == null || resourceInfo.getResourceMethod() == null) &lt;/p&gt;
{
+            requestContext.abortWith(Response.serverError().build());
+        }
&lt;p&gt;+        &lt;br/&gt;
         if (!authenticator.authenticated()) &lt;/p&gt;
{
             requestContext.abortWith(Response.status(Status.UNAUTHORIZED).build());
         }
&lt;p&gt;diff --git a/systests/cdi/base/src/main/java/org/apache/cxf/systests/cdi/base/BookStoreResponseFilter.java b/systests/cdi/base/src/main/java/org/apache/cxf/systests/cdi/base/BookStoreResponseFilter.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..2f5f40fd61d&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/systests/cdi/base/src/main/java/org/apache/cxf/systests/cdi/base/BookStoreResponseFilter.java&lt;br/&gt;
@@ -0,0 +1,44 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.cxf.systests.cdi.base;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.inject.Vetoed;&lt;br/&gt;
+import javax.inject.Inject;&lt;br/&gt;
+import javax.ws.rs.container.ContainerRequestContext;&lt;br/&gt;
+import javax.ws.rs.container.ContainerResponseContext;&lt;br/&gt;
+import javax.ws.rs.container.ContainerResponseFilter;&lt;br/&gt;
+import javax.ws.rs.core.Response;&lt;br/&gt;
+&lt;br/&gt;
+@Vetoed&lt;br/&gt;
+public class BookStoreResponseFilter implements ContainerResponseFilter {&lt;br/&gt;
+    @Inject private BookStoreAuthenticator authenticator;&lt;br/&gt;
+    &lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void filter(ContainerRequestContext requestContext,&lt;br/&gt;
+            ContainerResponseContext responseContext) throws IOException {&lt;br/&gt;
+        if (authenticator != null) &lt;/p&gt;
{
+            // This filter should not be created using CDI runtime (it is vetoed) as 
+            // such the injection should not be performed.
+            responseContext.setStatus(Response.Status.INTERNAL_SERVER_ERROR.getStatusCode());
+        }
&lt;p&gt;+    }&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/systests/cdi/cdi-owb/cdi-producers-owb/src/test/java/org/apache/cxf/systest/jaxrs/cdi/SampleFeature.java b/systests/cdi/cdi-owb/cdi-producers-owb/src/test/java/org/apache/cxf/systest/jaxrs/cdi/SampleFeature.java&lt;br/&gt;
index ba340825828..309a5ea3a99 100644&lt;br/&gt;
&amp;#8212; a/systests/cdi/cdi-owb/cdi-producers-owb/src/test/java/org/apache/cxf/systest/jaxrs/cdi/SampleFeature.java&lt;br/&gt;
+++ b/systests/cdi/cdi-owb/cdi-producers-owb/src/test/java/org/apache/cxf/systest/jaxrs/cdi/SampleFeature.java&lt;br/&gt;
@@ -24,12 +24,14 @@&lt;/p&gt;

&lt;p&gt; import org.apache.cxf.jaxrs.provider.atom.AtomFeedProvider;&lt;br/&gt;
 import org.apache.cxf.systests.cdi.base.BookStoreRequestFilter;&lt;br/&gt;
+import org.apache.cxf.systests.cdi.base.BookStoreResponseFilter;&lt;/p&gt;

&lt;p&gt; public class SampleFeature implements Feature {&lt;br/&gt;
     @Override&lt;br/&gt;
     public boolean configure(FeatureContext context) &lt;/p&gt;
{
         context.register(AtomFeedProvider.class);
         context.register(BookStoreRequestFilter.class);
+        context.register(BookStoreResponseFilter.class);
         return false;
     }&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/systests/cdi/cdi-weld/cdi-producers-weld/src/test/java/org/apache/cxf/systest/jaxrs/cdi/SampleFeature.java b/systests/cdi/cdi-weld/cdi-producers-weld/src/test/java/org/apache/cxf/systest/jaxrs/cdi/SampleFeature.java&lt;br/&gt;
index ba340825828..309a5ea3a99 100644&lt;br/&gt;
&amp;#8212; a/systests/cdi/cdi-weld/cdi-producers-weld/src/test/java/org/apache/cxf/systest/jaxrs/cdi/SampleFeature.java&lt;br/&gt;
+++ b/systests/cdi/cdi-weld/cdi-producers-weld/src/test/java/org/apache/cxf/systest/jaxrs/cdi/SampleFeature.java&lt;br/&gt;
@@ -24,12 +24,14 @@&lt;br/&gt;
 &lt;br/&gt;
 import org.apache.cxf.jaxrs.provider.atom.AtomFeedProvider;&lt;br/&gt;
 import org.apache.cxf.systests.cdi.base.BookStoreRequestFilter;&lt;br/&gt;
+import org.apache.cxf.systests.cdi.base.BookStoreResponseFilter;&lt;br/&gt;
 &lt;br/&gt;
 public class SampleFeature implements Feature {&lt;br/&gt;
     @Override&lt;br/&gt;
     public boolean configure(FeatureContext context) {         context.register(AtomFeedProvider.class);         context.register(BookStoreRequestFilter.class);+        context.register(BookStoreResponseFilter.class);         return false;     }
&lt;p&gt; }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224121" author="githubbot" created="Sun, 29 Oct 2017 18:13:43 +0000"  >&lt;p&gt;johnament commented on issue #330: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/330#issuecomment-340282232&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/330#issuecomment-340282232&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   LGTM as well.  FWIW, I was able to cause it to fail using a CDI 2 feature of SE initialization.&lt;/p&gt;

&lt;p&gt;   ```java&lt;br/&gt;
   SeContainerInitializer.newInstance()&lt;br/&gt;
           .disableDiscovery()&lt;br/&gt;
           .addBeanClasses(Resources.class, LoggingReporter.class, BraveProducers.class, RestApplication.class, TopCDsEndpoint.class, CXFCdiServlet.class)&lt;br/&gt;
           .addExtensions(new JAXRSCdiResourceExtension())&lt;br/&gt;
           .initialize();&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224127" author="githubbot" created="Sun, 29 Oct 2017 18:21:49 +0000"  >&lt;p&gt;reta commented on issue #330: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/330#issuecomment-340282842&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/330#issuecomment-340282842&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   To be fair, we haven&apos;t tested with CDI 2 yet &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; But if you could summarize your observations, including the example above, it would be great help and starting point to address that.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16224132" author="githubbot" created="Sun, 29 Oct 2017 18:29:43 +0000"  >&lt;p&gt;johnament commented on issue #330: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/330#issuecomment-340283415&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/330#issuecomment-340283415&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   In general, there are no issues using CXF with CDI 2, the integration continues to work fine.  This was just something I noticed and wanted to confirm as a real issue.&lt;/p&gt;

&lt;p&gt;   `@Vetoed` was the easiest way I had to explain where it would fail from a mobile &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16225473" author="sergey_beryozkin" created="Mon, 30 Oct 2017 18:17:36 +0000"  >&lt;p&gt;Hi Andriy, &lt;br/&gt;
Has just returned from the trip, this looks neat, except that I wonder, should ServerConfigurableFactory be renamed to ConfigurableFactory  or ClientConfigurableFactory be introduced, given that this should probably work for the client filters as well ?&lt;br/&gt;
Sergey&lt;/p&gt;

</comment>
                            <comment id="16225479" author="githubbot" created="Mon, 30 Oct 2017 18:21:10 +0000"  >&lt;p&gt;sberyozkin commented on issue #329: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7501&quot; title=&quot;Cannot inject field in ContainerRequestFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7501&quot;&gt;&lt;del&gt;CXF-7501&lt;/del&gt;&lt;/a&gt;: Cannot inject field in ContainerRequestFilter (and generally, into any providers registered using FeatureContext)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/329#issuecomment-340538038&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/329#issuecomment-340538038&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Right, the fallback should be available&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16225564" author="reta" created="Mon, 30 Oct 2017 19:05:48 +0000"  >&lt;p&gt;Hi Sergey,&lt;/p&gt;

&lt;p&gt;Thanks, that&apos;s exactly right, the plan is to introduce ClientConfigurableFactory for the client side. The CDI integration for the client side it not really supported by us yet, this is something to work on next. I will pick it up shortly, thanks!&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
    Andriy Redko &lt;/p&gt;</comment>
                            <comment id="16225592" author="sergey_beryozkin" created="Mon, 30 Oct 2017 19:16:59 +0000"  >&lt;p&gt;Thanks, what about supporting Inject as an alternative to Context in general ? Or does it already work with CDI, for example, can one inject UriInfo with @Injejct into the custom application ?&lt;/p&gt;</comment>
                            <comment id="16225598" author="reta" created="Mon, 30 Oct 2017 19:23:29 +0000"  >&lt;p&gt;We have this guy, &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7544&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CXF-7544&lt;/a&gt;. I think the conclusion at the moment is not to mix pure CDI injection and JAX-RS @Context injection, as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmannibucau&quot; class=&quot;user-hover&quot; rel=&quot;rmannibucau&quot;&gt;rmannibucau&lt;/a&gt; pointed out. But there are complexities here so we shall see &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Thanks.&lt;/p&gt;</comment>
                            <comment id="16225606" author="sergey_beryozkin" created="Mon, 30 Oct 2017 19:29:50 +0000"  >&lt;p&gt;That is a separate issue. My question is about using @Inject where @Context is now used for the standard providers, and what I&apos;m really looking at is whether we should doc that the ServerConfigurableFactory interface can change.&lt;/p&gt;</comment>
                            <comment id="16225633" author="reta" created="Mon, 30 Oct 2017 19:44:37 +0000"  >&lt;p&gt;The @Inject is used for CDI injection while @Context is used for JAX-RS injection, this part has not changed. At the moment, ServerConfigurableFactory does not impact this behavior anyhow, but it does impact the way class instances are created. In case of CDI, if there is a bean, the CDI container will create an instance and inject the dependencies. Later one, the @Context injection will be performed on per-request level, as it happens right now. I believe it should stay as is. &lt;/p&gt;

&lt;p&gt;Regarding doc ServerConfigurableFactory, it probably may change if we decide to marry @Inject + @Context in the future. But I am not sure we should do that.&lt;/p&gt;</comment>
                            <comment id="16225656" author="sergey_beryozkin" created="Mon, 30 Oct 2017 20:01:49 +0000"  >&lt;p&gt;There&apos;s a very strong push at the JAX-RS spec level to do &apos;Inject&apos; only. Look at Jersey docs, they probably do not even have Context anywhere now. This is why it can make sense to make this new interface doc-ed as expected to change, it might not, but we should anticipate @Context will be gone entirely&lt;/p&gt;</comment>
                            <comment id="16225665" author="reta" created="Mon, 30 Oct 2017 20:15:50 +0000"  >&lt;p&gt;Sure, I think you have better exposure to upcoming changes / trends, which is good &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; We could certainly explore what it takes to go @Inject only, so I can add the documentation noting the possible change. Btw, Jersey has a lot of @Context mentioned in the docs (&lt;a href=&quot;https://jersey.github.io/documentation/latest/user-guide.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jersey.github.io/documentation/latest/user-guide.html&lt;/a&gt;). &lt;/p&gt;</comment>
                            <comment id="16225698" author="sergey_beryozkin" created="Mon, 30 Oct 2017 20:45:43 +0000"  >&lt;p&gt;Sorry, I did not really want to position myself here as someone in the know &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, but indeed, I spent a lot of time arguing for @Context be still supported, though I feel like it will be much more difficult keeping it around in the future (major) JAX-RS versions. Thanks for the updating the docs. Perhaps this future work for supporting the Inject everywhere would be addressed at a different level, but looks like your idea of using the Bus extensions is very good, so we might want just to update this interface...&lt;/p&gt;

&lt;p&gt;By the way, re the client vs server factories. FYI, FeatureContext.getConfiguration().getRuntimeScope() tells whether it&apos;s a client or server based configurable context. Given this, should we have it called ConfigurableFactory, similarly to JAX-RS &apos;Configurable&apos; which is neutral ? If you prefer to keep it as ServerConfigurableFactory then I&apos;m fine with it given we&apos;ve just doc-ed the interface might change in the future &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;


</comment>
                            <comment id="16225712" author="reta" created="Mon, 30 Oct 2017 20:59:27 +0000"  >&lt;p&gt;I really appreciate your insights, no doubts about that, thank a lot for sharing them &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I think that many people, you and myself included, concerned that there is an overlap between @Context and @Inject, and this is indeed an issue. Having one mechanism would benefit all, now when CDI officially supports SE, things may be easier in fact. Not sure what to do in case of Spring / unmanaged runtimes? &lt;/p&gt;

&lt;p&gt;To be honest, I started with ConfigurableFactory first :-D But than I added the list of internal server-side providers to register (so not to copy/paste them around) and discovered we have similar implementation for the client. So it forced me to go with ServerConfigurableFactory and (future) ClientConfigurableFactory. Functionally they might be similar but there are differences on the conceptual level, like providers f.e., I didn&apos;t want to mix them together. I think we could always refine the implementation later on. What do you think?&lt;/p&gt;</comment>
                            <comment id="16225764" author="sergey_beryozkin" created="Mon, 30 Oct 2017 21:26:54 +0000"  >&lt;p&gt;Hi Andriy, sure, lets keep it as is for now, in practice the CXF CDI extension will likely be the only provider of this interface in the short to medium term so we&apos;ll have the flexibility to change things if really needed, thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12886675" name="javax-mvc.jar" size="17279" author="jeyvison" created="Tue, 12 Sep 2017 17:29:43 +0000"/>
                            <attachment id="12886674" name="ozark.jar" size="112847" author="jeyvison" created="Tue, 12 Sep 2017 17:29:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jz87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>