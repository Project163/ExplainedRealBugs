<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:04:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5254] Unmarshall exception if a sequence&lt;string&gt; is used in a struct.</title>
                <link>https://issues.apache.org/jira/browse/CXF-5254</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;A server function returns a struct. This struct contains another struct which contains a sequence&amp;lt;string&amp;gt;. Calling this method with a CXF/Corba-Client leads to an unmarshall exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Warnung: Interceptor &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; {http:&lt;span class=&quot;code-comment&quot;&gt;//cxf.apache.org/bindings/corba/idl/repro}repro.ServiceCORBAService#{http://cxf.apache.org/bindings/corba/idl/repro}getFirst has thrown exception, unwinding now
&lt;/span&gt;org.apache.cxf.interceptor.Fault: Unmarshalling Error: unerwartetes Element (URI:&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;, lokal:&quot;&lt;/span&gt;item&quot;). Erwartete Elemente sind &amp;lt;{http:&lt;span class=&quot;code-comment&quot;&gt;//cxf.apache.org/bindings/corba/idl/repro}id&amp;gt;,&amp;lt;{http://cxf.apache.org/bindings/corba/idl/repro}s1&amp;gt; 
&lt;/span&gt;	at org.apache.cxf.jaxb.JAXBEncoderDecoder.unmarshall(JAXBEncoderDecoder.java:808)
	at org.apache.cxf.jaxb.JAXBEncoderDecoder.unmarshall(JAXBEncoderDecoder.java:629)
	at org.apache.cxf.jaxb.io.DataReaderImpl.read(DataReaderImpl.java:157)
	at org.apache.cxf.interceptor.BareInInterceptor.handleMessage(BareInInterceptor.java:138)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(sorry for german).&lt;/p&gt;

&lt;p&gt;Using a pure CORBA-client works.&lt;/p&gt;

&lt;p&gt;I will attach a repro project to this issue if I have figured out how it works &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;JAVA7 / Windows 7&lt;/p&gt;</environment>
        <key id="12667286">CXF-5254</key>
            <summary>Unmarshall exception if a sequence&lt;string&gt; is used in a struct.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="milraun">Juergen Bockhorn</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Sep 2013 09:55:23 +0000</created>
                <updated>Tue, 26 Nov 2013 17:40:10 +0000</updated>
                            <resolved>Thu, 10 Oct 2013 15:23:44 +0000</resolved>
                                    <version>2.7.5</version>
                    <version>2.7.6</version>
                                    <fixVersion>2.7.8</fixVersion>
                                    <component>CORBA Binding</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13760101" author="milraun" created="Fri, 6 Sep 2013 09:58:43 +0000"  >&lt;p&gt;Repro for this issue.&lt;/p&gt;

&lt;p&gt;This repro needs a local namesservice on port 9999.&lt;/p&gt;

&lt;p&gt;ReproServiceMainSpring: main program starts the service using Spring.&lt;/p&gt;

&lt;p&gt;ReproServiceImpl: the service implementation&lt;/p&gt;

&lt;p&gt;ReproClient: a client using CXF&lt;br/&gt;
ReproCorbaClient: a client using pure corba&lt;/p&gt;</comment>
                            <comment id="13781692" author="gzres" created="Mon, 30 Sep 2013 09:08:44 +0000"  >&lt;p&gt;All the problems are explained with this diff (against &lt;tt&gt;3.0.0-SNAPSHOT&lt;/tt&gt;):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/rt/bindings/corba/src/main/java/org/apache/cxf/binding/corba/types/CorbaStructEventProducer.java b/rt/bindings/corba/src/main/java/org/apache/cxf/binding/corba/types/CorbaStructEventProducer.java
index f4b1304..e07975e 100644
--- a/rt/bindings/corba/src/main/java/org/apache/cxf/binding/corba/types/CorbaStructEventProducer.java
+++ b/rt/bindings/corba/src/main/java/org/apache/cxf/binding/corba/types/CorbaStructEventProducer.java
@@ -52,8 +52,7 @@ public class CorbaStructEventProducer extends AbstractStartEndEventProducer {
                 &amp;amp;&amp;amp; (CorbaHandlerUtils.isPrimitiveIDLTypeSequence(obj))
                 &amp;amp;&amp;amp; (!((CorbaSequenceHandler)obj).getElements().isEmpty())
                 &amp;amp;&amp;amp; (!CorbaHandlerUtils.isOctets(obj.getType()))) {
-                currentEventProducer =
-                    new CorbaPrimitiveSequenceEventProducer(obj, serviceInfo, orb);
+                currentEventProducer = new CorbaSequenceEventProducer(obj, serviceInfo, orb);
             } else if (obj.getSimpleName().equals(obj.getIdlType().getLocalPart() + &quot;_f&quot;)) {
                 //some &quot;special cases&quot; we need to make sure are mapped correctly
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the problem is that when the &lt;tt&gt;obj&lt;/tt&gt; becomes &lt;tt&gt;CorbaSequenceHandler&lt;/tt&gt;, the &lt;em&gt;special case&lt;/em&gt; creates &lt;tt&gt;CorbaPrimitiveSequenceEventProducer&lt;/tt&gt; which skips the &quot;s1&quot; event for the sequence contained in &quot;deep&quot; struct. In consequence JAXB complains about illegal &quot;item&quot; element when it expected one of &quot;deep/id&quot; and &quot;deep/s1&quot; - handler for s1 doesn&apos;t produce necessary wrapper element for the sequence.&lt;/p&gt;

&lt;p&gt;I&apos;ve extended the &lt;tt&gt;repro.idl&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
	struct Deep2 { 
		Strings s2;
	};
	struct Deeper {
		&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; id;
		Deep deep; 
		Deep2 deep2; 
	};
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to check what is the &lt;em&gt;special case&lt;/em&gt; when struct contains the sequence &lt;b&gt;only&lt;/b&gt;. In that case &quot;s2&quot; element also should cause the event to be produced.&lt;/p&gt;

&lt;p&gt;So I think it&apos;s enough to create &lt;tt&gt;CorbaSequenceEventProducer&lt;/tt&gt; instead of &lt;tt&gt;CorbaPrimitiveSequenceEventProducer&lt;/tt&gt;. Unless someone (&quot;Balaji Ravi&quot;?) explains what was that &quot;Special case for primitive sequence inside struct&quot; for (revision 541389 in SVN).&lt;/p&gt;

&lt;p&gt;regards&lt;br/&gt;
Grzegorz Grzybek&lt;/p&gt;</comment>
                            <comment id="13782171" author="dkulp" created="Mon, 30 Sep 2013 20:11:04 +0000"  >&lt;p&gt;That change causes the CORBADocLitClientTypeTest&amp;gt;AbstractTypeTestClient2.testCompoundArray test to fail so something is likely important in there.  Would need to dig in more to figure out what.&lt;/p&gt;</comment>
                            <comment id="13782703" author="gzres" created="Tue, 1 Oct 2013 08:06:14 +0000"  >&lt;p&gt;In &lt;tt&gt;cxf/testutils/src/main/resources/wsdl/type_test/type_test.xsd&lt;/tt&gt; (not-generated resourece) there is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;complexType name=&lt;span class=&quot;code-quote&quot;&gt;&quot;CompoundArray&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;sequence&amp;gt;&lt;/span&gt;
            &amp;lt;element maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;unbounded&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array1&quot;&lt;/span&gt;
		     type=&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;/&amp;gt;
            &amp;lt;element maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;unbounded&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array2&quot;&lt;/span&gt;
		     type=&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;/&amp;gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/sequence&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/complexType&amp;gt;&lt;/span&gt; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which translates to the following JAXB class:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CompoundArray {

    @Generated(value = &lt;span class=&quot;code-quote&quot;&gt;&quot;com.sun.tools.xjc.Driver&quot;&lt;/span&gt;, date = &lt;span class=&quot;code-quote&quot;&gt;&quot;2013-10-01T06:40:47+02:00&quot;&lt;/span&gt;, comments = &lt;span class=&quot;code-quote&quot;&gt;&quot;JAXB RI v2.2.6&quot;&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; array1;
    @Generated(value = &lt;span class=&quot;code-quote&quot;&gt;&quot;com.sun.tools.xjc.Driver&quot;&lt;/span&gt;, date = &lt;span class=&quot;code-quote&quot;&gt;&quot;2013-10-01T06:40:47+02:00&quot;&lt;/span&gt;, comments = &lt;span class=&quot;code-quote&quot;&gt;&quot;JAXB RI v2.2.6&quot;&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; array2;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However from Juergen&apos;s IDL:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	typedef sequence&amp;lt;string&amp;gt; Strings; 
	typedef sequence&amp;lt;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&amp;gt; Longs;

	struct Deep { 
		&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; id;
		Strings s1;
	};
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;generated WSDL has:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:complexType name=&lt;span class=&quot;code-quote&quot;&gt;&quot;repro.Strings&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:sequence&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:element maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;unbounded&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;item&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;xs:string&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xs:sequence&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xs:complexType&amp;gt;&lt;/span&gt; 
...
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:complexType name=&lt;span class=&quot;code-quote&quot;&gt;&quot;repro.Deep&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:sequence&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:element name=&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;xs:int&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:element name=&lt;span class=&quot;code-quote&quot;&gt;&quot;s1&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;repro.Strings&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xs:sequence&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xs:complexType&amp;gt;&lt;/span&gt; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and &lt;b&gt;not&lt;/b&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:complexType name=&lt;span class=&quot;code-quote&quot;&gt;&quot;repro.Deep&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:sequence&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:element name=&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;xs:int&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:element name=&lt;span class=&quot;code-quote&quot;&gt;&quot;item&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;xs:string&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;unbounded&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xs:sequence&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xs:complexType&amp;gt;&lt;/span&gt; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and the resulting JAXB class is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ReproDeep {

    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; id;
    @XmlElement(required = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; ReproStrings s1;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;that&apos;s why JAXB expects &lt;tt&gt;s1&lt;/tt&gt; element and that&apos;s why I thought &lt;tt&gt;CorbaSequenceEventProducer&lt;/tt&gt; would be better than &lt;tt&gt;CorbaPrimitiveSequenceEventProducer&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;at runtime however (in &lt;tt&gt;if ((obj instanceof CorbaSequenceHandler) ...&lt;/tt&gt; condition) I can&apos;t however distinguish between these two cases.&lt;/p&gt;

&lt;p&gt;I don&apos;t think cxf-corbatools-maven-plugin should &lt;em&gt;unwrap&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:element name=&lt;span class=&quot;code-quote&quot;&gt;&quot;s1&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;repro.Strings&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;into&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:element name=&lt;span class=&quot;code-quote&quot;&gt;&quot;item&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;xs:string&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;unbounded&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When I&apos;ve changed the generated &lt;tt&gt;org.apache.type_test.types1.CompoundArray&lt;/tt&gt; (in &lt;tt&gt;cxf-testutils&lt;/tt&gt;) from:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CompoundArray {

    @Generated(value = &lt;span class=&quot;code-quote&quot;&gt;&quot;com.sun.tools.xjc.Driver&quot;&lt;/span&gt;, date = &lt;span class=&quot;code-quote&quot;&gt;&quot;2013-10-01T06:40:47+02:00&quot;&lt;/span&gt;, comments = &lt;span class=&quot;code-quote&quot;&gt;&quot;JAXB RI v2.2.6&quot;&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; array1;
    @Generated(value = &lt;span class=&quot;code-quote&quot;&gt;&quot;com.sun.tools.xjc.Driver&quot;&lt;/span&gt;, date = &lt;span class=&quot;code-quote&quot;&gt;&quot;2013-10-01T06:40:47+02:00&quot;&lt;/span&gt;, comments = &lt;span class=&quot;code-quote&quot;&gt;&quot;JAXB RI v2.2.6&quot;&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; array2;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CompoundArray {

    @Generated(value = &lt;span class=&quot;code-quote&quot;&gt;&quot;com.sun.tools.xjc.Driver&quot;&lt;/span&gt;, date = &lt;span class=&quot;code-quote&quot;&gt;&quot;2013-10-01T06:40:47+02:00&quot;&lt;/span&gt;, comments = &lt;span class=&quot;code-quote&quot;&gt;&quot;JAXB RI v2.2.6&quot;&lt;/span&gt;)
    @XmlElementWrapper(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;array1&quot;&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; array1;
    @Generated(value = &lt;span class=&quot;code-quote&quot;&gt;&quot;com.sun.tools.xjc.Driver&quot;&lt;/span&gt;, date = &lt;span class=&quot;code-quote&quot;&gt;&quot;2013-10-01T06:40:47+02:00&quot;&lt;/span&gt;, comments = &lt;span class=&quot;code-quote&quot;&gt;&quot;JAXB RI v2.2.6&quot;&lt;/span&gt;)
    @XmlElementWrapper(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;array2&quot;&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; array2;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(to simulate explicit complex types for CORBA sequences with &lt;tt&gt;@XmlElementWrapper&lt;/tt&gt;), both CXF tests and Juergen&apos;s case worked fine.&lt;/p&gt;

&lt;p&gt;Maybe just change &lt;tt&gt;CompoundArray&lt;/tt&gt; complex type in &lt;tt&gt;/cxf-testutils/src/main/resources/wsdl/type_test/type_test.xsd&lt;/tt&gt;, so it refers to explicitely defined complexTypes for both sequences? It doesn&apos;t seem to be generated after all...&lt;/p&gt;

&lt;p&gt;regards&lt;br/&gt;
Grzegorz Grzybek&lt;/p&gt;</comment>
                            <comment id="13782717" author="gzres" created="Tue, 1 Oct 2013 08:25:16 +0000"  >&lt;p&gt;One more thing. &lt;a href=&quot;http://www.omg.org/spec/C2WSDL/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CORBA to WSDL/SOAP Interworking (C2WSDL) spec&lt;/a&gt; says in chapter &quot;4.1.7.5 Sequences&quot;:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;XML Schema for WS-I conformant RPC/Literal Soap Binding &#8211; an IDL sequence is mapped onto a sequence complex type (the SOAP encoding soapenc:Array type MUST NOT be used with WS-I conformant soap bindings).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So I think that the sequences - even the ones contained in structs should have separate complex type and the struct&apos;s member of type sequence should be separate element (in Juergen&apos;s case: &quot;s1&quot;) with the type of IDL sequence mapped to XSD complexType.&lt;/p&gt;</comment>
                            <comment id="13783315" author="dkulp" created="Tue, 1 Oct 2013 20:38:22 +0000"  >&lt;p&gt;We really need to support both cases.   In a &quot;wsdl first&quot; scenario, the current code is likely needed as the normal setup is for arrays to be in the unwrapped form.   For idl first, the wrappers are likely needed.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a patch that expands the corba typemapping a bit to record on the sequence element whether it should be wrapped or not.   Can you give that a try and use that as a basis?   The CXF tests pass, but I haven&apos;t checked to see if the testcase for this is completely solved with this yet.&lt;/p&gt;</comment>
                            <comment id="13783857" author="gzres" created="Wed, 2 Oct 2013 12:05:32 +0000"  >&lt;p&gt;Hello&lt;/p&gt;

&lt;p&gt;Tomorrow I&apos;ll post the patch (or pull request for Git). But now (oh these timezones...) some observations:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;IDL/Corba Arrays are the same as Sequences (correct me). In WSDL/XSD and while creating corba binding, arrays are sequences that have maxOccurs==minOccurs and both are greater than one&lt;/li&gt;
	&lt;li&gt;so the &quot;wrapping&quot; should be handled for both arrays and sequences&lt;/li&gt;
	&lt;li&gt;sequences and arrays may be named or anonymous. So we have problems designing class hierarchy - anon/named and sequence/struct - this is ugly in &lt;tt&gt;/rt/bindings/corba/src/main/resources/schemas/wsdl/corba-binding.xsd&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;I have prepared interesting type for tests (it covers all 8 combinations):
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;complexType name=&lt;span class=&quot;code-quote&quot;&gt;&quot;MixedArray&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;sequence&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- unwrapped sequence --&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &amp;lt;element maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;unbounded&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array1&quot;&lt;/span&gt;
                type=&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;/&amp;gt;
        &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- wrapped sequence --&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &amp;lt;element maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array2&quot;&lt;/span&gt;
                type=&lt;span class=&quot;code-quote&quot;&gt;&quot;x1:UnboundedArray&quot;&lt;/span&gt;/&amp;gt;
        &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- unwrapped array --&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &amp;lt;element maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;3&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;3&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array3&quot;&lt;/span&gt;
                type=&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;/&amp;gt;
        &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- wrapped array --&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &amp;lt;element maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array4&quot;&lt;/span&gt;
                type=&lt;span class=&quot;code-quote&quot;&gt;&quot;x1:FixedArray&quot;&lt;/span&gt;/&amp;gt;
        &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- anonymous unwrapped sequence --&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;element maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;unbounded&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array5&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;simpleType&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xsd:restriction base=&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/simpleType&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/element&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- anonymous wrapped sequence --&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;element maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array6&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;complexType&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;sequence&amp;gt;&lt;/span&gt;
                    &amp;lt;element maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;unbounded&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;item&quot;&lt;/span&gt;
                        type=&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;/&amp;gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/sequence&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/complexType&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/element&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- anonymous unwrapped array --&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;element maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;3&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;3&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array7&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;simpleType&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xsd:restriction base=&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/simpleType&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/element&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- anonymous wrapped array --&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;element maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array8&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;complexType&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;sequence&amp;gt;&lt;/span&gt;
                    &amp;lt;element maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;3&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;3&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;item&quot;&lt;/span&gt;
                        type=&lt;span class=&quot;code-quote&quot;&gt;&quot;int&quot;&lt;/span&gt;/&amp;gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/sequence&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/complexType&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/element&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/sequence&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/complexType&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;the &lt;em&gt;special&lt;/em&gt; case in &lt;tt&gt;/rt/bindings/corba/src/main/java/org/apache/cxf/binding/corba/types/CorbaStructEventProducer.java&lt;/tt&gt; should not be controlled by the &lt;em&gt;primitiveness&lt;/em&gt; of sequence elements, but rather by your &quot;wrapped&quot; flag - correct me if I&apos;m wrong&lt;/li&gt;
	&lt;li&gt;there were some problems with &lt;tt&gt;CorbaStructListener&lt;/tt&gt; so the patch contains some changes&lt;/li&gt;
	&lt;li&gt;there were problems with finding corba types for anonymous XSD types, so the patch contains changes in &lt;tt&gt;WSDLToCorbaHelper&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;regards&lt;br/&gt;
Grzegorz Grzybek&lt;/p&gt;</comment>
                            <comment id="13783861" author="gzres" created="Wed, 2 Oct 2013 12:07:48 +0000"  >&lt;p&gt;The patch included&lt;/p&gt;</comment>
                            <comment id="13785449" author="dkulp" created="Thu, 3 Oct 2013 19:10:47 +0000"  >&lt;p&gt;&lt;br/&gt;
I think the patch is missing a CorbaPrimitiveArrayEventProducer class.&lt;/p&gt;</comment>
                            <comment id="13785979" author="gzres" created="Fri, 4 Oct 2013 07:54:29 +0000"  >&lt;p&gt;There&apos;s one more problem with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;            &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- anonymous unwrapped, non-primitive sequence --&amp;gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;element maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;unbounded&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array9&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;complexType&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;sequence&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;element name=&lt;span class=&quot;code-quote&quot;&gt;&quot;item&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/sequence&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/complexType&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/element&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- anonymous unwrapped, non-primitive array --&amp;gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;element maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;3&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;3&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array10&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;complexType&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;sequence&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;element name=&lt;span class=&quot;code-quote&quot;&gt;&quot;item&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/sequence&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/complexType&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/element&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m working on &lt;tt&gt;org.apache.cxf.tools.corba.processors.wsdl.WSDLToCorbaHelper.processLocalElement()&lt;/tt&gt; to handle every possible combination.&lt;/p&gt;

&lt;p&gt;In the above case WSDL2IDL generates wrong corba binding:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;...
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;corba:struct &lt;span class=&quot;code-keyword&quot;&gt;xmlns:x1&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://apache.org/type_test/types1&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array10Array&quot;&lt;/span&gt; qualified=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; repositoryID=&lt;span class=&quot;code-quote&quot;&gt;&quot;IDL:array10:1.0&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;x1:array10&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;corba:member idltype=&lt;span class=&quot;code-quote&quot;&gt;&quot;corba:string&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;item&quot;&lt;/span&gt; qualified=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/corba:struct&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;corba:array &lt;span class=&quot;code-keyword&quot;&gt;xmlns:ns1&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://apache.org/type_test/doc/corba/typemap/&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;xmlns:x1&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://apache.org/type_test/types1&quot;&lt;/span&gt; bound=&lt;span class=&quot;code-quote&quot;&gt;&quot;3&quot;&lt;/span&gt; elemname=&lt;span class=&quot;code-quote&quot;&gt;&quot;x1:array10&quot;&lt;/span&gt; elemtype=&lt;span class=&quot;code-quote&quot;&gt;&quot;ns1:array10&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array10Array&quot;&lt;/span&gt; repositoryID=&lt;span class=&quot;code-quote&quot;&gt;&quot;IDL:array10Array:1.0&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;x1:array10&quot;&lt;/span&gt; wrapped=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;corba:struct &lt;span class=&quot;code-keyword&quot;&gt;xmlns:x1&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://apache.org/type_test/types1&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;MixedArray&quot;&lt;/span&gt; repositoryID=&lt;span class=&quot;code-quote&quot;&gt;&quot;IDL:MixedArray:1.0&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;x1:MixedArray&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
  ...
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;corba:member &lt;span class=&quot;code-keyword&quot;&gt;xmlns:ns1&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://apache.org/type_test/doc/corba/typemap/&quot;&lt;/span&gt; idltype=&lt;span class=&quot;code-quote&quot;&gt;&quot;ns1:array10Array&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array10&quot;&lt;/span&gt; qualified=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/corba:struct&amp;gt;&lt;/span&gt;

...
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;corba:struct &lt;span class=&quot;code-keyword&quot;&gt;xmlns:x1&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://apache.org/type_test/types1&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array9Array&quot;&lt;/span&gt; qualified=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; repositoryID=&lt;span class=&quot;code-quote&quot;&gt;&quot;IDL:array9:1.0&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;x1:array9&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt; 
...
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;corba:struct &lt;span class=&quot;code-keyword&quot;&gt;xmlns:x1&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://apache.org/type_test/types1&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array9Array&quot;&lt;/span&gt; qualified=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; repositoryID=&lt;span class=&quot;code-quote&quot;&gt;&quot;IDL:array9:1.0&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;x1:array9&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt; 
...
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;corba:struct &lt;span class=&quot;code-keyword&quot;&gt;xmlns:x1&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://apache.org/type_test/types1&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;array9Array&quot;&lt;/span&gt; qualified=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; repositoryID=&lt;span class=&quot;code-quote&quot;&gt;&quot;IDL:array9:1.0&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;x1:array9&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt; 
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the member &quot;array10&quot; has type &quot;array10Array&quot; which should map to sequence, but is (multiple times) being overriden by struct...&lt;/p&gt;

&lt;p&gt;I&apos;m afraid that it will get worse with multiply nested complexType definitions... (sequence of complex types containing sequences, etc.)&lt;/p&gt;</comment>
                            <comment id="13785996" author="gzres" created="Fri, 4 Oct 2013 08:38:10 +0000"  >&lt;p&gt;By the way, &lt;tt&gt;CorbaPrimitiveArrayEventProducer&lt;/tt&gt; is simple:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.cxf.binding.corba.types;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.cxf.service.model.ServiceInfo;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.omg.CORBA.ORB;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CorbaPrimitiveArrayEventProducer &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; AbstractNoStartEndEventProducer {
    
    &lt;span class=&quot;code-comment&quot;&gt;// No start and end elements &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the array
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; CorbaPrimitiveArrayEventProducer(CorbaObjectHandler h,
                                               ServiceInfo service,
                                               ORB orbRef) {
        CorbaArrayHandler handler = (CorbaArrayHandler)h;
        iterator = handler.getElements().iterator();
        orb = orbRef;
        serviceInfo = service;
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it works for &lt;tt&gt;MixedArray&lt;/tt&gt; with members array1-array8, but for array9 and array10 I&apos;ve encountered more problems with corba binding generation... So please give me some time (I have other work to do &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)&lt;/p&gt;</comment>
                            <comment id="13791458" author="gzres" created="Thu, 10 Oct 2013 13:02:40 +0000"  >&lt;p&gt;Hello - here&apos;s a pull request: &lt;a href=&quot;https://github.com/apache/cxf/pull/7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/7&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;All test cases pass, as well as Juergen&apos;s example.&lt;/p&gt;

&lt;p&gt;The changes were quite complex wrt correct Corba-xml mapping.&lt;/p&gt;

&lt;p&gt;Please see if this is right way to do this.&lt;/p&gt;

&lt;p&gt;The least clean change is related to handling Corba structs derived from such XSD complex types:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:complexType&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:sequence&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- some non-sequence, non-array elements --&amp;gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:element name=&lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;not 1&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xs:sequence&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xs:complexType&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;because runtime representation is usually this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;root&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- some elements --&amp;gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;x&amp;gt;&lt;/span&gt;a&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/x&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;x&amp;gt;&lt;/span&gt;a&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/x&amp;gt;&lt;/span&gt;
   ...
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/root&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but may also be this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;root&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- some elements --&amp;gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- no &lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt; element at all! --&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/root&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;while writing to Corba stream there must be a sign that we&apos;re sending 0-size collection. The relevant changes (not so clean) are in &lt;tt&gt;org.apache.cxf.binding.corba.types.CorbaStructListener.processEndElement(QName)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;regards&lt;br/&gt;
Grzegorz Grzybek&lt;/p&gt;</comment>
                            <comment id="13791583" author="dkulp" created="Thu, 10 Oct 2013 15:23:44 +0000"  >
&lt;p&gt;Pull request pulled in and committed.  Major thanks for the patch and nice job on all the test cases.&lt;/p&gt;

&lt;p&gt;Once you verify that the pull request is properly applied, please close the pull request on github (we don&apos;t have access to do that).&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13792328" author="gzres" created="Fri, 11 Oct 2013 04:36:29 +0000"  >&lt;p&gt;Pull Request closed. Thanks!&lt;/p&gt;</comment>
                            <comment id="13793605" author="jaybee" created="Sun, 13 Oct 2013 09:59:25 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;could somebody please push a SNAPSHOT-Version to the Snapshot-Repository. We stumbled over some other bugs and I would like to test whether they are gone before I try to create repros.&lt;/p&gt;

&lt;p&gt;Thx J&#252;rgen&lt;/p&gt;</comment>
                            <comment id="13794174" author="dkulp" created="Mon, 14 Oct 2013 15:08:18 +0000"  >&lt;p&gt;SNAPSHOT&apos;s should be deployed every night to the apache snapshot repo.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12606281" name="CXF-5254.diff" size="17844" author="ggrzybek" created="Wed, 2 Oct 2013 12:07:48 +0000"/>
                            <attachment id="12601803" name="CorbaBugRepro.zip" size="10889" author="milraun" created="Fri, 6 Sep 2013 09:58:43 +0000"/>
                            <attachment id="12606187" name="patch.txt" size="3900" author="dkulp" created="Tue, 1 Oct 2013 20:38:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>347223</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nvhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>347522</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>