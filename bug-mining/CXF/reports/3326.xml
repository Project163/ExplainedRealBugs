<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:32:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7823] JAXBEncoderDecoder doesn&apos;t respect @XmlType&apos;s propOrder in Exception class</title>
                <link>https://issues.apache.org/jira/browse/CXF-7823</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Property order is ignored when marshal this exception class by JAXBEncoderDecoder:&lt;/p&gt;

&lt;p&gt;@XmlRootElement(name = &quot;fault&quot;)&lt;br/&gt;
@XmlType(name = &quot;&quot;, propOrder = &lt;/p&gt;
{ &quot;message&quot;, &quot;data&quot;}
&lt;p&gt;, namespace = &quot;&quot;)&lt;br/&gt;
public class PropertyOrderException extends Exception implements java.io.Serializable {&lt;br/&gt;
    private static final long serialVersionUID = 1L;&lt;br/&gt;
    @XmlElement(name = &quot;message&quot;, required = true, nillable = true)&lt;br/&gt;
    public String message;&lt;br/&gt;
    @XmlElement(name = &quot;data&quot;, required = true, nillable = true)&lt;br/&gt;
    public ErrorData data;&lt;br/&gt;
    public PropertyOrderException() &lt;/p&gt;
{
        this.data = new ErrorData();
        this.message = null;
    }
&lt;p&gt;    public PropertyOrderException(ErrorData data) &lt;/p&gt;
{
        this.data = data;
        this.message = null;
    }
&lt;p&gt;    public PropertyOrderException(String message) &lt;/p&gt;
{
        this.data = null;
        this.message = message;
    }
&lt;p&gt;    @Override&lt;br/&gt;
    @XmlTransient&lt;br/&gt;
    public String getMessage() &lt;/p&gt;
{
        return this.message;
    }
&lt;p&gt;}&lt;/p&gt;</description>
                <environment></environment>
        <key id="13180369">CXF-7823</key>
            <summary>JAXBEncoderDecoder doesn&apos;t respect @XmlType&apos;s propOrder in Exception class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ema">Jim Ma</assignee>
                                    <reporter username="ema">Jim Ma</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Aug 2018 03:30:16 +0000</created>
                <updated>Wed, 3 Oct 2018 13:33:17 +0000</updated>
                            <resolved>Tue, 28 Aug 2018 02:49:03 +0000</resolved>
                                    <version>3.1.16</version>
                    <version>3.2.6</version>
                                    <fixVersion>3.1.17</fixVersion>
                    <fixVersion>3.2.7</fixVersion>
                    <fixVersion>3.3.0</fixVersion>
                                    <component>JAXB Databinding</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16591364" author="githubbot" created="Fri, 24 Aug 2018 09:06:16 +0000"  >&lt;p&gt;jimma opened a new pull request #437: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7823&quot; title=&quot;JAXBEncoderDecoder doesn&amp;#39;t respect @XmlType&amp;#39;s propOrder in Exception class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7823&quot;&gt;&lt;del&gt;CXF-7823&lt;/del&gt;&lt;/a&gt;:JAXBEncoderDecoder doesn&apos;t respect @XmlType&apos;s propOrder in&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/437&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/437&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &#8230; Exception class&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16591504" author="githubbot" created="Fri, 24 Aug 2018 11:25:34 +0000"  >&lt;p&gt;andrei-ivanov commented on a change in pull request #437: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7823&quot; title=&quot;JAXBEncoderDecoder doesn&amp;#39;t respect @XmlType&amp;#39;s propOrder in Exception class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7823&quot;&gt;&lt;del&gt;CXF-7823&lt;/del&gt;&lt;/a&gt;:JAXBEncoderDecoder doesn&apos;t respect @XmlType&apos;s propOrder in&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/437#discussion_r212598181&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/437#discussion_r212598181&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/TestServiceTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -73,7 +78,37 @@ public void testExtraSubClassWithJaxbFromEndpoint() throws Throwable &lt;/p&gt;
{
         Assert.assertEquals(expected, widgetFromService);
     }

&lt;p&gt;+    @Test&lt;br/&gt;
+    public void testExceptionPropertyOrder() throws Throwable {&lt;br/&gt;
+        BusFactory.getThreadDefaultBus().getOutFaultInterceptors().add(new LoggingOutInterceptor(fault));&lt;br/&gt;
+        TestService testClient = getTestClient();&lt;br/&gt;
+        ((BindingProvider)testClient).getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY,&lt;br/&gt;
+                                                              &quot;http://localhost:&quot; + PORT&lt;br/&gt;
+                                                                  + &quot;/service/TestEndpoint&quot;);&lt;br/&gt;
+        try &lt;/p&gt;
{
+            testClient.echo(&quot;Exception&quot;);
+        }
&lt;p&gt; catch (PropertyOrderException e) &lt;/p&gt;
{
+            Assert.assertTrue(&quot;Expect &amp;lt;message&amp;gt; element is before &amp;lt;data&amp;gt; element :&quot; + fault.getMessage(),
+                              fault.getMessage().indexOf(&quot;&amp;lt;/message&amp;gt;&amp;lt;data&quot;) &amp;gt; -1);
+        }
&lt;p&gt;+    }&lt;/p&gt;

&lt;p&gt;+    &lt;br/&gt;
+    static class TestLoggingEventSender implements LogEventSender {&lt;br/&gt;
+        private String logMessage;&lt;br/&gt;
+&lt;br/&gt;
+        public String getMessage() &lt;/p&gt;
{
+            return logMessage;
+        }
&lt;p&gt;+        public void cleaerMessage() {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   *clear?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16591763" author="githubbot" created="Fri, 24 Aug 2018 14:59:28 +0000"  >&lt;p&gt;jimma commented on a change in pull request #437: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7823&quot; title=&quot;JAXBEncoderDecoder doesn&amp;#39;t respect @XmlType&amp;#39;s propOrder in Exception class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7823&quot;&gt;&lt;del&gt;CXF-7823&lt;/del&gt;&lt;/a&gt;:JAXBEncoderDecoder doesn&apos;t respect @XmlType&apos;s propOrder in&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/437#discussion_r212657313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/437#discussion_r212657313&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/TestServiceTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -73,7 +78,37 @@ public void testExtraSubClassWithJaxbFromEndpoint() throws Throwable &lt;/p&gt;
{
         Assert.assertEquals(expected, widgetFromService);
     }

&lt;p&gt;+    @Test&lt;br/&gt;
+    public void testExceptionPropertyOrder() throws Throwable {&lt;br/&gt;
+        BusFactory.getThreadDefaultBus().getOutFaultInterceptors().add(new LoggingOutInterceptor(fault));&lt;br/&gt;
+        TestService testClient = getTestClient();&lt;br/&gt;
+        ((BindingProvider)testClient).getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY,&lt;br/&gt;
+                                                              &quot;http://localhost:&quot; + PORT&lt;br/&gt;
+                                                                  + &quot;/service/TestEndpoint&quot;);&lt;br/&gt;
+        try &lt;/p&gt;
{
+            testClient.echo(&quot;Exception&quot;);
+        }
&lt;p&gt; catch (PropertyOrderException e) &lt;/p&gt;
{
+            Assert.assertTrue(&quot;Expect &amp;lt;message&amp;gt; element is before &amp;lt;data&amp;gt; element :&quot; + fault.getMessage(),
+                              fault.getMessage().indexOf(&quot;&amp;lt;/message&amp;gt;&amp;lt;data&quot;) &amp;gt; -1);
+        }
&lt;p&gt;+    }&lt;/p&gt;

&lt;p&gt;+    &lt;br/&gt;
+    static class TestLoggingEventSender implements LogEventSender {&lt;br/&gt;
+        private String logMessage;&lt;br/&gt;
+&lt;br/&gt;
+        public String getMessage() &lt;/p&gt;
{
+            return logMessage;
+        }
&lt;p&gt;+        public void cleaerMessage() {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Fixed. Thanks for review @andrei-ivanov &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16593165" author="githubbot" created="Mon, 27 Aug 2018 03:35:29 +0000"  >&lt;p&gt;jimma closed pull request #437: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7823&quot; title=&quot;JAXBEncoderDecoder doesn&amp;#39;t respect @XmlType&amp;#39;s propOrder in Exception class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7823&quot;&gt;&lt;del&gt;CXF-7823&lt;/del&gt;&lt;/a&gt;:JAXBEncoderDecoder doesn&apos;t respect @XmlType&apos;s propOrder in&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/437&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/437&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java b/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java&lt;br/&gt;
index 1e6ec2799b9..15d476df7a6 100644&lt;br/&gt;
&amp;#8212; a/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java&lt;br/&gt;
+++ b/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java&lt;br/&gt;
@@ -56,6 +56,7 @@&lt;br/&gt;
 import javax.xml.bind.annotation.XmlAccessType;&lt;br/&gt;
 import javax.xml.bind.annotation.XmlAccessorOrder;&lt;br/&gt;
 import javax.xml.bind.annotation.XmlAttribute;&lt;br/&gt;
+import javax.xml.bind.annotation.XmlType;&lt;br/&gt;
 import javax.xml.bind.annotation.adapters.HexBinaryAdapter;&lt;br/&gt;
 import javax.xml.bind.attachment.AttachmentMarshaller;&lt;br/&gt;
 import javax.xml.bind.attachment.AttachmentUnmarshaller;&lt;br/&gt;
@@ -425,7 +426,28 @@ public int compare(Member m1, Member m2) {&lt;br/&gt;
                     }&lt;br/&gt;
                 });&lt;br/&gt;
             }&lt;br/&gt;
-&lt;br/&gt;
+            XmlType xmlType = cls.getAnnotation(XmlType.class);&lt;br/&gt;
+            if (xmlType != null &amp;amp;&amp;amp; xmlType.propOrder().length &amp;gt; 1 &amp;amp;&amp;amp; !xmlType.propOrder()&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.isEmpty()) {&lt;br/&gt;
+                final List&amp;lt;String&amp;gt; orderList = Arrays.asList(xmlType.propOrder());&lt;br/&gt;
+                Collections.sort(combinedMembers, new Comparator&amp;lt;Member&amp;gt;() {&lt;br/&gt;
+                    public int compare(Member m1, Member m2) {&lt;br/&gt;
+                        String m1Name = getName(m1);&lt;br/&gt;
+                        String m2Name = getName(m2);&lt;br/&gt;
+                        int m1Index = orderList.indexOf(m1Name);&lt;br/&gt;
+                        int m2Index = orderList.indexOf(m2Name);&lt;br/&gt;
+                        if (m1Index != -1 &amp;amp;&amp;amp; m2Index != -1) &lt;/p&gt;
{
+                            return m1Index - m2Index;
+                        }
&lt;p&gt;+                        if (m1Index == -1 &amp;amp;&amp;amp; m2Index != -1) &lt;/p&gt;
{
+                            return 1;
+                        }
&lt;p&gt;+                        if (m1Index != -1 &amp;amp;&amp;amp; m2Index == -1) &lt;/p&gt;
{
+                            return -1;
+                        }
&lt;p&gt;+                        return 0;&lt;br/&gt;
+                    }&lt;br/&gt;
+                });&lt;br/&gt;
+            }&lt;br/&gt;
             for (Member member : combinedMembers) {&lt;br/&gt;
                 if (member instanceof Field) {&lt;br/&gt;
                     Field f = (Field)member;&lt;br/&gt;
@@ -461,6 +483,17 @@ public int compare(Member m1, Member m2) {&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;+    private static String getName(Member m1) {&lt;br/&gt;
+        String m1Name = null;&lt;br/&gt;
+        if (m1 instanceof Field) &lt;/p&gt;
{
+            m1Name = ((Field)m1).getName();
+        }
&lt;p&gt; else &lt;/p&gt;
{
+            int idx = m1.getName().startsWith(&quot;get&quot;) ? 3 : 2;
+            String name = m1.getName().substring(idx);
+            m1Name = Character.toLowerCase(name.charAt(0)) + name.substring(1);
+        }
&lt;p&gt;+        return m1Name;&lt;br/&gt;
+    }&lt;br/&gt;
     private static void writeArrayObject(Marshaller marshaller,&lt;br/&gt;
                                          Object source,&lt;br/&gt;
                                          QName mname,&lt;br/&gt;
diff --git a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/TestServiceTest.java b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/TestServiceTest.java&lt;br/&gt;
index a78ca348e11..e2d43da10d4 100644&lt;br/&gt;
&amp;#8212; a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/TestServiceTest.java&lt;br/&gt;
+++ b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/TestServiceTest.java&lt;br/&gt;
@@ -28,9 +28,13 @@&lt;/p&gt;

&lt;p&gt; import org.apache.cxf.Bus;&lt;br/&gt;
 import org.apache.cxf.endpoint.Server;&lt;br/&gt;
+import org.apache.cxf.ext.logging.LoggingOutInterceptor;&lt;br/&gt;
+import org.apache.cxf.ext.logging.event.LogEvent;&lt;br/&gt;
+import org.apache.cxf.ext.logging.event.LogEventSender;&lt;br/&gt;
 import org.apache.cxf.helpers.IOUtils;&lt;br/&gt;
 import org.apache.cxf.systest.jaxb.model.ExtendedWidget;&lt;br/&gt;
 import org.apache.cxf.systest.jaxb.model.Widget;&lt;br/&gt;
+import org.apache.cxf.systest.jaxb.service.PropertyOrderException;&lt;br/&gt;
 import org.apache.cxf.systest.jaxb.service.TestService;&lt;br/&gt;
 import org.apache.cxf.test.TestUtilities;&lt;br/&gt;
 import org.apache.cxf.testutil.common.TestUtil;&lt;br/&gt;
@@ -44,7 +48,7 @@&lt;br/&gt;
 @ContextConfiguration(locations = &lt;/p&gt;
{ &quot;classpath:extrajaxbclass.xml&quot; }
&lt;p&gt;)&lt;br/&gt;
 public class TestServiceTest extends AbstractJUnit4SpringContextTests {&lt;br/&gt;
     static final String PORT = TestUtil.getPortNumber(TestServiceTest.class);&lt;br/&gt;
-&lt;br/&gt;
+    private static TestLoggingEventSender fault = new TestLoggingEventSender();&lt;br/&gt;
     private TestUtilities testUtilities;&lt;/p&gt;

&lt;p&gt;     public TestServiceTest() {&lt;br/&gt;
@@ -73,7 +77,37 @@ public void testExtraSubClassWithJaxbFromEndpoint() throws Throwable &lt;/p&gt;
{
         Assert.assertEquals(expected, widgetFromService);
     }

&lt;p&gt;+    @Test&lt;br/&gt;
+    public void testExceptionPropertyOrder() throws Throwable {&lt;br/&gt;
+        ((Bus)applicationContext.getBean(&quot;cxf&quot;)).getOutFaultInterceptors().add(new LoggingOutInterceptor(fault));&lt;br/&gt;
+        TestService testClient = getTestClient();&lt;br/&gt;
+        ((BindingProvider)testClient).getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY,&lt;br/&gt;
+                                                              &quot;http://localhost:&quot; + PORT&lt;br/&gt;
+                                                                  + &quot;/service/TestEndpoint&quot;);&lt;br/&gt;
+        try &lt;/p&gt;
{
+            testClient.echo(&quot;Exception&quot;);
+        }
&lt;p&gt; catch (PropertyOrderException e) &lt;/p&gt;
{
+            Assert.assertTrue(&quot;Expect &amp;lt;message&amp;gt; element is before &amp;lt;data&amp;gt; element :&quot; + fault.getMessage(),
+                              fault.getMessage().indexOf(&quot;&amp;lt;/message&amp;gt;&amp;lt;data&quot;) &amp;gt; -1);
+        }
&lt;p&gt;+    }&lt;/p&gt;

&lt;p&gt;+    &lt;br/&gt;
+    static class TestLoggingEventSender implements LogEventSender {&lt;br/&gt;
+        private String logMessage;&lt;br/&gt;
+&lt;br/&gt;
+        public String getMessage() &lt;/p&gt;
{
+            return logMessage;
+        }
&lt;p&gt;+        public void clearMessage() &lt;/p&gt;
{
+            logMessage = null;
+        }
&lt;p&gt;+        @Override&lt;br/&gt;
+        public void send(LogEvent event) &lt;/p&gt;
{
+            logMessage = event.getPayload();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+    &lt;br/&gt;
     @Test&lt;br/&gt;
     public void testSchema() throws Exception {&lt;br/&gt;
         URL url = new URL(&quot;http://localhost:&quot; + PORT + &quot;/service/TestService?wsdl&quot;);&lt;br/&gt;
diff --git a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/ErrorData.java b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/ErrorData.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..5fe127f6ce4&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/ErrorData.java&lt;br/&gt;
@@ -0,0 +1,62 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.systest.jaxb.service;&lt;br/&gt;
+&lt;br/&gt;
+import javax.xml.bind.annotation.XmlType;&lt;br/&gt;
+&lt;br/&gt;
+@XmlType(name = &quot;ErrorData&quot;)&lt;br/&gt;
+public class ErrorData implements java.io.Serializable {&lt;br/&gt;
+    private static final long serialVersionUID = 1L;&lt;br/&gt;
+    private long code;&lt;br/&gt;
+    private String title;&lt;br/&gt;
+    private String description;&lt;br/&gt;
+&lt;br/&gt;
+    public ErrorData() &lt;/p&gt;
{
+    }
&lt;p&gt;+&lt;br/&gt;
+    public ErrorData(long code, String title, String description, String stack) &lt;/p&gt;
{
+        this.code = code;
+        this.title = title;
+        this.description = description;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public long getCode() &lt;/p&gt;
{
+        return code;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public void setCode(long code) &lt;/p&gt;
{
+        this.code = code;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public String getTitle() &lt;/p&gt;
{
+        return title;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public void setTitle(String title) &lt;/p&gt;
{
+        this.title = title;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public String getDescription() &lt;/p&gt;
{
+        return description;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public void setDescription(String description) &lt;/p&gt;
{
+        this.description = description;
+    }
&lt;p&gt;+}&lt;br/&gt;
diff --git a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/PropertyOrderException.java b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/PropertyOrderException.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..61ee4ceac0e&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/PropertyOrderException.java&lt;br/&gt;
@@ -0,0 +1,70 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.systest.jaxb.service;&lt;br/&gt;
+&lt;br/&gt;
+import javax.xml.bind.annotation.XmlElement;&lt;br/&gt;
+import javax.xml.bind.annotation.XmlRootElement;&lt;br/&gt;
+import javax.xml.bind.annotation.XmlType;&lt;br/&gt;
+&lt;br/&gt;
+@XmlRootElement(name = &quot;fault&quot;)&lt;br/&gt;
+@XmlType(name = &quot;&quot;, propOrder = &lt;/p&gt;
{
+    &quot;message&quot;, &quot;data&quot;
+}
&lt;p&gt;, namespace = &quot;&quot;)&lt;br/&gt;
+public class PropertyOrderException extends Exception implements java.io.Serializable {&lt;br/&gt;
+&lt;br/&gt;
+    private static final long serialVersionUID = 1L;&lt;br/&gt;
+&lt;br/&gt;
+    @XmlElement(name = &quot;message&quot;, required = true, nillable = true)&lt;br/&gt;
+    private String message;&lt;br/&gt;
+&lt;br/&gt;
+    @XmlElement(name = &quot;data&quot;, required = true, nillable = true)&lt;br/&gt;
+    private ErrorData data;&lt;br/&gt;
+&lt;br/&gt;
+    public PropertyOrderException() &lt;/p&gt;
{
+        this.data = new ErrorData();
+        this.message = null;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public PropertyOrderException(ErrorData data) &lt;/p&gt;
{
+        this.data = data;
+        this.message = null;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public PropertyOrderException(String message) &lt;/p&gt;
{
+        this.data = null;
+        this.message = message;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public String getMessage() &lt;/p&gt;
{
+        return this.message;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public ErrorData getData() &lt;/p&gt;
{
+        return data;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public void setData(ErrorData data) &lt;/p&gt;
{
+        this.data = data;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public void setMessage(String message) &lt;/p&gt;
{
+        this.message = message;
+    }
&lt;p&gt;+&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestService.java b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestService.java&lt;br/&gt;
index 4eef3c25d13..1977e93037d 100644&lt;br/&gt;
&amp;#8212; a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestService.java&lt;br/&gt;
+++ b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestService.java&lt;br/&gt;
@@ -34,5 +34,8 @@ Widget getWidgetById(@WebParam(name = &quot;id&quot;)&lt;/p&gt;

&lt;p&gt;     @WebMethod&lt;br/&gt;
     void testExceptionMarshalling() throws TestServiceException;&lt;br/&gt;
+    &lt;br/&gt;
+    @WebMethod&lt;br/&gt;
+    String echo(String test) throws PropertyOrderException;&lt;/p&gt;

&lt;p&gt; }&lt;br/&gt;
diff --git a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestServiceImpl.java b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestServiceImpl.java&lt;br/&gt;
index 60f1395d67a..fca13d46074 100644&lt;br/&gt;
&amp;#8212; a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestServiceImpl.java&lt;br/&gt;
+++ b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestServiceImpl.java&lt;br/&gt;
@@ -19,6 +19,7 @@&lt;/p&gt;

&lt;p&gt; package org.apache.cxf.systest.jaxb.service;&lt;/p&gt;

&lt;p&gt;+import javax.jws.WebMethod;&lt;br/&gt;
 import javax.jws.WebService;&lt;/p&gt;

&lt;p&gt; import org.apache.cxf.systest.jaxb.model.ExtendedWidget;&lt;br/&gt;
@@ -35,6 +36,22 @@ public void testExceptionMarshalling() throws TestServiceException &lt;/p&gt;
{
         throw new TestServiceException(&quot;Your hovercraft is full of eels.&quot;);
     }

&lt;p&gt;+    @WebMethod&lt;br/&gt;
+    public String echo(String test) throws PropertyOrderException {&lt;br/&gt;
+        if (&quot;Exception&quot;.equalsIgnoreCase(test)) &lt;/p&gt;
{
+            PropertyOrderException exception = new PropertyOrderException();
+            ErrorData ed = new ErrorData();
+            ed.setCode(500);
+            ed.setDescription(&quot;Error happened&quot;);
+            ed.setTitle(&quot;Error title&quot;);
+            exception.setData(ed);
+            exception.setMessage(&quot;Exception message&quot;);
+            throw exception;
+
+        }
&lt;p&gt;+        return test;&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;/p&gt;


&lt;p&gt; }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16593608" author="githubbot" created="Mon, 27 Aug 2018 12:56:06 +0000"  >&lt;p&gt;jurakp opened a new pull request #438: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7823&quot; title=&quot;JAXBEncoderDecoder doesn&amp;#39;t respect @XmlType&amp;#39;s propOrder in Exception class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7823&quot;&gt;&lt;del&gt;CXF-7823&lt;/del&gt;&lt;/a&gt;:JAXBEncoderDecoder doesn&apos;t respect @XmlType&apos;s propOrder in Exception class&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/438&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/438&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Backport of 354ab5e7eb63aef3f7b213cb9637acf8f9274305&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16593787" author="githubbot" created="Mon, 27 Aug 2018 14:56:51 +0000"  >&lt;p&gt;jurakp opened a new pull request #439: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7823&quot; title=&quot;JAXBEncoderDecoder doesn&amp;#39;t respect @XmlType&amp;#39;s propOrder in Exception class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7823&quot;&gt;&lt;del&gt;CXF-7823&lt;/del&gt;&lt;/a&gt;:JAXBEncoderDecoder doesn&apos;t respect @XmlType&apos;s propOrder in Exception class&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/439&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/439&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Backport of commit 354ab5e&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16594428" author="githubbot" created="Tue, 28 Aug 2018 02:46:35 +0000"  >&lt;p&gt;jimma closed pull request #439: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7823&quot; title=&quot;JAXBEncoderDecoder doesn&amp;#39;t respect @XmlType&amp;#39;s propOrder in Exception class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7823&quot;&gt;&lt;del&gt;CXF-7823&lt;/del&gt;&lt;/a&gt;:JAXBEncoderDecoder doesn&apos;t respect @XmlType&apos;s propOrder in Exception class&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/439&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/439&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java b/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java&lt;br/&gt;
index 05ca83cbb02..0b6136c5225 100644&lt;br/&gt;
&amp;#8212; a/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java&lt;br/&gt;
+++ b/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java&lt;br/&gt;
@@ -56,6 +56,7 @@&lt;br/&gt;
 import javax.xml.bind.annotation.XmlAccessType;&lt;br/&gt;
 import javax.xml.bind.annotation.XmlAccessorOrder;&lt;br/&gt;
 import javax.xml.bind.annotation.XmlAttribute;&lt;br/&gt;
+import javax.xml.bind.annotation.XmlType;&lt;br/&gt;
 import javax.xml.bind.annotation.adapters.HexBinaryAdapter;&lt;br/&gt;
 import javax.xml.bind.attachment.AttachmentMarshaller;&lt;br/&gt;
 import javax.xml.bind.attachment.AttachmentUnmarshaller;&lt;br/&gt;
@@ -428,7 +429,28 @@ public int compare(Member m1, Member m2) {&lt;br/&gt;
                     }&lt;br/&gt;
                 });&lt;br/&gt;
             }&lt;br/&gt;
-&lt;br/&gt;
+            XmlType xmlType = cls.getAnnotation(XmlType.class);&lt;br/&gt;
+            if (xmlType != null &amp;amp;&amp;amp; xmlType.propOrder().length &amp;gt; 1 &amp;amp;&amp;amp; !xmlType.propOrder()&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.isEmpty()) {&lt;br/&gt;
+                final List&amp;lt;String&amp;gt; orderList = Arrays.asList(xmlType.propOrder());&lt;br/&gt;
+                Collections.sort(combinedMembers, new Comparator&amp;lt;Member&amp;gt;() {&lt;br/&gt;
+                    public int compare(Member m1, Member m2) {&lt;br/&gt;
+                        String m1Name = getName(m1);&lt;br/&gt;
+                        String m2Name = getName(m2);&lt;br/&gt;
+                        int m1Index = orderList.indexOf(m1Name);&lt;br/&gt;
+                        int m2Index = orderList.indexOf(m2Name);&lt;br/&gt;
+                        if (m1Index != -1 &amp;amp;&amp;amp; m2Index != -1) &lt;/p&gt;
{
+                            return m1Index - m2Index;
+                        }
&lt;p&gt;+                        if (m1Index == -1 &amp;amp;&amp;amp; m2Index != -1) &lt;/p&gt;
{
+                            return 1;
+                        }
&lt;p&gt;+                        if (m1Index != -1 &amp;amp;&amp;amp; m2Index == -1) &lt;/p&gt;
{
+                            return -1;
+                        }
&lt;p&gt;+                        return 0;&lt;br/&gt;
+                    }&lt;br/&gt;
+                });&lt;br/&gt;
+            }&lt;br/&gt;
             for (Member member : combinedMembers) {&lt;br/&gt;
                 if (member instanceof Field) {&lt;br/&gt;
                     Field f = (Field)member;&lt;br/&gt;
@@ -463,8 +485,20 @@ public int compare(Member m1, Member m2) &lt;/p&gt;
{
             StaxUtils.close(writer);
         }
&lt;p&gt;     }&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;private static void writeArrayObject(Marshaller marshaller,&lt;br/&gt;
+&lt;br/&gt;
+    private static String getName(Member m1) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+        String m1Name = null;+        if (m1 instanceof Field) {
+            m1Name = ((Field)m1).getName();
+        } else {
+            int idx = m1.getName().startsWith(&quot;get&quot;) ? 3 : 2;
+            String name = m1.getName().substring(idx);
+            m1Name = Character.toLowerCase(name.charAt(0)) + name.substring(1);
+        }+        return m1Name;+    }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;+&lt;br/&gt;
+    private static void writeArrayObject(Marshaller marshaller,&lt;br/&gt;
                                          Object source,&lt;br/&gt;
                                          QName mname,&lt;br/&gt;
                                          Object mObj) throws Fault, JAXBException {&lt;br/&gt;
diff --git a/systests/databinding/pom.xml b/systests/databinding/pom.xml&lt;br/&gt;
index 361c2e0f1f4..823734faab8 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/systests/databinding/pom.xml&lt;br/&gt;
+++ b/systests/databinding/pom.xml&lt;br/&gt;
@@ -184,6 +184,12 @@&lt;br/&gt;
             &amp;lt;artifactId&amp;gt;cxf-rt-transports-http&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
             &amp;lt;version&amp;gt;${project.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
         &amp;lt;/dependency&amp;gt;&lt;br/&gt;
+        &amp;lt;dependency&amp;gt;&lt;br/&gt;
+            &amp;lt;groupId&amp;gt;org.apache.cxf&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+            &amp;lt;artifactId&amp;gt;cxf-rt-features-logging&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+            &amp;lt;version&amp;gt;${project.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+            &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;&lt;br/&gt;
+        &amp;lt;/dependency&amp;gt;&lt;br/&gt;
         &amp;lt;dependency&amp;gt;&lt;br/&gt;
             &amp;lt;groupId&amp;gt;${cxf.servlet-api.group}&amp;lt;/groupId&amp;gt;&lt;br/&gt;
             &amp;lt;artifactId&amp;gt;${cxf.servlet-api.artifact}&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
diff --git a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/TestServiceTest.java b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/TestServiceTest.java&lt;br/&gt;
index 8f780b65f44..97e023027b5 100644&lt;/li&gt;
			&lt;li&gt;a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/TestServiceTest.java&lt;br/&gt;
+++ b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/TestServiceTest.java&lt;br/&gt;
@@ -28,9 +28,13 @@&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; import org.apache.cxf.Bus;&lt;br/&gt;
 import org.apache.cxf.endpoint.Server;&lt;br/&gt;
+import org.apache.cxf.ext.logging.LoggingOutInterceptor;&lt;br/&gt;
+import org.apache.cxf.ext.logging.event.LogEvent;&lt;br/&gt;
+import org.apache.cxf.ext.logging.event.LogEventSender;&lt;br/&gt;
 import org.apache.cxf.helpers.IOUtils;&lt;br/&gt;
 import org.apache.cxf.systest.jaxb.model.ExtendedWidget;&lt;br/&gt;
 import org.apache.cxf.systest.jaxb.model.Widget;&lt;br/&gt;
+import org.apache.cxf.systest.jaxb.service.PropertyOrderException;&lt;br/&gt;
 import org.apache.cxf.systest.jaxb.service.TestService;&lt;br/&gt;
 import org.apache.cxf.test.TestUtilities;&lt;br/&gt;
 import org.apache.cxf.testutil.common.TestUtil;&lt;br/&gt;
@@ -44,7 +48,7 @@&lt;br/&gt;
 @ContextConfiguration(locations = &lt;/p&gt;
{ &quot;classpath:extrajaxbclass.xml&quot; }
&lt;p&gt;)&lt;br/&gt;
 public class TestServiceTest extends AbstractJUnit4SpringContextTests {&lt;br/&gt;
     static final String PORT = TestUtil.getPortNumber(TestServiceTest.class);&lt;br/&gt;
-&lt;br/&gt;
+    private static TestLoggingEventSender fault = new TestLoggingEventSender();&lt;br/&gt;
     private TestUtilities testUtilities;&lt;/p&gt;

&lt;p&gt;     public TestServiceTest() {&lt;br/&gt;
@@ -73,7 +77,37 @@ public void testExtraSubClassWithJaxbFromEndpoint() throws Throwable &lt;/p&gt;
{
         Assert.assertEquals(expected, widgetFromService);
     }

&lt;p&gt;+    @Test&lt;br/&gt;
+    public void testExceptionPropertyOrder() throws Throwable {&lt;br/&gt;
+        ((Bus)applicationContext.getBean(&quot;cxf&quot;)).getOutFaultInterceptors().add(new LoggingOutInterceptor(fault));&lt;br/&gt;
+        TestService testClient = getTestClient();&lt;br/&gt;
+        ((BindingProvider)testClient).getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY,&lt;br/&gt;
+                                                              &quot;http://localhost:&quot; + PORT&lt;br/&gt;
+                                                                  + &quot;/service/TestEndpoint&quot;);&lt;br/&gt;
+        try &lt;/p&gt;
{
+            testClient.echo(&quot;Exception&quot;);
+        }
&lt;p&gt; catch (PropertyOrderException e) &lt;/p&gt;
{
+            Assert.assertTrue(&quot;Expect &amp;lt;message&amp;gt; element is before &amp;lt;data&amp;gt; element :&quot; + fault.getMessage(),
+                              fault.getMessage().indexOf(&quot;&amp;lt;/message&amp;gt;&amp;lt;data&quot;) &amp;gt; -1);
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;/p&gt;

&lt;p&gt;+    static class TestLoggingEventSender implements LogEventSender {&lt;br/&gt;
+        private String logMessage;&lt;br/&gt;
+&lt;br/&gt;
+        public String getMessage() &lt;/p&gt;
{
+            return logMessage;
+        }
&lt;p&gt;+        public void clearMessage() &lt;/p&gt;
{
+            logMessage = null;
+        }
&lt;p&gt;+        @Override&lt;br/&gt;
+        public void send(LogEvent event) &lt;/p&gt;
{
+            logMessage = event.getPayload();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
     @Test&lt;br/&gt;
     public void testSchema() throws Exception {&lt;br/&gt;
         URL url = new URL(&quot;http://localhost:&quot; + PORT + &quot;/service/TestService?wsdl&quot;);&lt;br/&gt;
diff --git a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/ErrorData.java b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/ErrorData.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..5fe127f6ce4&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/ErrorData.java&lt;br/&gt;
@@ -0,0 +1,62 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.systest.jaxb.service;&lt;br/&gt;
+&lt;br/&gt;
+import javax.xml.bind.annotation.XmlType;&lt;br/&gt;
+&lt;br/&gt;
+@XmlType(name = &quot;ErrorData&quot;)&lt;br/&gt;
+public class ErrorData implements java.io.Serializable {&lt;br/&gt;
+    private static final long serialVersionUID = 1L;&lt;br/&gt;
+    private long code;&lt;br/&gt;
+    private String title;&lt;br/&gt;
+    private String description;&lt;br/&gt;
+&lt;br/&gt;
+    public ErrorData() &lt;/p&gt;
{
+    }
&lt;p&gt;+&lt;br/&gt;
+    public ErrorData(long code, String title, String description, String stack) &lt;/p&gt;
{
+        this.code = code;
+        this.title = title;
+        this.description = description;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public long getCode() &lt;/p&gt;
{
+        return code;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public void setCode(long code) &lt;/p&gt;
{
+        this.code = code;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public String getTitle() &lt;/p&gt;
{
+        return title;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public void setTitle(String title) &lt;/p&gt;
{
+        this.title = title;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public String getDescription() &lt;/p&gt;
{
+        return description;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public void setDescription(String description) &lt;/p&gt;
{
+        this.description = description;
+    }
&lt;p&gt;+}&lt;br/&gt;
diff --git a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/PropertyOrderException.java b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/PropertyOrderException.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..61ee4ceac0e&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/PropertyOrderException.java&lt;br/&gt;
@@ -0,0 +1,70 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.systest.jaxb.service;&lt;br/&gt;
+&lt;br/&gt;
+import javax.xml.bind.annotation.XmlElement;&lt;br/&gt;
+import javax.xml.bind.annotation.XmlRootElement;&lt;br/&gt;
+import javax.xml.bind.annotation.XmlType;&lt;br/&gt;
+&lt;br/&gt;
+@XmlRootElement(name = &quot;fault&quot;)&lt;br/&gt;
+@XmlType(name = &quot;&quot;, propOrder = &lt;/p&gt;
{
+    &quot;message&quot;, &quot;data&quot;
+}
&lt;p&gt;, namespace = &quot;&quot;)&lt;br/&gt;
+public class PropertyOrderException extends Exception implements java.io.Serializable {&lt;br/&gt;
+&lt;br/&gt;
+    private static final long serialVersionUID = 1L;&lt;br/&gt;
+&lt;br/&gt;
+    @XmlElement(name = &quot;message&quot;, required = true, nillable = true)&lt;br/&gt;
+    private String message;&lt;br/&gt;
+&lt;br/&gt;
+    @XmlElement(name = &quot;data&quot;, required = true, nillable = true)&lt;br/&gt;
+    private ErrorData data;&lt;br/&gt;
+&lt;br/&gt;
+    public PropertyOrderException() &lt;/p&gt;
{
+        this.data = new ErrorData();
+        this.message = null;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public PropertyOrderException(ErrorData data) &lt;/p&gt;
{
+        this.data = data;
+        this.message = null;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public PropertyOrderException(String message) &lt;/p&gt;
{
+        this.data = null;
+        this.message = message;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public String getMessage() &lt;/p&gt;
{
+        return this.message;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public ErrorData getData() &lt;/p&gt;
{
+        return data;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public void setData(ErrorData data) &lt;/p&gt;
{
+        this.data = data;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public void setMessage(String message) &lt;/p&gt;
{
+        this.message = message;
+    }
&lt;p&gt;+&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestService.java b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestService.java&lt;br/&gt;
index d104f63bc73..7ac2d02bec9 100644&lt;br/&gt;
&amp;#8212; a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestService.java&lt;br/&gt;
+++ b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestService.java&lt;br/&gt;
@@ -34,5 +34,8 @@ Widget getWidgetById(@WebParam(name = &quot;id&quot;)&lt;/p&gt;

&lt;p&gt;     @WebMethod&lt;br/&gt;
     void testExceptionMarshalling() throws TestServiceException;&lt;br/&gt;
+    &lt;br/&gt;
+    @WebMethod&lt;br/&gt;
+    String echo(String test) throws PropertyOrderException;&lt;/p&gt;

&lt;p&gt; }&lt;br/&gt;
diff --git a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestServiceImpl.java b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestServiceImpl.java&lt;br/&gt;
index 6ac42165886..99823b05971 100644&lt;br/&gt;
&amp;#8212; a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestServiceImpl.java&lt;br/&gt;
+++ b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestServiceImpl.java&lt;br/&gt;
@@ -19,6 +19,7 @@&lt;/p&gt;

&lt;p&gt; package org.apache.cxf.systest.jaxb.service;&lt;/p&gt;

&lt;p&gt;+import javax.jws.WebMethod;&lt;br/&gt;
 import javax.jws.WebService;&lt;/p&gt;

&lt;p&gt; import org.apache.cxf.systest.jaxb.model.ExtendedWidget;&lt;br/&gt;
@@ -35,6 +36,20 @@ public void testExceptionMarshalling() throws TestServiceException &lt;/p&gt;
{
         throw new TestServiceException(&quot;Your hovercraft is full of eels.&quot;);
     }

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;p&gt;+    @WebMethod&lt;br/&gt;
+    public String echo(String test) throws PropertyOrderException &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+        if (&amp;quot;Exception&amp;quot;.equalsIgnoreCase(test)) {
+            PropertyOrderException exception = new PropertyOrderException();
+            ErrorData ed = new ErrorData();
+            ed.setCode(500);
+            ed.setDescription(&quot;Error happened&quot;);
+            ed.setTitle(&quot;Error title&quot;);
+            exception.setData(ed);
+            exception.setMessage(&quot;Exception message&quot;);
+            throw exception;
+
+        }+        return test;+    }&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16594429" author="githubbot" created="Tue, 28 Aug 2018 02:47:12 +0000"  >&lt;p&gt;jimma closed pull request #438: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7823&quot; title=&quot;JAXBEncoderDecoder doesn&amp;#39;t respect @XmlType&amp;#39;s propOrder in Exception class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7823&quot;&gt;&lt;del&gt;CXF-7823&lt;/del&gt;&lt;/a&gt;:JAXBEncoderDecoder doesn&apos;t respect @XmlType&apos;s propOrder in Exception class&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/438&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/438&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java b/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java&lt;br/&gt;
index 1e6ec2799b9..15d476df7a6 100644&lt;br/&gt;
&amp;#8212; a/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java&lt;br/&gt;
+++ b/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java&lt;br/&gt;
@@ -56,6 +56,7 @@&lt;br/&gt;
 import javax.xml.bind.annotation.XmlAccessType;&lt;br/&gt;
 import javax.xml.bind.annotation.XmlAccessorOrder;&lt;br/&gt;
 import javax.xml.bind.annotation.XmlAttribute;&lt;br/&gt;
+import javax.xml.bind.annotation.XmlType;&lt;br/&gt;
 import javax.xml.bind.annotation.adapters.HexBinaryAdapter;&lt;br/&gt;
 import javax.xml.bind.attachment.AttachmentMarshaller;&lt;br/&gt;
 import javax.xml.bind.attachment.AttachmentUnmarshaller;&lt;br/&gt;
@@ -425,7 +426,28 @@ public int compare(Member m1, Member m2) {&lt;br/&gt;
                     }&lt;br/&gt;
                 });&lt;br/&gt;
             }&lt;br/&gt;
-&lt;br/&gt;
+            XmlType xmlType = cls.getAnnotation(XmlType.class);&lt;br/&gt;
+            if (xmlType != null &amp;amp;&amp;amp; xmlType.propOrder().length &amp;gt; 1 &amp;amp;&amp;amp; !xmlType.propOrder()&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.isEmpty()) {&lt;br/&gt;
+                final List&amp;lt;String&amp;gt; orderList = Arrays.asList(xmlType.propOrder());&lt;br/&gt;
+                Collections.sort(combinedMembers, new Comparator&amp;lt;Member&amp;gt;() {&lt;br/&gt;
+                    public int compare(Member m1, Member m2) {&lt;br/&gt;
+                        String m1Name = getName(m1);&lt;br/&gt;
+                        String m2Name = getName(m2);&lt;br/&gt;
+                        int m1Index = orderList.indexOf(m1Name);&lt;br/&gt;
+                        int m2Index = orderList.indexOf(m2Name);&lt;br/&gt;
+                        if (m1Index != -1 &amp;amp;&amp;amp; m2Index != -1) &lt;/p&gt;
{
+                            return m1Index - m2Index;
+                        }
&lt;p&gt;+                        if (m1Index == -1 &amp;amp;&amp;amp; m2Index != -1) &lt;/p&gt;
{
+                            return 1;
+                        }
&lt;p&gt;+                        if (m1Index != -1 &amp;amp;&amp;amp; m2Index == -1) &lt;/p&gt;
{
+                            return -1;
+                        }
&lt;p&gt;+                        return 0;&lt;br/&gt;
+                    }&lt;br/&gt;
+                });&lt;br/&gt;
+            }&lt;br/&gt;
             for (Member member : combinedMembers) {&lt;br/&gt;
                 if (member instanceof Field) {&lt;br/&gt;
                     Field f = (Field)member;&lt;br/&gt;
@@ -461,6 +483,17 @@ public int compare(Member m1, Member m2) {&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;+    private static String getName(Member m1) {&lt;br/&gt;
+        String m1Name = null;&lt;br/&gt;
+        if (m1 instanceof Field) &lt;/p&gt;
{
+            m1Name = ((Field)m1).getName();
+        }
&lt;p&gt; else &lt;/p&gt;
{
+            int idx = m1.getName().startsWith(&quot;get&quot;) ? 3 : 2;
+            String name = m1.getName().substring(idx);
+            m1Name = Character.toLowerCase(name.charAt(0)) + name.substring(1);
+        }
&lt;p&gt;+        return m1Name;&lt;br/&gt;
+    }&lt;br/&gt;
     private static void writeArrayObject(Marshaller marshaller,&lt;br/&gt;
                                          Object source,&lt;br/&gt;
                                          QName mname,&lt;br/&gt;
diff --git a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/TestServiceTest.java b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/TestServiceTest.java&lt;br/&gt;
index a78ca348e11..e2d43da10d4 100644&lt;br/&gt;
&amp;#8212; a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/TestServiceTest.java&lt;br/&gt;
+++ b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/TestServiceTest.java&lt;br/&gt;
@@ -28,9 +28,13 @@&lt;/p&gt;

&lt;p&gt; import org.apache.cxf.Bus;&lt;br/&gt;
 import org.apache.cxf.endpoint.Server;&lt;br/&gt;
+import org.apache.cxf.ext.logging.LoggingOutInterceptor;&lt;br/&gt;
+import org.apache.cxf.ext.logging.event.LogEvent;&lt;br/&gt;
+import org.apache.cxf.ext.logging.event.LogEventSender;&lt;br/&gt;
 import org.apache.cxf.helpers.IOUtils;&lt;br/&gt;
 import org.apache.cxf.systest.jaxb.model.ExtendedWidget;&lt;br/&gt;
 import org.apache.cxf.systest.jaxb.model.Widget;&lt;br/&gt;
+import org.apache.cxf.systest.jaxb.service.PropertyOrderException;&lt;br/&gt;
 import org.apache.cxf.systest.jaxb.service.TestService;&lt;br/&gt;
 import org.apache.cxf.test.TestUtilities;&lt;br/&gt;
 import org.apache.cxf.testutil.common.TestUtil;&lt;br/&gt;
@@ -44,7 +48,7 @@&lt;br/&gt;
 @ContextConfiguration(locations = &lt;/p&gt;
{ &quot;classpath:extrajaxbclass.xml&quot; }
&lt;p&gt;)&lt;br/&gt;
 public class TestServiceTest extends AbstractJUnit4SpringContextTests {&lt;br/&gt;
     static final String PORT = TestUtil.getPortNumber(TestServiceTest.class);&lt;br/&gt;
-&lt;br/&gt;
+    private static TestLoggingEventSender fault = new TestLoggingEventSender();&lt;br/&gt;
     private TestUtilities testUtilities;&lt;/p&gt;

&lt;p&gt;     public TestServiceTest() {&lt;br/&gt;
@@ -73,7 +77,37 @@ public void testExtraSubClassWithJaxbFromEndpoint() throws Throwable &lt;/p&gt;
{
         Assert.assertEquals(expected, widgetFromService);
     }

&lt;p&gt;+    @Test&lt;br/&gt;
+    public void testExceptionPropertyOrder() throws Throwable {&lt;br/&gt;
+        ((Bus)applicationContext.getBean(&quot;cxf&quot;)).getOutFaultInterceptors().add(new LoggingOutInterceptor(fault));&lt;br/&gt;
+        TestService testClient = getTestClient();&lt;br/&gt;
+        ((BindingProvider)testClient).getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY,&lt;br/&gt;
+                                                              &quot;http://localhost:&quot; + PORT&lt;br/&gt;
+                                                                  + &quot;/service/TestEndpoint&quot;);&lt;br/&gt;
+        try &lt;/p&gt;
{
+            testClient.echo(&quot;Exception&quot;);
+        }
&lt;p&gt; catch (PropertyOrderException e) &lt;/p&gt;
{
+            Assert.assertTrue(&quot;Expect &amp;lt;message&amp;gt; element is before &amp;lt;data&amp;gt; element :&quot; + fault.getMessage(),
+                              fault.getMessage().indexOf(&quot;&amp;lt;/message&amp;gt;&amp;lt;data&quot;) &amp;gt; -1);
+        }
&lt;p&gt;+    }&lt;/p&gt;

&lt;p&gt;+    &lt;br/&gt;
+    static class TestLoggingEventSender implements LogEventSender {&lt;br/&gt;
+        private String logMessage;&lt;br/&gt;
+&lt;br/&gt;
+        public String getMessage() &lt;/p&gt;
{
+            return logMessage;
+        }
&lt;p&gt;+        public void clearMessage() &lt;/p&gt;
{
+            logMessage = null;
+        }
&lt;p&gt;+        @Override&lt;br/&gt;
+        public void send(LogEvent event) &lt;/p&gt;
{
+            logMessage = event.getPayload();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+    &lt;br/&gt;
     @Test&lt;br/&gt;
     public void testSchema() throws Exception {&lt;br/&gt;
         URL url = new URL(&quot;http://localhost:&quot; + PORT + &quot;/service/TestService?wsdl&quot;);&lt;br/&gt;
diff --git a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/ErrorData.java b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/ErrorData.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..5fe127f6ce4&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/ErrorData.java&lt;br/&gt;
@@ -0,0 +1,62 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.systest.jaxb.service;&lt;br/&gt;
+&lt;br/&gt;
+import javax.xml.bind.annotation.XmlType;&lt;br/&gt;
+&lt;br/&gt;
+@XmlType(name = &quot;ErrorData&quot;)&lt;br/&gt;
+public class ErrorData implements java.io.Serializable {&lt;br/&gt;
+    private static final long serialVersionUID = 1L;&lt;br/&gt;
+    private long code;&lt;br/&gt;
+    private String title;&lt;br/&gt;
+    private String description;&lt;br/&gt;
+&lt;br/&gt;
+    public ErrorData() &lt;/p&gt;
{
+    }
&lt;p&gt;+&lt;br/&gt;
+    public ErrorData(long code, String title, String description, String stack) &lt;/p&gt;
{
+        this.code = code;
+        this.title = title;
+        this.description = description;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public long getCode() &lt;/p&gt;
{
+        return code;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public void setCode(long code) &lt;/p&gt;
{
+        this.code = code;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public String getTitle() &lt;/p&gt;
{
+        return title;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public void setTitle(String title) &lt;/p&gt;
{
+        this.title = title;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public String getDescription() &lt;/p&gt;
{
+        return description;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public void setDescription(String description) &lt;/p&gt;
{
+        this.description = description;
+    }
&lt;p&gt;+}&lt;br/&gt;
diff --git a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/PropertyOrderException.java b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/PropertyOrderException.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..61ee4ceac0e&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/PropertyOrderException.java&lt;br/&gt;
@@ -0,0 +1,70 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.systest.jaxb.service;&lt;br/&gt;
+&lt;br/&gt;
+import javax.xml.bind.annotation.XmlElement;&lt;br/&gt;
+import javax.xml.bind.annotation.XmlRootElement;&lt;br/&gt;
+import javax.xml.bind.annotation.XmlType;&lt;br/&gt;
+&lt;br/&gt;
+@XmlRootElement(name = &quot;fault&quot;)&lt;br/&gt;
+@XmlType(name = &quot;&quot;, propOrder = &lt;/p&gt;
{
+    &quot;message&quot;, &quot;data&quot;
+}
&lt;p&gt;, namespace = &quot;&quot;)&lt;br/&gt;
+public class PropertyOrderException extends Exception implements java.io.Serializable {&lt;br/&gt;
+&lt;br/&gt;
+    private static final long serialVersionUID = 1L;&lt;br/&gt;
+&lt;br/&gt;
+    @XmlElement(name = &quot;message&quot;, required = true, nillable = true)&lt;br/&gt;
+    private String message;&lt;br/&gt;
+&lt;br/&gt;
+    @XmlElement(name = &quot;data&quot;, required = true, nillable = true)&lt;br/&gt;
+    private ErrorData data;&lt;br/&gt;
+&lt;br/&gt;
+    public PropertyOrderException() &lt;/p&gt;
{
+        this.data = new ErrorData();
+        this.message = null;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public PropertyOrderException(ErrorData data) &lt;/p&gt;
{
+        this.data = data;
+        this.message = null;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public PropertyOrderException(String message) &lt;/p&gt;
{
+        this.data = null;
+        this.message = message;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public String getMessage() &lt;/p&gt;
{
+        return this.message;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public ErrorData getData() &lt;/p&gt;
{
+        return data;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public void setData(ErrorData data) &lt;/p&gt;
{
+        this.data = data;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public void setMessage(String message) &lt;/p&gt;
{
+        this.message = message;
+    }
&lt;p&gt;+&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestService.java b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestService.java&lt;br/&gt;
index 4eef3c25d13..1977e93037d 100644&lt;br/&gt;
&amp;#8212; a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestService.java&lt;br/&gt;
+++ b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestService.java&lt;br/&gt;
@@ -34,5 +34,8 @@ Widget getWidgetById(@WebParam(name = &quot;id&quot;)&lt;/p&gt;

&lt;p&gt;     @WebMethod&lt;br/&gt;
     void testExceptionMarshalling() throws TestServiceException;&lt;br/&gt;
+    &lt;br/&gt;
+    @WebMethod&lt;br/&gt;
+    String echo(String test) throws PropertyOrderException;&lt;/p&gt;

&lt;p&gt; }&lt;br/&gt;
diff --git a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestServiceImpl.java b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestServiceImpl.java&lt;br/&gt;
index 60f1395d67a..fca13d46074 100644&lt;br/&gt;
&amp;#8212; a/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestServiceImpl.java&lt;br/&gt;
+++ b/systests/databinding/src/test/java/org/apache/cxf/systest/jaxb/service/TestServiceImpl.java&lt;br/&gt;
@@ -19,6 +19,7 @@&lt;/p&gt;

&lt;p&gt; package org.apache.cxf.systest.jaxb.service;&lt;/p&gt;

&lt;p&gt;+import javax.jws.WebMethod;&lt;br/&gt;
 import javax.jws.WebService;&lt;/p&gt;

&lt;p&gt; import org.apache.cxf.systest.jaxb.model.ExtendedWidget;&lt;br/&gt;
@@ -35,6 +36,22 @@ public void testExceptionMarshalling() throws TestServiceException &lt;/p&gt;
{
         throw new TestServiceException(&quot;Your hovercraft is full of eels.&quot;);
     }

&lt;p&gt;+    @WebMethod&lt;br/&gt;
+    public String echo(String test) throws PropertyOrderException {&lt;br/&gt;
+        if (&quot;Exception&quot;.equalsIgnoreCase(test)) &lt;/p&gt;
{
+            PropertyOrderException exception = new PropertyOrderException();
+            ErrorData ed = new ErrorData();
+            ed.setCode(500);
+            ed.setDescription(&quot;Error happened&quot;);
+            ed.setTitle(&quot;Error title&quot;);
+            exception.setData(ed);
+            exception.setMessage(&quot;Exception message&quot;);
+            throw exception;
+
+        }
&lt;p&gt;+        return test;&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;/p&gt;


&lt;p&gt; }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xafj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>