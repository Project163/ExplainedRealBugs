<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:56:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-4605] SortedMap is not returned when another unrelated method exists in the interface</title>
                <link>https://issues.apache.org/jira/browse/CXF-4605</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt; During testing of bug 4534 I stumbled upon the following behavior. Subsets of tests were passing when run standalone but failing when run in the full test suite.&lt;/p&gt;

&lt;p&gt;So I have narrowed it down to one method that fails when another is uncommented in the interface.&lt;/p&gt;

&lt;p&gt;Interface:&lt;br/&gt;
    // uncomment this for the next method to fail&lt;br/&gt;
    // public Map&amp;lt;String, Map&amp;lt;Integer, Integer&amp;gt;&amp;gt; testDirectComplexMapResult();&lt;/p&gt;

&lt;p&gt;    // fail &amp;#8211; puts data into a hashmap instead of a SortedMap if the above is uncommented&lt;br/&gt;
    public Map&amp;lt;String, SortedMap&amp;lt;Integer, Integer&amp;gt;&amp;gt; testDirectComplexTreeMapResult();&lt;/p&gt;

&lt;p&gt;Implementation:&lt;br/&gt;
    //@Override&lt;br/&gt;
    public Map&amp;lt;String, Map&amp;lt;Integer, Integer&amp;gt;&amp;gt; testDirectComplexMapResult() &lt;/p&gt;
{
        final Map&amp;lt;String, Map&amp;lt;Integer, Integer&amp;gt;&amp;gt; result = new HashMap&amp;lt;String, Map&amp;lt;Integer, Integer&amp;gt;&amp;gt;();
        final TreeMap&amp;lt;Integer, Integer&amp;gt; map1 = new TreeMap&amp;lt;Integer, Integer&amp;gt;();
        map1.put(1, 3);
        result.put(&quot;key1&quot;, map1);
        return result;
    }

&lt;p&gt;    @Override&lt;br/&gt;
    public Map&amp;lt;String, SortedMap&amp;lt;Integer, Integer&amp;gt;&amp;gt; testDirectComplexTreeMapResult() &lt;/p&gt;
{
        final Map&amp;lt;String, SortedMap&amp;lt;Integer, Integer&amp;gt;&amp;gt; result = new HashMap&amp;lt;String, SortedMap&amp;lt;Integer, Integer&amp;gt;&amp;gt;();
        final TreeMap&amp;lt;Integer, Integer&amp;gt; map1 = new TreeMap&amp;lt;Integer, Integer&amp;gt;();
        map1.put(1, 3);
        map1.put(0, 2);
        result.put(&quot;key1&quot;, map1);
        return result;
    }

&lt;p&gt;Client:&lt;br/&gt;
    @Test&lt;br/&gt;
    public void testDirectComplexTreeMapResult() {&lt;br/&gt;
        final Map map = TestServiceFactory.getService()&lt;br/&gt;
                .testDirectComplexTreeMapResult();&lt;br/&gt;
        log.info(map);&lt;br/&gt;
        for (final Object vmap : map.values()) &lt;/p&gt;
{
            Assert.assertTrue(vmap instanceof SortedMap);
        }
&lt;p&gt;    }&lt;/p&gt;</description>
                <environment>&lt;p&gt;Debian unstable / tomcat7 / opennjdk7&lt;/p&gt;</environment>
        <key id="12613644">CXF-4605</key>
            <summary>SortedMap is not returned when another unrelated method exists in the interface</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="vasvir">Vassilis Virvilis</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Oct 2012 12:23:32 +0000</created>
                <updated>Wed, 19 Dec 2012 14:38:42 +0000</updated>
                            <resolved>Tue, 13 Nov 2012 19:08:56 +0000</resolved>
                                    <version>2.7</version>
                                    <fixVersion>2.7.1</fixVersion>
                                    <component>Aegis Databinding</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13484892" author="vasvir" created="Fri, 26 Oct 2012 13:00:30 +0000"  >&lt;p&gt;The attached project demonstrates the problem if you uncomment the other method in the interface&lt;/p&gt;</comment>
                            <comment id="13489736" author="dkulp" created="Fri, 2 Nov 2012 20:36:53 +0000"  >&lt;p&gt;&lt;br/&gt;
This changes the generated schema a bit so likely not going to merge back&lt;/p&gt;</comment>
                            <comment id="13490540" author="vasvir" created="Mon, 5 Nov 2012 10:00:58 +0000"  >&lt;p&gt;Daniel,&lt;/p&gt;

&lt;p&gt;Thanks again for the quick fix.&lt;/p&gt;

&lt;p&gt;I can see that there is a apache-cxf-2.7.1-20121105.071034-21.tar.gz pre-release and the patch is 2 of November so I will try to test it later today...&lt;/p&gt;

&lt;p&gt;One question: These schema changes you mentioned what implications do they have for older versions? For example what happens if I mix 2.7.1 server with 2.6.x clients. In that case I don&apos;t mind about SortedMap but I do care about plain maps behavior...&lt;/p&gt;

&lt;p&gt;  Vassilis&lt;/p&gt;</comment>
                            <comment id="13490705" author="dkulp" created="Mon, 5 Nov 2012 16:09:13 +0000"  >
&lt;p&gt;If using Aegis on both sides, it really won&apos;t matter as Aegis doesn&apos;t actually use the schema.   The issue is if you have a client that has taken the WSDL and generated JAXWS/JAXB code based on the WSDL.  With the new code, a separate type is generated for the sorted maps compared to the non-sorted (and a couple others).   HOWEVER, this is likely not an issue as the schema for the old case was actually invalid.   It was generating two &quot;int2intMap&quot; types into the schema.  Two types, same name.   Not valid.  It would now have an int2intMap (for the non-sorted case) and an int2intSortedMap to differentiate them.&lt;/p&gt;</comment>
                            <comment id="13493171" author="vasvir" created="Thu, 8 Nov 2012 13:36:30 +0000"  >&lt;p&gt;Thanks a bunch as usual,&lt;/p&gt;

&lt;p&gt;I tested it with 2.7.1 snapshot 20121107 and it passes the provided test. However it still fails our internal test-suite. The only reason I bringing it up here and not another bug is that the one failure is a regression. If you want me to open it as new issue please tell me so.&lt;/p&gt;

&lt;p&gt;So the purpose of the tests is to test inheritance of complex maps. So here are the objects we are trying pass through...&lt;/p&gt;

&lt;p&gt;    public class ComplexMapResult extends&lt;br/&gt;
            HashMap&amp;lt;String, Map&amp;lt;Integer, Integer&amp;gt;&amp;gt; {&lt;br/&gt;
    }&lt;/p&gt;


&lt;p&gt; public class ComplexTreeMapResult extends&lt;br/&gt;
            HashMap&amp;lt;String, TreeMap&amp;lt;Integer, Integer&amp;gt;&amp;gt; {&lt;br/&gt;
    }&lt;/p&gt;


&lt;p&gt;The interface is &lt;br/&gt;
    // fail returns null map value in cxf-2.3.3&lt;br/&gt;
    // works in cxf-2.6.2&lt;br/&gt;
    // fails with exceptions in 2.7.1&lt;br/&gt;
    public ComplexMapResult testComplexMapResult();&lt;/p&gt;

&lt;p&gt;    // this was always failing...&lt;br/&gt;
    public ComplexTreeMapResult testComplexTreeMapResult();&lt;/p&gt;

&lt;p&gt;The server side code (implementation) is&lt;/p&gt;

&lt;p&gt;    @Override&lt;br/&gt;
    public ComplexMapResult testComplexMapResult() &lt;/p&gt;
{
        final ComplexMapResult result = new ComplexMapResult();
        final Map&amp;lt;Integer, Integer&amp;gt; map1 = new HashMap&amp;lt;Integer, Integer&amp;gt;();
        map1.put(1, 3);
        result.put(&quot;key1&quot;, map1);
        return result;
    }

&lt;p&gt;    @Override&lt;br/&gt;
    public ComplexTreeMapResult testComplexTreeMapResult() &lt;/p&gt;
{
        final ComplexTreeMapResult result = new ComplexTreeMapResult();
        final TreeMap&amp;lt;Integer, Integer&amp;gt; map1 = new TreeMap&amp;lt;Integer, Integer&amp;gt;();
        map1.put(1, 3);
        map1.put(0, 2);
        result.put(&quot;key1&quot;, map1);
        return result;
    }

&lt;p&gt;The client side code is:&lt;/p&gt;

&lt;p&gt;    @Test&lt;br/&gt;
    public void testComplexMapResult() &lt;/p&gt;
{
        log.info(TestServiceFactory.getService().testComplexMapResult());
    }

&lt;p&gt;    @Test&lt;br/&gt;
    public void testComplexTreeMapResult() {&lt;br/&gt;
        final Map map = TestServiceFactory.getService()&lt;br/&gt;
                .testComplexTreeMapResult();&lt;br/&gt;
        log.info(map);&lt;br/&gt;
        for (final Object vmap : map.values()) &lt;/p&gt;
{
            Assert.assertTrue(vmap instanceof SortedMap);
        }
&lt;p&gt;    }&lt;/p&gt;

&lt;p&gt;I will update the test case...&lt;/p&gt;

&lt;p&gt;           Vassilis&lt;/p&gt;</comment>
                            <comment id="13493199" author="vasvir" created="Thu, 8 Nov 2012 14:13:17 +0000"  >&lt;p&gt;Here are the exceptions I get&lt;/p&gt;

&lt;p&gt;WARNING: Interceptor for &lt;/p&gt;
{http://iface/}
&lt;p&gt;TestInterface#&lt;/p&gt;
{http://iface/}
&lt;p&gt;testComplexMapResult has thrown exception, unwinding now&lt;br/&gt;
org.apache.cxf.interceptor.Fault: Could not determine how to read type: &lt;/p&gt;
{http://iface/}
&lt;p&gt;anyType2anyTypeHashMap&lt;br/&gt;
	at org.apache.cxf.aegis.databinding.XMLStreamDataReader.read(XMLStreamDataReader.java:58)&lt;br/&gt;
	at org.apache.cxf.aegis.databinding.XMLStreamDataReader.read(XMLStreamDataReader.java:36)&lt;br/&gt;
	at org.apache.cxf.interceptor.DocLiteralInInterceptor.getPara(DocLiteralInInterceptor.java:303)&lt;br/&gt;
	at org.apache.cxf.interceptor.DocLiteralInInterceptor.handleMessage(DocLiteralInInterceptor.java:127)&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:801)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:1590)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:1488)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1307)&lt;br/&gt;
	at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:622)&lt;br/&gt;
	at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:531)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:464)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:367)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:320)&lt;br/&gt;
	at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:89)&lt;br/&gt;
	at org.apache.cxf.frontend.ClientProxy.invoke(ClientProxy.java:81)&lt;br/&gt;
	at $Proxy21.testComplexMapResult(Unknown Source)&lt;br/&gt;
	at client.TestClient.testComplexMapResult(TestClient.java:50)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:601)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)&lt;br/&gt;
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)&lt;br/&gt;
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)&lt;br/&gt;
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)&lt;br/&gt;
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)&lt;br/&gt;
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)&lt;br/&gt;
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)&lt;br/&gt;
	at org.junit.runners.ParentRunner.run(ParentRunner.java:300)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)&lt;br/&gt;
Caused by: org.apache.cxf.aegis.DatabindingException: Could not determine how to read type: &lt;/p&gt;
{http://iface/}
&lt;p&gt;anyType2anyTypeHashMap&lt;br/&gt;
	at org.apache.cxf.aegis.type.basic.ObjectType.readObject(ObjectType.java:125)&lt;br/&gt;
	at org.apache.cxf.aegis.type.basic.ObjectType.readObject(ObjectType.java:141)&lt;br/&gt;
	at org.apache.cxf.aegis.type.collection.MapType.readObject(MapType.java:92)&lt;br/&gt;
	at org.apache.cxf.aegis.AegisXMLStreamDataReader.read(AegisXMLStreamDataReader.java:83)&lt;br/&gt;
	at org.apache.cxf.aegis.databinding.XMLStreamDataReader.read(XMLStreamDataReader.java:51)&lt;br/&gt;
	... 43 more&lt;/p&gt;

&lt;p&gt;INFO: client.TestClient.testDirectComplexMapResult(TestClient.java:55): {key1={1=3}}&lt;br/&gt;
INFO: client.TestClient.testSortedMapResult(TestClient.java:70): &lt;/p&gt;
{0=2, 1=3}

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;WARNING: Interceptor for &lt;/p&gt;
{http://iface/}
&lt;p&gt;TestInterface#&lt;/p&gt;
{http://iface/}
&lt;p&gt;testComplexTreeMapResult has thrown exception, unwinding now&lt;br/&gt;
org.apache.cxf.interceptor.Fault: Could not determine how to read type: &lt;/p&gt;
{http://iface/}
&lt;p&gt;anyType2anyTypeTreeMap&lt;br/&gt;
	at org.apache.cxf.aegis.databinding.XMLStreamDataReader.read(XMLStreamDataReader.java:58)&lt;br/&gt;
	at org.apache.cxf.aegis.databinding.XMLStreamDataReader.read(XMLStreamDataReader.java:36)&lt;br/&gt;
	at org.apache.cxf.interceptor.DocLiteralInInterceptor.getPara(DocLiteralInInterceptor.java:303)&lt;br/&gt;
	at org.apache.cxf.interceptor.DocLiteralInInterceptor.handleMessage(DocLiteralInInterceptor.java:127)&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:801)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:1590)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:1488)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1307)&lt;br/&gt;
	at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:622)&lt;br/&gt;
	at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:531)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:464)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:367)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:320)&lt;br/&gt;
	at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:89)&lt;br/&gt;
	at org.apache.cxf.frontend.ClientProxy.invoke(ClientProxy.java:81)&lt;br/&gt;
	at $Proxy21.testComplexTreeMapResult(Unknown Source)&lt;br/&gt;
	at client.TestClient.testComplexTreeMapResult(TestClient.java:95)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:601)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)&lt;br/&gt;
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)&lt;br/&gt;
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)&lt;br/&gt;
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)&lt;br/&gt;
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)&lt;br/&gt;
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)&lt;br/&gt;
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)&lt;br/&gt;
	at org.junit.runners.ParentRunner.run(ParentRunner.java:300)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)&lt;br/&gt;
Caused by: org.apache.cxf.aegis.DatabindingException: Could not determine how to read type: &lt;/p&gt;
{http://iface/}
&lt;p&gt;anyType2anyTypeTreeMap&lt;br/&gt;
	at org.apache.cxf.aegis.type.basic.ObjectType.readObject(ObjectType.java:125)&lt;br/&gt;
	at org.apache.cxf.aegis.type.basic.ObjectType.readObject(ObjectType.java:141)&lt;br/&gt;
	at org.apache.cxf.aegis.type.collection.MapType.readObject(MapType.java:92)&lt;br/&gt;
	at org.apache.cxf.aegis.AegisXMLStreamDataReader.read(AegisXMLStreamDataReader.java:83)&lt;br/&gt;
	at org.apache.cxf.aegis.databinding.XMLStreamDataReader.read(XMLStreamDataReader.java:51)&lt;br/&gt;
	... 43 more&lt;/p&gt;</comment>
                            <comment id="13493203" author="vasvir" created="Thu, 8 Nov 2012 14:17:19 +0000"  >&lt;p&gt;I cannot reproduce the exceptions with the update test case I attached but the results are still wrong. It returns null instead of the value map. Hope that helps&lt;/p&gt;

&lt;p&gt;   Vassilis&lt;/p&gt;</comment>
                            <comment id="13495708" author="dkulp" created="Mon, 12 Nov 2012 22:35:52 +0000"  >&lt;p&gt;Just committed some more fixes for this.  I&apos;d appreciate you testing tomorrows snapshots with it.&lt;/p&gt;

&lt;p&gt;That said, you are rapidly getting out of our &quot;this is supported&quot; areas of Aegis.   Nothing in Aegis really is accounting for custom subclasses of the java Collections.   Passing the Generics through the various subclasses and interfaces is very complex and error prone so not something we really support.   Direct instances of the various collections that have their types directly declared there should be fine.   &lt;/p&gt;

&lt;p&gt;That said, my commit MAY allow a lot more strange cases of Maps and such to work.  &lt;/p&gt;</comment>
                            <comment id="13496058" author="vasvir" created="Tue, 13 Nov 2012 09:24:15 +0000"  >&lt;p&gt;Daniel,&lt;/p&gt;

&lt;p&gt;Thanks a lot for your work on this. For sure I will test and report.&lt;/p&gt;

&lt;p&gt;I understand the &quot;No this is not supported&quot; answer. What I am saying and have said in other bug reports and in the mailing is that Aegis can:&lt;/p&gt;

&lt;p&gt;1) work ok (as you are trying to do)&lt;br/&gt;
2) complain (even at run time, better in deploy time) that this is not supported&lt;br/&gt;
3) fail silently by corrupting data (returning HashMap instead of SortedMap) or by returning null&lt;/p&gt;

&lt;p&gt;What I am saying behavior #3 must be treated as a bug. Behavior #1, #2 are acceptable.&lt;/p&gt;

&lt;p&gt;       Vassilis&lt;/p&gt;
</comment>
                            <comment id="13496371" author="dkulp" created="Tue, 13 Nov 2012 18:01:26 +0000"  >
&lt;p&gt;The problem is whether due to TypeErasure of the generics can we even detect #2 or not.   In your test case, CXF was detecting it to be a map of Object -&amp;gt; Object due to the erasure.   That IS &quot;supported&quot; as it is treated as an &quot;xsd:anyType&quot; and the value mapped to a DOM object.  Mostly what I&apos;m trying to do is to traverse the various generics information that is available to see if we can determine the actual type or whether the actual type isn&apos;t available and we just get &quot;Object&quot; for the type.&lt;/p&gt;

&lt;p&gt;I&apos;ve just committed a couple more changes that will try and detect if the type erasure is resulting in &quot;Object&quot; (as opposed to just being &quot;Object&quot; to begin with) and log a warning.  &lt;/p&gt;</comment>
                            <comment id="13510473" author="vasvir" created="Wed, 5 Dec 2012 13:41:46 +0000"  >&lt;p&gt;Hi there,&lt;/p&gt;

&lt;p&gt;I finally find the time to test with the apache-cxf-2.7.1-20121204.070440-41.tar.gz. All our internal tests are passing now...&lt;/p&gt;

&lt;p&gt;Thank you so much...&lt;/p&gt;

&lt;p&gt;    Vassilis Virvilis&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12552660" name="ws-test-issue-4605.tgz" size="9574" author="vasvir" created="Thu, 8 Nov 2012 14:17:19 +0000"/>
                            <attachment id="12550959" name="ws-test-issue-4605.tgz" size="8901" author="vasvir" created="Fri, 26 Oct 2012 13:00:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>251242</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0baef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63797</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>