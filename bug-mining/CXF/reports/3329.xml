<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:32:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7830] cxf-java2ws-plugin command too long (because of -cp argument)</title>
                <link>https://issues.apache.org/jira/browse/CXF-7830</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Using the cxf-java2ws-plugin from a Maven project&#160;using JDK 9+ (10 and 11 release candidate) on Windows 10, it fails to run because the generated command line is too long.&lt;/p&gt;

&lt;p&gt;In our case, the generated classpath was more than 75000 characters long &#8211; Yes, it is a big project. It used to work on JDK 8.&lt;/p&gt;



&lt;p&gt;&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.cxf:cxf-java2ws-plugin:3.2.6:java2ws (&lt;em&gt;EXECUTIONNAME&lt;/em&gt;) on project &lt;em&gt;PROJECTNAME&lt;/em&gt;: Error while executing process.: Cannot run program &quot;cmd.exe&quot; (in directory &quot;C:\opt\dev\...&amp;#95;PROJECTNAME_\target&quot;): CreateProcess error=206, The filename or extension is too long -&amp;gt;&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The current code base (3.3.0-SNAPSHOT) does not work at all with JDK 10 or 11.&lt;/p&gt;

&lt;p&gt;The problem is that the classpath is part of the command line and on Windows it seems to be limited to around 8000 characters.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 10&lt;/p&gt;

&lt;p&gt;JDK 9, 10 and 11&lt;/p&gt;</environment>
        <key id="13181921">CXF-7830</key>
            <summary>cxf-java2ws-plugin command too long (because of -cp argument)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ffang">Freeman Yue Fang</assignee>
                                    <reporter username="fwangel">Fredrik Wangel</reporter>
                        <labels>
                            <label>CLASSPATH</label>
                            <label>jdk10</label>
                            <label>jdk11</label>
                            <label>wsdl</label>
                    </labels>
                <created>Wed, 29 Aug 2018 13:36:29 +0000</created>
                <updated>Mon, 25 Mar 2019 12:28:57 +0000</updated>
                            <resolved>Fri, 31 Aug 2018 02:27:55 +0000</resolved>
                                    <version>3.2.6</version>
                                    <fixVersion>3.3.0</fixVersion>
                                    <component>Tooling</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16596334" author="fwangel" created="Wed, 29 Aug 2018 13:38:44 +0000"  >&lt;p&gt;In a local clone of the repository, this issue has been&#160;solved by making changes to JavaUtils.java (adding checks for Jdk11+) and Java2WSMojo.java to store the classpath as an&#160;environment variable instead of having it part of the command line as an argument.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Preparing a pull request for this.&lt;/p&gt;</comment>
                            <comment id="16596385" author="fwangel" created="Wed, 29 Aug 2018 14:13:11 +0000"  >&lt;p&gt;Also: JDK 11 removes the Java EE modules, so the list of&#160;--add-opens JVM&#160;arguments is different from JDK 10 and 9.&lt;/p&gt;</comment>
                            <comment id="16597525" author="githubbot" created="Thu, 30 Aug 2018 14:35:56 +0000"  >&lt;p&gt;fwangel opened a new pull request #440: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7830&quot; title=&quot;cxf-java2ws-plugin command too long (because of -cp argument)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7830&quot;&gt;&lt;del&gt;CXF-7830&lt;/del&gt;&lt;/a&gt; Support for running java2ws-plugin using JDK9+ on Windows.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/440&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/440&lt;/a&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Problem description&lt;br/&gt;
   When using the `cxf-java2ws-plugin` from a Maven project using JDK 9+ (10 and 11 release candidate) on Windows 10, it fails to run because the generated command line is too long.&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   As an example, in one project I&apos;m working on, the generated classpath was more than 75000 characters long &#8211; Yes, it is a big project. It works on JDK 8.&lt;/p&gt;

&lt;p&gt;   `&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.cxf:cxf-java2ws-plugin:3.2.6:java2ws (EXECUTIONNAME) on project PROJECTNAME: Error while executing process.: Cannot run program &quot;cmd.exe&quot; (in directory &quot;C:\opt\dev\...&lt;em&gt;PROJECTNAME&lt;/em&gt;\target&quot;): CreateProcess error=206, The filename or extension is too long -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;`&lt;/p&gt;

&lt;p&gt;   The current code base (3.3.0-SNAPSHOT) does not work at all with JDK 10 or 11.&lt;/p&gt;

&lt;p&gt;   The problem is that the classpath is part of the command line and on Windows it seems to be limited to around 8000 characters.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;This commit includes:&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   Fix for &quot;CreateProcess error=206, The filename or extension is too long&quot;:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Added parameter `classpathAsEnvVar`, which is `false` by default,&lt;br/&gt;
      unless plugin is running in a Windows OS using JDK 9+, in which&lt;br/&gt;
      case it is activated automatically. This parameter controls if&lt;br/&gt;
      the CLASSPATH is applied via environment variable or as an&lt;br/&gt;
      argument to the command line that executes the java2ws tool.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   Cleaning up the JDK9+ JVM arguments code:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Single block for JDK 9, 10, 11 and up.&lt;/li&gt;
	&lt;li&gt;For JDK 11 and up the java.xml.ws module is skipped since&lt;br/&gt;
      it was moved out of the JDK.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   More verbose error reporting:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;If command fails to execute, the reported message&lt;br/&gt;
      includes information about the command line, and&lt;br/&gt;
      the CLASSPATH environment variable if defined.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   Other fixes:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Fixed NPE when classifier is undefined.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16598085" author="githubbot" created="Fri, 31 Aug 2018 00:45:32 +0000"  >&lt;p&gt;ffang closed pull request #440: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7830&quot; title=&quot;cxf-java2ws-plugin command too long (because of -cp argument)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7830&quot;&gt;&lt;del&gt;CXF-7830&lt;/del&gt;&lt;/a&gt; Support for running java2ws-plugin using JDK9+ on Windows.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/440&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/440&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/core/src/main/java/org/apache/cxf/helpers/JavaUtils.java b/core/src/main/java/org/apache/cxf/helpers/JavaUtils.java&lt;br/&gt;
index 7c604d5b1a5..52ad836e40b 100644&lt;br/&gt;
&amp;#8212; a/core/src/main/java/org/apache/cxf/helpers/JavaUtils.java&lt;br/&gt;
+++ b/core/src/main/java/org/apache/cxf/helpers/JavaUtils.java&lt;br/&gt;
@@ -46,6 +46,7 @@&lt;br/&gt;
         &quot;void&quot;, &quot;volatile&quot;, &quot;while&quot;&lt;br/&gt;
     ));&lt;/p&gt;

&lt;p&gt;+    private static boolean isJava11Compatible;&lt;br/&gt;
     private static boolean isJava9Compatible;&lt;br/&gt;
     private static boolean isJava8Before161;&lt;/p&gt;

&lt;p&gt;@@ -66,6 +67,7 @@&lt;br/&gt;
         }&lt;/p&gt;

&lt;p&gt;         setJava9Compatible(Integer.valueOf(version) &amp;gt;= 9);&lt;br/&gt;
+        setJava11Compatible(Integer.valueOf(version) &amp;gt;= 11);&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;     private JavaUtils() {&lt;br/&gt;
@@ -91,10 +93,18 @@ public static String makeNonJavaKeyword(String keyword) {&lt;br/&gt;
     public static boolean isJava9Compatible() &lt;/p&gt;
{
         return isJava9Compatible;
     }
&lt;p&gt;+    &lt;br/&gt;
+    public static boolean isJava11Compatible() &lt;/p&gt;
{
+        return isJava11Compatible;
+    }

&lt;p&gt;     private static void setJava9Compatible(boolean java9Compatible) &lt;/p&gt;
{
         JavaUtils.isJava9Compatible = java9Compatible;
     }
&lt;p&gt;+    &lt;br/&gt;
+    private static void setJava11Compatible(boolean java11Compatible) &lt;/p&gt;
{
+        JavaUtils.isJava11Compatible = java11Compatible;
+    }

&lt;p&gt;     public static boolean isJava8Before161() {&lt;br/&gt;
         return isJava8Before161;&lt;br/&gt;
diff --git a/maven-plugins/java2ws-plugin/src/main/java/org/apache/cxf/maven_plugin/Java2WSMojo.java b/maven-plugins/java2ws-plugin/src/main/java/org/apache/cxf/maven_plugin/Java2WSMojo.java&lt;br/&gt;
index 08540e8465b..84b7f023d8b 100644&lt;br/&gt;
&amp;#8212; a/maven-plugins/java2ws-plugin/src/main/java/org/apache/cxf/maven_plugin/Java2WSMojo.java&lt;br/&gt;
+++ b/maven-plugins/java2ws-plugin/src/main/java/org/apache/cxf/maven_plugin/Java2WSMojo.java&lt;br/&gt;
@@ -209,12 +209,29 @@&lt;br/&gt;
      */&lt;br/&gt;
     private String additionalJvmArgs;&lt;/p&gt;

&lt;p&gt;+    /**&lt;br/&gt;
+     * Determines how the classpath is applied to the executed command,&lt;br/&gt;
+     * either as a command line argument, or as an environment variable&lt;br/&gt;
+     * for the executing process. Only applicable when fork is set to &amp;lt;code&amp;gt;true&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * (which is always the case for JDK 9+).&lt;br/&gt;
+     * &amp;lt;p&amp;gt;&lt;br/&gt;
+     * Primarily useful on Windows because of length limitations for command arguments,&lt;br/&gt;
+     * which is why the default is &amp;lt;code&amp;gt;true&amp;lt;/code&amp;gt; in that case.&lt;br/&gt;
+     *&lt;br/&gt;
+     * @parameter default-value=&quot;false&quot;&lt;br/&gt;
+     * @since 3.3&lt;br/&gt;
+     */&lt;br/&gt;
+    private Boolean classpathAsEnvVar;&lt;br/&gt;
+&lt;br/&gt;
     public void execute() throws MojoExecutionException {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (JavaUtils.isJava9Compatible()) {&lt;br/&gt;
+        boolean requiresModules = JavaUtils.isJava9Compatible();&lt;br/&gt;
+        if (requiresModules) {&lt;br/&gt;
+            // Since JEP 261 (&quot;Jigsaw&quot;), access to some packages must be granted&lt;br/&gt;
             fork = true;&lt;br/&gt;
+            boolean skipXmlWsModule = JavaUtils.isJava11Compatible(); //&lt;br/&gt;
             additionalJvmArgs = &quot;--add-exports=jdk.xml.dom/org.w3c.dom.html=ALL-UNNAMED &quot;&lt;br/&gt;
                     + &quot;--add-exports=java.xml/com.sun.org.apache.xerces.internal.impl.xs=ALL-UNNAMED &quot;&lt;/li&gt;
	&lt;li&gt;+ &quot;--add-opens java.xml.ws/javax.xml.ws.wsaddressing=ALL-UNNAMED &quot;&lt;br/&gt;
+                    + (skipXmlWsModule ? &quot;&quot; : &quot;--add-opens java.xml.ws/javax.xml.ws.wsaddressing=ALL-UNNAMED &quot;)&lt;br/&gt;
                     + &quot;--add-opens java.base/java.security=ALL-UNNAMED &quot;&lt;br/&gt;
                     + &quot;--add-opens java.base/java.net=ALL-UNNAMED &quot;&lt;br/&gt;
                     + &quot;--add-opens java.base/java.lang=ALL-UNNAMED &quot;&lt;br/&gt;
@@ -222,6 +239,11 @@ public void execute() throws MojoExecutionException 
{
                     + &quot;--add-opens java.base/java.util.concurrent=ALL-UNNAMED &quot; 
                     + (additionalJvmArgs == null ? &quot;&quot; : additionalJvmArgs); 
         }
&lt;p&gt;+        if (fork &amp;amp;&amp;amp; SystemUtils.IS_OS_WINDOWS) &lt;/p&gt;
{
+            // Windows does not allow for very long command lines,
+            // so by default CLASSPATH environment variable is used.
+            classpathAsEnvVar = true;
+        }
&lt;p&gt;         System.setProperty(&quot;org.apache.cxf.JDKBugHacks.defaultUsesCaches&quot;, &quot;true&quot;);&lt;br/&gt;
         if (skip) {&lt;br/&gt;
             getLog().info(&quot;Skipping Java2WS execution&quot;);&lt;br/&gt;
@@ -247,8 +269,8 @@ public void execute() throws MojoExecutionException &lt;/p&gt;
{
                 cp = StringUtils.join(artifactsPath.iterator(), File.pathSeparator) + File.pathSeparator + cp;
             }&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;List&amp;lt;String&amp;gt; args = initArgs(cp);&lt;/li&gt;
	&lt;li&gt;processJavaClass(args);&lt;br/&gt;
+            List&amp;lt;String&amp;gt; args = initArgs(classpathAsEnvVar ? null : cp);&lt;br/&gt;
+            processJavaClass(args, classpathAsEnvVar ? cp : null);&lt;br/&gt;
         } finally 
{
             classLoaderSwitcher.restoreClassLoader();
         }
&lt;p&gt;@@ -268,9 +290,11 @@ public void execute() throws MojoExecutionException &lt;/p&gt;
{
             args.add(&quot;-DexitOnFinish=true&quot;);
         }&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;// classpath arg&lt;/li&gt;
	&lt;li&gt;args.add(&quot;-cp&quot;);&lt;/li&gt;
	&lt;li&gt;args.add(cp);&lt;br/&gt;
+        if (!StringUtils.isEmpty(cp)) 
{
+            // classpath arg
+            args.add(&quot;-cp&quot;);
+            args.add(cp);
+        }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         if (fork) {&lt;br/&gt;
             args.add(JavaToWS.class.getCanonicalName());&lt;br/&gt;
@@ -384,7 +408,7 @@ public void execute() throws MojoExecutionException &lt;/p&gt;
{
         return args;
     }

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private void processJavaClass(List&amp;lt;String&amp;gt; args) throws MojoExecutionException {&lt;br/&gt;
+    private void processJavaClass(List&amp;lt;String&amp;gt; args, String cp) throws MojoExecutionException {&lt;br/&gt;
         if (!fork) {&lt;br/&gt;
             try {&lt;br/&gt;
                 CommandInterfaceUtils.commandCommonMain();&lt;br/&gt;
@@ -416,22 +440,37 @@ private void processJavaClass(List&amp;lt;String&amp;gt; args) throws MojoExecutionException {&lt;br/&gt;
             }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;             cmd.addArguments(args.toArray(new String&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;));&lt;br/&gt;
+            if (classpathAsEnvVar &amp;amp;&amp;amp; !StringUtils.isEmpty(cp)) &lt;/p&gt;
{
+                cmd.addEnvironment(&quot;CLASSPATH&quot;, cp);
+            }

&lt;p&gt;             CommandLineUtils.StringStreamConsumer err = new CommandLineUtils.StringStreamConsumer();&lt;br/&gt;
             CommandLineUtils.StringStreamConsumer out = new CommandLineUtils.StringStreamConsumer();&lt;/p&gt;

&lt;p&gt;+            String cmdLine = CommandLineUtils.toString(cmd.getCommandline());&lt;br/&gt;
+&lt;br/&gt;
             int exitCode;&lt;br/&gt;
             try &lt;/p&gt;
{
                 exitCode = CommandLineUtils.executeCommandLine(cmd, out, err);
             }
&lt;p&gt; catch (CommandLineException e) {&lt;br/&gt;
                 getLog().debug(e);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;throw new MojoExecutionException(e.getMessage(), e);&lt;br/&gt;
+                StringBuilder msg = new StringBuilder(e.getMessage());&lt;br/&gt;
+                if (!(fork &amp;amp;&amp;amp; classpathAsEnvVar)) 
{
+                    msg.append(&apos;\n&apos;);
+                    msg.append(&quot;Try to run this goal using &amp;lt;fork&amp;gt;true&amp;lt;/fork&amp;gt; and &quot;
+                            + &quot;&amp;lt;classpathAsEnvVar&amp;gt;true&amp;lt;/classpathAsEnvVar&amp;gt;.&quot;);
+                }
&lt;p&gt;+                msg.append(&apos;\n&apos;);&lt;br/&gt;
+                msg.append(&quot;Command line was: &quot;).append(cmdLine).append(&apos;\n&apos;);&lt;br/&gt;
+                if (classpathAsEnvVar &amp;amp;&amp;amp; !StringUtils.isEmpty(cp)) &lt;/p&gt;
{
+                    msg.append(&quot;   CLASSPATH env: &quot;).append(cp).append(&apos;\n&apos;);
+                }
&lt;p&gt;+                msg.append(&apos;\n&apos;);&lt;br/&gt;
+                throw new MojoExecutionException(msg.toString(), e);&lt;br/&gt;
             }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;             String output = StringUtils.isEmpty(out.getOutput()) ? null : &apos;\n&apos; + out.getOutput().trim();&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String cmdLine = CommandLineUtils.toString(cmd.getCommandline());&lt;br/&gt;
-&lt;br/&gt;
             if (exitCode != 0) {&lt;br/&gt;
                 if (StringUtils.isNotEmpty(output)) {&lt;br/&gt;
                     getLog().info(output);&lt;br/&gt;
@@ -443,7 +482,11 @@ private void processJavaClass(List&amp;lt;String&amp;gt; args) throws MojoExecutionException 
{
                     msg.append(&quot; - &quot;).append(err.getOutput());
                 }
&lt;p&gt;                 msg.append(&apos;\n&apos;);&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;msg.append(&quot;Command line was: &quot;).append(cmdLine).append(&apos;\n&apos;).append(&apos;\n&apos;);&lt;br/&gt;
+                msg.append(&quot;Command line was: &quot;).append(cmdLine).append(&apos;\n&apos;);&lt;br/&gt;
+                if (classpathAsEnvVar &amp;amp;&amp;amp; !StringUtils.isEmpty(cp)) 
{
+                    msg.append(&quot;   CLASSPATH env: &quot;).append(cp).append(&apos;\n&apos;);
+                }
&lt;p&gt;+                msg.append(&apos;\n&apos;);&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;                 throw new MojoExecutionException(msg.toString());&lt;br/&gt;
             }&lt;br/&gt;
@@ -452,7 +495,11 @@ private void processJavaClass(List&amp;lt;String&amp;gt; args) throws MojoExecutionException {&lt;br/&gt;
                 StringBuilder msg = new StringBuilder();&lt;br/&gt;
                 msg.append(err.getOutput());&lt;br/&gt;
                 msg.append(&apos;\n&apos;);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;msg.append(&quot;Command line was: &quot;).append(cmdLine).append(&apos;\n&apos;).append(&apos;\n&apos;);&lt;br/&gt;
+                msg.append(&quot;Command line was: &quot;).append(cmdLine).append(&apos;\n&apos;);&lt;br/&gt;
+                if (classpathAsEnvVar &amp;amp;&amp;amp; !StringUtils.isEmpty(cp)) 
{
+                    msg.append(&quot;   CLASSPATH env: &quot;).append(cp).append(&apos;\n&apos;);
+                }
&lt;p&gt;+                msg.append(&apos;\n&apos;);&lt;br/&gt;
                 throw new MojoExecutionException(msg.toString());&lt;br/&gt;
             }&lt;br/&gt;
         }&lt;br/&gt;
@@ -465,7 +512,7 @@ private void processJavaClass(List&amp;lt;String&amp;gt; args) throws MojoExecutionException {&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;                 boolean hasWsdlAttached = false;&lt;br/&gt;
                 for (Artifact a : project.getAttachedArtifacts()) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (&quot;wsdl&quot;.equals(a.getType()) &amp;amp;&amp;amp; classifier.equals(a.getClassifier())) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+                    if (&amp;quot;wsdl&amp;quot;.equals(a.getType()) &amp;amp;&amp;amp; classifier != null &amp;amp;&amp;amp; classifier.equals(a.getClassifier())) {
                         hasWsdlAttached = true;
                     }                 }&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16598129" author="ffang" created="Fri, 31 Aug 2018 02:26:52 +0000"  >&lt;p&gt;patch applied on behalf of Fredrik Wangel  with thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13156930">CXF-7735</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13098332">HADOOP-14813</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 11 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xjzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>