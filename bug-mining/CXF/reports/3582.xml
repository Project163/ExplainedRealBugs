<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:37:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-8341] LoggingFeature always prints out binary contents</title>
                <link>https://issues.apache.org/jira/browse/CXF-8341</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;As mentioned in the following (closed) old issue:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7143&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CXF-7143&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;it seems that the LoggingFeature and releated classes (LoggingInInterceptor, etc) don&apos;t treat correctly a SOAP MTOM message with multiple parts.&lt;/p&gt;

&lt;p&gt;Configuring the LoggingFeature as follows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
LoggingFeature lf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LoggingFeature();
        lf.setPrettyLogging(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        lf.setLogBinary(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        lf.setLogMultipart(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The MTOM attachment is printed in the log despite its content-type is application/octet-stream (already defined in the&#160;DefaultLogEventMapper).&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
HttpMethod: POST
    Content-Type: multipart/related; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;application/xop+xml&quot;&lt;/span&gt;; boundary=&lt;span class=&quot;code-quote&quot;&gt;&quot;uuid:09d02828-bbcd-4ab7-9007-53cac8f6174d&quot;&lt;/span&gt;; start=&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;root.message@cxf.apache.org&amp;gt;&quot;&lt;/span&gt;; start-info=&lt;span class=&quot;code-quote&quot;&gt;&quot;application/soap+xml&quot;&lt;/span&gt;
...
Payload: 
--uuid:09d02828-bbcd-4ab7-9007-53cac8f6174d
Content-Type: application/xop+xml; charset=UTF-8; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;application/soap+xml&quot;&lt;/span&gt;
Content-Transfer-Encoding: binary
Content-ID: &amp;lt;root.message@cxf.apache.org&amp;gt;&amp;lt;soap:Envelope xmlns:soap=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.w3.org/2003/05/soap-envelope&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;...
&amp;lt;/soap:Body&amp;gt;&amp;lt;/soap:Envelope&amp;gt;
--uuid:09d02828-bbcd-4ab7-9007-53cac8f6174d
Content-Type: application/octet-stream
Content-Transfer-Encoding: binary
Content-ID: &amp;lt;0c5cb764-0821-4641-8dcc-27d0d119aece-1@cxf.apache.org&amp;gt;
Content-Disposition: attachment;name=&lt;span class=&quot;code-quote&quot;&gt;&quot;pdf-sample.pdf&quot;&lt;/span&gt;

---&amp;gt; THE BINARY CONTENT IS LOGGED HERE EVEN IF THE CONTENT TYPE IS application/octet-stream


&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It seems that the&#160;isBinaryContent() is evaluted only once for the whole message passing the content-type of the first part only (applcation/xop+xml).&lt;/p&gt;

&lt;p&gt;I would like to have printed in the log only the SOAP XML payload (the first part) filtering out the binary parts (replacing them with the standard message &quot;--- Content suppressed ---&quot;).&lt;/p&gt;

&lt;p&gt;To recap, if I set LoggingFeature.setLogMultipart(false) also the SOAP XML Envelope disappear (as it is contained in a part), if I set&#160;LoggingFeature.setLogMultipart(true) and&#160;LoggingFeature.setLogBinary(false) the latter is ignored and the binary content are printed in the log.&lt;/p&gt;

&lt;p&gt;Any help would be highly appreciated.&lt;/p&gt;

&lt;p&gt;Luke&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13328359">CXF-8341</key>
            <summary>LoggingFeature always prints out binary contents</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ffang">Freeman Yue Fang</assignee>
                                    <reporter username="blashluke">Luke</reporter>
                        <labels>
                    </labels>
                <created>Sat, 19 Sep 2020 15:16:12 +0000</created>
                <updated>Wed, 22 Dec 2021 20:41:40 +0000</updated>
                            <resolved>Fri, 12 Mar 2021 19:31:45 +0000</resolved>
                                    <version>3.4.0</version>
                                    <fixVersion>3.5.0</fixVersion>
                    <fixVersion>3.4.3</fixVersion>
                                    <component>logging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 8 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0iql4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>