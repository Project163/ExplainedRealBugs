<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:39:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-8745] MemoryLeak when using SpringBus in a spring context which has a reusable parent context</title>
                <link>https://issues.apache.org/jira/browse/CXF-8745</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;SpringBus automatically registers itself as an ApplicationListener in the SpringContext and recursively also in all its parents:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setApplicationContext(ApplicationContext applicationContext) {
&#160; &#160; &#160; &#160; ctx = (AbstractApplicationContext)applicationContext;
&#160; &#160; &#160; &#160; @SuppressWarnings(&lt;span class=&quot;code-quote&quot;&gt;&quot;rawtypes&quot;&lt;/span&gt;)
&#160; &#160; &#160; &#160; ApplicationListener listener = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ApplicationListener() {
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void onApplicationEvent(ApplicationEvent event) {
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; SpringBus.&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.onApplicationEvent(event);
&#160; &#160; &#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160; };
&#160; &#160; &#160; &#160; ctx.addApplicationListener(listener);
&#160; &#160; &#160; &#160; ApplicationContext ac = applicationContext.getParent();
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (ac != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ac &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; AbstractApplicationContext) {
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; ((AbstractApplicationContext)ac).addApplicationListener(listener);
&#160; &#160; &#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160; &#160; &#160; ac = ac.getParent();
&#160; &#160; &#160; &#160; } 
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This leads to a MemoryLeak when the current SpringContext is closed but the ParentContext is reused for another child context, because the ApplicationListener references the SpringBus and the SpringBus references the old ApplicationContext.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;A very simple approach to solve this problem would be to deregister the listener in a destroy-block or to just use a WeakReference. The later is also used by spring itself when they register a listener in the parent to automatically close all related child contexts.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13475176">CXF-8745</key>
            <summary>MemoryLeak when using SpringBus in a spring context which has a reusable parent context</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cheesemaster">Eric</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Aug 2022 13:18:38 +0000</created>
                <updated>Mon, 18 Sep 2023 18:48:14 +0000</updated>
                            <resolved>Tue, 7 Mar 2023 18:22:38 +0000</resolved>
                                    <version>3.5.3</version>
                                    <fixVersion>3.6.0</fixVersion>
                    <fixVersion>4.0.1</fixVersion>
                    <fixVersion>3.5.6</fixVersion>
                    <fixVersion>3.4.11</fixVersion>
                                    <component>Bus</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17597639" author="coheigea" created="Tue, 30 Aug 2022 07:51:54 +0000"  >&lt;p&gt;Hi, can you consider opening a pull request for this issue?&lt;/p&gt;</comment>
                            <comment id="17679152" author="JIRAUSER293945" created="Fri, 20 Jan 2023 13:51:01 +0000"  >&lt;p&gt;Sorry, this has taken a long time for a very small snippet of code &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cxf/pull/1077&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/1077&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I have to admit that I was too lazy to look up the formatter rules for my IDE(A), so I did that by hand. If I come back here more, often, I&apos;ll change that.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z17h7s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>