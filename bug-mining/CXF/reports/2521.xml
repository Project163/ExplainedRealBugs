<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:15:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6343] EncryptedHeader not properly processed or generated</title>
                <link>https://issues.apache.org/jira/browse/CXF-6343</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;We spend quite some time getting interoperability with .NET 4.5 to work. In the end we managed to track down the problem to EncryptedHeader. .NET wraps EncryptedData for headers in an EncryptedHeader. This can be properly understood and parsed by WSS4J, however CXF will return an error first telling the client that it doesn&apos;t understand the EncryptedHeader element.&lt;/p&gt;

&lt;p&gt;This can be fixed by adding the following QName(&quot;http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd&quot;, &quot;EncryptedHeader&quot;) to the understood headers in the AbstractTokenInterceptor&lt;/p&gt;

&lt;p&gt;The return path has a problem as well, the EncryptedHeaders are not generated by WSS4J while they should be (if i understand the spec correctly). This seems to be due to a bug in AbstractBindingBuilder where the method getEncryptedParts the following snippet should have Header instead of Element for headers&lt;/p&gt;

&lt;p&gt;        List&amp;lt;WSEncryptionPart&amp;gt; signedParts = new ArrayList&amp;lt;WSEncryptionPart&amp;gt;();&lt;br/&gt;
        if (parts != null) {&lt;br/&gt;
            isBody = parts.isBody();&lt;br/&gt;
            for (Header head : parts.getHeaders()) &lt;/p&gt;
{
                WSEncryptionPart wep = new WSEncryptionPart(head.getName(),
                                                            head.getNamespace(),
                                                            &quot;Element&quot;);
                signedParts.add(wep);
            }

&lt;p&gt;            Attachments attachments = parts.getAttachments();&lt;br/&gt;
            if (attachments != null) &lt;/p&gt;
{
                WSEncryptionPart wep = new WSEncryptionPart(&quot;cid:Attachments&quot;, &quot;Element&quot;);
                signedParts.add(wep);
            }
&lt;p&gt;        }&lt;/p&gt;


&lt;p&gt;I&apos;m more than happy to provide a patch for this, but i&apos;m looking for a second opinion on this analysis. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12819703">CXF-6343</key>
            <summary>EncryptedHeader not properly processed or generated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="coheigea">Colm O hEigeartaigh</assignee>
                                    <reporter username="htrippaers">Hugo Trippaers</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Apr 2015 15:12:04 +0000</created>
                <updated>Fri, 14 Oct 2016 14:24:02 +0000</updated>
                            <resolved>Thu, 16 Apr 2015 10:07:38 +0000</resolved>
                                    <version>3.0.4</version>
                                    <fixVersion>3.1</fixVersion>
                    <fixVersion>3.0.5</fixVersion>
                                    <component>WS-* Components</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14487509" author="coheigea" created="Thu, 9 Apr 2015 15:21:32 +0000"  >&lt;p&gt;I think your analysis is sound...please submit a patch + I will review + apply.&lt;/p&gt;

&lt;p&gt;Colm.&lt;/p&gt;</comment>
                            <comment id="14489276" author="githubbot" created="Fri, 10 Apr 2015 09:46:01 +0000"  >&lt;p&gt;GitHub user spark404 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/64&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/64&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6343&quot; title=&quot;EncryptedHeader not properly processed or generated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6343&quot;&gt;&lt;del&gt;CXF-6343&lt;/del&gt;&lt;/a&gt; Support and parse EncryptedHeader&lt;/p&gt;

&lt;p&gt;    SOAP Message Security 1.1 paragraph 9.3 mentions that EncryptedHeader is recommended to be used when a header part is encrypted. Recent .NET implementations do this and for interop CXF needs to be able to handle this. WSS4J already does, this fix will make CXF pass the right information on to WSS4J&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/spark404/cxf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/spark404/cxf&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6343&quot; title=&quot;EncryptedHeader not properly processed or generated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6343&quot;&gt;&lt;del&gt;CXF-6343&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/64.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/64.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #64&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 85c374f962ad317be93471be02b08b3d16d09ebe&lt;br/&gt;
Author: Hugo Trippaers &amp;lt;hugo@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-04-10T08:29:06Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6343&quot; title=&quot;EncryptedHeader not properly processed or generated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6343&quot;&gt;&lt;del&gt;CXF-6343&lt;/del&gt;&lt;/a&gt; Add test cases to validate handling of EncryptedHeader tags&lt;/p&gt;

&lt;p&gt;commit c67e61626d50528fadb94dba6318d435f0e8a9ee&lt;br/&gt;
Author: Hugo Trippaers &amp;lt;hugo@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-04-10T08:30:07Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6343&quot; title=&quot;EncryptedHeader not properly processed or generated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6343&quot;&gt;&lt;del&gt;CXF-6343&lt;/del&gt;&lt;/a&gt; Change Element to Header for header parts that should be encrypted&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14489277" author="htrippaers" created="Fri, 10 Apr 2015 09:46:32 +0000"  >&lt;p&gt;Patch submitted as pul request on GitHub&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/cxf/pull/64&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/64&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14489753" author="coheigea" created="Fri, 10 Apr 2015 15:08:46 +0000"  >&lt;p&gt;Hi Hugo,&lt;/p&gt;

&lt;p&gt;Thanks for the patch. The patch is not for the latest master code in CXF. Can you update it accordingly?&lt;/p&gt;

&lt;p&gt;Initially I had an issue with this change, as the XPath may not be referring to a SOAP Header&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;result.addAll(this.getElements(&quot;Element&quot;, xpaths, found, sign));&lt;br/&gt;
+        result.addAll(this.getElements(&quot;Header&quot;, xpaths, found, sign));&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;However, I&apos;ve merged a fix to WSS4J (&lt;a href=&quot;https://issues.apache.org/jira/browse/WSS-531&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/WSS-531&lt;/a&gt;) to only set up an EncryptedHeader if the parent is the SOAP Header.&lt;/p&gt;

&lt;p&gt;Colm.&lt;/p&gt;</comment>
                            <comment id="14497784" author="githubbot" created="Thu, 16 Apr 2015 08:49:46 +0000"  >&lt;p&gt;Github user coheigea commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/64#issuecomment-93680982&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/64#issuecomment-93680982&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Did you see my comment on the JIRA?&lt;/p&gt;

&lt;p&gt;    Colm.&lt;/p&gt;</comment>
                            <comment id="14497798" author="githubbot" created="Thu, 16 Apr 2015 09:05:24 +0000"  >&lt;p&gt;GitHub user spark404 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/66&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/66&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6343&quot; title=&quot;EncryptedHeader not properly processed or generated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6343&quot;&gt;&lt;del&gt;CXF-6343&lt;/del&gt;&lt;/a&gt; Support and parse EncryptedHeader&lt;/p&gt;

&lt;p&gt;    Pull request for the master branch.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/spark404/cxf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/spark404/cxf&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6343&quot; title=&quot;EncryptedHeader not properly processed or generated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6343&quot;&gt;&lt;del&gt;CXF-6343&lt;/del&gt;&lt;/a&gt;-master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/66.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/66.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #66&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit dcfe0bb598ecb7f1b44e4e0fec7b4fabd91ab2ad&lt;br/&gt;
Author: Hugo Trippaers &amp;lt;hugo@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-04-10T08:29:06Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6343&quot; title=&quot;EncryptedHeader not properly processed or generated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6343&quot;&gt;&lt;del&gt;CXF-6343&lt;/del&gt;&lt;/a&gt; Add test cases to validate handling of EncryptedHeader tags&lt;/p&gt;

&lt;p&gt;commit 4ccac09c38693cf73d8f8af9ebdbef473f6d0130&lt;br/&gt;
Author: Hugo Trippaers &amp;lt;hugo@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-04-10T08:30:07Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6343&quot; title=&quot;EncryptedHeader not properly processed or generated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6343&quot;&gt;&lt;del&gt;CXF-6343&lt;/del&gt;&lt;/a&gt; Change Element to Header for header parts that should be encrypted&lt;/p&gt;

&lt;p&gt;commit c24219fa2a747e82cb65222196dc7ac91648f01b&lt;br/&gt;
Author: Hugo Trippaers &amp;lt;hugo@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-04-10T10:31:09Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6343&quot; title=&quot;EncryptedHeader not properly processed or generated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6343&quot;&gt;&lt;del&gt;CXF-6343&lt;/del&gt;&lt;/a&gt; Remove debug statement from the code&lt;/p&gt;

&lt;p&gt;commit 7482683ade6f2ef44a530ececa70c36439070ada&lt;br/&gt;
Author: Hugo Trippaers &amp;lt;hugo@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-04-10T10:31:45Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6343&quot; title=&quot;EncryptedHeader not properly processed or generated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6343&quot;&gt;&lt;del&gt;CXF-6343&lt;/del&gt;&lt;/a&gt; Make the MustUnderstandInterceptor give a positive response on EncryptedHeader&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14497848" author="githubbot" created="Thu, 16 Apr 2015 09:50:02 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/66&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/66&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14497871" author="githubbot" created="Thu, 16 Apr 2015 10:17:28 +0000"  >&lt;p&gt;Github user spark404 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/66#issuecomment-93700924&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/66#issuecomment-93700924&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for merging @coheigea &lt;/p&gt;

&lt;p&gt;    I don&apos;t know the policy in CXF but in general is good to keep the original author the author of the commit to trace contributions with regards to the Apache License. And of course it is more inviting for new contributors when they see their commits popup in the code base.&lt;/p&gt;</comment>
                            <comment id="14497878" author="githubbot" created="Thu, 16 Apr 2015 10:24:12 +0000"  >&lt;p&gt;Github user coheigea commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/66#issuecomment-93702214&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/66#issuecomment-93702214&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I just downloaded the patch and applied it via &quot;git apply&quot;. I wasn&apos;t aware that this removed the author. I guess I should have used &quot;git am&quot; instead...apologies.&lt;/p&gt;</comment>
                            <comment id="14497879" author="githubbot" created="Thu, 16 Apr 2015 10:26:55 +0000"  >&lt;p&gt;Github user spark404 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/66#issuecomment-93702628&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/66#issuecomment-93702628&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @coheigea No worries &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;   The important part is the fix and i&apos;m happy it&apos;s in!&lt;/p&gt;</comment>
                            <comment id="14556621" author="githubbot" created="Fri, 22 May 2015 18:57:14 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/64&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/64&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2d1db:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>