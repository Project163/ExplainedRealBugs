<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:54:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-4337] A NullPointerException is thrown during token validation</title>
                <link>https://issues.apache.org/jira/browse/CXF-4337</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;If we build a request Authorization header using a renewed token, a NullPointerException can raise (at server tier) when trying to validate it:&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.cxf.rs.security.oauth2.common.AccessTokenValidation.&amp;lt;init&amp;gt;(AccessTokenValidation.java:53)&lt;br/&gt;
	at org.apache.cxf.rs.security.oauth2.services.AbstractAccessTokenValidator.getAccessTokenValidation(AbstractAccessTokenValidator.java:117)&lt;/p&gt;

&lt;p&gt;AbstractAccessTokenValidator: if there are no registered handlers to process the token, the code will use the injected dataprovider to get the corresponding token instance, but this returned object can be null (for example if the token has been renewed and the dataprovider has removed all its information), therefore AccessTokenValidation constructor will throw a NullPointerException&lt;/p&gt;

&lt;p&gt;    try &lt;/p&gt;
{
        localAccessToken = dataProvider.getAccessToken(authSchemeData);
        accessTokenV = new AccessTokenValidation(localAccessToken);
    }
&lt;p&gt; catch (OAuthServiceException ex) &lt;/p&gt;
{
        AuthorizationUtils.throwAuthorizationFailure(
            Collections.singleton(authScheme));
    }

&lt;p&gt;So it would be useful to check localAccessToken value before passing it to AccessTokenValidation constructor, for example:&lt;/p&gt;

&lt;p&gt;try {&lt;br/&gt;
    localAccessToken = dataProvider.getAccessToken(authSchemeData);&lt;/p&gt;

&lt;p&gt;    if (localAccessToken == null) &lt;/p&gt;
{
	AuthorizationUtils.throwAuthorizationFailure(supportedSchemes);
    }

&lt;p&gt;    accessTokenV = new AccessTokenValidation(localAccessToken);&lt;br/&gt;
} catch (OAuthServiceException ex) {&lt;br/&gt;
    AuthorizationUtils.throwAuthorizationFailure(&lt;br/&gt;
        Collections.singleton(authScheme));&lt;br/&gt;
}&lt;/p&gt;</description>
                <environment></environment>
        <key id="12557031">CXF-4337</key>
            <summary>A NullPointerException is thrown during token validation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="jordi">Jordi Gerona</reporter>
                        <labels>
                            <label>oauth2</label>
                    </labels>
                <created>Wed, 23 May 2012 16:59:50 +0000</created>
                <updated>Tue, 5 Jun 2012 13:31:28 +0000</updated>
                            <resolved>Thu, 24 May 2012 21:24:12 +0000</resolved>
                                    <version>2.6</version>
                                    <fixVersion>2.6.1</fixVersion>
                                    <component>JAX-RS Security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13282781" author="sergey_beryozkin" created="Thu, 24 May 2012 21:24:12 +0000"  >&lt;p&gt;Thanks for catching the issue early.&lt;br/&gt;
By the way, are you planning to use a refresh_token grant to get a new token for a client ? I added a default handler for that, but I guess a custom handler can also be registered &lt;/p&gt;</comment>
                            <comment id="13283229" author="jordi" created="Fri, 25 May 2012 09:12:03 +0000"  >&lt;p&gt;You&apos;re welcome Sergey &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Yes, I implemented a custom refresh_token grant and I assigned &quot;OAuthConstants.REFRESH_TOKEN_GRANT&quot; as its type, so AccessTokenService uses your default handler to process it. For the time being I haven&apos;t needed an special handler but having the possibility to register a custom one is a great option.&lt;/p&gt;

&lt;p&gt;Thanks &amp;amp; regards&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>247251</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i088zr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46056</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>