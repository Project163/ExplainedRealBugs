<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:13:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6127] Check thrown Exception&apos;s cause for SOAPFaultException</title>
                <link>https://issues.apache.org/jira/browse/CXF-6127</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Section 10.2.2.3 of JAX-WS 2.2 spec has a footnote that says:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If the exception is a SOAPFaultException or has a cause that is a SOAPFaultException.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Currently CXF only checks if the thrown exception is of the exact type (i.e. not a subtype of) &lt;tt&gt;SOAPFaultException&lt;/tt&gt;.  We need to check all causes and may as well use &lt;tt&gt;instanceof&lt;/tt&gt; rather than &lt;tt&gt;ex.getClass().equals(SOAPFaultException.class)&lt;/tt&gt; in &lt;tt&gt;WebFaultOutInterceptor&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12758769">CXF-6127</key>
            <summary>Check thrown Exception&apos;s cause for SOAPFaultException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ay">Akitoshi Yoshida</assignee>
                                    <reporter username="klape">Kyle Lape</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Dec 2014 22:26:33 +0000</created>
                <updated>Tue, 23 Feb 2016 18:06:30 +0000</updated>
                            <resolved>Tue, 23 Dec 2014 22:21:23 +0000</resolved>
                                                    <fixVersion>3.0.4</fixVersion>
                    <fixVersion>2.7.15</fixVersion>
                    <fixVersion>3.1</fixVersion>
                                    <component>JAX-WS Runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14230585" author="githubbot" created="Mon, 1 Dec 2014 22:37:41 +0000"  >&lt;p&gt;GitHub user kylape opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/34&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/34&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6127&quot; title=&quot;Check thrown Exception&amp;#39;s cause for SOAPFaultException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6127&quot;&gt;&lt;del&gt;CXF-6127&lt;/del&gt;&lt;/a&gt; Check entire cause chain for SOAPFaultException to populate s...&lt;/p&gt;

&lt;p&gt;    ...ubcodes and locale&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/kylape/cxf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/kylape/cxf&lt;/a&gt; cxf-6127&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/34.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/34.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #34&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 65e0770cf0ec3ee0a397340f5d45caedd94693d7&lt;br/&gt;
Author: Kyle Lape &amp;lt;kyle.lape@redhat.com&amp;gt;&lt;br/&gt;
Date:   2014-12-01T22:34:23Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6127&quot; title=&quot;Check thrown Exception&amp;#39;s cause for SOAPFaultException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6127&quot;&gt;&lt;del&gt;CXF-6127&lt;/del&gt;&lt;/a&gt; Check entire cause chain for SOAPFaultException to populate subcodes and locale&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14230659" author="githubbot" created="Mon, 1 Dec 2014 23:15:32 +0000"  >&lt;p&gt;GitHub user kylape opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/35&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/35&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6127&quot; title=&quot;Check thrown Exception&amp;#39;s cause for SOAPFaultException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6127&quot;&gt;&lt;del&gt;CXF-6127&lt;/del&gt;&lt;/a&gt; Check entire cause chain for SOAPFaultException to populate s...&lt;/p&gt;

&lt;p&gt;    ...ubcodes and locale&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/kylape/cxf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/kylape/cxf&lt;/a&gt; 2.7.x-fixes-cxf-6127&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/35.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/35.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #35&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1ddd0de7d630734c2a22a391be6a31b1672db1e1&lt;br/&gt;
Author: Kyle Lape &amp;lt;kyle.lape@redhat.com&amp;gt;&lt;br/&gt;
Date:   2014-12-01T22:34:23Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6127&quot; title=&quot;Check thrown Exception&amp;#39;s cause for SOAPFaultException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6127&quot;&gt;&lt;del&gt;CXF-6127&lt;/del&gt;&lt;/a&gt; Check entire cause chain for SOAPFaultException to populate subcodes and locale&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14233143" author="ay" created="Wed, 3 Dec 2014 16:03:14 +0000"  >&lt;p&gt;Does the statement in that section imply the cause to be recursively inspected?&lt;br/&gt;
Doesn&apos;t it talk only about the exception itself or its cause, no?&lt;/p&gt;

&lt;p&gt;Besides, simply traversing the cause chain isn&apos;t a good thing as you may hit an infinite loop on a self-referencing exception.&lt;/p&gt;</comment>
                            <comment id="14242758" author="ay" created="Thu, 11 Dec 2014 16:28:41 +0000"  >&lt;p&gt;I commented on your PR.&lt;/p&gt;</comment>
                            <comment id="14242857" author="githubbot" created="Thu, 11 Dec 2014 18:05:45 +0000"  >&lt;p&gt;Github user kylape commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/34#issuecomment-66661336&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/34#issuecomment-66661336&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    No issues with those suggestions.  I just need to get around to working on it.&lt;/p&gt;</comment>
                            <comment id="14243033" author="klape" created="Thu, 11 Dec 2014 19:51:24 +0000"  >&lt;p&gt;Sorry for bouncing between jira and github.&lt;/p&gt;

&lt;p&gt;From your github comment:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Furthermore, when the soap-fault is extracted from one-depth below, the code that follows the try-catch block also needs to be adjusted to use that fault (in contrast to the first-level fault as it is now) to be consistent in picking the right fault information.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Let&apos;s say I want to provide all of these in my soap fault:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;A SOAP 1.2 subcode&lt;/li&gt;
	&lt;li&gt;A &lt;tt&gt;getFaultInfo&lt;/tt&gt; method to provide a &quot;serialized service specific exception&quot; in the fault detail.&lt;/li&gt;
	&lt;li&gt;Something to populate the &lt;tt&gt;faultstring&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;My first thought was to try and have my checked exception extend &lt;tt&gt;SOAPFaultException&lt;/tt&gt; and implement &lt;tt&gt;getFaultInfo&lt;/tt&gt;.  This would work according to spec if I supplied a &lt;tt&gt;faultstring&lt;/tt&gt; via &lt;tt&gt;SOAPFaultException.getFault().getFaultString()&lt;/tt&gt;, but that&apos;s not implemented in CXF.  I also can&apos;t provide one via &lt;tt&gt;Exception.getMessage()&lt;/tt&gt; since I can&apos;t pass that into the constructor for &lt;tt&gt;SOAPFaultException&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;So I decided to set &lt;tt&gt;SOAPFaultException&lt;/tt&gt; as the cause so that my checked &lt;tt&gt;@WebFault Exception&lt;/tt&gt; could provide the fault detail and fault string, while the &lt;tt&gt;SOAPFaultException&lt;/tt&gt; could provide the subcodes.  This requires the change in this jira (the recursive &lt;tt&gt;getCause()&lt;/tt&gt; loop is not necessary), and it also requires CXF to check the top-level exception for some things, and the &lt;tt&gt;SOAPFaultException&lt;/tt&gt; for others.&lt;/p&gt;

&lt;p&gt;Looking back on section 10.2.2.3 of the jaxws spec, there seem to be more issues than I first noticed:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I don&apos;t see where CXF checks &lt;tt&gt;SOAPFaultException.getFault().getFaultString()&lt;/tt&gt; for the &lt;tt&gt;faultstring&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Neither do I see it try &lt;tt&gt;Exception.toString()&lt;/tt&gt; for &lt;tt&gt;faultstring&lt;/tt&gt; if option 1 and 2 fail&lt;/li&gt;
	&lt;li&gt;I don&apos;t see CXF check for &lt;tt&gt;SOAPFaultException.getFault().getFaultActor()&lt;/tt&gt; to get &lt;tt&gt;faultactor&lt;/tt&gt;, though I&apos;ve never tested this&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;SOAPFaultException.getFault().getDetail()&lt;/tt&gt; is not checked when creating a fault info bean fails for whatever reason&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Obviously these things aren&apos;t dealbreakers since no one&apos;s cared enough to fix them yet (i.e. I&apos;m not saying the should be fixed as part of this jira), but I think my point is that consistency in the source of fault information is irrelevant &amp;#8211; it&apos;s the order defined in the spec that matters.  If CXF was implemented precisely to spec, I would have several options available to get all my soap fault fields populated as I&apos;d like.&lt;/p&gt;</comment>
                            <comment id="14247075" author="klape" created="Mon, 15 Dec 2014 19:22:25 +0000"  >&lt;p&gt;I went ahead and pushed the suggested changes to my PR branch.  I did not change the &lt;tt&gt;Exception&lt;/tt&gt; used in the code after the subcode/locale code if the cause was a &lt;tt&gt;SOAPFaultException&lt;/tt&gt; due to my explanation in my previous comment.  I can also push the change to the 2.7.x branch and a 3.0.x branch (I realize I hadn&apos;t actually opened this) if you&apos;re okay with the updated changeset.&lt;/p&gt;</comment>
                            <comment id="14257605" author="githubbot" created="Tue, 23 Dec 2014 22:20:21 +0000"  >&lt;p&gt;Github user elakito commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/34#issuecomment-68005017&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/34#issuecomment-68005017&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    applied this patch.&lt;br/&gt;
    thanks.&lt;/p&gt;
</comment>
                            <comment id="14257609" author="ay" created="Tue, 23 Dec 2014 22:21:23 +0000"  >&lt;p&gt;applied Kyle&apos;s patch.&lt;br/&gt;
thanks&lt;/p&gt;</comment>
                            <comment id="14519380" author="githubbot" created="Wed, 29 Apr 2015 14:00:32 +0000"  >&lt;p&gt;GitHub user TomasHofman opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/67&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/67&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6127&quot; title=&quot;Check thrown Exception&amp;#39;s cause for SOAPFaultException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6127&quot;&gt;&lt;del&gt;CXF-6127&lt;/del&gt;&lt;/a&gt; Check thrown Exception&apos;s cause for SOAPFaultException&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;added a test case for &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6127&quot; title=&quot;Check thrown Exception&amp;#39;s cause for SOAPFaultException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6127&quot;&gt;&lt;del&gt;CXF-6127&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    (This is to support our overloaded QE department.)&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/TomasHofman/cxf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/TomasHofman/cxf&lt;/a&gt; cxf-6127&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/67.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/67.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #67&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 5644833ad5565065ed83510d641f3c1c20b6c0a1&lt;br/&gt;
Author: Tomas Hofman &amp;lt;thofman@redhat.com&amp;gt;&lt;br/&gt;
Date:   2015-04-29T13:48:09Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6127&quot; title=&quot;Check thrown Exception&amp;#39;s cause for SOAPFaultException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6127&quot;&gt;&lt;del&gt;CXF-6127&lt;/del&gt;&lt;/a&gt; Check thrown Exception&apos;s cause for SOAPFaultException&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;added a test case&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="15159333" author="githubbot" created="Tue, 23 Feb 2016 18:06:30 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/34&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/34&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15159334" author="githubbot" created="Tue, 23 Feb 2016 18:06:30 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/35&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/35&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15159335" author="githubbot" created="Tue, 23 Feb 2016 18:06:30 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/67&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/67&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12629854">CXF-4790</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22xzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>