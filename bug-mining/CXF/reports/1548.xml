<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:56:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-4594] Incompatible fault type is generated in the wsdl if no setter method in Exception</title>
                <link>https://issues.apache.org/jira/browse/CXF-4594</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt; with the exception class below , it only has a get*** method for the&lt;br/&gt;
info property.&lt;/p&gt;

&lt;p&gt;@WebFault&lt;br/&gt;
public TestException extends Exception {&lt;br/&gt;
     private String message = null;&lt;/p&gt;

&lt;p&gt;    public TestException () {&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;    public TestException (String message) &lt;/p&gt;
{
        this.message = message;
    }

&lt;p&gt;    public String getInfo() &lt;/p&gt;
{
        return message;
    }

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;With the RI wsgen command, the generated schema type is :&lt;br/&gt;
RI:&lt;br/&gt;
&amp;lt;xs:complexType name=&quot;TestException&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;xs:sequence&amp;gt;&lt;br/&gt;
      &amp;lt;xs:element name=&quot;info&quot; type=&quot;xs:string&quot; minOccurs=&quot;0&quot;/&amp;gt;&lt;br/&gt;
      &amp;lt;xs:element name=&quot;message&quot; type=&quot;xs:string&quot; minOccurs=&quot;0&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/xs:sequence&amp;gt;&lt;br/&gt;
  &amp;lt;/xs:complexType&amp;gt;&lt;br/&gt;
&amp;lt;/xs:schema&amp;gt;&lt;/p&gt;

&lt;p&gt;If using CXF tool or on the CXF runtime, the generated schema type for the&lt;br/&gt;
exception is :&lt;/p&gt;

&lt;p&gt;&amp;lt;xs:element name=&quot;TestException&quot; type=&quot;tns:TestException&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;xs:complexType name=&quot;TestException&quot;&amp;gt;&lt;br/&gt;
&amp;lt;xs:sequence/&amp;gt;&lt;br/&gt;
&amp;lt;/xs:complexType&amp;gt;&lt;/p&gt;

&lt;p&gt;With the JaxWS spec, 3.7 Service Specific Exception, considering that no&lt;br/&gt;
getFaultInfo or faultBean in WebFault annotation is provided, the&lt;br/&gt;
special algorithm will be used to map the exception to jaxb bean, one of&lt;br/&gt;
the steps write below:&lt;/p&gt;

&lt;p&gt;For each getter in the exception and its superclasses, a property of the&lt;br/&gt;
same type and name is added to&lt;br/&gt;
the bean. All the getter methods except&lt;br/&gt;
getMessagefromjava.lang.Throwabletype hierarchy&lt;br/&gt;
are excluded from the list of getters to be mapped.&lt;/p&gt;

&lt;p&gt;Seems that only getter method is required, with the current codes in static&lt;br/&gt;
boolean JAXBContextInitializer.isMethodAccepted, it will check whether the&lt;br/&gt;
setter exists. I am thinking that this is not required for this scenario,&lt;br/&gt;
as we only need to read the information from the user exception.&lt;/p&gt;

&lt;p&gt;The patch will return true is the  getter method has no corresponding setter method to let CXF comply with the jax-ws 2.2 spec:&lt;br/&gt;
For each getter in the exception and its superclasses, a property of the&lt;br/&gt;
same type and name is added to&lt;br/&gt;
the bean. All the getter methods except&lt;br/&gt;
getMessagefromjava.lang.Throwabletype hierarchy&lt;br/&gt;
are excluded from the list of getters to be mapped.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12613088">CXF-4594</key>
            <summary>Incompatible fault type is generated in the wsdl if no setter method in Exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ffang">Freeman Yue Fang</assignee>
                                    <reporter username="irisding">Iris Ding</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Tue, 23 Oct 2012 02:12:03 +0000</created>
                <updated>Wed, 19 Dec 2012 14:38:39 +0000</updated>
                            <resolved>Fri, 16 Nov 2012 09:01:02 +0000</resolved>
                                    <version>2.7</version>
                                    <fixVersion>2.5.7</fixVersion>
                    <fixVersion>2.6.4</fixVersion>
                    <fixVersion>2.7.1</fixVersion>
                                    <component>JAXB Databinding</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13482050" author="irisding" created="Tue, 23 Oct 2012 02:13:47 +0000"  >&lt;p&gt;Patch&lt;/p&gt;</comment>
                            <comment id="13482086" author="ffang" created="Tue, 23 Oct 2012 03:39:08 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Thanks for the patch.&lt;br/&gt;
A couple of quick issues I found so far, &lt;br/&gt;
1. the patch break several checkstyle and PMD rules, &lt;br/&gt;
2. moreover, it at least break org.apache.cxf.systest.ws.addr_fromjava.WSAFromJavaTest.&lt;/p&gt;

&lt;p&gt;A patch shouldn&apos;t break any test and also should follow CXF checkstyle and PMD rules.&lt;br/&gt;
You generally should ensure have &quot;mvn clean install&quot; run successfully from the root pom&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;</comment>
                            <comment id="13482097" author="ffang" created="Tue, 23 Oct 2012 04:10:29 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Take a close look at the logic from your patch, it doesn&apos;t follow what you wanna here.&lt;/p&gt;

&lt;p&gt;Some outstanding issue, from your logic&lt;br/&gt;
1. any method without a counterpart setter would be accepted Method, like the java.lang.Object.wait&lt;br/&gt;
2. some special get method like java.lang.Object.getClass would be accepted Method&lt;br/&gt;
both are incorrect...&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;
</comment>
                            <comment id="13482193" author="irisding" created="Tue, 23 Oct 2012 08:20:13 +0000"  >&lt;p&gt;HI,Freeman,&lt;/p&gt;

&lt;p&gt;Thanks a lot for your comments!&lt;br/&gt;
1. Need to fix this and I will provide a new patch later.&lt;br/&gt;
2. some special get method like java.lang.Object.getClass would be accepted Method --This should be there because per jax-ws 2.2 spec:&lt;br/&gt;
For each getter in the exception and its superclasses, a property of the same type and name is added to the bean. All the getter methods except getMessage from java.lang.Throwabletype hierarchy are excluded from the list of getters to be mapped.&lt;/p&gt;

&lt;p&gt;we should have all getMethod mapped to bean, no matter it is defined in super class or not.&lt;/p&gt;

</comment>
                            <comment id="13482204" author="ffang" created="Tue, 23 Oct 2012 08:40:28 +0000"  >&lt;p&gt;Hi Iris, &lt;/p&gt;

&lt;p&gt;Most likely your jax-ws spec document isn&apos;t the latest one, what I read from this part is&lt;br/&gt;
For each getter in the exception and its superclasses, a property of the same type and name is added to the bean. The getCause, getLocalizedMessage and getStackTrace getters from java.lang.Throwable and the getClass getter from java.lang.Object are excluded from the list of getters to be mapped.&lt;/p&gt;

&lt;p&gt;Obviously java.lang.Object.getClass() shouldn&apos;t get mapped.&lt;/p&gt;

&lt;p&gt;FYI,  you can download the latest JAXWS 2.2 spec from here&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, it&apos;s Maintenance Release 3 &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;http://download.oracle.com/otndocs/jcp/jaxws-2.2-mrel3-full-oth-JSpec/&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;</comment>
                            <comment id="13483971" author="irisding" created="Thu, 25 Oct 2012 08:18:01 +0000"  >&lt;p&gt;Hi Freeman,&lt;/p&gt;

&lt;p&gt;Thanks a lot for your review and comments!&lt;/p&gt;

&lt;p&gt;The new patch is read now. Pls help to review , Thanks a lot!&lt;/p&gt;

&lt;p&gt;Iris Ding&lt;/p&gt;</comment>
                            <comment id="13485786" author="irisding" created="Mon, 29 Oct 2012 02:09:09 +0000"  >&lt;p&gt;Hi Freeman,&lt;/p&gt;

&lt;p&gt;Would you please let me know whether there are any problems in the new patch? Thanks a lot for your time and review!&lt;/p&gt;

&lt;p&gt;Iris Ding&lt;/p&gt;</comment>
                            <comment id="13485797" author="ffang" created="Mon, 29 Oct 2012 02:38:59 +0000"  >&lt;p&gt;Hi Iris,&lt;/p&gt;

&lt;p&gt;Sorry I&apos;m busy in other stuff.&lt;br/&gt;
I hope I can find some time to review it this week.&lt;br/&gt;
Thanks for this patch.&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;</comment>
                            <comment id="13485846" author="ffang" created="Mon, 29 Oct 2012 06:00:14 +0000"  >&lt;p&gt;Hi Iris,&lt;/p&gt;

&lt;p&gt;Still another issue,  per the spec,&lt;br/&gt;
 The getCause, getLocalizedMessage and getStackTrace getters from java.lang.Throwable should be excluded from map, but your patch didn&apos;t match it, could you please revise your patch accordingly?&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Freeman&lt;/p&gt;</comment>
                            <comment id="13486608" author="irisding" created="Tue, 30 Oct 2012 02:31:56 +0000"  >&lt;p&gt;Hi Freeman,&lt;/p&gt;

&lt;p&gt;The getCause, getLocalizedMessage and getStackTrace getters from java.lang.Throwable has already been excluded in the original logic of the method:&lt;/p&gt;

&lt;p&gt;if (Modifier.isStatic(method.getModifiers()) &lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; method.isAnnotationPresent(XmlTransient.class)
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; !Modifier.isPublic(method.getModifiers())) {&lt;br/&gt;
+            &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; !Modifier.isPublic(method.getModifiers())&lt;br/&gt;
+            &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &quot;getClass&quot;.equals(method.getName())) 
{
             return false;
         }&lt;br/&gt;
 &lt;br/&gt;
@@ -455,7 +456,14 @@&lt;br/&gt;
             || method.getDeclaringClass().equals(Throwable.class)) {             return false;         }&lt;/th&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;So we do not need to exclude them any more in the patch. &lt;/p&gt;

&lt;p&gt;Thanks a lot for your review!&lt;/p&gt;

&lt;p&gt;Iris Ding&lt;/p&gt;
</comment>
                            <comment id="13486640" author="ffang" created="Tue, 30 Oct 2012 04:33:19 +0000"  >&lt;p&gt;Hi Iris,&lt;/p&gt;

&lt;p&gt;Ah, I missed that part, sorry.&lt;/p&gt;

&lt;p&gt;Take a closer look at this patch and more thoughts.&lt;br/&gt;
Your patch simply ignore the setter method, it might work for your case, which will generate expected schema in wsdl.&lt;br/&gt;
However, if do unmarsell when received message, missing a setter will cause problem.&lt;/p&gt;

&lt;p&gt;Per jaxws spec 3.7, the related part is&lt;/p&gt;

&lt;p&gt;For exceptions that do not match the pattern described in section 2.5, JAX-WS maps those exceptions to Java beans and then uses those Java beans as input to the JAXB mapping. The following algorithm is used to map non-matching exception classes to the corresponding Java beans for use with JAXB:&lt;br/&gt;
1. In the absence of customizations, the name of the bean is the same as the name of the Exception suffixed with &#8220;Bean&#8221;.&lt;br/&gt;
2. In the absence of customizations, the package of the bean is a generated jaxws subpackage of the SEI package. E.g. if the SEI package is com.example.stockquote then the package of the bean would be com.example.stockquote.jaxws.&lt;br/&gt;
3. For each getter in the exception and its superclasses, a property of the same type and name is added to the bean. The getCause, getLocalizedMessage and getStackTrace getters from java- .lang.Throwable and the getClass getter from java.lang.Object are excluded from the list of getters to be mapped.&lt;br/&gt;
4. The bean is annotated with a JAXB @XmlType annotation. If the exception class has a @XmlType annotation, then it is used for the fault bean&#8217;s @XmlType annotation. Otherwise, the fault bean&#8217;s @XmlType annotation is computed with name property set to the name of the exception and the namespace property set to the target namespace of the corresponding portType. Additionally, the @XmlType annotation has a propOrder property whose value is an array containing the names of all the properties of the exception class that were mapped in the previous bullet point, sorted lexico- graphically according to the Unicode value of each of their characters (i.e. using the same algorithm that the int java.lang.String.compareTo(String) method uses).&lt;br/&gt;
5. The bean is annotated with a JAXB @XmlRootElement annotation whose name property is set, in the absence of customizations, to the name of the exception.&lt;/p&gt;

&lt;p&gt;So IMO Per the spec, need generate this java bean on the fly which is input to the JAXB mapping, this java bean will gather getters from customer exception and add setters accordingly, and this java bean is used for JAXB to do marshal/unmarsel.&lt;/p&gt;

&lt;p&gt;Currently CXF in code first way, just use the custom exception as input to the JAXB maping, not generate the java bean on the fly, that&apos;s why setters can&apos;t be ignored. So if you wanna follow the JAXWS spec 3.7 exactly, you must create that java bean on the fly yourself.&lt;/p&gt;


&lt;p&gt;Thanks&lt;br/&gt;
Freeman&lt;/p&gt;</comment>
                            <comment id="13495062" author="irisding" created="Mon, 12 Nov 2012 02:25:18 +0000"  >&lt;p&gt;Hi Freeman,&lt;/p&gt;

&lt;p&gt;Thanks a lot for your review and comments. &lt;/p&gt;

&lt;p&gt;I have a look for the problem again and found if we used wsdl2java to generate client club classes, it works well. &lt;br/&gt;
There will be issue if we use dynamic client which means we do not create any client stub classes before hand. In such case, in JAXBEncoderDecoder.unmarshallException() method it will fail because it will call the setter method to set the related valued for the Exception.&lt;br/&gt;
In such case, as client is only aware of the original Exception class so generating faultbean on the fly by ourself does not work. I propose below solution for this problem, would you please help to give your valuable comments for this?&lt;/p&gt;

&lt;p&gt;In JAXBEncoderDecoder.unmarshallException() when there is no corresponding setter method: try to see whether the Exception class has related filed defined and if so, set the value of the field directly. If not, then just catch NoSuchMethodException and do nothing with the it--just ignore it.&lt;/p&gt;

&lt;p&gt;Thanks &amp;amp; Best Regards,&lt;/p&gt;

&lt;p&gt;Iris Ding&lt;/p&gt;</comment>
                            <comment id="13495081" author="ffang" created="Mon, 12 Nov 2012 04:22:57 +0000"  >&lt;p&gt;Hi Iris,&lt;/p&gt;

&lt;p&gt;Thanks for the patch.&lt;/p&gt;

&lt;p&gt;However, first of all, what we&apos;re talking about here is code-first way, jaxws spec 3.x is all about code first way, what this issue try to resolve here is the code first fault bean problem.&lt;br/&gt;
And what I suggested is using the auto-generated java-bean both on client and server side, both for marshal and unmarshal.&lt;/p&gt;

&lt;p&gt;What your suggest here might work, though not exactly follow the spec 3.7.&lt;br/&gt;
But, from your new patch I can&apos;t see any change related to JAXBEncoderDecoder you suggested here, did you miss it?&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;</comment>
                            <comment id="13495825" author="irisding" created="Tue, 13 Nov 2012 01:31:21 +0000"  >&lt;p&gt;Hi Freeman,&lt;/p&gt;

&lt;p&gt;Thanks for your review. I just uploaded the patch for JAXBEncoderDecoder. Would you please give your comments for it. Thank you very much~&lt;/p&gt;


&lt;p&gt;Iris Ding&lt;/p&gt;</comment>
                            <comment id="13495862" author="ffang" created="Tue, 13 Nov 2012 02:14:22 +0000"  >&lt;p&gt;Hi Iris,&lt;/p&gt;

&lt;p&gt;Could you please create your patch against the latest trunk code, it&apos;s more easy for me to review and apply the patch? Also you can use something like&lt;br/&gt;
svn diff &amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-4594&quot; title=&quot;Incompatible fault type is generated in the wsdl if no setter method in Exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-4594&quot;&gt;&lt;del&gt;CXF-4594&lt;/del&gt;&lt;/a&gt;.patch&lt;/p&gt;

&lt;p&gt;to generate the patch, it&apos;s  useful when your patch include multiple files  and you can only append one patch file here.&lt;br/&gt;
Thanks&lt;br/&gt;
Freeman&lt;/p&gt;</comment>
                            <comment id="13495908" author="irisding" created="Tue, 13 Nov 2012 03:49:47 +0000"  >&lt;p&gt;Hi Freeman,&lt;/p&gt;

&lt;p&gt;Thanks a lot for your guidance. I have re-uploaded the patch: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-4594&quot; title=&quot;Incompatible fault type is generated in the wsdl if no setter method in Exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-4594&quot;&gt;&lt;del&gt;CXF-4594&lt;/del&gt;&lt;/a&gt;.patch. It is against 2.7 stream. Thanks!&lt;/p&gt;

&lt;p&gt;Iris Ding&lt;/p&gt;</comment>
                            <comment id="13495924" author="ffang" created="Tue, 13 Nov 2012 04:13:09 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;No, your patch isn&apos;t against the latest trunk. With latest trunk code you should have&lt;br/&gt;
Utils.setMethodValue(m, m2, obj, o);&lt;br/&gt;
but not&lt;br/&gt;
setMethodValue(m, m2, obj, o);&lt;/p&gt;

&lt;p&gt;You may need use &quot;svn update&quot; (or &quot;git fecth|git pull&quot; if you use git) to grasp the latest code.&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;</comment>
                            <comment id="13496000" author="irisding" created="Tue, 13 Nov 2012 06:36:05 +0000"  >&lt;p&gt;Patch&lt;/p&gt;</comment>
                            <comment id="13496002" author="irisding" created="Tue, 13 Nov 2012 06:37:21 +0000"  >&lt;p&gt;Hi Freeman,&lt;/p&gt;

&lt;p&gt;sorry for the inconvenience. patch is ready now. Thanks a lot for your review!&lt;/p&gt;

&lt;p&gt;Iris Ding&lt;/p&gt;</comment>
                            <comment id="13496053" author="ffang" created="Tue, 13 Nov 2012 09:10:42 +0000"  >&lt;p&gt;Hi Iris,&lt;/p&gt;

&lt;p&gt;Thanks for the patch, we can make further progress.&lt;br/&gt;
However, this patch still have issues, at least it doesn&apos;t marshall the property &quot;message&quot; in exception, so client catch the exception but use getInfo() can only return null.&lt;/p&gt;

&lt;p&gt;As this jira is trying to resolve an issue which IMO isn&apos;t that straightforward, we&apos;d better have a testcase to demonstrate this scenario and ensure everything works well.&lt;/p&gt;

&lt;p&gt;I will attach a patch which include a testcase exactly describe the scenario tracked by this issue. And your patch should make the testcase I appended here pass.&lt;/p&gt;

&lt;p&gt;Regards&lt;br/&gt;
Freeman&lt;/p&gt;
</comment>
                            <comment id="13496056" author="ffang" created="Tue, 13 Nov 2012 09:19:16 +0000"  >&lt;p&gt;Hi Iris,&lt;/p&gt;

&lt;p&gt;Attached &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-4594&quot; title=&quot;Incompatible fault type is generated in the wsdl if no setter method in Exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-4594&quot;&gt;&lt;del&gt;CXF-4594&lt;/del&gt;&lt;/a&gt;-test.patch.&lt;br/&gt;
You should ensure new added CodeFirstTest.testException() pass with your patch.&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;</comment>
                            <comment id="13496188" author="irisding" created="Tue, 13 Nov 2012 13:29:41 +0000"  >&lt;p&gt;Hi Freeman,&lt;/p&gt;

&lt;p&gt;Thanks for your test patch and review.&lt;/p&gt;

&lt;p&gt;The AddNumbersException does not follow javabean specification. Basically I just want to deal with the sitution that the getter method in Exception class has related private/protected/public field defined in the class.--follow javabean standard. For other cases, we just ignore it. If we want to extend the scope, it has so many situations:&lt;br/&gt;
1. the Exception does not have default non-arg construtor or String-arg constructor.&lt;br/&gt;
2. The getter method just return some systemp roperty such as system time which has no related field defined.&lt;br/&gt;
..&lt;/p&gt;

&lt;p&gt;Our patch will have below benefits:&lt;br/&gt;
1. The generated WSDL is correct and will make all wsdl2java client works fine.&lt;br/&gt;
2. It has not decreased any current CXF fault processing function.&lt;/p&gt;

&lt;p&gt;Thanks &amp;amp; Best Regards,&lt;/p&gt;

&lt;p&gt;Iris Ding&lt;/p&gt;



</comment>
                            <comment id="13496198" author="ffang" created="Tue, 13 Nov 2012 13:55:00 +0000"  >&lt;p&gt;Hi Iris,&lt;/p&gt;

&lt;p&gt;I&apos;m a little bit confused, I just copy AddNumbersException as your TestException here which you described in this issue&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@WebFault
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; TestException &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Exception {
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; message = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; TestException () {
}

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; TestException (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; message) { &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.message = message; }

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getInfo() { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; message; }

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It should be exactly what you want, then please tell me what&apos;s the exception in your mind with this issue, show me the code please.&lt;/p&gt;

&lt;p&gt;I hope this issue can really resolve the code first customer exception issue(some properties only have get but no set) during runtime, not only generate the wsdl you want. Moreover, we really can&apos;t apply a patch that can generate the a desired wsdl but the runtime actually doesn&apos;t work at all, that means the interface description and behavior isn&apos;t consistent.&lt;/p&gt;

&lt;p&gt;If you are more care about the wsdl, you can simply add&lt;br/&gt;
@XmlAccessorType(XmlAccessType.FIELD)&lt;br/&gt;
for your exception class, actually this can also resolve the property marshall problem.&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;</comment>
                            <comment id="13496226" author="irisding" created="Tue, 13 Nov 2012 14:33:17 +0000"  >&lt;p&gt;Hi Freeman,&lt;/p&gt;

&lt;p&gt;One typical scenario we want to support through this patch is as below, which has a private field and getter method defined but no setter method. And no related annotation defined(@XmlAccessorType(XmlAccessType.FIELD)).&lt;/p&gt;

&lt;p&gt;@WebFault&lt;br/&gt;
public TestException extends Exception {&lt;br/&gt;
private String info = null;&lt;/p&gt;

&lt;p&gt;public TestException () {&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;public TestException (String info) &lt;/p&gt;
{ this.info= info; }

&lt;p&gt;public String getInfo() &lt;/p&gt;
{ return info; }

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;Sorry for the confusion and many thanks for your valuable time and review on this issue!&lt;/p&gt;

&lt;p&gt;Iris Ding.&lt;/p&gt;</comment>
                            <comment id="13496646" author="ffang" created="Tue, 13 Nov 2012 23:03:37 +0000"  >&lt;p&gt;Hi Iris,&lt;/p&gt;

&lt;p&gt;No, it still doesn&apos;t work, the property &quot;info&quot; can&apos;t get marshalled.&lt;br/&gt;
You can change my test patch and revise the Exception class whatever you want then run CodeFirstTest.testException(), you can see this problem.&lt;/p&gt;

&lt;p&gt;We really need the test pass as it basically ensure the runtime works well.&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;</comment>
                            <comment id="13496898" author="irisding" created="Wed, 14 Nov 2012 06:34:50 +0000"  >&lt;p&gt;Hi Freeman,&lt;/p&gt;

&lt;p&gt;It seems latest code has big change as I tested out on 2.6.2, both the marshal and unmarshal works fine and the test patch you provied works fine on 2.6.2 but does not work in 2.7. I have revised accordingly and the test patch and other test passed in latest code. I am now attaching the new patch. Thanks a lot for your review and time!&lt;/p&gt;

&lt;p&gt;Iris Ding&lt;/p&gt;</comment>
                            <comment id="13496928" author="ffang" created="Wed, 14 Nov 2012 07:56:43 +0000"  >&lt;p&gt;Hi Iris,&lt;/p&gt;

&lt;p&gt;Thanks for the new patch.&lt;br/&gt;
Unfortunately your new change in org.apache.cxf.jaxb.Utils breaks the org.apache.cxf.systest.ws.addr_fromjava.WSAFromJavaTest in systests/ws-specs module,&lt;br/&gt;
Do you mind take another look?&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Freeman&lt;/p&gt;</comment>
                            <comment id="13496940" author="irisding" created="Wed, 14 Nov 2012 08:29:44 +0000"  >&lt;p&gt;Hi Freeman,&lt;/p&gt;

&lt;p&gt;I have run all tests under systests\ws-specs and all 67 cases passed. How can we move on under such situation?  Thanks a lot!&lt;/p&gt;


&lt;p&gt;Iris Ding&lt;/p&gt;

</comment>
                            <comment id="13496950" author="ffang" created="Wed, 14 Nov 2012 08:50:55 +0000"  >&lt;p&gt;Hi Iris,&lt;/p&gt;

&lt;p&gt;I&apos;d ask you run tests in eclipse or using mvn in command line?&lt;br/&gt;
I also encounter that in eclipse the test pass but actually not, because when run into &quot;assert false;&quot; , eclipse just ignore this error. But if you set break point in WSAFromJavaTest.testAddNumbersFault(), you can see what I mean.&lt;/p&gt;

&lt;p&gt;If use mvn in command line, then what&apos;s your jdk version?&lt;br/&gt;
my env is&lt;br/&gt;
Apache Maven 3.0.4 (r1232337; 2012-01-17 16:44:56+0800)&lt;br/&gt;
Maven home: /Users/ffang/apache-maven-3.0.4&lt;br/&gt;
Java version: 1.7.0_07, vendor: Oracle Corporation&lt;br/&gt;
Java home: /Library/Java/JavaVirtualMachines/jdk1.7.0_07.jdk/Contents/Home/jre&lt;br/&gt;
Default locale: en_US, platform encoding: UTF-8&lt;br/&gt;
OS name: &quot;mac os x&quot;, version: &quot;10.7.4&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;&lt;/p&gt;

&lt;p&gt;I can get error like&lt;br/&gt;
Failed tests:   testAddNumbersFault(org.apache.cxf.systest.ws.addr_fromjava.WSAFromJavaTest)&lt;br/&gt;
  testAddNumbers3Fault(org.apache.cxf.systest.ws.addr_fromjava.WSAFromJavaTest)&lt;br/&gt;
And I also get same test failure with jdk6&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;</comment>
                            <comment id="13496981" author="irisding" created="Wed, 14 Nov 2012 09:42:36 +0000"  >&lt;p&gt;Hi Freeman,&lt;/p&gt;

&lt;p&gt;Thanks! I am running test in Eclipse and according to your guidance I can see the error now.&lt;/p&gt;

&lt;p&gt;The error is because the case is have a &apos;detail&apos; field and using our patch it will conflict with the built-in &apos;detail&apos; element in soap response:&lt;br/&gt;
&amp;lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&amp;gt;&amp;lt;soap:Body&amp;gt;&amp;lt;soap:Fault&amp;gt;&amp;lt;faultcode&amp;gt;soap:Server&amp;lt;/faultcode&amp;gt;&amp;lt;faultstring&amp;gt;Negative numbers can&apos;t be added!&amp;lt;/faultstring&amp;gt;&amp;lt;detail&amp;gt;&amp;lt;ns1:AddNumbersException xmlns:ns1=&quot;http://server.addr_fromjava.ws.systest.cxf.apache.org/&quot;&amp;gt;&amp;lt;detail xmlns:ns2=&quot;http://server.addr_fromjava.ws.systest.cxf.apache.org/&quot;&amp;gt;Numbers: -1, -1&amp;lt;/detail&amp;gt;&amp;lt;/ns1:AddNumbersException&amp;gt;&amp;lt;/detail&amp;gt;&amp;lt;/soap:Fault&amp;gt;&amp;lt;/soap:Body&amp;gt;&amp;lt;/soap:Envelope&amp;gt;&lt;/p&gt;

&lt;p&gt;so unmarshal fails for this situation. Can we think it is a bug for com.sun.xml.bind.v2.runtime.unmarshaller? Can we just modify our test case? &lt;/p&gt;

&lt;p&gt;Thanks a lot!&lt;/p&gt;

&lt;p&gt;Iris Ding&lt;/p&gt;</comment>
                            <comment id="13497008" author="ffang" created="Wed, 14 Nov 2012 10:39:10 +0000"  >&lt;p&gt;Hi Iris,&lt;/p&gt;

&lt;p&gt;Good catch!&lt;/p&gt;

&lt;p&gt; But it&apos;s not bug in com.sun.xml.bind.v2.runtime.unmarshaller, it&apos;s the fact that client and server in WSAFromJavaTest.testAddNumbersFault() are using different Exception.&lt;br/&gt;
On client side, it use org.apache.cxf.systest.ws.addr_fromjava.client.AddNumbersException, which is generated from wsdl&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;AddNumbersException&quot;&lt;/span&gt;)
@Generated(value = &lt;span class=&quot;code-quote&quot;&gt;&quot;com.sun.tools.xjc.Driver&quot;&lt;/span&gt;, date = &lt;span class=&quot;code-quote&quot;&gt;&quot;2012-11-14T05:45:44+08:00&quot;&lt;/span&gt;, comments = &lt;span class=&quot;code-quote&quot;&gt;&quot;JAXB RI v2.2.6&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AddNumbersException {
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but on server side, it use org.apache.cxf.systest.ws.addr_fromjava.server.AddNumbersException, which is&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AddNumbersException &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Exception {
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; serialVersionUID = 4629689348515005826L;
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; detail;

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; AddNumbersException(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; message, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; detail) {
        &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(message);
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.detail = detail;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getDetail() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; detail;
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So on client side, it won&apos;t expect a detail element in AddNumbersException during unmarshalling.&lt;br/&gt;
We can&apos;t see this issue without your patch because before the &quot;detail&quot; property of org.apache.cxf.systest.ws.addr_fromjava.server.AddNumbersException can&apos;t get marshalled at all on server side.&lt;br/&gt;
Yeah, it&apos;s your patch reveal this issue. And I&apos;d say change WSAFromJavaTest.testAddNumbersFault() to make client and server see same service model.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Freeman&lt;/p&gt;</comment>
                            <comment id="13497718" author="irisding" created="Thu, 15 Nov 2012 02:45:16 +0000"  >&lt;p&gt;Hi Freeman,&lt;/p&gt;

&lt;p&gt;Thanks a lot! I have modified org.apache.cxf.systest.ws.addr_fromjava.server.AddNumbersException to ignore detail and getDetail() method. &lt;br/&gt;
I have attached the new test patch now. The WSAFromJavaTest.testAddNumbersFault() passed.&lt;/p&gt;

&lt;p&gt;Iris Ding&lt;/p&gt;</comment>
                            <comment id="13497781" author="ffang" created="Thu, 15 Nov 2012 05:45:05 +0000"  >&lt;p&gt;Hi Iris,&lt;/p&gt;

&lt;p&gt;Thanks for the patch.&lt;br/&gt;
But I&apos;d like to fix WSAFromJavaTest in another way, that said, change wsdl which generate org.apache.cxf.systest.ws.addr_fromjava.client.AddNumbersException to add detail property, so that client and server see same service module.&lt;br/&gt;
I&apos;ll take care of it and will apply the patch soon.&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;</comment>
                            <comment id="13497794" author="irisding" created="Thu, 15 Nov 2012 06:10:47 +0000"  >&lt;p&gt;Hi Freeman,&lt;/p&gt;

&lt;p&gt;Many Thanks! Very nice experience working with you and in my open source journey. &lt;/p&gt;

&lt;p&gt;Iris Ding&lt;/p&gt;</comment>
                            <comment id="13497803" author="ffang" created="Thu, 15 Nov 2012 06:40:58 +0000"  >&lt;p&gt;Iris,&lt;/p&gt;

&lt;p&gt;No problem. Welcome to open source world!&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;</comment>
                            <comment id="13498681" author="ffang" created="Fri, 16 Nov 2012 09:01:02 +0000"  >&lt;p&gt;patch applied on behalf of Iris Ding with thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12553289" name="CXF-4594-test.patch" size="8016" author="ffang" created="Tue, 13 Nov 2012 09:19:16 +0000"/>
                            <attachment id="12553608" name="CXF-4594-testnew.patch" size="9407" author="irisding" created="Thu, 15 Nov 2012 02:46:17 +0000"/>
                            <attachment id="12553462" name="CXF-4594.patch" size="6047" author="irisding" created="Wed, 14 Nov 2012 06:36:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>250488</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ayvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>61922</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>