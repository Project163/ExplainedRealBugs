<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:41:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-2663] JAXBUtils.scanPackages - iterator returns null class</title>
                <link>https://issues.apache.org/jira/browse/CXF-2663</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;When starting up my endpoint such that the JAXB classes referenced from the endpoints do not exist in the War project, but rather in a separate project on the classpath a strange issue occurs.  Essentially the loop within JAXBUtils.scanPackages that loops over the &quot;classes&quot; Set will get a &quot;null&quot; Class from the set.&lt;/p&gt;

&lt;p&gt;Attached is: &lt;br/&gt;
1) sample project&lt;br/&gt;
2) screen shot of the missing class element during a debug session&lt;br/&gt;
3) dump of a conditional breakpoint which logs the class name of the class within the loop until the class is null.&lt;br/&gt;
4) a possible patch to workaround the problem&lt;/p&gt;

&lt;p&gt;To run the project and reproduce the problem:&lt;br/&gt;
1) unzip the attached project file&lt;br/&gt;
2) change directories to the Pom project, execute mvn clean install&lt;br/&gt;
3) change directories to the War project, execute mvn jetty:run&lt;br/&gt;
4) you should see a stacktrace similar to this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2010-02-05 15:01:35.781::WARN:  Nested in org.springframework.beans.factory.BeanCreationException: Error creating bean with name &lt;span class=&quot;code-quote&quot;&gt;&apos;cspsEndpoint&apos;&lt;/span&gt;: Invocation of init method failed; nested exception is javax.xml.ws.WebServiceException: java.lang.NullPointerException:
java.lang.NullPointerException
        at org.apache.cxf.common.util.PackageUtils.getPackageName(PackageUtils.java:56)
        at org.apache.cxf.jaxb.JAXBUtils.scanPackages(JAXBUtils.java:742)
        at org.apache.cxf.jaxb.JAXBDataBinding.createJAXBContextAndSchemas(JAXBDataBinding.java:467)
        at org.apache.cxf.jaxb.JAXBDataBinding.initialize(JAXBDataBinding.java:320)
        at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.buildServiceFromWSDL(ReflectionServiceFactoryBean.java:432)
        at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.initializeServiceModel(ReflectionServiceFactoryBean.java:528)
        at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.create(ReflectionServiceFactoryBean.java:278)
        at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.create(JaxWsServiceFactoryBean.java:178)
        at org.apache.cxf.frontend.AbstractWSDLBasedEndpointFactory.createEndpoint(AbstractWSDLBasedEndpointFactory.java:100)
        at org.apache.cxf.frontend.ServerFactoryBean.create(ServerFactoryBean.java:105)
        at org.apache.cxf.jaxws.JaxWsServerFactoryBean.create(JaxWsServerFactoryBean.java:167)
        at org.apache.cxf.jaxws.EndpointImpl.getServer(EndpointImpl.java:346)
        at org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:259)
        at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:209)
        at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:404)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:45)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
        at java.lang.reflect.Method.invoke(Method.java:599)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The patch which is attached might just mask the real underlying problem.  I&apos;m not sure if the problem is because the Set is being modified as its being iterated over.  I certainly couldn&apos;t find a place where that was happening, but who knows.&lt;/p&gt;</description>
                <environment>&lt;p&gt;$ mvn --version&lt;br/&gt;
Apache Maven 2.2.1 (r801777; 2009-08-06 14:16:01-0500)&lt;br/&gt;
Java version: 1.6.0&lt;br/&gt;
Java home: D:\Program Files\IBM\RAD75\jdk\jre&lt;br/&gt;
Default locale: en_US, platform encoding: Cp1252&lt;br/&gt;
OS name: &quot;windows xp&quot; version: &quot;5.1 build 2600 service pack 3&quot; arch: &quot;x86&quot; Family: &quot;windows&quot;&lt;/p&gt;</environment>
        <key id="12455498">CXF-2663</key>
            <summary>JAXBUtils.scanPackages - iterator returns null class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="ctataryn">Craig Tataryn</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Feb 2010 21:30:58 +0000</created>
                <updated>Tue, 23 Mar 2010 02:59:17 +0000</updated>
                            <resolved>Tue, 9 Feb 2010 23:34:51 +0000</resolved>
                                    <version>2.2.6</version>
                                    <fixVersion>2.2.7</fixVersion>
                                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12830473" author="ctataryn" created="Sat, 6 Feb 2010 05:49:40 +0000"  >&lt;p&gt;I should mention as well, the WSDLJar module purposely excludes some of the generated packages that cxf-codegen-plugin produces from the resulting jar file because they are duplicates of what&apos;s in the XSDJar module that were created via the cxf-common-xsd plugin.  If they are kept, what ends up happening is other areas of our system which need to use certain classes from XSDs not imported via the WSDLs (and thus not generated by cxf-codegen-plugin) can&apos;t find the classes at runtime because they find the packages in the WSDLJar first.&lt;/p&gt;</comment>
                            <comment id="12831049" author="ctataryn" created="Mon, 8 Feb 2010 19:03:15 +0000"  >&lt;p&gt;Did more digging, the null class is being added to the Set here:&lt;br/&gt;
&lt;a href=&quot;http://fisheye6.atlassian.com/browse/cxf/tags/cxf-2.2.6/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java?r=890613#l531&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://fisheye6.atlassian.com/browse/cxf/tags/cxf-2.2.6/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java?r=890613#l531&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Essentially the last class listed in the XmlSeeAlso annotation at runtime is null.&lt;/p&gt;

&lt;p&gt;I found a workaround: in the WSDLJar project I&apos;m purposely excluding the classes from the org/ and generated/ packages which were generated by the cxf-codegen-plugin module (WSDLJar module) because these classes are already generated by cxf-common-xsd in the XSDJar.&lt;/p&gt;

&lt;p&gt;I don&apos;t understand why cxf-codgegen-plugin generates this  package named &quot;generated&quot;, all of the files under that package are already contained in the org.hl7.v3 package.  But, when the Service Interface is created it wants to list that ObjectFactory from &quot;generated&quot; packagewithin the XmlSeeAlso annotation.  At runtime it can&apos;t find that ObjectFactory so it is replaced with null, and hence the Set winds up with a null entry.&lt;/p&gt;

&lt;p&gt;Anyone have any clue why that package named generated is created?&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a new patch which logs a warning and doesn&apos;t add the null class to the Set.&lt;/p&gt;

</comment>
                            <comment id="12831051" author="ctataryn" created="Mon, 8 Feb 2010 19:04:57 +0000"  >&lt;p&gt;Patch which logs a message about class not being found in the XmlSeeAlso annotation, and doesn&apos;t add the null class to the xmlschemas Set to avoid errors starting up the endpoint&lt;/p&gt;</comment>
                            <comment id="12831758" author="dkulp" created="Tue, 9 Feb 2010 23:34:51 +0000"  >
&lt;p&gt;Patch applied, although I moved the log string out to the Message.properties&lt;/p&gt;</comment>
                            <comment id="12831798" author="ctataryn" created="Wed, 10 Feb 2010 01:13:56 +0000"  >&lt;p&gt;Any clue what that mysterious &quot;generated&quot; package is all about?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12435012" name="CXF Linked Hashset Problem Breakpoint Dump.txt" size="35401" author="ctataryn" created="Fri, 5 Feb 2010 21:32:39 +0000"/>
                            <attachment id="12435013" name="CXF LinkedHashset problem.png" size="31048" author="ctataryn" created="Fri, 5 Feb 2010 21:32:39 +0000"/>
                            <attachment id="12435011" name="CXFSchemaRefProblem.zip" size="910937" author="ctataryn" created="Fri, 5 Feb 2010 21:32:38 +0000"/>
                            <attachment id="12435195" name="JaxWsServiceFactoryBean.java.nullxmlseealso.patch" size="995" author="ctataryn" created="Mon, 8 Feb 2010 19:04:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>114060</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0a5xr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57235</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>