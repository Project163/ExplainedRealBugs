<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:33:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-1564] ArrayType does not work correctly if isWriteOuter == false</title>
                <link>https://issues.apache.org/jira/browse/CXF-1564</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;In org.apache.cxf.aegis.type.basic.ArrayType:&lt;/p&gt;

&lt;p&gt;    protected void writeValue(Object value, MessageWriter writer, Context context, Type type, String name,&lt;br/&gt;
        ...&lt;br/&gt;
        if (type.isWriteOuter()) &lt;/p&gt;
{
            cwriter = writer.getElementWriter(name, ns);
        } else {
            cwriter = writer;
        }&lt;br/&gt;
&lt;br/&gt;
        if (value == null &amp;amp;&amp;amp; type.isNillable()) {
            cwriter.writeXsiNil();
        } else {
            type.writeObject(value, cwriter, context);
        }&lt;br/&gt;
&lt;br/&gt;
        cwriter.close();&lt;br/&gt;
    }&lt;br/&gt;
&lt;br/&gt;
Should be: &lt;br/&gt;
&lt;br/&gt;
    protected void writeValue(Object value, MessageWriter writer, Context context, Type type, String name,&lt;br/&gt;
        ...&lt;br/&gt;
        if (type.isWriteOuter()) {            cwriter = writer.getElementWriter(name, ns);        }
&lt;p&gt; else &lt;/p&gt;
{
            cwriter = writer;
        }

&lt;p&gt;        if (value == null &amp;amp;&amp;amp; type.isNillable()) &lt;/p&gt;
{
            cwriter.writeXsiNil();
        }
&lt;p&gt; else &lt;/p&gt;
{
            type.writeObject(value, cwriter, context);
        }

&lt;p&gt;        if (type.isWriteOuter()) &lt;/p&gt;
{
            cwriter.close();
        }
&lt;p&gt;    }&lt;/p&gt;

&lt;p&gt;Similar bug was in XFire (&lt;a href=&quot;http://jira.codehaus.org/browse/XFIRE-547&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jira.codehaus.org/browse/XFIRE-547&lt;/a&gt;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12395121">CXF-1564</key>
            <summary>ArrayType does not work correctly if isWriteOuter == false</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bmargulies">Benson Margulies</assignee>
                                    <reporter username="likanen">Harri Hohteri</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 May 2008 06:27:33 +0000</created>
                <updated>Thu, 3 Jul 2008 17:19:29 +0000</updated>
                            <resolved>Thu, 1 May 2008 15:11:40 +0000</resolved>
                                    <version>2.0</version>
                    <version>2.0.1</version>
                    <version>2.0.2</version>
                    <version>2.0.3</version>
                    <version>2.0.4</version>
                    <version>2.0.5</version>
                    <version>2.1</version>
                    <version>2.0.6</version>
                    <version>2.1.1</version>
                    <version>2.0.7</version>
                                    <fixVersion>2.1.1</fixVersion>
                                    <component>Aegis Databinding</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12593554" author="bmargulies" created="Thu, 1 May 2008 15:11:40 +0000"  >&lt;p&gt;I&apos;ve committed your fix, thanks. &lt;/p&gt;

&lt;p&gt;Can you tell me how to make a test case for this?&lt;/p&gt;</comment>
                            <comment id="12593560" author="likanen" created="Thu, 1 May 2008 15:57:50 +0000"  >&lt;p&gt;Perhaps testing that the message writer that is passed to the writeObject of ArrayType is not closed when control is returned from the writeObject?&lt;/p&gt;

&lt;p&gt;If I have understood the logic correctly, the isWriteOuter indicates if the type class wants to write the element tag itself or use the default element tag which would be one defined by the name attribute of @XmlType annotation in the mapped class or if that is not defined the simple class name.&lt;/p&gt;

</comment>
                            <comment id="12593564" author="bmargulies" created="Thu, 1 May 2008 16:26:50 +0000"  >&lt;p&gt;Do you have a snippet that ran into this problem? Otherwise, I&apos;ll work from your comment.&lt;/p&gt;</comment>
                            <comment id="12593584" author="likanen" created="Thu, 1 May 2008 17:11:11 +0000"  >&lt;p&gt;I think you are better off making it from scratch than trying to create a test case from my code.&lt;/p&gt;

&lt;p&gt;But something like this would do the trick:&lt;/p&gt;

&lt;p&gt;public class MyType extends Type {&lt;br/&gt;
  public boolean isWriteOuter() &lt;/p&gt;
{
    return true;
  }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;public class MockMessageWriter extends AbstractMessageWriter {&lt;br/&gt;
  boolean isClosed = false;&lt;br/&gt;
  public void close() &lt;/p&gt;
{
    super.close();
    isClosed = true;
  }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;public class ArrayTypeTest extends TestCase {&lt;br/&gt;
  public testCXF-1564() throws Exception &lt;/p&gt;
{
    ArrayType type = new ArrayType();
    MockMessageWriter writer = new MockMessageWriter();
    type.writeValue(new Object(), writer, null, type, &quot;MyType&quot;, &quot;http://cxf.apache.org/test&quot;)
    assertFalse(&quot;type should not close writer of the parent&quot;, writer.isClosed());
  }
&lt;p&gt;}&lt;/p&gt;

</comment>
                            <comment id="12595284" author="likanen" created="Thu, 8 May 2008 15:32:23 +0000"  >&lt;p&gt;Could this be fixed also in the 2.0.x branch?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>112356</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 29 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1abxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>268399</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>