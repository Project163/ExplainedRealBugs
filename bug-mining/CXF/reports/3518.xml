<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:35:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5216] WSDL definition cache issue for web service client when WSDL in service war changed</title>
                <link>https://issues.apache.org/jira/browse/CXF-5216</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;In current design, the WSDL definition will be cached in case the the same wsdl will be queried later.(WSDLManagerImpl.getDefinition)&lt;br/&gt;
e.g.&lt;br/&gt;
    public Definition getDefinition(String url) throws WSDLException {&lt;br/&gt;
        synchronized (definitionsMap) {&lt;br/&gt;
            if (definitionsMap.containsKey(url)) &lt;/p&gt;
{
                return definitionsMap.get(url);
            }
&lt;p&gt;        }&lt;br/&gt;
        return loadDefinition(url);&lt;br/&gt;
    }&lt;br/&gt;
The cache mechanism indeed improves the performance in most scenarios. But if the WSDL file in service provider app changed, the client will not get the correct WSDL definition even using retrieves the wsdl from server dynamically (&lt;a href=&quot;http://hostname:portname/xxx?wsdl),unless&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hostname:portname/xxx?wsdl),unless&lt;/a&gt; restarting the client app.&lt;br/&gt;
It would be more reasonable to introduce a client property to allow user to disable the definition cache so that they can choose if they get WSDL definition from cache or the URL dynamically for their scenarios. Any thoughts? Thanks.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12664304">CXF-5216</key>
            <summary>WSDL definition cache issue for web service client when WSDL in service war changed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="coheigea">Colm O hEigeartaigh</assignee>
                                    <reporter username="zhubinbj">Bin Zhu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Aug 2013 06:31:34 +0000</created>
                <updated>Wed, 22 Dec 2021 20:43:47 +0000</updated>
                            <resolved>Tue, 5 May 2020 09:07:46 +0000</resolved>
                                    <version>2.6.2</version>
                                    <fixVersion>3.3.7</fixVersion>
                    <fixVersion>3.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="13744674" author="ffang" created="Tue, 20 Aug 2013 03:53:40 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;FYI, actually you needn&apos;t restart your client, you can use code like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;getBus().getExtension(WSDLManager.class).removeDefinition(definition); 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to remove the wsdl definition from the cache if you know the wsdl actually get changed.&lt;/p&gt;

&lt;p&gt;As this simple code should work, not really sure we need introduce an extra property to disable the wsdl cache.&lt;br/&gt;
And I always use this way if I don&apos;t wanna a wsdl cache, especially when the endpoint is in some container where a restart isn&apos;t doable.&lt;/p&gt;

&lt;p&gt;HTH&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;</comment>
                            <comment id="13744723" author="zhubinbj" created="Tue, 20 Aug 2013 05:31:32 +0000"  >&lt;p&gt;Thanks Freeman for the clue.&lt;br/&gt;
In client side, it doesn&apos;t know when the WSDL will be changed before the error thrown.&lt;br/&gt;
So I guess I need to clear the cache each time before invoke the client code.&lt;br/&gt;
If there is only a URL for the WSDL in client side, then how can I build the Definition for it? maybe getBus().getExtension(WSDLManager.class)getDefinition(url)? If so, the code will be like bus.getExtension(WSDLManager.class).removeDefinition(bus.getExtension(WSDLManager.class).getDefinition(url)); right?&lt;/p&gt;</comment>
                            <comment id="13744726" author="zhubinbj" created="Tue, 20 Aug 2013 05:43:25 +0000"  >&lt;p&gt;If so the WSDL will be loaded 2 twice, no matter the cache exists or not. Then I would like to add a removeDefinition(String url) in WSDLManagerImpl. Then user can delete the WSDL defination using the URL without getDefination additionally.&lt;/p&gt;</comment>
                            <comment id="13744740" author="ffang" created="Tue, 20 Aug 2013 06:07:55 +0000"  >&lt;p&gt;No, using code like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;bus.getExtension(WSDLManager.class).removeDefinition(bus.getExtension(WSDLManager.class).getDefinition(url));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the wsdl would be loaded at most once, or zero if it&apos;s already in the cache. And you actually can check if it&apos;s already in the cache, as the WSDLManager has API like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, Definition&amp;gt; getDefinitions()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Freeman&lt;/p&gt;</comment>
                            <comment id="13744765" author="ffang" created="Tue, 20 Aug 2013 07:21:50 +0000"  >&lt;p&gt;Per Bin Zhu last reply in mail list, the solution here works for him so I will close this issue.&lt;/p&gt;</comment>
                            <comment id="15326094" author="techmani.official" created="Sun, 12 Jun 2016 00:10:15 +0000"  >&lt;p&gt;Hi Freeman,&lt;/p&gt;

&lt;p&gt;I am using like below, but it doesnot work, Can you please help&lt;/p&gt;

&lt;p&gt;try {&lt;br/&gt;
Bus bus = BusFactory.getDefaultBus();&lt;br/&gt;
Map&amp;lt;Object, Definition&amp;gt; definitions = bus.getExtension(WSDLManagerImpl.class).getDefinitions();&lt;/p&gt;

&lt;p&gt;if(!definitions.isEmpty()){&lt;br/&gt;
for (Map.Entry&amp;lt;Object, Definition&amp;gt; entry : definitions.entrySet()) &lt;/p&gt;
{
  LOGGER.info(&quot;Key : &quot; + entry.getKey() + &quot; Value : &quot; + entry.getValue());
}

Definition extensionDefinition = bus.getExtension(WSDLManagerImpl.class).getDefinition(endPointUrl);
bus.getExtension(WSDLManager.class).removeDefinition(bus.getExtension(WSDLManager.class).getDefinition(endPointUrl));

}
&lt;p&gt;else&lt;/p&gt;
{
LOGGER.info(&quot;No WSDL Definitions available for - &quot; + endPointUrl);
}

}
&lt;p&gt; catch (Exception excep) {&lt;br/&gt;
LOGGER.error(&quot;Error while getting WSDL Definitions: &quot;, excep);          &lt;br/&gt;
}&lt;/p&gt;</comment>
                            <comment id="17099268" author="rvadakkan" created="Mon, 4 May 2020 19:10:22 +0000"  >&lt;p&gt;Can this please be revisited?&#160;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;bus.getExtension(WSDLManager.class).removeDefinition(bus.getExtension(WSDLManager.class).getDefinition(url));&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;As was previously noted, WSDLManager.getDefinition either gets a definition from its cache or loads it from the URL. This means that for a new URL that isn&apos;t in the cache, it needs to be loaded twice from the URL - once for removal (a waste), and then later when it really needs to load.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12598913" name="CXF-5216-2.patch" size="413" author="zhubinbj" created="Tue, 20 Aug 2013 06:06:21 +0000"/>
                            <attachment id="12598908" name="CXF-5216.patch" size="441" author="zhubinbj" created="Tue, 20 Aug 2013 05:50:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>344305</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ndj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>344605</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>