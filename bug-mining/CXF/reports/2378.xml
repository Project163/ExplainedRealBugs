<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:11:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6015] Path parameters containing semicolon are truncated due to missing encoding</title>
                <link>https://issues.apache.org/jira/browse/CXF-6015</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;If a REST service uses path parameters, these parameters must not contain any semicolon as the parameter value gets truncated after the semicolon by many runtime environments. For that reason especially the semicolon should be encoded while building the client proxy.&lt;/p&gt;

&lt;p&gt;I pinned this issue down to the usage of &lt;tt&gt;org.apache.cxf.jaxrs.utils.HttpUtils.pathEncode(String)&lt;/tt&gt; during the creation of the request URI. Path parameters are encoded using a fixed list of characters (&lt;tt&gt;=@/:!$&amp;amp;\&apos;(),;~&lt;/tt&gt;) that are preserved in &lt;tt&gt;pathEncode(String)&lt;/tt&gt;. While this is fine/needed for encoding a complete path it leads to problems if used for encoding single elements of a path like path parameters.&lt;/p&gt;

&lt;p&gt;Attached you&apos;ll find a minimal example project containing a simple REST service that returns the provided path parameters. If deployed on localhost:8080, a call to &lt;tt&gt;&lt;a href=&quot;http://localhost:8080/cxf-test-service-0.1/cxf-test/R&amp;uuml;diger/R&amp;amp;uuml%3Bdiger&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/cxf-test-service-0.1/cxf-test/R&amp;amp;uuml;diger/R&amp;amp;uuml%3Bdiger&lt;/a&gt;&lt;/tt&gt; will result in &lt;tt&gt;anAttribute=R&amp;amp;uuml, anotherAttribute=R&amp;amp;uuml;diger&lt;/tt&gt; to be returned.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Apache Tomcat / 7.0.54&lt;br/&gt;
Eclipse Jetty / 9.2.2&lt;/p&gt;</environment>
        <key id="12742689">CXF-6015</key>
            <summary>Path parameters containing semicolon are truncated due to missing encoding</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="daniel@peger.de">Daniel H. Peger</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Sep 2014 10:05:02 +0000</created>
                <updated>Fri, 4 Aug 2017 02:15:55 +0000</updated>
                            <resolved>Wed, 24 Sep 2014 15:56:52 +0000</resolved>
                                    <version>2.7.12</version>
                    <version>3.0.1</version>
                                    <fixVersion>2.7.13</fixVersion>
                    <fixVersion>3.0.2</fixVersion>
                    <fixVersion>3.1</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14140298" author="sergey_beryozkin" created="Fri, 19 Sep 2014 10:36:24 +0000"  >&lt;p&gt;Hi, the issue is invalid. A single path segment can have non-encoded &apos;;&apos; characters. UriBuilder.path methods to which the proxy delegates expect it. If you need &apos;;&apos; encoded - encode a given path value first (with UriBuilder or UrlEncoder) and then set it. &lt;/p&gt;</comment>
                            <comment id="14140441" author="daniel@peger.de" created="Fri, 19 Sep 2014 13:05:32 +0000"  >&lt;p&gt;Of course you&apos;re right &apos;;&apos; is a valid character in a path and does not necessarily need to be escaped. But If I use a ClientProxy and call the service via its interface, I probably don&apos;t want to escape my parameters as I don&apos;t have any knowledge (or at least &lt;em&gt;should not rely on any knowledge&lt;/em&gt;) of the underlying implementation.&lt;/p&gt;

&lt;p&gt;That is given the following client code&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    DummyService service = JAXRSClientFactory.create(
        &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:9090/cxf-test-service-0.1/cxf-test&quot;&lt;/span&gt;,
&lt;/span&gt;        DummyService.class);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(service.getAttributes(&lt;span class=&quot;code-quote&quot;&gt;&quot;R&amp;amp;uml;diger&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;R&amp;amp;uml%3Bdiger&quot;&lt;/span&gt;));
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I would expect that the implementation of the service is called with the two parameters &lt;tt&gt;R&amp;amp;uml;diger&lt;/tt&gt; and &lt;tt&gt;R&amp;amp;uml%3Bdiger&lt;/tt&gt;. Currently the implementation receives &lt;tt&gt;R&amp;amp;uml&lt;/tt&gt; and &lt;tt&gt;R&amp;amp;uml;diger&lt;/tt&gt; which I think is very confusing.&lt;/p&gt;

&lt;p&gt;Perhaps a property could be introduced to customize the encoding of the path parameters similar to the &quot;search.decode.values&quot; property that is available for FIQL queries (&lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6002&quot; title=&quot;escape special characters (comma, semicolon) in FIQL search expression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6002&quot;&gt;&lt;del&gt;CXF-6002&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I adapted the attached zip to contain both service and client implementation.&lt;/p&gt;</comment>
                            <comment id="14140449" author="sergey_beryozkin" created="Fri, 19 Sep 2014 13:17:14 +0000"  >&lt;p&gt;It is not Tomcat or Jetty that strips &quot;;digger&quot; but the JAX-RS server runtime, because &apos;digger&apos; becomes a matrix parameter without a value.&lt;br/&gt;
As I said, UriBuilder.path is expected to accept path values with matrix parameters, so it can not be encoded by default.&lt;br/&gt;
May be a property can be introduced, &quot;url.encode.client.parameters&quot;...Actually, there&apos;s a better way, register custom JAX-RS 2.0 ParamConverter for String and do the URL encoding there, that should work, give it a try please&lt;/p&gt;</comment>
                            <comment id="14140459" author="daniel@peger.de" created="Fri, 19 Sep 2014 13:24:00 +0000"  >&lt;p&gt;Actually it is tomcat that strips the &quot;;digger&quot; while trying to extract the matrix parameters from the request URL.&lt;/p&gt;

&lt;p&gt;In the provided example I don&apos;t want to care about matrix, path or query parameters. I simply pass a value to a service method on client side and I expect the same value to be received on the service side.&lt;/p&gt;

&lt;p&gt;I&apos;ll have a look at the ParamConverter you mentioned&lt;/p&gt;</comment>
                            <comment id="14140636" author="sergey_beryozkin" created="Fri, 19 Sep 2014 14:20:30 +0000"  >&lt;p&gt;Client proxy converts the parameters according to JAX-RS rules. It has no idea what the developer&apos;s expectations are. There could be a &apos;conflict&apos; but the JAX-RS rules win when the ambiguity occurs - there&apos;s no guarantee a client proxy will competely abstract the developer from the JAX-RS/HTTP realities.&lt;br/&gt;
Besides the proxy has no idea how the target server is impemented. It may not even be a JAX-RS server. And if it is a JAX-RS server then given the method signature in your example, a custom service may have UriInfo injected and use it to check PathSegments and get to matrix parameters. &lt;/p&gt;

&lt;p&gt;Tomcat can be configured to keep &apos;;&apos;, without it it would have services explicitly working with Matrix parameters broken.&lt;/p&gt;</comment>
                            <comment id="14140653" author="sergey_beryozkin" created="Fri, 19 Sep 2014 14:36:55 +0000"  >&lt;p&gt;The String converter can be registered by default if a new property is set, to minimize the effort for the developer, please confirm using the converter works, and I&apos;ll deal with the optimization&lt;/p&gt;</comment>
                            <comment id="14144582" author="daniel@peger.de" created="Tue, 23 Sep 2014 09:15:01 +0000"  >&lt;p&gt;I tried to use a ParamConverter and it worked in the example project I provided above (I just updated to attachment to contain the respective sources). However the ParamConverter is not used when autowiring the services together in our production environment. Perhaps this is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-5988&quot; title=&quot;Provide support for a pluggable parameter conversion mechanism for JAX-RS client side proxies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-5988&quot;&gt;&lt;del&gt;CXF-5988&lt;/del&gt;&lt;/a&gt;??&lt;/p&gt;

&lt;p&gt;Nevertheless I think, that a semicolon needs to be escaped when being passed as part of a path parameter. I skimmed through the JAX-RS 2.0 spec and found nothing specific about URL parameter conversion but only references to RFC3986. This RFC describes how valid URIs are build. Especially sections 2.2 and 2.4 are of interest regarding this ticket.&lt;/p&gt;

&lt;p&gt;In section 2.2 RFC3986 states:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If data for a URI component would conflict with a reserved character&#8217;s purpose as a delimiter, then the conflicting data must be percent-encoded before the URI is formed.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;reserved = gen-delims / sub-delims
gen-delims = &quot;:&quot; / &quot;/&quot; / &quot;?&quot; / &quot;#&quot; / &quot;[&quot; / &quot;]&quot; / &quot;@&quot;
sub-delims = &quot;!&quot; / &quot;$&quot; / &quot;&amp;amp;&quot; / &quot;&#8217;&quot; / &quot;(&quot; / &quot;)&quot; / &quot;*&quot; / &quot;+&quot; / &quot;,&quot; / &quot;;&quot; / &quot;=&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;And section 2.4 (When to Encode or Decode) says:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Under normal circumstances, the only time when octets within a URI are percent-encoded is during the process of producing the URI from its component parts. This is when an implementation determines which of the reserved characters are to be used as subcomponent delimiters and which can be safely used as data. Once produced, a URI is always in its percent-encoded form.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Given this specification I would think the CXF ClientProxy needs to percent encode all reserved characters that are part of a path, matrix or query parameter value when building the request URI as it is the only part of the code that knows about the semantic of the different parts of the composed URI.&lt;/p&gt;</comment>
                            <comment id="14144649" author="sergey_beryozkin" created="Tue, 23 Sep 2014 10:46:34 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;URI u2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(&lt;span class=&quot;code-quote&quot;&gt;&quot;http&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;localhost&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;/path;:a=2&quot;&lt;/span&gt;, &quot;&quot;);
&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(u2.toString());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;prints a non-encoded &apos;;&apos;. &lt;/p&gt;</comment>
                            <comment id="14144650" author="sergey_beryozkin" created="Tue, 23 Sep 2014 10:49:27 +0000"  >&lt;p&gt;That was not a good example. But either way it is application specific whether &apos;;&apos; needs to be encoded or not inside a given path component &lt;/p&gt;</comment>
                            <comment id="14144651" author="sergey_beryozkin" created="Tue, 23 Sep 2014 10:51:35 +0000"  >&lt;p&gt;A better example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;URI u2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(&lt;span class=&quot;code-quote&quot;&gt;&quot;http&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;localhost&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;/path;: a=2&quot;&lt;/span&gt;, &quot;&quot;);
&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(u2.toURL().getPath());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;prints &quot;/path;:%20a=2&quot;&lt;/p&gt;</comment>
                            <comment id="14144686" author="daniel@peger.de" created="Tue, 23 Sep 2014 11:27:06 +0000"  >&lt;p&gt;Probably the &lt;tt&gt;java.net.URI&lt;/tt&gt; class is not a very good example as the RFC2396 that is referenced in the Javadocs of the &lt;tt&gt;java.net.URI&lt;/tt&gt; constructors is obsoleted by the already mentioned RFC3986 that describes valid URIs for JAX-RS 2.0 (JSR339).&lt;/p&gt;</comment>
                            <comment id="14144688" author="sergey_beryozkin" created="Tue, 23 Sep 2014 11:31:08 +0000"  >&lt;p&gt;RFC2396 has pretty much the same text re encoding the characters. Either way, the proxy can not encode &apos;;&apos; by default and I will deal with the optional auto-registering of URL encoding ParamConverters&lt;/p&gt;</comment>
                            <comment id="14144694" author="sergey_beryozkin" created="Tue, 23 Sep 2014 11:40:44 +0000"  >&lt;p&gt;And once again, in the JAX-RS land it is UriBuilder class that deals with the URI construction, not CXF Client Proxy API. &lt;/p&gt;</comment>
                            <comment id="14146452" author="sergey_beryozkin" created="Wed, 24 Sep 2014 15:55:51 +0000"  >&lt;p&gt;Daniel, I&apos;ve done some work on this issue.&lt;br/&gt;
Setting a boolean true property &quot;url.encode.client.parameters&quot; will auto register a param converter converting all the String parameter values. Additionally setting a &quot;url.encode.client.parameters.list&quot; String property such as &quot;;&quot; or &quot;; : /&quot; will encode specific characters only.&lt;br/&gt;
This is the best we can do. I&apos;ve tested a Jersey client and checked how it deals with JAX-RS 2.0 WebTarget.path() calls and it is consistent with the way CXF does it.&lt;br/&gt;
I agree non-encoding &apos;;&apos; by default can have unexpected surprises but CXF needs to stay compliant with respect to how UriBuilder treats path segments.&lt;/p&gt;

</comment>
                            <comment id="14147720" author="daniel@peger.de" created="Thu, 25 Sep 2014 13:17:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergey_beryozkin&quot; class=&quot;user-hover&quot; rel=&quot;sergey_beryozkin&quot;&gt;sergey_beryozkin&lt;/a&gt; thanks for taking care of this issue!&lt;/p&gt;

&lt;p&gt;Will all String parameters be escaped if &lt;tt&gt;url.encode.client.parameters&lt;/tt&gt; is set to &lt;tt&gt;true&lt;/tt&gt; including &lt;tt&gt;@HeaderParam&lt;/tt&gt;? I think this problem is not valid for &lt;tt&gt;HeaderParams&lt;/tt&gt; as these parameters don&apos;t need to be encoded/decoded and will not be decoded automatically in the JAX-RS service.&lt;/p&gt;</comment>
                            <comment id="14147741" author="sergey_beryozkin" created="Thu, 25 Sep 2014 13:40:06 +0000"  >&lt;p&gt;Right, all parameter values would be URL encoded, in most cases it won&apos;t have side-effects, and I guess a chance of a path and header parameters having both &apos;;&apos; or some other similar character at the same time is low. However it would make sense to optionally limit it to specific parameter types...I guess we&apos;d need one extra property, I&apos;ll experiment &lt;/p&gt;</comment>
                            <comment id="14161765" author="sergey_beryozkin" created="Tue, 7 Oct 2014 11:10:28 +0000"  >&lt;p&gt;I&apos;ve excluded HeaderParam and CookieParam from being covered by this optional url-encoder provider for now rather than introducing a new variable.  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12670672" name="cxf-test.zip" size="72262" author="dpr" created="Tue, 23 Sep 2014 09:16:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i208zb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>