<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:21:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7087] Getting the wsdl from a cxf webservice with custom XMLOuputFactory throws an exception</title>
                <link>https://issues.apache.org/jira/browse/CXF-7087</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I defined a service endpoint with a custom XmlOutputFactory&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&amp;lt;jaxws:endpoint id=&lt;span class=&quot;code-quote&quot;&gt;&quot;myWebService&quot;&lt;/span&gt; implementorClass=&lt;span class=&quot;code-quote&quot;&gt;&quot;a.b.c.MyService&quot;&lt;/span&gt;
        implementor=&lt;span class=&quot;code-quote&quot;&gt;&quot;#Mybean&quot;&lt;/span&gt; address=&lt;span class=&quot;code-quote&quot;&gt;&quot;/myService&quot;&lt;/span&gt;&amp;gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;jaxws:properties&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;javax.xml.XMLOutputFactory&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ref bean=&lt;span class=&quot;code-quote&quot;&gt;&quot;invalidCharacterReplacingXmlOutputFactory&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/entry&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/jaxws:properties&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/jaxws:endpoint&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When Using the WSDLGetOutInterceptor, I get the following error;&lt;br/&gt;
Can not output XML declaration, after other output has already been done.&lt;br/&gt;
The StaxOutputInterceptor sets the flag FORCE_START_DOCUMENT to true when using a custom xmlOutputFacory, then writes the prolog. The WSDLGetOutInterceptor writes it again and throws the exception.&lt;/p&gt;

&lt;p&gt;This was supposed to be fixed with commit 25f0eb7f955a84baf6c3b634ff316cb831a2acfa, with version 3.3 if I&apos;m correct(changed class: WSDLGetOutInterceptor, commit message: Write the prolog only if it hasn&apos;t already been written). But I think the change is not correct:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-            StaxUtils.writeNode(doc, writer, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
+            StaxUtils.writeDocument(doc, writer, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,
+                                    !MessageUtils.getContextualBoolean(message, 
+                                                                       StaxOutInterceptor.FORCE_START_DOCUMENT, 
+                                                                       &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Knowing that the signature of StaxUtils.writeDocument is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void writeDocument(Document d, XMLStreamWriter writer, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; writeProlog,  &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; repairing)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That means that the boolean reparing depends on the flag FORCE_START_DOCUMENT from version 3.3, whereas the boolean writeProlog is always true ! To me, it seems like the two parameters have been swapped.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13011917">CXF-7087</key>
            <summary>Getting the wsdl from a cxf webservice with custom XMLOuputFactory throws an exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="guillaume.pansier">Guillaume Pansier</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Oct 2016 07:46:25 +0000</created>
                <updated>Fri, 21 Oct 2016 18:46:12 +0000</updated>
                            <resolved>Thu, 13 Oct 2016 12:39:40 +0000</resolved>
                                                    <fixVersion>3.1.8</fixVersion>
                    <fixVersion>3.0.11</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15571744" author="necoro" created="Thu, 13 Oct 2016 12:14:40 +0000"  >&lt;p&gt;The issue does not require a custom XMLOutputFactory. Simply setting FORCE_START_DOCUMENT for an endpoint and then trying to access the WSDL triggers the same problem.&lt;/p&gt;

&lt;p&gt;As pointed out by Guillaume, the swapped parameters are the culprit. &lt;/p&gt;

&lt;p&gt;The real problem here is probably the strange API offering&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void writeDocument(Document d, XMLStreamWriter writer, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; writeProlog,  &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; repairing)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void writeDocument(Document d, XMLStreamWriter writer, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; repairing)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;That is, making an argument optional that is not the last, thereby betraying the expectation that one can go from short version to the long one by simply adding the defaulted paramater.&lt;/p&gt;

&lt;p&gt;Unfortunately, I doubt the API can be changed now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15571799" author="sergey_beryozkin" created="Thu, 13 Oct 2016 12:39:40 +0000"  >&lt;p&gt;Thanks for spotting this typo&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 5 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34tlz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>