<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:05:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5354] faultTo address is ignored when fault is thrown</title>
                <link>https://issues.apache.org/jira/browse/CXF-5354</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I have a Provider based service and find that with WS-Addressing enabled, it doesn&apos;t handle FaultTo addresses properly.  The case I found that caused this is when I turned on Schema Validation and sent a request that doesn&apos;t match the schema, then it throws a fault but instead sends the reply to the replyTo address.  I then tried using a bogus mustUnderstand header to cause a fault to see if it was just related to the schema validation, but it has the same problem.&lt;/p&gt;

&lt;p&gt;Here&apos;s a sample request message to cause this (using mustUnderstand header so you don&apos;t have to setup schema validation to test):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;?&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;soap:Envelope &lt;span class=&quot;code-keyword&quot;&gt;xmlns:soap&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2003/05/soap-envelope&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;soap:Header&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Action xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2005/08/addressing&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;anything&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Action&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;MessageID xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2005/08/addressing&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;urn:uuid:2eae8433-d42a-4749-b053-f5b5805fe8e9&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/MessageID&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;To xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2005/08/addressing&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;http://localhost:9003/xdsregistryb&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/To&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ReplyTo xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2005/08/addressing&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Address&amp;gt;&lt;/span&gt;http://localhost:9003/replyBack&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Address&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ReplyTo&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;FaultTo xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2005/08/addressing&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Address&amp;gt;&lt;/span&gt;http://localhost:9003/faultBack&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Address&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/FaultTo&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;bogus soap:mustUnderstand=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;this junk will fault&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/bogus&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/soap:Header&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;soap:Body&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;junk/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/soap:Body&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/soap:Envelope&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note the ReplyTo is &lt;a href=&quot;http://localhost:9003/replyBack&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9003/replyBack&lt;/a&gt; and the FaultTo is &lt;a href=&quot;http://localhost:9003/faultBack&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9003/faultBack&lt;/a&gt;.  When I send to my Provider service, the log file shows the response going to the replyBack url, but the To address in WS-Addressing header shows the faultBack url- so it&apos;s halfway right!  This is the case with both schema validation faults and the above example of bogus mustUnderstand header.&lt;/p&gt;

&lt;p&gt;Here&apos;s the Wireshark network trace (so there is no possibility of bad logging being the issue):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;POST /replyBack HTTP/1.1&lt;br/&gt;
Content-Type: application/soap+xml; charset=UTF-8&lt;br/&gt;
Accept: &lt;b&gt;/&lt;/b&gt;&lt;br/&gt;
User-Agent: Apache CXF 2.7.7&lt;br/&gt;
Cache-Control: no-cache&lt;br/&gt;
Pragma: no-cache&lt;br/&gt;
Host: localhost:9003&lt;br/&gt;
Connection: keep-alive&lt;br/&gt;
Content-Length: 706&lt;/p&gt;

&lt;p&gt;&amp;lt;soap:Envelope xmlns:soap=&quot;http://www.w3.org/2003/05/soap-envelope&quot;&amp;gt;&amp;lt;soap:Header&amp;gt;&amp;lt;Action xmlns=&quot;http://www.w3.org/2005/08/addressing&quot;/&amp;gt;&amp;lt;MessageID xmlns=&quot;http://www.w3.org/2005/08/addressing&quot;&amp;gt;urn:uuid:6a5190fc-256f-428c-9e5e-8b79520bbf0c&amp;lt;/MessageID&amp;gt;&amp;lt;To xmlns=&quot;http://www.w3.org/2005/08/addressing&quot;&amp;gt;&lt;a href=&quot;http://localhost:9003/faultBack&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9003/faultBack&lt;/a&gt;&amp;lt;/To&amp;gt;&amp;lt;RelatesTo xmlns=&quot;http://www.w3.org/2005/08/addressing&quot;&amp;gt;urn:uuid:2eae8433-d42a-4749-b053-f5b5805fe8e9&amp;lt;/RelatesTo&amp;gt;&amp;lt;/soap:Header&amp;gt;&amp;lt;soap:Body&amp;gt;&amp;lt;soap:Fault&amp;gt;&amp;lt;soap:Code&amp;gt;&amp;lt;soap:Value&amp;gt;soap:MustUnderstand&amp;lt;/soap:Value&amp;gt;&amp;lt;/soap:Code&amp;gt;&amp;lt;soap:Reason&amp;gt;&amp;lt;soap:Text xml:lang=&quot;en&quot;&amp;gt;MustUnderstand headers: &lt;span class=&quot;error&quot;&gt;&amp;#91;bogus&amp;#93;&lt;/span&gt; are not understood.&amp;lt;/soap:Text&amp;gt;&amp;lt;/soap:Reason&amp;gt;&amp;lt;/soap:Fault&amp;gt;&amp;lt;/soap:Body&amp;gt;&amp;lt;/soap:Envelope&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry, wiki markup is making bogus in red, not intentional.  See how the address listed at the top doesn&apos;t match the WS-Addressing To address?  With anonymous replyTo address then you get the fault back on the same synchronous request channel, and it still shows the /faultBack url in the To address.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12675175">CXF-5354</key>
            <summary>faultTo address is ignored when fault is thrown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="jpangburn">Jesse Pangburn</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Oct 2013 02:21:27 +0000</created>
                <updated>Tue, 26 Nov 2013 17:40:09 +0000</updated>
                            <resolved>Thu, 24 Oct 2013 18:15:07 +0000</resolved>
                                    <version>2.7.7</version>
                                    <fixVersion>2.7.8</fixVersion>
                    <fixVersion>2.6.11</fixVersion>
                                    <component>WS-* Components</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13802531" author="jpangburn" created="Wed, 23 Oct 2013 02:22:39 +0000"  >&lt;p&gt;Issue 4382 indicates this should work, but at least in these cases listed it does not.&lt;/p&gt;</comment>
                            <comment id="13803298" author="dkulp" created="Wed, 23 Oct 2013 20:43:24 +0000"  >&lt;p&gt;I think I need a full testcase for this.  If I use curl to post your message one of the Addressing endpoints, I get:&lt;/p&gt;

&lt;p&gt;Caused by: java.net.ConnectException: ConnectException invoking &lt;a href=&quot;http://localhost:9003/faultBack:&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9003/faultBack:&lt;/a&gt; Connection refused&lt;/p&gt;

&lt;p&gt;printed to the console which makes sense considering I don&apos;t have anything running there.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;    A few other tests does seem to show that the faults are going to the faultTo.&lt;/p&gt;
</comment>
                            <comment id="13803572" author="jpangburn" created="Wed, 23 Oct 2013 23:57:15 +0000"  >&lt;p&gt;See attachment for a modification of the 2.7.6 jaxws_dispatch_provider sample (first noticed the problem on my 2.7.7 installation, so used an older 2.7.6 installation to make sure it wasn&apos;t a problem specific to 2.7.7) to illustrate the problem.  To run it, open a terminal and execute:&lt;br/&gt;
mvn -P server&lt;br/&gt;
Then open another terminal and execute:&lt;br/&gt;
mvn -P client&lt;/p&gt;

&lt;p&gt;The client requests a replyTo at one URL and a faultTo at another.  There&apos;s nothing actually listening on these URLs but they are on the same port (9000) that the server is listening on, so in the server output you see:&lt;br/&gt;
org.apache.cxf.transport.http.HTTPException: HTTP response &apos;404: Not Found&apos; when communicating with &lt;a href=&quot;http://localhost:9000/replyBack&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9000/replyBack&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This is where it&apos;s trying to send the fault- to the replyTo address instead of the faultTo address.&lt;/p&gt;</comment>
                            <comment id="13804492" author="dkulp" created="Thu, 24 Oct 2013 18:15:07 +0000"  >&lt;p&gt;This should now be fixed.   Can you give it a try when you get a chance?&lt;/p&gt;</comment>
                            <comment id="13804783" author="jpangburn" created="Thu, 24 Oct 2013 22:55:45 +0000"  >&lt;p&gt;I ran the test module and it was successful.  I also ran it in my own system where I initially found the problem and verified that faults (from a couple different causes) are sent back to the faultTo address, and successful replies are sent to the replyTo (whether using anonymous or a callback URL).  Looks all good to me, thanks for the super quick fix Dan!!!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12560709">CXF-4382</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12609959" name="jaxws_dispatch_provider_test_faultto.zip" size="9383" author="jpangburn" created="Wed, 23 Oct 2013 23:57:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>354795</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 4 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1p607:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>355084</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>