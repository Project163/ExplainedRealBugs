<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:39:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-8669] Multipart annotation not working 3.4.6 onwards.</title>
                <link>https://issues.apache.org/jira/browse/CXF-8669</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Hello Team,&lt;br/&gt;
I have following API declaration&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@POST
    @Path(&lt;span class=&quot;code-quote&quot;&gt;&quot;/{configurationName}.diff&quot;&lt;/span&gt;)
    @Consumes(MediaType.MULTIPART_FORM_DATA)
    @Produces({MediaType.APPLICATION_JSON})
    ConfigurationDiffDTO diff(@PathParam(&lt;span class=&quot;code-quote&quot;&gt;&quot;configurationName&quot;&lt;/span&gt;) &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; configurationName,
        @Multipart(value = &lt;span class=&quot;code-quote&quot;&gt;&quot;fromRev&quot;&lt;/span&gt;, required = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;) &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; fromRev, @Multipart(value = &lt;span class=&quot;code-quote&quot;&gt;&quot;toRev&quot;&lt;/span&gt;, required = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;) &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; toRev, @Multipart(value = &lt;span class=&quot;code-quote&quot;&gt;&quot;file&quot;&lt;/span&gt;, required = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;) Attachment file);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Above declaration works fine till 3.4.5 , after I upgraded to 3.5.0 (even 3.4.6) , multipart form values (fromRev and toRev) they are coming as null. &lt;br/&gt;
Is it a regression?&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13431624">CXF-8669</key>
            <summary>Multipart annotation not working 3.4.6 onwards.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="reta">Andriy Redko</assignee>
                                    <reporter username="rana9018">Abhishek Rana</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Mar 2022 05:50:23 +0000</created>
                <updated>Mon, 23 Oct 2023 01:36:41 +0000</updated>
                            <resolved>Sat, 4 Mar 2023 22:28:19 +0000</resolved>
                                    <version>3.4.6</version>
                    <version>3.5.5</version>
                                    <fixVersion>3.6.0</fixVersion>
                    <fixVersion>4.0.1</fixVersion>
                    <fixVersion>3.5.6</fixVersion>
                    <fixVersion>3.4.11</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17522288" author="JIRAUSER288052" created="Thu, 14 Apr 2022 13:00:36 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I&apos;m facing the exactly same problem. Also with Long parameters.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@POST
@Path(&lt;span class=&quot;code-quote&quot;&gt;&quot;/createPieces&quot;&lt;/span&gt;)
@Consumes(MediaType.MULTIPART_FORM_DATA)
@Produces(MediaType.APPLICATION_JSON)
Response createPieces(List&amp;lt;Attachment&amp;gt; attachments, @Multipart(&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;) &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; id, @Multipart(&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;) &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; type, @Multipart(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;) &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; BaseException; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here, &lt;b&gt;id&lt;/b&gt; is &lt;em&gt;null&lt;/em&gt;, &lt;b&gt;type&lt;/b&gt; and &lt;b&gt;name&lt;/b&gt; are &lt;em&gt;non null&lt;/em&gt;.&lt;/p&gt;</comment>
                            <comment id="17647599" author="JIRAUSER288052" created="Wed, 14 Dec 2022 16:36:10 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I investigated a lot this bug.&lt;/p&gt;

&lt;p&gt;In version &lt;ins&gt;3.4.3&lt;/ins&gt;, for &lt;b&gt;Long&lt;/b&gt; parameter, &lt;b&gt;org.apache.cxf.jaxrs.ext.multipart.&lt;em&gt;Attachment#getContentType()&lt;/em&gt;&lt;/b&gt;&#160;returns &lt;em&gt;MediaType.TEXT_PLAIN_TYPE&lt;/em&gt; because&lt;br/&gt;
&lt;b&gt;org.apache.cxf.attachment.AttachmentDataSource.&lt;/b&gt;&lt;b&gt;getContentType()&lt;/b&gt; also return &quot;null&quot;.&lt;br/&gt;
So &quot;&lt;em&gt;text/plain&quot;&lt;/em&gt; parameters are handled by &lt;b&gt;PrimitiveTextProvider&lt;/b&gt; and then converted to &lt;b&gt;long&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;In version &lt;ins&gt;3.5.5&lt;/ins&gt;, there is a change in &lt;b&gt;org.apache.cxf.attachment.AttachmentDataSource.&lt;/b&gt;&lt;b&gt;getContentType()&lt;/b&gt;&#160;returning a default &lt;em&gt;&quot;&lt;/em&gt;&lt;em&gt;application/octet-stream&quot;&lt;/em&gt; content type (maybe due too this commit :&#160;&lt;a href=&quot;https://github.com/apache/cxf/commit/d27ad0157e49fdd601f702823155ff813880de5b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/commit/d27ad0157e49fdd601f702823155ff813880de5b)&lt;/a&gt;&lt;br/&gt;
There is no &lt;b&gt;MessageBodyReader&lt;/b&gt; implementation to handle &lt;em&gt;application/octet-stream&lt;/em&gt;, so parameter is not converted and this result to &quot;&lt;em&gt;null&lt;/em&gt;&quot; value.&lt;br/&gt;
&#160;&lt;br/&gt;
Hope this helps&lt;/p&gt;</comment>
                            <comment id="17647802" author="reta" created="Thu, 15 Dec 2022 02:27:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echatellier&quot; class=&quot;user-hover&quot; rel=&quot;echatellier&quot;&gt;echatellier&lt;/a&gt; thank you very much for such in-depth investigation and pin-pointing the issue.&lt;/p&gt;</comment>
                            <comment id="17721249" author="JIRAUSER288052" created="Wed, 10 May 2023 08:32:52 +0000"  >&lt;p&gt;Hi, I just tested the released 3.6.0 version, and this is still not working &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I will try to debug it again...&lt;/p&gt;</comment>
                            <comment id="17721323" author="reta" created="Wed, 10 May 2023 12:28:12 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echatellier&quot; class=&quot;user-hover&quot; rel=&quot;echatellier&quot;&gt;echatellier&lt;/a&gt; ,&lt;/p&gt;

&lt;p&gt;There is a way now to change the content type using `org.apache.cxf.attachment.content-type` contextual / bus property (&lt;a href=&quot;https://cxf.apache.org/docs/bus-configuration.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cxf.apache.org/docs/bus-configuration.html&lt;/a&gt;), that you could set to &quot;text/plain&quot; to preserve the older behavior. Thank you.&lt;/p&gt;</comment>
                            <comment id="17721573" author="reta" created="Thu, 11 May 2023 00:44:49 +0000"  >&lt;p&gt;Documentation update: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/CXF20DOC/JAX-RS+Multiparts&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/CXF20DOC/JAX-RS+Multiparts&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17721710" author="JIRAUSER288052" created="Thu, 11 May 2023 09:42:12 +0000"  >&lt;p&gt;Ok, thank you.&lt;/p&gt;

&lt;p&gt;Tested and it&apos;s working.&lt;/p&gt;

&lt;p&gt;And I can now see the original missing content type problem.&lt;/p&gt;</comment>
                            <comment id="17777882" author="JIRAUSER287474" created="Fri, 20 Oct 2023 17:21:49 +0000"  >&lt;p&gt;Is it possible to indicate this somewhere as a breaking change, and maybe an example using xml? It took a while to find the issue (full day) and then tracked down to &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-8627&quot; title=&quot;AttachmentDataSource should always returns a valid contentType&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-8627&quot;&gt;&lt;del&gt;CXF-8627&lt;/del&gt;&lt;/a&gt; and then this ticket. I have not been successful using the java param:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-Dorg.apache.cxf.attachment.content-type=text/plain &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Or defining the following as part of the spring xml where we define our jaxrs:server apis&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &#160; &amp;lt;cxf:bus&amp;gt;
&#160; &#160; &#160; &#160; &amp;lt;cxf:properties&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.cxf.attachment.content-type&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;text/plain&quot;&lt;/span&gt;/&amp;gt;
&#160; &#160; &#160; &#160; &amp;lt;/cxf:properties&amp;gt;
&#160; &#160; &amp;lt;/cxf:bus&amp;gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Looks like the following works for us, in case anyone else sees this:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;jaxrs:server id=&lt;span class=&quot;code-quote&quot;&gt;&quot;apiServer&quot;&lt;/span&gt; address=&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;&amp;gt;  

....

&#160; &#160; &#160; &amp;lt;jaxrs:properties&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.cxf.attachment.content-type&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;text/plain&quot;&lt;/span&gt;/&amp;gt;
&#160; &#160; &#160; &#160; &amp;lt;/jaxrs:properties&amp;gt;
&#160; &#160; &amp;lt;/jaxrs:server&amp;gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17778501" author="reta" created="Mon, 23 Oct 2023 01:36:41 +0000"  >&lt;p&gt;Thanks for the feedback &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brianandle&quot; class=&quot;user-hover&quot; rel=&quot;brianandle&quot;&gt;brianandle&lt;/a&gt; and sincere apologies for inconvenience&lt;/p&gt;

&lt;p&gt;&amp;gt; Is it possible to indicate this somewhere as a breaking change&lt;/p&gt;

&lt;p&gt;We sadly haven&apos;t done that in the right time and it is too late to backfill the release notes for already released versions. &lt;/p&gt;

&lt;p&gt;&amp;gt; Or defining the following as part of the spring xml where we define our jaxrs:server apis&lt;/p&gt;

&lt;p&gt;The bus properties should have been working as well (along with &lt;b&gt;jaxrs:properties&lt;/b&gt;), do you have a reproducer for it? &lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13417553">CXF-8627</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 3 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1042g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>