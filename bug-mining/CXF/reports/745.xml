<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:44:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-3100] HTTPConduit doesn&apos;t handle cookies when retransmitting in case of &quot;401 Unauthorized&quot; response</title>
                <link>https://issues.apache.org/jira/browse/CXF-3100</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;we are consuming a web service that requires http basic authentication and tries to establish a cookie-based session with the client. So the response to the first request is always a &quot;401 Unauthorized&quot; response including a &quot;Set-Cookie&quot; header, even if the first request already contains the basic authentication header with the correct credentials. The request is only accepted if both the basic authentication header and the cookie header with the cookie from the &quot;401 Unauthorized&quot; response are set. &lt;/p&gt;

&lt;p&gt;Calling the web service using SoapUI works fine. You can see in the log the initial request, the 401 reponse including the &quot;Set-Cookie&quot; header and the retransmitted request with the corresponding cookie header set, resulting in a successful response. Everything as expected.&lt;/p&gt;

&lt;p&gt;When using CXF, there is an infinite loop (request -&amp;gt; 401 -&amp;gt; retransmit -&amp;gt; 401 and so on) until a protocol exception is thrown (too many retransmits/redirects). The reason is that the expected cookie header is not set when retransmitting the request, even if the parameter &quot;BindingProvider.SESSION_MAINTAIN_PROPERTY&quot; is set to true.&lt;/p&gt;

&lt;p&gt;Investigating the source code of the org.apache.cxf.transport.http.HTTPConduit class I found out that when retransmitting in case of 301,302 or 401 reponses the part of the code evaluating the &quot;Set-Cookie&quot; headers of the response is never reached, which is not correct in my opinion.&lt;/p&gt;

&lt;p&gt;I did some changes to the org.apache.cxf.transport.http.HTTPConduit class (see attachment) so that it works now with the specified scenario. Is it possible to fix this overall issue in a future release? &lt;/p&gt;

&lt;p&gt;Notes:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;we are using Apache CXF 2.2.9&lt;/li&gt;
	&lt;li&gt;soap over http (with ssl) and http basic authentication&lt;/li&gt;
	&lt;li&gt;the modified org.apache.cxf.transport.http.HTTPConduit class is also based on the 2.2.9 sources&lt;/li&gt;
	&lt;li&gt;all changes of the org.apache.cxf.transport.http.HTTPConduit class are labeled &quot;// KLI:&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thanks,&lt;br/&gt;
Kevin&lt;/p&gt;</description>
                <environment></environment>
        <key id="12478642">CXF-3100</key>
            <summary>HTTPConduit doesn&apos;t handle cookies when retransmitting in case of &quot;401 Unauthorized&quot; response</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="kli">Kevin Linke</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Oct 2010 07:40:27 +0000</created>
                <updated>Mon, 6 Dec 2010 22:49:04 +0000</updated>
                            <resolved>Tue, 30 Nov 2010 16:58:36 +0000</resolved>
                                                    <fixVersion>2.2.12</fixVersion>
                    <fixVersion>2.3.1</fixVersion>
                                    <component>Transports</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12927738" author="njiang" created="Wed, 3 Nov 2010 05:06:37 +0000"  >&lt;p&gt;Hi Kevin,&lt;/p&gt;

&lt;p&gt;Thanks for you contribution.&lt;br/&gt;
Can you submit a diff file instead the whole HttpConduit.java , so I can apply the patch more easily.&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="12927798" author="kli" created="Wed, 3 Nov 2010 09:10:44 +0000"  >&lt;p&gt;Hi Willem,&lt;/p&gt;

&lt;p&gt;I added a diff file as requested. If you need another format or if you have trouble with the file (I created this on windows xp) please let me know.&lt;/p&gt;

&lt;p&gt;Please note that this patch is based on the cxf 2.2.9 sources!&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Kevin&lt;/p&gt;</comment>
                            <comment id="12932405" author="kli" created="Tue, 16 Nov 2010 10:30:30 +0000"  >&lt;p&gt;Hi Willem,&lt;/p&gt;

&lt;p&gt;I found out that my first solution didn&apos;t resolve the problem completely, so I reworked my changes and attached another version of the patched HTTPConduit file and a corresponding diff file (both with extension .v2). &lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12458725" name="HTTPConduit.diff" size="2448" author="kli" created="Wed, 3 Nov 2010 09:10:44 +0000"/>
                            <attachment id="12459695" name="HTTPConduit.diff.v2" size="2805" author="kli" created="Tue, 16 Nov 2010 10:31:29 +0000"/>
                            <attachment id="12458312" name="HTTPConduit.java" size="95501" author="kli" created="Fri, 29 Oct 2010 07:41:46 +0000"/>
                            <attachment id="12459696" name="HTTPConduit.java.v2" size="95272" author="kli" created="Tue, 16 Nov 2010 10:31:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47104</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 2 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0kl5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>118243</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>