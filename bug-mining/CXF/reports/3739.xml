<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:39:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-9037] NPE when using com.ctc.wstx.returnNullForDefaultNamespace=true</title>
                <link>https://issues.apache.org/jira/browse/CXF-9037</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I am using custom out interceptor, which make xsl transformation to serialize some elements as CDATA, my code was inspired by org.apache.cxf.feature.transform.XSLTOutInterceptor.&lt;/p&gt;

&lt;p&gt;But if I set property com.ctc.wstx.returnNullForDefaultNamespace=true, the I&apos;ve got an NPE. This property is required to fix some other issues with xml generation (without it I&apos;ve got empty namespaces xmlns=&quot;&quot; in some cases).&lt;/p&gt;

&lt;p&gt;The code bellow is the minimum example of NPE, using org.apache.cxf.staxutils.StaxSource.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.NullPointerException: Cannot invoke &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.equals(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)&quot;&lt;/span&gt; because &lt;span class=&quot;code-quote&quot;&gt;&quot;prefix&quot;&lt;/span&gt; is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; 
&#160;&#160;&#160;&#160;&#160;&#160;&#160;at net.sf.saxon.event.ReceivingContentHandler.startPrefixMapping(ReceivingContentHandler.java:300) 
&#160;&#160;&#160;&#160;&#160;&#160;&#160;at org.apache.cxf.staxutils.StaxSource.parse(StaxSource.java:145) 
&#160;&#160;&#160;&#160;&#160;&#160;&#160;at org.apache.cxf.staxutils.StaxSource.parse(StaxSource.java:259) 
&#160;&#160;&#160;&#160;&#160;&#160;&#160;at net.sf.saxon.resource.ActiveSAXSource.deliver(ActiveSAXSource.java:192) 
&#160;&#160;&#160;&#160;&#160;&#160;&#160;at net.sf.saxon.event.Sender.send(Sender.java:104) 
&#160;&#160;&#160;&#160;&#160;&#160;&#160;at net.sf.saxon.jaxp.IdentityTransformer.transform(IdentityTransformer.java:364)


&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; test;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; com.ctc.wstx.stax.WstxInputFactory;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.cxf.staxutils.StaxSource;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.xml.transform.OutputKeys;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.xml.transform.Source;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.xml.transform.Transformer;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.xml.transform.TransformerFactory;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.xml.transform.stax.StAXSource;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.xml.transform.stream.StreamResult;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.ByteArrayInputStream;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.StringWriter;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.charset.StandardCharsets;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;NpeTest
{
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
    {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; bodyXml = &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;?xml version=\&quot;&lt;/span&gt;1.0\&lt;span class=&quot;code-quote&quot;&gt;&quot;?&amp;gt;\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;soap:Envelope xmlns:soap=\&quot;&lt;/span&gt;http:&lt;span class=&quot;code-comment&quot;&gt;//schemas.xmlsoap.org/soap/envelope/\&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;gt;\n&quot;&lt;/span&gt; +
&lt;/span&gt;                &lt;span class=&quot;code-quote&quot;&gt;&quot;  &amp;lt;soap:Body&amp;gt;\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;    &amp;lt;testReq xmlns=\&quot;&lt;/span&gt;http:&lt;span class=&quot;code-comment&quot;&gt;//test.com/test\&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;gt;\n&quot;&lt;/span&gt; +
&lt;/span&gt;                &lt;span class=&quot;code-quote&quot;&gt;&quot;        &amp;lt;reqBody&amp;gt;&amp;amp;lt;&amp;amp;lt;&amp;amp;lt;&amp;amp;lt;&amp;amp;lt;&amp;lt;/reqBody&amp;gt;\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;    &amp;lt;/testReq&amp;gt;\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;  &amp;lt;/soap:Body&amp;gt;\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;/soap:Envelope&amp;gt;\n&quot;&lt;/span&gt;;

        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;com.ctc.wstx.returnNullForDefaultNamespace&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;);

        WstxInputFactory factory = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; WstxInputFactory();
        Source beforeSource = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StaxSource(factory.createXMLStreamReader(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(bodyXml.getBytes(StandardCharsets.UTF_8))));
&lt;span class=&quot;code-comment&quot;&gt;//        Source beforeSource = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StAXSource(factory.createXMLStreamReader(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(bodyXml.getBytes(StandardCharsets.UTF_8))));
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(save(beforeSource));
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; save(Source beforeSource) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
    {
        StringWriter writer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringWriter();
        StreamResult result = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StreamResult(writer);

        TransformerFactory tf = TransformerFactory.newInstance();

        Transformer transformer = tf.newTransformer();
        transformer.setOutputProperty(OutputKeys.INDENT, &lt;span class=&quot;code-quote&quot;&gt;&quot;yes&quot;&lt;/span&gt;);
        transformer.setOutputProperty(OutputKeys.STANDALONE, &lt;span class=&quot;code-quote&quot;&gt;&quot;yes&quot;&lt;/span&gt;);
        transformer.setOutputProperty(OutputKeys.CDATA_SECTION_ELEMENTS, &lt;span class=&quot;code-quote&quot;&gt;&quot;Q{http:&lt;span class=&quot;code-comment&quot;&gt;//test.com/test}reqBody&quot;&lt;/span&gt;);
&lt;/span&gt;        transformer.setOutputProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;{http:&lt;span class=&quot;code-comment&quot;&gt;//xml.apache.org/xslt}indent-amount&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;4&quot;&lt;/span&gt;);
&lt;/span&gt;
        transformer.transform(beforeSource, result);

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; writer.toString();
    }
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The stacktrace from my project is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException
&#160; &#160; &#160; &#160; at net.sf.saxon.event.ReceivingContentHandler.startPrefixMapping(ReceivingContentHandler.java:301)
&#160; &#160; &#160; &#160; at org.apache.cxf.staxutils.StaxSource.parse(StaxSource.java:145)
&#160; &#160; &#160; &#160; at org.apache.cxf.staxutils.StaxSource.parse(StaxSource.java:259)
&#160; &#160; &#160; &#160; at net.sf.saxon.resource.ActiveSAXSource.deliver(ActiveSAXSource.java:190)
&#160; &#160; &#160; &#160; at net.sf.saxon.event.Sender.send(Sender.java:105)
&#160; &#160; &#160; &#160; at net.sf.saxon.jaxp.IdentityTransformer.transform(IdentityTransformer.java:364)
&#160; &#160; &#160; &#160; at org.apache.cxf.feature.transform.XSLTUtils.transform(XSLTUtils.java:57)
&#160; &#160; &#160; &#160; at org.apache.cxf.feature.transform.XSLTOutInterceptor$XSLTCachedOutputStreamCallback.onClose(XSLTOutInterceptor.java:165)
&#160; &#160; &#160; &#160; at org.apache.cxf.io.CachedOutputStream.close(CachedOutputStream.java:219)
&#160; &#160; &#160; &#160; at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)
&#160; &#160; &#160; &#160; at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:688)
&#160; &#160; &#160; &#160; at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:63)
&#160; &#160; &#160; &#160; at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:307)
&#160; &#160; &#160; &#160; at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:530)
&#160; &#160; &#160; &#160; at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:441)
&#160; &#160; &#160; &#160; at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:356)
&#160; &#160; &#160; &#160; at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:314)
&#160; &#160; &#160; &#160; at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:96)
&#160; &#160; &#160; &#160; at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:140)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13585707">CXF-9037</key>
            <summary>NPE when using com.ctc.wstx.returnNullForDefaultNamespace=true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="reta">Andriy Redko</assignee>
                                    <reporter username="ud01">Gordon Freeman</reporter>
                        <labels>
                    </labels>
                <created>Sat, 13 Jul 2024 08:54:31 +0000</created>
                <updated>Sat, 20 Jul 2024 01:39:10 +0000</updated>
                            <resolved>Sat, 20 Jul 2024 01:39:10 +0000</resolved>
                                    <version>3.5.8</version>
                    <version>3.6.3</version>
                    <version>4.0.4</version>
                                    <fixVersion>3.5.10</fixVersion>
                    <fixVersion>3.6.5</fixVersion>
                    <fixVersion>4.0.6</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                            <attachment id="13070130" name="xmlTest.zip" size="1996" author="ud01" created="Sat, 13 Jul 2024 08:49:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 17 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1qbnc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>