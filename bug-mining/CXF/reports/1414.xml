<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:54:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-4411] Maven plugin fails wsdl2java execution with concurrent modification exception</title>
                <link>https://issues.apache.org/jira/browse/CXF-4411</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;We&apos;re getting a concurrent modification exception while running a parallel build (-T C5) using Maven 3. Reproducability is low, so it seems to be some race condition. Stack trace:&lt;/p&gt;

&lt;p&gt;build	06-Jul-2012 16:42:33	org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.cxf:cxf-codegen-plugin:2.6.1:wsdl2java (generate-sources-task-callback) on project gps-wps-process-client-takp: java.util.ConcurrentModificationException&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.maven.lifecycle.internal.LifecycleThreadedBuilder$1.call(LifecycleThreadedBuilder.java:167)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.maven.lifecycle.internal.LifecycleThreadedBuilder$1.call(LifecycleThreadedBuilder.java:163)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:315)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at java.util.concurrent.FutureTask.run(FutureTask.java:150)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:453)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:315)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at java.util.concurrent.FutureTask.run(FutureTask.java:150)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:898)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:920)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at java.lang.Thread.run(Thread.java:736)&lt;br/&gt;
build	06-Jul-2012 16:42:33	Caused by: org.apache.maven.plugin.MojoExecutionException: java.util.ConcurrentModificationException&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.cxf.maven_plugin.wsdl2java.WSDL2JavaMojo.generate(WSDL2JavaMojo.java:234)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.cxf.maven_plugin.AbstractCodegenMoho.execute(AbstractCodegenMoho.java:250)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.cxf.maven_plugin.wsdl2java.WSDL2JavaMojo.execute(WSDL2JavaMojo.java:308)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)&lt;br/&gt;
build	06-Jul-2012 16:42:33		... 13 more&lt;br/&gt;
build	06-Jul-2012 16:42:33	Caused by: org.apache.cxf.tools.common.ToolException: java.util.ConcurrentModificationException&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.cxf.tools.wsdlto.WSDLToJavaContainer.execute(WSDLToJavaContainer.java:294)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.cxf.tools.common.toolspec.ToolRunner.runTool(ToolRunner.java:103)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.cxf.tools.wsdlto.WSDLToJava.run(WSDLToJava.java:113)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.cxf.tools.wsdlto.WSDLToJava.run(WSDLToJava.java:86)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.cxf.maven_plugin.wsdl2java.WSDL2JavaMojo.generate(WSDL2JavaMojo.java:231)&lt;br/&gt;
build	06-Jul-2012 16:42:33		... 17 more&lt;br/&gt;
build	06-Jul-2012 16:42:33	Caused by: java.util.ConcurrentModificationException&lt;br/&gt;
build	06-Jul-2012 16:42:33		at java.util.LinkedHashMap$AbstractMapIterator.checkConcurrentMod(LinkedHashMap.java:136)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at java.util.LinkedHashMap$AbstractMapIterator.makeNext(LinkedHashMap.java:141)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at java.util.LinkedHashMap$ValueIterator.next(LinkedHashMap.java:214)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.cxf.bus.extension.ExtensionManagerImpl.getBeansOfType(ExtensionManagerImpl.java:299)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.cxf.bus.CXFBusImpl.getExtension(CXFBusImpl.java:99)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.cxf.tools.common.toolspec.AbstractToolContainer.getBus(AbstractToolContainer.java:191)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.cxf.tools.wsdlto.WSDLToJavaContainer.processWsdl(WSDLToJavaContainer.java:167)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.cxf.tools.wsdlto.WSDLToJavaContainer.execute(WSDLToJavaContainer.java:139)&lt;br/&gt;
build	06-Jul-2012 16:42:33		at org.apache.cxf.tools.wsdlto.WSDLToJavaContainer.execute(WSDLToJavaContainer.java:286)&lt;br/&gt;
build	06-Jul-2012 16:42:33		... 21 more&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux, IBM JVM 1.6, Builder is Atlassian Bamboo 2.7.6, Maven 3.0.4&lt;/p&gt;</environment>
        <key id="12598014">CXF-4411</key>
            <summary>Maven plugin fails wsdl2java execution with concurrent modification exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="jeroen.benckhuijsen">Jeroen Benckhuijsen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Jul 2012 11:09:27 +0000</created>
                <updated>Fri, 31 Mar 2017 19:38:48 +0000</updated>
                            <resolved>Wed, 22 Mar 2017 18:05:37 +0000</resolved>
                                    <version>2.6.1</version>
                                    <fixVersion>2.7.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13409379" author="gmazza" created="Mon, 9 Jul 2012 12:19:48 +0000"  >&lt;p&gt;I&apos;m not sure if wsdl2java is expected to be thread-safe, or even if it can be, especially in cases where the same output files are being generated from the same WSDL in multiple places.  Are you (A) generating from the same WSDL into the same output folders from multiple POMs, or are you (B) calling wsdl2java in multiple places with different WSDLs &amp;amp; different output folders, or are you (C) simply just calling wsdl2java once but the splitting up of it into multiple threads is what&apos;s causing the concurrent modification exception?&lt;/p&gt;</comment>
                            <comment id="13409510" author="jeroen.benckhuijsen" created="Mon, 9 Jul 2012 14:23:40 +0000"  >&lt;p&gt;Hi Glen, the right answer seems to be (B), wsdl2java is called from multiple poms (and thus different WSDLs/output folders). &lt;/p&gt;

&lt;p&gt;I&apos; ve been checking the code of ExtensionManagerImpl (&lt;a href=&quot;https://fisheye6.atlassian.com/browse/cxf/trunk/rt/core/src/main/java/org/apache/cxf/bus/extension/ExtensionManagerImpl.java?r=1230569&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://fisheye6.atlassian.com/browse/cxf/trunk/rt/core/src/main/java/org/apache/cxf/bus/extension/ExtensionManagerImpl.java?r=1230569&lt;/a&gt;). The cause seems to be a modification on the all field. There are a number of methods which are synchronized, but a number (load, destroy) which are not...&lt;/p&gt;</comment>
                            <comment id="13411214" author="ffang" created="Wed, 11 Jul 2012 04:10:27 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Yeah, we need &lt;/p&gt;

&lt;p&gt;option1.  add synchronized for these methods(add, load, destory) to avoid the ConcurrentModificationException.&lt;br/&gt;
Or &lt;br/&gt;
option2. we can change variable &quot;all&quot; as ConcurrentHashMap and remove most the synchronized from methods to get a better performance, but we way lose some concurrent map update in this case. &lt;/p&gt;

&lt;p&gt;I&apos;m going to change using option1&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;</comment>
                            <comment id="13411276" author="ffang" created="Wed, 11 Jul 2012 06:33:52 +0000"  >&lt;p&gt;commit fix&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1360007&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1360007&amp;amp;view=rev&lt;/a&gt; for trunk&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1360015&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1360015&amp;amp;view=rev&lt;/a&gt; for 2.6.x branch&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1360022&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1360022&amp;amp;view=rev&lt;/a&gt; for 2.5.x branch&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1360032&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1360032&amp;amp;view=rev&lt;/a&gt; for 2.4.x branch&lt;/p&gt;</comment>
                            <comment id="13412718" author="jeroen.benckhuijsen" created="Thu, 12 Jul 2012 11:42:46 +0000"  >&lt;p&gt;Thanks for the quick response, just wondering: is this gonna fix it: I.e. if there are two concurrent threads accessing this map, and one does a destroy(), some beans will probably not be found. Won&apos;t this cause another issue? (I.e. is the multi threaded design correct)&lt;/p&gt;</comment>
                            <comment id="13412756" author="dkulp" created="Thu, 12 Jul 2012 13:06:52 +0000"  >
&lt;p&gt;Jeroen,&lt;/p&gt;

&lt;p&gt;Yes, this is a bigger issue.   Each time the tool runs, it SHOULD create a new Bus and set the Thread default bus to that bus.   Then tear it down at the end.   Right now, it&apos;s just calling getDefaultBus which is then allowing a shared bus across all the threads.   When one calls shutdown, that can affect everything.&lt;/p&gt;</comment>
                            <comment id="13412760" author="ffang" created="Thu, 12 Jul 2012 13:12:52 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;The ExtensionManagerImpl is per bus,  when ExtensionManagerImpl.destroyBeans() get invoked it means the bus is shutdown, so everything associated with the bus would have gone anyway.&lt;/p&gt;

&lt;p&gt;Freeman &lt;/p&gt;</comment>
                            <comment id="13533908" author="jeroen.benckhuijsen" created="Mon, 17 Dec 2012 13:17:32 +0000"  >&lt;p&gt;Any progress on this issue? Or any pointers where to start. I can spent some time from my employer on this issue, though not indefinitely, so any hints would be welcome to get up and running &lt;/p&gt;</comment>
                            <comment id="13640211" author="jeroen.benckhuijsen" created="Wed, 24 Apr 2013 08:05:40 +0000"  >&lt;p&gt;Running in fork mode seems to fix this issue, however, there are occasionally concurrentmodificationexceptions in CommandLineUtils&lt;/p&gt;</comment>
                            <comment id="15936819" author="dkulp" created="Wed, 22 Mar 2017 18:05:37 +0000"  >&lt;p&gt;This should have been fixed in nov 2013 when the extensions were stored into concurrent maps/types.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>251235</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b65r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63110</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>