<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:49:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-3822] JAX-RS: A 406 status could should be returned for an improperly formatted Accept header</title>
                <link>https://issues.apache.org/jira/browse/CXF-3822</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;If you send an Accept header that doesn&apos;t contain a slash (i.e., /), CXF&apos;s JAX-RS implementation returns a HTTP status of 500 (Internal Server Error). Instead of this status, it would be preferred if a HTTP status of 406 (Not Acceptable) is returned.&lt;/p&gt;

&lt;p&gt;Here&apos;s the test header:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;tt&gt;Accept: foo&lt;/tt&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Here&apos;s the current response:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;tt&gt;Status Code: 500 org.apache.cxf.interceptor.Fault: Media type separator is missing&lt;/tt&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Here&apos;s the preferred response:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;tt&gt;Status Code: 406 Not Acceptable&lt;/tt&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ve attached a potential patch against trunk for this issue:&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 1.6&lt;/p&gt;</environment>
        <key id="12524499">CXF-3822</key>
            <summary>JAX-RS: A 406 status could should be returned for an improperly formatted Accept header</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="kfung">Ka-Lok Fung</reporter>
                        <labels>
                    </labels>
                <created>Sat, 24 Sep 2011 01:36:47 +0000</created>
                <updated>Wed, 19 Oct 2011 17:30:20 +0000</updated>
                            <resolved>Mon, 26 Sep 2011 16:35:30 +0000</resolved>
                                    <version>2.3.6</version>
                    <version>2.4.2</version>
                                    <fixVersion>2.3.7</fixVersion>
                    <fixVersion>2.4.3</fixVersion>
                    <fixVersion>2.5</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="900">0.25h</timeoriginalestimate>
                            <timeestimate seconds="900">0.25h</timeestimate>
                                        <comments>
                            <comment id="13113867" author="kfung" created="Sat, 24 Sep 2011 01:46:07 +0000"  >&lt;p&gt;Potential patch against trunk for review.&lt;/p&gt;</comment>
                            <comment id="13114365" author="sergey_beryozkin" created="Sun, 25 Sep 2011 21:00:23 +0000"  >&lt;p&gt;I agree 500 is a wrong status to return, but I&apos;m thinking that 400 is more appropriate, given that it&apos;s a client bug ?&lt;/p&gt;

&lt;p&gt;If we have Accept: foo and return 406, then what should happen if we have&lt;/p&gt;

&lt;p&gt;Accept: foo&lt;br/&gt;
and &lt;/p&gt;

&lt;p&gt;@Produces(&quot;foo&quot;) ?&lt;/p&gt;

&lt;p&gt;Technically, it&apos;s a match ? &lt;br/&gt;
May be we should get some clarifications at the spec level&lt;/p&gt;
</comment>
                            <comment id="13114432" author="kfung" created="Mon, 26 Sep 2011 01:49:36 +0000"  >&lt;p&gt;So the best spec would be &lt;a href=&quot;http://www.ietf.org/rfc/rfc2616.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;RFC2616: Hypertext Transfer Protocol &amp;#8211; HTTP/1.1&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;According to the spec, the Accept header needs to meet the following specification:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;       media-range    = ( &quot;*/*&quot;
                        | ( type &quot;/&quot; &quot;*&quot; )
                        | ( type &quot;/&quot; subtype )
                        ) *( &quot;;&quot; parameter )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looking at the above, it looks like the slash is mandatory.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.ietf.org/rfc/rfc2616.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;RFC2616&lt;/a&gt; also states the following:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;If an Accept header field is present,
and if the server cannot send a response which is acceptable
according to the combined Accept field value, then the server SHOULD
send a 406 (not acceptable) response.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This leads me to believe that 406 is the appropriate response to send to the client. However, the missing slash is also a client side error so 400 could be an appropriate response as well.&lt;/p&gt;

&lt;p&gt;At the end of the day, just pick one. Either one would be better than the 500 that&apos;s there right now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13114766" author="sergey_beryozkin" created="Mon, 26 Sep 2011 16:32:04 +0000"  >&lt;p&gt;Lets go for 406 for now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, given that 415 is currently returned in case of malformed Content-Type; 400 can be introduced if JAX-RS 2.0 will recommend it&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12496349" name="cxf3822.trunk.patch.diff" size="2051" author="kfung" created="Sat, 24 Sep 2011 01:46:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>760</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b7lz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63345</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>