<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:35:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-1981] Inconsistent use of logger delegation via LogUtils</title>
                <link>https://issues.apache.org/jira/browse/CXF-1981</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Even after installation of Log4jLogger delegate (via META-INF/cxf/org.apache.cxf.Logger file) some messages still are logged by java.util.logging &amp;#8211; example:&lt;/p&gt;

&lt;p&gt;14 Jan 2009 14:09:05,358 [ContainerBackgroundProcessor[StandardEngine&lt;span class=&quot;error&quot;&gt;&amp;#91;Catalina&amp;#93;&lt;/span&gt;]] INFO  org.apache.cxf.bus.spring.BusApplicationContext - Refreshing org.apache.cxf.bus.spring.BusApplicationContext@6c826c82: display name &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.cxf.bus.spring.BusApplicationContext@6c826c82&amp;#93;&lt;/span&gt;; startup date &lt;span class=&quot;error&quot;&gt;&amp;#91;Wed Jan 14 14:09:05 CET 2009&amp;#93;&lt;/span&gt;; parent: org.springframework.web.context.support.XmlWebApplicationContext@6abe6abe&lt;br/&gt;
14 Jan 2009 14:09:05,393 [ContainerBackgroundProcessor[StandardEngine&lt;span class=&quot;error&quot;&gt;&amp;#91;Catalina&amp;#93;&lt;/span&gt;]] INFO  org.apache.cxf.bus.spring.BusApplicationContext - Bean factory for application context &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.cxf.bus.spring.BusApplicationContext@6c826c82&amp;#93;&lt;/span&gt;: org.springframework.beans.factory.support.DefaultListableBeanFactory@75d275d2&lt;br/&gt;
...&lt;br/&gt;
Jan 14, 2009 2:10:03 PM org.apache.cxf.phase.PhaseInterceptorChain doIntercept&lt;br/&gt;
INFO: Application has thrown exception, unwinding now&lt;br/&gt;
org.apache.cxf.interceptor.Fault&lt;br/&gt;
	at org.apache.cxf.service.invoker.AbstractInvoker.createFault(AbstractInvoker.java:148)&lt;br/&gt;
	at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:114)&lt;br/&gt;
...&lt;/p&gt;


&lt;p&gt;Review of PhaseInterceptorChain class shows that some log messages are passed via delegating logger and other via direct call to LogUtils:&lt;/p&gt;


&lt;p&gt;public class PhaseInterceptorChain implements InterceptorChain {&lt;br/&gt;
    private static final Logger LOG = LogUtils.getL7dLogger(PhaseInterceptorChain.class); &lt;br/&gt;
...&lt;br/&gt;
    public void add(Interceptor i, boolean force) {&lt;br/&gt;
...&lt;br/&gt;
            if (LOG.isLoggable(Level.FINE)) &lt;/p&gt;
{
                LOG.fine(&quot;Adding interceptor &quot; + i + &quot; to phase &quot; + phaseName);
            }
&lt;p&gt;...&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;    public synchronized boolean doIntercept(Message message) {&lt;br/&gt;
...&lt;br/&gt;
                        if (LOG.isLoggable(Level.FINE)) &lt;/p&gt;
{ 
                            LogUtils.log(LOG, Level.FINE,
                                         &quot;Application has thrown exception, unwinding now&quot;, ex);
                        }
&lt;p&gt; else if (LOG.isLoggable(Level.INFO)) &lt;/p&gt;
{
...
    }
&lt;p&gt;}&lt;/p&gt;


&lt;p&gt;Workaround is to install SFL4J delegating JUL to Log4j however I guess it would be better clean up the code. I think that use of LogUtils.log() should be forbidden and enforcement could be done via checkstyle (marking this method as depreciaded first) &lt;del&gt;or&lt;/del&gt; introduction of AOP with aspect checking calls to illegal method.&lt;/p&gt;

&lt;p&gt;cheers,&lt;br/&gt;
andy&lt;/p&gt;</description>
                <environment></environment>
        <key id="12412377">CXF-1981</key>
            <summary>Inconsistent use of logger delegation via LogUtils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="seanoc">Sean O&apos;Callaghan</assignee>
                                    <reporter username="amichalec">Andrzej Michalec</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Jan 2009 13:36:15 +0000</created>
                <updated>Wed, 28 Jan 2009 16:48:54 +0000</updated>
                            <resolved>Mon, 26 Jan 2009 10:13:08 +0000</resolved>
                                    <version>2.2</version>
                                    <fixVersion>2.0.10</fixVersion>
                    <fixVersion>2.1.4</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12665882" author="seanoc" created="Wed, 21 Jan 2009 17:05:29 +0000"  >&lt;p&gt;Fixed &lt;a href=&quot;http://svn.apache.org/viewvc?rev=736343&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=736343&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12665993" author="dkulp" created="Wed, 21 Jan 2009 22:39:21 +0000"  >&lt;p&gt;I&apos;m re-opening this as the proper fix is to figure out why LogUtils.log(...) isn&apos;t sending it to the right logger.   &lt;/p&gt;

&lt;p&gt;There are MANY places in the code that use LogUtils.log(...).   The main reason is to get the stack traces correct if printing stack traces.   That method (or the Log4j delegator) need to be fixed.&lt;/p&gt;</comment>
                            <comment id="12666021" author="amichalec" created="Thu, 22 Jan 2009 01:09:51 +0000"  >&lt;p&gt;I agree with Dan. &lt;br/&gt;
After reviewing code I noticed that:&lt;br/&gt;
a) LogUtils.log(...) goes through LogUtils.doLog(...) to Logger.log(LogRecord record)&lt;br/&gt;
b) AbstractDelegatingLogger (being subclass of Logger) calls in that case internalLog(LogRecord)&lt;br/&gt;
c) all other methods like warning(), info() etc. call doLog(LogRecord), not internalLog(LogRecord)&lt;br/&gt;
d) difference is that doLog invokes LogRecord.setLoggerName() and then calls internalLog &amp;#8211; I think this is where problem is located; LogRecord has missed logger name and messages do not reach proper Log4j appender...&lt;/p&gt;

&lt;p&gt;I would try to to do this:&lt;/p&gt;

&lt;p&gt;public abstract class AbstractDelegatingLogger extends Logger {&lt;br/&gt;
...&lt;br/&gt;
    public void log(LogRecord record) {&lt;br/&gt;
        if (isLoggable(record.getLevel())) &lt;/p&gt;
{
            //WRONG: internalLog(record);
            doLog(record);
        }
&lt;p&gt;    }&lt;br/&gt;
...&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;cheers,&lt;br/&gt;
andy.&lt;/p&gt;</comment>
                            <comment id="12666114" author="seanoc" created="Thu, 22 Jan 2009 10:33:04 +0000"  >&lt;p&gt;Thanks for the feedback Andy.&lt;br/&gt;
I&apos;ll have another look at this.&lt;/p&gt;</comment>
                            <comment id="12667209" author="seanoc" created="Mon, 26 Jan 2009 10:13:08 +0000"  >&lt;p&gt;Made the change Andy suggested.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>50364</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 44 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1472n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232609</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>