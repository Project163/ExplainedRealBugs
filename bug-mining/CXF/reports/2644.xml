<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:17:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6561] ResourceOwnerGrantHandler: ResourceOwnerLoginHandler can&apos;t return null or throw exception</title>
                <link>https://issues.apache.org/jira/browse/CXF-6561</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;ResourceOwnerGrantHandler calls a customisable ResourceOwnerLoginHandler instance, however the `createSubject(String, String)` method declares no exceptions, and a null return value is not handled. This can possibly result in the issuing of an access token if the DataProvider doesn&apos;t check for the null subject.&lt;/p&gt;

&lt;p&gt;ResourceOwnerGrantHandler.createAccessToken(...) appears to expect that the ResourceOwnerLoginHandler will throw an `Exception` (literally any Exception), however the method signature of the ResourceOwnerLoginHandler interface doesn&apos;t allow that.&lt;/p&gt;

&lt;p&gt;I will submit a pull request with a suggested fix.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12859476">CXF-6561</key>
            <summary>ResourceOwnerGrantHandler: ResourceOwnerLoginHandler can&apos;t return null or throw exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="karlvr">Karl von Randow</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Aug 2015 23:39:13 +0000</created>
                <updated>Fri, 14 Oct 2016 14:12:10 +0000</updated>
                            <resolved>Thu, 27 Aug 2015 16:39:51 +0000</resolved>
                                    <version>3.1.2</version>
                                    <fixVersion>3.1.3</fixVersion>
                    <fixVersion>3.0.7</fixVersion>
                                    <component>JAX-RS Security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14715766" author="githubbot" created="Wed, 26 Aug 2015 23:49:21 +0000"  >&lt;p&gt;GitHub user karlvr opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/83&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/83&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6561&quot; title=&quot;ResourceOwnerGrantHandler: ResourceOwnerLoginHandler can&amp;#39;t return null or throw exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6561&quot;&gt;&lt;del&gt;CXF-6561&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6562&quot; title=&quot;ResourceOwnerGrantHandler: doesn&amp;#39;t have getter for loginHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6562&quot;&gt;&lt;del&gt;CXF-6562&lt;/del&gt;&lt;/a&gt; ResourceOwnerGrantHandler improvements&lt;/p&gt;

&lt;p&gt;    ResourceOwnerGrantHandler calls a customisable ResourceOwnerLoginHandler instance, however the `createSubject(String, String)` method declares no exceptions, and a null return value is not handled. This can possibly result in the issuing of an access token if the DataProvider doesn&apos;t check for the null subject.&lt;br/&gt;
    ResourceOwnerGrantHandler.createAccessToken(...) appears to expect that the ResourceOwnerLoginHandler will throw an `Exception` (literally any Exception), however the method signature of the ResourceOwnerLoginHandler interface doesn&apos;t allow that.&lt;/p&gt;

&lt;p&gt;    Also, ResourceOwnerGrantHandler has a setter for loginHandler but not a getter. Minor, but perhaps we should add one for completeness?&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/karlvr/cxf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/karlvr/cxf&lt;/a&gt; resource-owner-grant&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/83.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/83.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #83&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e407bc91bb0e48bf6feb6c4b12b3c7ced87a9732&lt;br/&gt;
Author: Karl von Randow &amp;lt;karl@cactuslab.com&amp;gt;&lt;br/&gt;
Date:   2015-08-26T23:45:06Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6561&quot; title=&quot;ResourceOwnerGrantHandler: ResourceOwnerLoginHandler can&amp;#39;t return null or throw exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6561&quot;&gt;&lt;del&gt;CXF-6561&lt;/del&gt;&lt;/a&gt; ResourceOwnerGrantHandler: handle null result from loginHandler&lt;/p&gt;

&lt;p&gt;    Document that ResourceOwnerLoginHandler should return null in the event that the user credentials are not valid.&lt;/p&gt;

&lt;p&gt;    There is no need to catch a RuntimeException, or any Exception, as only RuntimeExceptions (or Errors) can be thrown by the createSubject method as it has no declared exceptions.&lt;/p&gt;

&lt;p&gt;commit 62ebe027a7d0e24f4eca5da0fff93bcdea692776&lt;br/&gt;
Author: Karl von Randow &amp;lt;karl@cactuslab.com&amp;gt;&lt;br/&gt;
Date:   2015-08-26T23:47:36Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6562&quot; title=&quot;ResourceOwnerGrantHandler: doesn&amp;#39;t have getter for loginHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6562&quot;&gt;&lt;del&gt;CXF-6562&lt;/del&gt;&lt;/a&gt; ResourceOwnerGrantHandler: add getter for loginHandler&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14716995" author="githubbot" created="Thu, 27 Aug 2015 16:28:42 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/83&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/83&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14717001" author="sergey_beryozkin" created="Thu, 27 Aug 2015 16:31:34 +0000"  >&lt;p&gt;Thanks for the patch, I applied a null check but kept the exception catches with minor updates, as right now AccessTokenService handles OAuthServiceException, other runtime exceptions will escape resulting in 500.&lt;/p&gt;</comment>
                            <comment id="14717874" author="karlvr" created="Fri, 28 Aug 2015 01:27:58 +0000"  >&lt;p&gt;Brilliant, and perfect. Thank you.&lt;/p&gt;</comment>
                            <comment id="14718421" author="sergey_beryozkin" created="Fri, 28 Aug 2015 12:11:05 +0000"  >&lt;p&gt;Hi, I was thinking about it and I reckon your code without any exception catches was actually better.&lt;br/&gt;
I remember now that the the reason AccessTokenService catches OAuthServiceException only and not other runtime exceptions is to let users throw something like WebApplicationException and handle that in their WebApplicationException mappers. I vaguely recall there was a user request where they wanted to throw WebApplicationException.&lt;/p&gt;

&lt;p&gt;Therefore  ResourceOwnerGrantHandler catch blocks are indeed redundant and instead I need to tweak AccessTokenService a bit to make sure it lets WebApplicationExceptions flow further and handle other runtime exceptions locally.&lt;/p&gt;</comment>
                            <comment id="14718470" author="sergey_beryozkin" created="Fri, 28 Aug 2015 12:31:14 +0000"  >&lt;p&gt;FYI: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/cxf/commit/3c0681f2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/cxf/commit/3c0681f2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;thanks&lt;/p&gt;
</comment>
                            <comment id="14720701" author="karlvr" created="Fri, 28 Aug 2015 22:31:40 +0000"  >&lt;p&gt;Ah interesting. Sounds good. I didn&apos;t know you could do that. Always nice not to catch RuntimeException too I guess. &lt;/p&gt;

&lt;p&gt;Sent from my iPhone&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jfdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>