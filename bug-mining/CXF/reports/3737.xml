<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:39:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-9007] NullPointerException in XMLStreamDataWriter.writeNode</title>
                <link>https://issues.apache.org/jira/browse/CXF-9007</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;We&apos;re encountering sporadic weird &lt;tt&gt;NullPointerException&lt;/tt&gt; in various of our tests using different client configurations with wsdls.&#160;It seems to only occur right after initialising the client, e.g. only on the first call. I suspect it&apos;s some kind of race-condition, but I&apos;ve not been able to create a reproducer. I was hoping maybe someone from the project would have insight into why this could be happening by looking at the stacktraces. &lt;/p&gt;

&lt;p&gt;The error we&apos;re hitting appears to be here: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException: Cannot invoke &lt;span class=&quot;code-quote&quot;&gt;&quot;org.w3c.dom.Node.getOwnerDocument()&quot;&lt;/span&gt; because &lt;span class=&quot;code-quote&quot;&gt;&quot;nd&quot;&lt;/span&gt; is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.cxf.databinding.source.XMLStreamDataWriter.writeNode(XMLStreamDataWriter.java:160) ~[cxf-core-4.0.4.jar:4.0.4]
	at org.apache.cxf.databinding.source.XMLStreamDataWriter.write(XMLStreamDataWriter.java:101) ~[cxf-core-4.0.4.jar:4.0.4]
	at org.apache.cxf.databinding.source.XMLStreamDataWriter.write(XMLStreamDataWriter.java:67) ~[cxf-core-4.0.4.jar:4.0.4]
	at org.apache.cxf.databinding.source.XMLStreamDataWriter.write(XMLStreamDataWriter.java:55) ~[cxf-core-4.0.4.jar:4.0.4]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Update: we&apos;re using cxf-rt-transports-http-hc5.&lt;br/&gt;
We&apos;ve had this issue on 4.0.3 and 4.0.4. We might&apos;ve had it on previous versions as well, but I don&apos;t have build history going back that far.  &lt;/p&gt;

&lt;p&gt;JDK versions: Corretto 17 (17.0.8-amzn), Zulu 17 (17.0.10-zulu) ++&lt;/p&gt;</description>
                <environment></environment>
        <key id="13578049">CXF-9007</key>
            <summary>NullPointerException in XMLStreamDataWriter.writeNode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="reta">Andriy Redko</assignee>
                                    <reporter username="maghol">Magnus Holm</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 May 2024 09:29:05 +0000</created>
                <updated>Fri, 29 Aug 2025 13:17:49 +0000</updated>
                            <resolved>Tue, 18 Jun 2024 22:43:24 +0000</resolved>
                                    <version>4.0.3</version>
                    <version>4.0.4</version>
                                    <fixVersion>4.1.0</fixVersion>
                    <fixVersion>4.0.5</fixVersion>
                    <fixVersion>3.6.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17843442" author="reta" created="Sat, 4 May 2024 14:17:07 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maghol&quot; class=&quot;user-hover&quot; rel=&quot;maghol&quot;&gt;maghol&lt;/a&gt; , could you please clarify if the issue started to appear when have migrated from previous 4.0.x release(s)? Or you just started straight with 4.0.4. Also, could you please share what JDK you have been using? (version + vendor). Thank you.&lt;/p&gt;</comment>
                            <comment id="17843695" author="maghol" created="Mon, 6 May 2024 09:54:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt; We&apos;ve had it on 4.0.3 and 4.0.4 at least, and maybe older versions as well. I&apos;ve updated the description. We&apos;ve had it happening with different versions corretto &amp;amp; zulu JDK 17. &lt;/p&gt;</comment>
                            <comment id="17845165" author="reta" created="Fri, 10 May 2024 00:37:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maghol&quot; class=&quot;user-hover&quot; rel=&quot;maghol&quot;&gt;maghol&lt;/a&gt; I have submitted a potential fix but I cannot reproduce the problem myself, any chances you could share the test case(s) that are failing for you sporadically? Thank you.&lt;/p&gt;</comment>
                            <comment id="17848129" author="maghol" created="Tue, 21 May 2024 09:40:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt; Sorry for the delay, struggling to find time. I built your branch and re-ran tests and found out the potential fix causes a consistent failure for another test which relates to large response processing/chunking. I will set aside some time and provide you with both test-cases some time this week. Have to unwrap the setup from some internal frameworking. &lt;/p&gt;

&lt;p&gt;The new failure:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.cxf.binding.soap.SoapFault: Problems creating SAAJ object model
	at org.apache.cxf.binding.soap.saaj.SAAJInInterceptor.handleMessage(SAAJInInterceptor.java:261) ~[cxf-rt-bindings-soap-4.0.1-SNAPSHOT.jar:4.0.1.SNAPSHOT]
	at org.apache.cxf.binding.soap.saaj.SAAJInInterceptor.handleMessage(SAAJInInterceptor.java:81) ~[cxf-rt-bindings-soap-4.0.1-SNAPSHOT.jar:4.0.1.SNAPSHOT]
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:307) [cxf-core-4.0.1-SNAPSHOT.jar:4.0.1.SNAPSHOT]
	at org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:808) [cxf-core-4.0.1-SNAPSHOT.jar:4.0.1.SNAPSHOT]
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:1726) [cxf-rt-transports-http-4.0.1-SNAPSHOT.jar:4.0.1.SNAPSHOT]
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream$1.run(HTTPConduit.java:1210) [cxf-rt-transports-http-4.0.1-SNAPSHOT.jar:4.0.1.SNAPSHOT]
	at org.apache.cxf.workqueue.AutomaticWorkQueueImpl$3.run(AutomaticWorkQueueImpl.java:413) [cxf-core-4.0.1-SNAPSHOT.jar:4.0.1.SNAPSHOT]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) [?:?]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) [?:?]
	at org.apache.cxf.workqueue.AutomaticWorkQueueImpl$AWQThreadFactory$1.run(AutomaticWorkQueueImpl.java:346) [cxf-core-4.0.1-SNAPSHOT.jar:4.0.1.SNAPSHOT]
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:833) [?:?]
Caused by: com.ctc.wstx.exc.WstxEOFException: Unexpected EOF; was expecting a close tag &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; element &amp;lt;HiResponse&amp;gt;
 at [row,col {unknown-source}]: [1,16320]
	at com.ctc.wstx.sr.StreamScanner.throwUnexpectedEOF(StreamScanner.java:701) ~[woodstox-core-6.6.2.jar:6.6.2]
	at com.ctc.wstx.sr.BasicStreamReader.throwUnexpectedEOF(BasicStreamReader.java:5607) ~[woodstox-core-6.6.2.jar:6.6.2]
	at com.ctc.wstx.sr.BasicStreamReader.nextFromTree(BasicStreamReader.java:2811) ~[woodstox-core-6.6.2.jar:6.6.2]
	at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1122) ~[woodstox-core-6.6.2.jar:6.6.2]
	at org.apache.cxf.staxutils.StaxUtils.copy(StaxUtils.java:776) ~[cxf-core-4.0.1-SNAPSHOT.jar:4.0.1.SNAPSHOT]
	at org.apache.cxf.binding.soap.saaj.SAAJInInterceptor.handleMessage(SAAJInInterceptor.java:244) ~[cxf-rt-bindings-soap-4.0.1-SNAPSHOT.jar:4.0.1.SNAPSHOT]
	... 10 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17848413" author="reta" created="Wed, 22 May 2024 01:34:23 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maghol&quot; class=&quot;user-hover&quot; rel=&quot;maghol&quot;&gt;maghol&lt;/a&gt; , looking forward to test cases.&lt;/p&gt;</comment>
                            <comment id="17850912" author="maghol" created="Fri, 31 May 2024 06:19:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt; Sorry about the delay. Added a test-case for the issue in the original report here: &lt;a href=&quot;https://github.com/magnho/cxf/pull/2/commits/aefcffcb0af236308cda8c2eb4186e15b8192e8d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/magnho/cxf/pull/2/commits/aefcffcb0af236308cda8c2eb4186e15b8192e8d&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Copied in a bunch of stuff to make this as similar to our local test-case as possible. I managed to trigger the error here as well, added the test-output to the commit as well. It runs successfully 9/10 times (at least), so it&apos;s a bit of a hassle to trigger the failure. &lt;/p&gt;

&lt;p&gt;The failure in my previous post seems to be a mistake on my side. Maybe I managed to mix versions on the classpath or something, it does not fail any more. &lt;/p&gt;

&lt;p&gt;edit: Sorry for not using existing wsdls etc. couldn&apos;t get that working.&lt;/p&gt;

&lt;p&gt;edit2: Have not been able to trigger failures when running with your branch change.&lt;/p&gt;</comment>
                            <comment id="17852604" author="reta" created="Wed, 5 Jun 2024 23:52:15 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maghol&quot; class=&quot;user-hover&quot; rel=&quot;maghol&quot;&gt;maghol&lt;/a&gt; , thanks a lot for confirming, I think we could go with this small fix for now, thanks again!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13068628" name="dispatch-impl-npe.txt" size="3335" author="maghol" created="Fri, 3 May 2024 09:29:24 +0000"/>
                            <attachment id="13068625" name="interceptor-npe.txt" size="1713" author="maghol" created="Fri, 3 May 2024 09:29:20 +0000"/>
                            <attachment id="13068627" name="invoke-async-npe.txt" size="1849" author="maghol" created="Fri, 3 May 2024 09:29:20 +0000"/>
                            <attachment id="13068626" name="invoke-sync-npe.txt" size="2764" author="maghol" created="Fri, 3 May 2024 09:29:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1p0h4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>