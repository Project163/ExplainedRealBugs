<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:20:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6646] CXF 3.x WSRM message may not be retrieved from database</title>
                <link>https://issues.apache.org/jira/browse/CXF-6646</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-4866&quot; title=&quot;WSRM in combination with WS-Security: timestamp problem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-4866&quot;&gt;&lt;del&gt;CXF-4866&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-352&quot; title=&quot;Update WS-A MessageID and WS-RM  Acknowledgement headers in resent messages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-352&quot;&gt;&lt;del&gt;CXF-352&lt;/del&gt;&lt;/a&gt; changes to the RMTxStore implementation were introduced.&lt;br/&gt;
Running the JUnit Tests for rt/ws/rm with a newer Derby version, some tests will fail.&lt;br/&gt;
You can switch to version 10.8.2.2 and messages won&apos;t be recovered from database, as database connection will be released before message is read.&lt;br/&gt;
I used the CachedOutputStream to cache the message. Find attached the patch files.&lt;/p&gt;



</description>
                <environment></environment>
        <key id="12906273">CXF-6646</key>
            <summary>CXF 3.x WSRM message may not be retrieved from database</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ay">Akitoshi Yoshida</assignee>
                                    <reporter username="kairo">Kai Rommel</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Oct 2015 15:37:18 +0000</created>
                <updated>Fri, 14 Oct 2016 14:10:09 +0000</updated>
                            <resolved>Wed, 1 Jun 2016 14:13:06 +0000</resolved>
                                    <version>3.0.4</version>
                                    <fixVersion>3.0.10</fixVersion>
                    <fixVersion>3.1.7</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                    <component>WS-* Components</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14965266" author="kairo" created="Tue, 20 Oct 2015 15:39:04 +0000"  >&lt;p&gt;Patches contain a solution to overcome the issue.&lt;/p&gt;</comment>
                            <comment id="15231879" author="ay" created="Fri, 8 Apr 2016 08:42:49 +0000"  >&lt;p&gt;While looking at the change introduced with &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-4866&quot; title=&quot;WSRM in combination with WS-Security: timestamp problem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-4866&quot;&gt;&lt;del&gt;CXF-4866&lt;/del&gt;&lt;/a&gt;, it seems to require a more drastic change to fix the issue.&lt;/p&gt;

&lt;p&gt;The patch currently attached to this ticket preserves the content in some cases but it uses a complex sequence of operations and it also does not cover for the attachments.&lt;/p&gt;

&lt;p&gt;If we are to stay in the current model, one option will be to go back to use CachedOutputStream in&lt;br/&gt;
RMMessage and serialize the whole message including the attachments in&lt;br/&gt;
one blob associated with this content. In that way, the DB operation&lt;br/&gt;
is kept simpler (one table write) when storing a multipart message and&lt;br/&gt;
it also keeps the management of attachment resources simpler (no need&lt;br/&gt;
to cache the attachment streams separately).&lt;/p&gt;


</comment>
                            <comment id="15299756" author="kairo" created="Wed, 25 May 2016 09:41:20 +0000"  >&lt;p&gt;With change &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6886&quot; title=&quot;CXF 3.x WSRM attachments are not retransmitted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6886&quot;&gt;&lt;del&gt;CXF-6886&lt;/del&gt;&lt;/a&gt; attachments are now stored with soap msg as blob. The new attached patch file contains changes to use CachedOutputStream within RMMessage instead of the RewindableInputStream. This change allows to close this issue, as after the CachedOutputStream creation, the db connection can be closed.&lt;/p&gt;</comment>
                            <comment id="15310366" author="ay" created="Wed, 1 Jun 2016 14:13:06 +0000"  >&lt;p&gt;applied the provided patch.&lt;br/&gt;
thanks to kai.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12957143">CXF-6863</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12806104" name="0001-CXF-3.x-WSRM-Replace-RewindableInputStream-with-Cach.patch" size="34575" author="kairo" created="Wed, 25 May 2016 09:41:20 +0000"/>
                            <attachment id="12767607" name="0001-WSRM-enable-RMTxStore-for-different-database-impleme.patch" size="4576" author="kairo" created="Tue, 20 Oct 2015 15:39:04 +0000"/>
                            <attachment id="12767608" name="0002-WSRM-enable-RMTxStore-for-different-database-impleme.patch" size="1352" author="kairo" created="Tue, 20 Oct 2015 15:39:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2n8rb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>