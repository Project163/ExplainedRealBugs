<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:15:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6361] HttpCondiut is not detecting the redirect loop properly</title>
                <link>https://issues.apache.org/jira/browse/CXF-6361</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Hi all,&lt;/p&gt;

&lt;p&gt;in the class HTTPConduit is the detection of a redirect. I guess there is a slightly problem with the detection, when the URLs are the same:&lt;/p&gt;

&lt;p&gt;Line 1824:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;HTTPConduit.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; invalidLoopDetected = newURL.equals(lastURL); 
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!invalidLoopDetected) {
                &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; URI was used sometime earlier
&lt;/span&gt;                &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; maxSameURICount = PropertyUtils.getInteger(message, AUTO_REDIRECT_MAX_SAME_URI_COUNT);
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (maxSameURICount == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || newURLCount &amp;gt; maxSameURICount) {
                    invalidLoopDetected = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
                }
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If the URLs are the same (boolean is true), then the if part is not reached and the property AUTO_REDIRECT_MAX_SAME_URI_COUNT cannot be used.&lt;/p&gt;

&lt;p&gt;Can you change that? I think the change is just the removal of the not-sign:&lt;br/&gt;
            if (invalidLoopDetected) &lt;/p&gt;
{...}

&lt;p&gt;Best regards,&lt;br/&gt;
Thorben&lt;/p&gt;</description>
                <environment></environment>
        <key id="12822324">CXF-6361</key>
            <summary>HttpCondiut is not detecting the redirect loop properly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="azzarbad79">Thorben Witt</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Mon, 20 Apr 2015 14:07:26 +0000</created>
                <updated>Fri, 14 Oct 2016 14:23:45 +0000</updated>
                            <resolved>Tue, 21 Apr 2015 16:14:08 +0000</resolved>
                                    <version>3.0.4</version>
                    <version>2.7.15</version>
                                    <fixVersion>3.1</fixVersion>
                    <fixVersion>2.7.16</fixVersion>
                    <fixVersion>3.0.5</fixVersion>
                                    <component>Transports</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14503052" author="sergey_beryozkin" created="Mon, 20 Apr 2015 15:39:58 +0000"  >&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="14504881" author="sergey_beryozkin" created="Tue, 21 Apr 2015 12:39:06 +0000"  >&lt;p&gt;The original code is actually correct: if we have a redirect with identical URIs following one another then it is an error and the max redirect property is not supported.  But if it is a redirect and the conduit knows it happened before, example, a-b-a, with &apos;a&apos; being the last redirect, then if the max redirect property is set, say to 3, then the invocation will continue.&lt;br/&gt;
Hope it clarifies it.&lt;/p&gt;

&lt;p&gt;Do you really need supporting an auto-redirect on the same URI being used in a sequence for a limited number of times ? Example, a-a-a ?&lt;/p&gt;
</comment>
                            <comment id="14505110" author="azzarbad79" created="Tue, 21 Apr 2015 15:26:37 +0000"  >&lt;p&gt;Okay thanks for the explanation. In my case we have a redirect because of clustering and it tries to get to the right node. It uses the cookies from the load balancer and will update them with a clone id (so the URL stays completely the same).&lt;/p&gt;

&lt;p&gt;My understanding for the implementation was, that if the URLs are the same, then the check with AUTO_REDIRECT_MAX_SAME_URI_COUNT is performed. If the URLs are different, then it is not a redirect to the same URL.&lt;/p&gt;

&lt;p&gt;The check for max redirects is performed elsewhere (see line 1381):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; ((maxRetransmits &amp;lt; 0 || nretransmits &amp;lt; maxRetransmits) &amp;amp;&amp;amp; processRetransmit()) {
          nretransmits++;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There is the check with max retransmits.&lt;/p&gt;</comment>
                            <comment id="14505182" author="sergey_beryozkin" created="Tue, 21 Apr 2015 16:09:05 +0000"  >&lt;p&gt;AFAIK &apos;maxRetransmits&apos; controls a total number of redirects or authorization based retransmits.&lt;br/&gt;
AUTO_REDIRECT_MAX_SAME_URI_COUNT controls how many times the same URI can be found a multi-step redirect process provided that a given URI is not repeated twice (or more) in a row. &lt;br/&gt;
So by default, a-b-a fails because &apos;a&apos; is seen twice but AUTO_REDIRECT_MAX_SAME_URI_COUNT can be set to 2 and it will work, but say a-b-a-c-a - won&apos;t.&lt;br/&gt;
There&apos;s no way to support a redirect like a-a or a-a-a at the moment.&lt;/p&gt;

&lt;p&gt;I guess you are right, AUTO_REDIRECT_MAX_SAME_URI_COUNT can be used to allow a sequence like &apos;a-a&apos; too...&lt;/p&gt;</comment>
                            <comment id="14506562" author="azzarbad79" created="Wed, 22 Apr 2015 07:15:57 +0000"  >&lt;p&gt;Thanks for your help. Checked the code and it looks very helpful for my situation.&lt;br/&gt;
Now it is possible to use the same URL again until the counter is reached!&lt;/p&gt;</comment>
                            <comment id="14506665" author="sergey_beryozkin" created="Wed, 22 Apr 2015 08:49:00 +0000"  >&lt;p&gt;No problems, I realized afterwards the code is not optimal, no need to do multiple ifs &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, but might make sense to keep it as is for now to avoid breaking something &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2dh9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>